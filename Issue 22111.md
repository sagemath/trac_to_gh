# Issue 22111: Some Poset examples are wrong

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2017-02-10 15:00:11

CC:  jmantysalo

This violates the `Poset()` constructor: there is no `1` element:

```
L=LatticePoset({0:['a','b','c'], 'a':[1], 'b':[1], 'c':[1]})
```

(example from `src/sage/combinat/posets/lattices.py` line 1593)


---

Comment by jmantysalo created at 2017-02-10 15:37:32

Example could be better, but I can't see a real bug. It will test that `'a'` and `'b'` really are complements.

Before there was bug on `LatticePoset({'a':'b'}).complements()`, see #17138.


---

Comment by jdemeyer created at 2017-02-10 16:12:46

This is not at all about complements. It's about the meaning of the constructor

```
LatticePoset({0:['a','b','c'], 'a':[1], 'b':[1], 'c':[1]})
```


Where does the `1` come from? Is this just an abbreviation of

```
LatticePoset({0:['a','b','c'], 'a':[1], 'b':[1], 'c':[1], 1:[]})
```


I was getting doctest failures (in a different ticket #22029) with this doctest and the missing `1` is confusing me.


---

Comment by chapoton created at 2017-02-10 19:10:18

probably the doctest failures you have seen come the graph constructor wanting to sort things (#22349), and here we are mixing integers and letters..


---

Comment by jmantysalo created at 2017-02-10 19:43:19

Replying to [comment:3 jdemeyer]:
> This is not at all about complements. It's about the meaning of the constructor
> {{{
> LatticePoset({0:['a','b','c'], 'a':[1], 'b':[1], 'c':[1]})
> }}}
> 
> Where does the `1` come from? Is this just an abbreviation of
> {{{
> LatticePoset({0:['a','b','c'], 'a':[1], 'b':[1], 'c':[1], 1:[]})
> }}}

Yes. More interesting example is converting


```
Poset( ([1,2,3], [[2,3],[3,4]]) )
```


to


```
Poset( ([3], [[2,3],[3,4]]) )
```


Removing `2` does nothing. but removing `1` does, as only elements uncomparable to all others need to be specified at the element list. Sometimes I think if we should change this.


---

Comment by jdemeyer created at 2017-02-10 22:17:55

Changing component from combinatorics to documentation.


---

Comment by jmantysalo created at 2017-02-11 05:48:31

DiGraph constructor has an example

`DiGraph({1:[2,3,4],3:[4]})` -- return a digraph by associating to each vertex the list of its out-neighbors.

It is not `DiGraph({1:[2,3,4],3:[4],2:[],3:[]})`. Should we change that too? I think that nothing needs to be change. Isn't it clear that list of upper covers `{1:[2],2:[3]}` means that `3` has no upper covers?


---

Comment by jdemeyer created at 2017-02-11 13:17:53

Replying to [comment:7 jmantysalo]:
> DiGraph constructor has an example

Seriously, how is that relevant for this ticket?


---

Comment by jmantysalo created at 2017-02-12 12:24:56

Replying to [comment:8 jdemeyer]:

> Seriously, how is that relevant for this ticket?

?? `DiGraph({1:[2]})` means that vertex `2` has no outgoing edges. `Poset({1:[2]})` means that element `2` has no upper covers.


---

Comment by jdemeyer created at 2017-02-12 17:54:32

Replying to [comment:9 jmantysalo]:
> `DiGraph({1:[2]})` means that vertex `2` has no outgoing edges. `Poset({1:[2]})` means that element `2` has no upper covers.

I know that, but I don't get your point: this ticket is about `Poset`, not about `DiGraph`.


---

Comment by jmantysalo created at 2017-02-15 08:23:29

Replying to [comment:10 jdemeyer]:

> I know that, but I don't get your point: this ticket is about `Poset`, not about `DiGraph`.

But in both cases I think that the documentation needs no clarification. I think it is natural and clear not to excplicitly say that an element has no upper covers.

Hence I suggest this to be closed as wontfix.


---

Comment by tscrim created at 2017-02-15 15:19:48

The other thing is that the constructor for `Poset` feeds the data off to `DiGraph`, so the behavior there determines the behavior here.


---

Comment by jmantysalo created at 2017-02-15 15:26:31

Replying to [comment:12 tscrim]:
> The other thing is that the constructor for `Poset` feeds the data off to `DiGraph`, so the behavior there determines the behavior here.

It is not necessary, we could have a more complicated wrapper for that. And actually we already can create a digraph from a dig6 string, but it is not possible for poset.


---

Comment by jdemeyer created at 2017-02-15 19:08:35

Replying to [comment:11 jmantysalo]:
> But in both cases I think that the documentation needs no clarification.

I think it does need clarification. Maybe you are so used to it that it is obvious to you, but that doesn't mean that it's obvious to everybody.

When I first saw that example, I didn't understand it. Then I looked at the documentation of `Poset` which didn't say that such constructor was allowed. So at that point I thought there was a genuine bug in the example. Only later I realized that the example was ok, but that the documentation was not.


---

Comment by jdemeyer created at 2017-02-15 19:11:20

Replying to [comment:12 tscrim]:
> The other thing is that the constructor for `Poset` feeds the data off to `DiGraph`

If that is true, it would be a very good idea to document it! Then you could even remove the discussion of allowed input formats of `Poset` and just point to `DiGraph`.


---

Comment by jmantysalo created at 2017-05-09 09:45:01

Shall we accept


```
Poset([['a'], ['b'], ['c']])
```


? Also, currently


```
Poset( [[1],[2],[3]] )
```


gives a chain and


```
Poset( [[1],[2]] )
```


gives an error. Should we try to detect that? Or have `format`-parameter like `Graph()` has?


---

Comment by jmantysalo created at 2017-05-09 11:08:43

Here is some idea for the docstring. Examples and input section can not be separated here, I think. Also from logical viewpoint there is no "a pair as input" / "a list as input", but "explicit list of relations" / "a rule for relations" as main difference.
----
New commits:


---

Comment by jmantysalo created at 2017-09-01 11:38:42

Ping. Any comments about my idea on docstring?
