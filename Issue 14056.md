# Issue 14056: Casting a standard tableau as a tableau

archive/issues_014056.json:
```json
{
    "body": "Assignee: sage-combinat\n\nKeywords: tableau\n\nRight now, if I have a standard tableau, I can't cast it as a tableau. For instance:\n\n\n```\nsage: t = StandardTableau([[1]])\nsage: type(Tableau(t))\nsage.combinat.tableau.StandardTableaux_all_with_category.element_class\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/14260\n\n",
    "created_at": "2013-03-12T13:44:32Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Casting a standard tableau as a tableau",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14056",
    "user": "https://trac.sagemath.org/admin/accounts/users/chrisjamesberg"
}
```
Assignee: sage-combinat

Keywords: tableau

Right now, if I have a standard tableau, I can't cast it as a tableau. For instance:


```
sage: t = StandardTableau([[1]])
sage: type(Tableau(t))
sage.combinat.tableau.StandardTableaux_all_with_category.element_class
```


Issue created by migration from https://trac.sagemath.org/ticket/14260





---

archive/issue_comments_175532.json:
```json
{
    "body": "This just comes from \n\n```\nsage: t = StandardTableau([[1]])\nsage: isinstance(t,Tableau)\nTrue\n```\n\nand before trying to construct a tableau from some input this is tested... I wouldn't consider this a bug but more a feature: a standard tableau has all features of a tableau, plus extra. So for Sage users, I think this is the desired behaviour...",
    "created_at": "2013-03-12T13:49:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14056#issuecomment-175532",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

This just comes from 

```
sage: t = StandardTableau([[1]])
sage: isinstance(t,Tableau)
True
```

and before trying to construct a tableau from some input this is tested... I wouldn't consider this a bug but more a feature: a standard tableau has all features of a tableau, plus extra. So for Sage users, I think this is the desired behaviour...



---

archive/issue_comments_175533.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-03-18T20:17:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14056#issuecomment-175533",
    "user": "https://github.com/tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_175534.json:
```json
{
    "body": "This is the desired and correct behavior. Elements (such as [`Standard`]`Tableau`) are typically meant to be immutable, so something which is a standard tableau should always remain a standard tableau. Also because `Tableau` is only suppose to put a non-tableau object into a tableau, it shouldn't do anything for any class which is a subclass of `Tableau`.\n\nAlso I can't think of a good reason why you'd want to explicitly cast an object into a subclass (the concept of type casing technically doesn't exist in python). (I don't quite know what context this came up in, but the first one that comes to mind is you're trying to get an overriden method `foo(*args)` in the base class, to which you can do `Tableau.foo(t, *args)`.) Could you explain more why you want this explicit casting?",
    "created_at": "2013-03-18T20:17:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14056#issuecomment-175534",
    "user": "https://github.com/tscrim"
}
```

This is the desired and correct behavior. Elements (such as [`Standard`]`Tableau`) are typically meant to be immutable, so something which is a standard tableau should always remain a standard tableau. Also because `Tableau` is only suppose to put a non-tableau object into a tableau, it shouldn't do anything for any class which is a subclass of `Tableau`.

Also I can't think of a good reason why you'd want to explicitly cast an object into a subclass (the concept of type casing technically doesn't exist in python). (I don't quite know what context this came up in, but the first one that comes to mind is you're trying to get an overriden method `foo(*args)` in the base class, to which you can do `Tableau.foo(t, *args)`.) Could you explain more why you want this explicit casting?



---

archive/issue_events_040316.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-03-18T20:17:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14056",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14056#event-40316"
}
```



---

archive/issue_comments_175535.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2013-03-18T20:17:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14056#issuecomment-175535",
    "user": "https://github.com/tscrim"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_175536.json:
```json
{
    "body": "This casting is used all over the place. Immutability has nothing to do with it, a tuple is immutable and yet I can cast it as a list.\n\nOne can cast a Partition as a Composition:\n\n\n```\nsage: Composition(Partition([3,2,1]))\n[3, 2, 1]\nsage: isinstance(c, Composition)\nTrue\nsage: isinstance(c, Partition)\nFalse\n```\n\n\nWhich is the correct behavior?",
    "created_at": "2013-03-19T02:08:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14056#issuecomment-175536",
    "user": "https://trac.sagemath.org/admin/accounts/users/chrisjamesberg"
}
```

This casting is used all over the place. Immutability has nothing to do with it, a tuple is immutable and yet I can cast it as a list.

One can cast a Partition as a Composition:


```
sage: Composition(Partition([3,2,1]))
[3, 2, 1]
sage: isinstance(c, Composition)
True
sage: isinstance(c, Partition)
False
```


Which is the correct behavior?



---

archive/issue_comments_175537.json:
```json
{
    "body": "You're not casting when you do that, you're creating a new object altogether, including tuples/lists:\n\n```\nsage: T = tuple(1, 2, 3)\nsage: L = list(T)\nsage: L\n[1, 2, 3]\nsage: L.append(4); L\n[1, 2, 3, 4]\nsage: T\n(1, 2, 3)\n```\n\nIn python, I believe the copy is done lazily, so if it's an immutable type, it is safe to just return the original object. Sage follows this paradigm. With your example above, `Composition` and `Partition` are different classes (with methods for `Composition` not in `Partition`), and the above behavior is a reflection of this. Why isn't `Partition` a subclass of `Composition`? I think that's more of a question for Nicolas. (A guess might be because of some overhead, but I don't really know. The explicit conversion has been sufficient for me.)\n\nCasting is something which tells the program that the *same* object is a different *type*. For example in C++\n\n```c++\nclass Foo {\n};\nclass Bar : public Foo {\n   public:\n   B() { }\n};\n\nFoo *f = new Bar();\nBar *b = (Bar) f;\n```\n\nThe last line is casting because a priori, the computer doesn't know `f` is pointing to a type `Bar`, so it wouldn't know what to do. Also note that both `f` and `b` point to the same object in memory.",
    "created_at": "2013-03-19T14:12:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14056#issuecomment-175537",
    "user": "https://github.com/tscrim"
}
```

You're not casting when you do that, you're creating a new object altogether, including tuples/lists:

```
sage: T = tuple(1, 2, 3)
sage: L = list(T)
sage: L
[1, 2, 3]
sage: L.append(4); L
[1, 2, 3, 4]
sage: T
(1, 2, 3)
```

In python, I believe the copy is done lazily, so if it's an immutable type, it is safe to just return the original object. Sage follows this paradigm. With your example above, `Composition` and `Partition` are different classes (with methods for `Composition` not in `Partition`), and the above behavior is a reflection of this. Why isn't `Partition` a subclass of `Composition`? I think that's more of a question for Nicolas. (A guess might be because of some overhead, but I don't really know. The explicit conversion has been sufficient for me.)

Casting is something which tells the program that the *same* object is a different *type*. For example in C++

```c++
class Foo {
};
class Bar : public Foo {
   public:
   B() { }
};

Foo *f = new Bar();
Bar *b = (Bar) f;
```

The last line is casting because a priori, the computer doesn't know `f` is pointing to a type `Bar`, so it wouldn't know what to do. Also note that both `f` and `b` point to the same object in memory.



---

archive/issue_comments_175538.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-06-27T17:00:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14056#issuecomment-175538",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_175539.json:
```json
{
    "body": "(if you want this ticket to be closed ...)\n\nNathann",
    "created_at": "2013-06-27T17:00:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14056#issuecomment-175539",
    "user": "https://github.com/nathanncohen"
}
```

(if you want this ticket to be closed ...)

Nathann



---

archive/issue_comments_175540.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2013-08-13T08:33:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14056",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14056#issuecomment-175540",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: invalid



---

archive/issue_events_040317.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T08:33:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14056",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14056#event-40317"
}
```
