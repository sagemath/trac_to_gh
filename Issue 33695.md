# Issue 33695: Sets of unhashable elements are broken

Issue created by migration from https://trac.sagemath.org/ticket/33932

Original creator: @maxale

Original creation time: 2022-05-29 02:43:43

CC:  tscrim

Documentation says "Sets with unhashable objects work, but with less functionality". However, this functionality is actually broken in at least two ways.

First, Sets of unhashable elements fail to recognize equal elements - for example


```
S = Set([factor(10),factor(10)])
print(S)
```


prints `Set of elements of [2 * 5, 2 * 5]`, that is the resulting Set here contains two identical elements.

----

Second, Set skips the first element when it's created from an iterator of unhashable elements:


```
S = Set( [i] for i in (1..5) )
print(list(S))
```


This code prints `[[2], [3], [4], [5]]`, that is the first generated element `[1]` is missing.

A patch for the latter issue was proposed at https://ask.sagemath.org/question/62252/?answer=62285#post-id-62285 which however comes with an overhead.


---

Comment by mantepse created at 2022-06-06 21:30:53

See also #23324


---

Comment by mkoeppe created at 2022-08-31 21:06:34

The second example is fixed in #34387


---

Comment by mkoeppe created at 2022-08-31 22:13:12

The first example is a dup of #23324.


---

Comment by mkoeppe created at 2022-08-31 22:13:12

Changing status from new to needs_review.


---

Comment by tscrim created at 2022-08-31 23:17:46

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2022-09-01 02:30:35

Resolution: invalid
