# Issue 16214: Implement a better search for highest weight elements in a tensor product of cystals

Issue created by migration from Trac.

Original creator: tscrim

Original creation time: 2014-06-06 03:49:35

Assignee: sage-combinat

CC:  sage-combinat aschilling nthiery

Keywords: crystals, tensor products

Currently in a tensor product of crystals, we search through all elements and filter. However if given a highest weight element in a tensor product `a (x) b`, then `b` must be highest weight. This means we can use a backtracing algorithm to find all highest weight elements which this ticket implements.


---

Comment by tscrim created at 2014-06-06 05:46:46

Changing status from new to needs_review.


---

Comment by tscrim created at 2014-06-06 05:46:46

As far as I can tell, this is independent of #16001.

Nicolas, can you make a quick check to make sure I'm doing everything correctly? If I am, I think I've found a bug for `Modules`:

```
sage: Modules(QQ).TensorProducts()
Category of objects
```

----
New commits:


---

Comment by git created at 2014-08-16 18:05:08

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-08-16 18:13:42

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2014-08-16 18:16:30

Hey Anne,

Nicolas looked at the category code and layout today and I made the necessary changes. The only thing needing review is the backtracing algorithm in `highest_weight_crystals.py`; would you be willing to finish the review.

Thanks,

Travis


---

Comment by aschilling created at 2014-08-17 04:52:34

Changing status from needs_review to positive_review.


---

Comment by git created at 2014-08-17 05:07:20

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by git created at 2014-08-17 05:07:20

Changing status from positive_review to needs_review.


---

Comment by aschilling created at 2014-08-17 05:08:14

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-08-18 11:09:15

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2014-08-18 11:09:15


```
sage -t --long src/doc/en/thematic_tutorials/lie/crystals.rst
**********************************************************************
File "src/doc/en/thematic_tutorials/lie/crystals.rst", line 701, in doc.en.thematic_tutorials.lie.crystals
Failed example:
    T.highest_weight_vectors()
Expected:
    [[1, 1, 1], [1, 2, 1], [2, 1, 1], [3, 2, 1]]
Got:
    ([1, 1, 1], [2, 1, 1], [1, 2, 1], [3, 2, 1])
**********************************************************************
1 item had failures:
   1 of 147 in doc.en.thematic_tutorials.lie.crystals
    [113 tests, 1 failure, 1.85 s]
```



---

Comment by git created at 2014-08-18 15:04:34

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2014-08-18 15:05:02

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2014-08-19 10:39:02

Resolution: fixed
