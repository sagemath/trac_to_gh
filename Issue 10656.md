# Issue 10656: Symmetrica does not build on OpenSUSE 11.2 x86_64

archive/issues_010656.json:
```json
{
    "body": "Assignee: GeorgSWeber\n\nCC:  @mwhansen\n\nThe updated spkg moves the `-lm` compiler flag to the end of the object files and removes the `dist/` directory.\n\nhttp://www.stp.dias.ie/~vbraun/Sage/spkg/symmetrica-2.0.p6.spkg\n\nIssue created by migration from https://trac.sagemath.org/ticket/10719\n\n",
    "created_at": "2011-01-31T15:24:33Z",
    "labels": [
        "component: build",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.7.2",
    "title": "Symmetrica does not build on OpenSUSE 11.2 x86_64",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10656",
    "user": "https://github.com/vbraun"
}
```
Assignee: GeorgSWeber

CC:  @mwhansen

The updated spkg moves the `-lm` compiler flag to the end of the object files and removes the `dist/` directory.

http://www.stp.dias.ie/~vbraun/Sage/spkg/symmetrica-2.0.p6.spkg

Issue created by migration from https://trac.sagemath.org/ticket/10719





---

archive/issue_comments_111714.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-01-31T15:27:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10656#issuecomment-111714",
    "user": "https://github.com/vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_111715.json:
```json
{
    "body": "Works on Fedora 14 and t2.math. Is rather simple change...\n\nSee also: https://groups.google.com/d/topic/sage-devel/2jyWCWUn_30/discussion",
    "created_at": "2011-01-31T15:27:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10656#issuecomment-111715",
    "user": "https://github.com/vbraun"
}
```

Works on Fedora 14 and t2.math. Is rather simple change...

See also: https://groups.google.com/d/topic/sage-devel/2jyWCWUn_30/discussion



---

archive/issue_comments_111716.json:
```json
{
    "body": "for review purposes only",
    "created_at": "2011-02-01T01:08:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10656#issuecomment-111716",
    "user": "https://github.com/vbraun"
}
```

for review purposes only



---

archive/issue_comments_111717.json:
```json
{
    "body": "Attachment [makefile](tarball://root/attachments/some-uuid/ticket10719/makefile) by @vbraun created at 2011-02-01 01:10:45\n\nOk I noticed that `patches/*patch` wasn't actually applied?!?. Fixed now. Also, I rewrote the makefile and we are actually only building the static library now. Updated spkg is at the same location as above.",
    "created_at": "2011-02-01T01:10:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10656#issuecomment-111717",
    "user": "https://github.com/vbraun"
}
```

Attachment [makefile](tarball://root/attachments/some-uuid/ticket10719/makefile) by @vbraun created at 2011-02-01 01:10:45

Ok I noticed that `patches/*patch` wasn't actually applied?!?. Fixed now. Also, I rewrote the makefile and we are actually only building the static library now. Updated spkg is at the same location as above.



---

archive/issue_comments_111718.json:
```json
{
    "body": "The above spkg successfully builds on the current Ubuntu 11.04 beta, which fixes a linking problem from the p5 spkg. I'll see if I can properly review this, but the spkg does fix an important problem.",
    "created_at": "2011-02-11T00:28:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10656#issuecomment-111718",
    "user": "https://github.com/dandrake"
}
```

The above spkg successfully builds on the current Ubuntu 11.04 beta, which fixes a linking problem from the p5 spkg. I'll see if I can properly review this, but the spkg does fix an important problem.



---

archive/issue_comments_111719.json:
```json
{
    "body": "Replying to [comment:3 ddrake]:\n> The above spkg successfully builds on the current Ubuntu 11.04 beta, which fixes a linking problem from the p5 spkg. I'll see if I can properly review this, but the spkg does fix an important problem.\n\nsage-devel thread: https://groups.google.com/d/topic/sage-devel/chWfpkqj6xU/discussion",
    "created_at": "2011-02-11T00:28:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10656#issuecomment-111719",
    "user": "https://github.com/dandrake"
}
```

Replying to [comment:3 ddrake]:
> The above spkg successfully builds on the current Ubuntu 11.04 beta, which fixes a linking problem from the p5 spkg. I'll see if I can properly review this, but the spkg does fix an important problem.

sage-devel thread: https://groups.google.com/d/topic/sage-devel/chWfpkqj6xU/discussion



---

archive/issue_comments_111720.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-03-01T01:38:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10656#issuecomment-111720",
    "user": "https://github.com/dandrake"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_111721.json:
```json
{
    "body": "Here's one tiny problem: most of the files in src/ all have 400 permissions, and spkg-install copies two .h files over at the end of the build. If you rebuild symmetrica, that copying will fail because it can't overwrite the \"400\" files. I would run a `chmod 644 *` in the src/ directory of the spkg.",
    "created_at": "2011-03-01T01:38:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10656#issuecomment-111721",
    "user": "https://github.com/dandrake"
}
```

Here's one tiny problem: most of the files in src/ all have 400 permissions, and spkg-install copies two .h files over at the end of the build. If you rebuild symmetrica, that copying will fail because it can't overwrite the "400" files. I would run a `chmod 644 *` in the src/ directory of the spkg.



---

archive/issue_comments_111722.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-03-02T10:48:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10656#issuecomment-111722",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_111723.json:
```json
{
    "body": "I've upgraded the spgk. I set the permissions in src/ to 644 and added an extra chmod to the spkg-install so we don't trip over this issue again if somebody unpacks the source tarball.",
    "created_at": "2011-03-02T10:48:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10656#issuecomment-111723",
    "user": "https://github.com/vbraun"
}
```

I've upgraded the spgk. I set the permissions in src/ to 644 and added an extra chmod to the spkg-install so we don't trip over this issue again if somebody unpacks the source tarball.



---

archive/issue_comments_111724.json:
```json
{
    "body": "Attachment [spkg-install](tarball://root/attachments/some-uuid/ticket10719/spkg-install) by @vbraun created at 2011-03-02 10:49:18\n\nfor review purposes",
    "created_at": "2011-03-02T10:49:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10656#issuecomment-111724",
    "user": "https://github.com/vbraun"
}
```

Attachment [spkg-install](tarball://root/attachments/some-uuid/ticket10719/spkg-install) by @vbraun created at 2011-03-02 10:49:18

for review purposes



---

archive/issue_comments_111725.json:
```json
{
    "body": "Changing keywords from \"\" to \"library order linker semantics\".",
    "created_at": "2011-08-27T12:31:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10656#issuecomment-111725",
    "user": "https://github.com/nexttime"
}
```

Changing keywords from "" to "library order linker semantics".



---

archive/issue_comments_111726.json:
```json
{
    "body": "This patch / new spkg will also be necessary for newer Debians like e.g. Ubuntu 11.10, which feature (the good old) stricter linker semantics; cf. [comment:ticket:11674:38] ff.\n\nOur current Singular (3-1-1-4) spkg also has issues with wrong library order, namely `-ldl` and `-lkernel`. (I haven't yet checked whether this is already fixed in a newer upstream release; hopefully Sage's Singular will be upgraded during the [Sage/Singular Days (SD34)](http://wiki.sagemath.org/days34) at the end of September, see also [this sage-devel thread](http://groups.google.com/group/sage-devel/browse_thread/thread/cca0edad4b6a41aa/1f872997a159304e); cf. #10903.)",
    "created_at": "2011-08-27T12:31:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10656#issuecomment-111726",
    "user": "https://github.com/nexttime"
}
```

This patch / new spkg will also be necessary for newer Debians like e.g. Ubuntu 11.10, which feature (the good old) stricter linker semantics; cf. [comment:ticket:11674:38] ff.

Our current Singular (3-1-1-4) spkg also has issues with wrong library order, namely `-ldl` and `-lkernel`. (I haven't yet checked whether this is already fixed in a newer upstream release; hopefully Sage's Singular will be upgraded during the [Sage/Singular Days (SD34)](http://wiki.sagemath.org/days34) at the end of September, see also [this sage-devel thread](http://groups.google.com/group/sage-devel/browse_thread/thread/cca0edad4b6a41aa/1f872997a159304e); cf. #10903.)



---

archive/issue_comments_111727.json:
```json
{
    "body": "A couple of more or less minor issues:\n\n* Michael Abshoff should be removed from the spkg maintainer list.\n\n* [http://www.symmetrica.de/](http://www.symmetrica.de/) is perhaps a more stable upstream link (currently redirected to [http://www.algorithm.uni-bayreuth.de/en/research/SYMMETRICA/](http://www.algorithm.uni-bayreuth.de/en/research/SYMMETRICA/)).\n\n* `s/sort tp/sort to/` in `SPKG.txt`\n\n* `$CFLAG64` should be quoted in `[ -z $CFLAG64 ]`. (And exporting `CFLAGS` there is really redundant.)\n\n* Not all user-specified `CFLAGS` should be overridden by Sage's (e.g. `-O2` should precede `$CFLAGS` in the assignment).\n\n* The exit codes of `patch` (and `cp`) aren't checked. (`makefile` could also be patched rather than copied over. `SPKG.txt` mentions `patches/makefile.patch`, though  there's only `patches/makefile`.)\n\n* (GNU) `patch` should be added as a dependency.\n\n* `$MAKE -f makefile` is redundant.\n\n* `$SAGE_LOCAL` should be quoted.\n\n* `cp` for installation (library, headers) should use `-p`, otherwise the current umask could break permissions.\n\n* The new `makefile` removes the `test` target, which builds an executable functioning as a minimalistic test suite. (The removal also removes `-lm` completely, such that the changelog entry regarding that no longer applies.)\n\n\nThe \"usual\" superfluous trailing semicolon inside the sanity check is *of course*<sup>TM</sup> also there; `[ -z \"$SAGE_LOCAL\" ]` is also better than comparing to an empty string.",
    "created_at": "2011-08-27T13:41:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10656#issuecomment-111727",
    "user": "https://github.com/nexttime"
}
```

A couple of more or less minor issues:

* Michael Abshoff should be removed from the spkg maintainer list.

* [http://www.symmetrica.de/](http://www.symmetrica.de/) is perhaps a more stable upstream link (currently redirected to [http://www.algorithm.uni-bayreuth.de/en/research/SYMMETRICA/](http://www.algorithm.uni-bayreuth.de/en/research/SYMMETRICA/)).

* `s/sort tp/sort to/` in `SPKG.txt`

* `$CFLAG64` should be quoted in `[ -z $CFLAG64 ]`. (And exporting `CFLAGS` there is really redundant.)

* Not all user-specified `CFLAGS` should be overridden by Sage's (e.g. `-O2` should precede `$CFLAGS` in the assignment).

* The exit codes of `patch` (and `cp`) aren't checked. (`makefile` could also be patched rather than copied over. `SPKG.txt` mentions `patches/makefile.patch`, though  there's only `patches/makefile`.)

* (GNU) `patch` should be added as a dependency.

* `$MAKE -f makefile` is redundant.

* `$SAGE_LOCAL` should be quoted.

* `cp` for installation (library, headers) should use `-p`, otherwise the current umask could break permissions.

* The new `makefile` removes the `test` target, which builds an executable functioning as a minimalistic test suite. (The removal also removes `-lm` completely, such that the changelog entry regarding that no longer applies.)


The "usual" superfluous trailing semicolon inside the sanity check is *of course*<sup>TM</sup> also there; `[ -z "$SAGE_LOCAL" ]` is also better than comparing to an empty string.



---

archive/issue_comments_111728.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-08-27T13:41:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10656#issuecomment-111728",
    "user": "https://github.com/nexttime"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_111729.json:
```json
{
    "body": "Changing keywords from \"library order linker semantics\" to \"library order linker semantics Ubuntu 11.10 Oneiric Ocelot\".",
    "created_at": "2011-09-11T05:43:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10656#issuecomment-111729",
    "user": "https://github.com/nexttime"
}
```

Changing keywords from "library order linker semantics" to "library order linker semantics Ubuntu 11.10 Oneiric Ocelot".



---

archive/issue_comments_111730.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2011-09-11T05:44:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10656#issuecomment-111730",
    "user": "https://github.com/nexttime"
}
```

Changing priority from major to critical.



---

archive/issue_comments_111731.json:
```json
{
    "body": "Making this a **blocker**, since IMHO this should be fixed in the **final Sage 4.7.2**, likely to be released [right] before the final Ubuntu 11.10 (Oneiric Ocelot), in contrast to a *final* Sage 4.7.3 ...\n\n(Hereby also pinging myself...)\n\nP.S.: The description isn't up-to-date, as the current spkg doesn't use `-lm` at all, since it doesn't build the test program (which it IMHO should, as a minimalistic test suite, unless it provides and runs some other test(s), at least if `SAGE_CHECK=yes`).",
    "created_at": "2011-09-24T13:36:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10656#issuecomment-111731",
    "user": "https://github.com/nexttime"
}
```

Making this a **blocker**, since IMHO this should be fixed in the **final Sage 4.7.2**, likely to be released [right] before the final Ubuntu 11.10 (Oneiric Ocelot), in contrast to a *final* Sage 4.7.3 ...

(Hereby also pinging myself...)

P.S.: The description isn't up-to-date, as the current spkg doesn't use `-lm` at all, since it doesn't build the test program (which it IMHO should, as a minimalistic test suite, unless it provides and runs some other test(s), at least if `SAGE_CHECK=yes`).



---

archive/issue_comments_111732.json:
```json
{
    "body": "Changing priority from critical to blocker.",
    "created_at": "2011-09-24T13:36:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10656#issuecomment-111732",
    "user": "https://github.com/nexttime"
}
```

Changing priority from critical to blocker.



---

archive/issue_comments_111733.json:
```json
{
    "body": "I implemented leif's nitpicks. Also, now has a spkg-check. Updated spkg is at the same url as before.",
    "created_at": "2011-09-27T22:57:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10656#issuecomment-111733",
    "user": "https://github.com/vbraun"
}
```

I implemented leif's nitpicks. Also, now has a spkg-check. Updated spkg is at the same url as before.



---

archive/issue_comments_111734.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-09-27T22:57:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10656#issuecomment-111734",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_111735.json:
```json
{
    "body": "Changing keywords from \"library order linker semantics Ubuntu 11.10 Oneiric Ocelot\" to \"library order linker semantics Ubuntu 11.10 Oneiric Ocelot sd34\".",
    "created_at": "2011-09-29T15:39:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10656#issuecomment-111735",
    "user": "https://github.com/vbraun"
}
```

Changing keywords from "library order linker semantics Ubuntu 11.10 Oneiric Ocelot" to "library order linker semantics Ubuntu 11.10 Oneiric Ocelot sd34".



---

archive/issue_comments_111736.json:
```json
{
    "body": "Instead of adding `~*` to `.hgignore`, you should delete `spkg-check~`. ;-)\n\nAnd make `spkg-check` executable.",
    "created_at": "2011-10-04T08:21:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10656#issuecomment-111736",
    "user": "https://github.com/nexttime"
}
```

Instead of adding `~*` to `.hgignore`, you should delete `spkg-check~`. ;-)

And make `spkg-check` executable.



---

archive/issue_comments_111737.json:
```json
{
    "body": "Whats the obsession with deleting backup files, geez :-P\n\nThe new spkg is at the same URL.",
    "created_at": "2011-10-04T09:07:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10656#issuecomment-111737",
    "user": "https://github.com/vbraun"
}
```

Whats the obsession with deleting backup files, geez :-P

The new spkg is at the same URL.



---

archive/issue_comments_111738.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-10-04T09:13:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10656#issuecomment-111738",
    "user": "https://github.com/nexttime"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_111739.json:
```json
{
    "body": "Replying to [comment:15 vbraun]:\n> The new spkg is at the same URL.\n\nSorry, you were too quick (or I was too slow...):\n\n\nThe commit message looks like a copy-paste accident, but the spkg was made on 28st[sic] September anyway. :)\n\n\n\n\n`spkg-check` should also use `$MAKE`.\n\nIf you also **build** `test` in `spkg-check`, you have to setup `CFLAGS` etc. there in the same way as in `spkg-install`.\n\n`s/exitting/exiting/`.\n\nThe error message should start with \"`Error`\" (or \"`Failed`\").\n\n(The whole test could be simplified by\n\n```sh\nif ! diff spkg-check.actual spkg-check.expected; then\n    echo >&2 \"Error: The symmetrica test suite failed (see diff output above).\"\n    exit 1\n# Optionally:\n#else\n#    echo \"All tests passed.\" # or whatever\nfi\n# EOF\n```\n\n\n\n\n\nDo we need `LDFLAGS` when linking `test`?\n\nI.e., for example `-m64`, which we *could* take from `CFLAG64`, but using `LDFLAG64` (defaulting to `-m64`) would be cleaner.\n\n\n\n\nI don't like the `set +/-o errexit`, as it doesn't necessarily give a meaningful (and easy to search for) error message. Therefore we removed all instances of `set +/-e` previously.\n\nInstead, you could use the usual loop for applying the patches, exiting with an appropriate error message upon the first patch which doesn't apply:\n\n```sh\nfor patch in ../patches; do\n    patch < \"$patch\"\n    if [ $? -ne 0 ]; then\n        echo >&2 \"Error: Patch \\\"$patch\\\" failed to apply. Exiting...\n        exit 1\n    fi\ndone\n# Copy over makefile and check $?\n# or create also a *patch* for 'makefile' to be applied\n# in the loop above, too.\n```\n\n\nSimilar for the \"installation\":\n\n`spkg-install` will only exit with a non-zero status if **the last** copy command failed. You could either check each exit code, giving an appropriate error message for each individual case, or use\n\n```\nfoo &&\nbar &&\nbaz\nif [ $? -ne 0 ]; then\n    echo >&2 \"Error: Failed to install Symmetrica.\"\n    exit 1\nfi\n```\n",
    "created_at": "2011-10-04T09:13:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10656#issuecomment-111739",
    "user": "https://github.com/nexttime"
}
```

Replying to [comment:15 vbraun]:
> The new spkg is at the same URL.

Sorry, you were too quick (or I was too slow...):


The commit message looks like a copy-paste accident, but the spkg was made on 28st[sic] September anyway. :)




`spkg-check` should also use `$MAKE`.

If you also **build** `test` in `spkg-check`, you have to setup `CFLAGS` etc. there in the same way as in `spkg-install`.

`s/exitting/exiting/`.

The error message should start with "`Error`" (or "`Failed`").

(The whole test could be simplified by

```sh
if ! diff spkg-check.actual spkg-check.expected; then
    echo >&2 "Error: The symmetrica test suite failed (see diff output above)."
    exit 1
# Optionally:
#else
#    echo "All tests passed." # or whatever
fi
# EOF
```





Do we need `LDFLAGS` when linking `test`?

I.e., for example `-m64`, which we *could* take from `CFLAG64`, but using `LDFLAG64` (defaulting to `-m64`) would be cleaner.




I don't like the `set +/-o errexit`, as it doesn't necessarily give a meaningful (and easy to search for) error message. Therefore we removed all instances of `set +/-e` previously.

Instead, you could use the usual loop for applying the patches, exiting with an appropriate error message upon the first patch which doesn't apply:

```sh
for patch in ../patches; do
    patch < "$patch"
    if [ $? -ne 0 ]; then
        echo >&2 "Error: Patch \"$patch\" failed to apply. Exiting...
        exit 1
    fi
done
# Copy over makefile and check $?
# or create also a *patch* for 'makefile' to be applied
# in the loop above, too.
```


Similar for the "installation":

`spkg-install` will only exit with a non-zero status if **the last** copy command failed. You could either check each exit code, giving an appropriate error message for each individual case, or use

```
foo &&
bar &&
baz
if [ $? -ne 0 ]; then
    echo >&2 "Error: Failed to install Symmetrica."
    exit 1
fi
```




---

archive/issue_comments_111740.json:
```json
{
    "body": "Oh, should of course read `for patch in ../patches/*.patch; do ...`.",
    "created_at": "2011-10-04T09:16:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10656#issuecomment-111740",
    "user": "https://github.com/nexttime"
}
```

Oh, should of course read `for patch in ../patches/*.patch; do ...`.



---

archive/issue_comments_111741.json:
```json
{
    "body": "Well you are welcome to rewrite the spkg-install and spkg-check scripts. I'll be happy to review them.",
    "created_at": "2011-10-04T09:36:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10656#issuecomment-111741",
    "user": "https://github.com/vbraun"
}
```

Well you are welcome to rewrite the spkg-install and spkg-check scripts. I'll be happy to review them.



---

archive/issue_comments_111742.json:
```json
{
    "body": "Replying to [comment:18 vbraun]:\n> Well you are welcome to rewrite the spkg-install and spkg-check scripts. I'll be happy to review them.\n\nOk, later today.",
    "created_at": "2011-10-04T10:15:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10656#issuecomment-111742",
    "user": "https://github.com/nexttime"
}
```

Replying to [comment:18 vbraun]:
> Well you are welcome to rewrite the spkg-install and spkg-check scripts. I'll be happy to review them.

Ok, later today.



---

archive/issue_comments_111743.json:
```json
{
    "body": "New spkg is up.\n\nIf Volker is ok with my additional changes, we have a positive review.",
    "created_at": "2011-10-06T15:00:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10656#issuecomment-111743",
    "user": "https://github.com/nexttime"
}
```

New spkg is up.

If Volker is ok with my additional changes, we have a positive review.



---

archive/issue_comments_111744.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-10-06T15:00:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10656#issuecomment-111744",
    "user": "https://github.com/nexttime"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_111745.json:
```json
{
    "body": "Attachment [symmetrica-2.0.p6-p7.diff](tarball://root/attachments/some-uuid/ticket10719/symmetrica-2.0.p6-p7.diff) by @nexttime created at 2011-10-06 15:03:40\n\nDiff between Volker's p6 and my p7. For reference / review only.",
    "created_at": "2011-10-06T15:03:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10656#issuecomment-111745",
    "user": "https://github.com/nexttime"
}
```

Attachment [symmetrica-2.0.p6-p7.diff](tarball://root/attachments/some-uuid/ticket10719/symmetrica-2.0.p6-p7.diff) by @nexttime created at 2011-10-06 15:03:40

Diff between Volker's p6 and my p7. For reference / review only.



---

archive/issue_comments_111746.json:
```json
{
    "body": "I've attached a diff with my changes (for review).",
    "created_at": "2011-10-06T15:11:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10656#issuecomment-111746",
    "user": "https://github.com/nexttime"
}
```

I've attached a diff with my changes (for review).



---

archive/issue_comments_111747.json:
```json
{
    "body": "Cumulative diff between the previous p5 in Sage and the p7. For reference / review only.",
    "created_at": "2011-10-06T15:30:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10656#issuecomment-111747",
    "user": "https://github.com/nexttime"
}
```

Cumulative diff between the previous p5 in Sage and the p7. For reference / review only.



---

archive/issue_comments_111748.json:
```json
{
    "body": "Attachment [symmetrica-2.0.p5-p7.diff](tarball://root/attachments/some-uuid/ticket10719/symmetrica-2.0.p5-p7.diff) by @vbraun created at 2011-10-06 17:46:27\n\nLooks good. Even builds on Solaris/Sparc. Positive review.",
    "created_at": "2011-10-06T17:46:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10656#issuecomment-111748",
    "user": "https://github.com/vbraun"
}
```

Attachment [symmetrica-2.0.p5-p7.diff](tarball://root/attachments/some-uuid/ticket10719/symmetrica-2.0.p5-p7.diff) by @vbraun created at 2011-10-06 17:46:27

Looks good. Even builds on Solaris/Sparc. Positive review.



---

archive/issue_comments_111749.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-10-06T17:46:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10656#issuecomment-111749",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_027600.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-10-07T19:11:52Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10656",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10656#event-27600"
}
```



---

archive/issue_comments_111750.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-10-07T19:11:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10656",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10656#issuecomment-111750",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
