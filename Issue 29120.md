# Issue 29120: Add dependencies that should trigger reconfiguring

Issue created by migration from https://trac.sagemath.org/ticket/29357

Original creator: mkoeppe

Original creation time: 2020-03-18 03:55:20

CC:  embray dimpase jhpalmieri mjo

Re-configure if src/bin/sage-env-config.in changes (from #29032)


---

Comment by mkoeppe created at 2020-03-18 04:02:42

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2020-03-18 04:02:42

New commits:


---

Comment by git created at 2020-03-19 02:21:16

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by mjo created at 2020-03-20 01:18:24

Would it save future-us a bit of time if we just included all `*.in` files in the list of things that trigger a re-configure?


```
IN_FILES=$(shell find . -name .git -prune -o -type f -name '*.in' -print)
build/make/Makefile: ... $(IN_FILES)
```



---

Comment by mjo created at 2020-03-20 01:36:29

Testing that on an unclean tree shows that we need to exclude the `./local` directory, too:


```
$ find . -name .git -o -path ./local -prune -o -type f -name '*.in' -print
./build/make/Makefile-auto.in
./build/make/Makefile.in
./build/pkgs/pkgconf/patches/pkg-config.in
./build/pkgs/bzip2/patches/autotools/bzip2.pc.in
./build/pkgs/sage_conf/src/sage_conf.py.in
./build/pkgs/sage_conf/src/setup.cfg.in
./src/Makefile.in
./src/bin/sage-env-config.in
./src/MANIFEST.in
```



---

Comment by mkoeppe created at 2020-03-20 01:52:24

Running `find` in `build` should be enough.
But we just added lots of .in files that are NOT processed by `configure` (as of yet!)


---

Comment by mkoeppe created at 2020-03-20 01:53:12

I would be in favor of an explicit list here...


---

Comment by mjo created at 2020-03-20 02:34:35

Argh, I didn't realize that some `.in` files aren't processed by `./configure`. I would be in favor of an explicit list too, in that case. Can we copy/paste the `AC_CONFIG_FILES` from configure.ac, which is an explicit list?


---

Comment by mkoeppe created at 2020-03-20 02:36:53

Replying to [comment:9 mjo]:
> Can we copy/paste the `AC_CONFIG_FILES` from configure.ac, which is an explicit list?
Yes, that's the correct list of files.


---

Comment by git created at 2020-03-21 19:06:19

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2020-03-22 03:22:15

Ready for review


---

Comment by mjo created at 2020-03-24 13:01:59

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2020-03-24 15:29:02

Thanks!


---

Comment by vbraun created at 2020-03-29 00:23:55

Resolution: fixed
