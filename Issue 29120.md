# Issue 29120: Add dependencies that should trigger reconfiguring

archive/issues_029120.json:
```json
{
    "body": "CC:  embray dimpase jhpalmieri mjo\n\nRe-configure if src/bin/sage-env-config.in changes (from #29032)\n\nIssue created by migration from https://trac.sagemath.org/ticket/29357\n\n",
    "created_at": "2020-03-18T03:55:20Z",
    "labels": [
        "build: configure",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "Add dependencies that should trigger reconfiguring",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29120",
    "user": "mkoeppe"
}
```
CC:  embray dimpase jhpalmieri mjo

Re-configure if src/bin/sage-env-config.in changes (from #29032)

Issue created by migration from https://trac.sagemath.org/ticket/29357





---

archive/issue_comments_412292.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-03-18T04:02:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29120#issuecomment-412292",
    "user": "mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_412293.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-03-18T04:02:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29120#issuecomment-412293",
    "user": "mkoeppe"
}
```

New commits:



---

archive/issue_comments_412294.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-03-19T02:21:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29120#issuecomment-412294",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_412295.json:
```json
{
    "body": "Would it save future-us a bit of time if we just included all `*.in` files in the list of things that trigger a re-configure?\n\n\n```\nIN_FILES=$(shell find . -name .git -prune -o -type f -name '*.in' -print)\nbuild/make/Makefile: ... $(IN_FILES)\n```\n",
    "created_at": "2020-03-20T01:18:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29120#issuecomment-412295",
    "user": "mjo"
}
```

Would it save future-us a bit of time if we just included all `*.in` files in the list of things that trigger a re-configure?


```
IN_FILES=$(shell find . -name .git -prune -o -type f -name '*.in' -print)
build/make/Makefile: ... $(IN_FILES)
```




---

archive/issue_comments_412296.json:
```json
{
    "body": "Testing that on an unclean tree shows that we need to exclude the `./local` directory, too:\n\n\n```\n$ find . -name .git -o -path ./local -prune -o -type f -name '*.in' -print\n./build/make/Makefile-auto.in\n./build/make/Makefile.in\n./build/pkgs/pkgconf/patches/pkg-config.in\n./build/pkgs/bzip2/patches/autotools/bzip2.pc.in\n./build/pkgs/sage_conf/src/sage_conf.py.in\n./build/pkgs/sage_conf/src/setup.cfg.in\n./src/Makefile.in\n./src/bin/sage-env-config.in\n./src/MANIFEST.in\n```\n",
    "created_at": "2020-03-20T01:36:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29120#issuecomment-412296",
    "user": "mjo"
}
```

Testing that on an unclean tree shows that we need to exclude the `./local` directory, too:


```
$ find . -name .git -o -path ./local -prune -o -type f -name '*.in' -print
./build/make/Makefile-auto.in
./build/make/Makefile.in
./build/pkgs/pkgconf/patches/pkg-config.in
./build/pkgs/bzip2/patches/autotools/bzip2.pc.in
./build/pkgs/sage_conf/src/sage_conf.py.in
./build/pkgs/sage_conf/src/setup.cfg.in
./src/Makefile.in
./src/bin/sage-env-config.in
./src/MANIFEST.in
```




---

archive/issue_comments_412297.json:
```json
{
    "body": "Running `find` in `build` should be enough.\nBut we just added lots of .in files that are NOT processed by `configure` (as of yet!)",
    "created_at": "2020-03-20T01:52:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29120#issuecomment-412297",
    "user": "mkoeppe"
}
```

Running `find` in `build` should be enough.
But we just added lots of .in files that are NOT processed by `configure` (as of yet!)



---

archive/issue_comments_412298.json:
```json
{
    "body": "I would be in favor of an explicit list here...",
    "created_at": "2020-03-20T01:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29120#issuecomment-412298",
    "user": "mkoeppe"
}
```

I would be in favor of an explicit list here...



---

archive/issue_comments_412299.json:
```json
{
    "body": "Argh, I didn't realize that some `.in` files aren't processed by `./configure`. I would be in favor of an explicit list too, in that case. Can we copy/paste the `AC_CONFIG_FILES` from configure.ac, which is an explicit list?",
    "created_at": "2020-03-20T02:34:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29120#issuecomment-412299",
    "user": "mjo"
}
```

Argh, I didn't realize that some `.in` files aren't processed by `./configure`. I would be in favor of an explicit list too, in that case. Can we copy/paste the `AC_CONFIG_FILES` from configure.ac, which is an explicit list?



---

archive/issue_comments_412300.json:
```json
{
    "body": "Replying to [comment:9 mjo]:\n> Can we copy/paste the `AC_CONFIG_FILES` from configure.ac, which is an explicit list?\nYes, that's the correct list of files.",
    "created_at": "2020-03-20T02:36:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29120#issuecomment-412300",
    "user": "mkoeppe"
}
```

Replying to [comment:9 mjo]:
> Can we copy/paste the `AC_CONFIG_FILES` from configure.ac, which is an explicit list?
Yes, that's the correct list of files.



---

archive/issue_comments_412301.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-21T19:06:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29120#issuecomment-412301",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_412302.json:
```json
{
    "body": "Ready for review",
    "created_at": "2020-03-22T03:22:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29120#issuecomment-412302",
    "user": "mkoeppe"
}
```

Ready for review



---

archive/issue_comments_412303.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-03-24T13:01:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29120#issuecomment-412303",
    "user": "mjo"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_412304.json:
```json
{
    "body": "Thanks!",
    "created_at": "2020-03-24T15:29:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29120#issuecomment-412304",
    "user": "mkoeppe"
}
```

Thanks!



---

archive/issue_comments_412305.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-03-29T00:23:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29120#issuecomment-412305",
    "user": "vbraun"
}
```

Resolution: fixed
