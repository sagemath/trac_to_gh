# Issue 14371: Improve ./sage -t --new

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2013-05-13 11:12:56

Assignee: roed

CC:  roed

1. The filenames should be filtered: `./sage -t --new` shouldn't test files which normally should't be tested (non-Python files or "nodoctest" files).

2. It would be cool if Mercurial queue was supported: test all files changed in the patch on top of the queue.


---

Comment by jdemeyer created at 2013-05-13 13:15:43

Changing status from new to needs_review.


---

Attachment

David, do you feel like reviewing this one?


---

Comment by roed created at 2013-05-24 15:39:01

Changing status from needs_review to positive_review.


---

Comment by roed created at 2013-05-24 15:39:01

There are some weird plugin failures, but I don't think they're actually valid (it says there's a problem with doctest continuations and with building the documentation....)

I'm happy to give it a positive review.


---

Comment by jdemeyer created at 2013-05-29 06:51:45

Resolution: fixed


---

Comment by fbissey created at 2020-02-17 00:02:02

Sorry for raising a dead ticket. Was there any special reason it had to be named `nodoctest.py` and by that I mean specifically the `.py` part. Was the idea that it could contain real python code? Any objection if I was removing or changing the extension?


---

Comment by roed created at 2020-02-17 01:08:26

I don't think there was any particular reason for the .py extension, and I have no objection if you want to change it.


---

Comment by fbissey created at 2020-02-17 01:14:40

Thanks. Any suggestion for an extension? 

At the moment those files when they exists have to be manually installed on distros - their folder usually don't have an `__init__.py` so they are not picked up by distutils unless you add them to `package_data`. In turn, they are not automatically byte-compiled which triggers QA warnings. And when you look at the file themselves, they are not real python files in the first place so the byte-compiling is not useful.
