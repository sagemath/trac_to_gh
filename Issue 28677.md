# Issue 28677: default_mip_solver: Allow solver = a callable

Issue created by migration from https://trac.sagemath.org/ticket/28914

Original creator: mkoeppe

Original creation time: 2019-12-27 04:48:19

CC:  dimpase dcoudert tmonteil vbraun

`sage.numerical.backends.generic_backend.get_solver` and `MixedIntegerLinearProgram(solver=...)` already accept a callable (such as a class inheriting from `GenericBackend`) instead of strings such as `'glpk'`:

```
    sage: from sage.numerical.backends.glpk_backend import GLPKBackend
    sage: MixedIntegerLinearProgram(solver=GLPKBackend)
```

But `default_mip_solver` only accepts strings.

```
    sage: from sage.numerical.backends.glpk_backend import GLPKBackend
    sage: default_mip_solver(GLPKBackend)
   AttributeError: type object 'sage.numerical.backends.glpk_backend.GLPKBackend' has no attribute 'capitalize'
```

Directly changing the module variable containing the setting also does not work; `get_solver` breaks in that case:

```
    sage: from sage.numerical.backends.glpk_backend import GLPKBackend
    sage: import sage.numerical.backends.generic_backend as gb
    sage: gb.default_solver = GLPKBackend
    sage: MixedIntegerLinearProgram()
    ... generic_backend.pyx in sage.numerical.backends.generic_backend.get_solver 
   1798 
   1799     else:
-> 1800         raise ValueError("'solver' should be set to 'GLPK', 'GLPK/exact', 'Coin', 'CPLEX', 'CVXOPT', 'Gurobi', 'PPL', 'InteractiveLP', None (in which case the default one is used), or a callable.")

ValueError: 'solver' should be set to 'GLPK', 'GLPK/exact', 'Coin', 'CPLEX', 'CVXOPT', 'Gurobi', 'PPL', 'InteractiveLP', None (in which case the default one is used), or a callable.
```





---

Comment by mkoeppe created at 2019-12-27 05:15:23

New commits:


---

Comment by mkoeppe created at 2019-12-27 05:15:23

Changing status from new to needs_review.


---

Comment by tscrim created at 2019-12-27 16:43:27

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2019-12-27 16:43:27

LGTM.


---

Comment by mkoeppe created at 2019-12-27 16:53:50

Thank you! Hoping that we can still get this into 9.0.


---

Comment by chapoton created at 2020-01-01 21:01:32

9.0 is out


---

Comment by vbraun created at 2020-01-05 15:47:26

Resolution: fixed
