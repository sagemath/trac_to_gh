# Issue 29704: Modularization of sagelib: Break out a separate package sage-repl

archive/issues_029704.json:
```json
{
    "body": "CC:  @kwankyu @tobiasdiez @kliem @orlitzky @dimpase @jhpalmieri @kiwifb\n\nThis package would package at least the following:\n- `sage.repl` (and hence depends on on basic rings such as `ZZ`, hence on `sage-categories` (#29865))\n- `sage.doctest` (which depends on `sage.repl`)\n- `sage.misc.sage_input`\n- ??\n\nIssue created by migration from https://trac.sagemath.org/ticket/29941\n\n",
    "created_at": "2020-06-22T23:56:19Z",
    "labels": [
        "component: refactoring"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.7",
    "title": "Modularization of sagelib: Break out a separate package sage-repl",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29704",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @kwankyu @tobiasdiez @kliem @orlitzky @dimpase @jhpalmieri @kiwifb

This package would package at least the following:
- `sage.repl` (and hence depends on on basic rings such as `ZZ`, hence on `sage-categories` (#29865))
- `sage.doctest` (which depends on `sage.repl`)
- `sage.misc.sage_input`
- ??

Issue created by migration from https://trac.sagemath.org/ticket/29941





---

archive/issue_comments_421380.json:
```json
{
    "body": "Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111",
    "created_at": "2020-12-06T18:17:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421380",
    "user": "https://github.com/mkoeppe"
}
```

Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111



---

archive/issue_comments_421381.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd111\".",
    "created_at": "2020-12-06T18:17:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421381",
    "user": "https://github.com/mkoeppe"
}
```

Changing keywords from "" to "sd111".



---

archive/issue_comments_421382.json:
```json
{
    "body": "Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421382",
    "user": "https://github.com/mkoeppe"
}
```

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_421383.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-27T06:20:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421383",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421384.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-11-27T06:21:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421384",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_421385.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-28T00:00:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421385",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421386.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2021-12-05T03:32:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421386",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_421387.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-05T03:43:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421387",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421388.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-05T08:34:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421388",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421389.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-05T09:07:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421389",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421390.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-05T19:29:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421390",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421391.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-05T21:34:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421391",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421392.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-05T21:50:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421392",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421393.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-05T21:59:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421393",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421394.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-05T22:13:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421394",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421395.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-05T23:04:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421395",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421396.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-06T01:12:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421396",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421397.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2021-12-06T19:28:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421397",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_421398.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-06T19:48:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421398",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421399.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-06T20:22:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421399",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421400.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-07T02:52:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421400",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421401.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-08T00:28:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421401",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421402.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-12-11T07:00:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421402",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_421403.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-11T08:11:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421403",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421404.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-13T04:10:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421404",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421405.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2021-12-13T06:59:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421405",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_421406.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2021-12-18T06:24:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421406",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_421407.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-01-02T22:56:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421407",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421408.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-01-23T02:03:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421408",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421409.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-02-20T21:43:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421409",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_421410.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2022-05-04T19:05:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421410",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_421411.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-04T19:09:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421411",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421412.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2022-05-04T20:46:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421412",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_421413.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-05-04T20:47:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421413",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_421414.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-04T21:02:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421414",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421415.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-05-04T21:05:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421415",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_421416.json:
```json
{
    "body": "\n```\n  File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/pkgs/sagemath-repl/.tox/py39/lib/python3.9/site-packages/sage/repl/all.py\", line 1, in <module>\n    from sage.misc.lazy_import import lazy_import\nModuleNotFoundError: No module named 'sage.misc.lazy_import'\n```\n",
    "created_at": "2022-05-04T21:09:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421416",
    "user": "https://github.com/mkoeppe"
}
```


```
  File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/pkgs/sagemath-repl/.tox/py39/lib/python3.9/site-packages/sage/repl/all.py", line 1, in <module>
    from sage.misc.lazy_import import lazy_import
ModuleNotFoundError: No module named 'sage.misc.lazy_import'
```




---

archive/issue_comments_421417.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-05-04T21:09:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421417",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_421418.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-04T21:52:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421418",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421419.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-04T22:10:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421419",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421420.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-05-04T22:24:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421420",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_421421.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-04T22:43:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421421",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421422.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-04T23:28:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421422",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421423.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2022-05-05T05:34:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421423",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_421424.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2022-05-05T18:18:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421424",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_421425.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-05-05T18:23:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421425",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_421426.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-05T18:52:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421426",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421427.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-05-05T18:53:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421427",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_421428.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-05T19:04:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421428",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421429.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-05T20:31:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421429",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421430.json:
```json
{
    "body": "the 1st test fails:\n\n```\n$ ./bootstrap && ./sage -sh -c '(cd pkgs/sagemath-environment && SAGE_NUM_THREADS=8 tox -r -v -v -v -e py39)'\n...\n  copying sage/features/latex.py -> build/lib/sage/features\n  copying sage/features/graph_generators.py -> build/lib/sage/features\n  copying sage/features/pkg_systems.py -> build/lib/sage/features\n  running build_scripts\n  creating build/scripts-3.9\n  error: [Errno 2] No such file or directory: 'bin/sage'\n  error: subprocess-exited-with-error\n  \n  \u00d7 Building wheel for sagemath-environment (pyproject.toml) did not run successfully.\n  \u2502 exit code: 1\n  \u2570\u2500> See above for output.\n  \n  note: This error originates from a subprocess, and is likely not a problem with pip.\n  full command: /Users/dima/sage/pkgs/sagemath-environment/.tox/py39/bin/python /Users/dima/sage/pkgs/sagemath-environment/.tox/py39/lib/python3.9/site-packages/pip/_vendor/pep517/in_process/_in_process.py build_wheel /var/folders/lh/tzyg2vbn4z99vg__rg2_t_f80000gs/T/tmp_aul7hyy\n  cwd: /private/var/folders/lh/tzyg2vbn4z99vg__rg2_t_f80000gs/T/pip-req-build-tveamdav\n  Building wheel for sagemath-environment (pyproject.toml) ... error\n  ERROR: Failed building wheel for sagemath-environment\nFailed to build sagemath-environment\nERROR: Could not build wheels for sagemath-environment, which is required to install pyproject.toml-based projects\nERROR: invocation failed (exit code 1)\npy39 finish: installpkg /Users/dima/sage/pkgs/sagemath-environment/.tox/.tmp/package/1/sagemath-environment-9.6rc3.tar.gz after 6.46 seconds\n______________________________________________________________________ summary ______________________________________________________________________\nERROR:   py39: InvocationError for command /Users/dima/sage/pkgs/sagemath-environment/.tox/py39/bin/python -m pip install --exists-action w -v .tox/.tmp/package/1/sagemath-environment-9.6rc3.tar.gz (exited with code 1)\n```\n",
    "created_at": "2022-05-05T20:53:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421430",
    "user": "https://github.com/dimpase"
}
```

the 1st test fails:

```
$ ./bootstrap && ./sage -sh -c '(cd pkgs/sagemath-environment && SAGE_NUM_THREADS=8 tox -r -v -v -v -e py39)'
...
  copying sage/features/latex.py -> build/lib/sage/features
  copying sage/features/graph_generators.py -> build/lib/sage/features
  copying sage/features/pkg_systems.py -> build/lib/sage/features
  running build_scripts
  creating build/scripts-3.9
  error: [Errno 2] No such file or directory: 'bin/sage'
  error: subprocess-exited-with-error
  
  × Building wheel for sagemath-environment (pyproject.toml) did not run successfully.
  │ exit code: 1
  ╰─> See above for output.
  
  note: This error originates from a subprocess, and is likely not a problem with pip.
  full command: /Users/dima/sage/pkgs/sagemath-environment/.tox/py39/bin/python /Users/dima/sage/pkgs/sagemath-environment/.tox/py39/lib/python3.9/site-packages/pip/_vendor/pep517/in_process/_in_process.py build_wheel /var/folders/lh/tzyg2vbn4z99vg__rg2_t_f80000gs/T/tmp_aul7hyy
  cwd: /private/var/folders/lh/tzyg2vbn4z99vg__rg2_t_f80000gs/T/pip-req-build-tveamdav
  Building wheel for sagemath-environment (pyproject.toml) ... error
  ERROR: Failed building wheel for sagemath-environment
Failed to build sagemath-environment
ERROR: Could not build wheels for sagemath-environment, which is required to install pyproject.toml-based projects
ERROR: invocation failed (exit code 1)
py39 finish: installpkg /Users/dima/sage/pkgs/sagemath-environment/.tox/.tmp/package/1/sagemath-environment-9.6rc3.tar.gz after 6.46 seconds
______________________________________________________________________ summary ______________________________________________________________________
ERROR:   py39: InvocationError for command /Users/dima/sage/pkgs/sagemath-environment/.tox/py39/bin/python -m pip install --exists-action w -v .tox/.tmp/package/1/sagemath-environment-9.6rc3.tar.gz (exited with code 1)
```




---

archive/issue_comments_421431.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-05T20:54:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421431",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421432.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-05T20:55:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421432",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421433.json:
```json
{
    "body": "Replying to [comment:98 dimpase]:\n> the 1st test fails:\n> {{{\n>   error: [Errno 2] No such file or directory: 'bin/sage'\n> }}}\n\nThanks for testing! I had forgotten to add one file. Fixed now",
    "created_at": "2022-05-05T20:56:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421433",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:98 dimpase]:
> the 1st test fails:
> {{{
>   error: [Errno 2] No such file or directory: 'bin/sage'
> }}}

Thanks for testing! I had forgotten to add one file. Fixed now



---

archive/issue_comments_421434.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-06T00:52:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421434",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421435.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-06T01:20:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421435",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421436.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-06T03:52:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421436",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421437.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-06T04:20:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421437",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421438.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-06T06:44:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421438",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421439.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-06T07:13:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421439",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421440.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-05-06T10:09:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421440",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_421441.json:
```json
{
    "body": "lgtm",
    "created_at": "2022-05-06T10:09:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421441",
    "user": "https://github.com/dimpase"
}
```

lgtm



---

archive/issue_comments_421442.json:
```json
{
    "body": "Thank you!",
    "created_at": "2022-05-06T14:58:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421442",
    "user": "https://github.com/mkoeppe"
}
```

Thank you!



---

archive/issue_comments_421443.json:
```json
{
    "body": "I spoke too soon, sorry. This broke `make sagelib`, something with `ECL_CFLAGS` or so:\n\n```\n$ make sagelib-clean sagelib-uninstall\n$ make sagelib\n...\n[sagelib-9.6.rc3] 11303 | static char __pyx_doc_4sage_7cpython_6string_bytes_to_str[] = \"bytes_to_str(b, encoding=None, errors=None) -> str\\nFile: sage/cpython/string.pxd (starting at line 28)\\n\\n    Convert ``bytes`` to ``str``.\\n\\n    This decodes the given ``bytes`` to a Python 3 unicode ``str`` using\\n    the specified encoding.  It is a no-op on ``str`` input.\\n\\n    EXAMPLES::\\n\\n        sage: from sage.cpython.string import bytes_to_str\\n        sage: s = bytes_to_str(b'\\\\xcf\\\\x80')\\n        sage: s == u'\\317\\200'\\n        True\\n        sage: bytes_to_str([])\\n        Traceback (most recent call last):\\n        ...\\n        TypeError: expected bytes, list found\\n    \";\n[sagelib-9.6.rc3]       |             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n[sagelib-9.6.rc3] gcc: warning: ECL_CFLAGS: linker input file unused because linking not done\n[sagelib-9.6.rc3] gcc: error: ECL_CFLAGS: linker input file not found: No such file or directory\n[sagelib-9.6.rc3] error: Command \"gcc -Wno-unused-result -Wsign-compare -DDYNAMIC_ANNOTATIONS_ENABLED=1 -DNDEBUG -O2 -fexceptions -g -grecord-gcc-switches -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -Wp,-D_GLIBCXX_ASSERTIONS -fstack-protector-strong -m64 -mtune=generic -fasynchronous-unwind-tables -fstack-clash-protection -fcf-protection -D_GNU_SOURCE -fPIC -fwrapv -O2 -fexceptions -g -grecord-gcc-switches -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -Wp,-D_GLIBCXX_ASSERTIONS -fstack-protector-strong -m64 -mtune=generic -fasynchronous-unwind-tables -fstack-clash-protection -fcf-protection -D_GNU_SOURCE -fPIC -fwrapv -O2 -fexceptions -g -grecord-gcc-switches -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -Wp,-D_GLIBCXX_ASSERTIONS -fstack-protector-strong -m64 -mtune=generic -fasynchronous-unwind-tables -fstack-clash-protection -fcf-protection -D_GNU_SOURCE -fPIC -fwrapv -g -O2 -fPIC -Isage/libs -IECL_INCDIR -I./sage/cpython -Isage/cpython -I/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/cysignals -I/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard -I/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/numpy/core/include -I/usr/include/python3.9 -Ibuild/cythonized -I/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/local/var/lib/sage/venv-python3.9/include -I/usr/include/python3.9 -c build/cythonized/sage/libs/ecl.c -o build/temp.linux-x86_64-3.9/build/cythonized/sage/libs/ecl.o -fno-strict-aliasing -DCYTHON_CLINE_IN_TRACEBACK=1 ECL_CFLAGS -std=c99\" failed with exit status 1\n[sagelib-9.6.rc3] \n[sagelib-9.6.rc3] real\t0m7.340s\n[sagelib-9.6.rc3] user\t0m5.870s\n[sagelib-9.6.rc3] sys\t0m1.481s\nmake[4]: *** [Makefile:2946: sagelib-SAGE_VENV-no-deps] Error 1\n```\n",
    "created_at": "2022-05-06T16:05:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421443",
    "user": "https://github.com/dimpase"
}
```

I spoke too soon, sorry. This broke `make sagelib`, something with `ECL_CFLAGS` or so:

```
$ make sagelib-clean sagelib-uninstall
$ make sagelib
...
[sagelib-9.6.rc3] 11303 | static char __pyx_doc_4sage_7cpython_6string_bytes_to_str[] = "bytes_to_str(b, encoding=None, errors=None) -> str\nFile: sage/cpython/string.pxd (starting at line 28)\n\n    Convert ``bytes`` to ``str``.\n\n    This decodes the given ``bytes`` to a Python 3 unicode ``str`` using\n    the specified encoding.  It is a no-op on ``str`` input.\n\n    EXAMPLES::\n\n        sage: from sage.cpython.string import bytes_to_str\n        sage: s = bytes_to_str(b'\\xcf\\x80')\n        sage: s == u'\317\200'\n        True\n        sage: bytes_to_str([])\n        Traceback (most recent call last):\n        ...\n        TypeError: expected bytes, list found\n    ";
[sagelib-9.6.rc3]       |             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[sagelib-9.6.rc3] gcc: warning: ECL_CFLAGS: linker input file unused because linking not done
[sagelib-9.6.rc3] gcc: error: ECL_CFLAGS: linker input file not found: No such file or directory
[sagelib-9.6.rc3] error: Command "gcc -Wno-unused-result -Wsign-compare -DDYNAMIC_ANNOTATIONS_ENABLED=1 -DNDEBUG -O2 -fexceptions -g -grecord-gcc-switches -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -Wp,-D_GLIBCXX_ASSERTIONS -fstack-protector-strong -m64 -mtune=generic -fasynchronous-unwind-tables -fstack-clash-protection -fcf-protection -D_GNU_SOURCE -fPIC -fwrapv -O2 -fexceptions -g -grecord-gcc-switches -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -Wp,-D_GLIBCXX_ASSERTIONS -fstack-protector-strong -m64 -mtune=generic -fasynchronous-unwind-tables -fstack-clash-protection -fcf-protection -D_GNU_SOURCE -fPIC -fwrapv -O2 -fexceptions -g -grecord-gcc-switches -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -Wp,-D_GLIBCXX_ASSERTIONS -fstack-protector-strong -m64 -mtune=generic -fasynchronous-unwind-tables -fstack-clash-protection -fcf-protection -D_GNU_SOURCE -fPIC -fwrapv -g -O2 -fPIC -Isage/libs -IECL_INCDIR -I./sage/cpython -Isage/cpython -I/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/cysignals -I/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard -I/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/numpy/core/include -I/usr/include/python3.9 -Ibuild/cythonized -I/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/local/var/lib/sage/venv-python3.9/include -I/usr/include/python3.9 -c build/cythonized/sage/libs/ecl.c -o build/temp.linux-x86_64-3.9/build/cythonized/sage/libs/ecl.o -fno-strict-aliasing -DCYTHON_CLINE_IN_TRACEBACK=1 ECL_CFLAGS -std=c99" failed with exit status 1
[sagelib-9.6.rc3] 
[sagelib-9.6.rc3] real	0m7.340s
[sagelib-9.6.rc3] user	0m5.870s
[sagelib-9.6.rc3] sys	0m1.481s
make[4]: *** [Makefile:2946: sagelib-SAGE_VENV-no-deps] Error 1
```




---

archive/issue_comments_421444.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2022-05-06T16:05:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421444",
    "user": "https://github.com/dimpase"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_421445.json:
```json
{
    "body": "this was already in #33803",
    "created_at": "2022-05-06T16:07:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421445",
    "user": "https://github.com/dimpase"
}
```

this was already in #33803



---

archive/issue_comments_421446.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-06T16:38:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421446",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421447.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-05-06T16:58:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421447",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_421448.json:
```json
{
    "body": "with the latest changes I see\n\n```\nModuleNotFoundError: No module named 'sage.all__sagemath_repl'\n(lots of doctest failures are expected)\n```\n\nIf this is OK, feel free to turn it to positive review.\n\nOtherwise, OK.",
    "created_at": "2022-05-06T17:05:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421448",
    "user": "https://github.com/dimpase"
}
```

with the latest changes I see

```
ModuleNotFoundError: No module named 'sage.all__sagemath_repl'
(lots of doctest failures are expected)
```

If this is OK, feel free to turn it to positive review.

Otherwise, OK.



---

archive/issue_comments_421449.json:
```json
{
    "body": "Replying to [comment:115 dimpase]:\n> with the latest changes I see\n> {{{\n> ModuleNotFoundError: No module named 'sage.all__sagemath_repl'\n> (lots of doctest failures are expected)\n> }}}\n\nThis is not OK - full log please",
    "created_at": "2022-05-06T17:49:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421449",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:115 dimpase]:
> with the latest changes I see
> {{{
> ModuleNotFoundError: No module named 'sage.all__sagemath_repl'
> (lots of doctest failures are expected)
> }}}

This is not OK - full log please



---

archive/issue_comments_421450.json:
```json
{
    "body": "Attachment [err.log](tarball://root/attachments/some-uuid/ticket29941/err.log) by @dimpase created at 2022-05-06 22:37:51\n\nThis is on Fedora 34. \nSame branch works fine on macOS...",
    "created_at": "2022-05-06T22:37:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421450",
    "user": "https://github.com/dimpase"
}
```

Attachment [err.log](tarball://root/attachments/some-uuid/ticket29941/err.log) by @dimpase created at 2022-05-06 22:37:51

This is on Fedora 34. 
Same branch works fine on macOS...



---

archive/issue_comments_421451.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-06T23:13:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421451",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421452.json:
```json
{
    "body": "Thanks for the log! I have a workaround here. Proper fix in #28925.",
    "created_at": "2022-05-06T23:14:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421452",
    "user": "https://github.com/mkoeppe"
}
```

Thanks for the log! I have a workaround here. Proper fix in #28925.



---

archive/issue_comments_421453.json:
```json
{
    "body": "I still get a similar error, with your latest branch.\n\n```\nFeatures to be detected: 4ti2,benzene,bliss,buckygen,conway_polynomials,csdp,database_cremona_ellcurve,database_cremona_mini_ellcurve,database_jones_numfield,database_knotinfo,dvipng,gfan,graphviz,imagemagick,jupymake,kenzo,latte_int,lrslib,mcqd,meataxe,nauty,palp,pandoc,pdf2svg,pdftocairo,plantri,polytopes_db,polytopes_db_4d,pynormaliz,python_igraph,rubiks,sage.combinat,sage.geometry.polyhedron,sage.graphs,sage.groups,sage.plot,sage.rings.number_field,sage.rings.padics,sage.rings.real_double,sage.symbolic,sage_numerical_backends_coin,sagemath_doc_html,sphinx,tdlib\nDoctesting 57 files.\nTraceback (most recent call last):\n  File \"/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-repl/.tox/py39/bin/sage-runtests\", line 151, in <module>\n    err = DC.run()\n  File \"/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-repl/.tox/py39/lib64/python3.9/site-packages/sage/doctest/control.py\", line 1348, in run\n    self.run_doctests()\n  File \"/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-repl/.tox/py39/lib64/python3.9/site-packages/sage/doctest/control.py\", line 1044, in run_doctests\n    self.dispatcher = DocTestDispatcher(self)\n  File \"/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-repl/.tox/py39/lib64/python3.9/site-packages/sage/doctest/forker.py\", line 1626, in __init__\n    init_sage(controller)\n  File \"/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-repl/.tox/py39/lib64/python3.9/site-packages/sage/doctest/forker.py\", line 193, in init_sage\n    controller.load_environment()\n  File \"/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-repl/.tox/py39/lib64/python3.9/site-packages/sage/doctest/control.py\", line 583, in load_environment\n    return import_module(self.options.environment)\n  File \"/usr/lib64/python3.9/importlib/__init__.py\", line 127, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"<frozen importlib._bootstrap>\", line 1030, in _gcd_import\n  File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\n  File \"<frozen importlib._bootstrap>\", line 986, in _find_and_load_unlocked\n  File \"<frozen importlib._bootstrap>\", line 680, in _load_unlocked\n  File \"<frozen importlib._bootstrap_external>\", line 850, in exec_module\n  File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n  File \"/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-repl/.tox/py39/lib64/python3.9/site-packages/sage/all__sagemath_repl.py\", line 2, in <module>\n    from .all__sagemath_environment import *\nModuleNotFoundError: No module named 'sage.all__sagemath_environment'\n```\n",
    "created_at": "2022-05-07T08:52:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421453",
    "user": "https://github.com/dimpase"
}
```

I still get a similar error, with your latest branch.

```
Features to be detected: 4ti2,benzene,bliss,buckygen,conway_polynomials,csdp,database_cremona_ellcurve,database_cremona_mini_ellcurve,database_jones_numfield,database_knotinfo,dvipng,gfan,graphviz,imagemagick,jupymake,kenzo,latte_int,lrslib,mcqd,meataxe,nauty,palp,pandoc,pdf2svg,pdftocairo,plantri,polytopes_db,polytopes_db_4d,pynormaliz,python_igraph,rubiks,sage.combinat,sage.geometry.polyhedron,sage.graphs,sage.groups,sage.plot,sage.rings.number_field,sage.rings.padics,sage.rings.real_double,sage.symbolic,sage_numerical_backends_coin,sagemath_doc_html,sphinx,tdlib
Doctesting 57 files.
Traceback (most recent call last):
  File "/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-repl/.tox/py39/bin/sage-runtests", line 151, in <module>
    err = DC.run()
  File "/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-repl/.tox/py39/lib64/python3.9/site-packages/sage/doctest/control.py", line 1348, in run
    self.run_doctests()
  File "/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-repl/.tox/py39/lib64/python3.9/site-packages/sage/doctest/control.py", line 1044, in run_doctests
    self.dispatcher = DocTestDispatcher(self)
  File "/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-repl/.tox/py39/lib64/python3.9/site-packages/sage/doctest/forker.py", line 1626, in __init__
    init_sage(controller)
  File "/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-repl/.tox/py39/lib64/python3.9/site-packages/sage/doctest/forker.py", line 193, in init_sage
    controller.load_environment()
  File "/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-repl/.tox/py39/lib64/python3.9/site-packages/sage/doctest/control.py", line 583, in load_environment
    return import_module(self.options.environment)
  File "/usr/lib64/python3.9/importlib/__init__.py", line 127, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 1030, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
  File "<frozen importlib._bootstrap>", line 986, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 680, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 850, in exec_module
  File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
  File "/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-repl/.tox/py39/lib64/python3.9/site-packages/sage/all__sagemath_repl.py", line 2, in <module>
    from .all__sagemath_environment import *
ModuleNotFoundError: No module named 'sage.all__sagemath_environment'
```




---

archive/issue_comments_421454.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-07T16:52:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421454",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421455.json:
```json
{
    "body": "Thanks for testing - I think I've got everything covered now",
    "created_at": "2022-05-07T16:53:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421455",
    "user": "https://github.com/mkoeppe"
}
```

Thanks for testing - I think I've got everything covered now



---

archive/issue_comments_421456.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-05-07T17:03:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421456",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_421457.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-07T17:47:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421457",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421458.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-07T18:16:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421458",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421459.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-05-07T18:17:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421459",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_421460.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-08T12:47:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421460",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421461.json:
```json
{
    "body": "lgtm",
    "created_at": "2022-05-09T11:08:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421461",
    "user": "https://github.com/dimpase"
}
```

lgtm



---

archive/issue_comments_421462.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-05-09T11:08:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421462",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_421463.json:
```json
{
    "body": "Thank you!",
    "created_at": "2022-05-09T17:02:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421463",
    "user": "https://github.com/mkoeppe"
}
```

Thank you!



---

archive/issue_comments_421464.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2022-05-15T22:01:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421464",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_421465.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2022-05-15T22:01:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421465",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_421466.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-05-15T22:08:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421466",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_421467.json:
```json
{
    "body": "trivial merge",
    "created_at": "2022-05-15T22:08:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421467",
    "user": "https://github.com/mkoeppe"
}
```

trivial merge



---

archive/issue_comments_421468.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2022-05-15T22:32:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421468",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_421469.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2022-05-15T22:32:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421469",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_421470.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-05-15T22:32:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421470",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_421471.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2022-05-26T23:29:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421471",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_421472.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2022-05-26T23:29:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421472",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_421473.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-05-26T23:29:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421473",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_421474.json:
```json
{
    "body": "Not the only fail but e.g.:\n\n```\n**********************************************************************\nFile \"src/sage/misc/lazy_attribute.pyx\", line 89, in sage.misc.lazy_attribute._lazy_attribute._sage_src_lines_\nFailed example:\n    lines\nExpected:\n    81\nGot:\n    89\n**********************************************************************\n1 item had failures:\n   1 of   6 in sage.misc.lazy_attribute._lazy_attribute._sage_src_lines_\n    [100 tests, 1 failure, 2.55 s]\n----------------------------------------------------------------------\nsage -t --long --warn-long 46.9 --random-seed=123 src/sage/misc/lazy_attribute.pyx  # 1 doctest failed\n----------------------------------------------------------------------\n```\n",
    "created_at": "2022-05-28T11:16:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421474",
    "user": "https://github.com/vbraun"
}
```

Not the only fail but e.g.:

```
**********************************************************************
File "src/sage/misc/lazy_attribute.pyx", line 89, in sage.misc.lazy_attribute._lazy_attribute._sage_src_lines_
Failed example:
    lines
Expected:
    81
Got:
    89
**********************************************************************
1 item had failures:
   1 of   6 in sage.misc.lazy_attribute._lazy_attribute._sage_src_lines_
    [100 tests, 1 failure, 2.55 s]
----------------------------------------------------------------------
sage -t --long --warn-long 46.9 --random-seed=123 src/sage/misc/lazy_attribute.pyx  # 1 doctest failed
----------------------------------------------------------------------
```




---

archive/issue_comments_421475.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2022-05-28T11:16:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421475",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_421476.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-28T17:37:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421476",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_421477.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-05-28T17:37:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421477",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_421478.json:
```json
{
    "body": "The failure in sage/doctest/forker.py is unrelated, fixed in #33917.",
    "created_at": "2022-05-28T17:39:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421478",
    "user": "https://github.com/mkoeppe"
}
```

The failure in sage/doctest/forker.py is unrelated, fixed in #33917.



---

archive/issue_comments_421479.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-05-29T21:40:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421479",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_421480.json:
```json
{
    "body": "OK",
    "created_at": "2022-05-29T21:40:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421480",
    "user": "https://github.com/dimpase"
}
```

OK



---

archive/issue_events_027397.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2022-06-12T12:17:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29704#event-27397"
}
```



---

archive/issue_comments_421481.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-06-12T12:17:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29704#issuecomment-421481",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
