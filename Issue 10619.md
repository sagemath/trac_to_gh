# Issue 10619: Categories for FreeModule's

archive/issues_010619.json:
```json
{
    "body": "Assignee: nthiery\n\nCC:  darij\n\nKeywords: FreeModule, ModulesWithBasis\n\nPut FreeModule in the category ModulesWithBasis(), and implement all the related methods. This should make FreeModule and CombinatorialFreeModule compatible and consistent.\n\nThere might be some compatibility issues to handle.\n\nIssue created by migration from https://trac.sagemath.org/ticket/10672\n\n",
    "created_at": "2011-01-21T14:53:53Z",
    "labels": [
        "categories",
        "major",
        "enhancement"
    ],
    "title": "Categories for FreeModule's",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10619",
    "user": "nthiery"
}
```
Assignee: nthiery

CC:  darij

Keywords: FreeModule, ModulesWithBasis

Put FreeModule in the category ModulesWithBasis(), and implement all the related methods. This should make FreeModule and CombinatorialFreeModule compatible and consistent.

There might be some compatibility issues to handle.

Issue created by migration from https://trac.sagemath.org/ticket/10672





---

archive/issue_comments_111337.json:
```json
{
    "body": "Attachment [trac_10672-free_module_category-ts.patch](tarball://root/attachments/some-uuid/ticket10672/trac_10672-free_module_category-ts.patch) by tscrim created at 2013-09-23 02:21:35",
    "created_at": "2013-09-23T02:21:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10619#issuecomment-111337",
    "user": "tscrim"
}
```

Attachment [trac_10672-free_module_category-ts.patch](tarball://root/attachments/some-uuid/ticket10672/trac_10672-free_module_category-ts.patch) by tscrim created at 2013-09-23 02:21:35



---

archive/issue_comments_111338.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-09-23T02:23:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10619#issuecomment-111338",
    "user": "tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_111339.json:
```json
{
    "body": "I put `VectorSpaces` in the category `ModulesWithBasis` because `FreeModules` is already an alias for `ModulesWithBasis`. There doesn't seem to be any compatibility issues that I noticed.",
    "created_at": "2013-09-23T02:23:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10619#issuecomment-111339",
    "user": "tscrim"
}
```

I put `VectorSpaces` in the category `ModulesWithBasis` because `FreeModules` is already an alias for `ModulesWithBasis`. There doesn't seem to be any compatibility issues that I noticed.



---

archive/issue_comments_111340.json:
```json
{
    "body": "Thanks for working on this! A big part of the ticket is in \"and implement all the related methods\". The point is to have all the zillion little utilities of ModulesWithBasis (term, monomial, sum_of_terms, leading_term, __iter__, ...) also work for plain FreeModules.\n\nMy guess is that the main incompatibility that needs to be discussed is about __iter__. Indeed, as far as I remember:\n\n```\n      for x in v:\n          ...\n```\n\niterates over pairs for \"Combinatorial\" free modules(like a iteritems of dictionaries), whereas it iterates over coefficients for plain free modules. So we have to decide on which interface we want and how to handle backward compatibility.\n\nCheers\n\n\nGranted: ModulesWithBasis should have appropriate abstract methods and tests so that, if an implementation does not provide the required methods, the testsuite barks.",
    "created_at": "2013-09-23T07:03:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10619#issuecomment-111340",
    "user": "nthiery"
}
```

Thanks for working on this! A big part of the ticket is in "and implement all the related methods". The point is to have all the zillion little utilities of ModulesWithBasis (term, monomial, sum_of_terms, leading_term, __iter__, ...) also work for plain FreeModules.

My guess is that the main incompatibility that needs to be discussed is about __iter__. Indeed, as far as I remember:

```
      for x in v:
          ...
```

iterates over pairs for "Combinatorial" free modules(like a iteritems of dictionaries), whereas it iterates over coefficients for plain free modules. So we have to decide on which interface we want and how to handle backward compatibility.

Cheers


Granted: ModulesWithBasis should have appropriate abstract methods and tests so that, if an implementation does not provide the required methods, the testsuite barks.



---

archive/issue_comments_111341.json:
```json
{
    "body": "As the patchbot indicates, this patch does not pass tests. Though it seems good otherwise `:-P`\n\nNathann",
    "created_at": "2013-12-25T21:17:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10619#issuecomment-111341",
    "user": "ncohen"
}
```

As the patchbot indicates, this patch does not pass tests. Though it seems good otherwise `:-P`

Nathann



---

archive/issue_comments_111342.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-12-25T21:17:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10619#issuecomment-111342",
    "user": "ncohen"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_111343.json:
```json
{
    "body": "See also http://trac.sagemath.org/ticket/18310#comment:13 for a few issues we will need to double check for.",
    "created_at": "2015-05-18T12:03:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10619#issuecomment-111343",
    "user": "nthiery"
}
```

See also http://trac.sagemath.org/ticket/18310#comment:13 for a few issues we will need to double check for.



---

archive/issue_comments_111344.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-10-25T17:55:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10619#issuecomment-111344",
    "user": "tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_111345.json:
```json
{
    "body": "There is still a minor issue with `__iter__`, however we can avoid those in code by using `monomial_coefficients()` which give the consistent behavior. I also think we can leave the issues raised in #18310 to be handled there and once `submodule` supports coordinate rings...\n----\nLast 10 new commits:",
    "created_at": "2015-10-25T17:55:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10619#issuecomment-111345",
    "user": "tscrim"
}
```

There is still a minor issue with `__iter__`, however we can avoid those in code by using `monomial_coefficients()` which give the consistent behavior. I also think we can leave the issues raised in #18310 to be handled there and once `submodule` supports coordinate rings...
----
Last 10 new commits:



---

archive/issue_comments_111346.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-10-25T18:09:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10619#issuecomment-111346",
    "user": "darij"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_111347.json:
```json
{
    "body": "LGTM (it is really just the last commit; everything else is from #18066).\n\nThe heisenberg.py part of #16820 relies on this patch, so that'll serve as a doctest.",
    "created_at": "2015-10-25T18:10:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10619#issuecomment-111347",
    "user": "darij"
}
```

LGTM (it is really just the last commit; everything else is from #18066).

The heisenberg.py part of #16820 relies on this patch, so that'll serve as a doctest.



---

archive/issue_comments_111348.json:
```json
{
    "body": "Reviewer name",
    "created_at": "2015-10-26T20:08:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10619#issuecomment-111348",
    "user": "vbraun"
}
```

Reviewer name



---

archive/issue_comments_111349.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-10-26T20:08:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10619#issuecomment-111349",
    "user": "vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_111350.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2015-10-26T21:46:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10619#issuecomment-111350",
    "user": "tscrim"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_111351.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-10-27T22:53:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10619#issuecomment-111351",
    "user": "vbraun"
}
```

Resolution: fixed
