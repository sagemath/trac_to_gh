# Issue 10619: Categories for FreeModule's

Issue created by migration from https://trac.sagemath.org/ticket/10672

Original creator: nthiery

Original creation time: 2011-01-21 14:53:53

Assignee: nthiery

CC:  darij

Keywords: FreeModule, ModulesWithBasis

Put FreeModule in the category ModulesWithBasis(), and implement all the related methods. This should make FreeModule and CombinatorialFreeModule compatible and consistent.

There might be some compatibility issues to handle.


---

Attachment


---

Comment by tscrim created at 2013-09-23 02:23:06

Changing status from new to needs_review.


---

Comment by tscrim created at 2013-09-23 02:23:06

I put `VectorSpaces` in the category `ModulesWithBasis` because `FreeModules` is already an alias for `ModulesWithBasis`. There doesn't seem to be any compatibility issues that I noticed.


---

Comment by nthiery created at 2013-09-23 07:03:18

Thanks for working on this! A big part of the ticket is in "and implement all the related methods". The point is to have all the zillion little utilities of ModulesWithBasis (term, monomial, sum_of_terms, leading_term, __iter__, ...) also work for plain FreeModules.

My guess is that the main incompatibility that needs to be discussed is about __iter__. Indeed, as far as I remember:

```
      for x in v:
          ...
```

iterates over pairs for "Combinatorial" free modules(like a iteritems of dictionaries), whereas it iterates over coefficients for plain free modules. So we have to decide on which interface we want and how to handle backward compatibility.

Cheers


Granted: ModulesWithBasis should have appropriate abstract methods and tests so that, if an implementation does not provide the required methods, the testsuite barks.


---

Comment by ncohen created at 2013-12-25 21:17:08

As the patchbot indicates, this patch does not pass tests. Though it seems good otherwise `:-P`

Nathann


---

Comment by ncohen created at 2013-12-25 21:17:08

Changing status from needs_review to needs_work.


---

Comment by nthiery created at 2015-05-18 12:03:44

See also http://trac.sagemath.org/ticket/18310#comment:13 for a few issues we will need to double check for.


---

Comment by tscrim created at 2015-10-25 17:55:58

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2015-10-25 17:55:58

There is still a minor issue with `__iter__`, however we can avoid those in code by using `monomial_coefficients()` which give the consistent behavior. I also think we can leave the issues raised in #18310 to be handled there and once `submodule` supports coordinate rings...
----
Last 10 new commits:


---

Comment by darij created at 2015-10-25 18:09:45

Changing status from needs_review to positive_review.


---

Comment by darij created at 2015-10-25 18:10:24

LGTM (it is really just the last commit; everything else is from #18066).

The heisenberg.py part of #16820 relies on this patch, so that'll serve as a doctest.


---

Comment by vbraun created at 2015-10-26 20:08:14

Reviewer name


---

Comment by vbraun created at 2015-10-26 20:08:14

Changing status from positive_review to needs_work.


---

Comment by tscrim created at 2015-10-26 21:46:17

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2015-10-27 22:53:17

Resolution: fixed
