# Issue 11911: Add a TikZ-tex output method for 2d and 3d polytopes

archive/issues_011911.json:
```json
{
    "body": "Assignee: mhampton\n\nKeywords: TikZ, polytope\n\nI recently had to draw polytopes for my work.\n\nMany drawing tools already exist. But none of them satisfied me.\n\nSo far, I wrote a method that takes a polytope in 3d and a view-angle (taken from Jmol) and outputs a .tex file containing a TikZ image of the polytope.\n\nThe method should also be able to deal with 2-polytopes.\n\nThe result is highly customizable: colors, edge style, vertices style, etc...\n\nIssue created by migration from https://trac.sagemath.org/ticket/12083\n\n",
    "created_at": "2011-11-25T17:31:49Z",
    "labels": [
        "geometry",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.13",
    "title": "Add a TikZ-tex output method for 2d and 3d polytopes",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11911",
    "user": "jipilab"
}
```
Assignee: mhampton

Keywords: TikZ, polytope

I recently had to draw polytopes for my work.

Many drawing tools already exist. But none of them satisfied me.

So far, I wrote a method that takes a polytope in 3d and a view-angle (taken from Jmol) and outputs a .tex file containing a TikZ image of the polytope.

The method should also be able to deal with 2-polytopes.

The result is highly customizable: colors, edge style, vertices style, etc...

Issue created by migration from https://trac.sagemath.org/ticket/12083





---

archive/issue_comments_136503.json:
```json
{
    "body": "Do you have a ready patch already? Such functionality can be quite awesome in conjunction with SageTeX!",
    "created_at": "2011-11-25T19:48:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11911#issuecomment-136503",
    "user": "novoselt"
}
```

Do you have a ready patch already? Such functionality can be quite awesome in conjunction with SageTeX!



---

archive/issue_comments_136504.json:
```json
{
    "body": "I just need to adapt the code a little bit. It is already mostly written and works with 'quite' big examples: A3,B3 and H3 permutahedra.\n\nI just need to sit and do it: it should be there in a week or so...",
    "created_at": "2011-11-25T20:17:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11911#issuecomment-136504",
    "user": "jipilab"
}
```

I just need to adapt the code a little bit. It is already mostly written and works with 'quite' big examples: A3,B3 and H3 permutahedra.

I just need to sit and do it: it should be there in a week or so...



---

archive/issue_comments_136505.json:
```json
{
    "body": "Attachment [trac12083_tikz_polytope.patch](tarball://root/attachments/some-uuid/ticket12083/trac12083_tikz_polytope.patch) by jipilab created at 2011-12-04 17:15:03\n\nAddition of tikz method for polyhedron",
    "created_at": "2011-12-04T17:15:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11911#issuecomment-136505",
    "user": "jipilab"
}
```

Attachment [trac12083_tikz_polytope.patch](tarball://root/attachments/some-uuid/ticket12083/trac12083_tikz_polytope.patch) by jipilab created at 2011-12-04 17:15:03

Addition of tikz method for polyhedron



---

archive/issue_comments_136506.json:
```json
{
    "body": "Here is the patch. Please test it with your favorite 2d and 3d polytopes!",
    "created_at": "2011-12-04T17:17:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11911#issuecomment-136506",
    "user": "jipilab"
}
```

Here is the patch. Please test it with your favorite 2d and 3d polytopes!



---

archive/issue_comments_136507.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-12-04T17:17:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11911#issuecomment-136507",
    "user": "jipilab"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_136508.json:
```json
{
    "body": "Attachment [trac12083_tikz_polytope.2.patch](tarball://root/attachments/some-uuid/ticket12083/trac12083_tikz_polytope.2.patch) by jipilab created at 2011-12-04 17:22:38\n\nAddition of tikz method for polyhedron",
    "created_at": "2011-12-04T17:22:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11911#issuecomment-136508",
    "user": "jipilab"
}
```

Attachment [trac12083_tikz_polytope.2.patch](tarball://root/attachments/some-uuid/ticket12083/trac12083_tikz_polytope.2.patch) by jipilab created at 2011-12-04 17:22:38

Addition of tikz method for polyhedron



---

archive/issue_comments_136509.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-02-10T17:59:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11911#issuecomment-136509",
    "user": "slabbe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_136510.json:
```json
{
    "body": "1. Testing the file `polyhedra.py` creates junk in the working directory.\n\n\n```\ncd sage-4.8/devel/sage-slabbe/sage/geometry \nsage -t polyhedra.py\nls *.tex \npolytope-tikz.tex       polytope-tikz2.tex      polytope-tikz3.tex               \n```\n\n\nSaving files in your test is not necessary. I suggest you do the test like this instead :\n\n\n```python\nsage: P1 = polytopes.small_rhombicuboctahedron()   \nsage: t = P1.tikz([1,3,5], 175, scale=4)           \nsage: type(t)                                      \n<type 'str'>                                       \nsage: print '\\n'.join(t.splitlines()[:4])          \n\\begin{tikzpicture}%                               \n        [x={(-0.939161cm, 0.244762cm)},            \n        y={(0.097442cm, -0.482887cm)},             \n        z={(0.329367cm, 0.840780cm)},                                          \n```\n\n\nIf you want to keep those line in the doc (a good idea a believe), I suggest you mark them as untested :\n\n\n```\nsage: open('polytope-tikz2.tex', 'w').write(Image2)    # not tested\n```\n\n\n2. You import `n` but you don't use it. (If you really needed it, I would have suggest to import the equivalent alias `numerical_approx` instead because the variable `n` is often used as an integer in the code...) But since you don't use it, just remove the import.\n\n\n```diff\n from subprocess import Popen, PIPE                 \n from sage.misc.all import tmp_filename             \n-from sage.misc.functional import norm              \n+from sage.misc.functional import norm, n           \n from sage.misc.package import is_package_installed \n```\n\n\n3. Testing the file `polyhedra.py` is not significantly longer than before : Great!\n\nsage-4.8:\n\n\n```\n$ sage -t polyhedra.py\nsage -t  \"devel/sage-slabbe/sage/geometry/polyhedra.py\"\n         [58.0 s]\n----------------------------------------------------------------------                 \nAll tests passed!\nTotal time for all tests: 58.0 seconds\n```\n\n\nsage-4.8 + your patch:\n\n```\n$ sage -t polyhedra.py\nsage -t  \"devel/sage-slabbe/sage/geometry/polyhedra.py\"\n         [58.6 s]\n----------------------------------------------------------------------                 \nAll tests passed!\nTotal time for all tests: 58.6 seconds\n```\n\n\n4. You import VectorSpace but vector could do the job...\n\n\n```diff\n from sage.modules.free_module_element import vector         \n+from sage.modules.free_module import VectorSpace            \n from sage.matrix.constructor import matrix, identity_matrix \n```\n\n\nIn your code, you write :\n\n\n```\nV = VectorSpace(RDF,3) \nview_vector = V(view)  \n```\n\n\nI suggest you change this to :\n\n\n```\nview_vector = vector(RDF, view)\n```\n\n\n5. Every methods must have doctests:\n\n\n```\n$ sage -coverage polyhedra.py\n----------------------------------------------------------------------\npolyhedra.py\nSCORE polyhedra.py: 98% (214 of 217)\n\nMissing doctests:\n         * _tikz_2d(self, scale, edge_color, facet_color, opacity, vertex_color, axis):\n         * _tikz_2d_in_3d(self, view, rot_angle, scale, edge_color, facet_color, opacity, vertex_color, axis):\n         * _tikz_3d_in_3d(self, view, rot_angle, scale, edge_color, facet_color, opacity, vertex_color, axis):\n\n----------------------------------------------------------------------\n\n```\n\n\n6. I tested my script `tikz2pdf` on the above 3 junk tex files created by the doctest. Pdf files were created without problem. Pictures look great!\n\n7. Building the documentation creates 2 warnings :\n\n\n```\n$ sage -docbuild reference html\n...\n/Users/slabbe/Applications/sage-4.8/local/lib/python2.6/site-packages/sage/geometry/polyhedra.py:docstring\nof sage.geometry.polyhedra.Polyhedron.tikz:26: WARNING: Inline literal\nstart-string without end-string.\n/Users/slabbe/Applications/sage-4.8/local/lib/python2.6/site-packages/sage/geometry/polyhedra.py:docstring\nof sage.geometry.polyhedra.Polyhedron.tikz:27: WARNING: Inline literal\nstart-string without end-string.\n...\n```\n\n\nI believe the problem comes from this :\n\n\n```diff\n+            2) Select ``Console`;        \n+            3) Select the tab ``State`;  \n```\n\n\n8. Change this \n\n\n```\n            It read something like:\n                                             \n            moveto 0.0 {x y z angle} Scale   \n```\n\n\nto\n\n\n```\n            It read something like::\n                                             \n                moveto 0.0 {x y z angle} Scale   \n```\n\n\nIt will look nicer in the documentation.\n\n9. I suggest to change the variable name `rot_angle` to `angle`.\n\n10. Input block do not follow the coding convention.\n\nSee www.sagemath.org/doc/developer/conventions.html\n\nI suggest you follow this example :\n\n\n```\n    INPUT:\n\n     - ``x`` - integer (default: 1) the description of the\n       argument x goes here.  If it contains multiple lines, all\n       the lines after the first need to be indented.\n\n     - ``y`` - integer (default: 2) the ...\n\n    OUTPUT:\n\n    integer -- the ...\n```\n\n\nSo, first say what is the type. Then, say what is the default (inside ```` quotes. Then, give the description.\n\nFor the output, just say the type and what it is. The part ```tikz_pic``` is not necessary.\n\n11. The description of `view` argument could be improved.\n\n\n```\n- ``view`` -- a list of length 3 representing a vector; \n```\n\n\nI know it is a vector. Is it the camera position? Is it the view angle? Is it the axis for the rotation?\n\n12. I think the type of what you return should be a `LatexExpr` instead of `str`. \n\n\n```\nfrom sage.misc.latex import LatexExpr\n```\n\n\nCompare `latex(Image1)` to `latex(LatexExpr(Image1))`. Because, sagetex\nwill call `latex` function on your output...\n\n\nBonne f\u00eate !",
    "created_at": "2012-02-10T17:59:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11911#issuecomment-136510",
    "user": "slabbe"
}
```

1. Testing the file `polyhedra.py` creates junk in the working directory.


```
cd sage-4.8/devel/sage-slabbe/sage/geometry 
sage -t polyhedra.py
ls *.tex 
polytope-tikz.tex       polytope-tikz2.tex      polytope-tikz3.tex               
```


Saving files in your test is not necessary. I suggest you do the test like this instead :


```python
sage: P1 = polytopes.small_rhombicuboctahedron()   
sage: t = P1.tikz([1,3,5], 175, scale=4)           
sage: type(t)                                      
<type 'str'>                                       
sage: print '\n'.join(t.splitlines()[:4])          
\begin{tikzpicture}%                               
        [x={(-0.939161cm, 0.244762cm)},            
        y={(0.097442cm, -0.482887cm)},             
        z={(0.329367cm, 0.840780cm)},                                          
```


If you want to keep those line in the doc (a good idea a believe), I suggest you mark them as untested :


```
sage: open('polytope-tikz2.tex', 'w').write(Image2)    # not tested
```


2. You import `n` but you don't use it. (If you really needed it, I would have suggest to import the equivalent alias `numerical_approx` instead because the variable `n` is often used as an integer in the code...) But since you don't use it, just remove the import.


```diff
 from subprocess import Popen, PIPE                 
 from sage.misc.all import tmp_filename             
-from sage.misc.functional import norm              
+from sage.misc.functional import norm, n           
 from sage.misc.package import is_package_installed 
```


3. Testing the file `polyhedra.py` is not significantly longer than before : Great!

sage-4.8:


```
$ sage -t polyhedra.py
sage -t  "devel/sage-slabbe/sage/geometry/polyhedra.py"
         [58.0 s]
----------------------------------------------------------------------                 
All tests passed!
Total time for all tests: 58.0 seconds
```


sage-4.8 + your patch:

```
$ sage -t polyhedra.py
sage -t  "devel/sage-slabbe/sage/geometry/polyhedra.py"
         [58.6 s]
----------------------------------------------------------------------                 
All tests passed!
Total time for all tests: 58.6 seconds
```


4. You import VectorSpace but vector could do the job...


```diff
 from sage.modules.free_module_element import vector         
+from sage.modules.free_module import VectorSpace            
 from sage.matrix.constructor import matrix, identity_matrix 
```


In your code, you write :


```
V = VectorSpace(RDF,3) 
view_vector = V(view)  
```


I suggest you change this to :


```
view_vector = vector(RDF, view)
```


5. Every methods must have doctests:


```
$ sage -coverage polyhedra.py
----------------------------------------------------------------------
polyhedra.py
SCORE polyhedra.py: 98% (214 of 217)

Missing doctests:
         * _tikz_2d(self, scale, edge_color, facet_color, opacity, vertex_color, axis):
         * _tikz_2d_in_3d(self, view, rot_angle, scale, edge_color, facet_color, opacity, vertex_color, axis):
         * _tikz_3d_in_3d(self, view, rot_angle, scale, edge_color, facet_color, opacity, vertex_color, axis):

----------------------------------------------------------------------

```


6. I tested my script `tikz2pdf` on the above 3 junk tex files created by the doctest. Pdf files were created without problem. Pictures look great!

7. Building the documentation creates 2 warnings :


```
$ sage -docbuild reference html
...
/Users/slabbe/Applications/sage-4.8/local/lib/python2.6/site-packages/sage/geometry/polyhedra.py:docstring
of sage.geometry.polyhedra.Polyhedron.tikz:26: WARNING: Inline literal
start-string without end-string.
/Users/slabbe/Applications/sage-4.8/local/lib/python2.6/site-packages/sage/geometry/polyhedra.py:docstring
of sage.geometry.polyhedra.Polyhedron.tikz:27: WARNING: Inline literal
start-string without end-string.
...
```


I believe the problem comes from this :


```diff
+            2) Select ``Console`;        
+            3) Select the tab ``State`;  
```


8. Change this 


```
            It read something like:
                                             
            moveto 0.0 {x y z angle} Scale   
```


to


```
            It read something like::
                                             
                moveto 0.0 {x y z angle} Scale   
```


It will look nicer in the documentation.

9. I suggest to change the variable name `rot_angle` to `angle`.

10. Input block do not follow the coding convention.

See www.sagemath.org/doc/developer/conventions.html

I suggest you follow this example :


```
    INPUT:

     - ``x`` - integer (default: 1) the description of the
       argument x goes here.  If it contains multiple lines, all
       the lines after the first need to be indented.

     - ``y`` - integer (default: 2) the ...

    OUTPUT:

    integer -- the ...
```


So, first say what is the type. Then, say what is the default (inside ```` quotes. Then, give the description.

For the output, just say the type and what it is. The part ```tikz_pic``` is not necessary.

11. The description of `view` argument could be improved.


```
- ``view`` -- a list of length 3 representing a vector; 
```


I know it is a vector. Is it the camera position? Is it the view angle? Is it the axis for the rotation?

12. I think the type of what you return should be a `LatexExpr` instead of `str`. 


```
from sage.misc.latex import LatexExpr
```


Compare `latex(Image1)` to `latex(LatexExpr(Image1))`. Because, sagetex
will call `latex` function on your output...


Bonne fête !



---

archive/issue_comments_136511.json:
```json
{
    "body": "Apply over the precedent patch",
    "created_at": "2012-05-31T13:39:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11911#issuecomment-136511",
    "user": "jipilab"
}
```

Apply over the precedent patch



---

archive/issue_comments_136512.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-05-31T13:42:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11911#issuecomment-136512",
    "user": "jipilab"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_136513.json:
```json
{
    "body": "Attachment [trac12083_tikz_polytope_review.patch](tarball://root/attachments/some-uuid/ticket12083/trac12083_tikz_polytope_review.patch) by jipilab created at 2012-05-31 13:42:58",
    "created_at": "2012-05-31T13:42:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11911#issuecomment-136513",
    "user": "jipilab"
}
```

Attachment [trac12083_tikz_polytope_review.patch](tarball://root/attachments/some-uuid/ticket12083/trac12083_tikz_polytope_review.patch) by jipilab created at 2012-05-31 13:42:58



---

archive/issue_comments_136514.json:
```json
{
    "body": "Attachment [trac_12083_unholy_rebase_to_sage-5.0.patch](tarball://root/attachments/some-uuid/ticket12083/trac_12083_unholy_rebase_to_sage-5.0.patch) by mhampton created at 2012-05-31 16:59:37\n\nFor illustrative purposes only",
    "created_at": "2012-05-31T16:59:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11911#issuecomment-136514",
    "user": "mhampton"
}
```

Attachment [trac_12083_unholy_rebase_to_sage-5.0.patch](tarball://root/attachments/some-uuid/ticket12083/trac_12083_unholy_rebase_to_sage-5.0.patch) by mhampton created at 2012-05-31 16:59:37

For illustrative purposes only



---

archive/issue_comments_136515.json:
```json
{
    "body": "I really like this functionality and I thought I'd help by rebasing the patch to sage-5.0, but I have now run out of time.  Working on this reminded me of some things I don't like about the Projection class, but I am not sure about the best way to fix them.  I think projections should be more accessible from Polyhedron objects, and vice-versa.  Anyway, I did complete a patch for sage-5.0 that manages to pass the original tests, but its not very pretty.  Its inefficient, and relies on a parent_polyhedron method for projections that might be objectionable.  But since it works, it might be helpful in creating a better version.\n\nIf no one else does, I might have time to revisit this in a week or so.",
    "created_at": "2012-05-31T17:03:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11911#issuecomment-136515",
    "user": "mhampton"
}
```

I really like this functionality and I thought I'd help by rebasing the patch to sage-5.0, but I have now run out of time.  Working on this reminded me of some things I don't like about the Projection class, but I am not sure about the best way to fix them.  I think projections should be more accessible from Polyhedron objects, and vice-versa.  Anyway, I did complete a patch for sage-5.0 that manages to pass the original tests, but its not very pretty.  Its inefficient, and relies on a parent_polyhedron method for projections that might be objectionable.  But since it works, it might be helpful in creating a better version.

If no one else does, I might have time to revisit this in a week or so.



---

archive/issue_comments_136516.json:
```json
{
    "body": "So - which patches have to be applied? I suspect they'll need rebasing after all Volker's refactoring.",
    "created_at": "2012-07-19T18:27:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11911#issuecomment-136516",
    "user": "novoselt"
}
```

So - which patches have to be applied? I suspect they'll need rebasing after all Volker's refactoring.



---

archive/issue_comments_136517.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-07-19T18:27:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11911#issuecomment-136517",
    "user": "novoselt"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_136518.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-11-01T18:51:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11911#issuecomment-136518",
    "user": "chapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_136519.json:
```json
{
    "body": "let us try and see\n\napply trac12083_tikz_polytope.2.patch trac12083_tikz_polytope_review.patch",
    "created_at": "2012-11-01T18:51:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11911#issuecomment-136519",
    "user": "chapoton"
}
```

let us try and see

apply trac12083_tikz_polytope.2.patch trac12083_tikz_polytope_review.patch



---

archive/issue_comments_136520.json:
```json
{
    "body": "So, today I used the reviewed patch to draw a polytope using the library decorations of tikz.\n\nI realized that I was sloppy to implement the edges; they are drawn twice. This also makes the compilation in LaTeX slower.\n\nI will write a patch for version 5.3 that does not have repetitions (and containing the improvements in the rebased version).",
    "created_at": "2012-11-26T19:12:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11911#issuecomment-136520",
    "user": "jipilab"
}
```

So, today I used the reviewed patch to draw a polytope using the library decorations of tikz.

I realized that I was sloppy to implement the edges; they are drawn twice. This also makes the compilation in LaTeX slower.

I will write a patch for version 5.3 that does not have repetitions (and containing the improvements in the rebased version).



---

archive/issue_comments_136521.json:
```json
{
    "body": "Rebased version of the tikz method",
    "created_at": "2012-12-19T14:42:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11911#issuecomment-136521",
    "user": "jipilab"
}
```

Rebased version of the tikz method



---

archive/issue_comments_136522.json:
```json
{
    "body": "Attachment [trac12083_rebased_5.4.1.patch](tarball://root/attachments/some-uuid/ticket12083/trac12083_rebased_5.4.1.patch) by jipilab created at 2012-12-19 14:47:22\n\nSo, here is the rebased version of the patch.\n\nI solved a few problems:\nThe vertices and edges appeared twice before (sloppy implementation);\nThere was one vertex not drawn in the first (unholy) rebased version;\nThe facets were badly drawn (problem with vertices naming in the code);\nThe back edges were badly recognized.\n\nI looked at the compiled tikz output examples and now everything seems in order.\n\nAll tests passed on 5.4.1\n\nOne thing I don't really like though is the fact that we need to pass to projections to access the tikz method. Perhaps a wrapper would do the thing?",
    "created_at": "2012-12-19T14:47:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11911#issuecomment-136522",
    "user": "jipilab"
}
```

Attachment [trac12083_rebased_5.4.1.patch](tarball://root/attachments/some-uuid/ticket12083/trac12083_rebased_5.4.1.patch) by jipilab created at 2012-12-19 14:47:22

So, here is the rebased version of the patch.

I solved a few problems:
The vertices and edges appeared twice before (sloppy implementation);
There was one vertex not drawn in the first (unholy) rebased version;
The facets were badly drawn (problem with vertices naming in the code);
The back edges were badly recognized.

I looked at the compiled tikz output examples and now everything seems in order.

All tests passed on 5.4.1

One thing I don't really like though is the fact that we need to pass to projections to access the tikz method. Perhaps a wrapper would do the thing?



---

archive/issue_comments_136523.json:
```json
{
    "body": "For the bot:\n\napply trac12083_rebased_5.4.1.patch",
    "created_at": "2012-12-19T14:47:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11911#issuecomment-136523",
    "user": "jipilab"
}
```

For the bot:

apply trac12083_rebased_5.4.1.patch



---

archive/issue_comments_136524.json:
```json
{
    "body": "There is a problem with the lines\n\n```\n            v1 = self.coords[index1]\n            v2 = self.coords[index2]\n```\n\nwhich appear three times, but the variables v1 and v2 are never used.",
    "created_at": "2013-03-03T10:18:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11911#issuecomment-136524",
    "user": "chapoton"
}
```

There is a problem with the lines

```
            v1 = self.coords[index1]
            v2 = self.coords[index2]
```

which appear three times, but the variables v1 and v2 are never used.



---

archive/issue_comments_136525.json:
```json
{
    "body": "Moreover, three tests are failing on sage 5.8.beta1",
    "created_at": "2013-03-03T10:23:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11911#issuecomment-136525",
    "user": "chapoton"
}
```

Moreover, three tests are failing on sage 5.8.beta1



---

archive/issue_comments_136526.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-05-20T11:17:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11911#issuecomment-136526",
    "user": "ncohen"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_136527.json:
```json
{
    "body": "This patch should probably be rebased. It would be nice to add in the ticket's description which patch are to be applied, too.\n\nNathann",
    "created_at": "2013-05-20T11:17:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11911#issuecomment-136527",
    "user": "ncohen"
}
```

This patch should probably be rebased. It would be nice to add in the ticket's description which patch are to be applied, too.

Nathann



---

archive/issue_comments_136528.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-08-21T08:21:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11911#issuecomment-136528",
    "user": "chapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_136529.json:
```json
{
    "body": "here is a rebased patch, passing tests and working on 5.12.beta0\n\napply only trac12083_rebased_5.12.patch\u200b",
    "created_at": "2013-08-21T08:21:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11911#issuecomment-136529",
    "user": "chapoton"
}
```

here is a rebased patch, passing tests and working on 5.12.beta0

apply only trac12083_rebased_5.12.patch​



---

archive/issue_comments_136530.json:
```json
{
    "body": "apply only trac12083_rebased_5.12.patch",
    "created_at": "2013-08-25T13:58:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11911#issuecomment-136530",
    "user": "chapoton"
}
```

apply only trac12083_rebased_5.12.patch



---

archive/issue_comments_136531.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-11-01T09:33:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11911#issuecomment-136531",
    "user": "vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_136532.json:
```json
{
    "body": "lgtm",
    "created_at": "2013-11-01T09:33:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11911#issuecomment-136532",
    "user": "vbraun"
}
```

lgtm



---

archive/issue_comments_136533.json:
```json
{
    "body": "The PDF doc doesn't build:\n\n```\n! Package inputenc Error: Keyboard character used is undefined\n(inputenc)                in inputencoding `utf8'.\n\nSee the inputenc package documentation for explanation.\nType  H <return>  for immediate help.\n ...\n\nl.17893 \\item[{^^Hegin\\{tikzpicture\\}\\%}] \n                                          \\leavevmode\n```\n\nTo fix this, use `r\"\"\"` docstrings instead of `\"\"\"`.",
    "created_at": "2013-11-01T12:57:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11911#issuecomment-136533",
    "user": "jdemeyer"
}
```

The PDF doc doesn't build:

```
! Package inputenc Error: Keyboard character used is undefined
(inputenc)                in inputencoding `utf8'.

See the inputenc package documentation for explanation.
Type  H <return>  for immediate help.
 ...

l.17893 \item[{^^Hegin\{tikzpicture\}\%}] 
                                          \leavevmode
```

To fix this, use `r"""` docstrings instead of `"""`.



---

archive/issue_comments_136534.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2013-11-01T12:57:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11911#issuecomment-136534",
    "user": "jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_136535.json:
```json
{
    "body": "Attachment [trac12083_rebased_5.12.patch](tarball://root/attachments/some-uuid/ticket12083/trac12083_rebased_5.12.patch) by chapoton created at 2013-11-04 19:56:53",
    "created_at": "2013-11-04T19:56:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11911#issuecomment-136535",
    "user": "chapoton"
}
```

Attachment [trac12083_rebased_5.12.patch](tarball://root/attachments/some-uuid/ticket12083/trac12083_rebased_5.12.patch) by chapoton created at 2013-11-04 19:56:53



---

archive/issue_comments_136536.json:
```json
{
    "body": "I have made a corrected patch, hopefully.\n\napply trac12083_rebased_5.12.patch",
    "created_at": "2013-11-04T19:58:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11911#issuecomment-136536",
    "user": "chapoton"
}
```

I have made a corrected patch, hopefully.

apply trac12083_rebased_5.12.patch



---

archive/issue_comments_136537.json:
```json
{
    "body": "Works for me...",
    "created_at": "2013-11-04T21:55:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11911#issuecomment-136537",
    "user": "vbraun"
}
```

Works for me...



---

archive/issue_comments_136538.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2013-11-04T21:55:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11911#issuecomment-136538",
    "user": "vbraun"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_136539.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-11-09T15:30:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11911#issuecomment-136539",
    "user": "jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_136540.json:
```json
{
    "body": "I just want to say that I could have used this a couple years ago and instead had to do lots of guess-and-check with graph plots, then convert to xfig... thank you, this will be very useful!",
    "created_at": "2013-12-18T01:51:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11911#issuecomment-136540",
    "user": "kcrisman"
}
```

I just want to say that I could have used this a couple years ago and instead had to do lots of guess-and-check with graph plots, then convert to xfig... thank you, this will be very useful!
