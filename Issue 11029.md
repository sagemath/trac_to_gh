# Issue 11029: QuotientRing elements are not callable

archive/issues_011029.json:
```json
{
    "body": "Assignee: AlexGhitza\n\nCC:  novoselt\n\nIt would be convenient if quotient ring elements would be callable like polynomials. This is currently not the case:\n\n```\nsage: R.<x,y> = QQ[]\nsage: I = R.ideal(x)\nsage: Q = R.quotient_ring(I)\nsage: Q\nQuotient of Multivariate Polynomial Ring in x, y over Rational Field by the ideal (x)\nsage: Q.inject_variables()\nDefining xbar, ybar\nsage: p = xbar + ybar\nsage: p(1,1)\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n\n/home/vbraun/opt/sage-4.7.alpha4/devel/sage-main/<ipython console> in <module>()\n\nTypeError: 'QuotientRingElement' object is not callable\n```\n\n\nThe attached patch implements this functionality by handing the argument through to the lift. \n\nArguably, it should check that the result does not depend on the presentation. Pro: catches errors; Con: potentially slow, ideal membership test necessary if arguments are polynomials.\n\nIssue created by migration from https://trac.sagemath.org/ticket/11199\n\n",
    "created_at": "2011-04-14T15:56:23Z",
    "labels": [
        "algebra",
        "major",
        "enhancement"
    ],
    "title": "QuotientRing elements are not callable",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11029",
    "user": "vbraun"
}
```
Assignee: AlexGhitza

CC:  novoselt

It would be convenient if quotient ring elements would be callable like polynomials. This is currently not the case:

```
sage: R.<x,y> = QQ[]
sage: I = R.ideal(x)
sage: Q = R.quotient_ring(I)
sage: Q
Quotient of Multivariate Polynomial Ring in x, y over Rational Field by the ideal (x)
sage: Q.inject_variables()
Defining xbar, ybar
sage: p = xbar + ybar
sage: p(1,1)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)

/home/vbraun/opt/sage-4.7.alpha4/devel/sage-main/<ipython console> in <module>()

TypeError: 'QuotientRingElement' object is not callable
```


The attached patch implements this functionality by handing the argument through to the lift. 

Arguably, it should check that the result does not depend on the presentation. Pro: catches errors; Con: potentially slow, ideal membership test necessary if arguments are polynomials.

Issue created by migration from https://trac.sagemath.org/ticket/11199





---

archive/issue_comments_120162.json:
```json
{
    "body": "Initial patch",
    "created_at": "2011-04-14T16:01:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11029#issuecomment-120162",
    "user": "vbraun"
}
```

Initial patch



---

archive/issue_comments_120163.json:
```json
{
    "body": "Attachment",
    "created_at": "2011-04-14T16:02:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11029#issuecomment-120163",
    "user": "vbraun"
}
```

Attachment



---

archive/issue_comments_120164.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-04-14T16:02:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11029#issuecomment-120164",
    "user": "vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_120165.json:
```json
{
    "body": "Evaluating an element of a quotient ring doesn't make mathematical sense in general, only if it makes sense to evaluate the lift: if you're taking a quotient of a group algebra or the p-adics, what does it mean to evaluate an element of it?  I'm attaching a new patch which adds a comment about this to the docstring; is this enough warning?\n\nI'm happy with the original patch as far as it goes, and I'm almost ready to give it a positive review, but I'd like to hear opinions about the issue I raised.",
    "created_at": "2011-07-24T21:42:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11029#issuecomment-120165",
    "user": "jhpalmieri"
}
```

Evaluating an element of a quotient ring doesn't make mathematical sense in general, only if it makes sense to evaluate the lift: if you're taking a quotient of a group algebra or the p-adics, what does it mean to evaluate an element of it?  I'm attaching a new patch which adds a comment about this to the docstring; is this enough warning?

I'm happy with the original patch as far as it goes, and I'm almost ready to give it a positive review, but I'd like to hear opinions about the issue I raised.



---

archive/issue_comments_120166.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2011-07-24T21:42:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11029#issuecomment-120166",
    "user": "jhpalmieri"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_120167.json:
```json
{
    "body": "for reference only; difference beteen initial patch and jhp patch",
    "created_at": "2011-07-24T21:43:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11029#issuecomment-120167",
    "user": "jhpalmieri"
}
```

for reference only; difference beteen initial patch and jhp patch



---

archive/issue_comments_120168.json:
```json
{
    "body": "Attachment\n\napply this one",
    "created_at": "2011-07-24T21:43:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11029#issuecomment-120168",
    "user": "jhpalmieri"
}
```

Attachment

apply this one



---

archive/issue_comments_120169.json:
```json
{
    "body": "Attachment\n\nEven with the extra warning in the docstring, users could very easily be misled.\nFor to make the evaluation independent of the lift it is necessary\nfor the ideal defining the quotient to annihilate the argument.\n\nI think it would be sensible to have a parameter 'check' with default True, and a \nclause like:\n\n```\nif check and any(g(args) !=0 for g in f.parent().defining_ideal().gens()):\n    raise ValueError, \"argument not in the zero set of the ideal\"\n```\n\nThat way an unthinking user is not going to be caught out, while someone who \nknows what they're doing can speed things up by setting 'check=False'.",
    "created_at": "2011-12-18T17:26:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11029#issuecomment-120169",
    "user": "fwclarke"
}
```

Attachment

Even with the extra warning in the docstring, users could very easily be misled.
For to make the evaluation independent of the lift it is necessary
for the ideal defining the quotient to annihilate the argument.

I think it would be sensible to have a parameter 'check' with default True, and a 
clause like:

```
if check and any(g(args) !=0 for g in f.parent().defining_ideal().gens()):
    raise ValueError, "argument not in the zero set of the ideal"
```

That way an unthinking user is not going to be caught out, while someone who 
knows what they're doing can speed things up by setting 'check=False'.
