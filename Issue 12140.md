# Issue 12140: Fix parallel building of ATLAS

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2012-01-15 14:06:53

Assignee: tbd

CC:  drkirkby vbraun

From the spkg-install of ATLAS:

```
# we need to disable parallel builds
os.environ['MAKE'] += ' -j1'
```

but later in the same file:

```
rc = os.system('make shared cshared')
```


The latter command doesn't see the "-j1", therefore might be built in parallel.

I'm making this a sage-4.8 blocker, since this causes the Solaris linker to hang.


---

Comment by jdemeyer created at 2012-01-15 14:17:40

Changing type from PLEASE CHANGE to defect.


---

Comment by jdemeyer created at 2012-01-15 14:17:40

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2012-01-15 14:21:16

Diff for the atlas spkg, for review only


---

Attachment


---

Comment by vbraun created at 2012-01-15 15:28:19

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2012-01-15 15:28:19

I don't understand why calling `make` builds in parallel here; Does `MAKEFLAGS` contain a `-j` option (we don't set it by default)? Calling `$MAKE` is the right thing to do to pass through other options but again I don't understand how it fixes the Solaris issue.


---

Comment by jdemeyer created at 2012-01-15 15:35:24

Volker, see #12016.


---

Comment by jdemeyer created at 2012-01-15 15:41:13

Resolution: fixed
