# Issue 25585: integral computation with giac crashes giac

archive/issues_025585.json:
```json
{
    "body": "CC:  frederichan parisse slelievre\n\nAs reported on [his ask question](https://ask.sagemath.org/question/42895/where-to-report-bugs-found-using-systems-used-by-sage/):\n\n\n```\nsage: var('x d a c b')\n(x, d, a, c, b)\nsage: integrate(sqrt(d*x^2 + e*x + c)*sqrt((b*x^2 + a)^2)/x^4,x, algorithm=\"giac\")\nGiac crashed -- automatically restarting.\nsage0*x\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/25822\n\n",
    "created_at": "2018-07-11T11:06:35Z",
    "labels": [
        "symbolics",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "integral computation with giac crashes giac",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25585",
    "user": "tmonteil"
}
```
CC:  frederichan parisse slelievre

As reported on [his ask question](https://ask.sagemath.org/question/42895/where-to-report-bugs-found-using-systems-used-by-sage/):


```
sage: var('x d a c b')
(x, d, a, c, b)
sage: integrate(sqrt(d*x^2 + e*x + c)*sqrt((b*x^2 + a)^2)/x^4,x, algorithm="giac")
Giac crashed -- automatically restarting.
sage0*x
```


Issue created by migration from https://trac.sagemath.org/ticket/25822





---

archive/issue_comments_360638.json:
```json
{
    "body": "Changing keywords from \"\" to \"giac, integrate\".",
    "created_at": "2018-07-11T14:20:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25585#issuecomment-360638",
    "user": "slelievre"
}
```

Changing keywords from "" to "giac, integrate".



---

archive/issue_comments_360639.json:
```json
{
    "body": "Here is another bug in GIAC/XCAS, may be it should be added to above? since it is also in integrate? I did not know if I should open a new one or not, since it is same system. Here it is. This is a bug in giac used by sagemath. It returns \"done\" as result of integrate.\n\n\n```\nsage: version()\n'SageMath version 8.3.rc0, Release Date: 2018-07-08'\nsage: var('x g b f n c a d');\nsage: integrate(1/((g*x + f)^2*(b*log((e*x + d)^n*c) + a)^3),x, algorithm=\"giac\")\nDone\nsage: \n```\n",
    "created_at": "2018-07-11T23:23:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25585#issuecomment-360639",
    "user": "@nasser1"
}
```

Here is another bug in GIAC/XCAS, may be it should be added to above? since it is also in integrate? I did not know if I should open a new one or not, since it is same system. Here it is. This is a bug in giac used by sagemath. It returns "done" as result of integrate.


```
sage: version()
'SageMath version 8.3.rc0, Release Date: 2018-07-08'
sage: var('x g b f n c a d');
sage: integrate(1/((g*x + f)^2*(b*log((e*x + d)^n*c) + a)^3),x, algorithm="giac")
Done
sage: 
```




---

archive/issue_comments_360640.json:
```json
{
    "body": "This is expected, if the output is too large.\n\n- [Xcas session](https://www-fourier.ujf-grenoble.fr/~parisse/xcasen.html#exec&+k=integrate(1/((g*x+f)<sup>2*(b*log((e*x+d)</sup>n*c)+a)^3),x)&+factor(diff(k))&) (open link with Firefox)",
    "created_at": "2018-07-12T04:52:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25585#issuecomment-360640",
    "user": "parisse"
}
```

This is expected, if the output is too large.

- [Xcas session](https://www-fourier.ujf-grenoble.fr/~parisse/xcasen.html#exec&+k=integrate(1/((g*x+f)<sup>2*(b*log((e*x+d)</sup>n*c)+a)^3),x)&+factor(diff(k))&) (open link with Firefox)



---

archive/issue_comments_360641.json:
```json
{
    "body": "Indeed, this is a bug of the pexpect giac interface that takes the string representation of the giac output. The computation is done in giac but when the output is large giac just prints Done, and that is this string that the pxepect interface get. It is not typical for integrate it will concern  all large output. \n\nBernard, is there a way to disable this in giac/icas or to obtain the string value of the computation?\n\nNote that this problem doesn't appear in giacpy_sage (optionnal package)\n\n\n```\nsage: var('x g b f n c a d');\nsage: F=(1/((g*x + f)^2*(b*log((e*x + d)^n*c) + a)^3))\nsage: \nsage: integrate(F,x, algorithm=\"giac\")\nDone\nsage: from giacpy_sage import libgiac\n// Giac share root-directory:/home/fred-dev/sage/develop/sage.develop/local/share/giac/\n// Giac share root-directory:/home/fred-dev/sage/develop/sage.develop/local/share/giac/\nHelp file /home/fred-dev/sage/develop/sage.develop/local/share/giac/doc/fr/aide_cas not found\nAdded 0 synonyms\nsage: libgiac(F).integrate(x)\n(2*a*d^2*g-a*d*f*exp(1)+3*a*d*g*x*exp(1)-a*f*x*exp(1)^2+a*g*x^2*exp(1)^2+2*b*d^2*g*n*ln(d+x*exp(1))+2*b*d^2*g*ln(c)-b*d*f*n*exp(1)*ln(d+x*exp(1))-b*d*f*n*exp(1)-b*d*f*exp(1)*ln(c)+3*b*d*g*n*x*exp(1)*ln(d+x*exp(1))-b*d*g*n*x*exp(1)+3*b*d*g*x*exp(1)*ln(c)-b*f*n*x*exp(1)^2*ln(d+x*exp(1))-b*f*n*x*exp(1)^2-b*f*x*exp(1)^2*ln(c)+b*g*n*x^2*exp(1)^2*ln(d+x*exp(1))-b*g*n*x^2*exp(1)^2+b*g*x^2*exp(1)^2*ln(c))/(2*a^2*b^2*f^3*n^2*exp(1)^2+6*a^2*b^2*f^2*g*n^2*x*exp(1)^2+6*a^2*b^2*f*g^2*n^2*x^2*exp(1)^2+2*a^2*b^2*g^3*n^2*x^3*exp(1)^2+4*a*b^3*f^3*n^3*exp(1)^2*ln(d+x*exp(1))+4*a*b^3*f^3*n^2*exp(1)^2*ln(c)+12*a*b^3*f^2*g*n^3*x*exp(1)^2*ln(d+x*exp(1))+12*a*b^3*f^2*g*n^2*x*exp(1)^2*ln(c)+12*a*b^3*f*g^2*n^3*x^2*exp(1)^2*ln(d+x*exp(1))+12*a*b^3*f*g^2*n^2*x^2*exp(1)^2*ln(c)+4*a*b^3*g^3*n^3*x^3*exp(1)^2*ln(d+x*exp(1))+4*a*b^3*g^3*n^2*x^3*exp(1)^2*ln(c)+2*b^4*f^3*n^4*exp(1)^2*ln(d+x*exp(1))^2+4*b^4*f^3*n^3*exp(1)^2*ln(c)*ln(d+x*exp(1))+2*b^4*f^3*n^2*exp(1)^2*ln(c)^2+6*b^4*f^2*g*n^4*x*exp(1)^2*ln(d+x*exp(1))^2+12*b^4*f^2*g*n^3*x*exp(1)^2*ln(c)*ln(d+x*exp(1))+6*b^4*f^2*g*n^2*x*exp(1)^2*ln(c)^2+6*b^4*f*g^2*n^4*x^2*exp(1)^2*ln(d+x*exp(1))^2+12*b^4*f*g^2*n^3*x^2*exp(1)^2*ln(c)*ln(d+x*exp(1))+6*b^4*f*g^2*n^2*x^2*exp(1)^2*ln(c)^2+2*b^4*g^3*n^4*x^3*exp(1)^2*ln(d+x*exp(1))^2+4*b^4*g^3*n^3*x^3*exp(1)^2*ln(c)*ln(d+x*exp(1))+2*b^4*g^3*n^2*x^3*exp(1)^2*ln(c)^2)+integrate((-x^2*g^2*exp(1)^2+4*x*f*g*exp(1)^2-6*x*g^2*exp(1)*d-f^2*exp(1)^2+6*f*g*exp(1)*d-6*g^2*d^2)/(-2*ln(d+x*exp(1))*x^4*g^4*b^3*n^3*exp(1)^2-8*ln(d+x*exp(1))*x^3*f*g^3*b^3*n^3*exp(1)^2-12*ln(d+x*exp(1))*x^2*f^2*g^2*b^3*n^3*exp(1)^2-8*ln(d+x*exp(1))*x*f^3*g*b^3*n^3*exp(1)^2-2*ln(d+x*exp(1))*f^4*b^3*n^3*exp(1)^2-2*x^4*a*g^4*b^2*n^2*exp(1)^2-2*x^4*g^4*b^3*n^2*ln(c)*exp(1)^2-8*x^3*a*f*g^3*b^2*n^2*exp(1)^2-8*x^3*f*g^3*b^3*n^2*ln(c)*exp(1)^2-12*x^2*a*f^2*g^2*b^2*n^2*exp(1)^2-12*x^2*f^2*g^2*b^3*n^2*ln(c)*exp(1)^2-8*x*a*f^3*g*b^2*n^2*exp(1)^2-8*x*f^3*g*b^3*n^2*ln(c)*exp(1)^2-2*a*f^4*b^2*n^2*exp(1)^2-2*f^4*b^3*n^2*ln(c)*exp(1)^2),x)\n\n```\n",
    "created_at": "2018-07-12T06:52:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25585#issuecomment-360641",
    "user": "frederichan"
}
```

Indeed, this is a bug of the pexpect giac interface that takes the string representation of the giac output. The computation is done in giac but when the output is large giac just prints Done, and that is this string that the pxepect interface get. It is not typical for integrate it will concern  all large output. 

Bernard, is there a way to disable this in giac/icas or to obtain the string value of the computation?

Note that this problem doesn't appear in giacpy_sage (optionnal package)


```
sage: var('x g b f n c a d');
sage: F=(1/((g*x + f)^2*(b*log((e*x + d)^n*c) + a)^3))
sage: 
sage: integrate(F,x, algorithm="giac")
Done
sage: from giacpy_sage import libgiac
// Giac share root-directory:/home/fred-dev/sage/develop/sage.develop/local/share/giac/
// Giac share root-directory:/home/fred-dev/sage/develop/sage.develop/local/share/giac/
Help file /home/fred-dev/sage/develop/sage.develop/local/share/giac/doc/fr/aide_cas not found
Added 0 synonyms
sage: libgiac(F).integrate(x)
(2*a*d^2*g-a*d*f*exp(1)+3*a*d*g*x*exp(1)-a*f*x*exp(1)^2+a*g*x^2*exp(1)^2+2*b*d^2*g*n*ln(d+x*exp(1))+2*b*d^2*g*ln(c)-b*d*f*n*exp(1)*ln(d+x*exp(1))-b*d*f*n*exp(1)-b*d*f*exp(1)*ln(c)+3*b*d*g*n*x*exp(1)*ln(d+x*exp(1))-b*d*g*n*x*exp(1)+3*b*d*g*x*exp(1)*ln(c)-b*f*n*x*exp(1)^2*ln(d+x*exp(1))-b*f*n*x*exp(1)^2-b*f*x*exp(1)^2*ln(c)+b*g*n*x^2*exp(1)^2*ln(d+x*exp(1))-b*g*n*x^2*exp(1)^2+b*g*x^2*exp(1)^2*ln(c))/(2*a^2*b^2*f^3*n^2*exp(1)^2+6*a^2*b^2*f^2*g*n^2*x*exp(1)^2+6*a^2*b^2*f*g^2*n^2*x^2*exp(1)^2+2*a^2*b^2*g^3*n^2*x^3*exp(1)^2+4*a*b^3*f^3*n^3*exp(1)^2*ln(d+x*exp(1))+4*a*b^3*f^3*n^2*exp(1)^2*ln(c)+12*a*b^3*f^2*g*n^3*x*exp(1)^2*ln(d+x*exp(1))+12*a*b^3*f^2*g*n^2*x*exp(1)^2*ln(c)+12*a*b^3*f*g^2*n^3*x^2*exp(1)^2*ln(d+x*exp(1))+12*a*b^3*f*g^2*n^2*x^2*exp(1)^2*ln(c)+4*a*b^3*g^3*n^3*x^3*exp(1)^2*ln(d+x*exp(1))+4*a*b^3*g^3*n^2*x^3*exp(1)^2*ln(c)+2*b^4*f^3*n^4*exp(1)^2*ln(d+x*exp(1))^2+4*b^4*f^3*n^3*exp(1)^2*ln(c)*ln(d+x*exp(1))+2*b^4*f^3*n^2*exp(1)^2*ln(c)^2+6*b^4*f^2*g*n^4*x*exp(1)^2*ln(d+x*exp(1))^2+12*b^4*f^2*g*n^3*x*exp(1)^2*ln(c)*ln(d+x*exp(1))+6*b^4*f^2*g*n^2*x*exp(1)^2*ln(c)^2+6*b^4*f*g^2*n^4*x^2*exp(1)^2*ln(d+x*exp(1))^2+12*b^4*f*g^2*n^3*x^2*exp(1)^2*ln(c)*ln(d+x*exp(1))+6*b^4*f*g^2*n^2*x^2*exp(1)^2*ln(c)^2+2*b^4*g^3*n^4*x^3*exp(1)^2*ln(d+x*exp(1))^2+4*b^4*g^3*n^3*x^3*exp(1)^2*ln(c)*ln(d+x*exp(1))+2*b^4*g^3*n^2*x^3*exp(1)^2*ln(c)^2)+integrate((-x^2*g^2*exp(1)^2+4*x*f*g*exp(1)^2-6*x*g^2*exp(1)*d-f^2*exp(1)^2+6*f*g*exp(1)*d-6*g^2*d^2)/(-2*ln(d+x*exp(1))*x^4*g^4*b^3*n^3*exp(1)^2-8*ln(d+x*exp(1))*x^3*f*g^3*b^3*n^3*exp(1)^2-12*ln(d+x*exp(1))*x^2*f^2*g^2*b^3*n^3*exp(1)^2-8*ln(d+x*exp(1))*x*f^3*g*b^3*n^3*exp(1)^2-2*ln(d+x*exp(1))*f^4*b^3*n^3*exp(1)^2-2*x^4*a*g^4*b^2*n^2*exp(1)^2-2*x^4*g^4*b^3*n^2*ln(c)*exp(1)^2-8*x^3*a*f*g^3*b^2*n^2*exp(1)^2-8*x^3*f*g^3*b^3*n^2*ln(c)*exp(1)^2-12*x^2*a*f^2*g^2*b^2*n^2*exp(1)^2-12*x^2*f^2*g^2*b^3*n^2*ln(c)*exp(1)^2-8*x*a*f^3*g*b^2*n^2*exp(1)^2-8*x*f^3*g*b^3*n^2*ln(c)*exp(1)^2-2*a*f^4*b^2*n^2*exp(1)^2-2*f^4*b^3*n^2*ln(c)*exp(1)^2),x)

```




---

archive/issue_comments_360642.json:
```json
{
    "body": "The maximal size of objects that will be printed should be controllable with the environment variable GIAC_TAILLEMAX (default 1000). Size is not the length of the printed string, but the size of the giac::gen as defined in symbolic.h:  unsigned taille(const gen & g,unsigned max);",
    "created_at": "2018-07-12T08:11:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25585#issuecomment-360642",
    "user": "parisse"
}
```

The maximal size of objects that will be printed should be controllable with the environment variable GIAC_TAILLEMAX (default 1000). Size is not the length of the printed string, but the size of the giac::gen as defined in symbolic.h:  unsigned taille(const gen & g,unsigned max);



---

archive/issue_comments_360643.json:
```json
{
    "body": "Changing keywords from \"giac, integrate\" to \"giac, integrate, crash, pexpect\".",
    "created_at": "2018-07-12T08:30:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25585#issuecomment-360643",
    "user": "slelievre"
}
```

Changing keywords from "giac, integrate" to "giac, integrate, crash, pexpect".



---

archive/issue_comments_360644.json:
```json
{
    "body": "Replying to [comment:4 frederichan]:\n> Bernard, is there a way to disable this in giac/icas or to obtain the string value of the computation?\n\nIt seems we can ask Giac for the string representation using `str`.\n\nAt least in the web interface, it  not return the shorter \"Done\" output:\n- [Xcas session](https://www-fourier.ujf-grenoble.fr/~parisse/xcasen.html#exec&+G=1/((g*x+f)<sup>2*(b*log((e*x+d)</sup>n*c)+a)^3)&+GG=integrate(G,x)&+factor(diff(GG))&+str(GG)&) (open link in Firefox)",
    "created_at": "2018-07-12T08:33:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25585#issuecomment-360644",
    "user": "slelievre"
}
```

Replying to [comment:4 frederichan]:
> Bernard, is there a way to disable this in giac/icas or to obtain the string value of the computation?

It seems we can ask Giac for the string representation using `str`.

At least in the web interface, it  not return the shorter "Done" output:
- [Xcas session](https://www-fourier.ujf-grenoble.fr/~parisse/xcasen.html#exec&+G=1/((g*x+f)<sup>2*(b*log((e*x+d)</sup>n*c)+a)^3)&+GG=integrate(G,x)&+factor(diff(GG))&+str(GG)&) (open link in Firefox)



---

archive/issue_comments_360645.json:
```json
{
    "body": "But sage's pxepect interface is calling icas/giac so it is different than working with the library as does giacpy or the javascript interface. Adding string before evaluation will break manythings such as mulple commands, and after evaluation we will get the Done from icas.\n\nSo I think that the easiest thing is to change this in icas.cc, moreover there is already an \"insage\" booleen flag. I have test successfully the following patch.\n\nBernard, do you plan to remove the \"Done\" output in icas.cc when the insage flag is on so that next giac version will solve this without patch?\n\n\n```\n--- a/src/icas.cc\t2017-10-02 10:25:46.000000000 +0200\n+++ b/src/icas.cc\t2018-07-14 10:50:01.650323754 +0200\n@@ -1581,7 +1581,7 @@\n \tint taillemax=1000;\n \tif (getenv(\"GIAC_TAILLEMAX\"))\n \t  taillemax=atoi(getenv(\"GIAC_TAILLEMAX\"));\n-\tstring s=taille(ge,taillemax)>taillemax?\"Done\":ge.print(contextptr);\n+\tstring s=((taille(ge,taillemax)>taillemax)&&(!insage))?\"Done\":ge.print(contextptr);\n \tcout << s;\n       }\n       cout << endl;\n```\n",
    "created_at": "2018-07-14T12:52:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25585#issuecomment-360645",
    "user": "frederichan"
}
```

But sage's pxepect interface is calling icas/giac so it is different than working with the library as does giacpy or the javascript interface. Adding string before evaluation will break manythings such as mulple commands, and after evaluation we will get the Done from icas.

So I think that the easiest thing is to change this in icas.cc, moreover there is already an "insage" booleen flag. I have test successfully the following patch.

Bernard, do you plan to remove the "Done" output in icas.cc when the insage flag is on so that next giac version will solve this without patch?


```
--- a/src/icas.cc	2017-10-02 10:25:46.000000000 +0200
+++ b/src/icas.cc	2018-07-14 10:50:01.650323754 +0200
@@ -1581,7 +1581,7 @@
 	int taillemax=1000;
 	if (getenv("GIAC_TAILLEMAX"))
 	  taillemax=atoi(getenv("GIAC_TAILLEMAX"));
-	string s=taille(ge,taillemax)>taillemax?"Done":ge.print(contextptr);
+	string s=((taille(ge,taillemax)>taillemax)&&(!insage))?"Done":ge.print(contextptr);
 	cout << s;
       }
       cout << endl;
```




---

archive/issue_comments_360646.json:
```json
{
    "body": "Yes, I made the change in my source (with !insage first).",
    "created_at": "2018-07-14T13:06:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25585#issuecomment-360646",
    "user": "parisse"
}
```

Yes, I made the change in my source (with !insage first).



---

archive/issue_comments_360647.json:
```json
{
    "body": "Thank you, so in sage the next giac update should solve these problems automatically.",
    "created_at": "2018-07-14T19:22:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25585#issuecomment-360647",
    "user": "frederichan"
}
```

Thank you, so in sage the next giac update should solve these problems automatically.



---

archive/issue_comments_360648.json:
```json
{
    "body": "fyi, this is similar giac crash. I tried to report it to giac, but could not get an account on giac tracking. I submitted request to join and never heard back. So posting it here. May be someone who knows how to report them to giac bugs database would be able to do this since I can't.\n\n\n\n```\nsage: version()\n'SageMath version 8.3.rc0, Release Date: 2018-07-08\n\nsage: var('d x c b a f e')\n(d, x, c, b, a, f, e)\nsage: integrate(sin((d*x + c)^(2/3)*b + a)/(f*x + e),x, algorithm=\"giac\")\nGiac crashed -- automatically restarting.\nsage0*x\n\n\nsage: integrate(sin((d*x + c)^(2/3)*b + a)/(f*x + e)^2,x,algorithm=\"giac\")\nGiac crashed -- automatically restarting.\nsage4*x\n\nsage:  integrate(sin(a + b/(d*x + c)^(2/3))/(f*x + e),x, algorithm=\"giac\")\nGiac crashed -- automatically restarting.\nsage8*x\n\nsage: integrate(sin(a + b/(d*x + c)^(2/3))/(f*x + e)^2,x, algorithm=\"giac\")\nGiac crashed -- automatically restarting.\nsage12*x\n\n\n```\n",
    "created_at": "2018-07-17T18:20:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25585#issuecomment-360648",
    "user": "@nasser1"
}
```

fyi, this is similar giac crash. I tried to report it to giac, but could not get an account on giac tracking. I submitted request to join and never heard back. So posting it here. May be someone who knows how to report them to giac bugs database would be able to do this since I can't.



```
sage: version()
'SageMath version 8.3.rc0, Release Date: 2018-07-08

sage: var('d x c b a f e')
(d, x, c, b, a, f, e)
sage: integrate(sin((d*x + c)^(2/3)*b + a)/(f*x + e),x, algorithm="giac")
Giac crashed -- automatically restarting.
sage0*x


sage: integrate(sin((d*x + c)^(2/3)*b + a)/(f*x + e)^2,x,algorithm="giac")
Giac crashed -- automatically restarting.
sage4*x

sage:  integrate(sin(a + b/(d*x + c)^(2/3))/(f*x + e),x, algorithm="giac")
Giac crashed -- automatically restarting.
sage8*x

sage: integrate(sin(a + b/(d*x + c)^(2/3))/(f*x + e)^2,x, algorithm="giac")
Giac crashed -- automatically restarting.
sage12*x


```




---

archive/issue_comments_360649.json:
```json
{
    "body": "Crash fixed in source.\nIf you want to register in the Xcas forum, please choose a login or an email that can not be confused with a spammer, or send me a mail asking explicitly for activation.",
    "created_at": "2018-07-17T19:06:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25585#issuecomment-360649",
    "user": "parisse"
}
```

Crash fixed in source.
If you want to register in the Xcas forum, please choose a login or an email that can not be confused with a spammer, or send me a mail asking explicitly for activation.



---

archive/issue_comments_360650.json:
```json
{
    "body": "crash fixed by #26315.\nThe 2nd integral is however not computed by giac 1.5.0-37, I get\n\n```\nsage: a, b, c, d, e, f, g, n, x = SR.var('a b c d e f g n x')\nsage: G = 1/((g*x + f)^2*(b*log((e*x + d)^n*c) + a)^3)\nsage: GG = integrate(G, x, algorithm='giac')\nsage: GG\nintegrate(1/((g*x + f)^2*(b*log((e*x + d)^n*c) + a)^3), x)\nsage: GG = integrate(G, x)\nsage: GG\n1/2*((a*e^2*g - (e^2*g*n - e^2*g*log(c))*b)*x^2 - (d*e*f - 2*d^2*g)*a - (d*e*f*n + (d*e*f - 2*d^2*g)*log(c))*b - ((e^2*f - 3*d*e*g)*a + (e^2*f*n + d*e*g*n + (e^2*f - 3*d*e*g)*log(c))*b)*x + (b*e^2*g*x^2 - (e^2*f - 3*d*e*g)*b*x - (d*e*f - 2*d^2*g)*b)*log((e*x + d)^n))/(b^4*e^2*f^3*n^2*log(c)^2 + 2*a*b^3*e^2*f^3*n^2*log(c) + a^2*b^2*e^2*f^3*n^2 + (b^4*e^2*g^3*n^2*log(c)^2 + 2*a*b^3*e^2*g^3*n^2*log(c) + a^2*b^2*e^2*g^3*n^2)*x^3 + 3*(b^4*e^2*f*g^2*n^2*log(c)^2 + 2*a*b^3*e^2*f*g^2*n^2*log(c) + a^2*b^2*e^2*f*g^2*n^2)*x^2 + (b^4*e^2*g^3*n^2*x^3 + 3*b^4*e^2*f*g^2*n^2*x^2 + 3*b^4*e^2*f^2*g*n^2*x + b^4*e^2*f^3*n^2)*log((e*x + d)^n)^2 + 3*(b^4*e^2*f^2*g*n^2*log(c)^2 + 2*a*b^3*e^2*f^2*g*n^2*log(c) + a^2*b^2*e^2*f^2*g*n^2)*x + 2*(b^4*e^2*f^3*n^2*log(c) + a*b^3*e^2*f^3*n^2 + (b^4*e^2*g^3*n^2*log(c) + a*b^3*e^2*g^3*n^2)*x^3 + 3*(b^4*e^2*f*g^2*n^2*log(c) + a*b^3*e^2*f*g^2*n^2)*x^2 + 3*(b^4*e^2*f^2*g*n^2*log(c) + a*b^3*e^2*f^2*g*n^2)*x)*log((e*x + d)^n)) + integrate(1/2*(e^2*g^2*x^2 + e^2*f^2 - 6*d*e*f*g + 6*d^2*g^2 - 2*(2*e^2*f*g - 3*d*e*g^2)*x)/(b^3*e^2*f^4*n^2*log(c) + a*b^2*e^2*f^4*n^2 + (b^3*e^2*g^4*n^2*log(c) + a*b^2*e^2*g^4*n^2)*x^4 + 4*(b^3*e^2*f*g^3*n^2*log(c) + a*b^2*e^2*f*g^3*n^2)*x^3 + 6*(b^3*e^2*f^2*g^2*n^2*log(c) + a*b^2*e^2*f^2*g^2*n^2)*x^2 + 4*(b^3*e^2*f^3*g*n^2*log(c) + a*b^2*e^2*f^3*g*n^2)*x + (b^3*e^2*g^4*n^2*x^4 + 4*b^3*e^2*f*g^3*n^2*x^3 + 6*b^3*e^2*f^2*g^2*n^2*x^2 + 4*b^3*e^2*f^3*g*n^2*x + b^3*e^2*f^4*n^2)*log((e*x + d)^n)), x)\n```\n\nIt appears however that the latter integration (by maxima?) is not correct. Can this integral be computed in elementary functions?",
    "created_at": "2019-01-16T10:02:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25585#issuecomment-360650",
    "user": "dimpase"
}
```

crash fixed by #26315.
The 2nd integral is however not computed by giac 1.5.0-37, I get

```
sage: a, b, c, d, e, f, g, n, x = SR.var('a b c d e f g n x')
sage: G = 1/((g*x + f)^2*(b*log((e*x + d)^n*c) + a)^3)
sage: GG = integrate(G, x, algorithm='giac')
sage: GG
integrate(1/((g*x + f)^2*(b*log((e*x + d)^n*c) + a)^3), x)
sage: GG = integrate(G, x)
sage: GG
1/2*((a*e^2*g - (e^2*g*n - e^2*g*log(c))*b)*x^2 - (d*e*f - 2*d^2*g)*a - (d*e*f*n + (d*e*f - 2*d^2*g)*log(c))*b - ((e^2*f - 3*d*e*g)*a + (e^2*f*n + d*e*g*n + (e^2*f - 3*d*e*g)*log(c))*b)*x + (b*e^2*g*x^2 - (e^2*f - 3*d*e*g)*b*x - (d*e*f - 2*d^2*g)*b)*log((e*x + d)^n))/(b^4*e^2*f^3*n^2*log(c)^2 + 2*a*b^3*e^2*f^3*n^2*log(c) + a^2*b^2*e^2*f^3*n^2 + (b^4*e^2*g^3*n^2*log(c)^2 + 2*a*b^3*e^2*g^3*n^2*log(c) + a^2*b^2*e^2*g^3*n^2)*x^3 + 3*(b^4*e^2*f*g^2*n^2*log(c)^2 + 2*a*b^3*e^2*f*g^2*n^2*log(c) + a^2*b^2*e^2*f*g^2*n^2)*x^2 + (b^4*e^2*g^3*n^2*x^3 + 3*b^4*e^2*f*g^2*n^2*x^2 + 3*b^4*e^2*f^2*g*n^2*x + b^4*e^2*f^3*n^2)*log((e*x + d)^n)^2 + 3*(b^4*e^2*f^2*g*n^2*log(c)^2 + 2*a*b^3*e^2*f^2*g*n^2*log(c) + a^2*b^2*e^2*f^2*g*n^2)*x + 2*(b^4*e^2*f^3*n^2*log(c) + a*b^3*e^2*f^3*n^2 + (b^4*e^2*g^3*n^2*log(c) + a*b^3*e^2*g^3*n^2)*x^3 + 3*(b^4*e^2*f*g^2*n^2*log(c) + a*b^3*e^2*f*g^2*n^2)*x^2 + 3*(b^4*e^2*f^2*g*n^2*log(c) + a*b^3*e^2*f^2*g*n^2)*x)*log((e*x + d)^n)) + integrate(1/2*(e^2*g^2*x^2 + e^2*f^2 - 6*d*e*f*g + 6*d^2*g^2 - 2*(2*e^2*f*g - 3*d*e*g^2)*x)/(b^3*e^2*f^4*n^2*log(c) + a*b^2*e^2*f^4*n^2 + (b^3*e^2*g^4*n^2*log(c) + a*b^2*e^2*g^4*n^2)*x^4 + 4*(b^3*e^2*f*g^3*n^2*log(c) + a*b^2*e^2*f*g^3*n^2)*x^3 + 6*(b^3*e^2*f^2*g^2*n^2*log(c) + a*b^2*e^2*f^2*g^2*n^2)*x^2 + 4*(b^3*e^2*f^3*g*n^2*log(c) + a*b^2*e^2*f^3*g*n^2)*x + (b^3*e^2*g^4*n^2*x^4 + 4*b^3*e^2*f*g^3*n^2*x^3 + 6*b^3*e^2*f^2*g^2*n^2*x^2 + 4*b^3*e^2*f^3*g*n^2*x + b^3*e^2*f^4*n^2)*log((e*x + d)^n)), x)
```

It appears however that the latter integration (by maxima?) is not correct. Can this integral be computed in elementary functions?



---

archive/issue_comments_360651.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2019-01-16T10:02:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25585#issuecomment-360651",
    "user": "dimpase"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_360652.json:
```json
{
    "body": "Replying to [comment:13 dimpase]:\n> crash fixed by #26315.\n> The 2nd integral is however not computed by giac 1.5.0-37, I get\n> {{{\n> sage: a, b, c, d, e, f, g, n, x = SR.var('a b c d e f g n x')\n> sage: G = 1/((g*x + f)^2*(b*log((e*x + d)^n*c) + a)^3)\n\n> Can this integral be computed in elementary functions?\n\nVery unlikely:\n\n```\nsage: a, b, c, d, e, f, g, n, x = SR.var('a b c d e f g n x')\nsage: G = 1/((g*x + f)^2*(b*log((e*x + d)^n*c) + a)^3)\nsage: G1 = G.subs(n=1, c=1, b=1, f=1, g=1, a=0, e=1); G1\n1/((x + 1)^2*log(d + x)^3)\nsage: integrate(G1, x, algorithm=\"fricas\")\nintegral(1/((x^2 + 2*x + 1)*log(d + x)^3), x)\n```\n\n(I also tried a well known online tool.)",
    "created_at": "2019-01-16T10:13:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25585#issuecomment-360652",
    "user": "mantepse"
}
```

Replying to [comment:13 dimpase]:
> crash fixed by #26315.
> The 2nd integral is however not computed by giac 1.5.0-37, I get
> {{{
> sage: a, b, c, d, e, f, g, n, x = SR.var('a b c d e f g n x')
> sage: G = 1/((g*x + f)^2*(b*log((e*x + d)^n*c) + a)^3)

> Can this integral be computed in elementary functions?

Very unlikely:

```
sage: a, b, c, d, e, f, g, n, x = SR.var('a b c d e f g n x')
sage: G = 1/((g*x + f)^2*(b*log((e*x + d)^n*c) + a)^3)
sage: G1 = G.subs(n=1, c=1, b=1, f=1, g=1, a=0, e=1); G1
1/((x + 1)^2*log(d + x)^3)
sage: integrate(G1, x, algorithm="fricas")
integral(1/((x^2 + 2*x + 1)*log(d + x)^3), x)
```

(I also tried a well known online tool.)



---

archive/issue_comments_360653.json:
```json
{
    "body": "Changing status from needs_info to positive_review.",
    "created_at": "2019-01-16T11:43:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25585#issuecomment-360653",
    "user": "dimpase"
}
```

Changing status from needs_info to positive_review.



---

archive/issue_comments_360654.json:
```json
{
    "body": "Yes, as `integrate(G1, x)` gives nonsense, this is yet another maxima bug. No problems with `giac` here, anyway, closing.",
    "created_at": "2019-01-16T11:43:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25585#issuecomment-360654",
    "user": "dimpase"
}
```

Yes, as `integrate(G1, x)` gives nonsense, this is yet another maxima bug. No problems with `giac` here, anyway, closing.



---

archive/issue_comments_360655.json:
```json
{
    "body": "Replying to [comment:16 dimpase]:\n> Yes, as `integrate(G1, x)` gives nonsense, this is yet another maxima bug. No problems with `giac` here, anyway, closing.\n\nNo, the result is correct, it is just not very helpful:\n\n```\nsage: (diff(integrate(G1, x), x) - G1).simplify_full()\n0\n```\n",
    "created_at": "2019-01-16T12:40:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25585#issuecomment-360655",
    "user": "mantepse"
}
```

Replying to [comment:16 dimpase]:
> Yes, as `integrate(G1, x)` gives nonsense, this is yet another maxima bug. No problems with `giac` here, anyway, closing.

No, the result is correct, it is just not very helpful:

```
sage: (diff(integrate(G1, x), x) - G1).simplify_full()
0
```




---

archive/issue_comments_360656.json:
```json
{
    "body": "Replying to [comment:17 mantepse]:\n> Replying to [comment:16 dimpase]:\n> > Yes, as `integrate(G1, x)` gives nonsense, this is yet another maxima bug. No problems with `giac` here, anyway, closing.\n> \n> No, the result is correct, it is just not very helpful:\n> {{{\n> sage: (diff(integrate(G1, x), x) - G1).simplify_full()\n> 0\n> }}}\n\nthe result of the computation without fixing parameters seems to be incorrect, that's what I was trying to say.",
    "created_at": "2019-01-16T12:51:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25585#issuecomment-360656",
    "user": "dimpase"
}
```

Replying to [comment:17 mantepse]:
> Replying to [comment:16 dimpase]:
> > Yes, as `integrate(G1, x)` gives nonsense, this is yet another maxima bug. No problems with `giac` here, anyway, closing.
> 
> No, the result is correct, it is just not very helpful:
> {{{
> sage: (diff(integrate(G1, x), x) - G1).simplify_full()
> 0
> }}}

the result of the computation without fixing parameters seems to be incorrect, that's what I was trying to say.



---

archive/issue_comments_360657.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2019-01-16T19:05:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25585#issuecomment-360657",
    "user": "tmonteil"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_360658.json:
```json
{
    "body": "This is not fixed in 8.6, i still get the errors. This ticket should depend on #26315 and requires a dedicated doctest.",
    "created_at": "2019-01-16T19:05:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25585#issuecomment-360658",
    "user": "tmonteil"
}
```

This is not fixed in 8.6, i still get the errors. This ticket should depend on #26315 and requires a dedicated doctest.



---

archive/issue_comments_360659.json:
```json
{
    "body": "Please add all the doctests you see fit on the branch of #26315 - I just don't see why we should test giac more than it tests itself...",
    "created_at": "2019-01-16T19:34:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25585#issuecomment-360659",
    "user": "dimpase"
}
```

Please add all the doctests you see fit on the branch of #26315 - I just don't see why we should test giac more than it tests itself...



---

archive/issue_comments_360660.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2019-01-16T19:35:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25585#issuecomment-360660",
    "user": "dimpase"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_360661.json:
```json
{
    "body": "no work should be done on this ticket, hence positive review.",
    "created_at": "2019-01-16T19:35:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25585#issuecomment-360661",
    "user": "dimpase"
}
```

no work should be done on this ticket, hence positive review.



---

archive/issue_comments_360662.json:
```json
{
    "body": "Presuming these are all correctly reviewed as either duplicate, invalid, or wontfix.",
    "created_at": "2019-02-26T13:58:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25585#issuecomment-360662",
    "user": "embray"
}
```

Presuming these are all correctly reviewed as either duplicate, invalid, or wontfix.



---

archive/issue_comments_360663.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2019-02-26T13:58:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25585#issuecomment-360663",
    "user": "embray"
}
```

Resolution: invalid
