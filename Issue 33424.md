# Issue 33424: Don't test files created by jupyter-sphinx

archive/issues_033424.json:
```json
{
    "body": "CC:  @mkoeppe @kiwifb\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/33661\n\n",
    "created_at": "2022-04-08T18:53:31Z",
    "labels": [
        "PLEASE CHANGE",
        "major"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "Don't test files created by jupyter-sphinx",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33424",
    "user": "@antonio-rojas"
}
```
CC:  @mkoeppe @kiwifb



Issue created by migration from https://trac.sagemath.org/ticket/33661





---

archive/issue_comments_475830.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to doctest framework.",
    "created_at": "2022-04-08T18:58:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33424",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33424#issuecomment-475830",
    "user": "@antonio-rojas"
}
```

Changing component from PLEASE CHANGE to doctest framework.



---

archive/issue_comments_475831.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2022-04-08T18:58:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33424",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33424#issuecomment-475831",
    "user": "@antonio-rojas"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_475832.json:
```json
{
    "body": "New commits:",
    "created_at": "2022-04-08T18:58:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33424",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33424#issuecomment-475832",
    "user": "@antonio-rojas"
}
```

New commits:



---

archive/issue_comments_475833.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-04-08T18:58:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33424",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33424#issuecomment-475833",
    "user": "@antonio-rojas"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_475834.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-04-08T19:03:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33424",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33424#issuecomment-475834",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_475835.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2022-04-08T19:19:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33424",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33424#issuecomment-475835",
    "user": "@mkoeppe"
}
```

Changing priority from major to critical.



---

archive/issue_comments_475836.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-04-08T19:19:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33424",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33424#issuecomment-475836",
    "user": "@mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_475837.json:
```json
{
    "body": "That's one of those things, I am surprised it only becomes apparent now. I historically had that issue before the use of `jupyter_sphinx` in sage-on-gentoo. For some reason some python files are left over from all the plots. And I don't know how they are avoided in vanilla sage. So, I am just removing them before install.\n\nhttps://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/sage-doc/sage-doc-9999.ebuild#L137\n\nhttps://github.com/cschwan/sage-on-gentoo/issues/402\n\nMy net above is sufficiently wide that it probably caught all those `jupyter_sphinx` files and I never noticed. I never quite got to the bottom of why I had those files in the first place, but they shouldn't be installed and neither should those.",
    "created_at": "2022-04-08T19:43:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33424",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33424#issuecomment-475837",
    "user": "@kiwifb"
}
```

That's one of those things, I am surprised it only becomes apparent now. I historically had that issue before the use of `jupyter_sphinx` in sage-on-gentoo. For some reason some python files are left over from all the plots. And I don't know how they are avoided in vanilla sage. So, I am just removing them before install.

https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/sage-doc/sage-doc-9999.ebuild#L137

https://github.com/cschwan/sage-on-gentoo/issues/402

My net above is sufficiently wide that it probably caught all those `jupyter_sphinx` files and I never noticed. I never quite got to the bottom of why I had those files in the first place, but they shouldn't be installed and neither should those.



---

archive/issue_comments_475838.json:
```json
{
    "body": "I had never tested the docs dir before `sage -t --installed` was introduced, so never noticed that. Anyway, that seems to have been fixed at some point - the only py files installed with docs in 9.6.beta7 are\n\n```\n/usr/share/doc/sage/html/en/reference/jupyter_execute/sage/plot/plot3d/plot3d.py\n/usr/share/doc/sage/html/en/reference/jupyter_execute/sage/repl/ipython_kernel/interact.py\n```\n",
    "created_at": "2022-04-08T20:04:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33424",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33424#issuecomment-475838",
    "user": "@antonio-rojas"
}
```

I had never tested the docs dir before `sage -t --installed` was introduced, so never noticed that. Anyway, that seems to have been fixed at some point - the only py files installed with docs in 9.6.beta7 are

```
/usr/share/doc/sage/html/en/reference/jupyter_execute/sage/plot/plot3d/plot3d.py
/usr/share/doc/sage/html/en/reference/jupyter_execute/sage/repl/ipython_kernel/interact.py
```




---

archive/issue_comments_475839.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-04-10T13:12:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33424",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33424#issuecomment-475839",
    "user": "@vbraun"
}
```

Resolution: fixed
