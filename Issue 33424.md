# Issue 33424: Don't test files created by jupyter-sphinx

Issue created by migration from https://trac.sagemath.org/ticket/33661

Original creator: arojas

Original creation time: 2022-04-08 18:53:31

CC:  mkoeppe fbissey




---

Comment by arojas created at 2022-04-08 18:58:29

Changing component from PLEASE CHANGE to doctest framework.


---

Comment by arojas created at 2022-04-08 18:58:29

Changing type from PLEASE CHANGE to defect.


---

Comment by arojas created at 2022-04-08 18:58:29

New commits:


---

Comment by arojas created at 2022-04-08 18:58:29

Changing status from new to needs_review.


---

Comment by git created at 2022-04-08 19:03:06

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2022-04-08 19:19:47

Changing priority from major to critical.


---

Comment by mkoeppe created at 2022-04-08 19:19:47

Changing status from needs_review to positive_review.


---

Comment by fbissey created at 2022-04-08 19:43:47

That's one of those things, I am surprised it only becomes apparent now. I historically had that issue before the use of `jupyter_sphinx` in sage-on-gentoo. For some reason some python files are left over from all the plots. And I don't know how they are avoided in vanilla sage. So, I am just removing them before install.

https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/sage-doc/sage-doc-9999.ebuild#L137

https://github.com/cschwan/sage-on-gentoo/issues/402

My net above is sufficiently wide that it probably caught all those `jupyter_sphinx` files and I never noticed. I never quite got to the bottom of why I had those files in the first place, but they shouldn't be installed and neither should those.


---

Comment by arojas created at 2022-04-08 20:04:19

I had never tested the docs dir before `sage -t --installed` was introduced, so never noticed that. Anyway, that seems to have been fixed at some point - the only py files installed with docs in 9.6.beta7 are

```
/usr/share/doc/sage/html/en/reference/jupyter_execute/sage/plot/plot3d/plot3d.py
/usr/share/doc/sage/html/en/reference/jupyter_execute/sage/repl/ipython_kernel/interact.py
```



---

Comment by vbraun created at 2022-04-10 13:12:50

Resolution: fixed
