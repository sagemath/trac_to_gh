# Issue 13778: rewrite sage.combinat.combinat.unordered_tuples using itertools.combinations_with_replacement

archive/issues_013778.json:
```json
{
    "body": "Assignee: sage-combinat\n\nCC:  @tscrim\n\nWith Python 2.7 there's a native implementation in python's itertools:\n\n```\nsage: list(itertools.combinations_with_replacement([1,2,3,4],2))\n[(1, 1), (1, 2), (1, 3), (1, 4), (2, 2), (2, 3), (2, 4), (3, 3), (3, 4), (4, 4)]\nsage: sage.combinat.combinat.unordered_tuples([1,2,3,4],2)\n[[1, 1], [1, 2], [1, 3], [1, 4], [2, 2], [2, 3], [2, 4], [3, 3], [3, 4], [4, 4]]\n```\nGiven that the current doc of `unordered_tuples` mentions that it wraps a GAP routine and that this is undesirable, replacing it (or deprecating it!) may be a good idea.\n\nIssue created by migration from https://trac.sagemath.org/ticket/13982\n\n",
    "created_at": "2013-01-22T08:54:14Z",
    "labels": [
        "component: combinatorics",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.5",
    "title": "rewrite sage.combinat.combinat.unordered_tuples using itertools.combinations_with_replacement",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13778",
    "user": "https://github.com/nbruin"
}
```
Assignee: sage-combinat

CC:  @tscrim

With Python 2.7 there's a native implementation in python's itertools:

```
sage: list(itertools.combinations_with_replacement([1,2,3,4],2))
[(1, 1), (1, 2), (1, 3), (1, 4), (2, 2), (2, 3), (2, 4), (3, 3), (3, 4), (4, 4)]
sage: sage.combinat.combinat.unordered_tuples([1,2,3,4],2)
[[1, 1], [1, 2], [1, 3], [1, 4], [2, 2], [2, 3], [2, 4], [3, 3], [3, 4], [4, 4]]
```
Given that the current doc of `unordered_tuples` mentions that it wraps a GAP routine and that this is undesirable, replacing it (or deprecating it!) may be a good idea.

Issue created by migration from https://trac.sagemath.org/ticket/13982





---

archive/issue_events_039282.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13778#event-39282"
}
```



---

archive/issue_events_039283.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13778#event-39283"
}
```



---

archive/issue_events_039284.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13778#event-39284"
}
```



---

archive/issue_events_039285.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13778#event-39285"
}
```



---

archive/issue_events_039286.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13778#event-39286"
}
```



---

archive/issue_events_039287.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13778#event-39287"
}
```



---

archive/issue_events_039288.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13778#event-39288"
}
```



---

archive/issue_comments_170765.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-08-22T03:43:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13778#issuecomment-170765",
    "user": "https://github.com/tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_170766.json:
```json
{
    "body": "In order to get the behavior to match, I had to call `sorted(set(S))` on the base set `S` when using `itertools`. On using the output from GAP, I had to do `map(tuple, eval(ans))` because that returned lists (or sometimes strings). I've given the choice to the user to decide on which algorithm. Here are some timings (with GAP already running):\n\n```\nsage: %timeit unordered_tuples([1,2,3],2,algorithm='itertools')\n10000 loops, best of 3: 31.9 \u00b5s per loop\nsage: %timeit unordered_tuples([1,2,3],2,algorithm='gap')\n1000 loops, best of 3: 1.65 ms per loop\nsage: %timeit eval(gap.eval( \"UnorderedTuples(%s,%s)\"%([1,2,3],ZZ(2)) ))\n1000 loops, best of 3: 1.65 ms per loop\n\nsage: %timeit unordered_tuples([1,2],6)\n10000 loops, best of 3: 31.4 \u00b5s per loop\nsage: %timeit unordered_tuples([1,2],6,algorithm='gap')\n100 loops, best of 3: 2.33 ms per loop\nsage: %timeit eval(gap.eval( \"UnorderedTuples(%s,%s)\"%([1,2],ZZ(6)) ))\n100 loops, best of 3: 2.06 ms per loop\n\nsage: %timeit unordered_tuples(range(30), 6)\n1 loops, best of 3: 590 ms per loop\nsage: %timeit eval(gap.eval( \"UnorderedTuples(%s,%s)\"%(range(30),ZZ(6)) ))\n# I got bored after a minute and killed it\n```\nSo even with everything, there is a major speedup. Now once this gets replaced with libgap (#16719), we'll have to rerun timings.\n\n---\nNew commits:",
    "created_at": "2014-08-22T03:43:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13778#issuecomment-170766",
    "user": "https://github.com/tscrim"
}
```

In order to get the behavior to match, I had to call `sorted(set(S))` on the base set `S` when using `itertools`. On using the output from GAP, I had to do `map(tuple, eval(ans))` because that returned lists (or sometimes strings). I've given the choice to the user to decide on which algorithm. Here are some timings (with GAP already running):

```
sage: %timeit unordered_tuples([1,2,3],2,algorithm='itertools')
10000 loops, best of 3: 31.9 µs per loop
sage: %timeit unordered_tuples([1,2,3],2,algorithm='gap')
1000 loops, best of 3: 1.65 ms per loop
sage: %timeit eval(gap.eval( "UnorderedTuples(%s,%s)"%([1,2,3],ZZ(2)) ))
1000 loops, best of 3: 1.65 ms per loop

sage: %timeit unordered_tuples([1,2],6)
10000 loops, best of 3: 31.4 µs per loop
sage: %timeit unordered_tuples([1,2],6,algorithm='gap')
100 loops, best of 3: 2.33 ms per loop
sage: %timeit eval(gap.eval( "UnorderedTuples(%s,%s)"%([1,2],ZZ(6)) ))
100 loops, best of 3: 2.06 ms per loop

sage: %timeit unordered_tuples(range(30), 6)
1 loops, best of 3: 590 ms per loop
sage: %timeit eval(gap.eval( "UnorderedTuples(%s,%s)"%(range(30),ZZ(6)) ))
# I got bored after a minute and killed it
```
So even with everything, there is a major speedup. Now once this gets replaced with libgap (#16719), we'll have to rerun timings.

---
New commits:



---

archive/issue_comments_170767.json:
```json
{
    "body": "Please justify the removal of the docstring with result `['aa', 'ab', 'ac', 'bb', 'bc', 'cc']`.",
    "created_at": "2014-08-22T06:02:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13778#issuecomment-170767",
    "user": "https://github.com/rwst"
}
```

Please justify the removal of the docstring with result `['aa', 'ab', 'ac', 'bb', 'bc', 'cc']`.



---

archive/issue_comments_170768.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-08-22T06:02:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13778#issuecomment-170768",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_170769.json:
```json
{
    "body": "It's an unexpected format, in particular, the results aren't tuples. One can argue from the POV of ducktyping, it's okay, but I feel the inconsistency and the fact that it would fail a more explicit `isinstance` check the behavior should be standardized for all inputs. (Side note, I feel that should be a `needs_info`.)",
    "created_at": "2014-08-22T13:15:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13778#issuecomment-170769",
    "user": "https://github.com/tscrim"
}
```

It's an unexpected format, in particular, the results aren't tuples. One can argue from the POV of ducktyping, it's okay, but I feel the inconsistency and the fact that it would fail a more explicit `isinstance` check the behavior should be standardized for all inputs. (Side note, I feel that should be a `needs_info`.)



---

archive/issue_comments_170770.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-08-22T13:15:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13778#issuecomment-170770",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_170771.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2014-08-25T13:51:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13778#issuecomment-170771",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_170772.json:
```json
{
    "body": "Hello,\n\nWhy not a deprecation? It is nowhere used in Sage code and it would be good to advertise users that it is infinitely better to use itertools directly.\n\nVincent",
    "created_at": "2014-08-25T13:51:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13778#issuecomment-170772",
    "user": "https://github.com/videlec"
}
```

Hello,

Why not a deprecation? It is nowhere used in Sage code and it would be good to advertise users that it is infinitely better to use itertools directly.

Vincent



---

archive/issue_comments_170773.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2014-08-26T02:44:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13778#issuecomment-170773",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_170774.json:
```json
{
    "body": "Because using the `itertools` directly for a multiset gives multiple copies of the same tuple\n\n```\nsage: list(itertools.combinations_with_replacement([1,1], 2))\n[(1, 1), (1, 1), (1, 1)]\n```\nwhich is a different behavior (this should just return a single tuple of `[(1, 1)]`).",
    "created_at": "2014-08-26T02:44:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13778#issuecomment-170774",
    "user": "https://github.com/tscrim"
}
```

Because using the `itertools` directly for a multiset gives multiple copies of the same tuple

```
sage: list(itertools.combinations_with_replacement([1,1], 2))
[(1, 1), (1, 1), (1, 1)]
```
which is a different behavior (this should just return a single tuple of `[(1, 1)]`).



---

archive/issue_comments_170775.json:
```json
{
    "body": "Needs a merge/rebase.\n\nNathann",
    "created_at": "2015-02-06T09:28:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13778#issuecomment-170775",
    "user": "https://github.com/nathanncohen"
}
```

Needs a merge/rebase.

Nathann



---

archive/issue_comments_170776.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-02-06T09:28:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13778#issuecomment-170776",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_170777.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-02-07T18:29:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13778#issuecomment-170777",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_170778.json:
```json
{
    "body": "Done.",
    "created_at": "2015-02-07T18:30:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13778#issuecomment-170778",
    "user": "https://github.com/tscrim"
}
```

Done.



---

archive/issue_events_039289.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-02-07T18:30:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13778#event-39289"
}
```



---

archive/issue_events_039290.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-02-07T18:30:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "milestone": "sage-6.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13778#event-39290"
}
```



---

archive/issue_comments_170779.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-02-07T18:30:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13778#issuecomment-170779",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_170780.json:
```json
{
    "body": "What about `tuples` vs `itertools.product`\n\n```\nsage: S = [1,2]\nsage: %timeit tuples(S,3)\n10000 loops, best of 3: 26.9 \u00b5s per loop\nsage: %timeit list(product(S,repeat=3))\n100000 loops, best of 3: 1.74 \u00b5s per loop\n```\nAnd the function `number_of_tuples` should not wrap anything, the answer is just `len(S)^k`.",
    "created_at": "2015-02-07T19:00:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13778#issuecomment-170780",
    "user": "https://github.com/videlec"
}
```

What about `tuples` vs `itertools.product`

```
sage: S = [1,2]
sage: %timeit tuples(S,3)
10000 loops, best of 3: 26.9 µs per loop
sage: %timeit list(product(S,repeat=3))
100000 loops, best of 3: 1.74 µs per loop
```
And the function `number_of_tuples` should not wrap anything, the answer is just `len(S)^k`.



---

archive/issue_comments_170781.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-02-12T07:36:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13778#issuecomment-170781",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_170782.json:
```json
{
    "body": "I've added that as well. Note the output order has changed (and the fact that it now returns honest tuples).",
    "created_at": "2015-02-12T07:38:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13778#issuecomment-170782",
    "user": "https://github.com/tscrim"
}
```

I've added that as well. Note the output order has changed (and the fact that it now returns honest tuples).



---

archive/issue_comments_170783.json:
```json
{
    "body": "Hello,\n\nMuch cleaner now! What do you think of deprecations (not necessarily in this ticket)? Do we really want to keep the interface to GAP for those two iterators?\n\nVincent",
    "created_at": "2015-02-15T12:14:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13778#issuecomment-170783",
    "user": "https://github.com/videlec"
}
```

Hello,

Much cleaner now! What do you think of deprecations (not necessarily in this ticket)? Do we really want to keep the interface to GAP for those two iterators?

Vincent



---

archive/issue_comments_170784.json:
```json
{
    "body": "I think it is good to have access to multiple implementations since onemight be faster in certain situations and it makes for easier testing. At the very least, it doesn't do any harm being there IMO. (There's also a president for doing this with other such functions.)",
    "created_at": "2015-02-15T22:40:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13778#issuecomment-170784",
    "user": "https://github.com/tscrim"
}
```

I think it is good to have access to multiple implementations since onemight be faster in certain situations and it makes for easier testing. At the very least, it doesn't do any harm being there IMO. (There's also a president for doing this with other such functions.)



---

archive/issue_comments_170785.json:
```json
{
    "body": "Replying to [comment:18 tscrim]:\n> I think it is good to have access to multiple implementations since onemight be faster in certain situations and it makes for easier testing.\n\n\nIn the present case `itertools` is always faster and I think people should use itertools directly.\n\n> At the very least, it doesn't do any harm being there IMO. (There's also a president for doing this with other such functions.)\n\n\nYes it does. This is one more function in the global namespace, one more file to maintain.",
    "created_at": "2015-02-18T12:18:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13778#issuecomment-170785",
    "user": "https://github.com/videlec"
}
```

Replying to [comment:18 tscrim]:
> I think it is good to have access to multiple implementations since onemight be faster in certain situations and it makes for easier testing.


In the present case `itertools` is always faster and I think people should use itertools directly.

> At the very least, it doesn't do any harm being there IMO. (There's also a president for doing this with other such functions.)


Yes it does. This is one more function in the global namespace, one more file to maintain.



---

archive/issue_comments_170786.json:
```json
{
    "body": "> Yes it does. This is one more function in the global namespace, one more file to maintain.\n\n\nPlus let us only keep the code that we think worthy of being used.\n\nNathann",
    "created_at": "2015-02-18T12:39:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13778#issuecomment-170786",
    "user": "https://github.com/nathanncohen"
}
```

> Yes it does. This is one more function in the global namespace, one more file to maintain.


Plus let us only keep the code that we think worthy of being used.

Nathann



---

archive/issue_comments_170787.json:
```json
{
    "body": "It's not adding anything more to the global namespace. Plus it is a separate (possibly different) algorithm, and you have to prove that in *every* case that the itertools implementation is faster.",
    "created_at": "2015-02-18T14:52:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13778#issuecomment-170787",
    "user": "https://github.com/tscrim"
}
```

It's not adding anything more to the global namespace. Plus it is a separate (possibly different) algorithm, and you have to prove that in *every* case that the itertools implementation is faster.



---

archive/issue_comments_170788.json:
```json
{
    "body": "> It's not adding anything more to the global namespace. Plus it is a separate (possibly different) algorithm, and you have to prove that in *every* case that the itertools implementation is faster.\n\n\nThis seems to be a very bad political idea. It is very likely that even though nobody ever uses this implementation because it is obviously slower than itertools, nobody will ever be able to give a formal proof that it is slower in all cases.\n\nNathann",
    "created_at": "2015-02-18T15:05:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13778#issuecomment-170788",
    "user": "https://github.com/nathanncohen"
}
```

> It's not adding anything more to the global namespace. Plus it is a separate (possibly different) algorithm, and you have to prove that in *every* case that the itertools implementation is faster.


This seems to be a very bad political idea. It is very likely that even though nobody ever uses this implementation because it is obviously slower than itertools, nobody will ever be able to give a formal proof that it is slower in all cases.

Nathann



---

archive/issue_comments_170789.json:
```json
{
    "body": "Replying to [comment:21 tscrim]:\n> It's not adding anything more to the global namespace.\n\n\nAll of `tuples`, `number_of_tuples`, `unordered_tuples` and `number_of_unordered_tuples` are in the global namespace. I do not claim that your branch adds something to the namespace but that it was already useless noise.",
    "created_at": "2015-02-18T15:09:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13778#issuecomment-170789",
    "user": "https://github.com/videlec"
}
```

Replying to [comment:21 tscrim]:
> It's not adding anything more to the global namespace.


All of `tuples`, `number_of_tuples`, `unordered_tuples` and `number_of_unordered_tuples` are in the global namespace. I do not claim that your branch adds something to the namespace but that it was already useless noise.



---

archive/issue_comments_170790.json:
```json
{
    "body": "`@`ncohen Even if you could show it is always slower (large sets can behave very differently, so it's not obvious to me), it makes it better testing because they are independent algorithms (although it is highly unlikely one of the algorithms has a bug).\n\n`@`vdelecroix Sorry, I interpreted the \"this\" as my branch.",
    "created_at": "2015-02-18T15:19:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13778#issuecomment-170790",
    "user": "https://github.com/tscrim"
}
```

`@`ncohen Even if you could show it is always slower (large sets can behave very differently, so it's not obvious to me), it makes it better testing because they are independent algorithms (although it is highly unlikely one of the algorithms has a bug).

`@`vdelecroix Sorry, I interpreted the "this" as my branch.



---

archive/issue_comments_170791.json:
```json
{
    "body": "The \"native\" implementation of `tuple` is recursive, and with the current implementation it passes the string `'native'` to itself a zillion times. Am I seeing ghosts or could this be an inefficiency? (I would implement the native algorithm, if anywhere, then in a separate method `tuples_native`, which would recurse upon itself, and which I would then reference *one time* from `tuples`.)\n\nOn `number_of_tuples`, is there really any chance for a gap call to beat `return ZZ( len(set(S)) )**k` ? I imagine the `set` call could take a while if `S` consists of complex things, but then again the doc of `unordered_tuples` warns against passing complex things to gap, which I assume should also apply to `number_of_tuples`. But I am too lazy to do timings...",
    "created_at": "2015-03-10T01:56:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13778#issuecomment-170791",
    "user": "https://github.com/darijgr"
}
```

The "native" implementation of `tuple` is recursive, and with the current implementation it passes the string `'native'` to itself a zillion times. Am I seeing ghosts or could this be an inefficiency? (I would implement the native algorithm, if anywhere, then in a separate method `tuples_native`, which would recurse upon itself, and which I would then reference *one time* from `tuples`.)

On `number_of_tuples`, is there really any chance for a gap call to beat `return ZZ( len(set(S)) )**k` ? I imagine the `set` call could take a while if `S` consists of complex things, but then again the doc of `unordered_tuples` warns against passing complex things to gap, which I assume should also apply to `number_of_tuples`. But I am too lazy to do timings...



---

archive/issue_comments_170792.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-13T16:40:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13778#issuecomment-170792",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_170793.json:
```json
{
    "body": "Sorry for the badly named merge commit (I started writing my next console command before the pull was finished, and what I typed ended up in the merge message instead; I thought I had cleaned it). If you are fine with my changes, feel free to set this to positive review! (I have dealt with the first paragraph of my previous post; the second paragraph has become two TODOs, but they are very low-priority.)",
    "created_at": "2015-03-13T16:42:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13778#issuecomment-170793",
    "user": "https://github.com/darijgr"
}
```

Sorry for the badly named merge commit (I started writing my next console command before the pull was finished, and what I typed ended up in the merge message instead; I thought I had cleaned it). If you are fine with my changes, feel free to set this to positive review! (I have dealt with the first paragraph of my previous post; the second paragraph has become two TODOs, but they are very low-priority.)



---

archive/issue_comments_170794.json:
```json
{
    "body": "The merge message is fine with me. I'm happy with your changes except I think we should remove the todo because having the Gap version allows us to do better testing by comparing the output from the algorithms. However if you really want to leave those in there, then you can go ahead and set a positive review.",
    "created_at": "2015-03-13T20:14:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13778#issuecomment-170794",
    "user": "https://github.com/tscrim"
}
```

The merge message is fine with me. I'm happy with your changes except I think we should remove the todo because having the Gap version allows us to do better testing by comparing the output from the algorithms. However if you really want to leave those in there, then you can go ahead and set a positive review.



---

archive/issue_comments_170795.json:
```json
{
    "body": "Thanks -- feel free to remove the TODOs; I would do so myself but currently I'm not at my home or work computer.",
    "created_at": "2015-03-13T21:50:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13778#issuecomment-170795",
    "user": "https://github.com/darijgr"
}
```

Thanks -- feel free to remove the TODOs; I would do so myself but currently I'm not at my home or work computer.



---

archive/issue_comments_170796.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-15T07:39:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13778#issuecomment-170796",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_170797.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-03-15T07:40:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13778#issuecomment-170797",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_170798.json:
```json
{
    "body": "PDF docs don't bulid",
    "created_at": "2015-03-16T21:42:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13778#issuecomment-170798",
    "user": "https://github.com/vbraun"
}
```

PDF docs don't bulid



---

archive/issue_comments_170799.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-03-16T21:42:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13778#issuecomment-170799",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_170800.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-16T22:19:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13778#issuecomment-170800",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_170801.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2015-03-16T22:20:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13778#issuecomment-170801",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_170802.json:
```json
{
    "body": "This should fix the pdf build...",
    "created_at": "2015-03-16T22:20:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13778#issuecomment-170802",
    "user": "https://github.com/tscrim"
}
```

This should fix the pdf build...



---

archive/issue_comments_170803.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-03-19T03:17:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13778#issuecomment-170803",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_039291.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-03-19T03:17:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13778",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13778#event-39291"
}
```
