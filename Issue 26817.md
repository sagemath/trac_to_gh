# Issue 26817: MR4: Gfortran as a prerequisite

archive/issues_026817.json:
```json
{
    "body": "CC:  slelievre\n\nZerline ([`@`zerline](https://gitlab.com/zerline)) opened a merge request at https://gitlab.com/sagemath/sage/merge_requests/4:\n----\n\n\n\n\n\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/27054\n\n",
    "created_at": "2019-01-14T15:34:42Z",
    "labels": [
        "PLEASE CHANGE",
        "major",
        "PLEASE CHANGE"
    ],
    "title": "MR4: Gfortran as a prerequisite",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/26817",
    "user": "galois"
}
```
CC:  slelievre

Zerline ([`@`zerline](https://gitlab.com/zerline)) opened a merge request at https://gitlab.com/sagemath/sage/merge_requests/4:
----








Issue created by migration from https://trac.sagemath.org/ticket/27054





---

archive/issue_comments_377233.json:
```json
{
    "body": "1. It's not completely correct to say that `gfortran` must be installed since Sage will install it if needed. It would be good to clarify that.\n\n2. What's up with the changes to `src/sage/combinat/tutorial.py`? There should be a separate ticket for that.",
    "created_at": "2019-01-14T16:15:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26817#issuecomment-377233",
    "user": "jdemeyer"
}
```

1. It's not completely correct to say that `gfortran` must be installed since Sage will install it if needed. It would be good to clarify that.

2. What's up with the changes to `src/sage/combinat/tutorial.py`? There should be a separate ticket for that.



---

archive/issue_comments_377234.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-01-14T16:15:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26817#issuecomment-377234",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_377235.json:
```json
{
    "body": "Replying to [comment:1 jdemeyer]:\n> \n> 2. What's up with the changes to `src/sage/combinat/tutorial.py`? There should be a separate ticket for that.\n\nthere is one, in fact, by the same author. Using a wrong branch, I presume.",
    "created_at": "2019-01-14T16:42:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26817#issuecomment-377235",
    "user": "dimpase"
}
```

Replying to [comment:1 jdemeyer]:
> 
> 2. What's up with the changes to `src/sage/combinat/tutorial.py`? There should be a separate ticket for that.

there is one, in fact, by the same author. Using a wrong branch, I presume.



---

archive/issue_comments_377236.json:
```json
{
    "body": "NOTE: `Authors` should be filled with the author full name.",
    "created_at": "2019-01-14T19:59:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26817#issuecomment-377236",
    "user": "chapoton"
}
```

NOTE: `Authors` should be filled with the author full name.



---

archive/issue_comments_377237.json:
```json
{
    "body": "Retarging tickets optimistically to the next milestone.  If you are responsible for this ticket (either its reporter or owner) and don't believe you are likely to complete this ticket before the next release (8.7) please retarget this ticket's milestone to sage-pending or sage-wishlist.",
    "created_at": "2019-01-15T18:15:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26817#issuecomment-377237",
    "user": "embray"
}
```

Retarging tickets optimistically to the next milestone.  If you are responsible for this ticket (either its reporter or owner) and don't believe you are likely to complete this ticket before the next release (8.7) please retarget this ticket's milestone to sage-pending or sage-wishlist.



---

archive/issue_comments_377238.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to documentation.",
    "created_at": "2019-02-11T09:56:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26817#issuecomment-377238",
    "user": "embray"
}
```

Changing component from PLEASE CHANGE to documentation.



---

archive/issue_comments_377239.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2019-02-11T09:56:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26817#issuecomment-377239",
    "user": "embray"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_377240.json:
```json
{
    "body": "I don't like this from the point of Fortran point of view - it is possible to build Sage with e.g. Flang. Do not break this.",
    "created_at": "2019-02-11T09:59:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26817#issuecomment-377240",
    "user": "dimpase"
}
```

I don't like this from the point of Fortran point of view - it is possible to build Sage with e.g. Flang. Do not break this.



---

archive/issue_comments_377241.json:
```json
{
    "body": "Changing type from defect to enhancement.",
    "created_at": "2019-02-14T18:24:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26817#issuecomment-377241",
    "user": "slelievre"
}
```

Changing type from defect to enhancement.



---

archive/issue_comments_377242.json:
```json
{
    "body": "Changing keywords from \"\" to \"gfortran\".",
    "created_at": "2019-02-14T18:24:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26817#issuecomment-377242",
    "user": "slelievre"
}
```

Changing keywords from "" to "gfortran".



---

archive/issue_comments_377243.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-02-14T18:24:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26817#issuecomment-377243",
    "user": "slelievre"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_377244.json:
```json
{
    "body": "Rephrased as a recommendation rather than a strict prerequisite.\n----\nNew commits:",
    "created_at": "2019-02-14T18:24:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26817#issuecomment-377244",
    "user": "slelievre"
}
```

Rephrased as a recommendation rather than a strict prerequisite.
----
New commits:



---

archive/issue_comments_377245.json:
```json
{
    "body": "On OS X, for what it's worth, I have installed gfortran (6.4.0) and I routinely build Sage with the built-in version of clang plus this gfortran. So maybe in an ideal world, the version of gfortran should match the C compiler, but it doesn't seem to be strictly necessary. Or have I just been getting lucky?",
    "created_at": "2019-02-14T18:30:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26817#issuecomment-377245",
    "user": "jhpalmieri"
}
```

On OS X, for what it's worth, I have installed gfortran (6.4.0) and I routinely build Sage with the built-in version of clang plus this gfortran. So maybe in an ideal world, the version of gfortran should match the C compiler, but it doesn't seem to be strictly necessary. Or have I just been getting lucky?



---

archive/issue_comments_377246.json:
```json
{
    "body": "In more detail:\n\n```\n$ which gcc\n/usr/bin/gcc\n$ gcc --version\nConfigured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/usr/include/c++/4.2.1\nApple LLVM version 10.0.0 (clang-1000.11.45.5)\nTarget: x86_64-apple-darwin18.2.0\nThread model: posix\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\n$ which gfortran\n/usr/local/bin/gfortran\n$ gfortran --version\nGNU Fortran (GCC) 6.4.0\nCopyright (C) 2017 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n```\n",
    "created_at": "2019-02-14T18:31:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26817#issuecomment-377246",
    "user": "jhpalmieri"
}
```

In more detail:

```
$ which gcc
/usr/bin/gcc
$ gcc --version
Configured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/usr/include/c++/4.2.1
Apple LLVM version 10.0.0 (clang-1000.11.45.5)
Target: x86_64-apple-darwin18.2.0
Thread model: posix
InstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin
$ which gfortran
/usr/local/bin/gfortran
$ gfortran --version
GNU Fortran (GCC) 6.4.0
Copyright (C) 2017 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
```




---

archive/issue_comments_377247.json:
```json
{
    "body": "Replying to [comment:10 jhpalmieri]:\n> On OS X, for what it's worth, I have installed gfortran (6.4.0) and I routinely build Sage with the built-in version of clang plus this gfortran. So maybe in an ideal world, the version of gfortran should match the C compiler, but it doesn't seem to be strictly necessary. Or have I just been getting lucky?\n\n\nthis is what we routinely do on OSX, so it does not look like a problem to me.",
    "created_at": "2019-02-14T20:23:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26817#issuecomment-377247",
    "user": "dimpase"
}
```

Replying to [comment:10 jhpalmieri]:
> On OS X, for what it's worth, I have installed gfortran (6.4.0) and I routinely build Sage with the built-in version of clang plus this gfortran. So maybe in an ideal world, the version of gfortran should match the C compiler, but it doesn't seem to be strictly necessary. Or have I just been getting lucky?


this is what we routinely do on OSX, so it does not look like a problem to me.



---

archive/issue_comments_377248.json:
```json
{
    "body": "My comment was in response to the proposed change, which includes the line \"it is necessary to have matching versions of these two compilers\".",
    "created_at": "2019-02-14T20:43:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26817#issuecomment-377248",
    "user": "jhpalmieri"
}
```

My comment was in response to the proposed change, which includes the line "it is necessary to have matching versions of these two compilers".



---

archive/issue_comments_377249.json:
```json
{
    "body": "Thanks for your feedback on my proposed phrasing in commit a35d77e:\n\n> A **Fortran compiler** (matching the C/C++ compiler) is recommended,\n> although not a strict requirement: if none is present, **gfortran**\n> will be built, and this might also trigger building **gcc**, since\n> it is necessary to have matching versions of these two compilers.\n> Thus having a Fortran compiler present and compatible with the C/C++\n> compiler (for example matching versions of **gcc** and **gfortran**,\n> or **Clang** and **Flang**) can make the build simpler and faster.\n\nHow about the following?\n\n> A **Fortran compiler** is recommended, although not a strict requirement:\n> if none is present, **gfortran** will be built, and this might also trigger\n> building **gcc**, depending on the OS and on what C/C++ compiler and what\n> version of it is present. Having a Fortran compiler compatible with the\n> C/C++ compiler (for example matching versions of **gcc** and **gfortran**,\n> or compatible versions of **Clang** and **Flang**, or of **Clang** and\n> **gfortran**) can thus save time and power when building Sage.",
    "created_at": "2019-02-14T21:15:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26817#issuecomment-377249",
    "user": "slelievre"
}
```

Thanks for your feedback on my proposed phrasing in commit a35d77e:

> A **Fortran compiler** (matching the C/C++ compiler) is recommended,
> although not a strict requirement: if none is present, **gfortran**
> will be built, and this might also trigger building **gcc**, since
> it is necessary to have matching versions of these two compilers.
> Thus having a Fortran compiler present and compatible with the C/C++
> compiler (for example matching versions of **gcc** and **gfortran**,
> or **Clang** and **Flang**) can make the build simpler and faster.

How about the following?

> A **Fortran compiler** is recommended, although not a strict requirement:
> if none is present, **gfortran** will be built, and this might also trigger
> building **gcc**, depending on the OS and on what C/C++ compiler and what
> version of it is present. Having a Fortran compiler compatible with the
> C/C++ compiler (for example matching versions of **gcc** and **gfortran**,
> or compatible versions of **Clang** and **Flang**, or of **Clang** and
> **gfortran**) can thus save time and power when building Sage.



---

archive/issue_comments_377250.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-02-14T21:15:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26817#issuecomment-377250",
    "user": "slelievre"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_377251.json:
```json
{
    "body": "I'm happy with the revised version.",
    "created_at": "2019-02-14T22:49:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26817#issuecomment-377251",
    "user": "jhpalmieri"
}
```

I'm happy with the revised version.



---

archive/issue_comments_377252.json:
```json
{
    "body": "Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)",
    "created_at": "2019-03-25T10:56:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26817#issuecomment-377252",
    "user": "embray"
}
```

Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)



---

archive/issue_comments_377253.json:
```json
{
    "body": "Tickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).",
    "created_at": "2019-06-14T14:50:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26817#issuecomment-377253",
    "user": "embray"
}
```

Tickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).



---

archive/issue_comments_377254.json:
```json
{
    "body": "Ticket retargeted after milestone closed",
    "created_at": "2019-12-30T14:48:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26817#issuecomment-377254",
    "user": "embray"
}
```

Ticket retargeted after milestone closed



---

archive/issue_comments_377255.json:
```json
{
    "body": "See also #26964, which generates the commands to install recommended system packages.",
    "created_at": "2020-02-08T22:59:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26817#issuecomment-377255",
    "user": "mkoeppe"
}
```

See also #26964, which generates the commands to install recommended system packages.



---

archive/issue_comments_377256.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-02-09T22:14:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26817#issuecomment-377256",
    "user": "mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_377257.json:
```json
{
    "body": "#26964 is ready and takes care of this.",
    "created_at": "2020-02-09T22:15:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26817#issuecomment-377257",
    "user": "mkoeppe"
}
```

#26964 is ready and takes care of this.



---

archive/issue_comments_377258.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-04-04T22:40:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26817#issuecomment-377258",
    "user": "mjo"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_377259.json:
```json
{
    "body": "Resolution: duplicate",
    "created_at": "2020-04-05T06:23:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26817#issuecomment-377259",
    "user": "chapoton"
}
```

Resolution: duplicate



---

archive/issue_comments_377260.json:
```json
{
    "body": "ok, thx",
    "created_at": "2020-04-05T06:23:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26817#issuecomment-377260",
    "user": "chapoton"
}
```

ok, thx
