# Issue 11981: Make series of data available on sage_timeit return objects

Issue created by migration from https://trac.sagemath.org/ticket/12153

Original creator: nbruin

Original creation time: 2011-12-14 08:35:11

Assignee: jason

Since sage_timeit can already do repeats it may be useful to make all the gathered data available for analysis. See
[sage-devel](http://groups.google.com/group/sage-devel/browse_thread/thread/f25ab7b709bd3a57)



---

Attachment


---

Comment by jason created at 2011-12-14 10:18:19

In general, making a default argument [] is not a good idea, since only *one* list is created and is used as the default argument for all invocations of the function, meaning if that list is changed, all defaults for the function are changed.


---

Comment by vbraun created at 2011-12-14 11:11:19

I.e. change lists to tuples. If you don't want to have the array data modified then use a tuple.


---

Comment by jason created at 2011-12-14 11:13:23

Or I typically set the default to None and then test for None inside the function; if the value is None, then set it to a (new) empty list


---

Attachment

apply *only* this patch


---

Comment by was created at 2011-12-14 19:53:48

Changing status from new to needs_review.


---

Comment by nbruin created at 2011-12-15 06:43:40

Hm, seems that between 4.7.1 and 4.7.2 there have been some changes to sage_timeit. The patch doesn't apply for me. Just a few thoughts:
 * is "series" the right name? the compatibility with `stats.TimeSeries` seems to suggest so.
 * should "series" be scaled with the units `s.stats[4]` ?
 * don't use "mean" to illustrate statistics possibilities. "median" is almost certainly more meaningful since it doesn't depend on a metric, only on ordering. It is less sensitive to crazy outliers.


---

Comment by was created at 2011-12-15 22:47:16

Nils -- I'm using sage-4.8.alpha5. 

1. I'm good with series as the name

2. I would like timings to always be in seconds (?), since otherwise it could be confusing to compare.  Is that what happens now?  Or are you proposing they *not* be in seconds?

3. I just copied your example in which you used "mean"...  but using something else might be useful. 

There's a lot of good ideas on sage-devel.  I could even see adding a "warm_up" option to timeit, where it runs something else first to warm things up and improve timing quality.


---

Comment by nbruin created at 2012-01-01 00:25:24

Changing status from needs_review to positive_review.


---

Comment by nbruin created at 2012-01-01 00:25:24

Works for me on 4.6.alpha6 on sage.math. It can be made fancier of course, but the present patch already provides the basic functionality.

I don't think a warm_up option makes sense when `s.series[3:]` gives the same result (running "something else" would lead to different warming up characteristics in terms of memory use and cache filling. Running the same code multiple times before starting measurement is the only thing that has a good chance of leading to a measurement series where the first few aren't deviating. Whether that is what we want is of course a different discussion)


---

Comment by jdemeyer created at 2012-01-18 08:08:45

Resolution: fixed
