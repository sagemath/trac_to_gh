# Issue 32439: logic.print_table changes your truthtable

archive/issues_032439.json:
```json
{
    "body": "Keywords: logic, truthtable\n\nSo you want to do some logic stuff and to print fancy truthtables? Okay, you can do it:\n\n\n```\nsage: log = SymbolicLogic() \n....: F = log.statement(\"A->B\") \n....: T = log.truthtable(F) \n....: log.print_table(T)                                                                                                                                                               \nA     | B     | value | \n------------------------\nFalse | False | True  | \nFalse | True  | True  | \nTrue  | False | False | \nTrue  | True  | True  |\n```\n\n\nBut you can do it only once.\n\n\n```\nsage: log.print_table(T)                                                                                                                                                              \n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n<ipython-input-7-b448b050f589> in <module>\n----> 1 log.print_table(T)\n\n/usr/lib/python3/dist-packages/sage/logic/logic.py in print_table(self, table)\n    238         vars_len = []\n    239         line = s = \"\"\n--> 240         vars_order.reverse()\n    241         vars_order.append('value')\n    242         for var in vars_order:\n\nAttributeError: 'str' object has no attribute 'reverse'\n```\n\n\nIt's pretty bad to implicitly change a list that came as function parameter, you break your data. It's better to make a copy and work on it. I made a patch.\n\nIssue created by migration from https://trac.sagemath.org/ticket/32676\n\n",
    "created_at": "2021-10-12T21:08:02Z",
    "labels": [
        "component: please change",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "logic.print_table changes your truthtable",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32439",
    "user": "https://github.com/derVedro"
}
```
Keywords: logic, truthtable

So you want to do some logic stuff and to print fancy truthtables? Okay, you can do it:


```
sage: log = SymbolicLogic() 
....: F = log.statement("A->B") 
....: T = log.truthtable(F) 
....: log.print_table(T)                                                                                                                                                               
A     | B     | value | 
------------------------
False | False | True  | 
False | True  | True  | 
True  | False | False | 
True  | True  | True  |
```


But you can do it only once.


```
sage: log.print_table(T)                                                                                                                                                              
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
<ipython-input-7-b448b050f589> in <module>
----> 1 log.print_table(T)

/usr/lib/python3/dist-packages/sage/logic/logic.py in print_table(self, table)
    238         vars_len = []
    239         line = s = ""
--> 240         vars_order.reverse()
    241         vars_order.append('value')
    242         for var in vars_order:

AttributeError: 'str' object has no attribute 'reverse'
```


It's pretty bad to implicitly change a list that came as function parameter, you break your data. It's better to make a copy and work on it. I made a patch.

Issue created by migration from https://trac.sagemath.org/ticket/32676





---

archive/issue_comments_462204.json:
```json
{
    "body": "patch for sage/src/sage/logic/logic.py",
    "created_at": "2021-10-12T21:08:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32439#issuecomment-462204",
    "user": "https://github.com/derVedro"
}
```

patch for sage/src/sage/logic/logic.py



---

archive/issue_comments_462205.json:
```json
{
    "body": "Attachment [patch](tarball://root/attachments/some-uuid/ticket32676/patch) by @DaveWitteMorris created at 2021-10-15 17:08:13",
    "created_at": "2021-10-15T17:08:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32439#issuecomment-462205",
    "user": "https://github.com/DaveWitteMorris"
}
```

Attachment [patch](tarball://root/attachments/some-uuid/ticket32676/patch) by @DaveWitteMorris created at 2021-10-15 17:08:13



---

archive/issue_comments_462206.json:
```json
{
    "body": "Thanks for the bug report and the fix.  Please put your real-world full name in the \"Authors\" field (because you authored the bug fix).  I turned your patch into a git branch and added a doctest. (However, I made a reviewer edit that changed the slicing to a use of the `copy` method, since that seems to be the preferred approach in Python 3.)\n----\nNew commits:",
    "created_at": "2021-10-15T17:15:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32439#issuecomment-462206",
    "user": "https://github.com/DaveWitteMorris"
}
```

Thanks for the bug report and the fix.  Please put your real-world full name in the "Authors" field (because you authored the bug fix).  I turned your patch into a git branch and added a doctest. (However, I made a reviewer edit that changed the slicing to a use of the `copy` method, since that seems to be the preferred approach in Python 3.)
----
New commits:



---

archive/issue_comments_462207.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to misc.",
    "created_at": "2021-10-15T17:15:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32439#issuecomment-462207",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changing component from PLEASE CHANGE to misc.



---

archive/issue_comments_462208.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-10-15T17:15:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32439#issuecomment-462208",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_462209.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-10-20T00:52:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32439#issuecomment-462209",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_462210.json:
```json
{
    "body": "Doctest failure in a patchbot.",
    "created_at": "2021-10-20T00:52:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32439#issuecomment-462210",
    "user": "https://github.com/DaveWitteMorris"
}
```

Doctest failure in a patchbot.



---

archive/issue_comments_462211.json:
```json
{
    "body": "Like `print_table`, the `truthtable` method also changed one of its arguments: it reversed the order of the list of variable names in `statement[2]`. The PR fixes this. (It also adds a doctest, and removes a reversal in the `print_table` method that was presumably added to try to compensate for the reversal that was done in the `truthtable` method.)\n\nThe PR also fixes two incorrect doctests.  One of the doctests of the `print_table` method said that part of a certain truth table should be \n\n```\na     | b     | c     | value | value |\n----------------------------------------\nFalse | False | False | True  | True  |\nFalse | False | True  | False | False |\nFalse | False | True  | True  | False |\nFalse | True  | False | False | True  |\n```\n\nThat is absurd: there cannot be two `value` columns.\n\nAnd a doctest of the `truthtable` method said that part of the truth table of `a&b|!(c|a)` should be\n\n```\n['False', 'False', 'True', 'False'],\n['False', 'True', 'False', 'True'],\n['False', 'True', 'True', 'True'],\n['True', 'False', 'False', 'False']\n```\n\nBut the third row of this is wrong: if `a` is `False`, but `b` and `c` are `True`, then the statement is `False`, not `True`.\n\nI also rebased on 9.5b4.\n\n----\nNew commits:",
    "created_at": "2021-10-22T05:16:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32439#issuecomment-462211",
    "user": "https://github.com/DaveWitteMorris"
}
```

Like `print_table`, the `truthtable` method also changed one of its arguments: it reversed the order of the list of variable names in `statement[2]`. The PR fixes this. (It also adds a doctest, and removes a reversal in the `print_table` method that was presumably added to try to compensate for the reversal that was done in the `truthtable` method.)

The PR also fixes two incorrect doctests.  One of the doctests of the `print_table` method said that part of a certain truth table should be 

```
a     | b     | c     | value | value |
----------------------------------------
False | False | False | True  | True  |
False | False | True  | False | False |
False | False | True  | True  | False |
False | True  | False | False | True  |
```

That is absurd: there cannot be two `value` columns.

And a doctest of the `truthtable` method said that part of the truth table of `a&b|!(c|a)` should be

```
['False', 'False', 'True', 'False'],
['False', 'True', 'False', 'True'],
['False', 'True', 'True', 'True'],
['True', 'False', 'False', 'False']
```

But the third row of this is wrong: if `a` is `False`, but `b` and `c` are `True`, then the statement is `False`, not `True`.

I also rebased on 9.5b4.

----
New commits:



---

archive/issue_comments_462212.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-10-22T05:16:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32439#issuecomment-462212",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_462213.json:
```json
{
    "body": "The patchbot can be considered to be green. (The only doctest failure is the unrelated problem with gmp that is addressed in ticket #32737.)\n\nI upgraded the priority to critical because sage was silently giving wrong answers (the incorrect truth tables in comment:6) in simple situations.",
    "created_at": "2021-10-23T01:39:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32439#issuecomment-462213",
    "user": "https://github.com/DaveWitteMorris"
}
```

The patchbot can be considered to be green. (The only doctest failure is the unrelated problem with gmp that is addressed in ticket #32737.)

I upgraded the priority to critical because sage was silently giving wrong answers (the incorrect truth tables in comment:6) in simple situations.



---

archive/issue_comments_462214.json:
```json
{
    "body": "Changing priority from minor to critical.",
    "created_at": "2021-10-23T01:39:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32439#issuecomment-462214",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changing priority from minor to critical.



---

archive/issue_comments_462215.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-12-21T17:48:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32439#issuecomment-462215",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_462216.json:
```json
{
    "body": "Thanks!",
    "created_at": "2021-12-21T18:09:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32439#issuecomment-462216",
    "user": "https://github.com/DaveWitteMorris"
}
```

Thanks!



---

archive/issue_comments_462217.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-12-28T21:15:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32439#issuecomment-462217",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_029430.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2021-12-28T21:15:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32439",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32439#event-29430"
}
```
