# Issue 29132: spkg-configure.m4 for brial

archive/issues_029132.json:
```json
{
    "body": "CC:  embray fbissey mkoeppe dimpase\n\nNothing unusual here except that this is a C++ library with no pkg-config file, and that makes it a bit harder to search for. I've assumed that any version we find is acceptable, which probably is not quite true.\n\nIssue created by migration from https://trac.sagemath.org/ticket/29369\n\n",
    "created_at": "2020-03-19T17:26:06Z",
    "labels": [
        "build: configure",
        "major",
        "enhancement"
    ],
    "title": "spkg-configure.m4 for brial",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29132",
    "user": "mjo"
}
```
CC:  embray fbissey mkoeppe dimpase

Nothing unusual here except that this is a C++ library with no pkg-config file, and that makes it a bit harder to search for. I've assumed that any version we find is acceptable, which probably is not quite true.

Issue created by migration from https://trac.sagemath.org/ticket/29369





---

archive/issue_comments_412436.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-03-19T17:36:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412436",
    "user": "mjo"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_412437.json:
```json
{
    "body": "I left off the libpng dependency, because I think brial needs it if and only if mr4i does. I also left off the python dependency, but maybe I shouldn't have?\n----\nNew commits:",
    "created_at": "2020-03-19T17:36:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412437",
    "user": "mjo"
}
```

I left off the libpng dependency, because I think brial needs it if and only if mr4i does. I also left off the python dependency, but maybe I shouldn't have?
----
New commits:



---

archive/issue_comments_412438.json:
```json
{
    "body": "This is a matter for another ticket but I think the python part should be merged into sage proper.\nA bit of history.\nPolyBoRi use to have its own python bindings. sage also had its own python bindings to PolyBoRi. The python part of PolyBoRI (now BRiAl) could work with either the PolyBoRI or sage bindings. In BRiAl we never bothered with porting the python bindings of PolyBoRi - they are not there anymore. I removed all bits that could have used the PolyBoRi bindings from what is now sage-brial in Gentoo. So at the moment\n* Brial is needed to build sage because sage builds binding to brial\n* sage-brial needs sage's binding at runtime to be usable\n* sage needs sage-brial at run time for some stuff\n\nI think sage-brial should just be merged in sage.",
    "created_at": "2020-03-19T19:03:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412438",
    "user": "fbissey"
}
```

This is a matter for another ticket but I think the python part should be merged into sage proper.
A bit of history.
PolyBoRi use to have its own python bindings. sage also had its own python bindings to PolyBoRi. The python part of PolyBoRI (now BRiAl) could work with either the PolyBoRI or sage bindings. In BRiAl we never bothered with porting the python bindings of PolyBoRi - they are not there anymore. I removed all bits that could have used the PolyBoRi bindings from what is now sage-brial in Gentoo. So at the moment
* Brial is needed to build sage because sage builds binding to brial
* sage-brial needs sage's binding at runtime to be usable
* sage needs sage-brial at run time for some stuff

I think sage-brial should just be merged in sage.



---

archive/issue_comments_412439.json:
```json
{
    "body": "`build/pkgs/brial/distros/` needs filling",
    "created_at": "2020-03-19T19:25:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412439",
    "user": "mkoeppe"
}
```

`build/pkgs/brial/distros/` needs filling



---

archive/issue_comments_412440.json:
```json
{
    "body": "At the moment we cannot use python packages in the system python -- such as presumably the one of brial.\nSee #29023",
    "created_at": "2020-03-19T19:42:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412440",
    "user": "mkoeppe"
}
```

At the moment we cannot use python packages in the system python -- such as presumably the one of brial.
See #29023



---

archive/issue_comments_412441.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-03-19T23:17:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412441",
    "user": "mjo"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_412442.json:
```json
{
    "body": "Replying to [comment:2 fbissey]:\n> This is a matter for another ticket but I think the python part should be merged into sage proper.\n\nAh, I didn't realize that sage's brial is installing TWO things, both the C++ library and a python package. I've only detected the C++ library, so this will have to wait until something happens with python -- either adding support for system python modules, or just moving sage-brial into sage in this case.\n\n(I'm still running a ptestlong on this branch but presumably it will fail.)",
    "created_at": "2020-03-19T23:17:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412442",
    "user": "mjo"
}
```

Replying to [comment:2 fbissey]:
> This is a matter for another ticket but I think the python part should be merged into sage proper.

Ah, I didn't realize that sage's brial is installing TWO things, both the C++ library and a python package. I've only detected the C++ library, so this will have to wait until something happens with python -- either adding support for system python modules, or just moving sage-brial into sage in this case.

(I'm still running a ptestlong on this branch but presumably it will fail.)



---

archive/issue_comments_412443.json:
```json
{
    "body": "a less invasive option that moving sage-brial into sage would be to split the package into two parts, python and non-python (they may use the same tarball). Then the work done here is perfectly useful for brial proper, and sage-brial becomes another story.",
    "created_at": "2020-03-20T04:23:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412443",
    "user": "dimpase"
}
```

a less invasive option that moving sage-brial into sage would be to split the package into two parts, python and non-python (they may use the same tarball). Then the work done here is perfectly useful for brial proper, and sage-brial becomes another story.



---

archive/issue_comments_412444.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-26T13:02:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412444",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_412445.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-03-26T13:08:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412445",
    "user": "mjo"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_412446.json:
```json
{
    "body": "Replying to [comment:6 dimpase]:\n> a less invasive option that moving sage-brial into sage would be to split the package into two parts, python and non-python (they may use the same tarball). Then the work done here is perfectly useful for brial proper, and sage-brial becomes another story.\n\nYeah, for now this is the path of least resistance (although the whole thing can probably be copy/pasted into src/sage/libs/brial). I factored the python module out into a new standard sage_brial package and now everything looks OK.",
    "created_at": "2020-03-26T13:08:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412446",
    "user": "mjo"
}
```

Replying to [comment:6 dimpase]:
> a less invasive option that moving sage-brial into sage would be to split the package into two parts, python and non-python (they may use the same tarball). Then the work done here is perfectly useful for brial proper, and sage-brial becomes another story.

Yeah, for now this is the path of least resistance (although the whole thing can probably be copy/pasted into src/sage/libs/brial). I factored the python module out into a new standard sage_brial package and now everything looks OK.



---

archive/issue_comments_412447.json:
```json
{
    "body": "https://repology.org/project/brial/versions",
    "created_at": "2020-03-26T18:39:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412447",
    "user": "mkoeppe"
}
```

https://repology.org/project/brial/versions



---

archive/issue_comments_412448.json:
```json
{
    "body": "You can throw an upgrade on top of my commits if you want, I just didn't feel like adding more variables to this ticket (especially since my goal is to never again use the SPKG in the first place).",
    "created_at": "2020-03-26T18:46:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412448",
    "user": "mjo"
}
```

You can throw an upgrade on top of my commits if you want, I just didn't feel like adding more variables to this ticket (especially since my goal is to never again use the SPKG in the first place).



---

archive/issue_comments_412449.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-26T19:13:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412449",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_412450.json:
```json
{
    "body": "Tests run at https://github.com/mkoeppe/sage/actions/runs/64055444",
    "created_at": "2020-03-26T19:25:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412450",
    "user": "mkoeppe"
}
```

Tests run at https://github.com/mkoeppe/sage/actions/runs/64055444



---

archive/issue_comments_412451.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-26T20:51:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412451",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_412452.json:
```json
{
    "body": "Testing at \u200bhttps://github.com/mkoeppe/sage/actions/runs/64126739",
    "created_at": "2020-03-26T21:18:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412452",
    "user": "mkoeppe"
}
```

Testing at ​https://github.com/mkoeppe/sage/actions/runs/64126739



---

archive/issue_comments_412453.json:
```json
{
    "body": "OK, looks good. I'll wait for MacOS tests to finish.",
    "created_at": "2020-03-27T02:35:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412453",
    "user": "dimpase"
}
```

OK, looks good. I'll wait for MacOS tests to finish.



---

archive/issue_comments_412454.json:
```json
{
    "body": "better macOS tests scheduled here: https://github.com/mkoeppe/sage/actions/runs/64318155\n(hopefully I fixed the broken parallelization of the build)",
    "created_at": "2020-03-27T04:02:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412454",
    "user": "mkoeppe"
}
```

better macOS tests scheduled here: https://github.com/mkoeppe/sage/actions/runs/64318155
(hopefully I fixed the broken parallelization of the build)



---

archive/issue_comments_412455.json:
```json
{
    "body": "brial's build or sage's one?",
    "created_at": "2020-03-27T04:07:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412455",
    "user": "fbissey"
}
```

brial's build or sage's one?



---

archive/issue_comments_412456.json:
```json
{
    "body": "I gather it's Sage's builds using brial from Homebrew",
    "created_at": "2020-03-27T04:13:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412456",
    "user": "dimpase"
}
```

I gather it's Sage's builds using brial from Homebrew



---

archive/issue_comments_412457.json:
```json
{
    "body": "system brial needs m4ri and boost, yet\n\n```\n2020-03-27T06:01:37.8676320Z Checking whether SageMath should install SPKG brial...\n2020-03-27T06:01:37.8715050Z checking whether any of boost m4ri is installed as or will be installed as SPKG... yes; install brial as well\n2020-03-27T06:01:37.8715730Z configure: no suitable system package found for SPKG brial\n```\n\n\nand then the build dies on pynac (not surprisingly)\n\nThe problem is in m4ri\n\n```\n2020-03-27T06:01:37.8106410Z Checking whether SageMath should install SPKG m4ri...\n2020-03-27T06:01:37.8144280Z checking whether any of libpng is installed as or will be installed as SPKG... no\n2020-03-27T06:01:37.8422490Z checking for m4ri >= 20140914... no\n2020-03-27T06:01:37.8673980Z configure: no suitable system package found for SPKG m4ri\n```\n\n\nthere is a non-standard location formula/installation availabe:\n\nhttps://github.com/brewsci/homebrew-science/blob/master/Formula/m4ri.rb",
    "created_at": "2020-03-27T08:18:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412457",
    "user": "dimpase"
}
```

system brial needs m4ri and boost, yet

```
2020-03-27T06:01:37.8676320Z Checking whether SageMath should install SPKG brial...
2020-03-27T06:01:37.8715050Z checking whether any of boost m4ri is installed as or will be installed as SPKG... yes; install brial as well
2020-03-27T06:01:37.8715730Z configure: no suitable system package found for SPKG brial
```


and then the build dies on pynac (not surprisingly)

The problem is in m4ri

```
2020-03-27T06:01:37.8106410Z Checking whether SageMath should install SPKG m4ri...
2020-03-27T06:01:37.8144280Z checking whether any of libpng is installed as or will be installed as SPKG... no
2020-03-27T06:01:37.8422490Z checking for m4ri >= 20140914... no
2020-03-27T06:01:37.8673980Z configure: no suitable system package found for SPKG m4ri
```


there is a non-standard location formula/installation availabe:

https://github.com/brewsci/homebrew-science/blob/master/Formula/m4ri.rb



---

archive/issue_comments_412458.json:
```json
{
    "body": "let's merge this, and fix for MacOS/Cygwin, if/as needed.",
    "created_at": "2020-03-27T08:26:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412458",
    "user": "dimpase"
}
```

let's merge this, and fix for MacOS/Cygwin, if/as needed.



---

archive/issue_comments_412459.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-03-27T08:26:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412459",
    "user": "dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_412460.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-03-27T13:12:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412460",
    "user": "mkoeppe"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_412461.json:
```json
{
    "body": "Because it depends on m4ri and we only accept very new versions of that, this only uses brial on very few system configurations.\n`ubuntu-eoan-python2` (https://github.com/mkoeppe/sage/runs/537774470), `ubuntu-focal` (https://github.com/mkoeppe/sage/runs/537774488) and `archlinux-latest-standard` (https://github.com/mkoeppe/sage/runs/537774841) work well.\nThe test failures on `debian-bullseye-standard` (https://github.com/mkoeppe/sage/runs/537774574) are probably unrelated.\n\nThere's no brial package for homebrew, so there's nothing to test.\n\nBut it does not find brial on `fedora-31-standard` (https://github.com/mkoeppe/sage/runs/537774738). Please take a look",
    "created_at": "2020-03-27T13:12:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412461",
    "user": "mkoeppe"
}
```

Because it depends on m4ri and we only accept very new versions of that, this only uses brial on very few system configurations.
`ubuntu-eoan-python2` (https://github.com/mkoeppe/sage/runs/537774470), `ubuntu-focal` (https://github.com/mkoeppe/sage/runs/537774488) and `archlinux-latest-standard` (https://github.com/mkoeppe/sage/runs/537774841) work well.
The test failures on `debian-bullseye-standard` (https://github.com/mkoeppe/sage/runs/537774574) are probably unrelated.

There's no brial package for homebrew, so there's nothing to test.

But it does not find brial on `fedora-31-standard` (https://github.com/mkoeppe/sage/runs/537774738). Please take a look



---

archive/issue_comments_412462.json:
```json
{
    "body": "Replying to [comment:21 dimpase]:\n> there is a non-standard location formula/installation availabe:\n> \n> https://github.com/brewsci/homebrew-science/blob/master/Formula/m4ri.rb\n\nhttps://github.com/brewsci/homebrew-science is unmaintained. Let's not use it.",
    "created_at": "2020-03-27T13:14:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412462",
    "user": "mkoeppe"
}
```

Replying to [comment:21 dimpase]:
> there is a non-standard location formula/installation availabe:
> 
> https://github.com/brewsci/homebrew-science/blob/master/Formula/m4ri.rb

https://github.com/brewsci/homebrew-science is unmaintained. Let's not use it.



---

archive/issue_comments_412463.json:
```json
{
    "body": "Replying to [comment:23 mkoeppe]:\n> \n> But it does not find brial on `fedora-31-standard` (https://github.com/mkoeppe/sage/runs/537774738). Please take a look\n> \n\nIs brial-devel installed there?",
    "created_at": "2020-03-27T13:54:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412463",
    "user": "mjo"
}
```

Replying to [comment:23 mkoeppe]:
> 
> But it does not find brial on `fedora-31-standard` (https://github.com/mkoeppe/sage/runs/537774738). Please take a look
> 

Is brial-devel installed there?



---

archive/issue_comments_412464.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-27T14:29:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412464",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_412465.json:
```json
{
    "body": "Another round of tests at https://github.com/mkoeppe/sage/actions/runs/64668026",
    "created_at": "2020-03-27T14:35:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412465",
    "user": "mkoeppe"
}
```

Another round of tests at https://github.com/mkoeppe/sage/actions/runs/64668026



---

archive/issue_comments_412466.json:
```json
{
    "body": "fedora-28-standard (https://github.com/mkoeppe/sage/runs/539636819):\n\n```\n  [sagelib-9.1.beta8]   build/cythonized/sage/rings/polynomial/pbori.cpp:60026:55: error: use of deleted function \u2018polybori::BooleConstant& polybori::BooleConstant::operator=(polybori::BooleConstant&&)\u2019\n  [sagelib-9.1.beta8]      __pyx_v_self->_pbconst = BooleConstant(__pyx_v_value);\n  [sagelib-9.1.beta8]                                                          ^\n  [sagelib-9.1.beta8]   In file included from /usr/include/polybori/BoolePolynomial.h:42,\n  [sagelib-9.1.beta8]                    from /sage/src/sage/libs/polybori/pb_wrap.h:1,\n  [sagelib-9.1.beta8]                    from build/cythonized/sage/rings/polynomial/pbori.cpp:684:\n  [sagelib-9.1.beta8]   /usr/include/polybori/BooleConstant.h:40:7: note: \u2018polybori::BooleConstant& polybori::BooleConstant::operator=(polybori::BooleConstant&&)\u2019 is implicitly deleted because the default definition would be ill-formed:\n  [sagelib-9.1.beta8]    class BooleConstant:\n  [sagelib-9.1.beta8]          ^~~~~~~~~~~~~\n  [sagelib-9.1.beta8]   /usr/include/polybori/BooleConstant.h:40:7: error: non-static const member \u2018const bool polybori::BooleConstant::m_value\u2019, can\u2019t use default assignment operator\n  [sagelib-9.1.beta8]   error: command 'gcc' failed with exit status 1\n```\n",
    "created_at": "2020-03-27T19:09:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412466",
    "user": "mkoeppe"
}
```

fedora-28-standard (https://github.com/mkoeppe/sage/runs/539636819):

```
  [sagelib-9.1.beta8]   build/cythonized/sage/rings/polynomial/pbori.cpp:60026:55: error: use of deleted function ‘polybori::BooleConstant& polybori::BooleConstant::operator=(polybori::BooleConstant&&)’
  [sagelib-9.1.beta8]      __pyx_v_self->_pbconst = BooleConstant(__pyx_v_value);
  [sagelib-9.1.beta8]                                                          ^
  [sagelib-9.1.beta8]   In file included from /usr/include/polybori/BoolePolynomial.h:42,
  [sagelib-9.1.beta8]                    from /sage/src/sage/libs/polybori/pb_wrap.h:1,
  [sagelib-9.1.beta8]                    from build/cythonized/sage/rings/polynomial/pbori.cpp:684:
  [sagelib-9.1.beta8]   /usr/include/polybori/BooleConstant.h:40:7: note: ‘polybori::BooleConstant& polybori::BooleConstant::operator=(polybori::BooleConstant&&)’ is implicitly deleted because the default definition would be ill-formed:
  [sagelib-9.1.beta8]    class BooleConstant:
  [sagelib-9.1.beta8]          ^~~~~~~~~~~~~
  [sagelib-9.1.beta8]   /usr/include/polybori/BooleConstant.h:40:7: error: non-static const member ‘const bool polybori::BooleConstant::m_value’, can’t use default assignment operator
  [sagelib-9.1.beta8]   error: command 'gcc' failed with exit status 1
```




---

archive/issue_comments_412467.json:
```json
{
    "body": "Replying to [comment:28 mkoeppe]:\n> fedora-28-standard (https://github.com/mkoeppe/sage/runs/539636819):\n> {{{\n>   [sagelib-9.1.beta8]   build/cythonized/sage/rings/polynomial/pbori.cpp:60026:55: error: use of deleted function \u2018polybori::BooleConstant& polybori::BooleConstant::operator=(polybori::BooleConstant&&)\u2019\n> ...\n>   [sagelib-9.1.beta8]   error: command 'gcc' failed with exit status 1\n> }}}\n\nSee, this is why I became a mathematician...",
    "created_at": "2020-03-27T20:09:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412467",
    "user": "mjo"
}
```

Replying to [comment:28 mkoeppe]:
> fedora-28-standard (https://github.com/mkoeppe/sage/runs/539636819):
> {{{
>   [sagelib-9.1.beta8]   build/cythonized/sage/rings/polynomial/pbori.cpp:60026:55: error: use of deleted function ‘polybori::BooleConstant& polybori::BooleConstant::operator=(polybori::BooleConstant&&)’
> ...
>   [sagelib-9.1.beta8]   error: command 'gcc' failed with exit status 1
> }}}

See, this is why I became a mathematician...



---

archive/issue_comments_412468.json:
```json
{
    "body": "Right, for the endless fun with other mathematicians' software...",
    "created_at": "2020-03-27T20:14:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412468",
    "user": "mkoeppe"
}
```

Right, for the endless fun with other mathematicians' software...



---

archive/issue_comments_412469.json:
```json
{
    "body": "This one rejects brial-0.8.5.\n----\nNew commits:",
    "created_at": "2020-03-28T00:53:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412469",
    "user": "mjo"
}
```

This one rejects brial-0.8.5.
----
New commits:



---

archive/issue_comments_412470.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-03-28T00:53:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412470",
    "user": "mjo"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_412471.json:
```json
{
    "body": "And I am physicist, which would make me the practical one - except I do more theoretical physics, so some people would say I am a mathematician with the wrong clothes. So, would something upstream make your job easier? Like a .pc file :)\n\nI am upstream's maintainer after all. Pull requests welcome.",
    "created_at": "2020-03-28T00:58:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412471",
    "user": "fbissey"
}
```

And I am physicist, which would make me the practical one - except I do more theoretical physics, so some people would say I am a mathematician with the wrong clothes. So, would something upstream make your job easier? Like a .pc file :)

I am upstream's maintainer after all. Pull requests welcome.



---

archive/issue_comments_412472.json:
```json
{
    "body": "Replying to [comment:32 fbissey]:\n> And I am physicist, which would make me the practical one - except I do more theoretical physics, so some people would say I am a mathematician with the wrong clothes. So, would something upstream make your job easier? Like a .pc file :)\n> \n> I am upstream's maintainer after all. Pull requests welcome.\n\nA `.pc` file will be invaluable the next time around, but here we need to detect the versions that have already shipped. I probably should have asked for help writing the test program, but it didn't look that hard until it was too late =)",
    "created_at": "2020-03-28T01:05:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412472",
    "user": "mjo"
}
```

Replying to [comment:32 fbissey]:
> And I am physicist, which would make me the practical one - except I do more theoretical physics, so some people would say I am a mathematician with the wrong clothes. So, would something upstream make your job easier? Like a .pc file :)
> 
> I am upstream's maintainer after all. Pull requests welcome.

A `.pc` file will be invaluable the next time around, but here we need to detect the versions that have already shipped. I probably should have asked for help writing the test program, but it didn't look that hard until it was too late =)



---

archive/issue_comments_412473.json:
```json
{
    "body": "Tests run at https://github.com/mkoeppe/sage/actions/runs/65083365",
    "created_at": "2020-03-28T03:38:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412473",
    "user": "mkoeppe"
}
```

Tests run at https://github.com/mkoeppe/sage/actions/runs/65083365



---

archive/issue_comments_412474.json:
```json
{
    "body": "New tests at https://github.com/mkoeppe/sage/actions/runs/65346154",
    "created_at": "2020-03-28T16:11:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412474",
    "user": "mkoeppe"
}
```

New tests at https://github.com/mkoeppe/sage/actions/runs/65346154



---

archive/issue_comments_412475.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-03-29T12:39:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412475",
    "user": "mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_412476.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-04-05T08:30:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412476",
    "user": "vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_412477.json:
```json
{
    "body": "Follow-up: I see crashes in running doctests on `fedora-30-standard` (https://github.com/mkoeppe/sage/runs/572856797), which uses system brial 1.2.5-1\n\n\n```\nsage -t src/sage/rings/polynomial/multi_polynomial_sequence.py  # Killed due to abort\nsage -t src/sage/rings/polynomial/pbori.pyx  # Killed due to abort\nsage -t src/sage/rings/polynomial/polynomial_ring_constructor.py  # Killed due to abort\nsage -t src/sage/sat/boolean_polynomials.py  # Killed due to abort\nsage -t src/sage/sat/solvers/dimacs.py  # Killed due to abort\n```\n",
    "created_at": "2020-04-09T17:11:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412477",
    "user": "mkoeppe"
}
```

Follow-up: I see crashes in running doctests on `fedora-30-standard` (https://github.com/mkoeppe/sage/runs/572856797), which uses system brial 1.2.5-1


```
sage -t src/sage/rings/polynomial/multi_polynomial_sequence.py  # Killed due to abort
sage -t src/sage/rings/polynomial/pbori.pyx  # Killed due to abort
sage -t src/sage/rings/polynomial/polynomial_ring_constructor.py  # Killed due to abort
sage -t src/sage/sat/boolean_polynomials.py  # Killed due to abort
sage -t src/sage/sat/solvers/dimacs.py  # Killed due to abort
```




---

archive/issue_comments_412478.json:
```json
{
    "body": "This is now #29490",
    "created_at": "2020-04-09T21:56:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412478",
    "user": "mkoeppe"
}
```

This is now #29490



---

archive/issue_comments_412479.json:
```json
{
    "body": "Set assignee to mjo.",
    "created_at": "2020-04-28T02:43:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412479",
    "user": "dimpase"
}
```

Set assignee to mjo.



---

archive/issue_comments_412480.json:
```json
{
    "body": "In src/module_list.py there is \n\n```\nExtension('sage.rings.polynomial.pbori',\n...\n      depends = [SAGE_INC + \"/polybori/\" + hd + \".h\" for hd in [\"polybori\", \"config\"]],\n      extra_compile_args = m4ri_extra_compile_args),\n```\n\nwhich causes constant rebuilds with system package, as these headers are no longer in `SAGE_INC`. It's a minor annoyance, but still.",
    "created_at": "2020-04-28T03:10:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412480",
    "user": "dimpase"
}
```

In src/module_list.py there is 

```
Extension('sage.rings.polynomial.pbori',
...
      depends = [SAGE_INC + "/polybori/" + hd + ".h" for hd in ["polybori", "config"]],
      extra_compile_args = m4ri_extra_compile_args),
```

which causes constant rebuilds with system package, as these headers are no longer in `SAGE_INC`. It's a minor annoyance, but still.



---

archive/issue_comments_412481.json:
```json
{
    "body": "Replying to [comment:2 fbissey]:\n> This is a matter for another ticket but I think the python part should be merged into sage proper.\n> [....] So at the moment\n> * Brial is needed to build sage because sage builds binding to brial\n> * sage-brial needs sage's binding at runtime to be usable\n> * sage needs sage-brial at run time for some stuff\n> \n> I think sage-brial should just be merged in sage.\n\nThis is now #30332",
    "created_at": "2020-08-11T00:16:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29132#issuecomment-412481",
    "user": "mkoeppe"
}
```

Replying to [comment:2 fbissey]:
> This is a matter for another ticket but I think the python part should be merged into sage proper.
> [....] So at the moment
> * Brial is needed to build sage because sage builds binding to brial
> * sage-brial needs sage's binding at runtime to be usable
> * sage needs sage-brial at run time for some stuff
> 
> I think sage-brial should just be merged in sage.

This is now #30332
