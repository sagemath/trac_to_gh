# Issue 13598: Extra includes needed for letterplace for Cygwin on XP

Issue created by migration from https://trac.sagemath.org/ticket/13802

Original creator: kcrisman

Original creation time: 2012-12-05 19:35:44

Assignee: tbd

CC:  jpflori alexanderdreyer

Executing 327 commands (using 1 thread) 
gcc -I/usr/include/ncurses -fno-strict-aliasing -fwrapv -DNDEBUG -g - 
fwrapv -O3 -Wall -Wstrict-prototypes -I/home/newsagetest/sage-5.5.rc0/ 
local/include/singular/ -I/home/newsagetest/sage-5.5.rc0/local/include 
-I/home/newsagetest/sage-5.5.rc0/local/include/csage -I/home/ 
newsagetest/sage-5.5.rc0/devel/sage/sage/ext -I/home/newsagetest/ 
sage-5.5.rc0/local/include/python2.7 -c sage/algebras/letterplace/ 
free_algebra_letterplace.cpp -o build/temp.cygwin-1.7.9-i686-2.7/sage/ 
algebras/letterplace/free_algebra_letterplace.o -w 
cc1plus: warning: command line option "-Wstrict-prototypes" is valid 
for Ada/C/ObjC but not for C++ 
g++ -shared -Wl,--enable-auto-image-base -L/home/newsagetest/ 
sage-5.5.rc0/local/lib build/temp.cygwin-1.7.9-i686-2.7/sage/algebras/ 
letterplace/free_algebra_letterplace.o -L/home/newsagetest/ 
sage-5.5.rc0/local/lib -L/home/newsagetest/sage-5.5.rc0/local/lib/ 
python2.7/config -lcsage -lstdc++ -lntl -lpython2.7 -o build/ 
lib.cygwin-1.7.9-i686-2.7/sage/algebras/letterplace/ 
free_algebra_letterplace.dll 
build/temp.cygwin-1.7.9-i686-2.7/sage/algebras/letterplace/ 
free_algebra_letterplace.o: In function 
`__static_initialization_and_destruction_0': 
/home/newsagetest/sage-5.5.rc0/local/include/factory/factory.h:199: 
undefined reference to `initCanonicalForm()' 
collect2: ld returned 1 exit status 
error: command 'g++' failed with exit status 1 
gcc -I/usr/include/ncurses -fno-strict-aliasing -fwrapv -DNDEBUG -g - 
fwrapv -O3 -Wall -Wstrict-prototypes -I/home/newsagetest/sage-5.5.rc0/ 
local/include/singular/ -I/home/newsagetest/sage-5.5.rc0/local/include 
-I/home/newsagetest/sage-5.5.rc0/local/include/csage -I/home/ 
newsagetest/sage-5.5.rc0/devel/sage/sage/ext -I/home/newsagetest/ 
sage-5.5.rc0/local/include/python2.7 -c sage/algebras/letterplace/ 
free_algebra_element_letterplace.cpp -o build/temp.cygwin-1.7.9- 
i686-2.7/sage/algebras/letterplace/free_algebra_element_letterplace.o - 
w 
Error installing modified sage library code.


---

Comment by kcrisman created at 2012-12-05 19:36:59

Presumably the fix is to add `SAGE_INC + 'factory' ` to `module_list.py`, maybe also the libraries.  Sloppy work at #7797, perhaps?


---

Comment by kcrisman created at 2012-12-05 19:41:50

Okay, I added that and the `singular_libs`, and it seems to be working.


---

Comment by kcrisman created at 2012-12-05 22:00:34

Apply to Sage library


---

Attachment

Apply trac_13802-cygwin.patch 

I don't know how to have anyone review this beyond someone with Cygwin on XP.  Maybe someone from #7797 can at least verify it's not _bad_?


---

Comment by kcrisman created at 2012-12-05 22:03:08

Changing status from new to needs_review.


---

Comment by kcrisman created at 2012-12-05 22:14:38

This _does_ work on Mac 10.7 and sage.math, so hopefully someone can independently confirm that and check that the patch makes sense.


---

Comment by AlexanderDreyer created at 2012-12-06 08:37:12

I can confirm, that the patch makes sense, it is consistent with the other Singular-based modules, and it does not harm anything on other platforms.

So positive review!


---

Comment by AlexanderDreyer created at 2012-12-06 08:37:12

Changing status from needs_review to positive_review.


---

Comment by kcrisman created at 2012-12-06 15:14:25

Thanks!


---

Comment by jpflori created at 2012-12-06 15:23:08

I can confirm this is also needed and working on 64 bits Windows 7.


---

Comment by jdemeyer created at 2012-12-18 11:18:10

Resolution: fixed
