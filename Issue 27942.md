# Issue 27942: Some bug with combinatorial objects during parallelization

archive/issues_027942.json:
```json
{
    "body": "CC:  nthiery\n\nKeywords: parallel, fpsac2019\n\nIt seems to have a pickling problem with some combinatorial objects (Partitions and others) when trying to return them during parallel computation. \nSee the attached file for examples of what raise an error and what doesn't. \n\nIssue created by migration from https://trac.sagemath.org/ticket/28179\n\n",
    "created_at": "2019-07-12T09:21:16Z",
    "labels": [
        "combinatorics",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Some bug with combinatorial objects during parallelization",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27942",
    "user": "phubert"
}
```
CC:  nthiery

Keywords: parallel, fpsac2019

It seems to have a pickling problem with some combinatorial objects (Partitions and others) when trying to return them during parallel computation. 
See the attached file for examples of what raise an error and what doesn't. 

Issue created by migration from https://trac.sagemath.org/ticket/28179





---

archive/issue_comments_394642.json:
```json
{
    "body": "Attachment [failed_parallel.py](tarball://root/attachments/some-uuid/ticket28179/failed_parallel.py) by phubert created at 2019-07-12 09:21:50\n\nExamples of what fails and what doesn't.",
    "created_at": "2019-07-12T09:21:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27942#issuecomment-394642",
    "user": "phubert"
}
```

Attachment [failed_parallel.py](tarball://root/attachments/some-uuid/ticket28179/failed_parallel.py) by phubert created at 2019-07-12 09:21:50

Examples of what fails and what doesn't.



---

archive/issue_comments_394643.json:
```json
{
    "body": "Changing keywords from \"parallel, fpsac2019\" to \"parallel, pickling, fpsac2019\".",
    "created_at": "2019-07-29T13:43:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27942#issuecomment-394643",
    "user": "phubert"
}
```

Changing keywords from "parallel, fpsac2019" to "parallel, pickling, fpsac2019".



---

archive/issue_comments_394644.json:
```json
{
    "body": "Ticket retargeted after milestone closed",
    "created_at": "2019-12-30T14:48:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27942#issuecomment-394644",
    "user": "embray"
}
```

Ticket retargeted after milestone closed



---

archive/issue_comments_394645.json:
```json
{
    "body": "Moving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.",
    "created_at": "2020-05-01T04:28:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27942#issuecomment-394645",
    "user": "mkoeppe"
}
```

Moving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.



---

archive/issue_comments_394646.json:
```json
{
    "body": "Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-04-07T19:29:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27942#issuecomment-394646",
    "user": "mkoeppe"
}
```

Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_comments_394647.json:
```json
{
    "body": "This looks like it working correctly in the latest release:\n\n```\nsage: @parallel\n....: def some_func_to_parallelize(n):\n....:     return Partitions(n).random_element()\n....:\nsage: for (((_),_), p) in some_func_to_parallelize([n for n in range(2)]):\n....:     print(p)\n....:\n[]\n[1]\n```\n",
    "created_at": "2021-09-17T23:51:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27942#issuecomment-394647",
    "user": "mhansen"
}
```

This looks like it working correctly in the latest release:

```
sage: @parallel
....: def some_func_to_parallelize(n):
....:     return Partitions(n).random_element()
....:
sage: for (((_),_), p) in some_func_to_parallelize([n for n in range(2)]):
....:     print(p)
....:
[]
[1]
```

