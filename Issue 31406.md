# Issue 31406: tab-completion sometimes access attributes

Issue created by migration from https://trac.sagemath.org/ticket/31643

Original creator: vdelecroix

Original creation time: 2021-04-10 20:09:29

CC:  @kliem

In the following example, the IPython tab completion is trying to access the `__module__` attribute of the object while only trying to complete its name.

```
sage: cython("""
....: cdef class A(object):
....:     def __getattr__(self, key):
....:         print('getattr(key={})'.format(key))
....:         raise AttributeError
....: """)
sage: a = A()
sage: my_custom_name = A()
sage: from IPython import get_ipython
sage: ip = get_ipython()
sage: ip.Completer.all_completions("my_custo")
getattr(key=__module__)
getattr(key=__module__)
['my_custom_name']
```

This is not the case with standard Python classes.

This has dramatic consequence with lazily imported objects that gets imported when accessing any attribute, including `__module__`. It could even lead to a Sage crash on 9.2.rc3 because of badly designed lazy import

```
sage: ip.Completer.all_completions("s")                                                                                                                                                        
Traceback (most recent call last):
...
AttributeError: module 'sage.coding.linear_code' has no attribute 'self_orthogonal_binary_codes'
```

