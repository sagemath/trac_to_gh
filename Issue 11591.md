# Issue 11591: Parents for polyhedra

archive/issues_011591.json:
```json
{
    "body": "Assignee: mhampton\n\nCC:  robertwb\n\nThe Polyhedron class is, so far, free-standing with some sort of coercion for the base ring tacked manually. This ticket strives to add parents for polyhedra and make the base ring coercion work more naturally. \n\nThere will be 3 supported base rings:\n* ZZ (meaning that the polyhedron is a lattice polytope, that is, both H- and V-representation are defined over ZZ)\n* QQ\n* RDF\n\nIssue created by migration from https://trac.sagemath.org/ticket/11763\n\n",
    "created_at": "2011-08-31T14:13:15Z",
    "labels": [
        "geometry",
        "major",
        "enhancement"
    ],
    "title": "Parents for polyhedra",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11591",
    "user": "vbraun"
}
```
Assignee: mhampton

CC:  robertwb

The Polyhedron class is, so far, free-standing with some sort of coercion for the base ring tacked manually. This ticket strives to add parents for polyhedra and make the base ring coercion work more naturally. 

There will be 3 supported base rings:
* ZZ (meaning that the polyhedron is a lattice polytope, that is, both H- and V-representation are defined over ZZ)
* QQ
* RDF

Issue created by migration from https://trac.sagemath.org/ticket/11763





---

archive/issue_comments_130605.json:
```json
{
    "body": "Would there be any benefit in supporting real fields of arbitrary precision?",
    "created_at": "2011-08-31T14:58:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130605",
    "user": "novoselt"
}
```

Would there be any benefit in supporting real fields of arbitrary precision?



---

archive/issue_comments_130606.json:
```json
{
    "body": "We don't have an implementation of the double description algorithm for other base rings, so we wouldn't be able to compute anything.",
    "created_at": "2011-08-31T15:05:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130606",
    "user": "vbraun"
}
```

We don't have an implementation of the double description algorithm for other base rings, so we wouldn't be able to compute anything.



---

archive/issue_comments_130607.json:
```json
{
    "body": "Attachment\n\nInitial patch",
    "created_at": "2011-09-08T17:00:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130607",
    "user": "vbraun"
}
```

Attachment

Initial patch



---

archive/issue_comments_130608.json:
```json
{
    "body": "Initial patch",
    "created_at": "2011-09-08T17:00:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130608",
    "user": "vbraun"
}
```

Initial patch



---

archive/issue_comments_130609.json:
```json
{
    "body": "Attachment\n\nThis is now ready for inclusion. Marshall, are you interested in reviewing this patch and its dependency? ;-)",
    "created_at": "2011-09-08T17:06:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130609",
    "user": "vbraun"
}
```

Attachment

This is now ready for inclusion. Marshall, are you interested in reviewing this patch and its dependency? ;-)



---

archive/issue_comments_130610.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-09-08T17:06:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130610",
    "user": "vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_130611.json:
```json
{
    "body": "Fix comparison of H/V-representation objects:\n\n```\nsage: triangle = Polyhedron([(0,0), (1,0), (0,1)])\nsage: ieq = triangle.inequality_generator().next()\nsage: ieq == copy(ieq)\nFalse\n```\n\nNow returns ``True``, as it should.",
    "created_at": "2012-02-19T02:05:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130611",
    "user": "vbraun"
}
```

Fix comparison of H/V-representation objects:

```
sage: triangle = Polyhedron([(0,0), (1,0), (0,1)])
sage: ieq = triangle.inequality_generator().next()
sage: ieq == copy(ieq)
False
```

Now returns ``True``, as it should.



---

archive/issue_comments_130612.json:
```json
{
    "body": "Updated patch",
    "created_at": "2012-02-19T02:06:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130612",
    "user": "vbraun"
}
```

Updated patch



---

archive/issue_comments_130613.json:
```json
{
    "body": "Attachment\n\nRebased for new patch at 11634",
    "created_at": "2012-03-11T14:17:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130613",
    "user": "davidloeffler"
}
```

Attachment

Rebased for new patch at 11634



---

archive/issue_comments_130614.json:
```json
{
    "body": "Attachment\n\nRebased for new patch at #11634",
    "created_at": "2012-03-11T14:18:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130614",
    "user": "davidloeffler"
}
```

Attachment

Rebased for new patch at #11634



---

archive/issue_comments_130615.json:
```json
{
    "body": "The new patch I posted at #11634 broke these, so I rebased them.\n\nApply trac_11763_ZZ_polyhedron-rebase.patch, trac_11763_parents-rebase.patch",
    "created_at": "2012-03-11T14:19:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130615",
    "user": "davidloeffler"
}
```

The new patch I posted at #11634 broke these, so I rebased them.

Apply trac_11763_ZZ_polyhedron-rebase.patch, trac_11763_parents-rebase.patch



---

archive/issue_comments_130616.json:
```json
{
    "body": "Apply trac_11763_zz_polyhedron-rebase.patch, trac_11763_parents-rebase.patch \n\n(bloody patchbot!)",
    "created_at": "2012-03-11T14:20:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130616",
    "user": "davidloeffler"
}
```

Apply trac_11763_zz_polyhedron-rebase.patch, trac_11763_parents-rebase.patch 

(bloody patchbot!)



---

archive/issue_comments_130617.json:
```json
{
    "body": "No matter what I do, the patchbot won't pick up the two patches above, so I've done a single qfolded patch. Hopefully this will now work!",
    "created_at": "2012-03-11T14:23:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130617",
    "user": "davidloeffler"
}
```

No matter what I do, the patchbot won't pick up the two patches above, so I've done a single qfolded patch. Hopefully this will now work!



---

archive/issue_comments_130618.json:
```json
{
    "body": "Apply only this patch. Patch against 5.0.beta7",
    "created_at": "2012-03-12T09:59:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130618",
    "user": "davidloeffler"
}
```

Apply only this patch. Patch against 5.0.beta7



---

archive/issue_comments_130619.json:
```json
{
    "body": "Attachment\n\nSorry, I made a hash of rebasing the patch, so here's a new version.",
    "created_at": "2012-03-12T10:00:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130619",
    "user": "davidloeffler"
}
```

Attachment

Sorry, I made a hash of rebasing the patch, so here's a new version.



---

archive/issue_comments_130620.json:
```json
{
    "body": "This changes the behavior of the .vertices() method, returning \"sage.geometry.polyhedron.representation.Vertex\" objects instead of simple lists of coordinates.  This breaks some code of mine, so I think there should be a deprecation warning before introducing this.  I don't really like the behavior, but I see that .vertices_list() does return a list of lists of coordinates.\n\nThis patch also seems to slow things down a bit, but I haven't carefully tested that aspect.",
    "created_at": "2012-03-12T15:29:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130620",
    "user": "mhampton"
}
```

This changes the behavior of the .vertices() method, returning "sage.geometry.polyhedron.representation.Vertex" objects instead of simple lists of coordinates.  This breaks some code of mine, so I think there should be a deprecation warning before introducing this.  I don't really like the behavior, but I see that .vertices_list() does return a list of lists of coordinates.

This patch also seems to slow things down a bit, but I haven't carefully tested that aspect.



---

archive/issue_comments_130621.json:
```json
{
    "body": "The `Vertex` object implements the list interface, so any code that doesn't just test `isinstance(-,list)` should work fine. Plus, you can't really deprecate something unless you want to remove it later. I added the 'vertices_list` method so people can keep their broken code with minimal patching if they want.",
    "created_at": "2012-03-12T18:27:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130621",
    "user": "vbraun"
}
```

The `Vertex` object implements the list interface, so any code that doesn't just test `isinstance(-,list)` should work fine. Plus, you can't really deprecate something unless you want to remove it later. I added the 'vertices_list` method so people can keep their broken code with minimal patching if they want.



---

archive/issue_comments_130622.json:
```json
{
    "body": "Well, no, there is quite a bit of my code that does not work fine, and I am not talking about artificial test cases.  Here is a shortened example of something this patch breaks:\n\n\n```\nc = polytopes.n_cube(3)\nv = c.vertices()[0]\npoint(v)\n```\n\nThis now gives a \"TypeError: 'sage.rings.integer.Integer' object does not support indexing\".",
    "created_at": "2012-03-12T21:07:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130622",
    "user": "mhampton"
}
```

Well, no, there is quite a bit of my code that does not work fine, and I am not talking about artificial test cases.  Here is a shortened example of something this patch breaks:


```
c = polytopes.n_cube(3)
v = c.vertices()[0]
point(v)
```

This now gives a "TypeError: 'sage.rings.integer.Integer' object does not support indexing".



---

archive/issue_comments_130623.json:
```json
{
    "body": "For the record: #12541 and #12544 have a similar situation. I replaced tuples with tuple-like containers and some stuff got broken. As it turned out, it was not too difficult to fix it by eliminating some \"hard typechecks\", although they are still waiting for an approval. If this is the case here, perhaps it is also not too difficult to fix.\n\nAs I understand it, direct typechecking is not welcomed in either Python or Sage, so if the new class implements list interface, it should be OK to use in place of the old one. If it does break some code, it is a bug and it should be fixed before merging, but not a reason for avoiding the change entirely or inventing elaborate deprecation scheme...",
    "created_at": "2012-03-12T21:19:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130623",
    "user": "novoselt"
}
```

For the record: #12541 and #12544 have a similar situation. I replaced tuples with tuple-like containers and some stuff got broken. As it turned out, it was not too difficult to fix it by eliminating some "hard typechecks", although they are still waiting for an approval. If this is the case here, perhaps it is also not too difficult to fix.

As I understand it, direct typechecking is not welcomed in either Python or Sage, so if the new class implements list interface, it should be OK to use in place of the old one. If it does break some code, it is a bug and it should be fixed before merging, but not a reason for avoiding the change entirely or inventing elaborate deprecation scheme...



---

archive/issue_comments_130624.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-03-26T18:11:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130624",
    "user": "davidloeffler"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_130625.json:
```json
{
    "body": "There is a doctest failing on 5.0.beta10, according to the patchbot (something to do with the new associahedron class from #10817)",
    "created_at": "2012-03-26T18:11:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130625",
    "user": "davidloeffler"
}
```

There is a doctest failing on 5.0.beta10, according to the patchbot (something to do with the new associahedron class from #10817)



---

archive/issue_comments_130626.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-03-29T18:43:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130626",
    "user": "vbraun"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_130627.json:
```json
{
    "body": "The associahedron needed to be translated to the parent/element framework as well. I've fixed this. Also, I rediffed trac_11763-polyhedra_coercion_folded.2.patch because it only applied with some fuzz on sage-5.0.beta11",
    "created_at": "2012-03-29T18:43:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130627",
    "user": "vbraun"
}
```

The associahedron needed to be translated to the parent/element framework as well. I've fixed this. Also, I rediffed trac_11763-polyhedra_coercion_folded.2.patch because it only applied with some fuzz on sage-5.0.beta11



---

archive/issue_comments_130628.json:
```json
{
    "body": "Attachment\n\nUpdated patch",
    "created_at": "2012-03-29T19:00:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130628",
    "user": "vbraun"
}
```

Attachment

Updated patch



---

archive/issue_comments_130629.json:
```json
{
    "body": "The final patch fixes the `point()` command to not make dumb type checks.",
    "created_at": "2012-03-29T19:01:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130629",
    "user": "vbraun"
}
```

The final patch fixes the `point()` command to not make dumb type checks.



---

archive/issue_comments_130630.json:
```json
{
    "body": "I noted a problem in the documentatation build, the updated patch fixes just that.",
    "created_at": "2012-03-29T20:04:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130630",
    "user": "vbraun"
}
```

I noted a problem in the documentatation build, the updated patch fixes just that.



---

archive/issue_comments_130631.json:
```json
{
    "body": "Apply trac_11763-polyhedra_coercion_folded.2.patch, trac_11763_fix_associahedron.patch, trac_11763_relax_typechecks.patch\n\n(for patchbot)",
    "created_at": "2012-03-30T12:40:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130631",
    "user": "davidloeffler"
}
```

Apply trac_11763-polyhedra_coercion_folded.2.patch, trac_11763_fix_associahedron.patch, trac_11763_relax_typechecks.patch

(for patchbot)



---

archive/issue_comments_130632.json:
```json
{
    "body": "I thought the point of having \"Apply\" section in the description was to make the patchbot happy, why does it need to be duplicated?..",
    "created_at": "2012-03-30T15:33:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130632",
    "user": "novoselt"
}
```

I thought the point of having "Apply" section in the description was to make the patchbot happy, why does it need to be duplicated?..



---

archive/issue_comments_130633.json:
```json
{
    "body": "It was previously applying the patches in an order other than that listed on the ticket description (with coercion_folded.2.patch last rather than first). I didn't think to check whether the patches were applying happily anyway; as it happens they were. Sorry for the noise!",
    "created_at": "2012-03-30T15:50:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130633",
    "user": "davidloeffler"
}
```

It was previously applying the patches in an order other than that listed on the ticket description (with coercion_folded.2.patch last rather than first). I didn't think to check whether the patches were applying happily anyway; as it happens they were. Sorry for the noise!



---

archive/issue_comments_130634.json:
```json
{
    "body": "Oh, I don't complain about your post - I complain about patchbot not figuring out what is the correct order despite a clear description ;-)",
    "created_at": "2012-03-30T19:35:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130634",
    "user": "novoselt"
}
```

Oh, I don't complain about your post - I complain about patchbot not figuring out what is the correct order despite a clear description ;-)



---

archive/issue_comments_130635.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-04-26T15:10:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130635",
    "user": "chapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_130636.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-04-30T21:30:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130636",
    "user": "vbraun"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_130637.json:
```json
{
    "body": "We don't have a policy on trailing white space, so its completely useless bikeshedding to require it one way or another. But since this ticket is the special case where we create a new subdirectory layout, I used a simple sed script to remove trailing whitespace.",
    "created_at": "2012-04-30T21:30:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130637",
    "user": "vbraun"
}
```

We don't have a policy on trailing white space, so its completely useless bikeshedding to require it one way or another. But since this ticket is the special case where we create a new subdirectory layout, I used a simple sed script to remove trailing whitespace.



---

archive/issue_comments_130638.json:
```json
{
    "body": "* There is now an error to be corrected, see bot report for 5.0rc0. This comes from a strange comparison with 'anything', which looks weird.\n\n* Maybe fold all the patches into one ?\n\n* In the part about associahedra, you replaced the sentence \"Returns the Cartan type of self.\" by the sentence \"Returns the Cartan type\". This seems to be less informative.",
    "created_at": "2012-05-04T17:39:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130638",
    "user": "chapoton"
}
```

* There is now an error to be corrected, see bot report for 5.0rc0. This comes from a strange comparison with 'anything', which looks weird.

* Maybe fold all the patches into one ?

* In the part about associahedra, you replaced the sentence "Returns the Cartan type of self." by the sentence "Returns the Cartan type". This seems to be less informative.



---

archive/issue_comments_130639.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-05-04T17:39:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130639",
    "user": "chapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_130640.json:
```json
{
    "body": "Updated patch",
    "created_at": "2012-05-04T17:58:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130640",
    "user": "vbraun"
}
```

Updated patch



---

archive/issue_comments_130641.json:
```json
{
    "body": "Attachment\n\nI've changed the `cmp()` doctest to use `abs(cmp())` to avoid dependence on arbitrary memory positions.\n\nFolding patches is considered harmful since it destroys history without any benefit.\n\nA method always returns information about `self`, you could add \"... of self\" to every docstring.",
    "created_at": "2012-05-04T18:02:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130641",
    "user": "vbraun"
}
```

Attachment

I've changed the `cmp()` doctest to use `abs(cmp())` to avoid dependence on arbitrary memory positions.

Folding patches is considered harmful since it destroys history without any benefit.

A method always returns information about `self`, you could add "... of self" to every docstring.



---

archive/issue_comments_130642.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-05-04T18:07:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130642",
    "user": "vbraun"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_130643.json:
```json
{
    "body": "Rediffed for sage-5.0.beta3 because #12340 introduced a newline in one of the docstrings. No actual code changed.",
    "created_at": "2012-06-11T15:19:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130643",
    "user": "vbraun"
}
```

Rediffed for sage-5.0.beta3 because #12340 introduced a newline in one of the docstrings. No actual code changed.



---

archive/issue_comments_130644.json:
```json
{
    "body": "Apply trac_11763-polyhedra_coercion_folded.2.patch, trac_11763_fix_associahedron.patch, trac_11763_relax_typechecks.patch, trac_11763_remove_trailing_whitespace.patch",
    "created_at": "2012-06-11T15:31:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130644",
    "user": "vbraun"
}
```

Apply trac_11763-polyhedra_coercion_folded.2.patch, trac_11763_fix_associahedron.patch, trac_11763_relax_typechecks.patch, trac_11763_remove_trailing_whitespace.patch



---

archive/issue_comments_130645.json:
```json
{
    "body": "#11310 fixes all the catch-all `except:` clauses, breaking this patch.",
    "created_at": "2012-07-01T16:13:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130645",
    "user": "vbraun"
}
```

#11310 fixes all the catch-all `except:` clauses, breaking this patch.



---

archive/issue_comments_130646.json:
```json
{
    "body": "I'm getting one error when testing:\n\n```\nFile \"/home/novoselt/sage-5.2.rc1/devel/sage-main/sage/libs/ppl.pyx\", line 119:\n    sage: Polyhedron(vertices=gs, backend='cddr')  # long time (3s on sage.math, 2011)\nException raised:\n    Traceback (most recent call last):\n      File \"/home/novoselt/sage-5.2.rc1/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/home/novoselt/sage-5.2.rc1/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/home/novoselt/sage-5.2.rc1/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_0[37]>\", line 1, in <module>\n        Polyhedron(vertices=gs, backend='cddr')  # long time (3s on sage.math, 2011)###line 119:\n    sage: Polyhedron(vertices=gs, backend='cddr')  # long time (3s on sage.math, 2011)\n      File \"/home/novoselt/sage-5.2.rc1/local/lib/python/site-packages/sage/misc/decorators.py\", line 691, in wrapper\n        return func(*args, **kwds)\n      File \"/home/novoselt/sage-5.2.rc1/local/lib/python/site-packages/sage/geometry/polyhedron/constructor.py\", line 325, in Polyhedron\n        parent = Polyhedra(base_ring, ambient_dim, backend=backend)\n      File \"/home/novoselt/sage-5.2.rc1/local/lib/python/site-packages/sage/geometry/polyhedron/parent.py\", line 56, in Polyhedra\n        ') implemented for given basering (='+str(base_ring)+').')\n    ValueError: No such backend (=cddr) implemented for given basering (=Integer Ring).\n```\n",
    "created_at": "2012-07-25T19:50:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130646",
    "user": "novoselt"
}
```

I'm getting one error when testing:

```
File "/home/novoselt/sage-5.2.rc1/devel/sage-main/sage/libs/ppl.pyx", line 119:
    sage: Polyhedron(vertices=gs, backend='cddr')  # long time (3s on sage.math, 2011)
Exception raised:
    Traceback (most recent call last):
      File "/home/novoselt/sage-5.2.rc1/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/home/novoselt/sage-5.2.rc1/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/home/novoselt/sage-5.2.rc1/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_0[37]>", line 1, in <module>
        Polyhedron(vertices=gs, backend='cddr')  # long time (3s on sage.math, 2011)###line 119:
    sage: Polyhedron(vertices=gs, backend='cddr')  # long time (3s on sage.math, 2011)
      File "/home/novoselt/sage-5.2.rc1/local/lib/python/site-packages/sage/misc/decorators.py", line 691, in wrapper
        return func(*args, **kwds)
      File "/home/novoselt/sage-5.2.rc1/local/lib/python/site-packages/sage/geometry/polyhedron/constructor.py", line 325, in Polyhedron
        parent = Polyhedra(base_ring, ambient_dim, backend=backend)
      File "/home/novoselt/sage-5.2.rc1/local/lib/python/site-packages/sage/geometry/polyhedron/parent.py", line 56, in Polyhedra
        ') implemented for given basering (='+str(base_ring)+').')
    ValueError: No such backend (=cddr) implemented for given basering (=Integer Ring).
```




---

archive/issue_comments_130647.json:
```json
{
    "body": "I fixed the doctest (its `backend=cdd` not `cddr`) and added documentation to the `sage.geometry.polyhedron.parent.Polyhedra` constructor function.",
    "created_at": "2012-08-04T18:12:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130647",
    "user": "vbraun"
}
```

I fixed the doctest (its `backend=cdd` not `cddr`) and added documentation to the `sage.geometry.polyhedron.parent.Polyhedra` constructor function.



---

archive/issue_comments_130648.json:
```json
{
    "body": "Updated patch fixes one important issue. The inherited comparison for `PolyhedronFace_base` was too lax, which resulted in identical (and not just isomorphic) face lattices in some cases. Fixed now.",
    "created_at": "2012-08-04T22:47:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130648",
    "user": "vbraun"
}
```

Updated patch fixes one important issue. The inherited comparison for `PolyhedronFace_base` was too lax, which resulted in identical (and not just isomorphic) face lattices in some cases. Fixed now.



---

archive/issue_comments_130649.json:
```json
{
    "body": "Rebased for #13638",
    "created_at": "2012-10-22T11:49:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130649",
    "user": "vbraun"
}
```

Rebased for #13638



---

archive/issue_comments_130650.json:
```json
{
    "body": "Attachment\n\nUpdated patch",
    "created_at": "2012-10-22T11:50:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130650",
    "user": "vbraun"
}
```

Attachment

Updated patch



---

archive/issue_comments_130651.json:
```json
{
    "body": "Updated patch",
    "created_at": "2012-10-23T21:45:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130651",
    "user": "vbraun"
}
```

Updated patch



---

archive/issue_comments_130652.json:
```json
{
    "body": "Attachment\n\nI've changed the `PolyhedronFace` class to just derive from `SageObject` this should be clearer. Also, the more trivial patches are folded into the first.\n\nIt would be great if this ticket could be reviewed before the heat death of the universe.",
    "created_at": "2012-10-23T21:47:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130652",
    "user": "vbraun"
}
```

Attachment

I've changed the `PolyhedronFace` class to just derive from `SageObject` this should be clearer. Also, the more trivial patches are folded into the first.

It would be great if this ticket could be reviewed before the heat death of the universe.



---

archive/issue_comments_130653.json:
```json
{
    "body": "Rebased for changes in #13638",
    "created_at": "2012-10-24T09:35:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130653",
    "user": "vbraun"
}
```

Rebased for changes in #13638



---

archive/issue_comments_130654.json:
```json
{
    "body": "Apply only trac_11763-polyhedra_coercion_folded.2.patch trac_11763_fix_associahedron.patch",
    "created_at": "2012-10-26T13:34:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130654",
    "user": "chapoton"
}
```

Apply only trac_11763-polyhedra_coercion_folded.2.patch trac_11763_fix_associahedron.patch



---

archive/issue_comments_130655.json:
```json
{
    "body": "Ok, let us forget about trailing whitespaces.\n\nBut what about the startup plugin which is complaining here ?",
    "created_at": "2012-10-26T14:38:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130655",
    "user": "chapoton"
}
```

Ok, let us forget about trailing whitespaces.

But what about the startup plugin which is complaining here ?



---

archive/issue_comments_130656.json:
```json
{
    "body": "I agree that using lazy imports would be good. I'll give it a whirl.",
    "created_at": "2012-10-26T14:46:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130656",
    "user": "vbraun"
}
```

I agree that using lazy imports would be good. I'll give it a whirl.



---

archive/issue_comments_130657.json:
```json
{
    "body": "Patch loads Polyhedron lazily, so we don't import anything on startup.",
    "created_at": "2012-10-26T14:55:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130657",
    "user": "vbraun"
}
```

Patch loads Polyhedron lazily, so we don't import anything on startup.



---

archive/issue_comments_130658.json:
```json
{
    "body": "Also lazily import the parent `PolyhedralSets`, plus one typo fix.",
    "created_at": "2012-10-26T16:32:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130658",
    "user": "vbraun"
}
```

Also lazily import the parent `PolyhedralSets`, plus one typo fix.



---

archive/issue_comments_130659.json:
```json
{
    "body": "Apply trac_11763-polyhedra_coercion_folded.2.patch trac_11763_fix_associahedron.patch trac_11763_lazy_import.patch",
    "created_at": "2012-10-26T18:26:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130659",
    "user": "chapoton"
}
```

Apply trac_11763-polyhedra_coercion_folded.2.patch trac_11763_fix_associahedron.patch trac_11763_lazy_import.patch



---

archive/issue_comments_130660.json:
```json
{
    "body": "Improved patch",
    "created_at": "2012-11-06T04:02:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130660",
    "user": "vbraun"
}
```

Improved patch



---

archive/issue_comments_130661.json:
```json
{
    "body": "Attachment\n\nI switched the order this patch and #13638.",
    "created_at": "2012-11-26T13:09:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130661",
    "user": "vbraun"
}
```

Attachment

I switched the order this patch and #13638.



---

archive/issue_comments_130662.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-11-27T04:46:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130662",
    "user": "dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_130663.json:
```json
{
    "body": "The patchbot seems to follow the patch order in the Attachments list, rather than in the ticket description Apply list.",
    "created_at": "2012-11-27T12:37:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130663",
    "user": "dimpase"
}
```

The patchbot seems to follow the patch order in the Attachments list, rather than in the ticket description Apply list.



---

archive/issue_comments_130664.json:
```json
{
    "body": "Replying to [comment:48 dimpase]:\n> The patchbot seems to follow the patch order in the Attachments list, rather than in the ticket description Apply list.\nIf I am reading the [right patchbot source](https://github.com/robertwb/sage-patchbot/blob/master/src/trac.py), it seems that it looks for `apply` in the whole rss feed...",
    "created_at": "2012-11-27T12:49:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130664",
    "user": "dimpase"
}
```

Replying to [comment:48 dimpase]:
> The patchbot seems to follow the patch order in the Attachments list, rather than in the ticket description Apply list.
If I am reading the [right patchbot source](https://github.com/robertwb/sage-patchbot/blob/master/src/trac.py), it seems that it looks for `apply` in the whole rss feed...



---

archive/issue_comments_130665.json:
```json
{
    "body": "For the patchbot:\n\nApply trac_11763-polyhedra_coercion_folded.2.patch, trac_11763_fix_associahedron.patch, trac_11763_lazy_import.patch",
    "created_at": "2012-11-27T16:52:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130665",
    "user": "vbraun"
}
```

For the patchbot:

Apply trac_11763-polyhedra_coercion_folded.2.patch, trac_11763_fix_associahedron.patch, trac_11763_lazy_import.patch



---

archive/issue_comments_130666.json:
```json
{
    "body": "On some systems, such as OS X >= 10.6 and Itanium:\n\n```\nsage -t  --long -force_lib devel/sage/sage/geometry/polyhedron/base.py\n**********************************************************************\nFile \"/Users/dehayebuildbot/build/sage/dehaye/dehaye_full/build/sage-5.6.beta0/devel/sage-main/sage/geometry/polyhedron/base.py\", line 385:\n    sage: cmp(P, 'string')\nExpected:\n    -1\nGot:\n    1\n**********************************************************************\n```\n",
    "created_at": "2012-12-18T07:36:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130666",
    "user": "jdemeyer"
}
```

On some systems, such as OS X >= 10.6 and Itanium:

```
sage -t  --long -force_lib devel/sage/sage/geometry/polyhedron/base.py
**********************************************************************
File "/Users/dehayebuildbot/build/sage/dehaye/dehaye_full/build/sage-5.6.beta0/devel/sage-main/sage/geometry/polyhedron/base.py", line 385:
    sage: cmp(P, 'string')
Expected:
    -1
Got:
    1
**********************************************************************
```




---

archive/issue_comments_130667.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-12-18T08:05:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130667",
    "user": "jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_130668.json:
```json
{
    "body": "Attachment\n\nUpdated patch",
    "created_at": "2012-12-18T10:06:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130668",
    "user": "vbraun"
}
```

Attachment

Updated patch



---

archive/issue_comments_130669.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2012-12-18T10:06:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130669",
    "user": "vbraun"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_130670.json:
```json
{
    "body": "I've added the trivial fix.",
    "created_at": "2012-12-18T10:06:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130670",
    "user": "vbraun"
}
```

I've added the trivial fix.



---

archive/issue_comments_130671.json:
```json
{
    "body": "And now I noticed that this was already fixed in #12193.",
    "created_at": "2012-12-18T10:43:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130671",
    "user": "vbraun"
}
```

And now I noticed that this was already fixed in #12193.



---

archive/issue_comments_130672.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-12-21T09:30:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130672",
    "user": "jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_130673.json:
```json
{
    "body": "Attachment",
    "created_at": "2012-12-21T09:41:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130673",
    "user": "jdemeyer"
}
```

Attachment



---

archive/issue_comments_130674.json:
```json
{
    "body": "Rebased to sage-5.6.beta0.",
    "created_at": "2012-12-21T09:41:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130674",
    "user": "jdemeyer"
}
```

Rebased to sage-5.6.beta0.



---

archive/issue_comments_130675.json:
```json
{
    "body": "Hey Volker,\n\nDo you remember what was the reason for this change in `normalize_rays`?\n\n```diff\ndiff --git a/sage/geometry/cone.py b/sage/geometry/cone.py\n\nIndex: sage/geometry/cone.py\n===================================================================\n--- a/sage/geometry/cone.py\n+++ b/sage/geometry/cone.py\n@@ -568,7 +568,10 @@\n         V = lattice.base_extend(QQ)\n         for n, ray in enumerate(rays):\n             try:\n-                ray = V(ray)\n+                if isinstance(ray, (list, tuple, V._element_class)):\n+                    ray = V(ray)\n+                else:\n+                    ray = V(list(ray))\n             except TypeError:\n                 raise TypeError(\"cannot convert %s to %s!\" % (ray, V))\n             if ray.is_zero():\n```\n\nIt seems that if `V` does not want to take a `ray`, we should not force it.",
    "created_at": "2012-12-24T20:26:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130675",
    "user": "novoselt"
}
```

Hey Volker,

Do you remember what was the reason for this change in `normalize_rays`?

```diff
diff --git a/sage/geometry/cone.py b/sage/geometry/cone.py

Index: sage/geometry/cone.py
===================================================================
--- a/sage/geometry/cone.py
+++ b/sage/geometry/cone.py
@@ -568,7 +568,10 @@
         V = lattice.base_extend(QQ)
         for n, ray in enumerate(rays):
             try:
-                ray = V(ray)
+                if isinstance(ray, (list, tuple, V._element_class)):
+                    ray = V(ray)
+                else:
+                    ray = V(list(ray))
             except TypeError:
                 raise TypeError("cannot convert %s to %s!" % (ray, V))
             if ray.is_zero():
```

It seems that if `V` does not want to take a `ray`, we should not force it.



---

archive/issue_comments_130676.json:
```json
{
    "body": "I think the idea is to allow arbitrary iterables in `normalize_rays`. Why not? Its an auxiliary function, and the more general it is the better.",
    "created_at": "2012-12-24T20:34:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130676",
    "user": "vbraun"
}
```

I think the idea is to allow arbitrary iterables in `normalize_rays`. Why not? Its an auxiliary function, and the more general it is the better.



---

archive/issue_comments_130677.json:
```json
{
    "body": "I just was wondering what was the particular use case - found this bit because of the fuzz with another patch. I don't mind it, although changing what `V.__call__` accepts seems a more pleasant solution ;-)",
    "created_at": "2012-12-25T02:42:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130677",
    "user": "novoselt"
}
```

I just was wondering what was the particular use case - found this bit because of the fuzz with another patch. I don't mind it, although changing what `V.__call__` accepts seems a more pleasant solution ;-)



---

archive/issue_comments_130678.json:
```json
{
    "body": "Replying to [comment:60 novoselt]:\n> I don't mind it, although changing what `V.__call__` accepts seems a more pleasant solution ;-)\n\nWasn't that one of our design decisions, that the ToricLattice should forbid conversion between the lattice and its dual?",
    "created_at": "2012-12-25T13:24:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130678",
    "user": "vbraun"
}
```

Replying to [comment:60 novoselt]:
> I don't mind it, although changing what `V.__call__` accepts seems a more pleasant solution ;-)

Wasn't that one of our design decisions, that the ToricLattice should forbid conversion between the lattice and its dual?



---

archive/issue_comments_130679.json:
```json
{
    "body": "Replying to [comment:61 vbraun]:\n> Wasn't that one of our design decisions, that the ToricLattice should forbid conversion between the lattice and its dual? \n\nWe prohibit coercion, conversion is certainly possible, and here `V` is the spanned vector space anyway. But I've also hit many times a situation when a standard constructor in Sage would not take generators as input, which is probably what has happened here.",
    "created_at": "2012-12-28T02:53:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11591#issuecomment-130679",
    "user": "novoselt"
}
```

Replying to [comment:61 vbraun]:
> Wasn't that one of our design decisions, that the ToricLattice should forbid conversion between the lattice and its dual? 

We prohibit coercion, conversion is certainly possible, and here `V` is the spanned vector space anyway. But I've also hit many times a situation when a standard constructor in Sage would not take generators as input, which is probably what has happened here.
