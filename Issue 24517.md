# Issue 24517: py3: fix issue in sage.symbolic.expression with creating dynamic function classes

Issue created by migration from https://trac.sagemath.org/ticket/24754

Original creator: embray

Original creation time: 2018-02-16 14:32:20

I'm not completely happy with this solution but it gets the job done.


---

Comment by git created at 2018-02-16 14:32:37

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by embray created at 2018-02-16 14:32:45

New commits:


---

Comment by embray created at 2018-02-16 14:32:45

Changing status from new to needs_review.


---

Comment by embray created at 2018-02-16 14:33:06

Not sure how that wound up there.


---

Comment by jdemeyer created at 2018-03-08 16:48:17

Would `callable()` work?


---

Comment by embray created at 2018-03-08 17:22:43

It might but callable is also rather broad and could potentially pick up things that were not intended here.


---

Comment by jdemeyer created at 2018-03-13 15:02:52

It seems to me that the intention of the code to catch all "normal" attributes of the class, but not special attributes like `__repr__`. So maybe excluding all `__dunder__` attributes is the correct solution?


---

Comment by jdemeyer created at 2018-03-13 16:13:57

Changing component from python3 to symbolics.


---

Comment by jdemeyer created at 2018-03-13 16:13:57

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2018-03-13 16:29:55

I think that this is a simpler and better solution.
----
New commits:


---

Comment by jdemeyer created at 2018-03-13 16:29:55

Changing status from needs_work to needs_review.


---

Comment by embray created at 2018-03-13 19:49:51

Changing status from needs_review to positive_review.


---

Comment by embray created at 2018-03-13 19:49:51

Okay. It bothers me a bit that `eval_on_operands` is being moved and becoming a private function. I agree with the change; it just speaks to Sage's lack of a consistent "public API".  In this case it always should have been a private function.


---

Comment by embray created at 2018-03-13 19:54:22

Slight nitpick that you can fix only if you feel like:


```
+                            [Expression], eval_methods, prepend_cls_bases=False)
```


while using a list for the bases certainly works, it's just kind of unidomatic, as opposed to using a tuple (since internally it's stored as a tuple).  But for the purposes of the constructor it doesn't really matter...


---

Comment by git created at 2018-03-14 09:48:06

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:


---

Comment by git created at 2018-03-14 09:48:06

Changing status from positive_review to needs_review.


---

Comment by jdemeyer created at 2018-03-14 09:50:04

Replying to [comment:11 embray]:
> Slight nitpick that you can fix only if you feel like:
> 
> {{{
> +                            [Expression], eval_methods, prepend_cls_bases=False)
> }}}
> 
> while using a list for the bases certainly works, it's just kind of unidomatic, as opposed to using a tuple (since internally it's stored as a tuple).

Done.


---

Comment by jdemeyer created at 2018-03-14 09:50:04

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2018-03-21 06:18:47

Resolution: fixed
