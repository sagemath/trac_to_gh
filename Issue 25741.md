# Issue 25741: Python 3: sorting issue causing failure in koszul_complex.py

Issue created by migration from https://trac.sagemath.org/ticket/25978

Original creator: jhpalmieri

Original creation time: 2018-07-30 21:19:00

CC:  chapoton tscrim

A sorting issue (`TypeError: '>' not supported between instances of 'NoneType' and 'int'`) in `multi_polynomial_ring_base.pyx` causes a doctest failure in `koszul_complex.py` in Python 3.


---

Comment by jhpalmieri created at 2018-07-30 21:20:39

The issue here is that `terms` can be `None` while `total` is an integer, and then Python 3 objects to `if terms > total:`.
----
New commits:


---

Comment by jhpalmieri created at 2018-07-30 21:20:47

Changing status from new to needs_review.


---

Comment by tscrim created at 2018-07-30 21:32:10

I think it is good to put a comment in there explaining why this test is the way it is.

Also, I am presuming `total >= 0` (otherwise, there would be a bug when `terms = 0` and `total < 0`).


---

Comment by git created at 2018-07-30 22:17:18

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jhpalmieri created at 2018-07-30 22:18:24

Replying to [comment:4 tscrim]:
> I think it is good to put a comment in there explaining why this test is the way it is.

Sounds good.

> Also, I am presuming `total >= 0` (otherwise, there would be a bug when `terms = 0` and `total < 0`).

`total` is defined by `counts, total = self._precomp_counts(n, degree)`, and according to the documentation, `total` is a sum of cardinalities, so it had better be nonnegative.


---

Comment by tscrim created at 2018-07-30 22:25:31

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2018-07-30 22:25:31

Thanks.


---

Comment by vbraun created at 2018-09-01 09:09:58

Resolution: fixed
