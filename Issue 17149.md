# Issue 17149: Enumerate points of bounded height in projective/affine space over number fields

Issue created by migration from https://trac.sagemath.org/ticket/17386

Original creator: gjorgenson

Original creation time: 2014-11-24 05:26:20

CC:  bhutz

Add functionality to iterate over points of bounded height in projective/affine space over a number field. Also add functionality to list the points of height less than a given bound on a scheme defined over a number field.


---

Comment by git created at 2014-11-28 06:57:31

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by gjorgenson created at 2014-11-28 07:02:04

Changing status from new to needs_review.


---

Comment by bhutz created at 2014-12-18 16:46:28

Changing status from needs_review to needs_work.


---

Comment by bhutz created at 2014-12-18 16:46:28

Here is a first pass at reviewing this.

First you need to be careful with the difference between relative height and absolute height. The function K.elements_of_bounded_height() is returning with respect to a bound of relative height (as its documentation says). I would think most users would be interested in absolute height rational points for schemes. So you'll need to fix the functionality here, but also fix the documentation to specify which height in all appropriate places.

Also, specify whether the bound is <= or <

`numberField` is not a good variable name as [CamelCase](CamelCase) is reserved for class names.

In projective_homset.py put the imports near where they are needed so you only import what you need (this is done correctly in affine_homset.py)

Some examples that I expected to work that didn't

```
u = QQ['u'].0
K.<v> = NumberField(u^2 + 3)
A.<x,y> = ProjectiveSpace(K,1)
X=A.subscheme(x-y)
X.rational_points(3)
```

same for affine


```
from sage.schemes.projective.projective_rational_point import enum_projective_number_field
enum_projective_number_field(X,3)
```



```
from sage.schemes.affine.affine_rational_point import enum_affine_number_field
enum_affine_number_field(X,3)
```


I think the issues with the enum_ functions is whether the input should be the scheme `X` or the point set `X(K)`. Clarify which in the documentation for the functions. However, the X.rational_points ones seem to actually be failing.


---

Comment by git created at 2015-01-27 19:14:39

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by gjorgenson created at 2015-01-27 19:15:13

Changing status from needs_work to needs_review.


---

Comment by bhutz created at 2015-01-29 14:13:45

Looks like we are almost there with this one. The functionality all is in working order. But, I came across a few minor things to fix.

affine_rational_point
example line 168 is a long test so add -> # long time
probably makes more sense to make the bound smaller and get the test < 1s

affine_space -> line 777 not needed, but move the comment to 779

affine_space -> points_of_bounded_height -> add comment that this is using the Krumm-Doyle algorithm for number fields (get the citation from number fields where they implemented it).

algebraic_scheme -> line 1502 no longer need is_RationalField(F)

projective_space -> points_of_bounded_height -> add comment that this is using the Krumm-Doyle algorithm for number fields (get the citation from number fields where they implemented it).

projective_space -> line 94 not needed -> move comment to 951


There are a few places where the lines in the docs are too long. You need to wrap those. Such as line 748 in affine_space.py


Another bad example:

```
u = QQ['u'].0
K.<v> = NumberField(u^2 + 3)
A.<x,y> = ProjectiveSpace(K,1)
X=A.subscheme(x-y)
X.rational_points(3)
from sage.schemes.affine.affine_rational_point import enum_affine_number_field
enum_affine_number_field(X,3)
```

oops...X is projective and we called enum_affine successfully!! Need a check in those functions to make sure the ambient space is Affine or Projective


---

Comment by bhutz created at 2015-01-29 14:13:45

Changing status from needs_review to needs_work.


---

Comment by git created at 2015-02-03 17:53:52

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by gjorgenson created at 2015-02-03 17:55:02

Changing status from needs_work to needs_review.


---

Comment by git created at 2015-02-03 18:19:18

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by bhutz created at 2015-02-03 19:13:49

Changing status from needs_review to positive_review.


---

Comment by bhutz created at 2015-02-03 19:13:49

Ok. this looks good now.


---

Comment by vbraun created at 2015-02-18 08:53:23

Resolution: fixed
