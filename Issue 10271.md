# Issue 10271: laurent series truncate behaviour different from power series truncate

Issue created by migration from https://trac.sagemath.org/ticket/10272

Original creator: tkluck

Original creation time: 2010-11-15 14:28:46

Assignee: malb

Keywords: laurent series, truncate

There is the following difference in behaviour between truncate() for power series and laurent series:

sage: P.<p> = PowerSeriesRing(QQ)
sage: L.<l> = LaurentSeriesRing(QQ)
sage: f = p^2 + p^3 + p^5 +p^6 + O(p^7)
sage: g = l^2 + l^3 + l^5 +l^6 + O(l^7)
sage: f.truncate(6)
p^5 + p^3 + p^2
sage: g.truncate(6)
l^2 + l^3 + l^5 + O(l^6)
sage: f.truncate_powerseries(6)
p^2 + p^3 + p^5 + O(p^6)

The problem is simply that g.truncate() calls truncate_powerseries() on its underlying power series.

The attached patch changes LaurentSeries.truncate() such that is calls truncate() on the underlying powerseries. For the current behaviour, it also adds a method truncate_laurentseries() which calls truncate_powerseries() on the underlying powerseries.

In my opinion, the methods truncate_powerseries and truncate_laurentseries are superfluous since they are equivalent to add_bigoh().


---

Comment by mhampton created at 2011-01-11 05:58:07

Is this ready for review?  If so, you should change its status to "needs review".


---

Comment by tkluck created at 2011-01-11 13:45:03

Changing status from new to needs_review.


---

Comment by tkluck created at 2011-01-11 13:45:30

Thanks, I just did.


---

Comment by mhampton created at 2011-01-12 00:26:28

Changing status from needs_review to positive_review.


---

Comment by mhampton created at 2011-01-12 00:26:28

Looks good, positive review.  Doesn't break any doctests in rings because Laurent series are so poorly tested!
Only bad thing is that you should include the ticket number on the patch, i.e. this one should have been named something like trac_10272_laurent_series_truncate.patch.  This helps the release manager and others in a variety of ways.


---

Comment by jdemeyer created at 2011-01-17 17:29:29

Changing status from positive_review to needs_work.


---

Comment by jdemeyer created at 2011-01-17 17:29:29

Patches should be created using `hg export tip`, not `hg diff`.  I also remind you that a patch should have a sensible commit message (use `hg qrefresh -e` for that) and that the ticket number should appear on the first line of the commit message.


---

Comment by tkluck created at 2011-03-16 16:18:28

Changing status from needs_work to needs_review.


---

Comment by tkluck created at 2011-03-16 16:18:28

I just added the patch in the right format, i.e. the output of `hg_sage.export()` instead of a normal diff.


---

Comment by jdemeyer created at 2011-03-16 18:55:48

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2011-03-16 18:55:48

Please read [http://sagemath.org/doc/developer/conventions.html#documentation-strings](http://sagemath.org/doc/developer/conventions.html#documentation-strings) and fix the documentation of this new function accordingly.  In particular, you should add at least one example.


---

Comment by tkluck created at 2011-03-17 16:07:36

Changing status from needs_work to needs_review.


---

Comment by tkluck created at 2011-03-17 16:07:36

Thanks, just added docstrings and examples.


---

Comment by jdemeyer created at 2011-04-05 15:27:19

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2011-04-05 16:36:09

Changing status from positive_review to needs_work.


---

Comment by jdemeyer created at 2011-04-05 16:36:09

This needs to be rebased:

```
applying /scratch/jdemeyer/merger/downloads/trac_10272_laurent_series_truncate.patch
patching file sage/rings/laurent_series_ring_element.pyx
Hunk #1 FAILED at 725
1 out of 1 hunks FAILED -- saving rejects to file sage/rings/laurent_series_ring_element.pyx.rej
abort: patch failed to apply
```



---

Comment by tkluck created at 2011-11-30 18:49:28

Changing status from needs_work to needs_review.


---

Attachment

Sorry for not having done this earlier, I totally forgot. I just uploaded a new version that should apply cleanly against the current version. Please review.


---

Comment by kcrisman created at 2012-05-26 07:18:39


```

sage -t  "devel/sage-main/sage/rings/laurent_series_ring_element.pyx"
	 [2.1 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 2.1 seconds
```

And it still applies.


---

Comment by kcrisman created at 2012-05-26 07:18:39

Changing status from needs_review to positive_review.


---

Comment by kcrisman created at 2012-05-26 07:22:02

Changing keywords from "laurent series, truncate" to "laurent series, truncate sd40.5".


---

Comment by jdemeyer created at 2012-06-05 11:52:51

Resolution: fixed
