# Issue 16044: redesign projective plane

archive/issues_016044.json:
```json
{
    "body": "CC:  @nathanncohen\n\nKeywords: design, projective plane\n\nProjective planes are currently implemented as block designs but are **very** slow to construct (see timings in #16272). Moreover the specifications and the behaviour are contradictory.\n\nIn this ticket\n- we create several function that aim to build a specific projective planes (Desarguesian, Hall, Hugues)\n- we replace the function `ProjectivePlaneDesign` with `projective_plane` that return **a** projective plane if there is an available construction, or raise a `EmptySetError` if no construction is possible or raise a `NotImplementedError` if no construction is currently available.\n\nWe also implement two translation functions `projective_plane_to_OA` and `OA_to_projective_plane` that make the translation between orthogonal arrays (with parameters `k=n+1` and `t=2`) and projective planes.\n\nThis is an intermediate step for #16272\n\nIssue created by migration from https://trac.sagemath.org/ticket/16281\n\n",
    "created_at": "2014-05-03T09:45:39Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.3",
    "title": "redesign projective plane",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16044",
    "user": "https://github.com/videlec"
}
```
CC:  @nathanncohen

Keywords: design, projective plane

Projective planes are currently implemented as block designs but are **very** slow to construct (see timings in #16272). Moreover the specifications and the behaviour are contradictory.

In this ticket
- we create several function that aim to build a specific projective planes (Desarguesian, Hall, Hugues)
- we replace the function `ProjectivePlaneDesign` with `projective_plane` that return **a** projective plane if there is an available construction, or raise a `EmptySetError` if no construction is possible or raise a `NotImplementedError` if no construction is currently available.

We also implement two translation functions `projective_plane_to_OA` and `OA_to_projective_plane` that make the translation between orthogonal arrays (with parameters `k=n+1` and `t=2`) and projective planes.

This is an intermediate step for #16272

Issue created by migration from https://trac.sagemath.org/ticket/16281





---

archive/issue_comments_208530.json:
```json
{
    "body": "Here it is...\n----\nNew commits:",
    "created_at": "2014-05-03T13:14:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16044#issuecomment-208530",
    "user": "https://github.com/videlec"
}
```

Here it is...
----
New commits:



---

archive/issue_comments_208531.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-05-03T13:14:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16044#issuecomment-208531",
    "user": "https://github.com/videlec"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_208532.json:
```json
{
    "body": "Heeeeeeeeereis the review !\n\n- Designs end with \"Design\", i.e. DesarguesianProjectivePlaneDesign. I don't say that it is a good idea, but that we should change it for all of them or not at all. Plus Dima will complain.\n\n- Why not use deprecated_function_alias for designs.ProjectivePlaneDesign ?\n\n- You can do this instead\n  {{{\n  relabel = {x:i for i,x in enumerate(K)}\n  Klist = relabel # Klist represent the set of elements of K\n  }}}\n\n- `projective_plane_to_OA`: there is a function in bibd.py called `_relabel_BIBD` that takes a BIBD on n points as input (here it would be a projective plane) and relabels its elements in such a way that [[0,..,k-2,n],[k-1,...,2*k-2,n],...,[n-k-1,n-1]] are sets of the BIBD. So well. It actually does what you are doing : it relabels the BIBD such that when you remove all blocks containing n-1 you get a well-labelled TD.\n\n- `OA_to_projective_plane` I implemented something VERY SIMILAR in #16279 but not equivalent :-)\n\n- `OA_to_projective_plane` : Why do you need to relabel anything ?\n  {{{\n+    # add the n^2 lines that correspond to transversals\n+    for l in OA:\n+        blcks.append([i+(n+1)*j for i,j in enumerate(l)])\n  }}}\n  The OA is already well labelled. The BIBD is exactly the blocks from the OA plus the k groups union the new element, isn't it ? This should just be a deepcopy.\n\n- Isn't the triangle a Projective Plane of order 1 ?\n\nNathann",
    "created_at": "2014-05-03T13:42:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16044#issuecomment-208532",
    "user": "https://github.com/nathanncohen"
}
```

Heeeeeeeeereis the review !

- Designs end with "Design", i.e. DesarguesianProjectivePlaneDesign. I don't say that it is a good idea, but that we should change it for all of them or not at all. Plus Dima will complain.

- Why not use deprecated_function_alias for designs.ProjectivePlaneDesign ?

- You can do this instead
  {{{
  relabel = {x:i for i,x in enumerate(K)}
  Klist = relabel # Klist represent the set of elements of K
  }}}

- `projective_plane_to_OA`: there is a function in bibd.py called `_relabel_BIBD` that takes a BIBD on n points as input (here it would be a projective plane) and relabels its elements in such a way that [[0,..,k-2,n],[k-1,...,2*k-2,n],...,[n-k-1,n-1]] are sets of the BIBD. So well. It actually does what you are doing : it relabels the BIBD such that when you remove all blocks containing n-1 you get a well-labelled TD.

- `OA_to_projective_plane` I implemented something VERY SIMILAR in #16279 but not equivalent :-)

- `OA_to_projective_plane` : Why do you need to relabel anything ?
  {{{
+    # add the n^2 lines that correspond to transversals
+    for l in OA:
+        blcks.append([i+(n+1)*j for i,j in enumerate(l)])
  }}}
  The OA is already well labelled. The BIBD is exactly the blocks from the OA plus the k groups union the new element, isn't it ? This should just be a deepcopy.

- Isn't the triangle a Projective Plane of order 1 ?

Nathann



---

archive/issue_comments_208533.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2014-05-03T13:42:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16044#issuecomment-208533",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_208534.json:
```json
{
    "body": "Replying to [comment:3 ncohen]:\n> Heeeeeeeeereis the review !\n\nThanks!\n \n> - Designs end with \"Design\", i.e. DesarguesianProjectivePlaneDesign. I don't say that it is a good idea, but that we should change it for all of them or not at all. Plus Dima will complain.\n\nOk.\n\n> - Why not use deprecated_function_alias for designs.ProjectivePlaneDesign ?\n\nBecause of the argument \"type\"... funny isn't it?\n\n> - You can do this instead\n>   {{{\n>   relabel = {x:i for i,x in enumerate(K)}\n>   Klist = relabel # Klist represent the set of elements of K\n>   }}}\n\nAll right.\n\n> - `projective_plane_to_OA`: there is a function in bibd.py called `_relabel_BIBD` that takes a BIBD on n points as input (here it would be a projective plane) and relabels its elements in such a way that [[0,..,k-2,n],[k-1,...,2*k-2,n],...,[n-k-1,n-1]] are sets of the BIBD. So well. It actually does what you are doing : it relabels the BIBD such that when you remove all blocks containing n-1 you get a well-labelled TD.\n> - `OA_to_projective_plane` I implemented something VERY SIMILAR in #16279 but not equivalent :-)\n> \n> - `OA_to_projective_plane` : Why do you need to relabel anything ?\n>   {{{\n> +    # add the n^2 lines that correspond to transversals\n> +    for l in OA:\n> +        blcks.append([i+(n+1)*j for i,j in enumerate(l)])\n>   }}}\n>   The OA is already well labelled. The BIBD is exactly the blocks from the OA plus the k groups union the new element, isn't it ? This should just be a deepcopy.\n> \n\nI do not know what is a bibd and I did not have a look at it (except changing the call to ProjectivePlaneDesign). If you feel like removing more code I am happy with that but I will not do it (if you do, wait until the other remarks are implemented).\n\n> - Isn't the triangle a Projective Plane of order 1 ?\n\nNope: in a projective plane there should be a quadrilateral.\n \nVincent",
    "created_at": "2014-05-03T13:51:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16044#issuecomment-208534",
    "user": "https://github.com/videlec"
}
```

Replying to [comment:3 ncohen]:
> Heeeeeeeeereis the review !

Thanks!
 
> - Designs end with "Design", i.e. DesarguesianProjectivePlaneDesign. I don't say that it is a good idea, but that we should change it for all of them or not at all. Plus Dima will complain.

Ok.

> - Why not use deprecated_function_alias for designs.ProjectivePlaneDesign ?

Because of the argument "type"... funny isn't it?

> - You can do this instead
>   {{{
>   relabel = {x:i for i,x in enumerate(K)}
>   Klist = relabel # Klist represent the set of elements of K
>   }}}

All right.

> - `projective_plane_to_OA`: there is a function in bibd.py called `_relabel_BIBD` that takes a BIBD on n points as input (here it would be a projective plane) and relabels its elements in such a way that [[0,..,k-2,n],[k-1,...,2*k-2,n],...,[n-k-1,n-1]] are sets of the BIBD. So well. It actually does what you are doing : it relabels the BIBD such that when you remove all blocks containing n-1 you get a well-labelled TD.
> - `OA_to_projective_plane` I implemented something VERY SIMILAR in #16279 but not equivalent :-)
> 
> - `OA_to_projective_plane` : Why do you need to relabel anything ?
>   {{{
> +    # add the n^2 lines that correspond to transversals
> +    for l in OA:
> +        blcks.append([i+(n+1)*j for i,j in enumerate(l)])
>   }}}
>   The OA is already well labelled. The BIBD is exactly the blocks from the OA plus the k groups union the new element, isn't it ? This should just be a deepcopy.
> 

I do not know what is a bibd and I did not have a look at it (except changing the call to ProjectivePlaneDesign). If you feel like removing more code I am happy with that but I will not do it (if you do, wait until the other remarks are implemented).

> - Isn't the triangle a Projective Plane of order 1 ?

Nope: in a projective plane there should be a quadrilateral.
 
Vincent



---

archive/issue_comments_208535.json:
```json
{
    "body": "Yo !\n\n> Because of the argument \"type\"... funny isn't it?\n\nCome on.... I am not even sure this thing ever appeared in a public release, and it does nothing.... I think it is safe to use a `deprecated_function_alias`. Actually it is even safe to remove it without warning...\n\n> I do not know what is a bibd and I did not have a look at it (except changing the call to ProjectivePlaneDesign). If you feel like removing more code I am happy with that but I will not do it (if you do, wait until the other remarks are implemented).\n\nWell. If you have a ProjectivePlane (a Projective Plane is a BIBD) named `PP` and do `PP = _relabel_BIBD(PP)` then if you remove from the new `PP` all blocks that contain the \"maximum point\" (i.e. n-1) then you have a properly labeled TD.\n\n> Nope: in a projective plane there should be a quadrilateral.\n\nRight. I had some (theoretical) problems with degenerate projective planes recently `:-P`\n\nNathann",
    "created_at": "2014-05-03T13:55:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16044#issuecomment-208535",
    "user": "https://github.com/nathanncohen"
}
```

Yo !

> Because of the argument "type"... funny isn't it?

Come on.... I am not even sure this thing ever appeared in a public release, and it does nothing.... I think it is safe to use a `deprecated_function_alias`. Actually it is even safe to remove it without warning...

> I do not know what is a bibd and I did not have a look at it (except changing the call to ProjectivePlaneDesign). If you feel like removing more code I am happy with that but I will not do it (if you do, wait until the other remarks are implemented).

Well. If you have a ProjectivePlane (a Projective Plane is a BIBD) named `PP` and do `PP = _relabel_BIBD(PP)` then if you remove from the new `PP` all blocks that contain the "maximum point" (i.e. n-1) then you have a properly labeled TD.

> Nope: in a projective plane there should be a quadrilateral.

Right. I had some (theoretical) problems with degenerate projective planes recently `:-P`

Nathann



---

archive/issue_comments_208536.json:
```json
{
    "body": "Replying to [comment:5 ncohen]:\n> Yo !\n> \n> > Because of the argument \"type\"... funny isn't it?\n> \n> Come on.... I am not even sure this thing ever appeared in a public release, and it does nothing.... I think it is safe to use a `deprecated_function_alias`. Actually it is even safe to remove it without warning...\n\nAll right. I remove it.\n\n> > I do not know what is a bibd and I did not have a look at it (except changing the call to ProjectivePlaneDesign). If you feel like removing more code I am happy with that but I will not do it (if you do, wait until the other remarks are implemented).\n> \n> Well. If you have a ProjectivePlane (a Projective Plane is a BIBD) named `PP` and do `PP = _relabel_BIBD(PP)` then if you remove from the new `PP` all blocks that contain the \"maximum point\" (i.e. n-1) then you have a properly labeled TD.\n\nOk. I see. Perfect.\n\nVincent",
    "created_at": "2014-05-03T13:57:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16044#issuecomment-208536",
    "user": "https://github.com/videlec"
}
```

Replying to [comment:5 ncohen]:
> Yo !
> 
> > Because of the argument "type"... funny isn't it?
> 
> Come on.... I am not even sure this thing ever appeared in a public release, and it does nothing.... I think it is safe to use a `deprecated_function_alias`. Actually it is even safe to remove it without warning...

All right. I remove it.

> > I do not know what is a bibd and I did not have a look at it (except changing the call to ProjectivePlaneDesign). If you feel like removing more code I am happy with that but I will not do it (if you do, wait until the other remarks are implemented).
> 
> Well. If you have a ProjectivePlane (a Projective Plane is a BIBD) named `PP` and do `PP = _relabel_BIBD(PP)` then if you remove from the new `PP` all blocks that contain the "maximum point" (i.e. n-1) then you have a properly labeled TD.

Ok. I see. Perfect.

Vincent



---

archive/issue_comments_208537.json:
```json
{
    "body": "by the way: a BIBD is an edge-decomposition of a Complete graph on n elements with complete graphs of k elements. It is a collection of sets of size k such that any pair of elements in [n] belong to exactly one of these sets of size k. Somehow it is a projective plane with uniform lines, but two lines do not necessarily intersect.\n\nNathann",
    "created_at": "2014-05-03T13:59:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16044#issuecomment-208537",
    "user": "https://github.com/nathanncohen"
}
```

by the way: a BIBD is an edge-decomposition of a Complete graph on n elements with complete graphs of k elements. It is a collection of sets of size k such that any pair of elements in [n] belong to exactly one of these sets of size k. Somehow it is a projective plane with uniform lines, but two lines do not necessarily intersect.

Nathann



---

archive/issue_comments_208538.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-03T14:10:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16044#issuecomment-208538",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_208539.json:
```json
{
    "body": "I was not able to use the function '_relabel_bibd'. If you want to play with it...",
    "created_at": "2014-05-03T14:11:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16044#issuecomment-208539",
    "user": "https://github.com/videlec"
}
```

I was not able to use the function '_relabel_bibd'. If you want to play with it...



---

archive/issue_comments_208540.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2014-05-03T14:11:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16044#issuecomment-208540",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_208541.json:
```json
{
    "body": "> I was not able to use the function '_relabel_bibd'. If you want to play with it...\n\nDo you think that the \"pt\" argument is useful ? If it is not, I can rewrite this in 4-5 lines.\n\nI do not think that it is useful, given that from the pair \"PP,pt\" there is not an \"unique\" resulting OA. So well, the function just creates a OA from a PP, and we cannot say much more.\n\nNathann",
    "created_at": "2014-05-03T14:36:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16044#issuecomment-208541",
    "user": "https://github.com/nathanncohen"
}
```

> I was not able to use the function '_relabel_bibd'. If you want to play with it...

Do you think that the "pt" argument is useful ? If it is not, I can rewrite this in 4-5 lines.

I do not think that it is useful, given that from the pair "PP,pt" there is not an "unique" resulting OA. So well, the function just creates a OA from a PP, and we cannot say much more.

Nathann



---

archive/issue_comments_208542.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2014-05-03T14:52:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16044#issuecomment-208542",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_208543.json:
```json
{
    "body": "I added a commit that does that in public/16281\n\nNathann",
    "created_at": "2014-05-03T14:52:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16044#issuecomment-208543",
    "user": "https://github.com/nathanncohen"
}
```

I added a commit that does that in public/16281

Nathann



---

archive/issue_comments_208544.json:
```json
{
    "body": "The thing is that the pair (pp,pt) gives a unique stuff up to isomorphism if and only if the automorphism group of the pp acts enough transitively... it is the case for Desarguesian planes but I do not no yet for the others.",
    "created_at": "2014-05-03T15:13:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16044#issuecomment-208544",
    "user": "https://github.com/videlec"
}
```

The thing is that the pair (pp,pt) gives a unique stuff up to isomorphism if and only if the automorphism group of the pp acts enough transitively... it is the case for Desarguesian planes but I do not no yet for the others.



---

archive/issue_comments_208545.json:
```json
{
    "body": "> The thing is that the pair (pp,pt) gives a unique stuff up to isomorphism if and only if the automorphism group of the pp acts enough transitively... it is the case for Desarguesian planes but I do not no yet for the others.\n\nDo you think we could leave this for later, until somebody actually ... cares to compute this with Sage ?...\n\nNathann",
    "created_at": "2014-05-03T15:15:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16044#issuecomment-208545",
    "user": "https://github.com/nathanncohen"
}
```

> The thing is that the pair (pp,pt) gives a unique stuff up to isomorphism if and only if the automorphism group of the pp acts enough transitively... it is the case for Desarguesian planes but I do not no yet for the others.

Do you think we could leave this for later, until somebody actually ... cares to compute this with Sage ?...

Nathann



---

archive/issue_comments_208546.json:
```json
{
    "body": "new version in 10 minutes that leaves the feature.\n\nNathann",
    "created_at": "2014-05-03T15:44:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16044#issuecomment-208546",
    "user": "https://github.com/nathanncohen"
}
```

new version in 10 minutes that leaves the feature.

Nathann



---

archive/issue_comments_208547.json:
```json
{
    "body": "Here it is, in public/16281.\n\nNathann",
    "created_at": "2014-05-03T15:53:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16044#issuecomment-208547",
    "user": "https://github.com/nathanncohen"
}
```

Here it is, in public/16281.

Nathann



---

archive/issue_comments_208548.json:
```json
{
    "body": "Hi Nathann,\n\nLooks cool like that. Thanks.\n\nIs that ready to go?\n\nVincent",
    "created_at": "2014-05-03T16:51:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16044#issuecomment-208548",
    "user": "https://github.com/videlec"
}
```

Hi Nathann,

Looks cool like that. Thanks.

Is that ready to go?

Vincent



---

archive/issue_comments_208549.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2014-05-03T16:51:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16044#issuecomment-208549",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_208550.json:
```json
{
    "body": "In your construction of the projective plane I do not understand what you mean by the coordinates, especially while reading the code.\n\nA way to make it clearer would be to define the following functions. If you have another idea I really don't mind, I just want to understand the code `^^;`\n\n\n```\npair_to_int = lambda x,y : relabel[x] + n*relabel[y]\ninfinity = lambda x : x + n2\n```\n\n\nThis way we can read the code without trying to translate the coordinates `^^;`\n\nNathann",
    "created_at": "2014-05-03T17:18:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16044#issuecomment-208550",
    "user": "https://github.com/nathanncohen"
}
```

In your construction of the projective plane I do not understand what you mean by the coordinates, especially while reading the code.

A way to make it clearer would be to define the following functions. If you have another idea I really don't mind, I just want to understand the code `^^;`


```
pair_to_int = lambda x,y : relabel[x] + n*relabel[y]
infinity = lambda x : x + n2
```


This way we can read the code without trying to translate the coordinates `^^;`

Nathann



---

archive/issue_comments_208551.json:
```json
{
    "body": "Hi,\n\nThe projective plane over a field is the set of equivalence classes of non-zero vectors `(x,y,z)` up to multiplication by a non-zero scalar. You can decompose the projective plane into:\n- an affine plane: `(x,y,1)`\n- an affine line \"at infinity\": `(x,1,0)`\n- a point \"at infinity\": `(1,0,0)`\nI would prefer the names\n\n```\naffine_plane   = lambda x,y : relabel[x] + n*relabel[y]\nline_infinity  = lambda x : x + n2\npoint_infinity = n2 + n \n```\n\nI am making it.\n\nVincent",
    "created_at": "2014-05-03T17:30:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16044#issuecomment-208551",
    "user": "https://github.com/videlec"
}
```

Hi,

The projective plane over a field is the set of equivalence classes of non-zero vectors `(x,y,z)` up to multiplication by a non-zero scalar. You can decompose the projective plane into:
- an affine plane: `(x,y,1)`
- an affine line "at infinity": `(x,1,0)`
- a point "at infinity": `(1,0,0)`
I would prefer the names

```
affine_plane   = lambda x,y : relabel[x] + n*relabel[y]
line_infinity  = lambda x : x + n2
point_infinity = n2 + n 
```

I am making it.

Vincent



---

archive/issue_comments_208552.json:
```json
{
    "body": "Well, what I find confusing is that you give all these things 3 coordinates, and I do not see the point `O_o`\n\nFor me there are three kinds of points, one with two coordinates one with 1, and the last one.\n\nNathann",
    "created_at": "2014-05-03T17:31:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16044#issuecomment-208552",
    "user": "https://github.com/nathanncohen"
}
```

Well, what I find confusing is that you give all these things 3 coordinates, and I do not see the point `O_o`

For me there are three kinds of points, one with two coordinates one with 1, and the last one.

Nathann



---

archive/issue_comments_208553.json:
```json
{
    "body": "Three because of the definition I know... quotient out `K^3 \\ {0}` by the positive scalar acting by multiplication. Then, you can manage to decompose into plane+line+point.\n\nHow about a HUGE comment as follows\n\n```\n# we decompose the points (x:y:z) of the projective space into an affine\n# plane, an affine line and a point. At the same time, we relabel the points\n# with the integers from 0 to n^2 + n. It is done as follows:\n# the affine plane is the set of points (x:y:1) and gets relabeled\n# from 0 to n^2-1\naffine_plane   = lambda x,y: relabel[x] + n * relabel[y]\n    \n# the affine line is the set of points (x:1:0)\n# and gets relabeld from n^2 to n^2 + n - 1\nline_infinity  = lambda x: n2 + relabel[x]\n    \n# the point is (1:0:0)\n# and gets relabeld n^2 + n\npoint_infinity = n2 + n\n\n```\n",
    "created_at": "2014-05-03T17:40:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16044#issuecomment-208553",
    "user": "https://github.com/videlec"
}
```

Three because of the definition I know... quotient out `K^3 \ {0}` by the positive scalar acting by multiplication. Then, you can manage to decompose into plane+line+point.

How about a HUGE comment as follows

```
# we decompose the points (x:y:z) of the projective space into an affine
# plane, an affine line and a point. At the same time, we relabel the points
# with the integers from 0 to n^2 + n. It is done as follows:
# the affine plane is the set of points (x:y:1) and gets relabeled
# from 0 to n^2-1
affine_plane   = lambda x,y: relabel[x] + n * relabel[y]
    
# the affine line is the set of points (x:1:0)
# and gets relabeld from n^2 to n^2 + n - 1
line_infinity  = lambda x: n2 + relabel[x]
    
# the point is (1:0:0)
# and gets relabeld n^2 + n
point_infinity = n2 + n

```




---

archive/issue_comments_208554.json:
```json
{
    "body": ".......\n\nReally, what force is making you define three coordinates for those points ? In which 3d space do they live ? `O_O`\n\nNathann",
    "created_at": "2014-05-03T17:42:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16044#issuecomment-208554",
    "user": "https://github.com/nathanncohen"
}
```

.......

Really, what force is making you define three coordinates for those points ? In which 3d space do they live ? `O_O`

Nathann



---

archive/issue_comments_208555.json:
```json
{
    "body": "OOhhhhhhhhhh I see how you see it now... `T_T`\n\nWell, I personally find  the explanation clearer without any mention of the 3d coordinates... But well, it's up to you.. Tastes, I guess `T_T`\n\nNathann",
    "created_at": "2014-05-03T17:47:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16044#issuecomment-208555",
    "user": "https://github.com/nathanncohen"
}
```

OOhhhhhhhhhh I see how you see it now... `T_T`

Well, I personally find  the explanation clearer without any mention of the 3d coordinates... But well, it's up to you.. Tastes, I guess `T_T`

Nathann



---

archive/issue_comments_208556.json:
```json
{
    "body": "It is the [standard definition](http://en.wikipedia.org/wiki/Projective_space) of the projective plane: it is the set of vectorial lines in `K^3`. You need the coordinates to see which point is at infinity...",
    "created_at": "2014-05-03T17:51:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16044#issuecomment-208556",
    "user": "https://github.com/videlec"
}
```

It is the [standard definition](http://en.wikipedia.org/wiki/Projective_space) of the projective plane: it is the set of vectorial lines in `K^3`. You need the coordinates to see which point is at infinity...



---

archive/issue_comments_208557.json:
```json
{
    "body": "Defined as equivalence classes okay, but it stays abstract and you still have no coordinates. But then you say \"I can either normalize the third coordinate if it is nonzero, otherwise I normalize the second coordinate,and if I can't I normalize the first\".\n\nWell... I am used to defined this thing with \"three kinds of points\" :-P\n\nAnyway, if you can put this inside of the branch then no problem `:-)`\n\nNathann",
    "created_at": "2014-05-03T17:54:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16044#issuecomment-208557",
    "user": "https://github.com/nathanncohen"
}
```

Defined as equivalence classes okay, but it stays abstract and you still have no coordinates. But then you say "I can either normalize the third coordinate if it is nonzero, otherwise I normalize the second coordinate,and if I can't I normalize the first".

Well... I am used to defined this thing with "three kinds of points" :-P

Anyway, if you can put this inside of the branch then no problem `:-)`

Nathann



---

archive/issue_comments_208558.json:
```json
{
    "body": "here you go",
    "created_at": "2014-05-03T18:01:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16044#issuecomment-208558",
    "user": "https://github.com/videlec"
}
```

here you go



---

archive/issue_comments_208559.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-03T18:02:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16044#issuecomment-208559",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_208560.json:
```json
{
    "body": "Oups: there is a warning in docbuild\n\n```\n.../block_design.py:docstring of sage.combinat.designs.block_design.projective_plane_to_OA:1: WARNING: Inline literal start-string without end-string.\n```\n",
    "created_at": "2014-05-03T18:04:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16044#issuecomment-208560",
    "user": "https://github.com/videlec"
}
```

Oups: there is a warning in docbuild

```
.../block_design.py:docstring of sage.combinat.designs.block_design.projective_plane_to_OA:1: WARNING: Inline literal start-string without end-string.
```




---

archive/issue_comments_208561.json:
```json
{
    "body": "Oh right. The ``` after pplane. Well, you can set this to `positive_review` after this is fixed. Thanks for this patch !\n\nNathann",
    "created_at": "2014-05-03T18:06:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16044#issuecomment-208561",
    "user": "https://github.com/nathanncohen"
}
```

Oh right. The ``` after pplane. Well, you can set this to `positive_review` after this is fixed. Thanks for this patch !

Nathann



---

archive/issue_comments_208562.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-05-03T18:06:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16044#issuecomment-208562",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_208563.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-05-03T18:07:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16044#issuecomment-208563",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_208564.json:
```json
{
    "body": "Great. Let's go back to #16272 and manage the merge...",
    "created_at": "2014-05-03T18:07:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16044#issuecomment-208564",
    "user": "https://github.com/videlec"
}
```

Great. Let's go back to #16272 and manage the merge...



---

archive/issue_comments_208565.json:
```json
{
    "body": "Come ooooooooon. That will be easy.\n\nHey Vincent, I'm not sure I told you but it is great to work together on something. Stuff happens, gets merged and written. Much better than the usual \"write a patch, then wait forever\" `:-P`\n\nNathann",
    "created_at": "2014-05-03T18:09:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16044#issuecomment-208565",
    "user": "https://github.com/nathanncohen"
}
```

Come ooooooooon. That will be easy.

Hey Vincent, I'm not sure I told you but it is great to work together on something. Stuff happens, gets merged and written. Much better than the usual "write a patch, then wait forever" `:-P`

Nathann



---

archive/issue_events_015612.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2014-05-06T22:02:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16044",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16044#event-15612"
}
```



---

archive/issue_comments_208566.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-05-06T22:02:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16044#issuecomment-208566",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
