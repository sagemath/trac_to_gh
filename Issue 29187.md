# Issue 29187: Slackware: system packages fix

Issue created by migration from https://trac.sagemath.org/ticket/29424

Original creator: mkoeppe

Original creation time: 2020-03-29 13:04:25

CC:  dimpase @kliem mjo

Building git for `slackware-14.2-minimal` (https://github.com/mkoeppe/sage/runs/542501916):

```
mkdir -p po/build/locale/vi/LC_MESSAGES/ && msgfmt --check --statistics -o po/build/locale/vi/LC_MESSAGES/git.mo po/vi.po
msgfmt: error while loading shared libraries: libcroco-0.6.so.3: cannot open shared object file: No such file or directory
Makefile:2150: recipe for target 'po/build/locale/vi/LC_MESSAGES/git.mo' failed
make[4]: *** [po/build/locale/vi/LC_MESSAGES/git.mo] Error 127
```



---

Comment by mkoeppe created at 2020-03-29 13:21:09

New commits:


---

Comment by git created at 2020-03-29 13:27:53

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2020-03-29 13:31:00

Changing status from new to needs_review.


---

Comment by mjo created at 2020-04-02 22:04:44

I guess you re-ran your tests on this branch and it worked?

(Is Slackware still requiring manual installation of all dependencies?)


---

Comment by mkoeppe created at 2020-04-02 22:13:54

Changing status from needs_review to needs_work.


---

Comment by mkoeppe created at 2020-04-02 22:13:54

Replying to [comment:6 mjo]:
> I guess you re-ran your tests on this branch and it worked?

Actually there are still errors (https://github.com/mkoeppe/sage/runs/552216361)

```
msgfmt: error while loading shared libraries: libxml2.so.2: cannot open shared object file: No such file or directory
Makefile:2150: recipe for target 'po/build/locale/ru/LC_MESSAGES/git.mo' failed
```


> (Is Slackware still requiring manual installation of all dependencies?)

Yes, which is kind of amusing


---

Comment by git created at 2020-04-07 06:33:35

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2020-04-08 13:36:12

(deleted)


---

Comment by mkoeppe created at 2020-04-08 13:36:20

Changing status from needs_work to needs_review.


---

Comment by mkoeppe created at 2020-04-08 23:04:47

(deleted)


---

Comment by mkoeppe created at 2020-04-12 07:05:16

Successful tests ran at https://github.com/mkoeppe/sage/runs/579412320

Ready for review


---

Comment by dimpase created at 2020-04-12 15:37:30

Tests marked as successful (slackware-standard), https://github.com/mkoeppe/sage/runs/579412322
show an error

```
2020-04-12T02:08:51.7746771Z [sagelib-9.1.beta9] installing. Log file: /sage/logs/pkgs/sagelib-9.1.beta9.log
2020-04-12T02:08:51.7747324Z   [sagelib-9.1.beta9] successfully installed.  real 0m4.387s user 0m3.213s sys 0m0.984s
2020-04-12T02:08:51.7747865Z cd ../.. && sage-logger -p './sage --docbuild --no-pdf-links all html ' logs/dochtml.log
2020-04-12T02:08:51.7748324Z make[3]: Nothing to be done for 'all-sage'.
2020-04-12T02:08:51.7748518Z [dochtml] installing. Log file: logs/dochtml.log
2020-04-12T02:08:51.7748693Z   [dochtml] error installing, exit status 1. End of log file:
2020-04-12T02:08:51.7748880Z   [dochtml]   Traceback (most recent call last):
2020-04-12T02:08:51.7749083Z   [dochtml]     File "/sage/local/lib/python3.7/runpy.py", line 183, in _run_module_as_main
2020-04-12T02:08:51.7749423Z   [dochtml]       mod_name, mod_spec, code = _get_module_details(mod_name, _Error)
2020-04-12T02:08:51.7749634Z   [dochtml]     File "/sage/local/lib/python3.7/runpy.py", line 142, in _get_module_details
2020-04-12T02:08:51.7749844Z   [dochtml]       return _get_module_details(pkg_main_name, error)
2020-04-12T02:08:51.7750051Z   [dochtml]     File "/sage/local/lib/python3.7/runpy.py", line 109, in _get_module_details
2020-04-12T02:08:51.7750253Z   [dochtml]       __import__(pkg_name)
2020-04-12T02:08:51.7750852Z   [dochtml]     File "/sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 59, in <module>
2020-04-12T02:08:58.1462272Z   [dochtml]       import sage.all
2020-04-12T02:08:58.1463451Z   [dochtml]     File "/sage/local/lib/python3.7/site-packages/sage/all.py", line 132, in <module>
2020-04-12T02:08:58.1463748Z   [dochtml]       from sage.matrix.all     import *
2020-04-12T02:08:58.1464217Z   [dochtml]     File "/sage/local/lib/python3.7/site-packages/sage/matrix/__init__.py", line 2, in <module>
2020-04-12T02:08:58.1464509Z   [dochtml]       import sage.matrix.args
2020-04-12T02:08:58.1464772Z   [dochtml]     File "sage/matrix/args.pyx", line 23, in init sage.matrix.args (build/cythonized/sage/matrix/args.c:21218)
2020-04-12T02:08:58.1465941Z   [dochtml]     File "/sage/local/lib/python3.7/site-packages/sage/matrix/matrix_space.py", line 46, in <module>
2020-04-12T02:08:58.1466144Z   [dochtml]       from . import matrix_modn_sparse
2020-04-12T02:08:58.1466332Z   [dochtml]     File "sage/matrix/matrix_integer_sparse.pxd", line 5, in init sage.matrix.matrix_modn_sparse (build/cythonized/sage/matrix/matrix_modn_sparse.cpp:16354)
2020-04-12T02:08:58.1466622Z   [dochtml]     File "sage/matrix/matrix_integer_dense.pxd", line 10, in init sage.matrix.matrix_integer_sparse (build/cythonized/sage/matrix/matrix_integer_sparse.cpp:15984)
2020-04-12T02:08:58.1466816Z   [dochtml]     File "sage/matrix/matrix_mod2_dense.pxd", line 4, in init sage.matrix.matrix_integer_dense (build/cythonized/sage/matrix/matrix_integer_dense.c:56567)
2020-04-12T02:08:58.1467021Z   [dochtml]   ImportError: libfontconfig.so.1: cannot open shared object file: No such file or directory
2020-04-12T02:08:58.1467177Z   [dochtml] Full log file: logs/dochtml.log
2020-04-12T02:08:58.1467530Z Makefile:1992: recipe for target 'doc-html' failed
```



---

Comment by dimpase created at 2020-04-12 15:37:30

Changing status from needs_review to needs_work.


---

Comment by dimpase created at 2020-04-12 15:39:48

I guess `fontconfig` package has to be added to pre-reqs?


---

Comment by dimpase created at 2020-04-12 15:40:40

but it's worrying that the error was not detected, probably because no "package" was reported to have failed.


---

Comment by mkoeppe created at 2020-04-12 15:51:19

Replying to [comment:15 dimpase]:
> but it's worrying that the error was not detected, probably because no "package" was reported to have failed.
Yes, this due to work in progress in #29417


---

Comment by git created at 2020-04-17 19:07:35

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2020-04-17 19:16:19

Changing status from needs_work to needs_review.


---

Comment by dimpase created at 2020-04-19 03:14:04

looks good to me - apart from slackware-minimal builds running out of time, but this is for another ticket.


---

Comment by dimpase created at 2020-04-19 03:14:04

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2020-04-19 03:15:44

Thanks!


---

Comment by vbraun created at 2020-04-22 20:52:35

Resolution: fixed
