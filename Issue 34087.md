# Issue 34087: Fix deprecated import of instancedoc

Issue created by migration from https://trac.sagemath.org/ticket/34324

Original creator: mkoeppe

Original creation time: 2022-08-09 17:02:38

CC:  klee tscrim

(from #30787#comment:109)


---

Comment by klee created at 2022-08-10 02:26:57

Changing status from new to needs_review.


---

Comment by klee created at 2022-08-10 02:26:57

New commits:


---

Comment by klee created at 2022-08-10 02:39:03

The problem was that in the namespace of `sage.docs.instancedoc`, there was no name `instancedoc` since it was to be created when first used (as it was `lazy_import`-ed) and not used yet.

My branch just provides an easy solution.

I changed the file to a python file too. When I did this, the old cython `.so` file was not removed automatically. So sage kept loading the module from the old cython file, and spitting errors. I manually deleted the old files ('.so' and '.c' files). Perhaps this is a pitfall of the editable install?


---

Comment by mkoeppe created at 2022-08-10 03:19:54

Replying to [comment:3 klee]:
> I changed the file to a python file too. When I did this, the old cython `.so` file was not removed automatically. So sage kept loading the module from the old cython file, and spitting errors. I manually deleted the old files ('.so' and '.c' files). Perhaps this is a pitfall of the editable install?

Yes, looks like an interesting failure mode. In the non-editable build, this is taken care of by the "install cleaner". To do so in the editable build is an item in #31406 already


---

Comment by mkoeppe created at 2022-08-10 17:29:53

Changing status from needs_review to positive_review.


---

Comment by klee created at 2022-08-11 01:14:07

Replying to [comment:4 mkoeppe]:
> Replying to [comment:3 klee]:
> In the non-editable build, this is taken care of by the "install cleaner". To do so in the editable build is an item in #31406 already

I see. I am getting used to the editable build. It is nice to see the C file beside a Cython file.

Thank you.


---

Comment by vbraun created at 2022-08-29 11:24:25

Resolution: fixed
