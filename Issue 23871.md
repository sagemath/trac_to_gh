# Issue 23871: quadratic_form_from_invariants()

Issue created by migration from https://trac.sagemath.org/ticket/24108

Original creator: annahaensch

Original creation time: 2017-10-25 21:05:40

CC:  mroy sbrudzin jduque

Keywords: sd90

This is algorithm 3.4.3 from Markus Kirschmer's "Definite quadratic and hermitian forms with small class number"  It returns a global quadratic form corresponding to a given set of local invariants. 


---

Comment by sbrandhorst created at 2019-10-15 16:30:40

New commits:


---

Comment by sbrandhorst created at 2019-10-15 16:30:40

Changing status from new to needs_review.


---

Comment by tscrim created at 2019-11-08 02:11:28

A few little things:

```diff
-    Let `(a_1,...,a_n)` be the gram marix of a regular quadratic space.
+    Let `(a_1, \ldots, a_n)` be the gram marix of a regular quadratic space.
     Then Cassel's Hasse invariant is defined as
 
     .. MATH::
 
-        \prod_{i<j} (a_i,a_j)
+        \prod_{i<j} (a_i,a_j),
 
     where `(a_i,a_j)` denotes the Hilbert symbol.
```


Should `gram` be capitalized to `Gram`?

`if F!=QQ:` -> `if F is not QQ:`

Error messages should start with a lowercase letter.

The `assert all()` does not need the list comprehension, so you just need

```
assert all((a*d).valuation(p) % 2 == 1 for p in Pprime)
```


Why is a function `QuadraticFormFromInvariants` following class definition CamelCase and not the using `quadratic_form_from_invariants`? It is not constructing a particular class.


---

Comment by sbrandhorst created at 2019-11-08 20:36:18

Replying to [comment:4 tscrim]:
> A few little things:
> Why is a function `QuadraticFormFromInvariants` following class definition CamelCase and not the using `quadratic_form_from_invariants`? It is not constructing a particular class.

I believe that in this way it is easier to discover.
With `QuadraticForm` + autocomplete. 
An alternative would be to access this functionality via
`QuadraticForm` directly?


---

Comment by tscrim created at 2019-11-08 21:33:18

Replying to [comment:5 sbrandhorst]:
> Replying to [comment:4 tscrim]:
> > A few little things:
> > Why is a function `QuadraticFormFromInvariants` following class definition CamelCase and not the using `quadratic_form_from_invariants`? It is not constructing a particular class.
> 
> I believe that in this way it is easier to discover.
> With `QuadraticForm` + autocomplete. 
> An alternative would be to access this functionality via
> `QuadraticForm` directly?

To me, that is not a good enough reason to break convention (in fact, to me and how I normally tell people to find via autocomplete, this would be harder to find because I know it would be a function). The other alternative would be as you said: attach it as either a ``@`staticmethod` or a method to `QuadraticForm`.


---

Comment by sbrandhorst created at 2019-11-08 22:26:38

What I mean is to give the parameters as input to the constructor of the `QuadraticForm` class.
So the syntax would be
`Quadraticform(QQ,invariants=[....])`
or
`Quadraticform(QQ,rk,det,P,signatures)`?
After all we are constructing a single quadratic form from some input?


---

Comment by tscrim created at 2019-11-08 22:29:25

Replying to [comment:7 sbrandhorst]:
> What I mean is to give the parameters as input to the constructor of the `QuadraticForm` class.
> So the syntax would be
> `Quadraticform(QQ,invariants=[....])`
> or
> `Quadraticform(QQ,rk,det,P,signatures)`?
> After all we are constructing a single quadratic form from some input?

Either one of those options would be much better IMO. It also means there is precisely one place in the documentation and code that people should go-to/use.


---

Comment by git created at 2019-11-10 20:33:23

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by sbrandhorst created at 2019-11-10 20:33:56

I did it as `quadratic_form_from_invariants`.
----
New commits:


---

Comment by tscrim created at 2019-11-10 21:34:46

Thank you. One last thing:

```
-    ALGORITHM::
+    ALGORITHM:
 
-        We follow [Kir2016]_.
+    We follow [Kir2016]_.
```

Once done, you can set a positive review on my behalf.


---

Comment by git created at 2019-11-11 08:01:07

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by sbrandhorst created at 2019-11-11 08:01:44

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2019-11-16 20:15:56

Resolution: fixed
