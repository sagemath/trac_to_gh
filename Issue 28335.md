# Issue 28335: conversion of quotient rings to macaulay2

archive/issues_028335.json:
```json
{
    "body": "CC:  @dimpase @mwageringel @antonleykin\n\nKeywords: IMA Coding Sprint, macaulay2, interfaces\n\nCurrently, conversion of quotient rings to M2 is not supported; we add this functionality:\n\n```\nsage: R.<x,y> = PolynomialRing(QQ)\nsage: I = R.ideal([x^2 - y])\nsage: macaulay2(R.quotient_ring(I))\n```\n\n\nThis also improves the conversion of ideals by moving the `MPolynomialIdeal_macaulay2_repr._macaulay2_` to `Ideal_generic._macaulay2_init_`; for example, the following now work but didn't before (see the doctests for examples):\n- ideals in univariate polynomial rings\n\n```\nsage: R.<x> = PolynomialRing(ZZ)\nsage: macaulay2(R.ideal(x^2))\n```\n\n- ideals in PIDs\n\n```\nsage: macaulay2(ideal(5))\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/28572\n\n",
    "created_at": "2019-10-07T17:19:43Z",
    "labels": [
        "component: interfaces: optional"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.0",
    "title": "conversion of quotient rings to macaulay2",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28335",
    "user": "https://github.com/saliola"
}
```
CC:  @dimpase @mwageringel @antonleykin

Keywords: IMA Coding Sprint, macaulay2, interfaces

Currently, conversion of quotient rings to M2 is not supported; we add this functionality:

```
sage: R.<x,y> = PolynomialRing(QQ)
sage: I = R.ideal([x^2 - y])
sage: macaulay2(R.quotient_ring(I))
```


This also improves the conversion of ideals by moving the `MPolynomialIdeal_macaulay2_repr._macaulay2_` to `Ideal_generic._macaulay2_init_`; for example, the following now work but didn't before (see the doctests for examples):
- ideals in univariate polynomial rings

```
sage: R.<x> = PolynomialRing(ZZ)
sage: macaulay2(R.ideal(x^2))
```

- ideals in PIDs

```
sage: macaulay2(ideal(5))
```


Issue created by migration from https://trac.sagemath.org/ticket/28572





---

archive/issue_comments_399742.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-10-07T17:23:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28335#issuecomment-399742",
    "user": "https://github.com/saliola"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_399743.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-07T19:34:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28335#issuecomment-399743",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_399744.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-07T20:02:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28335#issuecomment-399744",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_399745.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-07T20:20:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28335#issuecomment-399745",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_399746.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-07T21:01:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28335#issuecomment-399746",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_399747.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-07T22:29:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28335#issuecomment-399747",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_399748.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-07T22:31:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28335#issuecomment-399748",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_399749.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-08T00:25:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28335#issuecomment-399749",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_399750.json:
```json
{
    "body": "The following does not work yet (not even with #28574):\n\n```\nsage: R = QQ['x,y'].quotient('x^2-y')['z,t']\nsage: f = R.base_ring()('x')^2 - R('z^2')\nsage: macaulay2(f)  # fails\n```\n\nThis fails because the variable names in the quotient ring are named `xbar,ybar` in Sage, but `x,y` in Macaulay2. The conversion routine for polynomials does not currently take this into account when the base ring is a quotient ring.\n\nOther than that, everything looks good to me up until here.",
    "created_at": "2019-10-08T01:46:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28335#issuecomment-399750",
    "user": "https://github.com/mwageringel"
}
```

The following does not work yet (not even with #28574):

```
sage: R = QQ['x,y'].quotient('x^2-y')['z,t']
sage: f = R.base_ring()('x')^2 - R('z^2')
sage: macaulay2(f)  # fails
```

This fails because the variable names in the quotient ring are named `xbar,ybar` in Sage, but `x,y` in Macaulay2. The conversion routine for polynomials does not currently take this into account when the base ring is a quotient ring.

Other than that, everything looks good to me up until here.



---

archive/issue_comments_399751.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-10T16:22:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28335#issuecomment-399751",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_399752.json:
```json
{
    "body": "I added a dependency to #28567 because this did not merge cleanly on top of it (and I merged it into this branch).",
    "created_at": "2019-10-10T16:26:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28335#issuecomment-399752",
    "user": "https://github.com/saliola"
}
```

I added a dependency to #28567 because this did not merge cleanly on top of it (and I merged it into this branch).



---

archive/issue_comments_399753.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-10-10T19:07:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28335#issuecomment-399753",
    "user": "https://github.com/mwageringel"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_399754.json:
```json
{
    "body": "Ok.",
    "created_at": "2019-10-10T19:07:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28335#issuecomment-399754",
    "user": "https://github.com/mwageringel"
}
```

Ok.



---

archive/issue_comments_399755.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2019-10-15T22:45:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28335#issuecomment-399755",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_399756.json:
```json
{
    "body": "Merge conflict (please merge in next beta)",
    "created_at": "2019-10-15T22:45:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28335#issuecomment-399756",
    "user": "https://github.com/vbraun"
}
```

Merge conflict (please merge in next beta)



---

archive/issue_comments_399757.json:
```json
{
    "body": "rebased on top of the branch of #28591\n----\nLast 10 new commits:",
    "created_at": "2019-10-22T21:34:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28335#issuecomment-399757",
    "user": "https://github.com/dimpase"
}
```

rebased on top of the branch of #28591
----
Last 10 new commits:



---

archive/issue_comments_399758.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2019-10-22T21:34:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28335#issuecomment-399758",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_events_071715.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-10-29T23:41:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28335",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28335#event-71715"
}
```



---

archive/issue_comments_399759.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-10-29T23:41:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28335#issuecomment-399759",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
