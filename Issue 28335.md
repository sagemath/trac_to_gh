# Issue 28335: conversion of quotient rings to macaulay2

archive/issues_028335.json:
```json
{
    "body": "CC:  dimpase @mwageringel @antonleykin\n\nKeywords: IMA Coding Sprint, macaulay2, interfaces\n\nCurrently, conversion of quotient rings to M2 is not supported; we add this functionality:\n\n```\nsage: R.<x,y> = PolynomialRing(QQ)\nsage: I = R.ideal([x^2 - y])\nsage: macaulay2(R.quotient_ring(I))\n```\n\n\nThis also improves the conversion of ideals by moving the `MPolynomialIdeal_macaulay2_repr._macaulay2_` to `Ideal_generic._macaulay2_init_`; for example, the following now work but didn't before (see the doctests for examples):\n- ideals in univariate polynomial rings\n\n```\nsage: R.<x> = PolynomialRing(ZZ)\nsage: macaulay2(R.ideal(x^2))\n```\n\n- ideals in PIDs\n\n```\nsage: macaulay2(ideal(5))\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/28572\n\n",
    "created_at": "2019-10-07T17:19:43Z",
    "labels": [
        "interfaces: optional",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.0",
    "title": "conversion of quotient rings to macaulay2",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28335",
    "user": "saliola"
}
```
CC:  dimpase @mwageringel @antonleykin

Keywords: IMA Coding Sprint, macaulay2, interfaces

Currently, conversion of quotient rings to M2 is not supported; we add this functionality:

```
sage: R.<x,y> = PolynomialRing(QQ)
sage: I = R.ideal([x^2 - y])
sage: macaulay2(R.quotient_ring(I))
```


This also improves the conversion of ideals by moving the `MPolynomialIdeal_macaulay2_repr._macaulay2_` to `Ideal_generic._macaulay2_init_`; for example, the following now work but didn't before (see the doctests for examples):
- ideals in univariate polynomial rings

```
sage: R.<x> = PolynomialRing(ZZ)
sage: macaulay2(R.ideal(x^2))
```

- ideals in PIDs

```
sage: macaulay2(ideal(5))
```


Issue created by migration from https://trac.sagemath.org/ticket/28572





---

archive/issue_comments_400182.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-10-07T17:23:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28335#issuecomment-400182",
    "user": "saliola"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_400183.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-07T19:34:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28335#issuecomment-400183",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_400184.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-07T20:02:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28335#issuecomment-400184",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_400185.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-07T20:20:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28335#issuecomment-400185",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_400186.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-07T21:01:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28335#issuecomment-400186",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_400187.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-07T22:29:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28335#issuecomment-400187",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_400188.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-07T22:31:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28335#issuecomment-400188",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_400189.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-08T00:25:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28335#issuecomment-400189",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_400190.json:
```json
{
    "body": "The following does not work yet (not even with #28574):\n\n```\nsage: R = QQ['x,y'].quotient('x^2-y')['z,t']\nsage: f = R.base_ring()('x')^2 - R('z^2')\nsage: macaulay2(f)  # fails\n```\n\nThis fails because the variable names in the quotient ring are named `xbar,ybar` in Sage, but `x,y` in Macaulay2. The conversion routine for polynomials does not currently take this into account when the base ring is a quotient ring.\n\nOther than that, everything looks good to me up until here.",
    "created_at": "2019-10-08T01:46:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28335#issuecomment-400190",
    "user": "@mwageringel"
}
```

The following does not work yet (not even with #28574):

```
sage: R = QQ['x,y'].quotient('x^2-y')['z,t']
sage: f = R.base_ring()('x')^2 - R('z^2')
sage: macaulay2(f)  # fails
```

This fails because the variable names in the quotient ring are named `xbar,ybar` in Sage, but `x,y` in Macaulay2. The conversion routine for polynomials does not currently take this into account when the base ring is a quotient ring.

Other than that, everything looks good to me up until here.



---

archive/issue_comments_400191.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-10T16:22:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28335#issuecomment-400191",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_400192.json:
```json
{
    "body": "I added a dependency to #28567 because this did not merge cleanly on top of it (and I merged it into this branch).",
    "created_at": "2019-10-10T16:26:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28335#issuecomment-400192",
    "user": "saliola"
}
```

I added a dependency to #28567 because this did not merge cleanly on top of it (and I merged it into this branch).



---

archive/issue_comments_400193.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-10-10T19:07:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28335#issuecomment-400193",
    "user": "@mwageringel"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_400194.json:
```json
{
    "body": "Ok.",
    "created_at": "2019-10-10T19:07:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28335#issuecomment-400194",
    "user": "@mwageringel"
}
```

Ok.



---

archive/issue_comments_400195.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2019-10-15T22:45:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28335#issuecomment-400195",
    "user": "vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_400196.json:
```json
{
    "body": "Merge conflict (please merge in next beta)",
    "created_at": "2019-10-15T22:45:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28335#issuecomment-400196",
    "user": "vbraun"
}
```

Merge conflict (please merge in next beta)



---

archive/issue_comments_400197.json:
```json
{
    "body": "rebased on top of the branch of #28591\n----\nLast 10 new commits:",
    "created_at": "2019-10-22T21:34:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28335#issuecomment-400197",
    "user": "dimpase"
}
```

rebased on top of the branch of #28591
----
Last 10 new commits:



---

archive/issue_comments_400198.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2019-10-22T21:34:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28335#issuecomment-400198",
    "user": "dimpase"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_400199.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-10-29T23:41:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28335#issuecomment-400199",
    "user": "vbraun"
}
```

Resolution: fixed
