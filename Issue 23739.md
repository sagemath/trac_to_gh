# Issue 23739: giacpy_sage causes doctest failures due to threading

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2017-10-06 08:27:35

CC:  frederichan

Sometimes, `giacpy_sage` doctests can run out of memory. This happens on systems with many cores because too many threads are started. Analogous to #23713, the number of threads should be limited by `SAGE_NUM_THREADS`.


---

Comment by frederichan created at 2017-10-06 09:48:55

Set assignee to frederichan.


---

Comment by frederichan created at 2017-10-06 09:48:55

So now the default giacsettings.threads is SAGE_NUM_THREADS or 1 if failed to import.

Some linear algebra tutorial is added in the libgiac doc and a _setitem_ function was  added.


---

Comment by frederichan created at 2017-10-06 11:31:59

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2017-10-06 11:58:35

I planned to fix this in the Sage interface, but I guess your fix also works.


---

Comment by jdemeyer created at 2017-10-07 15:08:44

Changing status from needs_review to needs_info.


---

Comment by jdemeyer created at 2017-10-07 15:08:44

Why are you adding that extra doctest in Sage?


---

Comment by jdemeyer created at 2017-10-07 15:47:49

I tested the new version of `giacpy_sage` and it seems to work fine. So that leaves the question of the extra doctest...


---

Comment by frederichan created at 2017-10-07 17:12:13

Replying to [comment:5 jdemeyer]:
> Why are you adding that extra doctest in Sage?
Indeed, I though that the doctest was increasing the giacsettings.threads by two and was not restoring it back but it was not the case, I will remove this line.


---

Comment by git created at 2017-10-07 17:17:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by frederichan created at 2017-10-07 17:19:53

Changing status from needs_info to needs_review.


---

Comment by jdemeyer created at 2017-10-09 09:52:32

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-10-15 09:22:06

Resolution: fixed
