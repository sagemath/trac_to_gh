# Issue 11924: FIx parallel "make install" in Python

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2011-11-29 10:11:57

Assignee: tbd

The python spkg should not use "parallel install".  This is *claimed* to be fixed in the spkg, but it actually isn't.


---

Comment by jdemeyer created at 2011-11-29 10:12:16

Changing keywords from "" to "python spkg".


---

Comment by jdemeyer created at 2011-11-29 10:26:03

Changing priority from blocker to critical.


---

Comment by jdemeyer created at 2011-11-29 13:54:55

Changing type from PLEASE CHANGE to defect.


---

Comment by jdemeyer created at 2011-11-30 13:13:28

Changing status from new to needs_review.


---

Comment by dimpase created at 2011-12-01 04:30:45

I'd like to add a comment that writable permission 0755, instead of 0555, is important for Cygwin port, as it would permit (semi)automatic rebasing of Sage dlls without the need to fiddle with permissions.


---

Comment by fbissey created at 2011-12-02 03:19:28

Darn I'll have to redo my python-2.7.2 spkg against this one. What is the purpose of the braces around the dpkg stuff?


---

Comment by jdemeyer created at 2011-12-02 08:19:16

Replying to [comment:9 fbissey]:
> Darn I'll have to redo my python-2.7.2 spkg against this one.
Yeah, sorry for that...

> What is the purpose of the braces around the dpkg stuff?
To make the redirection work properly.  The following are equivalent:

```
A >/dev/null && B >/dev/null
```


```
{ A && B; } >/dev/null
```

But are *not* equivalent to

```
A && B >/dev/null
```



---

Comment by fbissey created at 2011-12-03 11:16:42

I am looking at the spkg right now. It compiles fine and the patch look good. I have only one minor request about SPKG.txt before setting this to positive review.
From the current SPKG.txt:

```
### Patches

 * cPickle.c.patch, pickle.py.patch: These add support for pickling
   classes with a metaclass via copy_reg. These have been submitted
   upstream: http://bugs.python.org/issue7689
 * locale.py: Work around import failures for locales
 * readline-spacebug.patch: Fix issue where a space is inserted
   after tab completing at the command line. This is merged upstream
   and can be removed as soon as a Python newer than 2.6.4 is used.
 * readline-Itanium-fix.patch: Fix Itanium specific readline
   extension problem.
 * sdist.py.patch: Make sure that sdist copies over the .hg directory.
 * socket.py.patch: Work around an SSL issue.
 * Makefile.pre.in.patch:  Fixes http://bugs.python.org/issue1628484
   This was merged upstream for Python 2.6.6 and 2.7.
 * socketmodule.c Makes sure some things are defined before trying to compile
   them. This was to work around a failure of _socket to build on OpenSolaris.
   see  http://bugs.python.org/issue8852 and Sage trac #9041 and #9022
 * setup.py.multiarch.patch: Library search dir is expanded on Debian
   and derivatives with multiarch (see #11243, #11447).
   This requires 'dpkg-architecture' to be installed on the affected systems.
   (Since the patch origins from Python 2.7, it can certainly be removed
   when we upgrade to that. But the patch then won't apply anymore anyway.)
```

The section about Makefile.pre.in should mention your bit about installing things 0755.


---

Comment by jdemeyer created at 2011-12-03 12:14:12

Diff for the new Python spkg, for review only


---

Attachment

Replying to [comment:11 fbissey]:
> The section about Makefile.pre.in should mention your bit about installing things 0755.

Done.  I know I haven't commited the changes, but will do that after positive_review.


---

Comment by fbissey created at 2011-12-03 17:53:05

Good enough for me. It's all go.


---

Comment by fbissey created at 2011-12-03 17:53:05

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2011-12-05 16:06:16

Resolution: fixed
