# Issue 11924: FIx parallel "make install" in Python

archive/issues_011924.json:
```json
{
    "body": "Assignee: tbd\n\nThe python spkg should not use \"parallel install\".  This is **claimed** to be fixed in the spkg, but it actually isn't.\n\nIssue created by migration from https://trac.sagemath.org/ticket/12096\n\n",
    "created_at": "2011-11-29T10:11:57Z",
    "labels": [
        "packages: standard",
        "blocker",
        "PLEASE CHANGE"
    ],
    "title": "FIx parallel \"make install\" in Python",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11924",
    "user": "jdemeyer"
}
```
Assignee: tbd

The python spkg should not use "parallel install".  This is **claimed** to be fixed in the spkg, but it actually isn't.

Issue created by migration from https://trac.sagemath.org/ticket/12096





---

archive/issue_comments_136817.json:
```json
{
    "body": "Changing keywords from \"\" to \"python spkg\".",
    "created_at": "2011-11-29T10:12:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11924",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11924#issuecomment-136817",
    "user": "jdemeyer"
}
```

Changing keywords from "" to "python spkg".



---

archive/issue_comments_136818.json:
```json
{
    "body": "Changing priority from blocker to critical.",
    "created_at": "2011-11-29T10:26:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11924",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11924#issuecomment-136818",
    "user": "jdemeyer"
}
```

Changing priority from blocker to critical.



---

archive/issue_comments_136819.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2011-11-29T13:54:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11924",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11924#issuecomment-136819",
    "user": "jdemeyer"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_136820.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-11-30T13:13:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11924",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11924#issuecomment-136820",
    "user": "jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_136821.json:
```json
{
    "body": "I'd like to add a comment that writable permission 0755, instead of 0555, is important for Cygwin port, as it would permit (semi)automatic rebasing of Sage dlls without the need to fiddle with permissions.",
    "created_at": "2011-12-01T04:30:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11924",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11924#issuecomment-136821",
    "user": "dimpase"
}
```

I'd like to add a comment that writable permission 0755, instead of 0555, is important for Cygwin port, as it would permit (semi)automatic rebasing of Sage dlls without the need to fiddle with permissions.



---

archive/issue_comments_136822.json:
```json
{
    "body": "Darn I'll have to redo my python-2.7.2 spkg against this one. What is the purpose of the braces around the dpkg stuff?",
    "created_at": "2011-12-02T03:19:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11924",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11924#issuecomment-136822",
    "user": "fbissey"
}
```

Darn I'll have to redo my python-2.7.2 spkg against this one. What is the purpose of the braces around the dpkg stuff?



---

archive/issue_comments_136823.json:
```json
{
    "body": "Replying to [comment:9 fbissey]:\n> Darn I'll have to redo my python-2.7.2 spkg against this one.\nYeah, sorry for that...\n\n> What is the purpose of the braces around the dpkg stuff?\nTo make the redirection work properly.  The following are equivalent:\n\n```\nA >/dev/null && B >/dev/null\n```\n\n\n```\n{ A && B; } >/dev/null\n```\n\nBut are **not** equivalent to\n\n```\nA && B >/dev/null\n```\n",
    "created_at": "2011-12-02T08:19:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11924",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11924#issuecomment-136823",
    "user": "jdemeyer"
}
```

Replying to [comment:9 fbissey]:
> Darn I'll have to redo my python-2.7.2 spkg against this one.
Yeah, sorry for that...

> What is the purpose of the braces around the dpkg stuff?
To make the redirection work properly.  The following are equivalent:

```
A >/dev/null && B >/dev/null
```


```
{ A && B; } >/dev/null
```

But are **not** equivalent to

```
A && B >/dev/null
```




---

archive/issue_comments_136824.json:
```json
{
    "body": "I am looking at the spkg right now. It compiles fine and the patch look good. I have only one minor request about SPKG.txt before setting this to positive review.\nFrom the current SPKG.txt:\n\n```\n### Patches\n\n * cPickle.c.patch, pickle.py.patch: These add support for pickling\n   classes with a metaclass via copy_reg. These have been submitted\n   upstream: http://bugs.python.org/issue7689\n * locale.py: Work around import failures for locales\n * readline-spacebug.patch: Fix issue where a space is inserted\n   after tab completing at the command line. This is merged upstream\n   and can be removed as soon as a Python newer than 2.6.4 is used.\n * readline-Itanium-fix.patch: Fix Itanium specific readline\n   extension problem.\n * sdist.py.patch: Make sure that sdist copies over the .hg directory.\n * socket.py.patch: Work around an SSL issue.\n * Makefile.pre.in.patch:  Fixes http://bugs.python.org/issue1628484\n   This was merged upstream for Python 2.6.6 and 2.7.\n * socketmodule.c Makes sure some things are defined before trying to compile\n   them. This was to work around a failure of _socket to build on OpenSolaris.\n   see  http://bugs.python.org/issue8852 and Sage trac #9041 and #9022\n * setup.py.multiarch.patch: Library search dir is expanded on Debian\n   and derivatives with multiarch (see #11243, #11447).\n   This requires 'dpkg-architecture' to be installed on the affected systems.\n   (Since the patch origins from Python 2.7, it can certainly be removed\n   when we upgrade to that. But the patch then won't apply anymore anyway.)\n```\n\nThe section about Makefile.pre.in should mention your bit about installing things 0755.",
    "created_at": "2011-12-03T11:16:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11924",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11924#issuecomment-136824",
    "user": "fbissey"
}
```

I am looking at the spkg right now. It compiles fine and the patch look good. I have only one minor request about SPKG.txt before setting this to positive review.
From the current SPKG.txt:

```
### Patches

 * cPickle.c.patch, pickle.py.patch: These add support for pickling
   classes with a metaclass via copy_reg. These have been submitted
   upstream: http://bugs.python.org/issue7689
 * locale.py: Work around import failures for locales
 * readline-spacebug.patch: Fix issue where a space is inserted
   after tab completing at the command line. This is merged upstream
   and can be removed as soon as a Python newer than 2.6.4 is used.
 * readline-Itanium-fix.patch: Fix Itanium specific readline
   extension problem.
 * sdist.py.patch: Make sure that sdist copies over the .hg directory.
 * socket.py.patch: Work around an SSL issue.
 * Makefile.pre.in.patch:  Fixes http://bugs.python.org/issue1628484
   This was merged upstream for Python 2.6.6 and 2.7.
 * socketmodule.c Makes sure some things are defined before trying to compile
   them. This was to work around a failure of _socket to build on OpenSolaris.
   see  http://bugs.python.org/issue8852 and Sage trac #9041 and #9022
 * setup.py.multiarch.patch: Library search dir is expanded on Debian
   and derivatives with multiarch (see #11243, #11447).
   This requires 'dpkg-architecture' to be installed on the affected systems.
   (Since the patch origins from Python 2.7, it can certainly be removed
   when we upgrade to that. But the patch then won't apply anymore anyway.)
```

The section about Makefile.pre.in should mention your bit about installing things 0755.



---

archive/issue_comments_136825.json:
```json
{
    "body": "Diff for the new Python spkg, for review only",
    "created_at": "2011-12-03T12:14:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11924",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11924#issuecomment-136825",
    "user": "jdemeyer"
}
```

Diff for the new Python spkg, for review only



---

archive/issue_comments_136826.json:
```json
{
    "body": "Attachment [python-2.6.4.p11-p12.diff](tarball://root/attachments/some-uuid/ticket12096/python-2.6.4.p11-p12.diff) by jdemeyer created at 2011-12-03 12:20:12\n\nReplying to [comment:11 fbissey]:\n> The section about Makefile.pre.in should mention your bit about installing things 0755.\n\nDone.  I know I haven't commited the changes, but will do that after positive_review.",
    "created_at": "2011-12-03T12:20:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11924",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11924#issuecomment-136826",
    "user": "jdemeyer"
}
```

Attachment [python-2.6.4.p11-p12.diff](tarball://root/attachments/some-uuid/ticket12096/python-2.6.4.p11-p12.diff) by jdemeyer created at 2011-12-03 12:20:12

Replying to [comment:11 fbissey]:
> The section about Makefile.pre.in should mention your bit about installing things 0755.

Done.  I know I haven't commited the changes, but will do that after positive_review.



---

archive/issue_comments_136827.json:
```json
{
    "body": "Good enough for me. It's all go.",
    "created_at": "2011-12-03T17:53:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11924",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11924#issuecomment-136827",
    "user": "fbissey"
}
```

Good enough for me. It's all go.



---

archive/issue_comments_136828.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-12-03T17:53:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11924",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11924#issuecomment-136828",
    "user": "fbissey"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_136829.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-12-05T16:06:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11924",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11924#issuecomment-136829",
    "user": "jdemeyer"
}
```

Resolution: fixed
