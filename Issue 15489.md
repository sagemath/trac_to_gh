# Issue 15489: Implement tensor modules and algebras

archive/issues_015489.json:
```json
{
    "body": "Assignee: sage-combinat\n\nCC:  sage-combinat @nthiery mshimo\n\nKeywords: tensor module algebra\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/15726\n\n",
    "created_at": "2014-01-24T16:39:29Z",
    "labels": [
        "algebra",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.4",
    "title": "Implement tensor modules and algebras",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15489",
    "user": "@tscrim"
}
```
Assignee: sage-combinat

CC:  sage-combinat @nthiery mshimo

Keywords: tensor module algebra



Issue created by migration from https://trac.sagemath.org/ticket/15726





---

archive/issue_comments_200096.json:
```json
{
    "body": "Last 10 new commits:",
    "created_at": "2014-02-08T17:39:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200096",
    "user": "@tscrim"
}
```

Last 10 new commits:



---

archive/issue_comments_200097.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-02-08T17:39:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200097",
    "user": "@tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_200098.json:
```json
{
    "body": "Hi Travis!\n\nThanks for your work on free monoids and algebras; those features have been waiting around for too long! I glanced through the code, and here are some random thoughts that came to my mind:\n\n- Rather than importing `IndexedFreeMonoid` in the global namespace,\n  it would be preferable to have `FreeMonoid(...)` construct an\n  `IndexedFreeMonoid` when given appropriate arguments (and same\n  things for its friends). Let's avoid the bad route we took with\n  `CombinatorialFreeModule` and have at once a single entry point for\n  free monoids! As an immediate side effect, the current code for\n  the `FreeAlgebra` might well make it almost immediately work for any\n  index set.\n\n- Mathematically speaking, the free algebra indexed by I is\n  (isomorphic to) the algebra of the free monoid indexed by I is\n  (isomorphic to) the tensor algebra of the free module indexed by I. So we now have three implementations of the free algebra!\n\n  I'd rather only have a single implementation, typically in\n  `FreeAlgebra(K, I)`, with `FreeMonoid(I).algebra(K)`\n  pointing to it.\n\n  `FreeAlgebra(K, I)` should by the way be in the category\n  Monoids().Algebras(K) which could allow for reusing some generic\n  code.\n\n  `TensorAlgebra(V)` could then also point to `FreeAlgebra(K, I)`.\n  Possibly with some customization (e.g. printing using tensor symbol).\n\n  By the way, with the name `TensorAlgebra`, the user would probably\n  expect to write the product using tensor rather than *. Actually I\n  am not yet sure we actually want at this point to have\n  `TensorAlgebra` with multiplicative notation.\n\n  Altogether, since `TensorAlgebra` does not bring a feature set\n  really different from `FreeAlgebra`, I'd rather leave it name alone\n  for now until we have a better view on how we want to handle\n  tensor/symmetric/exterior modules.\n\n- It could be preferable to have `TensorModule` be a functorial\n  construction, parallel to that for tensor products, and if\n  possible sharing as much code as possible with it.\n\n- On a similar footing, the code for _repr_, _latex_, ... in\n  `TensorModule` is duplicated from\n  `CombinatorialFreeModule_Tensor`.  Can we avoid that?\n\n- `IndexedFreeAbelianGroup`: do we want to write them additively or\n  multiplicatively? In the later case, code could be shared with\n  `CombinatorialFreeModule`.\n\n- `TensorModule.algebra`: this definition of .algebra is incompatible\n  with the functorial construction with the same name\n  (`I.algebra()` builds an algebra whose basis is indexed by\n  I). Do we really need this method?\n\n- `is_finite` methods for `Free...Monoid`: this would be\n  best achieved by setting the category appropriately.\n\n- `IndexedMonoidElement`: Describe the data structure\n\n- The doctests of __init__ actually constructs an\n  `IndexedFreeAbelianMonoid`. Is this on purpose?\n\n- `_mul_(self, y)` -> `_mul_(self, other)`\n\n- What is the semantic of comparisons (__lt__, ...)? Do we really\n  need those comparisons?\n\n- __pow__: Can't we use a generic implementation?\n\n- IndexedMonoid.__contains__ seems generic enough to be lifted\n  higher up in the class hierarchy\n\n- _an_element_: rather do the product of the first three elements\n  (if available), similar to what's done in\n  CombinatorialFreeModule.an_element. This is less demanding on the\n  index set (computing the cardinality may be expensive/not\n  implemented)\n\n- gens: using `PoorManMap` in `CombinatorialFreeModule.monomial`\n  is relevant to make it easy to allow for the short idiom:\n  `M.module_morphism(M.monomial*...)`. Do we need it here?\n\n- gens: define instead monoid_generators. gens defers by default to\n  monoid_generators in the monoids category (at least with #10963).\n\n- ngens: kill the beast. `self.gens().cardinality()` is a better\n  idiom. If we really want a shortcut, it should live in a more\n  generic setting.",
    "created_at": "2014-02-10T10:56:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200098",
    "user": "@nthiery"
}
```

Hi Travis!

Thanks for your work on free monoids and algebras; those features have been waiting around for too long! I glanced through the code, and here are some random thoughts that came to my mind:

- Rather than importing `IndexedFreeMonoid` in the global namespace,
  it would be preferable to have `FreeMonoid(...)` construct an
  `IndexedFreeMonoid` when given appropriate arguments (and same
  things for its friends). Let's avoid the bad route we took with
  `CombinatorialFreeModule` and have at once a single entry point for
  free monoids! As an immediate side effect, the current code for
  the `FreeAlgebra` might well make it almost immediately work for any
  index set.

- Mathematically speaking, the free algebra indexed by I is
  (isomorphic to) the algebra of the free monoid indexed by I is
  (isomorphic to) the tensor algebra of the free module indexed by I. So we now have three implementations of the free algebra!

  I'd rather only have a single implementation, typically in
  `FreeAlgebra(K, I)`, with `FreeMonoid(I).algebra(K)`
  pointing to it.

  `FreeAlgebra(K, I)` should by the way be in the category
  Monoids().Algebras(K) which could allow for reusing some generic
  code.

  `TensorAlgebra(V)` could then also point to `FreeAlgebra(K, I)`.
  Possibly with some customization (e.g. printing using tensor symbol).

  By the way, with the name `TensorAlgebra`, the user would probably
  expect to write the product using tensor rather than *. Actually I
  am not yet sure we actually want at this point to have
  `TensorAlgebra` with multiplicative notation.

  Altogether, since `TensorAlgebra` does not bring a feature set
  really different from `FreeAlgebra`, I'd rather leave it name alone
  for now until we have a better view on how we want to handle
  tensor/symmetric/exterior modules.

- It could be preferable to have `TensorModule` be a functorial
  construction, parallel to that for tensor products, and if
  possible sharing as much code as possible with it.

- On a similar footing, the code for _repr_, _latex_, ... in
  `TensorModule` is duplicated from
  `CombinatorialFreeModule_Tensor`.  Can we avoid that?

- `IndexedFreeAbelianGroup`: do we want to write them additively or
  multiplicatively? In the later case, code could be shared with
  `CombinatorialFreeModule`.

- `TensorModule.algebra`: this definition of .algebra is incompatible
  with the functorial construction with the same name
  (`I.algebra()` builds an algebra whose basis is indexed by
  I). Do we really need this method?

- `is_finite` methods for `Free...Monoid`: this would be
  best achieved by setting the category appropriately.

- `IndexedMonoidElement`: Describe the data structure

- The doctests of __init__ actually constructs an
  `IndexedFreeAbelianMonoid`. Is this on purpose?

- `_mul_(self, y)` -> `_mul_(self, other)`

- What is the semantic of comparisons (__lt__, ...)? Do we really
  need those comparisons?

- __pow__: Can't we use a generic implementation?

- IndexedMonoid.__contains__ seems generic enough to be lifted
  higher up in the class hierarchy

- _an_element_: rather do the product of the first three elements
  (if available), similar to what's done in
  CombinatorialFreeModule.an_element. This is less demanding on the
  index set (computing the cardinality may be expensive/not
  implemented)

- gens: using `PoorManMap` in `CombinatorialFreeModule.monomial`
  is relevant to make it easy to allow for the short idiom:
  `M.module_morphism(M.monomial*...)`. Do we need it here?

- gens: define instead monoid_generators. gens defers by default to
  monoid_generators in the monoids category (at least with #10963).

- ngens: kill the beast. `self.gens().cardinality()` is a better
  idiom. If we really want a shortcut, it should live in a more
  generic setting.



---

archive/issue_comments_200099.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-04T18:18:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200099",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_200100.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-03-13T05:35:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200100",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_200101.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-02T01:38:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200101",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_200102.json:
```json
{
    "body": "Is there any connection and/or overlap between this ticket and #15916?",
    "created_at": "2014-04-05T16:07:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200102",
    "user": "@jhpalmieri"
}
```

Is there any connection and/or overlap between this ticket and #15916?



---

archive/issue_comments_200103.json:
```json
{
    "body": "This is for a given basis of the underlying vector space, whereas #15916 is a coordinate free approach (at least, that's how I understand #15916).",
    "created_at": "2014-04-05T16:15:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200103",
    "user": "@tscrim"
}
```

This is for a given basis of the underlying vector space, whereas #15916 is a coordinate free approach (at least, that's how I understand #15916).



---

archive/issue_comments_200104.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-09T01:55:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200104",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_200105.json:
```json
{
    "body": "Replying to [comment:10 tscrim]:\n> This is for a given basis of the underlying vector space, whereas #15916 is a coordinate free approach (at least, that's how I understand #15916).\n\nSee also my reply in ticket:15916#comment:5. Am I correct about the tensor symmetries?",
    "created_at": "2014-04-12T14:24:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200105",
    "user": "@egourgoulhon"
}
```

Replying to [comment:10 tscrim]:
> This is for a given basis of the underlying vector space, whereas #15916 is a coordinate free approach (at least, that's how I understand #15916).

See also my reply in ticket:15916#comment:5. Am I correct about the tensor symmetries?



---

archive/issue_comments_200106.json:
```json
{
    "body": "For this, tensor symmetries are irrelevent since we are constructing the tensor algebra from a single vector space. There is something for tensor products of arbitrary free modules in `combinat/free_module.py`, but because we want a specified/distinguished basis, we can't identify `A \\otimes B` with `B \\otimes A` (as objects in memory).",
    "created_at": "2014-04-12T14:49:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200106",
    "user": "@tscrim"
}
```

For this, tensor symmetries are irrelevent since we are constructing the tensor algebra from a single vector space. There is something for tensor products of arbitrary free modules in `combinat/free_module.py`, but because we want a specified/distinguished basis, we can't identify `A \otimes B` with `B \otimes A` (as objects in memory).



---

archive/issue_comments_200107.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-15T02:24:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200107",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_200108.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-25T06:53:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200108",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_200109.json:
```json
{
    "body": "I've removed `TensorModule` and just made it into `TensorAlgebra` since we always have a natural algebra structure. I've also made some fixes based upon the changes in #15289.\n\nThere is one feature that `TensorAlgebra` has different from `FreeAlgebra`, and that is handling coercions from finite tensor products of modules (which all coerce into the base module of `TensorAlgebra`). `TensorAlgebra` also has the Hopf algebra structure defined on it.\n\nHowever they probably should be some subclassing of `FreeAlgebra` and/or `CombinatorialFreeModule_Tensor`. I haven't made it a functorial construction yet. Also `tensor` should not be the multiplication of two tensor algebra elements, but instead return the element in the tensor product of tensor algebras (this is not isomorphic to the tensor algebra since `(1 # b) * (c # 1) = (c # 1) * (1 # b)` where `b,c` are any elements the tensor algebra). So there is still room for improvement.",
    "created_at": "2014-07-25T07:14:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200109",
    "user": "@tscrim"
}
```

I've removed `TensorModule` and just made it into `TensorAlgebra` since we always have a natural algebra structure. I've also made some fixes based upon the changes in #15289.

There is one feature that `TensorAlgebra` has different from `FreeAlgebra`, and that is handling coercions from finite tensor products of modules (which all coerce into the base module of `TensorAlgebra`). `TensorAlgebra` also has the Hopf algebra structure defined on it.

However they probably should be some subclassing of `FreeAlgebra` and/or `CombinatorialFreeModule_Tensor`. I haven't made it a functorial construction yet. Also `tensor` should not be the multiplication of two tensor algebra elements, but instead return the element in the tensor product of tensor algebras (this is not isomorphic to the tensor algebra since `(1 # b) * (c # 1) = (c # 1) * (1 # b)` where `b,c` are any elements the tensor algebra). So there is still room for improvement.



---

archive/issue_comments_200110.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-11-23T03:10:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200110",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_200111.json:
```json
{
    "body": "I've rebased this and added the construction functor. From doing some reading (on wikipedia), the tensor algebra is a different construction than the free algebra, as this is a functor from modules to algebras, whereas the free algebra is a functor from sets to algebras (well...should be as the `construction()` and the corresponding functor currently isn't implemented).\n\nFTR, I felt that it was better to not put `TensorAlgebraFunctor` as `TensorAlgebra` in the global namespace (instead injecting the class `TensorAlgebra`) because we would have syntax like `TensorAlgebra(M.base_ring())(M)`. Plus having it accessible via `construction()` seems to be what we currently do in Sage.",
    "created_at": "2014-11-23T03:22:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200111",
    "user": "@tscrim"
}
```

I've rebased this and added the construction functor. From doing some reading (on wikipedia), the tensor algebra is a different construction than the free algebra, as this is a functor from modules to algebras, whereas the free algebra is a functor from sets to algebras (well...should be as the `construction()` and the corresponding functor currently isn't implemented).

FTR, I felt that it was better to not put `TensorAlgebraFunctor` as `TensorAlgebra` in the global namespace (instead injecting the class `TensorAlgebra`) because we would have syntax like `TensorAlgebra(M.base_ring())(M)`. Plus having it accessible via `construction()` seems to be what we currently do in Sage.



---

archive/issue_comments_200112.json:
```json
{
    "body": "does not apply, needs rebase",
    "created_at": "2015-08-07T06:42:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200112",
    "user": "@fchapoton"
}
```

does not apply, needs rebase



---

archive/issue_comments_200113.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-08-07T06:42:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200113",
    "user": "@fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_200114.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-08-07T16:32:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200114",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_200115.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-08-07T16:33:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200115",
    "user": "@tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_200116.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-08-07T17:49:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200116",
    "user": "@fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_200117.json:
```json
{
    "body": "two failing doctests",
    "created_at": "2015-08-07T17:49:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200117",
    "user": "@fchapoton"
}
```

two failing doctests



---

archive/issue_comments_200118.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-08-07T23:20:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200118",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_200119.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-08-07T23:20:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200119",
    "user": "@tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_200120.json:
```json
{
    "body": "Fixed. The location of the `ascii_art` moved.",
    "created_at": "2015-08-07T23:20:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200120",
    "user": "@tscrim"
}
```

Fixed. The location of the `ascii_art` moved.



---

archive/issue_comments_200121.json:
```json
{
    "body": "some failing doctests",
    "created_at": "2015-10-14T16:58:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200121",
    "user": "@fchapoton"
}
```

some failing doctests



---

archive/issue_comments_200122.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-10-14T16:58:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200122",
    "user": "@fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_200123.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-10-15T14:35:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200123",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_200124.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-10-15T14:36:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200124",
    "user": "@tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_200125.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-02-28T08:13:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200125",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_200126.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-05-31T19:03:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200126",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_200127.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-09-01T22:17:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200127",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_200128.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-09-01T22:18:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200128",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_200129.json:
```json
{
    "body": "I've just push a review commit. Couldn't check the doctests yet (Sage is still compiling), but if anything's wrong I suspect a syntax error in my doctests. If the tests pass and you're fine with the changes, this is a positive review!",
    "created_at": "2016-09-01T22:18:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200129",
    "user": "@darijgr"
}
```

I've just push a review commit. Couldn't check the doctests yet (Sage is still compiling), but if anything's wrong I suspect a syntax error in my doctests. If the tests pass and you're fine with the changes, this is a positive review!



---

archive/issue_comments_200130.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-09-02T04:06:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200130",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_200131.json:
```json
{
    "body": "OK, that was quite a few failing doctests, mostly just me being careless. Fixed... with one big exception: almost none of the coercion doctests work! Most strikingly, this here:\n\n```\n            sage: C = CombinatorialFreeModule(ZZ, Set([1,2]))\n            sage: TAC = TensorAlgebra(C)\n            sage: c = C.monomial(2)\n            sage: TAC(c)\n```\n\nblows up! I don't understand coercion well enough to fix this; this probably needs you, Travis.\n\nThat said, some of my coercion doctests might be expecting too much.",
    "created_at": "2016-09-02T04:08:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200131",
    "user": "@darijgr"
}
```

OK, that was quite a few failing doctests, mostly just me being careless. Fixed... with one big exception: almost none of the coercion doctests work! Most strikingly, this here:

```
            sage: C = CombinatorialFreeModule(ZZ, Set([1,2]))
            sage: TAC = TensorAlgebra(C)
            sage: c = C.monomial(2)
            sage: TAC(c)
```

blows up! I don't understand coercion well enough to fix this; this probably needs you, Travis.

That said, some of my coercion doctests might be expecting too much.



---

archive/issue_comments_200132.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-09-02T23:15:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200132",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_200133.json:
```json
{
    "body": "I've fixed the issues. The first is that the indexed (free) monoid was not handling creating its elements properly when given a list (well, a finite enumerated set by the time it gets through the `__classcall__`). The second is #21405. I've elected to simply remove those tests for now since it is not a bug per se and the issues are independent.",
    "created_at": "2016-09-02T23:17:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200133",
    "user": "@tscrim"
}
```

I've fixed the issues. The first is that the indexed (free) monoid was not handling creating its elements properly when given a list (well, a finite enumerated set by the time it gets through the `__classcall__`). The second is #21405. I've elected to simply remove those tests for now since it is not a bug per se and the issues are independent.



---

archive/issue_comments_200134.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-09-03T04:24:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200134",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_200135.json:
```json
{
    "body": "Thanks, this was a good edit.\n\nBut now that #21405 is as good as reviewed, I've put the doctests back (slightly corrected). They work!",
    "created_at": "2016-09-03T04:25:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200135",
    "user": "@darijgr"
}
```

Thanks, this was a good edit.

But now that #21405 is as good as reviewed, I've put the doctests back (slightly corrected). They work!



---

archive/issue_comments_200136.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-09-03T16:11:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200136",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_200137.json:
```json
{
    "body": "The issues brought up on #21405 is precisely why I kept them independent. I've reverted back the addition of #21405.",
    "created_at": "2016-09-03T16:12:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200137",
    "user": "@tscrim"
}
```

The issues brought up on #21405 is precisely why I kept them independent. I've reverted back the addition of #21405.



---

archive/issue_comments_200138.json:
```json
{
    "body": "Thanks -- but is changing the commit back enough, or should we also make a new branch?",
    "created_at": "2016-09-03T16:31:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200138",
    "user": "@darijgr"
}
```

Thanks -- but is changing the commit back enough, or should we also make a new branch?



---

archive/issue_comments_200139.json:
```json
{
    "body": "I set the branch to point back to the old commit, so it is enough.",
    "created_at": "2016-09-03T16:31:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200139",
    "user": "@tscrim"
}
```

I set the branch to point back to the old commit, so it is enough.



---

archive/issue_comments_200140.json:
```json
{
    "body": "Ah, I see. I was distracted by the change to `free_module.py`.",
    "created_at": "2016-09-03T16:33:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200140",
    "user": "@darijgr"
}
```

Ah, I see. I was distracted by the change to `free_module.py`.



---

archive/issue_comments_200141.json:
```json
{
    "body": "EDI:T ignore",
    "created_at": "2016-09-03T16:34:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200141",
    "user": "@darijgr"
}
```

EDI:T ignore



---

archive/issue_comments_200142.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-09-03T16:36:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200142",
    "user": "@darijgr"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_200143.json:
```json
{
    "body": "Thanks for the review.",
    "created_at": "2016-09-03T16:38:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200143",
    "user": "@tscrim"
}
```

Thanks for the review.



---

archive/issue_comments_200144.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-09-04T13:38:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15489",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15489#issuecomment-200144",
    "user": "@vbraun"
}
```

Resolution: fixed
