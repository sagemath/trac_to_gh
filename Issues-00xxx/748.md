# Issue 748: update iml to the 1.0.3 release + our patches

archive/issues_000748.json:
```json
{
    "assignees": [
        "https://github.com/sagetrac-mabshoff"
    ],
    "body": "**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/iml-1.0.3.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/iml-1.0.3.p0.spkg) ([spkg diff](https://github.com/sagemath/sage/files/ticket748/iml-1.0.3.p0.diff.gz))\n\nDepends on #14699\n\nCC:  @jpflori\n\nComponent: **packages: standard**\n\nKeywords: **spkg upgrade iml sd40.5**\n\nAuthor: **Jeroen Demeyer**\n\nReviewer: **Jean-Pierre Flori**\n\nMerged: **sage-5.11.beta2**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/748_\n\n",
    "closed_at": "2013-06-19T12:24:23Z",
    "created_at": "2007-09-24T20:58:43Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.11",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "update iml to the 1.0.3 release + our patches",
    "type": "issue",
    "updated_at": "2014-04-16T16:42:58Z",
    "url": "https://github.com/sagemath/sage/issues/748",
    "user": "https://github.com/williamstein"
}
```
**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/iml-1.0.3.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/iml-1.0.3.p0.spkg) ([spkg diff](https://github.com/sagemath/sage/files/ticket748/iml-1.0.3.p0.diff.gz))

Depends on #14699

CC:  @jpflori

Component: **packages: standard**

Keywords: **spkg upgrade iml sd40.5**

Author: **Jeroen Demeyer**

Reviewer: **Jean-Pierre Flori**

Merged: **sage-5.11.beta2**

_Issue created by migration from https://trac.sagemath.org/ticket/748_





---

archive/issue_events_006916.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2007-09-24T20:58:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "milestone_number": null,
    "milestone_title": "sage-2.8.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/748#event-6916"
}
```



---

archive/issue_events_006917.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2007-09-24T20:58:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "0000b0",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/748#event-6917"
}
```



---

archive/issue_events_006918.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2007-09-24T20:58:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/748#event-6918"
}
```



---

archive/issue_events_006919.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2007-09-24T20:58:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/748#event-6919"
}
```



---

archive/issue_events_006920.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2007-09-24T20:58:43Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "subject": "https://github.com/williamstein",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/748#event-6920"
}
```



---

archive/issue_comments_003084.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nI've reverted the iml package that will be distributed with Sage to version 1.0.1.p6 (from sage-2.8.4)\nuntil this gets resolved.",
    "created_at": "2007-09-25T05:20:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3084",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:1" align="right">comment:1</div>

I've reverted the iml package that will be distributed with Sage to version 1.0.1.p6 (from sage-2.8.4)
until this gets resolved.



---

archive/issue_comments_003085.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThe 1.0.1.p8 version is in sage-2.8.5",
    "created_at": "2007-09-25T05:21:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3085",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:2" align="right">comment:2</div>

The 1.0.1.p8 version is in sage-2.8.5



---

archive/issue_events_006921.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2007-10-04T17:14:44Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "milestone_number": null,
    "milestone_title": "sage-2.8.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/748#event-6921"
}
```



---

archive/issue_events_006922.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2007-10-04T17:14:44Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "milestone_number": null,
    "milestone_title": "sage-2.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/748#event-6922"
}
```



---

archive/issue_events_006923.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2007-10-29T06:01:30Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "title_is": "update iml to the 1.0.2 release + our patches",
    "title_was": "iml autohell",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/748#event-6923"
}
```



---

archive/issue_comments_003086.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nA couple commets:\n\n* Arne merged the nullspace patch and a couple of the other fixes. Some of the other fixes no longer apply\n* spkg-install does odd things, i.e  fall back to non-ATLAS which is no longer needed\n* The SPKG needs some general cleanup\n* on OSX without creating 'repl' the build on the vanilla sources fails\n \nArne is putting together some 1.0.3 release which we can then test in Sage\n\nCheers,\n\nMichael",
    "created_at": "2008-06-15T23:52:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3086",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:5" align="right">comment:5</div>

A couple commets:

* Arne merged the nullspace patch and a couple of the other fixes. Some of the other fixes no longer apply
* spkg-install does odd things, i.e  fall back to non-ATLAS which is no longer needed
* The SPKG needs some general cleanup
* on OSX without creating 'repl' the build on the vanilla sources fails
 
Arne is putting together some 1.0.3 release which we can then test in Sage

Cheers,

Michael



---

archive/issue_events_006924.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2008-06-15T23:52:51Z",
    "event": "unassigned",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "subject": "https://github.com/sagetrac-mabshoff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/748#event-6924"
}
```



---

archive/issue_events_006925.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-06-15T23:52:51Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "subject": "https://github.com/sagetrac-mabshoff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/748#event-6925"
}
```



---

archive/issue_events_006926.json:
```json
{
    "actor": "https://github.com/craigcitro",
    "created_at": "2008-06-20T04:36:37Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "title_is": "[waiting on upstream] update iml to the 1.0.3 release + our patches",
    "title_was": "update iml to the 1.0.2 release + our patches",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/748#event-6926"
}
```



---

archive/issue_comments_003087.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI'm closing this as a duplicate of #9568.",
    "created_at": "2011-09-13T09:30:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3087",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:8" align="right">comment:8</div>

I'm closing this as a duplicate of #9568.



---

archive/issue_events_006927.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-13T09:30:37Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "milestone_number": null,
    "milestone_title": "sage-4.7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/748#event-6927"
}
```



---

archive/issue_events_006928.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-13T09:30:37Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/748#event-6928"
}
```



---

archive/issue_comments_003088.json:
```json
{
    "body": "Changed keywords from none to **spkg upgrade**",
    "created_at": "2011-09-13T09:30:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3088",
    "user": "https://github.com/nexttime"
}
```

Changed keywords from none to **spkg upgrade**



---

archive/issue_events_006929.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-13T09:30:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/748#event-6929"
}
```



---

archive/issue_events_006930.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-13T09:30:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "label": "https://github.com/sagemath/sage/labels/duplicate",
    "label_color": "c6c6c6",
    "label_name": "duplicate",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/748#event-6930"
}
```



---

archive/issue_comments_003089.json:
```json
{
    "body": "Reviewer: **Leif Leonhardy**",
    "created_at": "2011-09-29T02:31:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3089",
    "user": "https://github.com/nexttime"
}
```

Reviewer: **Leif Leonhardy**



---

archive/issue_comments_003090.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nIs it not more sensible for the duplicated ticket to be closed, rather than the original one? That's the way gcc handle it. If you report something that's a duplicate of an older ticket, the newer ticket gets closed - not the older one. \n\n\nDave",
    "created_at": "2012-05-28T05:20:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3090",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:10" align="right">comment:10</div>

Is it not more sensible for the duplicated ticket to be closed, rather than the original one? That's the way gcc handle it. If you report something that's a duplicate of an older ticket, the newer ticket gets closed - not the older one. 


Dave



---

archive/issue_comments_003091.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI guess it depends on which ticket has the most useful comments / patches and the most relevant people CC'd to it. At least #13027 has an SPKG attached. #9568 and this ticket certainly have more useful comments than #13027, though.",
    "created_at": "2012-05-28T05:52:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3091",
    "user": "https://github.com/kini"
}
```

<div id="comment:11" align="right">comment:11</div>

I guess it depends on which ticket has the most useful comments / patches and the most relevant people CC'd to it. At least #13027 has an SPKG attached. #9568 and this ticket certainly have more useful comments than #13027, though.



---

archive/issue_events_006931.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-05-28T05:55:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "label": "https://github.com/sagemath/sage/labels/duplicate",
    "label_color": "c6c6c6",
    "label_name": "duplicate",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/748#event-6931"
}
```



---

archive/issue_comments_003092.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI have no objection to reopening this ticket, anyway. In any case, once someone actually solves the problem, all three will be closed.",
    "created_at": "2012-05-28T05:55:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3092",
    "user": "https://github.com/kini"
}
```

<div id="comment:12" align="right">comment:12</div>

I have no objection to reopening this ticket, anyway. In any case, once someone actually solves the problem, all three will be closed.



---

archive/issue_events_006932.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-05-28T05:55:36Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/748#event-6932"
}
```



---

archive/issue_comments_003093.json:
```json
{
    "body": "Changed reviewer from **Leif Leonhardy** to none",
    "created_at": "2012-05-28T05:55:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3093",
    "user": "https://github.com/kini"
}
```

Changed reviewer from **Leif Leonhardy** to none



---

archive/issue_comments_003094.json:
```json
{
    "body": "Changed keywords from **spkg upgrade** to **spkg upgrade iml**",
    "created_at": "2012-05-28T05:55:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3094",
    "user": "https://github.com/kini"
}
```

Changed keywords from **spkg upgrade** to **spkg upgrade iml**



---

archive/issue_comments_003095.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI have a patch for repl problem in sage-on-gentoo but all the autotool chain needs to be regenerated after you apply it.\n[https://github.com/cschwan/sage-on-gentoo/blob/master/sci-libs/iml/files/iml-1.0.3-repl_removal.patch](https://github.com/cschwan/sage-on-gentoo/blob/master/sci-libs/iml/files/iml-1.0.3-repl_removal.patch)",
    "created_at": "2012-05-28T09:53:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3095",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:13" align="right">comment:13</div>

I have a patch for repl problem in sage-on-gentoo but all the autotool chain needs to be regenerated after you apply it.
[https://github.com/cschwan/sage-on-gentoo/blob/master/sci-libs/iml/files/iml-1.0.3-repl_removal.patch](https://github.com/cschwan/sage-on-gentoo/blob/master/sci-libs/iml/files/iml-1.0.3-repl_removal.patch)



---

archive/issue_comments_003096.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nThanks, that will help. We cannot run autotools at build time, only at packaging time, since we don't have autotools as a dependency of Sage, nor do we package it in Sage. So rather than including your patch I guess I should apply it, run autotools, and then save *that* diff as a patch to apply at build time.\n\nBefore seeing your diff I had solved the repl problem like this:\n\n```diff\ndiff --git a/repl/Makefile.am b/repl/Makefile.am\nindex 4cf001b..7be2e86 100644\n--- a/repl/Makefile.am\n+++ b/repl/Makefile.am\n@@ -1,4 +1,4 @@\n noinst_LTLIBRARIES      = librepl.la\n-librepl_la_SOURCES   =\n+librepl_la_SOURCES   = dummy.c\n librepl_la_LIBADD    = @LTLIBOBJS@\n \ndiff --git a/repl/Makefile.in b/repl/Makefile.in\nindex 5c65bfa..ba963ec 100644\n--- a/repl/Makefile.in\n+++ b/repl/Makefile.in\n@@ -51,7 +51,7 @@ CONFIG_HEADER = $(top_builddir)/config.h\n CONFIG_CLEAN_FILES =\n LTLIBRARIES = $(noinst_LTLIBRARIES)\n librepl_la_DEPENDENCIES = @LTLIBOBJS@\n-am_librepl_la_OBJECTS =\n+am_librepl_la_OBJECTS = dummy.lo\n librepl_la_OBJECTS = $(am_librepl_la_OBJECTS)\n DEFAULT_INCLUDES = -I. -I$(srcdir) -I$(top_builddir)\n depcomp = $(SHELL) $(top_srcdir)/config/depcomp\n@@ -172,7 +172,7 @@ sharedstatedir = @sharedstatedir@\n sysconfdir = @sysconfdir@\n target_alias = @target_alias@\n noinst_LTLIBRARIES = librepl.la\n-librepl_la_SOURCES = \n+librepl_la_SOURCES = dummy.c\n librepl_la_LIBADD = @LTLIBOBJS@\n all: all-am\n \n@@ -226,6 +226,7 @@ distclean-compile:\n \t-rm -f *.tab.c\n \n @AMDEP_TRUE@@am__include@ @am__quote@$(DEPDIR)/realloc.Plo@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/dummy.Plo@am__quote@\n \n .c.o:\n @am__fastdepCC_TRUE@\tif $(COMPILE) -MT $@ -MD -MP -MF \"$(DEPDIR)/$*.Tpo\" -c -o $@ $<; \\\n@@ -367,7 +368,7 @@ clean-am: clean-generic clean-libtool clean-noinstLTLIBRARIES \\\n \tmostlyclean-am\n \n distclean: distclean-am\n-\t-rm -rf $(DEPDIR)\n+\t-rm -rf $(DEPDIR) ./$(DEPDIR)\n \t-rm -f Makefile\n distclean-am: clean-am distclean-compile distclean-generic \\\n \tdistclean-libtool distclean-tags\n@@ -393,7 +394,7 @@ install-man:\n installcheck-am:\n \n maintainer-clean: maintainer-clean-am\n-\t-rm -rf $(DEPDIR)\n+\t-rm -rf $(DEPDIR) ./$(DEPDIR)\n \t-rm -f Makefile\n maintainer-clean-am: distclean-am maintainer-clean-generic\n \ndiff --git a/repl/dummy.c b/repl/dummy.c\nnew file mode 100644\nindex 0000000..39e7442\n--- /dev/null\n+++ b/repl/dummy.c\n@@ -0,0 +1 @@\n+void dummy () { return; }\ndiff --git a/src/Makefile.in b/src/Makefile.in\nindex e9ca293..a1f5a81 100644\n--- a/src/Makefile.in\n+++ b/src/Makefile.in\n@@ -223,6 +223,7 @@ libiml_la_CFLAGS = $(AM_CFLAGS)\n libiml_la_LIBADD = $(EXTERNLIB) \\\n \t \t   $(top_builddir)/repl/librepl.la\n \n+libiml_la_LDFLAGS = -version-info 1:0:1\n all: all-am\n \n .SUFFIXES:\n```\n\nThe first hunk is manually edited, as is the hunk adding the file `repl/dummy.c`; the rest are created by running automake in the src directory.\n\nThere are a couple of things that worry me, such as the `-version-info 1:0:1` near the end of the diff. Does that mean that autotools are misunderstanding the version of IML as 1.0.1 instead of 1.0.3? Why does a similar line not already exist in that file? As far as I can tell, I made sure I was using the same versions of autotools that the authors of IML were - autoconf 2.59, automake 1.9.6, and libtool 1.5.22.\n\nAnyway, I'll try again with your patch instead of this dummy function and see what's different. This time I'll also try the whole autotools suite by running `autoreconf -i` (as recommended to me by Jeroen) - is this what you recommend too, fbissey?",
    "created_at": "2012-05-28T16:32:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3096",
    "user": "https://github.com/kini"
}
```

<div id="comment:14" align="right">comment:14</div>

Thanks, that will help. We cannot run autotools at build time, only at packaging time, since we don't have autotools as a dependency of Sage, nor do we package it in Sage. So rather than including your patch I guess I should apply it, run autotools, and then save *that* diff as a patch to apply at build time.

Before seeing your diff I had solved the repl problem like this:

```diff
diff --git a/repl/Makefile.am b/repl/Makefile.am
index 4cf001b..7be2e86 100644
--- a/repl/Makefile.am
+++ b/repl/Makefile.am
@@ -1,4 +1,4 @@
 noinst_LTLIBRARIES      = librepl.la
-librepl_la_SOURCES   =
+librepl_la_SOURCES   = dummy.c
 librepl_la_LIBADD    = @LTLIBOBJS@
 
diff --git a/repl/Makefile.in b/repl/Makefile.in
index 5c65bfa..ba963ec 100644
--- a/repl/Makefile.in
+++ b/repl/Makefile.in
@@ -51,7 +51,7 @@ CONFIG_HEADER = $(top_builddir)/config.h
 CONFIG_CLEAN_FILES =
 LTLIBRARIES = $(noinst_LTLIBRARIES)
 librepl_la_DEPENDENCIES = @LTLIBOBJS@
-am_librepl_la_OBJECTS =
+am_librepl_la_OBJECTS = dummy.lo
 librepl_la_OBJECTS = $(am_librepl_la_OBJECTS)
 DEFAULT_INCLUDES = -I. -I$(srcdir) -I$(top_builddir)
 depcomp = $(SHELL) $(top_srcdir)/config/depcomp
@@ -172,7 +172,7 @@ sharedstatedir = @sharedstatedir@
 sysconfdir = @sysconfdir@
 target_alias = @target_alias@
 noinst_LTLIBRARIES = librepl.la
-librepl_la_SOURCES = 
+librepl_la_SOURCES = dummy.c
 librepl_la_LIBADD = @LTLIBOBJS@
 all: all-am
 
@@ -226,6 +226,7 @@ distclean-compile:
 	-rm -f *.tab.c
 
 @AMDEP_TRUE@@am__include@ @am__quote@$(DEPDIR)/realloc.Plo@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/dummy.Plo@am__quote@
 
 .c.o:
 @am__fastdepCC_TRUE@	if $(COMPILE) -MT $@ -MD -MP -MF "$(DEPDIR)/$*.Tpo" -c -o $@ $<; \
@@ -367,7 +368,7 @@ clean-am: clean-generic clean-libtool clean-noinstLTLIBRARIES \
 	mostlyclean-am
 
 distclean: distclean-am
-	-rm -rf $(DEPDIR)
+	-rm -rf $(DEPDIR) ./$(DEPDIR)
 	-rm -f Makefile
 distclean-am: clean-am distclean-compile distclean-generic \
 	distclean-libtool distclean-tags
@@ -393,7 +394,7 @@ install-man:
 installcheck-am:
 
 maintainer-clean: maintainer-clean-am
-	-rm -rf $(DEPDIR)
+	-rm -rf $(DEPDIR) ./$(DEPDIR)
 	-rm -f Makefile
 maintainer-clean-am: distclean-am maintainer-clean-generic
 
diff --git a/repl/dummy.c b/repl/dummy.c
new file mode 100644
index 0000000..39e7442
--- /dev/null
+++ b/repl/dummy.c
@@ -0,0 +1 @@
+void dummy () { return; }
diff --git a/src/Makefile.in b/src/Makefile.in
index e9ca293..a1f5a81 100644
--- a/src/Makefile.in
+++ b/src/Makefile.in
@@ -223,6 +223,7 @@ libiml_la_CFLAGS = $(AM_CFLAGS)
 libiml_la_LIBADD = $(EXTERNLIB) \
 	 	   $(top_builddir)/repl/librepl.la
 
+libiml_la_LDFLAGS = -version-info 1:0:1
 all: all-am
 
 .SUFFIXES:
```

The first hunk is manually edited, as is the hunk adding the file `repl/dummy.c`; the rest are created by running automake in the src directory.

There are a couple of things that worry me, such as the `-version-info 1:0:1` near the end of the diff. Does that mean that autotools are misunderstanding the version of IML as 1.0.1 instead of 1.0.3? Why does a similar line not already exist in that file? As far as I can tell, I made sure I was using the same versions of autotools that the authors of IML were - autoconf 2.59, automake 1.9.6, and libtool 1.5.22.

Anyway, I'll try again with your patch instead of this dummy function and see what's different. This time I'll also try the whole autotools suite by running `autoreconf -i` (as recommended to me by Jeroen) - is this what you recommend too, fbissey?



---

archive/issue_comments_003097.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nOh, I should mention that the patch I pasted in the previous comment actually does work to get rid of the build failure caused in `repl/`. Now the problem seems to be something with dynamic linking. To copy from #13027:\n\n```\ncreating test-largeentry\ndyld: lazy symbol binding failed: Symbol not found: _cblas_dgemm\n  Referenced from: /Users/wstein/build/sage-5.0/spkg/build/iml-1.0.3.p0/src/src/.libs/libiml.0.dylib\n  Expected in: flat namespace\n\ndyld: Symbol not found: _cblas_dgemm\n  Referenced from: /Users/wstein/build/sage-5.0/spkg/build/iml-1.0.3.p0/src/src/.libs/libiml.0.dylib\n  Expected in: flat namespace\n\n/bin/sh: line 1: 74987 Trace/BPT trap          ${dir}$tst\nFAIL: test-smallentry\ndyld: lazy symbol binding failed: Symbol not found: _cblas_dgemm\n  Referenced from: /Users/wstein/build/sage-5.0/spkg/build/iml-1.0.3.p0/src/src/.libs/libiml.0.dylib\n  Expected in: flat namespace\n\ndyld: Symbol not found: _cblas_dgemm\n  Referenced from: /Users/wstein/build/sage-5.0/spkg/build/iml-1.0.3.p0/src/src/.libs/libiml.0.dylib\n  Expected in: flat namespace\n\n/bin/sh: line 1: 75006 Trace/BPT trap          ${dir}$tst\nFAIL: test-largeentry\n===================\n2 of 2 tests failed\n===================\nmake[2]: *** [check-TESTS] Error 1\nmake[1]: *** [check-am] Error 2\nmake: *** [check-recursive] Error 1\nError testing IML\n```\n\nAs you can see, this is during the testing phase, so building completes successfully with the patch I pasted in the previous comment.",
    "created_at": "2012-05-28T16:34:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3097",
    "user": "https://github.com/kini"
}
```

<div id="comment:15" align="right">comment:15</div>

Oh, I should mention that the patch I pasted in the previous comment actually does work to get rid of the build failure caused in `repl/`. Now the problem seems to be something with dynamic linking. To copy from #13027:

```
creating test-largeentry
dyld: lazy symbol binding failed: Symbol not found: _cblas_dgemm
  Referenced from: /Users/wstein/build/sage-5.0/spkg/build/iml-1.0.3.p0/src/src/.libs/libiml.0.dylib
  Expected in: flat namespace

dyld: Symbol not found: _cblas_dgemm
  Referenced from: /Users/wstein/build/sage-5.0/spkg/build/iml-1.0.3.p0/src/src/.libs/libiml.0.dylib
  Expected in: flat namespace

/bin/sh: line 1: 74987 Trace/BPT trap          ${dir}$tst
FAIL: test-smallentry
dyld: lazy symbol binding failed: Symbol not found: _cblas_dgemm
  Referenced from: /Users/wstein/build/sage-5.0/spkg/build/iml-1.0.3.p0/src/src/.libs/libiml.0.dylib
  Expected in: flat namespace

dyld: Symbol not found: _cblas_dgemm
  Referenced from: /Users/wstein/build/sage-5.0/spkg/build/iml-1.0.3.p0/src/src/.libs/libiml.0.dylib
  Expected in: flat namespace

/bin/sh: line 1: 75006 Trace/BPT trap          ${dir}$tst
FAIL: test-largeentry
===================
2 of 2 tests failed
===================
make[2]: *** [check-TESTS] Error 1
make[1]: *** [check-am] Error 2
make: *** [check-recursive] Error 1
Error testing IML
```

As you can see, this is during the testing phase, so building completes successfully with the patch I pasted in the previous comment.



---

archive/issue_events_006933.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-05-28T16:37:27Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "title_is": "update iml to the 1.0.3 release + our patches",
    "title_was": "[waiting on upstream] update iml to the 1.0.3 release + our patches",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/748#event-6933"
}
```



---

archive/issue_comments_003098.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nIf after five years we haven't heard anything from upstream, by the way, I don't think we should any longer \"wait on upstream\", so I'm changing the title of the ticket...",
    "created_at": "2012-05-28T16:37:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3098",
    "user": "https://github.com/kini"
}
```

<div id="comment:16" align="right">comment:16</div>

If after five years we haven't heard anything from upstream, by the way, I don't think we should any longer "wait on upstream", so I'm changing the title of the ticket...



---

archive/issue_comments_003099.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nI spoke too soon - Arne Storjohann just contacted me to tell me that he has corrected the links on the IML webpage for older versions of IML, so now I have been able to produce a diff between clean upstream 1.0.1 and the version in the current standard spkg iml-1.0.1.p14.spkg. I will attach it after posting this comment, for reference.",
    "created_at": "2012-05-28T18:02:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3099",
    "user": "https://github.com/kini"
}
```

<div id="comment:17" align="right">comment:17</div>

I spoke too soon - Arne Storjohann just contacted me to tell me that he has corrected the links on the IML webpage for older versions of IML, so now I have been able to produce a diff between clean upstream 1.0.1 and the version in the current standard spkg iml-1.0.1.p14.spkg. I will attach it after posting this comment, for reference.



---

archive/issue_comments_003100.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI don't think I ever ran the test with the sage-on-gento ebuild on OS X. I will try that.What OS X version were you testing?",
    "created_at": "2012-05-28T19:28:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3100",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:18" align="right">comment:18</div>

I don't think I ever ran the test with the sage-on-gento ebuild on OS X. I will try that.What OS X version were you testing?



---

archive/issue_comments_003101.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReread the whole thing again. Yes autoreconf -i sounds good. Just for reference while upstream claims you need atlas cblas it doesn't use any atlas specific bits but the configure script is set to find atlas and nothing else.\n\nWhen we regenerate configure we usually don't ship it as a patch, the diff is usually too big. Historically in the case of cddlib Id on't think we ship pristine source in that case but the patch we used and the recipe to regenerate configure and friends. cddlib is a spkg you could look at for reference.\n\nTests pass on sage-on-gentoo on OS X 10.5.8 by the way.",
    "created_at": "2012-05-29T02:09:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3101",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:19" align="right">comment:19</div>

Reread the whole thing again. Yes autoreconf -i sounds good. Just for reference while upstream claims you need atlas cblas it doesn't use any atlas specific bits but the configure script is set to find atlas and nothing else.

When we regenerate configure we usually don't ship it as a patch, the diff is usually too big. Historically in the case of cddlib Id on't think we ship pristine source in that case but the patch we used and the recipe to regenerate configure and friends. cddlib is a spkg you could look at for reference.

Tests pass on sage-on-gentoo on OS X 10.5.8 by the way.



---

archive/issue_comments_003102.json:
```json
{
    "body": "Changed keywords from **spkg upgrade iml** to **spkg upgrade iml sd40.5**",
    "created_at": "2012-05-29T16:26:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3102",
    "user": "https://github.com/kini"
}
```

Changed keywords from **spkg upgrade iml** to **spkg upgrade iml sd40.5**



---

archive/issue_comments_003103.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nHi jpflori! I was working on this a couple months ago, and as I recall I was running into a similar autotools dilemma to the one you were discussing on sage-devel recently. I never did get it to build on OS X...\n\nHere's an unfinished SPKG if you want to take a look at what I did so far (not much): http://boxen.math.washington.edu/home/keshav/files/iml-1.0.3.p0.unfinished.spkg",
    "created_at": "2012-08-09T10:49:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3103",
    "user": "https://github.com/kini"
}
```

<div id="comment:22" align="right">comment:22</div>

Hi jpflori! I was working on this a couple months ago, and as I recall I was running into a similar autotools dilemma to the one you were discussing on sage-devel recently. I never did get it to build on OS X...

Here's an unfinished SPKG if you want to take a look at what I did so far (not much): http://boxen.math.washington.edu/home/keshav/files/iml-1.0.3.p0.unfinished.spkg



---

archive/issue_comments_003104.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nWhat is happening to you on OS X?",
    "created_at": "2012-08-09T10:56:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3104",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:23" align="right">comment:23</div>

What is happening to you on OS X?



---

archive/issue_comments_003105.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nAs I recall, tests were failing because the built binaries weren't linking to the system's BLAS properly, or something. See earlier comments on this ticket and on #13027.",
    "created_at": "2012-08-09T11:08:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3105",
    "user": "https://github.com/kini"
}
```

<div id="comment:24" align="right">comment:24</div>

As I recall, tests were failing because the built binaries weren't linking to the system's BLAS properly, or something. See earlier comments on this ticket and on #13027.



---

archive/issue_comments_003106.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\n(Sorry, I see that I said I didn't get it to *build* on OS X - that's incorrect, I got it to *build* but not to *work*.)",
    "created_at": "2012-08-09T11:16:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3106",
    "user": "https://github.com/kini"
}
```

<div id="comment:25" align="right">comment:25</div>

(Sorry, I see that I said I didn't get it to *build* on OS X - that's incorrect, I got it to *build* but not to *work*.)



---

archive/issue_comments_003107.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nYes of course I should really have tried to be more helpful there. I'll look at what you have done so far. Using atlas on OS X may help here.",
    "created_at": "2012-08-09T11:19:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3107",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:26" align="right">comment:26</div>

Yes of course I should really have tried to be more helpful there. I'll look at what you have done so far. Using atlas on OS X may help here.



---

archive/issue_comments_003108.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nI've got no access to OS X based computers, so if the problem is mainly about that, I'll have trouble helping...\n\nI mainly want to add -no-undefined to LDFLAGS on Cygwin (not the proper solution, if it works which has to be checked... we should only add it to the lib..._la_LDFLAGS in some Makefile.am, but that's looking for trouble, and adding it to LDFLAGS should be ok, even though it will be used all the time, even when it's useless, but a priori not harmful).",
    "created_at": "2012-08-09T16:03:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3108",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:27" align="right">comment:27</div>

I've got no access to OS X based computers, so if the problem is mainly about that, I'll have trouble helping...

I mainly want to add -no-undefined to LDFLAGS on Cygwin (not the proper solution, if it works which has to be checked... we should only add it to the lib..._la_LDFLAGS in some Makefile.am, but that's looking for trouble, and adding it to LDFLAGS should be ok, even though it will be used all the time, even when it's useless, but a priori not harmful).



---

archive/issue_comments_003109.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nOK there are two options:\n1 - we wait for sage to default to ATLAS-3.10 on OS X and use that\n2 - rewrite the configure.ac to provide any cblas we want and regenerate configure. We are going to regenerate configure in the process anyway.",
    "created_at": "2012-08-10T03:14:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3109",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:28" align="right">comment:28</div>

OK there are two options:
1 - we wait for sage to default to ATLAS-3.10 on OS X and use that
2 - rewrite the configure.ac to provide any cblas we want and regenerate configure. We are going to regenerate configure in the process anyway.



---

archive/issue_comments_003110.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nDo you have some nonzero expectation of Sage defaulting to building and using ATLAS on OS X rather than using the BLAS that's built into the operating system? When I was working on this I assumed waiting for ATLAS on OS X was a non-option, but maybe you know something I don't.\n\nI only saw the second option remaining, and that's actually why I sort of gave up on this - I didn't want to start writing autotools scripts if possible, after seeing David Kirkby's dire warnings on sage-devel to the effect that in order to write autotools scripts you have to carefully read the autotools manual from cover to cover first...\n\nI suppose a third option would be to ask the iml authors themselves to support generic BLAS.",
    "created_at": "2012-08-10T07:14:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3110",
    "user": "https://github.com/kini"
}
```

<div id="comment:29" align="right">comment:29</div>

Do you have some nonzero expectation of Sage defaulting to building and using ATLAS on OS X rather than using the BLAS that's built into the operating system? When I was working on this I assumed waiting for ATLAS on OS X was a non-option, but maybe you know something I don't.

I only saw the second option remaining, and that's actually why I sort of gave up on this - I didn't want to start writing autotools scripts if possible, after seeing David Kirkby's dire warnings on sage-devel to the effect that in order to write autotools scripts you have to carefully read the autotools manual from cover to cover first...

I suppose a third option would be to ask the iml authors themselves to support generic BLAS.



---

archive/issue_comments_003111.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nYou could say I know enough. And we have already done the work on gentoo. The gentoo solution itself cannot be adopted as it rely on blas/lapack installing pkgconfig files. But I know enough. The easiest thing is just to remove all traces of Atlas autodetection and provide the necessary stuff by compile flags. More sophisticated is to include a \"--with-cblas\" statement that would be basically do the same thing.\n\nI am otherwise positive that #10508 is opening the possibility of ATLAS on OS X - but all spkg using blas/lapack need to be adjusted for it to be useful.\n\nPatching the detection can be done orthogonally to getting atlas, the autodetection is a tricky business in this case.",
    "created_at": "2012-08-10T09:02:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3111",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:30" align="right">comment:30</div>

You could say I know enough. And we have already done the work on gentoo. The gentoo solution itself cannot be adopted as it rely on blas/lapack installing pkgconfig files. But I know enough. The easiest thing is just to remove all traces of Atlas autodetection and provide the necessary stuff by compile flags. More sophisticated is to include a "--with-cblas" statement that would be basically do the same thing.

I am otherwise positive that #10508 is opening the possibility of ATLAS on OS X - but all spkg using blas/lapack need to be adjusted for it to be useful.

Patching the detection can be done orthogonally to getting atlas, the autodetection is a tricky business in this case.



---

archive/issue_comments_003112.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nI think I can spend a little bit of time sorting stuff on this in the next few days. I will try to future proof it for #10508 so that there is no need to change the spkg when it is changed to positive review.",
    "created_at": "2012-10-26T10:43:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3112",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:31" align="right">comment:31</div>

I think I can spend a little bit of time sorting stuff on this in the next few days. I will try to future proof it for #10508 so that there is no need to change the spkg when it is changed to positive review.



---

archive/issue_comments_003113.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,3 @@\n+1. For iml-1.0.1.p8, there is some autotools problem that I have not been able to track down. Is everything up-to-date with configure, etc. for this package?\n \n-```\n-\n-2. For iml-1.0.1.p8, there is some autotools problem\n-that I have not been able to track down.  Is\n-everything up-to-date with configure, etc.\n-for this package?\n-```\n+2. The package should use `$MAKE` instead of `make`.\n``````\n",
    "created_at": "2013-05-23T08:39:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3113",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,3 @@
+1. For iml-1.0.1.p8, there is some autotools problem that I have not been able to track down. Is everything up-to-date with configure, etc. for this package?
 
-```
-
-2. For iml-1.0.1.p8, there is some autotools problem
-that I have not been able to track down.  Is
-everything up-to-date with configure, etc.
-for this package?
-```
+2. The package should use `$MAKE` instead of `make`.
``````




---

archive/issue_comments_003114.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1 @@\n-1. For iml-1.0.1.p8, there is some autotools problem that I have not been able to track down. Is everything up-to-date with configure, etc. for this package?\n \n-2. The package should use `$MAKE` instead of `make`.\n``````\n",
    "created_at": "2013-06-12T11:58:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3114",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1 @@
-1. For iml-1.0.1.p8, there is some autotools problem that I have not been able to track down. Is everything up-to-date with configure, etc. for this package?
 
-2. The package should use `$MAKE` instead of `make`.
``````




---

archive/issue_comments_003115.json:
```json
{
    "body": "Dependencies: **#14699**",
    "created_at": "2013-06-12T11:58:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3115",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#14699**



---

archive/issue_comments_003116.json:
```json
{
    "body": "Author: **Jeroen Demeyer**",
    "created_at": "2013-06-12T12:32:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3116",
    "user": "https://github.com/jdemeyer"
}
```

Author: **Jeroen Demeyer**



---

archive/issue_events_006934.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-12T12:32:05Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/748#event-6934"
}
```



---

archive/issue_comments_003117.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/iml-1.0.3.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/iml-1.0.3.p0.spkg)\n``````\n",
    "created_at": "2013-06-12T12:32:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3117",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/iml-1.0.3.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/iml-1.0.3.p0.spkg)
``````




---

archive/issue_comments_003118.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/iml-1.0.3.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/iml-1.0.3.p0.spkg)\n+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/iml-1.0.3.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/iml-1.0.3.p0.spkg) ([spkg diff](https://github.com/sagemath/sage/files/ticket748/iml-1.0.3.p0.diff.gz))\n``````\n",
    "created_at": "2013-06-12T12:46:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3118",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/iml-1.0.3.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/iml-1.0.3.p0.spkg)
+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/iml-1.0.3.p0.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/iml-1.0.3.p0.spkg) ([spkg diff](https://github.com/sagemath/sage/files/ticket748/iml-1.0.3.p0.diff.gz))
``````




---

archive/issue_events_006935.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-12T12:46:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/748#event-6935"
}
```



---

archive/issue_comments_003119.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\n**not yet doctested** but at least the spkg and its testsuite work on Linux and OS X.",
    "created_at": "2013-06-12T12:47:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3119",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:36" align="right">comment:36</div>

**not yet doctested** but at least the spkg and its testsuite work on Linux and OS X.



---

archive/issue_comments_003120.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nI still get\n\n```\n./configure: line 18624: -O2: command not found\n```",
    "created_at": "2013-06-12T13:28:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3120",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:37" align="right">comment:37</div>

I still get

```
./configure: line 18624: -O2: command not found
```



---

archive/issue_comments_003121.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nReplying to [@nexttime](#comment%3A37):\n> I still get\n> \n> ```\n> ./configure: line 18624: -O2: command not found\n> ```\n\nFixed in new spkg.\n\nDoctests on boxen.math pass.",
    "created_at": "2013-06-12T16:16:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3121",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:38" align="right">comment:38</div>

Replying to [@nexttime](#comment%3A37):
> I still get
> 
> ```
> ./configure: line 18624: -O2: command not found
> ```

Fixed in new spkg.

Doctests on boxen.math pass.



---

archive/issue_comments_003122.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nI already checked the spkg looks sane and installs fine.\nSage still pass its (not long) tests.\n\nI just have to check the changes in the patches and I'll give it positive review.",
    "created_at": "2013-06-14T11:28:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3122",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:39" align="right">comment:39</div>

I already checked the spkg looks sane and installs fine.
Sage still pass its (not long) tests.

I just have to check the changes in the patches and I'll give it positive review.



---

archive/issue_comments_003123.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nWhy merge tinyatlas.patch into sage1.patch?\n\nOn top of that I don't really get the use of the tinyatlas patch.\nThe function it defines (in a header file) is used nor in IML nor in Sage.\nI'm testing Sage without it (no problems for IML).\n\nSo maybe renaming sage1.patch to memory.patch and discarding tinyatlas.patch would be enough.\nAnd lets move the sage3_memleak.patch to memleak.patch while at it.",
    "created_at": "2013-06-14T12:52:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3123",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:40" align="right">comment:40</div>

Why merge tinyatlas.patch into sage1.patch?

On top of that I don't really get the use of the tinyatlas patch.
The function it defines (in a header file) is used nor in IML nor in Sage.
I'm testing Sage without it (no problems for IML).

So maybe renaming sage1.patch to memory.patch and discarding tinyatlas.patch would be enough.
And lets move the sage3_memleak.patch to memleak.patch while at it.



---

archive/issue_comments_003124.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nReplying to [@jpflori](#comment%3A40):\n> Why merge tinyatlas.patch into sage1.patch?\n\nBecause those patches seem related: `sage1.patch` adds some include for `tinyatlas.h`.\n\n> On top of that I don't really get the use of the tinyatlas patch.\n> The function it defines (in a header file) is used nor in IML nor in Sage.\n\nThat's certainly not true. The files `RNSop.c` and `certsolve.c` in the `src/src` directory in `IML` use `catlas_daxpby()`.\n\nMy guess is that's a function which normally comes from ATLAS, but which is needed on systems where ATLAS is not installed.",
    "created_at": "2013-06-14T13:06:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3124",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:41" align="right">comment:41</div>

Replying to [@jpflori](#comment%3A40):
> Why merge tinyatlas.patch into sage1.patch?

Because those patches seem related: `sage1.patch` adds some include for `tinyatlas.h`.

> On top of that I don't really get the use of the tinyatlas patch.
> The function it defines (in a header file) is used nor in IML nor in Sage.

That's certainly not true. The files `RNSop.c` and `certsolve.c` in the `src/src` directory in `IML` use `catlas_daxpby()`.

My guess is that's a function which normally comes from ATLAS, but which is needed on systems where ATLAS is not installed.



---

archive/issue_comments_003125.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nReplying to [@jdemeyer](#comment%3A41):\n> Replying to [@jpflori](#comment%3A40):\n> > Why merge tinyatlas.patch into sage1.patch?\n\n> Because those patches seem related: `sage1.patch` adds some include for `tinyatlas.h`.\n\nOk, i thought the include was in tinyatlas.h as well, so I did not check.\n> \n> > On top of that I don't really get the use of the tinyatlas patch.\n> > The function it defines (in a header file) is used nor in IML nor in Sage.\n\n> That's certainly not true. The files `RNSop.c` and `certsolve.c` in the `src/src` directory in `IML` use `catlas_daxpby()`.\n> \n\nIt seems to be true with IML 1.0.3 but not with 1.0.1 indeed.\n(I mean the daxpby function was needed in 1.0.1 but is not anymore in 1.0.3.)\n> My guess is that's a function which normally comes from ATLAS, but which is needed on systems where ATLAS is not installed.",
    "created_at": "2013-06-14T13:09:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3125",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:42" align="right">comment:42</div>

Replying to [@jdemeyer](#comment%3A41):
> Replying to [@jpflori](#comment%3A40):
> > Why merge tinyatlas.patch into sage1.patch?

> Because those patches seem related: `sage1.patch` adds some include for `tinyatlas.h`.

Ok, i thought the include was in tinyatlas.h as well, so I did not check.
> 
> > On top of that I don't really get the use of the tinyatlas patch.
> > The function it defines (in a header file) is used nor in IML nor in Sage.

> That's certainly not true. The files `RNSop.c` and `certsolve.c` in the `src/src` directory in `IML` use `catlas_daxpby()`.
> 

It seems to be true with IML 1.0.3 but not with 1.0.1 indeed.
(I mean the daxpby function was needed in 1.0.1 but is not anymore in 1.0.3.)
> My guess is that's a function which normally comes from ATLAS, but which is needed on systems where ATLAS is not installed.



---

archive/issue_comments_003126.json:
```json
{
    "body": "Reviewer: **Jean-Pierre Flori**",
    "created_at": "2013-06-14T13:11:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3126",
    "user": "https://github.com/jpflori"
}
```

Reviewer: **Jean-Pierre Flori**



---

archive/issue_events_006936.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2013-06-14T13:11:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/748#event-6936"
}
```



---

archive/issue_events_006937.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2013-06-14T13:11:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/748#event-6937"
}
```



---

archive/issue_comments_003127.json:
```json
{
    "body": "Work Issues: **remove tinyatlas stuff, rename sage*.patch**",
    "created_at": "2013-06-14T13:11:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3127",
    "user": "https://github.com/jpflori"
}
```

Work Issues: **remove tinyatlas stuff, rename sage*.patch**



---

archive/issue_comments_003128.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nReplying to [@jpflori](#comment%3A42):\n> It seems to be true with IML 1.0.3 but not with 1.0.1.\n\nOK, right, I checked the old sources.",
    "created_at": "2013-06-14T13:12:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3128",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:44" align="right">comment:44</div>

Replying to [@jpflori](#comment%3A42):
> It seems to be true with IML 1.0.3 but not with 1.0.1.

OK, right, I checked the old sources.



---

archive/issue_comments_003129.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nI confirm that `catlas_daxpby()` is indeed nowhere used outside of the ATLAS sources.\n\nWorking on new spkg...",
    "created_at": "2013-06-14T13:16:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3129",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:45" align="right">comment:45</div>

I confirm that `catlas_daxpby()` is indeed nowhere used outside of the ATLAS sources.

Working on new spkg...



---

archive/issue_comments_003130.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nApplying the following changes:\n\n```diff\ndiff --git a/SPKG.txt b/SPKG.txt\n--- a/SPKG.txt\n+++ b/SPKG.txt\n@@ -32,21 +32,27 @@\n\n === Patches ===\n\n- * rename_lift.patch: Change lift to iml_lift in padiclift.* and\n-   nonsingsolve.*, since otherwise  on OSX you'll have horrible weird\n-   conflict problems.\n+ * blas_headers.patch: Add BLAS header files from GSL, needed in case\n+   ATLAS has not been installed.\n+ * build.patch: Made build scripts that work.\n  * configure_default_cflags.patch: get rid of the following error\n    during configure:\n      ./configure: line 18624: -O3: command not found\n- * Modified some of the examples, and made build scripts that work.\n+ * examples.patch: Modified some of the examples.\n+ * memleak.patch: use mpz_set_ui instead of mpz_init_set_ui on mpz\n+   which is already allocated.\n+ * remove_repl.patch: Do not build/install src/repl at all, since it\n+   does nothing anyway and creating empty archives fails on OS X.\n\n == Changelog ==\n\n === iml-1.0.3.p0 (Jeroen Demeyer, 12 June 2013) ===\n  * #748: Upgrade to latest upstream version, rebase patches.\n  * Remove rename_lift.patch and sage2.patch, which were upstreamed.\n- * Merged tinyatlas.patch into sage1.patch.\n- * Apply sage3_memleak.patch in all 3 places with similar code.\n+ * Removed tinyatlas.patch and #include \"tinyatlas.h\"\n+ * Removed sage1.patch\n+ * Apply sage3_memleak.patch in all 3 places with similar code, rename\n+   to memleak.patch\n  * Use -O3 optimization level by default.\n  * Add configure_default_cflags.patch.\n\ndiff --git a/patches/sage3_memleak.patch b/patches/memleak.patch\nrename from patches/sage3_memleak.patch\nrename to patches/memleak.patch\ndiff --git a/patches/sage1.patch b/patches/sage1.patch\ndeleted file mode 100644\n--- a/patches/sage1.patch\n+++ /dev/null\n@@ -1,80 +0,0 @@\n-diff -ruN b/src/RNSop.c a/src/RNSop.c\n---- b/src/RNSop.c      2006-11-23 22:25:23.000000000 +0100\n-+++ a/src/RNSop.c      2013-06-10 23:05:18.872404179 +0200\n-@@ -46,6 +46,7 @@\n- \n- \n- #include \"RNSop.h\"\n-+#include \"tinyatlas.h\"\n- \n- /*\n-  *\n-diff -ruN b/src/memalloc.c a/src/memalloc.c\n---- b/src/memalloc.c   2006-11-23 22:25:23.000000000 +0100\n-+++ a/src/memalloc.c   2013-06-10 23:05:18.872404179 +0200\n-@@ -48,13 +48,16 @@\n- \n- #include \"error.h\"\n- #include \"common.h\"\n-+#include \"stdio.h\"\n- \n- void *\n- xmalloc (size_t num)\n- {\n-   void * new = malloc(num);\n--  if (!new)\n--    iml_fatal (\"Memory exhausted\");\n-+  if (!new) {\n-+    printf(\"%ul\\n\", num);\n-+    iml_fatal (\"Memory exhausted in xmalloc\");\n-+  }\n-   return new;\n- }\n- \n-@@ -65,8 +68,10 @@\n-   if (!p)\n-     return xmalloc(num);\n-   new = realloc(p, num);\n--  if (!new)\n--    iml_fatal(\"Memory exhausted\");\n-+  if (!new) {\n-+    printf(\"%ul\\n\", num);\n-+    iml_fatal(\"Memory exhausted in xrealloc\");\n-+  }\n-   return new;\n- }\n- \n-@@ -76,8 +81,10 @@\n- {\n- #if HAVE_CALLOC\n-   void * new = calloc(num, size);\n--  if (!new)\n--    iml_fatal(\"Memory exhausted\");\n-+  if (!new) {\n-+    printf(\"%ul\\n\", num);\n-+    iml_fatal(\"Memory exhausted in xcalloc\");\n-+  }\n- #else\n-   void * new = xmalloc(num*size);\n-   bzero(new, num*size);\n-diff -ruN iml-1.0.1-sage/src/tinyatlas.h src/src/tinyatlas.h\n---- iml-1.0.1-sage/src/tinyatlas.h     1970-01-01 01:00:00.000000000 +0100\n-+++ src/src/tinyatlas.h        2007-03-01 04:11:42.000000000 +0100\n-@@ -0,0 +1,17 @@\n-+/* \n-+Compute Y = alpha * X + beta * Y\n-+\n-+where \n-+   N = degree of each vector\n-+   incX = X stride\n-+   incY = Y stride\n-+*/\n-+\n-+void catlas_daxpby(const int N, const double alpha, const double *X,\n-+const int incX, const double beta, double *Y, const int incY) \n-+{\n-+  int i;\n-+  for(i=0; i < N; i++) {\n-+    Y[i*incY] = alpha * X[i*incX] + beta * Y[i*incY];\n-+  }\n-+}\n```",
    "created_at": "2013-06-14T13:23:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3130",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:46" align="right">comment:46</div>

Applying the following changes:

```diff
diff --git a/SPKG.txt b/SPKG.txt
--- a/SPKG.txt
+++ b/SPKG.txt
@@ -32,21 +32,27 @@

 === Patches ===

- * rename_lift.patch: Change lift to iml_lift in padiclift.* and
-   nonsingsolve.*, since otherwise  on OSX you'll have horrible weird
-   conflict problems.
+ * blas_headers.patch: Add BLAS header files from GSL, needed in case
+   ATLAS has not been installed.
+ * build.patch: Made build scripts that work.
  * configure_default_cflags.patch: get rid of the following error
    during configure:
      ./configure: line 18624: -O3: command not found
- * Modified some of the examples, and made build scripts that work.
+ * examples.patch: Modified some of the examples.
+ * memleak.patch: use mpz_set_ui instead of mpz_init_set_ui on mpz
+   which is already allocated.
+ * remove_repl.patch: Do not build/install src/repl at all, since it
+   does nothing anyway and creating empty archives fails on OS X.

 == Changelog ==

 === iml-1.0.3.p0 (Jeroen Demeyer, 12 June 2013) ===
  * #748: Upgrade to latest upstream version, rebase patches.
  * Remove rename_lift.patch and sage2.patch, which were upstreamed.
- * Merged tinyatlas.patch into sage1.patch.
- * Apply sage3_memleak.patch in all 3 places with similar code.
+ * Removed tinyatlas.patch and #include "tinyatlas.h"
+ * Removed sage1.patch
+ * Apply sage3_memleak.patch in all 3 places with similar code, rename
+   to memleak.patch
  * Use -O3 optimization level by default.
  * Add configure_default_cflags.patch.

diff --git a/patches/sage3_memleak.patch b/patches/memleak.patch
rename from patches/sage3_memleak.patch
rename to patches/memleak.patch
diff --git a/patches/sage1.patch b/patches/sage1.patch
deleted file mode 100644
--- a/patches/sage1.patch
+++ /dev/null
@@ -1,80 +0,0 @@
-diff -ruN b/src/RNSop.c a/src/RNSop.c
---- b/src/RNSop.c      2006-11-23 22:25:23.000000000 +0100
-+++ a/src/RNSop.c      2013-06-10 23:05:18.872404179 +0200
-@@ -46,6 +46,7 @@
- 
- 
- #include "RNSop.h"
-+#include "tinyatlas.h"
- 
- /*
-  *
-diff -ruN b/src/memalloc.c a/src/memalloc.c
---- b/src/memalloc.c   2006-11-23 22:25:23.000000000 +0100
-+++ a/src/memalloc.c   2013-06-10 23:05:18.872404179 +0200
-@@ -48,13 +48,16 @@
- 
- #include "error.h"
- #include "common.h"
-+#include "stdio.h"
- 
- void *
- xmalloc (size_t num)
- {
-   void * new = malloc(num);
--  if (!new)
--    iml_fatal ("Memory exhausted");
-+  if (!new) {
-+    printf("%ul\n", num);
-+    iml_fatal ("Memory exhausted in xmalloc");
-+  }
-   return new;
- }
- 
-@@ -65,8 +68,10 @@
-   if (!p)
-     return xmalloc(num);
-   new = realloc(p, num);
--  if (!new)
--    iml_fatal("Memory exhausted");
-+  if (!new) {
-+    printf("%ul\n", num);
-+    iml_fatal("Memory exhausted in xrealloc");
-+  }
-   return new;
- }
- 
-@@ -76,8 +81,10 @@
- {
- #if HAVE_CALLOC
-   void * new = calloc(num, size);
--  if (!new)
--    iml_fatal("Memory exhausted");
-+  if (!new) {
-+    printf("%ul\n", num);
-+    iml_fatal("Memory exhausted in xcalloc");
-+  }
- #else
-   void * new = xmalloc(num*size);
-   bzero(new, num*size);
-diff -ruN iml-1.0.1-sage/src/tinyatlas.h src/src/tinyatlas.h
---- iml-1.0.1-sage/src/tinyatlas.h     1970-01-01 01:00:00.000000000 +0100
-+++ src/src/tinyatlas.h        2007-03-01 04:11:42.000000000 +0100
-@@ -0,0 +1,17 @@
-+/* 
-+Compute Y = alpha * X + beta * Y
-+
-+where 
-+   N = degree of each vector
-+   incX = X stride
-+   incY = Y stride
-+*/
-+
-+void catlas_daxpby(const int N, const double alpha, const double *X,
-+const int incX, const double beta, double *Y, const int incY) 
-+{
-+  int i;
-+  for(i=0; i < N; i++) {
-+    Y[i*incY] = alpha * X[i*incX] + beta * Y[i*incY];
-+  }
-+}
```



---

archive/issue_comments_003131.json:
```json
{
    "body": "Attachment: **[iml-1.0.3.p0.diff.gz](https://github.com/sagemath/sage/files/ticket748/iml-1.0.3.p0.diff.gz)**",
    "created_at": "2013-06-14T13:24:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3131",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[iml-1.0.3.p0.diff.gz](https://github.com/sagemath/sage/files/ticket748/iml-1.0.3.p0.diff.gz)**



---

archive/issue_comments_003132.json:
```json
{
    "body": "Changed work issues from **remove tinyatlas stuff, rename sage*.patch** to none",
    "created_at": "2013-06-14T13:27:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3132",
    "user": "https://github.com/jdemeyer"
}
```

Changed work issues from **remove tinyatlas stuff, rename sage*.patch** to none



---

archive/issue_events_006938.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-14T13:27:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/748#event-6938"
}
```



---

archive/issue_events_006939.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-14T13:27:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/748#event-6939"
}
```



---

archive/issue_events_006940.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2013-06-14T13:27:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/748#event-6940"
}
```



---

archive/issue_events_006941.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2013-06-14T13:27:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/748#event-6941"
}
```



---

archive/issue_comments_003133.json:
```json
{
    "body": "Merged: **sage-5.11.beta2**",
    "created_at": "2013-06-19T12:24:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3133",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.11.beta2**



---

archive/issue_events_006942.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-19T12:24:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/748#event-6942"
}
```



---

archive/issue_events_006943.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-19T12:24:23Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/748#event-6943"
}
```



---

archive/issue_comments_003134.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\n**Sign of life of IML upstream** on #14648 !!1!111!",
    "created_at": "2014-04-16T16:41:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3134",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:50" align="right">comment:50</div>

**Sign of life of IML upstream** on #14648 !!1!111!



---

archive/issue_comments_003135.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nReplying to [@nexttime](#comment%3A50):\n> **Sign of life of IML upstream** on #14648 !!1!111!\n\n[#14648 comment:51](https://github.com/sagemath/sage/issues/14648#comment:51) ff. that is.",
    "created_at": "2014-04-16T16:42:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/748#issuecomment-3135",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:51" align="right">comment:51</div>

Replying to [@nexttime](#comment%3A50):
> **Sign of life of IML upstream** on #14648 !!1!111!

[#14648 comment:51](https://github.com/sagemath/sage/issues/14648#comment:51) ff. that is.
