# Issue 295: '??' doesn't always print last line of last function in file

archive/issues_000295.json:
```json
{
    "assignees": [
        "https://github.com/ncalexan"
    ],
    "body": "A file with this content (w/o the \"===\"'s) shows the problem:\n\n```\ndef Foo(x)\n    x = 1\n```\n\nAfter load/attaching this file, typing \"??Foo\" prints only the 'def' line.\n\nIf the file looks like this (i.e., with an 'extra' blank line):\n\n```\ndef Foo(x)\n    x = 1\n\n```\n\nthen '??' works properly.\n\n\nComponent: **algebraic geometry**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/295_\n\n",
    "closed_at": "2007-02-28T20:33:49Z",
    "created_at": "2007-02-25T18:49:28Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20algebraic%20geometry",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "'??' doesn't always print last line of last function in file",
    "type": "issue",
    "updated_at": "2007-02-28T20:33:49Z",
    "url": "https://github.com/sagemath/sage/issues/295",
    "user": "https://github.com/RalphieBoy"
}
```
A file with this content (w/o the "==="'s) shows the problem:

```
def Foo(x)
    x = 1
```

After load/attaching this file, typing "??Foo" prints only the 'def' line.

If the file looks like this (i.e., with an 'extra' blank line):

```
def Foo(x)
    x = 1

```

then '??' works properly.


Component: **algebraic geometry**

_Issue created by migration from https://trac.sagemath.org/ticket/295_





---

archive/issue_events_002326.json:
```json
{
    "actor": "https://github.com/RalphieBoy",
    "created_at": "2007-02-25T18:49:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/295",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebraic%20geometry",
    "label_color": "0000ff",
    "label_name": "c: algebraic geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/295#event-2326"
}
```



---

archive/issue_events_002327.json:
```json
{
    "actor": "https://github.com/RalphieBoy",
    "created_at": "2007-02-25T18:49:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/295",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/295#event-2327"
}
```



---

archive/issue_events_002328.json:
```json
{
    "actor": "https://github.com/RalphieBoy",
    "created_at": "2007-02-25T18:49:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/295",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/295#event-2328"
}
```



---

archive/issue_events_002329.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2007-02-25T18:49:28Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/295",
    "subject": "https://github.com/RalphieBoy",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/295#event-2329"
}
```



---

archive/issue_comments_001000.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nIgnore the \"===\"s part; forgot to remove this after fiddling with formatting.",
    "created_at": "2007-02-25T18:51:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/295#issuecomment-1000",
    "user": "https://github.com/RalphieBoy"
}
```

<div id="comment:1" align="right">comment:1</div>

Ignore the "==="s part; forgot to remove this after fiddling with formatting.



---

archive/issue_events_002330.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2007-02-25T19:15:09Z",
    "event": "unassigned",
    "issue": "https://github.com/sagemath/sage/issues/295",
    "subject": "https://github.com/williamstein",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/295#event-2330"
}
```



---

archive/issue_events_002331.json:
```json
{
    "actor": "https://github.com/ncalexan",
    "created_at": "2007-02-28T20:21:13Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/295",
    "subject": "https://github.com/ncalexan",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/295#event-2331"
}
```



---

archive/issue_comments_001001.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nFixed in ncalexan's local tree by 34c022ed2482.\n\nThis requires the doctest.ELLIPSIS option be added to local/bin/sage-doctest, so I haven't sent it upstream yet.  When I finish touching the testing infrastructure, I'll send it along, or ask for it :)",
    "created_at": "2007-02-28T20:33:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/295#issuecomment-1001",
    "user": "https://github.com/ncalexan"
}
```

<div id="comment:4" align="right">comment:4</div>

Fixed in ncalexan's local tree by 34c022ed2482.

This requires the doctest.ELLIPSIS option be added to local/bin/sage-doctest, so I haven't sent it upstream yet.  When I finish touching the testing infrastructure, I'll send it along, or ask for it :)



---

archive/issue_events_002332.json:
```json
{
    "actor": "https://github.com/ncalexan",
    "created_at": "2007-02-28T20:33:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/295",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/295#event-2332"
}
```
