# Issue 813: forced coercion vs. automatic coercion

archive/issues_000813.json:
```json
{
    "assignees": [
        "https://github.com/roed314"
    ],
    "body": "<div id=\"comment:0\"></div>\n\nThis should give similar results, but it is inconsistent:\n\n```\nP1.<x>=QQ[]\nL=P1.fraction_field()\nx=L(x)\nP2.<y>=P1[]\n\nf=x+y\n\nP3.<x,y>=QQ[]\n\nP3(f)\n\n0*P3.0+f\n```\n\n---\n\nApply\n\n1. [attachment: trac813_univariate_coerce_from_multivariate.patch](https://github.com/sagemath/sage/files/ticket813/trac813_univariate_coerce_from_multivariate.patch.gz)\n2. [attachment: trac_813_review.patch](https://github.com/sagemath/sage/files/ticket813/trac_813_review.patch.gz)\n\nto the Sage library repository.\n\n\nDepends on #9944\n\nComponent: **coercion**\n\nAuthor: **Simon King**\n\nReviewer: **Julian Rueth**\n\nMerged: **sage-4.7.2.alpha3**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/813_\n\n",
    "closed_at": "2011-09-27T17:42:14Z",
    "created_at": "2007-10-03T18:52:27Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20coercion",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.7.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "forced coercion vs. automatic coercion",
    "type": "issue",
    "updated_at": "2011-09-27T17:42:14Z",
    "url": "https://github.com/sagemath/sage/issues/813",
    "user": "https://github.com/nbruin"
}
```
<div id="comment:0"></div>

This should give similar results, but it is inconsistent:

```
P1.<x>=QQ[]
L=P1.fraction_field()
x=L(x)
P2.<y>=P1[]

f=x+y

P3.<x,y>=QQ[]

P3(f)

0*P3.0+f
```

---

Apply

1. [attachment: trac813_univariate_coerce_from_multivariate.patch](https://github.com/sagemath/sage/files/ticket813/trac813_univariate_coerce_from_multivariate.patch.gz)
2. [attachment: trac_813_review.patch](https://github.com/sagemath/sage/files/ticket813/trac_813_review.patch.gz)

to the Sage library repository.


Depends on #9944

Component: **coercion**

Author: **Simon King**

Reviewer: **Julian Rueth**

Merged: **sage-4.7.2.alpha3**

_Issue created by migration from https://trac.sagemath.org/ticket/813_





---

archive/issue_events_007729.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2007-10-03T18:52:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebraic%20geometry",
    "label_color": "0000ff",
    "label_name": "c: algebraic geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/813#event-7729"
}
```



---

archive/issue_events_007730.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2007-10-03T18:52:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/813#event-7730"
}
```



---

archive/issue_events_007731.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2007-10-03T18:52:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/813#event-7731"
}
```



---

archive/issue_events_007732.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2007-10-03T18:52:27Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "subject": "https://github.com/nbruin",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/813#event-7732"
}
```



---

archive/issue_events_007733.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2007-10-03T20:58:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebraic%20geometry",
    "label_color": "0000ff",
    "label_name": "c: algebraic geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/813#event-7733"
}
```



---

archive/issue_events_007734.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2007-10-03T20:58:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20basic%20arithmetic",
    "label_color": "0000ff",
    "label_name": "c: basic arithmetic",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/813#event-7734"
}
```



---

archive/issue_events_007735.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2007-10-03T20:58:07Z",
    "event": "unassigned",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "subject": "https://github.com/nbruin",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/813#event-7735"
}
```



---

archive/issue_events_007736.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2007-10-03T20:58:07Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "subject": "https://github.com/nbruin",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/813#event-7736"
}
```



---

archive/issue_events_007737.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2007-10-03T20:58:07Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "milestone_number": null,
    "milestone_title": "sage-2.8.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/813#event-7737"
}
```



---

archive/issue_events_007738.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2007-10-04T18:10:29Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "milestone_number": null,
    "milestone_title": "sage-2.8.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/813#event-7738"
}
```



---

archive/issue_events_007739.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2007-10-04T18:10:29Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "milestone_number": null,
    "milestone_title": "sage-2.8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/813#event-7739"
}
```



---

archive/issue_comments_003628.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI will work on this once Robert has added rdef'd functions to Sage (that way I don't have to redo the changes once this occurs)",
    "created_at": "2007-10-13T00:33:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/813#issuecomment-3628",
    "user": "https://github.com/roed314"
}
```

<div id="comment:3" align="right">comment:3</div>

I will work on this once Robert has added rdef'd functions to Sage (that way I don't have to redo the changes once this occurs)



---

archive/issue_events_007740.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2007-10-13T00:42:40Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "milestone_number": null,
    "milestone_title": "sage-2.8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/813#event-7740"
}
```



---

archive/issue_events_007741.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2007-10-13T00:42:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "milestone_number": null,
    "milestone_title": "sage-2.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/813#event-7741"
}
```



---

archive/issue_comments_003629.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nThis now gives a TypeError when doing the last arithmetic:\n\n```\nTypeError: unsupported operand parent(s) for '+': 'Multivariate Polynomial Ring in x, y over Rational Field' and 'Univariate Polynomial Ring in y over Fraction Field of Univariate Polynomial Ring in x over Rational Field'\n```",
    "created_at": "2008-11-14T09:02:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/813#issuecomment-3629",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:5" align="right">comment:5</div>

This now gives a TypeError when doing the last arithmetic:

```
TypeError: unsupported operand parent(s) for '+': 'Multivariate Polynomial Ring in x, y over Rational Field' and 'Univariate Polynomial Ring in y over Fraction Field of Univariate Polynomial Ring in x over Rational Field'
```



---

archive/issue_comments_003630.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI accidentally came accross this stone age ticket.\n\nFor the record: Current behaviour as of sage-4.7.rc2 is\n\n```\nsage: P1.<x>=QQ[]\nsage: L=P1.fraction_field()\nsage: x=L(x)\nsage: P2.<y>=P1[]\nsage:\nsage: f=x+y\nsage:\nsage: P3.<x,y>=QQ[]\nsage:\nsage: P3(f)\nx + y\nsage:\nsage: 0*P3.0+f\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n\n/home/king/<ipython console> in <module>()\n\n/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/sage/structure/element.so in sage.structure.element.RingElement.__add__ (sage/structure/element.c:11959)()\n\n/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/sage/structure/coerce.so in sage.structure.coerce.CoercionModel_cache_maps.bin_op (sage/structure/coerce.c:7382)()\n\nTypeError: unsupported operand parent(s) for '+': 'Multivariate Polynomial Ring in x, y over Rational Field' and 'Univariate Polynomial Ring in y over Fraction Field of Univariate Polynomial Ring in x over Rational Field'\nsage: f.parent()\nUnivariate Polynomial Ring in y over Fraction Field of Univariate Polynomial Ring in x over Rational Field\nsage: P3\nMultivariate Polynomial Ring in x, y over Rational Field\n```\n\nThe question thus is: Should there be a coercion from P3 to the parent of f? Then one should implement it. Otherwise, the ticket should be closed as invalid.\n\nLet fP be the parent of f, hence, the polynomial ring in y over the fraction field of the polynomial ring in x over the rationals.\n\nThere *is* a coercion to fP from the polyomial ring in y over the polynomial ring in x over the rationals:\n\n```\nsage: from sage.structure.element import get_coercion_model\nsage: cm = get_coercion_model()\nsage: fP = f.parent()\nsage: cm.explain(fP, QQ[x][y])\nCoercion on right operand via\n    Conversion map:\n      From: Univariate Polynomial Ring in y over Univariate Polynomial Ring in x over Rational Field\n      To:   Univariate Polynomial Ring in y over Fraction Field of Univariate Polynomial Ring in x over Rational Field\nArithmetic performed after coercions.\nResult lives in Univariate Polynomial Ring in y over Fraction Field of Univariate Polynomial Ring in x over Rational Field\nUnivariate Polynomial Ring in y over Fraction Field of Univariate Polynomial Ring in x over Rational Field\n```\n\nHowever, there is no such coercion from the bivariate polynomial ring in x and y over the rationals:\n\n```\nsage: cm.explain(fP, QQ[x,y])\nWill try _r_action and _l_action\nUnknown result parent.\n```\n\nI think there should be such coercion! What do you think? I guess I'll also ask sage-devel.",
    "created_at": "2011-07-31T14:38:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/813#issuecomment-3630",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:6" align="right">comment:6</div>

I accidentally came accross this stone age ticket.

For the record: Current behaviour as of sage-4.7.rc2 is

```
sage: P1.<x>=QQ[]
sage: L=P1.fraction_field()
sage: x=L(x)
sage: P2.<y>=P1[]
sage:
sage: f=x+y
sage:
sage: P3.<x,y>=QQ[]
sage:
sage: P3(f)
x + y
sage:
sage: 0*P3.0+f
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)

/home/king/<ipython console> in <module>()

/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/sage/structure/element.so in sage.structure.element.RingElement.__add__ (sage/structure/element.c:11959)()

/mnt/local/king/SAGE/sage-4.7.rc2/local/lib/python2.6/site-packages/sage/structure/coerce.so in sage.structure.coerce.CoercionModel_cache_maps.bin_op (sage/structure/coerce.c:7382)()

TypeError: unsupported operand parent(s) for '+': 'Multivariate Polynomial Ring in x, y over Rational Field' and 'Univariate Polynomial Ring in y over Fraction Field of Univariate Polynomial Ring in x over Rational Field'
sage: f.parent()
Univariate Polynomial Ring in y over Fraction Field of Univariate Polynomial Ring in x over Rational Field
sage: P3
Multivariate Polynomial Ring in x, y over Rational Field
```

The question thus is: Should there be a coercion from P3 to the parent of f? Then one should implement it. Otherwise, the ticket should be closed as invalid.

Let fP be the parent of f, hence, the polynomial ring in y over the fraction field of the polynomial ring in x over the rationals.

There *is* a coercion to fP from the polyomial ring in y over the polynomial ring in x over the rationals:

```
sage: from sage.structure.element import get_coercion_model
sage: cm = get_coercion_model()
sage: fP = f.parent()
sage: cm.explain(fP, QQ[x][y])
Coercion on right operand via
    Conversion map:
      From: Univariate Polynomial Ring in y over Univariate Polynomial Ring in x over Rational Field
      To:   Univariate Polynomial Ring in y over Fraction Field of Univariate Polynomial Ring in x over Rational Field
Arithmetic performed after coercions.
Result lives in Univariate Polynomial Ring in y over Fraction Field of Univariate Polynomial Ring in x over Rational Field
Univariate Polynomial Ring in y over Fraction Field of Univariate Polynomial Ring in x over Rational Field
```

However, there is no such coercion from the bivariate polynomial ring in x and y over the rationals:

```
sage: cm.explain(fP, QQ[x,y])
Will try _r_action and _l_action
Unknown result parent.
```

I think there should be such coercion! What do you think? I guess I'll also ask sage-devel.



---

archive/issue_comments_003631.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nFor the record: I did post on [sage-algebra](http://groups.google.com/group/sage-algebra/browse_thread/thread/7f884449de17bb31), not sage-devel.\n\nThere, I argued that there should be no coercion/pushout between `QQ[x][y]` and `QQ[y][x]`, even though there is a coercion between `QQ[x,y]` and `QQ[y,x]`. I wonder whether my argument is convincing, though.\n\nHowever, even in that case, I could imagine that with a little more effort one could modify the algorithm behind `sage.categories.pushout.pushout` so that the pushout of `Frac(QQ['x'])['y']` and `QQ['x','y']` is `Frac(QQ['x'])['y']`. Do we want that behaviour of the pushout?",
    "created_at": "2011-07-31T20:09:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/813#issuecomment-3631",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:7" align="right">comment:7</div>

For the record: I did post on [sage-algebra](http://groups.google.com/group/sage-algebra/browse_thread/thread/7f884449de17bb31), not sage-devel.

There, I argued that there should be no coercion/pushout between `QQ[x][y]` and `QQ[y][x]`, even though there is a coercion between `QQ[x,y]` and `QQ[y,x]`. I wonder whether my argument is convincing, though.

However, even in that case, I could imagine that with a little more effort one could modify the algorithm behind `sage.categories.pushout.pushout` so that the pushout of `Frac(QQ['x'])['y']` and `QQ['x','y']` is `Frac(QQ['x'])['y']`. Do we want that behaviour of the pushout?



---

archive/issue_events_007742.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-08-02T13:23:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20basic%20arithmetic",
    "label_color": "0000ff",
    "label_name": "c: basic arithmetic",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/813#event-7742"
}
```



---

archive/issue_events_007743.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-08-02T13:23:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20coercion",
    "label_color": "0000ff",
    "label_name": "c: coercion",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/813#event-7743"
}
```



---

archive/issue_comments_003632.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nMeanwhile I believe that this is *not* invalid. Namely, we have the following:\n\n```\nsage: from sage.categories.pushout import pushout\nsage: pushout(QQ['x','y'],Frac(QQ['x'])['y'])\nUnivariate Polynomial Ring in y over Fraction Field of Univariate Polynomial Ring in x over Rational Field\n```\n\nHence, arithmetic between `QQ['x','y']` and `Frac(QQ['x'])['y']` should work! But it doesn't:\n\n```\nsage: QQ['x','y'](1) + Frac(QQ['x'])['y'](1)\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n\n/home/king/Projekte/MeatAxe/meataxe-2.2.4/<ipython console> in <module>()\n\n/mnt/local/king/SAGE/sage-4.7.1.rc1/local/lib/python2.6/site-packages/sage/structure/element.so in sage.structure.element.RingElement.__add__ (sage/structure/element.c:11997)()\n\n/mnt/local/king/SAGE/sage-4.7.1.rc1/local/lib/python2.6/site-packages/sage/structure/coerce.so in sage.structure.coerce.CoercionModel_cache_maps.bin_op (sage/structure/coerce.c:7382)()\n\nTypeError: unsupported operand parent(s) for '+': 'Multivariate Polynomial Ring in x, y over Rational Field' and 'Univariate Polynomial Ring in y over Fraction Field of Univariate Polynomial Ring in x over Rational Field'\n```\n\nWhat is the problem? The conversion is fine:\n\n```\nsage: Frac(QQ['x'])['y'](QQ['x','y'](1))\n1\n```\n\nBut in fact there is no coercion into the pushout:\n\n```\nsage: pushout(QQ['x','y'],Frac(QQ['x'])['y']).has_coerce_map_from(QQ['x','y'])\nFalse\n```\n\nThat's a bug, I think.",
    "created_at": "2011-08-02T13:23:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/813#issuecomment-3632",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:8" align="right">comment:8</div>

Meanwhile I believe that this is *not* invalid. Namely, we have the following:

```
sage: from sage.categories.pushout import pushout
sage: pushout(QQ['x','y'],Frac(QQ['x'])['y'])
Univariate Polynomial Ring in y over Fraction Field of Univariate Polynomial Ring in x over Rational Field
```

Hence, arithmetic between `QQ['x','y']` and `Frac(QQ['x'])['y']` should work! But it doesn't:

```
sage: QQ['x','y'](1) + Frac(QQ['x'])['y'](1)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)

/home/king/Projekte/MeatAxe/meataxe-2.2.4/<ipython console> in <module>()

/mnt/local/king/SAGE/sage-4.7.1.rc1/local/lib/python2.6/site-packages/sage/structure/element.so in sage.structure.element.RingElement.__add__ (sage/structure/element.c:11997)()

/mnt/local/king/SAGE/sage-4.7.1.rc1/local/lib/python2.6/site-packages/sage/structure/coerce.so in sage.structure.coerce.CoercionModel_cache_maps.bin_op (sage/structure/coerce.c:7382)()

TypeError: unsupported operand parent(s) for '+': 'Multivariate Polynomial Ring in x, y over Rational Field' and 'Univariate Polynomial Ring in y over Fraction Field of Univariate Polynomial Ring in x over Rational Field'
```

What is the problem? The conversion is fine:

```
sage: Frac(QQ['x'])['y'](QQ['x','y'](1))
1
```

But in fact there is no coercion into the pushout:

```
sage: pushout(QQ['x','y'],Frac(QQ['x'])['y']).has_coerce_map_from(QQ['x','y'])
False
```

That's a bug, I think.



---

archive/issue_comments_003633.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nPS: In addition, since there is a coercion from `QQ['y','x']` to `QQ['x','y']`, it is conceivable that the pushout of `QQ['y','x']` with `Frac(QQ['x'])['y']` should be `Frac(QQ['x'])['y']` as well. But it isn't:\n\n```\nsage: pushout(QQ['y','x'],Frac(QQ['x'])['y'])\n---------------------------------------------------------------------------\nCoercionException                         Traceback (most recent call last)\n\n/home/king/Projekte/MeatAxe/meataxe-2.2.4/<ipython console> in <module>()\n\n/mnt/local/king/SAGE/sage-4.7.1.rc1/local/lib/python2.6/site-packages/sage/categories/pushout.pyc in pushout(R, S)\n   3072                     if Rc[-1] in Sc:\n   3073                         if Sc[-1] in Rc:\n-> 3074                             raise CoercionException, (\"Ambiguous Base Extension\", R, S)\n   3075                         else:\n   3076                             all = Sc.pop() * all\n\nCoercionException: ('Ambiguous Base Extension', Multivariate Polynomial Ring in y, x over Rational Field, Univariate Polynomial Ring in y over Fraction Field of Univariate Polynomial Ring in x over Rational Field)\n```",
    "created_at": "2011-08-02T13:25:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/813#issuecomment-3633",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:9" align="right">comment:9</div>

PS: In addition, since there is a coercion from `QQ['y','x']` to `QQ['x','y']`, it is conceivable that the pushout of `QQ['y','x']` with `Frac(QQ['x'])['y']` should be `Frac(QQ['x'])['y']` as well. But it isn't:

```
sage: pushout(QQ['y','x'],Frac(QQ['x'])['y'])
---------------------------------------------------------------------------
CoercionException                         Traceback (most recent call last)

/home/king/Projekte/MeatAxe/meataxe-2.2.4/<ipython console> in <module>()

/mnt/local/king/SAGE/sage-4.7.1.rc1/local/lib/python2.6/site-packages/sage/categories/pushout.pyc in pushout(R, S)
   3072                     if Rc[-1] in Sc:
   3073                         if Sc[-1] in Rc:
-> 3074                             raise CoercionException, ("Ambiguous Base Extension", R, S)
   3075                         else:
   3076                             all = Sc.pop() * all

CoercionException: ('Ambiguous Base Extension', Multivariate Polynomial Ring in y, x over Rational Field, Univariate Polynomial Ring in y over Fraction Field of Univariate Polynomial Ring in x over Rational Field)
```



---

archive/issue_comments_003634.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nHere is my plan for implementing a coercion of `P = QQ['x','y']` into `Q = Frac(QQ['x'])['y']`.\n\nSince conversion of P into Q works, we only need to make `Q._coerce_map_from_(P)` return True.\n\nLet p be an element of P. When converting p into Q, the multivariate polynomial p is transformed into a univeriate polynomial via p. This is done using `p._polynomial_(Q)`, which ultimately boils down to `Q(p.polynomial(P('y')))`:\n\n```\nsage: P = QQ['x','y']\nsage: p = P.gen(0)\nsage: Q = Frac(QQ['x'])['y']\nsage: Q(p.polynomial(P('y')))\nx\n```\n\n`p.polynomial(P('y')).parent()` lives in a stacked polynomial ring:\n\n```\nsage: p.polynomial(P('y')).parent()\nUnivariate Polynomial Ring in y over Univariate Polynomial Ring in x over Rational Field\n```\nThat stacked ring coerces into Q:\n\n```\nsage: Q.has_coerce_map_from(p.polynomial(P('y')).parent())\nTrue\n```\n\nConclusion: If we want to test whether a multivariate polynomial ring P coerces into a univariate polynomial ring Q in variable y, then we need to try and transform P into a *univariate* polynomial ring P' in variable y; here, we have `P'=QQ['x']['y']`. There is a coercion from P into Q if and only if there is a coercion from P' into Q.\n\nI already have a patch, but \"surprisingly\" the additional coercion yields some doctest errors in other places.",
    "created_at": "2011-08-02T14:24:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/813#issuecomment-3634",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:10" align="right">comment:10</div>

Here is my plan for implementing a coercion of `P = QQ['x','y']` into `Q = Frac(QQ['x'])['y']`.

Since conversion of P into Q works, we only need to make `Q._coerce_map_from_(P)` return True.

Let p be an element of P. When converting p into Q, the multivariate polynomial p is transformed into a univeriate polynomial via p. This is done using `p._polynomial_(Q)`, which ultimately boils down to `Q(p.polynomial(P('y')))`:

```
sage: P = QQ['x','y']
sage: p = P.gen(0)
sage: Q = Frac(QQ['x'])['y']
sage: Q(p.polynomial(P('y')))
x
```

`p.polynomial(P('y')).parent()` lives in a stacked polynomial ring:

```
sage: p.polynomial(P('y')).parent()
Univariate Polynomial Ring in y over Univariate Polynomial Ring in x over Rational Field
```
That stacked ring coerces into Q:

```
sage: Q.has_coerce_map_from(p.polynomial(P('y')).parent())
True
```

Conclusion: If we want to test whether a multivariate polynomial ring P coerces into a univariate polynomial ring Q in variable y, then we need to try and transform P into a *univariate* polynomial ring P' in variable y; here, we have `P'=QQ['x']['y']`. There is a coercion from P into Q if and only if there is a coercion from P' into Q.

I already have a patch, but "surprisingly" the additional coercion yields some doctest errors in other places.



---

archive/issue_comments_003635.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nThe problem with my approach is that it would create a bidirectional coercion, namely a coercion from `QQ['x','y']` to `QQ['x']['y']` in addition to the coercion from `QQ['x']['y']` to `QQ['x','y']` that already exists.\n\nBut I think I have an idea that would solve the problem.\n\nMy original idea was to have a coercion from P to Q if there is a coercion from `P.remove_var(Q.variable_name())` to `Q.base_ring()`. That created the bidirectional coercion.\n\nMy modified idea is to have the coercion from P to Q *only* if `P.remove_var(Q.variable_name())` is different from `Q.base_ring()`, but coerces into it. Hence, a coercion only takes place if the rings become more complicated, thus avoiding circles.\n\nThe tests in sage/rings/polynomial pass. I am now running all doc tests, and then I can hopefully submit my patch...",
    "created_at": "2011-08-02T15:38:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/813#issuecomment-3635",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:11" align="right">comment:11</div>

The problem with my approach is that it would create a bidirectional coercion, namely a coercion from `QQ['x','y']` to `QQ['x']['y']` in addition to the coercion from `QQ['x']['y']` to `QQ['x','y']` that already exists.

But I think I have an idea that would solve the problem.

My original idea was to have a coercion from P to Q if there is a coercion from `P.remove_var(Q.variable_name())` to `Q.base_ring()`. That created the bidirectional coercion.

My modified idea is to have the coercion from P to Q *only* if `P.remove_var(Q.variable_name())` is different from `Q.base_ring()`, but coerces into it. Hence, a coercion only takes place if the rings become more complicated, thus avoiding circles.

The tests in sage/rings/polynomial pass. I am now running all doc tests, and then I can hopefully submit my patch...



---

archive/issue_comments_003636.json:
```json
{
    "body": "Coercion from multivariate to univariate polynomial rings",
    "created_at": "2011-08-02T17:04:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/813#issuecomment-3636",
    "user": "https://github.com/simon-king-jena"
}
```

Coercion from multivariate to univariate polynomial rings



---

archive/issue_comments_003637.json:
```json
{
    "body": "Author: **Simon King**",
    "created_at": "2011-08-02T17:11:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/813#issuecomment-3637",
    "user": "https://github.com/simon-king-jena"
}
```

Author: **Simon King**



---

archive/issue_events_007744.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-08-02T17:11:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/813#event-7744"
}
```



---

archive/issue_comments_003638.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nAttachment: **[trac813_univariate_coerce_from_multivariate.patch.gz](https://github.com/sagemath/sage/files/ticket813/trac813_univariate_coerce_from_multivariate.patch.gz)**\n\nI think I was able to solve the problem. With my patch applied on top of sage-4.7.1.rc1, all tests seem to pass, and one can do\n\n```\n            sage: P = QQ['x','y']\n            sage: Q = Frac(QQ['x'])['y']\n            sage: Q.has_coerce_map_from(P)\n            True\n            sage: P.0+Q.0\n            y + x\n```\n\nIn order to avoid bidirectional coercions (that would break a lot of tests), I have\n\n```\n            sage: Q = QQ['x']['y']\n            sage: Q.has_coerce_map_from(P)\n            False\n            sage: Q.base_ring() is P.remove_var(Q.variable_name())\n            True\n```\n\nThe rule is: If `Q.base_ring() is P.remove_var(Q.variable_name())` then there can not be a coercion from the multivariate ring P to the univariate ring Q; in fact, there is a coercion in the opposite direction. But otherwise, there is a coercion if `Q.base_ring()` has a coercion from `P.remove_var(Q.variable_name())`.",
    "created_at": "2011-08-02T17:11:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/813#issuecomment-3638",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:12" align="right">comment:12</div>

Attachment: **[trac813_univariate_coerce_from_multivariate.patch.gz](https://github.com/sagemath/sage/files/ticket813/trac813_univariate_coerce_from_multivariate.patch.gz)**

I think I was able to solve the problem. With my patch applied on top of sage-4.7.1.rc1, all tests seem to pass, and one can do

```
            sage: P = QQ['x','y']
            sage: Q = Frac(QQ['x'])['y']
            sage: Q.has_coerce_map_from(P)
            True
            sage: P.0+Q.0
            y + x
```

In order to avoid bidirectional coercions (that would break a lot of tests), I have

```
            sage: Q = QQ['x']['y']
            sage: Q.has_coerce_map_from(P)
            False
            sage: Q.base_ring() is P.remove_var(Q.variable_name())
            True
```

The rule is: If `Q.base_ring() is P.remove_var(Q.variable_name())` then there can not be a coercion from the multivariate ring P to the univariate ring Q; in fact, there is a coercion in the opposite direction. But otherwise, there is a coercion if `Q.base_ring()` has a coercion from `P.remove_var(Q.variable_name())`.



---

archive/issue_comments_003639.json:
```json
{
    "body": "Dependencies: **#9944**",
    "created_at": "2011-08-02T17:11:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/813#issuecomment-3639",
    "user": "https://github.com/simon-king-jena"
}
```

Dependencies: **#9944**



---

archive/issue_comments_003640.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nAny reviewer for a time-honoured ticket?",
    "created_at": "2011-08-30T10:28:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/813#issuecomment-3640",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:13" align="right">comment:13</div>

Any reviewer for a time-honoured ticket?



---

archive/issue_comments_003641.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nLooking at your patch, was `def univariate_ring(self, x):` added by purpose? Apart from that it seems to be a perfectly good solution as long as we can not have cyclic coercions.",
    "created_at": "2011-09-21T10:59:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/813#issuecomment-3641",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:14" align="right">comment:14</div>

Looking at your patch, was `def univariate_ring(self, x):` added by purpose? Apart from that it seems to be a perfectly good solution as long as we can not have cyclic coercions.



---

archive/issue_comments_003642.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nbtw., doctests pass when applied to 4.7.2.alpha2.",
    "created_at": "2011-09-21T12:17:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/813#issuecomment-3642",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:15" align="right">comment:15</div>

btw., doctests pass when applied to 4.7.2.alpha2.



---

archive/issue_events_007745.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2011-09-21T12:17:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/813#event-7745"
}
```



---

archive/issue_events_007746.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2011-09-21T12:17:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/813#event-7746"
}
```



---

archive/issue_events_007747.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-09-21T13:00:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/813#event-7747"
}
```



---

archive/issue_events_007748.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2011-09-21T13:00:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/813#event-7748"
}
```



---

archive/issue_comments_003643.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@saraedum](#comment%3A14):\n> Looking at your patch, was `def univariate_ring(self, x):` added by purpose? \n\nGood question. I think it was meant as analogy to the method `univariate_polynomial` of multivariate polynomials. But really, it seems unneeded to have that method. Could probably be dropped, if you prefer (needs to be tested, though).",
    "created_at": "2011-09-21T13:00:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/813#issuecomment-3643",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@saraedum](#comment%3A14):
> Looking at your patch, was `def univariate_ring(self, x):` added by purpose? 

Good question. I think it was meant as analogy to the method `univariate_polynomial` of multivariate polynomials. But really, it seems unneeded to have that method. Could probably be dropped, if you prefer (needs to be tested, though).



---

archive/issue_comments_003644.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nOk. In this case it makes sense to have this method. I made some minor changes to the docstrings.\n\nSorry, I created an extra attachment. Apply trac813_univariate_coerce_from_multivariate.patch, trac_813_review.2.patch.",
    "created_at": "2011-09-21T13:29:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/813#issuecomment-3644",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:18" align="right">comment:18</div>

Ok. In this case it makes sense to have this method. I made some minor changes to the docstrings.

Sorry, I created an extra attachment. Apply trac813_univariate_coerce_from_multivariate.patch, trac_813_review.2.patch.



---

archive/issue_comments_003645.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -14,3 +14,12 @@\n \n 0*P3.0+f\n ```\n+\n+---\n+\n+Apply\n+\n+1. [attachment: trac813_univariate_coerce_from_multivariate.patch](https://github.com/sagemath/sage/files/ticket813/trac813_univariate_coerce_from_multivariate.patch.gz)\n+2. [attachment: trac_813_review.2.patch](https://github.com/sagemath/sage/files/ticket813/trac_813_review.2.patch.gz)\n+\n+to the sage repository.\n``````\n",
    "created_at": "2011-09-21T13:29:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/813#issuecomment-3645",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -14,3 +14,12 @@
 
 0*P3.0+f
 ```
+
+---
+
+Apply
+
+1. [attachment: trac813_univariate_coerce_from_multivariate.patch](https://github.com/sagemath/sage/files/ticket813/trac813_univariate_coerce_from_multivariate.patch.gz)
+2. [attachment: trac_813_review.2.patch](https://github.com/sagemath/sage/files/ticket813/trac_813_review.2.patch.gz)
+
+to the sage repository.
``````




---

archive/issue_events_007749.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2011-09-21T13:29:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/813#event-7749"
}
```



---

archive/issue_events_007750.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2011-09-21T13:29:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/813#event-7750"
}
```



---

archive/issue_comments_003646.json:
```json
{
    "body": "Reviewer: **Julian Rueth**",
    "created_at": "2011-09-21T13:29:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/813#issuecomment-3646",
    "user": "https://github.com/saraedum"
}
```

Reviewer: **Julian Rueth**



---

archive/issue_comments_003647.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nApply trac813_univariate_coerce_from_multivariate.patch, trac_813_review.2.patch.",
    "created_at": "2011-09-21T13:30:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/813#issuecomment-3647",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:19" align="right">comment:19</div>

Apply trac813_univariate_coerce_from_multivariate.patch, trac_813_review.2.patch.



---

archive/issue_comments_003648.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nApply trac813_univariate_coerce_from_multivariate.patch, trac_813_review.patch\n\nSorry, struggling with the patchbot.",
    "created_at": "2011-09-21T13:34:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/813#issuecomment-3648",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:20" align="right">comment:20</div>

Apply trac813_univariate_coerce_from_multivariate.patch, trac_813_review.patch

Sorry, struggling with the patchbot.



---

archive/issue_comments_003649.json:
```json
{
    "body": "Description changed:\n``````diff\n\n``````\n",
    "created_at": "2011-09-21T13:34:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/813#issuecomment-3649",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff

``````




---

archive/issue_events_007751.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-23T10:26:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/813#event-7751"
}
```



---

archive/issue_events_007752.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-23T10:26:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/813#event-7752"
}
```



---

archive/issue_comments_003650.json:
```json
{
    "body": "Replying to [@nbruin](https://github.com/sagemath/sage/issues/813#comment:0):\n> Apply \n\n> \n\n> 1. [attachment: trac813_univariate_coerce_from_multivariate.patch](https://github.com/sagemath/sage/files/ticket813/trac813_univariate_coerce_from_multivariate.patch.gz) \n\n> 2. [attachment: trac_813_review.2.patch](https://github.com/sagemath/sage/files/ticket813/trac_813_review.2.patch.gz) \n\n> \n\n> to the sage repository.\n\n? The attachment comment of the second file says *\"ignore this file\"*, and the \"patch\" is only 17 bytes in total...\n\nSo I guess the description should be updated, to apply the [\"old\" reviewer patch](https://github.com/sagemath/sage/files/ticket813/trac_813_review.patch.gz).",
    "created_at": "2011-09-23T10:26:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/813#issuecomment-3650",
    "user": "https://github.com/nexttime"
}
```

Replying to [@nbruin](https://github.com/sagemath/sage/issues/813#comment:0):
> Apply 

> 

> 1. [attachment: trac813_univariate_coerce_from_multivariate.patch](https://github.com/sagemath/sage/files/ticket813/trac813_univariate_coerce_from_multivariate.patch.gz) 

> 2. [attachment: trac_813_review.2.patch](https://github.com/sagemath/sage/files/ticket813/trac_813_review.2.patch.gz) 

> 

> to the sage repository.

? The attachment comment of the second file says *"ignore this file"*, and the "patch" is only 17 bytes in total...

So I guess the description should be updated, to apply the ["old" reviewer patch](https://github.com/sagemath/sage/files/ticket813/trac_813_review.patch.gz).



---

archive/issue_comments_003651.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nsure. sorry, only updated the patchbot instructions but not the ticket description.",
    "created_at": "2011-09-23T10:48:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/813#issuecomment-3651",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:22" align="right">comment:22</div>

sure. sorry, only updated the patchbot instructions but not the ticket description.



---

archive/issue_comments_003652.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -20,6 +20,6 @@\n Apply\n \n 1. [attachment: trac813_univariate_coerce_from_multivariate.patch](https://github.com/sagemath/sage/files/ticket813/trac813_univariate_coerce_from_multivariate.patch.gz)\n-2. [attachment: trac_813_review.2.patch](https://github.com/sagemath/sage/files/ticket813/trac_813_review.2.patch.gz)\n+2. [attachment: trac_813_review.patch](https://github.com/sagemath/sage/files/ticket813/trac_813_review.patch.gz)\n \n to the sage repository.\n``````\n",
    "created_at": "2011-09-23T10:48:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/813#issuecomment-3652",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -20,6 +20,6 @@
 Apply
 
 1. [attachment: trac813_univariate_coerce_from_multivariate.patch](https://github.com/sagemath/sage/files/ticket813/trac813_univariate_coerce_from_multivariate.patch.gz)
-2. [attachment: trac_813_review.2.patch](https://github.com/sagemath/sage/files/ticket813/trac_813_review.2.patch.gz)
+2. [attachment: trac_813_review.patch](https://github.com/sagemath/sage/files/ticket813/trac_813_review.patch.gz)
 
 to the sage repository.
``````




---

archive/issue_events_007753.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2011-09-23T10:48:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/813#event-7753"
}
```



---

archive/issue_events_007754.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2011-09-23T10:48:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/813#event-7754"
}
```



---

archive/issue_events_007755.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2011-09-23T10:48:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/813#event-7755"
}
```



---

archive/issue_events_007756.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2011-09-23T10:48:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/813#event-7756"
}
```



---

archive/issue_comments_003653.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nOk, I've deleted the 17 bytes...",
    "created_at": "2011-09-23T11:04:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/813#issuecomment-3653",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:24" align="right">comment:24</div>

Ok, I've deleted the 17 bytes...



---

archive/issue_comments_003654.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -22,4 +22,5 @@\n 1. [attachment: trac813_univariate_coerce_from_multivariate.patch](https://github.com/sagemath/sage/files/ticket813/trac813_univariate_coerce_from_multivariate.patch.gz)\n 2. [attachment: trac_813_review.patch](https://github.com/sagemath/sage/files/ticket813/trac_813_review.patch.gz)\n \n-to the sage repository.\n+to the Sage library repository.\n+\n``````\n",
    "created_at": "2011-09-23T11:04:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/813#issuecomment-3654",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -22,4 +22,5 @@
 1. [attachment: trac813_univariate_coerce_from_multivariate.patch](https://github.com/sagemath/sage/files/ticket813/trac813_univariate_coerce_from_multivariate.patch.gz)
 2. [attachment: trac_813_review.patch](https://github.com/sagemath/sage/files/ticket813/trac_813_review.patch.gz)
 
-to the sage repository.
+to the Sage library repository.
+
``````




---

archive/issue_events_007757.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-27T17:42:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/813#event-7757"
}
```



---

archive/issue_events_007758.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-27T17:42:14Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/813#event-7758"
}
```



---

archive/issue_comments_003655.json:
```json
{
    "body": "Merged: **sage-4.7.2.alpha3**",
    "created_at": "2011-09-27T17:42:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/813#issuecomment-3655",
    "user": "https://github.com/nexttime"
}
```

Merged: **sage-4.7.2.alpha3**



---

archive/issue_comments_003656.json:
```json
{
    "body": "Attachment: **[trac_813_review.patch.gz](https://github.com/sagemath/sage/files/ticket813/trac_813_review.patch.gz)**\n\nsmall changes to docstrings",
    "created_at": "2011-10-04T10:11:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/813#issuecomment-3656",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[trac_813_review.patch.gz](https://github.com/sagemath/sage/files/ticket813/trac_813_review.patch.gz)**

small changes to docstrings
