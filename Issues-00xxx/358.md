# Issue 358: [with positive review] padic_height_pairing_matrix computes too many heights

archive/issues_000358.json:
```json
{
    "body": "The function `padic_height_pairing_matrix()` is a bit lazy. It should do less work along the diagonal. e.g. for rank 2, if the generators are P and Q, it computes h(P), h(Q), h(P+Q), h(P+P), h(Q+Q). Clearly the last two are silly.\n\n\nAssignee: @williamstein\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/358\n\n",
    "closed_at": "2008-04-06T17:06:15Z",
    "created_at": "2007-04-25T22:39:16Z",
    "labels": [
        "component: algebraic geometry",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-3.0",
    "title": "[with positive review] padic_height_pairing_matrix computes too many heights",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/358",
    "user": "https://trac.sagemath.org/admin/accounts/users/dmharvey"
}
```
The function `padic_height_pairing_matrix()` is a bit lazy. It should do less work along the diagonal. e.g. for rank 2, if the generators are P and Q, it computes h(P), h(Q), h(P+Q), h(P+P), h(Q+Q). Clearly the last two are silly.


Assignee: @williamstein

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/358





---

archive/issue_events_000925.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2007-12-05T04:22:08Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/358",
    "milestone": "sage-2.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/358#event-925"
}
```



---

archive/issue_events_000926.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/358",
    "rename": {
        "from": "padic_height_pairing_matrix computes too many heights",
        "to": "[needs simple review] padic_height_pairing_matrix computes too many heights"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/358#event-926"
}
```



---

archive/issue_comments_001844.json:
```json
{
    "body": "<a id='comment:3'></a>\nAttachment [trac_358.patch](tarball://root/attachments/some-uuid/ticket358/trac_358.patch) by @JohnCremona created at 2008-04-06 14:56:05\n\nDone.  Patch based on 3.0.alpha1",
    "created_at": "2008-04-06T14:56:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/358#issuecomment-1844",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:3'></a>
Attachment [trac_358.patch](tarball://root/attachments/some-uuid/ticket358/trac_358.patch) by @JohnCremona created at 2008-04-06 14:56:05

Done.  Patch based on 3.0.alpha1



---

archive/issue_comments_001845.json:
```json
{
    "body": "<a id='comment:4'></a>\nActually, it looks like someone has already fixed this ticket a while ago. John, I don't think your patch actually does anything significantly different, it just looks like a code rearrangement? (Although I do prefer the way you have written it to what was there before.)",
    "created_at": "2008-04-06T15:35:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/358#issuecomment-1845",
    "user": "https://trac.sagemath.org/admin/accounts/users/dmharvey"
}
```

<a id='comment:4'></a>
Actually, it looks like someone has already fixed this ticket a while ago. John, I don't think your patch actually does anything significantly different, it just looks like a code rearrangement? (Although I do prefer the way you have written it to what was there before.)



---

archive/issue_events_000927.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/358",
    "rename": {
        "from": "[needs simple review] padic_height_pairing_matrix computes too many heights",
        "to": "[with review] padic_height_pairing_matrix computes too many heights"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/358#event-927"
}
```



---

archive/issue_comments_001846.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [dmharvey](#comment%3A4):\n> Actually, it looks like someone has already fixed this ticket a while ago. John, I don't think your patch actually does anything significantly different, it just looks like a code rearrangement? (Although I do prefer the way you have written it to what was there before.)\n\n\nOK, you are right.  I thought it was pointless to store the heights in a separate array and then put them in the matrix diagonal later.  So you can decide whether or not this patch should get used, and either way the ticket can be closed!",
    "created_at": "2008-04-06T16:32:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/358#issuecomment-1846",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:5'></a>
Replying to [dmharvey](#comment%3A4):
> Actually, it looks like someone has already fixed this ticket a while ago. John, I don't think your patch actually does anything significantly different, it just looks like a code rearrangement? (Although I do prefer the way you have written it to what was there before.)


OK, you are right.  I thought it was pointless to store the heights in a separate array and then put them in the matrix diagonal later.  So you can decide whether or not this patch should get used, and either way the ticket can be closed!



---

archive/issue_events_000928.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/358",
    "rename": {
        "from": "[with review] padic_height_pairing_matrix computes too many heights",
        "to": "[with positive review] padic_height_pairing_matrix computes too many heights"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/358#event-928"
}
```



---

archive/issue_comments_001847.json:
```json
{
    "body": "<a id='comment:6'></a>\nI agree. Passes tests for me, so let's merge it.",
    "created_at": "2008-04-06T16:39:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/358#issuecomment-1847",
    "user": "https://trac.sagemath.org/admin/accounts/users/dmharvey"
}
```

<a id='comment:6'></a>
I agree. Passes tests for me, so let's merge it.



---

archive/issue_events_000929.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-04-06T17:06:15Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/358",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/358#event-929"
}
```



---

archive/issue_comments_001848.json:
```json
{
    "body": "<a id='comment:7'></a>\nMerged in Sage 3.0.alpha2",
    "created_at": "2008-04-06T17:06:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/358#issuecomment-1848",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:7'></a>
Merged in Sage 3.0.alpha2



---

archive/issue_comments_001849.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2008-04-06T17:06:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/358#issuecomment-1849",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

Resolution: fixed
