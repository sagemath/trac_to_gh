# Issue 358: padic_height_pairing_matrix computes too many heights

archive/issues_000358.json:
```json
{
    "assignees": [],
    "body": "The function `padic_height_pairing_matrix()` is a bit lazy. It should do less work along the diagonal. e.g. for rank 2, if the generators are P and Q, it computes h(P), h(Q), h(P+Q), h(P+P), h(Q+Q). Clearly the last two are silly.\n\n\nAssignee: **@williamstein**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/358_\n\n",
    "closed_at": "2008-04-06T17:06:15Z",
    "created_at": "2007-04-25T22:39:16Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20algebraic%20geometry",
        "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-3.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "padic_height_pairing_matrix computes too many heights",
    "type": "issue",
    "updated_at": "2008-04-06T17:06:15Z",
    "url": "https://github.com/sagemath/sage/issues/358",
    "user": "https://github.com/sagetrac-dmharvey"
}
```
The function `padic_height_pairing_matrix()` is a bit lazy. It should do less work along the diagonal. e.g. for rank 2, if the generators are P and Q, it computes h(P), h(Q), h(P+Q), h(P+P), h(Q+Q). Clearly the last two are silly.


Assignee: **@williamstein**

_Issue created by migration from https://trac.sagemath.org/ticket/358_





---

archive/issue_events_002609.json:
```json
{
    "actor": "https://github.com/sagetrac-dmharvey",
    "created_at": "2007-04-25T22:39:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/358",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20algebraic%20geometry",
    "label_color": "0000ff",
    "label_name": "component: algebraic geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/358#event-2609"
}
```



---

archive/issue_events_002610.json:
```json
{
    "actor": "https://github.com/sagetrac-dmharvey",
    "created_at": "2007-04-25T22:39:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/358",
    "label": "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/358#event-2610"
}
```



---

archive/issue_events_002611.json:
```json
{
    "actor": "https://github.com/sagetrac-dmharvey",
    "created_at": "2007-04-25T22:39:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/358",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/358#event-2611"
}
```



---

archive/issue_events_002612.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2007-09-10T02:20:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/358",
    "milestone_number": null,
    "milestone_title": "sage-3.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/358#event-2612"
}
```



---

archive/issue_events_002613.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2007-12-05T04:22:08Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/358",
    "milestone_number": null,
    "milestone_title": "sage-2.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/358#event-2613"
}
```



---

archive/issue_events_002614.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2008-04-06T14:56:05Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/358",
    "title_is": "[needs simple review] padic_height_pairing_matrix computes too many heights",
    "title_was": "padic_height_pairing_matrix computes too many heights",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/358#event-2614"
}
```



---

archive/issue_comments_001296.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nAttachment: **[trac_358.patch.gz](https://github.com/sagemath/sage/files/ticket358/trac_358.patch.gz)**\n\nDone.  Patch based on 3.0.alpha1",
    "created_at": "2008-04-06T14:56:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/358#issuecomment-1296",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:3'>Comment 3:</a>
Attachment: **[trac_358.patch.gz](https://github.com/sagemath/sage/files/ticket358/trac_358.patch.gz)**

Done.  Patch based on 3.0.alpha1



---

archive/issue_comments_001297.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nActually, it looks like someone has already fixed this ticket a while ago. John, I don't think your patch actually does anything significantly different, it just looks like a code rearrangement? (Although I do prefer the way you have written it to what was there before.)",
    "created_at": "2008-04-06T15:35:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/358#issuecomment-1297",
    "user": "https://github.com/sagetrac-dmharvey"
}
```

<a id='comment:4'>Comment 4:</a>
Actually, it looks like someone has already fixed this ticket a while ago. John, I don't think your patch actually does anything significantly different, it just looks like a code rearrangement? (Although I do prefer the way you have written it to what was there before.)



---

archive/issue_events_002615.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2008-04-06T16:32:41Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/358",
    "title_is": "[with review] padic_height_pairing_matrix computes too many heights",
    "title_was": "[needs simple review] padic_height_pairing_matrix computes too many heights",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/358#event-2615"
}
```



---

archive/issue_comments_001298.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nReplying to [dmharvey](#comment%3A4):\n> Actually, it looks like someone has already fixed this ticket a while ago. John, I don't think your patch actually does anything significantly different, it just looks like a code rearrangement? (Although I do prefer the way you have written it to what was there before.)\n\nOK, you are right.  I thought it was pointless to store the heights in a separate array and then put them in the matrix diagonal later.  So you can decide whether or not this patch should get used, and either way the ticket can be closed!",
    "created_at": "2008-04-06T16:32:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/358#issuecomment-1298",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:5'>Comment 5:</a>
Replying to [dmharvey](#comment%3A4):
> Actually, it looks like someone has already fixed this ticket a while ago. John, I don't think your patch actually does anything significantly different, it just looks like a code rearrangement? (Although I do prefer the way you have written it to what was there before.)

OK, you are right.  I thought it was pointless to store the heights in a separate array and then put them in the matrix diagonal later.  So you can decide whether or not this patch should get used, and either way the ticket can be closed!



---

archive/issue_events_002616.json:
```json
{
    "actor": "https://github.com/sagetrac-dmharvey",
    "created_at": "2008-04-06T16:39:19Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/358",
    "title_is": "padic_height_pairing_matrix computes too many heights",
    "title_was": "[with review] padic_height_pairing_matrix computes too many heights",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/358#event-2616"
}
```



---

archive/issue_events_002617.json:
```json
{
    "actor": "https://github.com/sagetrac-dmharvey",
    "created_at": "2008-04-06T16:39:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/358",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/358#event-2617"
}
```



---

archive/issue_comments_001299.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nI agree. Passes tests for me, so let's merge it.",
    "created_at": "2008-04-06T16:39:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/358#issuecomment-1299",
    "user": "https://github.com/sagetrac-dmharvey"
}
```

<a id='comment:6'>Comment 6:</a>
I agree. Passes tests for me, so let's merge it.



---

archive/issue_events_002618.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-04-06T17:06:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/358",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/358#event-2618"
}
```



---

archive/issue_events_002619.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-04-06T17:06:15Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/358",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/358#event-2619"
}
```



---

archive/issue_comments_001300.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nMerged in Sage 3.0.alpha2",
    "created_at": "2008-04-06T17:06:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/358#issuecomment-1300",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:7'>Comment 7:</a>
Merged in Sage 3.0.alpha2
