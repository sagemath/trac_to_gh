# Issue 336: [with patch; positive review] Create an option to clear all cell output

archive/issues_000336.json:
```json
{
    "body": "I am homeschooled and doing programming in the notebook for credit. I would like to clear all of the output on my worksheets so I can print the code for the worksheet without the computer generated output.\n\nAssignee: boothby\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/336\n\n",
    "closed_at": "2008-05-11T07:25:47Z",
    "created_at": "2007-03-27T18:20:31Z",
    "labels": [
        "component: notebook",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-3.0.2",
    "title": "[with patch; positive review] Create an option to clear all cell output",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/336",
    "user": "https://trac.sagemath.org/admin/accounts/users/TimothyClemans"
}
```
I am homeschooled and doing programming in the notebook for credit. I would like to clear all of the output on my worksheets so I can print the code for the worksheet without the computer generated output.

Assignee: boothby

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/336





---

archive/issue_events_000788.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2007-09-11T00:51:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/336",
    "milestone": "sage-feature",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/336#event-788"
}
```



---

archive/issue_comments_001645.json:
```json
{
    "body": "<a id='comment:2'></a>The attached patch does the following:\n\n```\nFix trac #336 -- \"delete all output\" for the Sage notebook worksheets.  Also:\n   1. Changed \"Revisions\" to \"Undo\" in the notebook, since it is clearer.\n   2. Added several new functions needed to implement #336 and fully documented\n      and doctested all of them.  This meant improving the functions that\n      support writing doctests for the notebook, and doctesting those \n      functions too.  Doctesting of the notebook is thus actually *greatly*\n      improved by this patch.\n   3. Made some fixes to doctests also so that parallel doctesting works.    \n      In particular, avoid clashes in temp notebook names. \n   4. Created a cell \"evaluated\" function to keep track of whether or not\n      cells have been evaluated.  I did this in order to non-hackishly \n      implement \"delete all output\".  It will also be very useful for other\n      tickets.   I added a lot of doctesting related to this too. \n   5. Added a worksheet function user_can_edit to double check that the\n      given user can edit the worksheet; this is used by the \"delete all output\" \n      code as a double check that invalid users can't delete all output. \n```\n\nTo test it do the following:\n1. apply the patch and build\n2. Make a worksheet and selected \"Action -> Delete all output\"\n3. Note that all output is gone.  Click refresh to see that the server got the message\n4. Doctest the sage/server/notebook directory.  It has a bunch of new doctests.\n5. Read over the patch itself to see how it's all implemented:\n       * some javascript to delete the output from the DOM\n       * some server-side python code to do the actual deleting\n       * some general server-side code to improving doctesting of the notebook.\n       * general doc improvements.",
    "created_at": "2008-05-10T19:54:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/336#issuecomment-1645",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:2'></a>The attached patch does the following:

```
Fix trac #336 -- "delete all output" for the Sage notebook worksheets.  Also:
   1. Changed "Revisions" to "Undo" in the notebook, since it is clearer.
   2. Added several new functions needed to implement #336 and fully documented
      and doctested all of them.  This meant improving the functions that
      support writing doctests for the notebook, and doctesting those 
      functions too.  Doctesting of the notebook is thus actually *greatly*
      improved by this patch.
   3. Made some fixes to doctests also so that parallel doctesting works.    
      In particular, avoid clashes in temp notebook names. 
   4. Created a cell "evaluated" function to keep track of whether or not
      cells have been evaluated.  I did this in order to non-hackishly 
      implement "delete all output".  It will also be very useful for other
      tickets.   I added a lot of doctesting related to this too. 
   5. Added a worksheet function user_can_edit to double check that the
      given user can edit the worksheet; this is used by the "delete all output" 
      code as a double check that invalid users can't delete all output. 
```

To test it do the following:
1. apply the patch and build
2. Make a worksheet and selected "Action -> Delete all output"
3. Note that all output is gone.  Click refresh to see that the server got the message
4. Doctest the sage/server/notebook directory.  It has a bunch of new doctests.
5. Read over the patch itself to see how it's all implemented:
       * some javascript to delete the output from the DOM
       * some server-side python code to do the actual deleting
       * some general server-side code to improving doctesting of the notebook.
       * general doc improvements.



---

archive/issue_comments_001646.json:
```json
{
    "body": "Attachment [sage-336.patch](tarball://root/attachments/some-uuid/ticket336/sage-336.patch) by @williamstein created at 2008-05-10 19:54:50",
    "created_at": "2008-05-10T19:54:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/336#issuecomment-1646",
    "user": "https://github.com/williamstein"
}
```

Attachment [sage-336.patch](tarball://root/attachments/some-uuid/ticket336/sage-336.patch) by @williamstein created at 2008-05-10 19:54:50



---

archive/issue_comments_001647.json:
```json
{
    "body": "<a id='comment:3'></a>One doctest failure\n\n```\nFile \"/home/tclemans/sage-3.0/tmp/notebook.py\", line 133:\n    sage: os.listdir('notebook-test')\nExpected:\n    ['backups', 'nb.sobj', 'objects', 'worksheets']\nGot:\n    ['worksheets', 'objects', 'backups', 'nb.sobj']\n```",
    "created_at": "2008-05-11T03:37:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/336#issuecomment-1647",
    "user": "https://trac.sagemath.org/admin/accounts/users/TimothyClemans"
}
```

<a id='comment:3'></a>One doctest failure

```
File "/home/tclemans/sage-3.0/tmp/notebook.py", line 133:
    sage: os.listdir('notebook-test')
Expected:
    ['backups', 'nb.sobj', 'objects', 'worksheets']
Got:
    ['worksheets', 'objects', 'backups', 'nb.sobj']
```



---

archive/issue_comments_001648.json:
```json
{
    "body": "<a id='comment:4'></a>Attachment [336_doctestfix.patch](tarball://root/attachments/some-uuid/ticket336/336_doctestfix.patch) by TimothyClemans created at 2008-05-11 04:02:38\n\nPositive review with doctestfix patch. I didn't really do 5 except I did look at the doctest stuff.",
    "created_at": "2008-05-11T04:02:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/336#issuecomment-1648",
    "user": "https://trac.sagemath.org/admin/accounts/users/TimothyClemans"
}
```

<a id='comment:4'></a>Attachment [336_doctestfix.patch](tarball://root/attachments/some-uuid/ticket336/336_doctestfix.patch) by TimothyClemans created at 2008-05-11 04:02:38

Positive review with doctestfix patch. I didn't really do 5 except I did look at the doctest stuff.



---

archive/issue_events_000789.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-05-11T07:25:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/336",
    "milestone": "sage-feature",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/336#event-789"
}
```



---

archive/issue_events_000790.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-05-11T07:25:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/336",
    "milestone": "sage-3.0.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/336#event-790"
}
```



---

archive/issue_events_000791.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-05-11T07:25:47Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/336",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/336#event-791"
}
```



---

archive/issue_comments_001649.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2008-05-11T07:25:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/336#issuecomment-1649",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

Resolution: fixed



---

archive/issue_comments_001650.json:
```json
{
    "body": "<a id='comment:5'></a>Merged in Sage 3.0.2.alpha0",
    "created_at": "2008-05-11T07:25:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/336",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/336#issuecomment-1650",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:5'></a>Merged in Sage 3.0.2.alpha0
