# Issue 590: document extended_rational_field.py

archive/issues_000590.json:
```json
{
    "body": "The rings/extended_rational_field.py file is terribly documented.  There are no doctests, no copyright notice, no author, etc.   I think David Roe wrote this:\n\nwas@ubuntu:~/d/sage/sage/rings$ sage -coverage extended_rational_field.py\n\n---\nextended_rational_field.py\nERROR: Please define a s == loads(dumps(s)) doctest.\nOVERALL SCORE: 0%  (2 good, 71 bad)\n\nMissing documentation:\n* __init__(self)\n* _repr_(self)\n* _latex_(self)\n* __call__(self, x, base = 0)\n* _coerce_impl(self, x)\n* _is_valid_homomorphism(self, codomain, im_gens)\n* __iter__(self)\n* complex_embedding(self, prec=53)\n* gens(self)\n* gen(self, n=0)\n* is_prime_field(self)\n* ngens(self)\n* numberfield(self, poly_var, nf_var)\n* __init__(self, x = None, base = 0)\n* __cmp__(self, other)\n* copy(self)\n* lcm(self, other)\n* square_root(self)\n* nth_root(self)\n* _add_(self, right)\n* _sub_(self, right)\n* _neg_(self)\n* _mul_(self, right)\n* _div_(self, right)\n* __invert__(self)\n* __pow__(self, n)\n* __abs__(self)\n* floor(self)\n* ceil(self)\n* __lshift__(self, n)\n* __rshift__(self, n)\n* __init__(self)\n* __cmp__(self, other)\n* __repr__(self)\n* _latex_(self)\n* _add_(self, other)\n* _mul_(self, other)\n* _sub_(self, other)\n* _div_(self, other)\n* _neg_(self)\n* __invert__(self)\n* __abs__(self)\n* __pow__(self, right)\n* sqrt(self)\n* square_root(self)\n* nth_root(self, n)\n* floor(self)\n* ceil(self)\n* numerator(self)\n* denominator(self)\n* __init__(self)\n* __cmp__(self, other)\n* _repr_(self)\n* _latex_(self)\n* _add_(self, other)\n* _mul_(self, other)\n* _sub_(self, other)\n* _div_(self, other)\n* _neg_(self)\n* __invert__(self)\n* __abs__(self)\n* __pow__(self, right)\n* sqrt(self)\n* square_root(self)\n* nth_root(self, n)\n* floor(self)\n* ceil(self)\n* numerator(self)\n* denominator(self)\n\n\nMissing doctests:\n* numerator(self)\n* denominator(self)\n\n\n\n**Assignee:** @mwhansen\n\nIssue created by migration from https://trac.sagemath.org/ticket/590\n\n",
    "closed_at": "2008-03-04T03:53:52Z",
    "created_at": "2007-09-05T15:37:42Z",
    "labels": [
        "component: basic arithmetic",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-2.10.3",
    "title": "document extended_rational_field.py",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/590",
    "user": "https://github.com/williamstein"
}
```
The rings/extended_rational_field.py file is terribly documented.  There are no doctests, no copyright notice, no author, etc.   I think David Roe wrote this:

was@ubuntu:~/d/sage/sage/rings$ sage -coverage extended_rational_field.py

---
extended_rational_field.py
ERROR: Please define a s == loads(dumps(s)) doctest.
OVERALL SCORE: 0%  (2 good, 71 bad)

Missing documentation:
* __init__(self)
* _repr_(self)
* _latex_(self)
* __call__(self, x, base = 0)
* _coerce_impl(self, x)
* _is_valid_homomorphism(self, codomain, im_gens)
* __iter__(self)
* complex_embedding(self, prec=53)
* gens(self)
* gen(self, n=0)
* is_prime_field(self)
* ngens(self)
* numberfield(self, poly_var, nf_var)
* __init__(self, x = None, base = 0)
* __cmp__(self, other)
* copy(self)
* lcm(self, other)
* square_root(self)
* nth_root(self)
* _add_(self, right)
* _sub_(self, right)
* _neg_(self)
* _mul_(self, right)
* _div_(self, right)
* __invert__(self)
* __pow__(self, n)
* __abs__(self)
* floor(self)
* ceil(self)
* __lshift__(self, n)
* __rshift__(self, n)
* __init__(self)
* __cmp__(self, other)
* __repr__(self)
* _latex_(self)
* _add_(self, other)
* _mul_(self, other)
* _sub_(self, other)
* _div_(self, other)
* _neg_(self)
* __invert__(self)
* __abs__(self)
* __pow__(self, right)
* sqrt(self)
* square_root(self)
* nth_root(self, n)
* floor(self)
* ceil(self)
* numerator(self)
* denominator(self)
* __init__(self)
* __cmp__(self, other)
* _repr_(self)
* _latex_(self)
* _add_(self, other)
* _mul_(self, other)
* _sub_(self, other)
* _div_(self, other)
* _neg_(self)
* __invert__(self)
* __abs__(self)
* __pow__(self, right)
* sqrt(self)
* square_root(self)
* nth_root(self, n)
* floor(self)
* ceil(self)
* numerator(self)
* denominator(self)


Missing doctests:
* numerator(self)
* denominator(self)



**Assignee:** @mwhansen

Issue created by migration from https://trac.sagemath.org/ticket/590





---

archive/issue_comments_002576.json:
```json
{
    "body": "**Changing assignee** from @roed314 to @mwhansen.",
    "created_at": "2008-02-29T06:38:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/590#issuecomment-2576",
    "user": "https://github.com/mwhansen"
}
```

**Changing assignee** from @roed314 to @mwhansen.



---

archive/issue_comments_002577.json:
```json
{
    "body": "**Changing status** from new to assigned.",
    "created_at": "2008-02-29T06:38:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/590#issuecomment-2577",
    "user": "https://github.com/mwhansen"
}
```

**Changing status** from new to assigned.



---

archive/issue_comments_002578.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2008-02-29T07:27:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/590#issuecomment-2578",
    "user": "https://github.com/mwhansen"
}
```

**Changing status** from new to needs_review.



---

archive/attachments_000240.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "590.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket590/590.patch",
    "created_at": "2008-02-29T07:34:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/590",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/mwhansen"
}
```



---

archive/issue_comments_002579.json:
```json
{
    "body": "",
    "created_at": "2008-02-29T07:34:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/590#issuecomment-2579",
    "user": "https://github.com/mwhansen"
}
```





---

archive/issue_comments_002580.json:
```json
{
    "body": "<a id='comment:3'></a>\nI'm mostly happy with this patch; I have a few questions.\n\n* What is `IntegerWrapper`? That's been added with no explanation at all, and I don't understand its purpose. Is it really necessary? If so, there needs to be some documentation.\n\n* regarding `coerce_map_from_impl` and `Q_to_ExtendedQ`: I don't understand the coercion framework any more, so I can't vouch for correctness of the implementations. I'd like someone who understands coercion to take a quick look. Mike, if you find someone on IRC who can sign off on these, that's fine. One thing that bothers me slightly is:\n\n```\nsage: ExtendedRationalField.coerce_map_from_impl(ExtendedIntegerRing)\n[boom]\n```\n\n* docstring for `ExtendedRational.__init__` is a little confusing; \"The class of extended rational numbers\" is a little confusing, sounds like \"The set of extended rational numbers\". Perhaps better something like \"Constructor for elements of the extended rational field\".\n\n* `_mul_`: I'd like to see examples of multiplying infinity by infinity and minus infinity\n\nI have various other complaints about this module, but it's not in the new code you've written and I don't want to hold up this patch, so I won't go into them now.",
    "created_at": "2008-03-02T16:15:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/590#issuecomment-2580",
    "user": "https://trac.sagemath.org/admin/accounts/users/dmharvey"
}
```

<a id='comment:3'></a>
I'm mostly happy with this patch; I have a few questions.

* What is `IntegerWrapper`? That's been added with no explanation at all, and I don't understand its purpose. Is it really necessary? If so, there needs to be some documentation.

* regarding `coerce_map_from_impl` and `Q_to_ExtendedQ`: I don't understand the coercion framework any more, so I can't vouch for correctness of the implementations. I'd like someone who understands coercion to take a quick look. Mike, if you find someone on IRC who can sign off on these, that's fine. One thing that bothers me slightly is:

```
sage: ExtendedRationalField.coerce_map_from_impl(ExtendedIntegerRing)
[boom]
```

* docstring for `ExtendedRational.__init__` is a little confusing; "The class of extended rational numbers" is a little confusing, sounds like "The set of extended rational numbers". Perhaps better something like "Constructor for elements of the extended rational field".

* `_mul_`: I'd like to see examples of multiplying infinity by infinity and minus infinity

I have various other complaints about this module, but it's not in the new code you've written and I don't want to hold up this patch, so I won't go into them now.



---

archive/issue_events_001728.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/590",
    "rename": {
        "from": "document extended_rational_field.py",
        "to": "[mostly positive review, some questions to answer] document extended_rational_field.py"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/590#event-1728"
}
```



---

archive/issue_comments_002581.json:
```json
{
    "body": "<a id='comment:4'></a>\nI'm happy with coerce_map_from_impl and Q_to_ExtendedQ, but I think _coerce_impl needs to by default check if its in ExtendedZZ then see if it can be coerced into QQ, then error out.  Current code may not work with things that can be in ExtendedQQ but are not typed as integers (3 in RR).",
    "created_at": "2008-03-02T17:35:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/590#issuecomment-2581",
    "user": "https://github.com/garyfurnish"
}
```

<a id='comment:4'></a>
I'm happy with coerce_map_from_impl and Q_to_ExtendedQ, but I think _coerce_impl needs to by default check if its in ExtendedZZ then see if it can be coerced into QQ, then error out.  Current code may not work with things that can be in ExtendedQQ but are not typed as integers (3 in RR).



---

archive/issue_events_001729.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/590",
    "rename": {
        "from": "[mostly positive review, some questions to answer] document extended_rational_field.py",
        "to": "[mostly positive review, needs patch] document extended_rational_field.py"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/590#event-1729"
}
```



---

archive/issue_comments_002582.json:
```json
{
    "body": "<a id='comment:6'></a>\nI attached a patch addressing the referee's concerns.",
    "created_at": "2008-03-02T23:27:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/590#issuecomment-2582",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:6'></a>
I attached a patch addressing the referee's concerns.



---

archive/issue_comments_002583.json:
```json
{
    "body": "<a id='comment:7'></a>\nUmmm, the doctests for `sage/rings/extended_integer_ring.py` do not pass for me with this patch.",
    "created_at": "2008-03-03T19:48:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/590#issuecomment-2583",
    "user": "https://trac.sagemath.org/admin/accounts/users/dmharvey"
}
```

<a id='comment:7'></a>
Ummm, the doctests for `sage/rings/extended_integer_ring.py` do not pass for me with this patch.



---

archive/issue_comments_002584.json:
```json
{
    "body": "<a id='comment:8'></a>\nWhich ones fail?  What version are you applying against?  If it's the cmp ones, it may just be something random due to architecture differences.",
    "created_at": "2008-03-03T22:32:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/590#issuecomment-2584",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:8'></a>
Which ones fail?  What version are you applying against?  If it's the cmp ones, it may just be something random due to architecture differences.



---

archive/issue_comments_002585.json:
```json
{
    "body": "<a id='comment:9'></a>\nIt's mac os 10.4.11 intel. Here's the failure:\n\n```\nsage -t  devel/sage-590/sage/rings/extended_integer_ring.py **********************************************************************\nFile \"extended_integer_ring.py\", line 58:\n    sage: cmp(ExtendedIntegerRing, ExtendedRationalField)\nExpected:\n    1\nGot:\n    -1\n**********************************************************************\n```\n\nWhy would cmp be architecture-dependent? Is it comparing pointers somewhere or something stupid like that?",
    "created_at": "2008-03-03T22:58:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/590#issuecomment-2585",
    "user": "https://trac.sagemath.org/admin/accounts/users/dmharvey"
}
```

<a id='comment:9'></a>
It's mac os 10.4.11 intel. Here's the failure:

```
sage -t  devel/sage-590/sage/rings/extended_integer_ring.py **********************************************************************
File "extended_integer_ring.py", line 58:
    sage: cmp(ExtendedIntegerRing, ExtendedRationalField)
Expected:
    1
Got:
    -1
**********************************************************************
```

Why would cmp be architecture-dependent? Is it comparing pointers somewhere or something stupid like that?



---

archive/issue_comments_002586.json:
```json
{
    "body": "<a id='comment:10'></a>\nYep.  Python like to be able to compare everything.  With the new coercion stuff coming in, things will have more meaningful `_cmp_` functions.",
    "created_at": "2008-03-03T23:00:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/590#issuecomment-2586",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:10'></a>
Yep.  Python like to be able to compare everything.  With the new coercion stuff coming in, things will have more meaningful `_cmp_` functions.



---

archive/attachments_000241.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "590-referee.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket590/590-referee.patch",
    "created_at": "2008-03-04T00:56:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/590",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://trac.sagemath.org/admin/accounts/users/dmharvey"
}
```



---

archive/issue_comments_002587.json:
```json
{
    "body": "<a id='comment:11'></a>\nokay, I'm happy now.",
    "created_at": "2008-03-04T00:56:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/590#issuecomment-2587",
    "user": "https://trac.sagemath.org/admin/accounts/users/dmharvey"
}
```

<a id='comment:11'></a>
okay, I'm happy now.



---

archive/issue_events_001730.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/590",
    "rename": {
        "from": "[mostly positive review, needs patch] document extended_rational_field.py",
        "to": "[accepted] document extended_rational_field.py"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/590#event-1730"
}
```



---

archive/issue_events_001731.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/590",
    "rename": {
        "from": "[accepted] document extended_rational_field.py",
        "to": "document extended_rational_field.py"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/590#event-1731"
}
```



---

archive/issue_comments_002588.json:
```json
{
    "body": "**Changing status** from new to positive_review.",
    "created_at": "2008-03-04T02:02:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/590#issuecomment-2588",
    "user": "https://github.com/mwhansen"
}
```

**Changing status** from new to positive_review.



---

archive/issue_events_001732.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-03-04T03:53:52Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/590",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/590#event-1732"
}
```



---

archive/issue_comments_002589.json:
```json
{
    "body": "<a id='comment:13'></a>\nMerged both patches in Sage 2.10.3.rc1",
    "created_at": "2008-03-04T03:53:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/590#issuecomment-2589",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:13'></a>
Merged both patches in Sage 2.10.3.rc1
