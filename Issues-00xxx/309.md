# Issue 309: [with patches, with positive review] rationals enumeration not  monotone in height

archive/issues_000309.json:
```json
{
    "body": "While the new `Rationals().__iter__ method` is really nice and quick, I realized there is one drawback: The enumeration is not completely wrt increasing height:\n\n```\nfrom itertools import islice,imap\n\ndef idifference(iter):\n    B = iter.next()\n    for b in iter:\n      yield b-B\n      B=b\n\ndef height(x):\n  return x.height()\n\n[(n,min(idifference(imap(height,islice(Rationals(),Integer(2)**n))))) for n in range(Integer(1),Integer(19))]\n```\n\nyields\n\n```\n[(1, 0),\n (2, 0),\n (3, 0),\n (4, 0),\n (5, -1),\n (6, -2),\n (7, -3),\n (8, -5),\n (9, -8),\n (10, -13),\n (11, -21),\n (12, -34),\n (13, -55),\n (14, -89),\n (15, -144),\n (16, -233),\n (17, -377),\n (18, -610)]\n```\n\nso the jumps in height actually do get big. Many people will expect that if a certain number occurs in the enumeration, then all numbers of smaller height have also appeared. Therefore, we should perhaps have a choice of algorithm (since the present formula (sage 2.2) is so cool, I think it should be left in, but perhaps not as default enumeration order).\n\nOn the other hand, I realize that nobody will be using this routine anyway, so any change to this routine is essentially a waste of time.\n\n\nAssignee: @aghitza\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/309\n\n",
    "closed_at": "2008-09-02T09:36:42Z",
    "created_at": "2007-03-05T18:37:50Z",
    "labels": [
        "component: basic arithmetic",
        "trivial"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-3.1.2",
    "title": "[with patches, with positive review] rationals enumeration not  monotone in height",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/309",
    "user": "https://github.com/nbruin"
}
```
While the new `Rationals().__iter__ method` is really nice and quick, I realized there is one drawback: The enumeration is not completely wrt increasing height:

```
from itertools import islice,imap

def idifference(iter):
    B = iter.next()
    for b in iter:
      yield b-B
      B=b

def height(x):
  return x.height()

[(n,min(idifference(imap(height,islice(Rationals(),Integer(2)**n))))) for n in range(Integer(1),Integer(19))]
```

yields

```
[(1, 0),
 (2, 0),
 (3, 0),
 (4, 0),
 (5, -1),
 (6, -2),
 (7, -3),
 (8, -5),
 (9, -8),
 (10, -13),
 (11, -21),
 (12, -34),
 (13, -55),
 (14, -89),
 (15, -144),
 (16, -233),
 (17, -377),
 (18, -610)]
```

so the jumps in height actually do get big. Many people will expect that if a certain number occurs in the enumeration, then all numbers of smaller height have also appeared. Therefore, we should perhaps have a choice of algorithm (since the present formula (sage 2.2) is so cool, I think it should be left in, but perhaps not as default enumeration order).

On the other hand, I realize that nobody will be using this routine anyway, so any change to this routine is essentially a waste of time.


Assignee: @aghitza

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/309





---

archive/issue_events_000837.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2007-09-10T05:30:22Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/309",
    "milestone": "sage-feature",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/309#event-837"
}
```



---

archive/issue_events_000838.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/309",
    "rename": {
        "from": "rationals enumeration not  monotone in height.",
        "to": "[with patch, needs review] rationals enumeration not  monotone in height"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/309#event-838"
}
```



---

archive/issue_comments_001537.json:
```json
{
    "body": "<a id='comment:2'></a>\nAs a thought experiment, I implemented the naive algorithm for enumerating the rationals according to the height.  To my surprise, it seems to have the same speed as the version implemented by Nils (which is not monotone in height, hence this ticket -- see below for sample timings).  So I think we should just use the naive algorithm, which is in the attached patch.  It seemed a shame to throw out Nils' code so I just commented it out and fixed its references.\n\nwith old code:\n\n```\nsage: lst = itertools.islice(Rationals(), 10**8)                               \nsage: time for _ in range(10**4): a = lst.next()                               \nCPU times: user 0.12 s, sys: 0.00 s, total: 0.12 s\nWall time: 0.12 s\nsage: lst = itertools.islice(Rationals(), 10**8)                               \nsage: time for _ in range(10**5): a = lst.next()                               \nCPU times: user 0.64 s, sys: 0.00 s, total: 0.64 s\nWall time: 0.64 s\nsage: lst = itertools.islice(Rationals(), 10**8)                               \nsage: time for _ in range(10**6): a = lst.next()                               \nCPU times: user 5.96 s, sys: 0.03 s, total: 5.99 s\nWall time: 5.99 s\nsage: lst = itertools.islice(Rationals(), 10**8)                               \nsage: time for _ in range(10**7): a = lst.next()                               \nCPU times: user 59.47 s, sys: 0.21 s, total: 59.68 s\nWall time: 59.68 s\nsage: lst = itertools.islice(Rationals(), 10**8)                               \nsage: time for _ in range(10**8): a = lst.next()                               \nCPU times: user 599.76 s, sys: 1.95 s, total: 601.71 s\nWall time: 601.92 s\n```\n\nwith new code:\n\n```\nsage: lst = itertools.islice(Rationals(), 10**8)                               \nsage: time for _ in range(10**4): a = lst.next()                               \nCPU times: user 0.08 s, sys: 0.00 s, total: 0.08 s\nWall time: 0.08 s\nsage: lst = itertools.islice(Rationals(), 10**8)                               \nsage: time for _ in range(10**5): a = lst.next()                               \nCPU times: user 0.64 s, sys: 0.01 s, total: 0.65 s\nWall time: 0.65 s\nsage: lst = itertools.islice(Rationals(), 10**8)                               \nsage: time for _ in range(10**6): a = lst.next()                               \nCPU times: user 5.88 s, sys: 0.06 s, total: 5.94 s\nWall time: 5.94 s\nsage: lst = itertools.islice(Rationals(), 10**8)                               \nsage: time for _ in range(10**7): a = lst.next()                               \nCPU times: user 58.68 s, sys: 0.58 s, total: 59.26 s\nWall time: 59.28 s\nsage: lst = itertools.islice(Rationals(), 10**8)                               \nsage: time for _ in range(10**8): a = lst.next()                               \nCPU times: user 587.97 s, sys: 6.62 s, total: 594.59 s\nWall time: 594.65 s\n```",
    "created_at": "2008-09-01T05:35:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/309#issuecomment-1537",
    "user": "https://github.com/aghitza"
}
```

<a id='comment:2'></a>
As a thought experiment, I implemented the naive algorithm for enumerating the rationals according to the height.  To my surprise, it seems to have the same speed as the version implemented by Nils (which is not monotone in height, hence this ticket -- see below for sample timings).  So I think we should just use the naive algorithm, which is in the attached patch.  It seemed a shame to throw out Nils' code so I just commented it out and fixed its references.

with old code:

```
sage: lst = itertools.islice(Rationals(), 10**8)                               
sage: time for _ in range(10**4): a = lst.next()                               
CPU times: user 0.12 s, sys: 0.00 s, total: 0.12 s
Wall time: 0.12 s
sage: lst = itertools.islice(Rationals(), 10**8)                               
sage: time for _ in range(10**5): a = lst.next()                               
CPU times: user 0.64 s, sys: 0.00 s, total: 0.64 s
Wall time: 0.64 s
sage: lst = itertools.islice(Rationals(), 10**8)                               
sage: time for _ in range(10**6): a = lst.next()                               
CPU times: user 5.96 s, sys: 0.03 s, total: 5.99 s
Wall time: 5.99 s
sage: lst = itertools.islice(Rationals(), 10**8)                               
sage: time for _ in range(10**7): a = lst.next()                               
CPU times: user 59.47 s, sys: 0.21 s, total: 59.68 s
Wall time: 59.68 s
sage: lst = itertools.islice(Rationals(), 10**8)                               
sage: time for _ in range(10**8): a = lst.next()                               
CPU times: user 599.76 s, sys: 1.95 s, total: 601.71 s
Wall time: 601.92 s
```

with new code:

```
sage: lst = itertools.islice(Rationals(), 10**8)                               
sage: time for _ in range(10**4): a = lst.next()                               
CPU times: user 0.08 s, sys: 0.00 s, total: 0.08 s
Wall time: 0.08 s
sage: lst = itertools.islice(Rationals(), 10**8)                               
sage: time for _ in range(10**5): a = lst.next()                               
CPU times: user 0.64 s, sys: 0.01 s, total: 0.65 s
Wall time: 0.65 s
sage: lst = itertools.islice(Rationals(), 10**8)                               
sage: time for _ in range(10**6): a = lst.next()                               
CPU times: user 5.88 s, sys: 0.06 s, total: 5.94 s
Wall time: 5.94 s
sage: lst = itertools.islice(Rationals(), 10**8)                               
sage: time for _ in range(10**7): a = lst.next()                               
CPU times: user 58.68 s, sys: 0.58 s, total: 59.26 s
Wall time: 59.28 s
sage: lst = itertools.islice(Rationals(), 10**8)                               
sage: time for _ in range(10**8): a = lst.next()                               
CPU times: user 587.97 s, sys: 6.62 s, total: 594.59 s
Wall time: 594.65 s
```



---

archive/issue_events_000839.json:
```json
{
    "actor": "https://github.com/aghitza",
    "created_at": "2008-09-01T05:35:09Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/309",
    "milestone": "sage-feature",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/309#event-839"
}
```



---

archive/issue_events_000840.json:
```json
{
    "actor": "https://github.com/aghitza",
    "created_at": "2008-09-01T05:35:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/309",
    "milestone": "sage-3.1.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/309#event-840"
}
```



---

archive/issue_comments_001538.json:
```json
{
    "body": "Changing assignee from somebody to @aghitza.",
    "created_at": "2008-09-01T09:13:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/309#issuecomment-1538",
    "user": "https://github.com/aghitza"
}
```

Changing assignee from somebody to @aghitza.



---

archive/issue_comments_001539.json:
```json
{
    "body": "Changing status from new to assigned.",
    "created_at": "2008-09-01T10:03:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/309#issuecomment-1539",
    "user": "https://github.com/aghitza"
}
```

Changing status from new to assigned.



---

archive/issue_events_000841.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/309",
    "rename": {
        "from": "[with patch, needs review] rationals enumeration not  monotone in height",
        "to": "[with patch, with  review, minor work needed] rationals enumeration not  monotone in height"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/309#event-841"
}
```



---

archive/issue_comments_001540.json:
```json
{
    "body": "<a id='comment:5'></a>\nI prefer this, and would definitely want to use it in preference to the clever one.  In fact I do exactly the same thing somewhere in the modular symbols code in eclib...\n\nIt would be nice to make it easier for users to create iterators to (say) loop through all rationals up to a certain height, without having to resort to \"import itertools\" magic.  Something like this:\n\n```\n   for q in qrange(H):\n       # do something with q\n```\nwhich would loop through all rationals of height <H.\n\nAnyway, this patch applies fine to 3.1.2.alpha3, but doctesting rational_field.py threw up this for me:\n\n```\nFile \"/home/john/sage-3.1.2.alpha3/tmp/rational_field.py\", line 287:\n    sage: [a for a in itertools.islice(Rationals(),10)]\nExpected:\n    [0, 1, -1, 1/2, -1/2, 2, -2, 1/3, -1/3, 3/2]\nGot:\n    [0, 1, -1, 1/2, -1/2, 2, -2, 1/3, -1/3, 3]\n```",
    "created_at": "2008-09-01T20:05:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/309#issuecomment-1540",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:5'></a>
I prefer this, and would definitely want to use it in preference to the clever one.  In fact I do exactly the same thing somewhere in the modular symbols code in eclib...

It would be nice to make it easier for users to create iterators to (say) loop through all rationals up to a certain height, without having to resort to "import itertools" magic.  Something like this:

```
   for q in qrange(H):
       # do something with q
```
which would loop through all rationals of height <H.

Anyway, this patch applies fine to 3.1.2.alpha3, but doctesting rational_field.py threw up this for me:

```
File "/home/john/sage-3.1.2.alpha3/tmp/rational_field.py", line 287:
    sage: [a for a in itertools.islice(Rationals(),10)]
Expected:
    [0, 1, -1, 1/2, -1/2, 2, -2, 1/3, -1/3, 3/2]
Got:
    [0, 1, -1, 1/2, -1/2, 2, -2, 1/3, -1/3, 3]
```



---

archive/issue_comments_001541.json:
```json
{
    "body": "<a id='comment:6'></a>\nThanks for looking at this, John.\n\nI don't know enough about Python iterators at the moment to implement the more user-friendly version, but I do agree with you.\n\nThe doctest failure makes no sense, because if you look at the patch it clearly removes the line with the first 10 rationals and replaces it with the first 17 rationals.  Something must have gone wrong when you applied the patch?",
    "created_at": "2008-09-01T22:44:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/309#issuecomment-1541",
    "user": "https://github.com/aghitza"
}
```

<a id='comment:6'></a>
Thanks for looking at this, John.

I don't know enough about Python iterators at the moment to implement the more user-friendly version, but I do agree with you.

The doctest failure makes no sense, because if you look at the patch it clearly removes the line with the first 10 rationals and replaces it with the first 17 rationals.  Something must have gone wrong when you applied the patch?



---

archive/issue_comments_001542.json:
```json
{
    "body": "<a id='comment:7'></a>\nI applied and tested the patch with alpha3 on x86-64 linux and 32 bit OSX and cannot reproduce the failure? Maybe something went wrong with the merge as Alex suspected?\n\nCheers,\n\nMichael",
    "created_at": "2008-09-01T23:42:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/309#issuecomment-1542",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:7'></a>
I applied and tested the patch with alpha3 on x86-64 linux and 32 bit OSX and cannot reproduce the failure? Maybe something went wrong with the merge as Alex suspected?

Cheers,

Michael



---

archive/issue_events_000842.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/309",
    "rename": {
        "from": "[with patch, with  review, minor work needed] rationals enumeration not  monotone in height",
        "to": "[with revised patch, needs review] rationals enumeration not  monotone in height"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/309#event-842"
}
```



---

archive/issue_comments_001543.json:
```json
{
    "body": "<a id='comment:8'></a>\nAttachment [309-rational_iter_height.patch](tarball://root/attachments/some-uuid/ticket309/309-rational_iter_height.patch) by @aghitza created at 2008-09-02 02:07:45\n\nmhansen gave me a crash course on iterators and I have implemented a method QQ.range_by_height().  John's request from above becomes then\n\n```\nsage: for q in QQ.range_by_height(3):                                          \n....:     print q                                                              \n....:                                                                          \n0\n1\n-1\n1/2\n-1/2\n2\n-2\n```\n\nI have replaced the old patch with one that contains this method as well.",
    "created_at": "2008-09-02T02:07:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/309#issuecomment-1543",
    "user": "https://github.com/aghitza"
}
```

<a id='comment:8'></a>
Attachment [309-rational_iter_height.patch](tarball://root/attachments/some-uuid/ticket309/309-rational_iter_height.patch) by @aghitza created at 2008-09-02 02:07:45

mhansen gave me a crash course on iterators and I have implemented a method QQ.range_by_height().  John's request from above becomes then

```
sage: for q in QQ.range_by_height(3):                                          
....:     print q                                                              
....:                                                                          
0
1
-1
1/2
-1/2
2
-2
```

I have replaced the old patch with one that contains this method as well.



---

archive/issue_comments_001544.json:
```json
{
    "body": "<a id='comment:9'></a>\nWith Alex's old patch I am actually seeing one doctest failure in interact:\n\n```\nmabshoff@sage:/scratch/mabshoff/release-cycle/sage-3.1.2.alpha4$ ./sage -t -long devel/sage/sage/server/notebook/interact.py\nsage -t -long devel/sage/sage/server/notebook/interact.py   \n**********************************************************************\nFile \"/scratch/mabshoff/release-cycle/sage-3.1.2.alpha4/tmp/interact.py\", line 2556:\n    sage: sage.server.notebook.interact.list_of_first_n(QQ, 10)\nExpected:\n    [0, 1, -1, 1/2, -1/2, 2, -2, 1/3, -1/3, 3/2, -3/2]\nGot:\n    [0, 1, -1, 1/2, -1/2, 2, -2, 1/3, -1/3, 3, -3]\n**********************************************************************\n```\n\nI am trying the new patch now, but I expect the same result.\n\nCheers,\n\nMichael",
    "created_at": "2008-09-02T03:51:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/309#issuecomment-1544",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:9'></a>
With Alex's old patch I am actually seeing one doctest failure in interact:

```
mabshoff@sage:/scratch/mabshoff/release-cycle/sage-3.1.2.alpha4$ ./sage -t -long devel/sage/sage/server/notebook/interact.py
sage -t -long devel/sage/sage/server/notebook/interact.py   
**********************************************************************
File "/scratch/mabshoff/release-cycle/sage-3.1.2.alpha4/tmp/interact.py", line 2556:
    sage: sage.server.notebook.interact.list_of_first_n(QQ, 10)
Expected:
    [0, 1, -1, 1/2, -1/2, 2, -2, 1/3, -1/3, 3/2, -3/2]
Got:
    [0, 1, -1, 1/2, -1/2, 2, -2, 1/3, -1/3, 3, -3]
**********************************************************************
```

I am trying the new patch now, but I expect the same result.

Cheers,

Michael



---

archive/issue_comments_001545.json:
```json
{
    "body": "<a id='comment:10'></a>\nWith the new patch I get:\n\n```\nsage -t -long devel/sage/sage/server/notebook/interact.py   \n**********************************************************************\nFile \"/scratch/mabshoff/release-cycle/sage-3.1.2.alpha4/tmp/interact.py\", line 2556:\n    sage: sage.server.notebook.interact.list_of_first_n(QQ, 10)\nExpected:\n    [0, 1, -1, 1/2, -1/2, 2, -2, 1/3, -1/3, 3/2, -3/2]\nGot:\n    [0, 1, -1, 1/2, -1/2, 2, -2, 1/3, -1/3, 3, -3]\n**********************************************************************\n```\n\nCheers,\n\nMichael",
    "created_at": "2008-09-02T04:25:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/309#issuecomment-1545",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:10'></a>
With the new patch I get:

```
sage -t -long devel/sage/sage/server/notebook/interact.py   
**********************************************************************
File "/scratch/mabshoff/release-cycle/sage-3.1.2.alpha4/tmp/interact.py", line 2556:
    sage: sage.server.notebook.interact.list_of_first_n(QQ, 10)
Expected:
    [0, 1, -1, 1/2, -1/2, 2, -2, 1/3, -1/3, 3/2, -3/2]
Got:
    [0, 1, -1, 1/2, -1/2, 2, -2, 1/3, -1/3, 3, -3]
**********************************************************************
```

Cheers,

Michael



---

archive/issue_comments_001546.json:
```json
{
    "body": "Attachment [309-rational_iter_height_interactive.patch](tarball://root/attachments/some-uuid/ticket309/309-rational_iter_height_interactive.patch) by @aghitza created at 2008-09-02 04:52:50\n\napply on top of 309-rational_iter_height.patch and the patch from #4037",
    "created_at": "2008-09-02T04:52:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/309#issuecomment-1546",
    "user": "https://github.com/aghitza"
}
```

Attachment [309-rational_iter_height_interactive.patch](tarball://root/attachments/some-uuid/ticket309/309-rational_iter_height_interactive.patch) by @aghitza created at 2008-09-02 04:52:50

apply on top of 309-rational_iter_height.patch and the patch from #4037



---

archive/issue_events_000843.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/309",
    "rename": {
        "from": "[with revised patch, needs review] rationals enumeration not  monotone in height",
        "to": "[with patches, needs review] rationals enumeration not  monotone in height"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/309#event-843"
}
```



---

archive/issue_comments_001547.json:
```json
{
    "body": "<a id='comment:11'></a>\nThe doctest in interact.py needs a trivial fix.  The second patch file puts this in, but it has to be applied after the patch from #4037.",
    "created_at": "2008-09-02T04:53:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/309#issuecomment-1547",
    "user": "https://github.com/aghitza"
}
```

<a id='comment:11'></a>
The doctest in interact.py needs a trivial fix.  The second patch file puts this in, but it has to be applied after the patch from #4037.



---

archive/issue_events_000844.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/309",
    "rename": {
        "from": "[with patches, needs review] rationals enumeration not  monotone in height",
        "to": "[with patches, with positive review] rationals enumeration not  monotone in height"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/309#event-844"
}
```



---

archive/issue_comments_001548.json:
```json
{
    "body": "<a id='comment:12'></a>\nBrilliant!   I'm impressed with the way my suggested enhancement was added so well and so quickly!\n\nI successfully applied both patches after the one from #4037, which also has a positive review, and everything works fine.",
    "created_at": "2008-09-02T08:28:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/309#issuecomment-1548",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:12'></a>
Brilliant!   I'm impressed with the way my suggested enhancement was added so well and so quickly!

I successfully applied both patches after the one from #4037, which also has a positive review, and everything works fine.



---

archive/issue_comments_001549.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2008-09-02T09:36:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/309#issuecomment-1549",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

Resolution: fixed



---

archive/issue_events_000845.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-09-02T09:36:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/309",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/309#event-845"
}
```



---

archive/issue_comments_001550.json:
```json
{
    "body": "<a id='comment:13'></a>\nMerged both patches in Sage 3.1.2.alpha4",
    "created_at": "2008-09-02T09:36:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/309#issuecomment-1550",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:13'></a>
Merged both patches in Sage 3.1.2.alpha4
