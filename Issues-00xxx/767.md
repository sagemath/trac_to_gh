# Issue 767: animate has cryptic error message when imagemagick is not installed

archive/issues_000767.json:
```json
{
    "assignees": [
        "https://github.com/boothby"
    ],
    "body": "when creating an animated gif on a system without imagemagick installed, the animate() command  just outputs\n\n\"sh: convert: not found\"\n\ninstead of a more helpful error message (such as, \"please install imagemagick\")\n\nComponent: **notebook**\n\nKeywords: **animate, ImageMagick**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/767_\n\n",
    "closed_at": "2008-09-30T18:16:58Z",
    "created_at": "2007-09-30T22:11:24Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20user%20interface",
        "https://github.com/sagemath/sage/labels/p%3A%20trivial%20/%205",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-3.1.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "animate has cryptic error message when imagemagick is not installed",
    "type": "issue",
    "updated_at": "2008-09-30T18:16:58Z",
    "url": "https://github.com/sagemath/sage/issues/767",
    "user": "https://github.com/bobmoretti"
}
```
when creating an animated gif on a system without imagemagick installed, the animate() command  just outputs

"sh: convert: not found"

instead of a more helpful error message (such as, "please install imagemagick")

Component: **notebook**

Keywords: **animate, ImageMagick**

_Issue created by migration from https://trac.sagemath.org/ticket/767_





---

archive/issue_events_007122.json:
```json
{
    "actor": "https://github.com/bobmoretti",
    "created_at": "2007-09-30T22:11:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/767",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20user%20interface",
    "label_color": "0000b0",
    "label_name": "c: user interface",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/767#event-7122"
}
```



---

archive/issue_events_007123.json:
```json
{
    "actor": "https://github.com/bobmoretti",
    "created_at": "2007-09-30T22:11:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/767",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20trivial%20/%205",
    "label_color": "fff9e5",
    "label_name": "p: trivial / 5",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/767#event-7123"
}
```



---

archive/issue_events_007124.json:
```json
{
    "actor": "https://github.com/bobmoretti",
    "created_at": "2007-09-30T22:11:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/767",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/767#event-7124"
}
```



---

archive/issue_events_007125.json:
```json
{
    "actor": "https://github.com/boothby",
    "created_at": "2007-09-30T22:11:24Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/767",
    "subject": "https://github.com/bobmoretti",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/767#event-7125"
}
```



---

archive/issue_events_007126.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2007-10-01T00:44:44Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/767",
    "milestone_number": null,
    "milestone_title": "sage-2.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/767#event-7126"
}
```



---

archive/issue_events_007127.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2007-10-29T05:58:16Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/767",
    "milestone_number": null,
    "milestone_title": "sage-2.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/767#event-7127"
}
```



---

archive/issue_events_007128.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2007-10-29T05:58:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/767",
    "milestone_number": null,
    "milestone_title": "sage-2.8.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/767#event-7128"
}
```



---

archive/issue_events_007129.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2007-11-03T15:13:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/767",
    "milestone_number": null,
    "milestone_title": "sage-2.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/767#event-7129"
}
```



---

archive/issue_events_007130.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2007-11-03T15:13:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/767",
    "milestone_number": null,
    "milestone_title": "sage-2.8.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/767#event-7130"
}
```



---

archive/issue_comments_003209.json:
```json
{
    "body": "Attachment: **[767.patch.gz](https://github.com/sagemath/sage/files/ticket767/767.patch.gz)**",
    "created_at": "2008-09-30T16:58:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/767#issuecomment-3209",
    "user": "https://github.com/jhpalmieri"
}
```

Attachment: **[767.patch.gz](https://github.com/sagemath/sage/files/ticket767/767.patch.gz)**



---

archive/issue_comments_003210.json:
```json
{
    "body": "Changed keywords from none to **animate, ImageMagick**",
    "created_at": "2008-09-30T17:03:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/767#issuecomment-3210",
    "user": "https://github.com/jhpalmieri"
}
```

Changed keywords from none to **animate, ImageMagick**



---

archive/issue_events_007131.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2008-09-30T17:03:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/767",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/767#event-7131"
}
```



---

archive/issue_comments_003211.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI'm attaching a patch; it depends on #4216.\n\nWith this patch, if 'convert' is not found, I get an error message like this:\n\n```\n/usr/local/share/sage/local/bin/sage-native-execute: 8: convert: not\nfound\n\nError: ImageMagick does not appear to be installed. Saving an\nanimation to a GIF file or displaying an animation requires\nImageMagick, so please install it and try again.\n\nSee www.imagemagick.org, for example.\n```\nSo the first line is cryptic (but could be useful in debugging, if the problem is something other than a missing 'convert'), while the rest of the message is friendlier.",
    "created_at": "2008-09-30T17:03:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/767#issuecomment-3211",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:4" align="right">comment:4</div>

I'm attaching a patch; it depends on #4216.

With this patch, if 'convert' is not found, I get an error message like this:

```
/usr/local/share/sage/local/bin/sage-native-execute: 8: convert: not
found

Error: ImageMagick does not appear to be installed. Saving an
animation to a GIF file or displaying an animation requires
ImageMagick, so please install it and try again.

See www.imagemagick.org, for example.
```
So the first line is cryptic (but could be useful in debugging, if the problem is something other than a missing 'convert'), while the rest of the message is friendlier.



---

archive/issue_comments_003212.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nPositive review on the patch. One small issue is that the animate.py doctest fails if convert is not installed:\n\n```\nmabshoff@sage:/scratch/mabshoff/release-cycle/sage-3.1.3.alpha2$ ./sage -t devel//sage/sage/plot/animate.py \nsage -t  devel/sage/sage/plot/animate.py                    \n**********************************************************************\nFile \"/scratch/mabshoff/release-cycle/sage-3.1.3.alpha2/tmp/animate.py\", line 59:\n    sage: a.show()\nExpected nothing\nGot:\n    <BLANKLINE>\n    Error: ImageMagick does not appear to be installed. Saving an\n    animation to a GIF file or displaying an animation requires\n    ImageMagick, so please install it and try again.\n    <BLANKLINE>\n    See www.imagemagick.org, for example.\n**********************************************************************\n```\n\nOne way around this would be to make the doctest optional. \n\nThoughts?\n\nCheers,\n\nMichael",
    "created_at": "2008-09-30T17:23:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/767#issuecomment-3212",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:5" align="right">comment:5</div>

Positive review on the patch. One small issue is that the animate.py doctest fails if convert is not installed:

```
mabshoff@sage:/scratch/mabshoff/release-cycle/sage-3.1.3.alpha2$ ./sage -t devel//sage/sage/plot/animate.py 
sage -t  devel/sage/sage/plot/animate.py                    
**********************************************************************
File "/scratch/mabshoff/release-cycle/sage-3.1.3.alpha2/tmp/animate.py", line 59:
    sage: a.show()
Expected nothing
Got:
    <BLANKLINE>
    Error: ImageMagick does not appear to be installed. Saving an
    animation to a GIF file or displaying an animation requires
    ImageMagick, so please install it and try again.
    <BLANKLINE>
    See www.imagemagick.org, for example.
**********************************************************************
```

One way around this would be to make the doctest optional. 

Thoughts?

Cheers,

Michael



---

archive/issue_events_007132.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-09-30T17:23:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/767",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/767#event-7132"
}
```



---

archive/issue_events_007133.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-09-30T17:23:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/767",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/767#event-7133"
}
```



---

archive/issue_comments_003213.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\n> One way around this would be to make the doctest optional. \n\nThis seems okay to me, but I also don't know enough about doctesting to know if there is any other choice.",
    "created_at": "2008-09-30T17:34:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/767#issuecomment-3213",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:6" align="right">comment:6</div>

> One way around this would be to make the doctest optional. 

This seems okay to me, but I also don't know enough about doctesting to know if there is any other choice.



---

archive/issue_events_007134.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-09-30T17:34:46Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/767",
    "milestone_number": null,
    "milestone_title": "sage-3.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/767#event-7134"
}
```



---

archive/issue_events_007135.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-09-30T17:34:46Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/767",
    "milestone_number": null,
    "milestone_title": "sage-3.1.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/767#event-7135"
}
```



---

archive/issue_comments_003214.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nIronically I just checked the animate.py file and all but one of the convert commands are already optional. So I am posting a trivial reviewer patch on top of John's patch and will merge both of them.\n\nCheers,\n\nMichael",
    "created_at": "2008-09-30T17:34:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/767#issuecomment-3214",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:7" align="right">comment:7</div>

Ironically I just checked the animate.py file and all but one of the convert commands are already optional. So I am posting a trivial reviewer patch on top of John's patch and will merge both of them.

Cheers,

Michael



---

archive/issue_comments_003215.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nSorry, I should have checked the doctesting myself. Also, I noticed that several functions (including the one that I patched, `gif`) don't have doctests.  When I get around to it, I will open up another ticket and fix this.\n\nAlso, in my experience, running `animate(...)` doesn't require convert, *showing* the animation does. So we can remove some of the `optional` flags, so that more things are doctested. I may try to do that in the same (soon to be forthcoming?) ticket.",
    "created_at": "2008-09-30T17:57:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/767#issuecomment-3215",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:8" align="right">comment:8</div>

Sorry, I should have checked the doctesting myself. Also, I noticed that several functions (including the one that I patched, `gif`) don't have doctests.  When I get around to it, I will open up another ticket and fix this.

Also, in my experience, running `animate(...)` doesn't require convert, *showing* the animation does. So we can remove some of the `optional` flags, so that more things are doctested. I may try to do that in the same (soon to be forthcoming?) ticket.



---

archive/issue_comments_003216.json:
```json
{
    "body": "Attachment: **[trac_767_doctest_fix.patch.gz](https://github.com/sagemath/sage/files/ticket767/trac_767_doctest_fix.patch.gz)**",
    "created_at": "2008-09-30T18:16:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/767#issuecomment-3216",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

Attachment: **[trac_767_doctest_fix.patch.gz](https://github.com/sagemath/sage/files/ticket767/trac_767_doctest_fix.patch.gz)**



---

archive/issue_comments_003217.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nMerged in Sage 3.1.3.alpha2",
    "created_at": "2008-09-30T18:16:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/767#issuecomment-3217",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:9" align="right">comment:9</div>

Merged in Sage 3.1.3.alpha2



---

archive/issue_events_007136.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-09-30T18:16:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/767",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/767#event-7136"
}
```



---

archive/issue_events_007137.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-09-30T18:16:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/767",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/767#event-7137"
}
```
