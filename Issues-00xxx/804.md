# Issue 804: Matrix should not inherit from AlgebraElement

archive/issues_000804.json:
```json
{
    "body": "This ticket makes `Matrix` only inherit from `ModuleElement`.\n\nWarning: it will cause practically all Cython files to be rebuilt.\n\nSee also #15215 (duplicate of this ticket).\n\n\nAssignee: @williamstein\n\nCC:  @jasongrout @pjbruin\n\nKeywords: AlgebraElement, Matrix\n\nBranch/Commit: 05c7c30f33fccdf9fa159ce6fdab0c91f8393225\n\nReviewer: Luis Felipe Tabera  Alonso\n\nAuthor: Peter Bruin\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/804\n\n",
    "closed_at": "2014-07-19T04:57:49Z",
    "created_at": "2007-10-03T08:30:30Z",
    "labels": [
        "component: linear algebra",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.3",
    "title": "Matrix should not inherit from AlgebraElement",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/804",
    "user": "https://github.com/roed314"
}
```
This ticket makes `Matrix` only inherit from `ModuleElement`.

Warning: it will cause practically all Cython files to be rebuilt.

See also #15215 (duplicate of this ticket).


Assignee: @williamstein

CC:  @jasongrout @pjbruin

Keywords: AlgebraElement, Matrix

Branch/Commit: 05c7c30f33fccdf9fa159ce6fdab0c91f8393225

Reviewer: Luis Felipe Tabera  Alonso

Author: Peter Bruin

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/804





---

archive/issue_events_002707.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2007-12-04T14:26:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/804",
    "milestone": "sage-2.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/804#event-2707"
}
```



---

archive/issue_comments_005041.json:
```json
{
    "body": "<a id='comment:1'></a>\nMaybe now is a good time to do it?\n\nCheers,\n\nMichael",
    "created_at": "2007-12-04T14:26:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/804#issuecomment-5041",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:1'></a>
Maybe now is a good time to do it?

Cheers,

Michael



---

archive/issue_comments_005042.json:
```json
{
    "body": "<a id='comment:2'></a>\nWhat are the reasons for the change in organization?",
    "created_at": "2007-12-05T19:12:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/804#issuecomment-5042",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:2'></a>
What are the reasons for the change in organization?



---

archive/issue_comments_005043.json:
```json
{
    "body": "<a id='comment:4'></a>\nThe reason for the change is that not all matrices are Algebra Elements.",
    "created_at": "2008-11-14T06:30:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/804#issuecomment-5043",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:4'></a>
The reason for the change is that not all matrices are Algebra Elements.



---

archive/issue_comments_005044.json:
```json
{
    "body": "<a id='comment:5'></a>\nWhat should it inherit from instead?  This is a naive question, but perhaps someone with not much skill but much patience could fix this :)",
    "created_at": "2009-12-30T05:37:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/804#issuecomment-5044",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:5'></a>
What should it inherit from instead?  This is a naive question, but perhaps someone with not much skill but much patience could fix this :)



---

archive/issue_comments_005045.json:
```json
{
    "body": "Changing upstream from \"\" to \"N/A\"",
    "created_at": "2009-12-30T05:37:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/804#issuecomment-5045",
    "user": "https://github.com/kcrisman"
}
```

Changing upstream from "" to "N/A"



---

archive/issue_comments_005046.json:
```json
{
    "body": "<a id='comment:6'></a>\nModuleElement",
    "created_at": "2009-12-30T08:04:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/804#issuecomment-5046",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:6'></a>
ModuleElement



---

archive/issue_events_002708.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/804",
    "milestone": "sage-2.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/804#event-2708"
}
```



---

archive/issue_events_002709.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/804",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/804#event-2709"
}
```



---

archive/issue_events_002710.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/804",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/804#event-2710"
}
```



---

archive/issue_events_002711.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/804",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/804#event-2711"
}
```



---

archive/issue_comments_005047.json:
```json
{
    "body": "Changing branch from \"\" to \"u/pbruin/804-Matrix_inheritance\"",
    "created_at": "2014-04-02T00:33:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/804#issuecomment-5047",
    "user": "https://github.com/pjbruin"
}
```

Changing branch from "" to "u/pbruin/804-Matrix_inheritance"



---

archive/issue_comments_005048.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-04-02T00:33:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/804#issuecomment-5048",
    "user": "https://github.com/pjbruin"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_005049.json:
```json
{
    "body": "<a id='comment:11'></a>\nGiven that this ticket has been open for more than seven years, it turned out to be surprisingly straightforward.  There is one small simplification: `Matrix` used to have two identical methods `_mul_()` and `__mul__()`, now it only needs `__mul__()`.  On the other hand, new (but very straightforward) `__pow__()` and `__div__()` methods were required.",
    "created_at": "2014-04-02T00:33:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/804#issuecomment-5049",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:11'></a>
Given that this ticket has been open for more than seven years, it turned out to be surprisingly straightforward.  There is one small simplification: `Matrix` used to have two identical methods `_mul_()` and `__mul__()`, now it only needs `__mul__()`.  On the other hand, new (but very straightforward) `__pow__()` and `__div__()` methods were required.



---

archive/issue_comments_005050.json:
```json
{
    "body": "Changing author from \"\" to \"Peter Bruin\"",
    "created_at": "2014-04-02T00:33:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/804#issuecomment-5050",
    "user": "https://github.com/pjbruin"
}
```

Changing author from "" to "Peter Bruin"



---

archive/issue_comments_005051.json:
```json
{
    "body": "Changing commit from \"\" to \"0fd3d318a230b2865cf331c2c696c9d05ceba487\"",
    "created_at": "2014-04-02T00:33:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/804#issuecomment-5051",
    "user": "https://github.com/pjbruin"
}
```

Changing commit from "" to "0fd3d318a230b2865cf331c2c696c9d05ceba487"



---

archive/issue_comments_005052.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,6 @@\n-People just don't want to fix it because you'll have to rebuild everything after editing element.pxd.\n+This ticket makes `Matrix` only inherit from `ModuleElement`.\n+\n+Warning: it will cause practically all Cython files to be rebuilt.\n+\n+See also #15215 (duplicate of this ticket).\n+\n``````\n",
    "created_at": "2014-04-02T00:33:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/804#issuecomment-5052",
    "user": "https://github.com/pjbruin"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,6 @@
-People just don't want to fix it because you'll have to rebuild everything after editing element.pxd.
+This ticket makes `Matrix` only inherit from `ModuleElement`.
+
+Warning: it will cause practically all Cython files to be rebuilt.
+
+See also #15215 (duplicate of this ticket).
+
``````




---

archive/issue_comments_005053.json:
```json
{
    "body": "<a id='comment:12'></a>\nWow, nice necromancy!  Dumb question - any other translations of tutorials have this bit which would need to be translated?",
    "created_at": "2014-04-02T02:34:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/804#issuecomment-5053",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:12'></a>
Wow, nice necromancy!  Dumb question - any other translations of tutorials have this bit which would need to be translated?



---

archive/issue_comments_005054.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [kcrisman](#comment%3A12):\n> any other translations of tutorials have this bit which would need to be translated?\n\nIt seems not; `grep RingElement src/doc/*/tutorial/*` only finds the English and French ones.",
    "created_at": "2014-04-02T09:24:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/804#issuecomment-5054",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:13'></a>
Replying to [kcrisman](#comment%3A12):
> any other translations of tutorials have this bit which would need to be translated?

It seems not; `grep RingElement src/doc/*/tutorial/*` only finds the English and French ones.



---

archive/issue_comments_005055.json:
```json
{
    "body": "<a id='comment:14'></a>\n> > any other translations of tutorials have this bit which would need to be translated?\n\n> It seems not; `grep RingElement src/doc/*/tutorial/*` only finds the English and French ones.\nInteresting - apparently that must have been added after the other translations were made.",
    "created_at": "2014-04-02T13:51:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/804#issuecomment-5055",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:14'></a>
> > any other translations of tutorials have this bit which would need to be translated?

> It seems not; `grep RingElement src/doc/*/tutorial/*` only finds the English and French ones.
Interesting - apparently that must have been added after the other translations were made.



---

archive/issue_comments_005056.json:
```json
{
    "body": "<a id='comment:15'></a>\nHi,\n\nAt first glance, I thought this ticket would help to build tropical matrices as discussed in #14507... but no, the \"base ring\" for tropical matrix is a [semiring](http://en.wikipedia.org/wiki/Semiring) and not a ring (no requirement of an additive inverse). Am I right?\n\nVincent",
    "created_at": "2014-05-05T07:01:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/804#issuecomment-5056",
    "user": "https://github.com/videlec"
}
```

<a id='comment:15'></a>
Hi,

At first glance, I thought this ticket would help to build tropical matrices as discussed in #14507... but no, the "base ring" for tropical matrix is a [semiring](http://en.wikipedia.org/wiki/Semiring) and not a ring (no requirement of an additive inverse). Am I right?

Vincent



---

archive/issue_comments_005057.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [vdelecroix](#comment%3A15):\n> At first glance, I thought this ticket would help to build tropical matrices as discussed in #14507... but no, the \"base ring\" for tropical matrix is a [semiring](http://en.wikipedia.org/wiki/Semiring) and not a ring (no requirement of an additive inverse). Am I right?\n\nI think you are.  Everywhere in Sage, matrices and vectors are assumed to have coefficients in some base ring.  This would probably be much harder to change than the inheritance issue addressed in this ticket.  If enough people want tropical matrices, then it seems we need new classes `Matrix_semiring` and `Vector_semiring`, possibly inheriting from some `ModuleElement_semiring`...",
    "created_at": "2014-05-05T09:13:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/804#issuecomment-5057",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:16'></a>
Replying to [vdelecroix](#comment%3A15):
> At first glance, I thought this ticket would help to build tropical matrices as discussed in #14507... but no, the "base ring" for tropical matrix is a [semiring](http://en.wikipedia.org/wiki/Semiring) and not a ring (no requirement of an additive inverse). Am I right?

I think you are.  Everywhere in Sage, matrices and vectors are assumed to have coefficients in some base ring.  This would probably be much harder to change than the inheritance issue addressed in this ticket.  If enough people want tropical matrices, then it seems we need new classes `Matrix_semiring` and `Vector_semiring`, possibly inheriting from some `ModuleElement_semiring`...



---

archive/issue_events_002712.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/804",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/804#event-2712"
}
```



---

archive/issue_events_002713.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/804",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/804#event-2713"
}
```



---

archive/issue_comments_005058.json:
```json
{
    "body": "<a id='comment:18'></a>\n\n```\nsage -t --long src/sage/structure/element.pyx  # 2 doctests failed\n```",
    "created_at": "2014-05-14T20:44:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/804#issuecomment-5058",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:18'></a>

```
sage -t --long src/sage/structure/element.pyx  # 2 doctests failed
```



---

archive/issue_comments_005059.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-05-14T20:44:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/804#issuecomment-5059",
    "user": "https://github.com/pjbruin"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_005060.json:
```json
{
    "body": "<a id='comment:19'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                          |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|\n|[05c7c30](https://github.com/sagemath/sagetrac-mirror/commit/05c7c30f33fccdf9fa159ce6fdab0c91f8393225)|`Trac 804: fix type error`|",
    "created_at": "2014-05-14T21:17:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/804#issuecomment-5060",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                          |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|
|[05c7c30](https://github.com/sagemath/sagetrac-mirror/commit/05c7c30f33fccdf9fa159ce6fdab0c91f8393225)|`Trac 804: fix type error`|



---

archive/issue_comments_005061.json:
```json
{
    "body": "Changing commit from \"0fd3d318a230b2865cf331c2c696c9d05ceba487\" to \"05c7c30f33fccdf9fa159ce6fdab0c91f8393225\"",
    "created_at": "2014-05-14T21:17:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/804#issuecomment-5061",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "0fd3d318a230b2865cf331c2c696c9d05ceba487" to "05c7c30f33fccdf9fa159ce6fdab0c91f8393225"



---

archive/issue_comments_005062.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-05-14T21:18:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/804#issuecomment-5062",
    "user": "https://github.com/pjbruin"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_005063.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Luis Felipe Tabera  Alonso\"",
    "created_at": "2014-07-18T11:52:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/804#issuecomment-5063",
    "user": "https://github.com/lftabera"
}
```

Changing reviewer from "" to "Luis Felipe Tabera  Alonso"



---

archive/issue_comments_005064.json:
```json
{
    "body": "<a id='comment:21'></a>\nLooks good to me. I also think that tropical matrices should have their own classes.\n\nMy copy did not compile against 6.3.beta3 but was probably more an issue with the beta since it failed before attempting to build the sage library. With 6.3.beta5 it works like a charm.",
    "created_at": "2014-07-18T11:52:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/804#issuecomment-5064",
    "user": "https://github.com/lftabera"
}
```

<a id='comment:21'></a>
Looks good to me. I also think that tropical matrices should have their own classes.

My copy did not compile against 6.3.beta3 but was probably more an issue with the beta since it failed before attempting to build the sage library. With 6.3.beta5 it works like a charm.



---

archive/issue_comments_005065.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-07-18T11:52:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/804#issuecomment-5065",
    "user": "https://github.com/lftabera"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_002714.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-19T04:57:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/804",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/804#event-2714"
}
```



---

archive/issue_comments_005066.json:
```json
{
    "body": "Changing branch from \"u/pbruin/804-Matrix_inheritance\" to \"05c7c30f33fccdf9fa159ce6fdab0c91f8393225\"",
    "created_at": "2014-07-19T04:57:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/804#issuecomment-5066",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/pbruin/804-Matrix_inheritance" to "05c7c30f33fccdf9fa159ce6fdab0c91f8393225"



---

archive/issue_comments_005067.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-07-19T04:57:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/804#issuecomment-5067",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
