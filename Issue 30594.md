# Issue 30594: Cython install race: Cython/__pycache__': File exists

archive/issues_030594.json:
```json
{
    "body": "CC:  slelievre\n\nParallel build can trip when installing cython:\n\n```\nSuccessfully built Cython\nRemoved build tracker: '/tmp/pip-req-tracker-omresmjl'\nUsing pip 20.2.3 from /var/lib/buildbot/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas391y/local/lib/python3.8/site-packages/pip (python 3.8)\nNon-user install because site-packages writeable\nIgnoring indexes: https://pypi.org/simple\nCreated temporary directory: /tmp/pip-ephem-wheel-cache-qr4uo5i7\nCreated temporary directory: /tmp/pip-req-tracker-o36lik7l\nInitialized build tracking at /tmp/pip-req-tracker-o36lik7l\nCreated build tracker: /tmp/pip-req-tracker-o36lik7l\nEntered build tracker: /tmp/pip-req-tracker-o36lik7l\nCreated temporary directory: /tmp/pip-install-92nkij1k\nProcessing ./dist/Cython-0.29.21-cp38-cp38-linux_i686.whl\n  Added Cython==0.29.21 from file:///var/lib/buildbot/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas391y/local/var/tmp/sage/build/cython-0.29.21/src/dist/Cython-0.29.21-cp38-cp38-linux_i686.whl to build tracker '/tmp/pip-req-tracker-o36lik7l'\n  Removed Cython==0.29.21 from file:///var/lib/buildbot/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas391y/local/var/tmp/sage/build/cython-0.29.21/src/dist/Cython-0.29.21-cp38-cp38-linux_i686.whl from build tracker '/tmp/pip-req-tracker-o36lik7l'\nInstalling collected packages: Cython\n\n  Creating /var/lib/buildbot/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas391y/local/var/tmp/sage/build/cython-0.29.21/inst/var/lib/buildbot/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas391y/local/bin\n  changing mode of /var/lib/buildbot/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas391y/local/var/tmp/sage/build/cython-0.29.21/inst/var/lib/buildbot/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas391y/local/bin/cygdb to 755\n  changing mode of /var/lib/buildbot/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas391y/local/var/tmp/sage/build/cython-0.29.21/inst/var/lib/buildbot/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas391y/local/bin/cython to 755\n  changing mode of /var/lib/buildbot/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas391y/local/var/tmp/sage/build/cython-0.29.21/inst/var/lib/buildbot/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas391y/local/bin/cythonize to 755\nSuccessfully installed Cython-0.29.21\nRemoved build tracker: '/tmp/pip-req-tracker-o36lik7l'\n\nreal    5m40.814s\nuser    1m48.492s\nsys     0m3.965s\nCopying package files from temporary location /var/lib/buildbot/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas391y/local/var/tmp/sage/build/cython-0.29.21/inst to /var/lib/buildbot/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas391y/local\ncp: cannot create directory '/var/lib/buildbot/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas391y/local/./lib/python3.8/site-packages/Cython/__pycache__': File exists\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/30831\n\n",
    "created_at": "2020-10-25T23:31:05Z",
    "labels": [
        "PLEASE CHANGE",
        "major"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Cython install race: Cython/__pycache__': File exists",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30594",
    "user": "vbraun"
}
```
CC:  slelievre

Parallel build can trip when installing cython:

```
Successfully built Cython
Removed build tracker: '/tmp/pip-req-tracker-omresmjl'
Using pip 20.2.3 from /var/lib/buildbot/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas391y/local/lib/python3.8/site-packages/pip (python 3.8)
Non-user install because site-packages writeable
Ignoring indexes: https://pypi.org/simple
Created temporary directory: /tmp/pip-ephem-wheel-cache-qr4uo5i7
Created temporary directory: /tmp/pip-req-tracker-o36lik7l
Initialized build tracking at /tmp/pip-req-tracker-o36lik7l
Created build tracker: /tmp/pip-req-tracker-o36lik7l
Entered build tracker: /tmp/pip-req-tracker-o36lik7l
Created temporary directory: /tmp/pip-install-92nkij1k
Processing ./dist/Cython-0.29.21-cp38-cp38-linux_i686.whl
  Added Cython==0.29.21 from file:///var/lib/buildbot/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas391y/local/var/tmp/sage/build/cython-0.29.21/src/dist/Cython-0.29.21-cp38-cp38-linux_i686.whl to build tracker '/tmp/pip-req-tracker-o36lik7l'
  Removed Cython==0.29.21 from file:///var/lib/buildbot/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas391y/local/var/tmp/sage/build/cython-0.29.21/src/dist/Cython-0.29.21-cp38-cp38-linux_i686.whl from build tracker '/tmp/pip-req-tracker-o36lik7l'
Installing collected packages: Cython

  Creating /var/lib/buildbot/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas391y/local/var/tmp/sage/build/cython-0.29.21/inst/var/lib/buildbot/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas391y/local/bin
  changing mode of /var/lib/buildbot/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas391y/local/var/tmp/sage/build/cython-0.29.21/inst/var/lib/buildbot/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas391y/local/bin/cygdb to 755
  changing mode of /var/lib/buildbot/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas391y/local/var/tmp/sage/build/cython-0.29.21/inst/var/lib/buildbot/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas391y/local/bin/cython to 755
  changing mode of /var/lib/buildbot/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas391y/local/var/tmp/sage/build/cython-0.29.21/inst/var/lib/buildbot/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas391y/local/bin/cythonize to 755
Successfully installed Cython-0.29.21
Removed build tracker: '/tmp/pip-req-tracker-o36lik7l'

real    5m40.814s
user    1m48.492s
sys     0m3.965s
Copying package files from temporary location /var/lib/buildbot/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas391y/local/var/tmp/sage/build/cython-0.29.21/inst to /var/lib/buildbot/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas391y/local
cp: cannot create directory '/var/lib/buildbot/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas391y/local/./lib/python3.8/site-packages/Cython/__pycache__': File exists
```


Issue created by migration from https://trac.sagemath.org/ticket/30831





---

archive/issue_comments_437052.json:
```json
{
    "body": "Another instance of #29585",
    "created_at": "2020-10-26T02:52:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30594#issuecomment-437052",
    "user": "mkoeppe"
}
```

Another instance of #29585



---

archive/issue_comments_437053.json:
```json
{
    "body": "Changing keywords from \"\" to \"build, cython, race\".",
    "created_at": "2020-10-26T15:33:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30594#issuecomment-437053",
    "user": "slelievre"
}
```

Changing keywords from "" to "build, cython, race".



---

archive/issue_comments_437054.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2020-10-26T15:33:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30594#issuecomment-437054",
    "user": "slelievre"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_437055.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to build.",
    "created_at": "2020-10-26T15:33:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30594#issuecomment-437055",
    "user": "slelievre"
}
```

Changing component from PLEASE CHANGE to build.



---

archive/issue_comments_437056.json:
```json
{
    "body": "Let's close this as a dup of #29585",
    "created_at": "2020-11-02T22:16:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30594#issuecomment-437056",
    "user": "mkoeppe"
}
```

Let's close this as a dup of #29585



---

archive/issue_comments_437057.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-11-02T22:16:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30594#issuecomment-437057",
    "user": "mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_437058.json:
```json
{
    "body": "Okay.",
    "created_at": "2021-08-19T22:09:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30594#issuecomment-437058",
    "user": "slelievre"
}
```

Okay.



---

archive/issue_comments_437059.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-08-19T22:09:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30594#issuecomment-437059",
    "user": "slelievre"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_437060.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2021-08-26T02:08:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30594#issuecomment-437060",
    "user": "mkoeppe"
}
```

Resolution: invalid
