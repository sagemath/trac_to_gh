# Issue 13176: Set CPATH in sage-env

Issue created by migration from https://trac.sagemath.org/ticket/13348

Original creator: jdemeyer

Original creation time: 2012-08-08 10:14:50

Assignee: GeorgSWeber

CC:  leif

Since we're setting `LIBRARY_PATH` in `sage-env` (which is the _compile-time_ equivalent of `LD_LIBRARY_PATH`, corresponding to the compiler flag `-L`), we should analogously set `CPATH` to `SAGE_LOCAL/include` (corresponding to the compiler flag `-I`).

Within Sage, `SAGE_LOCAL` effectively acts as installation prefix, so this is the logical thing to do.  A GCC compiled within Sage will already look at `SAGE_LOCAL/include` by default.


---

Comment by jdemeyer created at 2012-08-08 10:24:47

Changing priority from blocker to major.


---

Comment by jdemeyer created at 2012-09-05 09:54:32

Changing status from new to needs_review.


---

Comment by vbraun created at 2012-09-13 13:50:58

Changing status from needs_review to positive_review.


---

Attachment

Looks good to me.


---

Comment by jdemeyer created at 2012-09-16 19:49:46

Resolution: fixed


---

Comment by leif created at 2013-06-06 03:39:13

Setting `CPATH`, `LIBRARY_PATH` etc. is certainly *not equivalent* to passing `-I...` and `-L...` on the command line, since directories specified explicitly are always searched first.

Furthermore, Sage's paths should get *pre*pended, not *ap*pended, at least if using this feature is supposed to "replace" explicitly specifying paths in commands / `CFLAGS`, `CPPFLAGS` and `LDFLAGS`, e.g. in `spkg-install` scripts.

And if `ld` is used directly (as opposed to linking with `gcc` / `g++` etc.), `LIBRARY_PATH` won't get used at all (unless it is part of the `make` rule, say).


---

Comment by leif created at 2013-06-09 22:29:41

Replying to [comment:9 leif]:
> Setting `CPATH`, `LIBRARY_PATH` etc. is certainly *not equivalent* to passing `-I...` and `-L...` on the command line, since directories specified explicitly are always searched first.
> 
> Furthermore, Sage's paths should get *pre*pended, not *ap*pended, at least if using this feature is supposed to "replace" explicitly specifying paths in commands / `CFLAGS`, `CPPFLAGS` and `LDFLAGS`, e.g. in `spkg-install` scripts.
> 
> And if `ld` is used directly (as opposed to linking with `gcc` / `g++` etc.), `LIBRARY_PATH` won't get used at all (unless it is part of the `make` rule, say).

Even if `$SAGE_LOCAL/lib` got *pre*pended to `LIBRARY_PATH`, system folders might still get searched before those specified in `LIBRARY_PATH`.

Follow-up: #14709
