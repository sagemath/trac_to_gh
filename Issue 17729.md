# Issue 17729: Include the entire boost library

Issue created by migration from Trac.

Original creator: slelievre

Original creation time: 2015-03-16 17:43:48

CC:  dcoudert jdemeyer jpflori snark vbraun wstein

Keywords: boost

Include the entire [boost library](http://www.boost.org/).

This [keeps](https://groups.google.com/d/topic/sage-devel/s5FftN1hPB0/discussion) [coming](https://groups.google.com/d/topic/sage-devel/efvLbZPsb_E/discussion) [up](https://groups.google.com/d/topic/sage-devel/Lh8jemXeUSQ/discussion) on [sort:date sage-devel](https://groups.google.com/forum/#!searchin/sage-devel/boost$20library).

The [Boost Graph Library](http://www.boost.org/doc/libs/release/libs/graph/) can speed up some graph algorithms.


---

Comment by dcoudert created at 2015-05-27 11:25:39

Does anyone know if it is necessary to include the full boost distribution (tar.bz2 is 70.4 MB and uncompress to 600MB) or if it is enough to get the `boost/` sub-directory which contains all .hpp files (around 100MB) that is what we already get with `boost_cropped`.
I'm not familiar with boost.


---

Comment by vbraun created at 2015-05-27 11:31:34

Most of boost is in headers but it does build a few shared libraries, too.


---

Comment by vbraun created at 2015-05-27 11:31:34

Changing component from PLEASE CHANGE to packages: standard.


---

Comment by ncohen created at 2015-09-22 10:59:09

Just answering the "boost can speed up some graph algorithms": the part of boost that handles graphs is already in Sage, and Michele Borassi exposed some of them during GSOC2015 (see `sage/graphs/base/boost_*`).

Nathann


---

Comment by fbissey created at 2015-09-23 02:47:24

I am actually having a shot at developing a full spkg for this. I spent about half a day figuring why it refused to build and how to solve the problem: the system install of `boost` screw  the vanilla building in sage. Finding how to fix it was also difficult in the face of unhelpful documentation. Google was not much help either but I finally found a clue in the code.

Other bits, it needs repackaging because our script don't like `boost_1_59_0.tar.bz2`, the sticky point being the first `_`. Just changing the tarball name is not enough since it unfold to `boost_1_59_0` which suffer the same problem. There is also quite a lot of stuff that probably can be removed as bloat for our purpose. But I am focusing on something usable first.

 I also note that `eclib` can use `boost` - and by that I mean libraries, I think `flint` may have `boost` options but I don't know if they do anything.


---

Comment by fbissey created at 2015-09-23 03:30:30

Not tested on OS X, probably need fiddling on cygwin. Not putting in review yet as it still needs a `spkg-src` script.
----
New commits:


---

Comment by jdemeyer created at 2015-09-23 06:15:57

Replying to [comment:4 fbissey]:
> Just changing the tarball name is not enough
> it unfold to `boost_1_59_0` which suffer the same problem.

The extracted directory name doesn't matter. Nobody says it has to be of the form `package-version`.

Of course, if you need a `spkg-src` for other reasons, you might as well change the top-level directory name but it's not required.


---

Comment by fbissey created at 2015-09-23 07:12:05

Yes I could customise it instead of relying on `spkg-install` but I think the tarball needs a serious trim. One of the complaint about the full package is the size. There is some pictures and stuff like that probably can go.


---

Comment by jpflori created at 2015-09-23 07:38:09

I do agree that 600 MB more is much.
Even distros split boost into numerous packages, so if we could avoid shipping it as a huge block, whether its by splitting functionalities or removing images/binary/really useless stuff, it would be nice.


---

Comment by charpent created at 2015-11-11 21:42:09

I opened #19570 for a different purpose. François Bissey pointed me to the present ticket (which I somehow missed while searching Trac for boost) and Jeroen Demeyer closed the ticket.

I do not understand the issues at hand. As far as I understand, the current Sagemath packages husr the boost subdirectory, which is sufficient for current Sagemath, whereas, as pointed out by François, various voices have spoken in favor of the inclusion of the whole hawg, for goals that do not seem overly clear to me.

As far as I can tell :
* The original reason of including boost (polybori, a. k. a. brial) is fulfilled by the current packaging (headers only).
* This packaging is no longer stripped from polybori sources, but a subdirectory of the original boost tarball.
* The bits needed by Nathaan Cohen for its graph manipulation purposes also are in place.
* The reasons for packaging the whole hawg are not yet definite plans.
* This packaging needs significant work.

So could we split this work in two :
1. update the current packaging of the headers (that would fix my problemn and possibly Nathaans's too).
2. develop the packaging of the whole boost.

The packaging of the headers is already a standard package, and therefore should probably remain so. The complete libary could become an optional package, on which new optional packages could depend.

However, if some standard package (e. g. ECL) could benefit of the inclusion of the whole boost, this library should become standard...

What do you think ?


---

Comment by fbissey created at 2015-11-11 22:13:27

I am sorry, I have mistaken your purpose. If you had titled upgrade `boost_cropped` I probably wouldn't have touched your ticket at all.

I think it is ok to upgrade `boost_cropped` while we are working out on the full package as a longer term view.


---

Comment by vbraun created at 2016-06-03 16:14:18

Note that boost doesn't install the 600MB that it unpacks to; In fact I think its mostly docs, testcases, and workarounds for various compilers. If you strip out all docs and test directories then the source is more like 200MB, and the installed libraries are only 10's of MB.


---

Comment by vbraun created at 2016-06-03 16:15:30

PS: Chomp needs the boost libraries. Really the whole "we don't need boost because nobody uses boost" is just circular.


---

Comment by fbissey created at 2016-06-04 05:06:59

Changing status from new to needs_review.


---

Comment by fbissey created at 2016-06-04 05:06:59

Duplicated by #20754


---

Comment by jhpalmieri created at 2016-06-04 14:16:19

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-06-12 12:02:30

Resolution: fixed
