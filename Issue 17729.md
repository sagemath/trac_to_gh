# Issue 17729: Include the entire boost library

archive/issues_017729.json:
```json
{
    "body": "CC:  @dcoudert @jdemeyer jpflori snark @vbraun wstein\n\nKeywords: boost\n\nInclude the entire [boost library](http://www.boost.org/).\n\nThis [keeps](https://groups.google.com/d/topic/sage-devel/s5FftN1hPB0/discussion) [coming](https://groups.google.com/d/topic/sage-devel/efvLbZPsb_E/discussion) [up](https://groups.google.com/d/topic/sage-devel/Lh8jemXeUSQ/discussion) on [sort:date sage-devel](https://groups.google.com/forum/#!searchin/sage-devel/boost$20library).\n\nThe [Boost Graph Library](http://www.boost.org/doc/libs/release/libs/graph/) can speed up some graph algorithms.\n\nIssue created by migration from https://trac.sagemath.org/ticket/17966\n\n",
    "created_at": "2015-03-16T17:43:48Z",
    "labels": [
        "PLEASE CHANGE",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Include the entire boost library",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17729",
    "user": "@slel"
}
```
CC:  @dcoudert @jdemeyer jpflori snark @vbraun wstein

Keywords: boost

Include the entire [boost library](http://www.boost.org/).

This [keeps](https://groups.google.com/d/topic/sage-devel/s5FftN1hPB0/discussion) [coming](https://groups.google.com/d/topic/sage-devel/efvLbZPsb_E/discussion) [up](https://groups.google.com/d/topic/sage-devel/Lh8jemXeUSQ/discussion) on [sort:date sage-devel](https://groups.google.com/forum/#!searchin/sage-devel/boost$20library).

The [Boost Graph Library](http://www.boost.org/doc/libs/release/libs/graph/) can speed up some graph algorithms.

Issue created by migration from https://trac.sagemath.org/ticket/17966





---

archive/issue_comments_237086.json:
```json
{
    "body": "Does anyone know if it is necessary to include the full boost distribution (tar.bz2 is 70.4 MB and uncompress to 600MB) or if it is enough to get the `boost/` sub-directory which contains all .hpp files (around 100MB) that is what we already get with `boost_cropped`.\nI'm not familiar with boost.",
    "created_at": "2015-05-27T11:25:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17729#issuecomment-237086",
    "user": "@dcoudert"
}
```

Does anyone know if it is necessary to include the full boost distribution (tar.bz2 is 70.4 MB and uncompress to 600MB) or if it is enough to get the `boost/` sub-directory which contains all .hpp files (around 100MB) that is what we already get with `boost_cropped`.
I'm not familiar with boost.



---

archive/issue_comments_237087.json:
```json
{
    "body": "Most of boost is in headers but it does build a few shared libraries, too.",
    "created_at": "2015-05-27T11:31:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17729#issuecomment-237087",
    "user": "@vbraun"
}
```

Most of boost is in headers but it does build a few shared libraries, too.



---

archive/issue_comments_237088.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to packages: standard.",
    "created_at": "2015-05-27T11:31:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17729#issuecomment-237088",
    "user": "@vbraun"
}
```

Changing component from PLEASE CHANGE to packages: standard.



---

archive/issue_comments_237089.json:
```json
{
    "body": "Just answering the \"boost can speed up some graph algorithms\": the part of boost that handles graphs is already in Sage, and Michele Borassi exposed some of them during GSOC2015 (see `sage/graphs/base/boost_*`).\n\nNathann",
    "created_at": "2015-09-22T10:59:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17729#issuecomment-237089",
    "user": "@nathanncohen"
}
```

Just answering the "boost can speed up some graph algorithms": the part of boost that handles graphs is already in Sage, and Michele Borassi exposed some of them during GSOC2015 (see `sage/graphs/base/boost_*`).

Nathann



---

archive/issue_comments_237090.json:
```json
{
    "body": "I am actually having a shot at developing a full spkg for this. I spent about half a day figuring why it refused to build and how to solve the problem: the system install of `boost` screw  the vanilla building in sage. Finding how to fix it was also difficult in the face of unhelpful documentation. Google was not much help either but I finally found a clue in the code.\n\nOther bits, it needs repackaging because our script don't like `boost_1_59_0.tar.bz2`, the sticky point being the first `_`. Just changing the tarball name is not enough since it unfold to `boost_1_59_0` which suffer the same problem. There is also quite a lot of stuff that probably can be removed as bloat for our purpose. But I am focusing on something usable first.\n\n I also note that `eclib` can use `boost` - and by that I mean libraries, I think `flint` may have `boost` options but I don't know if they do anything.",
    "created_at": "2015-09-23T02:47:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17729#issuecomment-237090",
    "user": "@kiwifb"
}
```

I am actually having a shot at developing a full spkg for this. I spent about half a day figuring why it refused to build and how to solve the problem: the system install of `boost` screw  the vanilla building in sage. Finding how to fix it was also difficult in the face of unhelpful documentation. Google was not much help either but I finally found a clue in the code.

Other bits, it needs repackaging because our script don't like `boost_1_59_0.tar.bz2`, the sticky point being the first `_`. Just changing the tarball name is not enough since it unfold to `boost_1_59_0` which suffer the same problem. There is also quite a lot of stuff that probably can be removed as bloat for our purpose. But I am focusing on something usable first.

 I also note that `eclib` can use `boost` - and by that I mean libraries, I think `flint` may have `boost` options but I don't know if they do anything.



---

archive/issue_comments_237091.json:
```json
{
    "body": "Not tested on OS X, probably need fiddling on cygwin. Not putting in review yet as it still needs a `spkg-src` script.\n----\nNew commits:",
    "created_at": "2015-09-23T03:30:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17729#issuecomment-237091",
    "user": "@kiwifb"
}
```

Not tested on OS X, probably need fiddling on cygwin. Not putting in review yet as it still needs a `spkg-src` script.
----
New commits:



---

archive/issue_comments_237092.json:
```json
{
    "body": "Replying to [comment:4 fbissey]:\n> Just changing the tarball name is not enough\n> it unfold to `boost_1_59_0` which suffer the same problem.\n\nThe extracted directory name doesn't matter. Nobody says it has to be of the form `package-version`.\n\nOf course, if you need a `spkg-src` for other reasons, you might as well change the top-level directory name but it's not required.",
    "created_at": "2015-09-23T06:15:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17729#issuecomment-237092",
    "user": "@jdemeyer"
}
```

Replying to [comment:4 fbissey]:
> Just changing the tarball name is not enough
> it unfold to `boost_1_59_0` which suffer the same problem.

The extracted directory name doesn't matter. Nobody says it has to be of the form `package-version`.

Of course, if you need a `spkg-src` for other reasons, you might as well change the top-level directory name but it's not required.



---

archive/issue_comments_237093.json:
```json
{
    "body": "Yes I could customise it instead of relying on `spkg-install` but I think the tarball needs a serious trim. One of the complaint about the full package is the size. There is some pictures and stuff like that probably can go.",
    "created_at": "2015-09-23T07:12:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17729#issuecomment-237093",
    "user": "@kiwifb"
}
```

Yes I could customise it instead of relying on `spkg-install` but I think the tarball needs a serious trim. One of the complaint about the full package is the size. There is some pictures and stuff like that probably can go.



---

archive/issue_comments_237094.json:
```json
{
    "body": "I do agree that 600 MB more is much.\nEven distros split boost into numerous packages, so if we could avoid shipping it as a huge block, whether its by splitting functionalities or removing images/binary/really useless stuff, it would be nice.",
    "created_at": "2015-09-23T07:38:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17729#issuecomment-237094",
    "user": "jpflori"
}
```

I do agree that 600 MB more is much.
Even distros split boost into numerous packages, so if we could avoid shipping it as a huge block, whether its by splitting functionalities or removing images/binary/really useless stuff, it would be nice.



---

archive/issue_comments_237095.json:
```json
{
    "body": "I opened #19570 for a different purpose. Fran\u00e7ois Bissey pointed me to the present ticket (which I somehow missed while searching Trac for boost) and Jeroen Demeyer closed the ticket.\n\nI do not understand the issues at hand. As far as I understand, the current Sagemath packages husr the boost subdirectory, which is sufficient for current Sagemath, whereas, as pointed out by Fran\u00e7ois, various voices have spoken in favor of the inclusion of the whole hawg, for goals that do not seem overly clear to me.\n\nAs far as I can tell :\n* The original reason of including boost (polybori, a. k. a. brial) is fulfilled by the current packaging (headers only).\n* This packaging is no longer stripped from polybori sources, but a subdirectory of the original boost tarball.\n* The bits needed by Nathaan Cohen for its graph manipulation purposes also are in place.\n* The reasons for packaging the whole hawg are not yet definite plans.\n* This packaging needs significant work.\n\nSo could we split this work in two :\n1. update the current packaging of the headers (that would fix my problemn and possibly Nathaans's too).\n2. develop the packaging of the whole boost.\n\nThe packaging of the headers is already a standard package, and therefore should probably remain so. The complete libary could become an optional package, on which new optional packages could depend.\n\nHowever, if some standard package (e. g. ECL) could benefit of the inclusion of the whole boost, this library should become standard...\n\nWhat do you think ?",
    "created_at": "2015-11-11T21:42:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17729#issuecomment-237095",
    "user": "@EmmanuelCharpentier"
}
```

I opened #19570 for a different purpose. François Bissey pointed me to the present ticket (which I somehow missed while searching Trac for boost) and Jeroen Demeyer closed the ticket.

I do not understand the issues at hand. As far as I understand, the current Sagemath packages husr the boost subdirectory, which is sufficient for current Sagemath, whereas, as pointed out by François, various voices have spoken in favor of the inclusion of the whole hawg, for goals that do not seem overly clear to me.

As far as I can tell :
* The original reason of including boost (polybori, a. k. a. brial) is fulfilled by the current packaging (headers only).
* This packaging is no longer stripped from polybori sources, but a subdirectory of the original boost tarball.
* The bits needed by Nathaan Cohen for its graph manipulation purposes also are in place.
* The reasons for packaging the whole hawg are not yet definite plans.
* This packaging needs significant work.

So could we split this work in two :
1. update the current packaging of the headers (that would fix my problemn and possibly Nathaans's too).
2. develop the packaging of the whole boost.

The packaging of the headers is already a standard package, and therefore should probably remain so. The complete libary could become an optional package, on which new optional packages could depend.

However, if some standard package (e. g. ECL) could benefit of the inclusion of the whole boost, this library should become standard...

What do you think ?



---

archive/issue_comments_237096.json:
```json
{
    "body": "I am sorry, I have mistaken your purpose. If you had titled upgrade `boost_cropped` I probably wouldn't have touched your ticket at all.\n\nI think it is ok to upgrade `boost_cropped` while we are working out on the full package as a longer term view.",
    "created_at": "2015-11-11T22:13:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17729#issuecomment-237096",
    "user": "@kiwifb"
}
```

I am sorry, I have mistaken your purpose. If you had titled upgrade `boost_cropped` I probably wouldn't have touched your ticket at all.

I think it is ok to upgrade `boost_cropped` while we are working out on the full package as a longer term view.



---

archive/issue_comments_237097.json:
```json
{
    "body": "Note that boost doesn't install the 600MB that it unpacks to; In fact I think its mostly docs, testcases, and workarounds for various compilers. If you strip out all docs and test directories then the source is more like 200MB, and the installed libraries are only 10's of MB.",
    "created_at": "2016-06-03T16:14:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17729#issuecomment-237097",
    "user": "@vbraun"
}
```

Note that boost doesn't install the 600MB that it unpacks to; In fact I think its mostly docs, testcases, and workarounds for various compilers. If you strip out all docs and test directories then the source is more like 200MB, and the installed libraries are only 10's of MB.



---

archive/issue_comments_237098.json:
```json
{
    "body": "PS: Chomp needs the boost libraries. Really the whole \"we don't need boost because nobody uses boost\" is just circular.",
    "created_at": "2016-06-03T16:15:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17729#issuecomment-237098",
    "user": "@vbraun"
}
```

PS: Chomp needs the boost libraries. Really the whole "we don't need boost because nobody uses boost" is just circular.



---

archive/issue_comments_237099.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-06-04T05:06:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17729#issuecomment-237099",
    "user": "@kiwifb"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_237100.json:
```json
{
    "body": "Duplicated by #20754",
    "created_at": "2016-06-04T05:06:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17729#issuecomment-237100",
    "user": "@kiwifb"
}
```

Duplicated by #20754



---

archive/issue_comments_237101.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-06-04T14:16:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17729#issuecomment-237101",
    "user": "@jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_237102.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-06-12T12:02:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17729#issuecomment-237102",
    "user": "@vbraun"
}
```

Resolution: fixed
