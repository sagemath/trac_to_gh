# Issue 16674: Update sagenb

archive/issues_016674.json:
```json
{
    "body": "CC:  kcrisman snark fbissey\n\nThis ticket is for\n\n1. updating sagenb\n2. updating documentation inside sage to reflect the new development model for sagenb\n\nIssue created by migration from https://trac.sagemath.org/ticket/16911\n\n",
    "created_at": "2014-08-30T17:34:31Z",
    "labels": [
        "notebook",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Update sagenb",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16674",
    "user": "ppurka"
}
```
CC:  kcrisman snark fbissey

This ticket is for

1. updating sagenb
2. updating documentation inside sage to reflect the new development model for sagenb

Issue created by migration from https://trac.sagemath.org/ticket/16911





---

archive/issue_comments_220144.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-08-31T00:45:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220144",
    "user": "kcrisman"
}
```

New commits:



---

archive/issue_comments_220145.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-09-07T13:43:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220145",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_220146.json:
```json
{
    "body": "Updated to new version with the upstream sagenb changes made to sphinx. The method to check it out is in description.\n\n**Note**: this is not the final version of the sagenb package, since I haven't changed the Changelog, and it doesn't contain the changes from upstream ticket https://github.com/sagemath/sagenb/pull/218\n\nStill, I am setting it to needs review so that the package itself can be tested against #16396",
    "created_at": "2014-09-07T13:52:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220146",
    "user": "ppurka"
}
```

Updated to new version with the upstream sagenb changes made to sphinx. The method to check it out is in description.

**Note**: this is not the final version of the sagenb package, since I haven't changed the Changelog, and it doesn't contain the changes from upstream ticket https://github.com/sagemath/sagenb/pull/218

Still, I am setting it to needs review so that the package itself can be tested against #16396



---

archive/issue_comments_220147.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-09-07T13:54:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220147",
    "user": "ppurka"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_220148.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-09-07T18:19:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220148",
    "user": "Snark"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_220149.json:
```json
{
    "body": "Hmmmm... of course it fails to build since it's looking for upstream sources which we don't have... how shall I test this ticket and #16396 without it?",
    "created_at": "2014-09-07T18:19:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220149",
    "user": "Snark"
}
```

Hmmmm... of course it fails to build since it's looking for upstream sources which we don't have... how shall I test this ticket and #16396 without it?



---

archive/issue_comments_220150.json:
```json
{
    "body": "Installation instructions are in the ticket description. If you don't have wget then you can download the file manually from Google drive.",
    "created_at": "2014-09-07T23:31:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220150",
    "user": "ppurka"
}
```

Installation instructions are in the ticket description. If you don't have wget then you can download the file manually from Google drive.



---

archive/issue_comments_220151.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2014-09-08T10:51:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220151",
    "user": "Snark"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_220152.json:
```json
{
    "body": "Sigh... and I had actually checked if it wasn't in the description!\n\nIt compiles and passes all doctests. I haven't yet looked at what it gives with #16396, but for this ticket, it's a positive review.",
    "created_at": "2014-09-08T10:51:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220152",
    "user": "Snark"
}
```

Sigh... and I had actually checked if it wasn't in the description!

It compiles and passes all doctests. I haven't yet looked at what it gives with #16396, but for this ticket, it's a positive review.



---

archive/issue_comments_220153.json:
```json
{
    "body": "Thanks. It is not complete yet. I wanted to put it up here so that you can test your ticket.\n\nTodo:\n\n1. merge upstream ticket about documentation, and\n2. update change log.",
    "created_at": "2014-09-08T11:05:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220153",
    "user": "ppurka"
}
```

Thanks. It is not complete yet. I wanted to put it up here so that you can test your ticket.

Todo:

1. merge upstream ticket about documentation, and
2. update change log.



---

archive/issue_comments_220154.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-09-08T11:05:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220154",
    "user": "ppurka"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_220155.json:
```json
{
    "body": "I have checked that the ticket as-is passes all doctests, and makes #16396 also pass everything.",
    "created_at": "2014-09-08T14:51:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220155",
    "user": "Snark"
}
```

I have checked that the ticket as-is passes all doctests, and makes #16396 also pass everything.



---

archive/issue_comments_220156.json:
```json
{
    "body": "Thanks for checking!  Have you played with the notebook itself to make sure there aren't any weird regressions (like the notebook not working...) that we missed?",
    "created_at": "2014-09-08T15:46:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220156",
    "user": "kcrisman"
}
```

Thanks for checking!  Have you played with the notebook itself to make sure there aren't any weird regressions (like the notebook not working...) that we missed?



---

archive/issue_comments_220157.json:
```json
{
    "body": "Hmmmm... I hadn't used the notebook since long, but I just failed to get a plot! Is there something wrong with:\n\n```\nfrom pylab import *\nxs=linspace(0,6)\nys=sin(xs)\nplot(xs,ys)\nshow()\n```\n\n?",
    "created_at": "2014-09-15T13:50:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220157",
    "user": "Snark"
}
```

Hmmmm... I hadn't used the notebook since long, but I just failed to get a plot! Is there something wrong with:

```
from pylab import *
xs=linspace(0,6)
ys=sin(xs)
plot(xs,ys)
show()
```

?



---

archive/issue_comments_220158.json:
```json
{
    "body": "I'm not sure that ever worked.   A figure has to be saved for it to show up, and I don't know that matplotlib does that.\n\n```\nsavefig('hi.png')\n```\n\nshould work, however - try that.",
    "created_at": "2014-09-15T14:00:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220158",
    "user": "kcrisman"
}
```

I'm not sure that ever worked.   A figure has to be saved for it to show up, and I don't know that matplotlib does that.

```
savefig('hi.png')
```

should work, however - try that.



---

archive/issue_comments_220159.json:
```json
{
    "body": "> I'm not sure that ever worked.   A figure has to be saved for it to show up, and I don't know that matplotlib does that.\n> {{{\n> savefig('hi.png')\n> }}}\n> should work, however - try that.\nTo be fair, in the Ipython notebook I assume that your code *does* work :)",
    "created_at": "2014-09-15T14:01:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220159",
    "user": "kcrisman"
}
```

> I'm not sure that ever worked.   A figure has to be saved for it to show up, and I don't know that matplotlib does that.
> {{{
> savefig('hi.png')
> }}}
> should work, however - try that.
To be fair, in the Ipython notebook I assume that your code *does* work :)



---

archive/issue_comments_220160.json:
```json
{
    "body": "Ah, yes, that's better... so it's a positive review?",
    "created_at": "2014-09-15T14:19:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220160",
    "user": "Snark"
}
```

Ah, yes, that's better... so it's a positive review?



---

archive/issue_comments_220161.json:
```json
{
    "body": "Though notice that I have the following in the logs:\n\n```\n/home/jpuydt/sage.git/local/lib/python2.7/site-packages/Crypto/Util/number.py:57: PowmInsecureWarning: Not using mpz_powm_sec.  You should rebuild using libgmp >= 5 to avoid timing attack vulnerability.\n  _warn(\"Not using mpz_powm_sec.  You should rebuild using libgmp >= 5 to avoid timing attack vulnerability.\", PowmInsecureWarning)\n```\n",
    "created_at": "2014-09-15T14:20:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220161",
    "user": "Snark"
}
```

Though notice that I have the following in the logs:

```
/home/jpuydt/sage.git/local/lib/python2.7/site-packages/Crypto/Util/number.py:57: PowmInsecureWarning: Not using mpz_powm_sec.  You should rebuild using libgmp >= 5 to avoid timing attack vulnerability.
  _warn("Not using mpz_powm_sec.  You should rebuild using libgmp >= 5 to avoid timing attack vulnerability.", PowmInsecureWarning)
```




---

archive/issue_comments_220162.json:
```json
{
    "body": "That is known and unrelated.  You can try it in a Sage without this and probably you'll see the same thing.  I do in all my installs.\n\nBut as ppurka says [comment:11 here], there remains a little cosmetic work.",
    "created_at": "2014-09-15T14:24:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220162",
    "user": "kcrisman"
}
```

That is known and unrelated.  You can try it in a Sage without this and probably you'll see the same thing.  I do in all my installs.

But as ppurka says [comment:11 here], there remains a little cosmetic work.



---

archive/issue_comments_220163.json:
```json
{
    "body": "Thanks all. I will update the package by this weekend.",
    "created_at": "2014-09-15T14:35:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220163",
    "user": "ppurka"
}
```

Thanks all. I will update the package by this weekend.



---

archive/issue_comments_220164.json:
```json
{
    "body": "Replying to [comment:18 Snark]:\n> Though notice that I have the following in the logs:\n> {{{\n> /home/jpuydt/sage.git/local/lib/python2.7/site-packages/Crypto/Util/number.py:57: PowmInsecureWarning: Not using mpz_powm_sec.  You should rebuild using libgmp >= 5 to avoid timing attack vulnerability.\n>   _warn(\"Not using mpz_powm_sec.  You should rebuild using libgmp >= 5 to avoid timing attack vulnerability.\", PowmInsecureWarning)\n> }}}\nIndependent from this ticket. We have already seen that if I remember correctly and it won't go away for some time while we are using mpir to provide gmp.",
    "created_at": "2014-09-15T19:55:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220164",
    "user": "fbissey"
}
```

Replying to [comment:18 Snark]:
> Though notice that I have the following in the logs:
> {{{
> /home/jpuydt/sage.git/local/lib/python2.7/site-packages/Crypto/Util/number.py:57: PowmInsecureWarning: Not using mpz_powm_sec.  You should rebuild using libgmp >= 5 to avoid timing attack vulnerability.
>   _warn("Not using mpz_powm_sec.  You should rebuild using libgmp >= 5 to avoid timing attack vulnerability.", PowmInsecureWarning)
> }}}
Independent from this ticket. We have already seen that if I remember correctly and it won't go away for some time while we are using mpir to provide gmp.



---

archive/issue_comments_220165.json:
```json
{
    "body": "I'm happy with the instructions on the Sage side as well, or at least happier :)",
    "created_at": "2014-09-16T20:42:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220165",
    "user": "kcrisman"
}
```

I'm happy with the instructions on the Sage side as well, or at least happier :)



---

archive/issue_comments_220166.json:
```json
{
    "body": "By the way, ppurka, there are a few other ready or almost-ready things that are actually fairly important upstream by migurehito, so if they come quick we should probably merge them too (things about admin errors).",
    "created_at": "2014-09-16T20:45:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220166",
    "user": "kcrisman"
}
```

By the way, ppurka, there are a few other ready or almost-ready things that are actually fairly important upstream by migurehito, so if they come quick we should probably merge them too (things about admin errors).



---

archive/issue_comments_220167.json:
```json
{
    "body": "This should fix #11469.",
    "created_at": "2014-09-17T13:42:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220167",
    "user": "kcrisman"
}
```

This should fix #11469.



---

archive/issue_comments_220168.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-09-21T04:17:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220168",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_220169.json:
```json
{
    "body": "Ok. I have updated sagenb upstream, the sagenb.tar, and added the new checksum. This is good to go. Setting it to positive review.",
    "created_at": "2014-09-21T04:32:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220169",
    "user": "ppurka"
}
```

Ok. I have updated sagenb upstream, the sagenb.tar, and added the new checksum. This is good to go. Setting it to positive review.



---

archive/issue_comments_220170.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2014-09-21T04:32:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220170",
    "user": "ppurka"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_220171.json:
```json
{
    "body": "Uh... Volker, why did you put #16396 as a dep of this ticket? That's the reverse as far as I know: sagenb's upgrade (#16911, here) blocks sphinx' upgrade (#16396), which blocks docutils' upgrade (#16733)... Or is there something I miss?",
    "created_at": "2014-09-24T18:23:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220171",
    "user": "Snark"
}
```

Uh... Volker, why did you put #16396 as a dep of this ticket? That's the reverse as far as I know: sagenb's upgrade (#16911, here) blocks sphinx' upgrade (#16396), which blocks docutils' upgrade (#16733)... Or is there something I miss?



---

archive/issue_comments_220172.json:
```json
{
    "body": "This ticket can be merged as soon as #16396 is done, so from an operational point of view we depend on #16396 and not the other way round.",
    "created_at": "2014-09-24T19:06:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220172",
    "user": "vbraun"
}
```

This ticket can be merged as soon as #16396 is done, so from an operational point of view we depend on #16396 and not the other way round.



---

archive/issue_comments_220173.json:
```json
{
    "body": "Uh... actually that's the reverse: the sphinx upgrade over at #16396 gives failing doctests until sagenb (#16911, here) has been upgraded.\n\nOf course, if you merge both at the same time, that won't have any importance :-P",
    "created_at": "2014-09-24T19:18:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220173",
    "user": "Snark"
}
```

Uh... actually that's the reverse: the sphinx upgrade over at #16396 gives failing doctests until sagenb (#16911, here) has been upgraded.

Of course, if you merge both at the same time, that won't have any importance :-P



---

archive/issue_comments_220174.json:
```json
{
    "body": "#16396 needs work, at least it says so on the ticket. So again, for ticket merging purposes, this ticket has to wait for #16396.",
    "created_at": "2014-09-24T19:42:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220174",
    "user": "vbraun"
}
```

#16396 needs work, at least it says so on the ticket. So again, for ticket merging purposes, this ticket has to wait for #16396.



---

archive/issue_comments_220175.json:
```json
{
    "body": "Just FYI, Fran\u00e7ois has updated #16396 and Julien seems to have confirmed it works, just need for that one to have the one last check and then we're good to go here.",
    "created_at": "2014-10-21T17:16:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220175",
    "user": "kcrisman"
}
```

Just FYI, François has updated #16396 and Julien seems to have confirmed it works, just need for that one to have the one last check and then we're good to go here.



---

archive/issue_comments_220176.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-10-23T11:19:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220176",
    "user": "vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_220177.json:
```json
{
    "body": "How can this ticket be fixed without the following?\n\nTo `@`vbraun: When merging this ticket, merge both this and #16396 since sagenb upstream has changes to fix doctests in that ticket, and that ticket in turn depends on an updated sagenb so that it can pass all doctests. Also close #11469 as that is incorporated here.",
    "created_at": "2014-10-23T13:38:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220177",
    "user": "gutow"
}
```

How can this ticket be fixed without the following?

To `@`vbraun: When merging this ticket, merge both this and #16396 since sagenb upstream has changes to fix doctests in that ticket, and that ticket in turn depends on an updated sagenb so that it can pass all doctests. Also close #11469 as that is incorporated here.



---

archive/issue_comments_220178.json:
```json
{
    "body": "I merged #16396. Isn't that sufficient? Please please put dependencies in the dependency field, I can't read through every ticket description / discussion when merging.",
    "created_at": "2014-10-24T12:46:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220178",
    "user": "vbraun"
}
```

I merged #16396. Isn't that sufficient? Please please put dependencies in the dependency field, I can't read through every ticket description / discussion when merging.



---

archive/issue_comments_220179.json:
```json
{
    "body": "> I merged #16396. Isn't that sufficient? \nI think at the time it hadn't been merged, though I'm sure it was in your queue at that point.\n> Please please put dependencies in the dependency field, I can't read through every ticket description / discussion when merging.\nYes, and the sagenb tickets aren't the only ones where this happens.  Perhaps a gentle reminder on sage-devel would be helpful, I'll do that.",
    "created_at": "2014-10-24T13:06:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220179",
    "user": "kcrisman"
}
```

> I merged #16396. Isn't that sufficient? 
I think at the time it hadn't been merged, though I'm sure it was in your queue at that point.
> Please please put dependencies in the dependency field, I can't read through every ticket description / discussion when merging.
Yes, and the sagenb tickets aren't the only ones where this happens.  Perhaps a gentle reminder on sage-devel would be helpful, I'll do that.



---

archive/issue_comments_220180.json:
```json
{
    "body": "Was sagenb 0.11.0 merged as part of this ticket? For what it's worth, the tarball was not prepared correctly: it has two copies of most of the component pieces (like `Babel-1.3.tar.gz`). When you unpack it, it has at the top level another tarball called `sagenb-0.11.0.tar.gz` which contains a second copy of everything. This is why the \"upstream\" tarball is twice the size of the one for sagenb-0.10.8.2.",
    "created_at": "2014-11-05T18:57:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220180",
    "user": "jhpalmieri"
}
```

Was sagenb 0.11.0 merged as part of this ticket? For what it's worth, the tarball was not prepared correctly: it has two copies of most of the component pieces (like `Babel-1.3.tar.gz`). When you unpack it, it has at the top level another tarball called `sagenb-0.11.0.tar.gz` which contains a second copy of everything. This is why the "upstream" tarball is twice the size of the one for sagenb-0.10.8.2.



---

archive/issue_comments_220181.json:
```json
{
    "body": "> Was sagenb 0.11.0 merged as part of this ticket? \nIt wasn't supposed to be.  That would have been #16004.\n> For what it's worth, the tarball was not prepared correctly: it has two copies of most of the component pieces (like `Babel-1.3.tar.gz`). When you unpack it, it has at the top level another tarball called `sagenb-0.11.0.tar.gz` which contains a second copy of everything. This is why the \"upstream\" tarball is twice the size of the one for sagenb-0.10.8.2.\nI just followed the instructions at https://gist.github.com/ppurka/d10f668db113c2d1ddd4 as recommended.  I wouldn't be surprised if I did something wrong, though.\n\nI'd be happy to try to fix that but would need *very* explicit instructions; I don't want to mess around trying to guess the right thing to do.",
    "created_at": "2014-11-05T19:04:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220181",
    "user": "kcrisman"
}
```

> Was sagenb 0.11.0 merged as part of this ticket? 
It wasn't supposed to be.  That would have been #16004.
> For what it's worth, the tarball was not prepared correctly: it has two copies of most of the component pieces (like `Babel-1.3.tar.gz`). When you unpack it, it has at the top level another tarball called `sagenb-0.11.0.tar.gz` which contains a second copy of everything. This is why the "upstream" tarball is twice the size of the one for sagenb-0.10.8.2.
I just followed the instructions at https://gist.github.com/ppurka/d10f668db113c2d1ddd4 as recommended.  I wouldn't be surprised if I did something wrong, though.

I'd be happy to try to fix that but would need *very* explicit instructions; I don't want to mess around trying to guess the right thing to do.



---

archive/issue_comments_220182.json:
```json
{
    "body": "I think that it can probably wait until the next sagenb update. By the way, I just noticed that since sagenb-0.10.8.2, I see the following message in the installation log file:\n\n```\nNote: Bypassing http://github.com/mitsuhiko/flask-oldsessions/tarball/master#egg=flask-oldsessions-0.10 (disallowed host; see http://bit.ly/1dg9ijs for details).\n```\n\nWhat does this mean?",
    "created_at": "2014-11-05T19:21:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220182",
    "user": "jhpalmieri"
}
```

I think that it can probably wait until the next sagenb update. By the way, I just noticed that since sagenb-0.10.8.2, I see the following message in the installation log file:

```
Note: Bypassing http://github.com/mitsuhiko/flask-oldsessions/tarball/master#egg=flask-oldsessions-0.10 (disallowed host; see http://bit.ly/1dg9ijs for details).
```

What does this mean?



---

archive/issue_comments_220183.json:
```json
{
    "body": "I also noticed that.  I believe it means we are supposed to download (see e.g. https://github.com/sagemath/sagenb/blob/master/util/fetch_deps.py)  that but didn't because somewhere we don't allow this host.  I don't know exactly where we use `easy_install`, though, so I couldn't easily debug that.",
    "created_at": "2014-11-05T20:23:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220183",
    "user": "kcrisman"
}
```

I also noticed that.  I believe it means we are supposed to download (see e.g. https://github.com/sagemath/sagenb/blob/master/util/fetch_deps.py)  that but didn't because somewhere we don't allow this host.  I don't know exactly where we use `easy_install`, though, so I couldn't easily debug that.



---

archive/issue_comments_220184.json:
```json
{
    "body": "> I think that it can probably wait until the next sagenb update. \nThat may come sooner than you think; see #17292.",
    "created_at": "2014-11-06T01:51:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220184",
    "user": "kcrisman"
}
```

> I think that it can probably wait until the next sagenb update. 
That may come sooner than you think; see #17292.



---

archive/issue_comments_220185.json:
```json
{
    "body": "> Was sagenb 0.11.0 merged as part of this ticket? For what it's worth, the tarball was not prepared correctly: it has two copies of most of the component pieces (like `Babel-1.3.tar.gz`). When you unpack it, it has at the top level another tarball called `sagenb-0.11.0.tar.gz` which contains a second copy of everything. This is why the \"upstream\" tarball is twice the size of the one for sagenb-0.10.8.2.\n\nLooks like we will indeed be releasing a new one, so if you have an easy fix for this, I would appreciate that - you can communicate at https://github.com/sagemath/sagenb/issues or here or at #17292 or in private communication.",
    "created_at": "2014-11-06T16:38:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220185",
    "user": "kcrisman"
}
```

> Was sagenb 0.11.0 merged as part of this ticket? For what it's worth, the tarball was not prepared correctly: it has two copies of most of the component pieces (like `Babel-1.3.tar.gz`). When you unpack it, it has at the top level another tarball called `sagenb-0.11.0.tar.gz` which contains a second copy of everything. This is why the "upstream" tarball is twice the size of the one for sagenb-0.10.8.2.

Looks like we will indeed be releasing a new one, so if you have an easy fix for this, I would appreciate that - you can communicate at https://github.com/sagemath/sagenb/issues or here or at #17292 or in private communication.



---

archive/issue_comments_220186.json:
```json
{
    "body": "I don't have an easy fix. It turns out that the big tarball contained a smaller tarball `sagenb-0.11.0.tar.gz` which actually was just the right thing: you could just keep the smaller one and use it in the upstream directory. I guess I would say, keep an eye on the file sizes. If it's much bigger than the previous one (for 0.10.8.2 or whatever it was), then something might be wrong.",
    "created_at": "2014-11-06T18:46:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220186",
    "user": "jhpalmieri"
}
```

I don't have an easy fix. It turns out that the big tarball contained a smaller tarball `sagenb-0.11.0.tar.gz` which actually was just the right thing: you could just keep the smaller one and use it in the upstream directory. I guess I would say, keep an eye on the file sizes. If it's much bigger than the previous one (for 0.10.8.2 or whatever it was), then something might be wrong.



---

archive/issue_comments_220187.json:
```json
{
    "body": "Hmm, then I guess the problem is that the instructions have an extra line.  Because [python setup.py sdist](https://docs.python.org/2/distutils/sourcedist.html) already makes a `.tar.gz`, and then we in addition do\n\n```\ntar cf sagenb-<version>.tar sagenb-<version>\n```\n\nwhich presumably leads to the tar file you found.  So that step is probably extra.",
    "created_at": "2014-11-06T18:54:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220187",
    "user": "kcrisman"
}
```

Hmm, then I guess the problem is that the instructions have an extra line.  Because [python setup.py sdist](https://docs.python.org/2/distutils/sourcedist.html) already makes a `.tar.gz`, and then we in addition do

```
tar cf sagenb-<version>.tar sagenb-<version>
```

which presumably leads to the tar file you found.  So that step is probably extra.



---

archive/issue_comments_220188.json:
```json
{
    "body": "> I don't have an easy fix. It turns out that the big tarball contained a smaller tarball `sagenb-0.11.0.tar.gz` which actually was just the right thing: you could just keep the smaller one and use it in the upstream directory. I guess I would say, keep an eye on the file sizes. If it's much bigger than the previous one (for 0.10.8.2 or whatever it was), then something might be wrong.\n\nI dunno, I'm not convinced now.  I just repackaged a new one (it's not 100% ready, but just to test) and got\n\n```\n$ du sagenb-0.11.1.tar \n35824\tsagenb-0.11.1.tar\n$ du upstream/sagenb-0.10.8.2.tar \n33224\tupstream/sagenb-0.10.8.2.tar\n```\n\nGiven that there is a new jQuery and other goodies, this seems like a small difference.  I can confirm that the previous one was wrong, but I don't know how this happened.  I'll check in the future, though.",
    "created_at": "2014-11-06T21:42:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220188",
    "user": "kcrisman"
}
```

> I don't have an easy fix. It turns out that the big tarball contained a smaller tarball `sagenb-0.11.0.tar.gz` which actually was just the right thing: you could just keep the smaller one and use it in the upstream directory. I guess I would say, keep an eye on the file sizes. If it's much bigger than the previous one (for 0.10.8.2 or whatever it was), then something might be wrong.

I dunno, I'm not convinced now.  I just repackaged a new one (it's not 100% ready, but just to test) and got

```
$ du sagenb-0.11.1.tar 
35824	sagenb-0.11.1.tar
$ du upstream/sagenb-0.10.8.2.tar 
33224	upstream/sagenb-0.10.8.2.tar
```

Given that there is a new jQuery and other goodies, this seems like a small difference.  I can confirm that the previous one was wrong, but I don't know how this happened.  I'll check in the future, though.



---

archive/issue_comments_220189.json:
```json
{
    "body": "I think that's probably okay. It's not twice the size, which is what happened before.",
    "created_at": "2014-11-06T23:39:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16674#issuecomment-220189",
    "user": "jhpalmieri"
}
```

I think that's probably okay. It's not twice the size, which is what happened before.
