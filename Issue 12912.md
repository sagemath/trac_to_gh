# Issue 12912: Weierstrass form for toric elliptic curves

Issue created by migration from https://trac.sagemath.org/ticket/13084

Original creator: vbraun

Original creation time: 2012-06-03 21:57:46

Assignee: AlexGhitza

CC:  novoselt dimpase mstreng

This ticket implements the Weierstrass form for anticanonical hypersurfaces in toric surfaces defined by reflexive polygons:

```
  sage: from sage.schemes.toric.weierstrass import WeierstrassForm
  sage: R.<x,y> = QQ[]
  sage: cubic = x^3 + y^3 + 1
  sage: WeierstrassForm(cubic)  # cubic in P^2
  (0, -27/4)
  sage: WeierstrassForm(x^4 + y^2 + 1)  # in P^2[112]
  (-4, 0)
  sage: WeierstrassForm(x^2*y^2 + x^2 + y^2 + 1)   # in P^1xP^1
  (-16/3, 128/27)
```



---

Comment by vbraun created at 2012-06-03 22:29:39

Changing status from new to needs_review.


---

Comment by nbruin created at 2012-06-03 23:27:54

Excellent work! In all these cases, the genus 1 curve is a cover of its jacobian in a relatively canonical way. With your approach, is it reasonably possible to compute these covering maps? Doing so gives a kind of "certificate". One starting point would be
    T.A Fisher, The invariants of a genus one curve, Proc. Lond. Math. Soc., 97(3):753--782, 2008.
also on [arXiv](http://arxiv.org/abs/math/0610318).


---

Comment by vbraun created at 2012-06-04 15:23:57

The reference looks interesting, I'll have a look! 

Though I think there is already too much code in this ticket, any further features should go to a followup.


---

Comment by vbraun created at 2012-09-12 11:26:01

I've split off the classical invariant theory stuff into a different module (#13451), this is much cleaner now. Still needs review ;-)


---

Comment by chapoton created at 2012-10-26 20:08:27

apply only trac_13084_toric_weierstrass.patch


---

Comment by vbraun created at 2013-02-22 11:24:37

rediffed for sage-5.8.beta0


---

Comment by vbraun created at 2013-05-18 22:42:03

This is mostly geometry of polygons with a little bit of invariant theory thrown in - Dima, do you feel comfortable reviewing the ticket?


---

Comment by dimpase created at 2013-05-19 00:50:28

Replying to [comment:8 vbraun]:
> This is mostly geometry of polygons with a little bit of invariant theory thrown in - Dima, do you feel comfortable reviewing the ticket?

This is surely a fun ticket! 

But I am not familiar with the number theory part of it, and lately falling behind with everything, including reviewing my son's nappy's :–)
Besides, it ought to be reviewed by number theorists.

Let me in turn invite you to consider taking part in this: http://web.spms.ntu.edu.sg/~dima/IMS2013/


---

Comment by vbraun created at 2013-05-19 09:19:01

For the record, there isn't really any number theory in here. Maybe Marco is interested in reviewing this? ;-)


---

Comment by chapoton created at 2013-05-28 18:57:28

Changing status from needs_review to needs_work.


---

Comment by chapoton created at 2013-05-28 18:57:28

See the bot report:

* coverage is not 100%

* needs to use the new doctest continuation `...:`


---

Attachment

Updated patch


---

Attachment

Updated patch


---

Comment by vbraun created at 2013-05-30 14:12:57

Fixed


---

Comment by chapoton created at 2013-05-30 18:43:57

Changing status from needs_work to needs_review.


---

Comment by vbraun created at 2013-06-01 13:48:18

Frédéric, are you going to review this ticket?


---

Comment by chapoton created at 2013-06-03 20:13:07

I have added a "cosmetic cleanup" patch for the file weierstrass.py. In particular, it removes many unused import statements.


---

Comment by vbraun created at 2013-06-03 20:26:02

Thanks, looks good to me.


---

Attachment

Another cosmetic-cleanup patch. Similar work on import statements and pep8


---

Attachment

Looks good to me.

I take it you forgot to set the ticket to positive review after posting patches for all of the new code?


---

Comment by chapoton created at 2013-06-12 13:01:52

well, I am not able to seriously review the math..


---

Comment by dimpase created at 2013-06-13 09:05:12

Attempting to look at the maths side. It's confusing that you start off talking about a **toric** elliptic curve, but then speak about "the elliptic curve". What is going on there?

further nitpicks:


```
There are 16 reflexive polygons in 2-d.
```

Could you add a reference and change this to 

```
There are 16 reflexive polygons in the plane.
```


And add an exact reference to the next statement.

```
Each defines a toric fano  variety, which (in 2-d) has a unique crepant resolution to a smooth 
 toric surface.
```

Which should also be changed to 

```
Each of them defines a toric Fano  variety...
```


Then,

```
It turns out that the anticanonical hypersurface equation...
```

Reference?


---

Comment by vbraun created at 2013-06-13 10:24:49

Replying to [comment:20 dimpase]:
> And add an exact reference to the next statement.
> {{{
> Each defines a toric fano  variety, which (in 2-d) has a unique crepant resolution to a smooth 
>  toric surface.
> }}}

Thats just the fact that a fan in the plane has a unique refinement into smooth cones. CLS just say that "its easy to see" (p. 500)


---

Comment by vbraun created at 2013-06-13 10:57:21

Done


---

Comment by dimpase created at 2013-06-13 11:47:20

Replying to [comment:22 vbraun]:
> Done
capitalize `fano`. It's a [name](http://en.wikipedia.org/wiki/Gino_Fano), after all!


---

Comment by dimpase created at 2013-06-13 20:35:49

hope you will update the relevant patch to change `fano` to `Fano` in docstrings...


---

Comment by dimpase created at 2013-06-13 20:35:49

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2013-06-13 22:22:43

Updated patch


---

Attachment

Thanks, I fixed the "Fano".

Speaking of, its been grinding my gears the last couple of days that `hilbert_series` is lower case in Sage ;-)


---

Comment by jdemeyer created at 2013-06-19 12:24:45

Resolution: fixed
