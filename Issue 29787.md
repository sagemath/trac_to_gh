# Issue 29787: Add build/pkgs/SPKG/requirements.txt for all Python SPKG

archive/issues_029787.json:
```json
{
    "body": "CC:  slelievre jhpalmieri mjo\n\nThese files were added in #29287 (SPKG type: Make \"normal/script/pip\" orthogonal to \"base/standard/optional/experimental\") for all pip packages. \n\nIn this ticket, we add them for all normal Python packages.\n\nSome scripts need updating to make sure that `checksums.ini` wins over `requirements.txt` - to keep normal packages normal.\n\nWe record \"abstract\" version requirements in this file so that many versions are accepted instead of only one particular version. This may be refined later (cf. https://packaging.python.org/discussions/install-requires-vs-requirements/)\n\n\nThis is a step of Meta-ticket #29023 (In a python 3 build, use system Python packages) and of Meta-ticket #21507 (Make sagelib a pip-installable Python source package, listed on PyPI)\n\nIssue created by migration from https://trac.sagemath.org/ticket/30024\n\n",
    "created_at": "2020-06-29T19:44:16Z",
    "labels": [
        "build",
        "major",
        "enhancement"
    ],
    "title": "Add build/pkgs/SPKG/requirements.txt for all Python SPKG",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29787",
    "user": "mkoeppe"
}
```
CC:  slelievre jhpalmieri mjo

These files were added in #29287 (SPKG type: Make "normal/script/pip" orthogonal to "base/standard/optional/experimental") for all pip packages. 

In this ticket, we add them for all normal Python packages.

Some scripts need updating to make sure that `checksums.ini` wins over `requirements.txt` - to keep normal packages normal.

We record "abstract" version requirements in this file so that many versions are accepted instead of only one particular version. This may be refined later (cf. https://packaging.python.org/discussions/install-requires-vs-requirements/)


This is a step of Meta-ticket #29023 (In a python 3 build, use system Python packages) and of Meta-ticket #21507 (Make sagelib a pip-installable Python source package, listed on PyPI)

Issue created by migration from https://trac.sagemath.org/ticket/30024





---

archive/issue_comments_423138.json:
```json
{
    "body": "I would strongly suggest to have a look at pipenv, which manages python dependencies via pipfile and pipfile.lock (replacing requirements.txt and checksums.ini (?)).",
    "created_at": "2020-09-07T07:34:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29787#issuecomment-423138",
    "user": "@tobiasdiez"
}
```

I would strongly suggest to have a look at pipenv, which manages python dependencies via pipfile and pipfile.lock (replacing requirements.txt and checksums.ini (?)).



---

archive/issue_comments_423139.json:
```json
{
    "body": "Not sure if we can use pipenv as a drop in solution. \n\nFor various Python packages, we currently have to use patches or special build steps. I have sketched a way forward in #29500 -- use our custom build scripts to build wheels (and store them in a wheelhouse / private package index), which can then be installed by all standard tools (and also by users into separate venvs). We can certainly generate a `Pipfile` that makes this easier for users",
    "created_at": "2020-09-07T18:00:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29787#issuecomment-423139",
    "user": "mkoeppe"
}
```

Not sure if we can use pipenv as a drop in solution. 

For various Python packages, we currently have to use patches or special build steps. I have sketched a way forward in #29500 -- use our custom build scripts to build wheels (and store them in a wheelhouse / private package index), which can then be installed by all standard tools (and also by users into separate venvs). We can certainly generate a `Pipfile` that makes this easier for users



---

archive/issue_comments_423140.json:
```json
{
    "body": "Let's discuss two separate concerns on two separate tickets:\n- sagelib's concern to declare the requirements regarding Python packages - #29041\n- sage-the-distribution's concern to provide working versions of Python packages as wheels - #29500",
    "created_at": "2020-09-07T18:22:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29787#issuecomment-423140",
    "user": "mkoeppe"
}
```

Let's discuss two separate concerns on two separate tickets:
- sagelib's concern to declare the requirements regarding Python packages - #29041
- sage-the-distribution's concern to provide working versions of Python packages as wheels - #29500



---

archive/issue_comments_423141.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2020-10-04T17:31:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29787#issuecomment-423141",
    "user": "mkoeppe"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_423142.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2020-11-11T19:53:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29787",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29787#issuecomment-423142",
    "user": "mkoeppe"
}
```

Changing status from needs_info to needs_work.
