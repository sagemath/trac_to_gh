# Issue 17793: Clean-up stdsage.pxi includes

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2015-03-21 14:12:26




---

Comment by jdemeyer created at 2015-03-21 15:09:03

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2015-03-21 15:09:03

New commits:


---

Comment by git created at 2015-03-21 16:33:19

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-03-21 16:34:45

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by pbruin created at 2015-03-25 16:04:53

Looks good to me.


---

Comment by pbruin created at 2015-03-25 16:04:53

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-04-10 22:00:11

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2015-04-10 22:00:11


```
Cythonizing sage/sat/solvers/cryptominisat/solverconf.pyx

Error compiling Cython file:
------------------------------------------------------------
...
        cdef uint32_t *learnt1 = get_unitary_learnts_helper(self._solver,&num)

        r = []
        for i in range(num):
            r.append( (-1)**int(learnt1[i]&1) * (int(learnt1[i]>>1)+1) )
        sage_free(learnt1)
                ^
------------------------------------------------------------

sage/sat/solvers/cryptominisat/cryptominisat.pyx:415:17: undeclared name not builtin: sage_free

Error compiling Cython file:
------------------------------------------------------------
...
        cdef uint32_t *learnt1 = get_unitary_learnts_helper(self._solver,&num)

        r = []
        for i in range(num):
            r.append( (-1)**int(learnt1[i]&1) * (int(learnt1[i]>>1)+1) )
        sage_free(learnt1)
                        ^
------------------------------------------------------------

sage/sat/solvers/cryptominisat/cryptominisat.pyx:415:25: Cannot convert 'uint32_t *' to Python object

Error compiling Cython file:
------------------------------------------------------------
...

        r = []
        for i in range(num):
            clause = learnt[i]
            C = [(-1)**int(clause[j]&1) * (int(clause[j]>>1)+1) for j in range(1,clause[0]+1)]
            sage_free(clause)
                           ^
------------------------------------------------------------

sage/sat/solvers/cryptominisat/cryptominisat.pyx:427:28: Cannot convert 'uint32_t *' to Python object

Error compiling Cython file:
------------------------------------------------------------
...
        for i in range(num):
            clause = learnt[i]
            C = [(-1)**int(clause[j]&1) * (int(clause[j]>>1)+1) for j in range(1,clause[0]+1)]
            sage_free(clause)
            r.append(tuple(C))
        sage_free(learnt)
                       ^
------------------------------------------------------------

sage/sat/solvers/cryptominisat/cryptominisat.pyx:429:24: Cannot convert 'uint32_t **' to Python object
Traceback (most recent call last):
  File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/Cython-0.22-py2.7-linux-x86_64.egg/Cython/Build/Dependencies.py", line 1003, in cythonize_one_helper
    return cythonize_one(*m[1:])
  File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/Cython-0.22-py2.7-linux-x86_64.egg/Cython/Build/Dependencies.py", line 985, in cythonize_one
```



---

Comment by jdemeyer created at 2015-04-11 09:22:28

This is exactly the problem that #18145 was meant to detect, so that ticket did its job.


---

Comment by git created at 2015-04-11 10:03:01

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2015-04-11 10:03:22

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2015-04-11 10:14:11

Changing status from needs_review to needs_work.


---

Comment by git created at 2015-04-11 11:16:22

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2015-04-11 11:16:43

Changing status from needs_work to needs_review.


---

Comment by pbruin created at 2015-04-13 06:52:41

Changing status from needs_review to positive_review.


---

Comment by pbruin created at 2015-04-13 06:52:41

Passes tests again (I tested this merged with 6.6.rc3).


---

Comment by vbraun created at 2015-04-14 20:02:21

Conflicts, merge in 6.7.rc0


---

Comment by vbraun created at 2015-04-14 20:02:21

Changing status from positive_review to needs_work.


---

Comment by git created at 2015-04-15 06:21:16

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2015-04-15 06:21:33

Changing status from needs_work to needs_review.


---

Comment by pbruin created at 2015-04-15 10:30:49

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-04-15 13:58:18

Resolution: fixed
