# Issue 14571: Symmetric functions: extending Kronecker product, implementing Kronecker product, extending forgotten basis, implementing Witt basis

archive/issues_014571.json:
```json
{
    "body": "Assignee: tbd\n\nCC:  @zabrocki @anneschilling @tscrim @nthiery @hivert sage-combinat @mwhansen\n\nWill supply description in half an hour.\n\nIssue created by migration from https://trac.sagemath.org/ticket/14775\n\n",
    "created_at": "2013-06-19T10:42:31Z",
    "labels": [],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.12",
    "title": "Symmetric functions: extending Kronecker product, implementing Kronecker product, extending forgotten basis, implementing Witt basis",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14571",
    "user": "https://github.com/darijgr"
}
```
Assignee: tbd

CC:  @zabrocki @anneschilling @tscrim @nthiery @hivert sage-combinat @mwhansen

Will supply description in half an hour.

Issue created by migration from https://trac.sagemath.org/ticket/14775





---

archive/issue_comments_184748.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to combinatorics.",
    "created_at": "2013-06-19T10:44:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184748",
    "user": "https://github.com/darijgr"
}
```

Changing component from PLEASE CHANGE to combinatorics.



---

archive/issue_comments_184749.json:
```json
{
    "body": "Changing keywords from \"\" to \"symmetric function, combinat, kronecker product\".",
    "created_at": "2013-06-19T10:44:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184749",
    "user": "https://github.com/darijgr"
}
```

Changing keywords from "" to "symmetric function, combinat, kronecker product".



---

archive/issue_comments_184750.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2013-06-19T10:44:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184750",
    "user": "https://github.com/darijgr"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_184751.json:
```json
{
    "body": "Changing assignee from tbd to sage-combinat.",
    "created_at": "2013-06-19T10:44:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184751",
    "user": "https://github.com/darijgr"
}
```

Changing assignee from tbd to sage-combinat.



---

archive/issue_comments_184752.json:
```json
{
    "body": "Changing keywords from \"symmetric function, combinat, kronecker product\" to \"symmetric function, combinat, kronecker product, days49\".",
    "created_at": "2013-06-19T10:45:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184752",
    "user": "https://github.com/darijgr"
}
```

Changing keywords from "symmetric function, combinat, kronecker product" to "symmetric function, combinat, kronecker product, days49".



---

archive/issue_comments_184753.json:
```json
{
    "body": "3 is done. Anyone has a better name than `degree_negation` for the algebra automorphism of ``SymmetricFunctions`` which acts as 1 in even degrees and 0 in odd ones?\n\nThe changes in the antipode method not only made it work over any rings, but also sped it up on each basis except for the powersum one (and the monomial one, but I improved that with a trivial fix):\n\nTest suite:\n\n\n```\ndef testall():\n    Sym = SymmetricFunctions(QQ)\n    print \"m\"\n    timeit(\"SymmetricFunctions(QQ).m()([4,3,2]).antipode()\")\n    print \"h\"\n    timeit(\"SymmetricFunctions(QQ).h()([4,3,2]).antipode()\")\n    print \"e\"\n    timeit(\"SymmetricFunctions(QQ).e()([4,3,2]).antipode()\")\n    print \"s\"\n    timeit(\"SymmetricFunctions(QQ).s()([4,3,2]).antipode()\")\n    print \"p\"\n    timeit(\"SymmetricFunctions(QQ).p()([4,3,2]).antipode()\")\n```\n\n\nResults:\n\n\n```\noriginal version:\n\nsage: testall()\nm\n125 loops, best of 3: 1.86 ms per loop\nh\n25 loops, best of 3: 10.8 ms per loop\ne\n25 loops, best of 3: 10.8 ms per loop\ns\n25 loops, best of 3: 30.6 ms per loop\np\n625 loops, best of 3: 146 \u00b5s per loop\n\nafter change of generic antipode to go via omega rather than via coercion to powersum basis:\n\nsage: testall()\nm\n125 loops, best of 3: 2.16 ms per loop\nh\n125 loops, best of 3: 2.92 ms per loop\ne\n125 loops, best of 3: 2.92 ms per loop\ns\n625 loops, best of 3: 250 \u00b5s per loop\np\n625 loops, best of 3: 148 \u00b5s per loop\n\nafter microoptimization in the antipode of powersum (replacing (-1)**blah by case distinction):\n\nsage: testall()             \nm\n125 loops, best of 3: 1.79 ms per loop\nh\n125 loops, best of 3: 2.88 ms per loop\ne\n125 loops, best of 3: 2.95 ms per loop\ns\n625 loops, best of 3: 252 \u00b5s per loop\np\n625 loops, best of 3: 113 \u00b5s per loop\n```\n",
    "created_at": "2013-06-20T08:35:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184753",
    "user": "https://github.com/darijgr"
}
```

3 is done. Anyone has a better name than `degree_negation` for the algebra automorphism of ``SymmetricFunctions`` which acts as 1 in even degrees and 0 in odd ones?

The changes in the antipode method not only made it work over any rings, but also sped it up on each basis except for the powersum one (and the monomial one, but I improved that with a trivial fix):

Test suite:


```
def testall():
    Sym = SymmetricFunctions(QQ)
    print "m"
    timeit("SymmetricFunctions(QQ).m()([4,3,2]).antipode()")
    print "h"
    timeit("SymmetricFunctions(QQ).h()([4,3,2]).antipode()")
    print "e"
    timeit("SymmetricFunctions(QQ).e()([4,3,2]).antipode()")
    print "s"
    timeit("SymmetricFunctions(QQ).s()([4,3,2]).antipode()")
    print "p"
    timeit("SymmetricFunctions(QQ).p()([4,3,2]).antipode()")
```


Results:


```
original version:

sage: testall()
m
125 loops, best of 3: 1.86 ms per loop
h
25 loops, best of 3: 10.8 ms per loop
e
25 loops, best of 3: 10.8 ms per loop
s
25 loops, best of 3: 30.6 ms per loop
p
625 loops, best of 3: 146 µs per loop

after change of generic antipode to go via omega rather than via coercion to powersum basis:

sage: testall()
m
125 loops, best of 3: 2.16 ms per loop
h
125 loops, best of 3: 2.92 ms per loop
e
125 loops, best of 3: 2.92 ms per loop
s
625 loops, best of 3: 250 µs per loop
p
625 loops, best of 3: 148 µs per loop

after microoptimization in the antipode of powersum (replacing (-1)**blah by case distinction):

sage: testall()             
m
125 loops, best of 3: 1.79 ms per loop
h
125 loops, best of 3: 2.88 ms per loop
e
125 loops, best of 3: 2.95 ms per loop
s
625 loops, best of 3: 252 µs per loop
p
625 loops, best of 3: 113 µs per loop
```




---

archive/issue_comments_184754.json:
```json
{
    "body": "Attachment [forgotten-speed-reg1](tarball://root/attachments/some-uuid/ticket14775/forgotten-speed-reg1) by @darijgr created at 2013-06-21 15:07:25\n\nspeed tests before and after goal 4 implementation on partition [4,3,2]",
    "created_at": "2013-06-21T15:07:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184754",
    "user": "https://github.com/darijgr"
}
```

Attachment [forgotten-speed-reg1](tarball://root/attachments/some-uuid/ticket14775/forgotten-speed-reg1) by @darijgr created at 2013-06-21 15:07:25

speed tests before and after goal 4 implementation on partition [4,3,2]



---

archive/issue_comments_184755.json:
```json
{
    "body": "speed tests before and after goal 4 implementation on partition [4,3,2,2]",
    "created_at": "2013-06-21T15:07:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184755",
    "user": "https://github.com/darijgr"
}
```

speed tests before and after goal 4 implementation on partition [4,3,2,2]



---

archive/issue_comments_184756.json:
```json
{
    "body": "Attachment [forgotten-speed-reg2](tarball://root/attachments/some-uuid/ticket14775/forgotten-speed-reg2) by @darijgr created at 2013-06-21 15:09:59\n\nNew version up, with forgotten functions working over every base ring. I've attached two files which show some timings for conversions from and to f. The times over a base ring which is a QQ-algebra have become a tad worse, although probably not significantly (what are our criteria for that?). The times over a base ring which is a QQ-algebra differ significantly from those over a base ring which is not, although not in a sufficiently consistent way for me to prefer one method over the other.\n\nIn other news, this patch has profited much from input by Nicolas Thiery, Mike Zabrocki, Florent Hivert and Simon King. Thank you!",
    "created_at": "2013-06-21T15:09:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184756",
    "user": "https://github.com/darijgr"
}
```

Attachment [forgotten-speed-reg2](tarball://root/attachments/some-uuid/ticket14775/forgotten-speed-reg2) by @darijgr created at 2013-06-21 15:09:59

New version up, with forgotten functions working over every base ring. I've attached two files which show some timings for conversions from and to f. The times over a base ring which is a QQ-algebra have become a tad worse, although probably not significantly (what are our criteria for that?). The times over a base ring which is a QQ-algebra differ significantly from those over a base ring which is not, although not in a sufficiently consistent way for me to prefer one method over the other.

In other news, this patch has profited much from input by Nicolas Thiery, Mike Zabrocki, Florent Hivert and Simon King. Thank you!



---

archive/issue_comments_184757.json:
```json
{
    "body": "backup version, implementing goals 1, 2, 3, 4 of 5",
    "created_at": "2013-06-21T23:38:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184757",
    "user": "https://github.com/darijgr"
}
```

backup version, implementing goals 1, 2, 3, 4 of 5



---

archive/issue_comments_184758.json:
```json
{
    "body": "Attachment [kronecker-on-Sym.patch](tarball://root/attachments/some-uuid/ticket14775/kronecker-on-Sym.patch) by @darijgr created at 2013-06-21 23:45:10\n\nIf anyone could comment on my `witt.py` file in [attachment:trac_14775-symmetric_functions_extended-dg.patch], I'd be much indebted (while the coercions seem to work, my understanding of OOP is still very fragmentary and I wouldn't be surprised if some of what I've done is bad practice). I am going to add more doctests, implement coercions/conversions to power sums and elementary symmetrics. (And if I really have too much time on my hand, I'll add Frobenius and Verschiebung maps.)",
    "created_at": "2013-06-21T23:45:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184758",
    "user": "https://github.com/darijgr"
}
```

Attachment [kronecker-on-Sym.patch](tarball://root/attachments/some-uuid/ticket14775/kronecker-on-Sym.patch) by @darijgr created at 2013-06-21 23:45:10

If anyone could comment on my `witt.py` file in [attachment:trac_14775-symmetric_functions_extended-dg.patch], I'd be much indebted (while the coercions seem to work, my understanding of OOP is still very fragmentary and I wouldn't be surprised if some of what I've done is bad practice). I am going to add more doctests, implement coercions/conversions to power sums and elementary symmetrics. (And if I really have too much time on my hand, I'll add Frobenius and Verschiebung maps.)



---

archive/issue_comments_184759.json:
```json
{
    "body": "While there are good formulas for the h, e, p bases in terms of the w bases, as well as not-too-slow algorithms for the w basis in terms of the h, e, p bases (basically by inverting the formulas just mentioned), I am not sure which of them I should implement. Right now I have implemented h-to-w and w-to-h, declaring them as coercions, and p-to-w. The h-to-w and w-to-h coercions use a cache like the ones in `dual.py`. Now I need guidance on the following:\n\n1) Is it a good idea to also use cache for e-to-w and w-to-e? (The downside is that there will be more caches in memory.) Same for p-to-w (my current implementation is cacheless, thus not as fast as it could be) and w-to-p.\n\n2) If I implement these maps, should I register them as coersions? (This would normally make sense, but I fear they could significantly slow down coercions between standard classical bases because of the asinine way the current system generates coercion paths.)",
    "created_at": "2013-06-22T12:41:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184759",
    "user": "https://github.com/darijgr"
}
```

While there are good formulas for the h, e, p bases in terms of the w bases, as well as not-too-slow algorithms for the w basis in terms of the h, e, p bases (basically by inverting the formulas just mentioned), I am not sure which of them I should implement. Right now I have implemented h-to-w and w-to-h, declaring them as coercions, and p-to-w. The h-to-w and w-to-h coercions use a cache like the ones in `dual.py`. Now I need guidance on the following:

1) Is it a good idea to also use cache for e-to-w and w-to-e? (The downside is that there will be more caches in memory.) Same for p-to-w (my current implementation is cacheless, thus not as fast as it could be) and w-to-p.

2) If I implement these maps, should I register them as coersions? (This would normally make sense, but I fear they could significantly slow down coercions between standard classical bases because of the asinine way the current system generates coercion paths.)



---

archive/issue_comments_184760.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2013-06-22T12:42:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184760",
    "user": "https://github.com/darijgr"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_184761.json:
```json
{
    "body": "Hi Darij,\n\nCould you run some benchmarks to check what happens when you implement and register the above mentioned coercions?\n\nAnne",
    "created_at": "2013-06-22T12:54:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184761",
    "user": "https://github.com/anneschilling"
}
```

Hi Darij,

Could you run some benchmarks to check what happens when you implement and register the above mentioned coercions?

Anne



---

archive/issue_comments_184762.json:
```json
{
    "body": "Replying to [comment:9 darij]:\n> 1) Is it a good idea to also use cache for e-to-w and w-to-e? (The downside is that there will be more caches in memory.) Same for p-to-w (my current implementation is cacheless, thus not as fast as it could be) and w-to-p.\n\nOnly practice will tell, and you'll probably be the one putting this\nmost to practice; I'd say don't cache for now, and see later if\nyou need it.\n\nAnd at some point in the future we would want a mechanism that would\nallow the user to specify which caches he want to use for his own\npreferred application.\n\n> 2) If I implement these maps, should I register them as coersions?\n> (This would normally make sense, but I fear they could significantly\n> slow down coercions between standard classical bases because of the\n> asinine way the current system generates coercion paths.)\n\nGo ahead. For most classical basis, Symmetrica provides a direct\nconversion, and when there is one the coercion system is not as stupid\nas using his depth first search :-)\n\nIn any case, if something would need to be fixed, it's the coercion\nsystem, not the usage of coercions as above.\n\nCheers,\n                              Nicolas",
    "created_at": "2013-06-22T13:28:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184762",
    "user": "https://github.com/nthiery"
}
```

Replying to [comment:9 darij]:
> 1) Is it a good idea to also use cache for e-to-w and w-to-e? (The downside is that there will be more caches in memory.) Same for p-to-w (my current implementation is cacheless, thus not as fast as it could be) and w-to-p.

Only practice will tell, and you'll probably be the one putting this
most to practice; I'd say don't cache for now, and see later if
you need it.

And at some point in the future we would want a mechanism that would
allow the user to specify which caches he want to use for his own
preferred application.

> 2) If I implement these maps, should I register them as coersions?
> (This would normally make sense, but I fear they could significantly
> slow down coercions between standard classical bases because of the
> asinine way the current system generates coercion paths.)

Go ahead. For most classical basis, Symmetrica provides a direct
conversion, and when there is one the coercion system is not as stupid
as using his depth first search :-)

In any case, if something would need to be fixed, it's the coercion
system, not the usage of coercions as above.

Cheers,
                              Nicolas



---

archive/issue_comments_184763.json:
```json
{
    "body": "Uploading a new version, mostly with docstring fixes. Thanks for your replies, Anne and Nicolas; I'll work on this shortly (haven't returned to the Witt symmetric functions yet).",
    "created_at": "2013-06-25T23:17:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184763",
    "user": "https://github.com/darijgr"
}
```

Uploading a new version, mostly with docstring fixes. Thanks for your replies, Anne and Nicolas; I'll work on this shortly (haven't returned to the Witt symmetric functions yet).



---

archive/issue_comments_184764.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2013-06-28T22:23:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184764",
    "user": "https://github.com/darijgr"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_184765.json:
```json
{
    "body": "Done!\n\n`@`Anne: I've run some benchmarks (which show that caching the coercions to all of the h, e and p bases is a lot better than caching only the one to the h basis). But they don't mean very much since Sage, in the absence of a direct coercion, looks for a compound coercion by depth-first search (which can be, and is in my case, extremely slow). I was too lazy to manually register 2-step coercions, so I went a different way and gave the user the freedom to decide what coercions to cache.\n\nIn other news, this patch probably conflicts with every other patch that edits symmetric functions -- sorry.",
    "created_at": "2013-06-28T22:27:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184765",
    "user": "https://github.com/darijgr"
}
```

Done!

`@`Anne: I've run some benchmarks (which show that caching the coercions to all of the h, e and p bases is a lot better than caching only the one to the h basis). But they don't mean very much since Sage, in the absence of a direct coercion, looks for a compound coercion by depth-first search (which can be, and is in my case, extremely slow). I was too lazy to manually register 2-step coercions, so I went a different way and gave the user the freedom to decide what coercions to cache.

In other news, this patch probably conflicts with every other patch that edits symmetric functions -- sorry.



---

archive/issue_comments_184766.json:
```json
{
    "body": "Finished; please review!",
    "created_at": "2013-06-29T07:37:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184766",
    "user": "https://github.com/darijgr"
}
```

Finished; please review!



---

archive/issue_comments_184767.json:
```json
{
    "body": "Attachment [trac_14775-symmetric_functions_extended-dg.patch](tarball://root/attachments/some-uuid/ticket14775/trac_14775-symmetric_functions_extended-dg.patch) by @darijgr created at 2013-06-29 07:37:37\n\nIf you are wondering about the latest change: I removed an obsolete TODO which was already done. Sorry for that being in the patch in the first place.",
    "created_at": "2013-06-29T07:37:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184767",
    "user": "https://github.com/darijgr"
}
```

Attachment [trac_14775-symmetric_functions_extended-dg.patch](tarball://root/attachments/some-uuid/ticket14775/trac_14775-symmetric_functions_extended-dg.patch) by @darijgr created at 2013-06-29 07:37:37

If you are wondering about the latest change: I removed an obsolete TODO which was already done. Sorry for that being in the patch in the first place.



---

archive/issue_comments_184768.json:
```json
{
    "body": "> `@`Anne: I've run some benchmarks (which show that caching the coercions to all of the h, e and p bases is a lot better than caching only the one to the h basis). But they don't mean very much since Sage, in the absence of a direct coercion, looks for a compound coercion by depth-first search (which can be, and is in my case, extremely slow). I was too lazy to manually register 2-step coercions, so I went a different way and gave the user the freedom to decide what coercions to cache.\n\nDarij, could you post the results of your benchmarks?",
    "created_at": "2013-07-02T06:08:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184768",
    "user": "https://github.com/anneschilling"
}
```

> `@`Anne: I've run some benchmarks (which show that caching the coercions to all of the h, e and p bases is a lot better than caching only the one to the h basis). But they don't mean very much since Sage, in the absence of a direct coercion, looks for a compound coercion by depth-first search (which can be, and is in my case, extremely slow). I was too lazy to manually register 2-step coercions, so I went a different way and gave the user the freedom to decide what coercions to cache.

Darij, could you post the results of your benchmarks?



---

archive/issue_comments_184769.json:
```json
{
    "body": "Here's one:\n\n\n```\nsage: Sym = SymmetricFunctions(QQ)\nsage: Sym.inject_shorthands()\n/home/darij/sage-5.11.beta3/local/lib/python2.7/site-packages/sage/combinat/sf/sf.py:1174: RuntimeWarning: redefining global value `e`\n  inject_variable(shorthand, getattr(self, shorthand)())\nsage: w = Sym.w()\nsage: timeit(\"h(w[4,3,2,1])\")\n5 loops, best of 3: 105 \u00b5s per loop\nsage: timeit(\"w(h[4,3,2,1])\")\n625 loops, best of 3: 103 \u00b5s per loop\nsage: timeit(\"e(w[4,3,2,1])\")\n5 loops, best of 3: 75.5 ms per loop\nsage: timeit(\"w(e[4,3,2,1])\")\n5 loops, best of 3: 3.26 ms per loop\nsage: timeit(\"s(w[4,3,2,1])\")\n5 loops, best of 3: 67.6 ms per loop\nsage: timeit(\"w(s[4,3,2,1])\")\n125 loops, best of 3: 1.73 ms per loop\nsage: timeit(\"p(w[4,3,2,1])\")\n25 loops, best of 3: 8.5 ms per loop\nsage: timeit(\"w(p[4,3,2,1])\")\n125 loops, best of 3: 1.88 ms per loop\nsage: \nsage: w = Sym.w(coerce_h=False, coerce_p=True)\nsage: timeit(\"h(w[4,3,2,1])\")\n5 loops, best of 3: 45.4 \u00b5s per loop\nsage: timeit(\"w(h[4,3,2,1])\")\n625 loops, best of 3: 102 \u00b5s per loop\nsage: timeit(\"e(w[4,3,2,1])\")\n5 loops, best of 3: 75.9 ms per loop\nsage: timeit(\"w(e[4,3,2,1])\")\n5 loops, best of 3: 1.86 ms per loop\nsage: timeit(\"s(w[4,3,2,1])\")\n5 loops, best of 3: 67.4 ms per loop\nsage: timeit(\"w(s[4,3,2,1])\")\n5 loops, best of 3: 1.63 ms per loop\nsage: timeit(\"p(w[4,3,2,1])\")\n625 loops, best of 3: 96.1 \u00b5s per loop\nsage: timeit(\"w(p[4,3,2,1])\")\n625 loops, best of 3: 95.9 \u00b5s per loop\nsage: \nsage: w = Sym.w(coerce_h=False, coerce_e=True)\nsage: timeit(\"h(w[4,3,2,1])\")\n5 loops, best of 3: 246 ms per loop\nsage: timeit(\"w(h[4,3,2,1])\")\n625 loops, best of 3: 1.51 ms per loop\nsage: timeit(\"e(w[4,3,2,1])\")\n625 loops, best of 3: 88.5 \u00b5s per loop\nsage: timeit(\"w(e[4,3,2,1])\")\n625 loops, best of 3: 87.3 \u00b5s per loop\nsage: timeit(\"s(w[4,3,2,1])\")\n25 loops, best of 3: 9.33 ms per loop\nsage: timeit(\"w(s[4,3,2,1])\")\n625 loops, best of 3: 1.09 ms per loop\nsage: timeit(\"p(w[4,3,2,1])\")\n5 loops, best of 3: 95.4 ms per loop\nsage: timeit(\"w(p[4,3,2,1])\")\n625 loops, best of 3: 1.52 ms per loop\nsage: \nsage: w = Sym.w(coerce_h=True, coerce_e=True, coerce_p=True)\nsage: timeit(\"h(w[4,3,2,1])\")\n5 loops, best of 3: 117 \u00b5s per loop\nsage: timeit(\"w(h[4,3,2,1])\")\n625 loops, best of 3: 103 \u00b5s per loop\nsage: timeit(\"e(w[4,3,2,1])\")\n5 loops, best of 3: 94 \u00b5s per loop\nsage: timeit(\"w(e[4,3,2,1])\")\n625 loops, best of 3: 88.2 \u00b5s per loop\nsage: timeit(\"s(w[4,3,2,1])\")\n5 loops, best of 3: 67.6 ms per loop\nsage: timeit(\"w(s[4,3,2,1])\")\n5 loops, best of 3: 1.47 ms per loop\nsage: timeit(\"p(w[4,3,2,1])\")\n625 loops, best of 3: 96.8 \u00b5s per loop\nsage: timeit(\"w(p[4,3,2,1])\")\n625 loops, best of 3: 96.6 \u00b5s per loop\n```\n\n\nIt's fun how s(w) is quickest with the e-coercion but the advantage disappears when all three coercions are on (because it doesn't know where to go)...",
    "created_at": "2013-07-02T08:43:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184769",
    "user": "https://github.com/darijgr"
}
```

Here's one:


```
sage: Sym = SymmetricFunctions(QQ)
sage: Sym.inject_shorthands()
/home/darij/sage-5.11.beta3/local/lib/python2.7/site-packages/sage/combinat/sf/sf.py:1174: RuntimeWarning: redefining global value `e`
  inject_variable(shorthand, getattr(self, shorthand)())
sage: w = Sym.w()
sage: timeit("h(w[4,3,2,1])")
5 loops, best of 3: 105 µs per loop
sage: timeit("w(h[4,3,2,1])")
625 loops, best of 3: 103 µs per loop
sage: timeit("e(w[4,3,2,1])")
5 loops, best of 3: 75.5 ms per loop
sage: timeit("w(e[4,3,2,1])")
5 loops, best of 3: 3.26 ms per loop
sage: timeit("s(w[4,3,2,1])")
5 loops, best of 3: 67.6 ms per loop
sage: timeit("w(s[4,3,2,1])")
125 loops, best of 3: 1.73 ms per loop
sage: timeit("p(w[4,3,2,1])")
25 loops, best of 3: 8.5 ms per loop
sage: timeit("w(p[4,3,2,1])")
125 loops, best of 3: 1.88 ms per loop
sage: 
sage: w = Sym.w(coerce_h=False, coerce_p=True)
sage: timeit("h(w[4,3,2,1])")
5 loops, best of 3: 45.4 µs per loop
sage: timeit("w(h[4,3,2,1])")
625 loops, best of 3: 102 µs per loop
sage: timeit("e(w[4,3,2,1])")
5 loops, best of 3: 75.9 ms per loop
sage: timeit("w(e[4,3,2,1])")
5 loops, best of 3: 1.86 ms per loop
sage: timeit("s(w[4,3,2,1])")
5 loops, best of 3: 67.4 ms per loop
sage: timeit("w(s[4,3,2,1])")
5 loops, best of 3: 1.63 ms per loop
sage: timeit("p(w[4,3,2,1])")
625 loops, best of 3: 96.1 µs per loop
sage: timeit("w(p[4,3,2,1])")
625 loops, best of 3: 95.9 µs per loop
sage: 
sage: w = Sym.w(coerce_h=False, coerce_e=True)
sage: timeit("h(w[4,3,2,1])")
5 loops, best of 3: 246 ms per loop
sage: timeit("w(h[4,3,2,1])")
625 loops, best of 3: 1.51 ms per loop
sage: timeit("e(w[4,3,2,1])")
625 loops, best of 3: 88.5 µs per loop
sage: timeit("w(e[4,3,2,1])")
625 loops, best of 3: 87.3 µs per loop
sage: timeit("s(w[4,3,2,1])")
25 loops, best of 3: 9.33 ms per loop
sage: timeit("w(s[4,3,2,1])")
625 loops, best of 3: 1.09 ms per loop
sage: timeit("p(w[4,3,2,1])")
5 loops, best of 3: 95.4 ms per loop
sage: timeit("w(p[4,3,2,1])")
625 loops, best of 3: 1.52 ms per loop
sage: 
sage: w = Sym.w(coerce_h=True, coerce_e=True, coerce_p=True)
sage: timeit("h(w[4,3,2,1])")
5 loops, best of 3: 117 µs per loop
sage: timeit("w(h[4,3,2,1])")
625 loops, best of 3: 103 µs per loop
sage: timeit("e(w[4,3,2,1])")
5 loops, best of 3: 94 µs per loop
sage: timeit("w(e[4,3,2,1])")
625 loops, best of 3: 88.2 µs per loop
sage: timeit("s(w[4,3,2,1])")
5 loops, best of 3: 67.6 ms per loop
sage: timeit("w(s[4,3,2,1])")
5 loops, best of 3: 1.47 ms per loop
sage: timeit("p(w[4,3,2,1])")
625 loops, best of 3: 96.8 µs per loop
sage: timeit("w(p[4,3,2,1])")
625 loops, best of 3: 96.6 µs per loop
```


It's fun how s(w) is quickest with the e-coercion but the advantage disappears when all three coercions are on (because it doesn't know where to go)...



---

archive/issue_comments_184770.json:
```json
{
    "body": "for the patchbot:\n\napply trac_14775-symmetric_functions_extended-dg.patch",
    "created_at": "2013-07-16T17:05:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184770",
    "user": "https://github.com/darijgr"
}
```

for the patchbot:

apply trac_14775-symmetric_functions_extended-dg.patch



---

archive/issue_comments_184771.json:
```json
{
    "body": "Attachment [trac_14775-review-ts.patch](tarball://root/attachments/some-uuid/ticket14775/trac_14775-review-ts.patch) by @tscrim created at 2013-08-11 18:51:05",
    "created_at": "2013-08-11T18:51:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184771",
    "user": "https://github.com/tscrim"
}
```

Attachment [trac_14775-review-ts.patch](tarball://root/attachments/some-uuid/ticket14775/trac_14775-review-ts.patch) by @tscrim created at 2013-08-11 18:51:05



---

archive/issue_comments_184772.json:
```json
{
    "body": "Hey Darij,\n\nHere's a review patch which is basically just formatting changes and compacts the implementation of `degree_negation()`. If you're happy with my changes, you can set this to positive review.\n\nBest,\n\nTravis",
    "created_at": "2013-08-11T18:56:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184772",
    "user": "https://github.com/tscrim"
}
```

Hey Darij,

Here's a review patch which is basically just formatting changes and compacts the implementation of `degree_negation()`. If you're happy with my changes, you can set this to positive review.

Best,

Travis



---

archive/issue_comments_184773.json:
```json
{
    "body": "Attachment [trac_14775-rereview-dg.patch](tarball://root/attachments/some-uuid/ticket14775/trac_14775-rereview-dg.patch) by @darijgr created at 2013-08-11 20:13:46",
    "created_at": "2013-08-11T20:13:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184773",
    "user": "https://github.com/darijgr"
}
```

Attachment [trac_14775-rereview-dg.patch](tarball://root/attachments/some-uuid/ticket14775/trac_14775-rereview-dg.patch) by @darijgr created at 2013-08-11 20:13:46



---

archive/issue_comments_184774.json:
```json
{
    "body": "Here's a review of your review. Thanks for the formatting changes which I should have done myself (do you know of a good way to automatically cut the docstring lines to the length they should have, whatever that length is?). Nice work on `degree_negation`. Most of what I'm fixing in my review is not your errors but mine or old ones.\n\nOne thing I've reverted from your review which doesn't seem accidental is \"there is no canonical choice for a basis\"; this was an abuse of the notion of \"canonical\". All of the classical bases of Sym are canonical in the sense of category theory (which means \"functorial in the ground ring\"), and that's really the only formal meaning of this notion in mathematics. Apparently \"canonical\" was meant as \"clearly more natural than the others\", but that's imprecise and subjective. IMHO \"it does not come with a basis already chosen\" reflects better what is happening.",
    "created_at": "2013-08-11T20:14:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184774",
    "user": "https://github.com/darijgr"
}
```

Here's a review of your review. Thanks for the formatting changes which I should have done myself (do you know of a good way to automatically cut the docstring lines to the length they should have, whatever that length is?). Nice work on `degree_negation`. Most of what I'm fixing in my review is not your errors but mine or old ones.

One thing I've reverted from your review which doesn't seem accidental is "there is no canonical choice for a basis"; this was an abuse of the notion of "canonical". All of the classical bases of Sym are canonical in the sense of category theory (which means "functorial in the ground ring"), and that's really the only formal meaning of this notion in mathematics. Apparently "canonical" was meant as "clearly more natural than the others", but that's imprecise and subjective. IMHO "it does not come with a basis already chosen" reflects better what is happening.



---

archive/issue_events_042376.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14571#event-42376"
}
```



---

archive/issue_comments_184775.json:
```json
{
    "body": "Attachment [trac_14775-addendum_arith_prod-dg.patch](tarball://root/attachments/some-uuid/ticket14775/trac_14775-addendum_arith_prod-dg.patch) by @darijgr created at 2013-08-13 20:04:55\n\nadditional method for arithmetic product",
    "created_at": "2013-08-13T20:04:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184775",
    "user": "https://github.com/darijgr"
}
```

Attachment [trac_14775-addendum_arith_prod-dg.patch](tarball://root/attachments/some-uuid/ticket14775/trac_14775-addendum_arith_prod-dg.patch) by @darijgr created at 2013-08-13 20:04:55

additional method for arithmetic product



---

archive/issue_comments_184776.json:
```json
{
    "body": "I've just added a new attachment [attachment:trac_14775-addendum_arith_prod-dg.patch] with a new method for the arithmetic product ( http://mathoverflow.net/questions/138148 ). Sorry for straining you more, Travis; if you wish, I can move this to a new ticket.\n\nSo far, for the patchbot:\n\napply trac_14775-symmetric_functions_extended-dg.patch trac_14775-review-ts.patch trac_14775-rereview-dg.patch\u200b trac_14775-addendum_arith_prod-dg.patch",
    "created_at": "2013-08-13T20:06:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184776",
    "user": "https://github.com/darijgr"
}
```

I've just added a new attachment [attachment:trac_14775-addendum_arith_prod-dg.patch] with a new method for the arithmetic product ( http://mathoverflow.net/questions/138148 ). Sorry for straining you more, Travis; if you wish, I can move this to a new ticket.

So far, for the patchbot:

apply trac_14775-symmetric_functions_extended-dg.patch trac_14775-review-ts.patch trac_14775-rereview-dg.patch​ trac_14775-addendum_arith_prod-dg.patch



---

archive/issue_comments_184777.json:
```json
{
    "body": "Hey Darij,\n\nSorry I didn't get back to you yesterday. I don't like the phrasing you used (and canonical to me means there is a clear/special reason why this basis is \"better\" than the others). How about something like\n\n1 - \"there is no natural choice for a basis\",\n\n2 - \"there are multiple natural bases\"?\n\nLooking at the arithmetic product (which should go here I think), I have some suggestions:\n\n- The math equation on line 2842, could you set it in a `.. MATH::` block?\n- I think the OUTPUT block should be a sentence (it really just needs to be capitalized and have a period).\n- Remove the `else` on line 2929 since it makes the code more clear (at least to me since the function ends on the same indent level it started at; and do the de-indent of course).\n- Remove some of the comments, in particular the ones describing the variables in the for loops since they are cluttering up the code IMO.\n\nLast, could you fold all of the patches into a single patch? This will make it easier for me to do the final review.\n\nThank you,\n\nTravis",
    "created_at": "2013-08-13T22:39:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184777",
    "user": "https://github.com/tscrim"
}
```

Hey Darij,

Sorry I didn't get back to you yesterday. I don't like the phrasing you used (and canonical to me means there is a clear/special reason why this basis is "better" than the others). How about something like

1 - "there is no natural choice for a basis",

2 - "there are multiple natural bases"?

Looking at the arithmetic product (which should go here I think), I have some suggestions:

- The math equation on line 2842, could you set it in a `.. MATH::` block?
- I think the OUTPUT block should be a sentence (it really just needs to be capitalized and have a period).
- Remove the `else` on line 2929 since it makes the code more clear (at least to me since the function ends on the same indent level it started at; and do the de-indent of course).
- Remove some of the comments, in particular the ones describing the variables in the for loops since they are cluttering up the code IMO.

Last, could you fold all of the patches into a single patch? This will make it easier for me to do the final review.

Thank you,

Travis



---

archive/issue_comments_184778.json:
```json
{
    "body": "qfold of the previous patches + the changes you suggested",
    "created_at": "2013-08-13T22:51:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184778",
    "user": "https://github.com/darijgr"
}
```

qfold of the previous patches + the changes you suggested



---

archive/issue_comments_184779.json:
```json
{
    "body": "Attachment [trac_14775-qfolded.patch](tarball://root/attachments/some-uuid/ticket14775/trac_14775-qfolded.patch) by @darijgr created at 2013-08-13 22:53:26\n\nHi Travis,\n\nagreeing with phrasing 2 and all the suggestions. Done!\n\nBest regards,\\\\\nDarij\n\npatchbot:\n\napply trac_14775-qfolded.patch\u200b",
    "created_at": "2013-08-13T22:53:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184779",
    "user": "https://github.com/darijgr"
}
```

Attachment [trac_14775-qfolded.patch](tarball://root/attachments/some-uuid/ticket14775/trac_14775-qfolded.patch) by @darijgr created at 2013-08-13 22:53:26

Hi Travis,

agreeing with phrasing 2 and all the suggestions. Done!

Best regards,\\
Darij

patchbot:

apply trac_14775-qfolded.patch​



---

archive/issue_comments_184780.json:
```json
{
    "body": "Looks good to me now. Thanks Darij.",
    "created_at": "2013-08-13T23:07:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184780",
    "user": "https://github.com/tscrim"
}
```

Looks good to me now. Thanks Darij.



---

archive/issue_comments_184781.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-08-13T23:07:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184781",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_184782.json:
```json
{
    "body": "Thanks for reviewing this monster!!",
    "created_at": "2013-08-13T23:10:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184782",
    "user": "https://github.com/darijgr"
}
```

Thanks for reviewing this monster!!



---

archive/issue_comments_184783.json:
```json
{
    "body": "I noticed a minor docstring problem I missed (and introduced). Here's a small review patch which does the necessary tweak.\n\nFor patchbot:\n\nApply: trac_14775-qfolded.patch\u200b, trac_14775-docstring_tweak-ts.patch",
    "created_at": "2013-08-15T18:37:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184783",
    "user": "https://github.com/tscrim"
}
```

I noticed a minor docstring problem I missed (and introduced). Here's a small review patch which does the necessary tweak.

For patchbot:

Apply: trac_14775-qfolded.patch​, trac_14775-docstring_tweak-ts.patch



---

archive/issue_comments_184784.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2013-08-18T07:47:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184784",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_184785.json:
```json
{
    "body": "PDF documentation doesn't build:\n\n```\n! Undefined control sequence.\n<argument> ...imits _{i \\geq 1, j \\geq 1} p_{\\lcm \n                                                  (\\lambda _i, \\mu _j)}^{\\gc...\nl.82512 \\end{gather}\n\n? ]]\n! Emergency stop.\n<argument> ...imits _{i \\geq 1, j \\geq 1} p_{\\lcm \n                                                  (\\lambda _i, \\mu _j)}^{\\gc...\nl.82512 \\end{gather}\n\n!  ==> Fatal error occurred, no output PDF file produced!\nTranscript written on combinat.log.\n [8make[1]: *** [combinat.pdf] Error 1\n```\n",
    "created_at": "2013-08-18T07:47:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184785",
    "user": "https://github.com/jdemeyer"
}
```

PDF documentation doesn't build:

```
! Undefined control sequence.
<argument> ...imits _{i \geq 1, j \geq 1} p_{\lcm 
                                                  (\lambda _i, \mu _j)}^{\gc...
l.82512 \end{gather}

? ]]
! Emergency stop.
<argument> ...imits _{i \geq 1, j \geq 1} p_{\lcm 
                                                  (\lambda _i, \mu _j)}^{\gc...
l.82512 \end{gather}

!  ==> Fatal error occurred, no output PDF file produced!
Transcript written on combinat.log.
 [8make[1]: *** [combinat.pdf] Error 1
```




---

archive/issue_comments_184786.json:
```json
{
    "body": "IMHO this is more an issue with the PDF docbuilder... \\gcd and \\lcm are standard commands.\n\nDoes it build fine with [attachment:trac_14775-operatorname.patch\u200b]? I can't check docbuild pdf at all on my system.",
    "created_at": "2013-08-18T07:57:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184786",
    "user": "https://github.com/darijgr"
}
```

IMHO this is more an issue with the PDF docbuilder... \gcd and \lcm are standard commands.

Does it build fine with [attachment:trac_14775-operatorname.patch​]? I can't check docbuild pdf at all on my system.



---

archive/issue_comments_184787.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2013-08-18T07:57:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184787",
    "user": "https://github.com/darijgr"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_184788.json:
```json
{
    "body": "Attachment [trac_14775-operatorname.patch](tarball://root/attachments/some-uuid/ticket14775/trac_14775-operatorname.patch) by @darijgr created at 2013-08-18 11:01:12\n\nupdated (typo fixed)",
    "created_at": "2013-08-18T11:01:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184788",
    "user": "https://github.com/darijgr"
}
```

Attachment [trac_14775-operatorname.patch](tarball://root/attachments/some-uuid/ticket14775/trac_14775-operatorname.patch) by @darijgr created at 2013-08-18 11:01:12

updated (typo fixed)



---

archive/issue_comments_184789.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2013-08-18T13:32:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184789",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_184790.json:
```json
{
    "body": "Needs review (not my job, sorry...)",
    "created_at": "2013-08-18T13:33:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184790",
    "user": "https://github.com/jdemeyer"
}
```

Needs review (not my job, sorry...)



---

archive/issue_comments_184791.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-08-18T13:33:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184791",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_184792.json:
```json
{
    "body": "Attachment [trac_14775-docstring_tweak-ts.patch](tarball://root/attachments/some-uuid/ticket14775/trac_14775-docstring_tweak-ts.patch) by @tscrim created at 2013-08-18 16:32:10\n\nHere's a new version of my tweak patch which builds the pdf:\n\n```\nBuild finished.  The built documents can be found in /home/travis/sage-5.11.rc0/devel/sage/doc/output/pdf/en/reference/combinat\n```\n\n\nDarij, unfortunately `\\lcm` and `\\gcd` are actually not standard latex commands (as counter-intuitive as it is). [See here.](http://tex.stackexchange.com/questions/112037/why-is-lcm-not-defined-as-default) I changed them instead to `\\mathrm{lcm}` and made another tweak that was causing the pdf builder to fail. If you're happy with my changes, go ahead and set this to positive review.\n\nBest,\n\nTravis",
    "created_at": "2013-08-18T16:32:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184792",
    "user": "https://github.com/tscrim"
}
```

Attachment [trac_14775-docstring_tweak-ts.patch](tarball://root/attachments/some-uuid/ticket14775/trac_14775-docstring_tweak-ts.patch) by @tscrim created at 2013-08-18 16:32:10

Here's a new version of my tweak patch which builds the pdf:

```
Build finished.  The built documents can be found in /home/travis/sage-5.11.rc0/devel/sage/doc/output/pdf/en/reference/combinat
```


Darij, unfortunately `\lcm` and `\gcd` are actually not standard latex commands (as counter-intuitive as it is). [See here.](http://tex.stackexchange.com/questions/112037/why-is-lcm-not-defined-as-default) I changed them instead to `\mathrm{lcm}` and made another tweak that was causing the pdf builder to fail. If you're happy with my changes, go ahead and set this to positive review.

Best,

Travis



---

archive/issue_comments_184793.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-08-18T16:36:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184793",
    "user": "https://github.com/darijgr"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_184794.json:
```json
{
    "body": "Thanks and good work finding the typos!",
    "created_at": "2013-08-18T16:36:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184794",
    "user": "https://github.com/darijgr"
}
```

Thanks and good work finding the typos!



---

archive/issue_comments_184795.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2013-08-18T18:53:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184795",
    "user": "https://github.com/zabrocki"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_184796.json:
```json
{
    "body": "I have a couple of comments before the final positive review\n\n* I ran pyflakes and found (some of these could be from previous patches)\n\n```\nsage/combinat/sf/elementary.py:236: redefinition of unused 'Partition' from line 21\nsage/combinat/sf/powersum.py:334: redefinition of unused 'Partition' from line 21\nsage/combinat/sf/powersum.py:456: redefinition of unused 'Partition' from line 21\nsage/combinat/sf/schur.py:433: 'Partition' imported but unused\nsage/combinat/sf/sfa.py:802: local variable 'result' is assigned to but never used\nsage/combinat/sf/sfa.py:2916: 'Partitions' imported but unused\nsage/combinat/sf/sfa.py:2917: 'divisors' imported but unused\nsage/combinat/sf/witt.py:20: 'classical' imported but unused\nsage/combinat/sf/witt.py:22: 'QQ' imported but unused\nsage/combinat/sf/witt.py:22: 'ZZ' imported but unused\nsage/combinat/sf/witt.py:1309: redefinition of unused 'Integer' from line 22\n```\n\n* in the documentation of `verschiebung` in witt.py line 1294 and elementary.py line 223 and powersum.py line 443 :\n` same result as the implementation in sfa.py on the monomial `\n\nThe tests seem to be on complete homogeneous.  Is monomial a typo?\n* There are a number of whitespace issues in the files that I looked at (e.g. witt.py, dual.py).  Please check these carefully.\n* for the method `frobenius` add a `... SEEALSO: :meth:`plethysm`` and similarly in `plethsym` add a `SEEALSO` for `frobenius`.  The problem with the name frobenius is that it is not at all descriptive (because there are other things that are named after Frobenius e.g. at one time the documentation had Frobenius omega automorphism, but I am more thinking the map that is more commonly called the Frobenius map from the ring of characters to the symmetric functions).  Can I request that you use `adams_operator` or something like this instead?\n* I don't want to undo if what you already tried, but in `elementary.py` I see:\n`(coeff if (sum(lam) - Integer(sum(lam) / n)) % 2 == 0 else -coeff)`\n\nis `1 if x%2==0 else -1` this faster than `(-1)**x` in this case?  I tried experiments like `timeit('[(-1)**v for v in range(1000)]')` vs. `timeit('[(1 if v%2==0 else -1) for v in range(1000)]')` and the former was faster.  Try:\n\n`(-1)**((sum(lam) - Integer(sum(lam) / n)) % 2)*coeff`\n\nor to avoid computing the sum twice\n\n`(-1)**((lambda v: (v-Integer(v/n))%2)(sum(lam)))*coeff`",
    "created_at": "2013-08-18T18:53:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184796",
    "user": "https://github.com/zabrocki"
}
```

I have a couple of comments before the final positive review

* I ran pyflakes and found (some of these could be from previous patches)

```
sage/combinat/sf/elementary.py:236: redefinition of unused 'Partition' from line 21
sage/combinat/sf/powersum.py:334: redefinition of unused 'Partition' from line 21
sage/combinat/sf/powersum.py:456: redefinition of unused 'Partition' from line 21
sage/combinat/sf/schur.py:433: 'Partition' imported but unused
sage/combinat/sf/sfa.py:802: local variable 'result' is assigned to but never used
sage/combinat/sf/sfa.py:2916: 'Partitions' imported but unused
sage/combinat/sf/sfa.py:2917: 'divisors' imported but unused
sage/combinat/sf/witt.py:20: 'classical' imported but unused
sage/combinat/sf/witt.py:22: 'QQ' imported but unused
sage/combinat/sf/witt.py:22: 'ZZ' imported but unused
sage/combinat/sf/witt.py:1309: redefinition of unused 'Integer' from line 22
```

* in the documentation of `verschiebung` in witt.py line 1294 and elementary.py line 223 and powersum.py line 443 :
` same result as the implementation in sfa.py on the monomial `

The tests seem to be on complete homogeneous.  Is monomial a typo?
* There are a number of whitespace issues in the files that I looked at (e.g. witt.py, dual.py).  Please check these carefully.
* for the method `frobenius` add a `... SEEALSO: :meth:`plethysm`` and similarly in `plethsym` add a `SEEALSO` for `frobenius`.  The problem with the name frobenius is that it is not at all descriptive (because there are other things that are named after Frobenius e.g. at one time the documentation had Frobenius omega automorphism, but I am more thinking the map that is more commonly called the Frobenius map from the ring of characters to the symmetric functions).  Can I request that you use `adams_operator` or something like this instead?
* I don't want to undo if what you already tried, but in `elementary.py` I see:
`(coeff if (sum(lam) - Integer(sum(lam) / n)) % 2 == 0 else -coeff)`

is `1 if x%2==0 else -1` this faster than `(-1)**x` in this case?  I tried experiments like `timeit('[(-1)**v for v in range(1000)]')` vs. `timeit('[(1 if v%2==0 else -1) for v in range(1000)]')` and the former was faster.  Try:

`(-1)**((sum(lam) - Integer(sum(lam) / n)) % 2)*coeff`

or to avoid computing the sum twice

`(-1)**((lambda v: (v-Integer(v/n))%2)(sum(lam)))*coeff`



---

archive/issue_comments_184797.json:
```json
{
    "body": "Thanks for looking into that code! I'm fixing the issues now. But what exactly do you mean by whitespace issues? Do you have a handy regex for searching for them?\n\nEDIT: adams_operation is now an alias for frobenius; good point! I don't want to remove frobenius, though, as it is a natural name from the Witt vector viewpoint. The other Frobenius map (the characteristic map) has a different domain, so no confusion can arise. The omega map I've never seen named after Frobenius outside of the code.",
    "created_at": "2013-08-18T19:19:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184797",
    "user": "https://github.com/darijgr"
}
```

Thanks for looking into that code! I'm fixing the issues now. But what exactly do you mean by whitespace issues? Do you have a handy regex for searching for them?

EDIT: adams_operation is now an alias for frobenius; good point! I don't want to remove frobenius, though, as it is a natural name from the Witt vector viewpoint. The other Frobenius map (the characteristic map) has a different domain, so no confusion can arise. The omega map I've never seen named after Frobenius outside of the code.



---

archive/issue_comments_184798.json:
```json
{
    "body": "I always search for them by looking for <tab> and <space><newline>.  On the editor I use it is '\\t' and ' \\r'",
    "created_at": "2013-08-18T19:22:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184798",
    "user": "https://github.com/zabrocki"
}
```

I always search for them by looking for <tab> and <space><newline>.  On the editor I use it is '\t' and ' \r'



---

archive/issue_comments_184799.json:
```json
{
    "body": "It seems like there is something special happening for negative numbers / 1 / -1:\n\n```\nsage: %timeit (-1)**1000\n1000000 loops, best of 3: 993 ns per loop\nsage: %timeit (-1)**2000                    \n100000 loops, best of 3: 968 ns per loop\nsage: %timeit (-1)**5000\n1000000 loops, best of 3: 924 ns per loop\nsage: %timeit (-1)**10000\n100000 loops, best of 3: 881 ns per loop\n```\n\nIt probably is doing an if/then via modulus for \"large\" powers. So having it as `(-1)**x` is faster. Good caveat to know.\n\nI agree that we should avoid doing the sum twice, but it's faster to store it as a variable instead of a lambda function:\n\n```\nsage: y = lambda a: 5\nsage: %timeit y(2)\n1000000 loops, best of 3: 770 ns per loop\nsage: %timeit x = 5; x\n1000000 loops, best of 3: 336 ns per loop\n```\n\n\nAny doc typos are my fault from copy/pasting.\n\nThanks for the comments Mike.\n\nBest,\n\nTravis",
    "created_at": "2013-08-18T19:37:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184799",
    "user": "https://github.com/tscrim"
}
```

It seems like there is something special happening for negative numbers / 1 / -1:

```
sage: %timeit (-1)**1000
1000000 loops, best of 3: 993 ns per loop
sage: %timeit (-1)**2000                    
100000 loops, best of 3: 968 ns per loop
sage: %timeit (-1)**5000
1000000 loops, best of 3: 924 ns per loop
sage: %timeit (-1)**10000
100000 loops, best of 3: 881 ns per loop
```

It probably is doing an if/then via modulus for "large" powers. So having it as `(-1)**x` is faster. Good caveat to know.

I agree that we should avoid doing the sum twice, but it's faster to store it as a variable instead of a lambda function:

```
sage: y = lambda a: 5
sage: %timeit y(2)
1000000 loops, best of 3: 770 ns per loop
sage: %timeit x = 5; x
1000000 loops, best of 3: 336 ns per loop
```


Any doc typos are my fault from copy/pasting.

Thanks for the comments Mike.

Best,

Travis



---

archive/issue_comments_184800.json:
```json
{
    "body": "Thanks!\n\nAbout `(-1)**a * x` vs. `x if a % 2 == 0 else -x`: I've changed it to the former (= more intuitive) syntax now in the Verschiebung method. I was getting a speedup from the latter syntax in a different method (omega or antipode, I don't remember), which made me adapt it as a general tactic. I guess Python is smarter than that, though. Either way the time difference is small and tends to hide behind noise (my firefox is running), and I'm not sure whether it is due to the exponentiation itself or to the fact that the former syntax coerces `(-1)**a` into the parent of `x` and then does multiplication within that parent, while the latter only ever uses negation in the parent of `x`.\n\nUploading file now...",
    "created_at": "2013-08-18T20:32:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184800",
    "user": "https://github.com/darijgr"
}
```

Thanks!

About `(-1)**a * x` vs. `x if a % 2 == 0 else -x`: I've changed it to the former (= more intuitive) syntax now in the Verschiebung method. I was getting a speedup from the latter syntax in a different method (omega or antipode, I don't remember), which made me adapt it as a general tactic. I guess Python is smarter than that, though. Either way the time difference is small and tends to hide behind noise (my firefox is running), and I'm not sure whether it is due to the exponentiation itself or to the fact that the former syntax coerces `(-1)**a` into the parent of `x` and then does multiplication within that parent, while the latter only ever uses negation in the parent of `x`.

Uploading file now...



---

archive/issue_comments_184801.json:
```json
{
    "body": "Done. Someone (Mike? Travis?) should take a look at this as I've been making a lot of manual whitespace changes and who knows whether they're really all whitespace. ;)\n\npatchbot:\n\napply trac_14775-qfolded.patch\u200b trac_14775-docstring_tweak-ts.patch\u200b trac_14775-response-to-mike-dg.patch\u200b",
    "created_at": "2013-08-18T20:36:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184801",
    "user": "https://github.com/darijgr"
}
```

Done. Someone (Mike? Travis?) should take a look at this as I've been making a lot of manual whitespace changes and who knows whether they're really all whitespace. ;)

patchbot:

apply trac_14775-qfolded.patch​ trac_14775-docstring_tweak-ts.patch​ trac_14775-response-to-mike-dg.patch​



---

archive/issue_comments_184802.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-08-18T20:36:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184802",
    "user": "https://github.com/darijgr"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_184803.json:
```json
{
    "body": "Please **do not make whitespace changes** to code you otherwise don't touch. It can only lead to merge conflicts and doesn't really benefit anyone. When you change code or add new code, it would be good not to have trailing whitespace. But that's no excuse for changing whitespace all over the place.",
    "created_at": "2013-08-19T05:06:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184803",
    "user": "https://github.com/jdemeyer"
}
```

Please **do not make whitespace changes** to code you otherwise don't touch. It can only lead to merge conflicts and doesn't really benefit anyone. When you change code or add new code, it would be good not to have trailing whitespace. But that's no excuse for changing whitespace all over the place.



---

archive/issue_comments_184804.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-08-19T05:06:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184804",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_184805.json:
```json
{
    "body": "OK, Jeroen, you tell me what files should be removed from the patch. No offense but I'm tired of following unwritten rules. Currently, every file changed by this patch is changed in a nontrivial way (not only whitespaces), although in three cases (jack.py, kfpoly.py, macdonald.py) it is all cosmetics (typos fixed in the doc). In all the other cases the changes are more substantial (e. g., wrong docstring rewritten). I have no idea what is the threshold for a change you consider beneficial.",
    "created_at": "2013-08-19T09:30:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184805",
    "user": "https://github.com/darijgr"
}
```

OK, Jeroen, you tell me what files should be removed from the patch. No offense but I'm tired of following unwritten rules. Currently, every file changed by this patch is changed in a nontrivial way (not only whitespaces), although in three cases (jack.py, kfpoly.py, macdonald.py) it is all cosmetics (typos fixed in the doc). In all the other cases the changes are more substantial (e. g., wrong docstring rewritten). I have no idea what is the threshold for a change you consider beneficial.



---

archive/issue_comments_184806.json:
```json
{
    "body": "Replying to [comment:45 darij]:\n> I have no idea what is the threshold for a change you consider beneficial.\nThe threshhold is easy: anything that is not purely a trailing-whitespace change. Fixing typos is good, rewriting docstrings is good, changing non-trailing whitespace (in a [PEP-8](http://www.python.org/dev/peps/pep-0008/) compliant way) is good.\n\nI seem to recall that the git workflow will ignore trailing spaces anyway, so the \"problem\" will disappear anyway.",
    "created_at": "2013-08-19T11:53:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184806",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:45 darij]:
> I have no idea what is the threshold for a change you consider beneficial.
The threshhold is easy: anything that is not purely a trailing-whitespace change. Fixing typos is good, rewriting docstrings is good, changing non-trailing whitespace (in a [PEP-8](http://www.python.org/dev/peps/pep-0008/) compliant way) is good.

I seem to recall that the git workflow will ignore trailing spaces anyway, so the "problem" will disappear anyway.



---

archive/issue_comments_184807.json:
```json
{
    "body": "Fine -- am I seeing it right that there is nothing to change then, because every file has got more substantial changes than just trailing whitespace?",
    "created_at": "2013-08-19T11:55:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184807",
    "user": "https://github.com/darijgr"
}
```

Fine -- am I seeing it right that there is nothing to change then, because every file has got more substantial changes than just trailing whitespace?



---

archive/issue_comments_184808.json:
```json
{
    "body": "Replying to [comment:47 darij]:\n> Fine -- am I seeing it right that there is nothing to change then, because every file has got more substantial changes than just trailing whitespace?\nWell, the first file in [attachment:trac_14775-response-to-mike-dg.patch], `sage/combinat/sf/classical.py`, seems to have only trailing-whitespace changes. Moreover, it's not just a matter of \"which file\". Making a one-character change in a given file does not suddenly mean that you should remove all trailing whitespace in that file.",
    "created_at": "2013-08-19T12:06:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184808",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:47 darij]:
> Fine -- am I seeing it right that there is nothing to change then, because every file has got more substantial changes than just trailing whitespace?
Well, the first file in [attachment:trac_14775-response-to-mike-dg.patch], `sage/combinat/sf/classical.py`, seems to have only trailing-whitespace changes. Moreover, it's not just a matter of "which file". Making a one-character change in a given file does not suddenly mean that you should remove all trailing whitespace in that file.



---

archive/issue_comments_184809.json:
```json
{
    "body": "OK, I can revert classical.py. For some reason I thought I changed it in the old patch, but I didn't.\n\nAbout the rest: Well, sorry, but I'll need a more precise statement of what changes should be reverted if I'm to revert anything. What is your quantum -- if not a file, a class? a method? That said, I'm not convinced the theoretical possibility of conflicts in this particular case justifies causing Mike and me more trouble (Mike is apparently writing a followup patch to this, if I got his email right) and delaying this even further. I've taken notice of the general rule about whitespaces now, but apply it retroactively seems just as much a pain in the ass as what it is trying to prevent.",
    "created_at": "2013-08-19T12:18:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184809",
    "user": "https://github.com/darijgr"
}
```

OK, I can revert classical.py. For some reason I thought I changed it in the old patch, but I didn't.

About the rest: Well, sorry, but I'll need a more precise statement of what changes should be reverted if I'm to revert anything. What is your quantum -- if not a file, a class? a method? That said, I'm not convinced the theoretical possibility of conflicts in this particular case justifies causing Mike and me more trouble (Mike is apparently writing a followup patch to this, if I got his email right) and delaying this even further. I've taken notice of the general rule about whitespaces now, but apply it retroactively seems just as much a pain in the ass as what it is trying to prevent.



---

archive/issue_comments_184810.json:
```json
{
    "body": "Replying to [comment:49 darij]:\n> What is your quantum -- if not a file, a class? a method?\nA method at most (even less for \"big\" methods which I admit is not well-defined).\n\n> That said, I'm not convinced the theoretical possibility of conflicts in this particular case justifies causing Mike and me more trouble (Mike is apparently writing a followup patch to this, if I got his email right) and delaying this even further. I've taken notice of the general rule about whitespaces now, but apply it retroactively seems just as much a pain in the ass as what it is trying to prevent.\nFair enough, restoring positive review.",
    "created_at": "2013-08-19T12:21:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184810",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:49 darij]:
> What is your quantum -- if not a file, a class? a method?
A method at most (even less for "big" methods which I admit is not well-defined).

> That said, I'm not convinced the theoretical possibility of conflicts in this particular case justifies causing Mike and me more trouble (Mike is apparently writing a followup patch to this, if I got his email right) and delaying this even further. I've taken notice of the general rule about whitespaces now, but apply it retroactively seems just as much a pain in the ass as what it is trying to prevent.
Fair enough, restoring positive review.



---

archive/issue_comments_184811.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2013-08-19T12:21:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184811",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_184812.json:
```json
{
    "body": "Thank you!!",
    "created_at": "2013-08-19T12:23:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184812",
    "user": "https://github.com/darijgr"
}
```

Thank you!!



---

archive/issue_comments_184813.json:
```json
{
    "body": "Replying to [comment:50 jdemeyer]:\n> Replying to [comment:49 darij]:\n> > What is your quantum -- if not a file, a class? a method?\n> A method at most (even less for \"big\" methods which I admit is not well-defined).\n\nMy rule of thumb is that, if I change a given line and see a trivial thing to fix in the couple neighbour lines, I go ahead, and otherwise leave it alone.",
    "created_at": "2013-08-19T12:38:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184813",
    "user": "https://github.com/nthiery"
}
```

Replying to [comment:50 jdemeyer]:
> Replying to [comment:49 darij]:
> > What is your quantum -- if not a file, a class? a method?
> A method at most (even less for "big" methods which I admit is not well-defined).

My rule of thumb is that, if I change a given line and see a trivial thing to fix in the couple neighbour lines, I go ahead, and otherwise leave it alone.



---

archive/issue_comments_184814.json:
```json
{
    "body": "Replying to [comment:52 nthiery]:\n> My rule of thumb is that, if I change a given line and see a trivial thing to fix in the couple neighbour lines, I go ahead, and otherwise leave it alone.\n\nYes, that sounds right.",
    "created_at": "2013-08-19T12:40:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184814",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:52 nthiery]:
> My rule of thumb is that, if I change a given line and see a trivial thing to fix in the couple neighbour lines, I go ahead, and otherwise leave it alone.

Yes, that sounds right.



---

archive/issue_comments_184815.json:
```json
{
    "body": "Attachment [trac_14775-response-to-mike-dg.patch](tarball://root/attachments/some-uuid/ticket14775/trac_14775-response-to-mike-dg.patch) by @nthiery created at 2013-08-19 15:39:27\n\nEDIT: now applies correctly",
    "created_at": "2013-08-19T15:39:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184815",
    "user": "https://github.com/nthiery"
}
```

Attachment [trac_14775-response-to-mike-dg.patch](tarball://root/attachments/some-uuid/ticket14775/trac_14775-response-to-mike-dg.patch) by @nthiery created at 2013-08-19 15:39:27

EDIT: now applies correctly



---

archive/issue_comments_184816.json:
```json
{
    "body": "For the record: I removed to trivial whitespace fixes from trac_14775-response-to-mike-dg.patch which were already handled by #14866 and created a conflict. I allowed myself to leave the positive review.",
    "created_at": "2013-08-19T15:41:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184816",
    "user": "https://github.com/nthiery"
}
```

For the record: I removed to trivial whitespace fixes from trac_14775-response-to-mike-dg.patch which were already handled by #14866 and created a conflict. I allowed myself to leave the positive review.



---

archive/issue_comments_184817.json:
```json
{
    "body": "Applies correctly on top of #14866; thank you very much!",
    "created_at": "2013-08-19T15:44:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184817",
    "user": "https://github.com/darijgr"
}
```

Applies correctly on top of #14866; thank you very much!



---

archive/issue_comments_184818.json:
```json
{
    "body": "Currently this causes a (very small) conflict with #14102 (which depends on #10963). Should we:\n\n- revert the changes in this patch around where the conflict occurs (approx. line 826-830)?\n- remove the changes in `ns_macdonald.py` to a ticket depending on #14102?\n- rebase #14102?",
    "created_at": "2013-08-19T15:46:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184818",
    "user": "https://github.com/tscrim"
}
```

Currently this causes a (very small) conflict with #14102 (which depends on #10963). Should we:

- revert the changes in this patch around where the conflict occurs (approx. line 826-830)?
- remove the changes in `ns_macdonald.py` to a ticket depending on #14102?
- rebase #14102?



---

archive/issue_comments_184819.json:
```json
{
    "body": "nthiery has just rebased #14102, hasn't he?",
    "created_at": "2013-08-19T15:50:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184819",
    "user": "https://github.com/darijgr"
}
```

nthiery has just rebased #14102, hasn't he?



---

archive/issue_comments_184820.json:
```json
{
    "body": "Yep. Thanks Nicolas.",
    "created_at": "2013-08-19T15:56:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184820",
    "user": "https://github.com/tscrim"
}
```

Yep. Thanks Nicolas.



---

archive/issue_comments_184821.json:
```json
{
    "body": "Attachment [trac_14775_more_review-mz.patch](tarball://root/attachments/some-uuid/ticket14775/trac_14775_more_review-mz.patch) by @zabrocki created at 2013-08-20 14:12:17\n\nI added a number of doc changes consisting of mostly cleaning up references, a few missing colons, some extra imports caught by pyflakes, corrections of broken links, etc.  Please check my changes again carefully.",
    "created_at": "2013-08-20T14:12:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184821",
    "user": "https://github.com/zabrocki"
}
```

Attachment [trac_14775_more_review-mz.patch](tarball://root/attachments/some-uuid/ticket14775/trac_14775_more_review-mz.patch) by @zabrocki created at 2013-08-20 14:12:17

I added a number of doc changes consisting of mostly cleaning up references, a few missing colons, some extra imports caught by pyflakes, corrections of broken links, etc.  Please check my changes again carefully.



---

archive/issue_comments_184822.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2013-08-20T14:12:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184822",
    "user": "https://github.com/zabrocki"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_184823.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-08-20T14:12:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184823",
    "user": "https://github.com/zabrocki"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_184824.json:
```json
{
    "body": "Attachment [trac_14775-final-changes-dg.patch](tarball://root/attachments/some-uuid/ticket14775/trac_14775-final-changes-dg.patch) by @darijgr created at 2013-08-20 14:44:54",
    "created_at": "2013-08-20T14:44:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184824",
    "user": "https://github.com/darijgr"
}
```

Attachment [trac_14775-final-changes-dg.patch](tarball://root/attachments/some-uuid/ticket14775/trac_14775-final-changes-dg.patch) by @darijgr created at 2013-08-20 14:44:54



---

archive/issue_comments_184825.json:
```json
{
    "body": "The changes are good except for one typo you can't help making. I have fixed the typo and added a couple more docstring changes. Once you've looked into them, this is positive_review, right?\n\npatchbot:\n\napply trac_14775-qfolded.patch\u200b trac_14775-docstring_tweak-ts.patch\u200b trac_14775-response-to-mike-dg.patch\u200b trac_14775_more_review-mz.patch trac_14775-final-changes-dg.patch",
    "created_at": "2013-08-20T14:46:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184825",
    "user": "https://github.com/darijgr"
}
```

The changes are good except for one typo you can't help making. I have fixed the typo and added a couple more docstring changes. Once you've looked into them, this is positive_review, right?

patchbot:

apply trac_14775-qfolded.patch​ trac_14775-docstring_tweak-ts.patch​ trac_14775-response-to-mike-dg.patch​ trac_14775_more_review-mz.patch trac_14775-final-changes-dg.patch



---

archive/issue_comments_184826.json:
```json
{
    "body": "I'm good with the changes. If Mike is also happy with the final version of the patch, Darij, could you fold all of the patches together? Thanks.",
    "created_at": "2013-08-20T15:17:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184826",
    "user": "https://github.com/tscrim"
}
```

I'm good with the changes. If Mike is also happy with the final version of the patch, Darij, could you fold all of the patches together? Thanks.



---

archive/issue_comments_184827.json:
```json
{
    "body": "You'd think that doing that twice that it was on purpose, but it isn't!  Mea culpa!\n\nI approve.",
    "created_at": "2013-08-20T15:33:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184827",
    "user": "https://github.com/zabrocki"
}
```

You'd think that doing that twice that it was on purpose, but it isn't!  Mea culpa!

I approve.



---

archive/issue_comments_184828.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-08-20T15:33:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184828",
    "user": "https://github.com/zabrocki"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_184829.json:
```json
{
    "body": "Thanks again, everyone!\n\npatchbot:\n\napply trac_14775-the_big_crunch.patch",
    "created_at": "2013-08-20T15:44:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184829",
    "user": "https://github.com/darijgr"
}
```

Thanks again, everyone!

patchbot:

apply trac_14775-the_big_crunch.patch



---

archive/issue_comments_184830.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2013-08-21T13:04:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184830",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_184831.json:
```json
{
    "body": "Sorry, but `all changesets qfolded` is not a good commit message, it doesn't describe what the patch does.",
    "created_at": "2013-08-21T13:04:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184831",
    "user": "https://github.com/jdemeyer"
}
```

Sorry, but `all changesets qfolded` is not a good commit message, it doesn't describe what the patch does.



---

archive/issue_comments_184832.json:
```json
{
    "body": "qfold of all previous patches in this ticket",
    "created_at": "2013-08-21T13:08:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184832",
    "user": "https://github.com/darijgr"
}
```

qfold of all previous patches in this ticket



---

archive/issue_comments_184833.json:
```json
{
    "body": "Attachment [trac_14775-the_big_crunch.patch](tarball://root/attachments/some-uuid/ticket14775/trac_14775-the_big_crunch.patch) by @darijgr created at 2013-08-21 13:08:32\n\nCommit message fixed.",
    "created_at": "2013-08-21T13:08:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184833",
    "user": "https://github.com/darijgr"
}
```

Attachment [trac_14775-the_big_crunch.patch](tarball://root/attachments/some-uuid/ticket14775/trac_14775-the_big_crunch.patch) by @darijgr created at 2013-08-21 13:08:32

Commit message fixed.



---

archive/issue_comments_184834.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2013-08-21T13:08:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184834",
    "user": "https://github.com/darijgr"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_events_042377.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-28T06:53:11Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14571#event-42377"
}
```



---

archive/issue_comments_184835.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-08-28T06:53:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14571",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14571#issuecomment-184835",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
