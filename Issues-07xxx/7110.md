# Issue 7110: SageNB -- Port #4046, #5447, #6459, #6694, #6865, #6939

archive/issues_007110.json:
```json
{
    "body": "Primary authors and reviewers are at listed at\n\n* #4046\n* #5447 - See the comment below for this one.\n* #6459\n* #6694\n* #6865\n* #6939\n\nSee #6983 for instructions on getting sagenb.\n\n**Assignee:** boothby\n\n**CC:**  @TimDumol @williamstein @jasongrout mhampton @kcrisman mvngu\n\n**Keywords:** sagenb notebook\n\n**Author:** Mitesh Patel\n\nIssue created by migration from https://trac.sagemath.org/ticket/7110\n\n",
    "closed_at": "2009-10-11T19:27:44Z",
    "created_at": "2009-10-04T13:52:04Z",
    "labels": [
        "component: notebook",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.2",
    "title": "SageNB -- Port #4046, #5447, #6459, #6694, #6865, #6939",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/7110",
    "user": "https://github.com/qed777"
}
```
Primary authors and reviewers are at listed at

* #4046
* #5447 - See the comment below for this one.
* #6459
* #6694
* #6865
* #6939

See #6983 for instructions on getting sagenb.

**Assignee:** boothby

**CC:**  @TimDumol @williamstein @jasongrout mhampton @kcrisman mvngu

**Keywords:** sagenb notebook

**Author:** Mitesh Patel

Issue created by migration from https://trac.sagemath.org/ticket/7110





---

archive/attachments_008500.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_7110-sagenb_ports.patch",
    "asset_url": "tarball://root/attachments/ticket7110/trac_7110-sagenb_ports.patch",
    "created_at": "2009-10-04T14:52:11Z",
    "issue": "https://github.com/sagemath/sage/issues/7110",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket7110/trac_7110-sagenb_ports.patch",
    "user": "https://github.com/qed777"
}
```



---

archive/issue_comments_052705.json:
```json
{
    "body": "Attachment [trac_7110-sagenb_ports.patch](https://github.com/sagemath/sage/files/ticket7110/trac_7110-sagenb_ports.patch) by @qed777 created at 2009-10-04 14:52:11\n\nPort/merge/base #4046, #6459, #6694, #6865, #6939 for sagenb.",
    "created_at": "2009-10-04T14:52:11Z",
    "issue": "https://github.com/sagemath/sage/issues/7110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7110#issuecomment-52705",
    "user": "https://github.com/qed777"
}
```

Attachment [trac_7110-sagenb_ports.patch](https://github.com/sagemath/sage/files/ticket7110/trac_7110-sagenb_ports.patch) by @qed777 created at 2009-10-04 14:52:11

Port/merge/base #4046, #6459, #6694, #6865, #6939 for sagenb.



---

archive/issue_comments_052706.json:
```json
{
    "body": "<a id='comment:1'></a>\nApart from rebasing existing patches, I've rearranged some files:\n\n* Moved `sagenb/data/templates/*_lib.js` to `sagenb/data/javascript/sage/*.js`.\n* Moved TinyMCE initialization code to `sagenb/data/javascript/sage/tinymce.js`.\n* Updated affected HTML templates.\n* On `notebook_lib.js`'s template macros:\n  * `SAGE_URL`: \"Replaced\" with [this URL](http://www.math.union.edu/~dpvc/jsMath/users/welcome.html) for now.  The [existing link](http://sage.math.washington.edu/sage/jsmath) is broken.\n  * `KEY_CODES`: \"Moved,\" in `twist.py`, to `javascript/sage/keys.js`.  They're still generated dynamically.\n\nHowever:\n\n* `notebook.js` and friends are now static, so they're not sent through `compress.JavaScriptCompressor`.  It may be much better to use the [YUI compressor](http://developer.yahoo.com/yui/compressor/).\n* There are two versions of `sage3d.js`.  Can we move one or both (after renaming) to `javascript/sage3d` or `javascript/sage/`?\n* jsMath initialization is not yet in `javascript/sage/jsmath.js`.  I'll do this at #4714.\n* A rebased jQuery / UI upgrade (cf. #5447) will move `farbtastic` to `jquery/plugins`.\n* Do we use `zorn`?\n* Perhaps we should organize `data/` differently.  By package?  Examples: `highlight` and `sage`, templates and images included.",
    "created_at": "2009-10-04T15:40:33Z",
    "issue": "https://github.com/sagemath/sage/issues/7110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7110#issuecomment-52706",
    "user": "https://github.com/qed777"
}
```

<a id='comment:1'></a>
Apart from rebasing existing patches, I've rearranged some files:

* Moved `sagenb/data/templates/*_lib.js` to `sagenb/data/javascript/sage/*.js`.
* Moved TinyMCE initialization code to `sagenb/data/javascript/sage/tinymce.js`.
* Updated affected HTML templates.
* On `notebook_lib.js`'s template macros:
  * `SAGE_URL`: "Replaced" with [this URL](http://www.math.union.edu/~dpvc/jsMath/users/welcome.html) for now.  The [existing link](http://sage.math.washington.edu/sage/jsmath) is broken.
  * `KEY_CODES`: "Moved," in `twist.py`, to `javascript/sage/keys.js`.  They're still generated dynamically.

However:

* `notebook.js` and friends are now static, so they're not sent through `compress.JavaScriptCompressor`.  It may be much better to use the [YUI compressor](http://developer.yahoo.com/yui/compressor/).
* There are two versions of `sage3d.js`.  Can we move one or both (after renaming) to `javascript/sage3d` or `javascript/sage/`?
* jsMath initialization is not yet in `javascript/sage/jsmath.js`.  I'll do this at #4714.
* A rebased jQuery / UI upgrade (cf. #5447) will move `farbtastic` to `jquery/plugins`.
* Do we use `zorn`?
* Perhaps we should organize `data/` differently.  By package?  Examples: `highlight` and `sage`, templates and images included.



---

archive/attachments_008501.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_7110-sagenb_ports_v2.patch",
    "asset_url": "tarball://root/attachments/ticket7110/trac_7110-sagenb_ports_v2.patch",
    "created_at": "2009-10-04T17:28:00Z",
    "issue": "https://github.com/sagemath/sage/issues/7110",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket7110/trac_7110-sagenb_ports_v2.patch",
    "user": "https://github.com/qed777"
}
```



---

archive/issue_comments_052707.json:
```json
{
    "body": "Attachment [trac_7110-sagenb_ports_v2.patch](https://github.com/sagemath/sage/files/ticket7110/trac_7110-sagenb_ports_v2.patch) by @qed777 created at 2009-10-04 17:28:00\n\nv2: converted missed \"main.js\" in notebook.py.  Apply only this patch.",
    "created_at": "2009-10-04T17:28:00Z",
    "issue": "https://github.com/sagemath/sage/issues/7110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7110#issuecomment-52707",
    "user": "https://github.com/qed777"
}
```

Attachment [trac_7110-sagenb_ports_v2.patch](https://github.com/sagemath/sage/files/ticket7110/trac_7110-sagenb_ports_v2.patch) by @qed777 created at 2009-10-04 17:28:00

v2: converted missed "main.js" in notebook.py.  Apply only this patch.



---

archive/issue_comments_052708.json:
```json
{
    "body": "<a id='comment:2'></a>\nPatch v2 takes care of `\"main.js\"` in `notebook.list_javascript_window()`, although this function is currently unused, it seems.",
    "created_at": "2009-10-04T17:30:49Z",
    "issue": "https://github.com/sagemath/sage/issues/7110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7110#issuecomment-52708",
    "user": "https://github.com/qed777"
}
```

<a id='comment:2'></a>
Patch v2 takes care of `"main.js"` in `notebook.list_javascript_window()`, although this function is currently unused, it seems.



---

archive/issue_events_047567.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2009-10-04T19:47:11Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/7110",
    "rename": {
        "from": "SageNB -- Port #4046, #6459, #6694, #6865, #6939",
        "to": "SageNB -- Port #4046, #5447, #6459, #6694, #6865, #6939"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7110#event-47567"
}
```



---

archive/issue_comments_052709.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,6 +1,7 @@\n Primary authors and reviewers are at listed at\n \n * #4046\n+* #5447 - See the comment below for this one.\n * #6459\n * #6694\n * #6865\n``````\n",
    "created_at": "2009-10-04T19:47:11Z",
    "issue": "https://github.com/sagemath/sage/issues/7110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7110#issuecomment-52709",
    "user": "https://github.com/qed777"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,6 +1,7 @@
 Primary authors and reviewers are at listed at
 
 * #4046
+* #5447 - See the comment below for this one.
 * #6459
 * #6694
 * #6865
``````




---

archive/issue_comments_052710.json:
```json
{
    "body": "<a id='comment:3'></a>\nFor #5447, here are the SageNB patches:\n\n* http://sage.math.washington.edu/home/mpatel/trac/7110/trac_5447-sagenb_jquery_upgrade_part_A.patch\n* http://sage.math.washington.edu/home/mpatel/trac/7110/trac_5447-sagenb_jquery_upgrade_part_B.patch\n* http://sage.math.washington.edu/home/mpatel/trac/7110/trac_5447-sagenb_jquery_upgrade_part_C.patch\n\nPlease apply all three patches in lexicographical order ***after*** the [attachment:trac_7110-sagenb_ports_v2.patch patch above].",
    "created_at": "2009-10-04T19:47:11Z",
    "issue": "https://github.com/sagemath/sage/issues/7110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7110#issuecomment-52710",
    "user": "https://github.com/qed777"
}
```

<a id='comment:3'></a>
For #5447, here are the SageNB patches:

* http://sage.math.washington.edu/home/mpatel/trac/7110/trac_5447-sagenb_jquery_upgrade_part_A.patch
* http://sage.math.washington.edu/home/mpatel/trac/7110/trac_5447-sagenb_jquery_upgrade_part_B.patch
* http://sage.math.washington.edu/home/mpatel/trac/7110/trac_5447-sagenb_jquery_upgrade_part_C.patch

Please apply all three patches in lexicographical order ***after*** the [attachment:trac_7110-sagenb_ports_v2.patch patch above].



---

archive/attachments_008502.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_7110-sagenb_ports_minimal.patch",
    "asset_url": "tarball://root/attachments/ticket7110/trac_7110-sagenb_ports_minimal.patch",
    "created_at": "2009-10-11T13:38:22Z",
    "issue": "https://github.com/sagemath/sage/issues/7110",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket7110/trac_7110-sagenb_ports_minimal.patch",
    "user": "https://github.com/qed777"
}
```



---

archive/issue_comments_052711.json:
```json
{
    "body": "Attachment [trac_7110-sagenb_ports_minimal.patch](https://github.com/sagemath/sage/files/ticket7110/trac_7110-sagenb_ports_minimal.patch) by @qed777 created at 2009-10-11 13:38:22\n\nMinimal rebase of #4046, #6694, #6865, #6939 for SageNB.  Apply only this patch.",
    "created_at": "2009-10-11T13:38:22Z",
    "issue": "https://github.com/sagemath/sage/issues/7110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7110#issuecomment-52711",
    "user": "https://github.com/qed777"
}
```

Attachment [trac_7110-sagenb_ports_minimal.patch](https://github.com/sagemath/sage/files/ticket7110/trac_7110-sagenb_ports_minimal.patch) by @qed777 created at 2009-10-11 13:38:22

Minimal rebase of #4046, #6694, #6865, #6939 for SageNB.  Apply only this patch.



---

archive/issue_comments_052712.json:
```json
{
    "body": "<a id='comment:4'></a>\nThe latest patch is just a minimal rebase of #4046, #6694, #6865, and #6939 for SageNB.",
    "created_at": "2009-10-11T13:43:19Z",
    "issue": "https://github.com/sagemath/sage/issues/7110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7110#issuecomment-52712",
    "user": "https://github.com/qed777"
}
```

<a id='comment:4'></a>
The latest patch is just a minimal rebase of #4046, #6694, #6865, and #6939 for SageNB.



---

archive/issue_events_047568.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-10-11T19:27:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7110",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7110#event-47568"
}
```



---

archive/issue_events_047569.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-10-11T19:27:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7110",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7110#event-47569"
}
```



---

archive/issue_comments_052713.json:
```json
{
    "body": "<a id='comment:6'></a>\nI merged this into the official sagenb repo and pushed it.  And it works very nicely!",
    "created_at": "2009-10-11T19:27:44Z",
    "issue": "https://github.com/sagemath/sage/issues/7110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7110#issuecomment-52713",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:6'></a>
I merged this into the official sagenb repo and pushed it.  And it works very nicely!



---

archive/issue_events_047570.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-10-11T19:27:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7110",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7110#event-47570"
}
```



---

archive/issue_events_047571.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-10-11T19:27:44Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/7110",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7110#event-47571"
}
```
