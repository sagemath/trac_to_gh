# Issue 7308: cliquer's spkg-install does not work on cygwin

archive/issues_007308.json:
```json
{
    "body": "The section where SAGESOFLAGS are set assumes that the operating system is Linux, OS X, or Solaris.  The spkg-install script exits even if SAGE_PORT is set to yes.\n\nThe patch here shows the relevant changes in the spkg, which can be found at http://sage.math.washington.edu/home/mhansen/cliquer-1.2.p3.spkg\n\nAssignee: tbd\n\nCC:  dkirkby @williamstein\n\nKeywords: cliquer\n\nResolution: fixed\n\nAuthor: Mike Hansen\n\nReviewer: William Stein\n\nMerged: sage-4.3.3.alpha1\n\nIssue created by migration from https://trac.sagemath.org/ticket/7308\n\n",
    "closed_at": "2010-02-16T04:26:12Z",
    "created_at": "2009-10-26T09:23:36Z",
    "labels": [
        "component: porting: cygwin",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.3.3",
    "title": "cliquer's spkg-install does not work on cygwin",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/7308",
    "user": "https://github.com/mwhansen"
}
```
The section where SAGESOFLAGS are set assumes that the operating system is Linux, OS X, or Solaris.  The spkg-install script exits even if SAGE_PORT is set to yes.

The patch here shows the relevant changes in the spkg, which can be found at http://sage.math.washington.edu/home/mhansen/cliquer-1.2.p3.spkg

Assignee: tbd

CC:  dkirkby @williamstein

Keywords: cliquer

Resolution: fixed

Author: Mike Hansen

Reviewer: William Stein

Merged: sage-4.3.3.alpha1

Issue created by migration from https://trac.sagemath.org/ticket/7308





---

archive/issue_comments_069033.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,3 @@\n The section where SAGESOFLAGS are set assumes that the operating system is Linux, OS X, or Solaris.  The spkg-install script exists even if SAGE_PORT is set to yes.\n \n-\n-I'll post a patch and a new SPKG here shortly.\n+The patch here shows the relevant changes in the spkg, which can be found at http://sage.math.washington.edu/home/mhansen/cliquer-1.2.p3.spkg\n``````\n",
    "created_at": "2009-10-26T09:30:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7308#issuecomment-69033",
    "user": "https://github.com/mwhansen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,3 @@
 The section where SAGESOFLAGS are set assumes that the operating system is Linux, OS X, or Solaris.  The spkg-install script exists even if SAGE_PORT is set to yes.
 
-
-I'll post a patch and a new SPKG here shortly.
+The patch here shows the relevant changes in the spkg, which can be found at http://sage.math.washington.edu/home/mhansen/cliquer-1.2.p3.spkg
``````




---

archive/issue_comments_069034.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2009-10-26T09:30:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7308#issuecomment-69034",
    "user": "https://github.com/mwhansen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_069035.json:
```json
{
    "body": "Changing author from \"\" to \"Mike Hansen\"",
    "created_at": "2009-10-26T09:30:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7308#issuecomment-69035",
    "user": "https://github.com/mwhansen"
}
```

Changing author from "" to "Mike Hansen"



---

archive/issue_events_029462.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/7308",
    "rename": {
        "from": "cliquer's spkg-install does not work on cygwin",
        "to": "[with spkg, needs review] cliquer's spkg-install does not work on cygwin"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/7308#event-29462"
}
```



---

archive/issue_comments_069036.json:
```json
{
    "body": "Attachment [trac_7308.patch](tarball://root/attachments/some-uuid/ticket7308/trac_7308.patch) by @mwhansen created at 2009-10-27 13:49:28",
    "created_at": "2009-10-27T13:49:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7308#issuecomment-69036",
    "user": "https://github.com/mwhansen"
}
```

Attachment [trac_7308.patch](tarball://root/attachments/some-uuid/ticket7308/trac_7308.patch) by @mwhansen created at 2009-10-27 13:49:28



---

archive/issue_comments_069037.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-The section where SAGESOFLAGS are set assumes that the operating system is Linux, OS X, or Solaris.  The spkg-install script exists even if SAGE_PORT is set to yes.\n+The section where SAGESOFLAGS are set assumes that the operating system is Linux, OS X, or Solaris.  The spkg-install script exits even if SAGE_PORT is set to yes.\n \n The patch here shows the relevant changes in the spkg, which can be found at http://sage.math.washington.edu/home/mhansen/cliquer-1.2.p3.spkg\n``````\n",
    "created_at": "2009-10-27T13:49:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7308#issuecomment-69037",
    "user": "https://github.com/mwhansen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-The section where SAGESOFLAGS are set assumes that the operating system is Linux, OS X, or Solaris.  The spkg-install script exists even if SAGE_PORT is set to yes.
+The section where SAGESOFLAGS are set assumes that the operating system is Linux, OS X, or Solaris.  The spkg-install script exits even if SAGE_PORT is set to yes.
 
 The patch here shows the relevant changes in the spkg, which can be found at http://sage.math.washington.edu/home/mhansen/cliquer-1.2.p3.spkg
``````




---

archive/issue_comments_069038.json:
```json
{
    "body": "<a id='comment:4'></a>\nI'm not in a position to test this, but if you need to make any changes, I would suggest the following would be helpful. Some are I admit code I introduced, which is probaby not necessary. None are particularly important. \n\n* There is no longer any need to have \n\n```\nif [ -n \"$SAGE_FORTRAN_LIB\" ] && [ ! -e \"$SAGE_FORTRAN_LIB\" ]; then\n    echo \"SAGE_FORTRAN_LIB is defined as $SAGE_FORTRAN_LIB, but does not exist\"\n    exit 1\nfi\n``` \nsince code in the recent *prereq-0.4* (#7021) script checks this, so the above code is redundant. \n\n* There is no need to have the following line\n\n` if [ \"x$SAGE64\" = \"xyes\" ] || [ \"x$SAGE64\" = \"x1\" ]; then `\n\nIt should instead be replaced by\n\n   ` if [ \"x$SAGE64\" = \"xyes\" ]; then `\n\nsince some earlier code in the *prereq-0.3* script written by William only allows SAGE64 to be unset, or set to *yes* or *no*. It is not possible to set it to *1*, so there is no point testing if it is *1*. The same behaviour is followed in my recent updated to prereq-0.4 (#7021) and also to prereq-0.5 which I have awaiting review (#7352)\n\n* There is no need to have \n  {{{\n   # We exit here, since we are possibly on an unsupported platform.\n   if [ -n \"${SAGE_PORT:-x}\" ]; then\n       echo \"Cannot determine your platform or it is not supported... exiting\"\n       exit 1\n   else\n  }}}\nsince the recent *prereq-0.4* update will exit for **all** unsupported platforms unless SAGE_PORT is set to 'yes'.",
    "created_at": "2009-10-30T14:41:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7308#issuecomment-69038",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:4'></a>
I'm not in a position to test this, but if you need to make any changes, I would suggest the following would be helpful. Some are I admit code I introduced, which is probaby not necessary. None are particularly important. 

* There is no longer any need to have 

```
if [ -n "$SAGE_FORTRAN_LIB" ] && [ ! -e "$SAGE_FORTRAN_LIB" ]; then
    echo "SAGE_FORTRAN_LIB is defined as $SAGE_FORTRAN_LIB, but does not exist"
    exit 1
fi
``` 
since code in the recent *prereq-0.4* (#7021) script checks this, so the above code is redundant. 

* There is no need to have the following line

` if [ "x$SAGE64" = "xyes" ] || [ "x$SAGE64" = "x1" ]; then `

It should instead be replaced by

   ` if [ "x$SAGE64" = "xyes" ]; then `

since some earlier code in the *prereq-0.3* script written by William only allows SAGE64 to be unset, or set to *yes* or *no*. It is not possible to set it to *1*, so there is no point testing if it is *1*. The same behaviour is followed in my recent updated to prereq-0.4 (#7021) and also to prereq-0.5 which I have awaiting review (#7352)

* There is no need to have 
  {{{
   # We exit here, since we are possibly on an unsupported platform.
   if [ -n "${SAGE_PORT:-x}" ]; then
       echo "Cannot determine your platform or it is not supported... exiting"
       exit 1
   else
  }}}
since the recent *prereq-0.4* update will exit for **all** unsupported platforms unless SAGE_PORT is set to 'yes'.



---

archive/issue_comments_069039.json:
```json
{
    "body": "Changing upstream from \"\" to \"N/A\"",
    "created_at": "2010-02-07T05:52:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7308#issuecomment-69039",
    "user": "https://github.com/williamstein"
}
```

Changing upstream from "" to "N/A"



---

archive/issue_comments_069040.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2010-02-07T05:52:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7308#issuecomment-69040",
    "user": "https://github.com/williamstein"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_069041.json:
```json
{
    "body": "<a id='comment:5'></a>\nThe actual patch looks fine to me.    Kirkby's comments are all fine, but of course shouldn't be part of this ticket.  There is no point in confusing things by doing too much at once.",
    "created_at": "2010-02-07T05:52:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7308#issuecomment-69041",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:5'></a>
The actual patch looks fine to me.    Kirkby's comments are all fine, but of course shouldn't be part of this ticket.  There is no point in confusing things by doing too much at once.



---

archive/issue_comments_069042.json:
```json
{
    "body": "<a id='comment:6'></a>\nI think the existing package is called `cliquer-1.2.p3`.  Should we make the new one `p4`?",
    "created_at": "2010-02-10T16:53:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7308#issuecomment-69042",
    "user": "https://github.com/qed777"
}
```

<a id='comment:6'></a>
I think the existing package is called `cliquer-1.2.p3`.  Should we make the new one `p4`?



---

archive/issue_events_029463.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/7308",
    "rename": {
        "from": "[with spkg, needs review] cliquer's spkg-install does not work on cygwin",
        "to": "cliquer's spkg-install does not work on cygwin"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/7308#event-29463"
}
```



---

archive/issue_events_029464.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2010-02-10T19:49:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/7308",
    "milestone": "sage-4.3.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/7308#event-29464"
}
```



---

archive/issue_comments_069043.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2010-02-10T23:45:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7308#issuecomment-69043",
    "user": "https://github.com/qed777"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_069044.json:
```json
{
    "body": "Changing work_issues from \"\" to \"Rebase vs. #7824\"",
    "created_at": "2010-02-10T23:45:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7308#issuecomment-69044",
    "user": "https://github.com/qed777"
}
```

Changing work_issues from "" to "Rebase vs. #7824"



---

archive/issue_comments_069045.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2010-02-13T06:41:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7308#issuecomment-69045",
    "user": "https://github.com/williamstein"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_069046.json:
```json
{
    "body": "<a id='comment:11'></a>\nI rebased Mike's patch, refereed it, and posted a new spkg with the rebased patch here:\n\n   http://wstein.org/home/wstein/ports/cygwin/cliquer-1.2.p4.spkg",
    "created_at": "2010-02-13T06:42:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7308#issuecomment-69046",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:11'></a>
I rebased Mike's patch, refereed it, and posted a new spkg with the rebased patch here:

   http://wstein.org/home/wstein/ports/cygwin/cliquer-1.2.p4.spkg



---

archive/issue_comments_069047.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2010-02-13T06:42:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7308#issuecomment-69047",
    "user": "https://github.com/williamstein"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_069048.json:
```json
{
    "body": "<a id='comment:12'></a>\nFeel free to open another ticket to address the issues that drkirkby raised.",
    "created_at": "2010-02-16T04:26:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7308#issuecomment-69048",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

<a id='comment:12'></a>
Feel free to open another ticket to address the issues that drkirkby raised.



---

archive/issue_comments_069049.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-4.3.3.alpha1\"",
    "created_at": "2010-02-16T04:26:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7308#issuecomment-69049",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

Changing merged from "" to "sage-4.3.3.alpha1"



---

archive/issue_comments_069050.json:
```json
{
    "body": "Changing work_issues from \"Rebase vs. #7824\" to \"\"",
    "created_at": "2010-02-16T04:26:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7308#issuecomment-69050",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

Changing work_issues from "Rebase vs. #7824" to ""



---

archive/issue_comments_069051.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2010-02-16T04:26:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7308#issuecomment-69051",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

Resolution: fixed



---

archive/issue_events_029465.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mvngu",
    "created_at": "2010-02-16T04:26:12Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/7308",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/7308#event-29465"
}
```



---

archive/issue_comments_069052.json:
```json
{
    "body": "Changing reviewer from \"\" to \"William Stein\"",
    "created_at": "2010-02-16T04:26:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7308#issuecomment-69052",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

Changing reviewer from "" to "William Stein"
