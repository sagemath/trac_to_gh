# Issue 7045: [with spkg; positive review] update libgcrypt to the latest version 1.4.4

archive/issues_007045.json:
```json
{
    "body": "The current libgcrypt in Sage will not build with Sun Studio. I managed to mess up an update #6758, but Minh's correction ignores my fixes to the C source code, so that will not build on Sun Studio. \n\nHere is an spkg with the latest upstream version. \n\nhttp://sage.math.washington.edu/home/kirkby/Solaris-fixes/libgcrypt-1.4.4/\n\nIt's been tested on\n\n* Sun Studio 12.1 on my own SPARC running Solaris 10 update 7 in 32-bit mode\n* sage.math (64-bit)\n* bsd.math in 32-bit mode only \n\n\n\n\n\n\nAssignee: tbd\n\nCC:  mvngu\n\nResolution: fixed\n\nAuthor: David Kirkby\n\nReviewer: Adam Webb\n\nMerged: sage-4.2.alpha0\n\nIssue created by migration from https://trac.sagemath.org/ticket/7045\n\n",
    "closed_at": "2009-10-16T09:20:57Z",
    "created_at": "2009-09-28T01:11:08Z",
    "labels": [
        "component: build",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.2",
    "title": "[with spkg; positive review] update libgcrypt to the latest version 1.4.4",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/7045",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```
The current libgcrypt in Sage will not build with Sun Studio. I managed to mess up an update #6758, but Minh's correction ignores my fixes to the C source code, so that will not build on Sun Studio. 

Here is an spkg with the latest upstream version. 

http://sage.math.washington.edu/home/kirkby/Solaris-fixes/libgcrypt-1.4.4/

It's been tested on

* Sun Studio 12.1 on my own SPARC running Solaris 10 update 7 in 32-bit mode
* sage.math (64-bit)
* bsd.math in 32-bit mode only 






Assignee: tbd

CC:  mvngu

Resolution: fixed

Author: David Kirkby

Reviewer: Adam Webb

Merged: sage-4.2.alpha0

Issue created by migration from https://trac.sagemath.org/ticket/7045





---

archive/issue_comments_060173.json:
```json
{
    "body": "<a id='comment:2'></a>I have checked in all existing changes in David's name. Based on David's spkg, I did some general clean up:\n\n* spell check the files `SPKG.txt` and `spkg-install`\n* format spkg-check and spkg-install in a consistent way\n \nA new spkg based on David's and with the above changes is up at\n\nhttp://sage.math.washington.edu/home/mvngu/release/spkg/standard/libgcrypt-1.4.4.p0.spkg",
    "created_at": "2009-09-28T06:39:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7045#issuecomment-60173",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

<a id='comment:2'></a>I have checked in all existing changes in David's name. Based on David's spkg, I did some general clean up:

* spell check the files `SPKG.txt` and `spkg-install`
* format spkg-check and spkg-install in a consistent way
 
A new spkg based on David's and with the above changes is up at

http://sage.math.washington.edu/home/mvngu/release/spkg/standard/libgcrypt-1.4.4.p0.spkg



---

archive/issue_comments_060174.json:
```json
{
    "body": "<a id='comment:3'></a>See #5833 for a duplicate of the current ticket.",
    "created_at": "2009-10-01T06:27:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7045#issuecomment-60174",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

<a id='comment:3'></a>See #5833 for a duplicate of the current ticket.



---

archive/issue_comments_060175.json:
```json
{
    "body": "<a id='comment:4'></a>\n```\n> > Building on 64-bit SuSE with SAGE_CHECK=\"yes\" failed at libgcrypt,\n> > with a bunch of errors in the gcrypt test script:\n>\n> Can you try using the updated libgcrypt spkg at ticket #7045 [1]?\n>\n> [1]http://trac.sagemath.org/sage_trac/ticket/7045\n>\n> --\n> Regards\n> Minh Van Nguyen\n\nThe new spkg 1.4.4.p0 seems to fix the problem.\n\nDavid\n```",
    "created_at": "2009-10-01T15:52:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7045#issuecomment-60175",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:4'></a>
```
> > Building on 64-bit SuSE with SAGE_CHECK="yes" failed at libgcrypt,
> > with a bunch of errors in the gcrypt test script:
>
> Can you try using the updated libgcrypt spkg at ticket #7045 [1]?
>
> [1]http://trac.sagemath.org/sage_trac/ticket/7045
>
> --
> Regards
> Minh Van Nguyen

The new spkg 1.4.4.p0 seems to fix the problem.

David
```



---

archive/issue_comments_060176.json:
```json
{
    "body": "<a id='comment:5'></a>Built with SAGE_CHECK=\"yes\" on Ubuntu 9.10 beta (AMD64) and everything worked. Also worked in the context of a 'make testlong'. \n\nAdam",
    "created_at": "2009-10-04T09:55:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7045#issuecomment-60176",
    "user": "https://github.com/maxthemouse"
}
```

<a id='comment:5'></a>Built with SAGE_CHECK="yes" on Ubuntu 9.10 beta (AMD64) and everything worked. Also worked in the context of a 'make testlong'. 

Adam



---

archive/issue_comments_060177.json:
```json
{
    "body": "<a id='comment:6'></a>Adam,\n\nDo you have a copy of this spkg?  The link above is now broken.",
    "created_at": "2009-10-16T08:56:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7045#issuecomment-60177",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:6'></a>Adam,

Do you have a copy of this spkg?  The link above is now broken.



---

archive/issue_comments_060178.json:
```json
{
    "body": "<a id='comment:7'></a>Replying to [comment:6 mhansen]:\n> Do you have a copy of this spkg?  The link above is now broken.\n\n\nThe spkg is now restored. Here are the changes I added in addition to drkirkby's changes:\n\n* committed drkirkby's changes in his name\n* spell check the files `SPKG.txt` and `spkg-install`\n* format `spkg-check` and `spkg-install` in a consistent way\n* add executable bits to `spkg-install`",
    "created_at": "2009-10-16T09:16:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7045#issuecomment-60178",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

<a id='comment:7'></a>Replying to [comment:6 mhansen]:
> Do you have a copy of this spkg?  The link above is now broken.


The spkg is now restored. Here are the changes I added in addition to drkirkby's changes:

* committed drkirkby's changes in his name
* spell check the files `SPKG.txt` and `spkg-install`
* format `spkg-check` and `spkg-install` in a consistent way
* add executable bits to `spkg-install`



---

archive/issue_comments_060179.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2009-10-16T09:20:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7045#issuecomment-60179",
    "user": "https://github.com/mwhansen"
}
```

Resolution: fixed



---

archive/issue_events_016595.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2009-10-16T09:20:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/7045",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/7045#event-16595"
}
```



---

archive/issue_comments_060180.json:
```json
{
    "body": "<a id='comment:8'></a>Looks good.",
    "created_at": "2009-10-16T09:20:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7045#issuecomment-60180",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:8'></a>Looks good.
