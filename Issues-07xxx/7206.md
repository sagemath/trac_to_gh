# Issue 7206: doctest failure in groups/perm_gps/permgroup.py

archive/issues_007206.json:
```json
{
    "body": "With 4.1.2.rc2, I have one doctest failure on Ubuntu 9.04 amd64:\n\n```\ndrake@sagenb:~/s/sage-4.1.2.rc2$ ./sage -t  devel/sage/sage/groups/perm_gps/permgroup.py\n  sage -t  \"devel/sage/sage/groups/perm_gps/permgroup.py\"    \n  **********************************************************************\n  File \"/home/drake/s/sage-4.1.2.rc2/devel/sage/sage/groups/perm_gps/permgroup.py\", line 1114:\n      sage: G.random_element()\n  Expected:\n      (1,2)(4,5)\n  Got:\n      (2,3)(4,5)\n  **********************************************************************\n  1 items had failures:\n     1 of   4 in __main__.example_34\n  ***Test Failed*** 1 failures.\n  For whitespace errors, see the file /home/drake/.sage//tmp/.doctest_permgroup.py\n           [6.7 s]\n  exit code: 1024\n\n  ----------------------------------------------------------------------\n  The following tests failed:\n\n          sage -t  \"devel/sage/sage/groups/perm_gps/permgroup.py\" \n```\n\nThis seems like #5884 again. I ran a bisect and it blames #6647.\n\nAssignee: joyner\n\nReviewer: Fr\u00e9d\u00e9ric Chapoton\n\nResolution: worksforme\n\nIssue created by migration from https://trac.sagemath.org/ticket/7206\n\n",
    "closed_at": "2013-10-31T08:30:25Z",
    "created_at": "2009-10-14T03:02:20Z",
    "labels": [
        "component: group theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "doctest failure in groups/perm_gps/permgroup.py",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/7206",
    "user": "https://github.com/dandrake"
}
```
With 4.1.2.rc2, I have one doctest failure on Ubuntu 9.04 amd64:

```
drake@sagenb:~/s/sage-4.1.2.rc2$ ./sage -t  devel/sage/sage/groups/perm_gps/permgroup.py
  sage -t  "devel/sage/sage/groups/perm_gps/permgroup.py"    
  **********************************************************************
  File "/home/drake/s/sage-4.1.2.rc2/devel/sage/sage/groups/perm_gps/permgroup.py", line 1114:
      sage: G.random_element()
  Expected:
      (1,2)(4,5)
  Got:
      (2,3)(4,5)
  **********************************************************************
  1 items had failures:
     1 of   4 in __main__.example_34
  ***Test Failed*** 1 failures.
  For whitespace errors, see the file /home/drake/.sage//tmp/.doctest_permgroup.py
           [6.7 s]
  exit code: 1024

  ----------------------------------------------------------------------
  The following tests failed:

          sage -t  "devel/sage/sage/groups/perm_gps/permgroup.py" 
```

This seems like #5884 again. I ran a bisect and it blames #6647.

Assignee: joyner

Reviewer: Frédéric Chapoton

Resolution: worksforme

Issue created by migration from https://trac.sagemath.org/ticket/7206





---

archive/issue_comments_075507.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -24,4 +24,4 @@\n           sage -t  \"devel/sage/sage/groups/perm_gps/permgroup.py\" \n ```\n \n-This seems like #5584 again. I ran a bisect and it blames #6647.\n+This seems like #5884 again. I ran a bisect and it blames #6647.\n``````\n",
    "created_at": "2009-10-14T03:02:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7206#issuecomment-75507",
    "user": "https://github.com/dandrake"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -24,4 +24,4 @@
           sage -t  "devel/sage/sage/groups/perm_gps/permgroup.py" 
 ```
 
-This seems like #5584 again. I ran a bisect and it blames #6647.
+This seems like #5884 again. I ran a bisect and it blames #6647.
``````




---

archive/issue_comments_075508.json:
```json
{
    "body": "<a id='comment:2'></a>\nHy Dan,\n\nWith 4.1.1 and sage-combinat queue applied (the patch come from here : #6647), I have\n\n```\nnicolas@nicolas-laptop:/opt/sage/devel/sage-combinat$ sage -t sage/groups/perm_gps/permgroup.py \nsage -t  \"devel/sage-combinat/sage/groups/perm_gps/permgroup.py\"\n\t [5.4 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 5.4 seconds\n```\n\nBut, if I play with the method .random_element()\n\n```\nsage: G = PermutationGroup([[(1,2,3),(4,5)],[(1,2)]])\nsage: G.random_element()\n()\nsage: G.random_element()\n(4,5)\nsage: G.random_element()\n(1,3,2)(4,5)\nsage: G.random_element()\n(1,3,2)\nsage: G.random_element()\n(2,3)(4,5)\nsage: G = PermutationGroup([[(1,2,3),(4,5)],[(1,2)]])\nsage: G.random_element()                             \n(4,5)\nsage: G.random_element()\n(1,3,2)\nsage: G.random_element()\n(1,3,2)\nsage: G = PermutationGroup([[(1,2,3),(4,5)],[(1,2)]])\nsage: G.random_element()                             \n(2,3)(4,5)\nsage: G = PermutationGroup([[(1,2,3),(4,5)],[(1,2)]])\nsage: G.random_element()                             \n(1,3,2)\nsage: G = PermutationGroup([[(1,2,3),(4,5)],[(1,2)]])\nsage: G.random_element()                             \n(1,3)\n```\n\nI saw your pointer from my patch about strong generating system. I didn't touch random_element(). I would be very happy to help and investigate this but my guess is that touch interface and Gap behavior... I don't know even if it is possible to put a doctest on such random method where the random part is inside Gap and not inside Sage...\n\nI don't really know that is very important in this doctest, a possible trick is\n\n```\nsage: G = PermutationGroup([[(1,2,3),(4,5)],[(1,2)]])\nsage: G.random_element() in G                        \nTrue\n```\nHere, one's can be sure there no timestamps random dependencies of Gap or other things I should not say because I really don't know anything about random and Gap.\n\nIf anyone know something about that ?",
    "created_at": "2009-10-14T12:38:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7206#issuecomment-75508",
    "user": "https://trac.sagemath.org/admin/accounts/users/nborie"
}
```

<a id='comment:2'></a>
Hy Dan,

With 4.1.1 and sage-combinat queue applied (the patch come from here : #6647), I have

```
nicolas@nicolas-laptop:/opt/sage/devel/sage-combinat$ sage -t sage/groups/perm_gps/permgroup.py 
sage -t  "devel/sage-combinat/sage/groups/perm_gps/permgroup.py"
	 [5.4 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 5.4 seconds
```

But, if I play with the method .random_element()

```
sage: G = PermutationGroup([[(1,2,3),(4,5)],[(1,2)]])
sage: G.random_element()
()
sage: G.random_element()
(4,5)
sage: G.random_element()
(1,3,2)(4,5)
sage: G.random_element()
(1,3,2)
sage: G.random_element()
(2,3)(4,5)
sage: G = PermutationGroup([[(1,2,3),(4,5)],[(1,2)]])
sage: G.random_element()                             
(4,5)
sage: G.random_element()
(1,3,2)
sage: G.random_element()
(1,3,2)
sage: G = PermutationGroup([[(1,2,3),(4,5)],[(1,2)]])
sage: G.random_element()                             
(2,3)(4,5)
sage: G = PermutationGroup([[(1,2,3),(4,5)],[(1,2)]])
sage: G.random_element()                             
(1,3,2)
sage: G = PermutationGroup([[(1,2,3),(4,5)],[(1,2)]])
sage: G.random_element()                             
(1,3)
```

I saw your pointer from my patch about strong generating system. I didn't touch random_element(). I would be very happy to help and investigate this but my guess is that touch interface and Gap behavior... I don't know even if it is possible to put a doctest on such random method where the random part is inside Gap and not inside Sage...

I don't really know that is very important in this doctest, a possible trick is

```
sage: G = PermutationGroup([[(1,2,3),(4,5)],[(1,2)]])
sage: G.random_element() in G                        
True
```
Here, one's can be sure there no timestamps random dependencies of Gap or other things I should not say because I really don't know anything about random and Gap.

If anyone know something about that ?



---

archive/issue_comments_075509.json:
```json
{
    "body": "<a id='comment:3'></a>\nHi Nicolas...\n\nFirst, don't worry, nobody is blaming you! I did go look at #6647, and I don't see why it should cause the doctest failure. Above, you get many different results for `random_element()`, but when running the doctests, the random seed is reset every time, so the random element is actually not random at all. :)  Perhaps your \"`G.random_element() in G`\" doctest would be just as good.",
    "created_at": "2009-10-15T02:13:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7206#issuecomment-75509",
    "user": "https://github.com/dandrake"
}
```

<a id='comment:3'></a>
Hi Nicolas...

First, don't worry, nobody is blaming you! I did go look at #6647, and I don't see why it should cause the doctest failure. Above, you get many different results for `random_element()`, but when running the doctests, the random seed is reset every time, so the random element is actually not random at all. :)  Perhaps your "`G.random_element() in G`" doctest would be just as good.



---

archive/issue_events_021739.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/7206",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/7206#event-21739"
}
```



---

archive/issue_comments_075510.json:
```json
{
    "body": "Upstream: N/A",
    "created_at": "2013-10-27T15:37:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7206#issuecomment-75510",
    "user": "https://github.com/fchapoton"
}
```

Upstream: N/A



---

archive/issue_comments_075511.json:
```json
{
    "body": "Reviewer: Fr\u00e9d\u00e9ric Chapoton",
    "created_at": "2013-10-27T15:37:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7206#issuecomment-75511",
    "user": "https://github.com/fchapoton"
}
```

Reviewer: Frédéric Chapoton



---

archive/issue_comments_075512.json:
```json
{
    "body": "<a id='comment:5'></a>\nno such doctest failure in 5.13.beta1\n\nticket can be closed as invalid",
    "created_at": "2013-10-27T15:37:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7206#issuecomment-75512",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'></a>
no such doctest failure in 5.13.beta1

ticket can be closed as invalid



---

archive/issue_comments_075513.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-10-27T15:37:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7206#issuecomment-75513",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_075514.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-10-27T15:37:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7206#issuecomment-75514",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_021740.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2013-10-27T15:37:43Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/7206",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/7206#event-21740"
}
```



---

archive/issue_events_021741.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2013-10-27T15:37:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/7206",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/7206#event-21741"
}
```



---

archive/issue_comments_075515.json:
```json
{
    "body": "Resolution: worksforme",
    "created_at": "2013-10-31T08:30:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7206#issuecomment-75515",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: worksforme



---

archive/issue_events_021742.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-10-31T08:30:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/7206",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/7206#event-21742"
}
```
