# Issue 7209: Make `sage -coverage` aware of TestSuite

archive/issues_007209.json:
```json
{
    "body": "With the attached patch for sage/local/bin, `sage -coverage` scans for either a loads(dumps(s)) or a TestSuite(s).run() doctest, and suggests using the later.\n\nAlso refines the test whether the file defines a class.\n\n\nAssignee: @nthiery\n\nCC:  sage-combinat\n\nKeywords: TestSuite, coverage\n\nResolution: fixed\n\nAuthor: Nicolas M. Thi\u00e9ry\n\nReviewer: Florent Hivert\n\nMerged: sage-4.2.alpha1\n\nIssue created by migration from https://trac.sagemath.org/ticket/7209\n\n",
    "closed_at": "2009-10-21T04:01:53Z",
    "created_at": "2009-10-14T13:50:22Z",
    "labels": [
        "component: doctest coverage"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.2",
    "title": "Make `sage -coverage` aware of TestSuite",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/7209",
    "user": "https://github.com/nthiery"
}
```
With the attached patch for sage/local/bin, `sage -coverage` scans for either a loads(dumps(s)) or a TestSuite(s).run() doctest, and suggests using the later.

Also refines the test whether the file defines a class.


Assignee: @nthiery

CC:  sage-combinat

Keywords: TestSuite, coverage

Resolution: fixed

Author: Nicolas M. Thi√©ry

Reviewer: Florent Hivert

Merged: sage-4.2.alpha1

Issue created by migration from https://trac.sagemath.org/ticket/7209





---

archive/issue_comments_067466.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-With the attached patch, sage -coverage looks for either a loads/dumps test or TestSuite, and suggests using the later.\n+With the attached patch for sage/local/bin, `sage -coverage` scans for either a loads(dumps(s)) or a TestSuite(s).run() doctest, and suggests using the later.\n``````\n",
    "created_at": "2009-10-14T13:54:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7209#issuecomment-67466",
    "user": "https://github.com/nthiery"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-With the attached patch, sage -coverage looks for either a loads/dumps test or TestSuite, and suggests using the later.
+With the attached patch for sage/local/bin, `sage -coverage` scans for either a loads(dumps(s)) or a TestSuite(s).run() doctest, and suggests using the later.
``````




---

archive/issue_comments_067467.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2009-10-14T13:55:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7209#issuecomment-67467",
    "user": "https://github.com/nthiery"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_067468.json:
```json
{
    "body": "Attachment [trac_7209-coverage-TestSuite-nt.patch](tarball://root/attachments/some-uuid/ticket7209/trac_7209-coverage-TestSuite-nt.patch) by @nthiery created at 2009-10-14 14:09:30",
    "created_at": "2009-10-14T14:09:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7209#issuecomment-67468",
    "user": "https://github.com/nthiery"
}
```

Attachment [trac_7209-coverage-TestSuite-nt.patch](tarball://root/attachments/some-uuid/ticket7209/trac_7209-coverage-TestSuite-nt.patch) by @nthiery created at 2009-10-14 14:09:30



---

archive/issue_comments_067469.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,4 @@\n With the attached patch for sage/local/bin, `sage -coverage` scans for either a loads(dumps(s)) or a TestSuite(s).run() doctest, and suggests using the later.\n+\n+Also refines the test whether the file defines a class.\n+\n``````\n",
    "created_at": "2009-10-14T14:10:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7209#issuecomment-67469",
    "user": "https://github.com/nthiery"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,4 @@
 With the attached patch for sage/local/bin, `sage -coverage` scans for either a loads(dumps(s)) or a TestSuite(s).run() doctest, and suggests using the later.
+
+Also refines the test whether the file defines a class.
+
``````




---

archive/issue_comments_067470.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Florent Hivert\"",
    "created_at": "2009-10-19T19:50:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7209#issuecomment-67470",
    "user": "https://github.com/hivert"
}
```

Changing reviewer from "" to "Florent Hivert"



---

archive/issue_comments_067471.json:
```json
{
    "body": "<a id='comment:4'></a>\nWith the new category framework there will be a lot of parent which will be tested by the testsuite machinery. It is very useful that sage-coverage stop complaining about missing `s == loads(dumps(s))` because it is done during\n`TestSuite(s).run()`. The patch looks good and works. Positive review. \n\nCheers,\n\nFlorent",
    "created_at": "2009-10-19T19:50:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7209#issuecomment-67471",
    "user": "https://github.com/hivert"
}
```

<a id='comment:4'></a>
With the new category framework there will be a lot of parent which will be tested by the testsuite machinery. It is very useful that sage-coverage stop complaining about missing `s == loads(dumps(s))` because it is done during
`TestSuite(s).run()`. The patch looks good and works. Positive review. 

Cheers,

Florent



---

archive/issue_comments_067472.json:
```json
{
    "body": "Changing keywords from \"\" to \"TestSuite, coverage\".",
    "created_at": "2009-10-19T19:50:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7209#issuecomment-67472",
    "user": "https://github.com/hivert"
}
```

Changing keywords from "" to "TestSuite, coverage".



---

archive/issue_comments_067473.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2009-10-19T19:50:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7209#issuecomment-67473",
    "user": "https://github.com/hivert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_067474.json:
```json
{
    "body": "<a id='comment:5'></a>\nNotice that #5819 is somewhat related to this. It would be nice to fix that issue eventually...",
    "created_at": "2009-10-19T20:20:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7209#issuecomment-67474",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:5'></a>
Notice that #5819 is somewhat related to this. It would be nice to fix that issue eventually...



---

archive/issue_comments_067475.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [jhpalmieri](#comment%3A5):\n> Notice that #5819 is somewhat related to this. It would be nice to fix that issue eventually...\n\n\nSure. But right now our primary goal is to finish the category stuff ASAP...\nI'm sorry for this but we really have to take the straight line :-)\n\nCheers,\n\nFlorent",
    "created_at": "2009-10-19T20:57:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7209#issuecomment-67475",
    "user": "https://github.com/hivert"
}
```

<a id='comment:6'></a>
Replying to [jhpalmieri](#comment%3A5):
> Notice that #5819 is somewhat related to this. It would be nice to fix that issue eventually...


Sure. But right now our primary goal is to finish the category stuff ASAP...
I'm sorry for this but we really have to take the straight line :-)

Cheers,

Florent



---

archive/issue_events_029173.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2009-10-21T04:01:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/7209",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/7209#event-29173"
}
```



---

archive/issue_comments_067476.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2009-10-21T04:01:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7209#issuecomment-67476",
    "user": "https://github.com/mwhansen"
}
```

Resolution: fixed



---

archive/issue_comments_067477.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-4.2.alpha1\"",
    "created_at": "2009-10-21T04:01:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7209#issuecomment-67477",
    "user": "https://github.com/mwhansen"
}
```

Changing merged from "" to "sage-4.2.alpha1"
