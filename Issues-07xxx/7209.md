# Issue 7209: Make `sage -coverage` aware of TestSuite

archive/issues_007209.json:
```json
{
    "assignees": [
        "https://github.com/nthiery"
    ],
    "body": "With the attached patch for sage/local/bin, `sage -coverage` scans for either a loads(dumps(s)) or a TestSuite(s).run() doctest, and suggests using the later.\n\nAlso refines the test whether the file defines a class.\n\n\nCC:  @sagetrac-sage-combinat\n\nKeywords: **TestSuite, coverage**\n\nComponent: **doctest coverage**\n\nAuthor: **Nicolas M. Thi\u00e9ry**\n\nReviewer: **Florent Hivert**\n\nMerged: **sage-4.2.alpha1**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/7209_\n\n",
    "closed_at": "2009-10-21T04:01:53Z",
    "created_at": "2009-10-14T13:50:22Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/doctest%20coverage",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Make `sage -coverage` aware of TestSuite",
    "type": "issue",
    "updated_at": "2009-10-21T04:01:53Z",
    "url": "https://github.com/sagemath/sage/issues/7209",
    "user": "https://github.com/nthiery"
}
```
With the attached patch for sage/local/bin, `sage -coverage` scans for either a loads(dumps(s)) or a TestSuite(s).run() doctest, and suggests using the later.

Also refines the test whether the file defines a class.


CC:  @sagetrac-sage-combinat

Keywords: **TestSuite, coverage**

Component: **doctest coverage**

Author: **Nicolas M. Thi√©ry**

Reviewer: **Florent Hivert**

Merged: **sage-4.2.alpha1**

_Issue created by migration from https://trac.sagemath.org/ticket/7209_





---

archive/issue_events_087970.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2009-10-14T13:50:22Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/7209",
    "milestone_number": null,
    "milestone_title": "sage-4.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7209#event-87970"
}
```



---

archive/issue_events_087971.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2009-10-14T13:50:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7209",
    "label": "https://github.com/sagemath/sage/labels/doctest%20coverage",
    "label_color": "696969",
    "label_name": "doctest coverage",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7209#event-87971"
}
```



---

archive/issue_events_087972.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2009-10-14T13:50:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7209",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7209#event-87972"
}
```



---

archive/issue_events_087973.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2009-10-14T13:50:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7209",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7209#event-87973"
}
```



---

archive/issue_events_087974.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2009-10-14T13:50:22Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/7209",
    "subject": "https://github.com/nthiery",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7209#event-87974"
}
```



---

archive/issue_comments_051930.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-With the attached patch, sage -coverage looks for either a loads/dumps test or TestSuite, and suggests using the later.\n+With the attached patch for sage/local/bin, `sage -coverage` scans for either a loads(dumps(s)) or a TestSuite(s).run() doctest, and suggests using the later.\n``````\n",
    "created_at": "2009-10-14T13:54:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7209#issuecomment-51930",
    "user": "https://github.com/nthiery"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-With the attached patch, sage -coverage looks for either a loads/dumps test or TestSuite, and suggests using the later.
+With the attached patch for sage/local/bin, `sage -coverage` scans for either a loads(dumps(s)) or a TestSuite(s).run() doctest, and suggests using the later.
``````




---

archive/issue_events_087975.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2009-10-14T13:55:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7209",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7209#event-87975"
}
```



---

archive/issue_comments_051931.json:
```json
{
    "body": "Attachment: **[trac_7209-coverage-TestSuite-nt.patch.gz](https://github.com/sagemath/sage/files/ticket7209/trac_7209-coverage-TestSuite-nt.patch.gz)**",
    "created_at": "2009-10-14T14:09:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7209#issuecomment-51931",
    "user": "https://github.com/nthiery"
}
```

Attachment: **[trac_7209-coverage-TestSuite-nt.patch.gz](https://github.com/sagemath/sage/files/ticket7209/trac_7209-coverage-TestSuite-nt.patch.gz)**



---

archive/issue_comments_051932.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,4 @@\n With the attached patch for sage/local/bin, `sage -coverage` scans for either a loads(dumps(s)) or a TestSuite(s).run() doctest, and suggests using the later.\n+\n+Also refines the test whether the file defines a class.\n+\n``````\n",
    "created_at": "2009-10-14T14:10:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7209#issuecomment-51932",
    "user": "https://github.com/nthiery"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,4 @@
 With the attached patch for sage/local/bin, `sage -coverage` scans for either a loads(dumps(s)) or a TestSuite(s).run() doctest, and suggests using the later.
+
+Also refines the test whether the file defines a class.
+
``````




---

archive/issue_comments_051933.json:
```json
{
    "body": "Reviewer: **Florent Hivert**",
    "created_at": "2009-10-19T19:50:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7209#issuecomment-51933",
    "user": "https://github.com/hivert"
}
```

Reviewer: **Florent Hivert**



---

archive/issue_comments_051934.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nWith the new category framework there will be a lot of parent which will be tested by the testsuite machinery. It is very useful that sage-coverage stop complaining about missing `s == loads(dumps(s))` because it is done during\n`TestSuite(s).run()`. The patch looks good and works. Positive review. \n\nCheers,\n\nFlorent",
    "created_at": "2009-10-19T19:50:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7209#issuecomment-51934",
    "user": "https://github.com/hivert"
}
```

<div id="comment:4" align="right">comment:4</div>

With the new category framework there will be a lot of parent which will be tested by the testsuite machinery. It is very useful that sage-coverage stop complaining about missing `s == loads(dumps(s))` because it is done during
`TestSuite(s).run()`. The patch looks good and works. Positive review. 

Cheers,

Florent



---

archive/issue_comments_051935.json:
```json
{
    "body": "Changed keywords from none to **TestSuite, coverage**",
    "created_at": "2009-10-19T19:50:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7209#issuecomment-51935",
    "user": "https://github.com/hivert"
}
```

Changed keywords from none to **TestSuite, coverage**



---

archive/issue_events_087976.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2009-10-19T19:50:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7209",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7209#event-87976"
}
```



---

archive/issue_events_087977.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2009-10-19T19:50:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7209",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7209#event-87977"
}
```



---

archive/issue_comments_051936.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nNotice that #5819 is somewhat related to this. It would be nice to fix that issue eventually...",
    "created_at": "2009-10-19T20:20:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7209#issuecomment-51936",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:5" align="right">comment:5</div>

Notice that #5819 is somewhat related to this. It would be nice to fix that issue eventually...



---

archive/issue_comments_051937.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@jhpalmieri](#comment:5):\n> Notice that #5819 is somewhat related to this. It would be nice to fix that issue eventually...\n\nSure. But right now our primary goal is to finish the category stuff ASAP...\nI'm sorry for this but we really have to take the straight line :-)\n\nCheers,\n\nFlorent",
    "created_at": "2009-10-19T20:57:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7209#issuecomment-51937",
    "user": "https://github.com/hivert"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@jhpalmieri](#comment:5):
> Notice that #5819 is somewhat related to this. It would be nice to fix that issue eventually...

Sure. But right now our primary goal is to finish the category stuff ASAP...
I'm sorry for this but we really have to take the straight line :-)

Cheers,

Florent



---

archive/issue_events_087978.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2009-10-21T04:01:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7209",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7209#event-87978"
}
```



---

archive/issue_events_087979.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2009-10-21T04:01:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/7209",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7209#event-87979"
}
```



---

archive/issue_comments_051938.json:
```json
{
    "body": "Merged: **sage-4.2.alpha1**",
    "created_at": "2009-10-21T04:01:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7209#issuecomment-51938",
    "user": "https://github.com/mwhansen"
}
```

Merged: **sage-4.2.alpha1**
