# Issue 7268: GLPK: named constraints and variables, export functions

archive/issues_007268.json:
```json
{
    "body": "Hello everybody !\n\nThis is an update of the GLPK package to match the changes in ``numerical.mip``. Here is the list of changes :\n\n* Names for the objective function, the whole problem, variables and constraints can be set through the newly exposed GLPK functions\n* A problem can be exported to MPS or LP files\n* GLPK now returns Exceptions when it fails ( it used to silently return the 0 solution ).\n* As solveGLPK, write_mps and write_lp all need the problem to be built as a GLPK structure, a new function  ``build_glp_prob`` does this job and is used by the three of them.\n\nComments have also been added when felt necessary. The code should be more efficient (and Cythonized) in this version ( this was the whole purpose of redefining the structure of ``numerical.mip`` )\n\nThe spkg is available on sagemath at : ~ncohen/glpk-4.38.p4.spkg or at http://www-sop.inria.fr/members/Nathann.Cohen/glpk-4.38.p4.spkg or http://sage.math.washington.edu/home/malb/spkgs/glpk-4.38.p4.spkg\n\nNathann\n\n**Resolution:** fixed\n\n**Author:** Nathann Cohen\n\n**Reviewer:** Martin Albrecht\n\nIssue created by migration from https://trac.sagemath.org/ticket/7268\n\n",
    "closed_at": "2009-12-02T07:32:21Z",
    "created_at": "2009-10-23T15:26:10Z",
    "labels": [
        "component: packages: optional"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.3",
    "title": "GLPK: named constraints and variables, export functions",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/7268",
    "user": "https://github.com/nathanncohen"
}
```
Hello everybody !

This is an update of the GLPK package to match the changes in ``numerical.mip``. Here is the list of changes :

* Names for the objective function, the whole problem, variables and constraints can be set through the newly exposed GLPK functions
* A problem can be exported to MPS or LP files
* GLPK now returns Exceptions when it fails ( it used to silently return the 0 solution ).
* As solveGLPK, write_mps and write_lp all need the problem to be built as a GLPK structure, a new function  ``build_glp_prob`` does this job and is used by the three of them.

Comments have also been added when felt necessary. The code should be more efficient (and Cythonized) in this version ( this was the whole purpose of redefining the structure of ``numerical.mip`` )

The spkg is available on sagemath at : ~ncohen/glpk-4.38.p4.spkg or at http://www-sop.inria.fr/members/Nathann.Cohen/glpk-4.38.p4.spkg or http://sage.math.washington.edu/home/malb/spkgs/glpk-4.38.p4.spkg

Nathann

**Resolution:** fixed

**Author:** Nathann Cohen

**Reviewer:** Martin Albrecht

Issue created by migration from https://trac.sagemath.org/ticket/7268





---

archive/issue_comments_076300.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2009-10-23T15:28:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7268#issuecomment-76300",
    "user": "https://github.com/nathanncohen"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_076301.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -9,6 +9,6 @@\n \n Comments have also been added when felt necessary. The code should be more efficient (and Cythonized) in this version ( this was the whole purpose of redefining the structure of ``numerical.mip`` )\n \n-The spkg is available on sagemath at : ~ncohen/glpk-4.38.p3.spkg\n+The spkg is available on sagemath at : ~ncohen/glpk-4.38.p3.spkg or at http://www-sop.inria.fr/members/Nathann.Cohen/glpk-4.38.p3.spkg\n \n Nathann\n``````\n",
    "created_at": "2009-10-23T23:22:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7268#issuecomment-76301",
    "user": "https://github.com/nathanncohen"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -9,6 +9,6 @@
 
 Comments have also been added when felt necessary. The code should be more efficient (and Cythonized) in this version ( this was the whole purpose of redefining the structure of ``numerical.mip`` )
 
-The spkg is available on sagemath at : ~ncohen/glpk-4.38.p3.spkg
+The spkg is available on sagemath at : ~ncohen/glpk-4.38.p3.spkg or at http://www-sop.inria.fr/members/Nathann.Cohen/glpk-4.38.p3.spkg
 
 Nathann
``````




---

archive/issue_comments_076302.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2009-11-25T03:58:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7268#issuecomment-76302",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_076303.json:
```json
{
    "body": "<a id='comment:3'></a>\nThe package installs OK on Sage 4.3.alpha0. Here are some documentation issues in the file `patch/mipGlpk.pyx` that I think need to be addressed:\n\n1. the function `solve_glpk()` --- document the input `log` and `objective_only`, and explain the expected output (if any).\n2. the function `write_mps()` --- document the input `filename`  and `modern`, and explain the expected output (if any).\n3. the function `write_lp()` --- document what this function does. Also document the input `filename` and explain the expected output (if any).",
    "created_at": "2009-11-25T03:58:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7268#issuecomment-76303",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

<a id='comment:3'></a>
The package installs OK on Sage 4.3.alpha0. Here are some documentation issues in the file `patch/mipGlpk.pyx` that I think need to be addressed:

1. the function `solve_glpk()` --- document the input `log` and `objective_only`, and explain the expected output (if any).
2. the function `write_mps()` --- document the input `filename`  and `modern`, and explain the expected output (if any).
3. the function `write_lp()` --- document what this function does. Also document the input `filename` and explain the expected output (if any).



---

archive/issue_comments_076304.json:
```json
{
    "body": "**Upstream:** N/A",
    "created_at": "2009-11-25T03:58:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7268#issuecomment-76304",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

**Upstream:** N/A



---

archive/issue_comments_076305.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2009-11-25T07:33:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7268#issuecomment-76305",
    "user": "https://github.com/nathanncohen"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_076306.json:
```json
{
    "body": "<a id='comment:4'></a>\nSorry !! :-)\n\nI wrote these in the wrappers for these functions in class MixedIntegerLinearProgram but forgot to copy them there.... Both files updated ! :-)",
    "created_at": "2009-11-25T07:33:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7268#issuecomment-76306",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:4'></a>
Sorry !! :-)

I wrote these in the wrappers for these functions in class MixedIntegerLinearProgram but forgot to copy them there.... Both files updated ! :-)



---

archive/issue_comments_076307.json:
```json
{
    "body": "<a id='comment:5'></a>\nA new SPKG is available at\n\n   http://sage.math.washington.edu/home/malb/spkgs/glpk-4.38.p4.spkg\n\nI give Nathan's SPKG a positive review if my referee patch is accepted. The referee patch fixes a mem leak and makes some of the code in the Cython wrapper more Pythonic (I also reverted some pre-mature optimisation which wouldn't speed things up)\n\nI am attaching the patch here for convenience (it is applied in p4 linked above).",
    "created_at": "2009-12-01T17:04:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7268#issuecomment-76307",
    "user": "https://github.com/malb"
}
```

<a id='comment:5'></a>
A new SPKG is available at

   http://sage.math.washington.edu/home/malb/spkgs/glpk-4.38.p4.spkg

I give Nathan's SPKG a positive review if my referee patch is accepted. The referee patch fixes a mem leak and makes some of the code in the Cython wrapper more Pythonic (I also reverted some pre-mature optimisation which wouldn't speed things up)

I am attaching the patch here for convenience (it is applied in p4 linked above).



---

archive/issue_comments_076308.json:
```json
{
    "body": "<a id='comment:6'></a>\nYour new spkg file contains a build/ directory and a file .cpp in the patch/ directory ( it seems you installed the patch then packaged it without removing these temporary files ). Coild you update it ?\n\nBesides, is there any way for me to get the diff files since the last version ? I am still not that used to mercurial :-)\n\nThank youuuuuuuuuu !!!\n\nNathann",
    "created_at": "2009-12-01T17:35:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7268#issuecomment-76308",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:6'></a>
Your new spkg file contains a build/ directory and a file .cpp in the patch/ directory ( it seems you installed the patch then packaged it without removing these temporary files ). Coild you update it ?

Besides, is there any way for me to get the diff files since the last version ? I am still not that used to mercurial :-)

Thank youuuuuuuuuu !!!

Nathann



---

archive/issue_comments_076309.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2009-12-01T17:35:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7268#issuecomment-76309",
    "user": "https://github.com/nathanncohen"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_076310.json:
```json
{
    "body": "<a id='comment:7'></a>\nI've updated the SPKG and I'll attach the diff.",
    "created_at": "2009-12-01T17:43:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7268#issuecomment-76310",
    "user": "https://github.com/malb"
}
```

<a id='comment:7'></a>
I've updated the SPKG and I'll attach the diff.



---

archive/attachments_008695.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "glpk_sage_free.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket7268/glpk_sage_free.patch",
    "created_at": "2009-12-01T17:43:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7268",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/malb"
}
```



---

archive/issue_comments_076311.json:
```json
{
    "body": "",
    "created_at": "2009-12-01T17:43:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7268#issuecomment-76311",
    "user": "https://github.com/malb"
}
```





---

archive/issue_comments_076312.json:
```json
{
    "body": "<a id='comment:8'></a>\nLooks good :-)\n\nTwo questions though :\n\n* Why do you replace == and != by is and is not ?\n* is enumerating range(500) faster than 0<= i< 500 or is there another reason ?\n* Why did you remove the leading 'r' before the docstrings ? I was under the impression they were requried for the docstring to display correctly...\n\nI knew nothing about enumerate()... I'll remember this one ! :-)\n\nNathann",
    "created_at": "2009-12-01T17:56:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7268#issuecomment-76312",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:8'></a>
Looks good :-)

Two questions though :

* Why do you replace == and != by is and is not ?
* is enumerating range(500) faster than 0<= i< 500 or is there another reason ?
* Why did you remove the leading 'r' before the docstrings ? I was under the impression they were requried for the docstring to display correctly...

I knew nothing about enumerate()... I'll remember this one ! :-)

Nathann



---

archive/issue_comments_076313.json:
```json
{
    "body": "**Changing status** from needs_work to needs_info.",
    "created_at": "2009-12-01T17:56:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7268#issuecomment-76313",
    "user": "https://github.com/nathanncohen"
}
```

**Changing status** from needs_work to needs_info.



---

archive/issue_comments_076314.json:
```json
{
    "body": "<a id='comment:9'></a>\n> Why do you replace == and != by is and is not ?\n\n\nFalse and None are unique objects thus it is sufficient to compare by checking identities. Feel free to change it back, though.\n\n>     * is enumerating range(500) faster than 0<= i< 500 or is there another reason ?\n\n\nCython will write 0<= i < 500 automatically, so you can just write proper Python code and Cython will optimise it for you.\n\n>  Why did you remove the leading 'r' before the docstrings ? I was under the impression they were requried for the docstring to display correctly...\n\n\nOnly if they contain a backslash.",
    "created_at": "2009-12-01T18:02:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7268#issuecomment-76314",
    "user": "https://github.com/malb"
}
```

<a id='comment:9'></a>
> Why do you replace == and != by is and is not ?


False and None are unique objects thus it is sufficient to compare by checking identities. Feel free to change it back, though.

>     * is enumerating range(500) faster than 0<= i< 500 or is there another reason ?


Cython will write 0<= i < 500 automatically, so you can just write proper Python code and Cython will optimise it for you.

>  Why did you remove the leading 'r' before the docstrings ? I was under the impression they were requried for the docstring to display correctly...


Only if they contain a backslash.



---

archive/issue_comments_076315.json:
```json
{
    "body": "<a id='comment:10'></a>\nThen.... Positive review ! And thank you for your answers and your help ! :-)\n\nNathann",
    "created_at": "2009-12-01T18:07:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7268#issuecomment-76315",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:10'></a>
Then.... Positive review ! And thank you for your answers and your help ! :-)

Nathann



---

archive/issue_comments_076316.json:
```json
{
    "body": "**Changing status** from needs_info to needs_review.",
    "created_at": "2009-12-01T18:07:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7268#issuecomment-76316",
    "user": "https://github.com/nathanncohen"
}
```

**Changing status** from needs_info to needs_review.



---

archive/issue_comments_076317.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2009-12-01T18:07:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7268#issuecomment-76317",
    "user": "https://github.com/nathanncohen"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_076318.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -9,6 +9,6 @@\n \n Comments have also been added when felt necessary. The code should be more efficient (and Cythonized) in this version ( this was the whole purpose of redefining the structure of ``numerical.mip`` )\n \n-The spkg is available on sagemath at : ~ncohen/glpk-4.38.p3.spkg or at http://www-sop.inria.fr/members/Nathann.Cohen/glpk-4.38.p3.spkg\n+The spkg is available on sagemath at : ~ncohen/glpk-4.38.p4.spkg or at http://www-sop.inria.fr/members/Nathann.Cohen/glpk-4.38.p4.spkg or http://sage.math.washington.edu/home/malb/spkgs/glpk-4.38.p4.spkg\n \n Nathann\n``````\n",
    "created_at": "2009-12-01T18:09:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7268#issuecomment-76318",
    "user": "https://github.com/nathanncohen"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -9,6 +9,6 @@
 
 Comments have also been added when felt necessary. The code should be more efficient (and Cythonized) in this version ( this was the whole purpose of redefining the structure of ``numerical.mip`` )
 
-The spkg is available on sagemath at : ~ncohen/glpk-4.38.p3.spkg or at http://www-sop.inria.fr/members/Nathann.Cohen/glpk-4.38.p3.spkg
+The spkg is available on sagemath at : ~ncohen/glpk-4.38.p4.spkg or at http://www-sop.inria.fr/members/Nathann.Cohen/glpk-4.38.p4.spkg or http://sage.math.washington.edu/home/malb/spkgs/glpk-4.38.p4.spkg
 
 Nathann
``````




---

archive/issue_comments_076319.json:
```json
{
    "body": "<a id='comment:13'></a>\nDepends on #7270 !!!!!!!!!!!!!!!",
    "created_at": "2009-12-01T18:09:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7268#issuecomment-76319",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:13'></a>
Depends on #7270 !!!!!!!!!!!!!!!



---

archive/issue_events_021867.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2009-12-02T07:32:21Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/7268",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/7268#event-21867"
}
```



---

archive/issue_comments_076320.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2009-12-02T07:32:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7268#issuecomment-76320",
    "user": "https://github.com/mwhansen"
}
```

**Resolution:** fixed



---

archive/issue_comments_076321.json:
```json
{
    "body": "<a id='comment:14'></a>\nMerged in the with the optional packages.",
    "created_at": "2009-12-02T07:32:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7268#issuecomment-76321",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:14'></a>
Merged in the with the optional packages.



---

archive/issue_comments_076322.json:
```json
{
    "body": "**Reviewer:** Martin Albrecht",
    "created_at": "2009-12-02T07:32:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7268#issuecomment-76322",
    "user": "https://github.com/mwhansen"
}
```

**Reviewer:** Martin Albrecht



---

archive/issue_comments_076323.json:
```json
{
    "body": "**Author:** Nathann Cohen",
    "created_at": "2009-12-02T07:32:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7268#issuecomment-76323",
    "user": "https://github.com/mwhansen"
}
```

**Author:** Nathann Cohen



---

archive/issue_comments_076324.json:
```json
{
    "body": "<a id='comment:15'></a>\nFYI: enumerate is now recognized and sped up by Cython (in version 0.12, which will be in the next version of Sage).  See http://trac.cython.org/cython_trac/ticket/316\n\nSo hooray!",
    "created_at": "2009-12-03T14:39:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7268#issuecomment-76324",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:15'></a>
FYI: enumerate is now recognized and sped up by Cython (in version 0.12, which will be in the next version of Sage).  See http://trac.cython.org/cython_trac/ticket/316

So hooray!



---

archive/issue_comments_076325.json:
```json
{
    "body": "<a id='comment:16'></a>\nThank you    !! :-)\n\nIf you are interested by (shorter) reviews, I am splitting the big Flow patch into small ones... The flow is already available, the matching will be available soon too, and the others ( less important ) will follow.",
    "created_at": "2009-12-03T14:41:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7268#issuecomment-76325",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:16'></a>
Thank you    !! :-)

If you are interested by (shorter) reviews, I am splitting the big Flow patch into small ones... The flow is already available, the matching will be available soon too, and the others ( less important ) will follow.



---

archive/issue_events_021868.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/7268",
    "rename": {
        "from": "GLPK : named constraints and variables, export functions ...",
        "to": "GLPK: named constraints and variables, export functions"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/7268#event-21868"
}
```
