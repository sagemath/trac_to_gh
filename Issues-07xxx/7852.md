# Issue 7852: solve_left for RDF matrices is WRONG

archive/issues_007852.json:
```json
{
    "assignees": [],
    "body": "Observe the docstring for solve_left for an RDF matrix:\n\n```\nsage: A = random_matrix(RDF,3)\nsage: A.solve_left?\nSolve the equation A*x = b, where\n        \n        EXAMPLES:\n            sage: A = matrix(RDF, 3,3, [1,2,5,7.6,2.3,1,1,2,-1]); A\n            [ 1.0  2.0  5.0]\n            [ 7.6  2.3  1.0]\n            [ 1.0  2.0 -1.0]\n            sage: b = vector(RDF,[1,2,3])\n            sage: x = A.solve_left(b); x\n            (-0.113695090439, 1.39018087855, -0.333333333333)\n            sage: A*x\n            (1.0, 2.0, 3.0)\n```\n\nBut that is solve_right. \n\nThis was evidently introduced by maybe Grout's \"Switch the RDF and CDF matrices to a numpy 1.2 backend; factor out common functionality to matrix_double_dense.pyx.\".\n\nReported by Stephanie Dietzel\n\n---\n\nApply\n1. [attachment:trac_7852-solve-linear-systems-CDF.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-solve-linear-systems-CDF.patch)\n2. [attachment:trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch)\n3. [attachment:trac_7852-fix_noise_errors_in_polys.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_polys.reviewer.patch)\n4. [attachment:trac_7852-fix_noisy_zero_error_in_matrix_double_dense.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noisy_zero_error_in_matrix_double_dense.reviewer.patch)\n5. [attachment:trac_7852-adjust_noisy_zero_term_threshold_for_polys.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-adjust_noisy_zero_term_threshold_for_polys.reviewer.patch)\nto the Sage library.\n\n\nDepends on #11848\n\n**Assignee:** @williamstein\n\n**CC:**  @jasongrout\n\n**Author:** Rob Beezer,  Leif Leonhardy\n\n**Reviewer:** Martin Raum, Leif Leonhardy, Rob Beezer\n\n**Merged:** sage-4.7.2.alpha3\n\nIssue created by migration from https://trac.sagemath.org/ticket/7852\n\n",
    "closed_at": "2011-09-13T12:15:21Z",
    "created_at": "2010-01-05T21:40:18Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20linear%20algebra",
        "https://github.com/sagemath/sage/labels/blocker",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.7.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "solve_left for RDF matrices is WRONG",
    "type": "issue",
    "updated_at": "2011-10-07T17:16:28Z",
    "url": "https://github.com/sagemath/sage/issues/7852",
    "user": "https://github.com/williamstein"
}
```
Observe the docstring for solve_left for an RDF matrix:

```
sage: A = random_matrix(RDF,3)
sage: A.solve_left?
Solve the equation A*x = b, where
        
        EXAMPLES:
            sage: A = matrix(RDF, 3,3, [1,2,5,7.6,2.3,1,1,2,-1]); A
            [ 1.0  2.0  5.0]
            [ 7.6  2.3  1.0]
            [ 1.0  2.0 -1.0]
            sage: b = vector(RDF,[1,2,3])
            sage: x = A.solve_left(b); x
            (-0.113695090439, 1.39018087855, -0.333333333333)
            sage: A*x
            (1.0, 2.0, 3.0)
```

But that is solve_right. 

This was evidently introduced by maybe Grout's "Switch the RDF and CDF matrices to a numpy 1.2 backend; factor out common functionality to matrix_double_dense.pyx.".

Reported by Stephanie Dietzel

---

Apply
1. [attachment:trac_7852-solve-linear-systems-CDF.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-solve-linear-systems-CDF.patch)
2. [attachment:trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch)
3. [attachment:trac_7852-fix_noise_errors_in_polys.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_polys.reviewer.patch)
4. [attachment:trac_7852-fix_noisy_zero_error_in_matrix_double_dense.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noisy_zero_error_in_matrix_double_dense.reviewer.patch)
5. [attachment:trac_7852-adjust_noisy_zero_term_threshold_for_polys.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-adjust_noisy_zero_term_threshold_for_polys.reviewer.patch)
to the Sage library.


Depends on #11848

**Assignee:** @williamstein

**CC:**  @jasongrout

**Author:** Rob Beezer,  Leif Leonhardy

**Reviewer:** Martin Raum, Leif Leonhardy, Rob Beezer

**Merged:** sage-4.7.2.alpha3

Issue created by migration from https://trac.sagemath.org/ticket/7852





---

archive/issue_events_081338.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-01-05T21:40:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "milestone_number": null,
    "milestone_title": "sage-4.7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7852#event-81338"
}
```



---

archive/issue_events_081339.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-01-05T21:40:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20linear%20algebra",
    "label_color": "08517b",
    "label_name": "component: linear algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7852#event-81339"
}
```



---

archive/issue_events_081340.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-01-05T21:40:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "008080",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7852#event-81340"
}
```



---

archive/issue_comments_061214.json:
```json
{
    "body": "<a id='comment:1'>**Comment 1:**</a>\nThis might be related to #4932.  I'll put this on my list for the bug day coming up.",
    "created_at": "2010-01-05T22:16:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-61214",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:1'>**Comment 1:**</a>
This might be related to #4932.  I'll put this on my list for the bug day coming up.



---

archive/issue_comments_061215.json:
```json
{
    "body": "**Attachment:** [trac_7852-solve-linear-systems-CDF.patch.gz](https://github.com/sagemath/sage/files/ticket7852/trac_7852-solve-linear-systems-CDF.patch.gz)",
    "created_at": "2011-02-24T22:33:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-61215",
    "user": "https://github.com/rbeezer"
}
```

**Attachment:** [trac_7852-solve-linear-systems-CDF.patch.gz](https://github.com/sagemath/sage/files/ticket7852/trac_7852-solve-linear-systems-CDF.patch.gz)



---

archive/issue_comments_061216.json:
```json
{
    "body": "<a id='comment:2'>**Comment 2:**</a>\nPatch corrects the naming problem, and creates upgraded ``solve_left`` and ``solve_right``.\n\nThis required just a few touch-ups where the name had been wrong, or the improved accuracy changed results.",
    "created_at": "2011-02-24T22:36:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-61216",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:2'>**Comment 2:**</a>
Patch corrects the naming problem, and creates upgraded ``solve_left`` and ``solve_right``.

This required just a few touch-ups where the name had been wrong, or the improved accuracy changed results.



---

archive/issue_events_081341.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-02-24T22:36:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7852#event-81341"
}
```



---

archive/issue_comments_061217.json:
```json
{
    "body": "**Author:** Rob Beezer",
    "created_at": "2011-02-24T22:47:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-61217",
    "user": "https://github.com/rbeezer"
}
```

**Author:** Rob Beezer



---

archive/issue_comments_061218.json:
```json
{
    "body": "<a id='comment:4'>**Comment 4:**</a>\nWithout the patch, \"solve_right\" seems to work for nonsquare matrices over RDF, I guess because it's using the generic \"solve_right\" method from matrix2.pyx.  With the patch, it looks like this won't work any more; is that right?  Is there a good reason for not allowing square matrices?  We could instead add a method `_solve_right_nonsingular_square` to matrix_double_dense.pyx, and then I think this should be called by the generic solve_right method.\n\nFor \"solve_left\", could we just remove the version from matrix_double_dense.pyx altogether, and just use the generic version?",
    "created_at": "2011-03-21T19:16:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-61218",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:4'>**Comment 4:**</a>
Without the patch, "solve_right" seems to work for nonsquare matrices over RDF, I guess because it's using the generic "solve_right" method from matrix2.pyx.  With the patch, it looks like this won't work any more; is that right?  Is there a good reason for not allowing square matrices?  We could instead add a method `_solve_right_nonsingular_square` to matrix_double_dense.pyx, and then I think this should be called by the generic solve_right method.

For "solve_left", could we just remove the version from matrix_double_dense.pyx altogether, and just use the generic version?



---

archive/issue_comments_061219.json:
```json
{
    "body": "<a id='comment:5'>**Comment 5:**</a>\nReplying to [@jhpalmieri](#comment%3A4):\n\nYes, there is some tension in handling inexact matrices with routines designed for exact matrices (which is the root issue here, I believe).  `NumPy/SciPy` just does not do certain things, such as computing a rank.\n\nI'm hoping to get some guidance from the `NumPy` folks here at Sage Days 29 right now and we can chat some more.",
    "created_at": "2011-03-21T21:04:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-61219",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:5'>**Comment 5:**</a>
Replying to [@jhpalmieri](#comment%3A4):

Yes, there is some tension in handling inexact matrices with routines designed for exact matrices (which is the root issue here, I believe).  `NumPy/SciPy` just does not do certain things, such as computing a rank.

I'm hoping to get some guidance from the `NumPy` folks here at Sage Days 29 right now and we can chat some more.



---

archive/issue_events_081342.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2011-03-25T03:47:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7852#event-81342"
}
```



---

archive/issue_events_081343.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2011-03-25T03:47:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7852#event-81343"
}
```



---

archive/issue_comments_061220.json:
```json
{
    "body": "<a id='comment:6'>**Comment 6:**</a>\n1) You can use svd to first get a square matrix that you can use to solve the system of linear equations.\n2) Why do you copy the code for left and right solve. There is a generic fallback in matrix2.pyx. If you want to replace the docstring for this class, can't you do just that?",
    "created_at": "2011-03-25T03:47:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-61220",
    "user": "https://github.com/sagetrac-mraum"
}
```

<a id='comment:6'>**Comment 6:**</a>
1) You can use svd to first get a square matrix that you can use to solve the system of linear equations.
2) Why do you copy the code for left and right solve. There is a generic fallback in matrix2.pyx. If you want to replace the docstring for this class, can't you do just that?



---

archive/issue_comments_061221.json:
```json
{
    "body": "<a id='comment:7'>**Comment 7:**</a>\nWe could use a direct call to `SciPy` solve for square nonsingular and analyze/exploit the SVD for nonsingular/rectangular.",
    "created_at": "2011-03-25T17:50:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-61221",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:7'>**Comment 7:**</a>
We could use a direct call to `SciPy` solve for square nonsingular and analyze/exploit the SVD for nonsingular/rectangular.



---

archive/issue_events_081344.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-07-18T04:48:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7852#event-81344"
}
```



---

archive/issue_events_081345.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-07-18T04:48:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7852#event-81345"
}
```



---

archive/issue_comments_061222.json:
```json
{
    "body": "<a id='comment:8'>**Comment 8:**</a>\nFinally getting back to this one.\n\n1.  solve_left and solve_right are confused at the moment - I think this is important to fix.\n\n2.  The code is different, in part because the error messages are explicit, naming rows and columns when sizes do not match.\n\n3.  The longer I think about it, the more I think we should *never* be feeding floating-point matrices into exact routines.  We should expose the ScyPy/NumPy/LAPACK routines as much as possible and not pretend the exact routines are going to give reasonable answers as a \"fallback.\"\n\n4.  I'm happy to try to get solutions to systems with non-square coefficient matrices with floating-point entries, but despite a lot of thought and reading, I'm not convinced of the right approach.  In any event, I'd like to fix the problem at hand, and do the non-square somewhere else.\n\n5.  I am going to set this to \"needs review\" but I'm happy to entertain more discussion - I'll just need convincing.\n\nRob",
    "created_at": "2011-07-18T04:48:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-61222",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:8'>**Comment 8:**</a>
Finally getting back to this one.

1.  solve_left and solve_right are confused at the moment - I think this is important to fix.

2.  The code is different, in part because the error messages are explicit, naming rows and columns when sizes do not match.

3.  The longer I think about it, the more I think we should *never* be feeding floating-point matrices into exact routines.  We should expose the ScyPy/NumPy/LAPACK routines as much as possible and not pretend the exact routines are going to give reasonable answers as a "fallback."

4.  I'm happy to try to get solutions to systems with non-square coefficient matrices with floating-point entries, but despite a lot of thought and reading, I'm not convinced of the right approach.  In any event, I'd like to fix the problem at hand, and do the non-square somewhere else.

5.  I am going to set this to "needs review" but I'm happy to entertain more discussion - I'll just need convincing.

Rob



---

archive/issue_comments_061223.json:
```json
{
    "body": "<a id='comment:9'>**Comment 9:**</a>\nWhat I was talking about when I mentioned the fallback is a piece of generic code for solve_left that calls solve_right. Thus you only need to implement one version. And you should, because code duplication makes mistakes more likely and maintenance harder. I will change this when reviewing this, and then will wait for your approval.",
    "created_at": "2011-08-04T10:28:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-61223",
    "user": "https://github.com/sagetrac-mraum"
}
```

<a id='comment:9'>**Comment 9:**</a>
What I was talking about when I mentioned the fallback is a piece of generic code for solve_left that calls solve_right. Thus you only need to implement one version. And you should, because code duplication makes mistakes more likely and maintenance harder. I will change this when reviewing this, and then will wait for your approval.



---

archive/issue_events_081346.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2011-08-05T16:53:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7852#event-81346"
}
```



---

archive/issue_events_081347.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2011-08-05T16:53:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7852#event-81347"
}
```



---

archive/issue_comments_061224.json:
```json
{
    "body": "<a id='comment:10'>**Comment 10:**</a>\nI didn't touch the implementation of solve_right.  I changed my mind for the following simple reason. While the code is quite short and easy to check the documentation is very different (left replaced by right). So it seems quite impractical to duplicate it.\n\nWe should think about modifying the documentation so that it gets included in the reference manual. Also there is a pseudoregression in the code. Sage doesn't pretend it could solve equations with double dense matrices as right hand side. Scipy covers also this case, so we should open a new ticket for this.",
    "created_at": "2011-08-05T16:53:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-61224",
    "user": "https://github.com/sagetrac-mraum"
}
```

<a id='comment:10'>**Comment 10:**</a>
I didn't touch the implementation of solve_right.  I changed my mind for the following simple reason. While the code is quite short and easy to check the documentation is very different (left replaced by right). So it seems quite impractical to duplicate it.

We should think about modifying the documentation so that it gets included in the reference manual. Also there is a pseudoregression in the code. Sage doesn't pretend it could solve equations with double dense matrices as right hand side. Scipy covers also this case, so we should open a new ticket for this.



---

archive/issue_comments_061225.json:
```json
{
    "body": "**Reviewer:** Martin Raum",
    "created_at": "2011-08-05T16:53:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-61225",
    "user": "https://github.com/sagetrac-mraum"
}
```

**Reviewer:** Martin Raum



---

archive/issue_events_081348.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-11T13:10:28Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "milestone_number": null,
    "milestone_title": "sage-4.7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7852#event-81348"
}
```



---

archive/issue_events_081349.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-11T13:10:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "milestone_number": null,
    "milestone_title": "sage-4.7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7852#event-81349"
}
```



---

archive/issue_comments_061226.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -22,3 +22,8 @@\n This was evidently introduced by maybe Grout's \"Switch the RDF and CDF matrices to a numpy 1.2 backend; factor out common functionality to matrix_double_dense.pyx.\".\n \n Reported by Stephanie Dietzel\n+\n+---\n+\n+Apply [attachment:trac_7852-solve-linear-systems-CDF.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-solve-linear-systems-CDF.patch) to the Sage library.\n+\n``````\n",
    "created_at": "2011-09-08T16:32:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-61226",
    "user": "https://github.com/nexttime"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -22,3 +22,8 @@
 This was evidently introduced by maybe Grout's "Switch the RDF and CDF matrices to a numpy 1.2 backend; factor out common functionality to matrix_double_dense.pyx.".
 
 Reported by Stephanie Dietzel
+
+---
+
+Apply [attachment:trac_7852-solve-linear-systems-CDF.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-solve-linear-systems-CDF.patch) to the Sage library.
+
``````




---

archive/issue_events_081350.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-08T16:32:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "label": "https://github.com/sagemath/sage/labels/blocker",
    "label_color": "ff0000",
    "label_name": "blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7852#event-81350"
}
```



---

archive/issue_comments_061227.json:
```json
{
    "body": "**Merged:** sage-4.7.2.alpha3",
    "created_at": "2011-09-13T12:15:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-61227",
    "user": "https://github.com/nexttime"
}
```

**Merged:** sage-4.7.2.alpha3



---

archive/issue_events_081351.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-13T12:15:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7852#event-81351"
}
```



---

archive/issue_events_081352.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-13T12:15:21Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7852#event-81352"
}
```



---

archive/issue_comments_061228.json:
```json
{
    "body": "**Dependencies:** #11848",
    "created_at": "2011-09-26T01:10:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-61228",
    "user": "https://github.com/nexttime"
}
```

**Dependencies:** #11848



---

archive/issue_comments_061229.json:
```json
{
    "body": "**Attachment:** [trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch.gz)\n\nReviewer patch. Apply on top of main patch, which causes a signed zero on Itanium 2.",
    "created_at": "2011-09-26T01:22:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-61229",
    "user": "https://github.com/nexttime"
}
```

**Attachment:** [trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch.gz)

Reviewer patch. Apply on top of main patch, which causes a signed zero on Itanium 2.



---

archive/issue_comments_061230.json:
```json
{
    "body": "**Attachment:** [trac_7852-fix_noise_errors_in_polys.reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_polys.reviewer.patch.gz)\n\nReviewer patch. Apply on top of main patch, which causes doctests to fail on a couple of systems due to noisy zero terms.",
    "created_at": "2011-09-26T01:24:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-61230",
    "user": "https://github.com/nexttime"
}
```

**Attachment:** [trac_7852-fix_noise_errors_in_polys.reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_polys.reviewer.patch.gz)

Reviewer patch. Apply on top of main patch, which causes doctests to fail on a couple of systems due to noisy zero terms.



---

archive/issue_comments_061231.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -25,5 +25,9 @@\n \n ---\n \n-Apply [attachment:trac_7852-solve-linear-systems-CDF.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-solve-linear-systems-CDF.patch) to the Sage library.\n+Apply\n+1. [attachment:trac_7852-solve-linear-systems-CDF.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-solve-linear-systems-CDF.patch)\n+2. [attachment:trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch)\n+3. [attachment:trac_7852-fix_noise_errors_in_polys.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_polys.reviewer.patch)\n+to the Sage library.\n \n``````\n",
    "created_at": "2011-09-26T01:32:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-61231",
    "user": "https://github.com/nexttime"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -25,5 +25,9 @@
 
 ---
 
-Apply [attachment:trac_7852-solve-linear-systems-CDF.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-solve-linear-systems-CDF.patch) to the Sage library.
+Apply
+1. [attachment:trac_7852-solve-linear-systems-CDF.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-solve-linear-systems-CDF.patch)
+2. [attachment:trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch)
+3. [attachment:trac_7852-fix_noise_errors_in_polys.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_polys.reviewer.patch)
+to the Sage library.
 
``````




---

archive/issue_comments_061232.json:
```json
{
    "body": "<a id='comment:15'>**Comment 15:**</a>\nAttached two reviewer patches fixing doctest errors on some systems.\n\nThird patch to fix doctest errors in `sage/matrix/matrix_double_dense.pyx` coming soon.\n\nThe patch to the preparser examples requires #11848.",
    "created_at": "2011-09-26T01:32:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-61232",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:15'>**Comment 15:**</a>
Attached two reviewer patches fixing doctest errors on some systems.

Third patch to fix doctest errors in `sage/matrix/matrix_double_dense.pyx` coming soon.

The patch to the preparser examples requires #11848.



---

archive/issue_comments_061233.json:
```json
{
    "body": "**Changing reviewer** from \"Martin Raum\" to \"Martin Raum, Leif Leonhardy\".",
    "created_at": "2011-09-26T01:32:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-61233",
    "user": "https://github.com/nexttime"
}
```

**Changing reviewer** from "Martin Raum" to "Martin Raum, Leif Leonhardy".



---

archive/issue_comments_061234.json:
```json
{
    "body": "Reviewer patch. Apply on top of main patch, which causes another doctest to fail on a couple of systems due to a noisy zero in a vector result.",
    "created_at": "2011-09-26T02:41:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-61234",
    "user": "https://github.com/nexttime"
}
```

Reviewer patch. Apply on top of main patch, which causes another doctest to fail on a couple of systems due to a noisy zero in a vector result.



---

archive/issue_comments_061235.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -29,5 +29,6 @@\n 1. [attachment:trac_7852-solve-linear-systems-CDF.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-solve-linear-systems-CDF.patch)\n 2. [attachment:trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch)\n 3. [attachment:trac_7852-fix_noise_errors_in_polys.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_polys.reviewer.patch)\n+4. [attachment:trac_7852-fix_noisy_zero_error_in_matrix_double_dense.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noisy_zero_error_in_matrix_double_dense.reviewer.patch)\n to the Sage library.\n \n``````\n",
    "created_at": "2011-09-26T02:46:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-61235",
    "user": "https://github.com/nexttime"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -29,5 +29,6 @@
 1. [attachment:trac_7852-solve-linear-systems-CDF.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-solve-linear-systems-CDF.patch)
 2. [attachment:trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch)
 3. [attachment:trac_7852-fix_noise_errors_in_polys.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_polys.reviewer.patch)
+4. [attachment:trac_7852-fix_noisy_zero_error_in_matrix_double_dense.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noisy_zero_error_in_matrix_double_dense.reviewer.patch)
 to the Sage library.
 
``````




---

archive/issue_comments_061236.json:
```json
{
    "body": "<a id='comment:16'>**Comment 16:**</a>\n**Attachment:** [trac_7852-fix_noisy_zero_error_in_matrix_double_dense.reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noisy_zero_error_in_matrix_double_dense.reviewer.patch.gz)\n\nThird reviewer patch (fixing a doctest error in `matrix_double_dense.pyx`) is up.",
    "created_at": "2011-09-26T02:46:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-61236",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:16'>**Comment 16:**</a>
**Attachment:** [trac_7852-fix_noisy_zero_error_in_matrix_double_dense.reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noisy_zero_error_in_matrix_double_dense.reviewer.patch.gz)

Third reviewer patch (fixing a doctest error in `matrix_double_dense.pyx`) is up.



---

archive/issue_comments_061237.json:
```json
{
    "body": "<a id='comment:17'>**Comment 17:**</a>\nThe three reviewer patches apply, build and pass their tests once #11848 is applied to a recent alpha3 prerelease that already has the main patch.  Currently passes all tests in `sage/matrix` but will run full tests overnight.\n\nThis has a positive review from me based on the reviewer contributions, but is marked as closed right now anyway.  I'll only retreat if something unexpected happens overnight.\n\nLeif - thank-you very much for getting these noisy tests cleaned up.\n\nRob",
    "created_at": "2011-09-26T03:59:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-61237",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:17'>**Comment 17:**</a>
The three reviewer patches apply, build and pass their tests once #11848 is applied to a recent alpha3 prerelease that already has the main patch.  Currently passes all tests in `sage/matrix` but will run full tests overnight.

This has a positive review from me based on the reviewer contributions, but is marked as closed right now anyway.  I'll only retreat if something unexpected happens overnight.

Leif - thank-you very much for getting these noisy tests cleaned up.

Rob



---

archive/issue_comments_061238.json:
```json
{
    "body": "**Changing author** from \"Rob Beezer\" to \"Rob Beezer,  Leif Leonhardy\".",
    "created_at": "2011-09-26T03:59:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-61238",
    "user": "https://github.com/rbeezer"
}
```

**Changing author** from "Rob Beezer" to "Rob Beezer,  Leif Leonhardy".



---

archive/issue_comments_061239.json:
```json
{
    "body": "**Changing reviewer** from \"Martin Raum, Leif Leonhardy\" to \"Martin Raum, Leif Leonhardy, Rob Beezer\".",
    "created_at": "2011-09-26T03:59:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-61239",
    "user": "https://github.com/rbeezer"
}
```

**Changing reviewer** from "Martin Raum, Leif Leonhardy" to "Martin Raum, Leif Leonhardy, Rob Beezer".



---

archive/issue_comments_061240.json:
```json
{
    "body": "Reviewer patch. Slightly adjust threshold for noisy zero terms in polynomials, needed on MacOS X 10.6 x86_64 with GCC 4.2.1. Apply on top of other patches (i.e., the other reviewer patch to `polynomial_element.pyx`).",
    "created_at": "2011-09-27T21:46:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-61240",
    "user": "https://github.com/nexttime"
}
```

Reviewer patch. Slightly adjust threshold for noisy zero terms in polynomials, needed on MacOS X 10.6 x86_64 with GCC 4.2.1. Apply on top of other patches (i.e., the other reviewer patch to `polynomial_element.pyx`).



---

archive/issue_comments_061241.json:
```json
{
    "body": "<a id='comment:18'>**Comment 18:**</a>\n**Attachment:** [trac_7852-adjust_noisy_zero_term_threshold_for_polys.reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket7852/trac_7852-adjust_noisy_zero_term_threshold_for_polys.reviewer.patch.gz)\n\nI've attached yet another patch slightly increasing one epsilon, since one doctest still failed on MacOS X 10.6 (due to almost zero terms in a polynomial).",
    "created_at": "2011-09-27T21:52:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-61241",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:18'>**Comment 18:**</a>
**Attachment:** [trac_7852-adjust_noisy_zero_term_threshold_for_polys.reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket7852/trac_7852-adjust_noisy_zero_term_threshold_for_polys.reviewer.patch.gz)

I've attached yet another patch slightly increasing one epsilon, since one doctest still failed on MacOS X 10.6 (due to almost zero terms in a polynomial).



---

archive/issue_comments_061242.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -30,5 +30,6 @@\n 2. [attachment:trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch)\n 3. [attachment:trac_7852-fix_noise_errors_in_polys.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_polys.reviewer.patch)\n 4. [attachment:trac_7852-fix_noisy_zero_error_in_matrix_double_dense.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noisy_zero_error_in_matrix_double_dense.reviewer.patch)\n+5. [attachment:trac_7852-adjust_noisy_zero_term_threshold_for_polys.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-adjust_noisy_zero_term_threshold_for_polys.reviewer.patch)\n to the Sage library.\n \n``````\n",
    "created_at": "2011-09-27T21:52:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-61242",
    "user": "https://github.com/nexttime"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -30,5 +30,6 @@
 2. [attachment:trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch)
 3. [attachment:trac_7852-fix_noise_errors_in_polys.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_polys.reviewer.patch)
 4. [attachment:trac_7852-fix_noisy_zero_error_in_matrix_double_dense.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noisy_zero_error_in_matrix_double_dense.reviewer.patch)
+5. [attachment:trac_7852-adjust_noisy_zero_term_threshold_for_polys.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-adjust_noisy_zero_term_threshold_for_polys.reviewer.patch)
 to the Sage library.
 
``````




---

archive/issue_comments_061243.json:
```json
{
    "body": "<a id='comment:19'>**Comment 19:**</a>\nYes, I meant to bring this up in the flurry of noisy doctest fixes.  I have taken to not cutting it too fine on the zeros.  For example, if I get a \"zero\" on the order of `10^-16`, then I have taken to clipping zeros at `10^-14`.  There seems to be too much variability across systems, so if you cut it too close, then some system is eventually going to complain, it seems.\n\nThe latest patch looks good and applies and builds find, passing all tests in `sage/ring/polynomial` on the alpha3-prerelease I picked up about 10 days ago.  So ready to go, again.",
    "created_at": "2011-09-28T14:44:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-61243",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:19'>**Comment 19:**</a>
Yes, I meant to bring this up in the flurry of noisy doctest fixes.  I have taken to not cutting it too fine on the zeros.  For example, if I get a "zero" on the order of `10^-16`, then I have taken to clipping zeros at `10^-14`.  There seems to be too much variability across systems, so if you cut it too close, then some system is eventually going to complain, it seems.

The latest patch looks good and applies and builds find, passing all tests in `sage/ring/polynomial` on the alpha3-prerelease I picked up about 10 days ago.  So ready to go, again.



---

archive/issue_comments_061244.json:
```json
{
    "body": "<a id='comment:20'>**Comment 20:**</a>\nFollow-up ticket further increasing the threshold for noisy zero terms in polynomials (from 2.5e-15, needed for `bsd.math`, to 2.7e-15) for MacOS X 10.4 PPC once more: #11901",
    "created_at": "2011-10-07T17:16:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-61244",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:20'>**Comment 20:**</a>
Follow-up ticket further increasing the threshold for noisy zero terms in polynomials (from 2.5e-15, needed for `bsd.math`, to 2.7e-15) for MacOS X 10.4 PPC once more: #11901
