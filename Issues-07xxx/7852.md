# Issue 7852: solve_left for RDF matrices is WRONG

archive/issues_007852.json:
```json
{
    "assignees": [
        "https://github.com/williamstein"
    ],
    "body": "Observe the docstring for solve_left for an RDF matrix:\n\n```\nsage: A = random_matrix(RDF,3)\nsage: A.solve_left?\nSolve the equation A*x = b, where\n        \n        EXAMPLES:\n            sage: A = matrix(RDF, 3,3, [1,2,5,7.6,2.3,1,1,2,-1]); A\n            [ 1.0  2.0  5.0]\n            [ 7.6  2.3  1.0]\n            [ 1.0  2.0 -1.0]\n            sage: b = vector(RDF,[1,2,3])\n            sage: x = A.solve_left(b); x\n            (-0.113695090439, 1.39018087855, -0.333333333333)\n            sage: A*x\n            (1.0, 2.0, 3.0)\n```\n\nBut that is solve_right. \n\nThis was evidently introduced by maybe Grout's \"Switch the RDF and CDF matrices to a numpy 1.2 backend; factor out common functionality to matrix_double_dense.pyx.\".\n\nReported by Stephanie Dietzel\n\n---\n\nApply\n1. [attachment: trac_7852-solve-linear-systems-CDF.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-solve-linear-systems-CDF.patch.gz)\n2. [attachment: trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch.gz)\n3. [attachment: trac_7852-fix_noise_errors_in_polys.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_polys.reviewer.patch.gz)\n4. [attachment: trac_7852-fix_noisy_zero_error_in_matrix_double_dense.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noisy_zero_error_in_matrix_double_dense.reviewer.patch.gz)\n5. [attachment: trac_7852-adjust_noisy_zero_term_threshold_for_polys.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-adjust_noisy_zero_term_threshold_for_polys.reviewer.patch.gz)\nto the Sage library.\n\n\nDepends on #11848\n\nCC:  @jasongrout\n\nComponent: **linear algebra**\n\nAuthor: **Rob Beezer,  Leif Leonhardy**\n\nReviewer: **Martin Raum, Leif Leonhardy, Rob Beezer**\n\nMerged: **sage-4.7.2.alpha3**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/7852_\n\n",
    "closed_at": "2011-09-13T12:15:21Z",
    "created_at": "2010-01-05T21:40:18Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20linear%20algebra",
        "https://github.com/sagemath/sage/labels/p%3A%20blocker%20/%201",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.7.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "solve_left for RDF matrices is WRONG",
    "type": "issue",
    "updated_at": "2011-10-07T17:16:28Z",
    "url": "https://github.com/sagemath/sage/issues/7852",
    "user": "https://github.com/williamstein"
}
```
Observe the docstring for solve_left for an RDF matrix:

```
sage: A = random_matrix(RDF,3)
sage: A.solve_left?
Solve the equation A*x = b, where
        
        EXAMPLES:
            sage: A = matrix(RDF, 3,3, [1,2,5,7.6,2.3,1,1,2,-1]); A
            [ 1.0  2.0  5.0]
            [ 7.6  2.3  1.0]
            [ 1.0  2.0 -1.0]
            sage: b = vector(RDF,[1,2,3])
            sage: x = A.solve_left(b); x
            (-0.113695090439, 1.39018087855, -0.333333333333)
            sage: A*x
            (1.0, 2.0, 3.0)
```

But that is solve_right. 

This was evidently introduced by maybe Grout's "Switch the RDF and CDF matrices to a numpy 1.2 backend; factor out common functionality to matrix_double_dense.pyx.".

Reported by Stephanie Dietzel

---

Apply
1. [attachment: trac_7852-solve-linear-systems-CDF.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-solve-linear-systems-CDF.patch.gz)
2. [attachment: trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch.gz)
3. [attachment: trac_7852-fix_noise_errors_in_polys.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_polys.reviewer.patch.gz)
4. [attachment: trac_7852-fix_noisy_zero_error_in_matrix_double_dense.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noisy_zero_error_in_matrix_double_dense.reviewer.patch.gz)
5. [attachment: trac_7852-adjust_noisy_zero_term_threshold_for_polys.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-adjust_noisy_zero_term_threshold_for_polys.reviewer.patch.gz)
to the Sage library.


Depends on #11848

CC:  @jasongrout

Component: **linear algebra**

Author: **Rob Beezer,  Leif Leonhardy**

Reviewer: **Martin Raum, Leif Leonhardy, Rob Beezer**

Merged: **sage-4.7.2.alpha3**

_Issue created by migration from https://trac.sagemath.org/ticket/7852_





---

archive/issue_events_096423.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-01-05T21:40:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "milestone_number": null,
    "milestone_title": "sage-4.7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7852#event-96423"
}
```



---

archive/issue_events_096424.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-01-05T21:40:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20linear%20algebra",
    "label_color": "0000ff",
    "label_name": "c: linear algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7852#event-96424"
}
```



---

archive/issue_events_096425.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-01-05T21:40:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7852#event-96425"
}
```



---

archive/issue_events_096426.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-01-05T21:40:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7852#event-96426"
}
```



---

archive/issue_events_096427.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-01-05T21:40:18Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "subject": "https://github.com/williamstein",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7852#event-96427"
}
```



---

archive/issue_comments_059545.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThis might be related to #4932.  I'll put this on my list for the bug day coming up.",
    "created_at": "2010-01-05T22:16:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-59545",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:1" align="right">comment:1</div>

This might be related to #4932.  I'll put this on my list for the bug day coming up.



---

archive/issue_comments_059546.json:
```json
{
    "body": "Attachment: **[trac_7852-solve-linear-systems-CDF.patch.gz](https://github.com/sagemath/sage/files/ticket7852/trac_7852-solve-linear-systems-CDF.patch.gz)**",
    "created_at": "2011-02-24T22:33:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-59546",
    "user": "https://github.com/rbeezer"
}
```

Attachment: **[trac_7852-solve-linear-systems-CDF.patch.gz](https://github.com/sagemath/sage/files/ticket7852/trac_7852-solve-linear-systems-CDF.patch.gz)**



---

archive/issue_comments_059547.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nPatch corrects the naming problem, and creates upgraded ``solve_left`` and ``solve_right``.\n\nThis required just a few touch-ups where the name had been wrong, or the improved accuracy changed results.",
    "created_at": "2011-02-24T22:36:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-59547",
    "user": "https://github.com/rbeezer"
}
```

<div id="comment:2" align="right">comment:2</div>

Patch corrects the naming problem, and creates upgraded ``solve_left`` and ``solve_right``.

This required just a few touch-ups where the name had been wrong, or the improved accuracy changed results.



---

archive/issue_events_096428.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-02-24T22:36:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7852#event-96428"
}
```



---

archive/issue_comments_059548.json:
```json
{
    "body": "Author: **Rob Beezer**",
    "created_at": "2011-02-24T22:47:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-59548",
    "user": "https://github.com/rbeezer"
}
```

Author: **Rob Beezer**



---

archive/issue_comments_059549.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nWithout the patch, \"solve_right\" seems to work for nonsquare matrices over RDF, I guess because it's using the generic \"solve_right\" method from matrix2.pyx.  With the patch, it looks like this won't work any more; is that right?  Is there a good reason for not allowing square matrices?  We could instead add a method `_solve_right_nonsingular_square` to matrix_double_dense.pyx, and then I think this should be called by the generic solve_right method.\n\nFor \"solve_left\", could we just remove the version from matrix_double_dense.pyx altogether, and just use the generic version?",
    "created_at": "2011-03-21T19:16:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-59549",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:4" align="right">comment:4</div>

Without the patch, "solve_right" seems to work for nonsquare matrices over RDF, I guess because it's using the generic "solve_right" method from matrix2.pyx.  With the patch, it looks like this won't work any more; is that right?  Is there a good reason for not allowing square matrices?  We could instead add a method `_solve_right_nonsingular_square` to matrix_double_dense.pyx, and then I think this should be called by the generic solve_right method.

For "solve_left", could we just remove the version from matrix_double_dense.pyx altogether, and just use the generic version?



---

archive/issue_comments_059550.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@jhpalmieri](#comment:4):\n\nYes, there is some tension in handling inexact matrices with routines designed for exact matrices (which is the root issue here, I believe).  `NumPy/SciPy` just does not do certain things, such as computing a rank.\n\nI'm hoping to get some guidance from the `NumPy` folks here at Sage Days 29 right now and we can chat some more.",
    "created_at": "2011-03-21T21:04:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-59550",
    "user": "https://github.com/rbeezer"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@jhpalmieri](#comment:4):

Yes, there is some tension in handling inexact matrices with routines designed for exact matrices (which is the root issue here, I believe).  `NumPy/SciPy` just does not do certain things, such as computing a rank.

I'm hoping to get some guidance from the `NumPy` folks here at Sage Days 29 right now and we can chat some more.



---

archive/issue_events_096429.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2011-03-25T03:47:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7852#event-96429"
}
```



---

archive/issue_events_096430.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2011-03-25T03:47:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7852#event-96430"
}
```



---

archive/issue_comments_059551.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\n1) You can use svd to first get a square matrix that you can use to solve the system of linear equations.\n2) Why do you copy the code for left and right solve. There is a generic fallback in matrix2.pyx. If you want to replace the docstring for this class, can't you do just that?",
    "created_at": "2011-03-25T03:47:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-59551",
    "user": "https://github.com/sagetrac-mraum"
}
```

<div id="comment:6" align="right">comment:6</div>

1) You can use svd to first get a square matrix that you can use to solve the system of linear equations.
2) Why do you copy the code for left and right solve. There is a generic fallback in matrix2.pyx. If you want to replace the docstring for this class, can't you do just that?



---

archive/issue_comments_059552.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nWe could use a direct call to `SciPy` solve for square nonsingular and analyze/exploit the SVD for nonsingular/rectangular.",
    "created_at": "2011-03-25T17:50:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-59552",
    "user": "https://github.com/rbeezer"
}
```

<div id="comment:7" align="right">comment:7</div>

We could use a direct call to `SciPy` solve for square nonsingular and analyze/exploit the SVD for nonsingular/rectangular.



---

archive/issue_events_096431.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-07-18T04:48:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7852#event-96431"
}
```



---

archive/issue_events_096432.json:
```json
{
    "actor": "https://github.com/rbeezer",
    "created_at": "2011-07-18T04:48:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7852#event-96432"
}
```



---

archive/issue_comments_059553.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nFinally getting back to this one.\n\n1.  solve_left and solve_right are confused at the moment - I think this is important to fix.\n\n2.  The code is different, in part because the error messages are explicit, naming rows and columns when sizes do not match.\n\n3.  The longer I think about it, the more I think we should *never* be feeding floating-point matrices into exact routines.  We should expose the ScyPy/NumPy/LAPACK routines as much as possible and not pretend the exact routines are going to give reasonable answers as a \"fallback.\"\n\n4.  I'm happy to try to get solutions to systems with non-square coefficient matrices with floating-point entries, but despite a lot of thought and reading, I'm not convinced of the right approach.  In any event, I'd like to fix the problem at hand, and do the non-square somewhere else.\n\n5.  I am going to set this to \"needs review\" but I'm happy to entertain more discussion - I'll just need convincing.\n\nRob",
    "created_at": "2011-07-18T04:48:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-59553",
    "user": "https://github.com/rbeezer"
}
```

<div id="comment:8" align="right">comment:8</div>

Finally getting back to this one.

1.  solve_left and solve_right are confused at the moment - I think this is important to fix.

2.  The code is different, in part because the error messages are explicit, naming rows and columns when sizes do not match.

3.  The longer I think about it, the more I think we should *never* be feeding floating-point matrices into exact routines.  We should expose the ScyPy/NumPy/LAPACK routines as much as possible and not pretend the exact routines are going to give reasonable answers as a "fallback."

4.  I'm happy to try to get solutions to systems with non-square coefficient matrices with floating-point entries, but despite a lot of thought and reading, I'm not convinced of the right approach.  In any event, I'd like to fix the problem at hand, and do the non-square somewhere else.

5.  I am going to set this to "needs review" but I'm happy to entertain more discussion - I'll just need convincing.

Rob



---

archive/issue_comments_059554.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nWhat I was talking about when I mentioned the fallback is a piece of generic code for solve_left that calls solve_right. Thus you only need to implement one version. And you should, because code duplication makes mistakes more likely and maintenance harder. I will change this when reviewing this, and then will wait for your approval.",
    "created_at": "2011-08-04T10:28:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-59554",
    "user": "https://github.com/sagetrac-mraum"
}
```

<div id="comment:9" align="right">comment:9</div>

What I was talking about when I mentioned the fallback is a piece of generic code for solve_left that calls solve_right. Thus you only need to implement one version. And you should, because code duplication makes mistakes more likely and maintenance harder. I will change this when reviewing this, and then will wait for your approval.



---

archive/issue_events_096433.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2011-08-05T16:53:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7852#event-96433"
}
```



---

archive/issue_events_096434.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2011-08-05T16:53:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7852#event-96434"
}
```



---

archive/issue_comments_059555.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI didn't touch the implementation of solve_right.  I changed my mind for the following simple reason. While the code is quite short and easy to check the documentation is very different (left replaced by right). So it seems quite impractical to duplicate it.\n\nWe should think about modifying the documentation so that it gets included in the reference manual. Also there is a pseudoregression in the code. Sage doesn't pretend it could solve equations with double dense matrices as right hand side. Scipy covers also this case, so we should open a new ticket for this.",
    "created_at": "2011-08-05T16:53:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-59555",
    "user": "https://github.com/sagetrac-mraum"
}
```

<div id="comment:10" align="right">comment:10</div>

I didn't touch the implementation of solve_right.  I changed my mind for the following simple reason. While the code is quite short and easy to check the documentation is very different (left replaced by right). So it seems quite impractical to duplicate it.

We should think about modifying the documentation so that it gets included in the reference manual. Also there is a pseudoregression in the code. Sage doesn't pretend it could solve equations with double dense matrices as right hand side. Scipy covers also this case, so we should open a new ticket for this.



---

archive/issue_comments_059556.json:
```json
{
    "body": "Reviewer: **Martin Raum**",
    "created_at": "2011-08-05T16:53:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-59556",
    "user": "https://github.com/sagetrac-mraum"
}
```

Reviewer: **Martin Raum**



---

archive/issue_events_096435.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-11T13:10:28Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "milestone_number": null,
    "milestone_title": "sage-4.7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7852#event-96435"
}
```



---

archive/issue_events_096436.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-11T13:10:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "milestone_number": null,
    "milestone_title": "sage-4.7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7852#event-96436"
}
```



---

archive/issue_comments_059557.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -22,3 +22,8 @@\n This was evidently introduced by maybe Grout's \"Switch the RDF and CDF matrices to a numpy 1.2 backend; factor out common functionality to matrix_double_dense.pyx.\".\n \n Reported by Stephanie Dietzel\n+\n+---\n+\n+Apply [attachment: trac_7852-solve-linear-systems-CDF.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-solve-linear-systems-CDF.patch.gz) to the Sage library.\n+\n``````\n",
    "created_at": "2011-09-08T16:32:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-59557",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -22,3 +22,8 @@
 This was evidently introduced by maybe Grout's "Switch the RDF and CDF matrices to a numpy 1.2 backend; factor out common functionality to matrix_double_dense.pyx.".
 
 Reported by Stephanie Dietzel
+
+---
+
+Apply [attachment: trac_7852-solve-linear-systems-CDF.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-solve-linear-systems-CDF.patch.gz) to the Sage library.
+
``````




---

archive/issue_events_096437.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-08T16:32:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7852#event-96437"
}
```



---

archive/issue_events_096438.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-08T16:32:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20blocker%20/%201",
    "label_color": "ff0000",
    "label_name": "p: blocker / 1",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7852#event-96438"
}
```



---

archive/issue_comments_059558.json:
```json
{
    "body": "Merged: **sage-4.7.2.alpha3**",
    "created_at": "2011-09-13T12:15:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-59558",
    "user": "https://github.com/nexttime"
}
```

Merged: **sage-4.7.2.alpha3**



---

archive/issue_events_096439.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-13T12:15:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7852#event-96439"
}
```



---

archive/issue_events_096440.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2011-09-13T12:15:21Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7852#event-96440"
}
```



---

archive/issue_comments_059559.json:
```json
{
    "body": "Dependencies: **#11848**",
    "created_at": "2011-09-26T01:10:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-59559",
    "user": "https://github.com/nexttime"
}
```

Dependencies: **#11848**



---

archive/issue_comments_059560.json:
```json
{
    "body": "Attachment: **[trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch.gz)**\n\nReviewer patch. Apply on top of main patch, which causes a signed zero on Itanium 2.",
    "created_at": "2011-09-26T01:22:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-59560",
    "user": "https://github.com/nexttime"
}
```

Attachment: **[trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch.gz)**

Reviewer patch. Apply on top of main patch, which causes a signed zero on Itanium 2.



---

archive/issue_comments_059561.json:
```json
{
    "body": "Attachment: **[trac_7852-fix_noise_errors_in_polys.reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_polys.reviewer.patch.gz)**\n\nReviewer patch. Apply on top of main patch, which causes doctests to fail on a couple of systems due to noisy zero terms.",
    "created_at": "2011-09-26T01:24:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-59561",
    "user": "https://github.com/nexttime"
}
```

Attachment: **[trac_7852-fix_noise_errors_in_polys.reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_polys.reviewer.patch.gz)**

Reviewer patch. Apply on top of main patch, which causes doctests to fail on a couple of systems due to noisy zero terms.



---

archive/issue_comments_059562.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -25,5 +25,9 @@\n \n ---\n \n-Apply [attachment: trac_7852-solve-linear-systems-CDF.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-solve-linear-systems-CDF.patch.gz) to the Sage library.\n+Apply\n+1. [attachment: trac_7852-solve-linear-systems-CDF.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-solve-linear-systems-CDF.patch.gz)\n+2. [attachment: trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch.gz)\n+3. [attachment: trac_7852-fix_noise_errors_in_polys.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_polys.reviewer.patch.gz)\n+to the Sage library.\n \n``````\n",
    "created_at": "2011-09-26T01:32:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-59562",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -25,5 +25,9 @@
 
 ---
 
-Apply [attachment: trac_7852-solve-linear-systems-CDF.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-solve-linear-systems-CDF.patch.gz) to the Sage library.
+Apply
+1. [attachment: trac_7852-solve-linear-systems-CDF.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-solve-linear-systems-CDF.patch.gz)
+2. [attachment: trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch.gz)
+3. [attachment: trac_7852-fix_noise_errors_in_polys.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_polys.reviewer.patch.gz)
+to the Sage library.
 
``````




---

archive/issue_comments_059563.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nAttached two reviewer patches fixing doctest errors on some systems.\n\nThird patch to fix doctest errors in `sage/matrix/matrix_double_dense.pyx` coming soon.\n\nThe patch to the preparser examples requires #11848.",
    "created_at": "2011-09-26T01:32:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-59563",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:15" align="right">comment:15</div>

Attached two reviewer patches fixing doctest errors on some systems.

Third patch to fix doctest errors in `sage/matrix/matrix_double_dense.pyx` coming soon.

The patch to the preparser examples requires #11848.



---

archive/issue_comments_059564.json:
```json
{
    "body": "Changed reviewer from **Martin Raum** to **Martin Raum, Leif Leonhardy**",
    "created_at": "2011-09-26T01:32:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-59564",
    "user": "https://github.com/nexttime"
}
```

Changed reviewer from **Martin Raum** to **Martin Raum, Leif Leonhardy**



---

archive/issue_comments_059565.json:
```json
{
    "body": "Reviewer patch. Apply on top of main patch, which causes another doctest to fail on a couple of systems due to a noisy zero in a vector result.",
    "created_at": "2011-09-26T02:41:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-59565",
    "user": "https://github.com/nexttime"
}
```

Reviewer patch. Apply on top of main patch, which causes another doctest to fail on a couple of systems due to a noisy zero in a vector result.



---

archive/issue_comments_059566.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -29,5 +29,6 @@\n 1. [attachment: trac_7852-solve-linear-systems-CDF.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-solve-linear-systems-CDF.patch.gz)\n 2. [attachment: trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch.gz)\n 3. [attachment: trac_7852-fix_noise_errors_in_polys.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_polys.reviewer.patch.gz)\n+4. [attachment: trac_7852-fix_noisy_zero_error_in_matrix_double_dense.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noisy_zero_error_in_matrix_double_dense.reviewer.patch.gz)\n to the Sage library.\n \n``````\n",
    "created_at": "2011-09-26T02:46:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-59566",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -29,5 +29,6 @@
 1. [attachment: trac_7852-solve-linear-systems-CDF.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-solve-linear-systems-CDF.patch.gz)
 2. [attachment: trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch.gz)
 3. [attachment: trac_7852-fix_noise_errors_in_polys.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_polys.reviewer.patch.gz)
+4. [attachment: trac_7852-fix_noisy_zero_error_in_matrix_double_dense.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noisy_zero_error_in_matrix_double_dense.reviewer.patch.gz)
 to the Sage library.
 
``````




---

archive/issue_comments_059567.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nAttachment: **[trac_7852-fix_noisy_zero_error_in_matrix_double_dense.reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noisy_zero_error_in_matrix_double_dense.reviewer.patch.gz)**\n\nThird reviewer patch (fixing a doctest error in `matrix_double_dense.pyx`) is up.",
    "created_at": "2011-09-26T02:46:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-59567",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:16" align="right">comment:16</div>

Attachment: **[trac_7852-fix_noisy_zero_error_in_matrix_double_dense.reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noisy_zero_error_in_matrix_double_dense.reviewer.patch.gz)**

Third reviewer patch (fixing a doctest error in `matrix_double_dense.pyx`) is up.



---

archive/issue_comments_059568.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nThe three reviewer patches apply, build and pass their tests once #11848 is applied to a recent alpha3 prerelease that already has the main patch.  Currently passes all tests in `sage/matrix` but will run full tests overnight.\n\nThis has a positive review from me based on the reviewer contributions, but is marked as closed right now anyway.  I'll only retreat if something unexpected happens overnight.\n\nLeif - thank-you very much for getting these noisy tests cleaned up.\n\nRob",
    "created_at": "2011-09-26T03:59:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-59568",
    "user": "https://github.com/rbeezer"
}
```

<div id="comment:17" align="right">comment:17</div>

The three reviewer patches apply, build and pass their tests once #11848 is applied to a recent alpha3 prerelease that already has the main patch.  Currently passes all tests in `sage/matrix` but will run full tests overnight.

This has a positive review from me based on the reviewer contributions, but is marked as closed right now anyway.  I'll only retreat if something unexpected happens overnight.

Leif - thank-you very much for getting these noisy tests cleaned up.

Rob



---

archive/issue_comments_059569.json:
```json
{
    "body": "Changed author from **Rob Beezer** to **Rob Beezer,  Leif Leonhardy**",
    "created_at": "2011-09-26T03:59:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-59569",
    "user": "https://github.com/rbeezer"
}
```

Changed author from **Rob Beezer** to **Rob Beezer,  Leif Leonhardy**



---

archive/issue_comments_059570.json:
```json
{
    "body": "Changed reviewer from **Martin Raum, Leif Leonhardy** to **Martin Raum, Leif Leonhardy, Rob Beezer**",
    "created_at": "2011-09-26T03:59:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-59570",
    "user": "https://github.com/rbeezer"
}
```

Changed reviewer from **Martin Raum, Leif Leonhardy** to **Martin Raum, Leif Leonhardy, Rob Beezer**



---

archive/issue_comments_059571.json:
```json
{
    "body": "Reviewer patch. Slightly adjust threshold for noisy zero terms in polynomials, needed on MacOS X 10.6 x86_64 with GCC 4.2.1. Apply on top of other patches (i.e., the other reviewer patch to `polynomial_element.pyx`).",
    "created_at": "2011-09-27T21:46:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-59571",
    "user": "https://github.com/nexttime"
}
```

Reviewer patch. Slightly adjust threshold for noisy zero terms in polynomials, needed on MacOS X 10.6 x86_64 with GCC 4.2.1. Apply on top of other patches (i.e., the other reviewer patch to `polynomial_element.pyx`).



---

archive/issue_comments_059572.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nAttachment: **[trac_7852-adjust_noisy_zero_term_threshold_for_polys.reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket7852/trac_7852-adjust_noisy_zero_term_threshold_for_polys.reviewer.patch.gz)**\n\nI've attached yet another patch slightly increasing one epsilon, since one doctest still failed on MacOS X 10.6 (due to almost zero terms in a polynomial).",
    "created_at": "2011-09-27T21:52:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-59572",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:18" align="right">comment:18</div>

Attachment: **[trac_7852-adjust_noisy_zero_term_threshold_for_polys.reviewer.patch.gz](https://github.com/sagemath/sage/files/ticket7852/trac_7852-adjust_noisy_zero_term_threshold_for_polys.reviewer.patch.gz)**

I've attached yet another patch slightly increasing one epsilon, since one doctest still failed on MacOS X 10.6 (due to almost zero terms in a polynomial).



---

archive/issue_comments_059573.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -30,5 +30,6 @@\n 2. [attachment: trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch.gz)\n 3. [attachment: trac_7852-fix_noise_errors_in_polys.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_polys.reviewer.patch.gz)\n 4. [attachment: trac_7852-fix_noisy_zero_error_in_matrix_double_dense.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noisy_zero_error_in_matrix_double_dense.reviewer.patch.gz)\n+5. [attachment: trac_7852-adjust_noisy_zero_term_threshold_for_polys.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-adjust_noisy_zero_term_threshold_for_polys.reviewer.patch.gz)\n to the Sage library.\n \n``````\n",
    "created_at": "2011-09-27T21:52:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-59573",
    "user": "https://github.com/nexttime"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -30,5 +30,6 @@
 2. [attachment: trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_preparser_examples.reviewer.patch.gz)
 3. [attachment: trac_7852-fix_noise_errors_in_polys.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noise_errors_in_polys.reviewer.patch.gz)
 4. [attachment: trac_7852-fix_noisy_zero_error_in_matrix_double_dense.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-fix_noisy_zero_error_in_matrix_double_dense.reviewer.patch.gz)
+5. [attachment: trac_7852-adjust_noisy_zero_term_threshold_for_polys.reviewer.patch](https://github.com/sagemath/sage/files/ticket7852/trac_7852-adjust_noisy_zero_term_threshold_for_polys.reviewer.patch.gz)
 to the Sage library.
 
``````




---

archive/issue_comments_059574.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nYes, I meant to bring this up in the flurry of noisy doctest fixes.  I have taken to not cutting it too fine on the zeros.  For example, if I get a \"zero\" on the order of `10^-16`, then I have taken to clipping zeros at `10^-14`.  There seems to be too much variability across systems, so if you cut it too close, then some system is eventually going to complain, it seems.\n\nThe latest patch looks good and applies and builds find, passing all tests in `sage/ring/polynomial` on the alpha3-prerelease I picked up about 10 days ago.  So ready to go, again.",
    "created_at": "2011-09-28T14:44:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-59574",
    "user": "https://github.com/rbeezer"
}
```

<div id="comment:19" align="right">comment:19</div>

Yes, I meant to bring this up in the flurry of noisy doctest fixes.  I have taken to not cutting it too fine on the zeros.  For example, if I get a "zero" on the order of `10^-16`, then I have taken to clipping zeros at `10^-14`.  There seems to be too much variability across systems, so if you cut it too close, then some system is eventually going to complain, it seems.

The latest patch looks good and applies and builds find, passing all tests in `sage/ring/polynomial` on the alpha3-prerelease I picked up about 10 days ago.  So ready to go, again.



---

archive/issue_comments_059575.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nFollow-up ticket further increasing the threshold for noisy zero terms in polynomials (from 2.5e-15, needed for `bsd.math`, to 2.7e-15) for MacOS X 10.4 PPC once more: #11901",
    "created_at": "2011-10-07T17:16:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7852#issuecomment-59575",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:20" align="right">comment:20</div>

Follow-up ticket further increasing the threshold for noisy zero terms in polynomials (from 2.5e-15, needed for `bsd.math`, to 2.7e-15) for MacOS X 10.4 PPC once more: #11901
