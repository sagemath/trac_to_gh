# Issue 7870: dozens of failures in magma optional test suite on skynet (eno) with sage-4.3

archive/issues_007870.json:
```json
{
    "assignees": [],
    "body": "I ran the magma optional test suite on skynet (eno):\n\n```\n./sage -t --only_optional=magma devel/sage/sage > magma.out&\n```\n\nAnd the failures are:\n\n```\n        sage -t --only_optional=magma \"devel/sage/sage/rings/polynomial/pbori.pyx\"\n        sage -t --only_optional=magma \"devel/sage/sage/rings/polynomial/multi_polynomial_ring_generic.pyx\"\n        sage -t --only_optional=magma \"devel/sage/sage/rings/polynomial/term_order.py\"\n        sage -t --only_optional=magma \"devel/sage/sage/rings/polynomial/multi_polynomial_ideal.py\"\n        sage -t --only_optional=magma \"devel/sage/sage/crypto/mq/mpolynomialsystem.py\"\n        sage -t --only_optional=magma \"devel/sage/sage/schemes/hyperelliptic_curves/hyperelliptic_g2_generic.py\"\n        sage -t --only_optional=magma \"devel/sage/sage/symbolic/expression.pyx\"\nTotal time for all tests: 364.0 seconds\n```\n\n**Apply:**\n1. [attachment: trac-7870-magma-doctest-review3.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review3.patch.gz)\n2. [attachment: trac-7870-magma-doctest-review4.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review4.patch.gz)\n\nAssignee: **@JohnCremona**\n\nKeywords: **Magma**\n\nAuthor: **William Stein, John Cremona**\n\nReviewer: **Martin Raum, John Cremona, Jeroen Demeyer**\n\nMerged: **sage-4.7.alpha2**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/7870_\n\n",
    "closed_at": "2011-03-18T13:42:36Z",
    "created_at": "2010-01-07T20:51:18Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20interfaces",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "dozens of failures in magma optional test suite on skynet (eno) with sage-4.3",
    "type": "issue",
    "updated_at": "2011-03-18T13:42:36Z",
    "url": "https://github.com/sagemath/sage/issues/7870",
    "user": "https://github.com/williamstein"
}
```
I ran the magma optional test suite on skynet (eno):

```
./sage -t --only_optional=magma devel/sage/sage > magma.out&
```

And the failures are:

```
        sage -t --only_optional=magma "devel/sage/sage/rings/polynomial/pbori.pyx"
        sage -t --only_optional=magma "devel/sage/sage/rings/polynomial/multi_polynomial_ring_generic.pyx"
        sage -t --only_optional=magma "devel/sage/sage/rings/polynomial/term_order.py"
        sage -t --only_optional=magma "devel/sage/sage/rings/polynomial/multi_polynomial_ideal.py"
        sage -t --only_optional=magma "devel/sage/sage/crypto/mq/mpolynomialsystem.py"
        sage -t --only_optional=magma "devel/sage/sage/schemes/hyperelliptic_curves/hyperelliptic_g2_generic.py"
        sage -t --only_optional=magma "devel/sage/sage/symbolic/expression.pyx"
Total time for all tests: 364.0 seconds
```

**Apply:**
1. [attachment: trac-7870-magma-doctest-review3.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review3.patch.gz)
2. [attachment: trac-7870-magma-doctest-review4.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review4.patch.gz)

Assignee: **@JohnCremona**

Keywords: **Magma**

Author: **William Stein, John Cremona**

Reviewer: **Martin Raum, John Cremona, Jeroen Demeyer**

Merged: **sage-4.7.alpha2**

_Issue created by migration from https://trac.sagemath.org/ticket/7870_





---

archive/issue_events_086054.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-01-07T20:51:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "milestone_number": null,
    "milestone_title": "sage-4.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-86054"
}
```



---

archive/issue_events_086055.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-01-07T20:51:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20interfaces",
    "label_color": "0000ff",
    "label_name": "component: interfaces",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-86055"
}
```



---

archive/issue_events_086056.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-01-07T20:51:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-86056"
}
```



---

archive/issue_events_086057.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-01-07T20:51:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-86057"
}
```



---

archive/issue_comments_061460.json:
```json
{
    "body": "this is the output of running the test suite, showing the actual failures.",
    "created_at": "2010-01-07T20:51:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61460",
    "user": "https://github.com/williamstein"
}
```

this is the output of running the test suite, showing the actual failures.



---

archive/issue_comments_061461.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nAttachment: **[magma.out.gz](https://github.com/sagemath/sage/files/ticket7870/magma.out.gz)**\n\nI tested again using the new magma V2.16-7 with sage-4.3.5. \n\n```\n[wstein@eno sage-4.3.5]$ magma\nMagma V2.16-7     Tue Apr  6 2010 11:14:18 on eno      [Seed = 3125460604]\nType ? for help.  Type <Ctrl>-D to quit.\n```\nThere are now even more failures.  I've attached a new test log created using the following on eno:\n\n```\n./sage -tp 10 -only_optional=magma devel/sage/sage\n```",
    "created_at": "2010-04-06T15:15:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61461",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:1'>Comment 1:</a>
Attachment: **[magma.out.gz](https://github.com/sagemath/sage/files/ticket7870/magma.out.gz)**

I tested again using the new magma V2.16-7 with sage-4.3.5. 

```
[wstein@eno sage-4.3.5]$ magma
Magma V2.16-7     Tue Apr  6 2010 11:14:18 on eno      [Seed = 3125460604]
Type ? for help.  Type <Ctrl>-D to quit.
```
There are now even more failures.  I've attached a new test log created using the following on eno:

```
./sage -tp 10 -only_optional=magma devel/sage/sage
```



---

archive/issue_comments_061462.json:
```json
{
    "body": "it got much worse!",
    "created_at": "2010-04-06T15:16:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61462",
    "user": "https://github.com/williamstein"
}
```

it got much worse!



---

archive/issue_comments_061463.json:
```json
{
    "body": "Attachment: **[magma-sage-4.3.5.out.gz](https://github.com/sagemath/sage/files/ticket7870/magma-sage-4.3.5.out.gz)**\n\nAttachment: **[trac_7870.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac_7870.patch.gz)**\n\nThis fixes all the doctest issues on eno with magma V2.16-7",
    "created_at": "2010-04-06T16:20:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61463",
    "user": "https://github.com/williamstein"
}
```

Attachment: **[magma-sage-4.3.5.out.gz](https://github.com/sagemath/sage/files/ticket7870/magma-sage-4.3.5.out.gz)**

Attachment: **[trac_7870.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac_7870.patch.gz)**

This fixes all the doctest issues on eno with magma V2.16-7



---

archive/issue_events_086058.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-04-06T16:21:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-86058"
}
```



---

archive/issue_comments_061464.json:
```json
{
    "body": "Changed assignee from **@williamstein** to **@JohnCremona**",
    "created_at": "2010-04-06T16:33:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61464",
    "user": "https://github.com/JohnCremona"
}
```

Changed assignee from **@williamstein** to **@JohnCremona**



---

archive/issue_comments_061465.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nI am testing this now with magma V2.16-1 and will report back.  It will not be a clean result, since I already saw\n\n```\n\n**********************************************************************\nFile \"/storage/jec/sage-4.3.5/devel/sage-tests/sage/symbolic/expression.pyx\", line 499:\n    sage: magma(f)                         # optional - magma\nExpected:\n    sin(cos(x^2) + log(x))\nGot:\n    sin(log(x) + cos(x^2))\n```",
    "created_at": "2010-04-06T16:33:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61465",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:3'>Comment 3:</a>
I am testing this now with magma V2.16-1 and will report back.  It will not be a clean result, since I already saw

```

**********************************************************************
File "/storage/jec/sage-4.3.5/devel/sage-tests/sage/symbolic/expression.pyx", line 499:
    sage: magma(f)                         # optional - magma
Expected:
    sin(cos(x^2) + log(x))
Got:
    sin(log(x) + cos(x^2))
```



---

archive/issue_events_086059.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2010-04-06T16:36:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-86059"
}
```



---

archive/issue_events_086060.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2010-04-06T16:36:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-86060"
}
```



---

archive/issue_comments_061466.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nFull log is at http://www.warwick.ac.uk/staff/J.E.Cremona/magma_test.log .",
    "created_at": "2010-04-06T16:36:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61466",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:4'>Comment 4:</a>
Full log is at http://www.warwick.ac.uk/staff/J.E.Cremona/magma_test.log .



---

archive/issue_comments_061467.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nReplying to [@JohnCremona](#comment%3A4):\n> Full log is at http://www.warwick.ac.uk/staff/J.E.Cremona/magma_test.log .\n\nApologies -- it looks as if I did not apply the patch since the differences look exactly like the ones you fixed!  I will try again.",
    "created_at": "2010-04-06T17:08:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61467",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:5'>Comment 5:</a>
Replying to [@JohnCremona](#comment%3A4):
> Full log is at http://www.warwick.ac.uk/staff/J.E.Cremona/magma_test.log .

Apologies -- it looks as if I did not apply the patch since the differences look exactly like the ones you fixed!  I will try again.



---

archive/issue_events_086061.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2010-04-06T17:08:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-86061"
}
```



---

archive/issue_events_086062.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2010-04-06T17:08:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-86062"
}
```



---

archive/issue_comments_061468.json:
```json
{
    "body": "Author: **William Stein**",
    "created_at": "2010-04-06T17:20:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61468",
    "user": "https://github.com/JohnCremona"
}
```

Author: **William Stein**



---

archive/issue_events_086063.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2010-04-06T17:20:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-86063"
}
```



---

archive/issue_events_086064.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2010-04-06T17:20:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-86064"
}
```



---

archive/issue_comments_061469.json:
```json
{
    "body": "Reviewer: **John Cremona**",
    "created_at": "2010-04-06T17:20:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61469",
    "user": "https://github.com/JohnCremona"
}
```

Reviewer: **John Cremona**



---

archive/issue_comments_061470.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nOK, so after actually applying the patch (I had forgotten to do hg qpush) I get exactly one failure.  This is on 64-bit ubuntu, Sage 4.3.5 and Magma V2.16-1:\n\n```\nsage -t --only_optional=magma \"./sage/interfaces/magma.py\"  \n**********************************************************************\nFile \"/storage/jec/sage-4.3.5/devel/sage-tests/sage/interfaces/magma.py\", line 187:\n    sage: y * 1.0                                                         # optional - magma\nException raised:\n    Traceback (most recent call last):\n      File \"/home/jec/sage-current/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/home/jec/sage-current/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/home/jec/sage-current/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_0[46]>\", line 1, in <module>\n        y * RealNumber('1.0')                                                         # optional - magma###line 187:\n    sage: y * 1.0                                                         # optional - magma\n      File \"element.pyx\", line 1398, in sage.structure.element.RingElement.__mul__ (sage/structure/element.c:11337)\n        return coercion_model.bin_op(left, right, mul)\n      File \"coerce.pyx\", line 717, in sage.structure.coerce.CoercionModel_cache_maps.bin_op (sage/structure/coerce.c:6212)\n        raise\n      File \"coerce.pyx\", line 713, in sage.structure.coerce.CoercionModel_cache_maps.bin_op (sage/structure/coerce.c:6151)\n        return PyObject_CallObject(op, xy)\n      File \"element.pyx\", line 1393, in sage.structure.element.RingElement.__mul__ (sage/structure/element.c:11265)\n        return (<RingElement>left)._mul_(<RingElement>right)\n      File \"element.pyx\", line 1400, in sage.structure.element.RingElement._mul_ (sage/structure/element.c:11385)\n        cpdef RingElement _mul_(self, RingElement right):\n      File \"/home/jec/sage-current/local/lib/python/site-packages/sage/interfaces/expect.py\", line 1909, in _mul_\n        return self._operation('*', right)\n      File \"/home/jec/sage-current/local/lib/python/site-packages/sage/interfaces/expect.py\", line 1866, in _operation\n        raise TypeError, msg\n    TypeError: Error evaluating Magma code.\n    IN:\n[27]:=_sage_[19] * _sage_[25];\n    OUT:\n    >> _sage_[27]:=_sage_[19] * _sage_[25];\n                              ^\n    Runtime error in '*': Bad argument types\n    Argument types given: RngUPolElt[RngInt], FldReElt\n\n```\nand this looks like some error in parsing the expected output (are you allowed two different \"...\"?) since it looks fine to me.  The only other things I can think of is that there may be different numbers of spaces in the expected and actual magma output!",
    "created_at": "2010-04-06T17:20:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61470",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:6'>Comment 6:</a>
OK, so after actually applying the patch (I had forgotten to do hg qpush) I get exactly one failure.  This is on 64-bit ubuntu, Sage 4.3.5 and Magma V2.16-1:

```
sage -t --only_optional=magma "./sage/interfaces/magma.py"  
**********************************************************************
File "/storage/jec/sage-4.3.5/devel/sage-tests/sage/interfaces/magma.py", line 187:
    sage: y * 1.0                                                         # optional - magma
Exception raised:
    Traceback (most recent call last):
      File "/home/jec/sage-current/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/home/jec/sage-current/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/home/jec/sage-current/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_0[46]>", line 1, in <module>
        y * RealNumber('1.0')                                                         # optional - magma###line 187:
    sage: y * 1.0                                                         # optional - magma
      File "element.pyx", line 1398, in sage.structure.element.RingElement.__mul__ (sage/structure/element.c:11337)
        return coercion_model.bin_op(left, right, mul)
      File "coerce.pyx", line 717, in sage.structure.coerce.CoercionModel_cache_maps.bin_op (sage/structure/coerce.c:6212)
        raise
      File "coerce.pyx", line 713, in sage.structure.coerce.CoercionModel_cache_maps.bin_op (sage/structure/coerce.c:6151)
        return PyObject_CallObject(op, xy)
      File "element.pyx", line 1393, in sage.structure.element.RingElement.__mul__ (sage/structure/element.c:11265)
        return (<RingElement>left)._mul_(<RingElement>right)
      File "element.pyx", line 1400, in sage.structure.element.RingElement._mul_ (sage/structure/element.c:11385)
        cpdef RingElement _mul_(self, RingElement right):
      File "/home/jec/sage-current/local/lib/python/site-packages/sage/interfaces/expect.py", line 1909, in _mul_
        return self._operation('*', right)
      File "/home/jec/sage-current/local/lib/python/site-packages/sage/interfaces/expect.py", line 1866, in _operation
        raise TypeError, msg
    TypeError: Error evaluating Magma code.
    IN:
[27]:=_sage_[19] * _sage_[25];
    OUT:
    >> _sage_[27]:=_sage_[19] * _sage_[25];
                              ^
    Runtime error in '*': Bad argument types
    Argument types given: RngUPolElt[RngInt], FldReElt

```
and this looks like some error in parsing the expected output (are you allowed two different "..."?) since it looks fine to me.  The only other things I can think of is that there may be different numbers of spaces in the expected and actual magma output!



---

archive/issue_comments_061471.json:
```json
{
    "body": "Changed keywords from **** to **Magma**",
    "created_at": "2010-04-06T17:20:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61471",
    "user": "https://github.com/JohnCremona"
}
```

Changed keywords from **** to **Magma**



---

archive/issue_comments_061472.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nJohn,\n\nI think you should give my patch a positive review anyways.  The problem above is that in Magma V2.16-7, this works fine:\n\n```\n[wstein@eno ~]$ magma\nMagma V2.16-7     Mon Apr 26 2010 22:51:34 on eno      [Seed = 294390646]\nType ? for help.  Type <Ctrl>-D to quit.\n> R<x> := PolynomialRing(Integers());\n> x*1.0;\n$.1\n> \n```\nHowever, in older versions of Magma, it doesn't:\n\n```\nflat:~ wstein$ magma\nMagma V2.15-11    Mon Apr 26 2010 19:53:21 on flat     [Seed = 4201111680]\nType ? for help.  Type <Ctrl>-D to quit.\n> R<x> := PolynomialRing(Integers());\n> x*1.0;\n\n>> x*1.0;\n    ^\nRuntime error in '*': Bad argument types\nArgument types given: RngUPolElt[RngInt], FldReElt\n```\n\nSince Magma's capabilities, etc., change a *lot* -- even from minor version to version -- I think the Sage optional doctests should be targeted at the latest released version of Magma.   \n\nNote that the computation is multiplying a polynomial over ZZ[x] by a floating point numbers.  In Sage, there is a beautiful coercion model that makes most such things \"just work\".  In Magma, one implements the '*' function for every conceivable choice of pairs of types... and I guess somebody got around to eventually implementing this one. \n\nJust to emphasize how totally arbitrary (and sad) Magma's system still is after all these years, notice that even in Magma V2.16-7, the same computation with polynomials over ZZ and rational numbers doesn't work!\n\n```\n> x + 1/2;        \n\n>> x + 1/2;\n     ^\nRuntime error in '+': Bad argument types\nArgument types given: RngUPolElt[RngInt], FldRatElt\n\n> x*(1/2);\n\n>> x*(1/2);\n    ^\nRuntime error in '*': Bad argument types\nArgument types given: RngUPolElt[RngInt], FldRatElt\n\n> \n```\n\nSage had the same sort of silly anomalies until people like David Harvey, Craig Citro, David Roe, and *Robert Bradshaw* and others stepped in and greatly improved the situation. \n\n```\nsage: R.<x> = ZZ[]\nsage: x * 1.0\nx\nsage: parent(x * 1.0)\nUnivariate Polynomial Ring in x over Real Field with 53 bits of precision\nsage: x + 1/2\nx + 1/2\nsage: (1/2)*x\n1/2*x\n```\n\nSage coercion is still of course far from perfect.  But it's also far from sucking. \n\n -- William",
    "created_at": "2010-04-27T02:59:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61472",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:7'>Comment 7:</a>
John,

I think you should give my patch a positive review anyways.  The problem above is that in Magma V2.16-7, this works fine:

```
[wstein@eno ~]$ magma
Magma V2.16-7     Mon Apr 26 2010 22:51:34 on eno      [Seed = 294390646]
Type ? for help.  Type <Ctrl>-D to quit.
> R<x> := PolynomialRing(Integers());
> x*1.0;
$.1
> 
```
However, in older versions of Magma, it doesn't:

```
flat:~ wstein$ magma
Magma V2.15-11    Mon Apr 26 2010 19:53:21 on flat     [Seed = 4201111680]
Type ? for help.  Type <Ctrl>-D to quit.
> R<x> := PolynomialRing(Integers());
> x*1.0;

>> x*1.0;
    ^
Runtime error in '*': Bad argument types
Argument types given: RngUPolElt[RngInt], FldReElt
```

Since Magma's capabilities, etc., change a *lot* -- even from minor version to version -- I think the Sage optional doctests should be targeted at the latest released version of Magma.   

Note that the computation is multiplying a polynomial over ZZ[x] by a floating point numbers.  In Sage, there is a beautiful coercion model that makes most such things "just work".  In Magma, one implements the '*' function for every conceivable choice of pairs of types... and I guess somebody got around to eventually implementing this one. 

Just to emphasize how totally arbitrary (and sad) Magma's system still is after all these years, notice that even in Magma V2.16-7, the same computation with polynomials over ZZ and rational numbers doesn't work!

```
> x + 1/2;        

>> x + 1/2;
     ^
Runtime error in '+': Bad argument types
Argument types given: RngUPolElt[RngInt], FldRatElt

> x*(1/2);

>> x*(1/2);
    ^
Runtime error in '*': Bad argument types
Argument types given: RngUPolElt[RngInt], FldRatElt

> 
```

Sage had the same sort of silly anomalies until people like David Harvey, Craig Citro, David Roe, and *Robert Bradshaw* and others stepped in and greatly improved the situation. 

```
sage: R.<x> = ZZ[]
sage: x * 1.0
x
sage: parent(x * 1.0)
Univariate Polynomial Ring in x over Real Field with 53 bits of precision
sage: x + 1/2
x + 1/2
sage: (1/2)*x
1/2*x
```

Sage coercion is still of course far from perfect.  But it's also far from sucking. 

 -- William



---

archive/issue_events_086065.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-04-27T02:59:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-86065"
}
```



---

archive/issue_events_086066.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-04-27T02:59:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-86066"
}
```



---

archive/issue_comments_061473.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nI just lost my posting here (cookie problem) and don't feel like rewriting it all....\n\nI only have C2.16-1 and the patch requires V2.16-7 or higher to pass, it seems, so I cannot verify it at present.\n\nIs it anywhere documented which version of Magma Sage relies on for positive tests?",
    "created_at": "2010-04-27T12:46:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61473",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:9'>Comment 9:</a>
I just lost my posting here (cookie problem) and don't feel like rewriting it all....

I only have C2.16-1 and the patch requires V2.16-7 or higher to pass, it seems, so I cannot verify it at present.

Is it anywhere documented which version of Magma Sage relies on for positive tests?



---

archive/issue_comments_061474.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nWith Sage 4.4 and a newly installed magma V1.16-7 I still get falures in these files:\n\n```\n\tsage -t --only_optional=magma \"devel/sage/sage/rings/finite_rings/element_givaro.pyx\"\n\tsage -t --only_optional=magma \"devel/sage/sage/rings/polynomial/multi_polynomial.pyx\"\n\tsage -t --only_optional=magma \"devel/sage/sage/rings/polynomial/polynomial_element.pyx\"\n\tsage -t --only_optional=magma \"devel/sage/sage/rings/polynomial/polynomial_ring.py\"\n\tsage -t --only_optional=magma \"devel/sage/sage/schemes/elliptic_curves/ell_generic.py\"\n\tsage -t --only_optional=magma \"devel/sage/sage/schemes/hyperelliptic_curves/hyperelliptic_generic.py\"\n```\nSee http://www.warwick.ac.uk/staff/J.E.Cremona/magma.out for the full log.",
    "created_at": "2010-04-28T09:51:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61474",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:10'>Comment 10:</a>
With Sage 4.4 and a newly installed magma V1.16-7 I still get falures in these files:

```
	sage -t --only_optional=magma "devel/sage/sage/rings/finite_rings/element_givaro.pyx"
	sage -t --only_optional=magma "devel/sage/sage/rings/polynomial/multi_polynomial.pyx"
	sage -t --only_optional=magma "devel/sage/sage/rings/polynomial/polynomial_element.pyx"
	sage -t --only_optional=magma "devel/sage/sage/rings/polynomial/polynomial_ring.py"
	sage -t --only_optional=magma "devel/sage/sage/schemes/elliptic_curves/ell_generic.py"
	sage -t --only_optional=magma "devel/sage/sage/schemes/hyperelliptic_curves/hyperelliptic_generic.py"
```
See http://www.warwick.ac.uk/staff/J.E.Cremona/magma.out for the full log.



---

archive/issue_comments_061475.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nA shorter log file with only the failing files is at http://www.warwick.ac.uk/staff/J.E.Cremona/magma.out.short",
    "created_at": "2010-04-28T10:20:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61475",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:11'>Comment 11:</a>
A shorter log file with only the failing files is at http://www.warwick.ac.uk/staff/J.E.Cremona/magma.out.short



---

archive/issue_comments_061476.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nOh boy, it looks like sage-4.4 changed (from when I made the patch) and introduced a *bunch* of new issues :-(.   Sigh, I'll have to rewrite a bunch of the interface, evidently. Well at least I know now.",
    "created_at": "2010-05-01T07:11:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61476",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:12'>Comment 12:</a>
Oh boy, it looks like sage-4.4 changed (from when I made the patch) and introduced a *bunch* of new issues :-(.   Sigh, I'll have to rewrite a bunch of the interface, evidently. Well at least I know now.



---

archive/issue_comments_061477.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nIs there any explanation of why these doc tests need to be revised? I can see \n\nsage/symbolic/expression.pyx\n\nhas a pretty trivial change, since Magma has decided to reverse the order of the outputs. \n\nBut others seem really odd. \n\nmagma(HyperellipticCurve(f)).IgusaClebschInvariants() # optional - magma \nremove: [ 0, -2048/375, -4096/25, -4881645568/84375 ] \nadd: [ -640, -20480, 1310720, 52160364544 ] \n\nWere the first set of Magma results wrong? If so, why was they used as a doctest? \n\nThis is probably my lack of mathematical knowledge showing here, but it appears to me Magma has output something completely different in many cases. Is the new output correct? Was the old output incorrect? \n\nDave",
    "created_at": "2010-06-02T20:29:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61477",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:13'>Comment 13:</a>
Is there any explanation of why these doc tests need to be revised? I can see 

sage/symbolic/expression.pyx

has a pretty trivial change, since Magma has decided to reverse the order of the outputs. 

But others seem really odd. 

magma(HyperellipticCurve(f)).IgusaClebschInvariants() # optional - magma 
remove: [ 0, -2048/375, -4096/25, -4881645568/84375 ] 
add: [ -640, -20480, 1310720, 52160364544 ] 

Were the first set of Magma results wrong? If so, why was they used as a doctest? 

This is probably my lack of mathematical knowledge showing here, but it appears to me Magma has output something completely different in many cases. Is the new output correct? Was the old output incorrect? 

Dave



---

archive/issue_events_086067.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-06-22T17:49:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-86067"
}
```



---

archive/issue_events_086068.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-06-22T17:49:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-86068"
}
```



---

archive/issue_comments_061478.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nReplying to [@williamstein](#comment%3A12):\n> Oh boy, it looks like sage-4.4 changed (from when I made the patch) and introduced a *bunch* of new issues :-(.   Sigh, I'll have to rewrite a bunch of the interface, evidently. Well at least I know now.\n\nBased on this, I'm changing this to needs_work. Not volunteering to review, just trying to clean up trac a bit!",
    "created_at": "2010-06-22T17:49:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61478",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:14'>Comment 14:</a>
Replying to [@williamstein](#comment%3A12):
> Oh boy, it looks like sage-4.4 changed (from when I made the patch) and introduced a *bunch* of new issues :-(.   Sigh, I'll have to rewrite a bunch of the interface, evidently. Well at least I know now.

Based on this, I'm changing this to needs_work. Not volunteering to review, just trying to clean up trac a bit!



---

archive/issue_comments_061479.json:
```json
{
    "body": "Attachment: **[trac_7870-magma-doctest.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac_7870-magma-doctest.patch.gz)**\n\nReplaces all previous patches;  applies to 4.6.1 and Magma 2.17-4",
    "created_at": "2011-02-18T23:04:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61479",
    "user": "https://github.com/JohnCremona"
}
```

Attachment: **[trac_7870-magma-doctest.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac_7870-magma-doctest.patch.gz)**

Replaces all previous patches;  applies to 4.6.1 and Magma 2.17-4



---

archive/issue_comments_061480.json:
```json
{
    "body": "Changed author from **William Stein** to **William Stein, John Cremona**",
    "created_at": "2011-02-18T23:06:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61480",
    "user": "https://github.com/JohnCremona"
}
```

Changed author from **William Stein** to **William Stein, John Cremona**



---

archive/issue_events_086069.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2011-02-18T23:06:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-86069"
}
```



---

archive/issue_events_086070.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2011-02-18T23:06:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-86070"
}
```



---

archive/issue_comments_061481.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nNew patch passes all optional doctests on skynet (eno) with 4.6.1 and Magma 2.17-4.",
    "created_at": "2011-02-18T23:06:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61481",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:15'>Comment 15:</a>
New patch passes all optional doctests on skynet (eno) with 4.6.1 and Magma 2.17-4.



---

archive/issue_comments_061482.json:
```json
{
    "body": "Changed reviewer from **John Cremona** to none",
    "created_at": "2011-02-18T23:06:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61482",
    "user": "https://github.com/JohnCremona"
}
```

Changed reviewer from **John Cremona** to none



---

archive/issue_comments_061483.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nI had to change one doctest, such that it also fits my output. This is definitely no issue, as I just added ... for the time. Apart from this: Perfect!\n\nFor the record, the patchbot and the release manager:\n\nApply trac_7870-magma-doctest.patch\nApply trac-7870-magma-doctest-review.patch",
    "created_at": "2011-03-02T09:57:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61483",
    "user": "https://github.com/sagetrac-mraum"
}
```

<a id='comment:16'>Comment 16:</a>
I had to change one doctest, such that it also fits my output. This is definitely no issue, as I just added ... for the time. Apart from this: Perfect!

For the record, the patchbot and the release manager:

Apply trac_7870-magma-doctest.patch
Apply trac-7870-magma-doctest-review.patch



---

archive/issue_comments_061484.json:
```json
{
    "body": "Reviewer: **Martin Raum**",
    "created_at": "2011-03-02T09:57:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61484",
    "user": "https://github.com/sagetrac-mraum"
}
```

Reviewer: **Martin Raum**



---

archive/issue_events_086071.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2011-03-02T09:57:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-86071"
}
```



---

archive/issue_events_086072.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2011-03-02T09:57:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-86072"
}
```



---

archive/issue_comments_061485.json:
```json
{
    "body": "Attachment: **[trac-7870-magma-doctest-review.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review.patch.gz)**",
    "created_at": "2011-03-02T09:58:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61485",
    "user": "https://github.com/sagetrac-mraum"
}
```

Attachment: **[trac-7870-magma-doctest-review.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review.patch.gz)**



---

archive/issue_comments_061486.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nI'm happy with the reviewer's patch, and note that this ticket is still marked \"positive review\".",
    "created_at": "2011-03-02T16:48:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61486",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:17'>Comment 17:</a>
I'm happy with the reviewer's patch, and note that this ticket is still marked "positive review".



---

archive/issue_comments_061487.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\n\n```\ntrac_7870-magma-doctest.patch and trac-7870-magma-doctest-review.patch\nwhen applied to 4.6.2 pass all optional doctests\n(-only-optional=magma) on skynet/eno with Magma-2.17-5.\n```",
    "created_at": "2011-03-04T16:26:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61487",
    "user": "https://github.com/sagetrac-mariah"
}
```

<a id='comment:18'>Comment 18:</a>

```
trac_7870-magma-doctest.patch and trac-7870-magma-doctest-review.patch
when applied to 4.6.2 pass all optional doctests
(-only-optional=magma) on skynet/eno with Magma-2.17-5.
```



---

archive/issue_comments_061488.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nReplying to [mraum](#comment%3A16):\n> For the record, the patchbot and the release manager:\n> \n> Apply trac_7870-magma-doctest.patch\n> Apply trac-7870-magma-doctest-review.patch\n\n**Please** in the future write this in the ticket **description**.  Thanks!",
    "created_at": "2011-03-08T09:02:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61488",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:19'>Comment 19:</a>
Replying to [mraum](#comment%3A16):
> For the record, the patchbot and the release manager:
> 
> Apply trac_7870-magma-doctest.patch
> Apply trac-7870-magma-doctest-review.patch

**Please** in the future write this in the ticket **description**.  Thanks!



---

archive/issue_comments_061489.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -17,5 +17,6 @@\n Total time for all tests: 364.0 seconds\n ```\n \n-\n-\n+**Apply:**\n+1. [attachment: trac_7870-magma-doctest.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac_7870-magma-doctest.patch.gz)\n+2. [attachment: trac-7870-magma-doctest-review.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review.patch.gz)\n``````\n",
    "created_at": "2011-03-08T09:02:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61489",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -17,5 +17,6 @@
 Total time for all tests: 364.0 seconds
 ```
 
-
-
+**Apply:**
+1. [attachment: trac_7870-magma-doctest.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac_7870-magma-doctest.patch.gz)
+2. [attachment: trac-7870-magma-doctest-review.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review.patch.gz)
``````




---

archive/issue_comments_061490.json:
```json
{
    "body": "Changed reviewer from **Martin Raum** to **Martin Raum, John Cremona**",
    "created_at": "2011-03-08T09:02:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61490",
    "user": "https://github.com/jdemeyer"
}
```

Changed reviewer from **Martin Raum** to **Martin Raum, John Cremona**



---

archive/issue_comments_061491.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nReplying to [@jdemeyer](#comment%3A19):\n> Replying to [mraum](#comment%3A16):\n> > For the record, the patchbot and the release manager:\n> > \n> > Apply trac_7870-magma-doctest.patch\n> > Apply trac-7870-magma-doctest-review.patch\n\n> \n> **Please** in the future write this in the ticket **description**.  Thanks!\n\nThat makes a lot of sence and should probably be put in some sort of guide to using trac. Is there one specifically for Sage? \n\nI know I came unstuck recently when I put a link to an spkg in the description, but that spkg needed tekinfo (or whatever it was), so Francois posted one which did not need it. But mine was in the description, his one was less prominently placed in the notes, so you used mine and found it did not work. \n\nAt the very least, specifying the locations of .spkgs and what patches needed to be applied, should be mentioned on sage-devel, but ideally we need it documented on the trac server. \n\nDave",
    "created_at": "2011-03-08T09:37:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61491",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:20'>Comment 20:</a>
Replying to [@jdemeyer](#comment%3A19):
> Replying to [mraum](#comment%3A16):
> > For the record, the patchbot and the release manager:
> > 
> > Apply trac_7870-magma-doctest.patch
> > Apply trac-7870-magma-doctest-review.patch

> 
> **Please** in the future write this in the ticket **description**.  Thanks!

That makes a lot of sence and should probably be put in some sort of guide to using trac. Is there one specifically for Sage? 

I know I came unstuck recently when I put a link to an spkg in the description, but that spkg needed tekinfo (or whatever it was), so Francois posted one which did not need it. But mine was in the description, his one was less prominently placed in the notes, so you used mine and found it did not work. 

At the very least, specifying the locations of .spkgs and what patches needed to be applied, should be mentioned on sage-devel, but ideally we need it documented on the trac server. 

Dave



---

archive/issue_events_086073.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-08T12:49:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-86073"
}
```



---

archive/issue_events_086074.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-08T12:49:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-86074"
}
```



---

archive/issue_comments_061492.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nAll doctests involving magma should be marked `# optional - magma`.  I get various failures in `sage/rings/number_field/number_field.py`.",
    "created_at": "2011-03-08T12:49:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61492",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:21'>Comment 21:</a>
All doctests involving magma should be marked `# optional - magma`.  I get various failures in `sage/rings/number_field/number_field.py`.



---

archive/issue_comments_061493.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nReplying to [@jdemeyer](#comment%3A21):\n> All doctests involving magma should be marked `# optional - magma`.  I get various failures in `sage/rings/number_field/number_field.py`.\n\nApologies, this refers to the new function I put in (_magma_polynomial_) where I did not tag the doctests as optional.  It's my fault (though William was sitting next to me at the time, so I blame him too!)",
    "created_at": "2011-03-08T17:09:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61493",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:22'>Comment 22:</a>
Replying to [@jdemeyer](#comment%3A21):
> All doctests involving magma should be marked `# optional - magma`.  I get various failures in `sage/rings/number_field/number_field.py`.

Apologies, this refers to the new function I put in (_magma_polynomial_) where I did not tag the doctests as optional.  It's my fault (though William was sitting next to me at the time, so I blame him too!)



---

archive/issue_comments_061494.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nAttachment: **[trac-7870-magma-doctest-review2.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review2.patch.gz)**\n\nAnd it's my fault as well. I'm terribly sorry!\nJohn, do you have a maschine without magma to run tests for the above fix on? It was only one function that was missed.\n\nMartin",
    "created_at": "2011-03-08T17:42:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61494",
    "user": "https://github.com/sagetrac-mraum"
}
```

<a id='comment:23'>Comment 23:</a>
Attachment: **[trac-7870-magma-doctest-review2.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review2.patch.gz)**

And it's my fault as well. I'm terribly sorry!
John, do you have a maschine without magma to run tests for the above fix on? It was only one function that was missed.

Martin



---

archive/issue_comments_061495.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nI don't think it is necessary to have a machine without magma.  Just run a complete test both with and with out the --optional-magma.  It is faster to run with that flag since only doctests with the optional magma flag are run.",
    "created_at": "2011-03-08T19:02:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61495",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:24'>Comment 24:</a>
I don't think it is necessary to have a machine without magma.  Just run a complete test both with and with out the --optional-magma.  It is faster to run with that flag since only doctests with the optional magma flag are run.



---

archive/issue_events_086075.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-08T21:04:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-86075"
}
```



---

archive/issue_events_086076.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-08T21:04:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-86076"
}
```



---

archive/issue_comments_061496.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -20,3 +20,4 @@\n **Apply:**\n 1. [attachment: trac_7870-magma-doctest.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac_7870-magma-doctest.patch.gz)\n 2. [attachment: trac-7870-magma-doctest-review.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review.patch.gz)\n+3. [attachment: trac-7870-magma-doctest-review2.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review2.patch.gz)\n``````\n",
    "created_at": "2011-03-08T21:04:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61496",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -20,3 +20,4 @@
 **Apply:**
 1. [attachment: trac_7870-magma-doctest.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac_7870-magma-doctest.patch.gz)
 2. [attachment: trac-7870-magma-doctest-review.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review.patch.gz)
+3. [attachment: trac-7870-magma-doctest-review2.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review2.patch.gz)
``````




---

archive/issue_comments_061497.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nThis seems right. So, if everything is ok for you, also, give it a positive review.",
    "created_at": "2011-03-09T01:40:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61497",
    "user": "https://github.com/sagetrac-mraum"
}
```

<a id='comment:26'>Comment 26:</a>
This seems right. So, if everything is ok for you, also, give it a positive review.



---

archive/issue_comments_061498.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nAccording to the `sage -h`, the option should be `-only-optional=magma` and **not** `--only-optional=magma`\n\n\nI don't have Magma, but do have Mathematica, so I thought I'd try\n\n```\ndrkirkby@hawk:~/sage-4.6.2.rc1$ ./sage -t -only_optional=mathematica devel/sage/sage\nsage -t -only_optional=mathematica \"devel/sage/sage/probability/all.py\"\n\t [0.1 s]\nsage -t -only_optional=mathematica \"devel/sage/sage/probability/__init__.py\"\n\t [0.1 s]\nsage -t -only_optional=mathematica \"devel/sage/sage/probability/random_variable.py\"\n```\n\nbut it seems to run every doctest, not just the Mathematica ones, which fail anyway, as noted at #8495. \n\n\nDave",
    "created_at": "2011-03-09T06:26:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61498",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:27'>Comment 27:</a>
According to the `sage -h`, the option should be `-only-optional=magma` and **not** `--only-optional=magma`


I don't have Magma, but do have Mathematica, so I thought I'd try

```
drkirkby@hawk:~/sage-4.6.2.rc1$ ./sage -t -only_optional=mathematica devel/sage/sage
sage -t -only_optional=mathematica "devel/sage/sage/probability/all.py"
	 [0.1 s]
sage -t -only_optional=mathematica "devel/sage/sage/probability/__init__.py"
	 [0.1 s]
sage -t -only_optional=mathematica "devel/sage/sage/probability/random_variable.py"
```

but it seems to run every doctest, not just the Mathematica ones, which fail anyway, as noted at #8495. 


Dave



---

archive/issue_comments_061499.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nThis needs to be rebased to sage-4.7.alpha1.",
    "created_at": "2011-03-11T22:07:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61499",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:28'>Comment 28:</a>
This needs to be rebased to sage-4.7.alpha1.



---

archive/issue_events_086077.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-11T22:07:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-86077"
}
```



---

archive/issue_events_086078.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-11T22:07:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-86078"
}
```



---

archive/issue_comments_061500.json:
```json
{
    "body": "Attachment: **[trac-7870-magma-doctest-review3.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review3.patch.gz)**",
    "created_at": "2011-03-12T20:55:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61500",
    "user": "https://github.com/sagetrac-mraum"
}
```

Attachment: **[trac-7870-magma-doctest-review3.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review3.patch.gz)**



---

archive/issue_comments_061501.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -18,6 +18,4 @@\n ```\n \n **Apply:**\n-1. [attachment: trac_7870-magma-doctest.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac_7870-magma-doctest.patch.gz)\n-2. [attachment: trac-7870-magma-doctest-review.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review.patch.gz)\n-3. [attachment: trac-7870-magma-doctest-review2.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review2.patch.gz)\n+1. [attachment: trac-7870-magma-doctest-review3.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review3.patch.gz)\n``````\n",
    "created_at": "2011-03-12T20:57:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61501",
    "user": "https://github.com/sagetrac-mraum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -18,6 +18,4 @@
 ```
 
 **Apply:**
-1. [attachment: trac_7870-magma-doctest.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac_7870-magma-doctest.patch.gz)
-2. [attachment: trac-7870-magma-doctest-review.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review.patch.gz)
-3. [attachment: trac-7870-magma-doctest-review2.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review2.patch.gz)
+1. [attachment: trac-7870-magma-doctest-review3.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review3.patch.gz)
``````




---

archive/issue_comments_061502.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nI rebased the patch to 4.7alpha1. Please only apply the last one: review3.\n\nCould anyone (John?) check this soon, so that we won't need to rebase it again?",
    "created_at": "2011-03-12T20:57:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61502",
    "user": "https://github.com/sagetrac-mraum"
}
```

<a id='comment:29'>Comment 29:</a>
I rebased the patch to 4.7alpha1. Please only apply the last one: review3.

Could anyone (John?) check this soon, so that we won't need to rebase it again?



---

archive/issue_events_086079.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2011-03-12T20:57:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-86079"
}
```



---

archive/issue_events_086080.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2011-03-12T20:57:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-86080"
}
```



---

archive/issue_comments_061503.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nReplying to [mraum](#comment%3A29):\n> I rebased the patch to 4.7alpha1. Please only apply the last one: review3.\n\nThanks.\n\n> \n> Could anyone (John?) check this soon, so that we won't need to rebase it again?\n\nOK, I'll try that soon.  (I have just been away for the weekend or I would have done it already.)",
    "created_at": "2011-03-14T01:26:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61503",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:30'>Comment 30:</a>
Replying to [mraum](#comment%3A29):
> I rebased the patch to 4.7alpha1. Please only apply the last one: review3.

Thanks.

> 
> Could anyone (John?) check this soon, so that we won't need to rebase it again?

OK, I'll try that soon.  (I have just been away for the weekend or I would have done it already.)



---

archive/issue_comments_061504.json:
```json
{
    "body": "<a id='comment:31'>Comment 31:</a>\nWith magma-V2.17-5 (which I downloaded and installed specially) and sage-4.7.alpha1 I tested everything both with and without -only-optional=magma and in both cases all tests passed.\n\nSo I am giving this a positive review (again).",
    "created_at": "2011-03-15T04:33:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61504",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:31'>Comment 31:</a>
With magma-V2.17-5 (which I downloaded and installed specially) and sage-4.7.alpha1 I tested everything both with and without -only-optional=magma and in both cases all tests passed.

So I am giving this a positive review (again).



---

archive/issue_events_086081.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2011-03-15T04:33:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-86081"
}
```



---

archive/issue_events_086082.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2011-03-15T04:33:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-86082"
}
```



---

archive/issue_comments_061505.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nIt seems that your 'review3' patch is based on an **older** version of the patches, I get the number_field doctest failures again.",
    "created_at": "2011-03-17T14:39:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61505",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:32'>Comment 32:</a>
It seems that your 'review3' patch is based on an **older** version of the patches, I get the number_field doctest failures again.



---

archive/issue_events_086083.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-17T14:39:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-86083"
}
```



---

archive/issue_events_086084.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-17T14:39:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-86084"
}
```



---

archive/issue_comments_061506.json:
```json
{
    "body": "<a id='comment:33'>Comment 33:</a>\nWell, yes. We really need to run the test on a setup without Magma then. I add the fix for this problem (which is review2 patch rebased to current Sage).",
    "created_at": "2011-03-17T16:29:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61506",
    "user": "https://github.com/sagetrac-mraum"
}
```

<a id='comment:33'>Comment 33:</a>
Well, yes. We really need to run the test on a setup without Magma then. I add the fix for this problem (which is review2 patch rebased to current Sage).



---

archive/issue_events_086085.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2011-03-17T16:29:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-86085"
}
```



---

archive/issue_events_086086.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2011-03-17T16:29:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-86086"
}
```



---

archive/issue_comments_061507.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -19,3 +19,4 @@\n \n **Apply:**\n 1. [attachment: trac-7870-magma-doctest-review3.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review3.patch.gz)\n+2. [attachment: trac-7870-magma-doctest-review4.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review4.patch.gz)\n``````\n",
    "created_at": "2011-03-17T16:29:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61507",
    "user": "https://github.com/sagetrac-mraum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -19,3 +19,4 @@
 
 **Apply:**
 1. [attachment: trac-7870-magma-doctest-review3.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review3.patch.gz)
+2. [attachment: trac-7870-magma-doctest-review4.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review4.patch.gz)
``````




---

archive/issue_comments_061508.json:
```json
{
    "body": "Attachment: **[trac-7870-magma-doctest-review4.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review4.patch.gz)**",
    "created_at": "2011-03-17T16:30:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61508",
    "user": "https://github.com/sagetrac-mraum"
}
```

Attachment: **[trac-7870-magma-doctest-review4.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review4.patch.gz)**



---

archive/issue_comments_061509.json:
```json
{
    "body": "<a id='comment:34'>Comment 34:</a>\nWith the earlier patch (patch3) and the latest magma I tested everything and got no errors, so it seems like a waste of (my) time to do it all again.\n\nI do not understand mraum's comments about doing tests on a machine with no magma.  I ran complete tests with and without  -only-optional=magma.",
    "created_at": "2011-03-17T16:43:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61509",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:34'>Comment 34:</a>
With the earlier patch (patch3) and the latest magma I tested everything and got no errors, so it seems like a waste of (my) time to do it all again.

I do not understand mraum's comments about doing tests on a machine with no magma.  I ran complete tests with and without  -only-optional=magma.



---

archive/issue_comments_061510.json:
```json
{
    "body": "Merged: **sage-4.7.alpha2**",
    "created_at": "2011-03-18T13:42:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61510",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.7.alpha2**



---

archive/issue_comments_061511.json:
```json
{
    "body": "<a id='comment:35'>Comment 35:</a>\nWorks now without magma.",
    "created_at": "2011-03-18T13:42:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61511",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:35'>Comment 35:</a>
Works now without magma.



---

archive/issue_comments_061512.json:
```json
{
    "body": "Changed reviewer from **Martin Raum, John Cremona** to **Martin Raum, John Cremona, Jeroen Demeyer**",
    "created_at": "2011-03-18T13:42:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-61512",
    "user": "https://github.com/jdemeyer"
}
```

Changed reviewer from **Martin Raum, John Cremona** to **Martin Raum, John Cremona, Jeroen Demeyer**



---

archive/issue_events_086087.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-18T13:42:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-86087"
}
```



---

archive/issue_events_086088.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-18T13:42:36Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-86088"
}
```
