# Issue 7870: dozens of failures in magma optional test suite on skynet (eno) with sage-4.3

archive/issues_007870.json:
```json
{
    "assignees": [
        "https://github.com/JohnCremona"
    ],
    "body": "I ran the magma optional test suite on skynet (eno):\n\n```\n./sage -t --only_optional=magma devel/sage/sage > magma.out&\n```\n\nAnd the failures are:\n\n```\n        sage -t --only_optional=magma \"devel/sage/sage/rings/polynomial/pbori.pyx\"\n        sage -t --only_optional=magma \"devel/sage/sage/rings/polynomial/multi_polynomial_ring_generic.pyx\"\n        sage -t --only_optional=magma \"devel/sage/sage/rings/polynomial/term_order.py\"\n        sage -t --only_optional=magma \"devel/sage/sage/rings/polynomial/multi_polynomial_ideal.py\"\n        sage -t --only_optional=magma \"devel/sage/sage/crypto/mq/mpolynomialsystem.py\"\n        sage -t --only_optional=magma \"devel/sage/sage/schemes/hyperelliptic_curves/hyperelliptic_g2_generic.py\"\n        sage -t --only_optional=magma \"devel/sage/sage/symbolic/expression.pyx\"\nTotal time for all tests: 364.0 seconds\n```\n\n**Apply:**\n1. [attachment: trac-7870-magma-doctest-review3.patch](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review3.patch.gz)\n2. [attachment: trac-7870-magma-doctest-review4.patch](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review4.patch.gz)\n\nKeywords: **Magma**\n\nComponent: **interfaces**\n\nAuthor: **William Stein, John Cremona**\n\nReviewer: **Martin Raum, John Cremona, Jeroen Demeyer**\n\nMerged: **sage-4.7.alpha2**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/7870_\n\n",
    "closed_at": "2011-03-18T13:42:36Z",
    "created_at": "2010-01-07T20:51:18Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20interfaces",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "dozens of failures in magma optional test suite on skynet (eno) with sage-4.3",
    "type": "issue",
    "updated_at": "2011-03-18T13:42:36Z",
    "url": "https://github.com/sagemath/sage/issues/7870",
    "user": "https://github.com/williamstein"
}
```
I ran the magma optional test suite on skynet (eno):

```
./sage -t --only_optional=magma devel/sage/sage > magma.out&
```

And the failures are:

```
        sage -t --only_optional=magma "devel/sage/sage/rings/polynomial/pbori.pyx"
        sage -t --only_optional=magma "devel/sage/sage/rings/polynomial/multi_polynomial_ring_generic.pyx"
        sage -t --only_optional=magma "devel/sage/sage/rings/polynomial/term_order.py"
        sage -t --only_optional=magma "devel/sage/sage/rings/polynomial/multi_polynomial_ideal.py"
        sage -t --only_optional=magma "devel/sage/sage/crypto/mq/mpolynomialsystem.py"
        sage -t --only_optional=magma "devel/sage/sage/schemes/hyperelliptic_curves/hyperelliptic_g2_generic.py"
        sage -t --only_optional=magma "devel/sage/sage/symbolic/expression.pyx"
Total time for all tests: 364.0 seconds
```

**Apply:**
1. [attachment: trac-7870-magma-doctest-review3.patch](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review3.patch.gz)
2. [attachment: trac-7870-magma-doctest-review4.patch](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review4.patch.gz)

Keywords: **Magma**

Component: **interfaces**

Author: **William Stein, John Cremona**

Reviewer: **Martin Raum, John Cremona, Jeroen Demeyer**

Merged: **sage-4.7.alpha2**

_Issue created by migration from https://trac.sagemath.org/ticket/7870_





---

archive/issue_events_097572.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-01-07T20:51:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "milestone_number": null,
    "milestone_title": "sage-4.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-97572"
}
```



---

archive/issue_events_097573.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-01-07T20:51:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20interfaces",
    "label_color": "0000ff",
    "label_name": "c: interfaces",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-97573"
}
```



---

archive/issue_events_097574.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-01-07T20:51:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-97574"
}
```



---

archive/issue_events_097575.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-01-07T20:51:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-97575"
}
```



---

archive/issue_events_097576.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-01-07T20:51:18Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "subject": "https://github.com/williamstein",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-97576"
}
```



---

archive/issue_comments_059813.json:
```json
{
    "body": "this is the output of running the test suite, showing the actual failures.",
    "created_at": "2010-01-07T20:51:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59813",
    "user": "https://github.com/williamstein"
}
```

this is the output of running the test suite, showing the actual failures.



---

archive/issue_comments_059814.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nAttachment: **[magma.out.gz](https://github.com/sagemath/sage/files/ticket7870/magma.out.gz)**\n\nI tested again using the new magma V2.16-7 with sage-4.3.5. \n\n```\n[wstein@eno sage-4.3.5]$ magma\nMagma V2.16-7     Tue Apr  6 2010 11:14:18 on eno      [Seed = 3125460604]\nType ? for help.  Type <Ctrl>-D to quit.\n```\nThere are now even more failures.  I've attached a new test log created using the following on eno:\n\n```\n./sage -tp 10 -only_optional=magma devel/sage/sage\n```",
    "created_at": "2010-04-06T15:15:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59814",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:1" align="right">comment:1</div>

Attachment: **[magma.out.gz](https://github.com/sagemath/sage/files/ticket7870/magma.out.gz)**

I tested again using the new magma V2.16-7 with sage-4.3.5. 

```
[wstein@eno sage-4.3.5]$ magma
Magma V2.16-7     Tue Apr  6 2010 11:14:18 on eno      [Seed = 3125460604]
Type ? for help.  Type <Ctrl>-D to quit.
```
There are now even more failures.  I've attached a new test log created using the following on eno:

```
./sage -tp 10 -only_optional=magma devel/sage/sage
```



---

archive/issue_comments_059815.json:
```json
{
    "body": "it got much worse!",
    "created_at": "2010-04-06T15:16:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59815",
    "user": "https://github.com/williamstein"
}
```

it got much worse!



---

archive/issue_comments_059816.json:
```json
{
    "body": "Attachment: **[magma-sage-4.3.5.out.gz](https://github.com/sagemath/sage/files/ticket7870/magma-sage-4.3.5.out.gz)**\n\nAttachment: **[trac_7870.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac_7870.patch.gz)**\n\nThis fixes all the doctest issues on eno with magma V2.16-7",
    "created_at": "2010-04-06T16:20:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59816",
    "user": "https://github.com/williamstein"
}
```

Attachment: **[magma-sage-4.3.5.out.gz](https://github.com/sagemath/sage/files/ticket7870/magma-sage-4.3.5.out.gz)**

Attachment: **[trac_7870.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac_7870.patch.gz)**

This fixes all the doctest issues on eno with magma V2.16-7



---

archive/issue_events_097577.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-04-06T16:21:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-97577"
}
```



---

archive/issue_events_097578.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-04-06T16:33:58Z",
    "event": "unassigned",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "subject": "https://github.com/JohnCremona",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-97578"
}
```



---

archive/issue_events_097579.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2010-04-06T16:33:58Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "subject": "https://github.com/JohnCremona",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-97579"
}
```



---

archive/issue_comments_059817.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI am testing this now with magma V2.16-1 and will report back.  It will not be a clean result, since I already saw\n\n```\n\n**********************************************************************\nFile \"/storage/jec/sage-4.3.5/devel/sage-tests/sage/symbolic/expression.pyx\", line 499:\n    sage: magma(f)                         # optional - magma\nExpected:\n    sin(cos(x^2) + log(x))\nGot:\n    sin(log(x) + cos(x^2))\n```",
    "created_at": "2010-04-06T16:33:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59817",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:3" align="right">comment:3</div>

I am testing this now with magma V2.16-1 and will report back.  It will not be a clean result, since I already saw

```

**********************************************************************
File "/storage/jec/sage-4.3.5/devel/sage-tests/sage/symbolic/expression.pyx", line 499:
    sage: magma(f)                         # optional - magma
Expected:
    sin(cos(x^2) + log(x))
Got:
    sin(log(x) + cos(x^2))
```



---

archive/issue_events_097580.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2010-04-06T16:36:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-97580"
}
```



---

archive/issue_events_097581.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2010-04-06T16:36:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-97581"
}
```



---

archive/issue_comments_059818.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nFull log is at http://www.warwick.ac.uk/staff/J.E.Cremona/magma_test.log .",
    "created_at": "2010-04-06T16:36:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59818",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:4" align="right">comment:4</div>

Full log is at http://www.warwick.ac.uk/staff/J.E.Cremona/magma_test.log .



---

archive/issue_comments_059819.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@JohnCremona](#comment:4):\n> Full log is at http://www.warwick.ac.uk/staff/J.E.Cremona/magma_test.log .\n\nApologies -- it looks as if I did not apply the patch since the differences look exactly like the ones you fixed!  I will try again.",
    "created_at": "2010-04-06T17:08:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59819",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@JohnCremona](#comment:4):
> Full log is at http://www.warwick.ac.uk/staff/J.E.Cremona/magma_test.log .

Apologies -- it looks as if I did not apply the patch since the differences look exactly like the ones you fixed!  I will try again.



---

archive/issue_events_097582.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2010-04-06T17:08:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-97582"
}
```



---

archive/issue_events_097583.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2010-04-06T17:08:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-97583"
}
```



---

archive/issue_comments_059820.json:
```json
{
    "body": "Author: **William Stein**",
    "created_at": "2010-04-06T17:20:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59820",
    "user": "https://github.com/JohnCremona"
}
```

Author: **William Stein**



---

archive/issue_events_097584.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2010-04-06T17:20:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-97584"
}
```



---

archive/issue_events_097585.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2010-04-06T17:20:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-97585"
}
```



---

archive/issue_comments_059821.json:
```json
{
    "body": "Reviewer: **John Cremona**",
    "created_at": "2010-04-06T17:20:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59821",
    "user": "https://github.com/JohnCremona"
}
```

Reviewer: **John Cremona**



---

archive/issue_comments_059822.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nOK, so after actually applying the patch (I had forgotten to do hg qpush) I get exactly one failure.  This is on 64-bit ubuntu, Sage 4.3.5 and Magma V2.16-1:\n\n```\nsage -t --only_optional=magma \"./sage/interfaces/magma.py\"  \n**********************************************************************\nFile \"/storage/jec/sage-4.3.5/devel/sage-tests/sage/interfaces/magma.py\", line 187:\n    sage: y * 1.0                                                         # optional - magma\nException raised:\n    Traceback (most recent call last):\n      File \"/home/jec/sage-current/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/home/jec/sage-current/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/home/jec/sage-current/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_0[46]>\", line 1, in <module>\n        y * RealNumber('1.0')                                                         # optional - magma###line 187:\n    sage: y * 1.0                                                         # optional - magma\n      File \"element.pyx\", line 1398, in sage.structure.element.RingElement.__mul__ (sage/structure/element.c:11337)\n        return coercion_model.bin_op(left, right, mul)\n      File \"coerce.pyx\", line 717, in sage.structure.coerce.CoercionModel_cache_maps.bin_op (sage/structure/coerce.c:6212)\n        raise\n      File \"coerce.pyx\", line 713, in sage.structure.coerce.CoercionModel_cache_maps.bin_op (sage/structure/coerce.c:6151)\n        return PyObject_CallObject(op, xy)\n      File \"element.pyx\", line 1393, in sage.structure.element.RingElement.__mul__ (sage/structure/element.c:11265)\n        return (<RingElement>left)._mul_(<RingElement>right)\n      File \"element.pyx\", line 1400, in sage.structure.element.RingElement._mul_ (sage/structure/element.c:11385)\n        cpdef RingElement _mul_(self, RingElement right):\n      File \"/home/jec/sage-current/local/lib/python/site-packages/sage/interfaces/expect.py\", line 1909, in _mul_\n        return self._operation('*', right)\n      File \"/home/jec/sage-current/local/lib/python/site-packages/sage/interfaces/expect.py\", line 1866, in _operation\n        raise TypeError, msg\n    TypeError: Error evaluating Magma code.\n    IN:\n[27]:=_sage_[19] * _sage_[25];\n    OUT:\n    >> _sage_[27]:=_sage_[19] * _sage_[25];\n                              ^\n    Runtime error in '*': Bad argument types\n    Argument types given: RngUPolElt[RngInt], FldReElt\n\n```\nand this looks like some error in parsing the expected output (are you allowed two different \"...\"?) since it looks fine to me.  The only other things I can think of is that there may be different numbers of spaces in the expected and actual magma output!",
    "created_at": "2010-04-06T17:20:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59822",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:6" align="right">comment:6</div>

OK, so after actually applying the patch (I had forgotten to do hg qpush) I get exactly one failure.  This is on 64-bit ubuntu, Sage 4.3.5 and Magma V2.16-1:

```
sage -t --only_optional=magma "./sage/interfaces/magma.py"  
**********************************************************************
File "/storage/jec/sage-4.3.5/devel/sage-tests/sage/interfaces/magma.py", line 187:
    sage: y * 1.0                                                         # optional - magma
Exception raised:
    Traceback (most recent call last):
      File "/home/jec/sage-current/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/home/jec/sage-current/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/home/jec/sage-current/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_0[46]>", line 1, in <module>
        y * RealNumber('1.0')                                                         # optional - magma###line 187:
    sage: y * 1.0                                                         # optional - magma
      File "element.pyx", line 1398, in sage.structure.element.RingElement.__mul__ (sage/structure/element.c:11337)
        return coercion_model.bin_op(left, right, mul)
      File "coerce.pyx", line 717, in sage.structure.coerce.CoercionModel_cache_maps.bin_op (sage/structure/coerce.c:6212)
        raise
      File "coerce.pyx", line 713, in sage.structure.coerce.CoercionModel_cache_maps.bin_op (sage/structure/coerce.c:6151)
        return PyObject_CallObject(op, xy)
      File "element.pyx", line 1393, in sage.structure.element.RingElement.__mul__ (sage/structure/element.c:11265)
        return (<RingElement>left)._mul_(<RingElement>right)
      File "element.pyx", line 1400, in sage.structure.element.RingElement._mul_ (sage/structure/element.c:11385)
        cpdef RingElement _mul_(self, RingElement right):
      File "/home/jec/sage-current/local/lib/python/site-packages/sage/interfaces/expect.py", line 1909, in _mul_
        return self._operation('*', right)
      File "/home/jec/sage-current/local/lib/python/site-packages/sage/interfaces/expect.py", line 1866, in _operation
        raise TypeError, msg
    TypeError: Error evaluating Magma code.
    IN:
[27]:=_sage_[19] * _sage_[25];
    OUT:
    >> _sage_[27]:=_sage_[19] * _sage_[25];
                              ^
    Runtime error in '*': Bad argument types
    Argument types given: RngUPolElt[RngInt], FldReElt

```
and this looks like some error in parsing the expected output (are you allowed two different "..."?) since it looks fine to me.  The only other things I can think of is that there may be different numbers of spaces in the expected and actual magma output!



---

archive/issue_comments_059823.json:
```json
{
    "body": "Changed keywords from none to **Magma**",
    "created_at": "2010-04-06T17:20:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59823",
    "user": "https://github.com/JohnCremona"
}
```

Changed keywords from none to **Magma**



---

archive/issue_comments_059824.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nJohn,\n\nI think you should give my patch a positive review anyways.  The problem above is that in Magma V2.16-7, this works fine:\n\n```\n[wstein@eno ~]$ magma\nMagma V2.16-7     Mon Apr 26 2010 22:51:34 on eno      [Seed = 294390646]\nType ? for help.  Type <Ctrl>-D to quit.\n> R<x> := PolynomialRing(Integers());\n> x*1.0;\n$.1\n> \n```\nHowever, in older versions of Magma, it doesn't:\n\n```\nflat:~ wstein$ magma\nMagma V2.15-11    Mon Apr 26 2010 19:53:21 on flat     [Seed = 4201111680]\nType ? for help.  Type <Ctrl>-D to quit.\n> R<x> := PolynomialRing(Integers());\n> x*1.0;\n\n>> x*1.0;\n    ^\nRuntime error in '*': Bad argument types\nArgument types given: RngUPolElt[RngInt], FldReElt\n```\n\nSince Magma's capabilities, etc., change a *lot* -- even from minor version to version -- I think the Sage optional doctests should be targeted at the latest released version of Magma.   \n\nNote that the computation is multiplying a polynomial over ZZ[x] by a floating point numbers.  In Sage, there is a beautiful coercion model that makes most such things \"just work\".  In Magma, one implements the '*' function for every conceivable choice of pairs of types... and I guess somebody got around to eventually implementing this one. \n\nJust to emphasize how totally arbitrary (and sad) Magma's system still is after all these years, notice that even in Magma V2.16-7, the same computation with polynomials over ZZ and rational numbers doesn't work!\n\n```\n> x + 1/2;        \n\n>> x + 1/2;\n     ^\nRuntime error in '+': Bad argument types\nArgument types given: RngUPolElt[RngInt], FldRatElt\n\n> x*(1/2);\n\n>> x*(1/2);\n    ^\nRuntime error in '*': Bad argument types\nArgument types given: RngUPolElt[RngInt], FldRatElt\n\n> \n```\n\nSage had the same sort of silly anomalies until people like David Harvey, Craig Citro, David Roe, and *Robert Bradshaw* and others stepped in and greatly improved the situation. \n\n```\nsage: R.<x> = ZZ[]\nsage: x * 1.0\nx\nsage: parent(x * 1.0)\nUnivariate Polynomial Ring in x over Real Field with 53 bits of precision\nsage: x + 1/2\nx + 1/2\nsage: (1/2)*x\n1/2*x\n```\n\nSage coercion is still of course far from perfect.  But it's also far from sucking. \n\n -- William",
    "created_at": "2010-04-27T02:59:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59824",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:7" align="right">comment:7</div>

John,

I think you should give my patch a positive review anyways.  The problem above is that in Magma V2.16-7, this works fine:

```
[wstein@eno ~]$ magma
Magma V2.16-7     Mon Apr 26 2010 22:51:34 on eno      [Seed = 294390646]
Type ? for help.  Type <Ctrl>-D to quit.
> R<x> := PolynomialRing(Integers());
> x*1.0;
$.1
> 
```
However, in older versions of Magma, it doesn't:

```
flat:~ wstein$ magma
Magma V2.15-11    Mon Apr 26 2010 19:53:21 on flat     [Seed = 4201111680]
Type ? for help.  Type <Ctrl>-D to quit.
> R<x> := PolynomialRing(Integers());
> x*1.0;

>> x*1.0;
    ^
Runtime error in '*': Bad argument types
Argument types given: RngUPolElt[RngInt], FldReElt
```

Since Magma's capabilities, etc., change a *lot* -- even from minor version to version -- I think the Sage optional doctests should be targeted at the latest released version of Magma.   

Note that the computation is multiplying a polynomial over ZZ[x] by a floating point numbers.  In Sage, there is a beautiful coercion model that makes most such things "just work".  In Magma, one implements the '*' function for every conceivable choice of pairs of types... and I guess somebody got around to eventually implementing this one. 

Just to emphasize how totally arbitrary (and sad) Magma's system still is after all these years, notice that even in Magma V2.16-7, the same computation with polynomials over ZZ and rational numbers doesn't work!

```
> x + 1/2;        

>> x + 1/2;
     ^
Runtime error in '+': Bad argument types
Argument types given: RngUPolElt[RngInt], FldRatElt

> x*(1/2);

>> x*(1/2);
    ^
Runtime error in '*': Bad argument types
Argument types given: RngUPolElt[RngInt], FldRatElt

> 
```

Sage had the same sort of silly anomalies until people like David Harvey, Craig Citro, David Roe, and *Robert Bradshaw* and others stepped in and greatly improved the situation. 

```
sage: R.<x> = ZZ[]
sage: x * 1.0
x
sage: parent(x * 1.0)
Univariate Polynomial Ring in x over Real Field with 53 bits of precision
sage: x + 1/2
x + 1/2
sage: (1/2)*x
1/2*x
```

Sage coercion is still of course far from perfect.  But it's also far from sucking. 

 -- William



---

archive/issue_events_097586.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-04-27T02:59:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-97586"
}
```



---

archive/issue_events_097587.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-04-27T02:59:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-97587"
}
```



---

archive/issue_comments_059825.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI just lost my posting here (cookie problem) and don't feel like rewriting it all....\n\nI only have C2.16-1 and the patch requires V2.16-7 or higher to pass, it seems, so I cannot verify it at present.\n\nIs it anywhere documented which version of Magma Sage relies on for positive tests?",
    "created_at": "2010-04-27T12:46:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59825",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:9" align="right">comment:9</div>

I just lost my posting here (cookie problem) and don't feel like rewriting it all....

I only have C2.16-1 and the patch requires V2.16-7 or higher to pass, it seems, so I cannot verify it at present.

Is it anywhere documented which version of Magma Sage relies on for positive tests?



---

archive/issue_comments_059826.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nWith Sage 4.4 and a newly installed magma V1.16-7 I still get falures in these files:\n\n```\n\tsage -t --only_optional=magma \"devel/sage/sage/rings/finite_rings/element_givaro.pyx\"\n\tsage -t --only_optional=magma \"devel/sage/sage/rings/polynomial/multi_polynomial.pyx\"\n\tsage -t --only_optional=magma \"devel/sage/sage/rings/polynomial/polynomial_element.pyx\"\n\tsage -t --only_optional=magma \"devel/sage/sage/rings/polynomial/polynomial_ring.py\"\n\tsage -t --only_optional=magma \"devel/sage/sage/schemes/elliptic_curves/ell_generic.py\"\n\tsage -t --only_optional=magma \"devel/sage/sage/schemes/hyperelliptic_curves/hyperelliptic_generic.py\"\n```\nSee http://www.warwick.ac.uk/staff/J.E.Cremona/magma.out for the full log.",
    "created_at": "2010-04-28T09:51:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59826",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:10" align="right">comment:10</div>

With Sage 4.4 and a newly installed magma V1.16-7 I still get falures in these files:

```
	sage -t --only_optional=magma "devel/sage/sage/rings/finite_rings/element_givaro.pyx"
	sage -t --only_optional=magma "devel/sage/sage/rings/polynomial/multi_polynomial.pyx"
	sage -t --only_optional=magma "devel/sage/sage/rings/polynomial/polynomial_element.pyx"
	sage -t --only_optional=magma "devel/sage/sage/rings/polynomial/polynomial_ring.py"
	sage -t --only_optional=magma "devel/sage/sage/schemes/elliptic_curves/ell_generic.py"
	sage -t --only_optional=magma "devel/sage/sage/schemes/hyperelliptic_curves/hyperelliptic_generic.py"
```
See http://www.warwick.ac.uk/staff/J.E.Cremona/magma.out for the full log.



---

archive/issue_comments_059827.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nA shorter log file with only the failing files is at http://www.warwick.ac.uk/staff/J.E.Cremona/magma.out.short",
    "created_at": "2010-04-28T10:20:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59827",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:11" align="right">comment:11</div>

A shorter log file with only the failing files is at http://www.warwick.ac.uk/staff/J.E.Cremona/magma.out.short



---

archive/issue_comments_059828.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nOh boy, it looks like sage-4.4 changed (from when I made the patch) and introduced a *bunch* of new issues :-(.   Sigh, I'll have to rewrite a bunch of the interface, evidently. Well at least I know now.",
    "created_at": "2010-05-01T07:11:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59828",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:12" align="right">comment:12</div>

Oh boy, it looks like sage-4.4 changed (from when I made the patch) and introduced a *bunch* of new issues :-(.   Sigh, I'll have to rewrite a bunch of the interface, evidently. Well at least I know now.



---

archive/issue_comments_059829.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nIs there any explanation of why these doc tests need to be revised? I can see \n\nsage/symbolic/expression.pyx\n\nhas a pretty trivial change, since Magma has decided to reverse the order of the outputs. \n\nBut others seem really odd. \n\nmagma(HyperellipticCurve(f)).IgusaClebschInvariants() # optional - magma \nremove: [ 0, -2048/375, -4096/25, -4881645568/84375 ] \nadd: [ -640, -20480, 1310720, 52160364544 ] \n\nWere the first set of Magma results wrong? If so, why was they used as a doctest? \n\nThis is probably my lack of mathematical knowledge showing here, but it appears to me Magma has output something completely different in many cases. Is the new output correct? Was the old output incorrect? \n\nDave",
    "created_at": "2010-06-02T20:29:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59829",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:13" align="right">comment:13</div>

Is there any explanation of why these doc tests need to be revised? I can see 

sage/symbolic/expression.pyx

has a pretty trivial change, since Magma has decided to reverse the order of the outputs. 

But others seem really odd. 

magma(HyperellipticCurve(f)).IgusaClebschInvariants() # optional - magma 
remove: [ 0, -2048/375, -4096/25, -4881645568/84375 ] 
add: [ -640, -20480, 1310720, 52160364544 ] 

Were the first set of Magma results wrong? If so, why was they used as a doctest? 

This is probably my lack of mathematical knowledge showing here, but it appears to me Magma has output something completely different in many cases. Is the new output correct? Was the old output incorrect? 

Dave



---

archive/issue_events_097588.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-06-22T17:49:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-97588"
}
```



---

archive/issue_events_097589.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-06-22T17:49:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-97589"
}
```



---

archive/issue_comments_059830.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@williamstein](#comment:12):\n> Oh boy, it looks like sage-4.4 changed (from when I made the patch) and introduced a *bunch* of new issues :-(.   Sigh, I'll have to rewrite a bunch of the interface, evidently. Well at least I know now.\n\nBased on this, I'm changing this to needs_work. Not volunteering to review, just trying to clean up trac a bit!",
    "created_at": "2010-06-22T17:49:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59830",
    "user": "https://github.com/rlmill"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@williamstein](#comment:12):
> Oh boy, it looks like sage-4.4 changed (from when I made the patch) and introduced a *bunch* of new issues :-(.   Sigh, I'll have to rewrite a bunch of the interface, evidently. Well at least I know now.

Based on this, I'm changing this to needs_work. Not volunteering to review, just trying to clean up trac a bit!



---

archive/issue_comments_059831.json:
```json
{
    "body": "Attachment: **[trac_7870-magma-doctest.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac_7870-magma-doctest.patch.gz)**\n\nReplaces all previous patches;  applies to 4.6.1 and Magma 2.17-4",
    "created_at": "2011-02-18T23:04:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59831",
    "user": "https://github.com/JohnCremona"
}
```

Attachment: **[trac_7870-magma-doctest.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac_7870-magma-doctest.patch.gz)**

Replaces all previous patches;  applies to 4.6.1 and Magma 2.17-4



---

archive/issue_comments_059832.json:
```json
{
    "body": "Changed author from **William Stein** to **William Stein, John Cremona**",
    "created_at": "2011-02-18T23:06:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59832",
    "user": "https://github.com/JohnCremona"
}
```

Changed author from **William Stein** to **William Stein, John Cremona**



---

archive/issue_events_097590.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2011-02-18T23:06:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-97590"
}
```



---

archive/issue_events_097591.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2011-02-18T23:06:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-97591"
}
```



---

archive/issue_comments_059833.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nNew patch passes all optional doctests on skynet (eno) with 4.6.1 and Magma 2.17-4.",
    "created_at": "2011-02-18T23:06:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59833",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:15" align="right">comment:15</div>

New patch passes all optional doctests on skynet (eno) with 4.6.1 and Magma 2.17-4.



---

archive/issue_comments_059834.json:
```json
{
    "body": "Changed reviewer from **John Cremona** to none",
    "created_at": "2011-02-18T23:06:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59834",
    "user": "https://github.com/JohnCremona"
}
```

Changed reviewer from **John Cremona** to none



---

archive/issue_comments_059835.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nI had to change one doctest, such that it also fits my output. This is definitely no issue, as I just added ... for the time. Apart from this: Perfect!\n\nFor the record, the patchbot and the release manager:\n\nApply trac_7870-magma-doctest.patch\nApply trac-7870-magma-doctest-review.patch",
    "created_at": "2011-03-02T09:57:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59835",
    "user": "https://github.com/sagetrac-mraum"
}
```

<div id="comment:16" align="right">comment:16</div>

I had to change one doctest, such that it also fits my output. This is definitely no issue, as I just added ... for the time. Apart from this: Perfect!

For the record, the patchbot and the release manager:

Apply trac_7870-magma-doctest.patch
Apply trac-7870-magma-doctest-review.patch



---

archive/issue_comments_059836.json:
```json
{
    "body": "Reviewer: **Martin Raum**",
    "created_at": "2011-03-02T09:57:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59836",
    "user": "https://github.com/sagetrac-mraum"
}
```

Reviewer: **Martin Raum**



---

archive/issue_events_097592.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2011-03-02T09:57:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-97592"
}
```



---

archive/issue_events_097593.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2011-03-02T09:57:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-97593"
}
```



---

archive/issue_comments_059837.json:
```json
{
    "body": "Attachment: **[trac-7870-magma-doctest-review.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review.patch.gz)**",
    "created_at": "2011-03-02T09:58:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59837",
    "user": "https://github.com/sagetrac-mraum"
}
```

Attachment: **[trac-7870-magma-doctest-review.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review.patch.gz)**



---

archive/issue_comments_059838.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nI'm happy with the reviewer's patch, and note that this ticket is still marked \"positive review\".",
    "created_at": "2011-03-02T16:48:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59838",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:17" align="right">comment:17</div>

I'm happy with the reviewer's patch, and note that this ticket is still marked "positive review".



---

archive/issue_comments_059839.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\n\n```\ntrac_7870-magma-doctest.patch and trac-7870-magma-doctest-review.patch\nwhen applied to 4.6.2 pass all optional doctests\n(-only-optional=magma) on skynet/eno with Magma-2.17-5.\n```",
    "created_at": "2011-03-04T16:26:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59839",
    "user": "https://github.com/sagetrac-mariah"
}
```

<div id="comment:18" align="right">comment:18</div>


```
trac_7870-magma-doctest.patch and trac-7870-magma-doctest-review.patch
when applied to 4.6.2 pass all optional doctests
(-only-optional=magma) on skynet/eno with Magma-2.17-5.
```



---

archive/issue_comments_059840.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@sagetrac-mraum](#comment:16):\n> For the record, the patchbot and the release manager:\n> \n> Apply trac_7870-magma-doctest.patch\n> Apply trac-7870-magma-doctest-review.patch\n\n**Please** in the future write this in the ticket **description**.  Thanks!",
    "created_at": "2011-03-08T09:02:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59840",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@sagetrac-mraum](#comment:16):
> For the record, the patchbot and the release manager:
> 
> Apply trac_7870-magma-doctest.patch
> Apply trac-7870-magma-doctest-review.patch

**Please** in the future write this in the ticket **description**.  Thanks!



---

archive/issue_comments_059841.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -17,5 +17,6 @@\n Total time for all tests: 364.0 seconds\n ```\n \n-\n-\n+**Apply:**\n+1. [attachment: trac_7870-magma-doctest.patch](https://github.com/sagemath/sage/files/ticket7870/trac_7870-magma-doctest.patch.gz)\n+2. [attachment: trac-7870-magma-doctest-review.patch](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review.patch.gz)\n``````\n",
    "created_at": "2011-03-08T09:02:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59841",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -17,5 +17,6 @@
 Total time for all tests: 364.0 seconds
 ```
 
-
-
+**Apply:**
+1. [attachment: trac_7870-magma-doctest.patch](https://github.com/sagemath/sage/files/ticket7870/trac_7870-magma-doctest.patch.gz)
+2. [attachment: trac-7870-magma-doctest-review.patch](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review.patch.gz)
``````




---

archive/issue_comments_059842.json:
```json
{
    "body": "Changed reviewer from **Martin Raum** to **Martin Raum, John Cremona**",
    "created_at": "2011-03-08T09:02:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59842",
    "user": "https://github.com/jdemeyer"
}
```

Changed reviewer from **Martin Raum** to **Martin Raum, John Cremona**



---

archive/issue_comments_059843.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@jdemeyer](#comment:19):\n> Replying to [@sagetrac-mraum](#comment:16):\n> > For the record, the patchbot and the release manager:\n> > \n> > Apply trac_7870-magma-doctest.patch\n> > Apply trac-7870-magma-doctest-review.patch\n\n> \n> **Please** in the future write this in the ticket **description**.  Thanks!\n\nThat makes a lot of sence and should probably be put in some sort of guide to using trac. Is there one specifically for Sage? \n\nI know I came unstuck recently when I put a link to an spkg in the description, but that spkg needed tekinfo (or whatever it was), so Francois posted one which did not need it. But mine was in the description, his one was less prominently placed in the notes, so you used mine and found it did not work. \n\nAt the very least, specifying the locations of .spkgs and what patches needed to be applied, should be mentioned on sage-devel, but ideally we need it documented on the trac server. \n\nDave",
    "created_at": "2011-03-08T09:37:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59843",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@jdemeyer](#comment:19):
> Replying to [@sagetrac-mraum](#comment:16):
> > For the record, the patchbot and the release manager:
> > 
> > Apply trac_7870-magma-doctest.patch
> > Apply trac-7870-magma-doctest-review.patch

> 
> **Please** in the future write this in the ticket **description**.  Thanks!

That makes a lot of sence and should probably be put in some sort of guide to using trac. Is there one specifically for Sage? 

I know I came unstuck recently when I put a link to an spkg in the description, but that spkg needed tekinfo (or whatever it was), so Francois posted one which did not need it. But mine was in the description, his one was less prominently placed in the notes, so you used mine and found it did not work. 

At the very least, specifying the locations of .spkgs and what patches needed to be applied, should be mentioned on sage-devel, but ideally we need it documented on the trac server. 

Dave



---

archive/issue_events_097594.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-08T12:49:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-97594"
}
```



---

archive/issue_events_097595.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-08T12:49:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-97595"
}
```



---

archive/issue_comments_059844.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nAll doctests involving magma should be marked `# optional - magma`.  I get various failures in `sage/rings/number_field/number_field.py`.",
    "created_at": "2011-03-08T12:49:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59844",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:21" align="right">comment:21</div>

All doctests involving magma should be marked `# optional - magma`.  I get various failures in `sage/rings/number_field/number_field.py`.



---

archive/issue_comments_059845.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@jdemeyer](#comment:21):\n> All doctests involving magma should be marked `# optional - magma`.  I get various failures in `sage/rings/number_field/number_field.py`.\n\nApologies, this refers to the new function I put in (_magma_polynomial_) where I did not tag the doctests as optional.  It's my fault (though William was sitting next to me at the time, so I blame him too!)",
    "created_at": "2011-03-08T17:09:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59845",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@jdemeyer](#comment:21):
> All doctests involving magma should be marked `# optional - magma`.  I get various failures in `sage/rings/number_field/number_field.py`.

Apologies, this refers to the new function I put in (_magma_polynomial_) where I did not tag the doctests as optional.  It's my fault (though William was sitting next to me at the time, so I blame him too!)



---

archive/issue_comments_059846.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nAttachment: **[trac-7870-magma-doctest-review2.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review2.patch.gz)**\n\nAnd it's my fault as well. I'm terribly sorry!\nJohn, do you have a maschine without magma to run tests for the above fix on? It was only one function that was missed.\n\nMartin",
    "created_at": "2011-03-08T17:42:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59846",
    "user": "https://github.com/sagetrac-mraum"
}
```

<div id="comment:23" align="right">comment:23</div>

Attachment: **[trac-7870-magma-doctest-review2.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review2.patch.gz)**

And it's my fault as well. I'm terribly sorry!
John, do you have a maschine without magma to run tests for the above fix on? It was only one function that was missed.

Martin



---

archive/issue_comments_059847.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nI don't think it is necessary to have a machine without magma.  Just run a complete test both with and with out the --optional-magma.  It is faster to run with that flag since only doctests with the optional magma flag are run.",
    "created_at": "2011-03-08T19:02:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59847",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:24" align="right">comment:24</div>

I don't think it is necessary to have a machine without magma.  Just run a complete test both with and with out the --optional-magma.  It is faster to run with that flag since only doctests with the optional magma flag are run.



---

archive/issue_events_097596.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-08T21:04:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-97596"
}
```



---

archive/issue_events_097597.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-08T21:04:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-97597"
}
```



---

archive/issue_comments_059848.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -20,3 +20,4 @@\n **Apply:**\n 1. [attachment: trac_7870-magma-doctest.patch](https://github.com/sagemath/sage/files/ticket7870/trac_7870-magma-doctest.patch.gz)\n 2. [attachment: trac-7870-magma-doctest-review.patch](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review.patch.gz)\n+3. [attachment: trac-7870-magma-doctest-review2.patch](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review2.patch.gz)\n``````\n",
    "created_at": "2011-03-08T21:04:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59848",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -20,3 +20,4 @@
 **Apply:**
 1. [attachment: trac_7870-magma-doctest.patch](https://github.com/sagemath/sage/files/ticket7870/trac_7870-magma-doctest.patch.gz)
 2. [attachment: trac-7870-magma-doctest-review.patch](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review.patch.gz)
+3. [attachment: trac-7870-magma-doctest-review2.patch](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review2.patch.gz)
``````




---

archive/issue_comments_059849.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nThis seems right. So, if everything is ok for you, also, give it a positive review.",
    "created_at": "2011-03-09T01:40:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59849",
    "user": "https://github.com/sagetrac-mraum"
}
```

<div id="comment:26" align="right">comment:26</div>

This seems right. So, if everything is ok for you, also, give it a positive review.



---

archive/issue_comments_059850.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nAccording to the `sage -h`, the option should be `-only-optional=magma` and **not** `--only-optional=magma`\n\n\nI don't have Magma, but do have Mathematica, so I thought I'd try\n\n```\ndrkirkby@hawk:~/sage-4.6.2.rc1$ ./sage -t -only_optional=mathematica devel/sage/sage\nsage -t -only_optional=mathematica \"devel/sage/sage/probability/all.py\"\n\t [0.1 s]\nsage -t -only_optional=mathematica \"devel/sage/sage/probability/__init__.py\"\n\t [0.1 s]\nsage -t -only_optional=mathematica \"devel/sage/sage/probability/random_variable.py\"\n```\n\nbut it seems to run every doctest, not just the Mathematica ones, which fail anyway, as noted at #8495. \n\n\nDave",
    "created_at": "2011-03-09T06:26:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59850",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:27" align="right">comment:27</div>

According to the `sage -h`, the option should be `-only-optional=magma` and **not** `--only-optional=magma`


I don't have Magma, but do have Mathematica, so I thought I'd try

```
drkirkby@hawk:~/sage-4.6.2.rc1$ ./sage -t -only_optional=mathematica devel/sage/sage
sage -t -only_optional=mathematica "devel/sage/sage/probability/all.py"
	 [0.1 s]
sage -t -only_optional=mathematica "devel/sage/sage/probability/__init__.py"
	 [0.1 s]
sage -t -only_optional=mathematica "devel/sage/sage/probability/random_variable.py"
```

but it seems to run every doctest, not just the Mathematica ones, which fail anyway, as noted at #8495. 


Dave



---

archive/issue_comments_059851.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nThis needs to be rebased to sage-4.7.alpha1.",
    "created_at": "2011-03-11T22:07:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59851",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:28" align="right">comment:28</div>

This needs to be rebased to sage-4.7.alpha1.



---

archive/issue_events_097598.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-11T22:07:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-97598"
}
```



---

archive/issue_events_097599.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-11T22:07:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-97599"
}
```



---

archive/issue_comments_059852.json:
```json
{
    "body": "Attachment: **[trac-7870-magma-doctest-review3.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review3.patch.gz)**",
    "created_at": "2011-03-12T20:55:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59852",
    "user": "https://github.com/sagetrac-mraum"
}
```

Attachment: **[trac-7870-magma-doctest-review3.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review3.patch.gz)**



---

archive/issue_comments_059853.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -18,6 +18,4 @@\n ```\n \n **Apply:**\n-1. [attachment: trac_7870-magma-doctest.patch](https://github.com/sagemath/sage/files/ticket7870/trac_7870-magma-doctest.patch.gz)\n-2. [attachment: trac-7870-magma-doctest-review.patch](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review.patch.gz)\n-3. [attachment: trac-7870-magma-doctest-review2.patch](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review2.patch.gz)\n+1. [attachment: trac-7870-magma-doctest-review3.patch](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review3.patch.gz)\n``````\n",
    "created_at": "2011-03-12T20:57:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59853",
    "user": "https://github.com/sagetrac-mraum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -18,6 +18,4 @@
 ```
 
 **Apply:**
-1. [attachment: trac_7870-magma-doctest.patch](https://github.com/sagemath/sage/files/ticket7870/trac_7870-magma-doctest.patch.gz)
-2. [attachment: trac-7870-magma-doctest-review.patch](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review.patch.gz)
-3. [attachment: trac-7870-magma-doctest-review2.patch](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review2.patch.gz)
+1. [attachment: trac-7870-magma-doctest-review3.patch](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review3.patch.gz)
``````




---

archive/issue_comments_059854.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nI rebased the patch to 4.7alpha1. Please only apply the last one: review3.\n\nCould anyone (John?) check this soon, so that we won't need to rebase it again?",
    "created_at": "2011-03-12T20:57:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59854",
    "user": "https://github.com/sagetrac-mraum"
}
```

<div id="comment:29" align="right">comment:29</div>

I rebased the patch to 4.7alpha1. Please only apply the last one: review3.

Could anyone (John?) check this soon, so that we won't need to rebase it again?



---

archive/issue_events_097600.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2011-03-12T20:57:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-97600"
}
```



---

archive/issue_events_097601.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2011-03-12T20:57:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-97601"
}
```



---

archive/issue_comments_059855.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@sagetrac-mraum](#comment:29):\n> I rebased the patch to 4.7alpha1. Please only apply the last one: review3.\n\nThanks.\n\n> \n> Could anyone (John?) check this soon, so that we won't need to rebase it again?\n\nOK, I'll try that soon.  (I have just been away for the weekend or I would have done it already.)",
    "created_at": "2011-03-14T01:26:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59855",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@sagetrac-mraum](#comment:29):
> I rebased the patch to 4.7alpha1. Please only apply the last one: review3.

Thanks.

> 
> Could anyone (John?) check this soon, so that we won't need to rebase it again?

OK, I'll try that soon.  (I have just been away for the weekend or I would have done it already.)



---

archive/issue_comments_059856.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nWith magma-V2.17-5 (which I downloaded and installed specially) and sage-4.7.alpha1 I tested everything both with and without -only-optional=magma and in both cases all tests passed.\n\nSo I am giving this a positive review (again).",
    "created_at": "2011-03-15T04:33:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59856",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:31" align="right">comment:31</div>

With magma-V2.17-5 (which I downloaded and installed specially) and sage-4.7.alpha1 I tested everything both with and without -only-optional=magma and in both cases all tests passed.

So I am giving this a positive review (again).



---

archive/issue_events_097602.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2011-03-15T04:33:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-97602"
}
```



---

archive/issue_events_097603.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2011-03-15T04:33:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-97603"
}
```



---

archive/issue_comments_059857.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nIt seems that your 'review3' patch is based on an **older** version of the patches, I get the number_field doctest failures again.",
    "created_at": "2011-03-17T14:39:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59857",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:32" align="right">comment:32</div>

It seems that your 'review3' patch is based on an **older** version of the patches, I get the number_field doctest failures again.



---

archive/issue_events_097604.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-17T14:39:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-97604"
}
```



---

archive/issue_events_097605.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-17T14:39:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-97605"
}
```



---

archive/issue_comments_059858.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nWell, yes. We really need to run the test on a setup without Magma then. I add the fix for this problem (which is review2 patch rebased to current Sage).",
    "created_at": "2011-03-17T16:29:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59858",
    "user": "https://github.com/sagetrac-mraum"
}
```

<div id="comment:33" align="right">comment:33</div>

Well, yes. We really need to run the test on a setup without Magma then. I add the fix for this problem (which is review2 patch rebased to current Sage).



---

archive/issue_events_097606.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2011-03-17T16:29:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-97606"
}
```



---

archive/issue_events_097607.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2011-03-17T16:29:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-97607"
}
```



---

archive/issue_comments_059859.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -19,3 +19,4 @@\n \n **Apply:**\n 1. [attachment: trac-7870-magma-doctest-review3.patch](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review3.patch.gz)\n+2. [attachment: trac-7870-magma-doctest-review4.patch](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review4.patch.gz)\n``````\n",
    "created_at": "2011-03-17T16:29:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59859",
    "user": "https://github.com/sagetrac-mraum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -19,3 +19,4 @@
 
 **Apply:**
 1. [attachment: trac-7870-magma-doctest-review3.patch](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review3.patch.gz)
+2. [attachment: trac-7870-magma-doctest-review4.patch](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review4.patch.gz)
``````




---

archive/issue_comments_059860.json:
```json
{
    "body": "Attachment: **[trac-7870-magma-doctest-review4.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review4.patch.gz)**",
    "created_at": "2011-03-17T16:30:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59860",
    "user": "https://github.com/sagetrac-mraum"
}
```

Attachment: **[trac-7870-magma-doctest-review4.patch.gz](https://github.com/sagemath/sage/files/ticket7870/trac-7870-magma-doctest-review4.patch.gz)**



---

archive/issue_comments_059861.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nWith the earlier patch (patch3) and the latest magma I tested everything and got no errors, so it seems like a waste of (my) time to do it all again.\n\nI do not understand mraum's comments about doing tests on a machine with no magma.  I ran complete tests with and without  -only-optional=magma.",
    "created_at": "2011-03-17T16:43:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59861",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:34" align="right">comment:34</div>

With the earlier patch (patch3) and the latest magma I tested everything and got no errors, so it seems like a waste of (my) time to do it all again.

I do not understand mraum's comments about doing tests on a machine with no magma.  I ran complete tests with and without  -only-optional=magma.



---

archive/issue_comments_059862.json:
```json
{
    "body": "Merged: **sage-4.7.alpha2**",
    "created_at": "2011-03-18T13:42:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59862",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.7.alpha2**



---

archive/issue_comments_059863.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nWorks now without magma.",
    "created_at": "2011-03-18T13:42:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59863",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:35" align="right">comment:35</div>

Works now without magma.



---

archive/issue_comments_059864.json:
```json
{
    "body": "Changed reviewer from **Martin Raum, John Cremona** to **Martin Raum, John Cremona, Jeroen Demeyer**",
    "created_at": "2011-03-18T13:42:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7870#issuecomment-59864",
    "user": "https://github.com/jdemeyer"
}
```

Changed reviewer from **Martin Raum, John Cremona** to **Martin Raum, John Cremona, Jeroen Demeyer**



---

archive/issue_events_097608.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-18T13:42:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-97608"
}
```



---

archive/issue_events_097609.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-18T13:42:36Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/7870",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7870#event-97609"
}
```
