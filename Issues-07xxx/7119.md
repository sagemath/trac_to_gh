# Issue 7119: Redundant minus sign in PolyDict polynomial

archive/issues_007119.json:
```json
{
    "body": "There is a tiny bug in the polydict implementation of multivariate\npolynomial ring. \n\n```\nsage: from sage.rings.polynomial.multi_polynomial_ring import MPolynomialRing_polydict\nsage: R.<x,y>=MPolynomialRing_polydict(GF(2),2,order='lex')\nsage: R\nMultivariate Polynomial Ring in x, y over Finite Field of size 2\nsage: f=x+y\nsage: f.lt()\n-x\nsage: f.lm()\n-x\n```\n\nThe minus sign in \"-x\" is redundant\n\n\nAssignee: @kwankyu\n\nResolution: fixed\n\nAuthor: Kwankyu Lee\n\nReviewer: Adam Webb\n\nMerged: sage-4.2.alpha0\n\nIssue created by migration from https://trac.sagemath.org/ticket/7119\n\n",
    "closed_at": "2009-10-15T15:33:32Z",
    "created_at": "2009-10-05T04:49:57Z",
    "labels": [
        "component: basic arithmetic",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.2",
    "title": "Redundant minus sign in PolyDict polynomial",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/7119",
    "user": "https://github.com/kwankyu"
}
```
There is a tiny bug in the polydict implementation of multivariate
polynomial ring. 

```
sage: from sage.rings.polynomial.multi_polynomial_ring import MPolynomialRing_polydict
sage: R.<x,y>=MPolynomialRing_polydict(GF(2),2,order='lex')
sage: R
Multivariate Polynomial Ring in x, y over Finite Field of size 2
sage: f=x+y
sage: f.lt()
-x
sage: f.lm()
-x
```

The minus sign in "-x" is redundant


Assignee: @kwankyu

Resolution: fixed

Author: Kwankyu Lee

Reviewer: Adam Webb

Merged: sage-4.2.alpha0

Issue created by migration from https://trac.sagemath.org/ticket/7119





---

archive/issue_comments_074477.json:
```json
{
    "body": "Changing status from new to assigned.",
    "created_at": "2009-10-05T04:59:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7119#issuecomment-74477",
    "user": "https://github.com/kwankyu"
}
```

Changing status from new to assigned.



---

archive/issue_comments_074478.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2009-10-05T04:59:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7119#issuecomment-74478",
    "user": "https://github.com/kwankyu"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_074479.json:
```json
{
    "body": "<a id='comment:1'></a>\nAttachment [trac7119.patch](tarball://root/attachments/some-uuid/ticket7119/trac7119.patch) by @kwankyu created at 2009-10-05 04:59:59\n\nThe patch corrects the bug.",
    "created_at": "2009-10-05T04:59:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7119#issuecomment-74479",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:1'></a>
Attachment [trac7119.patch](tarball://root/attachments/some-uuid/ticket7119/trac7119.patch) by @kwankyu created at 2009-10-05 04:59:59

The patch corrects the bug.



---

archive/issue_comments_074480.json:
```json
{
    "body": "Changing author from \"\" to \"Kwankyu Lee\"",
    "created_at": "2009-10-05T04:59:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7119#issuecomment-74480",
    "user": "https://github.com/kwankyu"
}
```

Changing author from "" to "Kwankyu Lee"



---

archive/issue_comments_074481.json:
```json
{
    "body": "Changing assignee from Kwankyu Lee to @kwankyu.",
    "created_at": "2009-10-05T04:59:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7119#issuecomment-74481",
    "user": "https://github.com/kwankyu"
}
```

Changing assignee from Kwankyu Lee to @kwankyu.



---

archive/issue_comments_074482.json:
```json
{
    "body": "<a id='comment:2'></a>\nI think a doctest should be added for the case that the patch fixes. ~ adam",
    "created_at": "2009-10-10T10:19:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7119#issuecomment-74482",
    "user": "https://github.com/maxthemouse"
}
```

<a id='comment:2'></a>
I think a doctest should be added for the case that the patch fixes. ~ adam



---

archive/issue_comments_074483.json:
```json
{
    "body": "<a id='comment:3'></a>\nAttachment [trac_#7119.patch](tarball://root/attachments/some-uuid/ticket7119/trac_#7119.patch) by @kwankyu created at 2009-10-12 08:03:55\n\nThe new patch includes doctests and a bugfix of the patch itself.\n\nMartin says:\n\nAlex Ghitza wrote a patch to fix printing of multivariate polynomials in\ngeneral\n\n  http://trac.sagemath.org/sage_trac/ticket/6551\n\nwhich might contain your fix. However, it needs some work before it can go in.\n\n\nHowever, it seems to me that Alex Ghitza's patch is independent with the current patch.",
    "created_at": "2009-10-12T08:03:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7119#issuecomment-74483",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:3'></a>
Attachment [trac_#7119.patch](tarball://root/attachments/some-uuid/ticket7119/trac_#7119.patch) by @kwankyu created at 2009-10-12 08:03:55

The new patch includes doctests and a bugfix of the patch itself.

Martin says:

Alex Ghitza wrote a patch to fix printing of multivariate polynomials in
general

  http://trac.sagemath.org/sage_trac/ticket/6551

which might contain your fix. However, it needs some work before it can go in.


However, it seems to me that Alex Ghitza's patch is independent with the current patch.



---

archive/issue_comments_074484.json:
```json
{
    "body": "<a id='comment:4'></a>\nThe present bug results from the class PolyDict in sage/rings/polynomial/\npolydict.pyx rests upon \"zero\" optional parameter, which defaults to\ninteger 0, to decide the characteristic of the parent ring when its\nobject is printed. On the other hand, f.lt() does not set the \"zero\"\nparameter in sage/rings/polynomial/multi_polynomial_element.py. \n\nI think patching the polydict.pyx so as not to rely on the \"zero\" paramter might be better way to correct the bug. But this is out of my reach.",
    "created_at": "2009-10-12T08:12:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7119#issuecomment-74484",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:4'></a>
The present bug results from the class PolyDict in sage/rings/polynomial/
polydict.pyx rests upon "zero" optional parameter, which defaults to
integer 0, to decide the characteristic of the parent ring when its
object is printed. On the other hand, f.lt() does not set the "zero"
parameter in sage/rings/polynomial/multi_polynomial_element.py. 

I think patching the polydict.pyx so as not to rely on the "zero" paramter might be better way to correct the bug. But this is out of my reach.



---

archive/issue_comments_074485.json:
```json
{
    "body": "<a id='comment:5'></a>\nWhat does the TESTS: label do? When I build the reference the Test section is also included. In which case, why not just add to the Examples section (separated by a line with a :: to start a new section)?\n\nI think it would be easier to use something like:\n\n```\nsage: R.<x,y>=PolynomialRing(GF(2),2,order='lex')\nsage: f=x+y\nsage: f.lt()\nx\n```\n\nThen you don't need the long import statement.  What do you think?\n\nAdam",
    "created_at": "2009-10-12T11:25:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7119#issuecomment-74485",
    "user": "https://github.com/maxthemouse"
}
```

<a id='comment:5'></a>
What does the TESTS: label do? When I build the reference the Test section is also included. In which case, why not just add to the Examples section (separated by a line with a :: to start a new section)?

I think it would be easier to use something like:

```
sage: R.<x,y>=PolynomialRing(GF(2),2,order='lex')
sage: f=x+y
sage: f.lt()
x
```

Then you don't need the long import statement.  What do you think?

Adam



---

archive/issue_comments_074486.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Adam Webb\"",
    "created_at": "2009-10-12T11:25:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7119#issuecomment-74486",
    "user": "https://github.com/maxthemouse"
}
```

Changing reviewer from "" to "Adam Webb"



---

archive/issue_comments_074487.json:
```json
{
    "body": "suggested changes",
    "created_at": "2009-10-12T11:42:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7119#issuecomment-74487",
    "user": "https://github.com/maxthemouse"
}
```

suggested changes



---

archive/issue_comments_074488.json:
```json
{
    "body": "<a id='comment:7'></a>\nAttachment [trac_7119_b.patch](tarball://root/attachments/some-uuid/ticket7119/trac_7119_b.patch) by @maxthemouse created at 2009-10-12 11:43:09\n\nI added a \"suggested changes\" patch just to clarify. ~ Adam",
    "created_at": "2009-10-12T11:43:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7119#issuecomment-74488",
    "user": "https://github.com/maxthemouse"
}
```

<a id='comment:7'></a>
Attachment [trac_7119_b.patch](tarball://root/attachments/some-uuid/ticket7119/trac_7119_b.patch) by @maxthemouse created at 2009-10-12 11:43:09

I added a "suggested changes" patch just to clarify. ~ Adam



---

archive/issue_comments_074489.json:
```json
{
    "body": "<a id='comment:8'></a>\nHi Adam,\n\nThe bug is in the polydict engine of multivariate polynomial rings. So your doctest does not check the bug.\n\nAbout the tests section in the docstring, see this thread in sage-devel: http://groups.google.com/group/sage-devel/browse_frm/thread/2c86e8b59d670502\n\nTo summarize, your \"suggested changes\" should be reverted.\n\nKwankyu",
    "created_at": "2009-10-13T02:14:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7119#issuecomment-74489",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:8'></a>
Hi Adam,

The bug is in the polydict engine of multivariate polynomial rings. So your doctest does not check the bug.

About the tests section in the docstring, see this thread in sage-devel: http://groups.google.com/group/sage-devel/browse_frm/thread/2c86e8b59d670502

To summarize, your "suggested changes" should be reverted.

Kwankyu



---

archive/issue_comments_074490.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2009-10-13T06:18:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7119#issuecomment-74490",
    "user": "https://github.com/maxthemouse"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_074491.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2009-10-13T06:18:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7119#issuecomment-74491",
    "user": "https://github.com/maxthemouse"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_074492.json:
```json
{
    "body": "<a id='comment:9'></a>\nHi,\n\nThat all sounds fine to me. In that case my suggested patch can be ignored. If you know how, you can delete it. In any case, trac_#7119.patch would be the correct patch to apply.\n\nCheers,\n\nAdam",
    "created_at": "2009-10-13T06:18:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7119#issuecomment-74492",
    "user": "https://github.com/maxthemouse"
}
```

<a id='comment:9'></a>
Hi,

That all sounds fine to me. In that case my suggested patch can be ignored. If you know how, you can delete it. In any case, trac_#7119.patch would be the correct patch to apply.

Cheers,

Adam



---

archive/issue_events_021461.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2009-10-15T15:33:32Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/7119",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/7119#event-21461"
}
```



---

archive/issue_comments_074493.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2009-10-15T15:33:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7119#issuecomment-74493",
    "user": "https://github.com/mwhansen"
}
```

Resolution: fixed



---

archive/issue_comments_074494.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-4.2.alpha0\"",
    "created_at": "2009-10-15T15:33:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7119",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7119#issuecomment-74494",
    "user": "https://github.com/mwhansen"
}
```

Changing merged from "" to "sage-4.2.alpha0"
