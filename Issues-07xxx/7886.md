# Issue 7886: Implement conjugacy classes

archive/issues_007886.json:
```json
{
    "assignees": [
        "https://github.com/wdjoyner"
    ],
    "body": "GAP has several functions concerning conjugacy classes of groups. This patch include a wrapper for gap conjugacy classes for groups in which they are available and a (kind of) naive fallback method based on TransitiveIdeal for the remaining cases.\n\nApply:\n\n* [attachment: trac_7886_conjugacy_classes_combined.patch](https://github.com/sagemath/sage/files/ticket7886/trac_7886_conjugacy_classes_combined.patch.gz)\n* [attachment: trac_7886-conjugacy_classes-review-ts.patch](https://github.com/sagemath/sage/files/ticket7886/trac_7886-conjugacy_classes-review-ts.patch.gz)\n\n\nDepends on #6495\n\nCC:  @wdjoyner @jdemeyer @sagetrac-jlopez\n\nReviewer: **David Joyner, Travis Scrimshaw**\n\nAuthor: **Javier L\u00f3pez Pe\u00f1a**\n\nMerged: **sage-5.8.beta2**\n\nComponent: **group theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/7886_\n\n",
    "closed_at": "2013-02-28T10:32:12Z",
    "created_at": "2010-01-09T21:49:27Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20group%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Implement conjugacy classes",
    "type": "issue",
    "updated_at": "2013-02-28T20:55:36Z",
    "url": "https://github.com/sagemath/sage/issues/7886",
    "user": "https://github.com/sagetrac-jlopez"
}
```
GAP has several functions concerning conjugacy classes of groups. This patch include a wrapper for gap conjugacy classes for groups in which they are available and a (kind of) naive fallback method based on TransitiveIdeal for the remaining cases.

Apply:

* [attachment: trac_7886_conjugacy_classes_combined.patch](https://github.com/sagemath/sage/files/ticket7886/trac_7886_conjugacy_classes_combined.patch.gz)
* [attachment: trac_7886-conjugacy_classes-review-ts.patch](https://github.com/sagemath/sage/files/ticket7886/trac_7886-conjugacy_classes-review-ts.patch.gz)


Depends on #6495

CC:  @wdjoyner @jdemeyer @sagetrac-jlopez

Reviewer: **David Joyner, Travis Scrimshaw**

Author: **Javier López Peña**

Merged: **sage-5.8.beta2**

Component: **group theory**

_Issue created by migration from https://trac.sagemath.org/ticket/7886_





---

archive/issue_events_096974.json:
```json
{
    "actor": "https://github.com/sagetrac-jlopez",
    "created_at": "2010-01-09T21:49:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "milestone_number": null,
    "milestone_title": "sage-5.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7886#event-96974"
}
```



---

archive/issue_events_096975.json:
```json
{
    "actor": "https://github.com/sagetrac-jlopez",
    "created_at": "2010-01-09T21:49:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20group%20theory",
    "label_color": "0000ff",
    "label_name": "c: group theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7886#event-96975"
}
```



---

archive/issue_events_096976.json:
```json
{
    "actor": "https://github.com/sagetrac-jlopez",
    "created_at": "2010-01-09T21:49:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7886#event-96976"
}
```



---

archive/issue_events_096977.json:
```json
{
    "actor": "https://github.com/sagetrac-jlopez",
    "created_at": "2010-01-09T21:49:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7886#event-96977"
}
```



---

archive/issue_events_096978.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2010-01-09T21:49:27Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "subject": "https://github.com/sagetrac-jlopez",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7886#event-96978"
}
```



---

archive/issue_events_096979.json:
```json
{
    "actor": "https://github.com/sagetrac-jlopez",
    "created_at": "2010-01-09T21:49:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7886#event-96979"
}
```



---

archive/issue_comments_060005.json:
```json
{
    "body": "Implementation of a python class for conjugacy classes, wrapping some GAP functions and some native python methods.",
    "created_at": "2010-01-09T21:50:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60005",
    "user": "https://github.com/sagetrac-jlopez"
}
```

Implementation of a python class for conjugacy classes, wrapping some GAP functions and some native python methods.



---

archive/issue_comments_060006.json:
```json
{
    "body": "Attachment: **[conjugacy_classes.patch.gz](https://github.com/sagemath/sage/files/ticket7886/conjugacy_classes.patch.gz)**\n\nAttachment: **[trac_7886_conjugacy_classes.patch.gz](https://github.com/sagemath/sage/files/ticket7886/trac_7886_conjugacy_classes.patch.gz)**\n\nConjugacy classes code",
    "created_at": "2011-12-06T18:01:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60006",
    "user": "https://github.com/sagetrac-jlopez"
}
```

Attachment: **[conjugacy_classes.patch.gz](https://github.com/sagemath/sage/files/ticket7886/conjugacy_classes.patch.gz)**

Attachment: **[trac_7886_conjugacy_classes.patch.gz](https://github.com/sagemath/sage/files/ticket7886/trac_7886_conjugacy_classes.patch.gz)**

Conjugacy classes code



---

archive/issue_events_096980.json:
```json
{
    "actor": "https://github.com/sagetrac-jlopez",
    "created_at": "2011-12-06T18:04:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7886#event-96980"
}
```



---

archive/issue_comments_060007.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nPatch submitted. All tests pass on my machine (OX-X 10.6.8) with the exception of the ConjugacyClass Testsuite, which fails testing equality. I have no idea how the testsuite works, so could use some help here.",
    "created_at": "2011-12-06T18:04:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60007",
    "user": "https://github.com/sagetrac-jlopez"
}
```

<div id="comment:1" align="right">comment:1</div>

Patch submitted. All tests pass on my machine (OX-X 10.6.8) with the exception of the ConjugacyClass Testsuite, which fails testing equality. I have no idea how the testsuite works, so could use some help here.



---

archive/issue_comments_060008.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nFor the patchbot:\n\nApply trac_7886_conjugacy_classes.patch",
    "created_at": "2011-12-06T18:05:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60008",
    "user": "https://github.com/sagetrac-jlopez"
}
```

<div id="comment:2" align="right">comment:2</div>

For the patchbot:

Apply trac_7886_conjugacy_classes.patch



---

archive/issue_comments_060009.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nOops! Forgot to add the new module to the patch, here it is!",
    "created_at": "2011-12-06T18:56:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60009",
    "user": "https://github.com/sagetrac-jlopez"
}
```

<div id="comment:3" align="right">comment:3</div>

Oops! Forgot to add the new module to the patch, here it is!



---

archive/issue_comments_060010.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nApply trac_7886_conjugacy_classes_module.patch, trac_7886_conjugacy_classes.patch",
    "created_at": "2011-12-06T18:56:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60010",
    "user": "https://github.com/sagetrac-jlopez"
}
```

<div id="comment:4" align="right">comment:4</div>

Apply trac_7886_conjugacy_classes_module.patch, trac_7886_conjugacy_classes.patch



---

archive/issue_comments_060011.json:
```json
{
    "body": "conjugacy_classes.py module with passing Testsuite",
    "created_at": "2011-12-07T16:45:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60011",
    "user": "https://github.com/sagetrac-jlopez"
}
```

conjugacy_classes.py module with passing Testsuite



---

archive/issue_comments_060012.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nAttachment: **[trac_7886_conjugacy_classes_module.patch.gz](https://github.com/sagemath/sage/files/ticket7886/trac_7886_conjugacy_classes_module.patch.gz)**\n\nUpdated the conjugacy_classes.py module with the fixed `_cmp_` method so that the testsuite passes. All test pass on my machine, so ready for review.",
    "created_at": "2011-12-07T16:46:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60012",
    "user": "https://github.com/sagetrac-jlopez"
}
```

<div id="comment:5" align="right">comment:5</div>

Attachment: **[trac_7886_conjugacy_classes_module.patch.gz](https://github.com/sagemath/sage/files/ticket7886/trac_7886_conjugacy_classes_module.patch.gz)**

Updated the conjugacy_classes.py module with the fixed `_cmp_` method so that the testsuite passes. All test pass on my machine, so ready for review.



---

archive/issue_comments_060013.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,6 @@\n-GAP has several functions concerning conjugacy classes of groups. It would be nice to have a way to access such functions from Sage.\n+GAP has several functions concerning conjugacy classes of groups. This patch include a wrapper for gap conjugacy classes for groups in which they are available and a (for now, inefficient) naive fallback method for the remaining cases.\n+\n+Apply:\n+* [trac_7886_conjugacy_classes_module.patch]\n+* [trac_7886_conjugacy_classes.patch]\n+\n``````\n",
    "created_at": "2011-12-08T11:21:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60013",
    "user": "https://github.com/sagetrac-jlopez"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,6 @@
-GAP has several functions concerning conjugacy classes of groups. It would be nice to have a way to access such functions from Sage.
+GAP has several functions concerning conjugacy classes of groups. This patch include a wrapper for gap conjugacy classes for groups in which they are available and a (for now, inefficient) naive fallback method for the remaining cases.
+
+Apply:
+* [trac_7886_conjugacy_classes_module.patch]
+* [trac_7886_conjugacy_classes.patch]
+
``````




---

archive/issue_comments_060014.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n GAP has several functions concerning conjugacy classes of groups. This patch include a wrapper for gap conjugacy classes for groups in which they are available and a (for now, inefficient) naive fallback method for the remaining cases.\n \n Apply:\n-* [trac_7886_conjugacy_classes_module.patch]\n-* [trac_7886_conjugacy_classes.patch]\n+* [attachment: trac_7886_conjugacy_classes_module.patch]\n+* [attachment: trac_7886_conjugacy_classes.patch]\n \n``````\n",
    "created_at": "2011-12-08T11:24:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60014",
    "user": "https://github.com/sagetrac-jlopez"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 GAP has several functions concerning conjugacy classes of groups. This patch include a wrapper for gap conjugacy classes for groups in which they are available and a (for now, inefficient) naive fallback method for the remaining cases.
 
 Apply:
-* [trac_7886_conjugacy_classes_module.patch]
-* [trac_7886_conjugacy_classes.patch]
+* [attachment: trac_7886_conjugacy_classes_module.patch]
+* [attachment: trac_7886_conjugacy_classes.patch]
 
``````




---

archive/issue_comments_060015.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThe code looks fine to me. I tested it on a 10.6.8 mac under sage-4.8.a3 and on a Ubuntu 10.04 (Lucid Lynx) machine under sage-4.8.a1.\n\nThere was a discussion of cached methods in sage-devel, but I'm not sure how that relates to this ticket, so I'm giving this a positive review. Maybe changes, if any, from that thread can go in a separate ticket.",
    "created_at": "2011-12-09T14:37:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60015",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:8" align="right">comment:8</div>

The code looks fine to me. I tested it on a 10.6.8 mac under sage-4.8.a3 and on a Ubuntu 10.04 (Lucid Lynx) machine under sage-4.8.a1.

There was a discussion of cached methods in sage-devel, but I'm not sure how that relates to this ticket, so I'm giving this a positive review. Maybe changes, if any, from that thread can go in a separate ticket.



---

archive/issue_events_096981.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2011-12-09T14:37:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7886#event-96981"
}
```



---

archive/issue_events_096982.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2011-12-09T14:37:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7886#event-96982"
}
```



---

archive/issue_comments_060016.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n GAP has several functions concerning conjugacy classes of groups. This patch include a wrapper for gap conjugacy classes for groups in which they are available and a (for now, inefficient) naive fallback method for the remaining cases.\n \n Apply:\n-* [attachment: trac_7886_conjugacy_classes_module.patch]\n-* [attachment: trac_7886_conjugacy_classes.patch]\n+* [attachment: trac_7886_conjugacy_classes_module.patch](https://github.com/sagemath/sage/files/ticket7886/trac_7886_conjugacy_classes_module.patch.gz)\n+* [attachment: trac_7886_conjugacy_classes.patch](https://github.com/sagemath/sage/files/ticket7886/trac_7886_conjugacy_classes.patch.gz)\n \n``````\n",
    "created_at": "2011-12-10T21:39:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60016",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 GAP has several functions concerning conjugacy classes of groups. This patch include a wrapper for gap conjugacy classes for groups in which they are available and a (for now, inefficient) naive fallback method for the remaining cases.
 
 Apply:
-* [attachment: trac_7886_conjugacy_classes_module.patch]
-* [attachment: trac_7886_conjugacy_classes.patch]
+* [attachment: trac_7886_conjugacy_classes_module.patch](https://github.com/sagemath/sage/files/ticket7886/trac_7886_conjugacy_classes_module.patch.gz)
+* [attachment: trac_7886_conjugacy_classes.patch](https://github.com/sagemath/sage/files/ticket7886/trac_7886_conjugacy_classes.patch.gz)
 
``````




---

archive/issue_comments_060017.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nIn the file `sage/groups/perm_gps/permgroup.py`, you use Unicode but the encoding has not been declared to be utf-8.\n\nSee [http://www.python.org/dev/peps/pep-0263/](http://www.python.org/dev/peps/pep-0263/)",
    "created_at": "2011-12-11T10:31:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60017",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:10" align="right">comment:10</div>

In the file `sage/groups/perm_gps/permgroup.py`, you use Unicode but the encoding has not been declared to be utf-8.

See [http://www.python.org/dev/peps/pep-0263/](http://www.python.org/dev/peps/pep-0263/)



---

archive/issue_events_096983.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-11T10:31:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7886#event-96983"
}
```



---

archive/issue_events_096984.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-11T10:31:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7886#event-96984"
}
```



---

archive/issue_comments_060018.json:
```json
{
    "body": "Work Issues: **PEP 0263**",
    "created_at": "2011-12-11T10:31:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60018",
    "user": "https://github.com/jdemeyer"
}
```

Work Issues: **PEP 0263**



---

archive/issue_comments_060019.json:
```json
{
    "body": "Fixed encoding and improvement of naive set method.",
    "created_at": "2011-12-12T11:48:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60019",
    "user": "https://github.com/sagetrac-jlopez"
}
```

Fixed encoding and improvement of naive set method.



---

archive/issue_events_096985.json:
```json
{
    "actor": "https://github.com/sagetrac-jlopez",
    "created_at": "2011-12-12T11:51:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7886#event-96985"
}
```



---

archive/issue_events_096986.json:
```json
{
    "actor": "https://github.com/sagetrac-jlopez",
    "created_at": "2011-12-12T11:51:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7886#event-96986"
}
```



---

archive/issue_comments_060020.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nAttachment: **[trac_7886_conjugacy_classes_encoding_fix.patch.gz](https://github.com/sagemath/sage/files/ticket7886/trac_7886_conjugacy_classes_encoding_fix.patch.gz)**\n\nSorry, I thought we were using utf-8 by default. Fixed the encoding in permgroup.py and conjugacy_classes.py\nAlso implemented a more efficient fallback method using TransitiveIdeal.\nNeeds review.",
    "created_at": "2011-12-12T11:51:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60020",
    "user": "https://github.com/sagetrac-jlopez"
}
```

<div id="comment:11" align="right">comment:11</div>

Attachment: **[trac_7886_conjugacy_classes_encoding_fix.patch.gz](https://github.com/sagemath/sage/files/ticket7886/trac_7886_conjugacy_classes_encoding_fix.patch.gz)**

Sorry, I thought we were using utf-8 by default. Fixed the encoding in permgroup.py and conjugacy_classes.py
Also implemented a more efficient fallback method using TransitiveIdeal.
Needs review.



---

archive/issue_comments_060021.json:
```json
{
    "body": "Changed work issues from **PEP 0263** to none",
    "created_at": "2011-12-12T11:51:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60021",
    "user": "https://github.com/sagetrac-jlopez"
}
```

Changed work issues from **PEP 0263** to none



---

archive/issue_comments_060022.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,4 +3,5 @@\n Apply:\n * [attachment: trac_7886_conjugacy_classes_module.patch](https://github.com/sagemath/sage/files/ticket7886/trac_7886_conjugacy_classes_module.patch.gz)\n * [attachment: trac_7886_conjugacy_classes.patch](https://github.com/sagemath/sage/files/ticket7886/trac_7886_conjugacy_classes.patch.gz)\n+* [attachment: trac_7886_conjugacy_classes_encoding_fix.patch](https://github.com/sagemath/sage/files/ticket7886/trac_7886_conjugacy_classes_encoding_fix.patch.gz)\n \n``````\n",
    "created_at": "2011-12-12T11:51:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60022",
    "user": "https://github.com/sagetrac-jlopez"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,4 +3,5 @@
 Apply:
 * [attachment: trac_7886_conjugacy_classes_module.patch](https://github.com/sagemath/sage/files/ticket7886/trac_7886_conjugacy_classes_module.patch.gz)
 * [attachment: trac_7886_conjugacy_classes.patch](https://github.com/sagemath/sage/files/ticket7886/trac_7886_conjugacy_classes.patch.gz)
+* [attachment: trac_7886_conjugacy_classes_encoding_fix.patch](https://github.com/sagemath/sage/files/ticket7886/trac_7886_conjugacy_classes_encoding_fix.patch.gz)
 
``````




---

archive/issue_comments_060023.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nFor the patchbot:\nApply trac_7886_conjugacy_classes_module.patch, trac_7886_conjugacy_classes.patch, trac_7886_conjugacy_classes_encoding_fix.patch",
    "created_at": "2011-12-12T12:00:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60023",
    "user": "https://github.com/sagetrac-jlopez"
}
```

<div id="comment:12" align="right">comment:12</div>

For the patchbot:
Apply trac_7886_conjugacy_classes_module.patch, trac_7886_conjugacy_classes.patch, trac_7886_conjugacy_classes_encoding_fix.patch



---

archive/issue_comments_060024.json:
```json
{
    "body": "Reviewer: **David Joyner**",
    "created_at": "2012-02-08T09:01:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60024",
    "user": "https://github.com/sagetrac-jlopez"
}
```

Reviewer: **David Joyner**



---

archive/issue_comments_060025.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nJust a little bump. Jeroen, can you please check that the UTF encoding is working properly now? David Joyner already reviewed the math-related part of the ticket.",
    "created_at": "2012-02-08T09:01:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60025",
    "user": "https://github.com/sagetrac-jlopez"
}
```

<div id="comment:13" align="right">comment:13</div>

Just a little bump. Jeroen, can you please check that the UTF encoding is working properly now? David Joyner already reviewed the math-related part of the ticket.



---

archive/issue_events_096987.json:
```json
{
    "actor": "https://github.com/tkluck",
    "created_at": "2013-01-03T20:00:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7886#event-96987"
}
```



---

archive/issue_events_096988.json:
```json
{
    "actor": "https://github.com/tkluck",
    "created_at": "2013-01-03T20:00:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7886#event-96988"
}
```



---

archive/issue_comments_060026.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nThis has been lingering on trac for a while; thought I could review it. I tried to apply these patches to 5.5 in the given order.\n\nThe second one gives\n\n```\napplying https://github.com/sagemath/sage/files/ticket7886/trac_7886_conjugacy_classes.patch.gz\npatching file sage/groups/perm_gps/permgroup.py\nHunk #1 succeeded at 95 with fuzz 2 (offset 3 lines).\nHunk #2 FAILED at 132\n1 out of 3 hunks FAILED -- saving rejects to file sage/groups/perm_gps/permgroup.py.rej\nabort: patch failed to apply\n```\n\nIs it possible to rebase them? I'll set this ticket to 'needs work' in the mean time.",
    "created_at": "2013-01-03T20:00:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60026",
    "user": "https://github.com/tkluck"
}
```

<div id="comment:14" align="right">comment:14</div>

This has been lingering on trac for a while; thought I could review it. I tried to apply these patches to 5.5 in the given order.

The second one gives

```
applying https://github.com/sagemath/sage/files/ticket7886/trac_7886_conjugacy_classes.patch.gz
patching file sage/groups/perm_gps/permgroup.py
Hunk #1 succeeded at 95 with fuzz 2 (offset 3 lines).
Hunk #2 FAILED at 132
1 out of 3 hunks FAILED -- saving rejects to file sage/groups/perm_gps/permgroup.py.rej
abort: patch failed to apply
```

Is it possible to rebase them? I'll set this ticket to 'needs work' in the mean time.



---

archive/issue_comments_060027.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nI will give it a go during the weekend. Thanks for volunteering for reviewing!",
    "created_at": "2013-01-31T19:53:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60027",
    "user": "https://github.com/sagetrac-jlopez"
}
```

<div id="comment:15" align="right">comment:15</div>

I will give it a go during the weekend. Thanks for volunteering for reviewing!



---

archive/issue_comments_060028.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nTests pass on my Mac Os X 10.6.8, ready for review. Apply the combined patch only.",
    "created_at": "2013-02-04T19:19:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60028",
    "user": "https://github.com/sagetrac-jlopez"
}
```

<div id="comment:16" align="right">comment:16</div>

Tests pass on my Mac Os X 10.6.8, ready for review. Apply the combined patch only.



---

archive/issue_events_096989.json:
```json
{
    "actor": "https://github.com/sagetrac-jlopez",
    "created_at": "2013-02-04T19:19:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7886#event-96989"
}
```



---

archive/issue_events_096990.json:
```json
{
    "actor": "https://github.com/sagetrac-jlopez",
    "created_at": "2013-02-04T19:19:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7886#event-96990"
}
```



---

archive/issue_comments_060029.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,6 @@\n-GAP has several functions concerning conjugacy classes of groups. This patch include a wrapper for gap conjugacy classes for groups in which they are available and a (for now, inefficient) naive fallback method for the remaining cases.\n+GAP has several functions concerning conjugacy classes of groups. This patch include a wrapper for gap conjugacy classes for groups in which they are available and a (kind of) naive fallback method based on TransitiveIdeal for the remaining cases.\n \n Apply:\n-* [attachment: trac_7886_conjugacy_classes_module.patch](https://github.com/sagemath/sage/files/ticket7886/trac_7886_conjugacy_classes_module.patch.gz)\n-* [attachment: trac_7886_conjugacy_classes.patch](https://github.com/sagemath/sage/files/ticket7886/trac_7886_conjugacy_classes.patch.gz)\n-* [attachment: trac_7886_conjugacy_classes_encoding_fix.patch](https://github.com/sagemath/sage/files/ticket7886/trac_7886_conjugacy_classes_encoding_fix.patch.gz)\n+* [attachment: trac_7886_conjugacy_classes_combined.patch](https://github.com/sagemath/sage/files/ticket7886/trac_7886_conjugacy_classes_combined.patch.gz)\n \n+\n``````\n",
    "created_at": "2013-02-04T19:19:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60029",
    "user": "https://github.com/sagetrac-jlopez"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,6 @@
-GAP has several functions concerning conjugacy classes of groups. This patch include a wrapper for gap conjugacy classes for groups in which they are available and a (for now, inefficient) naive fallback method for the remaining cases.
+GAP has several functions concerning conjugacy classes of groups. This patch include a wrapper for gap conjugacy classes for groups in which they are available and a (kind of) naive fallback method based on TransitiveIdeal for the remaining cases.
 
 Apply:
-* [attachment: trac_7886_conjugacy_classes_module.patch](https://github.com/sagemath/sage/files/ticket7886/trac_7886_conjugacy_classes_module.patch.gz)
-* [attachment: trac_7886_conjugacy_classes.patch](https://github.com/sagemath/sage/files/ticket7886/trac_7886_conjugacy_classes.patch.gz)
-* [attachment: trac_7886_conjugacy_classes_encoding_fix.patch](https://github.com/sagemath/sage/files/ticket7886/trac_7886_conjugacy_classes_encoding_fix.patch.gz)
+* [attachment: trac_7886_conjugacy_classes_combined.patch](https://github.com/sagemath/sage/files/ticket7886/trac_7886_conjugacy_classes_combined.patch.gz)
 
+
``````




---

archive/issue_comments_060030.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\npatchbot: apply trac_7886_conjugacy_classes_combined.patch",
    "created_at": "2013-02-04T19:20:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60030",
    "user": "https://github.com/sagetrac-jlopez"
}
```

<div id="comment:17" align="right">comment:17</div>

patchbot: apply trac_7886_conjugacy_classes_combined.patch



---

archive/issue_comments_060031.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nHey,\n\nThank you for working on this. However there are multiple docstring issues you will need to address. More specifically, you will need to change (for example)\n\n```\nEXAMPLES:\n    sage: H = MatrixGroup([matrix(GF(5),2,[1,2, -1, 1]), matrix(GF(5),2, [1,1, 0,1])])\n    sage: h = H(matrix(GF(5),2,[1,2, -1, 1]))\n    sage: H.conjugacy_class(h)\n    ...\n\n#####\n\nTODO:\n    - Implement a non-naive fallback method for computing all the elements of\n    the conjugacy class when the group is not defined in GAP, as the one in\n    Butler's paper.\n    - Define a sage method for gap matrices so that groups of matrices can\n    use the quicker GAP algorithm rather than the naive one.\n\nEXAMPLES::\n\n- Conjugacy classes for groups of permutations \n\n    sage: G = SymmetricGroup(4) \n    ...\n```\nto\n\n```\nEXAMPLES::\n\n    sage: H = MatrixGroup([matrix(GF(5),2,[1,2, -1, 1]), matrix(GF(5),2, [1,1, 0,1])])\n    sage: h = H(matrix(GF(5),2,[1,2, -1, 1]))\n    sage: H.conjugacy_class(h)\n    ...\n\n####\n\n\n.. TODO::\n\n    - Implement a non-naive fallback method for computing all the elements of\n      the conjugacy class when the group is not defined in GAP, as the one in\n      Butler's paper.\n    - Define a sage method for gap matrices so that groups of matrices can\n      use the quicker GAP algorithm rather than the naive one.\n\nEXAMPLES:\n\nConjugacy classes for groups of permutations::\n\n    sage: G = SymmetricGroup(4) \n    ...\n```\notherwise the formatting will be incorrect (the convention is not to use bullet points for different examples). For a full description, see [the conventions page](http://www.sagemath.org/doc/developer/conventions.html:).\n\nAlso you will need to cleanup the patch's header message.\n\nThanks,\n\nTravis",
    "created_at": "2013-02-19T20:06:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60031",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:18" align="right">comment:18</div>

Hey,

Thank you for working on this. However there are multiple docstring issues you will need to address. More specifically, you will need to change (for example)

```
EXAMPLES:
    sage: H = MatrixGroup([matrix(GF(5),2,[1,2, -1, 1]), matrix(GF(5),2, [1,1, 0,1])])
    sage: h = H(matrix(GF(5),2,[1,2, -1, 1]))
    sage: H.conjugacy_class(h)
    ...

#####

TODO:
    - Implement a non-naive fallback method for computing all the elements of
    the conjugacy class when the group is not defined in GAP, as the one in
    Butler's paper.
    - Define a sage method for gap matrices so that groups of matrices can
    use the quicker GAP algorithm rather than the naive one.

EXAMPLES::

- Conjugacy classes for groups of permutations 

    sage: G = SymmetricGroup(4) 
    ...
```
to

```
EXAMPLES::

    sage: H = MatrixGroup([matrix(GF(5),2,[1,2, -1, 1]), matrix(GF(5),2, [1,1, 0,1])])
    sage: h = H(matrix(GF(5),2,[1,2, -1, 1]))
    sage: H.conjugacy_class(h)
    ...

####


.. TODO::

    - Implement a non-naive fallback method for computing all the elements of
      the conjugacy class when the group is not defined in GAP, as the one in
      Butler's paper.
    - Define a sage method for gap matrices so that groups of matrices can
      use the quicker GAP algorithm rather than the naive one.

EXAMPLES:

Conjugacy classes for groups of permutations::

    sage: G = SymmetricGroup(4) 
    ...
```
otherwise the formatting will be incorrect (the convention is not to use bullet points for different examples). For a full description, see [the conventions page](http://www.sagemath.org/doc/developer/conventions.html:).

Also you will need to cleanup the patch's header message.

Thanks,

Travis



---

archive/issue_events_096991.json:
```json
{
    "actor": "https://github.com/KPanComputes",
    "created_at": "2013-02-20T16:12:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7886#event-96991"
}
```



---

archive/issue_events_096992.json:
```json
{
    "actor": "https://github.com/KPanComputes",
    "created_at": "2013-02-20T16:12:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7886#event-96992"
}
```



---

archive/issue_comments_060032.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nThis patch needs to address referee's comments. I am changing this to `needs_work` in the meanwhile.",
    "created_at": "2013-02-20T16:12:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60032",
    "user": "https://github.com/KPanComputes"
}
```

<div id="comment:19" align="right">comment:19</div>

This patch needs to address referee's comments. I am changing this to `needs_work` in the meanwhile.



---

archive/issue_comments_060033.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nThanks for looking at my patch! I have a complicated work situation during the week, but will fix the docstring style and rebase again over sage 5.7 on Friday or Saturday.\n\nNot sure what you mean about the patch header message. Do you mean the Spanish characters in my name? That is automatically added by my hg configuration, but it seems that trac does not support UTF-8; I added the appropriate encoding to the python files, but don't know how to do it for the patch (and don't feel inclined to change my name either). If it is about the cruft that came from patch folding, I will take care of that as well.\n\nCheers,\nJ",
    "created_at": "2013-02-20T21:59:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60033",
    "user": "https://github.com/sagetrac-jlopez"
}
```

<div id="comment:20" align="right">comment:20</div>

Thanks for looking at my patch! I have a complicated work situation during the week, but will fix the docstring style and rebase again over sage 5.7 on Friday or Saturday.

Not sure what you mean about the patch header message. Do you mean the Spanish characters in my name? That is automatically added by my hg configuration, but it seems that trac does not support UTF-8; I added the appropriate encoding to the python files, but don't know how to do it for the patch (and don't feel inclined to change my name either). If it is about the cruft that came from patch folding, I will take care of that as well.

Cheers,
J



---

archive/issue_comments_060034.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nHey Javier,\n\nReplying to [@sagetrac-jlopez](#comment:20):\n> Thanks for looking at my patch! I have a complicated work situation during the week, but will fix the docstring style and rebase again over sage 5.7 on Friday or Saturday.\n\nThank you! There's not a huge rush, just ping back when it's done and I'll give it a look-over.\n\n> Not sure what you mean about the patch header message. Do you mean the Spanish characters in my name? That is automatically added by my hg configuration, but it seems that trac does not support UTF-8; I added the appropriate encoding to the python files, but don't know how to do it for the patch (and don't feel inclined to change my name either). If it is about the cruft that came from patch folding, I will take care of that as well.\n\nIf you look at the beginning of the patch, you have the following:\n\n```\n# HG changeset patch\n# User Javier L\u00c3\u00b3pez Pe\u00c3\u00b1a <vengoroso@gmail.com>\n# Date 1360004753 0\n# Node ID 2782ba59f14a8dafdb44e05a67972e5a9d4db0cf\n# Parent  fa8decac55338225dc33568ad600c261fc777b4c\n* * *\nTrac 7886: Conjugacy classes\n* * *\nTrac 7886: Created module for conjugacy classes of finite groups.\nAdded wrappers for GAP functions and naive fallback method.\n* * *\nTrac 7886: Conjugacy classes\n```\nIn particular, the line right after the `# Parent ...` should be a one line summary of the patch with the ticket number (such as `Trac 7886: Conjugacy classes` which is probably what you originally had). This can get mangled when folding patches. You can change this by doing a `qrefresh -e`. I don't think the encoding for your name in the header is important.\n\nGracias por tu trabajo,\n\nTravis",
    "created_at": "2013-02-21T15:42:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60034",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:21" align="right">comment:21</div>

Hey Javier,

Replying to [@sagetrac-jlopez](#comment:20):
> Thanks for looking at my patch! I have a complicated work situation during the week, but will fix the docstring style and rebase again over sage 5.7 on Friday or Saturday.

Thank you! There's not a huge rush, just ping back when it's done and I'll give it a look-over.

> Not sure what you mean about the patch header message. Do you mean the Spanish characters in my name? That is automatically added by my hg configuration, but it seems that trac does not support UTF-8; I added the appropriate encoding to the python files, but don't know how to do it for the patch (and don't feel inclined to change my name either). If it is about the cruft that came from patch folding, I will take care of that as well.

If you look at the beginning of the patch, you have the following:

```
# HG changeset patch
# User Javier LÃ³pez PeÃ±a <vengoroso@gmail.com>
# Date 1360004753 0
# Node ID 2782ba59f14a8dafdb44e05a67972e5a9d4db0cf
# Parent  fa8decac55338225dc33568ad600c261fc777b4c
* * *
Trac 7886: Conjugacy classes
* * *
Trac 7886: Created module for conjugacy classes of finite groups.
Added wrappers for GAP functions and naive fallback method.
* * *
Trac 7886: Conjugacy classes
```
In particular, the line right after the `# Parent ...` should be a one line summary of the patch with the ticket number (such as `Trac 7886: Conjugacy classes` which is probably what you originally had). This can get mangled when folding patches. You can change this by doing a `qrefresh -e`. I don't think the encoding for your name in the header is important.

Gracias por tu trabajo,

Travis



---

archive/issue_comments_060035.json:
```json
{
    "body": "Changed reviewer from **David Joyner** to **David Joyner, Travis Scrimshaw**",
    "created_at": "2013-02-21T15:42:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60035",
    "user": "https://github.com/tscrim"
}
```

Changed reviewer from **David Joyner** to **David Joyner, Travis Scrimshaw**



---

archive/issue_comments_060036.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nI think I fixed all the docstring formatting. Also removed some trailing whitespaces and rebased over sage 5.7. Needs review.\n\nPatchbot apply trac_7886_conjugacy_classes_combined.patch",
    "created_at": "2013-02-22T14:24:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60036",
    "user": "https://github.com/sagetrac-jlopez"
}
```

<div id="comment:22" align="right">comment:22</div>

I think I fixed all the docstring formatting. Also removed some trailing whitespaces and rebased over sage 5.7. Needs review.

Patchbot apply trac_7886_conjugacy_classes_combined.patch



---

archive/issue_events_096993.json:
```json
{
    "actor": "https://github.com/sagetrac-jlopez",
    "created_at": "2013-02-22T14:24:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7886#event-96993"
}
```



---

archive/issue_events_096994.json:
```json
{
    "actor": "https://github.com/sagetrac-jlopez",
    "created_at": "2013-02-22T14:24:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7886#event-96994"
}
```



---

archive/issue_comments_060037.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nHey Javier,\n\nThere are still many misformatted docstrings (did you forget to refresh the patch?) and the examples are still itemized. Also remove the `* * *` from the header. In case you are unaware, you can run `sage -docbuild reference html` (or reference/groups and/or reference/categories with #6495) to view the documentation.\n\nThanks,\n\nTravis",
    "created_at": "2013-02-22T14:47:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60037",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:23" align="right">comment:23</div>

Hey Javier,

There are still many misformatted docstrings (did you forget to refresh the patch?) and the examples are still itemized. Also remove the `* * *` from the header. In case you are unaware, you can run `sage -docbuild reference html` (or reference/groups and/or reference/categories with #6495) to view the documentation.

Thanks,

Travis



---

archive/issue_comments_060038.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nHi Travis,\n\nrefreshed, fixed the itemized examples. My docbuild refuses to work due to the presence of UTF8 characters in the docstring:\n\n```\n    reading sources... [ 75%] sage/groups/perm_gps/permgroup                        \n    Sphinx error:\n    'ascii' codec can't decode byte 0xc3 in position 3438: ordinal not in range(128)\n```\n\nIs there any way to tell sphinx to use the utf8 codec instead? I already included the \n\n```\n# coding = utf-8\n```\nin the python file, but the docbuild seems to ignore that.",
    "created_at": "2013-02-22T15:28:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60038",
    "user": "https://github.com/sagetrac-jlopez"
}
```

<div id="comment:24" align="right">comment:24</div>

Hi Travis,

refreshed, fixed the itemized examples. My docbuild refuses to work due to the presence of UTF8 characters in the docstring:

```
    reading sources... [ 75%] sage/groups/perm_gps/permgroup                        
    Sphinx error:
    'ascii' codec can't decode byte 0xc3 in position 3438: ordinal not in range(128)
```

Is there any way to tell sphinx to use the utf8 codec instead? I already included the 

```
# coding = utf-8
```
in the python file, but the docbuild seems to ignore that.



---

archive/issue_comments_060039.json:
```json
{
    "body": "Docstring and whitespaces fixes, rebased for sage 5.7. Apply this patch only.",
    "created_at": "2013-02-22T16:05:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60039",
    "user": "https://github.com/sagetrac-jlopez"
}
```

Docstring and whitespaces fixes, rebased for sage 5.7. Apply this patch only.



---

archive/issue_comments_060040.json:
```json
{
    "body": "Attachment: **[trac_7886_conjugacy_classes_combined.patch.gz](https://github.com/sagemath/sage/files/ticket7886/trac_7886_conjugacy_classes_combined.patch.gz)**",
    "created_at": "2013-02-22T17:19:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60040",
    "user": "https://github.com/tscrim"
}
```

Attachment: **[trac_7886_conjugacy_classes_combined.patch.gz](https://github.com/sagemath/sage/files/ticket7886/trac_7886_conjugacy_classes_combined.patch.gz)**



---

archive/issue_comments_060041.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nAttachment: **[trac_7886-conjugacy_classes-review-ts.patch.gz](https://github.com/sagemath/sage/files/ticket7886/trac_7886-conjugacy_classes-review-ts.patch.gz)**\n\nHey Javier,\n\nI've attaching a review patch which fixes up the remaining documentation and adds the files to the docbuild (I had to do some extra tweaks in the `categories/finite_groups.py` since it wasn't in the docbuild prior to this patch). If everything works and looks good to you, you go ahead and set this to positive review.\n\nThanks,\n\nTravis\n\nFor patchbot:\n\nApply: trac_7886_conjugacy_classes_combined.patch, trac_7886-conjugacy_classes-review-ts.patch",
    "created_at": "2013-02-22T17:24:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60041",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:25" align="right">comment:25</div>

Attachment: **[trac_7886-conjugacy_classes-review-ts.patch.gz](https://github.com/sagemath/sage/files/ticket7886/trac_7886-conjugacy_classes-review-ts.patch.gz)**

Hey Javier,

I've attaching a review patch which fixes up the remaining documentation and adds the files to the docbuild (I had to do some extra tweaks in the `categories/finite_groups.py` since it wasn't in the docbuild prior to this patch). If everything works and looks good to you, you go ahead and set this to positive review.

Thanks,

Travis

For patchbot:

Apply: trac_7886_conjugacy_classes_combined.patch, trac_7886-conjugacy_classes-review-ts.patch



---

archive/issue_comments_060042.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,7 @@\n GAP has several functions concerning conjugacy classes of groups. This patch include a wrapper for gap conjugacy classes for groups in which they are available and a (kind of) naive fallback method based on TransitiveIdeal for the remaining cases.\n \n Apply:\n+\n * [attachment: trac_7886_conjugacy_classes_combined.patch](https://github.com/sagemath/sage/files/ticket7886/trac_7886_conjugacy_classes_combined.patch.gz)\n+* [attachment: trac_7886-conjugacy_classes-review-ts.patch](https://github.com/sagemath/sage/files/ticket7886/trac_7886-conjugacy_classes-review-ts.patch.gz)\n \n-\n``````\n",
    "created_at": "2013-02-22T17:24:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60042",
    "user": "https://github.com/tscrim"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,7 @@
 GAP has several functions concerning conjugacy classes of groups. This patch include a wrapper for gap conjugacy classes for groups in which they are available and a (kind of) naive fallback method based on TransitiveIdeal for the remaining cases.
 
 Apply:
+
 * [attachment: trac_7886_conjugacy_classes_combined.patch](https://github.com/sagemath/sage/files/ticket7886/trac_7886_conjugacy_classes_combined.patch.gz)
+* [attachment: trac_7886-conjugacy_classes-review-ts.patch](https://github.com/sagemath/sage/files/ticket7886/trac_7886-conjugacy_classes-review-ts.patch.gz)
 
-
``````




---

archive/issue_comments_060043.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nHi Travis,\n\nyour reviewer patch fails to apply for me:\n\n```\napplying trac_7886-conjugacy_classes-review-ts.patch\nunable to find 'doc/en/reference/categories/index.rst' for patching\n1 out of 1 hunks FAILED -- saving rejects to file doc/en/reference/categories/index.rst.rej\nunable to find 'doc/en/reference/groups/index.rst' for patching\n1 out of 1 hunks FAILED -- saving rejects to file doc/en/reference/groups/index.rst.rej\npatch failed, unable to continue (try -v)\npatch failed, rejects left in working dir\nerrors during apply, please fix and refresh trac_7886-conjugacy_classes-review-ts.patch\n```\n\nAre we working over the same version of sage (I'm on 5.7), or did you apply any previous patches that changed documentation files?",
    "created_at": "2013-02-23T12:26:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60043",
    "user": "https://github.com/sagetrac-jlopez"
}
```

<div id="comment:26" align="right">comment:26</div>

Hi Travis,

your reviewer patch fails to apply for me:

```
applying trac_7886-conjugacy_classes-review-ts.patch
unable to find 'doc/en/reference/categories/index.rst' for patching
1 out of 1 hunks FAILED -- saving rejects to file doc/en/reference/categories/index.rst.rej
unable to find 'doc/en/reference/groups/index.rst' for patching
1 out of 1 hunks FAILED -- saving rejects to file doc/en/reference/groups/index.rst.rej
patch failed, unable to continue (try -v)
patch failed, rejects left in working dir
errors during apply, please fix and refresh trac_7886-conjugacy_classes-review-ts.patch
```

Are we working over the same version of sage (I'm on 5.7), or did you apply any previous patches that changed documentation files?



---

archive/issue_comments_060044.json:
```json
{
    "body": "Dependencies: **#6495**",
    "created_at": "2013-02-23T13:58:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60044",
    "user": "https://github.com/tscrim"
}
```

Dependencies: **#6495**



---

archive/issue_comments_060045.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nHey Javier,\n\nActually I have #6495 applied, it might be because of that. I've added it as a dependency. Try applying the patches with #6495.\n\nThanks,\n\nTravis",
    "created_at": "2013-02-23T13:58:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60045",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:27" align="right">comment:27</div>

Hey Javier,

Actually I have #6495 applied, it might be because of that. I've added it as a dependency. Try applying the patches with #6495.

Thanks,

Travis



---

archive/issue_comments_060046.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nAlright. WIth #6495 applied the reviewer patch applies and docs build properly. Tests pass, so I think this is good to go.\nThanks for your help with the reviewing and the docstring formatting!",
    "created_at": "2013-02-23T18:02:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60046",
    "user": "https://github.com/sagetrac-jlopez"
}
```

<div id="comment:28" align="right">comment:28</div>

Alright. WIth #6495 applied the reviewer patch applies and docs build properly. Tests pass, so I think this is good to go.
Thanks for your help with the reviewing and the docstring formatting!



---

archive/issue_events_096995.json:
```json
{
    "actor": "https://github.com/sagetrac-jlopez",
    "created_at": "2013-02-23T18:02:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7886#event-96995"
}
```



---

archive/issue_events_096996.json:
```json
{
    "actor": "https://github.com/sagetrac-jlopez",
    "created_at": "2013-02-23T18:02:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7886#event-96996"
}
```



---

archive/issue_comments_060047.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nPatchbot seems confused about what needs to be applied, so here it goes again:\n\nApply trac_7886_conjugacy_classes_combined.patch trac_7886-conjugacy_classes-review-ts.patch",
    "created_at": "2013-02-23T18:04:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60047",
    "user": "https://github.com/sagetrac-jlopez"
}
```

<div id="comment:29" align="right">comment:29</div>

Patchbot seems confused about what needs to be applied, so here it goes again:

Apply trac_7886_conjugacy_classes_combined.patch trac_7886-conjugacy_classes-review-ts.patch



---

archive/issue_events_096997.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-02-28T10:32:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7886#event-96997"
}
```



---

archive/issue_events_096998.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-02-28T10:32:12Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7886#event-96998"
}
```



---

archive/issue_comments_060048.json:
```json
{
    "body": "Merged: **sage-5.8.beta2**",
    "created_at": "2013-02-28T10:32:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60048",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.8.beta2**



---

archive/issue_comments_060049.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nYou shouldn't return lists from `@`cached_method functions. If somebody mutates the output list then future calls return the wrong result! Always return tuples instead of lists unless you want the output to be mutable.\n\nAlso, `ConjugacyClass` is a parent without elements; Use `SageObject` as base for classes that do not use the parent/element pattern.",
    "created_at": "2013-02-28T20:55:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7886#issuecomment-60049",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:31" align="right">comment:31</div>

You shouldn't return lists from `@`cached_method functions. If somebody mutates the output list then future calls return the wrong result! Always return tuples instead of lists unless you want the output to be mutable.

Also, `ConjugacyClass` is a parent without elements; Use `SageObject` as base for classes that do not use the parent/element pattern.
