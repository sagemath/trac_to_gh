# Issue 7238: sagenb notebook: insert new cell *above* text cell

archive/issues_007238.json:
```json
{
    "assignees": [],
    "body": "This is a longstanding annoying GUI issue with the notebook.\n\nAssignee: **boothby**\n\nAuthor: **William Stein**\n\nReviewer: **Tim Dumol**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/7238_\n\n",
    "closed_at": "2009-10-20T23:18:37Z",
    "created_at": "2009-10-18T06:31:05Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20notebook",
        "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "sagenb notebook: insert new cell *above* text cell",
    "type": "issue",
    "updated_at": "2009-10-20T23:18:37Z",
    "url": "https://github.com/sagemath/sage/issues/7238",
    "user": "https://github.com/williamstein"
}
```
This is a longstanding annoying GUI issue with the notebook.

Assignee: **boothby**

Author: **William Stein**

Reviewer: **Tim Dumol**

_Issue created by migration from https://trac.sagemath.org/ticket/7238_





---

archive/issue_events_077703.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-10-18T06:31:05Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/7238",
    "milestone_number": null,
    "milestone_title": "sage-4.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7238#event-77703"
}
```



---

archive/issue_events_077704.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-10-18T06:31:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7238",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20notebook",
    "label_color": "000080",
    "label_name": "component: notebook",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7238#event-77704"
}
```



---

archive/issue_events_077705.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-10-18T06:31:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7238",
    "label": "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7238#event-77705"
}
```



---

archive/issue_events_077706.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-10-18T06:31:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7238",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7238#event-77706"
}
```



---

archive/issue_comments_053714.json:
```json
{
    "body": "Attachment: **[trac_7238.patch.gz](https://github.com/sagemath/sage/files/ticket7238/trac_7238.patch.gz)**\n\npart 1",
    "created_at": "2009-10-18T09:22:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7238#issuecomment-53714",
    "user": "https://github.com/williamstein"
}
```

Attachment: **[trac_7238.patch.gz](https://github.com/sagemath/sage/files/ticket7238/trac_7238.patch.gz)**

part 1



---

archive/issue_comments_053715.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nfirst patch works but there is an issue: \nNOTE: there is still one issue, namely that if you insert a new cell above a text cell,\nthen delete it, the cursor jumps to the end of the worksheet.  If you refresh before\ndeleting then everything is fine.",
    "created_at": "2009-10-18T09:22:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7238#issuecomment-53715",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:1'>Comment 1:</a>
first patch works but there is an issue: 
NOTE: there is still one issue, namely that if you insert a new cell above a text cell,
then delete it, the cursor jumps to the end of the worksheet.  If you refresh before
deleting then everything is fine.



---

archive/issue_comments_053716.json:
```json
{
    "body": "Attachment: **[trac_7238-part2.patch.gz](https://github.com/sagemath/sage/files/ticket7238/trac_7238-part2.patch.gz)**\n\nthis fixes moving between cells",
    "created_at": "2009-10-19T17:35:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7238#issuecomment-53716",
    "user": "https://github.com/williamstein"
}
```

Attachment: **[trac_7238-part2.patch.gz](https://github.com/sagemath/sage/files/ticket7238/trac_7238-part2.patch.gz)**

this fixes moving between cells



---

archive/issue_events_077707.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-10-19T17:35:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7238",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7238#event-77707"
}
```



---

archive/issue_comments_053717.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nPatch works as advertised. Positive review.",
    "created_at": "2009-10-19T18:40:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7238#issuecomment-53717",
    "user": "https://github.com/TimDumol"
}
```

<a id='comment:3'>Comment 3:</a>
Patch works as advertised. Positive review.



---

archive/issue_comments_053718.json:
```json
{
    "body": "Author: **William Stein**",
    "created_at": "2009-10-19T18:40:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7238#issuecomment-53718",
    "user": "https://github.com/TimDumol"
}
```

Author: **William Stein**



---

archive/issue_comments_053719.json:
```json
{
    "body": "Reviewer: **Tim Dumol**",
    "created_at": "2009-10-19T18:40:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7238#issuecomment-53719",
    "user": "https://github.com/TimDumol"
}
```

Reviewer: **Tim Dumol**



---

archive/issue_events_077708.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2009-10-19T18:40:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7238",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7238#event-77708"
}
```



---

archive/issue_events_077709.json:
```json
{
    "actor": "https://github.com/TimDumol",
    "created_at": "2009-10-19T18:40:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7238",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7238#event-77709"
}
```



---

archive/issue_comments_053720.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nI think there are a few problems with the patch set:\n\n* [Expected] doctest failures in `cell.py`.\n* Adding a new text cell at the end of a worksheet does not update the `cell_id_list`.\n* In Firebug's console, there are two errors:\n  * `get_cell(id) is null` in `resize_all_cells()` for text cells.\n  * `cell_prev is null` in `join_cell()` when the top cell is a text cell.\n\nI'm working on part 3.",
    "created_at": "2009-10-20T01:36:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7238#issuecomment-53720",
    "user": "https://github.com/qed777"
}
```

<a id='comment:4'>Comment 4:</a>
I think there are a few problems with the patch set:

* [Expected] doctest failures in `cell.py`.
* Adding a new text cell at the end of a worksheet does not update the `cell_id_list`.
* In Firebug's console, there are two errors:
  * `get_cell(id) is null` in `resize_all_cells()` for text cells.
  * `cell_prev is null` in `join_cell()` when the top cell is a text cell.

I'm working on part 3.



---

archive/issue_comments_053721.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nAlso:  Evaluating all cells, deleting all output, slide mode.\n\nA potential annoyance:  Reopening (or editing) a worksheet fuses consecutive text cells.\nShould we have \"special\" delimiters for text cells?",
    "created_at": "2009-10-20T06:45:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7238#issuecomment-53721",
    "user": "https://github.com/qed777"
}
```

<a id='comment:5'>Comment 5:</a>
Also:  Evaluating all cells, deleting all output, slide mode.

A potential annoyance:  Reopening (or editing) a worksheet fuses consecutive text cells.
Should we have "special" delimiters for text cells?



---

archive/issue_comments_053722.json:
```json
{
    "body": "Part 3.  Various small fixes.  Apply on top of other patches.",
    "created_at": "2009-10-20T06:48:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7238#issuecomment-53722",
    "user": "https://github.com/qed777"
}
```

Part 3.  Various small fixes.  Apply on top of other patches.



---

archive/issue_comments_053723.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nAttachment: **[trac_7238-insert_above_text_cell.patch.gz](https://github.com/sagemath/sage/files/ticket7238/trac_7238-insert_above_text_cell.patch.gz)**\n\n> A potential annoyance: Reopening (or editing) a worksheet fuses consecutive \n> text cells. Should we have \"special\" delimiters for text cells? \n\nThis has been the case since there first were text cells.  Some people consider it good (a feature), and others find it confusing.",
    "created_at": "2009-10-20T18:07:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7238#issuecomment-53723",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:6'>Comment 6:</a>
Attachment: **[trac_7238-insert_above_text_cell.patch.gz](https://github.com/sagemath/sage/files/ticket7238/trac_7238-insert_above_text_cell.patch.gz)**

> A potential annoyance: Reopening (or editing) a worksheet fuses consecutive 
> text cells. Should we have "special" delimiters for text cells? 

This has been the case since there first were text cells.  Some people consider it good (a feature), and others find it confusing.



---

archive/issue_comments_053724.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nTim Dumol gave this a positive review, then Mitesh Patel found some issues and I read his code and was happy with all those fixes and verified that they fixed the new issues.  So I think it is reasonable to give this a positive review.  It is also now merged in sagenb.",
    "created_at": "2009-10-20T23:18:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7238#issuecomment-53724",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:7'>Comment 7:</a>
Tim Dumol gave this a positive review, then Mitesh Patel found some issues and I read his code and was happy with all those fixes and verified that they fixed the new issues.  So I think it is reasonable to give this a positive review.  It is also now merged in sagenb.



---

archive/issue_events_077710.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-10-20T23:18:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7238",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7238#event-77710"
}
```



---

archive/issue_events_077711.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2009-10-20T23:18:37Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/7238",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7238#event-77711"
}
```
