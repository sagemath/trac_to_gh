# Issue 7037: libm4ri thinks the C compiler is broken

archive/issues_007037.json:
```json
{
    "assignees": [],
    "body": "Using\n\n* Solaris 10 update 7 on SPARC\n* sage-4.1.2.alpha2\n* Sun Studio 12.1\n* An updated configure script to allow the Sun compiler to be used #7021 \n\nCC was set to the Sun C compiler. Despite thousands of lines of C code being built, libm4ri decides the Sun C compiler is broken:\n\n```\nchecking for style of include used by make... GNU\nchecking for gcc... /opt/xxxsunstudio12.1/bin/cc\nchecking for C compiler default output file name...\nconfigure: error: in `/export/home/drkirkby/sage/gcc32/sage-4.1.2.alpha2/spkg/build/libm4ri-20090617/src':\nconfigure: error: C compiler cannot create executables\nSee `config.log' for more details.\nError configuring libm4ri\n```\n\n\nUpstream: **Reported upstream. Developers acknowledge bug.**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/7037_\n\n",
    "closed_at": "2009-11-29T05:28:00Z",
    "created_at": "2009-09-27T15:40:28Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20build",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "libm4ri thinks the C compiler is broken",
    "type": "issue",
    "updated_at": "2011-05-24T19:26:33Z",
    "url": "https://github.com/sagemath/sage/issues/7037",
    "user": "https://github.com/sagetrac-drkirkby"
}
```
Using

* Solaris 10 update 7 on SPARC
* sage-4.1.2.alpha2
* Sun Studio 12.1
* An updated configure script to allow the Sun compiler to be used #7021 

CC was set to the Sun C compiler. Despite thousands of lines of C code being built, libm4ri decides the Sun C compiler is broken:

```
checking for style of include used by make... GNU
checking for gcc... /opt/xxxsunstudio12.1/bin/cc
checking for C compiler default output file name...
configure: error: in `/export/home/drkirkby/sage/gcc32/sage-4.1.2.alpha2/spkg/build/libm4ri-20090617/src':
configure: error: C compiler cannot create executables
See `config.log' for more details.
Error configuring libm4ri
```


Upstream: **Reported upstream. Developers acknowledge bug.**

_Issue created by migration from https://trac.sagemath.org/ticket/7037_





---

archive/issue_events_077481.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2009-09-27T15:40:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/7037",
    "milestone_number": null,
    "milestone_title": "sage-4.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7037#event-77481"
}
```



---

archive/issue_events_077482.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2009-09-27T15:40:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7037",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20build",
    "label_color": "000080",
    "label_name": "component: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7037#event-77482"
}
```



---

archive/issue_events_077483.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2009-09-27T15:40:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7037",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7037#event-77483"
}
```



---

archive/issue_events_077484.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2009-09-27T15:40:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7037",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7037#event-77484"
}
```



---

archive/issue_comments_052088.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nCan you provide the config.log?",
    "created_at": "2009-11-18T15:53:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7037#issuecomment-52088",
    "user": "https://github.com/malb"
}
```

<div id="comment:1" align="right">Comment 1</div>

Can you provide the config.log?



---

archive/issue_comments_052089.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nI will do. I can't immediately, as \n\n* I'm not at home, and the machine with Sun Studio is power not on. \n\nIt will take me some time to reach the point of failure. I'll try phoning my wife and getting the machine put on, then try a build. \n\nDave",
    "created_at": "2009-11-18T16:18:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7037#issuecomment-52089",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:2" align="right">Comment 2</div>

I will do. I can't immediately, as 

* I'm not at home, and the machine with Sun Studio is power not on. 

It will take me some time to reach the point of failure. I'll try phoning my wife and getting the machine put on, then try a build. 

Dave



---

archive/issue_comments_052090.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nI rang my wife, who booted up the Blade 2000 - the only SPARC machine I have able to build Sage in a semi-sensible time frame. \n\nI started a build, using the Sun compilers, and done a grep on install.log on 4 lines, which are generated by various configure scripts. All report below the C compiler works, has a default output of a.out, is not the GNU compiler etc. You can see the output is very different with M4RI. I need to go out now, but later will show the output of M4RI and attach config.log. \n\nSorry must go now. \n\n\n\n```\ndrkirkby@swan:[~/sage-4.2] $ egrep \"checking whether we are using the GNU C compiler|checking whether the C compiler works|checking for gcc|checking for C compiler default output file\" install.log\nchecking for gcc... /opt/xxxsunstudio12.1/bin/cc\nchecking for C compiler default output file name... a.out\nchecking whether the C compiler works... yes\nchecking whether we are using the GNU C compiler... no\nchecking for gcc... /opt/xxxsunstudio12.1/bin/cc\nchecking for gcc... /opt/xxxsunstudio12.1/bin/cc\nchecking for C compiler default output file name... a.out\nchecking whether the C compiler works... yes\nchecking whether we are using the GNU C compiler... no\nchecking for gcc... /opt/xxxsunstudio12.1/bin/cc\nchecking for C compiler default output file name... a.out\nchecking whether the C compiler works... yes\nchecking whether we are using the GNU C compiler... no\nchecking for gcc... (cached) /opt/xxxsunstudio12.1/bin/cc\nchecking whether we are using the GNU C compiler... (cached) no\nchecking for gcc... /opt/xxxsunstudio12.1/bin/cc\nchecking for C compiler default output file name... a.out\nchecking whether the C compiler works... yes\nchecking whether we are using the GNU C compiler... no\nchecking for gcc... /opt/xxxsunstudio12.1/bin/cc\nchecking for C compiler default output file name... a.out\nchecking whether the C compiler works... yes\nchecking whether we are using the GNU C compiler... no\nchecking for gcc... /opt/xxxsunstudio12.1/bin/cc\nchecking for C compiler default output file name... a.out\nchecking whether the C compiler works... yes\nchecking whether we are using the GNU C compiler... no\nchecking for gcc... /opt/xxxsunstudio12.1/bin/cc\nchecking for C compiler default output file name... a.out\nchecking whether the C compiler works... yes\nchecking whether we are using the GNU C compiler... no\nchecking for gcc... /opt/xxxsunstudio12.1/bin/cc\nchecking for C compiler default output file name... a.out\nchecking whether the C compiler works... yes\nchecking whether we are using the GNU C compiler... no\n```",
    "created_at": "2009-11-18T17:01:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7037#issuecomment-52090",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:3" align="right">Comment 3</div>

I rang my wife, who booted up the Blade 2000 - the only SPARC machine I have able to build Sage in a semi-sensible time frame. 

I started a build, using the Sun compilers, and done a grep on install.log on 4 lines, which are generated by various configure scripts. All report below the C compiler works, has a default output of a.out, is not the GNU compiler etc. You can see the output is very different with M4RI. I need to go out now, but later will show the output of M4RI and attach config.log. 

Sorry must go now. 



```
drkirkby@swan:[~/sage-4.2] $ egrep "checking whether we are using the GNU C compiler|checking whether the C compiler works|checking for gcc|checking for C compiler default output file" install.log
checking for gcc... /opt/xxxsunstudio12.1/bin/cc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are using the GNU C compiler... no
checking for gcc... /opt/xxxsunstudio12.1/bin/cc
checking for gcc... /opt/xxxsunstudio12.1/bin/cc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are using the GNU C compiler... no
checking for gcc... /opt/xxxsunstudio12.1/bin/cc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are using the GNU C compiler... no
checking for gcc... (cached) /opt/xxxsunstudio12.1/bin/cc
checking whether we are using the GNU C compiler... (cached) no
checking for gcc... /opt/xxxsunstudio12.1/bin/cc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are using the GNU C compiler... no
checking for gcc... /opt/xxxsunstudio12.1/bin/cc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are using the GNU C compiler... no
checking for gcc... /opt/xxxsunstudio12.1/bin/cc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are using the GNU C compiler... no
checking for gcc... /opt/xxxsunstudio12.1/bin/cc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are using the GNU C compiler... no
checking for gcc... /opt/xxxsunstudio12.1/bin/cc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are using the GNU C compiler... no
```



---

archive/issue_comments_052091.json:
```json
{
    "body": "Upstream: **Reported upstream. Developers acknowledge bug.**",
    "created_at": "2009-11-23T00:53:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7037#issuecomment-52091",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Upstream: **Reported upstream. Developers acknowledge bug.**



---

archive/issue_comments_052092.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nI report this to Martin Albrecht  - see #7375 for a discussion. We finally got a solution to this, so a fix should soon be in Sage.",
    "created_at": "2009-11-23T00:53:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7037#issuecomment-52092",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:4" align="right">Comment 4</div>

I report this to Martin Albrecht  - see #7375 for a discussion. We finally got a solution to this, so a fix should soon be in Sage.



---

archive/issue_comments_052093.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nFixed by #7375.",
    "created_at": "2009-11-29T05:28:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7037#issuecomment-52093",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:5" align="right">Comment 5</div>

Fixed by #7375.



---

archive/issue_events_077485.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2009-11-29T05:28:00Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/7037",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7037#event-77485"
}
```



---

archive/issue_comments_052094.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,7 +3,7 @@\n * Solaris 10 update 7 on SPARC\n * sage-4.1.2.alpha2\n * Sun Studio 12.1\n-* An updated configure script to allow the Sun compiler to be used http://sagetrac.org/sage_trac/ticket/7021 \n+* An updated configure script to allow the Sun compiler to be used #7021 \n \n CC was set to the Sun C compiler. Despite thousands of lines of C code being built, libm4ri decides the Sun C compiler is broken:\n \n``````\n",
    "created_at": "2011-05-24T19:26:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7037",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7037#issuecomment-52094",
    "user": "https://github.com/sagetrac-ltw"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,7 +3,7 @@
 * Solaris 10 update 7 on SPARC
 * sage-4.1.2.alpha2
 * Sun Studio 12.1
-* An updated configure script to allow the Sun compiler to be used http://sagetrac.org/sage_trac/ticket/7021 
+* An updated configure script to allow the Sun compiler to be used #7021 
 
 CC was set to the Sun C compiler. Despite thousands of lines of C code being built, libm4ri decides the Sun C compiler is broken:
 
``````

