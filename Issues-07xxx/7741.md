# Issue 7741: Can't construct a rational fraction from a symbolic one.

archive/issues_007741.json:
```json
{
    "body": "Given a symbolic expression which is a rational fraction sage refuse to convert it to a element of the Field of rational fraction:\n\n```\nhivert@boxen:~$ sage\n----------------------------------------------------------------------\n| Sage Version 4.2.1, Release Date: 2009-11-14                       |\n| Type notebook() for the GUI, and license() for information.        |\n----------------------------------------------------------------------\nsage: fr = (1+x)/(1+x+x^2)\nsage: Fld = FractionField(PolynomialRing(QQ,x))\nsage: Fld(fr)\nERROR: An unexpected error occurred while tokenizing input\nThe following traceback may be corrupted or invalid\nThe error message is: ('EOF in multi-line statement', (1181, 0))\n\n[...]\n\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n\n[...]\n\n/usr/local/sage/local/lib/python2.6/site-packages/sage/rings/polynomial/polynomial_ring.pyc in _element_constructor_(self, x, check, is_gen, construct, **kwds)\n    304                 x = x.numerator() * x.denominator().inverse_of_unit()\n    305             else:\n--> 306                 raise TypeError, \"denominator must be a unit\"\n    307\n    308         elif isinstance(x, pari_gen):\n\nTypeError: denominator must be a unit\n```\n\nIt seems that it needs to convert is to a polynomial. Of course if one convert numerator and denominator separately everything is Ok:\n\n```\nsage: Fld((1+x))/(1+x+x^2)\n(x + 1)/(x^2 + x + 1)\n```\n\nI'm not sure about which component should be selected... Is it algebra, calculus or coercion...\n\nFlorent\n\n**Assignee:** @robertwb\n\n**CC:**  @burcin\n\n**Keywords:** Fraction Field, coercion\n\n**Resolution:** fixed\n\n**Author:** Robert Bradshaw\n\n**Reviewer:** Florent Hivert, Burcin Erocal\n\n**Merged:** sage-4.6.alpha2\n\nIssue created by migration from https://trac.sagemath.org/ticket/7741\n\n",
    "closed_at": "2010-09-29T04:25:13Z",
    "created_at": "2009-12-19T09:12:57Z",
    "labels": [
        "component: coercion",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.6",
    "title": "Can't construct a rational fraction from a symbolic one.",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/7741",
    "user": "https://github.com/hivert"
}
```
Given a symbolic expression which is a rational fraction sage refuse to convert it to a element of the Field of rational fraction:

```
hivert@boxen:~$ sage
----------------------------------------------------------------------
| Sage Version 4.2.1, Release Date: 2009-11-14                       |
| Type notebook() for the GUI, and license() for information.        |
----------------------------------------------------------------------
sage: fr = (1+x)/(1+x+x^2)
sage: Fld = FractionField(PolynomialRing(QQ,x))
sage: Fld(fr)
ERROR: An unexpected error occurred while tokenizing input
The following traceback may be corrupted or invalid
The error message is: ('EOF in multi-line statement', (1181, 0))

[...]

---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)

[...]

/usr/local/sage/local/lib/python2.6/site-packages/sage/rings/polynomial/polynomial_ring.pyc in _element_constructor_(self, x, check, is_gen, construct, **kwds)
    304                 x = x.numerator() * x.denominator().inverse_of_unit()
    305             else:
--> 306                 raise TypeError, "denominator must be a unit"
    307
    308         elif isinstance(x, pari_gen):

TypeError: denominator must be a unit
```

It seems that it needs to convert is to a polynomial. Of course if one convert numerator and denominator separately everything is Ok:

```
sage: Fld((1+x))/(1+x+x^2)
(x + 1)/(x^2 + x + 1)
```

I'm not sure about which component should be selected... Is it algebra, calculus or coercion...

Florent

**Assignee:** @robertwb

**CC:**  @burcin

**Keywords:** Fraction Field, coercion

**Resolution:** fixed

**Author:** Robert Bradshaw

**Reviewer:** Florent Hivert, Burcin Erocal

**Merged:** sage-4.6.alpha2

Issue created by migration from https://trac.sagemath.org/ticket/7741





---

archive/issue_comments_084101.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2010-01-17T10:04:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7741#issuecomment-84101",
    "user": "https://github.com/robertwb"
}
```

**Changing status** from new to needs_review.



---

archive/attachments_009412.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "7741-symbolic-frac.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket7741/7741-symbolic-frac.patch",
    "created_at": "2010-01-17T10:04:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7741",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/robertwb"
}
```



---

archive/issue_comments_084102.json:
```json
{
    "body": "<a id='comment:2'></a>\n",
    "created_at": "2010-01-17T10:04:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7741#issuecomment-84102",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:2'></a>




---

archive/issue_comments_084103.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2010-01-17T11:49:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7741#issuecomment-84103",
    "user": "https://github.com/hivert"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_084104.json:
```json
{
    "body": "**Author:** Robert Bradshaw",
    "created_at": "2010-01-17T11:49:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7741#issuecomment-84104",
    "user": "https://github.com/hivert"
}
```

**Author:** Robert Bradshaw



---

archive/issue_comments_084105.json:
```json
{
    "body": "**Reviewer:** Florent Hivert",
    "created_at": "2010-01-17T11:49:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7741#issuecomment-84105",
    "user": "https://github.com/hivert"
}
```

**Reviewer:** Florent Hivert



---

archive/issue_comments_084106.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2010-01-18T22:45:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7741#issuecomment-84106",
    "user": "https://github.com/rlmill"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_084107.json:
```json
{
    "body": "**Work_Issues:** needs rebase",
    "created_at": "2010-01-18T22:45:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7741#issuecomment-84107",
    "user": "https://github.com/rlmill"
}
```

**Work_Issues:** needs rebase



---

archive/attachments_009413.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_7741-symbolic-frac-rebase.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket7741/trac_7741-symbolic-frac-rebase.patch",
    "created_at": "2010-06-29T09:41:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7741",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/loefflerd"
}
```



---

archive/issue_comments_084108.json:
```json
{
    "body": "rebased to 4.4.4",
    "created_at": "2010-06-29T09:41:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7741#issuecomment-84108",
    "user": "https://github.com/loefflerd"
}
```

rebased to 4.4.4



---

archive/issue_comments_084109.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2010-06-29T09:42:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7741#issuecomment-84109",
    "user": "https://github.com/loefflerd"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_084110.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2010-07-14T09:58:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7741#issuecomment-84110",
    "user": "https://trac.sagemath.org/admin/accounts/users/demosd235"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_084111.json:
```json
{
    "body": "<a id='comment:6'></a>\nWilliam points out that `denominator is 1` will fail unless denominator is the Python int 1, and nothing else...\n\nIs this really preferable to `denominator == 1`?\n\nPS, Passes tests in `sage/rings/fraction_field_element.pyx`",
    "created_at": "2010-07-14T09:58:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7741#issuecomment-84111",
    "user": "https://trac.sagemath.org/admin/accounts/users/demosd235"
}
```

<a id='comment:6'></a>
William points out that `denominator is 1` will fail unless denominator is the Python int 1, and nothing else...

Is this really preferable to `denominator == 1`?

PS, Passes tests in `sage/rings/fraction_field_element.pyx`



---

archive/issue_comments_084112.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2010-07-29T05:47:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7741#issuecomment-84112",
    "user": "https://github.com/robertwb"
}
```

**Changing status** from needs_work to needs_review.



---

archive/attachments_009414.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "7741-symbolic-frac-fixed.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket7741/7741-symbolic-frac-fixed.patch",
    "created_at": "2010-07-29T05:47:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7741",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/robertwb"
}
```



---

archive/issue_comments_084113.json:
```json
{
    "body": "<a id='comment:7'></a>\nActually, the \"is 1\" was intentional, as I wasn't thinking of taking that path if the user passed in a ring element (as opposed to the default value) and didn't want to make the default value None and handle it everywhere. In retrospect, I think it's fine for it to be equal to 1.",
    "created_at": "2010-07-29T05:47:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7741#issuecomment-84113",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:7'></a>
Actually, the "is 1" was intentional, as I wasn't thinking of taking that path if the user passed in a ring element (as opposed to the default value) and didn't want to make the default value None and handle it everywhere. In retrospect, I think it's fine for it to be equal to 1.



---

archive/issue_events_023287.json:
```json
{
    "actor": "https://github.com/burcin",
    "created_at": "2010-09-25T10:49:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/7741",
    "milestone": "sage-4.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/7741#event-23287"
}
```



---

archive/issue_comments_084114.json:
```json
{
    "body": "<a id='comment:8'></a>\napply only attachment:7741-symbolic-frac-fixed.patch.",
    "created_at": "2010-09-25T10:49:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7741#issuecomment-84114",
    "user": "https://github.com/burcin"
}
```

<a id='comment:8'></a>
apply only attachment:7741-symbolic-frac-fixed.patch.



---

archive/issue_comments_084115.json:
```json
{
    "body": "**Changing work_issues** from \"needs rebase\" to \"\".",
    "created_at": "2010-09-25T10:49:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7741#issuecomment-84115",
    "user": "https://github.com/burcin"
}
```

**Changing work_issues** from "needs rebase" to "".



---

archive/issue_comments_084116.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2010-09-25T10:49:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7741#issuecomment-84116",
    "user": "https://github.com/burcin"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_084117.json:
```json
{
    "body": "**Changing reviewer** from \"Florent Hivert\" to \"Florent Hivert, Burcin Erocal\".",
    "created_at": "2010-09-25T10:49:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7741#issuecomment-84117",
    "user": "https://github.com/burcin"
}
```

**Changing reviewer** from "Florent Hivert" to "Florent Hivert, Burcin Erocal".



---

archive/issue_comments_084118.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2010-09-29T04:25:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7741#issuecomment-84118",
    "user": "https://github.com/qed777"
}
```

**Resolution:** fixed



---

archive/issue_events_023288.json:
```json
{
    "actor": "https://github.com/qed777",
    "created_at": "2010-09-29T04:25:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/7741",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/7741#event-23288"
}
```



---

archive/issue_comments_084119.json:
```json
{
    "body": "**Merged:** sage-4.6.alpha2",
    "created_at": "2010-09-29T04:25:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7741#issuecomment-84119",
    "user": "https://github.com/qed777"
}
```

**Merged:** sage-4.6.alpha2
