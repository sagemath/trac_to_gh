# Issue 7027: clean up f2c spkg

archive/issues_007027.json:
```json
{
    "assignees": [],
    "body": "f2c ignores CC, CFLAGS, and MAKE variables:\nOn sage.math using\n\n```\n  CC=clang\n  CFLAGS=-O3\n  MAKE=\"make -j6\"\n```\n\n```\n****************************************************\nHost system\nuname -a:\nLinux sage.math.washington.edu 2.6.24-28-server #1 SMP Fri Feb 11 18:08:32 UTC 2011 x86_64 Intel(R) Xeon(R) CPU X7460 @ 2.66GHz GenuineIntel GNU/Linux\n****************************************************\n****************************************************\nCC Version\nclang -v\nclang version 3.0 (tags/RELEASE_30/final)\nTarget: x86_64-pc-linux-gnu\nThread model: posix\n****************************************************\ngcc -c f77vers.c\ngcc -c i77vers.c\ngcc -c -DSkip_f2c_Undefs -O -fPIC main.c\nld -r -o main.xxx main.o\nmv main.xxx main.o\ngcc -c -DSkip_f2c_Undefs -O -fPIC s_rnge.c\nld -r -o s_rnge.xxx s_rnge.o\nmv s_rnge.xxx s_rnge.o\ngcc -c -DSkip_f2c_Undefs -O -fPIC abort_.c\n\n```\n\nAlso, there are left over files from development on OSX:\n\n```\nhg status\n? ._.hg\n? ._.hgignore\n? ._SPKG.txt\n? ._spkg-install\n? patches/._f2c.makefile\n```\n\nFinally, there are unnecessary files in the patch directory, we only need one of the patches, and neither of the makefiles.\n\n**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/f2c-20070816.p3.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/f2c-20070816.p3.spkg)\n\n**CC:**  @orlitzky\n\n**Author:** R. Andrew Ohana\n\n**Reviewer:** Michael Orlitzky\n\n**Merged:** sage-5.0.beta6\n\nIssue created by migration from https://trac.sagemath.org/ticket/7027\n\n",
    "closed_at": "2012-02-27T11:19:29Z",
    "created_at": "2009-09-27T11:40:58Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20build",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "clean up f2c spkg",
    "type": "issue",
    "updated_at": "2012-02-27T11:19:29Z",
    "url": "https://github.com/sagemath/sage/issues/7027",
    "user": "https://github.com/sagetrac-drkirkby"
}
```
f2c ignores CC, CFLAGS, and MAKE variables:
On sage.math using

```
  CC=clang
  CFLAGS=-O3
  MAKE="make -j6"
```

```
****************************************************
Host system
uname -a:
Linux sage.math.washington.edu 2.6.24-28-server #1 SMP Fri Feb 11 18:08:32 UTC 2011 x86_64 Intel(R) Xeon(R) CPU X7460 @ 2.66GHz GenuineIntel GNU/Linux
****************************************************
****************************************************
CC Version
clang -v
clang version 3.0 (tags/RELEASE_30/final)
Target: x86_64-pc-linux-gnu
Thread model: posix
****************************************************
gcc -c f77vers.c
gcc -c i77vers.c
gcc -c -DSkip_f2c_Undefs -O -fPIC main.c
ld -r -o main.xxx main.o
mv main.xxx main.o
gcc -c -DSkip_f2c_Undefs -O -fPIC s_rnge.c
ld -r -o s_rnge.xxx s_rnge.o
mv s_rnge.xxx s_rnge.o
gcc -c -DSkip_f2c_Undefs -O -fPIC abort_.c

```

Also, there are left over files from development on OSX:

```
hg status
? ._.hg
? ._.hgignore
? ._SPKG.txt
? ._spkg-install
? patches/._f2c.makefile
```

Finally, there are unnecessary files in the patch directory, we only need one of the patches, and neither of the makefiles.

**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/f2c-20070816.p3.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/f2c-20070816.p3.spkg)

**CC:**  @orlitzky

**Author:** R. Andrew Ohana

**Reviewer:** Michael Orlitzky

**Merged:** sage-5.0.beta6

Issue created by migration from https://trac.sagemath.org/ticket/7027





---

archive/issue_events_071125.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2009-09-27T11:40:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "milestone_number": null,
    "milestone_title": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7027#event-71125"
}
```



---

archive/issue_events_071126.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2009-09-27T11:40:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20build",
    "label_color": "08517b",
    "label_name": "component: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7027#event-71126"
}
```



---

archive/issue_events_071127.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2009-09-27T11:40:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "008080",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7027#event-71127"
}
```



---

archive/issue_comments_052015.json:
```json
{
    "body": "**Author:** R. Andrew Ohana",
    "created_at": "2012-02-09T14:33:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7027#issuecomment-52015",
    "user": "https://github.com/ohanar"
}
```

**Author:** R. Andrew Ohana



---

archive/issue_events_071128.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2012-02-09T14:33:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7027#event-71128"
}
```



---

archive/issue_comments_052016.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -28,4 +28,5 @@\n \n f2c is far from the only program which ignores CC. \n \n-\n+**spkg**:\n+[http://wstein.org/home/ohanar/clang-port/sage-5.0.beta1-src/spkg/standard/f2c-20070816.p3.spkg](http://wstein.org/home/ohanar/clang-port/sage-5.0.beta1-src/spkg/standard/f2c-20070816.p3.spkg)\n``````\n",
    "created_at": "2012-02-09T14:33:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7027#issuecomment-52016",
    "user": "https://github.com/ohanar"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -28,4 +28,5 @@
 
 f2c is far from the only program which ignores CC. 
 
-
+**spkg**:
+[http://wstein.org/home/ohanar/clang-port/sage-5.0.beta1-src/spkg/standard/f2c-20070816.p3.spkg](http://wstein.org/home/ohanar/clang-port/sage-5.0.beta1-src/spkg/standard/f2c-20070816.p3.spkg)
``````




---

archive/issue_comments_052017.json:
```json
{
    "body": "<a id='comment:2'></a>\nCan you do CFLAGS, too, while you're in there?",
    "created_at": "2012-02-09T16:58:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7027#issuecomment-52017",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:2'></a>
Can you do CFLAGS, too, while you're in there?



---

archive/issue_comments_052018.json:
```json
{
    "body": "<a id='comment:3'></a>\nOh, and $MAKE!",
    "created_at": "2012-02-09T17:26:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7027#issuecomment-52018",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:3'></a>
Oh, and $MAKE!



---

archive/issue_comments_052019.json:
```json
{
    "body": "<a id='comment:4'></a>\nOk, updated with $MAKE and $CFLAGS.\n\nThere was a silly patch whose entire purpose was to make the f2c makefile respect global cflags, of course the spkg-install wouldn't respect those cflags :-/. I am now just passing the cflags at the end of the make line in spkg-install, rather than patching the makefile.",
    "created_at": "2012-02-10T09:54:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7027#issuecomment-52019",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:4'></a>
Ok, updated with $MAKE and $CFLAGS.

There was a silly patch whose entire purpose was to make the f2c makefile respect global cflags, of course the spkg-install wouldn't respect those cflags :-/. I am now just passing the cflags at the end of the make line in spkg-install, rather than patching the makefile.



---

archive/issue_comments_052020.json:
```json
{
    "body": "<a id='comment:5'></a>\nI think there are some left-over files in there:\n\n```\nf2c-20070816.p3 $ sage -hg status\n? ._.hg\n? ._.hgignore\n? ._SPKG.txt\n? ._spkg-install\n? patches/._f2c.makefile\n```",
    "created_at": "2012-02-11T04:14:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7027#issuecomment-52020",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:5'></a>
I think there are some left-over files in there:

```
f2c-20070816.p3 $ sage -hg status
? ._.hg
? ._.hgignore
? ._SPKG.txt
? ._spkg-install
? patches/._f2c.makefile
```



---

archive/issue_comments_052021.json:
```json
{
    "body": "<a id='comment:6'></a>\nWhy do we need both `patches/libf2c.makefile` and `patches/libf2c.makefile.patch`? It looks to me like the patch does the same thing as replacing the upstream makefile with libf2c.makefile:\n\n```\n$ diff -u src/libf2c/makefile patches/libf2c.makefile\n--- src/libf2c/makefile\t2007-08-14 21:26:15.000000000 -0400\n+++ patches/libf2c.makefile\t2012-02-10 04:31:00.000000000 -0500\n@@ -70,10 +70,10 @@\n ### If your system lacks ranlib, you don't need it; see README.\n \n f77vers.o: f77vers.c\n-\t$(CC) -c f77vers.c\n+\t$(CC) -c $(CFLAGS) f77vers.c\n \n i77vers.o: i77vers.c\n-\t$(CC) -c i77vers.c\n+\t$(CC) -c $(CFLAGS) i77vers.c\n \n # To get an \"f2c.h\" for use with \"f2c -C++\", first \"make hadd\"\n hadd: f2c.h0 f2ch.add\n```\n\n```\n$ cat patches/libf2c.makefile.patch \n--- libf2c.makefile.orig\t2009-01-20 00:22:57.000000000 -0800\n+++ libf2c.makefile\t2009-01-20 00:22:25.000000000 -0800\n@@ -70,10 +70,10 @@\n ### If your system lacks ranlib, you don't need it; see README.\n \n f77vers.o: f77vers.c\n-\t$(CC) -c f77vers.c\n+\t$(CC) -c $(CFLAGS) f77vers.c\n \n i77vers.o: i77vers.c\n-\t$(CC) -c i77vers.c\n+\t$(CC) -c $(CFLAGS) i77vers.c\n \n # To get an \"f2c.h\" for use with \"f2c -C++\", first \"make hadd\"\n hadd: f2c.h0 f2ch.add\n```\n\nIs there a reason to keep both around and not just the patch?",
    "created_at": "2012-02-11T04:22:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7027#issuecomment-52021",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:6'></a>
Why do we need both `patches/libf2c.makefile` and `patches/libf2c.makefile.patch`? It looks to me like the patch does the same thing as replacing the upstream makefile with libf2c.makefile:

```
$ diff -u src/libf2c/makefile patches/libf2c.makefile
--- src/libf2c/makefile	2007-08-14 21:26:15.000000000 -0400
+++ patches/libf2c.makefile	2012-02-10 04:31:00.000000000 -0500
@@ -70,10 +70,10 @@
 ### If your system lacks ranlib, you don't need it; see README.
 
 f77vers.o: f77vers.c
-	$(CC) -c f77vers.c
+	$(CC) -c $(CFLAGS) f77vers.c
 
 i77vers.o: i77vers.c
-	$(CC) -c i77vers.c
+	$(CC) -c $(CFLAGS) i77vers.c
 
 # To get an "f2c.h" for use with "f2c -C++", first "make hadd"
 hadd: f2c.h0 f2ch.add
```

```
$ cat patches/libf2c.makefile.patch 
--- libf2c.makefile.orig	2009-01-20 00:22:57.000000000 -0800
+++ libf2c.makefile	2009-01-20 00:22:25.000000000 -0800
@@ -70,10 +70,10 @@
 ### If your system lacks ranlib, you don't need it; see README.
 
 f77vers.o: f77vers.c
-	$(CC) -c f77vers.c
+	$(CC) -c $(CFLAGS) f77vers.c
 
 i77vers.o: i77vers.c
-	$(CC) -c i77vers.c
+	$(CC) -c $(CFLAGS) i77vers.c
 
 # To get an "f2c.h" for use with "f2c -C++", first "make hadd"
 hadd: f2c.h0 f2ch.add
```

Is there a reason to keep both around and not just the patch?



---

archive/issue_comments_052022.json:
```json
{
    "body": "**Work Issues:** remove unneeded files; possibly redundant patch",
    "created_at": "2012-02-11T04:22:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7027#issuecomment-52022",
    "user": "https://github.com/orlitzky"
}
```

**Work Issues:** remove unneeded files; possibly redundant patch



---

archive/issue_events_071129.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2012-02-11T04:22:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7027#event-71129"
}
```



---

archive/issue_events_071130.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2012-02-11T04:22:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7027#event-71130"
}
```



---

archive/issue_comments_052023.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [@orlitzky](#comment%3A5):\n> I think there are some left-over files in there:\n> \n> ```\n> f2c-20070816.p3 $ sage -hg status\n> ? ._.hg\n> ? ._.hgignore\n> ? ._SPKG.txt\n> ? ._spkg-install\n> ? patches/._f2c.makefile\n> ```\n\nFYI, these files were in the previous package, probably from someone working on OSX (it seems to like creating these files).",
    "created_at": "2012-02-11T04:42:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7027#issuecomment-52023",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:7'></a>
Replying to [@orlitzky](#comment%3A5):
> I think there are some left-over files in there:
> 
> ```
> f2c-20070816.p3 $ sage -hg status
> ? ._.hg
> ? ._.hgignore
> ? ._SPKG.txt
> ? ._spkg-install
> ? patches/._f2c.makefile
> ```

FYI, these files were in the previous package, probably from someone working on OSX (it seems to like creating these files).



---

archive/issue_events_071131.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2012-02-11T04:51:37Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "rename": {
        "from": "f2c ignores CC and uses gcc anyway",
        "to": "clean up f2c spkg"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7027#event-71131"
}
```



---

archive/issue_comments_052024.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,32 +1,49 @@\n-Using \n-\n-* Solaris 10 update 7 on SPARC\n-* sage-4.1.2.alpha2\n-* Sun Studio 12.1\n-* An updated configure script to allow the Sun compiler to be used.\n+f2c ignores CC, CFLAGS, and MAKE variables:\n+On sage.math using\n \n ```\n-f2c-20070816.p1/src/libf2c/._z_sqrt.c\n-f2c-20070816.p1/src/libf2c/z_sqrt.c\n-Finished extraction\n+  CC=clang\n+  CFLAGS=-O3\n+  MAKE=\"make -j6\"\n+```\n+\n+```\n ****************************************************\n Host system\n uname -a:\n-SunOS swan 5.10 Generic_139555-08 sun4u sparc SUNW,Sun-Blade-1000\n+Linux sage.math.washington.edu 2.6.24-28-server #1 SMP Fri Feb 11 18:08:32 UTC 2011 x86_64 Intel(R) Xeon(R) CPU X7460 @ 2.66GHz GenuineIntel GNU/Linux\n ****************************************************\n ****************************************************\n CC Version\n-/opt/xxxsunstudio12.1/bin/cc -v\n-usage: cc [ options] files.  Use 'cc -flags' for details\n+clang -v\n+clang version 3.0 (tags/RELEASE_30/final)\n+Target: x86_64-pc-linux-gnu\n+Thread model: posix\n ****************************************************\n-make[2]: Entering directory `/export/home/drkirkby/sage/gcc32/sage-4.1.2.alpha2/spkg/build/f2c-20070816.p1/src/libf2c'\n gcc -c f77vers.c\n gcc -c i77vers.c\n+gcc -c -DSkip_f2c_Undefs -O -fPIC main.c\n+ld -r -o main.xxx main.o\n+mv main.xxx main.o\n+gcc -c -DSkip_f2c_Undefs -O -fPIC s_rnge.c\n+ld -r -o s_rnge.xxx s_rnge.o\n+mv s_rnge.xxx s_rnge.o\n+gcc -c -DSkip_f2c_Undefs -O -fPIC abort_.c\n \n ```\n \n+Also, there are left over files from development on OSX:\n \n-f2c is far from the only program which ignores CC. \n+```\n+hg status\n+? ._.hg\n+? ._.hgignore\n+? ._SPKG.txt\n+? ._spkg-install\n+? patches/._f2c.makefile\n+```\n+\n+Finally, there are unnecessary files in the patch directory, we only need one of the patches, and neither of the makefiles.\n \n **spkg**:\n [http://wstein.org/home/ohanar/clang-port/sage-5.0.beta1-src/spkg/standard/f2c-20070816.p3.spkg](http://wstein.org/home/ohanar/clang-port/sage-5.0.beta1-src/spkg/standard/f2c-20070816.p3.spkg)\n``````\n",
    "created_at": "2012-02-11T04:51:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7027#issuecomment-52024",
    "user": "https://github.com/ohanar"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,32 +1,49 @@
-Using 
-
-* Solaris 10 update 7 on SPARC
-* sage-4.1.2.alpha2
-* Sun Studio 12.1
-* An updated configure script to allow the Sun compiler to be used.
+f2c ignores CC, CFLAGS, and MAKE variables:
+On sage.math using
 
 ```
-f2c-20070816.p1/src/libf2c/._z_sqrt.c
-f2c-20070816.p1/src/libf2c/z_sqrt.c
-Finished extraction
+  CC=clang
+  CFLAGS=-O3
+  MAKE="make -j6"
+```
+
+```
 ****************************************************
 Host system
 uname -a:
-SunOS swan 5.10 Generic_139555-08 sun4u sparc SUNW,Sun-Blade-1000
+Linux sage.math.washington.edu 2.6.24-28-server #1 SMP Fri Feb 11 18:08:32 UTC 2011 x86_64 Intel(R) Xeon(R) CPU X7460 @ 2.66GHz GenuineIntel GNU/Linux
 ****************************************************
 ****************************************************
 CC Version
-/opt/xxxsunstudio12.1/bin/cc -v
-usage: cc [ options] files.  Use 'cc -flags' for details
+clang -v
+clang version 3.0 (tags/RELEASE_30/final)
+Target: x86_64-pc-linux-gnu
+Thread model: posix
 ****************************************************
-make[2]: Entering directory `/export/home/drkirkby/sage/gcc32/sage-4.1.2.alpha2/spkg/build/f2c-20070816.p1/src/libf2c'
 gcc -c f77vers.c
 gcc -c i77vers.c
+gcc -c -DSkip_f2c_Undefs -O -fPIC main.c
+ld -r -o main.xxx main.o
+mv main.xxx main.o
+gcc -c -DSkip_f2c_Undefs -O -fPIC s_rnge.c
+ld -r -o s_rnge.xxx s_rnge.o
+mv s_rnge.xxx s_rnge.o
+gcc -c -DSkip_f2c_Undefs -O -fPIC abort_.c
 
 ```
 
+Also, there are left over files from development on OSX:
 
-f2c is far from the only program which ignores CC. 
+```
+hg status
+? ._.hg
+? ._.hgignore
+? ._SPKG.txt
+? ._spkg-install
+? patches/._f2c.makefile
+```
+
+Finally, there are unnecessary files in the patch directory, we only need one of the patches, and neither of the makefiles.
 
 **spkg**:
 [http://wstein.org/home/ohanar/clang-port/sage-5.0.beta1-src/spkg/standard/f2c-20070816.p3.spkg](http://wstein.org/home/ohanar/clang-port/sage-5.0.beta1-src/spkg/standard/f2c-20070816.p3.spkg)
``````




---

archive/issue_comments_052025.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [@orlitzky](#comment%3A6):\n> Why do we need both `patches/libf2c.makefile` and `patches/libf2c.makefile.patch`? It looks to me like the patch does the same thing as replacing the upstream makefile with libf2c.makefile:\n> \n> ```\n> $ diff -u src/libf2c/makefile patches/libf2c.makefile\n> --- src/libf2c/makefile\t2007-08-14 21:26:15.000000000 -0400\n> +++ patches/libf2c.makefile\t2012-02-10 04:31:00.000000000 -0500\n> @@ -70,10 +70,10 @@\n>  ### If your system lacks ranlib, you don't need it; see README.\n>  \n>  f77vers.o: f77vers.c\n> -\t$(CC) -c f77vers.c\n> +\t$(CC) -c $(CFLAGS) f77vers.c\n>  \n>  i77vers.o: i77vers.c\n> -\t$(CC) -c i77vers.c\n> +\t$(CC) -c $(CFLAGS) i77vers.c\n>  \n>  # To get an \"f2c.h\" for use with \"f2c -C++\", first \"make hadd\"\n>  hadd: f2c.h0 f2ch.add\n> ```\n> \n> ```\n> $ cat patches/libf2c.makefile.patch \n> --- libf2c.makefile.orig\t2009-01-20 00:22:57.000000000 -0800\n> +++ libf2c.makefile\t2009-01-20 00:22:25.000000000 -0800\n> @@ -70,10 +70,10 @@\n>  ### If your system lacks ranlib, you don't need it; see README.\n>  \n>  f77vers.o: f77vers.c\n> -\t$(CC) -c f77vers.c\n> +\t$(CC) -c $(CFLAGS) f77vers.c\n>  \n>  i77vers.o: i77vers.c\n> -\t$(CC) -c i77vers.c\n> +\t$(CC) -c $(CFLAGS) i77vers.c\n>  \n>  # To get an \"f2c.h\" for use with \"f2c -C++\", first \"make hadd\"\n>  hadd: f2c.h0 f2ch.add\n> ```\n> \n> Is there a reason to keep both around and not just the patch?\n\nNope, but that wasn't the initial goal of this ticket, that said I've changed the purpose/description.",
    "created_at": "2012-02-11T04:51:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7027#issuecomment-52025",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:8'></a>
Replying to [@orlitzky](#comment%3A6):
> Why do we need both `patches/libf2c.makefile` and `patches/libf2c.makefile.patch`? It looks to me like the patch does the same thing as replacing the upstream makefile with libf2c.makefile:
> 
> ```
> $ diff -u src/libf2c/makefile patches/libf2c.makefile
> --- src/libf2c/makefile	2007-08-14 21:26:15.000000000 -0400
> +++ patches/libf2c.makefile	2012-02-10 04:31:00.000000000 -0500
> @@ -70,10 +70,10 @@
>  ### If your system lacks ranlib, you don't need it; see README.
>  
>  f77vers.o: f77vers.c
> -	$(CC) -c f77vers.c
> +	$(CC) -c $(CFLAGS) f77vers.c
>  
>  i77vers.o: i77vers.c
> -	$(CC) -c i77vers.c
> +	$(CC) -c $(CFLAGS) i77vers.c
>  
>  # To get an "f2c.h" for use with "f2c -C++", first "make hadd"
>  hadd: f2c.h0 f2ch.add
> ```
> 
> ```
> $ cat patches/libf2c.makefile.patch 
> --- libf2c.makefile.orig	2009-01-20 00:22:57.000000000 -0800
> +++ libf2c.makefile	2009-01-20 00:22:25.000000000 -0800
> @@ -70,10 +70,10 @@
>  ### If your system lacks ranlib, you don't need it; see README.
>  
>  f77vers.o: f77vers.c
> -	$(CC) -c f77vers.c
> +	$(CC) -c $(CFLAGS) f77vers.c
>  
>  i77vers.o: i77vers.c
> -	$(CC) -c i77vers.c
> +	$(CC) -c $(CFLAGS) i77vers.c
>  
>  # To get an "f2c.h" for use with "f2c -C++", first "make hadd"
>  hadd: f2c.h0 f2ch.add
> ```
> 
> Is there a reason to keep both around and not just the patch?

Nope, but that wasn't the initial goal of this ticket, that said I've changed the purpose/description.



---

archive/issue_events_071132.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2012-02-11T05:12:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7027#event-71132"
}
```



---

archive/issue_events_071133.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2012-02-11T05:12:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7027#event-71133"
}
```



---

archive/issue_comments_052026.json:
```json
{
    "body": "<a id='comment:9'></a>\nok, I've made those changes (plus cleaned up the source directory, which wasn't pristine)",
    "created_at": "2012-02-11T05:12:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7027#issuecomment-52026",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:9'></a>
ok, I've made those changes (plus cleaned up the source directory, which wasn't pristine)



---

archive/issue_comments_052027.json:
```json
{
    "body": "**Changing work issues** from \"remove unneeded files; possibly redundant patch\" to \"\".",
    "created_at": "2012-02-11T05:12:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7027#issuecomment-52027",
    "user": "https://github.com/ohanar"
}
```

**Changing work issues** from "remove unneeded files; possibly redundant patch" to "".



---

archive/issue_comments_052028.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [@ohanar](#comment%3A9):\n> ok, I've made those changes (plus cleaned up the source directory, which wasn't pristine)\n\nThanks for taking the time to do this, I didn't check the old SPKG for those files.\n\nI've compared the p2 and p3 `src` directories after patching; they look equivalent given the `spkg-install` changes.\n\nTo test the original issue, I've replaced `$CC` and `$CFLAGS` in both makefiles with junk. If I don't set my environment variables, the build crashes. If I export a real `$CC` and `$CFLAGS`, it builds fine.\n\nI built with `MAKE=make -j40` with no problems.",
    "created_at": "2012-02-11T14:47:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7027#issuecomment-52028",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:10'></a>
Replying to [@ohanar](#comment%3A9):
> ok, I've made those changes (plus cleaned up the source directory, which wasn't pristine)

Thanks for taking the time to do this, I didn't check the old SPKG for those files.

I've compared the p2 and p3 `src` directories after patching; they look equivalent given the `spkg-install` changes.

To test the original issue, I've replaced `$CC` and `$CFLAGS` in both makefiles with junk. If I don't set my environment variables, the build crashes. If I export a real `$CC` and `$CFLAGS`, it builds fine.

I built with `MAKE=make -j40` with no problems.



---

archive/issue_events_071134.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2012-02-11T14:47:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7027#event-71134"
}
```



---

archive/issue_events_071135.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2012-02-11T14:47:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7027#event-71135"
}
```



---

archive/issue_comments_052029.json:
```json
{
    "body": "**Reviewer:** Michael Orlitzky",
    "created_at": "2012-02-11T14:47:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7027#issuecomment-52029",
    "user": "https://github.com/orlitzky"
}
```

**Reviewer:** Michael Orlitzky



---

archive/issue_comments_052030.json:
```json
{
    "body": "<a id='comment:11'></a>\nI would have thought it sensible to check the return value of 'patch'. Any changes in the package are could easily stop the patch applying cleanly, if at all, yet that is not tested. \n\nDave",
    "created_at": "2012-02-11T17:03:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7027#issuecomment-52030",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:11'></a>
I would have thought it sensible to check the return value of 'patch'. Any changes in the package are could easily stop the patch applying cleanly, if at all, yet that is not tested. 

Dave



---

archive/issue_events_071136.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2012-02-11T17:25:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7027#event-71136"
}
```



---

archive/issue_events_071137.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2012-02-11T17:25:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7027#event-71137"
}
```



---

archive/issue_comments_052031.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [drkirkby](#comment%3A11):\n> I would have thought it sensible to check the return value of 'patch'. Any changes in the package are could easily stop the patch applying cleanly, if at all, yet that is not tested. \n\nYup, I agree, I've uploaded a new spkg that adds a check.\n> \n> Dave",
    "created_at": "2012-02-11T17:25:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7027#issuecomment-52031",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:12'></a>
Replying to [drkirkby](#comment%3A11):
> I would have thought it sensible to check the return value of 'patch'. Any changes in the package are could easily stop the patch applying cleanly, if at all, yet that is not tested. 

Yup, I agree, I've uploaded a new spkg that adds a check.
> 
> Dave



---

archive/issue_events_071138.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2012-02-11T17:26:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7027#event-71138"
}
```



---

archive/issue_events_071139.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2012-02-11T17:26:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7027#event-71139"
}
```



---

archive/issue_comments_052032.json:
```json
{
    "body": "**Work Issues:** patch success test, immortal dotfiles",
    "created_at": "2012-02-11T19:38:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7027#issuecomment-52032",
    "user": "https://github.com/orlitzky"
}
```

**Work Issues:** patch success test, immortal dotfiles



---

archive/issue_events_071140.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2012-02-11T19:38:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7027#event-71140"
}
```



---

archive/issue_events_071141.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2012-02-11T19:38:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7027#event-71141"
}
```



---

archive/issue_comments_052033.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [drkirkby](#comment%3A11):\n> I would have thought it sensible to check the return value of 'patch'. Any changes in the package are could easily stop the patch applying cleanly, if at all, yet that is not tested. \n\nIf we want to go this route, we'll have to set the fuzz factor. Otherwise, GNU patch, at least, will happily return success:\n\n```\n$ emacs makefile\n$ patch -p0 < ../../patches/libf2c.makefile.patch \npatching file makefile\nHunk #1 succeeded at 73 with fuzz 1 (offset 3 lines).\n$ echo $?\n0\n```\n\nUsing `--fuzz=0` should catch that, but will still miss large offsets. I don't know if there's a way to catch those... `patch` is returning success here even for huge offsets:\n\n```\n$ patch --fuzz=0 -p0 < ../../patches/libf2c.makefile.patch \npatching file makefile\nHunk #1 succeeded at 111 (offset 41 lines).\n$ echo $?\n0\n```\n\nWhoever is upgrading the package would hopefully check for this, but maybe there's a smarter way that I haven't found yet.\n\nAnyway, these are back =)\n\n```\n$ sage -hg status\n? ._.hg\n? ._.hgignore\n? ._SPKG.txt\n? ._spkg-install\n? patches/._f2c.makefile\n```",
    "created_at": "2012-02-11T19:38:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7027#issuecomment-52033",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:14'></a>
Replying to [drkirkby](#comment%3A11):
> I would have thought it sensible to check the return value of 'patch'. Any changes in the package are could easily stop the patch applying cleanly, if at all, yet that is not tested. 

If we want to go this route, we'll have to set the fuzz factor. Otherwise, GNU patch, at least, will happily return success:

```
$ emacs makefile
$ patch -p0 < ../../patches/libf2c.makefile.patch 
patching file makefile
Hunk #1 succeeded at 73 with fuzz 1 (offset 3 lines).
$ echo $?
0
```

Using `--fuzz=0` should catch that, but will still miss large offsets. I don't know if there's a way to catch those... `patch` is returning success here even for huge offsets:

```
$ patch --fuzz=0 -p0 < ../../patches/libf2c.makefile.patch 
patching file makefile
Hunk #1 succeeded at 111 (offset 41 lines).
$ echo $?
0
```

Whoever is upgrading the package would hopefully check for this, but maybe there's a smarter way that I haven't found yet.

Anyway, these are back =)

```
$ sage -hg status
? ._.hg
? ._.hgignore
? ._SPKG.txt
? ._spkg-install
? patches/._f2c.makefile
```



---

archive/issue_comments_052034.json:
```json
{
    "body": "<a id='comment:15'></a>\nPeople updating packages, whilst not taking care of patches, has been a problem several times in Sage. Anything that could be done to reduce that would be good, but maybe it's not possible to do it very well. \n\nDave",
    "created_at": "2012-02-11T19:53:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7027#issuecomment-52034",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:15'></a>
People updating packages, whilst not taking care of patches, has been a problem several times in Sage. Anything that could be done to reduce that would be good, but maybe it's not possible to do it very well. 

Dave



---

archive/issue_comments_052035.json:
```json
{
    "body": "**Attachment:** [f2c-20070816.p3.patch.gz](https://github.com/sagemath/sage/files/ticket7027/f2c-20070816.p3.patch.gz)\n\nfor review purposes",
    "created_at": "2012-02-12T22:31:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7027#issuecomment-52035",
    "user": "https://github.com/ohanar"
}
```

**Attachment:** [f2c-20070816.p3.patch.gz](https://github.com/sagemath/sage/files/ticket7027/f2c-20070816.p3.patch.gz)

for review purposes



---

archive/issue_events_071142.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2012-02-12T22:35:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7027#event-71142"
}
```



---

archive/issue_events_071143.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2012-02-12T22:35:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7027#event-71143"
}
```



---

archive/issue_comments_052036.json:
```json
{
    "body": "<a id='comment:16'></a>\nOk, new version, got rid of the `._` files again (which was my bad, since I restarted off of the p2 package). I've also made some more changes to spkg-install, added some comments, moved some stuff around, made it more uniform, as well as make a libf2c directory in patches, just to make it easy to add patches in the future, if they are ever needed.",
    "created_at": "2012-02-12T22:35:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7027#issuecomment-52036",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:16'></a>
Ok, new version, got rid of the `._` files again (which was my bad, since I restarted off of the p2 package). I've also made some more changes to spkg-install, added some comments, moved some stuff around, made it more uniform, as well as make a libf2c directory in patches, just to make it easy to add patches in the future, if they are ever needed.



---

archive/issue_comments_052037.json:
```json
{
    "body": "<a id='comment:17'></a>\nThis one looks good.\n\nFor future reference, we can probably drop the `-g` (debug) flag, and shouldn't install `libf2c` if building `f2c` fails, but those are minor and unrelated to this ticket.",
    "created_at": "2012-02-23T18:24:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7027#issuecomment-52037",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:17'></a>
This one looks good.

For future reference, we can probably drop the `-g` (debug) flag, and shouldn't install `libf2c` if building `f2c` fails, but those are minor and unrelated to this ticket.



---

archive/issue_events_071144.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2012-02-23T18:24:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7027#event-71144"
}
```



---

archive/issue_events_071145.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2012-02-23T18:24:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7027#event-71145"
}
```



---

archive/issue_comments_052038.json:
```json
{
    "body": "<a id='comment:18'></a>\nReplying to [@orlitzky](#comment%3A17):\n> For future reference, we can probably drop the `-g` (debug) flag, \n\nYeah, I didn't know why we had this, but I didn't want to break anything, so I kept it for safe measure.",
    "created_at": "2012-02-23T18:27:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7027#issuecomment-52038",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:18'></a>
Replying to [@orlitzky](#comment%3A17):
> For future reference, we can probably drop the `-g` (debug) flag, 

Yeah, I didn't know why we had this, but I didn't want to break anything, so I kept it for safe measure.



---

archive/issue_comments_052039.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [@orlitzky](#comment%3A14):\n> but will still miss large offsets. I don't know if there's a way to catch those... `patch` is returning success here even for huge offsets\n\nThose are pretty innocent and not a big deal in my opinion.  I have never seen a patch applied wrongly because of this.",
    "created_at": "2012-02-23T20:06:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7027#issuecomment-52039",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:19'></a>
Replying to [@orlitzky](#comment%3A14):
> but will still miss large offsets. I don't know if there's a way to catch those... `patch` is returning success here even for huge offsets

Those are pretty innocent and not a big deal in my opinion.  I have never seen a patch applied wrongly because of this.



---

archive/issue_comments_052040.json:
```json
{
    "body": "<a id='comment:20'></a>\nCC needs quoting:\n\n```\n$MAKE CC=\"$CC\" CFLAGS=\"${CFLAGS}\" \n```\n\nAlso, it would be good to mention the ticket number in `SPKG.txt`.\n\n(you can set back positive review yourself after making these trivial changes)",
    "created_at": "2012-02-23T20:11:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7027#issuecomment-52040",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:20'></a>
CC needs quoting:

```
$MAKE CC="$CC" CFLAGS="${CFLAGS}" 
```

Also, it would be good to mention the ticket number in `SPKG.txt`.

(you can set back positive review yourself after making these trivial changes)



---

archive/issue_events_071146.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-23T20:11:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7027#event-71146"
}
```



---

archive/issue_events_071147.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-23T20:11:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7027#event-71147"
}
```



---

archive/issue_events_071148.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2012-02-23T20:18:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7027#event-71148"
}
```



---

archive/issue_events_071149.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2012-02-23T20:18:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7027#event-71149"
}
```



---

archive/issue_comments_052041.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [@jdemeyer](#comment%3A20):\n> CC needs quoting:\n\ndone\n> \n> Also, it would be good to mention the ticket number in `SPKG.txt`.\n\nand done",
    "created_at": "2012-02-23T20:18:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7027#issuecomment-52041",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:21'></a>
Replying to [@jdemeyer](#comment%3A20):
> CC needs quoting:

done
> 
> Also, it would be good to mention the ticket number in `SPKG.txt`.

and done



---

archive/issue_comments_052042.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -45,5 +45,4 @@\n \n Finally, there are unnecessary files in the patch directory, we only need one of the patches, and neither of the makefiles.\n \n-**spkg**:\n-[http://wstein.org/home/ohanar/clang-port/sage-5.0.beta1-src/spkg/standard/f2c-20070816.p3.spkg](http://wstein.org/home/ohanar/clang-port/sage-5.0.beta1-src/spkg/standard/f2c-20070816.p3.spkg)\n+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/f2c-20070816.p3.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/f2c-20070816.p3.spkg)\n``````\n",
    "created_at": "2012-02-24T15:46:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7027#issuecomment-52042",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -45,5 +45,4 @@
 
 Finally, there are unnecessary files in the patch directory, we only need one of the patches, and neither of the makefiles.
 
-**spkg**:
-[http://wstein.org/home/ohanar/clang-port/sage-5.0.beta1-src/spkg/standard/f2c-20070816.p3.spkg](http://wstein.org/home/ohanar/clang-port/sage-5.0.beta1-src/spkg/standard/f2c-20070816.p3.spkg)
+**spkg**: [http://boxen.math.washington.edu/home/jdemeyer/spkg/f2c-20070816.p3.spkg](http://boxen.math.washington.edu/home/jdemeyer/spkg/f2c-20070816.p3.spkg)
``````




---

archive/issue_comments_052043.json:
```json
{
    "body": "<a id='comment:22'></a>\nI made `spkg-check` executable, as it should be.",
    "created_at": "2012-02-24T15:46:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7027#issuecomment-52043",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:22'></a>
I made `spkg-check` executable, as it should be.



---

archive/issue_comments_052044.json:
```json
{
    "body": "**Changing work issues** from \"patch success test, immortal dotfiles\" to \"\".",
    "created_at": "2012-02-24T18:38:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7027#issuecomment-52044",
    "user": "https://github.com/jdemeyer"
}
```

**Changing work issues** from "patch success test, immortal dotfiles" to "".



---

archive/issue_events_071150.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-27T11:19:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7027#event-71150"
}
```



---

archive/issue_events_071151.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-02-27T11:19:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7027#event-71151"
}
```



---

archive/issue_comments_052045.json:
```json
{
    "body": "**Merged:** sage-5.0.beta6",
    "created_at": "2012-02-27T11:19:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7027#issuecomment-52045",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.0.beta6
