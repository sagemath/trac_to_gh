# Issue 7729: Iwahori Hecke algebras on the T basis

archive/issues_007729.json:
```json
{
    "assignees": [
        "https://github.com/dwbump"
    ],
    "body": "The attached patch implements Iwahori Hecke algebras. Given a Cartan Type (finite or affine), the Iwahori Hecke algebra is a deformation of the group algebra over the Weyl group. It has generators in bijection with the simple reflections of the Weyl group that satisfy simple quadratic relations of the form `(T_i-q1)*(T_i-q2)` = 0. Often we default q2=-1, q1=q in which case the relation is of the form `T_i^2=(q-1)T_i+q`. The generators also satisfy the braid relations.  \n\n```\nsage: R.<q>=PolynomialRing(QQ)\nsage: H = IwahoriHeckeAlgebra(\"A3\",q)\nsage: [T1,T2,T3]=H.algebra_generators()\nsage: T1*(T2+T3)*T1\nT1*T2*T1 + (q-1)*T3*T1 + q*T3\n```\n\nFor some further discussion of this topic see\nhttp://groups.google.com/group/sage-combinat-devel/browse_thread/thread/78fc23f23cafe705?hl=en\n\n\nKeywords: **Iwahori Hecke Algebra**\n\nReviewer: **Anne Schilling**\n\nAuthor: **Daniel Bump, Nicolas M. Thi\u00e9ry**\n\nMerged: **sage-4.3.1.alpha2**\n\nComponent: **combinatorics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/7729_\n\n",
    "closed_at": "2010-01-13T09:35:49Z",
    "created_at": "2009-12-18T01:36:46Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.3.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Iwahori Hecke algebras on the T basis",
    "type": "issue",
    "updated_at": "2016-07-14T07:17:21Z",
    "url": "https://github.com/sagemath/sage/issues/7729",
    "user": "https://github.com/dwbump"
}
```
The attached patch implements Iwahori Hecke algebras. Given a Cartan Type (finite or affine), the Iwahori Hecke algebra is a deformation of the group algebra over the Weyl group. It has generators in bijection with the simple reflections of the Weyl group that satisfy simple quadratic relations of the form `(T_i-q1)*(T_i-q2)` = 0. Often we default q2=-1, q1=q in which case the relation is of the form `T_i^2=(q-1)T_i+q`. The generators also satisfy the braid relations.  

```
sage: R.<q>=PolynomialRing(QQ)
sage: H = IwahoriHeckeAlgebra("A3",q)
sage: [T1,T2,T3]=H.algebra_generators()
sage: T1*(T2+T3)*T1
T1*T2*T1 + (q-1)*T3*T1 + q*T3
```

For some further discussion of this topic see
http://groups.google.com/group/sage-combinat-devel/browse_thread/thread/78fc23f23cafe705?hl=en


Keywords: **Iwahori Hecke Algebra**

Reviewer: **Anne Schilling**

Author: **Daniel Bump, Nicolas M. Thiéry**

Merged: **sage-4.3.1.alpha2**

Component: **combinatorics**

_Issue created by migration from https://trac.sagemath.org/ticket/7729_





---

archive/issue_events_094658.json:
```json
{
    "actor": "https://github.com/dwbump",
    "created_at": "2009-12-18T01:36:46Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "milestone_number": null,
    "milestone_title": "sage-4.3.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7729#event-94658"
}
```



---

archive/issue_events_094659.json:
```json
{
    "actor": "https://github.com/dwbump",
    "created_at": "2009-12-18T01:36:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebra",
    "label_color": "0000ff",
    "label_name": "c: algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7729#event-94659"
}
```



---

archive/issue_events_094660.json:
```json
{
    "actor": "https://github.com/dwbump",
    "created_at": "2009-12-18T01:36:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7729#event-94660"
}
```



---

archive/issue_events_094661.json:
```json
{
    "actor": "https://github.com/dwbump",
    "created_at": "2009-12-18T01:36:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7729#event-94661"
}
```



---

archive/issue_events_094662.json:
```json
{
    "actor": "https://github.com/dwbump",
    "created_at": "2009-12-18T01:36:46Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "subject": "https://github.com/dwbump",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7729#event-94662"
}
```



---

archive/issue_events_094663.json:
```json
{
    "actor": "https://github.com/dwbump",
    "created_at": "2009-12-18T01:40:28Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "title_is": "Iwahori Hecke algebras [with patch, needs review]",
    "title_was": "Iwahori Hecke algebras",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7729#event-94663"
}
```



---

archive/issue_comments_057998.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -16,9 +16,11 @@\n \n * The get_action method is a kludge to avoid the crash reported in #7725. That crash is fixed by David Roe's patch in #7718, but this patch does not work with the patch in #7718.\n \n+* It should be made to work with Affine Weyl groups. I have not checked whether this requires further modification.\n+\n+* Subjectively, it seems a little slow compared with a previous implementation for type A only. This is probably a limitation of the `WeylGroup()` class on which it depends. My earlier implementation was based on Permutation. If it proves unacceptably slow it may be possible to speed it up by a caching scheme.\n+\n For some further discussion of this topic see\n http://groups.google.com/group/sage-combinat-devel/browse_thread/thread/78fc23f23cafe705?hl=en\n \n-It is well tested for type A and is probably correct for all Cartan Types of finite type. I have not tried it with \n-\n-\n+It is well tested for type A and is probably correct for all Cartan Types of finite type.\n``````\n",
    "created_at": "2009-12-18T01:47:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7729#issuecomment-57998",
    "user": "https://github.com/dwbump"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -16,9 +16,11 @@
 
 * The get_action method is a kludge to avoid the crash reported in #7725. That crash is fixed by David Roe's patch in #7718, but this patch does not work with the patch in #7718.
 
+* It should be made to work with Affine Weyl groups. I have not checked whether this requires further modification.
+
+* Subjectively, it seems a little slow compared with a previous implementation for type A only. This is probably a limitation of the `WeylGroup()` class on which it depends. My earlier implementation was based on Permutation. If it proves unacceptably slow it may be possible to speed it up by a caching scheme.
+
 For some further discussion of this topic see
 http://groups.google.com/group/sage-combinat-devel/browse_thread/thread/78fc23f23cafe705?hl=en
 
-It is well tested for type A and is probably correct for all Cartan Types of finite type. I have not tried it with 
-
-
+It is well tested for type A and is probably correct for all Cartan Types of finite type.
``````




---

archive/issue_comments_057999.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-The attached patch implements Iwahori Hecke algebras. Given a Cartan Type, the Iwahori Hecke algebra is a deformation of the group algebra over the Weyl group. It has generators in bijection with the simple reflections of the Weyl group that satisfy simple quadratic relations of the form (T_i-q1)*(T_i-q2) = 0. Often we default q2=-1, q1=q in which case the relation is of the form T_i^2=(q-1)T_i+q. The generators also satisfy the braid relations.  \n+The attached patch implements Iwahori Hecke algebras. Given a Cartan Type, the Iwahori Hecke algebra is a deformation of the group algebra over the Weyl group. It has generators in bijection with the simple reflections of the Weyl group that satisfy simple quadratic relations of the form `(T_i-q1)*(T_i-q2)` = 0. Often we default q2=-1, q1=q in which case the relation is of the form `T_i^2=(q-1)T_i+q`. The generators also satisfy the braid relations.  \n \n ```\n sage: R.<q>=PolynomialRing(QQ)\n``````\n",
    "created_at": "2009-12-18T01:55:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7729#issuecomment-57999",
    "user": "https://github.com/dwbump"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-The attached patch implements Iwahori Hecke algebras. Given a Cartan Type, the Iwahori Hecke algebra is a deformation of the group algebra over the Weyl group. It has generators in bijection with the simple reflections of the Weyl group that satisfy simple quadratic relations of the form (T_i-q1)*(T_i-q2) = 0. Often we default q2=-1, q1=q in which case the relation is of the form T_i^2=(q-1)T_i+q. The generators also satisfy the braid relations.  
+The attached patch implements Iwahori Hecke algebras. Given a Cartan Type, the Iwahori Hecke algebra is a deformation of the group algebra over the Weyl group. It has generators in bijection with the simple reflections of the Weyl group that satisfy simple quadratic relations of the form `(T_i-q1)*(T_i-q2)` = 0. Often we default q2=-1, q1=q in which case the relation is of the form `T_i^2=(q-1)T_i+q`. The generators also satisfy the braid relations.  
 
 ```
 sage: R.<q>=PolynomialRing(QQ)
``````




---

archive/issue_comments_058000.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,14 +12,14 @@\n \n The following issues remain.\n \n-* It may require some revision in order to follow Sage's coercion model. David Roe suggested that the _coerce_impl method should be removed.\n-\n-* The get_action method is a kludge to avoid the crash reported in #7725. That crash is fixed by David Roe's patch in #7718, but this patch does not work with the patch in #7718.\n+* David Roe suggested that the _coerce_impl method should be removed. I have not looked at this yet.\n \n * It should be made to work with Affine Weyl groups. I have not checked whether this requires further modification.\n \n * Subjectively, it seems a little slow compared with a previous implementation for type A only. This is probably a limitation of the `WeylGroup()` class on which it depends. My earlier implementation was based on Permutation. If it proves unacceptably slow it may be possible to speed it up by a caching scheme.\n \n+* Later I may add a method to compute intertwining elements which depend on spectral parameters. These have applications to representations of p-adic groups.\n+\n For some further discussion of this topic see\n http://groups.google.com/group/sage-combinat-devel/browse_thread/thread/78fc23f23cafe705?hl=en\n \n``````\n",
    "created_at": "2009-12-18T16:26:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7729#issuecomment-58000",
    "user": "https://github.com/dwbump"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,14 +12,14 @@
 
 The following issues remain.
 
-* It may require some revision in order to follow Sage's coercion model. David Roe suggested that the _coerce_impl method should be removed.
-
-* The get_action method is a kludge to avoid the crash reported in #7725. That crash is fixed by David Roe's patch in #7718, but this patch does not work with the patch in #7718.
+* David Roe suggested that the _coerce_impl method should be removed. I have not looked at this yet.
 
 * It should be made to work with Affine Weyl groups. I have not checked whether this requires further modification.
 
 * Subjectively, it seems a little slow compared with a previous implementation for type A only. This is probably a limitation of the `WeylGroup()` class on which it depends. My earlier implementation was based on Permutation. If it proves unacceptably slow it may be possible to speed it up by a caching scheme.
 
+* Later I may add a method to compute intertwining elements which depend on spectral parameters. These have applications to representations of p-adic groups.
+
 For some further discussion of this topic see
 http://groups.google.com/group/sage-combinat-devel/browse_thread/thread/78fc23f23cafe705?hl=en
 
``````




---

archive/issue_comments_058001.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI posted a new version. This version works either before or after the patch in #7718.",
    "created_at": "2009-12-18T16:26:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7729#issuecomment-58001",
    "user": "https://github.com/dwbump"
}
```

<div id="comment:4" align="right">comment:4</div>

I posted a new version. This version works either before or after the patch in #7718.



---

archive/issue_events_094664.json:
```json
{
    "actor": "https://github.com/dwbump",
    "created_at": "2009-12-18T17:29:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebra",
    "label_color": "0000ff",
    "label_name": "c: algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7729#event-94664"
}
```



---

archive/issue_events_094665.json:
```json
{
    "actor": "https://github.com/dwbump",
    "created_at": "2009-12-18T17:29:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7729#event-94665"
}
```



---

archive/issue_events_094666.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2009-12-19T00:14:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7729#event-94666"
}
```



---

archive/issue_comments_058002.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nHi Dan!\n\nThanks much for implementing this very useful feature!\n\nDo you mind renaming it into IwahoriHeckeAlgebraT or TBasis, so that we can\nlater use IwahoriHeckeAlgebra for the abstract Iwahori Hecke algebra with its other bases?\n\nOther than that, the code looks good, except for the duplication of the CombinatorialFreeModule code. Do you mind if I refactor it to use the category framework and CombinatorialFreeModule?\nI am not sure when I'll be able to do that though, so maybe it's best to first get this patch\ninto Sage. Unless you are tempted by the adventure.\n\nI don't expect particular problems with affine weyl groups or other coxeter groups.\n\nAh one thing: please make the algebra generators into a family indexed by the index set of the Dynkin diagram (so that T[1], ... ) will do what we expect.",
    "created_at": "2009-12-19T00:14:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7729#issuecomment-58002",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:6" align="right">comment:6</div>

Hi Dan!

Thanks much for implementing this very useful feature!

Do you mind renaming it into IwahoriHeckeAlgebraT or TBasis, so that we can
later use IwahoriHeckeAlgebra for the abstract Iwahori Hecke algebra with its other bases?

Other than that, the code looks good, except for the duplication of the CombinatorialFreeModule code. Do you mind if I refactor it to use the category framework and CombinatorialFreeModule?
I am not sure when I'll be able to do that though, so maybe it's best to first get this patch
into Sage. Unless you are tempted by the adventure.

I don't expect particular problems with affine weyl groups or other coxeter groups.

Ah one thing: please make the algebra generators into a family indexed by the index set of the Dynkin diagram (so that T[1], ... ) will do what we expect.



---

archive/issue_comments_058003.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,13 +8,11 @@\n T1*T2*T1 + (q-1)*T3*T1 + q*T3\n ```\n \n-This code is very tested for type A and is almost certainly correct for Weyl groups of finite type. I have not tried it for any affine Weyl groups.\n+This code is very tested for type A and is almost certainly correct for Weyl groups of finite type. It also works for affine Weyl groups in the most recently posted version.\n \n The following issues remain.\n \n * David Roe suggested that the _coerce_impl method should be removed. I have not looked at this yet.\n-\n-* It should be made to work with Affine Weyl groups. I have not checked whether this requires further modification.\n \n * Subjectively, it seems a little slow compared with a previous implementation for type A only. This is probably a limitation of the `WeylGroup()` class on which it depends. My earlier implementation was based on Permutation. If it proves unacceptably slow it may be possible to speed it up by a caching scheme.\n \n@@ -23,4 +21,3 @@\n For some further discussion of this topic see\n http://groups.google.com/group/sage-combinat-devel/browse_thread/thread/78fc23f23cafe705?hl=en\n \n-It is well tested for type A and is probably correct for all Cartan Types of finite type.\n``````\n",
    "created_at": "2009-12-19T00:23:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7729#issuecomment-58003",
    "user": "https://github.com/dwbump"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,13 +8,11 @@
 T1*T2*T1 + (q-1)*T3*T1 + q*T3
 ```
 
-This code is very tested for type A and is almost certainly correct for Weyl groups of finite type. I have not tried it for any affine Weyl groups.
+This code is very tested for type A and is almost certainly correct for Weyl groups of finite type. It also works for affine Weyl groups in the most recently posted version.
 
 The following issues remain.
 
 * David Roe suggested that the _coerce_impl method should be removed. I have not looked at this yet.
-
-* It should be made to work with Affine Weyl groups. I have not checked whether this requires further modification.
 
 * Subjectively, it seems a little slow compared with a previous implementation for type A only. This is probably a limitation of the `WeylGroup()` class on which it depends. My earlier implementation was based on Permutation. If it proves unacceptably slow it may be possible to speed it up by a caching scheme.
 
@@ -23,4 +21,3 @@
 For some further discussion of this topic see
 http://groups.google.com/group/sage-combinat-devel/browse_thread/thread/78fc23f23cafe705?hl=en
 
-It is well tested for type A and is probably correct for all Cartan Types of finite type.
``````




---

archive/issue_comments_058004.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI've revised it so that it works with affine Weyl groups.\n\nI don't mind renaming it IwahoriHeckeAlgebraT but it seems to\nme that perhaps other presentations can be handled within this\nframework. I think I should leave the refactoring to the\ncategory framework to you.\n\nI will make the algebra generators into a family. When I've\ndone that I will change the status back to needs review.",
    "created_at": "2009-12-19T00:23:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7729#issuecomment-58004",
    "user": "https://github.com/dwbump"
}
```

<div id="comment:7" align="right">comment:7</div>

I've revised it so that it works with affine Weyl groups.

I don't mind renaming it IwahoriHeckeAlgebraT but it seems to
me that perhaps other presentations can be handled within this
framework. I think I should leave the refactoring to the
category framework to you.

I will make the algebra generators into a family. When I've
done that I will change the status back to needs review.



---

archive/issue_comments_058005.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI've addressed two out of three of Nicolas' requests, and his\nmessage indicates that the refactoring issue can be postponed.\n\n* The name is now `IwahoriHeckeAlgebraT`\n\n* `self.algebra_generators()` now returns a finite family.\n\nI've changed the status back to needs review.\n\nNicolas wrote:\n\n> Do you mind renaming it into IwahoriHeckeAlgebraT or TBasis, so that we can later > use IwahoriHeckeAlgebra? for the abstract Iwahori Hecke algebra with its other bases?\n\nwhat other bases do we need? There is the Bernstein Zelevinsky presentation.",
    "created_at": "2009-12-19T01:10:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7729#issuecomment-58005",
    "user": "https://github.com/dwbump"
}
```

<div id="comment:8" align="right">comment:8</div>

I've addressed two out of three of Nicolas' requests, and his
message indicates that the refactoring issue can be postponed.

* The name is now `IwahoriHeckeAlgebraT`

* `self.algebra_generators()` now returns a finite family.

I've changed the status back to needs review.

Nicolas wrote:

> Do you mind renaming it into IwahoriHeckeAlgebraT or TBasis, so that we can later > use IwahoriHeckeAlgebra? for the abstract Iwahori Hecke algebra with its other bases?

what other bases do we need? There is the Bernstein Zelevinsky presentation.



---

archive/issue_events_094667.json:
```json
{
    "actor": "https://github.com/dwbump",
    "created_at": "2009-12-19T01:10:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7729#event-94667"
}
```



---

archive/issue_events_094668.json:
```json
{
    "actor": "https://github.com/dwbump",
    "created_at": "2009-12-19T01:10:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7729#event-94668"
}
```



---

archive/issue_comments_058006.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI posted a revised version. With this version, the base ring can be either a field\ncontaining q1 and q2, or a LaurentPolynomialRing. The previous version did not\nwork with LaurentPolynomialRings.\n\nAlso, methods were added to\ncompute inverses of basis elements, a common task. \n\nFinally, there is a bug fix in\nsage.categories.pushout (import PolynomialRing when needed).",
    "created_at": "2010-01-02T22:59:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7729#issuecomment-58006",
    "user": "https://github.com/dwbump"
}
```

<div id="comment:9" align="right">comment:9</div>

I posted a revised version. With this version, the base ring can be either a field
containing q1 and q2, or a LaurentPolynomialRing. The previous version did not
work with LaurentPolynomialRings.

Also, methods were added to
compute inverses of basis elements, a common task. 

Finally, there is a bug fix in
sage.categories.pushout (import PolynomialRing when needed).



---

archive/issue_comments_058007.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,15 +8,7 @@\n T1*T2*T1 + (q-1)*T3*T1 + q*T3\n ```\n \n-This code is very tested for type A and is almost certainly correct for Weyl groups of finite type. It also works for affine Weyl groups in the most recently posted version.\n-\n-The following issues remain.\n-\n-* David Roe suggested that the _coerce_impl method should be removed. I have not looked at this yet.\n-\n-* Subjectively, it seems a little slow compared with a previous implementation for type A only. This is probably a limitation of the `WeylGroup()` class on which it depends. My earlier implementation was based on Permutation. If it proves unacceptably slow it may be possible to speed it up by a caching scheme.\n-\n-* Later I may add a method to compute intertwining elements which depend on spectral parameters. These have applications to representations of p-adic groups.\n+This code is very tested for type A and is almost certainly correct for Weyl groups of finite type. It also works for affine Weyl groups.\n \n For some further discussion of this topic see\n http://groups.google.com/group/sage-combinat-devel/browse_thread/thread/78fc23f23cafe705?hl=en\n``````\n",
    "created_at": "2010-01-02T22:59:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7729#issuecomment-58007",
    "user": "https://github.com/dwbump"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,15 +8,7 @@
 T1*T2*T1 + (q-1)*T3*T1 + q*T3
 ```
 
-This code is very tested for type A and is almost certainly correct for Weyl groups of finite type. It also works for affine Weyl groups in the most recently posted version.
-
-The following issues remain.
-
-* David Roe suggested that the _coerce_impl method should be removed. I have not looked at this yet.
-
-* Subjectively, it seems a little slow compared with a previous implementation for type A only. This is probably a limitation of the `WeylGroup()` class on which it depends. My earlier implementation was based on Permutation. If it proves unacceptably slow it may be possible to speed it up by a caching scheme.
-
-* Later I may add a method to compute intertwining elements which depend on spectral parameters. These have applications to representations of p-adic groups.
+This code is very tested for type A and is almost certainly correct for Weyl groups of finite type. It also works for affine Weyl groups.
 
 For some further discussion of this topic see
 http://groups.google.com/group/sage-combinat-devel/browse_thread/thread/78fc23f23cafe705?hl=en
``````




---

archive/issue_comments_058008.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,8 +8,6 @@\n T1*T2*T1 + (q-1)*T3*T1 + q*T3\n ```\n \n-This code is very tested for type A and is almost certainly correct for Weyl groups of finite type. It also works for affine Weyl groups.\n-\n For some further discussion of this topic see\n http://groups.google.com/group/sage-combinat-devel/browse_thread/thread/78fc23f23cafe705?hl=en\n \n``````\n",
    "created_at": "2010-01-02T23:01:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7729#issuecomment-58008",
    "user": "https://github.com/dwbump"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,8 +8,6 @@
 T1*T2*T1 + (q-1)*T3*T1 + q*T3
 ```
 
-This code is very tested for type A and is almost certainly correct for Weyl groups of finite type. It also works for affine Weyl groups.
-
 For some further discussion of this topic see
 http://groups.google.com/group/sage-combinat-devel/browse_thread/thread/78fc23f23cafe705?hl=en
 
``````




---

archive/issue_comments_058009.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-The attached patch implements Iwahori Hecke algebras. Given a Cartan Type, the Iwahori Hecke algebra is a deformation of the group algebra over the Weyl group. It has generators in bijection with the simple reflections of the Weyl group that satisfy simple quadratic relations of the form `(T_i-q1)*(T_i-q2)` = 0. Often we default q2=-1, q1=q in which case the relation is of the form `T_i^2=(q-1)T_i+q`. The generators also satisfy the braid relations.  \n+The attached patch implements Iwahori Hecke algebras. Given a Cartan Type (finite or affine), the Iwahori Hecke algebra is a deformation of the group algebra over the Weyl group. It has generators in bijection with the simple reflections of the Weyl group that satisfy simple quadratic relations of the form `(T_i-q1)*(T_i-q2)` = 0. Often we default q2=-1, q1=q in which case the relation is of the form `T_i^2=(q-1)T_i+q`. The generators also satisfy the braid relations.  \n \n ```\n sage: R.<q>=PolynomialRing(QQ)\n``````\n",
    "created_at": "2010-01-02T23:01:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7729#issuecomment-58009",
    "user": "https://github.com/dwbump"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-The attached patch implements Iwahori Hecke algebras. Given a Cartan Type, the Iwahori Hecke algebra is a deformation of the group algebra over the Weyl group. It has generators in bijection with the simple reflections of the Weyl group that satisfy simple quadratic relations of the form `(T_i-q1)*(T_i-q2)` = 0. Often we default q2=-1, q1=q in which case the relation is of the form `T_i^2=(q-1)T_i+q`. The generators also satisfy the braid relations.  
+The attached patch implements Iwahori Hecke algebras. Given a Cartan Type (finite or affine), the Iwahori Hecke algebra is a deformation of the group algebra over the Weyl group. It has generators in bijection with the simple reflections of the Weyl group that satisfy simple quadratic relations of the form `(T_i-q1)*(T_i-q2)` = 0. Often we default q2=-1, q1=q in which case the relation is of the form `T_i^2=(q-1)T_i+q`. The generators also satisfy the braid relations.  
 
 ```
 sage: R.<q>=PolynomialRing(QQ)
``````




---

archive/issue_comments_058010.json:
```json
{
    "body": "Attachment: **[iwahori.patch.gz](https://github.com/sagemath/sage/files/ticket7729/iwahori.patch.gz)**\n\nIwahori Hecke algebra patch, including revisions from",
    "created_at": "2010-01-06T04:48:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7729#issuecomment-58010",
    "user": "https://github.com/dwbump"
}
```

Attachment: **[iwahori.patch.gz](https://github.com/sagemath/sage/files/ticket7729/iwahori.patch.gz)**

Iwahori Hecke algebra patch, including revisions from



---

archive/issue_comments_058011.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI qfolded two patches from the trac server and re uploaded the patch.\n\n```\ntrac_7729-iwahori-hecke-fixdoctests-nt.patch\ntrac_7729-iwahori-hecke-reviewer-nt.patch\n```",
    "created_at": "2010-01-06T04:51:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7729#issuecomment-58011",
    "user": "https://github.com/dwbump"
}
```

<div id="comment:12" align="right">comment:12</div>

I qfolded two patches from the trac server and re uploaded the patch.

```
trac_7729-iwahori-hecke-fixdoctests-nt.patch
trac_7729-iwahori-hecke-reviewer-nt.patch
```



---

archive/issue_comments_058012.json:
```json
{
    "body": "IwahoriHeckeAlgebraT now takes a Coxeter group + moved method to ModulesWithBasis. Replaces the previous patch.",
    "created_at": "2010-01-06T15:47:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7729#issuecomment-58012",
    "user": "https://github.com/nthiery"
}
```

IwahoriHeckeAlgebraT now takes a Coxeter group + moved method to ModulesWithBasis. Replaces the previous patch.



---

archive/issue_events_094669.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2010-01-06T15:48:47Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "title_is": "Iwahori Hecke algebras on the T basis",
    "title_was": "Iwahori Hecke algebras [with patch, needs review]",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7729#event-94669"
}
```



---

archive/issue_comments_058013.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nAttachment: **[trac_7729_iwahori-hecke-algebra.patch.gz](https://github.com/sagemath/sage/files/ticket7729/trac_7729_iwahori-hecke-algebra.patch.gz)**",
    "created_at": "2010-01-06T15:48:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7729#issuecomment-58013",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:13" align="right">comment:13</div>

Attachment: **[trac_7729_iwahori-hecke-algebra.patch.gz](https://github.com/sagemath/sage/files/ticket7729/trac_7729_iwahori-hecke-algebra.patch.gz)**



---

archive/issue_comments_058014.json:
```json
{
    "body": "Attachment: **[trac_7729_iwahori-hecke-algebra.2.patch.gz](https://github.com/sagemath/sage/files/ticket7729/trac_7729_iwahori-hecke-algebra.2.patch.gz)**",
    "created_at": "2010-01-06T18:14:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7729#issuecomment-58014",
    "user": "https://github.com/dwbump"
}
```

Attachment: **[trac_7729_iwahori-hecke-algebra.2.patch.gz](https://github.com/sagemath/sage/files/ticket7729/trac_7729_iwahori-hecke-algebra.2.patch.gz)**



---

archive/issue_comments_058015.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI made minor revisions to the docstring and reposted the patch as\ntrac_7729_iwahori-hecke-algebra-2.patch.",
    "created_at": "2010-01-06T18:15:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7729#issuecomment-58015",
    "user": "https://github.com/dwbump"
}
```

<div id="comment:14" align="right">comment:14</div>

I made minor revisions to the docstring and reposted the patch as
trac_7729_iwahori-hecke-algebra-2.patch.



---

archive/issue_comments_058016.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nThe patch trac_7729_iwahori_hecke_algebra_3.patch implements Anne Schilling's\ncomments from:\n\nhttp://groups.google.com/group/sage-combinat-devel/msg/e2abca2135c73e33?hl=en\n\nIt also adds Nicolas as an author, and fixes the copyright year.\n\nDan",
    "created_at": "2010-01-07T13:51:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7729#issuecomment-58016",
    "user": "https://github.com/dwbump"
}
```

<div id="comment:15" align="right">comment:15</div>

The patch trac_7729_iwahori_hecke_algebra_3.patch implements Anne Schilling's
comments from:

http://groups.google.com/group/sage-combinat-devel/msg/e2abca2135c73e33?hl=en

It also adds Nicolas as an author, and fixes the copyright year.

Dan



---

archive/issue_comments_058017.json:
```json
{
    "body": "Attachment: **[trac_7729_iwahori-hecke-algebra.3.patch.gz](https://github.com/sagemath/sage/files/ticket7729/trac_7729_iwahori-hecke-algebra.3.patch.gz)**\n\nImplements Iwahori Hecke algebras",
    "created_at": "2010-01-07T14:05:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7729#issuecomment-58017",
    "user": "https://github.com/dwbump"
}
```

Attachment: **[trac_7729_iwahori-hecke-algebra.3.patch.gz](https://github.com/sagemath/sage/files/ticket7729/trac_7729_iwahori-hecke-algebra.3.patch.gz)**

Implements Iwahori Hecke algebras



---

archive/issue_comments_058018.json:
```json
{
    "body": "Reviewer: **Anne Schilling**",
    "created_at": "2010-01-07T14:06:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7729#issuecomment-58018",
    "user": "https://github.com/dwbump"
}
```

Reviewer: **Anne Schilling**



---

archive/issue_comments_058019.json:
```json
{
    "body": "Changed author from **Daniel Bump** to **Daniel Bump, Nicolas M. Thiery**",
    "created_at": "2010-01-07T19:57:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7729#issuecomment-58019",
    "user": "https://github.com/anneschilling"
}
```

Changed author from **Daniel Bump** to **Daniel Bump, Nicolas M. Thiery**



---

archive/issue_comments_058020.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nThis patch implements the much desired Iwahori Hecke algebras in sage. It is very well documented with explanations on usage and references to the literature. All methods have doctests and all tests pass. In particular, I tested several special cases (like the nilCoxeter case q_1=q_2=0) and everything seemed to work fine.",
    "created_at": "2010-01-07T19:57:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7729#issuecomment-58020",
    "user": "https://github.com/anneschilling"
}
```

<div id="comment:17" align="right">comment:17</div>

This patch implements the much desired Iwahori Hecke algebras in sage. It is very well documented with explanations on usage and references to the literature. All methods have doctests and all tests pass. In particular, I tested several special cases (like the nilCoxeter case q_1=q_2=0) and everything seemed to work fine.



---

archive/issue_events_094670.json:
```json
{
    "actor": "https://github.com/anneschilling",
    "created_at": "2010-01-07T19:57:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7729#event-94670"
}
```



---

archive/issue_events_094671.json:
```json
{
    "actor": "https://github.com/anneschilling",
    "created_at": "2010-01-07T19:57:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7729#event-94671"
}
```



---

archive/issue_comments_058021.json:
```json
{
    "body": "Merged: **4.3.1.alpha2**",
    "created_at": "2010-01-13T09:35:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7729#issuecomment-58021",
    "user": "https://github.com/rlmill"
}
```

Merged: **4.3.1.alpha2**



---

archive/issue_events_094672.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-01-13T09:35:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7729#event-94672"
}
```



---

archive/issue_events_094673.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-01-13T09:35:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7729#event-94673"
}
```



---

archive/issue_comments_058022.json:
```json
{
    "body": "Changed merged from **4.3.1.alpha2** to **sage-4.3.1.alpha2**",
    "created_at": "2010-01-13T20:00:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7729#issuecomment-58022",
    "user": "https://github.com/sagetrac-mvngu"
}
```

Changed merged from **4.3.1.alpha2** to **sage-4.3.1.alpha2**



---

archive/issue_comments_058023.json:
```json
{
    "body": "Changed author from **Daniel Bump, Nicolas M. Thiery** to **Daniel Bump, Nicolas M. Thi\u00e9ry**",
    "created_at": "2016-07-14T07:17:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7729",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7729#issuecomment-58023",
    "user": "https://github.com/fchapoton"
}
```

Changed author from **Daniel Bump, Nicolas M. Thiery** to **Daniel Bump, Nicolas M. Thiéry**
