# Issue 7818: Update sage-env

archive/issues_007818.json:
```json
{
    "assignees": [],
    "body": "This is an update to the sage-env file. It should allow a much improved build process, simplifying the code in spkg install files, as much of it will be taken care of. The code will also be more portable. \n\n* Little or no need for any SAGE64 rubbish in any spkg-install files. The appropriate flag to build 64-bit code is added if SAGE64 is set to use. \n* No need to add -Wall or -g, as these are added by default. \n* GNU specific compiler options can be replaced by variables with similar names to the GNU ones, making substitution a relatively easy task. \n* Will enable code to be much more portable. \n\nThe changes mainly affect the 3 variables for compiler flags  - CFLAGS, CXXFLAGS and FCFLAGS.  \n\nThe user may set CFLAGS, CXXFLAGS and FCFLAGS, but the following will be appended. \n\n == General flags ==\n* The -g  option is added to enable debugging unless SAGE_DEBUG is set to \"no\". \n* -Wall is added for gcc, g++ and gfortran.\n\n == 64-bit Flags ==\nIf SAGE64 is \"yes\"\n* -m64 is added for GCC\n* -m64 is added for Sun Studio\n* -q64 is added for IBM's compiler on AIX\n* +DA2.OW is added for the PA-RISC architecture on HP-UX\n* +DD64 is added for the Itanium architecture on HP-UX\n \nA variable CFLAG64 is set to the correct option for building 64-bit binaries with the C compiler. So if -m64 is replaced by $CFLAG64, the code will work on any C compiler. \n\n(Some compilers may require a different option for C and C++ files. The names CXXFLAG64 and FCFLAG64 are reserved for this, but its not suggested they are used now) \n\n == C++ library flags ==\nDue to changes in the C++ standard, it is impossible for compiler vendors to distribute a C++ runtime library which is both compatible with the old standard and the new one. Both HP and Sun use the older library by default, and need a switch added to enable the newer libraries, which more closely follow the latest C++ standard. See:\n\nhttp://developers.sun.com/solaris/articles/cmp_stlport_libCstd.html\n\nhttp://docs.hp.com/en/14487/faq.htm\n\n\nTherefore\n* If the compiler is Sun Studio, library=stlport4 is added to CXXFLAGS. \n* If the Compiler is HP's on HP-UX, the option -AA is added to CXXFLAGS. \n\n == Shared Library Flags ==\nFive new variables are set in sage-env. These are for building shared libraries and take on names very similar to the GNU names for the flags. \n\n|             |                  |                         |\n|-------------|------------------|-------------------------|\n|**Flag name**|**Value with GCC**|**Value with Sun Studio**|\n|FPIC_FLAG|-fPIC|-xcode=pic32|\n|SHARED_FLAG|-shared|-G|\n|SONAME_FLAG|-soname|-h|\n\nA reviewer may notice two further variable names used. These options can be linker dependent and will be finalized once some code to detect the linker is in place. \n\n == Extension for shared libraries ==\nMany systems have to be linked against a library, who extension changes depending on what plaform one is using. A variable 'SHARED_LIBRARY_EXTENSION' is set to one of the following: \n\n\n|            |         |\n|------------|---------|\n|**Platform**|**Value**|\n|AIX|a|\n|Cygwin|dll|\n|HP-UX|sl|\n|OS X|dylib|\n|Anything else (Linux, Solaris etc)|so|\n\n\n\n**Assignee:** drkirkby\n\n**CC:**  @williamstein @jaapspies\n\n**Reviewer:** David Kirkby, Jaap Spies\n\nIssue created by migration from https://trac.sagemath.org/ticket/7818\n\n",
    "closed_at": "2013-02-08T13:23:32Z",
    "created_at": "2010-01-02T11:35:05Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20porting",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/wontfix"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Update sage-env",
    "type": "issue",
    "updated_at": "2013-02-08T13:23:32Z",
    "url": "https://github.com/sagemath/sage/issues/7818",
    "user": "https://github.com/sagetrac-drkirkby"
}
```
This is an update to the sage-env file. It should allow a much improved build process, simplifying the code in spkg install files, as much of it will be taken care of. The code will also be more portable. 

* Little or no need for any SAGE64 rubbish in any spkg-install files. The appropriate flag to build 64-bit code is added if SAGE64 is set to use. 
* No need to add -Wall or -g, as these are added by default. 
* GNU specific compiler options can be replaced by variables with similar names to the GNU ones, making substitution a relatively easy task. 
* Will enable code to be much more portable. 

The changes mainly affect the 3 variables for compiler flags  - CFLAGS, CXXFLAGS and FCFLAGS.  

The user may set CFLAGS, CXXFLAGS and FCFLAGS, but the following will be appended. 

 == General flags ==
* The -g  option is added to enable debugging unless SAGE_DEBUG is set to "no". 
* -Wall is added for gcc, g++ and gfortran.

 == 64-bit Flags ==
If SAGE64 is "yes"
* -m64 is added for GCC
* -m64 is added for Sun Studio
* -q64 is added for IBM's compiler on AIX
* +DA2.OW is added for the PA-RISC architecture on HP-UX
* +DD64 is added for the Itanium architecture on HP-UX
 
A variable CFLAG64 is set to the correct option for building 64-bit binaries with the C compiler. So if -m64 is replaced by $CFLAG64, the code will work on any C compiler. 

(Some compilers may require a different option for C and C++ files. The names CXXFLAG64 and FCFLAG64 are reserved for this, but its not suggested they are used now) 

 == C++ library flags ==
Due to changes in the C++ standard, it is impossible for compiler vendors to distribute a C++ runtime library which is both compatible with the old standard and the new one. Both HP and Sun use the older library by default, and need a switch added to enable the newer libraries, which more closely follow the latest C++ standard. See:

http://developers.sun.com/solaris/articles/cmp_stlport_libCstd.html

http://docs.hp.com/en/14487/faq.htm


Therefore
* If the compiler is Sun Studio, library=stlport4 is added to CXXFLAGS. 
* If the Compiler is HP's on HP-UX, the option -AA is added to CXXFLAGS. 

 == Shared Library Flags ==
Five new variables are set in sage-env. These are for building shared libraries and take on names very similar to the GNU names for the flags. 

|             |                  |                         |
|-------------|------------------|-------------------------|
|**Flag name**|**Value with GCC**|**Value with Sun Studio**|
|FPIC_FLAG|-fPIC|-xcode=pic32|
|SHARED_FLAG|-shared|-G|
|SONAME_FLAG|-soname|-h|

A reviewer may notice two further variable names used. These options can be linker dependent and will be finalized once some code to detect the linker is in place. 

 == Extension for shared libraries ==
Many systems have to be linked against a library, who extension changes depending on what plaform one is using. A variable 'SHARED_LIBRARY_EXTENSION' is set to one of the following: 


|            |         |
|------------|---------|
|**Platform**|**Value**|
|AIX|a|
|Cygwin|dll|
|HP-UX|sl|
|OS X|dylib|
|Anything else (Linux, Solaris etc)|so|



**Assignee:** drkirkby

**CC:**  @williamstein @jaapspies

**Reviewer:** David Kirkby, Jaap Spies

Issue created by migration from https://trac.sagemath.org/ticket/7818





---

archive/issue_events_080960.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-01-02T11:35:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20porting",
    "label_color": "08517b",
    "label_name": "component: porting",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7818#event-80960"
}
```



---

archive/issue_events_080961.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-01-02T11:35:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "008080",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7818#event-80961"
}
```



---

archive/issue_events_080962.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-01-02T11:35:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "008080",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7818#event-80962"
}
```



---

archive/issue_events_080963.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-01-02T11:37:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7818#event-80963"
}
```



---

archive/issue_comments_060847.json:
```json
{
    "body": "**Author:** David Kirkby",
    "created_at": "2010-01-02T12:03:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7818#issuecomment-60847",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

**Author:** David Kirkby



---

archive/issue_comments_060848.json:
```json
{
    "body": "<a id='comment:3'></a>\nJust to make the point, -m64 in sage should **not** need to be replaced by 'CLFAG64' in general. In 99% of cases, simply removing all the -m64's that litter Sage will do the trick, as the right option will be added automatically. \n\nIn some cases, it may be necessary to keep such a flag on linking. In those rare cases (ECL is the only example I can think of), then use CFLAG64 instead of -m64. But this will allow 99% of the -m64's to be removed and forgotten about, as they will be added only where necessary.",
    "created_at": "2010-01-02T23:14:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7818#issuecomment-60848",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:3'></a>
Just to make the point, -m64 in sage should **not** need to be replaced by 'CLFAG64' in general. In 99% of cases, simply removing all the -m64's that litter Sage will do the trick, as the right option will be added automatically. 

In some cases, it may be necessary to keep such a flag on linking. In those rare cases (ECL is the only example I can think of), then use CFLAG64 instead of -m64. But this will allow 99% of the -m64's to be removed and forgotten about, as they will be added only where necessary.



---

archive/issue_comments_060849.json:
```json
{
    "body": "<a id='comment:4'></a>\nOopsn, I mean in rare cases, -m64 might need to be replaced by $CFLAG64.",
    "created_at": "2010-01-02T23:17:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7818#issuecomment-60849",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:4'></a>
Oopsn, I mean in rare cases, -m64 might need to be replaced by $CFLAG64.



---

archive/issue_comments_060850.json:
```json
{
    "body": "<a id='comment:5'></a>\nShould line 87 be changed from\n\n```\necho \"NAME_OF_ENVIROMENT_VARIABLE value_of_environment_variable\"\n```\nto\n\n```\necho \"NAME_OF_ENVIROMENT_VARIABLE=value_of_environment_variable\"\n```\n(adding an equals sign)?\n\nIn line 380:\n\n```\n# often. I think ECL might need it, to just the option, not\n```\nchange \"to\" to \"so\", I think.\n\nAs far as a careful review goes, I'm not enough of an expert in the Sage build process to do that.  An expert should take a good look at this.",
    "created_at": "2010-01-05T22:59:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7818#issuecomment-60850",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:5'></a>
Should line 87 be changed from

```
echo "NAME_OF_ENVIROMENT_VARIABLE value_of_environment_variable"
```
to

```
echo "NAME_OF_ENVIROMENT_VARIABLE=value_of_environment_variable"
```
(adding an equals sign)?

In line 380:

```
# often. I think ECL might need it, to just the option, not
```
change "to" to "so", I think.

As far as a careful review goes, I'm not enough of an expert in the Sage build process to do that.  An expert should take a good look at this.



---

archive/issue_comments_060851.json:
```json
{
    "body": "<a id='comment:6'></a>\nThank you for the feedback. I'll make the couple o changes you suggest. I take your point about needing an expert of the build process. William and I wrote this many years ago, but its changed a lot since then. \n\nIf you have some spare time, (and I know building Sage can take some time), could you try a build with the sage-env script? First unpack the sources, then exchange spkg/base/sage-env for this one before trying a build. The build should proceed as normal. You might notice an extra -Wall or -g flag here or there, but there should be no huge changes. \n\nWhat it will give is a bunch of variables that can at a later date be used inside files like spkg-install. \n\nDave",
    "created_at": "2010-01-05T23:16:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7818#issuecomment-60851",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:6'></a>
Thank you for the feedback. I'll make the couple o changes you suggest. I take your point about needing an expert of the build process. William and I wrote this many years ago, but its changed a lot since then. 

If you have some spare time, (and I know building Sage can take some time), could you try a build with the sage-env script? First unpack the sources, then exchange spkg/base/sage-env for this one before trying a build. The build should proceed as normal. You might notice an extra -Wall or -g flag here or there, but there should be no huge changes. 

What it will give is a bunch of variables that can at a later date be used inside files like spkg-install. 

Dave



---

archive/issue_comments_060852.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [drkirkby](#comment%3A6):\n> Thank you for the feedback. I'll make the couple o changes you suggest. I take your point about needing an expert of the build process. William and I wrote this many years ago, but its changed a lot since then. \n\nOne more question: should this also be included in sage-scripts?  That is, should the file `SAGE_ROOT/spkg/base/sage-env` be the same as `SAGE_ROOT/local/bin/sage-env`?  If so, please produce a patch for the scripts repository.\n \n> If you have some spare time, (and I know building Sage can take some time), could you try a build with the sage-env script? First unpack the sources, then exchange spkg/base/sage-env for this one before trying a build. The build should proceed as normal. You might notice an extra -Wall or -g flag here or there, but there should be no huge changes. \n\nSure, I'll start that right now.",
    "created_at": "2010-01-05T23:26:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7818#issuecomment-60852",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:7'></a>
Replying to [drkirkby](#comment%3A6):
> Thank you for the feedback. I'll make the couple o changes you suggest. I take your point about needing an expert of the build process. William and I wrote this many years ago, but its changed a lot since then. 

One more question: should this also be included in sage-scripts?  That is, should the file `SAGE_ROOT/spkg/base/sage-env` be the same as `SAGE_ROOT/local/bin/sage-env`?  If so, please produce a patch for the scripts repository.
 
> If you have some spare time, (and I know building Sage can take some time), could you try a build with the sage-env script? First unpack the sources, then exchange spkg/base/sage-env for this one before trying a build. The build should proceed as normal. You might notice an extra -Wall or -g flag here or there, but there should be no huge changes. 

Sure, I'll start that right now.



---

archive/issue_comments_060853.json:
```json
{
    "body": "<a id='comment:8'></a>\nIt built just fine on my OS X 10.6 machine.  I'm trying on sage.math now (or boxen.math or whatever it is these days).\n\nIn case you missed my earlier question:\n\n> should this also be included in sage-scripts? That is, should the file SAGE_ROOT/spkg/base/sage-env be the same as SAGE_ROOT/local/bin/sage-env? If so, please produce a patch for the scripts repository.",
    "created_at": "2010-01-06T18:08:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7818#issuecomment-60853",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:8'></a>
It built just fine on my OS X 10.6 machine.  I'm trying on sage.math now (or boxen.math or whatever it is these days).

In case you missed my earlier question:

> should this also be included in sage-scripts? That is, should the file SAGE_ROOT/spkg/base/sage-env be the same as SAGE_ROOT/local/bin/sage-env? If so, please produce a patch for the scripts repository.



---

archive/issue_comments_060854.json:
```json
{
    "body": "<a id='comment:9'></a>\nNote, there are still some occurrences of ;-a' and '-o' here. I tried not too change too much of the original file, to make the review somewhat easier. So some things I don't feel are perfect,   I have left unchanged. They almost certainly make no difference whatsoever here, but its a good habbit to write scripts in such a way they work reliably, irrespective of what shell someone happens to use. \n\nDave",
    "created_at": "2010-01-06T19:14:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7818#issuecomment-60854",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:9'></a>
Note, there are still some occurrences of ;-a' and '-o' here. I tried not too change too much of the original file, to make the review somewhat easier. So some things I don't feel are perfect,   I have left unchanged. They almost certainly make no difference whatsoever here, but its a good habbit to write scripts in such a way they work reliably, irrespective of what shell someone happens to use. 

Dave



---

archive/issue_comments_060855.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -48,3 +48,17 @@\n \n A reviewer may notice two further variable names used. These options can be linker dependent and will be finalized once some code to detect the linker is in place. \n \n+ == Extension for shared libraries ==\n+Many systems have to be linked against a library, who extension changes depending on what plaform one is using. A variable 'SHARED_LIBRARY_EXTENSION' is set to one of the following: \n+\n+\n+|            |         |\n+|------------|---------|\n+|**Platform**|**Value**|\n+|AIX|a|\n+|Cygwin|dll|\n+|HP-UX|sl|\n+|OS X|dylib|\n+|Anything else (Linux, Solaris etc)|so|\n+\n+\n``````\n",
    "created_at": "2010-01-06T19:19:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7818#issuecomment-60855",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -48,3 +48,17 @@
 
 A reviewer may notice two further variable names used. These options can be linker dependent and will be finalized once some code to detect the linker is in place. 
 
+ == Extension for shared libraries ==
+Many systems have to be linked against a library, who extension changes depending on what plaform one is using. A variable 'SHARED_LIBRARY_EXTENSION' is set to one of the following: 
+
+
+|            |         |
+|------------|---------|
+|**Platform**|**Value**|
+|AIX|a|
+|Cygwin|dll|
+|HP-UX|sl|
+|OS X|dylib|
+|Anything else (Linux, Solaris etc)|so|
+
+
``````




---

archive/issue_comments_060856.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -18,7 +18,8 @@\n * -m64 is added for GCC\n * -m64 is added for Sun Studio\n * -q64 is added for IBM's compiler on AIX\n-* +DA2.OW is added on HP-UX. (This will not work on Itanium processors running on HP-UX. I'll update when I have more information). \n+* +DA2.OW is added for the PA-RISC architecture on HP-UX\n+* +DD64 is added for the Itanium architecture on HP-UX\n  \n A variable CFLAG64 is set to the correct option for building 64-bit binaries with the C compiler. So if -m64 is replaced by $CFLAG64, the code will work on any C compiler. \n \n``````\n",
    "created_at": "2010-01-06T19:21:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7818#issuecomment-60856",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -18,7 +18,8 @@
 * -m64 is added for GCC
 * -m64 is added for Sun Studio
 * -q64 is added for IBM's compiler on AIX
-* +DA2.OW is added on HP-UX. (This will not work on Itanium processors running on HP-UX. I'll update when I have more information). 
+* +DA2.OW is added for the PA-RISC architecture on HP-UX
+* +DD64 is added for the Itanium architecture on HP-UX
  
 A variable CFLAG64 is set to the correct option for building 64-bit binaries with the C compiler. So if -m64 is replaced by $CFLAG64, the code will work on any C compiler. 
 
``````




---

archive/issue_comments_060857.json:
```json
{
    "body": "<a id='comment:12'></a>\nThe patch applies cleanly to the scripts repository and produces the correct file (that is, SAGE_LOCAL/bin/sage-env and spkg/base/sage-env are the same).  For some reason, the one in local/bin wasn't executable, so I had to fix that manually.\n\nBuilding with the new sage-env works just fine on sage.math, by the way.",
    "created_at": "2010-01-06T20:40:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7818#issuecomment-60857",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:12'></a>
The patch applies cleanly to the scripts repository and produces the correct file (that is, SAGE_LOCAL/bin/sage-env and spkg/base/sage-env are the same).  For some reason, the one in local/bin wasn't executable, so I had to fix that manually.

Building with the new sage-env works just fine on sage.math, by the way.



---

archive/issue_comments_060858.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [@jhpalmieri](#comment%3A12):\n> The patch applies cleanly to the scripts repository and produces the correct file (that is, SAGE_LOCAL/bin/sage-env and spkg/base/sage-env are the same).  For some reason, the one in local/bin wasn't executable, so I had to fix that manually.\n> \n> Building with the new sage-env works just fine on sage.math, by the way.\n\nIt's good to hear it builds fine. I don't envisage anything that it does should screw up the build. It will mean in some packages there will be two -m64's on the command line, but they are harmless. Then hopefully we can remove all the SAGE64 stuff from the files. \n\nI just re-checked the permissions on the file when I created the ticket and they were executable. I don't know if there was anything I should have done which I did not. \n\n```\ndrkirkby@hawk:~/sage-4.3.1.alpha1/spkg/standard/sage_scripts-4.3.1.alpha1$ ls -l sage-env\n-rwxr-xr-x   1 drkirkby staff      20018 Jan  6 18:53 sage-env\n```\n\nDave",
    "created_at": "2010-01-06T22:20:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7818#issuecomment-60858",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:13'></a>
Replying to [@jhpalmieri](#comment%3A12):
> The patch applies cleanly to the scripts repository and produces the correct file (that is, SAGE_LOCAL/bin/sage-env and spkg/base/sage-env are the same).  For some reason, the one in local/bin wasn't executable, so I had to fix that manually.
> 
> Building with the new sage-env works just fine on sage.math, by the way.

It's good to hear it builds fine. I don't envisage anything that it does should screw up the build. It will mean in some packages there will be two -m64's on the command line, but they are harmless. Then hopefully we can remove all the SAGE64 stuff from the files. 

I just re-checked the permissions on the file when I created the ticket and they were executable. I don't know if there was anything I should have done which I did not. 

```
drkirkby@hawk:~/sage-4.3.1.alpha1/spkg/standard/sage_scripts-4.3.1.alpha1$ ls -l sage-env
-rwxr-xr-x   1 drkirkby staff      20018 Jan  6 18:53 sage-env
```

Dave



---

archive/issue_comments_060859.json:
```json
{
    "body": "<a id='comment:15'></a>\nFor historical reasons I suggest you keep the 2005 date in the file!\n\nAnd maybe stupid where can I find the file testcc.sh?\n\n\n```\nWarning: Attempted to overwrite SAGE_ROOT environment variable\nBuilding Sage on Solaris in 64-bit mode\nCreating SAGE_LOCAL/lib/sage-64.txt since it does not exist\nDetected SAGE64 flag\nBuilding Sage on Solaris in 64-bit mode\n/export/home/jaap/Downloads/sage-4.3/local/bin/sage-env: line 253: /export/home/jaap/Downloads/sage-4.3/local/bin/testcc.sh: No such file or directory\n/export/home/jaap/Downloads/sage-4.3/local/bin/sage-env: line 267: /export/home/jaap/Downloads/sage-4.3/local/bin/testcc.sh: No such file or directory\n/export/home/jaap/Downloads/sage-4.3/local/bin/sage-env: line 289: /export/home/jaap/Downloads/sage-4.3/local/bin/testcc.sh: No such file or directory\n/export/home/jaap/Downloads/sage-4.3/local/bin/sage-env: line 306: /export/home/jaap/Downloads/sage-4.3/local/bin/testcc.sh: No such file or directory\n/export/home/jaap/Downloads/sage-4.3/local/bin/sage-env: line 319: /export/home/jaap/Downloads/sage-4.3/local/bin/testcc.sh: No such file or directory\n/export/home/jaap/Downloads/sage-4.3/local/bin/sage-env: line 332: /export/home/jaap/Downloads/sage-4.3/local/bin/testcc.sh: No such file or directory\n\n\n\n```\n\n\nJaap",
    "created_at": "2010-01-07T14:26:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7818#issuecomment-60859",
    "user": "https://github.com/jaapspies"
}
```

<a id='comment:15'></a>
For historical reasons I suggest you keep the 2005 date in the file!

And maybe stupid where can I find the file testcc.sh?


```
Warning: Attempted to overwrite SAGE_ROOT environment variable
Building Sage on Solaris in 64-bit mode
Creating SAGE_LOCAL/lib/sage-64.txt since it does not exist
Detected SAGE64 flag
Building Sage on Solaris in 64-bit mode
/export/home/jaap/Downloads/sage-4.3/local/bin/sage-env: line 253: /export/home/jaap/Downloads/sage-4.3/local/bin/testcc.sh: No such file or directory
/export/home/jaap/Downloads/sage-4.3/local/bin/sage-env: line 267: /export/home/jaap/Downloads/sage-4.3/local/bin/testcc.sh: No such file or directory
/export/home/jaap/Downloads/sage-4.3/local/bin/sage-env: line 289: /export/home/jaap/Downloads/sage-4.3/local/bin/testcc.sh: No such file or directory
/export/home/jaap/Downloads/sage-4.3/local/bin/sage-env: line 306: /export/home/jaap/Downloads/sage-4.3/local/bin/testcc.sh: No such file or directory
/export/home/jaap/Downloads/sage-4.3/local/bin/sage-env: line 319: /export/home/jaap/Downloads/sage-4.3/local/bin/testcc.sh: No such file or directory
/export/home/jaap/Downloads/sage-4.3/local/bin/sage-env: line 332: /export/home/jaap/Downloads/sage-4.3/local/bin/testcc.sh: No such file or directory



```


Jaap



---

archive/issue_comments_060860.json:
```json
{
    "body": "<a id='comment:16'></a>\nOk, found the testcc.sh and testcxx.sh\n\nThis new sage-env does a great job. On my Open Solaris in VirtualBox I could add \nto the spkg/installed after a make -k\n\n\n```\njaap@opensolaris:~/Downloads/sage-4.3$ ls -lt spkg/installed/\ntotal 61\n-rw-r--r-- 1 jaap staff 219 2010-01-07 15:59 pil-1.1.6.p2\n-rw-r--r-- 1 jaap staff 226 2010-01-07 15:58 flintqs-20070817.p4\n-rw-r--r-- 1 jaap staff 218 2010-01-07 15:57 cddlib-094f\n-rw-r--r-- 1 jaap staff 229 2010-01-07 15:56 genus2reduction-0.3.p5\n-rw-r--r-- 1 jaap staff 222 2010-01-07 15:55 boehm_gc-7.1.p2\n-rw-r--r-- 1 jaap staff 227 2010-01-07 15:55 pyprocessing-0.52.p0\n-rw-r--r-- 1 jaap staff 225 2010-01-07 15:54 ratpoints-2.1.2.p3\n-rw-r--r-- 1 jaap staff 226 2010-01-07 15:54 libm4ri-20091120.p0\n-rw-r--r-- 1 jaap staff 226 2010-01-07 15:54 rubiks-20070912.p10\n-rw-r--r-- 1 jaap staff 225 2010-01-07 15:53 libfplll-3.0.12.p0\n-rw-r--r-- 1 jaap staff 221 2010-01-07 15:51 zodb3-3.7.0.p2\n-rw-r--r-- 1 jaap staff 224 2010-01-07 15:50 pycrypto-2.0.1.p4\n-rw-r--r-- 1 jaap staff 220 2010-01-07 15:50 mpfr-2.4.1.p0\n-rw-r--r-- 1 jaap staff 223 2010-01-07 15:49 givaro-3.2.13rc2\n-rw-r--r-- 1 jaap staff 220 2010-01-07 15:48 iml-1.0.1.p11\n-rw-r--r-- 1 jaap staff   0 2010-01-07 15:46 eclib-20080310.p7\n-rw-r--r-- 1 jaap staff 223 2010-01-04 17:38 twisted-8.2.0.p2\n-rw-r--r-- 1 jaap staff 224 2010-01-03 21:51 eclib-20080310.p8\n\n```\n\nI would give it a positive review, but will wait for the other testers.\n\nJaap",
    "created_at": "2010-01-07T15:27:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7818#issuecomment-60860",
    "user": "https://github.com/jaapspies"
}
```

<a id='comment:16'></a>
Ok, found the testcc.sh and testcxx.sh

This new sage-env does a great job. On my Open Solaris in VirtualBox I could add 
to the spkg/installed after a make -k


```
jaap@opensolaris:~/Downloads/sage-4.3$ ls -lt spkg/installed/
total 61
-rw-r--r-- 1 jaap staff 219 2010-01-07 15:59 pil-1.1.6.p2
-rw-r--r-- 1 jaap staff 226 2010-01-07 15:58 flintqs-20070817.p4
-rw-r--r-- 1 jaap staff 218 2010-01-07 15:57 cddlib-094f
-rw-r--r-- 1 jaap staff 229 2010-01-07 15:56 genus2reduction-0.3.p5
-rw-r--r-- 1 jaap staff 222 2010-01-07 15:55 boehm_gc-7.1.p2
-rw-r--r-- 1 jaap staff 227 2010-01-07 15:55 pyprocessing-0.52.p0
-rw-r--r-- 1 jaap staff 225 2010-01-07 15:54 ratpoints-2.1.2.p3
-rw-r--r-- 1 jaap staff 226 2010-01-07 15:54 libm4ri-20091120.p0
-rw-r--r-- 1 jaap staff 226 2010-01-07 15:54 rubiks-20070912.p10
-rw-r--r-- 1 jaap staff 225 2010-01-07 15:53 libfplll-3.0.12.p0
-rw-r--r-- 1 jaap staff 221 2010-01-07 15:51 zodb3-3.7.0.p2
-rw-r--r-- 1 jaap staff 224 2010-01-07 15:50 pycrypto-2.0.1.p4
-rw-r--r-- 1 jaap staff 220 2010-01-07 15:50 mpfr-2.4.1.p0
-rw-r--r-- 1 jaap staff 223 2010-01-07 15:49 givaro-3.2.13rc2
-rw-r--r-- 1 jaap staff 220 2010-01-07 15:48 iml-1.0.1.p11
-rw-r--r-- 1 jaap staff   0 2010-01-07 15:46 eclib-20080310.p7
-rw-r--r-- 1 jaap staff 223 2010-01-04 17:38 twisted-8.2.0.p2
-rw-r--r-- 1 jaap staff 224 2010-01-03 21:51 eclib-20080310.p8

```

I would give it a positive review, but will wait for the other testers.

Jaap



---

archive/issue_comments_060861.json:
```json
{
    "body": "**Reviewer:** Jaap Spies",
    "created_at": "2010-01-07T15:27:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7818#issuecomment-60861",
    "user": "https://github.com/jaapspies"
}
```

**Reviewer:** Jaap Spies



---

archive/issue_events_080964.json:
```json
{
    "actor": "https://github.com/jaapspies",
    "created_at": "2010-01-07T20:05:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7818#event-80964"
}
```



---

archive/issue_events_080965.json:
```json
{
    "actor": "https://github.com/jaapspies",
    "created_at": "2010-01-07T20:05:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7818#event-80965"
}
```



---

archive/issue_comments_060862.json:
```json
{
    "body": "<a id='comment:17'></a>\nOk, positive review!\n\nJaap",
    "created_at": "2010-01-07T20:05:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7818#issuecomment-60862",
    "user": "https://github.com/jaapspies"
}
```

<a id='comment:17'></a>
Ok, positive review!

Jaap



---

archive/issue_comments_060863.json:
```json
{
    "body": "<a id='comment:18'></a>\nIs $RM defined anywhere now?  Or $LN?  Or $MKDIR?  They still seem to be used by the gap spkg, so I can't figure out why that package installs correctly with this version of sage-env.",
    "created_at": "2010-01-08T16:12:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7818#issuecomment-60863",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:18'></a>
Is $RM defined anywhere now?  Or $LN?  Or $MKDIR?  They still seem to be used by the gap spkg, so I can't figure out why that package installs correctly with this version of sage-env.



---

archive/issue_comments_060864.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [@jhpalmieri](#comment%3A18):\n> Is $RM defined anywhere now?  Or $LN?  Or $MKDIR?  They still seem to be used by the gap spkg, so I can't figure out why that package installs correctly with this version of sage-env.\n\nI'm not sure if Or $RM, $LN or $MKDIR are defined elsewhere, or if the bits in gap don't work, but it is not apparent they are not working. But there does seem to be no point in having variables for such basic commands, as agreed here. \n\nhttp://groups.google.com/group/sage-devel/browse_thread/thread/bd7ae07a1157bead/970aa0dc8fa56ab7?lnk=raot\n\nI left 'cp', as potentially the GNU version of CP has some extra options over some other implementations of CP which might make it useful in some cases, though I'd much prefer any GNUisms were avoided. But there really is no point in having variable for 'ln' or 'mkdir' \n\nThey are all part of POSIX, the 2008 edition of which can be found here\n\nhttp://www.opengroup.org/onlinepubs/9699919799/\n\nI'm not a great fan of GNU standards and I don't agree with some of it here, but even they agree one can rely on rm, ln and mkdir. \n\nhttp://www.gnu.org/prep/standards/standards.html#Utilities-in-Makefiles\n\nI've created a ticket for their removal from 'gap' - see #7873 . I'll fix that very shortly. \n\nDave",
    "created_at": "2010-01-08T18:18:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7818#issuecomment-60864",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:19'></a>
Replying to [@jhpalmieri](#comment%3A18):
> Is $RM defined anywhere now?  Or $LN?  Or $MKDIR?  They still seem to be used by the gap spkg, so I can't figure out why that package installs correctly with this version of sage-env.

I'm not sure if Or $RM, $LN or $MKDIR are defined elsewhere, or if the bits in gap don't work, but it is not apparent they are not working. But there does seem to be no point in having variables for such basic commands, as agreed here. 

http://groups.google.com/group/sage-devel/browse_thread/thread/bd7ae07a1157bead/970aa0dc8fa56ab7?lnk=raot

I left 'cp', as potentially the GNU version of CP has some extra options over some other implementations of CP which might make it useful in some cases, though I'd much prefer any GNUisms were avoided. But there really is no point in having variable for 'ln' or 'mkdir' 

They are all part of POSIX, the 2008 edition of which can be found here

http://www.opengroup.org/onlinepubs/9699919799/

I'm not a great fan of GNU standards and I don't agree with some of it here, but even they agree one can rely on rm, ln and mkdir. 

http://www.gnu.org/prep/standards/standards.html#Utilities-in-Makefiles

I've created a ticket for their removal from 'gap' - see #7873 . I'll fix that very shortly. 

Dave



---

archive/issue_comments_060865.json:
```json
{
    "body": "<a id='comment:20'></a>\nI fixed any potential gap issue. If someone could review #7873 it would be appreciated. \n\nDave",
    "created_at": "2010-01-08T20:44:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7818#issuecomment-60865",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:20'></a>
I fixed any potential gap issue. If someone could review #7873 it would be appreciated. 

Dave



---

archive/issue_events_080966.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-01-12T19:00:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7818#event-80966"
}
```



---

archive/issue_events_080967.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-01-12T19:00:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7818#event-80967"
}
```



---

archive/issue_comments_060866.json:
```json
{
    "body": "<a id='comment:21'></a>\nI'm sticking this to needs work, why I put back definitions such as \n\n```\nif [ \"$LN\" = \"\" ]; then\n    LN=\"ln\"  && export LN\nfi\n \nif [ \"$MKDIR\" = \"\" ]; then\n    MKDIR=\"mkdir\"  && export MKDIR\nfi\n```\n\njust in case they unsetting these causes any problems in any package. I believe all packages are covered by patches, but if one is not, then this could cause problems. \n\nDave",
    "created_at": "2010-01-12T19:00:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7818#issuecomment-60866",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:21'></a>
I'm sticking this to needs work, why I put back definitions such as 

```
if [ "$LN" = "" ]; then
    LN="ln"  && export LN
fi
 
if [ "$MKDIR" = "" ]; then
    MKDIR="mkdir"  && export MKDIR
fi
```

just in case they unsetting these causes any problems in any package. I believe all packages are covered by patches, but if one is not, then this could cause problems. 

Dave



---

archive/issue_comments_060867.json:
```json
{
    "body": "**Attachment:** [sage-env.gz](https://github.com/sagemath/sage/files/ticket7818/sage-env.gz)\n\nUpdated sage-env, much improved, but added back LN, MKIDR etc, to avoid risk of breakage",
    "created_at": "2010-01-12T19:13:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7818#issuecomment-60867",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

**Attachment:** [sage-env.gz](https://github.com/sagemath/sage/files/ticket7818/sage-env.gz)

Updated sage-env, much improved, but added back LN, MKIDR etc, to avoid risk of breakage



---

archive/issue_events_080968.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-01-12T19:14:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7818#event-80968"
}
```



---

archive/issue_events_080969.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-01-12T19:14:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7818#event-80969"
}
```



---

archive/issue_events_080970.json:
```json
{
    "actor": "https://github.com/jaapspies",
    "created_at": "2010-01-13T11:39:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7818#event-80970"
}
```



---

archive/issue_events_080971.json:
```json
{
    "actor": "https://github.com/jaapspies",
    "created_at": "2010-01-13T11:39:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7818#event-80971"
}
```



---

archive/issue_comments_060868.json:
```json
{
    "body": "<a id='comment:23'></a>\nThis changes make sense.\n\n\n```\n[jaap@vrede sage-4.3.1.alpha1]$ diff local/bin/sage-env ../sage-env\n452a453,456\n> if [ \"$MV\" = \"\" ]; then\n>     MV=\"mv\"  && export MV\n> fi\n> \n456a461,464\n> if [ \"$RM\" = \"\" ]; then\n>     RM=\"rm\"  && export RM\n> fi\n>  \n460a469,484\n> if [ \"$LN\" = \"\" ]; then\n>     LN=\"ln\"  && export LN\n> fi\n>  \n> if [ \"$MKDIR\" = \"\" ]; then\n>     MKDIR=\"mkdir\"  && export MKDIR\n> fi\n>  \n> if [ \"$CHMOD\" = \"\" ]; then\n>     CHMOD=\"chmod\"  && export CHMOD\n> fi\n>  \n> if [ \"$TOUCH\" = \"\" ]; then\n>     TOUCH=\"touch\"  && export TOUCH\n> fi\n> \n[jaap@vrede sage-4.3.1.alpha1]$ \n\n```\n\nThis will not break any code. I'll test this with reinstalling the affected spkgs mercurial, singular, ntl, gap and pari. \n\nOk so far. Positive review.",
    "created_at": "2010-01-13T11:39:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7818#issuecomment-60868",
    "user": "https://github.com/jaapspies"
}
```

<a id='comment:23'></a>
This changes make sense.


```
[jaap@vrede sage-4.3.1.alpha1]$ diff local/bin/sage-env ../sage-env
452a453,456
> if [ "$MV" = "" ]; then
>     MV="mv"  && export MV
> fi
> 
456a461,464
> if [ "$RM" = "" ]; then
>     RM="rm"  && export RM
> fi
>  
460a469,484
> if [ "$LN" = "" ]; then
>     LN="ln"  && export LN
> fi
>  
> if [ "$MKDIR" = "" ]; then
>     MKDIR="mkdir"  && export MKDIR
> fi
>  
> if [ "$CHMOD" = "" ]; then
>     CHMOD="chmod"  && export CHMOD
> fi
>  
> if [ "$TOUCH" = "" ]; then
>     TOUCH="touch"  && export TOUCH
> fi
> 
[jaap@vrede sage-4.3.1.alpha1]$ 

```

This will not break any code. I'll test this with reinstalling the affected spkgs mercurial, singular, ntl, gap and pari. 

Ok so far. Positive review.



---

archive/issue_comments_060869.json:
```json
{
    "body": "**Attachment:** [sage-env.patch.gz](https://github.com/sagemath/sage/files/ticket7818/sage-env.patch.gz)\n\nPatch file which should hopefully commit, as Robert  Miller said the previous one had a problem.",
    "created_at": "2010-01-13T23:33:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7818#issuecomment-60869",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

**Attachment:** [sage-env.patch.gz](https://github.com/sagemath/sage/files/ticket7818/sage-env.patch.gz)

Patch file which should hopefully commit, as Robert  Miller said the previous one had a problem.



---

archive/issue_comments_060870.json:
```json
{
    "body": "**Merged:** sage-4.3.1.rc0",
    "created_at": "2010-01-14T01:53:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7818#issuecomment-60870",
    "user": "https://github.com/rlmill"
}
```

**Merged:** sage-4.3.1.rc0



---

archive/issue_events_080972.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-01-14T01:53:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7818#event-80972"
}
```



---

archive/issue_events_080973.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-01-14T01:53:32Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7818#event-80973"
}
```



---

archive/issue_comments_060871.json:
```json
{
    "body": "**Changing merged** from \"sage-4.3.1.rc0\" to \"\".",
    "created_at": "2010-01-15T22:31:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7818#issuecomment-60871",
    "user": "https://github.com/rlmill"
}
```

**Changing merged** from "sage-4.3.1.rc0" to "".



---

archive/issue_events_080974.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-01-15T22:33:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7818#event-80974"
}
```



---

archive/issue_comments_060872.json:
```json
{
    "body": "<a id='comment:26'></a>\nThis patch inadvertently removes the `-fno-strict-aliasing` option from the gcc options that Cython uses to compile the autogenerated C files. This makes all sorts of stuff break all over the place. Also, since that's not obvious from the patch, who knows what else goes wrong? (thanks to Robert Bradshaw for helping me figure this out)",
    "created_at": "2010-01-15T22:33:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7818#issuecomment-60872",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:26'></a>
This patch inadvertently removes the `-fno-strict-aliasing` option from the gcc options that Cython uses to compile the autogenerated C files. This makes all sorts of stuff break all over the place. Also, since that's not obvious from the patch, who knows what else goes wrong? (thanks to Robert Bradshaw for helping me figure this out)



---

archive/issue_comments_060873.json:
```json
{
    "body": "<a id='comment:27'></a>\nI'll take my hands off. This is much more trickier than I thought!\n\nJaap",
    "created_at": "2010-01-15T23:36:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7818#issuecomment-60873",
    "user": "https://github.com/jaapspies"
}
```

<a id='comment:27'></a>
I'll take my hands off. This is much more trickier than I thought!

Jaap



---

archive/issue_comments_060874.json:
```json
{
    "body": "<a id='comment:28'></a>\nSetting RM=\"rm\" breaks newer libtools, namely the ones in Fedora 12 (libtool 2.2.6, autoconf 2.63, automake 1.11.1). They assume that $RM is either unset or RM=\"rm -f\".\n\nOne of the symptoms of this breakage is that configure ends with\n\n```\nrm: cannot remove `libtoolT': No such file or directory\n```\nCompile will break later on...",
    "created_at": "2010-01-25T21:38:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7818#issuecomment-60874",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:28'></a>
Setting RM="rm" breaks newer libtools, namely the ones in Fedora 12 (libtool 2.2.6, autoconf 2.63, automake 1.11.1). They assume that $RM is either unset or RM="rm -f".

One of the symptoms of this breakage is that configure ends with

```
rm: cannot remove `libtoolT': No such file or directory
```
Compile will break later on...



---

archive/issue_comments_060875.json:
```json
{
    "body": "<a id='comment:29'></a>\nI think this can be closed as \"wontfix\" as the issues resolved in this ticket are very complex and I think for the foreseeable future, this will not be resolved.",
    "created_at": "2011-04-02T13:09:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7818#issuecomment-60875",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<a id='comment:29'></a>
I think this can be closed as "wontfix" as the issues resolved in this ticket are very complex and I think for the foreseeable future, this will not be resolved.



---

archive/issue_comments_060876.json:
```json
{
    "body": "<a id='comment:30'></a>\nI think we should keep this ticket open and gradually fix spgks. For example the Singular spkg needs to be updated soon for gcc-4.6 so we'll remove any `$RM`s in the process...\n\nAlso, is there any other issue except the `-fno-strict-aliasing `? We could fix that...",
    "created_at": "2011-04-02T19:34:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7818#issuecomment-60876",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:30'></a>
I think we should keep this ticket open and gradually fix spgks. For example the Singular spkg needs to be updated soon for gcc-4.6 so we'll remove any `$RM`s in the process...

Also, is there any other issue except the `-fno-strict-aliasing `? We could fix that...



---

archive/issue_comments_060877.json:
```json
{
    "body": "**Changing author** from \"David Kirkby\" to \"\".",
    "created_at": "2013-02-05T19:37:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7818#issuecomment-60877",
    "user": "https://github.com/jdemeyer"
}
```

**Changing author** from "David Kirkby" to "".



---

archive/issue_comments_060878.json:
```json
{
    "body": "<a id='comment:31'></a>\nReplying to [drkirkby](#comment%3A29):\n> I think this can be closed as \"wontfix\" as the issues resolved in this ticket are very complex and I think for the foreseeable future, this will not be resolved. \n\nIt is also a typical \"fix everything\" ticket, which is almost impossible to get merged.",
    "created_at": "2013-02-05T19:37:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7818#issuecomment-60878",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:31'></a>
Replying to [drkirkby](#comment%3A29):
> I think this can be closed as "wontfix" as the issues resolved in this ticket are very complex and I think for the foreseeable future, this will not be resolved. 

It is also a typical "fix everything" ticket, which is almost impossible to get merged.



---

archive/issue_events_080975.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-02-05T19:37:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7818#event-80975"
}
```



---

archive/issue_events_080976.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-02-05T19:37:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7818#event-80976"
}
```



---

archive/issue_comments_060879.json:
```json
{
    "body": "**Changing reviewer** from \"Jaap Spies\" to \"David Kirkby, Jaap Spies\".",
    "created_at": "2013-02-05T19:37:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7818#issuecomment-60879",
    "user": "https://github.com/jdemeyer"
}
```

**Changing reviewer** from "Jaap Spies" to "David Kirkby, Jaap Spies".



---

archive/issue_events_080977.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-02-05T19:37:14Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "milestone_number": null,
    "milestone_title": "sage-5.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7818#event-80977"
}
```



---

archive/issue_events_080978.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-02-08T13:23:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "label": "https://github.com/sagemath/sage/labels/wontfix",
    "label_color": "008080",
    "label_name": "wontfix",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7818#event-80978"
}
```



---

archive/issue_events_080979.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-02-08T13:23:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7818#event-80979"
}
```



---

archive/issue_events_080980.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-02-08T13:23:32Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/7818",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7818#event-80980"
}
```
