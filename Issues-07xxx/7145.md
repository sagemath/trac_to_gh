# Issue 7145: Interval exchange transformations

archive/issues_007145.json:
```json
{
    "assignees": [],
    "body": "This module implement Interval exchange transformations (iet) (and linear involutions (li)) from a combinatorial point of vue. It also makes the link with strata of Abelian differentials on Riemann surfaces. The three main objects defined in this module are:\n\n- Special kinds of permutations\n- Rauzy diagrams (oriented graph)\n- Strata of differentials\n\nThere are different class of permutations associated to iet, but all are constructed within a class factory:\n\n```\nsage: p = iet.Permutation('a b c d','d c b a')\nsage: p\na b c d\nd c b a\nsage: p.stratum()\nH(2)\n```\n\nThe object which links those permutations to the dynamic (Teichm\u00fcller flow) of strata of differentials is the Rauzy diagram:\n\n```\nsage: p = iet.Permutation('a b c','c b a')\nsage: d = p.rauzy_diagram()\nRauzy diagram with 3 permutations\n```\n\n**Assignee:** @videlec\n\n**CC:**  @seblabbe\n\n**Author:** Vincent Delecroix\n\n**Reviewer:** Sebastien Labbe\n\n**Merged:** sage-4.3.1.rc0\n\nIssue created by migration from https://trac.sagemath.org/ticket/7145\n\n",
    "closed_at": "2010-01-14T07:01:05Z",
    "created_at": "2009-10-07T11:48:19Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.3.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Interval exchange transformations",
    "type": "issue",
    "updated_at": "2010-01-14T07:01:05Z",
    "url": "https://github.com/sagemath/sage/issues/7145",
    "user": "https://github.com/videlec"
}
```
This module implement Interval exchange transformations (iet) (and linear involutions (li)) from a combinatorial point of vue. It also makes the link with strata of Abelian differentials on Riemann surfaces. The three main objects defined in this module are:

- Special kinds of permutations
- Rauzy diagrams (oriented graph)
- Strata of differentials

There are different class of permutations associated to iet, but all are constructed within a class factory:

```
sage: p = iet.Permutation('a b c d','d c b a')
sage: p
a b c d
d c b a
sage: p.stratum()
H(2)
```

The object which links those permutations to the dynamic (Teichmüller flow) of strata of differentials is the Rauzy diagram:

```
sage: p = iet.Permutation('a b c','c b a')
sage: d = p.rauzy_diagram()
Rauzy diagram with 3 permutations
```

**Assignee:** @videlec

**CC:**  @seblabbe

**Author:** Vincent Delecroix

**Reviewer:** Sebastien Labbe

**Merged:** sage-4.3.1.rc0

Issue created by migration from https://trac.sagemath.org/ticket/7145





---

archive/issue_events_072522.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2009-10-07T11:48:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "milestone_number": null,
    "milestone_title": "sage-4.3.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7145#event-72522"
}
```



---

archive/issue_events_072523.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2009-10-07T11:48:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
    "label_color": "08517b",
    "label_name": "component: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7145#event-72523"
}
```



---

archive/issue_events_072524.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2009-10-07T11:48:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "008080",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7145#event-72524"
}
```



---

archive/issue_events_072525.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2009-10-07T11:48:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7145#event-72525"
}
```



---

archive/issue_comments_052951.json:
```json
{
    "body": "<a id='comment:1'>**Comment 1:**</a>\n**Attachment:** [trac_7145-iet-vd.patch.gz](https://github.com/sagemath/sage/files/ticket7145/trac_7145-iet-vd.patch.gz)",
    "created_at": "2009-10-07T12:15:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7145#issuecomment-52951",
    "user": "https://github.com/videlec"
}
```

<a id='comment:1'>**Comment 1:**</a>
**Attachment:** [trac_7145-iet-vd.patch.gz](https://github.com/sagemath/sage/files/ticket7145/trac_7145-iet-vd.patch.gz)



---

archive/issue_events_072526.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2009-10-07T12:15:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7145#event-72526"
}
```



---

archive/issue_comments_052952.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,7 +4,7 @@\n - Rauzy diagrams (oriented graph)\n - Strata of differentials\n \n-There are different class of permuttations associated to iet, but all are constructed within a class factory:\n+There are different class of permutations associated to iet, but all are constructed within a class factory:\n \n ```\n sage: p = PermutationIET('a b c d','d c b a')\n@@ -15,7 +15,7 @@\n H(2)\n ```\n \n-The object which links those permutations to the dynamic of strata of differentials is the Rauzy diagram:\n+The object which links those permutations to the dynamic (Teichm\u00fcller flow) of strata of differentials is the Rauzy diagram:\n \n ```\n sage: p = PermutationIET('a b c','c b a')\n``````\n",
    "created_at": "2009-10-07T12:15:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7145#issuecomment-52952",
    "user": "https://github.com/videlec"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,7 +4,7 @@
 - Rauzy diagrams (oriented graph)
 - Strata of differentials
 
-There are different class of permuttations associated to iet, but all are constructed within a class factory:
+There are different class of permutations associated to iet, but all are constructed within a class factory:
 
 ```
 sage: p = PermutationIET('a b c d','d c b a')
@@ -15,7 +15,7 @@
 H(2)
 ```
 
-The object which links those permutations to the dynamic of strata of differentials is the Rauzy diagram:
+The object which links those permutations to the dynamic (Teichmüller flow) of strata of differentials is the Rauzy diagram:
 
 ```
 sage: p = PermutationIET('a b c','c b a')
``````




---

archive/issue_comments_052953.json:
```json
{
    "body": "**Assignee:** @videlec",
    "created_at": "2009-10-11T20:45:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7145#issuecomment-52953",
    "user": "https://github.com/videlec"
}
```

**Assignee:** @videlec



---

archive/issue_events_072527.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2009-12-08T16:30:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7145#event-72527"
}
```



---

archive/issue_events_072528.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2009-12-08T16:30:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7145#event-72528"
}
```



---

archive/issue_comments_052954.json:
```json
{
    "body": "<a id='comment:3'>**Comment 3:**</a>\nFirst I must say that I am not expert at all in that field. I just know some of Interval exchange transformations. So, Vincent, I read through your patch today and I will post some small corrections in a patch soon. I have also some comments (sometimes suggestions open to you) below :\n\nI would gather those related functionalities under a same bag where the user could found them (and all of them) more easily. For example.\n\n```\nsage: IET.[TAB]\n```\n\nor maybe\n\n```\nsage: from sage.combinat.iet.all import IET\nsage: IET.[TAB]\n```\n\nFor `constructor.py`, I suggest to \n\n- Create a class `constructor` containing the functions `PermutationsIET`, `PermutationIET`, `PermutationLI`, `GeneralizedPermutation`, `RauzyDiagram`, `IntervalExchangeTransformation`.\n- Create the object `IET = constructor()`\n- Rename `PermutationsIET` to `PermutationsIET_iterator`\n- Add a function named `IntervalExchangeTransformation` to the class `constructor` that wrapped the constructor of `IET` in `iet.py`.\n- Do we want `AbelianStratum`, `QuadraticStratum` and `AbelianStrata` to be wrapped in `constructor` as well? I don't know, but if it is realated to everything in iet folder, then it would clearly help the user to know about it.\n\nFor `iet.py`\n\n- Rename `IntervalExchangeTransformation.__mul__` to something like multiply_lengths.\n- Keep `IntervalExchangeTransformation.__mul__` for multiplication of two IET.\n- Change `IntervalExchangeTransformation._repr_` to look more like an IET and less as two tuples. For example it could say Interval exchange transformation from [0, 1[ to [0, 1[ of permutation ?.\n- Rename `IntervalExchangeTransformation.copy` as `__copy__` or `__deepcopy__` if it corresponds to what you want. This may applies to many other classes in the files.\n\nI would like the following to work :\n\n```\nsage: p = Permutation([3,2,1])\nsage: t = IntervalExchangeTransformation(p, [0.6, 0.1, 0.3])\nTraceback (most recent call last):\n...\nTypeError: cannot concatenate 'str' and 'int' objects\n```\n\nwhere labels of the intervals are facultative:\n\n```\nsage: t = IntervalExchangeTransformation(p, [0.6, 0.1, 0.3], labels='abc')\n```\n\n\nWhy do the following doesn't work:\n\n```\nsage: p = Permutation([3,2,1])\nsage: PermutationIET(p)\n1 2 3\n3 2 1\nsage: PermutationIET([3,2,1])\nTraceback (most recent call last):\n...\nValueError: your argument can not be split in two parts\n```\n\n- I don't know if the numerous `_P_IET = PermutationIET` really help the readability. I would not rename them and rather keep them as they are. Or, if so, I would use `from this import longname as shortname` instead because if shortname is new to me, than I don't have to go in the file this to understand that shortname simply means longname.\n\nFor template.py :\n\nI am getting the following :\n\n```\nsage -t  \"devel/sage-combinat/sage/combinat/iet/template.py\"\n**********************************************************************\nFile \"/home/slabbe/sage-4.2/devel/sage-combinat/sage/combinat/iet/template.py\", line 1898:\n    sage: g == loads(dumps(g))\nException raised:\n    Traceback (most recent call last):\n      File \"/home/slabbe/sage-4.2/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/home/slabbe/sage-4.2/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/home/slabbe/sage-4.2/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_50[5]>\", line 1, in <module>\n        g == loads(dumps(g))###line 1898:\n    sage: g == loads(dumps(g))\n      File \"sage_object.pyx\", line 735, in sage.structure.sage_object.dumps (sage/structure/sage_object.c:8008)\n      File \"sage_object.pyx\", line 165, in sage.structure.sage_object.SageObject.dumps (sage/structure/sage_object.c:2158)\n    PicklingError: Can't pickle <class 'sage.combinat.iet.labeled.Path'>: attribute lookup sage.combinat.iet.labeled.Path failed\n```",
    "created_at": "2009-12-08T16:30:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7145#issuecomment-52954",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:3'>**Comment 3:**</a>
First I must say that I am not expert at all in that field. I just know some of Interval exchange transformations. So, Vincent, I read through your patch today and I will post some small corrections in a patch soon. I have also some comments (sometimes suggestions open to you) below :

I would gather those related functionalities under a same bag where the user could found them (and all of them) more easily. For example.

```
sage: IET.[TAB]
```

or maybe

```
sage: from sage.combinat.iet.all import IET
sage: IET.[TAB]
```

For `constructor.py`, I suggest to 

- Create a class `constructor` containing the functions `PermutationsIET`, `PermutationIET`, `PermutationLI`, `GeneralizedPermutation`, `RauzyDiagram`, `IntervalExchangeTransformation`.
- Create the object `IET = constructor()`
- Rename `PermutationsIET` to `PermutationsIET_iterator`
- Add a function named `IntervalExchangeTransformation` to the class `constructor` that wrapped the constructor of `IET` in `iet.py`.
- Do we want `AbelianStratum`, `QuadraticStratum` and `AbelianStrata` to be wrapped in `constructor` as well? I don't know, but if it is realated to everything in iet folder, then it would clearly help the user to know about it.

For `iet.py`

- Rename `IntervalExchangeTransformation.__mul__` to something like multiply_lengths.
- Keep `IntervalExchangeTransformation.__mul__` for multiplication of two IET.
- Change `IntervalExchangeTransformation._repr_` to look more like an IET and less as two tuples. For example it could say Interval exchange transformation from [0, 1[ to [0, 1[ of permutation ?.
- Rename `IntervalExchangeTransformation.copy` as `__copy__` or `__deepcopy__` if it corresponds to what you want. This may applies to many other classes in the files.

I would like the following to work :

```
sage: p = Permutation([3,2,1])
sage: t = IntervalExchangeTransformation(p, [0.6, 0.1, 0.3])
Traceback (most recent call last):
...
TypeError: cannot concatenate 'str' and 'int' objects
```

where labels of the intervals are facultative:

```
sage: t = IntervalExchangeTransformation(p, [0.6, 0.1, 0.3], labels='abc')
```


Why do the following doesn't work:

```
sage: p = Permutation([3,2,1])
sage: PermutationIET(p)
1 2 3
3 2 1
sage: PermutationIET([3,2,1])
Traceback (most recent call last):
...
ValueError: your argument can not be split in two parts
```

- I don't know if the numerous `_P_IET = PermutationIET` really help the readability. I would not rename them and rather keep them as they are. Or, if so, I would use `from this import longname as shortname` instead because if shortname is new to me, than I don't have to go in the file this to understand that shortname simply means longname.

For template.py :

I am getting the following :

```
sage -t  "devel/sage-combinat/sage/combinat/iet/template.py"
**********************************************************************
File "/home/slabbe/sage-4.2/devel/sage-combinat/sage/combinat/iet/template.py", line 1898:
    sage: g == loads(dumps(g))
Exception raised:
    Traceback (most recent call last):
      File "/home/slabbe/sage-4.2/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/home/slabbe/sage-4.2/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/home/slabbe/sage-4.2/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_50[5]>", line 1, in <module>
        g == loads(dumps(g))###line 1898:
    sage: g == loads(dumps(g))
      File "sage_object.pyx", line 735, in sage.structure.sage_object.dumps (sage/structure/sage_object.c:8008)
      File "sage_object.pyx", line 165, in sage.structure.sage_object.SageObject.dumps (sage/structure/sage_object.c:2158)
    PicklingError: Can't pickle <class 'sage.combinat.iet.labeled.Path'>: attribute lookup sage.combinat.iet.labeled.Path failed
```



---

archive/issue_comments_052955.json:
```json
{
    "body": "<a id='comment:4'>**Comment 4:**</a>\nI submitted before preview. So I repeat below the lists that I messed up above.\n\nFor constructor.py, I suggest to\n\n- Create a class constructor containing the functions `PermutationsIET`, `PermutationIET`, `PermutationLI`, `GeneralizedPermutation`, `RauzyDiagram`, `IntervalExchangeTransformation`. \n- Create the object `IET` = `constructor()` \n- Rename `PermutationsIET` to `PermutationsIET_iterator` \n- Add a function named `IntervalExchangeTransformation` to the class constructor that wrapped the constructor of IET in `iet.py`. \n- Do we want `AbelianStratum`, `QuadraticStratum` and `AbelianStrata` to be wrapped in constructor as well? I don't know, but if it is realated to everything in iet folder, then it would clearly help the user to know about it.\n\nFor iet.py\n\n- Rename `IntervalExchangeTransformation.__mul__` to something like `multiply_lengths`. \n- Keep `IntervalExchangeTransformation.__mul__` for multiplication of two IET. \n- Change `IntervalExchangeTransformation._repr_` to look more like an `IET` and less as two tuples. For example it could say Interval exchange transformation from [0, 1[ to [0, 1[ of permutation ?. \n- Rename `IntervalExchangeTransformation.copy` as `__copy__` or `__deepcopy__` if it corresponds to what you want. This may applies to many other classes in the files.",
    "created_at": "2009-12-08T16:36:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7145#issuecomment-52955",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:4'>**Comment 4:**</a>
I submitted before preview. So I repeat below the lists that I messed up above.

For constructor.py, I suggest to

- Create a class constructor containing the functions `PermutationsIET`, `PermutationIET`, `PermutationLI`, `GeneralizedPermutation`, `RauzyDiagram`, `IntervalExchangeTransformation`. 
- Create the object `IET` = `constructor()` 
- Rename `PermutationsIET` to `PermutationsIET_iterator` 
- Add a function named `IntervalExchangeTransformation` to the class constructor that wrapped the constructor of IET in `iet.py`. 
- Do we want `AbelianStratum`, `QuadraticStratum` and `AbelianStrata` to be wrapped in constructor as well? I don't know, but if it is realated to everything in iet folder, then it would clearly help the user to know about it.

For iet.py

- Rename `IntervalExchangeTransformation.__mul__` to something like `multiply_lengths`. 
- Keep `IntervalExchangeTransformation.__mul__` for multiplication of two IET. 
- Change `IntervalExchangeTransformation._repr_` to look more like an `IET` and less as two tuples. For example it could say Interval exchange transformation from [0, 1[ to [0, 1[ of permutation ?. 
- Rename `IntervalExchangeTransformation.copy` as `__copy__` or `__deepcopy__` if it corresponds to what you want. This may applies to many other classes in the files.



---

archive/issue_comments_052956.json:
```json
{
    "body": "Applies over the precedent patch.",
    "created_at": "2009-12-08T16:38:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7145#issuecomment-52956",
    "user": "https://github.com/seblabbe"
}
```

Applies over the precedent patch.



---

archive/issue_comments_052957.json:
```json
{
    "body": "<a id='comment:5'>**Comment 5:**</a>\n**Attachment:** [trac_7145-review-sl.patch.gz](https://github.com/sagemath/sage/files/ticket7145/trac_7145-review-sl.patch.gz)\n\nVincent, I tried your code again with Thierry Monteil who knows better this field and he liked all the functions you implemented.\n\nHe suggested that you change Permutation* to `LabelledPermutation` or `PermutationwithLabel`... up to you.\n\nAlso, I notice the following. I think it should be a method and not an attribute :\n\n```\nsage: p = Permutation([4,3,2,1])\nsage: pp = PermutationIET(p)\nsage: pp.alphabet\nOrdered Alphabet [1, 2, 3, 4]\n```",
    "created_at": "2009-12-10T16:17:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7145#issuecomment-52957",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:5'>**Comment 5:**</a>
**Attachment:** [trac_7145-review-sl.patch.gz](https://github.com/sagemath/sage/files/ticket7145/trac_7145-review-sl.patch.gz)

Vincent, I tried your code again with Thierry Monteil who knows better this field and he liked all the functions you implemented.

He suggested that you change Permutation* to `LabelledPermutation` or `PermutationwithLabel`... up to you.

Also, I notice the following. I think it should be a method and not an attribute :

```
sage: p = Permutation([4,3,2,1])
sage: pp = PermutationIET(p)
sage: pp.alphabet
Ordered Alphabet [1, 2, 3, 4]
```



---

archive/issue_comments_052958.json:
```json
{
    "body": "<a id='comment:6'>**Comment 6:**</a>\nReplying to [@seblabbe](#comment%3A5):\n> Vincent, I tried your code again with Thierry Monteil who knows better this field and he liked all the functions you implemented.\n> \n> He suggested that you change Permutation* to `LabelledPermutation` or `PermutationwithLabel`... up to you.\n\nIt won't be possible. I consider two kinds of permutations\n* ReducedPermutation\n* LabelledPermutation\n\nA ReducedPermutation can be identified with a permutation of an ordered alphabet.\nA Labeledpermutation is a couple of bijection (p_t,p_b) : alphabet -> [1,n]\n \n> Also, I notice the following. I think it should be a method and not an attribute :\n> \n> ```\n> sage: p = Permutation([4,3,2,1])\n> sage: pp = PermutationIET(p)\n> sage: pp.alphabet\n> Ordered Alphabet [1, 2, 3, 4]\n> ```\n\nThe resason is because it's possible to change the alphabet\nsage: p = PermutationIET('a b c','c b a')\nsage: p\na b c\nc b a\nsage: p.alphabet = [1,2,3]\nsage: p\n1 2 3\n3 2 1\nsage: p.alphabet = 'cd'\n...\nValueError: Your alphabet has not enough letters",
    "created_at": "2009-12-10T23:57:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7145#issuecomment-52958",
    "user": "https://github.com/videlec"
}
```

<a id='comment:6'>**Comment 6:**</a>
Replying to [@seblabbe](#comment%3A5):
> Vincent, I tried your code again with Thierry Monteil who knows better this field and he liked all the functions you implemented.
> 
> He suggested that you change Permutation* to `LabelledPermutation` or `PermutationwithLabel`... up to you.

It won't be possible. I consider two kinds of permutations
* ReducedPermutation
* LabelledPermutation

A ReducedPermutation can be identified with a permutation of an ordered alphabet.
A Labeledpermutation is a couple of bijection (p_t,p_b) : alphabet -> [1,n]
 
> Also, I notice the following. I think it should be a method and not an attribute :
> 
> ```
> sage: p = Permutation([4,3,2,1])
> sage: pp = PermutationIET(p)
> sage: pp.alphabet
> Ordered Alphabet [1, 2, 3, 4]
> ```

The resason is because it's possible to change the alphabet
sage: p = PermutationIET('a b c','c b a')
sage: p
a b c
c b a
sage: p.alphabet = [1,2,3]
sage: p
1 2 3
3 2 1
sage: p.alphabet = 'cd'
...
ValueError: Your alphabet has not enough letters



---

archive/issue_comments_052959.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -7,7 +7,7 @@\n There are different class of permutations associated to iet, but all are constructed within a class factory:\n \n ```\n-sage: p = PermutationIET('a b c d','d c b a')\n+sage: p = iet.Permutation('a b c d','d c b a')\n sage: p\n a b c d\n d c b a\n@@ -18,7 +18,7 @@\n The object which links those permutations to the dynamic (Teichm\u00fcller flow) of strata of differentials is the Rauzy diagram:\n \n ```\n-sage: p = PermutationIET('a b c','c b a')\n+sage: p = iet.Permutation('a b c','c b a')\n sage: d = p.rauzy_diagram()\n Rauzy diagram with 3 permutations\n ```\n``````\n",
    "created_at": "2009-12-13T13:47:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7145#issuecomment-52959",
    "user": "https://github.com/videlec"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -7,7 +7,7 @@
 There are different class of permutations associated to iet, but all are constructed within a class factory:
 
 ```
-sage: p = PermutationIET('a b c d','d c b a')
+sage: p = iet.Permutation('a b c d','d c b a')
 sage: p
 a b c d
 d c b a
@@ -18,7 +18,7 @@
 The object which links those permutations to the dynamic (Teichmüller flow) of strata of differentials is the Rauzy diagram:
 
 ```
-sage: p = PermutationIET('a b c','c b a')
+sage: p = iet.Permutation('a b c','c b a')
 sage: d = p.rauzy_diagram()
 Rauzy diagram with 3 permutations
 ```
``````




---

archive/issue_events_072529.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2009-12-13T13:47:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7145#event-72529"
}
```



---

archive/issue_events_072530.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2009-12-13T13:47:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7145#event-72530"
}
```



---

archive/issue_comments_052960.json:
```json
{
    "body": "<a id='comment:7'>**Comment 7:**</a>\n> - Create a class constructor containing the functions `PermutationsIET`, `PermutationIET`, `PermutationLI`, `GeneralizedPermutation`, `RauzyDiagram`, `IntervalExchangeTransformation`. \n> - Create the object `IET` = `constructor()` \n\ndone. Everything is in constructor.py which is imported as iet. Then the iet.<tab> gives the (approximately) the following list\n\n   * Permutation\n   * RauzyDiagram\n   * IntervalExchangeTransformation\n\n>    - Rename `PermutationsIET` to `PermutationsIET_iterator` \n\ndone \n\n> - Add a function named `IntervalExchangeTransformation` to the class constructor that wrapped the constructor of IET in `iet.py`. \n\ndone\n\n> - Do we want `AbelianStratum`, `QuadraticStratum` and `AbelianStrata` to be wrapped in constructor as well? I don't know, but if it is realated to everything in iet folder, then it would clearly help the user to know about it.\n\nI don't know... the strata here means strata of Abelian differentials on Riemann surfaces. The fact is we need them to understand precisely the structure of Rauzy diagram. It is hence related to Rauzy diagram but somewhat independent of the theory of interval exchange transformations.\n\n> \n> For iet.py\n> \n> - Rename `IntervalExchangeTransformation.__mul__` to something like `multiply_lengths`. \n\ndone. In fact, it's implemented in .normalize()\n\n>    - Keep `IntervalExchangeTransformation.__mul__` for multiplication of two IET. \n\ndone. But a little todo remains. I choose to create canonic labels from the labels of the two iets and this force a conversion of labels to strings. It's not so beautiful if we do not need the labels.\n\n>    - Change `IntervalExchangeTransformation._repr_` to look more like an `IET` and less as two tuples. For example it could say Interval exchange transformation from [0, 1[ to [0, 1[ of permutation ?. \n\ndone.\n\n> - Rename `IntervalExchangeTransformation.copy` as `__copy__` or `__deepcopy__` if it corresponds to what you want. This may applies to many other classes in the files. \n\ndone.",
    "created_at": "2009-12-13T13:47:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7145#issuecomment-52960",
    "user": "https://github.com/videlec"
}
```

<a id='comment:7'>**Comment 7:**</a>
> - Create a class constructor containing the functions `PermutationsIET`, `PermutationIET`, `PermutationLI`, `GeneralizedPermutation`, `RauzyDiagram`, `IntervalExchangeTransformation`. 
> - Create the object `IET` = `constructor()` 

done. Everything is in constructor.py which is imported as iet. Then the iet.<tab> gives the (approximately) the following list

   * Permutation
   * RauzyDiagram
   * IntervalExchangeTransformation

>    - Rename `PermutationsIET` to `PermutationsIET_iterator` 

done 

> - Add a function named `IntervalExchangeTransformation` to the class constructor that wrapped the constructor of IET in `iet.py`. 

done

> - Do we want `AbelianStratum`, `QuadraticStratum` and `AbelianStrata` to be wrapped in constructor as well? I don't know, but if it is realated to everything in iet folder, then it would clearly help the user to know about it.

I don't know... the strata here means strata of Abelian differentials on Riemann surfaces. The fact is we need them to understand precisely the structure of Rauzy diagram. It is hence related to Rauzy diagram but somewhat independent of the theory of interval exchange transformations.

> 
> For iet.py
> 
> - Rename `IntervalExchangeTransformation.__mul__` to something like `multiply_lengths`. 

done. In fact, it's implemented in .normalize()

>    - Keep `IntervalExchangeTransformation.__mul__` for multiplication of two IET. 

done. But a little todo remains. I choose to create canonic labels from the labels of the two iets and this force a conversion of labels to strings. It's not so beautiful if we do not need the labels.

>    - Change `IntervalExchangeTransformation._repr_` to look more like an `IET` and less as two tuples. For example it could say Interval exchange transformation from [0, 1[ to [0, 1[ of permutation ?. 

done.

> - Rename `IntervalExchangeTransformation.copy` as `__copy__` or `__deepcopy__` if it corresponds to what you want. This may applies to many other classes in the files. 

done.



---

archive/issue_comments_052961.json:
```json
{
    "body": "**Attachment:** [trac_7145-corrections-vd.patch.gz](https://github.com/sagemath/sage/files/ticket7145/trac_7145-corrections-vd.patch.gz)",
    "created_at": "2009-12-13T13:52:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7145#issuecomment-52961",
    "user": "https://github.com/videlec"
}
```

**Attachment:** [trac_7145-corrections-vd.patch.gz](https://github.com/sagemath/sage/files/ticket7145/trac_7145-corrections-vd.patch.gz)



---

archive/issue_events_072531.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2009-12-24T12:54:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7145#event-72531"
}
```



---

archive/issue_events_072532.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2009-12-24T12:54:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7145#event-72532"
}
```



---

archive/issue_comments_052962.json:
```json
{
    "body": "<a id='comment:8'>**Comment 8:**</a>\nDear Vincent,\n\nThanks for doing all those changes.\n\nI am now looking at your recent patch and I have a few more comments. I am sorry I was not able to tell them before. I will try now to make a complete review with all my (hopefully) final remarks. After those FIVE remarks answered, I think we will be very near of a positive review!\n\nS\u00e9bastien\n\nONE.\n\n> The resason is because it's possible to change the alphabet \n> sage: p = PermutationIET('a b c','c b a') \n> sage: p a b c c b a \n> sage: p.alphabet = [1,2,3] \n> sage: p 1 2 3 3 2 1 \n> sage: p.alphabet = 'cd' \n> ... \n> ValueError?: Your alphabet has not enough letters \n\nI am not sure this is a good reason for using an attribute instead of a method. See the following example :\n\n```\nsage: g = Graph()\nsage: p = g.plot()\nsage: p.xmin()\n-1.0\nsage: p.xmin(-2)\nsage: p.xmin()\n-2.0\n```\n\nTWO.\n\nThe documentation and doctest coverage is very good (96%) but not perfect :\n\n```\nslabbe@pol:~/sage-4.2/devel/sage-combinat/sage/combinat/iet$ sage -coverage .\nconstructors.py: 75% (6 of 8)\niet.py: 100% (23 of 23)\nlabelled.py: 95% (57 of 60)\nreduced.py: 100% (55 of 55)\nstrata.py: 100% (39 of 39)\ntemplate.py: 96% (89 of 92)\n\nOverall weighted coverage score:  96.9%\nTotal number of functions:  277\nWe need    5 more function to get to 99% coverage.\n```\n\nMoreover, `sage -coverage *` tells many `function name doesn't occur in doctests`. Maybe you could add `#indirect doctest` in doctests that are indirect.\n\nWhile you are at it, you may consider to add some INPUT and OUTPUT where there are missing. See the discussion [sage-devel: input and output in docstrings](http://groups.google.com/group/sage-devel/browse_thread/thread/7d529c646c685877/3f7678e55f60759f?hl=en&lnk=gst&q=coverage#3f7678e55f60759f)\n\nTHREE.\n\nI am getting 2 doctests failures :\n\n```\nsage -t  \"devel/sage-combinat/sage/combinat/iet/constructors.py\"\n**********************************************************************\nFile \"/home/slabbe/sage-4.2/devel/sage-combinat/sage/combinat/iet/constructors.py\", line 531:\n    sage: for p in P: print p, \"* *\\n\"\nExpected:\n    a b\n    b a\n    * *\nGot:\n    a b\n    b a * *\n    <BLANKLINE>\n    b a\n    a b * *\n    <BLANKLINE>\n**********************************************************************\nFile \"/home/slabbe/sage-4.2/devel/sage-combinat/sage/combinat/iet/constructors.py\", line 536:\n    sage: for p in P: print p, \"\\* * *\\n\"\nExpected:\n    a b c\n    c b a\n    * * *\nGot:\n    a b c\n    b c a \\* * *\n    <BLANKLINE>\n    a b c\n    c a b \\* * *\n    <BLANKLINE>\n    a b c\n    c b a \\* * *\n    <BLANKLINE>\n    a c b\n    b a c \\* * *\n    <BLANKLINE>\n    a c b\n    b c a \\* * *\n    <BLANKLINE>\n    a c b\n    c b a \\* * *\n    <BLANKLINE>\n    b a c\n    a c b \\* * *\n    <BLANKLINE>\n    b a c\n    c a b \\* * *\n    <BLANKLINE>\n    b a c\n    c b a \\* * *\n    <BLANKLINE>\n    b c a\n    a b c \\* * *\n    <BLANKLINE>\n    b c a\n    a c b \\* * *\n    <BLANKLINE>\n    b c a\n    c a b \\* * *\n    <BLANKLINE>\n    c a b\n    a b c \\* * *\n    <BLANKLINE>\n    c a b\n    b a c \\* * *\n    <BLANKLINE>\n    c a b\n    b c a \\* * *\n    <BLANKLINE>\n    c b a\n    a b c \\* * *\n    <BLANKLINE>\n    c b a\n    a c b \\* * *\n    <BLANKLINE>\n    c b a\n    b a c \\* * *\n    <BLANKLINE>\n**********************************************************************\n1 items had failures:\n   2 of   6 in __main__.example_4\n***Test Failed*** 2 failures.\nFor whitespace errors, see the file /home/slabbe/.sage//tmp/.doctest_constructors.py\n\t [3.0 s]\nexit code: 1024\n```\n\nFOUR.\n\nI use sage-4.2 and I have problem to docbuild a branch of sage. It docbuilds the sage main branch, so I am not able to test if there are no Sphinx warnings and if everythings looks good on the html doc. I am waiting sage-4.3 to come out to test your patch on it and see the doc.\n\nFIVE.\n\nI changed a little bit the `_repr_` of Interval exchange transformation. See the patch attached. Hope you agree.",
    "created_at": "2009-12-24T12:54:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7145#issuecomment-52962",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:8'>**Comment 8:**</a>
Dear Vincent,

Thanks for doing all those changes.

I am now looking at your recent patch and I have a few more comments. I am sorry I was not able to tell them before. I will try now to make a complete review with all my (hopefully) final remarks. After those FIVE remarks answered, I think we will be very near of a positive review!

Sébastien

ONE.

> The resason is because it's possible to change the alphabet 
> sage: p = PermutationIET('a b c','c b a') 
> sage: p a b c c b a 
> sage: p.alphabet = [1,2,3] 
> sage: p 1 2 3 3 2 1 
> sage: p.alphabet = 'cd' 
> ... 
> ValueError?: Your alphabet has not enough letters 

I am not sure this is a good reason for using an attribute instead of a method. See the following example :

```
sage: g = Graph()
sage: p = g.plot()
sage: p.xmin()
-1.0
sage: p.xmin(-2)
sage: p.xmin()
-2.0
```

TWO.

The documentation and doctest coverage is very good (96%) but not perfect :

```
slabbe@pol:~/sage-4.2/devel/sage-combinat/sage/combinat/iet$ sage -coverage .
constructors.py: 75% (6 of 8)
iet.py: 100% (23 of 23)
labelled.py: 95% (57 of 60)
reduced.py: 100% (55 of 55)
strata.py: 100% (39 of 39)
template.py: 96% (89 of 92)

Overall weighted coverage score:  96.9%
Total number of functions:  277
We need    5 more function to get to 99% coverage.
```

Moreover, `sage -coverage *` tells many `function name doesn't occur in doctests`. Maybe you could add `#indirect doctest` in doctests that are indirect.

While you are at it, you may consider to add some INPUT and OUTPUT where there are missing. See the discussion [sage-devel: input and output in docstrings](http://groups.google.com/group/sage-devel/browse_thread/thread/7d529c646c685877/3f7678e55f60759f?hl=en&lnk=gst&q=coverage#3f7678e55f60759f)

THREE.

I am getting 2 doctests failures :

```
sage -t  "devel/sage-combinat/sage/combinat/iet/constructors.py"
**********************************************************************
File "/home/slabbe/sage-4.2/devel/sage-combinat/sage/combinat/iet/constructors.py", line 531:
    sage: for p in P: print p, "* *\n"
Expected:
    a b
    b a
    * *
Got:
    a b
    b a * *
    <BLANKLINE>
    b a
    a b * *
    <BLANKLINE>
**********************************************************************
File "/home/slabbe/sage-4.2/devel/sage-combinat/sage/combinat/iet/constructors.py", line 536:
    sage: for p in P: print p, "\* * *\n"
Expected:
    a b c
    c b a
    * * *
Got:
    a b c
    b c a \* * *
    <BLANKLINE>
    a b c
    c a b \* * *
    <BLANKLINE>
    a b c
    c b a \* * *
    <BLANKLINE>
    a c b
    b a c \* * *
    <BLANKLINE>
    a c b
    b c a \* * *
    <BLANKLINE>
    a c b
    c b a \* * *
    <BLANKLINE>
    b a c
    a c b \* * *
    <BLANKLINE>
    b a c
    c a b \* * *
    <BLANKLINE>
    b a c
    c b a \* * *
    <BLANKLINE>
    b c a
    a b c \* * *
    <BLANKLINE>
    b c a
    a c b \* * *
    <BLANKLINE>
    b c a
    c a b \* * *
    <BLANKLINE>
    c a b
    a b c \* * *
    <BLANKLINE>
    c a b
    b a c \* * *
    <BLANKLINE>
    c a b
    b c a \* * *
    <BLANKLINE>
    c b a
    a b c \* * *
    <BLANKLINE>
    c b a
    a c b \* * *
    <BLANKLINE>
    c b a
    b a c \* * *
    <BLANKLINE>
**********************************************************************
1 items had failures:
   2 of   6 in __main__.example_4
***Test Failed*** 2 failures.
For whitespace errors, see the file /home/slabbe/.sage//tmp/.doctest_constructors.py
	 [3.0 s]
exit code: 1024
```

FOUR.

I use sage-4.2 and I have problem to docbuild a branch of sage. It docbuilds the sage main branch, so I am not able to test if there are no Sphinx warnings and if everythings looks good on the html doc. I am waiting sage-4.3 to come out to test your patch on it and see the doc.

FIVE.

I changed a little bit the `_repr_` of Interval exchange transformation. See the patch attached. Hope you agree.



---

archive/issue_comments_052963.json:
```json
{
    "body": "**Attachment:** [trac_7145-review2-sl.patch.gz](https://github.com/sagemath/sage/files/ticket7145/trac_7145-review2-sl.patch.gz)\n\nApplies over the precedent 3 patches.",
    "created_at": "2009-12-24T12:57:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7145#issuecomment-52963",
    "user": "https://github.com/seblabbe"
}
```

**Attachment:** [trac_7145-review2-sl.patch.gz](https://github.com/sagemath/sage/files/ticket7145/trac_7145-review2-sl.patch.gz)

Applies over the precedent 3 patches.



---

archive/issue_comments_052964.json:
```json
{
    "body": "<a id='comment:9'>**Comment 9:**</a>\nReplying to [@seblabbe](#comment%3A8):\nDear Sebastien,\n\n> \n> Thanks for doing all those changes.\n\n>\n\nThanks for this nice review ! It will be a *very* good patch.\n\n> ONE.\n> \n> > The resason is because it's possible to change the alphabet \n> > sage: p = PermutationIET('a b c','c b a') \n> > sage: p a b c c b a \n> > sage: p.alphabet = [1,2,3] \n> > sage: p 1 2 3 3 2 1 \n> > sage: p.alphabet = 'cd' \n> > ... \n> > ValueError?: Your alphabet has not enough letters \n\n> \n> I am not sure this is a good reason for using an attribute instead of a method. See the following example :\n> \n> ```\n> sage: g = Graph()\n> sage: p = g.plot()\n> sage: p.xmin()\n> -1.0\n> sage: p.xmin(-2)\n> sage: p.xmin()\n> -2.0\n> ```\n\nIt works now as\n\n```\nsage: p = iet.Permutation('a b c','c b a')\nsage: print p\na b c\nc b a\nsage: p.alphabet([1,2,3])\nsage: print p\n1 2 3\n3 2 1\n```\n\n \n> TWO.\n> \n> The documentation and doctest coverage is very good (96%) but not perfect :\n\n>\n\nup to 100% now\n \n> While you are at it, you may consider to add some INPUT and OUTPUT where there are missing. See the discussion [sage-devel: input and output in docstrings](http://groups.google.com/group/sage-devel/browse_thread/thread/7d529c646c685877/3f7678e55f60759f?hl=en&lnk=gst&q=coverage#3f7678e55f60759f)\n\nlot of INPUT/OUTPUT added\n \n> THREE.\n> \n> I am getting 2 doctests failures :\n> \n\ncorrected\n \n> \n> FIVE.\n> \n> I changed a little bit the `_repr_` of Interval exchange transformation. See the patch attached. Hope you agree.\n> \n\nI realy agree. In France, we use the coma instead of points to distinguish the integer part and the decimal that why we use dot comman for intervals... I keep it for the french translation ;-)",
    "created_at": "2009-12-29T10:55:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7145#issuecomment-52964",
    "user": "https://github.com/videlec"
}
```

<a id='comment:9'>**Comment 9:**</a>
Replying to [@seblabbe](#comment%3A8):
Dear Sebastien,

> 
> Thanks for doing all those changes.

>

Thanks for this nice review ! It will be a *very* good patch.

> ONE.
> 
> > The resason is because it's possible to change the alphabet 
> > sage: p = PermutationIET('a b c','c b a') 
> > sage: p a b c c b a 
> > sage: p.alphabet = [1,2,3] 
> > sage: p 1 2 3 3 2 1 
> > sage: p.alphabet = 'cd' 
> > ... 
> > ValueError?: Your alphabet has not enough letters 

> 
> I am not sure this is a good reason for using an attribute instead of a method. See the following example :
> 
> ```
> sage: g = Graph()
> sage: p = g.plot()
> sage: p.xmin()
> -1.0
> sage: p.xmin(-2)
> sage: p.xmin()
> -2.0
> ```

It works now as

```
sage: p = iet.Permutation('a b c','c b a')
sage: print p
a b c
c b a
sage: p.alphabet([1,2,3])
sage: print p
1 2 3
3 2 1
```

 
> TWO.
> 
> The documentation and doctest coverage is very good (96%) but not perfect :

>

up to 100% now
 
> While you are at it, you may consider to add some INPUT and OUTPUT where there are missing. See the discussion [sage-devel: input and output in docstrings](http://groups.google.com/group/sage-devel/browse_thread/thread/7d529c646c685877/3f7678e55f60759f?hl=en&lnk=gst&q=coverage#3f7678e55f60759f)

lot of INPUT/OUTPUT added
 
> THREE.
> 
> I am getting 2 doctests failures :
> 

corrected
 
> 
> FIVE.
> 
> I changed a little bit the `_repr_` of Interval exchange transformation. See the patch attached. Hope you agree.
> 

I realy agree. In France, we use the coma instead of points to distinguish the integer part and the decimal that why we use dot comman for intervals... I keep it for the french translation ;-)



---

archive/issue_events_072533.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2009-12-29T10:55:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7145#event-72533"
}
```



---

archive/issue_events_072534.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2009-12-29T10:55:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7145#event-72534"
}
```



---

archive/issue_comments_052965.json:
```json
{
    "body": "Applies over the 4 precedings",
    "created_at": "2009-12-29T10:56:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7145#issuecomment-52965",
    "user": "https://github.com/videlec"
}
```

Applies over the 4 precedings



---

archive/issue_comments_052966.json:
```json
{
    "body": "**Reviewer:** Sebastien Labbe",
    "created_at": "2010-01-06T15:09:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7145#issuecomment-52966",
    "user": "https://github.com/seblabbe"
}
```

**Reviewer:** Sebastien Labbe



---

archive/issue_comments_052967.json:
```json
{
    "body": "<a id='comment:10'>**Comment 10:**</a>\n**Attachment:** [trac_7145-corrections2-vd.patch.gz](https://github.com/sagemath/sage/files/ticket7145/trac_7145-corrections2-vd.patch.gz)\n\nGreat. Point ONE above was addressed. The documentation coverage is now 100% perfect. All tests passed. \n\nI builded the documentation and there was several sphinx issues. I corrected them in a patch that I will upload shortly.",
    "created_at": "2010-01-06T15:09:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7145#issuecomment-52967",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:10'>**Comment 10:**</a>
**Attachment:** [trac_7145-corrections2-vd.patch.gz](https://github.com/sagemath/sage/files/ticket7145/trac_7145-corrections2-vd.patch.gz)

Great. Point ONE above was addressed. The documentation coverage is now 100% perfect. All tests passed. 

I builded the documentation and there was several sphinx issues. I corrected them in a patch that I will upload shortly.



---

archive/issue_comments_052968.json:
```json
{
    "body": "**Attachment:** [trac_7145-review3-sl.patch.gz](https://github.com/sagemath/sage/files/ticket7145/trac_7145-review3-sl.patch.gz)\n\nApplies over all the precedent patches.",
    "created_at": "2010-01-06T15:37:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7145#issuecomment-52968",
    "user": "https://github.com/seblabbe"
}
```

**Attachment:** [trac_7145-review3-sl.patch.gz](https://github.com/sagemath/sage/files/ticket7145/trac_7145-review3-sl.patch.gz)

Applies over all the precedent patches.



---

archive/issue_comments_052969.json:
```json
{
    "body": "<a id='comment:11'>**Comment 11:**</a>\nVincent, can you review my last patch and make sure everything is OK with the sphinx output? My patch solved some sphinx syntax, but I feel like more improvements could be done.",
    "created_at": "2010-01-06T15:43:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7145#issuecomment-52969",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:11'>**Comment 11:**</a>
Vincent, can you review my last patch and make sure everything is OK with the sphinx output? My patch solved some sphinx syntax, but I feel like more improvements could be done.



---

archive/issue_comments_052970.json:
```json
{
    "body": "<a id='comment:12'>**Comment 12:**</a>\nHi,\n\n> Vincent, can you review my last patch and make sure everything is OK with the sphinx output? My patch solved some sphinx syntax, but I feel like more improvements could be done.\n\nI'm not sure about what you did with the OUTPUT part of the documentation string. It does not correspond to what is written in the \"developer's guide\"\n\n```\nOUTPUT:\n\n    integer -- the ...\n```\n\nWhat do I do for this ?\n\nI will make a complete review of the documentation after the answer.",
    "created_at": "2010-01-08T00:00:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7145#issuecomment-52970",
    "user": "https://github.com/videlec"
}
```

<a id='comment:12'>**Comment 12:**</a>
Hi,

> Vincent, can you review my last patch and make sure everything is OK with the sphinx output? My patch solved some sphinx syntax, but I feel like more improvements could be done.

I'm not sure about what you did with the OUTPUT part of the documentation string. It does not correspond to what is written in the "developer's guide"

```
OUTPUT:

    integer -- the ...
```

What do I do for this ?

I will make a complete review of the documentation after the answer.



---

archive/issue_comments_052971.json:
```json
{
    "body": "<a id='comment:13'>**Comment 13:**</a>\n> I'm not sure about what you did with the OUTPUT part of the documentation string. It does not correspond to what is written in the \"developer's guide\"\n\nMy fault. In fact, I should update the way I write the OUTPUT part. I will take a closer look to the developer's guide. Feel free to change those.",
    "created_at": "2010-01-08T15:06:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7145#issuecomment-52971",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:13'>**Comment 13:**</a>
> I'm not sure about what you did with the OUTPUT part of the documentation string. It does not correspond to what is written in the "developer's guide"

My fault. In fact, I should update the way I write the OUTPUT part. I will take a closer look to the developer's guide. Feel free to change those.



---

archive/issue_comments_052972.json:
```json
{
    "body": "<a id='comment:14'>**Comment 14:**</a>\nI made a complete review of the doc. There is no warning when building the documentation and there is INPUT and OUTPUT fields where there are needed.\n\nI replace your patch trac_7145-review3-sl.patch with my trac-7145-documentation-review-vd.patch (because I find it more natural to erase the OUTPUT field modification than modify it back).\n\nI also made little modifications on default argument on some method (.flips() and .list() of FlippedPermutation) and a change of name (.rauzy_1n() becomes .cylindric()). The latter is due to a forthcoming paper.",
    "created_at": "2010-01-09T18:56:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7145#issuecomment-52972",
    "user": "https://github.com/videlec"
}
```

<a id='comment:14'>**Comment 14:**</a>
I made a complete review of the doc. There is no warning when building the documentation and there is INPUT and OUTPUT fields where there are needed.

I replace your patch trac_7145-review3-sl.patch with my trac-7145-documentation-review-vd.patch (because I find it more natural to erase the OUTPUT field modification than modify it back).

I also made little modifications on default argument on some method (.flips() and .list() of FlippedPermutation) and a change of name (.rauzy_1n() becomes .cylindric()). The latter is due to a forthcoming paper.



---

archive/issue_comments_052973.json:
```json
{
    "body": "**Attachment:** [trac_7145-documentation-review-vd.patch.gz](https://github.com/sagemath/sage/files/ticket7145/trac_7145-documentation-review-vd.patch.gz)\n\napplies over (trac_7145-iet-vd.patch, trac_7145-review-sl.patch, trac_7145-corrections-vd.patch, trac_7145-review2-sl ,trac_7145-corrections2-vd.patch)",
    "created_at": "2010-01-09T19:00:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7145#issuecomment-52973",
    "user": "https://github.com/videlec"
}
```

**Attachment:** [trac_7145-documentation-review-vd.patch.gz](https://github.com/sagemath/sage/files/ticket7145/trac_7145-documentation-review-vd.patch.gz)

applies over (trac_7145-iet-vd.patch, trac_7145-review-sl.patch, trac_7145-corrections-vd.patch, trac_7145-review2-sl ,trac_7145-corrections2-vd.patch)



---

archive/issue_comments_052974.json:
```json
{
    "body": "**Attachment:** [trac_7145-documentation-review-vd.2.patch.gz](https://github.com/sagemath/sage/files/ticket7145/trac_7145-documentation-review-vd.2.patch.gz)\n\napplies over (trac_7145-iet-vd.patch, trac_7145-review-sl.patch, trac_7145-corrections-vd.patch, trac_7145-review2-sl ,trac_7145-corrections2-vd.patch)",
    "created_at": "2010-01-09T19:00:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7145#issuecomment-52974",
    "user": "https://github.com/videlec"
}
```

**Attachment:** [trac_7145-documentation-review-vd.2.patch.gz](https://github.com/sagemath/sage/files/ticket7145/trac_7145-documentation-review-vd.2.patch.gz)

applies over (trac_7145-iet-vd.patch, trac_7145-review-sl.patch, trac_7145-corrections-vd.patch, trac_7145-review2-sl ,trac_7145-corrections2-vd.patch)



---

archive/issue_comments_052975.json:
```json
{
    "body": "**Attachment:** [trac_7145-iet-final.patch.gz](https://github.com/sagemath/sage/files/ticket7145/trac_7145-iet-final.patch.gz)\n\nApply only this one.",
    "created_at": "2010-01-13T17:54:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7145#issuecomment-52975",
    "user": "https://github.com/seblabbe"
}
```

**Attachment:** [trac_7145-iet-final.patch.gz](https://github.com/sagemath/sage/files/ticket7145/trac_7145-iet-final.patch.gz)

Apply only this one.



---

archive/issue_events_072535.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2010-01-13T17:59:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7145#event-72535"
}
```



---

archive/issue_events_072536.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2010-01-13T17:59:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7145#event-72536"
}
```



---

archive/issue_comments_052976.json:
```json
{
    "body": "<a id='comment:15'>**Comment 15:**</a>\nI folded the relevant patches together : trac_7145-iet-final.patch .\n\nPositive review.",
    "created_at": "2010-01-13T17:59:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7145#issuecomment-52976",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:15'>**Comment 15:**</a>
I folded the relevant patches together : trac_7145-iet-final.patch .

Positive review.



---

archive/issue_comments_052977.json:
```json
{
    "body": "<a id='comment:16'>**Comment 16:**</a>\n> Positive review.\n\nI just want to add that I tested it on a fresh Sage-4.3.",
    "created_at": "2010-01-13T18:01:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7145#issuecomment-52977",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:16'>**Comment 16:**</a>
> Positive review.

I just want to add that I tested it on a fresh Sage-4.3.



---

archive/issue_events_072537.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-01-14T07:01:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7145#event-72537"
}
```



---

archive/issue_events_072538.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-01-14T07:01:05Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7145#event-72538"
}
```



---

archive/issue_comments_052978.json:
```json
{
    "body": "**Merged:** sage-4.3.1.rc0",
    "created_at": "2010-01-14T07:01:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7145",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7145#issuecomment-52978",
    "user": "https://github.com/rlmill"
}
```

**Merged:** sage-4.3.1.rc0
