# Issue 7709: Graph constructor : Graph(edges=[ ... ] )

archive/issues_007709.json:
```json
{
    "assignees": [
        "https://github.com/rlmill"
    ],
    "body": "I often need to create graphs defined by a set of edges, and it should not be hard to add a new constructor of this shape :\n\n```\ng = Graph(edges=[ ... ] )\n```\n\nNathann\n\nCC:  @nthiery @rlmill\n\nComponent: **graph theory**\n\nAuthor: **Nathann Cohen**\n\nReviewer: **Robert Miller**\n\nMerged: **sage-4.6.1.alpha1**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/7709_\n\n",
    "closed_at": "2010-11-11T13:01:50Z",
    "created_at": "2009-12-16T11:55:26Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.6.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Graph constructor : Graph(edges=[ ... ] )",
    "type": "issue",
    "updated_at": "2010-11-11T13:01:50Z",
    "url": "https://github.com/sagemath/sage/issues/7709",
    "user": "https://github.com/nathanncohen"
}
```
I often need to create graphs defined by a set of edges, and it should not be hard to add a new constructor of this shape :

```
g = Graph(edges=[ ... ] )
```

Nathann

CC:  @nthiery @rlmill

Component: **graph theory**

Author: **Nathann Cohen**

Reviewer: **Robert Miller**

Merged: **sage-4.6.1.alpha1**

_Issue created by migration from https://trac.sagemath.org/ticket/7709_





---

archive/issue_events_095182.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2009-12-16T11:55:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "milestone_number": null,
    "milestone_title": "sage-4.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7709#event-95182"
}
```



---

archive/issue_events_095183.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2009-12-16T11:55:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7709#event-95183"
}
```



---

archive/issue_events_095184.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2009-12-16T11:55:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7709#event-95184"
}
```



---

archive/issue_events_095185.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2009-12-16T11:55:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7709#event-95185"
}
```



---

archive/issue_events_095186.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2009-12-16T11:55:26Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "subject": "https://github.com/nathanncohen",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7709#event-95186"
}
```



---

archive/issue_events_095187.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2009-12-16T11:55:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "milestone_number": null,
    "milestone_title": "sage-4.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7709#event-95187"
}
```



---

archive/issue_events_095188.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2009-12-16T11:55:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "milestone_number": null,
    "milestone_title": "sage-4.3.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7709#event-95188"
}
```



---

archive/issue_events_095189.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-06-06T11:00:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7709#event-95189"
}
```



---

archive/issue_comments_057829.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nHere is a patch to update graph.py. I have been sitting a while, trying to find a efficient way to write this, and found none, so I ended up converting it all to a dict_of_lists of dict_of_dicts... As it took some time to write, I would gladly ask for your advice before rewriting it all for digraphs.py (if you agree). Otherwise, let's try to find a better solution together :-)\n\nNathann",
    "created_at": "2010-08-02T11:10:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7709#issuecomment-57829",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:4" align="right">comment:4</div>

Here is a patch to update graph.py. I have been sitting a while, trying to find a efficient way to write this, and found none, so I ended up converting it all to a dict_of_lists of dict_of_dicts... As it took some time to write, I would gladly ask for your advice before rewriting it all for digraphs.py (if you agree). Otherwise, let's try to find a better solution together :-)

Nathann



---

archive/issue_events_095190.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-08-02T11:10:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7709#event-95190"
}
```



---

archive/issue_events_095191.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-08-02T11:10:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7709#event-95191"
}
```



---

archive/issue_comments_057830.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nOh, by the way... This is no a new feature, as it was already possible to create a Graph by giving as an argument a list of edges, but until now it was forwarded to NetworkX..\n\nNathann",
    "created_at": "2010-08-02T11:11:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7709#issuecomment-57830",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:5" align="right">comment:5</div>

Oh, by the way... This is no a new feature, as it was already possible to create a Graph by giving as an argument a list of edges, but until now it was forwarded to NetworkX..

Nathann



---

archive/issue_comments_057831.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI think `data.setdefault(u, [])` instead of `if not u in data: data[u] = []` could make it a litte bit faster  ;-)",
    "created_at": "2010-08-02T12:13:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7709#issuecomment-57831",
    "user": "https://github.com/haraldschilly"
}
```

<div id="comment:6" align="right">comment:6</div>

I think `data.setdefault(u, [])` instead of `if not u in data: data[u] = []` could make it a litte bit faster  ;-)



---

archive/issue_comments_057832.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nActually, I wondered... Faster to write, of course, but do you think it is also more efficient ? I had no idea, so I stuck to the most basic tools :-)\n\nNathann",
    "created_at": "2010-08-02T14:42:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7709#issuecomment-57832",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:7" align="right">comment:7</div>

Actually, I wondered... Faster to write, of course, but do you think it is also more efficient ? I had no idea, so I stuck to the most basic tools :-)

Nathann



---

archive/issue_comments_057833.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nsorry, forget my comment, data.setdefault(...[]).append(u) is slower than your solution.",
    "created_at": "2010-08-02T16:22:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7709#issuecomment-57833",
    "user": "https://github.com/haraldschilly"
}
```

<div id="comment:8" align="right">comment:8</div>

sorry, forget my comment, data.setdefault(...[]).append(u) is slower than your solution.



---

archive/issue_comments_057834.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI would change the ValueError message to something much shorter and more comprehensive, such as \"Edges input must all be of the same format\" or length or something...",
    "created_at": "2010-08-04T01:59:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7709#issuecomment-57834",
    "user": "https://github.com/rlmill"
}
```

<div id="comment:9" align="right">comment:9</div>

I would change the ValueError message to something much shorter and more comprehensive, such as "Edges input must all be of the same format" or length or something...



---

archive/issue_comments_057835.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@rlmill](#comment:9):\n> I would change the ValueError message to something much shorter and more comprehensive, such as \"Edges input must all be of the same format\" or length or something...\n\nAlso, the doctests don't expose this error.",
    "created_at": "2010-08-04T01:59:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7709#issuecomment-57835",
    "user": "https://github.com/rlmill"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@rlmill](#comment:9):
> I would change the ValueError message to something much shorter and more comprehensive, such as "Edges input must all be of the same format" or length or something...

Also, the doctests don't expose this error.



---

archive/issue_comments_057836.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI just updated the ticket to fix it ! Do you think this method is acceptable and I can now do the same for DiGraphs ?\n\nNathann",
    "created_at": "2010-08-04T03:30:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7709#issuecomment-57836",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:11" align="right">comment:11</div>

I just updated the ticket to fix it ! Do you think this method is acceptable and I can now do the same for DiGraphs ?

Nathann



---

archive/issue_comments_057837.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@nathanncohen](#comment:11):\n> I just updated the ticket to fix it ! Do you think this method is acceptable and I can now do the same for DiGraphs ?\n\nNathann,\n\nThis looks good (maybe in the multiedges=False test you can show the list of edges afterward to demonstrate what actually happens). Please implement this in the DiGraph case as well!",
    "created_at": "2010-08-06T14:39:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7709#issuecomment-57837",
    "user": "https://github.com/rlmill"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@nathanncohen](#comment:11):
> I just updated the ticket to fix it ! Do you think this method is acceptable and I can now do the same for DiGraphs ?

Nathann,

This looks good (maybe in the multiedges=False test you can show the list of edges afterward to demonstrate what actually happens). Please implement this in the DiGraph case as well!



---

archive/issue_comments_057838.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nHere it is ! Actually, the constructor raises an exception when the same edge receives different labels with multiedges = False. I had forgotten to fill the doctests, as it was just a preview !`:-)`\n\nNathann",
    "created_at": "2010-08-08T11:05:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7709#issuecomment-57838",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:13" align="right">comment:13</div>

Here it is ! Actually, the constructor raises an exception when the same edge receives different labels with multiedges = False. I had forgotten to fill the doctests, as it was just a preview !`:-)`

Nathann



---

archive/issue_events_095192.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-08-08T11:05:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7709#event-95192"
}
```



---

archive/issue_events_095193.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-08-08T11:05:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7709#event-95193"
}
```



---

archive/issue_events_095194.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-11-10T13:53:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7709#event-95194"
}
```



---

archive/issue_events_095195.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-11-10T13:53:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7709#event-95195"
}
```



---

archive/issue_comments_057839.json:
```json
{
    "body": "Author: **Nathann Cohen**",
    "created_at": "2010-11-10T13:53:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7709#issuecomment-57839",
    "user": "https://github.com/rlmill"
}
```

Author: **Nathann Cohen**



---

archive/issue_comments_057840.json:
```json
{
    "body": "Reviewer: **Robert Miller**",
    "created_at": "2010-11-10T13:53:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7709#issuecomment-57840",
    "user": "https://github.com/rlmill"
}
```

Reviewer: **Robert Miller**



---

archive/issue_comments_057841.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nAttachment: **[trac_7709.patch.gz](https://github.com/sagemath/sage/files/ticket7709/trac_7709.patch.gz)**",
    "created_at": "2010-11-10T13:53:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7709#issuecomment-57841",
    "user": "https://github.com/rlmill"
}
```

<div id="comment:14" align="right">comment:14</div>

Attachment: **[trac_7709.patch.gz](https://github.com/sagemath/sage/files/ticket7709/trac_7709.patch.gz)**



---

archive/issue_comments_057842.json:
```json
{
    "body": "Merged: **sage-4.6.1.alpha1**",
    "created_at": "2010-11-11T13:01:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7709#issuecomment-57842",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.6.1.alpha1**



---

archive/issue_events_095196.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-11-11T13:01:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7709#event-95196"
}
```



---

archive/issue_events_095197.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-11-11T13:01:50Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7709#event-95197"
}
```
