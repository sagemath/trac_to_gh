# Issue 7709: Graph constructor : Graph(edges=[ ... ] )

archive/issues_007709.json:
```json
{
    "assignees": [],
    "body": "I often need to create graphs defined by a set of edges, and it should not be hard to add a new constructor of this shape :\n\n```\ng = Graph(edges=[ ... ] )\n```\n\nNathann\n\nAssignee: **@rlmill**\n\nCC:  @nthiery @rlmill\n\nAuthor: **Nathann Cohen**\n\nReviewer: **Robert Miller**\n\nMerged: **sage-4.6.1.alpha1**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/7709_\n\n",
    "closed_at": "2010-11-11T13:01:50Z",
    "created_at": "2009-12-16T11:55:26Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.6.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Graph constructor : Graph(edges=[ ... ] )",
    "type": "issue",
    "updated_at": "2010-11-11T13:01:50Z",
    "url": "https://github.com/sagemath/sage/issues/7709",
    "user": "https://github.com/nathanncohen"
}
```
I often need to create graphs defined by a set of edges, and it should not be hard to add a new constructor of this shape :

```
g = Graph(edges=[ ... ] )
```

Nathann

Assignee: **@rlmill**

CC:  @nthiery @rlmill

Author: **Nathann Cohen**

Reviewer: **Robert Miller**

Merged: **sage-4.6.1.alpha1**

_Issue created by migration from https://trac.sagemath.org/ticket/7709_





---

archive/issue_events_083938.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2009-12-16T11:55:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "milestone_number": null,
    "milestone_title": "sage-4.6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7709#event-83938"
}
```



---

archive/issue_events_083939.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2009-12-16T11:55:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "component: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7709#event-83939"
}
```



---

archive/issue_events_083940.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2009-12-16T11:55:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7709#event-83940"
}
```



---

archive/issue_events_083941.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2009-12-16T11:55:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7709#event-83941"
}
```



---

archive/issue_events_083942.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2009-12-16T11:55:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "milestone_number": null,
    "milestone_title": "sage-4.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7709#event-83942"
}
```



---

archive/issue_events_083943.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2009-12-16T11:55:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "milestone_number": null,
    "milestone_title": "sage-4.3.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7709#event-83943"
}
```



---

archive/issue_events_083944.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-06-06T11:00:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7709#event-83944"
}
```



---

archive/issue_comments_059458.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nHere is a patch to update graph.py. I have been sitting a while, trying to find a efficient way to write this, and found none, so I ended up converting it all to a dict_of_lists of dict_of_dicts... As it took some time to write, I would gladly ask for your advice before rewriting it all for digraphs.py (if you agree). Otherwise, let's try to find a better solution together :-)\n\nNathann",
    "created_at": "2010-08-02T11:10:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7709#issuecomment-59458",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:4'>Comment 4:</a>
Here is a patch to update graph.py. I have been sitting a while, trying to find a efficient way to write this, and found none, so I ended up converting it all to a dict_of_lists of dict_of_dicts... As it took some time to write, I would gladly ask for your advice before rewriting it all for digraphs.py (if you agree). Otherwise, let's try to find a better solution together :-)

Nathann



---

archive/issue_events_083945.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-08-02T11:10:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7709#event-83945"
}
```



---

archive/issue_events_083946.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-08-02T11:10:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7709#event-83946"
}
```



---

archive/issue_comments_059459.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nOh, by the way... This is no a new feature, as it was already possible to create a Graph by giving as an argument a list of edges, but until now it was forwarded to NetworkX..\n\nNathann",
    "created_at": "2010-08-02T11:11:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7709#issuecomment-59459",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:5'>Comment 5:</a>
Oh, by the way... This is no a new feature, as it was already possible to create a Graph by giving as an argument a list of edges, but until now it was forwarded to NetworkX..

Nathann



---

archive/issue_comments_059460.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nI think `data.setdefault(u, [])` instead of `if not u in data: data[u] = []` could make it a litte bit faster  ;-)",
    "created_at": "2010-08-02T12:13:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7709#issuecomment-59460",
    "user": "https://github.com/haraldschilly"
}
```

<a id='comment:6'>Comment 6:</a>
I think `data.setdefault(u, [])` instead of `if not u in data: data[u] = []` could make it a litte bit faster  ;-)



---

archive/issue_comments_059461.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nActually, I wondered... Faster to write, of course, but do you think it is also more efficient ? I had no idea, so I stuck to the most basic tools :-)\n\nNathann",
    "created_at": "2010-08-02T14:42:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7709#issuecomment-59461",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:7'>Comment 7:</a>
Actually, I wondered... Faster to write, of course, but do you think it is also more efficient ? I had no idea, so I stuck to the most basic tools :-)

Nathann



---

archive/issue_comments_059462.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nsorry, forget my comment, data.setdefault(...[]).append(u) is slower than your solution.",
    "created_at": "2010-08-02T16:22:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7709#issuecomment-59462",
    "user": "https://github.com/haraldschilly"
}
```

<a id='comment:8'>Comment 8:</a>
sorry, forget my comment, data.setdefault(...[]).append(u) is slower than your solution.



---

archive/issue_comments_059463.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nI would change the ValueError message to something much shorter and more comprehensive, such as \"Edges input must all be of the same format\" or length or something...",
    "created_at": "2010-08-04T01:59:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7709#issuecomment-59463",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:9'>Comment 9:</a>
I would change the ValueError message to something much shorter and more comprehensive, such as "Edges input must all be of the same format" or length or something...



---

archive/issue_comments_059464.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nReplying to [@rlmill](#comment%3A9):\n> I would change the ValueError message to something much shorter and more comprehensive, such as \"Edges input must all be of the same format\" or length or something...\n\nAlso, the doctests don't expose this error.",
    "created_at": "2010-08-04T01:59:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7709#issuecomment-59464",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:10'>Comment 10:</a>
Replying to [@rlmill](#comment%3A9):
> I would change the ValueError message to something much shorter and more comprehensive, such as "Edges input must all be of the same format" or length or something...

Also, the doctests don't expose this error.



---

archive/issue_comments_059465.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nI just updated the ticket to fix it ! Do you think this method is acceptable and I can now do the same for DiGraphs ?\n\nNathann",
    "created_at": "2010-08-04T03:30:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7709#issuecomment-59465",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:11'>Comment 11:</a>
I just updated the ticket to fix it ! Do you think this method is acceptable and I can now do the same for DiGraphs ?

Nathann



---

archive/issue_comments_059466.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nReplying to [@nathanncohen](#comment%3A11):\n> I just updated the ticket to fix it ! Do you think this method is acceptable and I can now do the same for DiGraphs ?\n\nNathann,\n\nThis looks good (maybe in the multiedges=False test you can show the list of edges afterward to demonstrate what actually happens). Please implement this in the DiGraph case as well!",
    "created_at": "2010-08-06T14:39:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7709#issuecomment-59466",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:12'>Comment 12:</a>
Replying to [@nathanncohen](#comment%3A11):
> I just updated the ticket to fix it ! Do you think this method is acceptable and I can now do the same for DiGraphs ?

Nathann,

This looks good (maybe in the multiedges=False test you can show the list of edges afterward to demonstrate what actually happens). Please implement this in the DiGraph case as well!



---

archive/issue_comments_059467.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nHere it is ! Actually, the constructor raises an exception when the same edge receives different labels with multiedges = False. I had forgotten to fill the doctests, as it was just a preview !`:-)`\n\nNathann",
    "created_at": "2010-08-08T11:05:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7709#issuecomment-59467",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:13'>Comment 13:</a>
Here it is ! Actually, the constructor raises an exception when the same edge receives different labels with multiedges = False. I had forgotten to fill the doctests, as it was just a preview !`:-)`

Nathann



---

archive/issue_events_083947.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-08-08T11:05:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7709#event-83947"
}
```



---

archive/issue_events_083948.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-08-08T11:05:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7709#event-83948"
}
```



---

archive/issue_events_083949.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-11-10T13:53:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7709#event-83949"
}
```



---

archive/issue_events_083950.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-11-10T13:53:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7709#event-83950"
}
```



---

archive/issue_comments_059468.json:
```json
{
    "body": "Author: **Nathann Cohen**",
    "created_at": "2010-11-10T13:53:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7709#issuecomment-59468",
    "user": "https://github.com/rlmill"
}
```

Author: **Nathann Cohen**



---

archive/issue_comments_059469.json:
```json
{
    "body": "Reviewer: **Robert Miller**",
    "created_at": "2010-11-10T13:53:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7709#issuecomment-59469",
    "user": "https://github.com/rlmill"
}
```

Reviewer: **Robert Miller**



---

archive/issue_comments_059470.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nAttachment: **[trac_7709.patch.gz](https://github.com/sagemath/sage/files/ticket7709/trac_7709.patch.gz)**",
    "created_at": "2010-11-10T13:53:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7709#issuecomment-59470",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:14'>Comment 14:</a>
Attachment: **[trac_7709.patch.gz](https://github.com/sagemath/sage/files/ticket7709/trac_7709.patch.gz)**



---

archive/issue_comments_059471.json:
```json
{
    "body": "Merged: **sage-4.6.1.alpha1**",
    "created_at": "2010-11-11T13:01:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7709#issuecomment-59471",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.6.1.alpha1**



---

archive/issue_events_083951.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-11-11T13:01:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7709#event-83951"
}
```



---

archive/issue_events_083952.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-11-11T13:01:50Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/7709",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7709#event-83952"
}
```
