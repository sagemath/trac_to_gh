# Issue 7288: Gomory-Hu Trees

archive/issues_007288.json:
```json
{
    "assignees": [
        "https://github.com/rlmill"
    ],
    "body": "See http://en.wikipedia.org/wiki/Gomory%E2%80%93Hu_tree. (which explains the algorithm used)\n\nGomory-Hu trees are a classical decomposition of the edge connectivity of graphs, and this is not very long to write when one has a function for min-st-cut.\n\nThis patch also slightly improves edge_cut and vertex_cut, which was needed to implement gomory_hu_tree\n\nNote : until #7311 is reviewed and merged, some exceptions will be raised when testing the file generic_graph\n\nNathann\n\nCC:  @sagetrac-abmasse\n\nComponent: **graph theory**\n\nAuthor: **Nathann Cohen**\n\nReviewer: **Alexandre Blondin Mass\u00e9**\n\nMerged: **sage-4.4.alpha0**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/7288_\n\n",
    "closed_at": "2010-04-15T05:58:32Z",
    "created_at": "2009-10-25T09:14:14Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Gomory-Hu Trees",
    "type": "issue",
    "updated_at": "2010-04-15T05:58:32Z",
    "url": "https://github.com/sagemath/sage/issues/7288",
    "user": "https://github.com/nathanncohen"
}
```
See http://en.wikipedia.org/wiki/Gomory%E2%80%93Hu_tree. (which explains the algorithm used)

Gomory-Hu trees are a classical decomposition of the edge connectivity of graphs, and this is not very long to write when one has a function for min-st-cut.

This patch also slightly improves edge_cut and vertex_cut, which was needed to implement gomory_hu_tree

Note : until #7311 is reviewed and merged, some exceptions will be raised when testing the file generic_graph

Nathann

CC:  @sagetrac-abmasse

Component: **graph theory**

Author: **Nathann Cohen**

Reviewer: **Alexandre Blondin Mass√©**

Merged: **sage-4.4.alpha0**

_Issue created by migration from https://trac.sagemath.org/ticket/7288_





---

archive/issue_events_088185.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2009-10-25T09:14:14Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "milestone_number": null,
    "milestone_title": "sage-4.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7288#event-88185"
}
```



---

archive/issue_events_088186.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2009-10-25T09:14:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7288#event-88186"
}
```



---

archive/issue_events_088187.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2009-10-25T09:14:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7288#event-88187"
}
```



---

archive/issue_events_088188.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2009-10-25T09:14:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7288#event-88188"
}
```



---

archive/issue_events_088189.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2009-10-25T09:14:14Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "subject": "https://github.com/nathanncohen",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7288#event-88189"
}
```



---

archive/issue_events_088190.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-01-19T08:29:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7288#event-88190"
}
```



---

archive/issue_comments_052655.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n-See http://en.wikipedia.org/wiki/Gomory%E2%80%93Hu_tree.\n+See http://en.wikipedia.org/wiki/Gomory%E2%80%93Hu_tree. (which explains the algorithm used)\n \n-Gomory-Hu tree are a classical decomposition of the edge connectivity of graphs, and this is not very long to write when one has a function for min-st-cut, which should hopefully be merged soon (ticket #6680)...\n+Gomory-Hu trees are a classical decomposition of the edge connectivity of graphs, and this is not very long to write when one has a function for min-st-cut.\n \n Nathann\n``````\n",
    "created_at": "2010-01-19T08:29:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7288#issuecomment-52655",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
-See http://en.wikipedia.org/wiki/Gomory%E2%80%93Hu_tree.
+See http://en.wikipedia.org/wiki/Gomory%E2%80%93Hu_tree. (which explains the algorithm used)
 
-Gomory-Hu tree are a classical decomposition of the edge connectivity of graphs, and this is not very long to write when one has a function for min-st-cut, which should hopefully be merged soon (ticket #6680)...
+Gomory-Hu trees are a classical decomposition of the edge connectivity of graphs, and this is not very long to write when one has a function for min-st-cut.
 
 Nathann
``````




---

archive/issue_comments_052656.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nHere it is ! :-)",
    "created_at": "2010-01-19T08:29:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7288#issuecomment-52656",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:1" align="right">comment:1</div>

Here it is ! :-)



---

archive/issue_comments_052657.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,6 @@\n \n Gomory-Hu trees are a classical decomposition of the edge connectivity of graphs, and this is not very long to write when one has a function for min-st-cut.\n \n+This patch also slightly improves edge_cut and vertex_cut, which was needed to implement gomory_hu_tree\n+\n Nathann\n``````\n",
    "created_at": "2010-01-19T08:30:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7288#issuecomment-52657",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,6 @@
 
 Gomory-Hu trees are a classical decomposition of the edge connectivity of graphs, and this is not very long to write when one has a function for min-st-cut.
 
+This patch also slightly improves edge_cut and vertex_cut, which was needed to implement gomory_hu_tree
+
 Nathann
``````




---

archive/issue_comments_052658.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nAfter a few comments from Alexandre... Thanks ! ;-)\n\nNathann",
    "created_at": "2010-02-23T16:31:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7288#issuecomment-52658",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:3" align="right">comment:3</div>

After a few comments from Alexandre... Thanks ! ;-)

Nathann



---

archive/issue_comments_052659.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nNathann, there is something really weird: the patch I see with trac is not the same as the one I download. Maybe the server is down ? Could you upload it again just to be sure ? Thanks.",
    "created_at": "2010-02-23T17:44:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7288#issuecomment-52659",
    "user": "https://github.com/sagetrac-abmasse"
}
```

<div id="comment:4" align="right">comment:4</div>

Nathann, there is something really weird: the patch I see with trac is not the same as the one I download. Maybe the server is down ? Could you upload it again just to be sure ? Thanks.



---

archive/issue_comments_052660.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nNever mind, Firefox wasn't refreshing the page properly.",
    "created_at": "2010-02-23T20:33:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7288#issuecomment-52660",
    "user": "https://github.com/sagetrac-abmasse"
}
```

<div id="comment:6" align="right">comment:6</div>

Never mind, Firefox wasn't refreshing the page properly.



---

archive/issue_comments_052661.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nHello again !\nI tested your patch with ``sage -t generic_graph.py graph.py`` and it works ok, but when I type ``sage -t -optional generic_graph.py graph.py``, I get the following:\n\n```\n[~/Applications/sage/devel/sage-t7288/sage/graphs]$ sage -t generic_graph.py graph.py\nsage -t  \"devel/sage-t7288/sage/graphs/generic_graph.py\"    \n\t [35.4 s]\nsage -t  \"devel/sage-t7288/sage/graphs/graph.py\"            \n\t [14.9 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 50.3 seconds\n[~/Applications/sage/devel/sage-t7288/sage/graphs]$ sage -t -optional generic_graph.py graph.py\nsage -t -optional \"devel/sage-t7288/sage/graphs/generic_graph.py\"\n1 variables fixed\n1 variables fixed\n1 variables fixed\n1 variables fixed\n3 variables fixed\n3 variables fixed\n3 variables fixed\n**********************************************************************\nFile \"/Users/alexandre/Applications/sage/devel/sage-t7288/sage/graphs/generic_graph.py\", line 3795:\n    sage: [cardinal, flow_graph] = g.flow('s','t',integer=True,value_only=False) # optional - requries GLPK or CBC\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/alexandre/Applications/sage/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/Users/alexandre/Applications/sage/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/Users/alexandre/Applications/sage/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_65[9]>\", line 1, in <module>\n        [cardinal, flow_graph] = g.flow('s','t',integer=True,value_only=False) # optional - requries GLPK or CBC###line 3795:\n    sage: [cardinal, flow_graph] = g.flow('s','t',integer=True,value_only=False) # optional - requries GLPK or CBC\n      File \"/Users/alexandre/Applications/sage/local/lib/python/site-packages/sage/graphs/generic_graph.py\", line 3818, in flow\n        p.set_objective(flow_sum(x))\n      File \"mip.pyx\", line 615, in sage.numerical.mip.MixedIntegerLinearProgram.set_objective (sage/numerical/mip.c:5170)\n    AttributeError: 'int' object has no attribute 'f'\n**********************************************************************\nFile \"/Users/alexandre/Applications/sage/devel/sage-t7288/sage/graphs/generic_graph.py\", line 3796:\n    sage: flow_graph.delete_vertices(['s','t'])                                  # optional - requries GLPK or CBC\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/alexandre/Applications/sage/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/Users/alexandre/Applications/sage/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/Users/alexandre/Applications/sage/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_65[10]>\", line 1, in <module>\n        flow_graph.delete_vertices(['s','t'])                                  # optional - requries GLPK or CBC###line 3796:\n    sage: flow_graph.delete_vertices(['s','t'])                                  # optional - requries GLPK or CBC\n    NameError: name 'flow_graph' is not defined\n**********************************************************************\nFile \"/Users/alexandre/Applications/sage/devel/sage-t7288/sage/graphs/generic_graph.py\", line 3797:\n    sage: len(flow_graph.edges(labels=None))                                     # optional - requries GLPK or CBC\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/alexandre/Applications/sage/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/Users/alexandre/Applications/sage/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/Users/alexandre/Applications/sage/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_65[11]>\", line 1, in <module>\n        len(flow_graph.edges(labels=None))                                     # optional - requries GLPK or CBC###line 3797:\n    sage: len(flow_graph.edges(labels=None))                                     # optional - requries GLPK or CBC\n    NameError: name 'flow_graph' is not defined\n**********************************************************************\nFile \"/Users/alexandre/Applications/sage/devel/sage-t7288/sage/graphs/generic_graph.py\", line 3954:\n    sage: g.vertex_disjoint_paths(0,1) # optional - requires GLPK or CBC\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/alexandre/Applications/sage/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/Users/alexandre/Applications/sage/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/Users/alexandre/Applications/sage/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_67[3]>\", line 1, in <module>\n        g.vertex_disjoint_paths(Integer(0),Integer(1)) # optional - requires GLPK or CBC###line 3954:\n    sage: g.vertex_disjoint_paths(0,1) # optional - requires GLPK or CBC\n      File \"/Users/alexandre/Applications/sage/local/lib/python/site-packages/sage/graphs/generic_graph.py\", line 3958, in vertex_disjoint_paths\n        [obj, flow_graph] = self.flow(s,t,value_only=False, integer=True, use_edge_labels=False, vertex_bound=True)\n      File \"/Users/alexandre/Applications/sage/local/lib/python/site-packages/sage/graphs/generic_graph.py\", line 3843, in flow\n        [p.add_constraint([flow[X][v] for X in g[v]],max=1) for v in g if v!=x and v!=y]\n      File \"mip.pyx\", line 670, in sage.numerical.mip.MixedIntegerLinearProgram.add_constraint (sage/numerical/mip.c:5484)\n    AttributeError: 'list' object has no attribute 'f'\n**********************************************************************\n2 items had failures:\n   3 of  12 in __main__.example_65\n   1 of   4 in __main__.example_67\n***Test Failed*** 4 failures.\nFor whitespace errors, see the file /Users/alexandre/.sage//tmp/.doctest_generic_graph.py\n\t [37.8 s]\nsage -t -optional \"devel/sage-t7288/sage/graphs/graph.py\"   \n\t [17.0 s]\n \n----------------------------------------------------------------------\nThe following tests failed:\n```\n\nNote that I installed CBC so this is not an installation problem. I don't really understand where the error comes from. Do you think you could correct it ? As soon as it is done, I'll resume the review.",
    "created_at": "2010-02-23T21:29:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7288#issuecomment-52661",
    "user": "https://github.com/sagetrac-abmasse"
}
```

<div id="comment:7" align="right">comment:7</div>

Hello again !
I tested your patch with ``sage -t generic_graph.py graph.py`` and it works ok, but when I type ``sage -t -optional generic_graph.py graph.py``, I get the following:

```
[~/Applications/sage/devel/sage-t7288/sage/graphs]$ sage -t generic_graph.py graph.py
sage -t  "devel/sage-t7288/sage/graphs/generic_graph.py"    
	 [35.4 s]
sage -t  "devel/sage-t7288/sage/graphs/graph.py"            
	 [14.9 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 50.3 seconds
[~/Applications/sage/devel/sage-t7288/sage/graphs]$ sage -t -optional generic_graph.py graph.py
sage -t -optional "devel/sage-t7288/sage/graphs/generic_graph.py"
1 variables fixed
1 variables fixed
1 variables fixed
1 variables fixed
3 variables fixed
3 variables fixed
3 variables fixed
**********************************************************************
File "/Users/alexandre/Applications/sage/devel/sage-t7288/sage/graphs/generic_graph.py", line 3795:
    sage: [cardinal, flow_graph] = g.flow('s','t',integer=True,value_only=False) # optional - requries GLPK or CBC
Exception raised:
    Traceback (most recent call last):
      File "/Users/alexandre/Applications/sage/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/Users/alexandre/Applications/sage/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/Users/alexandre/Applications/sage/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_65[9]>", line 1, in <module>
        [cardinal, flow_graph] = g.flow('s','t',integer=True,value_only=False) # optional - requries GLPK or CBC###line 3795:
    sage: [cardinal, flow_graph] = g.flow('s','t',integer=True,value_only=False) # optional - requries GLPK or CBC
      File "/Users/alexandre/Applications/sage/local/lib/python/site-packages/sage/graphs/generic_graph.py", line 3818, in flow
        p.set_objective(flow_sum(x))
      File "mip.pyx", line 615, in sage.numerical.mip.MixedIntegerLinearProgram.set_objective (sage/numerical/mip.c:5170)
    AttributeError: 'int' object has no attribute 'f'
**********************************************************************
File "/Users/alexandre/Applications/sage/devel/sage-t7288/sage/graphs/generic_graph.py", line 3796:
    sage: flow_graph.delete_vertices(['s','t'])                                  # optional - requries GLPK or CBC
Exception raised:
    Traceback (most recent call last):
      File "/Users/alexandre/Applications/sage/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/Users/alexandre/Applications/sage/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/Users/alexandre/Applications/sage/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_65[10]>", line 1, in <module>
        flow_graph.delete_vertices(['s','t'])                                  # optional - requries GLPK or CBC###line 3796:
    sage: flow_graph.delete_vertices(['s','t'])                                  # optional - requries GLPK or CBC
    NameError: name 'flow_graph' is not defined
**********************************************************************
File "/Users/alexandre/Applications/sage/devel/sage-t7288/sage/graphs/generic_graph.py", line 3797:
    sage: len(flow_graph.edges(labels=None))                                     # optional - requries GLPK or CBC
Exception raised:
    Traceback (most recent call last):
      File "/Users/alexandre/Applications/sage/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/Users/alexandre/Applications/sage/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/Users/alexandre/Applications/sage/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_65[11]>", line 1, in <module>
        len(flow_graph.edges(labels=None))                                     # optional - requries GLPK or CBC###line 3797:
    sage: len(flow_graph.edges(labels=None))                                     # optional - requries GLPK or CBC
    NameError: name 'flow_graph' is not defined
**********************************************************************
File "/Users/alexandre/Applications/sage/devel/sage-t7288/sage/graphs/generic_graph.py", line 3954:
    sage: g.vertex_disjoint_paths(0,1) # optional - requires GLPK or CBC
Exception raised:
    Traceback (most recent call last):
      File "/Users/alexandre/Applications/sage/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/Users/alexandre/Applications/sage/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/Users/alexandre/Applications/sage/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_67[3]>", line 1, in <module>
        g.vertex_disjoint_paths(Integer(0),Integer(1)) # optional - requires GLPK or CBC###line 3954:
    sage: g.vertex_disjoint_paths(0,1) # optional - requires GLPK or CBC
      File "/Users/alexandre/Applications/sage/local/lib/python/site-packages/sage/graphs/generic_graph.py", line 3958, in vertex_disjoint_paths
        [obj, flow_graph] = self.flow(s,t,value_only=False, integer=True, use_edge_labels=False, vertex_bound=True)
      File "/Users/alexandre/Applications/sage/local/lib/python/site-packages/sage/graphs/generic_graph.py", line 3843, in flow
        [p.add_constraint([flow[X][v] for X in g[v]],max=1) for v in g if v!=x and v!=y]
      File "mip.pyx", line 670, in sage.numerical.mip.MixedIntegerLinearProgram.add_constraint (sage/numerical/mip.c:5484)
    AttributeError: 'list' object has no attribute 'f'
**********************************************************************
2 items had failures:
   3 of  12 in __main__.example_65
   1 of   4 in __main__.example_67
***Test Failed*** 4 failures.
For whitespace errors, see the file /Users/alexandre/.sage//tmp/.doctest_generic_graph.py
	 [37.8 s]
sage -t -optional "devel/sage-t7288/sage/graphs/graph.py"   
	 [17.0 s]
 
----------------------------------------------------------------------
The following tests failed:
```

Note that I installed CBC so this is not an installation problem. I don't really understand where the error comes from. Do you think you could correct it ? As soon as it is done, I'll resume the review.



---

archive/issue_events_088191.json:
```json
{
    "actor": "https://github.com/sagetrac-abmasse",
    "created_at": "2010-02-23T21:29:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7288#event-88191"
}
```



---

archive/issue_events_088192.json:
```json
{
    "actor": "https://github.com/sagetrac-abmasse",
    "created_at": "2010-02-23T21:29:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7288#event-88192"
}
```



---

archive/issue_comments_052662.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI'm really sorry, but these bugs have also been fixed already... It is done in a very important patch, still waiting for review :\n\nhttps://github.com/sagemath/sage/issues/7311\n\nThis can not really be included in the present patch, though... :-/\n\nNathann",
    "created_at": "2010-02-24T15:38:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7288#issuecomment-52662",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:8" align="right">comment:8</div>

I'm really sorry, but these bugs have also been fixed already... It is done in a very important patch, still waiting for review :

https://github.com/sagemath/sage/issues/7311

This can not really be included in the present patch, though... :-/

Nathann



---

archive/issue_comments_052663.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nAlright, so we have to wait for the ticket #7311 to be reviewed. Could you precise in the description of this ticket which other tickets it depends on ? This way, it will be easier to review.",
    "created_at": "2010-02-24T16:17:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7288#issuecomment-52663",
    "user": "https://github.com/sagetrac-abmasse"
}
```

<div id="comment:9" align="right">comment:9</div>

Alright, so we have to wait for the ticket #7311 to be reviewed. Could you precise in the description of this ticket which other tickets it depends on ? This way, it will be easier to review.



---

archive/issue_events_088193.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-02-25T12:31:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7288#event-88193"
}
```



---

archive/issue_events_088194.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-02-25T12:31:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7288#event-88194"
}
```



---

archive/issue_comments_052664.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,4 +4,6 @@\n \n This patch also slightly improves edge_cut and vertex_cut, which was needed to implement gomory_hu_tree\n \n+Note : until #7311 is reviewed and merged, some exceptions will be raised when testing the file generic_graph\n+\n Nathann\n``````\n",
    "created_at": "2010-02-25T12:31:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7288#issuecomment-52664",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,4 +4,6 @@
 
 This patch also slightly improves edge_cut and vertex_cut, which was needed to implement gomory_hu_tree
 
+Note : until #7311 is reviewed and merged, some exceptions will be raised when testing the file generic_graph
+
 Nathann
``````




---

archive/issue_events_088195.json:
```json
{
    "actor": "https://github.com/sagetrac-abmasse",
    "created_at": "2010-03-05T14:53:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7288#event-88195"
}
```



---

archive/issue_events_088196.json:
```json
{
    "actor": "https://github.com/sagetrac-abmasse",
    "created_at": "2010-03-05T14:53:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7288#event-88196"
}
```



---

archive/issue_comments_052665.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nHello, Nathann !\nI looked at your patch and I'm getting more and more used to what it does. I just added a patch that change many different small things in the docstrings and in the code, but these are only formatting changes. I assume you won't agree with all of them (a lot are based on my style of programming, though I tried to respect yours as much as I could ;)) so feel free to put anything back to what it was if you don't agree.\n\nBefore I resume the review, I have some comments/questions on your code.\n\n1. Around line 3109 of the file generic_graph.py, you write\n\n```\n[p.add_constraint(v[x] + b[x][y] - v[y], min=0, max=0) for (x,y) in g.edges(labels=None)]\n```\nMaybe I'm wrong, but it seems it would be more readable and more efficient to simply write a `for` loop doing the same work. It is strange to create a list that you won't use anymore in the function. There are two other lines like this in the functions `vertex_cut` and `vertex_cover`. I understand you do it to save a line, but is it really worth it (maybe it is and you know why !) ?\n\n2. The output of the function `edge_cut` and `vertex_cut` are either real numbers or lists. Wouldn't it be better to return real numbers or tuple instead ? There is no reason to use a list representation and tuples are closer to the mathematical notation.\n\n3. I changed a variable with name `l` by `label` since the letter `l` looks very much like the number `1`.\n\n4. In the Gomory-Hu function, you have a parameter `vertices` that you state is not useful for the user : doesn't it mean you should remove it ? I understand that you need this parameter for recursion purposes, but the user shouldn't see it ! You should create a private function doing all the work and another public one calling the private one with the initial parameter set accordingly.\n\nThat's all for now. The rest seems fine, but I'll pay more attention to it once you've answered. Don't forget to apply my patch on top of yours before making any change !",
    "created_at": "2010-03-05T14:53:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7288#issuecomment-52665",
    "user": "https://github.com/sagetrac-abmasse"
}
```

<div id="comment:11" align="right">comment:11</div>

Hello, Nathann !
I looked at your patch and I'm getting more and more used to what it does. I just added a patch that change many different small things in the docstrings and in the code, but these are only formatting changes. I assume you won't agree with all of them (a lot are based on my style of programming, though I tried to respect yours as much as I could ;)) so feel free to put anything back to what it was if you don't agree.

Before I resume the review, I have some comments/questions on your code.

1. Around line 3109 of the file generic_graph.py, you write

```
[p.add_constraint(v[x] + b[x][y] - v[y], min=0, max=0) for (x,y) in g.edges(labels=None)]
```
Maybe I'm wrong, but it seems it would be more readable and more efficient to simply write a `for` loop doing the same work. It is strange to create a list that you won't use anymore in the function. There are two other lines like this in the functions `vertex_cut` and `vertex_cover`. I understand you do it to save a line, but is it really worth it (maybe it is and you know why !) ?

2. The output of the function `edge_cut` and `vertex_cut` are either real numbers or lists. Wouldn't it be better to return real numbers or tuple instead ? There is no reason to use a list representation and tuples are closer to the mathematical notation.

3. I changed a variable with name `l` by `label` since the letter `l` looks very much like the number `1`.

4. In the Gomory-Hu function, you have a parameter `vertices` that you state is not useful for the user : doesn't it mean you should remove it ? I understand that you need this parameter for recursion purposes, but the user shouldn't see it ! You should create a private function doing all the work and another public one calling the private one with the initial parameter set accordingly.

That's all for now. The rest seems fine, but I'll pay more attention to it once you've answered. Don't forget to apply my patch on top of yours before making any change !



---

archive/issue_comments_052666.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nHello !!\n\n1. It was indeed just to save a line. At some point, I believed it made the code more readable, as one can directly look at the added constraint, while the \"implicit\" iterators are written later, but in the end it just looks like a sick way to write it ;-)\n\n2. I really do not mind. So in the end, if you think tuples would be better in this case, this sounds to me like a perfectly good reason to make it so ! ;-)\n\n3. +1\n\n4. Well. I am a bit lazy, and I thought writing a new function, + new docstrings just to avoid one parameter (which appears in the proof of the result, by the way) was a bit too much.. But same thing here : if you think this should be removed, I see no reason why it should stay...\n\n5. Your fixes in the docstrings : I agree with most of them, but I do not know what your way of writing INPUT: sections looks like when the reference is generated. I would like to compare the two :-)\n\nWith the comments you made, it sounds like I should rewrite some parts of the code and sen a new patch, merged with the one you sent. Before doing it, can you tell me whether you have \"pending\" modifications on this patch ? If so, could you update your patch ? I will then take it, mix it with mine, and bring to the code the modifications you requested, but it would not be a good idea to do it now if you are also working on the same parts of the code...\n\nThank you again ! :-)\n\nNathann",
    "created_at": "2010-03-06T15:15:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7288#issuecomment-52666",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:12" align="right">comment:12</div>

Hello !!

1. It was indeed just to save a line. At some point, I believed it made the code more readable, as one can directly look at the added constraint, while the "implicit" iterators are written later, but in the end it just looks like a sick way to write it ;-)

2. I really do not mind. So in the end, if you think tuples would be better in this case, this sounds to me like a perfectly good reason to make it so ! ;-)

3. +1

4. Well. I am a bit lazy, and I thought writing a new function, + new docstrings just to avoid one parameter (which appears in the proof of the result, by the way) was a bit too much.. But same thing here : if you think this should be removed, I see no reason why it should stay...

5. Your fixes in the docstrings : I agree with most of them, but I do not know what your way of writing INPUT: sections looks like when the reference is generated. I would like to compare the two :-)

With the comments you made, it sounds like I should rewrite some parts of the code and sen a new patch, merged with the one you sent. Before doing it, can you tell me whether you have "pending" modifications on this patch ? If so, could you update your patch ? I will then take it, mix it with mine, and bring to the code the modifications you requested, but it would not be a good idea to do it now if you are also working on the same parts of the code...

Thank you again ! :-)

Nathann



---

archive/issue_comments_052667.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI won't touch the patch anymore. Moreover, instead of submitting a completely new one, you can simply add one on top of mine.\n\nIf I have to make any other change, I'll do it after you've submitted a new patch.\n\nI think next time will be a positive review. Sorry for making you work. As for item 4, I know it's time consuming to write two complete doctests, but it is really more readable for the user.",
    "created_at": "2010-03-06T15:36:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7288#issuecomment-52667",
    "user": "https://github.com/sagetrac-abmasse"
}
```

<div id="comment:13" align="right">comment:13</div>

I won't touch the patch anymore. Moreover, instead of submitting a completely new one, you can simply add one on top of mine.

If I have to make any other change, I'll do it after you've submitted a new patch.

I think next time will be a positive review. Sorry for making you work. As for item 4, I know it's time consuming to write two complete doctests, but it is really more readable for the user.



---

archive/issue_comments_052668.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nWhat about this one ? :-)\n\n(it includes your fixes)\n\nNathann",
    "created_at": "2010-03-08T17:18:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7288#issuecomment-52668",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:14" align="right">comment:14</div>

What about this one ? :-)

(it includes your fixes)

Nathann



---

archive/issue_events_088197.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-03-08T17:18:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7288#event-88197"
}
```



---

archive/issue_events_088198.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-03-08T17:18:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7288#event-88198"
}
```



---

archive/issue_comments_052669.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nThis one is a new update. It includes the previous one, plus the bugfixes you requested. It is to be applied after #7311, which also fixed several errors.\n\nWith those two applied, everything should test nicely :-)\n\nNathann",
    "created_at": "2010-03-08T23:42:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7288#issuecomment-52669",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:15" align="right">comment:15</div>

This one is a new update. It includes the previous one, plus the bugfixes you requested. It is to be applied after #7311, which also fixed several errors.

With those two applied, everything should test nicely :-)

Nathann



---

archive/issue_comments_052670.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nGreat ! All non optional tests passed, as well as optional ones ! You really fixed every error. I will give another look to your patch tomorrow, but this should easily be a positive review.\n\nThank you for your patience !",
    "created_at": "2010-03-11T00:22:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7288#issuecomment-52670",
    "user": "https://github.com/sagetrac-abmasse"
}
```

<div id="comment:16" align="right">comment:16</div>

Great ! All non optional tests passed, as well as optional ones ! You really fixed every error. I will give another look to your patch tomorrow, but this should easily be a positive review.

Thank you for your patience !



---

archive/issue_comments_052671.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nSome questions/comments:\n\n1. You said you merged my patch with yours, but there seems to miss many modifications I did on the docstring. Does it mean that you don't agree with it ?\n\n2. Following 1, I think you should at least add an OUTPUT field, especially for the functions `edge_cut`, `vertex_cut`. It is important that the user knows what he's going to have returned when using your functions.\n\n3. The same comment about returning tuples instead of lists. I agree with you that this is minor, but I think there is a reason why the two data structures exist in Python. Tuples seem more immutable while lists are dynamical. Here, you return fixed things that shouldn't be modified.\n\n4. I insist on the point that the `vertices` parameter should be hidden. I think this is important... the signature of the function is a very important feature to understand what the function does.\n\nIf you agree with that and since you've put a lot of work since the beginning, I have no problem at all to change all these by myself.\n\nAnother remark : when merging my changes, it's better to create another patch that applies on top of your changes and on mine at the same time. This way, one can visualize more easily what each of us did and when. This can very simply realized with mercurial. You only need to apply, say, the two first patches, and then create a new patch with `hg qnew` that applies on top of both the first patches.\n\nSo as soon as you tell me that I can make some changes, I'll do them, but I don't want to work for nothing, so I'll wait till you answer.\n\nNote that I tested the new functions and I agree with what they do, everything works fine, it's just the documentation and some code choices that I want to discuss.",
    "created_at": "2010-03-11T15:52:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7288#issuecomment-52671",
    "user": "https://github.com/sagetrac-abmasse"
}
```

<div id="comment:17" align="right">comment:17</div>

Some questions/comments:

1. You said you merged my patch with yours, but there seems to miss many modifications I did on the docstring. Does it mean that you don't agree with it ?

2. Following 1, I think you should at least add an OUTPUT field, especially for the functions `edge_cut`, `vertex_cut`. It is important that the user knows what he's going to have returned when using your functions.

3. The same comment about returning tuples instead of lists. I agree with you that this is minor, but I think there is a reason why the two data structures exist in Python. Tuples seem more immutable while lists are dynamical. Here, you return fixed things that shouldn't be modified.

4. I insist on the point that the `vertices` parameter should be hidden. I think this is important... the signature of the function is a very important feature to understand what the function does.

If you agree with that and since you've put a lot of work since the beginning, I have no problem at all to change all these by myself.

Another remark : when merging my changes, it's better to create another patch that applies on top of your changes and on mine at the same time. This way, one can visualize more easily what each of us did and when. This can very simply realized with mercurial. You only need to apply, say, the two first patches, and then create a new patch with `hg qnew` that applies on top of both the first patches.

So as soon as you tell me that I can make some changes, I'll do them, but I don't want to work for nothing, so I'll wait till you answer.

Note that I tested the new functions and I agree with what they do, everything works fine, it's just the documentation and some code choices that I want to discuss.



---

archive/issue_comments_052672.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nHem.... How can I say this ?....\n\nI did not ignore your remarks... If I remember correctly, I addressed them all, including the documentation and your fixes... I just uploaded a wrong file, or did not generate the patch properly.... And I had the good idea to delete the branch containing the modifications since, which means I'm in for writing them again ^^;\n\nI'm really sorry, you will have what you asked for as soon as possible.\n\nNathann",
    "created_at": "2010-03-11T16:55:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7288#issuecomment-52672",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:18" align="right">comment:18</div>

Hem.... How can I say this ?....

I did not ignore your remarks... If I remember correctly, I addressed them all, including the documentation and your fixes... I just uploaded a wrong file, or did not generate the patch properly.... And I had the good idea to delete the branch containing the modifications since, which means I'm in for writing them again ^^;

I'm really sorry, you will have what you asked for as soon as possible.

Nathann



---

archive/issue_events_088199.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-03-11T16:55:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7288#event-88199"
}
```



---

archive/issue_events_088200.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-03-11T16:55:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7288#event-88200"
}
```



---

archive/issue_comments_052673.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nDon't worry about that !\n\nIf I may suggest, maybe you could get back your initial patch and apply mine (which is still available on trac). Then you could only add the few doctests that you added to fix the failing tests.",
    "created_at": "2010-03-11T19:23:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7288#issuecomment-52673",
    "user": "https://github.com/sagetrac-abmasse"
}
```

<div id="comment:20" align="right">comment:20</div>

Don't worry about that !

If I may suggest, maybe you could get back your initial patch and apply mine (which is still available on trac). Then you could only add the few doctests that you added to fix the failing tests.



---

archive/issue_comments_052674.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nHello !!!\n\nHere is the patch I should have sent you last time... Actually, I did the job a bit better this time, as I replaced each occurence of the lists [p.add_constraint...] I could find in the code, so there should be none left :-)\n\nIt still fixes all doctest bugs, and it splits the gomory_hu function, and it includes your patch, and it should be fine, though as I told you over email I made a mistake when applying the patches and I can not give you, as you asked, a patch to apply on top of yours, but another patch with contains all of it.. :-/\n\nI'll read hg's manual again, just to be sure ;-)\n\nNathan",
    "created_at": "2010-03-12T08:39:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7288#issuecomment-52674",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:21" align="right">comment:21</div>

Hello !!!

Here is the patch I should have sent you last time... Actually, I did the job a bit better this time, as I replaced each occurence of the lists [p.add_constraint...] I could find in the code, so there should be none left :-)

It still fixes all doctest bugs, and it splits the gomory_hu function, and it includes your patch, and it should be fine, though as I told you over email I made a mistake when applying the patches and I can not give you, as you asked, a patch to apply on top of yours, but another patch with contains all of it.. :-/

I'll read hg's manual again, just to be sure ;-)

Nathan



---

archive/issue_events_088201.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-03-12T08:39:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7288#event-88201"
}
```



---

archive/issue_events_088202.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-03-12T08:39:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7288#event-88202"
}
```



---

archive/issue_comments_052675.json:
```json
{
    "body": "Attachment: **[trac_7288.patch.gz](https://github.com/sagemath/sage/files/ticket7288/trac_7288.patch.gz)**\n\nAttachment: **[trac_7288_review-abm.patch.gz](https://github.com/sagemath/sage/files/ticket7288/trac_7288_review-abm.patch.gz)**\n\nMinor doc fixes -- apply on top of Nathann's patch",
    "created_at": "2010-03-12T23:28:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7288#issuecomment-52675",
    "user": "https://github.com/sagetrac-abmasse"
}
```

Attachment: **[trac_7288.patch.gz](https://github.com/sagemath/sage/files/ticket7288/trac_7288.patch.gz)**

Attachment: **[trac_7288_review-abm.patch.gz](https://github.com/sagemath/sage/files/ticket7288/trac_7288_review-abm.patch.gz)**

Minor doc fixes -- apply on top of Nathann's patch



---

archive/issue_comments_052676.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nI reviewed the patch for what I expect will be the last time ;)\n\nI did the following tests. First, I compiled from source two versions of sage-4.3.3. Then I installed CBC and GLPK on one of the versions (call this version the `optional` one) while not installing it on the other (call that one `basic`). Then, I applied the two patches of #7311 on both versions and Nathann's patch for #7288.\n\nI tested all sage with the command `sage -testall` on the `basic` version. All tests passed. On the other hand, I tested both the `sage/numerical` and `sage/graphs` folders with the command `sage -t -optional`. Once again, all tests passed ! (I also had to install the package Nauty which is also needed for optional tests).\n\nFinally, I made some minor changes, touching only the documentation and some comments in the code. I restested all and the results were the same. I also looked at the documentation generated by Sphinx. Everything seemed fine.\n\nNote that other part of codes were also modified by Nathann's patch, but it only concerns doctests that were failing, so that the graph folder will be stable in Sage as soon as #7311 and #7288 are merged ! (There were some optional tests failing even before applying any patch !!!)\n\nTo conclude, I give this ticket a positive review, as soon as Nathann confirms he agrees with my changes.\n\nGreat work !",
    "created_at": "2010-03-12T23:40:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7288#issuecomment-52676",
    "user": "https://github.com/sagetrac-abmasse"
}
```

<div id="comment:22" align="right">comment:22</div>

I reviewed the patch for what I expect will be the last time ;)

I did the following tests. First, I compiled from source two versions of sage-4.3.3. Then I installed CBC and GLPK on one of the versions (call this version the `optional` one) while not installing it on the other (call that one `basic`). Then, I applied the two patches of #7311 on both versions and Nathann's patch for #7288.

I tested all sage with the command `sage -testall` on the `basic` version. All tests passed. On the other hand, I tested both the `sage/numerical` and `sage/graphs` folders with the command `sage -t -optional`. Once again, all tests passed ! (I also had to install the package Nauty which is also needed for optional tests).

Finally, I made some minor changes, touching only the documentation and some comments in the code. I restested all and the results were the same. I also looked at the documentation generated by Sphinx. Everything seemed fine.

Note that other part of codes were also modified by Nathann's patch, but it only concerns doctests that were failing, so that the graph folder will be stable in Sage as soon as #7311 and #7288 are merged ! (There were some optional tests failing even before applying any patch !!!)

To conclude, I give this ticket a positive review, as soon as Nathann confirms he agrees with my changes.

Great work !



---

archive/issue_events_088203.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-03-13T07:54:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7288#event-88203"
}
```



---

archive/issue_events_088204.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2010-03-13T07:54:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7288#event-88204"
}
```



---

archive/issue_comments_052677.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nI see no reason to refuse any of them ! Thank you veeeeeery much for your help with this patch.. Not all of them can claim they have been so thoroughly tested :-)\n\nNathann",
    "created_at": "2010-03-13T07:54:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7288#issuecomment-52677",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:23" align="right">comment:23</div>

I see no reason to refuse any of them ! Thank you veeeeeery much for your help with this patch.. Not all of them can claim they have been so thoroughly tested :-)

Nathann



---

archive/issue_comments_052678.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nMerged in 4.4.alpha0:\n\n- trac_7288.patch\n- trac_7288_review-abm.patch",
    "created_at": "2010-04-15T05:58:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7288#issuecomment-52678",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:24" align="right">comment:24</div>

Merged in 4.4.alpha0:

- trac_7288.patch
- trac_7288_review-abm.patch



---

archive/issue_comments_052679.json:
```json
{
    "body": "Author: **Nathann Cohen**",
    "created_at": "2010-04-15T05:58:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7288#issuecomment-52679",
    "user": "https://github.com/jhpalmieri"
}
```

Author: **Nathann Cohen**



---

archive/issue_comments_052680.json:
```json
{
    "body": "Merged: **sage-4.4.alpha0**",
    "created_at": "2010-04-15T05:58:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7288#issuecomment-52680",
    "user": "https://github.com/jhpalmieri"
}
```

Merged: **sage-4.4.alpha0**



---

archive/issue_events_088205.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-04-15T05:58:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7288#event-88205"
}
```



---

archive/issue_events_088206.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-04-15T05:58:32Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7288#event-88206"
}
```



---

archive/issue_comments_052681.json:
```json
{
    "body": "Reviewer: **Alexandre Blondin Mass\u00e9**",
    "created_at": "2010-04-15T05:58:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7288#issuecomment-52681",
    "user": "https://github.com/jhpalmieri"
}
```

Reviewer: **Alexandre Blondin Mass√©**
