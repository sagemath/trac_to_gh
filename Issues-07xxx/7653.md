# Issue 7653: Ensure that C++ libraries linked are ISO standard with commerical compilers

archive/issues_007653.json:
```json
{
    "body": "Several C++ compilers from commercial vendors (Sun and HP being two examples I am aware of), created C++ libraries based on an older version of the C++ standard. This is incompatible with the current standard, so both HP and Sun ship two libraries - one for backward compatibility, the other which implements the last ISO standard, but at the expense of backward compatibility. \n\nIn contrast, g++ only uses on library. \n\nSun take their usual attitude of ensuring Solaris is backward compatible, so by default their C++ compiler uses a library which does not conform to the latest C++ standard. Alexander Dreyer has found that the magic switch to get Sun Studio to use the latest C++ library is \n\n```\n-library=stlport4\n```\n\nFurther details can be found on the Sun web site at \n\nhttp://developers.sun.com/solaris/articles/cmp_stlport_libCstd.html\n\nLooking at the HP C++ compiler for HP-UX, I see that it too has two C++ libraries - one for backward compatibility, one for latest C++ conformance. \n\nhttp://docs.hp.com/en/14487/faq.htm\n\nLike the Sun compiler, the HP compiler defaults to an older C++ library standard. The option to enable the latest standard is\n\n```\n-AA\n```\n\nIn both cases, the same library must be used for all objects - you can't mix them. \n\nHence at some point, all code in Sage that uses C++ must have the appropriate option to C++ compiler to use the latest libraries, if it is to be built with Sun Studio or any other compiler which ships with two libraries. \n\nI would invisage creating individual trac tickets for each package which uses C++. The sensible option it to add this flag to a CXXFLAGS and hope all packages respect CXXFLAGS. In practice, this will not happen, so many will require changes to ensure they do respect flags from a global CXX flags. \n\n\n**Assignee:** GeorgSWeber\n\n**CC:**  @dimpase\n\n**Reviewer:** Dima Pasechnik\n\nIssue created by migration from https://trac.sagemath.org/ticket/7653\n\n",
    "closed_at": "2020-05-31T12:30:59Z",
    "created_at": "2009-12-10T16:35:09Z",
    "labels": [
        "component: build",
        "bug",
        "invalid"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Ensure that C++ libraries linked are ISO standard with commerical compilers",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/7653",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```
Several C++ compilers from commercial vendors (Sun and HP being two examples I am aware of), created C++ libraries based on an older version of the C++ standard. This is incompatible with the current standard, so both HP and Sun ship two libraries - one for backward compatibility, the other which implements the last ISO standard, but at the expense of backward compatibility. 

In contrast, g++ only uses on library. 

Sun take their usual attitude of ensuring Solaris is backward compatible, so by default their C++ compiler uses a library which does not conform to the latest C++ standard. Alexander Dreyer has found that the magic switch to get Sun Studio to use the latest C++ library is 

```
-library=stlport4
```

Further details can be found on the Sun web site at 

http://developers.sun.com/solaris/articles/cmp_stlport_libCstd.html

Looking at the HP C++ compiler for HP-UX, I see that it too has two C++ libraries - one for backward compatibility, one for latest C++ conformance. 

http://docs.hp.com/en/14487/faq.htm

Like the Sun compiler, the HP compiler defaults to an older C++ library standard. The option to enable the latest standard is

```
-AA
```

In both cases, the same library must be used for all objects - you can't mix them. 

Hence at some point, all code in Sage that uses C++ must have the appropriate option to C++ compiler to use the latest libraries, if it is to be built with Sun Studio or any other compiler which ships with two libraries. 

I would invisage creating individual trac tickets for each package which uses C++. The sensible option it to add this flag to a CXXFLAGS and hope all packages respect CXXFLAGS. In practice, this will not happen, so many will require changes to ensure they do respect flags from a global CXX flags. 


**Assignee:** GeorgSWeber

**CC:**  @dimpase

**Reviewer:** Dima Pasechnik

Issue created by migration from https://trac.sagemath.org/ticket/7653





---

archive/issue_comments_074866.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2020-04-25T02:55:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7653#issuecomment-74866",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_074867.json:
```json
{
    "body": "<a id='comment:1'></a>\noutdated, should be closed",
    "created_at": "2020-04-25T02:55:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7653#issuecomment-74867",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:1'></a>
outdated, should be closed



---

archive/issue_events_023103.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-25T02:55:44Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/7653",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/7653#event-23103"
}
```



---

archive/issue_comments_074868.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2020-04-26T08:31:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7653#issuecomment-74868",
    "user": "https://github.com/dimpase"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_074869.json:
```json
{
    "body": "**Reviewer:** Dima Pasechnik",
    "created_at": "2020-04-26T08:31:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7653#issuecomment-74869",
    "user": "https://github.com/dimpase"
}
```

**Reviewer:** Dima Pasechnik



---

archive/issue_events_023104.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-05-31T12:30:59Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/7653",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/7653#event-23104"
}
```
