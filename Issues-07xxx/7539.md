# Issue 7539: primesieve spkg

archive/issues_007539.json:
```json
{
    "assignees": [],
    "body": "This ticket was split away from #7013:\n\nThe goal of this ticket is to create an spkg for primesieve (http://primesieve.googlecode.com) which provides the functionality of primesieve is a shared library.\n\nThe followup ticket is #25009\n\n\n---\n\nInstallation instructions:\n\n1. Add [https://primesieve.googlecode.com/files/primesieve-4.4.spkg:primesieve-4.4.spkg](https://primesieve.googlecode.com/files/primesieve-4.4.spkg:primesieve-4.4.spkg) to spkg/standard.\n2. Apply [attachment:02_primesieve-sage-main.patch](https://github.com/sagemath/sage/files/ticket7539/02_primesieve-sage-main.patch) to the Sage library repository.\n3. Apply [attachment:primesieve-sage-root.patch](https://github.com/sagemath/sage/files/ticket7539/primesieve-sage-root.patch) to the root repository.\n\n**Assignee:** @ohanar\n\n**CC:**  kevin.stueve @robertwb @williamstein victor @nexttime @dimpase\n\n**Reviewer:** Dima Pasechnik\n\nIssue created by migration from https://trac.sagemath.org/ticket/7539\n\n",
    "closed_at": "2021-12-03T18:41:01Z",
    "created_at": "2009-11-26T21:48:06Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20number%20theory",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/invalid"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "primesieve spkg",
    "type": "issue",
    "updated_at": "2021-12-03T18:41:01Z",
    "url": "https://github.com/sagemath/sage/issues/7539",
    "user": "https://github.com/sagetrac-GeorgSWeber"
}
```
This ticket was split away from #7013:

The goal of this ticket is to create an spkg for primesieve (http://primesieve.googlecode.com) which provides the functionality of primesieve is a shared library.

The followup ticket is #25009


---

Installation instructions:

1. Add [https://primesieve.googlecode.com/files/primesieve-4.4.spkg:primesieve-4.4.spkg](https://primesieve.googlecode.com/files/primesieve-4.4.spkg:primesieve-4.4.spkg) to spkg/standard.
2. Apply [attachment:02_primesieve-sage-main.patch](https://github.com/sagemath/sage/files/ticket7539/02_primesieve-sage-main.patch) to the Sage library repository.
3. Apply [attachment:primesieve-sage-root.patch](https://github.com/sagemath/sage/files/ticket7539/primesieve-sage-root.patch) to the root repository.

**Assignee:** @ohanar

**CC:**  kevin.stueve @robertwb @williamstein victor @nexttime @dimpase

**Reviewer:** Dima Pasechnik

Issue created by migration from https://trac.sagemath.org/ticket/7539





---

archive/issue_events_077319.json:
```json
{
    "actor": "https://github.com/sagetrac-GeorgSWeber",
    "created_at": "2009-11-26T21:48:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20number%20theory",
    "label_color": "08517b",
    "label_name": "component: number theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7539#event-77319"
}
```



---

archive/issue_events_077320.json:
```json
{
    "actor": "https://github.com/sagetrac-GeorgSWeber",
    "created_at": "2009-11-26T21:48:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "008080",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7539#event-77320"
}
```



---

archive/issue_events_077321.json:
```json
{
    "actor": "https://github.com/sagetrac-GeorgSWeber",
    "created_at": "2009-11-26T21:48:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "008080",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7539#event-77321"
}
```



---

archive/issue_comments_057337.json:
```json
{
    "body": "<a id='comment:1'>**Comment 1:**</a>\nIt is appropriate to give credit to the sources I used in making the tables of offsets between prime_pi and a logarithmic integral approximation.  I used an asymptotic approximation to the logarithmic integral provided by Fredrik Johansson and the tables of prime_pi from http://www.primefan.ru/stuff/primes/table.html.  And the idea of combining a table of values of prime_pi and sieving for fast computation of the prime_pi was provided by the nth prime page at http://primes.utm.edu/nthprime/\n\nThe primefan tables are extensive, and are from a combined effort of several individuals, including Andrey V. Kulsha, Anatoly F. Selevich, and Tom\u00e1s Oliveira e Silva.  It is likely that the total computation time required to generate these tables was many processor years.\n\nAs processor time (for the developer), hard-drive storage (for the client), and Internet bandwidth (for the client) become cheaper and more available, I would like to see published tables of prime_pi to expand (and to see resources put toward such computation).  It would be nice for the number of values in the prime_pi tables in Sage to increase every few years as the computation of the tables becomes easier for the developer and the download and storage of the tables becomes easier for the client.  Maybe several table sizes could be offered.  A standard table could be the default for most users, but for those who are studying the distribution of prime numbers and desire speed over extra storage space on their hard-drive (and for bragging rights for Sage), larger tables could be offered.  A web-service could even be offered to query a very large table of values of the prime counting function (the additional sieving could be done either on the server or client).  Of course, it would be very important to have redundancy in such large calculations (the generation of the prime_pi tables), as there have been incorrect values of the prime counting function published several times in the past.\n\nKevin Stueve",
    "created_at": "2009-11-27T07:31:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57337",
    "user": "https://github.com/sagetrac-kevin-stueve"
}
```

<a id='comment:1'>**Comment 1:**</a>
It is appropriate to give credit to the sources I used in making the tables of offsets between prime_pi and a logarithmic integral approximation.  I used an asymptotic approximation to the logarithmic integral provided by Fredrik Johansson and the tables of prime_pi from http://www.primefan.ru/stuff/primes/table.html.  And the idea of combining a table of values of prime_pi and sieving for fast computation of the prime_pi was provided by the nth prime page at http://primes.utm.edu/nthprime/

The primefan tables are extensive, and are from a combined effort of several individuals, including Andrey V. Kulsha, Anatoly F. Selevich, and Tom√°s Oliveira e Silva.  It is likely that the total computation time required to generate these tables was many processor years.

As processor time (for the developer), hard-drive storage (for the client), and Internet bandwidth (for the client) become cheaper and more available, I would like to see published tables of prime_pi to expand (and to see resources put toward such computation).  It would be nice for the number of values in the prime_pi tables in Sage to increase every few years as the computation of the tables becomes easier for the developer and the download and storage of the tables becomes easier for the client.  Maybe several table sizes could be offered.  A standard table could be the default for most users, but for those who are studying the distribution of prime numbers and desire speed over extra storage space on their hard-drive (and for bragging rights for Sage), larger tables could be offered.  A web-service could even be offered to query a very large table of values of the prime counting function (the additional sieving could be done either on the server or client).  Of course, it would be very important to have redundancy in such large calculations (the generation of the prime_pi tables), as there have been incorrect values of the prime counting function published several times in the past.

Kevin Stueve



---

archive/issue_comments_057338.json:
```json
{
    "body": "<a id='comment:2'>**Comment 2:**</a>\nLeif Leonhardy sent some very useful contributions over the past days.  Following is our correspondence.\n\n---\n*Friday December 4, 2009:\nHi Kevin,\n\nI've made some changes to [your version of] TOS's prime_sieve.c, making\nit more portable and removing the 4-byte pointer constraint (i.e. fixing\nyour \"-m64\" problem).\n\nThe original version also contains an overflow bug on large intervals\n(>=2^36).\n(Another overflow still occurs [very] near to 2^64, because the sum of\n[the muted] main_base and numbers_per_segment might [or will] exceed 64\nbits.)\nFor use with Sage, the modulo-64* limitation on the intervals' bounds\nshould be removed, too (easy, but it didn't disturb me yet ;-) ).\nI also fixed your parameter handling and output of the result.\n\nIf you intend to build a library rather than a stand-alone program the\nmemory management should be rewritten (and globals removed). Running\nmany sieving threads on multi-core CPUs doesn't make much sense because\nmemory (consumption and traffic) is the bottleneck; the sieving primes\nlists (\"main_lists\") can't be shared among tasks (TOS's optimization\nis a \"sequential\" one in that sense).\n\nNote that TOS's implementation, as he stated, was created mainly for\nillustration purposes - \"simple but serious\" - and wasn't intended (and\ndoesn't claim) to be \"fully optimized\" or optimal in all aspects.\n\nThe default values for sieve (segment) and bucket size were appropriate\nin 2002; for contemporary hardware, both should be increased. I got best\nresults with the (currently) maximal bucket size of 64KB, and sieve\nsegment sizes of 256KB and 1MB on an Intel Pentium 4 Prescott (1MB L2\ncache) and Intel Core2 with 6MB L2 cache per core-pair (e.g. E8400,\nQ9x50), respectively. Also, native code (\"-m64\"**) runs faster on x86_64\nplatforms, even with u32 as the sieve basetype; using 64- rather than\n32-bit words for the sieve has probably greater effect on platforms like\nSPARC64, I guess. (Compile with \"-DSIEVE_BASETYPE_U64\" to get that.)\n\nI've attached your version of prime_sieve.c (\"Silva.c.orig\", 09/04/09),\ntoo, since I'm not sure I fetched the latest. The first diff contains a\n(working) subset of the changes I made, the second contains all changes.\nA ChangeLog (and adaption of TOS's \"#if 0\" test code) is in the\npipeline... :/\n\nHave fun,\n-Leif\n\n---\n\n*My reply, December 4th 2009\nSounds great\n[...]\n\nOn a Macbook pro, I have found that dualthreaded (simply calling TOS\ntwice for two adjacent intervals) is about 1.71 times faster.  I hope\nthat it might be possible to improve that.\n[...]\nKevin Stueve\n\n---\n*From Leif, December 4th 2009\nHi again,\n\nI've just found another little 64bit-pointer bug in get_memory(),\nthe attached diff contains only that patch.\n\n-Leif\n\n---\n*From Leif, December 5th, 2009\nHi Kevin,\n\nI've fixed the modulo-64 (or modulo-128 for 64-bit sieve words)\nrestriction on interval bounds (by enlarging the sieved interval and\nsubtracting the \"extra\" primes found if necessary);\nupper_bound==lower_bound is allowed now, too.\n[Adapting the Python code is up to you ;-)]\n\nThe majority of \"#ifdef SIEVE_BASETYPE_U64\"s has also been removed in\nfavour of conditional macros and constants defined at the beginning.\n\n-Leif\n\nP.S.: By \"many sieving threads\" (currently: processes) I meant more than\n2 or 4; but even with only few instances the processor's cache(s) might\nbegin thrashing and we might run out of physical RAM; the behaviour can\ndepend on not only the specific hardware but compile-time parameters\n(and does of course depend on the interval's lower bound), too.\n[Even small intervals above 4e18 require ~0.8GB (per process), intervals\nnear 2^64 approx. 1.6GB. In worst case the machine starts swapping and\nmultiple processes run slower, taking more time than a single would have\ntaken. If I could get rid of the megs of sieving primes, I'd use the\nhundreds of cores on modern GPUs. :-) ]",
    "created_at": "2009-12-06T06:25:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57338",
    "user": "https://github.com/sagetrac-kevin-stueve"
}
```

<a id='comment:2'>**Comment 2:**</a>
Leif Leonhardy sent some very useful contributions over the past days.  Following is our correspondence.

---
*Friday December 4, 2009:
Hi Kevin,

I've made some changes to [your version of] TOS's prime_sieve.c, making
it more portable and removing the 4-byte pointer constraint (i.e. fixing
your "-m64" problem).

The original version also contains an overflow bug on large intervals
(>=2^36).
(Another overflow still occurs [very] near to 2^64, because the sum of
[the muted] main_base and numbers_per_segment might [or will] exceed 64
bits.)
For use with Sage, the modulo-64* limitation on the intervals' bounds
should be removed, too (easy, but it didn't disturb me yet ;-) ).
I also fixed your parameter handling and output of the result.

If you intend to build a library rather than a stand-alone program the
memory management should be rewritten (and globals removed). Running
many sieving threads on multi-core CPUs doesn't make much sense because
memory (consumption and traffic) is the bottleneck; the sieving primes
lists ("main_lists") can't be shared among tasks (TOS's optimization
is a "sequential" one in that sense).

Note that TOS's implementation, as he stated, was created mainly for
illustration purposes - "simple but serious" - and wasn't intended (and
doesn't claim) to be "fully optimized" or optimal in all aspects.

The default values for sieve (segment) and bucket size were appropriate
in 2002; for contemporary hardware, both should be increased. I got best
results with the (currently) maximal bucket size of 64KB, and sieve
segment sizes of 256KB and 1MB on an Intel Pentium 4 Prescott (1MB L2
cache) and Intel Core2 with 6MB L2 cache per core-pair (e.g. E8400,
Q9x50), respectively. Also, native code ("-m64"**) runs faster on x86_64
platforms, even with u32 as the sieve basetype; using 64- rather than
32-bit words for the sieve has probably greater effect on platforms like
SPARC64, I guess. (Compile with "-DSIEVE_BASETYPE_U64" to get that.)

I've attached your version of prime_sieve.c ("Silva.c.orig", 09/04/09),
too, since I'm not sure I fetched the latest. The first diff contains a
(working) subset of the changes I made, the second contains all changes.
A ChangeLog (and adaption of TOS's "#if 0" test code) is in the
pipeline... :/

Have fun,
-Leif

---

*My reply, December 4th 2009
Sounds great
[...]

On a Macbook pro, I have found that dualthreaded (simply calling TOS
twice for two adjacent intervals) is about 1.71 times faster.  I hope
that it might be possible to improve that.
[...]
Kevin Stueve

---
*From Leif, December 4th 2009
Hi again,

I've just found another little 64bit-pointer bug in get_memory(),
the attached diff contains only that patch.

-Leif

---
*From Leif, December 5th, 2009
Hi Kevin,

I've fixed the modulo-64 (or modulo-128 for 64-bit sieve words)
restriction on interval bounds (by enlarging the sieved interval and
subtracting the "extra" primes found if necessary);
upper_bound==lower_bound is allowed now, too.
[Adapting the Python code is up to you ;-)]

The majority of "#ifdef SIEVE_BASETYPE_U64"s has also been removed in
favour of conditional macros and constants defined at the beginning.

-Leif

P.S.: By "many sieving threads" (currently: processes) I meant more than
2 or 4; but even with only few instances the processor's cache(s) might
begin thrashing and we might run out of physical RAM; the behaviour can
depend on not only the specific hardware but compile-time parameters
(and does of course depend on the interval's lower bound), too.
[Even small intervals above 4e18 require ~0.8GB (per process), intervals
near 2^64 approx. 1.6GB. In worst case the machine starts swapping and
multiple processes run slower, taking more time than a single would have
taken. If I could get rid of the megs of sieving primes, I'd use the
hundreds of cores on modern GPUs. :-) ]



---

archive/issue_comments_057339.json:
```json
{
    "body": "Provided by Leif Leonhardy in his first email",
    "created_at": "2009-12-06T06:30:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57339",
    "user": "https://github.com/sagetrac-kevin-stueve"
}
```

Provided by Leif Leonhardy in his first email



---

archive/issue_comments_057340.json:
```json
{
    "body": "**Attachment:** [Leif_attachment1.zip](https://github.com/sagemath/sage/files/ticket7539/Leif_attachment1.zip)\n\n**Attachment:** [Silva.c.additional.diff.gz](https://github.com/sagemath/sage/files/ticket7539/Silva.c.additional.diff.gz)\n\nProvided by Leif Leonhardy in his second email",
    "created_at": "2009-12-06T06:31:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57340",
    "user": "https://github.com/sagetrac-kevin-stueve"
}
```

**Attachment:** [Leif_attachment1.zip](https://github.com/sagemath/sage/files/ticket7539/Leif_attachment1.zip)

**Attachment:** [Silva.c.additional.diff.gz](https://github.com/sagemath/sage/files/ticket7539/Silva.c.additional.diff.gz)

Provided by Leif Leonhardy in his second email



---

archive/issue_comments_057341.json:
```json
{
    "body": "Provided by Leif Leonhardy in his third email",
    "created_at": "2009-12-06T06:31:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57341",
    "user": "https://github.com/sagetrac-kevin-stueve"
}
```

Provided by Leif Leonhardy in his third email



---

archive/issue_comments_057342.json:
```json
{
    "body": "**Attachment:** [Leif_attachment3.zip](https://github.com/sagemath/sage/files/ticket7539/Leif_attachment3.zip)\n\n**Attachment:** [Silva.c.orig.gz](https://github.com/sagemath/sage/files/ticket7539/Silva.c.orig.gz)\n\noriginal version of Silva.c",
    "created_at": "2009-12-24T15:27:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57342",
    "user": "https://github.com/sagetrac-mvngu"
}
```

**Attachment:** [Leif_attachment3.zip](https://github.com/sagemath/sage/files/ticket7539/Leif_attachment3.zip)

**Attachment:** [Silva.c.orig.gz](https://github.com/sagemath/sage/files/ticket7539/Silva.c.orig.gz)

original version of Silva.c



---

archive/issue_comments_057343.json:
```json
{
    "body": "<a id='comment:3'>**Comment 3:**</a>\nFrom IRC:\n\n```\n06:44 < mvngu> The attachments look like a mess to me.\n06:45 < SageWWW> They are supposedly diffs\n06:45 < mvngu> I downloaded the first attachment, uncompressed it, and can't \n               work out which patches to apply in which order.\n06:49 < SageWWW> \"The first diff contains a (working) subset of the changes I \n                 made, the second contains all changes.\"Leif\n06:50 < SageWWW> That is in his first email.  And he also included the original\n06:51 < mvngu> So Silva.c.orig is the original version. And Silva.c is the \n               newer version with all changes in the diff's?\n06:51 < SageWWW> Perhaps.  It would be easier to tell if Leif added himself to \n                 the authors section of the updated code\n06:53 < mvngu> The diff's don't look like standard diff formats. At least when \n               I apply them with the command \"patch\", they failed to apply.\n06:56 < SageWWW> It is extra confusing that Andrew Ohana and Leif Leonhardy \n                 both made their own updated version of Kevin Stueve's updated \n                 version of Oliviera e Silva's code.\n06:56 < mvngu> I think if you diff Silva.c.orig against Silva.c, you get the \n               differences in the newer version (which is Silva.c).\n```\nThe attachments look confusing to me. So I have attached what I think is the sequence of patches to apply on top of the original C code version `Silva.c.orig`. Starting from `Silva.c.orig`, apply the three patches in this order:\n\n1. `01_Silva.patch`\n2. `02_Silva.patch`\n3. `03_Silva.patch`\n\nAfter applying the above three patches on top of `Silva.c.orig`, you get the file `Silva.c`. I hope my attachments would resolve some of the confusion.",
    "created_at": "2009-12-24T15:35:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57343",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<a id='comment:3'>**Comment 3:**</a>
From IRC:

```
06:44 < mvngu> The attachments look like a mess to me.
06:45 < SageWWW> They are supposedly diffs
06:45 < mvngu> I downloaded the first attachment, uncompressed it, and can't 
               work out which patches to apply in which order.
06:49 < SageWWW> "The first diff contains a (working) subset of the changes I 
                 made, the second contains all changes."Leif
06:50 < SageWWW> That is in his first email.  And he also included the original
06:51 < mvngu> So Silva.c.orig is the original version. And Silva.c is the 
               newer version with all changes in the diff's?
06:51 < SageWWW> Perhaps.  It would be easier to tell if Leif added himself to 
                 the authors section of the updated code
06:53 < mvngu> The diff's don't look like standard diff formats. At least when 
               I apply them with the command "patch", they failed to apply.
06:56 < SageWWW> It is extra confusing that Andrew Ohana and Leif Leonhardy 
                 both made their own updated version of Kevin Stueve's updated 
                 version of Oliviera e Silva's code.
06:56 < mvngu> I think if you diff Silva.c.orig against Silva.c, you get the 
               differences in the newer version (which is Silva.c).
```
The attachments look confusing to me. So I have attached what I think is the sequence of patches to apply on top of the original C code version `Silva.c.orig`. Starting from `Silva.c.orig`, apply the three patches in this order:

1. `01_Silva.patch`
2. `02_Silva.patch`
3. `03_Silva.patch`

After applying the above three patches on top of `Silva.c.orig`, you get the file `Silva.c`. I hope my attachments would resolve some of the confusion.



---

archive/issue_comments_057344.json:
```json
{
    "body": "**Attachment:** [01_Silva.patch.gz](https://github.com/sagemath/sage/files/ticket7539/01_Silva.patch.gz)\n\nfirst patch of Leif_attachment1.zip, i.e. Silva.c.diff0",
    "created_at": "2009-12-24T16:24:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57344",
    "user": "https://github.com/sagetrac-mvngu"
}
```

**Attachment:** [01_Silva.patch.gz](https://github.com/sagemath/sage/files/ticket7539/01_Silva.patch.gz)

first patch of Leif_attachment1.zip, i.e. Silva.c.diff0



---

archive/issue_comments_057345.json:
```json
{
    "body": "Leif_attachment1.zip, patch Silva.c.diff: apply all changes in Silva.c.diff that are not in Silva.c.diff0",
    "created_at": "2009-12-24T16:24:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57345",
    "user": "https://github.com/sagetrac-mvngu"
}
```

Leif_attachment1.zip, patch Silva.c.diff: apply all changes in Silva.c.diff that are not in Silva.c.diff0



---

archive/issue_comments_057346.json:
```json
{
    "body": "**Attachment:** [02_Silva.patch.gz](https://github.com/sagemath/sage/files/ticket7539/02_Silva.patch.gz)\n\nadd changes from Silva.c.additional.diff",
    "created_at": "2009-12-24T16:24:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57346",
    "user": "https://github.com/sagetrac-mvngu"
}
```

**Attachment:** [02_Silva.patch.gz](https://github.com/sagemath/sage/files/ticket7539/02_Silva.patch.gz)

add changes from Silva.c.additional.diff



---

archive/issue_comments_057347.json:
```json
{
    "body": "**Attachment:** [03_Silva.patch.gz](https://github.com/sagemath/sage/files/ticket7539/03_Silva.patch.gz)\n\n**Attachment:** [04_Silva.patch.gz](https://github.com/sagemath/sage/files/ticket7539/04_Silva.patch.gz)\n\nadd changes from Silva.c.bounds-restriction-removed.diff",
    "created_at": "2009-12-24T16:25:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57347",
    "user": "https://github.com/sagetrac-mvngu"
}
```

**Attachment:** [03_Silva.patch.gz](https://github.com/sagemath/sage/files/ticket7539/03_Silva.patch.gz)

**Attachment:** [04_Silva.patch.gz](https://github.com/sagemath/sage/files/ticket7539/04_Silva.patch.gz)

add changes from Silva.c.bounds-restriction-removed.diff



---

archive/issue_comments_057348.json:
```json
{
    "body": "**Attachment:** [Silva.c.gz](https://github.com/sagemath/sage/files/ticket7539/Silva.c.gz)\n\nversion of Silva.c after applying the previous 4 patches",
    "created_at": "2009-12-24T16:25:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57348",
    "user": "https://github.com/sagetrac-mvngu"
}
```

**Attachment:** [Silva.c.gz](https://github.com/sagemath/sage/files/ticket7539/Silva.c.gz)

version of Silva.c after applying the previous 4 patches



---

archive/issue_comments_057349.json:
```json
{
    "body": "<a id='comment:4'>**Comment 4:**</a>\nFrom IRC:\n\n```\n07:57 < SageWWW> mvngu, what do you think Leif meant by a working subset of \n                 changes?\n08:02 < mvngu> SageWWW: I think it's removing the 4-byte pointer constraint. \n               The working changes in the first diff now also work for 8-byte \n               pointers.\n08:03 < SageWWW> It is still confusing.  Leif provided 4 patches total.\n08:03 < mvngu> I know. You could ask for clarification on the ticket. \n08:03 < mvngu> Do you have an account on the trac server?\n08:04 < SageWWW> I think you should modify your comment on the trac server to \n                 specifically state which of Leif's files corresponds to which \n                 of yours\n08:04 < SageWWW> kevin.stueve\n08:04 < mvngu> Let me modify the patches I have attached. Hang on...\n```\nI have deleted the previous 3 patches. In their place I attached 4 patches which correspond to the diff's contained in the attachments kevin.stueve. Starting from Silva.c.orig, apply the 4 patches in this order:\n\n1. `01_Silva.patch`\n2. `02_Silva.patch`\n3. `03_Silva.patch`\n4. `04_Silva.patch`\n \nAfter applying the above four patches on top of Silva.c.orig, you get the file Silva.c. I hope my attachments would resolve some of the confusion.",
    "created_at": "2009-12-24T16:34:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57349",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<a id='comment:4'>**Comment 4:**</a>
From IRC:

```
07:57 < SageWWW> mvngu, what do you think Leif meant by a working subset of 
                 changes?
08:02 < mvngu> SageWWW: I think it's removing the 4-byte pointer constraint. 
               The working changes in the first diff now also work for 8-byte 
               pointers.
08:03 < SageWWW> It is still confusing.  Leif provided 4 patches total.
08:03 < mvngu> I know. You could ask for clarification on the ticket. 
08:03 < mvngu> Do you have an account on the trac server?
08:04 < SageWWW> I think you should modify your comment on the trac server to 
                 specifically state which of Leif's files corresponds to which 
                 of yours
08:04 < SageWWW> kevin.stueve
08:04 < mvngu> Let me modify the patches I have attached. Hang on...
```
I have deleted the previous 3 patches. In their place I attached 4 patches which correspond to the diff's contained in the attachments kevin.stueve. Starting from Silva.c.orig, apply the 4 patches in this order:

1. `01_Silva.patch`
2. `02_Silva.patch`
3. `03_Silva.patch`
4. `04_Silva.patch`
 
After applying the above four patches on top of Silva.c.orig, you get the file Silva.c. I hope my attachments would resolve some of the confusion.



---

archive/issue_comments_057350.json:
```json
{
    "body": "<a id='comment:5'>**Comment 5:**</a>\n\n```\n08:57 < mvngu> So starting from Silva.c.orig, I applied Silva.c.diff0 which is \n               the same as 01_Silva.patch.\n08:59 < mvngu> Call the file with 01_Silva.patch applied \"Silva.c\".\n08:59 < mvngu> I then do a diff of Silva.c against the version of Silva.c in \n               Leif_attachment1.zip.\n09:00 < mvngu> That produce the patch file 02_Silva.patch.\n```",
    "created_at": "2009-12-24T17:02:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57350",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<a id='comment:5'>**Comment 5:**</a>

```
08:57 < mvngu> So starting from Silva.c.orig, I applied Silva.c.diff0 which is 
               the same as 01_Silva.patch.
08:59 < mvngu> Call the file with 01_Silva.patch applied "Silva.c".
08:59 < mvngu> I then do a diff of Silva.c against the version of Silva.c in 
               Leif_attachment1.zip.
09:00 < mvngu> That produce the patch file 02_Silva.patch.
```



---

archive/issue_comments_057351.json:
```json
{
    "body": "<a id='comment:7'>**Comment 7:**</a>\nOne of the aspects of TOS's prime_sieve.c is that it has an initialization phase for an interval.  I'm not sure if the code already does this, but we should make sure to think about not repeating initialization more than needed.  Leif, I think you understand TOS's prime_sieve.c code better than me, what do you think?\n\nKevin Stueve",
    "created_at": "2009-12-26T03:27:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57351",
    "user": "https://github.com/sagetrac-kevin-stueve"
}
```

<a id='comment:7'>**Comment 7:**</a>
One of the aspects of TOS's prime_sieve.c is that it has an initialization phase for an interval.  I'm not sure if the code already does this, but we should make sure to think about not repeating initialization more than needed.  Leif, I think you understand TOS's prime_sieve.c code better than me, what do you think?

Kevin Stueve



---

archive/issue_comments_057352.json:
```json
{
    "body": "<a id='comment:9'>**Comment 9:**</a>\nWARNING: Do not use the current version of \"Silva.c\" to count primes in intervals beyond approx. 18302910352e9 (assuming a sieve segment size of 2MB, i.e. _sieve_bits_log2_=24; with lower segment sizes, overflows occur later).\n\nUnfortunately, these early overflows do not lead to run-time errors (e.g. segmentation faults) but unsuspiciously wrong results.\n[\"Obvious\" (run-time) errors do occur much later due to other overflow conditions.]\n\nNote also that you currently must not use 1 as the interval's upper bound or (little worse) 2 as its lower bound, because prime counts will be wrong by one (1 is treated as prime while 2 is not).\n\nNevertheless, Happy New Decade...\n\n-Leif",
    "created_at": "2010-01-02T13:57:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57352",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:9'>**Comment 9:**</a>
WARNING: Do not use the current version of "Silva.c" to count primes in intervals beyond approx. 18302910352e9 (assuming a sieve segment size of 2MB, i.e. _sieve_bits_log2_=24; with lower segment sizes, overflows occur later).

Unfortunately, these early overflows do not lead to run-time errors (e.g. segmentation faults) but unsuspiciously wrong results.
["Obvious" (run-time) errors do occur much later due to other overflow conditions.]

Note also that you currently must not use 1 as the interval's upper bound or (little worse) 2 as its lower bound, because prime counts will be wrong by one (1 is treated as prime while 2 is not).

Nevertheless, Happy New Decade...

-Leif



---

archive/issue_comments_057353.json:
```json
{
    "body": "<a id='comment:10'>**Comment 10:**</a>\nI think I've now fixed all overflow conditions (I did find yet another one) such that it works up to 2<sup>64</sup>-1 under all circumstances.\n\nGoing to clean up the code and then perhaps release a final *stand-alone* version...\n\nThere's currently some overflow checking overhead which could be reduced for \"safe\" intervals but I'll most probably not remove it before writing a library version (which will be optimized for other special cases, too).\n\nAnyway, the improved version is faster than the original... :)",
    "created_at": "2010-01-05T15:32:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57353",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:10'>**Comment 10:**</a>
I think I've now fixed all overflow conditions (I did find yet another one) such that it works up to 2<sup>64</sup>-1 under all circumstances.

Going to clean up the code and then perhaps release a final *stand-alone* version...

There's currently some overflow checking overhead which could be reduced for "safe" intervals but I'll most probably not remove it before writing a library version (which will be optimized for other special cases, too).

Anyway, the improved version is faster than the original... :)



---

archive/issue_comments_057354.json:
```json
{
    "body": "<a id='comment:11'>**Comment 11:**</a>\nAn initial portable version of LMOnew/findn runs on x86_64 in 64-bit native mode.\n\nNow going to extend its domain further up to 2<sup>64</sup>-1...\n\n[It could be helpful to have confirmed values of pi(x) between 1844e16 and 2<sup>64</sup>. Anyone?]\n\n-Leif",
    "created_at": "2010-01-10T17:00:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57354",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:11'>**Comment 11:**</a>
An initial portable version of LMOnew/findn runs on x86_64 in 64-bit native mode.

Now going to extend its domain further up to 2<sup>64</sup>-1...

[It could be helpful to have confirmed values of pi(x) between 1844e16 and 2<sup>64</sup>. Anyone?]

-Leif



---

archive/issue_comments_057355.json:
```json
{
    "body": "<a id='comment:12'>**Comment 12:**</a>\nThomas R. Nicely's table of pi(x) at http://sage.math.washington.edu/home/kstueve/T_R_NICELY/ has a granularity of 1e10 up to 2e16.  So you really only need values between 2e16 and 2<sup>64</sup>.\nKevin Stueve",
    "created_at": "2010-01-10T21:18:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57355",
    "user": "https://github.com/sagetrac-kevin-stueve"
}
```

<a id='comment:12'>**Comment 12:**</a>
Thomas R. Nicely's table of pi(x) at http://sage.math.washington.edu/home/kstueve/T_R_NICELY/ has a granularity of 1e10 up to 2e16.  So you really only need values between 2e16 and 2<sup>64</sup>.
Kevin Stueve



---

archive/issue_comments_057356.json:
```json
{
    "body": "<a id='comment:13'>**Comment 13:**</a>\nCorrection: 1e10 or better",
    "created_at": "2010-01-10T21:19:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57356",
    "user": "https://github.com/sagetrac-kevin-stueve"
}
```

<a id='comment:13'>**Comment 13:**</a>
Correction: 1e10 or better



---

archive/issue_comments_057357.json:
```json
{
    "body": "<a id='comment:14'>**Comment 14:**</a>\nReplying to [kevin.stueve](#comment%3A12):\n> So you really only need values between 2e16 and 2<sup>64</sup>.\n\nOnly? There was no decimal point missing in 1844... ;-)",
    "created_at": "2010-01-11T00:21:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57357",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:14'>**Comment 14:**</a>
Replying to [kevin.stueve](#comment%3A12):
> So you really only need values between 2e16 and 2<sup>64</sup>.

Only? There was no decimal point missing in 1844... ;-)



---

archive/issue_comments_057358.json:
```json
{
    "body": "<a id='comment:15'>**Comment 15:**</a>\nSorry.  Right now you have the values:\n\n\n\nx                          pi(x)\n\n\n18440 00000 00000 00000 : 425 50425 77541 37607\n\n18446 74407 37095 51616 : 425 65628 40352 17743 \n\n18450 00000 00000 00000 : 425 72967 93423 72554\n\n\nfrom http://www.primefan.ru/stuff/primes/table.html and http://www.ieeta.pt/~tos/bib/5.4.pdf.\n\nYou could sieve part of this interval for more values.  You could contact one of the authors of one of the variants of combinatorial method asking for other values (Such as Gourdon, TOS, etc).\n\nAnother possibility is using a O(x<sup>1/2</sup> log(x)) algorithm that computes the parity (even or odd) of the prime counting function, for a limited amount of verification of values of the prime counting function.  This algorithm is described by Terence Tao and others at the polymath project at http://michaelnielsen.org/polymath1/index.php?title=Prime_counting_function\nand by Henri Lifchitz at\nhttp://web.archive.org/web/20070325064748/http://ourworld.compuserve.com/homepages/hlifchitz/Henri/us/ParPius.htm\n\n\n\nGourdon, an author of a variant of the combinatorial prime_pi method links to this page at http://numbers.computation.free.fr/Constants/Primes/countingPrimes.html, however Gourdon's link to Henri Lifchitz's page is dead and you have to use the wayback machine.  At Lifchitz's page is his paper on calculating the parity of prime_pi and a program that works up to (unfortunately only) 1e19, and seems to be a little slow.\n\n\n\nGourdon has a pix program released at http://numbers.computation.free.fr/Constants/Primes/Pix/contributepixtable.html that he used for his distributed pix project.  I'm not sure what range is allowed, how long computation takes, or if the code is open source.  But it *might* work for you.  There is also a table of 7702/9001 values of pi(x) computed in the range 1000e14 -> 10000e14 available from Gourdon's pix project at http://numbers.computation.free.fr/Constants/Primes/Pix/resultstable.php.  Not the range you were asking for, but still worth noting.  Take this data and program with a grain of salt- although Gourdon is surely a better programmer and mathematician than myself, he had to halt his pix program when he found his code was off by one in the global checks for prime_pi(10<sup>23</sup>)\n\n\n\nTOS will probably release more values of prime_pi up to 4e18 after his Golbach conjecture verification project is complete, but since these aren't in the range you need, I would recommend contacting Gourdon or TOS directly asking for values for verification.\n\n\n\nKevin Stueve",
    "created_at": "2010-01-11T02:09:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57358",
    "user": "https://github.com/sagetrac-kevin-stueve"
}
```

<a id='comment:15'>**Comment 15:**</a>
Sorry.  Right now you have the values:



x                          pi(x)


18440 00000 00000 00000 : 425 50425 77541 37607

18446 74407 37095 51616 : 425 65628 40352 17743 

18450 00000 00000 00000 : 425 72967 93423 72554


from http://www.primefan.ru/stuff/primes/table.html and http://www.ieeta.pt/~tos/bib/5.4.pdf.

You could sieve part of this interval for more values.  You could contact one of the authors of one of the variants of combinatorial method asking for other values (Such as Gourdon, TOS, etc).

Another possibility is using a O(x<sup>1/2</sup> log(x)) algorithm that computes the parity (even or odd) of the prime counting function, for a limited amount of verification of values of the prime counting function.  This algorithm is described by Terence Tao and others at the polymath project at http://michaelnielsen.org/polymath1/index.php?title=Prime_counting_function
and by Henri Lifchitz at
http://web.archive.org/web/20070325064748/http://ourworld.compuserve.com/homepages/hlifchitz/Henri/us/ParPius.htm



Gourdon, an author of a variant of the combinatorial prime_pi method links to this page at http://numbers.computation.free.fr/Constants/Primes/countingPrimes.html, however Gourdon's link to Henri Lifchitz's page is dead and you have to use the wayback machine.  At Lifchitz's page is his paper on calculating the parity of prime_pi and a program that works up to (unfortunately only) 1e19, and seems to be a little slow.



Gourdon has a pix program released at http://numbers.computation.free.fr/Constants/Primes/Pix/contributepixtable.html that he used for his distributed pix project.  I'm not sure what range is allowed, how long computation takes, or if the code is open source.  But it *might* work for you.  There is also a table of 7702/9001 values of pi(x) computed in the range 1000e14 -> 10000e14 available from Gourdon's pix project at http://numbers.computation.free.fr/Constants/Primes/Pix/resultstable.php.  Not the range you were asking for, but still worth noting.  Take this data and program with a grain of salt- although Gourdon is surely a better programmer and mathematician than myself, he had to halt his pix program when he found his code was off by one in the global checks for prime_pi(10<sup>23</sup>)



TOS will probably release more values of prime_pi up to 4e18 after his Golbach conjecture verification project is complete, but since these aren't in the range you need, I would recommend contacting Gourdon or TOS directly asking for values for verification.



Kevin Stueve



---

archive/issue_comments_057359.json:
```json
{
    "body": "<a id='comment:16'>**Comment 16:**</a>\nReplying to [@nexttime](#comment%3A11):\n> Now going to extend its domain further up to 2<sup>64</sup>-1...\n\n\n```\n\tpi(10000000000000000000)=234057667276344607\t# ok\n\tpi(10000100000000000000)=234059953037027338     # ok (sieved)\n\tpi(10001000000000000000)=234080524854508201\n\tpi(10002000000000000000)=234103382381000184\n\tpi(10003000000000000000)=234126239852389526\n\tpi(10004000000000000000)=234149097272730775\n\tpi(10005000000000000000)=234171954644081388\n\tpi(10006000000000000000)=234194811963658747\n\tpi(10007000000000000000)=234217669226973010\n\tpi(10008000000000000000)=234240526435037954\n\tpi(10009000000000000000)=234263383594121363\n\tpi(10010000000000000000)=234286240703110411\t# ok\n\tpi(18440000000000000000)=425504257754137607\t# ok\n\tpi(18441000000000000000)=425526800039801658\n\tpi(18442000000000000000)=425549342293840481\n\tpi(18443000000000000000)=425571884521908383\n\tpi(18444000000000000000)=425594426720237587\n\tpi(18445000000000000000)=425616968892901351\n\tpi(18446000000000000000)=425639511036514638\n\tpi(18446100000000000000)=425641765249620069\n\tpi(18446200000000000000)=425644019461402605\n\tpi(18446300000000000000)=425646273676018091\n\tpi(18446400000000000000)=425648527886817884\n\tpi(18446500000000000000)=425650782098479434\n\tpi(18446600000000000000)=425653036308859193\n\tpi(18446700000000000000)=425655290520421050\n\tpi(18446744073709551615)=425656284035217743\t# ok\n\n```\n\nHappy validating... ;-)\n\n*\"You just need a computer with a pentium or equivalent chip, turning on windows 95, 98 or NT. ...\"* [Xavier Gourdon about his \"fastpix11\"]\n\n(Still cleaning up the code.)\n\n-Leif",
    "created_at": "2010-01-15T04:17:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57359",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:16'>**Comment 16:**</a>
Replying to [@nexttime](#comment%3A11):
> Now going to extend its domain further up to 2<sup>64</sup>-1...


```
	pi(10000000000000000000)=234057667276344607	# ok
	pi(10000100000000000000)=234059953037027338     # ok (sieved)
	pi(10001000000000000000)=234080524854508201
	pi(10002000000000000000)=234103382381000184
	pi(10003000000000000000)=234126239852389526
	pi(10004000000000000000)=234149097272730775
	pi(10005000000000000000)=234171954644081388
	pi(10006000000000000000)=234194811963658747
	pi(10007000000000000000)=234217669226973010
	pi(10008000000000000000)=234240526435037954
	pi(10009000000000000000)=234263383594121363
	pi(10010000000000000000)=234286240703110411	# ok
	pi(18440000000000000000)=425504257754137607	# ok
	pi(18441000000000000000)=425526800039801658
	pi(18442000000000000000)=425549342293840481
	pi(18443000000000000000)=425571884521908383
	pi(18444000000000000000)=425594426720237587
	pi(18445000000000000000)=425616968892901351
	pi(18446000000000000000)=425639511036514638
	pi(18446100000000000000)=425641765249620069
	pi(18446200000000000000)=425644019461402605
	pi(18446300000000000000)=425646273676018091
	pi(18446400000000000000)=425648527886817884
	pi(18446500000000000000)=425650782098479434
	pi(18446600000000000000)=425653036308859193
	pi(18446700000000000000)=425655290520421050
	pi(18446744073709551615)=425656284035217743	# ok

```

Happy validating... ;-)

*"You just need a computer with a pentium or equivalent chip, turning on windows 95, 98 or NT. ..."* [Xavier Gourdon about his "fastpix11"]

(Still cleaning up the code.)

-Leif



---

archive/issue_comments_057360.json:
```json
{
    "body": "<a id='comment:17'>**Comment 17:**</a>\nImportant update:\n\"WARNING! The data for x = 6.5402\u00b710<sup>15</sup> and for x = 6.6808\u00b710<sup>15</sup> was incorrect before February 21, 2010.\"\nhttp://www.primefan.ru/stuff/primes/table.html\n\nWe need to check our data.",
    "created_at": "2010-03-03T11:40:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57360",
    "user": "https://github.com/sagetrac-kevin-stueve"
}
```

<a id='comment:17'>**Comment 17:**</a>
Important update:
"WARNING! The data for x = 6.5402¬∑10<sup>15</sup> and for x = 6.6808¬∑10<sup>15</sup> was incorrect before February 21, 2010."
http://www.primefan.ru/stuff/primes/table.html

We need to check our data.



---

archive/issue_comments_057361.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,11 +1,5 @@\n This ticket was split away from #7013:\n \n-Let's create a \"primes.p0.spkg\" (better names appreciated ...) which provides the \"prime_sieve.c\" code/functionality from T. Oliveira e Silva as a library.\n+The goal of this ticket is to create an spkg for primesieve (http://primesieve.googlecode.com) which provides the functionality of primesieve is a shared library.\n \n-Primary goal: The function \"primes_interval()\" from \"prime_sieve.c\" is accessible from a dynamic library \"libprimes.so\" resp. \"libprimes.dylib\" (resp. \"libprimes.dll\" if Cygwin is in our scope), which in turn compiles (and works correctly ...) on the platforms Sage supports, to be a part of future versions of Sage.\n-\n-Secondary goal: This spkg also provides (i.e. contains) certain precomputed tables from Kevin Stueve (which in a Sage installation will be installed under \"data/prime_pi_tables/\").\n-\n-Tertiary goal: Provide the LMO code/functionality from Victor Miller in the same way, too. (Eventually outside the scope of this ticket, so potentially another follow-up ticket.)\n-\n-Maintainers till end 2010: Andrew Rohana, Georg S. Weber\n+An initial spkg is available at http://wstein.org/home/ohanar/primesieve/primesieve-3.4.p1.spkg.\n``````\n",
    "created_at": "2012-01-05T01:38:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57361",
    "user": "https://github.com/ohanar"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,11 +1,5 @@
 This ticket was split away from #7013:
 
-Let's create a "primes.p0.spkg" (better names appreciated ...) which provides the "prime_sieve.c" code/functionality from T. Oliveira e Silva as a library.
+The goal of this ticket is to create an spkg for primesieve (http://primesieve.googlecode.com) which provides the functionality of primesieve is a shared library.
 
-Primary goal: The function "primes_interval()" from "prime_sieve.c" is accessible from a dynamic library "libprimes.so" resp. "libprimes.dylib" (resp. "libprimes.dll" if Cygwin is in our scope), which in turn compiles (and works correctly ...) on the platforms Sage supports, to be a part of future versions of Sage.
-
-Secondary goal: This spkg also provides (i.e. contains) certain precomputed tables from Kevin Stueve (which in a Sage installation will be installed under "data/prime_pi_tables/").
-
-Tertiary goal: Provide the LMO code/functionality from Victor Miller in the same way, too. (Eventually outside the scope of this ticket, so potentially another follow-up ticket.)
-
-Maintainers till end 2010: Andrew Rohana, Georg S. Weber
+An initial spkg is available at http://wstein.org/home/ohanar/primesieve/primesieve-3.4.p1.spkg.
``````




---

archive/issue_events_077322.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2012-01-05T01:38:55Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "rename": {
        "from": "primes.p0.spkg with \"prime_sieve.c\" functionality",
        "to": "primesieve spkg"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7539#event-77322"
}
```



---

archive/issue_comments_057362.json:
```json
{
    "body": "<a id='comment:18'>**Comment 18:**</a>\nConsidering that Kevin decided to go with primesieve over Silva's \"prime_sieve.c\", I think that it is appropriate to use this ticket to discuss the primesieve spkg (since the functionality is simply a superset of \"prime_sieve.c\").\n\nI've created an initial spkg, although for the moment implicitly assumes that gcc >= version 4.2.",
    "created_at": "2012-01-05T01:38:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57362",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:18'>**Comment 18:**</a>
Considering that Kevin decided to go with primesieve over Silva's "prime_sieve.c", I think that it is appropriate to use this ticket to discuss the primesieve spkg (since the functionality is simply a superset of "prime_sieve.c").

I've created an initial spkg, although for the moment implicitly assumes that gcc >= version 4.2.



---

archive/issue_comments_057363.json:
```json
{
    "body": "**Changing author** from \"ohanar, GeorgSWeber\" to \"ohanar\".",
    "created_at": "2012-01-05T01:38:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57363",
    "user": "https://github.com/ohanar"
}
```

**Changing author** from "ohanar, GeorgSWeber" to "ohanar".



---

archive/issue_comments_057364.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,4 +2,6 @@\n \n The goal of this ticket is to create an spkg for primesieve (http://primesieve.googlecode.com) which provides the functionality of primesieve is a shared library.\n \n-An initial spkg is available at http://wstein.org/home/ohanar/primesieve/primesieve-3.4.p1.spkg.\n+Install [primesieve-3.4.p2.spkg](http://wstein.org/home/ohanar/primesieve/primesieve-3.4.p2.spkg).\n+\n+Apply [trac7539_initial.patch](http://wstein.org/home/ohanar/primesieve/trac7539_initial.patch) and either [trac7539_standard.patch](http://wstein.org/home/ohanar/primesieve/trac7539_standard.patch) xor [trac7539_optional.patch](http://wstein.org/home/ohanar/primesieve/trac7539_optional.patch).\n``````\n",
    "created_at": "2012-01-22T15:18:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57364",
    "user": "https://github.com/ohanar"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,4 +2,6 @@
 
 The goal of this ticket is to create an spkg for primesieve (http://primesieve.googlecode.com) which provides the functionality of primesieve is a shared library.
 
-An initial spkg is available at http://wstein.org/home/ohanar/primesieve/primesieve-3.4.p1.spkg.
+Install [primesieve-3.4.p2.spkg](http://wstein.org/home/ohanar/primesieve/primesieve-3.4.p2.spkg).
+
+Apply [trac7539_initial.patch](http://wstein.org/home/ohanar/primesieve/trac7539_initial.patch) and either [trac7539_standard.patch](http://wstein.org/home/ohanar/primesieve/trac7539_standard.patch) xor [trac7539_optional.patch](http://wstein.org/home/ohanar/primesieve/trac7539_optional.patch).
``````




---

archive/issue_comments_057365.json:
```json
{
    "body": "<a id='comment:19'>**Comment 19:**</a>\nI've worked on this a little, and have posted an updated spkg. Unfortunately there are some major issues with primesieve on big endian systems. I have added a patch that stops the vast majority of the segfaults, however, there is still the occasional segfault. Even without segfaulting, the library gives very incorrect values on big endian systems.\n\nI've also posted a few patches, one that provides a cython wrapper, and a couple that sets up the package as either standard or optional. All of these were based off of 5.0.prealpha1, so they may have some fuzz factors to them (especially the later two).",
    "created_at": "2012-01-22T15:18:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57365",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:19'>**Comment 19:**</a>
I've worked on this a little, and have posted an updated spkg. Unfortunately there are some major issues with primesieve on big endian systems. I have added a patch that stops the vast majority of the segfaults, however, there is still the occasional segfault. Even without segfaulting, the library gives very incorrect values on big endian systems.

I've also posted a few patches, one that provides a cython wrapper, and a couple that sets up the package as either standard or optional. All of these were based off of 5.0.prealpha1, so they may have some fuzz factors to them (especially the later two).



---

archive/issue_events_077323.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7539#event-77323"
}
```



---

archive/issue_events_077324.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7539#event-77324"
}
```



---

archive/issue_comments_057366.json:
```json
{
    "body": "**Attachment:** [primesieve-sage-root.patch.gz](https://github.com/sagemath/sage/files/ticket7539/primesieve-sage-root.patch.gz)\n\nIntegrates primesieve-4.4.spkg into sagemath",
    "created_at": "2013-09-09T12:33:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57366",
    "user": "https://github.com/sagetrac-walki"
}
```

**Attachment:** [primesieve-sage-root.patch.gz](https://github.com/sagemath/sage/files/ticket7539/primesieve-sage-root.patch.gz)

Integrates primesieve-4.4.spkg into sagemath



---

archive/issue_comments_057367.json:
```json
{
    "body": "**Attachment:** [primesieve-sage-main.patch.gz](https://github.com/sagemath/sage/files/ticket7539/primesieve-sage-main.patch.gz)\n\nInitial primesieve patch",
    "created_at": "2013-09-09T12:34:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57367",
    "user": "https://github.com/sagetrac-walki"
}
```

**Attachment:** [primesieve-sage-main.patch.gz](https://github.com/sagemath/sage/files/ticket7539/primesieve-sage-main.patch.gz)

Initial primesieve patch



---

archive/issue_comments_057368.json:
```json
{
    "body": "<a id='comment:21'>**Comment 21:**</a>\nI have attached the two patches 'primesieve-sage-root.patch' and '02_primesieve-sage-main.patch' to this ticket, the corresponding spkg package can be downloaded from https://primesieve.googlecode.com/files/primesieve-4.4.spkg. These patches integrate primesieve-4.4 into sage-5.12.beta4. The patches include a Cython wrapper around the ParallelPrimeSieve C++ API (by default single-threaded due to #12690) and improvements to the prime_range() and primes_first_n() functions. These patches were written by Andrew Ohana and myself.\n\nRegards,\n\nKim Walisch",
    "created_at": "2013-09-09T13:07:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57368",
    "user": "https://github.com/sagetrac-walki"
}
```

<a id='comment:21'>**Comment 21:**</a>
I have attached the two patches 'primesieve-sage-root.patch' and '02_primesieve-sage-main.patch' to this ticket, the corresponding spkg package can be downloaded from https://primesieve.googlecode.com/files/primesieve-4.4.spkg. These patches integrate primesieve-4.4 into sage-5.12.beta4. The patches include a Cython wrapper around the ParallelPrimeSieve C++ API (by default single-threaded due to #12690) and improvements to the prime_range() and primes_first_n() functions. These patches were written by Andrew Ohana and myself.

Regards,

Kim Walisch



---

archive/issue_comments_057369.json:
```json
{
    "body": "The previous version had indentation errors in the file fast_arith.pyx.",
    "created_at": "2013-09-09T19:49:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57369",
    "user": "https://github.com/sagetrac-walki"
}
```

The previous version had indentation errors in the file fast_arith.pyx.



---

archive/issue_comments_057370.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,6 +2,10 @@\n \n The goal of this ticket is to create an spkg for primesieve (http://primesieve.googlecode.com) which provides the functionality of primesieve is a shared library.\n \n-Install [primesieve-3.4.p2.spkg](http://wstein.org/home/ohanar/primesieve/primesieve-3.4.p2.spkg).\n+---\n \n-Apply [trac7539_initial.patch](http://wstein.org/home/ohanar/primesieve/trac7539_initial.patch) and either [trac7539_standard.patch](http://wstein.org/home/ohanar/primesieve/trac7539_standard.patch) xor [trac7539_optional.patch](http://wstein.org/home/ohanar/primesieve/trac7539_optional.patch).\n+Installation instructions:\n+\n+1. Add [https://primesieve.googlecode.com/files/primesieve-4.4.spkg:primesieve-4.4.spkg](https://primesieve.googlecode.com/files/primesieve-4.4.spkg:primesieve-4.4.spkg) to spkg/standard.\n+2. Apply [attachment:02_primesieve-sage-main.patch](https://github.com/sagemath/sage/files/ticket7539/02_primesieve-sage-main.patch) to the Sage library repository.\n+3. Apply [attachment:primesieve-sage-root.patch](https://github.com/sagemath/sage/files/ticket7539/primesieve-sage-root.patch) to the root repository.\n``````\n",
    "created_at": "2013-09-10T03:42:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57370",
    "user": "https://github.com/ohanar"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,6 +2,10 @@
 
 The goal of this ticket is to create an spkg for primesieve (http://primesieve.googlecode.com) which provides the functionality of primesieve is a shared library.
 
-Install [primesieve-3.4.p2.spkg](http://wstein.org/home/ohanar/primesieve/primesieve-3.4.p2.spkg).
+---
 
-Apply [trac7539_initial.patch](http://wstein.org/home/ohanar/primesieve/trac7539_initial.patch) and either [trac7539_standard.patch](http://wstein.org/home/ohanar/primesieve/trac7539_standard.patch) xor [trac7539_optional.patch](http://wstein.org/home/ohanar/primesieve/trac7539_optional.patch).
+Installation instructions:
+
+1. Add [https://primesieve.googlecode.com/files/primesieve-4.4.spkg:primesieve-4.4.spkg](https://primesieve.googlecode.com/files/primesieve-4.4.spkg:primesieve-4.4.spkg) to spkg/standard.
+2. Apply [attachment:02_primesieve-sage-main.patch](https://github.com/sagemath/sage/files/ticket7539/02_primesieve-sage-main.patch) to the Sage library repository.
+3. Apply [attachment:primesieve-sage-root.patch](https://github.com/sagemath/sage/files/ticket7539/primesieve-sage-root.patch) to the root repository.
``````




---

archive/issue_events_077325.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2013-09-10T03:42:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7539#event-77325"
}
```



---

archive/issue_comments_057371.json:
```json
{
    "body": "**Changing author** from \"ohanar\" to \"Kim Walisch\".",
    "created_at": "2013-09-10T03:42:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57371",
    "user": "https://github.com/ohanar"
}
```

**Changing author** from "ohanar" to "Kim Walisch".



---

archive/issue_comments_057372.json:
```json
{
    "body": "<a id='comment:22'>**Comment 22:**</a>\n**Attachment:** [02_primesieve-sage-main.patch.gz](https://github.com/sagemath/sage/files/ticket7539/02_primesieve-sage-main.patch.gz)\n\nI've reviewed this code while Kim was writing it, so other than the following questions/concerns, it has a positive review from me.\n\n1. What is our policy with licencing files in the Sage library. This patch adds two files which are marked as BSD licensed, is this ok? (given that the Sage library as a whole is GPL licensed)\n2. What is the current policy on adding new standard SPKGs? At some point it was decided that all new SPKGs had to be optional before they were made standard, but this requirement has been repeatedly ignored.\n3. Would it make sense stripping out the directory src/src/apps/gui? This would reduce the size of the spkg by over half.\n\nP.S. Kim, would you please update the list of developers on trac's homepage so people know who you are.",
    "created_at": "2013-09-10T03:42:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57372",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:22'>**Comment 22:**</a>
**Attachment:** [02_primesieve-sage-main.patch.gz](https://github.com/sagemath/sage/files/ticket7539/02_primesieve-sage-main.patch.gz)

I've reviewed this code while Kim was writing it, so other than the following questions/concerns, it has a positive review from me.

1. What is our policy with licencing files in the Sage library. This patch adds two files which are marked as BSD licensed, is this ok? (given that the Sage library as a whole is GPL licensed)
2. What is the current policy on adding new standard SPKGs? At some point it was decided that all new SPKGs had to be optional before they were made standard, but this requirement has been repeatedly ignored.
3. Would it make sense stripping out the directory src/src/apps/gui? This would reduce the size of the spkg by over half.

P.S. Kim, would you please update the list of developers on trac's homepage so people know who you are.



---

archive/issue_comments_057373.json:
```json
{
    "body": "**Reviewer:** R. Andrew Ohana",
    "created_at": "2013-09-10T03:42:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57373",
    "user": "https://github.com/ohanar"
}
```

**Reviewer:** R. Andrew Ohana



---

archive/issue_events_077326.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2013-09-10T03:43:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7539#event-77326"
}
```



---

archive/issue_events_077327.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2013-09-10T03:43:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7539#event-77327"
}
```



---

archive/issue_comments_057374.json:
```json
{
    "body": "<a id='comment:24'>**Comment 24:**</a>\n> 1. This patch adds two files which are marked as BSD licensed, is this ok? ...\n\n\nNo, it cannot be BSD licensed as primesieve.pyx includes Sage headers that are GPL licensed. I relicensed the primesieve.pyx and primesieve.pxd files to GPL. The corresponding patch is 03_primesieve-sage-main.patch.\n\n\n\n> 2. What is the current policy on adding new standard SPKGs? ...\n\n\nSlightly off topic: primesieve is highly portable, its Makefile is Posix compatible and primesieve builds without any issues on Linux, Mac OS X, BSD and Cygwin and runs on both little and big endian CPUs. Also primesieve has no dependencies on other libraries.\n\n\n\n> 3. Would it make sense stripping out the directory src/src/apps/gui? This would reduce the size of the spkg by over half.\n\n\nYes, this makes sense. On the other hand the size of the compressed spkg package is only 120 kilobytes and removing this directory makes packaging new primesieve releases a little more difficult.",
    "created_at": "2013-09-10T08:37:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57374",
    "user": "https://github.com/sagetrac-walki"
}
```

<a id='comment:24'>**Comment 24:**</a>
> 1. This patch adds two files which are marked as BSD licensed, is this ok? ...


No, it cannot be BSD licensed as primesieve.pyx includes Sage headers that are GPL licensed. I relicensed the primesieve.pyx and primesieve.pxd files to GPL. The corresponding patch is 03_primesieve-sage-main.patch.



> 2. What is the current policy on adding new standard SPKGs? ...


Slightly off topic: primesieve is highly portable, its Makefile is Posix compatible and primesieve builds without any issues on Linux, Mac OS X, BSD and Cygwin and runs on both little and big endian CPUs. Also primesieve has no dependencies on other libraries.



> 3. Would it make sense stripping out the directory src/src/apps/gui? This would reduce the size of the spkg by over half.


Yes, this makes sense. On the other hand the size of the compressed spkg package is only 120 kilobytes and removing this directory makes packaging new primesieve releases a little more difficult.



---

archive/issue_comments_057375.json:
```json
{
    "body": "Same as 02_primesieve-sage-main.patch but uses GPL instead of BSD license.",
    "created_at": "2013-09-10T08:40:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57375",
    "user": "https://github.com/sagetrac-walki"
}
```

Same as 02_primesieve-sage-main.patch but uses GPL instead of BSD license.



---

archive/issue_comments_057376.json:
```json
{
    "body": "<a id='comment:25'>**Comment 25:**</a>\n**Attachment:** [03_primesieve-sage-main.patch.gz](https://github.com/sagemath/sage/files/ticket7539/03_primesieve-sage-main.patch.gz)",
    "created_at": "2014-01-30T21:20:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57376",
    "user": "https://github.com/sagetrac-vbraun-spam"
}
```

<a id='comment:25'>**Comment 25:**</a>
**Attachment:** [03_primesieve-sage-main.patch.gz](https://github.com/sagemath/sage/files/ticket7539/03_primesieve-sage-main.patch.gz)



---

archive/issue_events_077328.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7539#event-77328"
}
```



---

archive/issue_events_077329.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7539#event-77329"
}
```



---

archive/issue_events_077330.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7539#event-77330"
}
```



---

archive/issue_events_077331.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7539#event-77331"
}
```



---

archive/issue_events_077332.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7539#event-77332"
}
```



---

archive/issue_events_077333.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7539#event-77333"
}
```



---

archive/issue_events_077334.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-02T00:48:16Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7539#event-77334"
}
```



---

archive/issue_comments_057377.json:
```json
{
    "body": "**Changing reviewer** from \"R. Andrew Ohana\" to \"\".",
    "created_at": "2021-12-02T00:48:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57377",
    "user": "https://github.com/mkoeppe"
}
```

**Changing reviewer** from "R. Andrew Ohana" to "".



---

archive/issue_events_077335.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-02T00:48:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7539#event-77335"
}
```



---

archive/issue_events_077336.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-02T00:48:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7539#event-77336"
}
```



---

archive/issue_comments_057378.json:
```json
{
    "body": "**Changing author** from \"Kim Walisch\" to \"\".",
    "created_at": "2021-12-02T00:48:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57378",
    "user": "https://github.com/mkoeppe"
}
```

**Changing author** from "Kim Walisch" to "".



---

archive/issue_comments_057379.json:
```json
{
    "body": "<a id='comment:28'>**Comment 28:**</a>\nHappening now in #25009.",
    "created_at": "2021-12-02T00:48:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57379",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:28'>**Comment 28:**</a>
Happening now in #25009.



---

archive/issue_comments_057380.json:
```json
{
    "body": "<a id='comment:29'>**Comment 29:**</a>\nCollective apologies to Kim Walisch for allowing this to bitrot.\nBut primecount spkg is coming up on #25009.",
    "created_at": "2021-12-02T11:35:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57380",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:29'>**Comment 29:**</a>
Collective apologies to Kim Walisch for allowing this to bitrot.
But primecount spkg is coming up on #25009.



---

archive/issue_events_077337.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-12-02T11:35:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7539#event-77337"
}
```



---

archive/issue_events_077338.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-12-02T11:35:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7539#event-77338"
}
```



---

archive/issue_comments_057381.json:
```json
{
    "body": "**Reviewer:** Dima Pasechnik",
    "created_at": "2021-12-02T11:35:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57381",
    "user": "https://github.com/dimpase"
}
```

**Reviewer:** Dima Pasechnik



---

archive/issue_comments_057382.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,6 +1,9 @@\n This ticket was split away from #7013:\n \n The goal of this ticket is to create an spkg for primesieve (http://primesieve.googlecode.com) which provides the functionality of primesieve is a shared library.\n+\n+The followup ticket is #25009\n+\n \n ---\n \n``````\n",
    "created_at": "2021-12-02T11:36:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7539#issuecomment-57382",
    "user": "https://github.com/dimpase"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,6 +1,9 @@
 This ticket was split away from #7013:
 
 The goal of this ticket is to create an spkg for primesieve (http://primesieve.googlecode.com) which provides the functionality of primesieve is a shared library.
+
+The followup ticket is #25009
+
 
 ---
 
``````




---

archive/issue_events_077339.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-03T18:41:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7539#event-77339"
}
```



---

archive/issue_events_077340.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-03T18:41:01Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/7539",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7539#event-77340"
}
```
