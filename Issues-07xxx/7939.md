# Issue 7939: shorten doctests in sage/rings/polynomial/multi_polynomial_ideal.py

archive/issues_007939.json:
```json
{
    "assignees": [],
    "body": "Some of these doctests need to be marked `# long time`, at the very least.\n\nCC:  @sagetrac-PolyBoRi\n\nAuthor: **Martin Albrecht**\n\nReviewer: **Michael Brickenstein, Alex Ghitza**\n\nMerged: **sage-4.3.2.alpha0**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/7939_\n\n",
    "closed_at": "2010-01-24T17:38:54Z",
    "created_at": "2010-01-16T02:42:29Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20interfaces",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.3.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "shorten doctests in sage/rings/polynomial/multi_polynomial_ideal.py",
    "type": "issue",
    "updated_at": "2010-01-24T17:38:54Z",
    "url": "https://github.com/sagemath/sage/issues/7939",
    "user": "https://github.com/rlmill"
}
```
Some of these doctests need to be marked `# long time`, at the very least.

CC:  @sagetrac-PolyBoRi

Author: **Martin Albrecht**

Reviewer: **Michael Brickenstein, Alex Ghitza**

Merged: **sage-4.3.2.alpha0**

_Issue created by migration from https://trac.sagemath.org/ticket/7939_





---

archive/issue_events_089680.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-01-16T02:42:29Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "milestone_number": null,
    "milestone_title": "sage-4.3.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7939#event-89680"
}
```



---

archive/issue_events_089681.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-01-16T02:42:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20algebra",
    "label_color": "0000ff",
    "label_name": "component: algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7939#event-89681"
}
```



---

archive/issue_events_089682.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-01-16T02:42:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7939#event-89682"
}
```



---

archive/issue_events_089683.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-01-16T02:42:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7939#event-89683"
}
```



---

archive/issue_comments_062341.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nNote that just about every time I run all tests I get the following:\n\n```\nsage -t  ./sage/rings/polynomial/multi_polynomial_ideal.py\n*** *** Error: TIMED OUT! PROCESS KILLED! *** ***\n*** *** Error: TIMED OUT! *** ***\nA mysterious error (perhaps a memory error?) occurred, which may have crashed doctest.\n```\n\nAlthough, I never get this error when just running `sage -t  ./sage/rings/polynomial/multi_polynomial_ideal.py`.",
    "created_at": "2010-01-18T19:19:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7939#issuecomment-62341",
    "user": "https://github.com/rlmill"
}
```

<div id="comment:1" align="right">Comment 1</div>

Note that just about every time I run all tests I get the following:

```
sage -t  ./sage/rings/polynomial/multi_polynomial_ideal.py
*** *** Error: TIMED OUT! PROCESS KILLED! *** ***
*** *** Error: TIMED OUT! *** ***
A mysterious error (perhaps a memory error?) occurred, which may have crashed doctest.
```

Although, I never get this error when just running `sage -t  ./sage/rings/polynomial/multi_polynomial_ideal.py`.



---

archive/issue_comments_062342.json:
```json
{
    "body": "Removed assignee **@aghitza**",
    "created_at": "2010-01-18T20:25:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7939#issuecomment-62342",
    "user": "https://github.com/rlmill"
}
```

Removed assignee **@aghitza**



---

archive/issue_events_089684.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-01-18T20:25:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20algebra",
    "label_color": "0000ff",
    "label_name": "component: algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7939#event-89684"
}
```



---

archive/issue_events_089685.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-01-18T20:25:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "label": "https://github.com/sagemath/sage/labels/doctest%20coverage",
    "label_color": "696969",
    "label_name": "doctest coverage",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7939#event-89685"
}
```



---

archive/issue_comments_062343.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nRobert wrote:\n> In running parallel doctests, I'm noticing that\n> multi_polynomial_ideal.py is taking a very long time. Often, I get\n> some sort of weird time out error (with the corresponding mysterious\n> error/segfault message) when doing parallel testing, but I never get\n> this error when it is testing alone. Also, when running tests, and\n> looking at top, I notice that neither the python process or the\n> Singular process ever goes above about 10% (or at least spends most of\n> its time down around 0%-1%). Any ideas what is going on?\n\nI am afraid I cannot contribute much. One relevant pointer could be that we are shuffling a lot of data between Singular and Sage, potentially via temporary files, this could explain why no process ever gets over 10%?",
    "created_at": "2010-01-18T20:56:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7939#issuecomment-62343",
    "user": "https://github.com/malb"
}
```

<div id="comment:3" align="right">Comment 3</div>

Robert wrote:
> In running parallel doctests, I'm noticing that
> multi_polynomial_ideal.py is taking a very long time. Often, I get
> some sort of weird time out error (with the corresponding mysterious
> error/segfault message) when doing parallel testing, but I never get
> this error when it is testing alone. Also, when running tests, and
> looking at top, I notice that neither the python process or the
> Singular process ever goes above about 10% (or at least spends most of
> its time down around 0%-1%). Any ideas what is going on?

I am afraid I cannot contribute much. One relevant pointer could be that we are shuffling a lot of data between Singular and Sage, potentially via temporary files, this could explain why no process ever gets over 10%?



---

archive/issue_comments_062344.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nI decided to take another look. In the attached patch I move most of the functions in `multi_polynomial_ideal.py` to the new libsingular functions interface which does not need pexpect or IPC in general. \n\nOn my Macbook Pro vanilla Sage 4.3 takes roughly **48** seconds to doctest `multi_polynomial_ideal.py`. With the attached patch applied it takes **26** seconds. I'd expect bigger improvements on machines with slow I/O (e.g. disks).\n\nAs a side-effect, a lot of the ideal operations are considerably (100x and such) faster now and the libsingular functions interface is more robust and handles more functions now.\n\nNote that I tried to be a bit smart about the creation of the libsingular functions. One can now do:\n\n```\nsage: primdecSYZ = sage.libs.singular.ff.primdec.primdecSYZ\n```\n\nwhich will load 'primdec.lib' first and then create a wrapper for `primdecSYZ` in that library. A referee should also register whether he/she likes or dislikes this interface.\n\nThe attached patch requires an updated SPKG which is available at:\n\n   http://sage.math.washington.edu/home/malb/spkgs/singular-3-1-0-4-20100120.spkg\n\nI didn't mark any doctest `#long`, in fact, I added some doctests!",
    "created_at": "2010-01-20T17:51:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7939#issuecomment-62344",
    "user": "https://github.com/malb"
}
```

<div id="comment:4" align="right">Comment 4</div>

I decided to take another look. In the attached patch I move most of the functions in `multi_polynomial_ideal.py` to the new libsingular functions interface which does not need pexpect or IPC in general. 

On my Macbook Pro vanilla Sage 4.3 takes roughly **48** seconds to doctest `multi_polynomial_ideal.py`. With the attached patch applied it takes **26** seconds. I'd expect bigger improvements on machines with slow I/O (e.g. disks).

As a side-effect, a lot of the ideal operations are considerably (100x and such) faster now and the libsingular functions interface is more robust and handles more functions now.

Note that I tried to be a bit smart about the creation of the libsingular functions. One can now do:

```
sage: primdecSYZ = sage.libs.singular.ff.primdec.primdecSYZ
```

which will load 'primdec.lib' first and then create a wrapper for `primdecSYZ` in that library. A referee should also register whether he/she likes or dislikes this interface.

The attached patch requires an updated SPKG which is available at:

   http://sage.math.washington.edu/home/malb/spkgs/singular-3-1-0-4-20100120.spkg

I didn't mark any doctest `#long`, in fact, I added some doctests!



---

archive/issue_events_089686.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2010-01-20T17:52:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7939#event-89686"
}
```



---

archive/issue_comments_062345.json:
```json
{
    "body": "Author: **Martin Albrecht**",
    "created_at": "2010-01-20T17:52:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7939#issuecomment-62345",
    "user": "https://github.com/malb"
}
```

Author: **Martin Albrecht**



---

archive/issue_events_089687.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2010-01-20T17:52:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "label": "https://github.com/sagemath/sage/labels/doctest%20coverage",
    "label_color": "696969",
    "label_name": "doctest coverage",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7939#event-89687"
}
```



---

archive/issue_events_089688.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2010-01-20T17:52:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20interfaces",
    "label_color": "0000ff",
    "label_name": "component: interfaces",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7939#event-89688"
}
```



---

archive/issue_comments_062346.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\n**sage.math:** \n* vanilla:\n\n```\n*** *** Error: TIMED OUT! PROCESS KILLED! *** ***\n*** *** Error: TIMED OUT! *** ***\nA mysterious error (perhaps a memory error?) occurred, which may have crashed doctest.\n         [360.3 s]\n```\n\n* patch: **105** seconds",
    "created_at": "2010-01-20T18:09:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7939#issuecomment-62346",
    "user": "https://github.com/malb"
}
```

<div id="comment:6" align="right">Comment 6</div>

**sage.math:** 
* vanilla:

```
*** *** Error: TIMED OUT! PROCESS KILLED! *** ***
*** *** Error: TIMED OUT! *** ***
A mysterious error (perhaps a memory error?) occurred, which may have crashed doctest.
         [360.3 s]
```

* patch: **105** seconds



---

archive/issue_comments_062347.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nThe updated patch fixes all doctest issues (on sage.math) for me.",
    "created_at": "2010-01-20T18:50:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7939#issuecomment-62347",
    "user": "https://github.com/malb"
}
```

<div id="comment:7" align="right">Comment 7</div>

The updated patch fixes all doctest issues (on sage.math) for me.



---

archive/issue_comments_062348.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nMartin,\n\nThis is great stuff!  I'll try to look at it as soon as I get the released 4.3.1.",
    "created_at": "2010-01-20T21:52:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7939#issuecomment-62348",
    "user": "https://github.com/aghitza"
}
```

<div id="comment:8" align="right">Comment 8</div>

Martin,

This is great stuff!  I'll try to look at it as soon as I get the released 4.3.1.



---

archive/issue_comments_062349.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nSome details on how much faster single functions got:\n\n**vanilla**\n\n```python\nsage: P = PolynomialRing(GF(127),5,'x')\nsage: I = sage.rings.ideal.Cyclic(P)\nsage: %time _ = I.triangular_decomposition()\nCPU times: user 0.01 s, sys: 0.00 s, total: 0.01 s\nWall time: 4.83 s\n\nsage: %timeit I.basis_is_groebner(); I.basis_is_groebner.clear_cache()\n10 loops, best of 3: 520 ms per loop\n\nsage: I = Ideal([P.random_element() for _ in range(P.ngens())])\nsage: %time _ = I.variety()\nCPU times: user 0.01 s, sys: 0.00 s, total: 0.01 s\nWall time: 4.25 s\n```\n\n**patch**\n\n```python\nsage: P = PolynomialRing(GF(127),5,'x')\nsage: I = sage.rings.ideal.Cyclic(P)\nsage: %time _ = I.triangular_decomposition()\nCPU times: user 0.05 s, sys: 0.00 s, total: 0.05 s\nWall time: 0.64 s\n\nsage: %timeit I.basis_is_groebner(); I.basis_is_groebner.clear_cache()\n1000 loops, best of 3: 1.98 ms per loop\n\nsage: I = Ideal([P.random_element() for _ in range(P.ngens())])\nsage: %time _ = I.variety()\nCPU times: user 0.09 s, sys: 0.00 s, total: 0.09 s\nWall time: 0.64 s\n```\n\nAll timings on sage.math.",
    "created_at": "2010-01-20T23:10:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7939#issuecomment-62349",
    "user": "https://github.com/malb"
}
```

<div id="comment:9" align="right">Comment 9</div>

Some details on how much faster single functions got:

**vanilla**

```python
sage: P = PolynomialRing(GF(127),5,'x')
sage: I = sage.rings.ideal.Cyclic(P)
sage: %time _ = I.triangular_decomposition()
CPU times: user 0.01 s, sys: 0.00 s, total: 0.01 s
Wall time: 4.83 s

sage: %timeit I.basis_is_groebner(); I.basis_is_groebner.clear_cache()
10 loops, best of 3: 520 ms per loop

sage: I = Ideal([P.random_element() for _ in range(P.ngens())])
sage: %time _ = I.variety()
CPU times: user 0.01 s, sys: 0.00 s, total: 0.01 s
Wall time: 4.25 s
```

**patch**

```python
sage: P = PolynomialRing(GF(127),5,'x')
sage: I = sage.rings.ideal.Cyclic(P)
sage: %time _ = I.triangular_decomposition()
CPU times: user 0.05 s, sys: 0.00 s, total: 0.05 s
Wall time: 0.64 s

sage: %timeit I.basis_is_groebner(); I.basis_is_groebner.clear_cache()
1000 loops, best of 3: 1.98 ms per loop

sage: I = Ideal([P.random_element() for _ in range(P.ngens())])
sage: %time _ = I.variety()
CPU times: user 0.09 s, sys: 0.00 s, total: 0.09 s
Wall time: 0.64 s
```

All timings on sage.math.



---

archive/issue_comments_062350.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nHi!\nI did not try it.\nBut I am pleased about the refactorizations of the function interface:\nappend_... returns leftv.\nRegarding the passing of the attributes: \nI had something like that in mind. This is exactly, what is needed.\n\nRegarding the option handling. Maybe we should use Pythons with statement:\n\n```\nwith new_options:\n    ...\n```\n\nHere an example from PolyBoRi with rings instead of options\n\n```\n...\ndef __enter__(self):\n       old_ring=Ring()\n       class ContextGuard(object):\n           def __exit__(self, type, value, traceback):\n               old_ring.set()\n               return False\n       return ContextGuard()\n\n```\n\nBut this would affect the whole interface of the option class (not immediately setting options in singular...)\nSo, this is just a naive thought...\n\nCheers,\nMichael",
    "created_at": "2010-01-21T11:19:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7939#issuecomment-62350",
    "user": "https://github.com/sagetrac-PolyBoRi"
}
```

<div id="comment:10" align="right">Comment 10</div>

Hi!
I did not try it.
But I am pleased about the refactorizations of the function interface:
append_... returns leftv.
Regarding the passing of the attributes: 
I had something like that in mind. This is exactly, what is needed.

Regarding the option handling. Maybe we should use Pythons with statement:

```
with new_options:
    ...
```

Here an example from PolyBoRi with rings instead of options

```
...
def __enter__(self):
       old_ring=Ring()
       class ContextGuard(object):
           def __exit__(self, type, value, traceback):
               old_ring.set()
               return False
       return ContextGuard()

```

But this would affect the whole interface of the option class (not immediately setting options in singular...)
So, this is just a naive thought...

Cheers,
Michael



---

archive/issue_comments_062351.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nPasses tests for me.\n\nI tried to play with this a little bit, which lead to some questions:\n\n1. Is there any way to get tab-completion to work in this situation:\n\n```\nsage: groebner = sage.libs.singular.ff.gro<TAB>  ? cannot open `__members__.lib`\n   ? cannot open `__methods__.lib`\n   ? cannot open `trait_names.lib`\n   ? cannot open `_getAttributeNames.lib`\n```\n\n(If yes, maybe this should be a new ticket.)\n\n2. After I got over my laziness, I typed in the whole thing:\n\n```\nsage: groebner = sage.libs.singular.ff.groebner\nsage: P.<x, y> = QQ[]\nsage: I = P.ideal(x^2-y, x+y)\nsage: groebner(I)\n   ? error occurred in standard.lib::groebner line 850: `parameter def i_par; parameter  list #;  `\n---------------------------------------------------------------------------\nSystemError                               Traceback (most recent call last)\n\n/home/ghitza/<ipython console> in <module>()\n\nSystemError: NULL result without error in PyObject_Call\nsage: groebner(I, ring=P)\n   skipping text from `parameter` error at token `;`\n---------------------------------------------------------------------------\nSystemError                               Traceback (most recent call last)\n\n/home/ghitza/<ipython console> in <module>()\n\nSystemError: NULL result without error in PyObject_Call\nsage: from sage.libs.singular.function import SingularLibraryFunction\nsage: f = SingularLibraryFunction(\"groebner\")\nsage: f(I)\n---------------------------------------------------------------------------\nSystemError                               Traceback (most recent call last)\n\n/home/ghitza/<ipython console> in <module>()\n\nSystemError: NULL result without error in PyObject_Call\n```\n\nIs this a bug?  Or am I doing something silly?  If it's the latter, it would be good if there were an easy way for me to get help from the documentation.  I tried groebner? and groebner?? (which give very different results) but I couldn't get an answer quickly.\n\n\nSo I feel a little clueless at the moment.  I'm hoping your answers will help me out, and I'll look at this again.\n\n(I still think it's terrific stuff, though!)",
    "created_at": "2010-01-21T12:07:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7939#issuecomment-62351",
    "user": "https://github.com/aghitza"
}
```

<div id="comment:11" align="right">Comment 11</div>

Passes tests for me.

I tried to play with this a little bit, which lead to some questions:

1. Is there any way to get tab-completion to work in this situation:

```
sage: groebner = sage.libs.singular.ff.gro<TAB>  ? cannot open `__members__.lib`
   ? cannot open `__methods__.lib`
   ? cannot open `trait_names.lib`
   ? cannot open `_getAttributeNames.lib`
```

(If yes, maybe this should be a new ticket.)

2. After I got over my laziness, I typed in the whole thing:

```
sage: groebner = sage.libs.singular.ff.groebner
sage: P.<x, y> = QQ[]
sage: I = P.ideal(x^2-y, x+y)
sage: groebner(I)
   ? error occurred in standard.lib::groebner line 850: `parameter def i_par; parameter  list #;  `
---------------------------------------------------------------------------
SystemError                               Traceback (most recent call last)

/home/ghitza/<ipython console> in <module>()

SystemError: NULL result without error in PyObject_Call
sage: groebner(I, ring=P)
   skipping text from `parameter` error at token `;`
---------------------------------------------------------------------------
SystemError                               Traceback (most recent call last)

/home/ghitza/<ipython console> in <module>()

SystemError: NULL result without error in PyObject_Call
sage: from sage.libs.singular.function import SingularLibraryFunction
sage: f = SingularLibraryFunction("groebner")
sage: f(I)
---------------------------------------------------------------------------
SystemError                               Traceback (most recent call last)

/home/ghitza/<ipython console> in <module>()

SystemError: NULL result without error in PyObject_Call
```

Is this a bug?  Or am I doing something silly?  If it's the latter, it would be good if there were an easy way for me to get help from the documentation.  I tried groebner? and groebner?? (which give very different results) but I couldn't get an answer quickly.


So I feel a little clueless at the moment.  I'm hoping your answers will help me out, and I'll look at this again.

(I still think it's terrific stuff, though!)



---

archive/issue_events_089689.json:
```json
{
    "actor": "https://github.com/aghitza",
    "created_at": "2010-01-21T12:07:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7939#event-89689"
}
```



---

archive/issue_events_089690.json:
```json
{
    "actor": "https://github.com/aghitza",
    "created_at": "2010-01-21T12:07:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7939#event-89690"
}
```



---

archive/issue_comments_062352.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nReplying to [@aghitza](#comment%3A11):\n> 1. Is there any way to get tab-completion to work in this situation:\n\nYes, that should be possible since `ff` is just an object (so it only needs trait names or however this function is called).\n\nDo you like the name \"ff\" by the way (function factory)? It should be short but precise. \"factory\" is out, because there is a module in Singular called factory (for factorisation).\n \n> 2. After I got over my laziness, I typed in the whole thing:\n> \n> ```\n> sage: groebner = sage.libs.singular.ff.groebner\n> sage: P.<x, y> = QQ[]\n> sage: I = P.ideal(x^2-y, x+y)\n> sage: groebner(I)\n> ```\n\nWorks for me, I just tried it.\n \n> I tried groebner? and groebner?? (which give very different results) but I couldn't get an \n\nanswer quickly.\n\n`groebner?` will show you the Singular help while `groebner??` will show you the generic Singular function interface docstring. Maybe we should merge them in `groebner?`? Let me know in what order, and I can implement it.\n\n> (I still think it's terrific stuff, though!)",
    "created_at": "2010-01-21T12:29:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7939#issuecomment-62352",
    "user": "https://github.com/malb"
}
```

<div id="comment:12" align="right">Comment 12</div>

Replying to [@aghitza](#comment%3A11):
> 1. Is there any way to get tab-completion to work in this situation:

Yes, that should be possible since `ff` is just an object (so it only needs trait names or however this function is called).

Do you like the name "ff" by the way (function factory)? It should be short but precise. "factory" is out, because there is a module in Singular called factory (for factorisation).
 
> 2. After I got over my laziness, I typed in the whole thing:
> 
> ```
> sage: groebner = sage.libs.singular.ff.groebner
> sage: P.<x, y> = QQ[]
> sage: I = P.ideal(x^2-y, x+y)
> sage: groebner(I)
> ```

Works for me, I just tried it.
 
> I tried groebner? and groebner?? (which give very different results) but I couldn't get an 

answer quickly.

`groebner?` will show you the Singular help while `groebner??` will show you the generic Singular function interface docstring. Maybe we should merge them in `groebner?`? Let me know in what order, and I can implement it.

> (I still think it's terrific stuff, though!)



---

archive/issue_comments_062353.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nReplying to [@sagetrac-PolyBoRi](#comment%3A10):\n> Regarding the passing of the attributes: \n> I had something like that in mind. This is exactly, what is needed.\n\nActually, the interface should be: ` {obj:{'isSB':1}} ` because right now we don't support e.g. \"rank\" which takes an integer. I should probably change that before this patch goes in.\n \n> Regarding the option handling. Maybe we should use Pythons with statement:\n> \n> ```\n> with new_options:\n>     ...\n> ```\n> But this would affect the whole interface of the option class (not immediately setting options in singular...)\n\nWe do that for the `redSB` context, so you can enforce reduced GBs within a context. So an example session could be?\n\n```\nsage: opt = sage.libs.options.libsingular_options()\nsage: opt['redTail'] = True\nsage: with opt:\n...     blah?\n```\n\nMhh, does Cython support this yet?",
    "created_at": "2010-01-21T12:34:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7939#issuecomment-62353",
    "user": "https://github.com/malb"
}
```

<div id="comment:13" align="right">Comment 13</div>

Replying to [@sagetrac-PolyBoRi](#comment%3A10):
> Regarding the passing of the attributes: 
> I had something like that in mind. This is exactly, what is needed.

Actually, the interface should be: ` {obj:{'isSB':1}} ` because right now we don't support e.g. "rank" which takes an integer. I should probably change that before this patch goes in.
 
> Regarding the option handling. Maybe we should use Pythons with statement:
> 
> ```
> with new_options:
>     ...
> ```
> But this would affect the whole interface of the option class (not immediately setting options in singular...)

We do that for the `redSB` context, so you can enforce reduced GBs within a context. So an example session could be?

```
sage: opt = sage.libs.options.libsingular_options()
sage: opt['redTail'] = True
sage: with opt:
...     blah?
```

Mhh, does Cython support this yet?



---

archive/issue_comments_062354.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\n> We do that for the `redSB` context, so you can enforce reduced GBs within a context. So an example session could be?\n> \n> ```\n> sage: opt = sage.libs.options.libsingular_options()\n> sage: opt['redTail'] = True\n> sage: with opt:\n> ...     blah?\n> ```\n> \n\nThat would awesome and exception safe.\n\n> Mhh, does Cython support this yet?\n\nGood question.\n\nCheers,\nMichael",
    "created_at": "2010-01-21T12:49:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7939#issuecomment-62354",
    "user": "https://github.com/sagetrac-PolyBoRi"
}
```

<div id="comment:14" align="right">Comment 14</div>

> We do that for the `redSB` context, so you can enforce reduced GBs within a context. So an example session could be?
> 
> ```
> sage: opt = sage.libs.options.libsingular_options()
> sage: opt['redTail'] = True
> sage: with opt:
> ...     blah?
> ```
> 

That would awesome and exception safe.

> Mhh, does Cython support this yet?

Good question.

Cheers,
Michael



---

archive/issue_comments_062355.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nReplying to [@malb](#comment%3A12):\n> Do you like the name \"ff\" by the way (function factory)? It should be short but precise. \"factory\" is out, because there is a module in Singular called factory (for factorisation).\n\nWell, the other possibility that springs to mind is \"funfact\" :)  Seriously, I think \"ff\" is fine.\n\n> \n> Works for me, I just tried it.\n\nAnd now it also works for me.  I restarted sage and tried it again and it seems fine.  I'm not sure what triggered it before.  I'll let you know if I happen to run into it again.\n\n>  \n> > I tried groebner? and groebner?? (which give very different results) but I couldn't get an \n\n> answer quickly.\n> \n> `groebner?` will show you the Singular help while `groebner??` will show you the generic Singular function interface docstring. Maybe we should merge them in `groebner?`? Let me know in what order, and I can implement it.\n\nHere is what I get when I do these two:\n\nWith `groebner?` I get the Singular help followed by\n\n```\nCall def:       groebner(self, *args, ring=None, interruptible=True, attributes=None)\n\nCall docstring:\n    \n            Call this function with the provided arguments ``args`` in the\n            ring ``R``.\n    \n            INPUT:\n    \n            - ``args`` - a list of arguments\n    \n            - ``ring`` - a multivariate polynomial ring\n    \n            - ``interruptible`` - if ``True`` pressing Ctrl-C during the\n                                  execution of this function will\n                                  interrupt the computation (default: ``True``)\n    \n            - ``attributes`` - a dictionary of optional Singular\n                               attributes assigned to Singular objects (default: ``None``)\n    \n            EXAMPLE::\n    \n                sage: from sage.libs.singular.function import singular_function\n                sage: size = singular_function('size')\n                sage: P.<a,b,c> = PolynomialRing(QQ)\n                sage: size(a, ring=P)\n                1\n                sage: size(2r,ring=P)\n                1\n                sage: size(2, ring=P)\n                1\n                sage: size(2)\n                Traceback (most recent call last):\n                ...\n                ValueError: Could not detect ring.   \n                sage: size(Ideal([a*b + c, a + 1]), ring=P)\n                2\n                sage: size(Ideal([a*b + c, a + 1]))\n                2\n                sage: size(1,2, ring=P)\n                Traceback (most recent call last):                                          \n                ...\n                RuntimeError\n    \n                sage: size('foobar', ring=P)\n                6\n    \n            Show the usage of the optional ``attributes`` parameter::\n    \n                sage: P.<x,y,z> = PolynomialRing(QQ)\n                sage: I = Ideal([x^3*y^2 + 3*x^2*y^2*z + y^3*z^2 + z^5])\n                sage: I = Ideal(I.groebner_basis())\n                sage: hilb = sage.libs.singular.ff.hilb\n                sage: hilb(I) # Singular will print // ** _ is no standard basis\n    \n            So we tell Singular that ``I`` is indeed a Groebner basis::\n    \n                sage: hilb(I,attributes={I:('isSB',)}) # no complaint from Singular\n```\n\nIf I do `groebner??` I get\n\n```\nType:           SingularLibraryFunction\nBase Class:     <type 'sage.libs.singular.function.SingularLibraryFunction'>\nString Form:    groebner (singular function)\nNamespace:      Interactive\nFile:           /home/ghitza/sage-devel/local/lib/python2.6/site-packages/sage/libs/singular/function.so\nDefinition:     groebner(self, *args, ring=None, interruptible=True, attributes=None)\nSource:\ncdef class SingularLibraryFunction(SingularFunction):\n    \"\"\"\n    EXAMPLES::\n\n        sage: from sage.libs.singular.function import SingularLibraryFunction\n        sage: R.<x,y> = PolynomialRing(QQ, order='lex')\n        sage: I = R.ideal(x, x+1)\n        sage: f = SingularLibraryFunction(\"groebner\")\n        sage: f(I)\n        [1]\n    \"\"\"\n    def __init__(self, name):\n        \"\"\"\n        Construct a new Singular kernel function.\n\n        EXAMPLES::\n\n            sage: from sage.libs.singular.function import SingularLibraryFunction\n            sage: R.<x,y> = PolynomialRing(QQ, order='lex')\n            sage: I = R.ideal(x + 1, x*y + 1)\n            sage: f = SingularLibraryFunction(\"groebner\")\n            sage: f(I)\n            [y - 1, x + 1]\n        \"\"\"\n        super(SingularLibraryFunction,self).__init__(name)\n        self.call_handler = self.get_call_handler()\n\n    cdef BaseCallHandler get_call_handler(self):\n        cdef idhdl* singular_idhdl = ggetid(self._name, 0)\n        if singular_idhdl==NULL:\n            raise NameError(\"Function '%s' is not defined.\"%self._name)\n        if singular_idhdl.typ!=PROC_CMD:\n            raise ValueError(\"Not a procedure\")\n\n        cdef LibraryCallHandler res = LibraryCallHandler()\n        res.proc_idhdl = singular_idhdl\n        return res\n\n    cdef bint function_exists(self):\n        cdef idhdl* singular_idhdl = ggetid(self._name, 0)\n        return singular_idhdl!=NULLCall def:    groebner(self, *args, ring=None, interruptible=True, attributes=None)\n\nCall docstring:\n    \n            Call this function with the provided arguments ``args`` in the\n            ring ``R``.\n    \n            INPUT:\n    \n            - ``args`` - a list of arguments\n    \n            - ``ring`` - a multivariate polynomial ring\n    \n            - ``interruptible`` - if ``True`` pressing Ctrl-C during the\n                                  execution of this function will\n                                  interrupt the computation (default: ``True``)\n    \n            - ``attributes`` - a dictionary of optional Singular\n                               attributes assigned to Singular objects (default: ``None``)\n    \n            EXAMPLE::\n    \n                sage: from sage.libs.singular.function import singular_function\n                sage: size = singular_function('size')\n                sage: P.<a,b,c> = PolynomialRing(QQ)\n                sage: size(a, ring=P)\n                1\n                sage: size(2r,ring=P)\n                1\n                sage: size(2, ring=P)\n                1\n                sage: size(2)\n                Traceback (most recent call last):\n                ...\n                ValueError: Could not detect ring.   \n                sage: size(Ideal([a*b + c, a + 1]), ring=P)\n                2\n                sage: size(Ideal([a*b + c, a + 1]))\n                2\n                sage: size(1,2, ring=P)\n                Traceback (most recent call last):                                          \n                ...\n                RuntimeError\n    \n                sage: size('foobar', ring=P)\n                6\n    \n            Show the usage of the optional ``attributes`` parameter::\n    \n                sage: P.<x,y,z> = PolynomialRing(QQ)\n                sage: I = Ideal([x^3*y^2 + 3*x^2*y^2*z + y^3*z^2 + z^5])\n                sage: I = Ideal(I.groebner_basis())\n                sage: hilb = sage.libs.singular.ff.hilb\n                sage: hilb(I) # Singular will print // ** _ is no standard basis\n    \n            So we tell Singular that ``I`` is indeed a Groebner basis::\n    \n                sage: hilb(I,attributes={I:('isSB',)}) # no complaint from Singular\n```\n\n(Sorry these are a bit long.)  But it looks like the first includes part, but not all, of the second.\n\nWhat would I like to see?  (I'm not sure if this is feasible without a lot of work, but here goes.)  If I type `groebner?` I want to know how to use `groebner` from Sage.  For instance, seeing the example\n\n```\nsage: groebner = sage.libs.singular.ff.groebner\nsage: P.<x, y> = PolynomialRing(QQ)\nsage: I = P.ideal(x^2-y, y+x)\nsage: groebner(I)\n[x + y, y^2 - y]\n```\n\nand maybe a couple more showing other arguments/options would get me started with using the function.  So I would think that it's more useful and natural to have something like the above, followed by the Singular help that shows all the options, bells, and whistles.  Again, I don't know if this is feasible, but it would be nice.\n\nIf that's not possible, maybe have a docstring that shows how to use some of the more popular Singular functions from Sage.  If that's followed by the Singular help for the particular function I'm looking at at the moment, I should be able to put the two together and understand how to do things.",
    "created_at": "2010-01-21T12:57:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7939#issuecomment-62355",
    "user": "https://github.com/aghitza"
}
```

<div id="comment:15" align="right">Comment 15</div>

Replying to [@malb](#comment%3A12):
> Do you like the name "ff" by the way (function factory)? It should be short but precise. "factory" is out, because there is a module in Singular called factory (for factorisation).

Well, the other possibility that springs to mind is "funfact" :)  Seriously, I think "ff" is fine.

> 
> Works for me, I just tried it.

And now it also works for me.  I restarted sage and tried it again and it seems fine.  I'm not sure what triggered it before.  I'll let you know if I happen to run into it again.

>  
> > I tried groebner? and groebner?? (which give very different results) but I couldn't get an 

> answer quickly.
> 
> `groebner?` will show you the Singular help while `groebner??` will show you the generic Singular function interface docstring. Maybe we should merge them in `groebner?`? Let me know in what order, and I can implement it.

Here is what I get when I do these two:

With `groebner?` I get the Singular help followed by

```
Call def:       groebner(self, *args, ring=None, interruptible=True, attributes=None)

Call docstring:
    
            Call this function with the provided arguments ``args`` in the
            ring ``R``.
    
            INPUT:
    
            - ``args`` - a list of arguments
    
            - ``ring`` - a multivariate polynomial ring
    
            - ``interruptible`` - if ``True`` pressing Ctrl-C during the
                                  execution of this function will
                                  interrupt the computation (default: ``True``)
    
            - ``attributes`` - a dictionary of optional Singular
                               attributes assigned to Singular objects (default: ``None``)
    
            EXAMPLE::
    
                sage: from sage.libs.singular.function import singular_function
                sage: size = singular_function('size')
                sage: P.<a,b,c> = PolynomialRing(QQ)
                sage: size(a, ring=P)
                1
                sage: size(2r,ring=P)
                1
                sage: size(2, ring=P)
                1
                sage: size(2)
                Traceback (most recent call last):
                ...
                ValueError: Could not detect ring.   
                sage: size(Ideal([a*b + c, a + 1]), ring=P)
                2
                sage: size(Ideal([a*b + c, a + 1]))
                2
                sage: size(1,2, ring=P)
                Traceback (most recent call last):                                          
                ...
                RuntimeError
    
                sage: size('foobar', ring=P)
                6
    
            Show the usage of the optional ``attributes`` parameter::
    
                sage: P.<x,y,z> = PolynomialRing(QQ)
                sage: I = Ideal([x^3*y^2 + 3*x^2*y^2*z + y^3*z^2 + z^5])
                sage: I = Ideal(I.groebner_basis())
                sage: hilb = sage.libs.singular.ff.hilb
                sage: hilb(I) # Singular will print // ** _ is no standard basis
    
            So we tell Singular that ``I`` is indeed a Groebner basis::
    
                sage: hilb(I,attributes={I:('isSB',)}) # no complaint from Singular
```

If I do `groebner??` I get

```
Type:           SingularLibraryFunction
Base Class:     <type 'sage.libs.singular.function.SingularLibraryFunction'>
String Form:    groebner (singular function)
Namespace:      Interactive
File:           /home/ghitza/sage-devel/local/lib/python2.6/site-packages/sage/libs/singular/function.so
Definition:     groebner(self, *args, ring=None, interruptible=True, attributes=None)
Source:
cdef class SingularLibraryFunction(SingularFunction):
    """
    EXAMPLES::

        sage: from sage.libs.singular.function import SingularLibraryFunction
        sage: R.<x,y> = PolynomialRing(QQ, order='lex')
        sage: I = R.ideal(x, x+1)
        sage: f = SingularLibraryFunction("groebner")
        sage: f(I)
        [1]
    """
    def __init__(self, name):
        """
        Construct a new Singular kernel function.

        EXAMPLES::

            sage: from sage.libs.singular.function import SingularLibraryFunction
            sage: R.<x,y> = PolynomialRing(QQ, order='lex')
            sage: I = R.ideal(x + 1, x*y + 1)
            sage: f = SingularLibraryFunction("groebner")
            sage: f(I)
            [y - 1, x + 1]
        """
        super(SingularLibraryFunction,self).__init__(name)
        self.call_handler = self.get_call_handler()

    cdef BaseCallHandler get_call_handler(self):
        cdef idhdl* singular_idhdl = ggetid(self._name, 0)
        if singular_idhdl==NULL:
            raise NameError("Function '%s' is not defined."%self._name)
        if singular_idhdl.typ!=PROC_CMD:
            raise ValueError("Not a procedure")

        cdef LibraryCallHandler res = LibraryCallHandler()
        res.proc_idhdl = singular_idhdl
        return res

    cdef bint function_exists(self):
        cdef idhdl* singular_idhdl = ggetid(self._name, 0)
        return singular_idhdl!=NULLCall def:    groebner(self, *args, ring=None, interruptible=True, attributes=None)

Call docstring:
    
            Call this function with the provided arguments ``args`` in the
            ring ``R``.
    
            INPUT:
    
            - ``args`` - a list of arguments
    
            - ``ring`` - a multivariate polynomial ring
    
            - ``interruptible`` - if ``True`` pressing Ctrl-C during the
                                  execution of this function will
                                  interrupt the computation (default: ``True``)
    
            - ``attributes`` - a dictionary of optional Singular
                               attributes assigned to Singular objects (default: ``None``)
    
            EXAMPLE::
    
                sage: from sage.libs.singular.function import singular_function
                sage: size = singular_function('size')
                sage: P.<a,b,c> = PolynomialRing(QQ)
                sage: size(a, ring=P)
                1
                sage: size(2r,ring=P)
                1
                sage: size(2, ring=P)
                1
                sage: size(2)
                Traceback (most recent call last):
                ...
                ValueError: Could not detect ring.   
                sage: size(Ideal([a*b + c, a + 1]), ring=P)
                2
                sage: size(Ideal([a*b + c, a + 1]))
                2
                sage: size(1,2, ring=P)
                Traceback (most recent call last):                                          
                ...
                RuntimeError
    
                sage: size('foobar', ring=P)
                6
    
            Show the usage of the optional ``attributes`` parameter::
    
                sage: P.<x,y,z> = PolynomialRing(QQ)
                sage: I = Ideal([x^3*y^2 + 3*x^2*y^2*z + y^3*z^2 + z^5])
                sage: I = Ideal(I.groebner_basis())
                sage: hilb = sage.libs.singular.ff.hilb
                sage: hilb(I) # Singular will print // ** _ is no standard basis
    
            So we tell Singular that ``I`` is indeed a Groebner basis::
    
                sage: hilb(I,attributes={I:('isSB',)}) # no complaint from Singular
```

(Sorry these are a bit long.)  But it looks like the first includes part, but not all, of the second.

What would I like to see?  (I'm not sure if this is feasible without a lot of work, but here goes.)  If I type `groebner?` I want to know how to use `groebner` from Sage.  For instance, seeing the example

```
sage: groebner = sage.libs.singular.ff.groebner
sage: P.<x, y> = PolynomialRing(QQ)
sage: I = P.ideal(x^2-y, y+x)
sage: groebner(I)
[x + y, y^2 - y]
```

and maybe a couple more showing other arguments/options would get me started with using the function.  So I would think that it's more useful and natural to have something like the above, followed by the Singular help that shows all the options, bells, and whistles.  Again, I don't know if this is feasible, but it would be nice.

If that's not possible, maybe have a docstring that shows how to use some of the more popular Singular functions from Sage.  If that's followed by the Singular help for the particular function I'm looking at at the moment, I should be able to put the two together and understand how to do things.



---

archive/issue_comments_062356.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\n> What would I like to see?  (I'm not sure if this is feasible without a lot of work, but here goes.)  If I type `groebner?` I want to know how to use `groebner` from Sage.  For instance, seeing the example\n> \n> ```\n> sage: groebner = sage.libs.singular.ff.groebner\n> sage: P.<x, y> = PolynomialRing(QQ)\n> sage: I = P.ideal(x^2-y, y+x)\n> sage: groebner(I)\n> [x + y, y^2 - y]\n> ```\n> \n> and maybe a couple more showing other arguments/options would get me started with using the function.  So I would think that it's more useful and natural to have something like the above, followed by the Singular help that shows all the options, bells, and whistles.  Again, I don't know if this is feasible, but it would be nice.\n> \n> If that's not possible, maybe have a docstring that shows how to use some of the more popular Singular functions from Sage.  If that's followed by the Singular help for the particular function I'm looking at at the moment, I should be able to put the two together and understand how to do things.\n\nIMHO Sage specific documentation belongs in the layer around this generic Singular interface.\nYou can construct singular functions add wrap them in Sage functions/methods of Sage classes...\nThis means having orthogonality: The LibSingularFunction is responsible for calling Singular and gives Singulars original docs.\nIn the wrapper around you can do the Sage specific stuff, which includes documentation, but also making the interface more Pythonic.\nE.g. for groebner you might like to introduce keyword args.\n\n```\nSingular:\ngroebner(i,\"par2var\",\"slimgb\");\n\n```\n\n```\nPythonic:\ngroebner(i,algorithms=[\"slimgb\", \"std\"])\n```\nBut that would be the responsible of another layer;-).",
    "created_at": "2010-01-21T13:13:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7939#issuecomment-62356",
    "user": "https://github.com/sagetrac-PolyBoRi"
}
```

<div id="comment:16" align="right">Comment 16</div>

> What would I like to see?  (I'm not sure if this is feasible without a lot of work, but here goes.)  If I type `groebner?` I want to know how to use `groebner` from Sage.  For instance, seeing the example
> 
> ```
> sage: groebner = sage.libs.singular.ff.groebner
> sage: P.<x, y> = PolynomialRing(QQ)
> sage: I = P.ideal(x^2-y, y+x)
> sage: groebner(I)
> [x + y, y^2 - y]
> ```
> 
> and maybe a couple more showing other arguments/options would get me started with using the function.  So I would think that it's more useful and natural to have something like the above, followed by the Singular help that shows all the options, bells, and whistles.  Again, I don't know if this is feasible, but it would be nice.
> 
> If that's not possible, maybe have a docstring that shows how to use some of the more popular Singular functions from Sage.  If that's followed by the Singular help for the particular function I'm looking at at the moment, I should be able to put the two together and understand how to do things.

IMHO Sage specific documentation belongs in the layer around this generic Singular interface.
You can construct singular functions add wrap them in Sage functions/methods of Sage classes...
This means having orthogonality: The LibSingularFunction is responsible for calling Singular and gives Singulars original docs.
In the wrapper around you can do the Sage specific stuff, which includes documentation, but also making the interface more Pythonic.
E.g. for groebner you might like to introduce keyword args.

```
Singular:
groebner(i,"par2var","slimgb");

```

```
Pythonic:
groebner(i,algorithms=["slimgb", "std"])
```
But that would be the responsible of another layer;-).



---

archive/issue_comments_062357.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nReplying to [@sagetrac-PolyBoRi](#comment%3A14):\n> That would awesome and exception safe.\n> \n> > Mhh, does Cython support this yet?\n\n> \n> Good question.\n\nIt seems it does.",
    "created_at": "2010-01-21T14:11:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7939#issuecomment-62357",
    "user": "https://github.com/malb"
}
```

<div id="comment:17" align="right">Comment 17</div>

Replying to [@sagetrac-PolyBoRi](#comment%3A14):
> That would awesome and exception safe.
> 
> > Mhh, does Cython support this yet?

> 
> Good question.

It seems it does.



---

archive/issue_comments_062358.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nReplying to [@aghitza](#comment%3A15):\n\nFor `groebner??` I get the call docstring for the `SingularFunction`.\n\n> What would I like to see?  (I'm not sure if this is feasible without a lot of work, but here goes.)  If I type `groebner?` I want to know how to use `groebner` from Sage.  For instance, seeing the example\n> \n> ```\n> sage: groebner = sage.libs.singular.ff.groebner\n> sage: P.<x, y> = PolynomialRing(QQ)\n> sage: I = P.ideal(x^2-y, y+x)\n> sage: groebner(I)\n> [x + y, y^2 - y]\n> ```\n> \n> and maybe a couple more showing other arguments/options would get me started with using the function.  So I would think that it's more useful and natural to have something like the above, followed by the Singular help that shows all the options, bells, and whistles.  Again, I don't know if this is feasible, but it would be nice.\n> \n> If that's not possible, maybe have a docstring that shows how to use some of the more popular Singular functions from Sage.  If that's followed by the Singular help for the particular function I'm looking at at the moment, I should be able to put the two together and understand how to do things.\n\nIt seems the second option is feasible.",
    "created_at": "2010-01-21T14:15:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7939#issuecomment-62358",
    "user": "https://github.com/malb"
}
```

<div id="comment:18" align="right">Comment 18</div>

Replying to [@aghitza](#comment%3A15):

For `groebner??` I get the call docstring for the `SingularFunction`.

> What would I like to see?  (I'm not sure if this is feasible without a lot of work, but here goes.)  If I type `groebner?` I want to know how to use `groebner` from Sage.  For instance, seeing the example
> 
> ```
> sage: groebner = sage.libs.singular.ff.groebner
> sage: P.<x, y> = PolynomialRing(QQ)
> sage: I = P.ideal(x^2-y, y+x)
> sage: groebner(I)
> [x + y, y^2 - y]
> ```
> 
> and maybe a couple more showing other arguments/options would get me started with using the function.  So I would think that it's more useful and natural to have something like the above, followed by the Singular help that shows all the options, bells, and whistles.  Again, I don't know if this is feasible, but it would be nice.
> 
> If that's not possible, maybe have a docstring that shows how to use some of the more popular Singular functions from Sage.  If that's followed by the Singular help for the particular function I'm looking at at the moment, I should be able to put the two together and understand how to do things.

It seems the second option is feasible.



---

archive/issue_comments_062359.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nThe list of ToDos I can see is:\n* move singular options to the with statement syntax\n* allow tab completion on `ff`\n* make the docstring of Singular functions nicer (also for the pexect stuff)\n* fix the attributes parameter to support more than \"isSB\"\n* include this stuff in the reference manual (which is actually another ticket, but we can take care of this here)\n\nI will work on this soon-ish, let me know if there are other issues I should address.",
    "created_at": "2010-01-21T14:18:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7939#issuecomment-62359",
    "user": "https://github.com/malb"
}
```

<div id="comment:19" align="right">Comment 19</div>

The list of ToDos I can see is:
* move singular options to the with statement syntax
* allow tab completion on `ff`
* make the docstring of Singular functions nicer (also for the pexect stuff)
* fix the attributes parameter to support more than "isSB"
* include this stuff in the reference manual (which is actually another ticket, but we can take care of this here)

I will work on this soon-ish, let me know if there are other issues I should address.



---

archive/issue_comments_062360.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nHmmm, tab completion is probably hard.\nYou might be interested to know, that there\nexists\nlistvar(proc) in Singular\nwhich is no function but a special command as proc is no first class object.\n\nI followed its trace to grammar.y:\n\n```\nLISTVAR_CMD '(' PROC_CMD ')'\n          {\n            list_cmd(PROC_CMD,NULL,\"// \",TRUE);\n          }\n```\nI actually prints something...",
    "created_at": "2010-01-21T15:00:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7939#issuecomment-62360",
    "user": "https://github.com/sagetrac-PolyBoRi"
}
```

<div id="comment:20" align="right">Comment 20</div>

Hmmm, tab completion is probably hard.
You might be interested to know, that there
exists
listvar(proc) in Singular
which is no function but a special command as proc is no first class object.

I followed its trace to grammar.y:

```
LISTVAR_CMD '(' PROC_CMD ')'
          {
            list_cmd(PROC_CMD,NULL,"// ",TRUE);
          }
```
I actually prints something...



---

archive/issue_comments_062361.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nWe use that already for the pexpect interface, I was thinking about only calling that but that wouldn't update the list once a new library is loaded in libsingular but not in Singular itself.\n\n```python\n    def trait_names(self):\n        \"\"\"\n         Return a list of all Singular commands.\n\n         EXAMPLES::\n\n             sage: singular.trait_names()\n             ['exteriorPower',\n              ...\n              'stdfglm']\n         \"\"\"\n        p = re.compile(\"// *([a-z0-9A-Z_]*).*\") #compiles regular expression\n        proclist = self.eval(\"listvar(proc)\").splitlines()\n        return [p.match(line).group(int(1)) for line in proclist]\n```",
    "created_at": "2010-01-21T15:04:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7939#issuecomment-62361",
    "user": "https://github.com/malb"
}
```

<div id="comment:21" align="right">Comment 21</div>

We use that already for the pexpect interface, I was thinking about only calling that but that wouldn't update the list once a new library is loaded in libsingular but not in Singular itself.

```python
    def trait_names(self):
        """
         Return a list of all Singular commands.

         EXAMPLES::

             sage: singular.trait_names()
             ['exteriorPower',
              ...
              'stdfglm']
         """
        p = re.compile("// *([a-z0-9A-Z_]*).*") #compiles regular expression
        proclist = self.eval("listvar(proc)").splitlines()
        return [p.match(line).group(int(1)) for line in proclist]
```



---

archive/issue_comments_062362.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nMartin, you know Singular better than most of my collegues in KL.\nOkay, list_cmd is defined in\nipshell.cc.\nIt looks like an ugly students exercise to simplify it for our case,\ntyp: proc_cmd, no packages\nand remove the printing...\nLooking at the code now, I have no idea, what would remain...\nCheers,\nMichael",
    "created_at": "2010-01-21T15:10:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7939#issuecomment-62362",
    "user": "https://github.com/sagetrac-PolyBoRi"
}
```

<div id="comment:22" align="right">Comment 22</div>

Martin, you know Singular better than most of my collegues in KL.
Okay, list_cmd is defined in
ipshell.cc.
It looks like an ugly students exercise to simplify it for our case,
typ: proc_cmd, no packages
and remove the printing...
Looking at the code now, I have no idea, what would remain...
Cheers,
Michael



---

archive/issue_comments_062363.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nprobably it comes down to\n\n```\nidhdl h=IDROOT;\nwhile (h!=NULL)\n  {\n  \n if (PROC_CMD == IDTYP(h))\n    {\n        do something...\n      }\n      h=IDNEXT(h);\n      \n      }\n```\n\nI seem already to be infected by the Singular code...",
    "created_at": "2010-01-21T15:50:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7939#issuecomment-62363",
    "user": "https://github.com/sagetrac-PolyBoRi"
}
```

<div id="comment:23" align="right">Comment 23</div>

probably it comes down to

```
idhdl h=IDROOT;
while (h!=NULL)
  {
  
 if (PROC_CMD == IDTYP(h))
    {
        do something...
      }
      h=IDNEXT(h);
      
      }
```

I seem already to be infected by the Singular code...



---

archive/issue_comments_062364.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nThis is such a fun way of not working on my thesis.\n\nThe updated patch improves the following things:\n* attributes interface more sensible now\n* tab completion for `sage.libs.singular.ff`\n* slightly improved docs (so it can go in the reference manual)\n* nicer docstrings for functions.\n\nI didn't address the singular options interface yet (next on my list).",
    "created_at": "2010-01-21T17:23:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7939#issuecomment-62364",
    "user": "https://github.com/malb"
}
```

<div id="comment:24" align="right">Comment 24</div>

This is such a fun way of not working on my thesis.

The updated patch improves the following things:
* attributes interface more sensible now
* tab completion for `sage.libs.singular.ff`
* slightly improved docs (so it can go in the reference manual)
* nicer docstrings for functions.

I didn't address the singular options interface yet (next on my list).



---

archive/issue_events_089691.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2010-01-22T10:01:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7939#event-89691"
}
```



---

archive/issue_events_089692.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2010-01-22T10:01:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7939#event-89692"
}
```



---

archive/issue_comments_062365.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nThe attached updated patch should take care of all remaining known outstanding issues. \n\nFor instance, you can now do this:\n\n```python\nsage: P.<a,b,c,d,e> = PolynomialRing(GF(127))\nsage: I = sage.rings.ideal.Cyclic(P)\nsage: std = sage.libs.singular.ff.std\n\nsage: from sage.libs.singular.option import opt, opt_ctx\nsage: opt['redTail']\nTrue\n\nsage: std(I)[-1]\nd^2*e^6 + 28*b*c*d + ...\n\nsage: with opt_ctx(redTail=False,redSB=False):\n...      std(I)[-1]\nd^2*e^6 + 8*c^3 + ...\n\nsage: opt['redTail']\nTrue\n```",
    "created_at": "2010-01-22T10:01:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7939#issuecomment-62365",
    "user": "https://github.com/malb"
}
```

<div id="comment:25" align="right">Comment 25</div>

The attached updated patch should take care of all remaining known outstanding issues. 

For instance, you can now do this:

```python
sage: P.<a,b,c,d,e> = PolynomialRing(GF(127))
sage: I = sage.rings.ideal.Cyclic(P)
sage: std = sage.libs.singular.ff.std

sage: from sage.libs.singular.option import opt, opt_ctx
sage: opt['redTail']
True

sage: std(I)[-1]
d^2*e^6 + 28*b*c*d + ...

sage: with opt_ctx(redTail=False,redSB=False):
...      std(I)[-1]
d^2*e^6 + 8*c^3 + ...

sage: opt['redTail']
True
```



---

archive/issue_comments_062366.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nFixing doctest issues.",
    "created_at": "2010-01-22T11:01:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7939#issuecomment-62366",
    "user": "https://github.com/malb"
}
```

<div id="comment:26" align="right">Comment 26</div>

Fixing doctest issues.



---

archive/issue_events_089693.json:
```json
{
    "actor": "https://github.com/aghitza",
    "created_at": "2010-01-22T20:39:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7939#event-89693"
}
```



---

archive/issue_events_089694.json:
```json
{
    "actor": "https://github.com/aghitza",
    "created_at": "2010-01-22T20:39:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7939#event-89694"
}
```



---

archive/issue_comments_062367.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nWith the latest patch, I'm now seeing\n\n```\nsage -t -long \"libs/singular/__init__.py\"                   \n\t [0.1 s]\nsage -t -long \"libs/singular/function.pyx\"                  \n\t [2.9 s]\nsage -t -long \"libs/singular/function_factory.py\"           \n**********************************************************************\nFile \"/opt/sage-4.3.1/devel/sage-main/sage/libs/singular/function_factory.py\", line 51:\n    sage: \"std\" in sage.list.singular.ff.trait_names()\nException raised:\n    Traceback (most recent call last):\n      File \"/home/ghitza/sage-devel/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/home/ghitza/sage-devel/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/home/ghitza/sage-devel/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_3[2]>\", line 1, in <module>\n        \"std\" in sage.list.singular.ff.trait_names()###line 51:\n    sage: \"std\" in sage.list.singular.ff.trait_names()\n    AttributeError: 'module' object has no attribute 'list'\n**********************************************************************\n1 items had failures:\n   1 of   3 in __main__.example_3\n***Test Failed*** 1 failures.\nFor whitespace errors, see the file /home/ghitza/.sage//tmp/.doctest_function_factory.py\n\t [1.5 s]\nexit code: 1024\nsage -t -long \"libs/singular/groebner_strategy.pyx\"         \n\t [1.5 s]\nsage -t -long \"libs/singular/option.pyx\"                    \n**********************************************************************\nFile \"/opt/sage-4.3.1/devel/sage-main/sage/libs/singular/option.pyx\", line 340:\n    sage: libsingular_verb_options\nExpected:\n    verbosity options for libSingular (current value 0x02000082)\nGot:\n    verbosity options for libSingular (current value 0x00002851)\n**********************************************************************\n1 items had failures:\n   1 of   5 in __main__.example_11\n***Test Failed*** 1 failures.\nFor whitespace errors, see the file /home/ghitza/.sage//tmp/.doctest_option.py\n\t [2.3 s]\nexit code: 1024\nsage -t -long \"libs/singular/polynomial.pyx\"                \n\t [1.5 s]\nsage -t -long \"libs/singular/ring.pyx\"                      \n\t [1.8 s]\nsage -t -long \"libs/singular/singular-cdefs.pxi\"            \n\t [1.4 s]\nsage -t -long \"libs/singular/singular.pxi\"                  \n\t [0.1 s]\nsage -t -long \"libs/singular/singular.pyx\"                  \n\t [1.6 s]\n \n----------------------------------------------------------------------\nThe following tests failed:\n\n\n\tsage -t -long \"libs/singular/function_factory.py\"\n\tsage -t -long \"libs/singular/option.pyx\"\nTotal time for all tests: 14.4 seconds\n```",
    "created_at": "2010-01-22T20:39:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7939#issuecomment-62367",
    "user": "https://github.com/aghitza"
}
```

<div id="comment:27" align="right">Comment 27</div>

With the latest patch, I'm now seeing

```
sage -t -long "libs/singular/__init__.py"                   
	 [0.1 s]
sage -t -long "libs/singular/function.pyx"                  
	 [2.9 s]
sage -t -long "libs/singular/function_factory.py"           
**********************************************************************
File "/opt/sage-4.3.1/devel/sage-main/sage/libs/singular/function_factory.py", line 51:
    sage: "std" in sage.list.singular.ff.trait_names()
Exception raised:
    Traceback (most recent call last):
      File "/home/ghitza/sage-devel/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/home/ghitza/sage-devel/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/home/ghitza/sage-devel/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_3[2]>", line 1, in <module>
        "std" in sage.list.singular.ff.trait_names()###line 51:
    sage: "std" in sage.list.singular.ff.trait_names()
    AttributeError: 'module' object has no attribute 'list'
**********************************************************************
1 items had failures:
   1 of   3 in __main__.example_3
***Test Failed*** 1 failures.
For whitespace errors, see the file /home/ghitza/.sage//tmp/.doctest_function_factory.py
	 [1.5 s]
exit code: 1024
sage -t -long "libs/singular/groebner_strategy.pyx"         
	 [1.5 s]
sage -t -long "libs/singular/option.pyx"                    
**********************************************************************
File "/opt/sage-4.3.1/devel/sage-main/sage/libs/singular/option.pyx", line 340:
    sage: libsingular_verb_options
Expected:
    verbosity options for libSingular (current value 0x02000082)
Got:
    verbosity options for libSingular (current value 0x00002851)
**********************************************************************
1 items had failures:
   1 of   5 in __main__.example_11
***Test Failed*** 1 failures.
For whitespace errors, see the file /home/ghitza/.sage//tmp/.doctest_option.py
	 [2.3 s]
exit code: 1024
sage -t -long "libs/singular/polynomial.pyx"                
	 [1.5 s]
sage -t -long "libs/singular/ring.pyx"                      
	 [1.8 s]
sage -t -long "libs/singular/singular-cdefs.pxi"            
	 [1.4 s]
sage -t -long "libs/singular/singular.pxi"                  
	 [0.1 s]
sage -t -long "libs/singular/singular.pyx"                  
	 [1.6 s]
 
----------------------------------------------------------------------
The following tests failed:


	sage -t -long "libs/singular/function_factory.py"
	sage -t -long "libs/singular/option.pyx"
Total time for all tests: 14.4 seconds
```



---

archive/issue_comments_062368.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nAttachment: **[mpoly_ideal_libsingular.patch.gz](https://github.com/sagemath/sage/files/ticket7939/mpoly_ideal_libsingular.patch.gz)**\n\nThat's because I uploaded the wrong file somehow. Now it should be the right one.",
    "created_at": "2010-01-23T03:53:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7939#issuecomment-62368",
    "user": "https://github.com/malb"
}
```

<div id="comment:28" align="right">Comment 28</div>

Attachment: **[mpoly_ideal_libsingular.patch.gz](https://github.com/sagemath/sage/files/ticket7939/mpoly_ideal_libsingular.patch.gz)**

That's because I uploaded the wrong file somehow. Now it should be the right one.



---

archive/issue_events_089695.json:
```json
{
    "actor": "https://github.com/aghitza",
    "created_at": "2010-01-23T12:09:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7939#event-89695"
}
```



---

archive/issue_events_089696.json:
```json
{
    "actor": "https://github.com/aghitza",
    "created_at": "2010-01-23T12:09:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7939#event-89696"
}
```



---

archive/issue_events_089697.json:
```json
{
    "actor": "https://github.com/aghitza",
    "created_at": "2010-01-23T12:09:15Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "title_is": "shorten doctests in sage/rings/polynomial/multi_polynomial_ideal.py",
    "title_was": "shorten doctests in sage/rings/multi_polynomial_ideal.py",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7939#event-89697"
}
```



---

archive/issue_comments_062369.json:
```json
{
    "body": "Reviewer: **Michael Brickenstein, Alex Ghitza**",
    "created_at": "2010-01-23T12:09:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7939#issuecomment-62369",
    "user": "https://github.com/aghitza"
}
```

Reviewer: **Michael Brickenstein, Alex Ghitza**



---

archive/issue_comments_062370.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nThis looks good to me.  There are only a few typos that are fixed by the small referee patch.  One last question: in `rings/polynomial/multi_polynomial_ideal.py`, you left a handful of lines commented out.  Was this by purpose, or just an oversight?\n\nAnyway, positive review for the updated spkg and Martin's patch.  If someone can have a quick look at the referee patch, we're done.\n\nIn terms of the original motivation for this ticket (what was it already?): the file `rings/polynomial/multi_polynomial_ideal.py` passes long doctests in 45 seconds now on my laptop -- not bad for 582 tests.  I ran it with -verbose and didn't see anything that was outrageous in terms of time.",
    "created_at": "2010-01-23T12:09:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7939#issuecomment-62370",
    "user": "https://github.com/aghitza"
}
```

<div id="comment:29" align="right">Comment 29</div>

This looks good to me.  There are only a few typos that are fixed by the small referee patch.  One last question: in `rings/polynomial/multi_polynomial_ideal.py`, you left a handful of lines commented out.  Was this by purpose, or just an oversight?

Anyway, positive review for the updated spkg and Martin's patch.  If someone can have a quick look at the referee patch, we're done.

In terms of the original motivation for this ticket (what was it already?): the file `rings/polynomial/multi_polynomial_ideal.py` passes long doctests in 45 seconds now on my laptop -- not bad for 582 tests.  I ran it with -verbose and didn't see anything that was outrageous in terms of time.



---

archive/issue_comments_062371.json:
```json
{
    "body": "apply after the previous patch",
    "created_at": "2010-01-23T12:10:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7939#issuecomment-62371",
    "user": "https://github.com/aghitza"
}
```

apply after the previous patch



---

archive/issue_comments_062372.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nAttachment: **[trac_7939-referee.patch.gz](https://github.com/sagemath/sage/files/ticket7939/trac_7939-referee.patch.gz)**\n\nAlex's patch looks good.",
    "created_at": "2010-01-23T12:30:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7939#issuecomment-62372",
    "user": "https://github.com/malb"
}
```

<div id="comment:30" align="right">Comment 30</div>

Attachment: **[trac_7939-referee.patch.gz](https://github.com/sagemath/sage/files/ticket7939/trac_7939-referee.patch.gz)**

Alex's patch looks good.



---

archive/issue_events_089698.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2010-01-23T12:30:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7939#event-89698"
}
```



---

archive/issue_events_089699.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2010-01-23T12:30:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7939#event-89699"
}
```



---

archive/issue_comments_062373.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nReplying to [@aghitza](#comment%3A29):\n>One last question: in `rings/polynomial/multi_polynomial_ideal.py`, you left a handful of \n> lines commented out.  Was this by purpose, or just an oversight?\n\nI was a bit split about leaving the pexpect interface stuff in or throwing it out completely. Singular supports some of its ideal operations over the complex numbers, although they probably don't make much sense there (rounding errors, 0 != 0 etc.). libSingular does not support complex numbers yet (although it is implemented in #7577 and waits for input on a design decision) and thus theoretical we are loosing some functionality. Then again, we are loosing functionality which does not really make much sense (e.g. you want to be careful about computing a Gr\u00f6bner basis to get the variety of an ideal over CC) This is why I only half hearted removed the pexpect stuff (which supports CC).",
    "created_at": "2010-01-23T12:36:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7939#issuecomment-62373",
    "user": "https://github.com/malb"
}
```

<div id="comment:31" align="right">Comment 31</div>

Replying to [@aghitza](#comment%3A29):
>One last question: in `rings/polynomial/multi_polynomial_ideal.py`, you left a handful of 
> lines commented out.  Was this by purpose, or just an oversight?

I was a bit split about leaving the pexpect interface stuff in or throwing it out completely. Singular supports some of its ideal operations over the complex numbers, although they probably don't make much sense there (rounding errors, 0 != 0 etc.). libSingular does not support complex numbers yet (although it is implemented in #7577 and waits for input on a design decision) and thus theoretical we are loosing some functionality. Then again, we are loosing functionality which does not really make much sense (e.g. you want to be careful about computing a Gröbner basis to get the variety of an ideal over CC) This is why I only half hearted removed the pexpect stuff (which supports CC).



---

archive/issue_comments_062374.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nMerged patches in this order:\n\n1. [mpoly_ideal_libsingular.patch](https://github.com/sagemath/sage/files/ticket7939/mpoly_ideal_libsingular.patch.gz)\n2. [trac_7939-referee.patch](https://github.com/sagemath/sage/files/ticket7939/trac_7939-referee.patch.gz)\n\nMerged [singular-3-1-0-4-20100120.spkg](http://sage.math.washington.edu/home/malb/spkgs/singular-3-1-0-4-20100120.spkg) in the standard spkg repository.",
    "created_at": "2010-01-24T17:38:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7939#issuecomment-62374",
    "user": "https://github.com/sagetrac-mvngu"
}
```

<div id="comment:32" align="right">Comment 32</div>

Merged patches in this order:

1. [mpoly_ideal_libsingular.patch](https://github.com/sagemath/sage/files/ticket7939/mpoly_ideal_libsingular.patch.gz)
2. [trac_7939-referee.patch](https://github.com/sagemath/sage/files/ticket7939/trac_7939-referee.patch.gz)

Merged [singular-3-1-0-4-20100120.spkg](http://sage.math.washington.edu/home/malb/spkgs/singular-3-1-0-4-20100120.spkg) in the standard spkg repository.



---

archive/issue_events_089700.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-01-24T17:38:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7939#event-89700"
}
```



---

archive/issue_events_089701.json:
```json
{
    "actor": "https://github.com/sagetrac-mvngu",
    "created_at": "2010-01-24T17:38:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7939#event-89701"
}
```



---

archive/issue_comments_062375.json:
```json
{
    "body": "Merged: **sage-4.3.2.alpha0**",
    "created_at": "2010-01-24T17:38:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7939",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7939#issuecomment-62375",
    "user": "https://github.com/sagetrac-mvngu"
}
```

Merged: **sage-4.3.2.alpha0**
