# Issue 7830: function for floating point representation of a number

archive/issues_007830.json:
```json
{
    "body": "Here's a function that answers the question posed in http://groups.google.com/group/sage-devel/browse_thread/thread/c8c75b483f2c47f6 -- give the sign, mantissa, and exponent of a floating point number.\n\nI also cleaned up a few minor other things.\n\n**Assignee:** @aghitza\n\n**Author:** Jason Grout\n\n**Reviewer:** Robert Bradshaw, John Cremona\n\n**Merged:** sage-4.3.2.alpha0\n\nIssue created by migration from https://trac.sagemath.org/ticket/7830\n\n",
    "closed_at": "2010-01-22T21:11:27Z",
    "created_at": "2010-01-03T07:37:21Z",
    "labels": [
        "component: basic arithmetic",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.3.2",
    "title": "function for floating point representation of a number",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/7830",
    "user": "https://github.com/jasongrout"
}
```
Here's a function that answers the question posed in http://groups.google.com/group/sage-devel/browse_thread/thread/c8c75b483f2c47f6 -- give the sign, mantissa, and exponent of a floating point number.

I also cleaned up a few minor other things.

**Assignee:** @aghitza

**Author:** Jason Grout

**Reviewer:** Robert Bradshaw, John Cremona

**Merged:** sage-4.3.2.alpha0

Issue created by migration from https://trac.sagemath.org/ticket/7830





---

archive/attachments_009549.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac-7830-floating_point_representation.patch",
    "asset_url": "tarball://root/attachments/ticket7830/trac-7830-floating_point_representation.patch",
    "created_at": "2010-01-03T07:41:58Z",
    "issue": "https://github.com/sagemath/sage/issues/7830",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket7830/trac-7830-floating_point_representation.patch",
    "user": "https://github.com/jasongrout"
}
```



---

archive/issue_comments_060984.json:
```json
{
    "body": "Attachment [trac-7830-floating_point_representation.patch](https://github.com/sagemath/sage/files/ticket7830/trac-7830-floating_point_representation.patch) by @jasongrout created at 2010-01-03 07:41:58",
    "created_at": "2010-01-03T07:41:58Z",
    "issue": "https://github.com/sagemath/sage/issues/7830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7830#issuecomment-60984",
    "user": "https://github.com/jasongrout"
}
```

Attachment [trac-7830-floating_point_representation.patch](https://github.com/sagemath/sage/files/ticket7830/trac-7830-floating_point_representation.patch) by @jasongrout created at 2010-01-03 07:41:58



---

archive/issue_events_054104.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2010-01-03T07:45:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7830",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7830#event-54104"
}
```



---

archive/issue_comments_060985.json:
```json
{
    "body": "<a id='comment:2'></a>\nLooks good. I don't like the name `representation()` either--maybe `parts()`?",
    "created_at": "2010-01-07T07:40:31Z",
    "issue": "https://github.com/sagemath/sage/issues/7830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7830#issuecomment-60985",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:2'></a>
Looks good. I don't like the name `representation()` either--maybe `parts()`?



---

archive/issue_comments_060986.json:
```json
{
    "body": "<a id='comment:3'></a>\nparts() seems too vague.  Maybe ieee_754_parts(), except that we support arbitrary precision, not just the set precisions they mention.  Maybe floating_point_representation(), or sign_mantissa_exponent().\n\nI'm willing to concede on the naming to make sure this gets in before I start my numerical analysis class in two weeks :).",
    "created_at": "2010-01-07T16:59:37Z",
    "issue": "https://github.com/sagemath/sage/issues/7830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7830#issuecomment-60986",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:3'></a>
parts() seems too vague.  Maybe ieee_754_parts(), except that we support arbitrary precision, not just the set precisions they mention.  Maybe floating_point_representation(), or sign_mantissa_exponent().

I'm willing to concede on the naming to make sure this gets in before I start my numerical analysis class in two weeks :).



---

archive/issue_comments_060987.json:
```json
{
    "body": "<a id='comment:4'></a>\nLets go with `sign_mantissa_exponent()`. Verbose but clear, and one doesn't even have to look at the docstring every time to remember what order the tuple comes in :)",
    "created_at": "2010-01-07T19:51:55Z",
    "issue": "https://github.com/sagemath/sage/issues/7830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7830#issuecomment-60987",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:4'></a>
Lets go with `sign_mantissa_exponent()`. Verbose but clear, and one doesn't even have to look at the docstring every time to remember what order the tuple comes in :)



---

archive/issue_comments_060988.json:
```json
{
    "body": "apply on top of previous patch",
    "created_at": "2010-01-08T12:27:51Z",
    "issue": "https://github.com/sagemath/sage/issues/7830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7830#issuecomment-60988",
    "user": "https://github.com/jasongrout"
}
```

apply on top of previous patch



---

archive/attachments_009550.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac-7830-change-name.patch",
    "asset_url": "tarball://root/attachments/ticket7830/trac-7830-change-name.patch",
    "created_at": "2010-01-08T12:28:29Z",
    "issue": "https://github.com/sagemath/sage/issues/7830",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket7830/trac-7830-change-name.patch",
    "user": "https://github.com/jasongrout"
}
```



---

archive/issue_comments_060989.json:
```json
{
    "body": "<a id='comment:5'></a>\nAttachment [trac-7830-change-name.patch](https://github.com/sagemath/sage/files/ticket7830/trac-7830-change-name.patch) by @jasongrout created at 2010-01-08 12:28:29\n\nOkay, I added a patch which changes the name.  This is hopefully ready for a positive review now :).",
    "created_at": "2010-01-08T12:28:29Z",
    "issue": "https://github.com/sagemath/sage/issues/7830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7830#issuecomment-60989",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:5'></a>
Attachment [trac-7830-change-name.patch](https://github.com/sagemath/sage/files/ticket7830/trac-7830-change-name.patch) by @jasongrout created at 2010-01-08 12:28:29

Okay, I added a patch which changes the name.  This is hopefully ready for a positive review now :).



---

archive/issue_comments_060990.json:
```json
{
    "body": "<a id='comment:6'></a>\nI see that you have only added this method to mpfr.  Should we not preserve as much consistency as possible between the different real types by also adding it to real_double?",
    "created_at": "2010-01-11T20:38:19Z",
    "issue": "https://github.com/sagemath/sage/issues/7830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7830#issuecomment-60990",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:6'></a>
I see that you have only added this method to mpfr.  Should we not preserve as much consistency as possible between the different real types by also adding it to real_double?



---

archive/issue_comments_060991.json:
```json
{
    "body": "<a id='comment:7'></a>\nVery good point.  I'll look at this.  I might just end up creating an RR number and calling this method behind the scenes",
    "created_at": "2010-01-11T22:04:14Z",
    "issue": "https://github.com/sagemath/sage/issues/7830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7830#issuecomment-60991",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:7'></a>
Very good point.  I'll look at this.  I might just end up creating an RR number and calling this method behind the scenes



---

archive/attachments_009551.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac-7830-sign_m_e.patch",
    "asset_url": "tarball://root/attachments/ticket7830/trac-7830-sign_m_e.patch",
    "created_at": "2010-01-20T08:41:38Z",
    "issue": "https://github.com/sagemath/sage/issues/7830",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket7830/trac-7830-sign_m_e.patch",
    "user": "https://github.com/jasongrout"
}
```



---

archive/issue_comments_060992.json:
```json
{
    "body": "Attachment [trac-7830-sign_m_e.patch](https://github.com/sagemath/sage/files/ticket7830/trac-7830-sign_m_e.patch) by @jasongrout created at 2010-01-20 08:41:38\n\napply on top of previous patches",
    "created_at": "2010-01-20T08:41:38Z",
    "issue": "https://github.com/sagemath/sage/issues/7830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7830#issuecomment-60992",
    "user": "https://github.com/jasongrout"
}
```

Attachment [trac-7830-sign_m_e.patch](https://github.com/sagemath/sage/files/ticket7830/trac-7830-sign_m_e.patch) by @jasongrout created at 2010-01-20 08:41:38

apply on top of previous patches



---

archive/issue_comments_060993.json:
```json
{
    "body": "<a id='comment:8'></a>\nI've added a similar function to RDF now.",
    "created_at": "2010-01-20T08:42:22Z",
    "issue": "https://github.com/sagemath/sage/issues/7830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7830#issuecomment-60993",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:8'></a>
I've added a similar function to RDF now.



---

archive/issue_comments_060994.json:
```json
{
    "body": "<a id='comment:9'></a>\nhttp://en.wikipedia.org/wiki/IEEE_754-1985\n\nThe exponent for 0 should be 0. This also avoids the issue of platform dependance for that value, and `RDF(0)`'s exponent being unrealistically small. \n\nAlso, sage/rings/real_mpfr.pyx, line 1890 should be EXAMPLES::",
    "created_at": "2010-01-20T09:02:53Z",
    "issue": "https://github.com/sagemath/sage/issues/7830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7830#issuecomment-60994",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:9'></a>
http://en.wikipedia.org/wiki/IEEE_754-1985

The exponent for 0 should be 0. This also avoids the issue of platform dependance for that value, and `RDF(0)`'s exponent being unrealistically small. 

Also, sage/rings/real_mpfr.pyx, line 1890 should be EXAMPLES::



---

archive/issue_events_054105.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2010-01-20T09:02:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7830",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7830#event-54105"
}
```



---

archive/issue_events_054106.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2010-01-20T09:02:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7830",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7830#event-54106"
}
```



---

archive/attachments_009552.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac-7830-fixes.patch",
    "asset_url": "tarball://root/attachments/ticket7830/trac-7830-fixes.patch",
    "created_at": "2010-01-20T09:32:08Z",
    "issue": "https://github.com/sagemath/sage/issues/7830",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket7830/trac-7830-fixes.patch",
    "user": "https://github.com/jasongrout"
}
```



---

archive/issue_comments_060995.json:
```json
{
    "body": "Attachment [trac-7830-fixes.patch](https://github.com/sagemath/sage/files/ticket7830/trac-7830-fixes.patch) by @jasongrout created at 2010-01-20 09:32:08\n\napply on top of previous patches",
    "created_at": "2010-01-20T09:32:08Z",
    "issue": "https://github.com/sagemath/sage/issues/7830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7830#issuecomment-60995",
    "user": "https://github.com/jasongrout"
}
```

Attachment [trac-7830-fixes.patch](https://github.com/sagemath/sage/files/ticket7830/trac-7830-fixes.patch) by @jasongrout created at 2010-01-20 09:32:08

apply on top of previous patches



---

archive/issue_comments_060996.json:
```json
{
    "body": "<a id='comment:10'></a>\nThe last patch fixes a few other documentation errors and an error in multiplicative_order too.  For free.",
    "created_at": "2010-01-20T09:33:16Z",
    "issue": "https://github.com/sagemath/sage/issues/7830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7830#issuecomment-60996",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:10'></a>
The last patch fixes a few other documentation errors and an error in multiplicative_order too.  For free.



---

archive/issue_events_054107.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2010-01-20T09:33:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7830",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7830#event-54107"
}
```



---

archive/issue_events_054108.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2010-01-20T09:33:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7830",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7830#event-54108"
}
```



---

archive/issue_comments_060997.json:
```json
{
    "body": "all four of the above folded into one",
    "created_at": "2010-01-20T09:40:39Z",
    "issue": "https://github.com/sagemath/sage/issues/7830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7830#issuecomment-60997",
    "user": "https://github.com/robertwb"
}
```

all four of the above folded into one



---

archive/attachments_009553.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "7830-real-rep-all.patch",
    "asset_url": "tarball://root/attachments/ticket7830/7830-real-rep-all.patch",
    "created_at": "2010-01-20T09:40:55Z",
    "issue": "https://github.com/sagemath/sage/issues/7830",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket7830/7830-real-rep-all.patch",
    "user": "https://github.com/robertwb"
}
```



---

archive/issue_comments_060998.json:
```json
{
    "body": "<a id='comment:11'></a>\nAttachment [7830-real-rep-all.patch](https://github.com/sagemath/sage/files/ticket7830/7830-real-rep-all.patch) by @robertwb created at 2010-01-20 09:40:55\n\nLooks good.",
    "created_at": "2010-01-20T09:40:55Z",
    "issue": "https://github.com/sagemath/sage/issues/7830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7830#issuecomment-60998",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:11'></a>
Attachment [7830-real-rep-all.patch](https://github.com/sagemath/sage/files/ticket7830/7830-real-rep-all.patch) by @robertwb created at 2010-01-20 09:40:55

Looks good.



---

archive/issue_events_054109.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2010-01-20T09:40:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7830",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7830#event-54109"
}
```



---

archive/issue_events_054110.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2010-01-20T09:40:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7830",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7830#event-54110"
}
```



---

archive/issue_events_054111.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mvngu",
    "created_at": "2010-01-22T21:11:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7830",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7830#event-54111"
}
```



---

archive/issue_events_054112.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mvngu",
    "created_at": "2010-01-22T21:11:27Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/7830",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7830#event-54112"
}
```



---

archive/issue_comments_060999.json:
```json
{
    "body": "**Merged:** sage-4.3.2.alpha0",
    "created_at": "2010-01-22T21:11:27Z",
    "issue": "https://github.com/sagemath/sage/issues/7830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7830#issuecomment-60999",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

**Merged:** sage-4.3.2.alpha0



---

archive/issue_comments_061000.json:
```json
{
    "body": "**Author:** Jason Grout",
    "created_at": "2010-01-22T21:11:27Z",
    "issue": "https://github.com/sagemath/sage/issues/7830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7830#issuecomment-61000",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

**Author:** Jason Grout



---

archive/issue_comments_061001.json:
```json
{
    "body": "**Reviewer:** Robert Bradshaw, John Cremona",
    "created_at": "2010-01-22T21:11:27Z",
    "issue": "https://github.com/sagemath/sage/issues/7830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7830#issuecomment-61001",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

**Reviewer:** Robert Bradshaw, John Cremona



---

archive/issue_comments_061002.json:
```json
{
    "body": "<a id='comment:13'></a>\nThe mantissa and exponent for MPFR is not the same as the mantissa and exponent for IEEE 754.  So I'm a little doubtful about the choice to follow IEEE 754 conventions for the exponent value of 0.  (but I'm not doubtful enough to change it).  I just thought I'd point out that the values from MPFR are different than the conventions from IEEE 754 for the same floating point number.",
    "created_at": "2010-01-26T21:27:58Z",
    "issue": "https://github.com/sagemath/sage/issues/7830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7830#issuecomment-61002",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:13'></a>
The mantissa and exponent for MPFR is not the same as the mantissa and exponent for IEEE 754.  So I'm a little doubtful about the choice to follow IEEE 754 conventions for the exponent value of 0.  (but I'm not doubtful enough to change it).  I just thought I'd point out that the values from MPFR are different than the conventions from IEEE 754 for the same floating point number.
