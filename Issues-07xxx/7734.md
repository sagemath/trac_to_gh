# Issue 7734: edge_coloring loops forever when GLPK is not installed

archive/issues_007734.json:
```json
{
    "assignees": [
        "https://github.com/rlmill"
    ],
    "body": "As the title says... :-)\n\nThis patch can be qualified of \"short\" :p\n\nCC:  @rlmill\n\nComponent: **graph theory**\n\nAuthor: **Nathann Cohen**\n\nReviewer: **Robert Miller**\n\nMerged: **sage-4.3.rc1**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/7734_\n\n",
    "closed_at": "2009-12-19T20:13:01Z",
    "created_at": "2009-12-18T08:45:30Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "edge_coloring loops forever when GLPK is not installed",
    "type": "issue",
    "updated_at": "2009-12-20T07:40:20Z",
    "url": "https://github.com/sagemath/sage/issues/7734",
    "user": "https://github.com/nathanncohen"
}
```
As the title says... :-)

This patch can be qualified of "short" :p

CC:  @rlmill

Component: **graph theory**

Author: **Nathann Cohen**

Reviewer: **Robert Miller**

Merged: **sage-4.3.rc1**

_Issue created by migration from https://trac.sagemath.org/ticket/7734_





---

archive/issue_events_095561.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2009-12-18T08:45:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/7734",
    "milestone_number": null,
    "milestone_title": "sage-4.3.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7734#event-95561"
}
```



---

archive/issue_events_095562.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2009-12-18T08:45:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7734",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7734#event-95562"
}
```



---

archive/issue_events_095563.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2009-12-18T08:45:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7734",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7734#event-95563"
}
```



---

archive/issue_events_095564.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2009-12-18T08:45:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7734",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7734#event-95564"
}
```



---

archive/issue_events_095565.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2009-12-18T08:45:30Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/7734",
    "subject": "https://github.com/nathanncohen",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7734#event-95565"
}
```



---

archive/issue_comments_058089.json:
```json
{
    "body": "Attachment: **[trac_7734.patch.gz](https://github.com/sagemath/sage/files/ticket7734/trac_7734.patch.gz)**",
    "created_at": "2009-12-18T09:02:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7734#issuecomment-58089",
    "user": "https://github.com/nathanncohen"
}
```

Attachment: **[trac_7734.patch.gz](https://github.com/sagemath/sage/files/ticket7734/trac_7734.patch.gz)**



---

archive/issue_comments_058090.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n As the title says... :-)\n+\n+This patch can be qualified of \"short\" :p\n``````\n",
    "created_at": "2009-12-18T09:03:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7734#issuecomment-58090",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 As the title says... :-)
+
+This patch can be qualified of "short" :p
``````




---

archive/issue_events_095566.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2009-12-18T09:03:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7734",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7734#event-95566"
}
```



---

archive/issue_comments_058091.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\n1. There should always be an example of the bug you are fixing in the patch, always always always. We need a mug shot, so the bug doesn't show its face again :) I added this, as well as several other tests, which have exposed other corner case bugs, such as:\n\n```\nsage: g = Graph(20)\nsage: vertex_coloring(g, hex_colors=True)\n{'#ff0000': 0}\n```\nI've fixed these.\n\n2. It seems to take some time to add constraints to the problem, which is pointless if no solver is installed. Can you add a patch that runs a trivial test before setting up the problem, to see if it is installed?",
    "created_at": "2009-12-18T21:23:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7734#issuecomment-58091",
    "user": "https://github.com/rlmill"
}
```

<div id="comment:2" align="right">comment:2</div>

1. There should always be an example of the bug you are fixing in the patch, always always always. We need a mug shot, so the bug doesn't show its face again :) I added this, as well as several other tests, which have exposed other corner case bugs, such as:

```
sage: g = Graph(20)
sage: vertex_coloring(g, hex_colors=True)
{'#ff0000': 0}
```
I've fixed these.

2. It seems to take some time to add constraints to the problem, which is pointless if no solver is installed. Can you add a patch that runs a trivial test before setting up the problem, to see if it is installed?



---

archive/issue_events_095567.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2009-12-18T21:23:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7734",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7734#event-95567"
}
```



---

archive/issue_events_095568.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2009-12-18T21:23:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/7734",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7734#event-95568"
}
```



---

archive/issue_comments_058092.json:
```json
{
    "body": "Attachment: **[trac_7734-edit.patch.gz](https://github.com/sagemath/sage/files/ticket7734/trac_7734-edit.patch.gz)**",
    "created_at": "2009-12-18T21:24:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7734#issuecomment-58092",
    "user": "https://github.com/rlmill"
}
```

Attachment: **[trac_7734-edit.patch.gz](https://github.com/sagemath/sage/files/ticket7734/trac_7734-edit.patch.gz)**



---

archive/issue_comments_058093.json:
```json
{
    "body": "Reviewer: **Robert Miller**",
    "created_at": "2009-12-18T21:25:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7734#issuecomment-58093",
    "user": "https://github.com/rlmill"
}
```

Reviewer: **Robert Miller**



---

archive/issue_comments_058094.json:
```json
{
    "body": "Author: **Nathann Cohen**",
    "created_at": "2009-12-18T21:25:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7734#issuecomment-58094",
    "user": "https://github.com/rlmill"
}
```

Author: **Nathann Cohen**



---

archive/issue_events_095569.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2009-12-18T21:27:06Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/7734",
    "title_is": "edge_coloring loops forever when GLPK is not installed",
    "title_was": "edge_coloring ( and possibly vertex_coloring ) loop forever when GLPK is not installed",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7734#event-95569"
}
```



---

archive/issue_comments_058095.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nThank you for your help !!!\n\nConcerning your second point : do you have an example for which it takes some time ? I would also like to try to improve it a bit :-)",
    "created_at": "2009-12-19T08:24:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7734#issuecomment-58095",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:5" align="right">comment:5</div>

Thank you for your help !!!

Concerning your second point : do you have an example for which it takes some time ? I would also like to try to improve it a bit :-)



---

archive/issue_comments_058096.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@nathanncohen](#comment:5):\n> Thank you for your help !!!\n> \n> do you have an example for which it takes some time ? I would also like to try to improve it a bit :-)\n> \n\n```\nsage: from sage.graphs.graph_coloring import vertex_coloring\nsage: g = graphs.CirculantGraph(120, [2,3,5,7])\nsage: vertex_coloring(g)\n```\nIt takes longer to set up the constraint than to solve the problem, on my laptop.",
    "created_at": "2009-12-19T08:39:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7734#issuecomment-58096",
    "user": "https://github.com/rlmill"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@nathanncohen](#comment:5):
> Thank you for your help !!!
> 
> do you have an example for which it takes some time ? I would also like to try to improve it a bit :-)
> 

```
sage: from sage.graphs.graph_coloring import vertex_coloring
sage: g = graphs.CirculantGraph(120, [2,3,5,7])
sage: vertex_coloring(g)
```
It takes longer to set up the constraint than to solve the problem, on my laptop.



---

archive/issue_comments_058097.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI just created #7740 to deal with the problem of speed. What would you advise for the detection of the solver ? At the moment, only the \"solve\" command requires an optional package to be installed, do you think it would be worth changing this and make the whole class depend on GLPK or CBC ?\n\nNathann",
    "created_at": "2009-12-19T08:49:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7734#issuecomment-58097",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:7" align="right">comment:7</div>

I just created #7740 to deal with the problem of speed. What would you advise for the detection of the solver ? At the moment, only the "solve" command requires an optional package to be installed, do you think it would be worth changing this and make the whole class depend on GLPK or CBC ?

Nathann



---

archive/issue_events_095570.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2009-12-19T20:13:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/7734",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7734#event-95570"
}
```



---

archive/issue_events_095571.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2009-12-19T20:13:01Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/7734",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7734#event-95571"
}
```



---

archive/issue_comments_058098.json:
```json
{
    "body": "Merged: **sage-4.3.rc1**",
    "created_at": "2009-12-19T20:13:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/7734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/7734#issuecomment-58098",
    "user": "https://github.com/mwhansen"
}
```

Merged: **sage-4.3.rc1**



---

archive/issue_events_095572.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2009-12-20T07:40:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/7734",
    "milestone_number": null,
    "milestone_title": "sage-4.3.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7734#event-95572"
}
```



---

archive/issue_events_095573.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2009-12-20T07:40:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/7734",
    "milestone_number": null,
    "milestone_title": "sage-4.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/7734#event-95573"
}
```
