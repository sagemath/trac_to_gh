# Issue 7734: edge_coloring loops forever when GLPK is not installed

archive/issues_007734.json:
```json
{
    "body": "As the title says... :-)\n\nThis patch can be qualified of \"short\" :p\n\nAssignee: @rlmill\n\nCC:  @rlmill\n\nResolution: fixed\n\nAuthor: Nathann Cohen\n\nReviewer: Robert Miller\n\nMerged: sage-4.3.rc1\n\nIssue created by migration from https://trac.sagemath.org/ticket/7734\n\n",
    "closed_at": "2009-12-19T20:13:01Z",
    "created_at": "2009-12-18T08:45:30Z",
    "labels": [
        "component: graph theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.3",
    "title": "edge_coloring loops forever when GLPK is not installed",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/7734",
    "user": "https://github.com/nathanncohen"
}
```
As the title says... :-)

This patch can be qualified of "short" :p

Assignee: @rlmill

CC:  @rlmill

Resolution: fixed

Author: Nathann Cohen

Reviewer: Robert Miller

Merged: sage-4.3.rc1

Issue created by migration from https://trac.sagemath.org/ticket/7734





---

archive/issue_comments_077386.json:
```json
{
    "body": "Attachment [trac_7734.patch](tarball://root/attachments/some-uuid/ticket7734/trac_7734.patch) by @nathanncohen created at 2009-12-18 09:02:34",
    "created_at": "2009-12-18T09:02:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7734#issuecomment-77386",
    "user": "https://github.com/nathanncohen"
}
```

Attachment [trac_7734.patch](tarball://root/attachments/some-uuid/ticket7734/trac_7734.patch) by @nathanncohen created at 2009-12-18 09:02:34



---

archive/issue_comments_077387.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n As the title says... :-)\n+\n+This patch can be qualified of \"short\" :p\n``````\n",
    "created_at": "2009-12-18T09:03:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7734#issuecomment-77387",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 As the title says... :-)
+
+This patch can be qualified of "short" :p
``````




---

archive/issue_comments_077388.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2009-12-18T09:03:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7734#issuecomment-77388",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_077389.json:
```json
{
    "body": "<a id='comment:2'></a>\n1. There should always be an example of the bug you are fixing in the patch, always always always. We need a mug shot, so the bug doesn't show its face again :) I added this, as well as several other tests, which have exposed other corner case bugs, such as:\n\n```\nsage: g = Graph(20)\nsage: vertex_coloring(g, hex_colors=True)\n{'#ff0000': 0}\n```\nI've fixed these.\n\n2. It seems to take some time to add constraints to the problem, which is pointless if no solver is installed. Can you add a patch that runs a trivial test before setting up the problem, to see if it is installed?",
    "created_at": "2009-12-18T21:23:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7734#issuecomment-77389",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:2'></a>
1. There should always be an example of the bug you are fixing in the patch, always always always. We need a mug shot, so the bug doesn't show its face again :) I added this, as well as several other tests, which have exposed other corner case bugs, such as:

```
sage: g = Graph(20)
sage: vertex_coloring(g, hex_colors=True)
{'#ff0000': 0}
```
I've fixed these.

2. It seems to take some time to add constraints to the problem, which is pointless if no solver is installed. Can you add a patch that runs a trivial test before setting up the problem, to see if it is installed?



---

archive/issue_comments_077390.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2009-12-18T21:23:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7734#issuecomment-77390",
    "user": "https://github.com/rlmill"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_077391.json:
```json
{
    "body": "Attachment [trac_7734-edit.patch](tarball://root/attachments/some-uuid/ticket7734/trac_7734-edit.patch) by @rlmill created at 2009-12-18 21:24:09",
    "created_at": "2009-12-18T21:24:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7734#issuecomment-77391",
    "user": "https://github.com/rlmill"
}
```

Attachment [trac_7734-edit.patch](tarball://root/attachments/some-uuid/ticket7734/trac_7734-edit.patch) by @rlmill created at 2009-12-18 21:24:09



---

archive/issue_comments_077392.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Robert Miller\"",
    "created_at": "2009-12-18T21:25:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7734#issuecomment-77392",
    "user": "https://github.com/rlmill"
}
```

Changing reviewer from "" to "Robert Miller"



---

archive/issue_comments_077393.json:
```json
{
    "body": "Changing author from \"\" to \"Nathann Cohen\"",
    "created_at": "2009-12-18T21:25:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7734#issuecomment-77393",
    "user": "https://github.com/rlmill"
}
```

Changing author from "" to "Nathann Cohen"



---

archive/issue_comments_077394.json:
```json
{
    "body": "<a id='comment:5'></a>\nThank you for your help !!!\n\nConcerning your second point : do you have an example for which it takes some time ? I would also like to try to improve it a bit :-)",
    "created_at": "2009-12-19T08:24:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7734#issuecomment-77394",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:5'></a>
Thank you for your help !!!

Concerning your second point : do you have an example for which it takes some time ? I would also like to try to improve it a bit :-)



---

archive/issue_comments_077395.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [ncohen](#comment%3A5):\n> Thank you for your help !!!\n> \n> do you have an example for which it takes some time ? I would also like to try to improve it a bit :-)\n> \n\n\n```\nsage: from sage.graphs.graph_coloring import vertex_coloring\nsage: g = graphs.CirculantGraph(120, [2,3,5,7])\nsage: vertex_coloring(g)\n```\nIt takes longer to set up the constraint than to solve the problem, on my laptop.",
    "created_at": "2009-12-19T08:39:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7734#issuecomment-77395",
    "user": "https://github.com/rlmill"
}
```

<a id='comment:6'></a>
Replying to [ncohen](#comment%3A5):
> Thank you for your help !!!
> 
> do you have an example for which it takes some time ? I would also like to try to improve it a bit :-)
> 


```
sage: from sage.graphs.graph_coloring import vertex_coloring
sage: g = graphs.CirculantGraph(120, [2,3,5,7])
sage: vertex_coloring(g)
```
It takes longer to set up the constraint than to solve the problem, on my laptop.



---

archive/issue_comments_077396.json:
```json
{
    "body": "<a id='comment:7'></a>\nI just created #7740 to deal with the problem of speed. What would you advise for the detection of the solver ? At the moment, only the \"solve\" command requires an optional package to be installed, do you think it would be worth changing this and make the whole class depend on GLPK or CBC ?\n\nNathann",
    "created_at": "2009-12-19T08:49:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7734#issuecomment-77396",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:7'></a>
I just created #7740 to deal with the problem of speed. What would you advise for the detection of the solver ? At the moment, only the "solve" command requires an optional package to be installed, do you think it would be worth changing this and make the whole class depend on GLPK or CBC ?

Nathann



---

archive/issue_comments_077397.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2009-12-19T20:13:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7734#issuecomment-77397",
    "user": "https://github.com/mwhansen"
}
```

Resolution: fixed



---

archive/issue_events_018492.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2009-12-19T20:13:01Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/7734",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/7734#event-18492"
}
```



---

archive/issue_comments_077398.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-4.3.rc1\"",
    "created_at": "2009-12-19T20:13:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7734#issuecomment-77398",
    "user": "https://github.com/mwhansen"
}
```

Changing merged from "" to "sage-4.3.rc1"



---

archive/issue_events_018493.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2009-12-20T07:40:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/7734",
    "milestone": "sage-4.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/7734#event-18493"
}
```
