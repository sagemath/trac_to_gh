# Issue 7502: lazy import module

archive/issues_007502.json:
```json
{
    "body": "This is something I came up with when trying to reduce sage start up time. \n\n```\n2.033 sage.all (None)\n0.407 sage.server.all (sage.all)\n0.404 notebook.all (sage.server.all)\n0.365 sage.server.notebook.notebook (notebook.all)\n...\n```\n\nNow notebook() needs to be in the global namespace, but usually the entire notebook server does not need to be loaded. I'm sure there's other trimming we could do here as well. \n\nIt's unclear what level to put this in, but I would think sage.server.notebook.all would be a good place (e.g. we could lazily import interact.*, sage_email.*, and lazily import notebook and inotebook). That could cut down startup time by 25%. \n\nAssignee: @williamstein\n\nResolution: fixed\n\nAuthor: Robert Bradshaw\n\nReviewer: Mitesh Patel\n\nMerged: sage-4.3.2.alpha1\n\nIssue created by migration from https://trac.sagemath.org/ticket/7502\n\n",
    "closed_at": "2010-01-30T23:54:04Z",
    "created_at": "2009-11-20T09:20:53Z",
    "labels": [
        "component: user interface"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.3.2",
    "title": "lazy import module",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/7502",
    "user": "https://github.com/robertwb"
}
```
This is something I came up with when trying to reduce sage start up time. 

```
2.033 sage.all (None)
0.407 sage.server.all (sage.all)
0.404 notebook.all (sage.server.all)
0.365 sage.server.notebook.notebook (notebook.all)
...
```

Now notebook() needs to be in the global namespace, but usually the entire notebook server does not need to be loaded. I'm sure there's other trimming we could do here as well. 

It's unclear what level to put this in, but I would think sage.server.notebook.all would be a good place (e.g. we could lazily import interact.*, sage_email.*, and lazily import notebook and inotebook). That could cut down startup time by 25%. 

Assignee: @williamstein

Resolution: fixed

Author: Robert Bradshaw

Reviewer: Mitesh Patel

Merged: sage-4.3.2.alpha1

Issue created by migration from https://trac.sagemath.org/ticket/7502





---

archive/issue_comments_073560.json:
```json
{
    "body": "Attachment [7502-lazy-import.patch](tarball://root/attachments/some-uuid/ticket7502/7502-lazy-import.patch) by @robertwb created at 2009-11-20 09:21:44",
    "created_at": "2009-11-20T09:21:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7502",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7502#issuecomment-73560",
    "user": "https://github.com/robertwb"
}
```

Attachment [7502-lazy-import.patch](tarball://root/attachments/some-uuid/ticket7502/7502-lazy-import.patch) by @robertwb created at 2009-11-20 09:21:44



---

archive/issue_comments_073561.json:
```json
{
    "body": "Changing upstream from \"\" to \"N/A\"",
    "created_at": "2010-01-28T05:58:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7502",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7502#issuecomment-73561",
    "user": "https://github.com/qed777"
}
```

Changing upstream from "" to "N/A"



---

archive/issue_comments_073562.json:
```json
{
    "body": "<a id='comment:1'></a>Somewhat related: #8102 + #8107 reduce the startup time by cutting unnecessary imports.",
    "created_at": "2010-01-28T05:58:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7502",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7502#issuecomment-73562",
    "user": "https://github.com/qed777"
}
```

<a id='comment:1'></a>Somewhat related: #8102 + #8107 reduce the startup time by cutting unnecessary imports.



---

archive/issue_comments_073563.json:
```json
{
    "body": "<a id='comment:2'></a>By the way, is this up for review?",
    "created_at": "2010-01-28T05:58:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7502",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7502#issuecomment-73563",
    "user": "https://github.com/qed777"
}
```

<a id='comment:2'></a>By the way, is this up for review?



---

archive/issue_comments_073564.json:
```json
{
    "body": "<a id='comment:3'></a>Yes.",
    "created_at": "2010-01-28T19:15:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7502",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7502#issuecomment-73564",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:3'></a>Yes.



---

archive/issue_comments_073565.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2010-01-28T19:15:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7502",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7502#issuecomment-73565",
    "user": "https://github.com/robertwb"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_073566.json:
```json
{
    "body": "Attachment [7502-lazy-import.2.patch](tarball://root/attachments/some-uuid/ticket7502/7502-lazy-import.2.patch) by @qed777 created at 2010-01-30 03:34:11\n\nAlso map tab completion.  Add to reference manual. Rebased vs. 4.3.2.alpha0. Replaces previous.",
    "created_at": "2010-01-30T03:34:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7502",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7502#issuecomment-73566",
    "user": "https://github.com/qed777"
}
```

Attachment [7502-lazy-import.2.patch](tarball://root/attachments/some-uuid/ticket7502/7502-lazy-import.2.patch) by @qed777 created at 2010-01-30 03:34:11

Also map tab completion.  Add to reference manual. Rebased vs. 4.3.2.alpha0. Replaces previous.



---

archive/issue_comments_073567.json:
```json
{
    "body": "Changing author from \"\" to \"Robert Bradshaw\"",
    "created_at": "2010-01-30T03:39:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7502",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7502#issuecomment-73567",
    "user": "https://github.com/qed777"
}
```

Changing author from "" to "Robert Bradshaw"



---

archive/issue_comments_073568.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Mitesh Patel\"",
    "created_at": "2010-01-30T03:39:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7502",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7502#issuecomment-73568",
    "user": "https://github.com/qed777"
}
```

Changing reviewer from "" to "Mitesh Patel"



---

archive/issue_comments_073569.json:
```json
{
    "body": "<a id='comment:4'></a>My review is positive, but someone should review the changes in v2.",
    "created_at": "2010-01-30T03:39:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7502",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7502#issuecomment-73569",
    "user": "https://github.com/qed777"
}
```

<a id='comment:4'></a>My review is positive, but someone should review the changes in v2.



---

archive/issue_comments_073570.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2010-01-30T05:28:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7502",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7502#issuecomment-73570",
    "user": "https://github.com/robertwb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_073571.json:
```json
{
    "body": "<a id='comment:5'></a>Thanks. Yes, your additions look good as well.",
    "created_at": "2010-01-30T05:28:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7502",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7502#issuecomment-73571",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:5'></a>Thanks. Yes, your additions look good as well.



---

archive/issue_events_017779.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mvngu",
    "created_at": "2010-01-30T23:54:04Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/7502",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/7502#event-17779"
}
```



---

archive/issue_comments_073572.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-4.3.2.alpha1\"",
    "created_at": "2010-01-30T23:54:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7502",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7502#issuecomment-73572",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

Changing merged from "" to "sage-4.3.2.alpha1"



---

archive/issue_comments_073573.json:
```json
{
    "body": "<a id='comment:6'></a>Merged [7502-lazy-import.2.patch](http://trac.sagemath.org/sage_trac/attachment/ticket/7502/7502-lazy-import.2.patch).",
    "created_at": "2010-01-30T23:54:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7502",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7502#issuecomment-73573",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

<a id='comment:6'></a>Merged [7502-lazy-import.2.patch](http://trac.sagemath.org/sage_trac/attachment/ticket/7502/7502-lazy-import.2.patch).



---

archive/issue_comments_073574.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2010-01-30T23:54:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7502",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7502#issuecomment-73574",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

Resolution: fixed
