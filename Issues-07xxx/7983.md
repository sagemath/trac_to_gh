# Issue 7983: Notion of descent/major index in tableau.py is not mathematically standard

archive/issues_007983.json:
```json
{
    "body": "The 'descents' and 'major_index' methods of a Tableau return what are more properly known as 'i_descents' and the 'i_maj' statistic.  These should be renamed accordingly, and the proper statistics put in their place.  See, eg., Richard Stanley--Enumerative Combinatorics, Vol. 2 for a reference to the usual definition.\n\n*EDIT* by Darij:\n\nApply:\n\n* [attachment:trac_7983-major_index_and_other_tableau_fixes-dg.patch]\n* [attachment:trac_7983-review-ts.patch]\n\n**Assignee:** sage-combinat\n\n**CC:**  @darijgr sage-combinat @anneschilling @tscrim\n\n**Keywords:** combinat, tableaux, days49\n\n**Reviewer:** Jason Bandlow, Travis Scrimshaw\n\n**Author:** Amarpreet Rattan, Darij Grinberg\n\n**Merged:** sage-5.12.beta0\n\n**Dependencies:** #8392\n\nIssue created by migration from https://trac.sagemath.org/ticket/7983\n\n",
    "closed_at": "2013-08-02T14:11:45Z",
    "created_at": "2010-01-18T19:39:19Z",
    "labels": [
        "component: combinatorics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.12",
    "title": "Notion of descent/major index in tableau.py is not mathematically standard",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/7983",
    "user": "https://github.com/jbandlow"
}
```
The 'descents' and 'major_index' methods of a Tableau return what are more properly known as 'i_descents' and the 'i_maj' statistic.  These should be renamed accordingly, and the proper statistics put in their place.  See, eg., Richard Stanley--Enumerative Combinatorics, Vol. 2 for a reference to the usual definition.

*EDIT* by Darij:

Apply:

* [attachment:trac_7983-major_index_and_other_tableau_fixes-dg.patch]
* [attachment:trac_7983-review-ts.patch]

**Assignee:** sage-combinat

**CC:**  @darijgr sage-combinat @anneschilling @tscrim

**Keywords:** combinat, tableaux, days49

**Reviewer:** Jason Bandlow, Travis Scrimshaw

**Author:** Amarpreet Rattan, Darij Grinberg

**Merged:** sage-5.12.beta0

**Dependencies:** #8392

Issue created by migration from https://trac.sagemath.org/ticket/7983





---

archive/issue_comments_064370.json:
```json
{
    "body": "<a id='comment:1'></a>\nI have made a patch that resolves this issue.\n\nWhat I have done is renamed the old methods 'major_index' and 'descents' to 'i_major_index' and 'i_descents'.  From what I can tell, only one other method refers to either of these methods and that is 'inversion', and I have not changed that at all except to refer to the new 'i_descents' (in particular I have not changed the name of 'inversion').\n\nI have then made new methods called 'major_index' and 'descents' which use a more standard definition (i.e. the one on pages 361 and 363 of Enumerative Combinatorics Vol 2 by R. Stanley).",
    "created_at": "2010-11-15T17:30:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7983#issuecomment-64370",
    "user": "https://trac.sagemath.org/admin/accounts/users/arattan"
}
```

<a id='comment:1'></a>
I have made a patch that resolves this issue.

What I have done is renamed the old methods 'major_index' and 'descents' to 'i_major_index' and 'i_descents'.  From what I can tell, only one other method refers to either of these methods and that is 'inversion', and I have not changed that at all except to refer to the new 'i_descents' (in particular I have not changed the name of 'inversion').

I have then made new methods called 'major_index' and 'descents' which use a more standard definition (i.e. the one on pages 361 and 363 of Enumerative Combinatorics Vol 2 by R. Stanley).



---

archive/issue_comments_064371.json:
```json
{
    "body": "**Reviewer:** jbandlow",
    "created_at": "2010-11-15T17:30:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7983#issuecomment-64371",
    "user": "https://trac.sagemath.org/admin/accounts/users/arattan"
}
```

**Reviewer:** jbandlow



---

archive/issue_events_056780.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/arattan",
    "created_at": "2010-11-15T17:30:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/7983#event-56780"
}
```



---

archive/issue_comments_064372.json:
```json
{
    "body": "patch to fix tableaux major index",
    "created_at": "2010-11-15T17:32:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7983#issuecomment-64372",
    "user": "https://trac.sagemath.org/admin/accounts/users/arattan"
}
```

patch to fix tableaux major index



---

archive/attachments_009809.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "Fix_Tableau_Major_Index_AR.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket7983/Fix_Tableau_Major_Index_AR.patch",
    "created_at": "2010-11-16T14:11:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/jbandlow"
}
```



---

archive/issue_comments_064373.json:
```json
{
    "body": "<a id='comment:2'></a>\nThanks for the patch!  While I don't have time for a full review now, the main issue with this patch is going to be backward compatibility.  I'm pretty sure that the Macdonald polynomial code uses these functions, so sage --testall will probably fail after applying your patch.  That part will not be too hard to fix, but the bigger problem is for people who have sage code on their own machine.  When people upgrade sage and this change is included (without them necessarily knowing about it) this change could make their code behave in slightly wrong ways that are not obvious.  We really try to avoid that.\n\nSo I think the thing to do is to deprecate 'descents' and 'major_index' (look up deprecation in the developers guide), use 'i_descents' and 'i_major_index' for the existing statistics (as you have done) and give the classical statistics some new name. (Suggestions welcome!)",
    "created_at": "2010-11-16T14:11:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7983#issuecomment-64373",
    "user": "https://github.com/jbandlow"
}
```

<a id='comment:2'></a>
Thanks for the patch!  While I don't have time for a full review now, the main issue with this patch is going to be backward compatibility.  I'm pretty sure that the Macdonald polynomial code uses these functions, so sage --testall will probably fail after applying your patch.  That part will not be too hard to fix, but the bigger problem is for people who have sage code on their own machine.  When people upgrade sage and this change is included (without them necessarily knowing about it) this change could make their code behave in slightly wrong ways that are not obvious.  We really try to avoid that.

So I think the thing to do is to deprecate 'descents' and 'major_index' (look up deprecation in the developers guide), use 'i_descents' and 'i_major_index' for the existing statistics (as you have done) and give the classical statistics some new name. (Suggestions welcome!)



---

archive/issue_events_056781.json:
```json
{
    "actor": "https://github.com/jbandlow",
    "created_at": "2010-11-16T14:11:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/7983#event-56781"
}
```



---

archive/issue_events_056782.json:
```json
{
    "actor": "https://github.com/jbandlow",
    "created_at": "2010-11-16T14:11:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/7983#event-56782"
}
```



---

archive/issue_comments_064374.json:
```json
{
    "body": "<a id='comment:3'></a>\nReplying to [jbandlow](#comment%3A2):\n> Thanks for the patch!  While I don't have time for a full review now, the main issue with this patch is going to be backward compatibility.  I'm pretty sure that the Macdonald polynomial code uses these functions, so sage --testall will probably fail after applying your patch.  That part will not be too hard to fix, but the bigger problem is for people who have sage code on their own machine.  When people upgrade sage and this change is included (without them necessarily knowing about it) this change could make their code behave in slightly wrong ways that are not obvious.  We really try to avoid that.\n> \n> So I think the thing to do is to deprecate 'descents' and 'major_index' (look up deprecation in the developers guide), use 'i_descents' and 'i_major_index' for the existing statistics (as you have done) and give the classical statistics some new name. (Suggestions welcome!)\n\n\nYes, I thought this would be an issue.  I actually made the patch a while ago but thought that precisely your objection would be raised.  Anyways, I decided to send it in and see what would happen.  It sounds like you have a good solution.\n\nAbout a new name:  is \"Major_Index\" a bad idea?  I don't know about sage's naming conventions.",
    "created_at": "2010-11-16T14:34:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7983#issuecomment-64374",
    "user": "https://trac.sagemath.org/admin/accounts/users/arattan"
}
```

<a id='comment:3'></a>
Replying to [jbandlow](#comment%3A2):
> Thanks for the patch!  While I don't have time for a full review now, the main issue with this patch is going to be backward compatibility.  I'm pretty sure that the Macdonald polynomial code uses these functions, so sage --testall will probably fail after applying your patch.  That part will not be too hard to fix, but the bigger problem is for people who have sage code on their own machine.  When people upgrade sage and this change is included (without them necessarily knowing about it) this change could make their code behave in slightly wrong ways that are not obvious.  We really try to avoid that.
> 
> So I think the thing to do is to deprecate 'descents' and 'major_index' (look up deprecation in the developers guide), use 'i_descents' and 'i_major_index' for the existing statistics (as you have done) and give the classical statistics some new name. (Suggestions welcome!)


Yes, I thought this would be an issue.  I actually made the patch a while ago but thought that precisely your objection would be raised.  Anyways, I decided to send it in and see what would happen.  It sounds like you have a good solution.

About a new name:  is "Major_Index" a bad idea?  I don't know about sage's naming conventions.



---

archive/issue_comments_064375.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n The 'descents' and 'major_index' methods of a Tableau return what are more properly known as 'i_descents' and the 'i_maj' statistic.  These should be renamed accordingly, and the proper statistics put in their place.  See, eg., Richard Stanley--Enumerative Combinatorics, Vol. 2 for a reference to the usual definition.\n+\n+*Apply: [attachment: trac_7983-major_index_and_other_tableau_fixes-dg.patch]\n``````\n",
    "created_at": "2013-06-15T22:15:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7983#issuecomment-64375",
    "user": "https://github.com/darijgr"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 The 'descents' and 'major_index' methods of a Tableau return what are more properly known as 'i_descents' and the 'i_maj' statistic.  These should be renamed accordingly, and the proper statistics put in their place.  See, eg., Richard Stanley--Enumerative Combinatorics, Vol. 2 for a reference to the usual definition.
+
+*Apply: [attachment: trac_7983-major_index_and_other_tableau_fixes-dg.patch]
``````




---

archive/issue_comments_064376.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"combinat, tableaux\".",
    "created_at": "2013-06-15T22:15:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7983#issuecomment-64376",
    "user": "https://github.com/darijgr"
}
```

**Changing keywords** from "" to "combinat, tableaux".



---

archive/issue_events_056783.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2013-06-15T22:15:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/7983#event-56783"
}
```



---

archive/issue_events_056784.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2013-06-15T22:15:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/7983#event-56784"
}
```



---

archive/issue_comments_064377.json:
```json
{
    "body": "<a id='comment:6'></a>\n3 years... not bad.\n\nI've remade the patch from scratch (arattan's one didn't apply, unsurprisingly given its age) without renaming the existing `descents`, `major_index` etc. functions. While I agree with arattan that these functions should be deprecated and renamed, I think it's a top priority to get the correct ones out ASAP, under whatever name possible (I chose `standard_descents` and `standard_major_index`). I have taken the liberty to edit the docstrings of the old functions to explain that they are not what they seem to be; Jason and me are hardly the only people to trip over this. (To make things worse, the only two examples for the `major_index` function used to be cases where it happens to have the same values as the \"correct\" one!!)\n\nThe patch I attached does a few more things:\n\n- Various improvements in the documentation of `tableaux.py`. The doc of `promotion` now warns about its nonstandard definition (#14641). A doctest has been added to check the equivalence between two definitions of promotion (this takes a couple seconds; let me know if that's too much).\n\n- `up` and `down` methods are moved to `StandardTableaux` (look at what they do to see why) and now return the correct result for the empty tableau.\n\n- The empty tableau is now correctly recognized as being rectangular.\n\nHere's stuff that has not been done (partly because I am not sure about them -- comments are welcome):\n\n- Copy/move attacking_pairs method to partitions.\n\n- Generalize promotion_inverse to non-rectangular tableaux (particularly important since I believe promotion_inverse is what many people just call promotion).\n\n- `Tableau([[]])` is standard and distinct from `Tableau([])`. Is this bad?\n\n- Copy/move functionality to skew tableaux (this should be one separate huge ticket once other stuff is done, I guess).\n\n- Allow creating tableaux of various ilks without checking the tableau conditions. This should be mostly called internally, so as to avoid having lots of redundant checking at runtime.\n\nI have been building this patch on sage-5.10rc1 with only #8392 applied.",
    "created_at": "2013-06-15T22:27:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7983#issuecomment-64377",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:6'></a>
3 years... not bad.

I've remade the patch from scratch (arattan's one didn't apply, unsurprisingly given its age) without renaming the existing `descents`, `major_index` etc. functions. While I agree with arattan that these functions should be deprecated and renamed, I think it's a top priority to get the correct ones out ASAP, under whatever name possible (I chose `standard_descents` and `standard_major_index`). I have taken the liberty to edit the docstrings of the old functions to explain that they are not what they seem to be; Jason and me are hardly the only people to trip over this. (To make things worse, the only two examples for the `major_index` function used to be cases where it happens to have the same values as the "correct" one!!)

The patch I attached does a few more things:

- Various improvements in the documentation of `tableaux.py`. The doc of `promotion` now warns about its nonstandard definition (#14641). A doctest has been added to check the equivalence between two definitions of promotion (this takes a couple seconds; let me know if that's too much).

- `up` and `down` methods are moved to `StandardTableaux` (look at what they do to see why) and now return the correct result for the empty tableau.

- The empty tableau is now correctly recognized as being rectangular.

Here's stuff that has not been done (partly because I am not sure about them -- comments are welcome):

- Copy/move attacking_pairs method to partitions.

- Generalize promotion_inverse to non-rectangular tableaux (particularly important since I believe promotion_inverse is what many people just call promotion).

- `Tableau([[]])` is standard and distinct from `Tableau([])`. Is this bad?

- Copy/move functionality to skew tableaux (this should be one separate huge ticket once other stuff is done, I guess).

- Allow creating tableaux of various ilks without checking the tableau conditions. This should be mostly called internally, so as to avoid having lots of redundant checking at runtime.

I have been building this patch on sage-5.10rc1 with only #8392 applied.



---

archive/issue_comments_064378.json:
```json
{
    "body": "**Author:** Jason Bandlow, Darij Grinberg",
    "created_at": "2013-06-15T22:28:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7983#issuecomment-64378",
    "user": "https://github.com/darijgr"
}
```

**Author:** Jason Bandlow, Darij Grinberg



---

archive/issue_comments_064379.json:
```json
{
    "body": "**Dependencies:** #8392",
    "created_at": "2013-06-15T22:28:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7983#issuecomment-64379",
    "user": "https://github.com/darijgr"
}
```

**Dependencies:** #8392



---

archive/issue_comments_064380.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n The 'descents' and 'major_index' methods of a Tableau return what are more properly known as 'i_descents' and the 'i_maj' statistic.  These should be renamed accordingly, and the proper statistics put in their place.  See, eg., Richard Stanley--Enumerative Combinatorics, Vol. 2 for a reference to the usual definition.\n \n-*Apply: [attachment: trac_7983-major_index_and_other_tableau_fixes-dg.patch]\n+*EDIT* by Darij:\n+\n+* Apply: [attachment: trac_7983-major_index_and_other_tableau_fixes-dg.patch]\n``````\n",
    "created_at": "2013-06-15T22:28:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7983#issuecomment-64380",
    "user": "https://github.com/darijgr"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 The 'descents' and 'major_index' methods of a Tableau return what are more properly known as 'i_descents' and the 'i_maj' statistic.  These should be renamed accordingly, and the proper statistics put in their place.  See, eg., Richard Stanley--Enumerative Combinatorics, Vol. 2 for a reference to the usual definition.
 
-*Apply: [attachment: trac_7983-major_index_and_other_tableau_fixes-dg.patch]
+*EDIT* by Darij:
+
+* Apply: [attachment: trac_7983-major_index_and_other_tableau_fixes-dg.patch]
``````




---

archive/issue_comments_064381.json:
```json
{
    "body": "**Changing author** from \"Jason Bandlow, Darij Grinberg\" to \"arattan, Darij Grinberg\".",
    "created_at": "2013-06-15T22:31:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7983#issuecomment-64381",
    "user": "https://github.com/darijgr"
}
```

**Changing author** from "Jason Bandlow, Darij Grinberg" to "arattan, Darij Grinberg".



---

archive/issue_comments_064382.json:
```json
{
    "body": "<a id='comment:9'></a>\nHey Darij,\n\nTwo things I notice from a quick lookthrough:\n\n1. `up()` and friends I think should remain where they are because there's no assumptions made on the initial tableau. However I do think there are some assumptions about standardness made in their implementation...\n2. The reference to Stanley is indented one too many times.\n\nI'll do a more through look-through and we can talk about 1. once I get to Orsay tomorrow.\n\nBest,\n\nTravis",
    "created_at": "2013-06-15T22:40:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7983#issuecomment-64382",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:9'></a>
Hey Darij,

Two things I notice from a quick lookthrough:

1. `up()` and friends I think should remain where they are because there's no assumptions made on the initial tableau. However I do think there are some assumptions about standardness made in their implementation...
2. The reference to Stanley is indented one too many times.

I'll do a more through look-through and we can talk about 1. once I get to Orsay tomorrow.

Best,

Travis



---

archive/issue_comments_064383.json:
```json
{
    "body": "<a id='comment:10'></a>\nHi Travis,\n\nthanks for looking into this! I've updated the reference; is it correct now?\n\nAs for `up`, is it possible that you meant `standard_descents` instead? I can't imagine how `up` and `down` would be used for anything other than standard tableaux; is it really useful to have a function to tell how many ways there are to add a square to a non-standard tableau to get a standard one? On the other hand, descents could indeed survive a generalization, though I don't know which choices are preferred here.\n\nBest regards,\nDarij",
    "created_at": "2013-06-15T22:52:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7983#issuecomment-64383",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:10'></a>
Hi Travis,

thanks for looking into this! I've updated the reference; is it correct now?

As for `up`, is it possible that you meant `standard_descents` instead? I can't imagine how `up` and `down` would be used for anything other than standard tableaux; is it really useful to have a function to tell how many ways there are to add a square to a non-standard tableau to get a standard one? On the other hand, descents could indeed survive a generalization, though I don't know which choices are preferred here.

Best regards,
Darij



---

archive/issue_comments_064384.json:
```json
{
    "body": "<a id='comment:11'></a>\nHi Darij,\n\nThanks for your work on this. I think it reads a little odd to write that promotion is contrary to the paper by Stanley without giving a reference to what it actually is. Stanley's paper defines promotion on posets, whereas what you touched I think is promotion on tableaux. So it would be good to give a reference, for example the paper by Haiman, Discrete Math 99 (1992) 79-113.\n\nBest,\n\nAnne",
    "created_at": "2013-06-16T07:51:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7983#issuecomment-64384",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:11'></a>
Hi Darij,

Thanks for your work on this. I think it reads a little odd to write that promotion is contrary to the paper by Stanley without giving a reference to what it actually is. Stanley's paper defines promotion on posets, whereas what you touched I think is promotion on tableaux. So it would be good to give a reference, for example the paper by Haiman, Discrete Math 99 (1992) 79-113.

Best,

Anne



---

archive/issue_comments_064385.json:
```json
{
    "body": "<a id='comment:12'></a>\nHi Anne,\n\ngood point, thanks -- I've added the reference to Haiman, and also a better reference (Sagan's cyclic sieving paper) for the conflicting notation. If you agree, the Stanley reference can be removed (he defines promotion for linear extensions of posets, then claiming that this obviously defines it for tableaux -- this isn't really central to the paper, though).\n\nIn other news, I've added documentation to `insert_word`, slightly improved that of `catabolism` and `lambda_catabolism`, and fixed a couple more typos. Since I don't know anything about catabolism, can you tell me if it's OK that `catabolism_sequence(Tableau([]))` does not terminate? I'm hesitating to call it a bug as long as I don't know if this should be defined at all for an empty tableau.\n\nSee you both this evening, dg",
    "created_at": "2013-06-16T08:18:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7983#issuecomment-64385",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:12'></a>
Hi Anne,

good point, thanks -- I've added the reference to Haiman, and also a better reference (Sagan's cyclic sieving paper) for the conflicting notation. If you agree, the Stanley reference can be removed (he defines promotion for linear extensions of posets, then claiming that this obviously defines it for tableaux -- this isn't really central to the paper, though).

In other news, I've added documentation to `insert_word`, slightly improved that of `catabolism` and `lambda_catabolism`, and fixed a couple more typos. Since I don't know anything about catabolism, can you tell me if it's OK that `catabolism_sequence(Tableau([]))` does not terminate? I'm hesitating to call it a bug as long as I don't know if this should be defined at all for an empty tableau.

See you both this evening, dg



---

archive/issue_comments_064386.json:
```json
{
    "body": "<a id='comment:13'></a>\nHi Darij,\n\n> In other news, I've added documentation to `insert_word`, slightly improved that of `catabolism` and `lambda_catabolism`, and fixed a couple more typos. Since I don't know anything about catabolism, can you tell me if it's OK that `catabolism_sequence(Tableau([]))` does not terminate? I'm hesitating to call it a bug as long as I don't know if this should be defined at all for an empty tableau.\n\n\nYes, probably you want that catabolism_sequence on the empty tableau is the empty tableau. The code only checks if the tableau is of height 1, but catabolism on the empty tableau is itself and hence it goes into an infinite loop.\n\nBest,\n\nAnne",
    "created_at": "2013-06-16T12:42:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7983#issuecomment-64386",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:13'></a>
Hi Darij,

> In other news, I've added documentation to `insert_word`, slightly improved that of `catabolism` and `lambda_catabolism`, and fixed a couple more typos. Since I don't know anything about catabolism, can you tell me if it's OK that `catabolism_sequence(Tableau([]))` does not terminate? I'm hesitating to call it a bug as long as I don't know if this should be defined at all for an empty tableau.


Yes, probably you want that catabolism_sequence on the empty tableau is the empty tableau. The code only checks if the tableau is of height 1, but catabolism on the empty tableau is itself and hence it goes into an infinite loop.

Best,

Anne



---

archive/issue_comments_064387.json:
```json
{
    "body": "<a id='comment:14'></a>\nHi Anne,\n\ndone!\n\nI've made one more minor change right now: `.up()` now outputs standard tableaux, not tableaux (just a question of casting the right type; they were standard, of course).\n\nBest regards,\nDarij (in Bures now)\n\nPS, in case this was Travis's concern: I've grepped for appearances of `.up()`, `.up_list()`, `.down()` and `.down_list()` in the source code, and found only 2-3 files apart from `tableau.py` where these were used. They were used in a different context in those files, and my changes didn't break their doctests. Of course, someone's local code might get broken, but I don't know a good way to avoid that making any change at all. One minor issue that I did introduce is that execution of `.up()` and `.down()` now takes a tiny bit longer because of checking for standardness. I'll deal with it when I add a `check_input` parameter throughout `tableaux.py`.",
    "created_at": "2013-06-16T17:08:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7983#issuecomment-64387",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:14'></a>
Hi Anne,

done!

I've made one more minor change right now: `.up()` now outputs standard tableaux, not tableaux (just a question of casting the right type; they were standard, of course).

Best regards,
Darij (in Bures now)

PS, in case this was Travis's concern: I've grepped for appearances of `.up()`, `.up_list()`, `.down()` and `.down_list()` in the source code, and found only 2-3 files apart from `tableau.py` where these were used. They were used in a different context in those files, and my changes didn't break their doctests. Of course, someone's local code might get broken, but I don't know a good way to avoid that making any change at all. One minor issue that I did introduce is that execution of `.up()` and `.down()` now takes a tiny bit longer because of checking for standardness. I'll deal with it when I add a `check_input` parameter throughout `tableaux.py`.



---

archive/issue_comments_064388.json:
```json
{
    "body": "<a id='comment:15'></a>\nUpdated. `promotion_inverse` now works for non-rectangular tableaux as well (using a new `_slide_down` method). Moreover, it works fine for the empty tableau. Furthermore, `promotion` and `promotion_inverse` have been redefined on `StandardTableau` to automatically compute the `n` variable and to cast the result as a `StandardTableau` (not just a `Tableau`).",
    "created_at": "2013-06-17T16:16:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7983#issuecomment-64388",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:15'></a>
Updated. `promotion_inverse` now works for non-rectangular tableaux as well (using a new `_slide_down` method). Moreover, it works fine for the empty tableau. Furthermore, `promotion` and `promotion_inverse` have been redefined on `StandardTableau` to automatically compute the `n` variable and to cast the result as a `StandardTableau` (not just a `Tableau`).



---

archive/issue_comments_064389.json:
```json
{
    "body": "**Changing keywords** from \"combinat, tableaux\" to \"combinat, tableaux, days49\".",
    "created_at": "2013-06-17T16:35:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7983#issuecomment-64389",
    "user": "https://github.com/darijgr"
}
```

**Changing keywords** from "combinat, tableaux" to "combinat, tableaux, days49".



---

archive/issue_comments_064390.json:
```json
{
    "body": "implements the right notions of major index and descents for standard tableaux without changing the old ones; extends promotion_inverse to non-rectangular tableaux; fixes a couple minor issues and improves doc; version 8",
    "created_at": "2013-06-17T16:43:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7983#issuecomment-64390",
    "user": "https://github.com/darijgr"
}
```

implements the right notions of major index and descents for standard tableaux without changing the old ones; extends promotion_inverse to non-rectangular tableaux; fixes a couple minor issues and improves doc; version 8



---

archive/attachments_009810.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_7983-major_index_and_other_tableau_fixes-dg.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket7983/trac_7983-major_index_and_other_tableau_fixes-dg.patch",
    "created_at": "2013-06-17T16:43:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/darijgr"
}
```



---

archive/issue_comments_064391.json:
```json
{
    "body": "<a id='comment:17'></a>\nTypo in a docstring fixed.",
    "created_at": "2013-06-17T16:43:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7983#issuecomment-64391",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:17'></a>
Typo in a docstring fixed.



---

archive/issue_comments_064392.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,4 +2,7 @@\n \n *EDIT* by Darij:\n \n-* Apply: [attachment: trac_7983-major_index_and_other_tableau_fixes-dg.patch]\n+Apply:\n+\n+* [attachment:trac_7983-major_index_and_other_tableau_fixes-dg.patch]\n+* [attachment:trac_7983-review-ts.patch]\n``````\n",
    "created_at": "2013-06-23T20:16:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7983#issuecomment-64392",
    "user": "https://github.com/tscrim"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,4 +2,7 @@
 
 *EDIT* by Darij:
 
-* Apply: [attachment: trac_7983-major_index_and_other_tableau_fixes-dg.patch]
+Apply:
+
+* [attachment:trac_7983-major_index_and_other_tableau_fixes-dg.patch]
+* [attachment:trac_7983-review-ts.patch]
``````




---

archive/issue_comments_064393.json:
```json
{
    "body": "**Changing reviewer** from \"jbandlow\" to \"Jason Bandlow, Travis Scrimshaw\".",
    "created_at": "2013-06-23T20:16:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7983#issuecomment-64393",
    "user": "https://github.com/tscrim"
}
```

**Changing reviewer** from "jbandlow" to "Jason Bandlow, Travis Scrimshaw".



---

archive/issue_comments_064394.json:
```json
{
    "body": "<a id='comment:18'></a>\nHey Darij,\n\nHere's the review patch.\n\nTravis",
    "created_at": "2013-06-23T20:16:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7983#issuecomment-64394",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:18'></a>
Hey Darij,

Here's the review patch.

Travis



---

archive/issue_events_056785.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2013-06-23T20:42:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/7983#event-56785"
}
```



---

archive/issue_events_056786.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2013-06-23T20:42:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/7983#event-56786"
}
```



---

archive/issue_comments_064395.json:
```json
{
    "body": "<a id='comment:20'></a>\nLet's see if I'm getting the syntax right... patchbot:\n\napply trac_7983-major_index_and_other_tableau_fixes-dg.patch trac_7983-review-ts.patch",
    "created_at": "2013-07-16T19:18:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7983#issuecomment-64395",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:20'></a>
Let's see if I'm getting the syntax right... patchbot:

apply trac_7983-major_index_and_other_tableau_fixes-dg.patch trac_7983-review-ts.patch



---

archive/attachments_009811.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_7983-review-ts.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket7983/trac_7983-review-ts.patch",
    "created_at": "2013-07-19T13:14:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/tscrim"
}
```



---

archive/issue_comments_064396.json:
```json
{
    "body": "",
    "created_at": "2013-07-19T13:14:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7983#issuecomment-64396",
    "user": "https://github.com/tscrim"
}
```





---

archive/issue_comments_064397.json:
```json
{
    "body": "<a id='comment:21'></a>\nHey Darij,\n\nI noticed a duplicate reference of `[St2009]`. It's already defined in `posets/poset.py`. I just tweaked my review patch to remove it from `tableau.py`.\n\nBest,\n\nTravis",
    "created_at": "2013-07-19T13:15:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7983#issuecomment-64397",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:21'></a>
Hey Darij,

I noticed a duplicate reference of `[St2009]`. It's already defined in `posets/poset.py`. I just tweaked my review patch to remove it from `tableau.py`.

Best,

Travis



---

archive/issue_comments_064398.json:
```json
{
    "body": "<a id='comment:22'></a>\nForgot to give the patchbot info.\n\nFor patchbot:\n\nApply: trac_7983-major_index_and_other_tableau_fixes-dg.patch trac_7983-review-ts.patch",
    "created_at": "2013-07-19T13:25:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7983#issuecomment-64398",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:22'></a>
Forgot to give the patchbot info.

For patchbot:

Apply: trac_7983-major_index_and_other_tableau_fixes-dg.patch trac_7983-review-ts.patch



---

archive/issue_events_056787.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-07-21T21:43:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/7983#event-56787"
}
```



---

archive/issue_comments_064399.json:
```json
{
    "body": "**Merged:** sage-5.12.beta0",
    "created_at": "2013-08-02T14:11:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7983#issuecomment-64399",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.12.beta0



---

archive/issue_events_056788.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-02T14:11:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/7983#event-56788"
}
```



---

archive/issue_events_056789.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-02T14:11:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/7983#event-56789"
}
```



---

archive/issue_comments_064400.json:
```json
{
    "body": "**Changing author** from \"arattan, Darij Grinberg\" to \"Amarpreet Rattan, Darij Grinberg\".",
    "created_at": "2015-05-27T13:55:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7983#issuecomment-64400",
    "user": "https://github.com/kcrisman"
}
```

**Changing author** from "arattan, Darij Grinberg" to "Amarpreet Rattan, Darij Grinberg".
