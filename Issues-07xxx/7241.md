# Issue 7241: sage -upgrade will try to redownload spkg's that are already present

archive/issues_007241.json:
```json
{
    "body": "This causes a problem with flaky internet connections since all of the spkgs have to be able to be downloaded all successfully one right after the other.  It shouldn't try to redownload files that are already present.\n\nAssignee: tbd\n\nKeywords: upgrade\n\nResolution: fixed\n\nAuthor: Mike Hansen\n\nReviewer: Florent Hivert\n\nMerged: sage-4.2.1.alpha0\n\nIssue created by migration from https://trac.sagemath.org/ticket/7241\n\n",
    "closed_at": "2009-11-07T11:58:16Z",
    "created_at": "2009-10-18T17:41:26Z",
    "labels": [
        "component: build",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.2.1",
    "title": "sage -upgrade will try to redownload spkg's that are already present",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/7241",
    "user": "https://github.com/mwhansen"
}
```
This causes a problem with flaky internet connections since all of the spkgs have to be able to be downloaded all successfully one right after the other.  It shouldn't try to redownload files that are already present.

Assignee: tbd

Keywords: upgrade

Resolution: fixed

Author: Mike Hansen

Reviewer: Florent Hivert

Merged: sage-4.2.1.alpha0

Issue created by migration from https://trac.sagemath.org/ticket/7241





---

archive/issue_comments_067874.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2009-10-18T17:44:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7241#issuecomment-67874",
    "user": "https://github.com/mwhansen"
}
```

Changing status from new to needs_review.



---

archive/issue_events_029263.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/7241",
    "rename": {
        "from": "sage -upgrade will try to redownload spkg's that are already present",
        "to": "[with patch, needs review] sage -upgrade will try to redownload spkg's that are already present"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/7241#event-29263"
}
```



---

archive/issue_comments_067875.json:
```json
{
    "body": "<a id='comment:1'></a>\nAttachment [trac_7241.patch](tarball://root/attachments/some-uuid/ticket7241/trac_7241.patch) by @mwhansen created at 2009-10-18 17:44:06\n\nIt would also be nice to have it use a more robust downloader such as cURL or wget if it is present.  The current one doesn't resume downloads.",
    "created_at": "2009-10-18T17:44:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7241#issuecomment-67875",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:1'></a>
Attachment [trac_7241.patch](tarball://root/attachments/some-uuid/ticket7241/trac_7241.patch) by @mwhansen created at 2009-10-18 17:44:06

It would also be nice to have it use a more robust downloader such as cURL or wget if it is present.  The current one doesn't resume downloads.



---

archive/issue_comments_067876.json:
```json
{
    "body": "Attachment [trac_7241-rebase.patch](tarball://root/attachments/some-uuid/ticket7241/trac_7241-rebase.patch) by @hivert created at 2009-11-07 08:56:52",
    "created_at": "2009-11-07T08:56:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7241#issuecomment-67876",
    "user": "https://github.com/hivert"
}
```

Attachment [trac_7241-rebase.patch](tarball://root/attachments/some-uuid/ticket7241/trac_7241-rebase.patch) by @hivert created at 2009-11-07 08:56:52



---

archive/issue_comments_067877.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2009-11-07T08:58:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7241#issuecomment-67877",
    "user": "https://github.com/hivert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_067878.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Florent Hivert\"",
    "created_at": "2009-11-07T08:58:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7241#issuecomment-67878",
    "user": "https://github.com/hivert"
}
```

Changing reviewer from "" to "Florent Hivert"



---

archive/issue_comments_067879.json:
```json
{
    "body": "<a id='comment:2'></a>\nFor some reason the patch needed a little rebase. I just uploaded a rebased patch which is ready to go. => positive review. \n\nCheers,\n\nFlorent",
    "created_at": "2009-11-07T08:58:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7241#issuecomment-67879",
    "user": "https://github.com/hivert"
}
```

<a id='comment:2'></a>
For some reason the patch needed a little rebase. I just uploaded a rebased patch which is ready to go. => positive review. 

Cheers,

Florent



---

archive/issue_events_029264.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/7241",
    "rename": {
        "from": "[with patch, needs review] sage -upgrade will try to redownload spkg's that are already present",
        "to": "sage -upgrade will try to redownload spkg's that are already present"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/7241#event-29264"
}
```



---

archive/issue_events_029265.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2009-11-07T11:58:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/7241",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/7241#event-29265"
}
```



---

archive/issue_comments_067880.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2009-11-07T11:58:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7241#issuecomment-67880",
    "user": "https://github.com/mwhansen"
}
```

Resolution: fixed



---

archive/issue_comments_067881.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-4.2.1.alpha0\"",
    "created_at": "2009-11-07T11:58:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7241#issuecomment-67881",
    "user": "https://github.com/mwhansen"
}
```

Changing merged from "" to "sage-4.2.1.alpha0"
