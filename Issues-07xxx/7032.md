# Issue 7032: symmetrica ignores CC

archive/issues_007032.json:
```json
{
    "body": "Using\n\n* Solaris 10 update 7 on SPARC\n* sage-4.1.2.alpha2\n* Sun Studio 12.1\n* An updated configure script to allow the Sun compiler to be used  (#7021)\n\nCC was set to the Sun C compiler, and CXX to the Sun C++ compiler. It's apparent that singular is ignoring CC and using gcc instead. \n\n```\nsymmetrica-2.0.p4/src/zyk.c\nsymmetrica-2.0.p4/src/zyk.doc\nsymmetrica-2.0.p4/src/zykelind.c\nFinished extraction\n****************************************************\nHost system\nuname -a:\nSunOS swan 5.10 Generic_139555-08 sun4u sparc SUNW,Sun-Blade-1000\n****************************************************\n****************************************************\nCC Version\n/opt/xxxsunstudio12.1/bin/cc -v\nusage: cc [ options] files.  Use 'cc -flags' for details\n****************************************************\nmake[2]: Entering directory `/export/home/drkirkby/sage/gcc32/sage-4.1.2.alpha2/spkg/build/symmetrica-2.0.p4/src'\ngcc -c -O1 -fPIC -g -DFAST -DALLTRUE bar.c\ngcc -c -O1 -fPIC -g -DFAST -DALLTRUE bi.c\n```\n\nIt does build ok with gcc, even though CC is set to the Sun compiler. There is no C++ code, so I can't immediately tell whether CXX is ignored too, but I suspect it is. \n\nAssignee: tbd\n\nCC:  @jaapspies\n\nResolution: fixed\n\nAuthor: David Kirkby\n\nReviewer: Jaap Spies\n\nMerged: sage-4.3.1.rc0\n\nIssue created by migration from https://trac.sagemath.org/ticket/7032\n\n",
    "closed_at": "2010-01-14T02:01:31Z",
    "created_at": "2009-09-27T14:44:54Z",
    "labels": [
        "component: build",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.3.1",
    "title": "symmetrica ignores CC",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/7032",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```
Using

* Solaris 10 update 7 on SPARC
* sage-4.1.2.alpha2
* Sun Studio 12.1
* An updated configure script to allow the Sun compiler to be used  (#7021)

CC was set to the Sun C compiler, and CXX to the Sun C++ compiler. It's apparent that singular is ignoring CC and using gcc instead. 

```
symmetrica-2.0.p4/src/zyk.c
symmetrica-2.0.p4/src/zyk.doc
symmetrica-2.0.p4/src/zykelind.c
Finished extraction
****************************************************
Host system
uname -a:
SunOS swan 5.10 Generic_139555-08 sun4u sparc SUNW,Sun-Blade-1000
****************************************************
****************************************************
CC Version
/opt/xxxsunstudio12.1/bin/cc -v
usage: cc [ options] files.  Use 'cc -flags' for details
****************************************************
make[2]: Entering directory `/export/home/drkirkby/sage/gcc32/sage-4.1.2.alpha2/spkg/build/symmetrica-2.0.p4/src'
gcc -c -O1 -fPIC -g -DFAST -DALLTRUE bar.c
gcc -c -O1 -fPIC -g -DFAST -DALLTRUE bi.c
```

It does build ok with gcc, even though CC is set to the Sun compiler. There is no C++ code, so I can't immediately tell whether CXX is ignored too, but I suspect it is. 

Assignee: tbd

CC:  @jaapspies

Resolution: fixed

Author: David Kirkby

Reviewer: Jaap Spies

Merged: sage-4.3.1.rc0

Issue created by migration from https://trac.sagemath.org/ticket/7032





---

archive/issue_comments_065426.json:
```json
{
    "body": "<a id='comment:1'></a>\nI've created a fix for this long standing bug. Basically replacing 'gcc' with '$(CC)' in the makefile. \n\nI also changed spkg-install so SAGE64 was respected at the same time (in fact, that was my main motivation for fixing this ticket, as the failure to observe CC is not fatal, but a failure to observe SAGE64 is). \n\nThe symmetica package is odd, in that the SPKG.txt makes it clear that fixes are applied to the source directly, not via patches. I find that a bit odd, but followed in the same way. I needed to fix the 'makefile' but left a copy of what I think is the original makefile as /src/makefile.original \n\nThe package now add -m64 with SAGE64 set to yes, and fully respects CC. \n\n**This must be updated as a package, and not simply a patch applied, due to the fact that changes are made directly in the src directory.**\n\nI've put everything at \n\nhttp://boxen.math.washington.edu/home/kirkby/portability/symmetrica-2.0.p5/",
    "created_at": "2010-01-07T01:57:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7032",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7032#issuecomment-65426",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:1'></a>
I've created a fix for this long standing bug. Basically replacing 'gcc' with '$(CC)' in the makefile. 

I also changed spkg-install so SAGE64 was respected at the same time (in fact, that was my main motivation for fixing this ticket, as the failure to observe CC is not fatal, but a failure to observe SAGE64 is). 

The symmetica package is odd, in that the SPKG.txt makes it clear that fixes are applied to the source directly, not via patches. I find that a bit odd, but followed in the same way. I needed to fix the 'makefile' but left a copy of what I think is the original makefile as /src/makefile.original 

The package now add -m64 with SAGE64 set to yes, and fully respects CC. 

**This must be updated as a package, and not simply a patch applied, due to the fact that changes are made directly in the src directory.**

I've put everything at 

http://boxen.math.washington.edu/home/kirkby/portability/symmetrica-2.0.p5/



---

archive/issue_comments_065427.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2010-01-07T01:57:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7032",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7032#issuecomment-65427",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_065428.json:
```json
{
    "body": "Changing upstream from \"\" to \"N/A\"",
    "created_at": "2010-01-07T01:57:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7032",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7032#issuecomment-65428",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Changing upstream from "" to "N/A"



---

archive/issue_comments_065429.json:
```json
{
    "body": "Changing author from \"\" to \"David Kirkby\"",
    "created_at": "2010-01-07T02:08:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7032",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7032#issuecomment-65429",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Changing author from "" to "David Kirkby"



---

archive/issue_comments_065430.json:
```json
{
    "body": "<a id='comment:3'></a>\nLooks good, works on Fedora and Open Solaris.\n\nPositive review.\n\nJaap",
    "created_at": "2010-01-10T22:27:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7032",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7032#issuecomment-65430",
    "user": "https://github.com/jaapspies"
}
```

<a id='comment:3'></a>
Looks good, works on Fedora and Open Solaris.

Positive review.

Jaap



---

archive/issue_comments_065431.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2010-01-10T22:27:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7032",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7032#issuecomment-65431",
    "user": "https://github.com/jaapspies"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_065432.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Jaap Spies\"",
    "created_at": "2010-01-10T22:27:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7032",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7032#issuecomment-65432",
    "user": "https://github.com/jaapspies"
}
```

Changing reviewer from "" to "Jaap Spies"



---

archive/issue_events_028458.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2010-01-14T02:01:31Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/7032",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/7032#event-28458"
}
```



---

archive/issue_comments_065433.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2010-01-14T02:01:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7032",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7032#issuecomment-65433",
    "user": "https://github.com/rlmill"
}
```

Resolution: fixed



---

archive/issue_comments_065434.json:
```json
{
    "body": "Changing merged from \"\" to \"sage-4.3.1.rc0\"",
    "created_at": "2010-01-14T02:01:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/7032",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/7032#issuecomment-65434",
    "user": "https://github.com/rlmill"
}
```

Changing merged from "" to "sage-4.3.1.rc0"
