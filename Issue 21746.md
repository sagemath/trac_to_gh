# Issue 21746: Remaining py3 syntax level errors

Issue created by migration from Trac.

Original creator: jmantysalo

Original creation time: 2016-11-28 06:36:01

CC:  chapoton

After plain docstring unicode errors (#21982) there are 2 times 2 problems:

- `lambda (a, b):` -syntax at `src/sage/graphs/generators/smallgraphs.py` and `src/sage/combinat/matrices/hadamard_matrix.py`. These are easy.

- Some kind of `for i in [1,2], [3,4]` -error in `src/sage/combinat/designs/database.py` and `src/sage/combinat/root_system/coxeter_type.py`. Not sure what to do - Frédéric?

After these we should have empty `noerrors` from


```
find src/sage/ -name '*.py' | while read f; do python3 -m py_compile $f 2>&1 |
egrep -q . && echo $f >> errors || echo $f >> noerrors ; done
```




---

Comment by jdemeyer created at 2016-11-28 08:52:25

The syntax `for i in [1,2], [3,4]` is correct in Python 3, so what is the problem?


---

Comment by jmantysalo created at 2016-11-28 08:55:31

Replying to [comment:1 jdemeyer]:
> The syntax `for i in [1,2], [3,4]` is correct in Python 3, so what is the problem?

Something like `[f(x) for x in [1, 2], [3, 4]]` I guess. But just run


```
python3 -m py_compile src/sage/combinat/root_system/coxeter_type.py
```


to see.


---

Comment by jmantysalo created at 2016-11-28 16:19:48

Found it. Actually it just that Python2 allows `[x for x in 1, 2, 3]` but Python3 does not. It is explained here: http://python-history.blogspot.fi/2010/06/from-list-comprehensions-to-generator.html

I can make the patch.


---

Comment by jmantysalo created at 2016-11-28 16:41:49

Changing status from new to needs_review.


---

Comment by jmantysalo created at 2016-11-28 16:41:49

New commits:


---

Comment by jdemeyer created at 2016-11-28 17:03:08

In `hadamard_matrix.py`, it's much better to replace `map(lambda x:f(x), I)` by `f(x) for x in I`.


---

Comment by git created at 2016-11-28 20:59:25

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2016-11-28 21:00:47

Replying to [comment:6 jdemeyer]:
> In `hadamard_matrix.py`, it's much better to replace `map(lambda x:f(x), I)` by `f(x) for x in I`.

Good point. Maybe I should read the code I am changing. Well, next time then.


---

Comment by chapoton created at 2016-12-01 20:51:00

ok, good, thanks


---

Comment by chapoton created at 2016-12-01 20:51:00

Changing status from needs_review to positive_review.


---

Comment by jmantysalo created at 2016-12-02 07:04:33

Hooray!

Is there any way to doccheck syntax being py3-compliant, i.e. a py2 module to check for py3 syntax?


---

Comment by vbraun created at 2016-12-05 00:44:45

Resolution: fixed
