# Issue 21746: Remaining py3 syntax level errors

archive/issues_021746.json:
```json
{
    "body": "CC:  @fchapoton\n\nAfter plain docstring unicode errors (#21982) there are 2 times 2 problems:\n\n- `lambda (a, b):` -syntax at `src/sage/graphs/generators/smallgraphs.py` and `src/sage/combinat/matrices/hadamard_matrix.py`. These are easy.\n\n- Some kind of `for i in [1,2], [3,4]` -error in `src/sage/combinat/designs/database.py` and `src/sage/combinat/root_system/coxeter_type.py`. Not sure what to do - Fr\u00e9d\u00e9ric?\n\nAfter these we should have empty `noerrors` from\n\n\n```\nfind src/sage/ -name '*.py' | while read f; do python3 -m py_compile $f 2>&1 |\negrep -q . && echo $f >> errors || echo $f >> noerrors ; done\n```\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/21983\n\n",
    "created_at": "2016-11-28T06:36:01Z",
    "labels": [
        "python3",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.5",
    "title": "Remaining py3 syntax level errors",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21746",
    "user": "@jm58660"
}
```
CC:  @fchapoton

After plain docstring unicode errors (#21982) there are 2 times 2 problems:

- `lambda (a, b):` -syntax at `src/sage/graphs/generators/smallgraphs.py` and `src/sage/combinat/matrices/hadamard_matrix.py`. These are easy.

- Some kind of `for i in [1,2], [3,4]` -error in `src/sage/combinat/designs/database.py` and `src/sage/combinat/root_system/coxeter_type.py`. Not sure what to do - Frédéric?

After these we should have empty `noerrors` from


```
find src/sage/ -name '*.py' | while read f; do python3 -m py_compile $f 2>&1 |
egrep -q . && echo $f >> errors || echo $f >> noerrors ; done
```



Issue created by migration from https://trac.sagemath.org/ticket/21983





---

archive/issue_comments_301759.json:
```json
{
    "body": "The syntax `for i in [1,2], [3,4]` is correct in Python 3, so what is the problem?",
    "created_at": "2016-11-28T08:52:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21746",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21746#issuecomment-301759",
    "user": "@jdemeyer"
}
```

The syntax `for i in [1,2], [3,4]` is correct in Python 3, so what is the problem?



---

archive/issue_comments_301760.json:
```json
{
    "body": "Replying to [comment:1 jdemeyer]:\n> The syntax `for i in [1,2], [3,4]` is correct in Python 3, so what is the problem?\n\nSomething like `[f(x) for x in [1, 2], [3, 4]]` I guess. But just run\n\n\n```\npython3 -m py_compile src/sage/combinat/root_system/coxeter_type.py\n```\n\n\nto see.",
    "created_at": "2016-11-28T08:55:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21746",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21746#issuecomment-301760",
    "user": "@jm58660"
}
```

Replying to [comment:1 jdemeyer]:
> The syntax `for i in [1,2], [3,4]` is correct in Python 3, so what is the problem?

Something like `[f(x) for x in [1, 2], [3, 4]]` I guess. But just run


```
python3 -m py_compile src/sage/combinat/root_system/coxeter_type.py
```


to see.



---

archive/issue_comments_301761.json:
```json
{
    "body": "Found it. Actually it just that Python2 allows `[x for x in 1, 2, 3]` but Python3 does not. It is explained here: http://python-history.blogspot.fi/2010/06/from-list-comprehensions-to-generator.html\n\nI can make the patch.",
    "created_at": "2016-11-28T16:19:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21746",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21746#issuecomment-301761",
    "user": "@jm58660"
}
```

Found it. Actually it just that Python2 allows `[x for x in 1, 2, 3]` but Python3 does not. It is explained here: http://python-history.blogspot.fi/2010/06/from-list-comprehensions-to-generator.html

I can make the patch.



---

archive/issue_comments_301762.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-11-28T16:41:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21746",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21746#issuecomment-301762",
    "user": "@jm58660"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_301763.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-11-28T16:41:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21746",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21746#issuecomment-301763",
    "user": "@jm58660"
}
```

New commits:



---

archive/issue_comments_301764.json:
```json
{
    "body": "In `hadamard_matrix.py`, it's much better to replace `map(lambda x:f(x), I)` by `f(x) for x in I`.",
    "created_at": "2016-11-28T17:03:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21746",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21746#issuecomment-301764",
    "user": "@jdemeyer"
}
```

In `hadamard_matrix.py`, it's much better to replace `map(lambda x:f(x), I)` by `f(x) for x in I`.



---

archive/issue_comments_301765.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-28T20:59:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21746",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21746#issuecomment-301765",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_301766.json:
```json
{
    "body": "Replying to [comment:6 jdemeyer]:\n> In `hadamard_matrix.py`, it's much better to replace `map(lambda x:f(x), I)` by `f(x) for x in I`.\n\nGood point. Maybe I should read the code I am changing. Well, next time then.",
    "created_at": "2016-11-28T21:00:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21746",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21746#issuecomment-301766",
    "user": "@jm58660"
}
```

Replying to [comment:6 jdemeyer]:
> In `hadamard_matrix.py`, it's much better to replace `map(lambda x:f(x), I)` by `f(x) for x in I`.

Good point. Maybe I should read the code I am changing. Well, next time then.



---

archive/issue_comments_301767.json:
```json
{
    "body": "ok, good, thanks",
    "created_at": "2016-12-01T20:51:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21746",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21746#issuecomment-301767",
    "user": "@fchapoton"
}
```

ok, good, thanks



---

archive/issue_comments_301768.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-12-01T20:51:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21746",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21746#issuecomment-301768",
    "user": "@fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_301769.json:
```json
{
    "body": "Hooray!\n\nIs there any way to doccheck syntax being py3-compliant, i.e. a py2 module to check for py3 syntax?",
    "created_at": "2016-12-02T07:04:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21746",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21746#issuecomment-301769",
    "user": "@jm58660"
}
```

Hooray!

Is there any way to doccheck syntax being py3-compliant, i.e. a py2 module to check for py3 syntax?



---

archive/issue_comments_301770.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-12-05T00:44:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21746",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21746#issuecomment-301770",
    "user": "@vbraun"
}
```

Resolution: fixed
