# Issue 23840: Fix is_integral() for quadratic number field elements

Issue created by migration from https://trac.sagemath.org/ticket/24077

Original creator: jdemeyer

Original creation time: 2017-10-20 13:00:05


```
sage: O.<w> = EisensteinIntegers()
sage: w.is_integral()
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
<ipython-input-12-58b818bf63fa> in <module>()
----> 1 w.is_integral()

/usr/local/src/sage-config/src/sage/rings/number_field/number_field_element_quadratic.pyx in sage.rings.number_field.number_field_element_quadratic.NumberFieldElement_quadratic.is_integral (build/cythonized/sage/rings/number_field/number_field_element_quadratic.cpp:17356)()
   2006             return True
   2007         else:
-> 2008             return self.norm().denom() == 1 and self.trace().denom() == 1
   2009 
   2010     def charpoly(self, var='x'):

/usr/local/src/sage-config/src/sage/structure/element.pyx in sage.structure.element.Element.__getattr__ (build/cythonized/sage/structure/element.c:4370)()
    482             AttributeError: 'LeftZeroSemigroup_with_category.element_class' object has no attribute 'blah_blah'
    483         """
--> 484         return self.getattr_from_category(name)
    485 
    486     cdef getattr_from_category(self, name):

/usr/local/src/sage-config/src/sage/structure/element.pyx in sage.structure.element.Element.getattr_from_category (build/cythonized/sage/structure/element.c:4479)()
    495         else:
    496             cls = P._abstract_element_class
--> 497         return getattr_from_other_class(self, cls, name)
    498 
    499     def __dir__(self):

/usr/local/src/sage-config/src/sage/cpython/getattr.pyx in sage.cpython.getattr.getattr_from_other_class (build/cythonized/sage/cpython/getattr.c:1894)()
    252         dummy_error_message.cls = type(self)
    253         dummy_error_message.name = name
--> 254         raise dummy_attribute_error
    255     attribute = <object>attr
    256     # Check for a descriptor (__get__ in Python)

AttributeError: 'sage.rings.integer.Integer' object has no attribute 'denom'
```



---

Comment by jdemeyer created at 2017-10-20 14:12:04

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2017-10-20 14:12:04

New commits:


---

Comment by kedlaya created at 2017-10-22 21:01:38

Changing status from needs_review to positive_review.


---

Comment by kedlaya created at 2017-10-22 21:01:38

Posting on Alina's behalf. She checked this out, and I just confirmed that all doctests pass on k8s.


---

Comment by vbraun created at 2017-10-25 06:58:04

Resolution: fixed
