# Issue 31161: building the pdf docs - undefined references

archive/issues_031161.json:
```json
{
    "body": "In addressing `multiply defined` references in #31387 it was discovered that the following references were undefined:\n\n```\n$ grep -r \"LaTeX Warning: Citation\" local/share/doc/sage/latex/\nlocal/share/doc/sage/latex/en/reference/coding/coding.log:LaTeX Warning: Citation `../graphs/../combinat/sage/combinat/matrices/hadamard_\nlocal/share/doc/sage/latex/en/reference/algebras/algebras.log:LaTeX Warning: Citation `../graphs/../combinat/sage/combinat/sf/macdonald:macdo\nlocal/share/doc/sage/latex/en/reference/graphs/graphs.log:LaTeX Warning: Citation `../combinat/sage/combinat/matrices/hadamard_matrix:bh1\nlocal/share/doc/sage/latex/en/reference/graphs/graphs.log:LaTeX Warning: Citation `../combinat/sage/combinat/matrices/hadamard_matrix:bh1\nlocal/share/doc/sage/latex/en/reference/graphs/graphs.log:LaTeX Warning: Citation `../combinat/sage/combinat/matrices/hadamard_matrix:bh1\nlocal/share/doc/sage/latex/en/reference/graphs/graphs.log:LaTeX Warning: Citation `../combinat/sage/combinat/matrices/hadamard_matrix:cp1\nlocal/share/doc/sage/latex/en/reference/graphs/graphs.log:LaTeX Warning: Citation `../combinat/sage/combinat/designs/database:designhandb\nlocal/share/doc/sage/latex/en/reference/graphs/graphs.log:LaTeX Warning: Citation `../combinat/sage/combinat/matrices/hadamard_matrix:bh1\nlocal/share/doc/sage/latex/en/reference/graphs/graphs.log:LaTeX Warning: Citation `../combinat/sage/combinat/matrices/hadamard_matrix:bh1\nlocal/share/doc/sage/latex/en/reference/graphs/graphs.log:LaTeX Warning: Citation `../combinat/sage/combinat/matrices/hadamard_matrix:bh1\nlocal/share/doc/sage/latex/en/reference/graphs/graphs.log:LaTeX Warning: Citation `../combinat/sage/combinat/matrices/hadamard_matrix:bh1\nlocal/share/doc/sage/latex/en/reference/graphs/graphs.log:LaTeX Warning: Citation `../combinat/sage/combinat/matrices/hadamard_matrix:bh1\nlocal/share/doc/sage/latex/en/reference/graphs/graphs.log:LaTeX Warning: Citation `../combinat/sage/combinat/matrices/hadamard_matrix:bh1\nlocal/share/doc/sage/latex/en/reference/arithmetic_curves/arithmetic_curves.log:LaTeX Warning: Citation `../graphs/../combinat/sage/combinat/dyck_word:cha2005'\nlocal/share/doc/sage/latex/en/reference/categories/categories.log:LaTeX Warning: Citation `../graphs/../combinat/sage/combinat/root_system/hecke\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/31398\n\n",
    "created_at": "2021-02-15T06:40:43Z",
    "labels": [
        "documentation",
        "major",
        "bug"
    ],
    "title": "building the pdf docs - undefined references",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31161",
    "user": "strogdon"
}
```
In addressing `multiply defined` references in #31387 it was discovered that the following references were undefined:

```
$ grep -r "LaTeX Warning: Citation" local/share/doc/sage/latex/
local/share/doc/sage/latex/en/reference/coding/coding.log:LaTeX Warning: Citation `../graphs/../combinat/sage/combinat/matrices/hadamard_
local/share/doc/sage/latex/en/reference/algebras/algebras.log:LaTeX Warning: Citation `../graphs/../combinat/sage/combinat/sf/macdonald:macdo
local/share/doc/sage/latex/en/reference/graphs/graphs.log:LaTeX Warning: Citation `../combinat/sage/combinat/matrices/hadamard_matrix:bh1
local/share/doc/sage/latex/en/reference/graphs/graphs.log:LaTeX Warning: Citation `../combinat/sage/combinat/matrices/hadamard_matrix:bh1
local/share/doc/sage/latex/en/reference/graphs/graphs.log:LaTeX Warning: Citation `../combinat/sage/combinat/matrices/hadamard_matrix:bh1
local/share/doc/sage/latex/en/reference/graphs/graphs.log:LaTeX Warning: Citation `../combinat/sage/combinat/matrices/hadamard_matrix:cp1
local/share/doc/sage/latex/en/reference/graphs/graphs.log:LaTeX Warning: Citation `../combinat/sage/combinat/designs/database:designhandb
local/share/doc/sage/latex/en/reference/graphs/graphs.log:LaTeX Warning: Citation `../combinat/sage/combinat/matrices/hadamard_matrix:bh1
local/share/doc/sage/latex/en/reference/graphs/graphs.log:LaTeX Warning: Citation `../combinat/sage/combinat/matrices/hadamard_matrix:bh1
local/share/doc/sage/latex/en/reference/graphs/graphs.log:LaTeX Warning: Citation `../combinat/sage/combinat/matrices/hadamard_matrix:bh1
local/share/doc/sage/latex/en/reference/graphs/graphs.log:LaTeX Warning: Citation `../combinat/sage/combinat/matrices/hadamard_matrix:bh1
local/share/doc/sage/latex/en/reference/graphs/graphs.log:LaTeX Warning: Citation `../combinat/sage/combinat/matrices/hadamard_matrix:bh1
local/share/doc/sage/latex/en/reference/graphs/graphs.log:LaTeX Warning: Citation `../combinat/sage/combinat/matrices/hadamard_matrix:bh1
local/share/doc/sage/latex/en/reference/arithmetic_curves/arithmetic_curves.log:LaTeX Warning: Citation `../graphs/../combinat/sage/combinat/dyck_word:cha2005'
local/share/doc/sage/latex/en/reference/categories/categories.log:LaTeX Warning: Citation `../graphs/../combinat/sage/combinat/root_system/hecke
```


Issue created by migration from https://trac.sagemath.org/ticket/31398





---

archive/issue_comments_445391.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-02-15T06:50:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31161#issuecomment-445391",
    "user": "strogdon"
}
```

New commits:



---

archive/issue_comments_445392.json:
```json
{
    "body": "The references added to `src/doc/en/reference/references/index.rst` sometime appear in other places in the sage source code under `src/sage`. I have left these reference in place. They may need to be removed. Additionally, there are other references in code under `src/sage` that are never referenced anywhere. These references may need to be addressed in another ticket.",
    "created_at": "2021-02-15T06:56:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31161#issuecomment-445392",
    "user": "strogdon"
}
```

The references added to `src/doc/en/reference/references/index.rst` sometime appear in other places in the sage source code under `src/sage`. I have left these reference in place. They may need to be removed. Additionally, there are other references in code under `src/sage` that are never referenced anywhere. These references may need to be addressed in another ticket.



---

archive/issue_comments_445393.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-02-15T06:56:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31161#issuecomment-445393",
    "user": "strogdon"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_445394.json:
```json
{
    "body": "I think the duplicate references do need to be removed \u2014 we can get errors otherwise. We should also put the references into the standard format (\"BH2012\" instead of \"BH12\", for example).",
    "created_at": "2021-02-15T23:01:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31161#issuecomment-445394",
    "user": "jhpalmieri"
}
```

I think the duplicate references do need to be removed â€” we can get errors otherwise. We should also put the references into the standard format ("BH2012" instead of "BH12", for example).



---

archive/issue_comments_445395.json:
```json
{
    "body": "The `combinat` directory wasn't fixed up when we switched from local references to a master reference file (I ran out of energy). So it's not surprising that there are problems coming from `combinat`.\n----\nNew commits:",
    "created_at": "2021-02-15T23:03:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31161#issuecomment-445395",
    "user": "jhpalmieri"
}
```

The `combinat` directory wasn't fixed up when we switched from local references to a master reference file (I ran out of energy). So it's not surprising that there are problems coming from `combinat`.
----
New commits:



---

archive/issue_comments_445396.json:
```json
{
    "body": "I'm happy with your changes, so feel free to set a positive review on my behalf if you approve mine.",
    "created_at": "2021-02-15T23:04:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31161#issuecomment-445396",
    "user": "jhpalmieri"
}
```

I'm happy with your changes, so feel free to set a positive review on my behalf if you approve mine.



---

archive/issue_comments_445397.json:
```json
{
    "body": "Replying to [comment:7 jhpalmieri]:\n> I'm happy with your changes, so feel free to set a positive review on my behalf if you approve mine.\nI'm glad you knew what to do with the repeated references. There are several labels that I believe should be changed. These are tough to spot. \"CP16\" should be \"CP2016\", \"WW72\" should be \"WW1972\", \"SWW72\" should be \"SWW1972\" and \"Sz69\" should be \"Sz1969\". I may have missed some.",
    "created_at": "2021-02-16T01:29:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31161#issuecomment-445397",
    "user": "strogdon"
}
```

Replying to [comment:7 jhpalmieri]:
> I'm happy with your changes, so feel free to set a positive review on my behalf if you approve mine.
I'm glad you knew what to do with the repeated references. There are several labels that I believe should be changed. These are tough to spot. "CP16" should be "CP2016", "WW72" should be "WW1972", "SWW72" should be "SWW1972" and "Sz69" should be "Sz1969". I may have missed some.



---

archive/issue_comments_445398.json:
```json
{
    "body": "Replying to [comment:8 strogdon]:\n> Replying to [comment:7 jhpalmieri]:\n> > I'm happy with your changes, so feel free to set a positive review on my behalf if you approve mine.\n> I'm glad you knew what to do with the repeated references. There are several labels that I believe should be changed. These are tough to spot. \"CP16\" should be \"CP2016\", \"WW72\" should be \"WW1972\", \"SWW72\" should be \"SWW1972\" and \"Sz69\" should be \"Sz1969\". I may have missed some.\nI may be wrong. Perhaps some of these changed labels should not be placed in the master index. I'm not sure what the criteria is? I noticed that there are numerous references in `local/share/doc/sage/pdf/en/reference/combinat/combinat.pdf`. The existing changes allow the pdf docs to build without complaint. I don't know if leaving some of them in there original location would have produced the same result.\n----\nNew commits:",
    "created_at": "2021-02-16T03:26:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31161#issuecomment-445398",
    "user": "strogdon"
}
```

Replying to [comment:8 strogdon]:
> Replying to [comment:7 jhpalmieri]:
> > I'm happy with your changes, so feel free to set a positive review on my behalf if you approve mine.
> I'm glad you knew what to do with the repeated references. There are several labels that I believe should be changed. These are tough to spot. "CP16" should be "CP2016", "WW72" should be "WW1972", "SWW72" should be "SWW1972" and "Sz69" should be "Sz1969". I may have missed some.
I may be wrong. Perhaps some of these changed labels should not be placed in the master index. I'm not sure what the criteria is? I noticed that there are numerous references in `local/share/doc/sage/pdf/en/reference/combinat/combinat.pdf`. The existing changes allow the pdf docs to build without complaint. I don't know if leaving some of them in there original location would have produced the same result.
----
New commits:



---

archive/issue_comments_445399.json:
```json
{
    "body": "All of the references *should* be moved to the master index, and they all *should* be put into the standard format, but there are a lot of them in `combinat`, and it's tedious work. It can also yield a patch bomb. Fixing a few as we come across them is a good compromise.",
    "created_at": "2021-02-16T03:59:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31161#issuecomment-445399",
    "user": "jhpalmieri"
}
```

All of the references *should* be moved to the master index, and they all *should* be put into the standard format, but there are a lot of them in `combinat`, and it's tedious work. It can also yield a patch bomb. Fixing a few as we come across them is a good compromise.



---

archive/issue_comments_445400.json:
```json
{
    "body": "See also #27497 and #28445.",
    "created_at": "2021-02-16T04:00:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31161#issuecomment-445400",
    "user": "jhpalmieri"
}
```

See also #27497 and #28445.



---

archive/issue_comments_445401.json:
```json
{
    "body": "I don't want to go overboard at this point. The initial motivation was to correct`undefined references` and nothing more. I will demur to you as to whether things are consistent with that desire. Your help is appreciated.",
    "created_at": "2021-02-16T04:56:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31161#issuecomment-445401",
    "user": "strogdon"
}
```

I don't want to go overboard at this point. The initial motivation was to correct`undefined references` and nothing more. I will demur to you as to whether things are consistent with that desire. Your help is appreciated.



---

archive/issue_comments_445402.json:
```json
{
    "body": "I agree, no need to do more right now.",
    "created_at": "2021-02-16T06:03:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31161#issuecomment-445402",
    "user": "jhpalmieri"
}
```

I agree, no need to do more right now.



---

archive/issue_comments_445403.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-02-16T06:03:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31161#issuecomment-445403",
    "user": "jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_445404.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-03-09T00:01:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31161#issuecomment-445404",
    "user": "vbraun"
}
```

Resolution: fixed
