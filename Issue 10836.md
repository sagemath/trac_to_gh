# Issue 10836: Make SageTeX support SAGE_SPKG_INSTALL_DOCS

Issue created by migration from https://trac.sagemath.org/ticket/10908

Original creator: jason

Original creation time: 2011-03-10 17:21:17

Assignee: tbd

CC:  ddrake

See #10823 for details about SAGE_SPKG_INSTALL_DOCS.  We should build the docs fresh, which would be a nice test of if they had the necessary components to actually do SageTeX stuff.


---

Comment by jason created at 2011-03-10 17:23:38

Also, it might be nice to distribute "tkz-graph.sty" and "tkz-berge.sty" with SageTeX, as the example file depends on it, I believe, and other nice features in Sage also depend on it.


---

Comment by ddrake created at 2011-03-17 06:20:11

Replying to [comment:1 jason]:
> Also, it might be nice to distribute "tkz-graph.sty" and "tkz-berge.sty" with SageTeX, as the example file depends on it, I believe, and other nice features in Sage also depend on it.

That's a good idea, although of course you also need PGF/TikZ. Can we assume that anyone with a reasonable TeX setup has TikZ? Distributing tkz-graph and tkz-berge isn't too useful if lots of people don't even have TikZ.


---

Comment by ddrake created at 2011-03-17 06:29:43

Another thought: we could just try to build things, and if that doesn't work, just put a small file in the doc directory that points the user to https://bitbucket.org/ddrake/sagetex/downloads and the files there. That doesn't quite solve the problem Jason described at #10823 (being offline) but it does point in the right direction.


---

Comment by jason created at 2011-03-17 13:35:37

Replying to [comment:2 ddrake]:
> Replying to [comment:1 jason]:
> > Also, it might be nice to distribute "tkz-graph.sty" and "tkz-berge.sty" with SageTeX, as the example file depends on it, I believe, and other nice features in Sage also depend on it.
> 
> That's a good idea, although of course you also need PGF/TikZ. Can we assume that anyone with a reasonable TeX setup has TikZ? Distributing tkz-graph and tkz-berge isn't too useful if lots of people don't even have TikZ.

I think *lots* of people do have tikz installed, but almost no one has tkz-graph.sty and tkz-berge.sty installed since you have to manually install it.  Tikz seems like a pretty standard package on newer tex installs these days.


---

Comment by jason created at 2011-03-17 13:37:23

Replying to [comment:3 ddrake]:
> Another thought: we could just try to build things, and if that doesn't work, just put a small file in the doc directory that points the user to https://bitbucket.org/ddrake/sagetex/downloads and the files there. That doesn't quite solve the problem Jason described at #10823 (being offline) but it does point in the right direction.

That sounds like a good way to do things.  Just check the error code after trying to build the docs.


---

Comment by ddrake created at 2011-04-07 02:05:33

I have a spkg that supports SAGE_SPKG_INSTALL_DOCS: http://sage.math.washington.edu/home/drake/code/sage/st/sagetex-2.3.1.spkg. Please review.

I do have a question about what I did in `spkg-install`: right now, when it tries to build the documentation and fails, it puts a file in the doc directory explaining the failure. But the installation fails. If someone is building Sage with SAGE_SPKG_INSTALL_DOCS set, the build will fail if the documentation can't be built -- so why put the file in the doc directory saying that it failed?

I have a couple ideas for what to do and would like some feedback:

  * if building the docs fails, print the "you can download the pdfs" message to stdout, instead of putting it in a file -- then the user who is trying to build Sage can see how to correct the error.

  * if building the docs fails, automatically try to download the docs using wget or curl -- and if that works, don't do the "exit 1" in spkg-install so the build can continue.

Thoughts?


---

Comment by ddrake created at 2011-04-07 02:05:33

Changing status from new to needs_review.


---

Comment by jason created at 2011-04-14 13:54:18

See #11197 for building docs after Sage is built.


---

Comment by jason created at 2011-04-14 13:54:18

Changing status from needs_review to needs_work.


---

Comment by ddrake created at 2015-08-26 21:14:21

I propose this ticket be closed, since SageTeX by default installs documentation into `SAGE_ROOT/local/share/doc/sagetex/`.


---

Comment by ddrake created at 2015-08-26 21:14:21

Changing status from needs_work to needs_review.


---

Comment by ddrake created at 2015-08-26 21:19:34

Setting to invalid/wontfix.


---

Comment by ddrake created at 2015-08-26 21:19:34

Changing status from needs_review to positive_review.


---

Comment by kcrisman created at 2015-08-28 01:33:48

Just confirming that this makes sense.


---

Comment by vbraun created at 2015-09-12 13:59:57

Resolution: invalid
