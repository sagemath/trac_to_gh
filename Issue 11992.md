# Issue 11992: graph subgraph_search does not return copy of subgraph

archive/issues_011992.json:
```json
{
    "body": "Assignee: jason, ncohen, rlm\n\nCC:  @nathanncohen brunellus\n\nConsider this example:\n\n```\nsage: k3=graphs.CompleteGraph(3)\nsage: p3=graphs.PathGraph(3)\nsage: s=k3.subgraph_search(p3)\nsage: s.size()\n3\nsage: s==k3\nTrue\n```\n\nThe docs say that s should be a copy of p3.  The problem is that subgraph_search returns an *induced* subgraph of the bigger graph with the vertices of the copy of the smaller graph.\n\nSteve Butler suggests that instead, we copy the smaller graph and relabel the vertices appropriately, using the vertices returned from SubgraphSearch.  I like that solution.\n\nIssue created by migration from https://trac.sagemath.org/ticket/12164\n\n",
    "created_at": "2011-12-16T05:40:24Z",
    "labels": [
        "component: graph theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.8",
    "title": "graph subgraph_search does not return copy of subgraph",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11992",
    "user": "https://github.com/jasongrout"
}
```
Assignee: jason, ncohen, rlm

CC:  @nathanncohen brunellus

Consider this example:

```
sage: k3=graphs.CompleteGraph(3)
sage: p3=graphs.PathGraph(3)
sage: s=k3.subgraph_search(p3)
sage: s.size()
3
sage: s==k3
True
```

The docs say that s should be a copy of p3.  The problem is that subgraph_search returns an *induced* subgraph of the bigger graph with the vertices of the copy of the smaller graph.

Steve Butler suggests that instead, we copy the smaller graph and relabel the vertices appropriately, using the vertices returned from SubgraphSearch.  I like that solution.

Issue created by migration from https://trac.sagemath.org/ticket/12164





---

archive/issue_comments_137836.json:
```json
{
    "body": "Steve Butler suggests that instead, we copy the smaller graph and relabel the vertices appropriately, using the vertices returned from SubgraphSearch.  I like that solution.  But it won't quite work to do that, since a subgraph of a graph inherits lots of properties, like a name, etc.\n\nSo instead, this patch just creates a subgraph where the vertices *and* the edges are specified.  Before, just the vertices were specified, so you ended up getting an *induced* subgraph, even if the subgraph was not an induced subgraph.",
    "created_at": "2011-12-16T15:04:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11992#issuecomment-137836",
    "user": "https://github.com/jasongrout"
}
```

Steve Butler suggests that instead, we copy the smaller graph and relabel the vertices appropriately, using the vertices returned from SubgraphSearch.  I like that solution.  But it won't quite work to do that, since a subgraph of a graph inherits lots of properties, like a name, etc.

So instead, this patch just creates a subgraph where the vertices *and* the edges are specified.  Before, just the vertices were specified, so you ended up getting an *induced* subgraph, even if the subgraph was not an induced subgraph.



---

archive/issue_comments_137837.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-12-16T15:07:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11992#issuecomment-137837",
    "user": "https://github.com/jasongrout"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_137838.json:
```json
{
    "body": "Hellooooooo !! First, I'm glad to see somebody's using that function ! It needs to be totally rewritten anyway, as we now have.... Cython iterators ! `O_O`\n\nSo the whole class has become useless. This being said, what you are doing is much more urgent. Could I ask for a small \"if induced\" before those lines, so that the graph is copied/relabeled only if it is necessary ? `:-)`\n\nNathann",
    "created_at": "2011-12-16T15:12:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11992#issuecomment-137838",
    "user": "https://github.com/nathanncohen"
}
```

Hellooooooo !! First, I'm glad to see somebody's using that function ! It needs to be totally rewritten anyway, as we now have.... Cython iterators ! `O_O`

So the whole class has become useless. This being said, what you are doing is much more urgent. Could I ask for a small "if induced" before those lines, so that the graph is copied/relabeled only if it is necessary ? `:-)`

Nathann



---

archive/issue_comments_137839.json:
```json
{
    "body": "Attachment [trac-12164-subgraph_search.patch](tarball://root/attachments/some-uuid/ticket12164/trac-12164-subgraph_search.patch) by @jasongrout created at 2011-12-16 16:09:10\n\nDone.  I also added a few more tests to the documentation (one of which would have caught this error originally---looking for the non-induced P_5_ in the petersen graph.",
    "created_at": "2011-12-16T16:09:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11992#issuecomment-137839",
    "user": "https://github.com/jasongrout"
}
```

Attachment [trac-12164-subgraph_search.patch](tarball://root/attachments/some-uuid/ticket12164/trac-12164-subgraph_search.patch) by @jasongrout created at 2011-12-16 16:09:10

Done.  I also added a few more tests to the documentation (one of which would have caught this error originally---looking for the non-induced P_5_ in the petersen graph.



---

archive/issue_comments_137840.json:
```json
{
    "body": "Then it's good to go ! All tests pass, and there is just nothing to add `:-)`\n\nNathann",
    "created_at": "2011-12-16T16:17:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11992#issuecomment-137840",
    "user": "https://github.com/nathanncohen"
}
```

Then it's good to go ! All tests pass, and there is just nothing to add `:-)`

Nathann



---

archive/issue_comments_137841.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-12-16T16:17:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11992#issuecomment-137841",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_032336.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-17T09:12:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/11992",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11992#event-32336"
}
```



---

archive/issue_comments_137842.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-12-17T09:12:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11992#issuecomment-137842",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
