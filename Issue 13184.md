# Issue 13184: Wrong LaTeX for products of numbers

archive/issues_013184.json:
```json
{
    "body": "Assignee: @burcin\n\nCC:  @burcin @eviatarbach\n\nKeywords: latex\n\nE.g.\n\n```\nsage: e = 2 * 2^(1/3)\nsage: print latex(e)\n2 \\, 2^{\\left(\\frac{1}{3}\\right)} \n```\n\nthe output looks like power of 22, there should be \\cdot.\n\n(And there should be no parenthesis around the power, but that does not change the meaning at least.)\n\nIssue created by migration from https://trac.sagemath.org/ticket/13356\n\n",
    "created_at": "2012-08-09T17:56:23Z",
    "labels": [
        "component: symbolics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "Wrong LaTeX for products of numbers",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13184",
    "user": "https://github.com/novoselt"
}
```
Assignee: @burcin

CC:  @burcin @eviatarbach

Keywords: latex

E.g.

```
sage: e = 2 * 2^(1/3)
sage: print latex(e)
2 \, 2^{\left(\frac{1}{3}\right)} 
```

the output looks like power of 22, there should be \cdot.

(And there should be no parenthesis around the power, but that does not change the meaning at least.)

Issue created by migration from https://trac.sagemath.org/ticket/13356





---

archive/issue_comments_160721.json:
```json
{
    "body": "My investigation shows that the issue is in `GEx_to_str_latex`, but I have no clue how to fix it.",
    "created_at": "2012-08-09T17:57:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13184#issuecomment-160721",
    "user": "https://github.com/novoselt"
}
```

My investigation shows that the issue is in `GEx_to_str_latex`, but I have no clue how to fix it.



---

archive/issue_comments_160722.json:
```json
{
    "body": "#3202 was about the same problem and claims to be fixed, but I am not sure what is/was the problem with the example there. On the other hand, there is a test in the docstring of symbolic expressions claiming that `2 \\, 2` is great.",
    "created_at": "2012-08-09T18:00:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13184#issuecomment-160722",
    "user": "https://github.com/novoselt"
}
```

#3202 was about the same problem and claims to be fixed, but I am not sure what is/was the problem with the example there. On the other hand, there is a test in the docstring of symbolic expressions claiming that `2 \, 2` is great.



---

archive/issue_comments_160723.json:
```json
{
    "body": "Burcin, any ideas on whether it is in Pynac or Ginac and how to fix it?",
    "created_at": "2012-08-09T19:59:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13184#issuecomment-160723",
    "user": "https://github.com/novoselt"
}
```

Burcin, any ideas on whether it is in Pynac or Ginac and how to fix it?



---

archive/issue_comments_160724.json:
```json
{
    "body": "Slight change in Sage-5.10.rc1:\n\n```\nsage: sage: e = 2 * 2^(1/3)\nsage: sage: print latex(e)\n2 \\, 2^{\\frac{1}{3}}\n```\n",
    "created_at": "2013-06-17T17:12:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13184#issuecomment-160724",
    "user": "https://github.com/novoselt"
}
```

Slight change in Sage-5.10.rc1:

```
sage: sage: e = 2 * 2^(1/3)
sage: sage: print latex(e)
2 \, 2^{\frac{1}{3}}
```




---

archive/issue_comments_160725.json:
```json
{
    "body": "Attachment [trac_13356-latex_coeff_sep.patch](tarball://root/attachments/some-uuid/ticket13356/trac_13356-latex_coeff_sep.patch) by @burcin created at 2013-06-17 22:00:21",
    "created_at": "2013-06-17T22:00:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13184#issuecomment-160725",
    "user": "https://github.com/burcin"
}
```

Attachment [trac_13356-latex_coeff_sep.patch](tarball://root/attachments/some-uuid/ticket13356/trac_13356-latex_coeff_sep.patch) by @burcin created at 2013-06-17 22:00:21



---

archive/issue_comments_160726.json:
```json
{
    "body": "Patch for pynac available [on my work-in-progress repo](https://bitbucket.org/burcin/pynac-wip/commits/838c6c3fff665d36ae262acadb2ed7a33d25500b?at=latex_overall_coeff_sep). Doctest fixes in [This is the Trac macro *attachment:trac_13356-latex_coeff_sep.patch* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#attachment:trac_13356-latex_coeff_sep.patch-macro)\n\nNow the output is:\n\n\n```\nsage: latex(2 * 2^x)\n2 \\cdot 2^{x}\n```\n\n\nWe still keep `\\,` if the next character is not a digit:\n\n\n```\nsage: latex(2* x^2)\n2 \\, x^{2}\n```\n",
    "created_at": "2013-06-17T22:12:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13184#issuecomment-160726",
    "user": "https://github.com/burcin"
}
```

Patch for pynac available [on my work-in-progress repo](https://bitbucket.org/burcin/pynac-wip/commits/838c6c3fff665d36ae262acadb2ed7a33d25500b?at=latex_overall_coeff_sep). Doctest fixes in [This is the Trac macro *attachment:trac_13356-latex_coeff_sep.patch* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#attachment:trac_13356-latex_coeff_sep.patch-macro)

Now the output is:


```
sage: latex(2 * 2^x)
2 \cdot 2^{x}
```


We still keep `\,` if the next character is not a digit:


```
sage: latex(2* x^2)
2 \, x^{2}
```




---

archive/issue_comments_160727.json:
```json
{
    "body": "Changing keywords from \"latex\" to \"latex, pynac, sd48\".",
    "created_at": "2013-06-17T22:12:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13184#issuecomment-160727",
    "user": "https://github.com/burcin"
}
```

Changing keywords from "latex" to "latex, pynac, sd48".



---

archive/issue_comments_160728.json:
```json
{
    "body": "In [this sage-support`@` thread](https://groups.google.com/d/topic/sage-support/K7OwY5XIsAQ/discussion) the consensus seems to be to remove `\\,` and only use `\\cdot` when both sides are numerals.\n\nI am planning to make this change if there are no objections. I'm afraid this will mean fixing doctests all over the tree yet again.",
    "created_at": "2013-06-24T18:49:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13184#issuecomment-160728",
    "user": "https://github.com/burcin"
}
```

In [this sage-support`@` thread](https://groups.google.com/d/topic/sage-support/K7OwY5XIsAQ/discussion) the consensus seems to be to remove `\,` and only use `\cdot` when both sides are numerals.

I am planning to make this change if there are no objections. I'm afraid this will mean fixing doctests all over the tree yet again.



---

archive/issue_comments_160729.json:
```json
{
    "body": "I certainly would not object - I think Sage-generated code should be as close to human-written as possible, so that it is relatively easy to copy-paste into manually written papers. I've never seen anyone manually inserting `\\,` for every product. (It would be good also to have `x_0^2` rather than `x_{0}^{2}`, but that's not related to this ticket.)",
    "created_at": "2013-06-24T18:57:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13184#issuecomment-160729",
    "user": "https://github.com/novoselt"
}
```

I certainly would not object - I think Sage-generated code should be as close to human-written as possible, so that it is relatively easy to copy-paste into manually written papers. I've never seen anyone manually inserting `\,` for every product. (It would be good also to have `x_0^2` rather than `x_{0}^{2}`, but that's not related to this ticket.)



---

archive/issue_comments_160730.json:
```json
{
    "body": "This is to be merged with the pynac update at #15198.",
    "created_at": "2014-02-20T10:49:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13184#issuecomment-160730",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

This is to be merged with the pynac update at #15198.



---

archive/issue_comments_160731.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-02-20T12:11:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13184#issuecomment-160731",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_160732.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-02-20T12:11:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13184#issuecomment-160732",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

New commits:



---

archive/issue_comments_160733.json:
```json
{
    "body": "It seems no doctests needs updating.\nI'll double check (I have a problem with ascii_art right now, but surely for other reasons) and if so set this to positive review.",
    "created_at": "2014-02-20T12:12:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13184#issuecomment-160733",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

It seems no doctests needs updating.
I'll double check (I have a problem with ascii_art right now, but surely for other reasons) and if so set this to positive review.



---

archive/issue_comments_160734.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-02-20T15:39:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13184#issuecomment-160734",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_013098.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-03-04T16:58:40Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13184",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13184#event-13098"
}
```



---

archive/issue_comments_160735.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-03-04T16:58:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13184",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13184#issuecomment-160735",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
