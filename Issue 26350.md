# Issue 26350: correctly handle exponential growth in asymptotic ring

Issue created by migration from https://trac.sagemath.org/ticket/26587

Original creator: dkrenn

Original creation time: 2018-10-29 10:55:59

CC:  behackl

The base of an exponential growth element can be any number, but indeed it should only be a positive number and its argument should be dealt with in a separate way (as this does not contribute to the growth, but still distinguishes different elements, e.g. `(-2)^n` and `2^n`. As a consequence, the sorting of the terms in an asymptotic expansion is not correct and as one wanted.

E.g. one might get something

```
3/32*(-1)^n*n^(-4) + 3/8*(-1)^n*n^(-5) + O((-1)^n*n^(-6)) + (-1/27*I*sqrt(3) + 1/27)*(-zeta3 - 1)^n*n^(-3) + (-1/9*I*sqrt(3) + 1/3)*(-zeta3 - 1)^n*n^(-4) + O((-zeta3 - 1)^n*n^(-5)) + 133/72*n + 7/12*log(n) + 7/12*euler_gamma - 1/6*a0*(I*sqrt(3) + 1) - 1/6*a1*(-I*sqrt(3) + 1) - 1/4*a2 - 23/6 - 11/36*n^(-1) + O(n^(-2)) + (1/27*I*sqrt(3) + 1/27)*zeta3^n*n^(-3) + (1/9*I*sqrt(3) + 1/3)*zeta3^n*n^(-4) + O(zeta3^n*n^(-5))
```

(copied out of some larger computation)


---

Comment by dkrenn created at 2018-10-29 10:58:24

Last 10 new commits:


---

Comment by git created at 2018-10-29 11:02:30

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by git created at 2018-10-30 13:54:19

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by git created at 2018-10-30 14:48:23

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-10-30 14:59:27

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-10-31 13:14:56

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by git created at 2018-11-05 12:57:55

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by dkrenn created at 2018-11-05 12:58:44

Changing status from new to needs_review.


---

Comment by git created at 2018-11-07 12:04:13

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-11-07 12:06:15

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dkrenn created at 2018-11-07 12:07:50

Some small update to take care of a trivial merge conflict in the current 8.5.beta2 and make everything Python3-compatible.


---

Comment by git created at 2018-11-07 15:49:47

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dkrenn created at 2018-11-07 15:50:31

Ok, patchbot was not happy; changed, so let's give it another try...
----
New commits:
----
New commits:


---

Comment by git created at 2019-03-27 19:49:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dkrenn created at 2019-03-27 19:50:14

Merged in 8.7.


---

Comment by behackl created at 2019-04-15 14:45:50

Merged changes from #26588 and fixed one failing doctest. I'll have a look at this now.
----
New commits:


---

Comment by behackl created at 2019-04-16 10:57:17

These changes look good and produce a working version of the creation of the `AsymptoticRing`. I only have minor remarks, namely:

- `growth_group.py`
  1. L2855: `str(self.exponent).isalpha()` can probably even be `str(self.exponent).isidentifier()`.
  1. L5348: I'd suggest trimming multiple spaces such that not only `'ZZ * I'` or `'ZZ *I'`, but maybe also `'ZZ *    I'` and friends are recognized.
----
New commits:


---

Comment by dkrenn created at 2019-04-16 10:59:15

Replying to [comment:19 behackl]:
> These changes look good and produce a working version of the creation of the `AsymptoticRing`. I only have minor remarks, namely:
> 
> - `growth_group.py`
>   1. L2855: `str(self.exponent).isalpha()` can probably even be `str(self.exponent).isidentifier()`.

Done in 
|                                                                                                                                          |                               |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|
|[8a6b4ca](https://git.sagemath.org/sage.git/commit?id=8a6b4caa270009dbad966d49c7ae36b80f1d400f)|`Trac #26587: use isidentifier`|
>   1. L5348: I'd suggest trimming multiple spaces such that not only `'ZZ * I'` or `'ZZ *I'`, but maybe also `'ZZ *    I'` and friends are recognized.

Done in 


---

Comment by behackl created at 2019-04-16 11:05:19

Replying to [comment:20 dkrenn]:
> > 
> > - `growth_group.py`
> >   1. L2855: `str(self.exponent).isalpha()` can probably even be `str(self.exponent).isidentifier()`.
> 
> Done in 
> ||[8a6b4ca](https://git.sagemath.org/sage.git/commit?id=8a6b4caa270009dbad966d49c7ae36b80f1d400f)||`Trac #26587: use isidentifier`||

LGTM

> 
> >   1. L5348: I'd suggest trimming multiple spaces such that not only `'ZZ * I'` or `'ZZ *I'`, but maybe also `'ZZ *    I'` and friends are recognized.
> 
> Done in 
> ||[22e2957](https://git.sagemath.org/sage.git/commit?id=22e295758f2bcf02d9f8cb42abbd9363a33ee7c2)||`Trac #26587: handle multiple spaces in growth group string`||
> 

LGTM.

Thank you.


---

Comment by behackl created at 2019-04-16 11:05:19

Changing status from needs_review to positive_review.


---

Comment by behackl created at 2019-04-16 11:06:42

Changing status from positive_review to needs_review.


---

Comment by behackl created at 2019-04-16 11:06:42

... waiting for the patchbot before setting this to `positive_review`.


---

Comment by behackl created at 2019-04-16 11:41:42

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2019-04-27 17:44:29

Resolution: fixed
