# Issue 31817: FractionWithFactoredDenominator.asymptotic_decomposition requires the numerator ring to be SR

archive/issues_031817.json:
```json
{
    "body": "In `FractionWithFactoredDenominator.asymptotic_decomposition`, a symbolic variable `asy_var` is introduced and used to build expressions, which is set to `var('r')` by default.\n\nThis is what makes the following snippet fail:\n\n\n```\nR.<x,y> = QQ[]\nFFPD = FractionWithFactoredDenominatorRing(R)\n\nG = 1\nH = (1 - x)*(1 - y)*(1 - x*y)\nHfac = H.factor()\nG = G/Hfac.unit()\nF = FFPD(G, Hfac)\n\nF.asymptotic_decomposition(alpha=[1, 1])\n```\n\nwith\n\n```\nTypeError: r is not a variable of Multivariate Polynomial Ring in x, y over Rational Field\n```\n\n\nThis is particularly unhelpful as the error doesn't occur when creating the element, but only when trying to compute the decomposition.\n\nIdeally, the numerator parent should be extended accordingly automatically.\n\nIssue created by migration from https://trac.sagemath.org/ticket/32054\n\n",
    "created_at": "2021-06-24T13:28:25Z",
    "labels": [
        "component: please change",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "FractionWithFactoredDenominator.asymptotic_decomposition requires the numerator ring to be SR",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31817",
    "user": "https://github.com/behackl"
}
```
In `FractionWithFactoredDenominator.asymptotic_decomposition`, a symbolic variable `asy_var` is introduced and used to build expressions, which is set to `var('r')` by default.

This is what makes the following snippet fail:


```
R.<x,y> = QQ[]
FFPD = FractionWithFactoredDenominatorRing(R)

G = 1
H = (1 - x)*(1 - y)*(1 - x*y)
Hfac = H.factor()
G = G/Hfac.unit()
F = FFPD(G, Hfac)

F.asymptotic_decomposition(alpha=[1, 1])
```

with

```
TypeError: r is not a variable of Multivariate Polynomial Ring in x, y over Rational Field
```


This is particularly unhelpful as the error doesn't occur when creating the element, but only when trying to compute the decomposition.

Ideally, the numerator parent should be extended accordingly automatically.

Issue created by migration from https://trac.sagemath.org/ticket/32054





---

archive/issue_comments_454156.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to asymptotic expansions.",
    "created_at": "2021-06-24T13:29:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31817#issuecomment-454156",
    "user": "https://github.com/behackl"
}
```

Changing component from PLEASE CHANGE to asymptotic expansions.
