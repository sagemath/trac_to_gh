# Issue 31817: FractionWithFactoredDenominator.asymptotic_decomposition requires the numerator ring to be SR

Issue created by migration from https://trac.sagemath.org/ticket/32054

Original creator: behackl

Original creation time: 2021-06-24 13:28:25

In `FractionWithFactoredDenominator.asymptotic_decomposition`, a symbolic variable `asy_var` is introduced and used to build expressions, which is set to `var('r')` by default.

This is what makes the following snippet fail:


```
R.<x,y> = QQ[]
FFPD = FractionWithFactoredDenominatorRing(R)

G = 1
H = (1 - x)*(1 - y)*(1 - x*y)
Hfac = H.factor()
G = G/Hfac.unit()
F = FFPD(G, Hfac)

F.asymptotic_decomposition(alpha=[1, 1])
```

with

```
TypeError: r is not a variable of Multivariate Polynomial Ring in x, y over Rational Field
```


This is particularly unhelpful as the error doesn't occur when creating the element, but only when trying to compute the decomposition.

Ideally, the numerator parent should be extended accordingly automatically.


---

Comment by behackl created at 2021-06-24 13:29:07

Changing component from PLEASE CHANGE to asymptotic expansions.
