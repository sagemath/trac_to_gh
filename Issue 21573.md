# Issue 21573: Move calculation of PARI stack size out of __init__

archive/issues_021573.json:
```json
{
    "body": "Move the calculation of the PARI stack sizes out of `PariInstance.__init__` and require a `size` and `vsize` argument in the `__init__` call.\n\nIssue created by migration from https://trac.sagemath.org/ticket/21810\n\n",
    "created_at": "2016-11-03T14:28:47Z",
    "labels": [
        "interfaces",
        "major",
        "enhancement"
    ],
    "title": "Move calculation of PARI stack size out of __init__",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21573",
    "user": "jdemeyer"
}
```
Move the calculation of the PARI stack sizes out of `PariInstance.__init__` and require a `size` and `vsize` argument in the `__init__` call.

Issue created by migration from https://trac.sagemath.org/ticket/21810





---

archive/issue_comments_299508.json:
```json
{
    "body": "I'll do this when #21806 has positive_review.",
    "created_at": "2017-01-10T18:21:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21573#issuecomment-299508",
    "user": "jdemeyer"
}
```

I'll do this when #21806 has positive_review.



---

archive/issue_comments_299509.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-01-12T20:34:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21573#issuecomment-299509",
    "user": "jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_299510.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-01-12T20:34:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21573#issuecomment-299510",
    "user": "jdemeyer"
}
```

New commits:



---

archive/issue_comments_299511.json:
```json
{
    "body": "Changing keywords from \"\" to \"atelierpari2017\".",
    "created_at": "2017-01-12T20:35:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21573#issuecomment-299511",
    "user": "jdemeyer"
}
```

Changing keywords from "" to "atelierpari2017".



---

archive/issue_comments_299512.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-01-13T10:11:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21573#issuecomment-299512",
    "user": "defeo"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_299513.json:
```json
{
    "body": "All tests pass",
    "created_at": "2017-01-13T10:11:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21573#issuecomment-299513",
    "user": "defeo"
}
```

All tests pass



---

archive/issue_comments_299514.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2017-01-15T13:09:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21573#issuecomment-299514",
    "user": "vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_299515.json:
```json
{
    "body": "seems to conflict with one of teh other pari tickets\n\n```\nError compiling Cython file:\n------------------------------------------------------------\n...\n#*****************************************************************************\n\ninclude \"sage/libs/linkages/padics/mpz.pxi\"\ninclude \"FP_template.pxi\"\n\nfrom sage.libs.cypari2.pari_instance cimport pari_instance as pari\n^\n------------------------------------------------------------\n\nsage/rings/padics/padic_floating_point_element.pyx:24:0: 'sage/libs/cypari2/pari_instance/pari_instance.pxd' not found\nTraceback (most recent call last):\n  File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/Cython/Build/Dependencies.py\", line 1074, in cythonize_one_helper\n    return cythonize_one(*m)\n  File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/Cython/Build/Dependencies.py\", line 1056, in cythonize_one\n    raise CompileError(None, pyx_file)\nCompileError: sage/rings/padics/padic_floating_point_element.pyx\n```\n",
    "created_at": "2017-01-15T13:09:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21573#issuecomment-299515",
    "user": "vbraun"
}
```

seems to conflict with one of teh other pari tickets

```
Error compiling Cython file:
------------------------------------------------------------
...
#*****************************************************************************

include "sage/libs/linkages/padics/mpz.pxi"
include "FP_template.pxi"

from sage.libs.cypari2.pari_instance cimport pari_instance as pari
^
------------------------------------------------------------

sage/rings/padics/padic_floating_point_element.pyx:24:0: 'sage/libs/cypari2/pari_instance/pari_instance.pxd' not found
Traceback (most recent call last):
  File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/Cython/Build/Dependencies.py", line 1074, in cythonize_one_helper
    return cythonize_one(*m)
  File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/Cython/Build/Dependencies.py", line 1056, in cythonize_one
    raise CompileError(None, pyx_file)
CompileError: sage/rings/padics/padic_floating_point_element.pyx
```




---

archive/issue_comments_299516.json:
```json
{
    "body": "Replying to [comment:9 vbraun]:\n> seems to conflict with one of teh other pari tickets\n\nWe took care to make the various PARI tickets conflict-free (indeed, all those tickets are merged together in #22183 for example). There might be a conflict with a different ticket though...",
    "created_at": "2017-01-16T15:25:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21573#issuecomment-299516",
    "user": "jdemeyer"
}
```

Replying to [comment:9 vbraun]:
> seems to conflict with one of teh other pari tickets

We took care to make the various PARI tickets conflict-free (indeed, all those tickets are merged together in #22183 for example). There might be a conflict with a different ticket though...



---

archive/issue_comments_299517.json:
```json
{
    "body": "The conflict is due to #20348. I suggest to wait until #20348 is closed and then merge it in this branch.",
    "created_at": "2017-01-16T15:30:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21573#issuecomment-299517",
    "user": "jdemeyer"
}
```

The conflict is due to #20348. I suggest to wait until #20348 is closed and then merge it in this branch.



---

archive/issue_comments_299518.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2017-01-17T07:32:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21573#issuecomment-299518",
    "user": "jdemeyer"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_299519.json:
```json
{
    "body": "#20348 needs work anyway and I asked them to change the `pari` import to be compatible with this ticket here.",
    "created_at": "2017-01-17T08:13:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21573#issuecomment-299519",
    "user": "jdemeyer"
}
```

#20348 needs work anyway and I asked them to change the `pari` import to be compatible with this ticket here.



---

archive/issue_comments_299520.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-01-21T16:35:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21573#issuecomment-299520",
    "user": "vbraun"
}
```

Resolution: fixed
