# Issue 12022: Method to collapse a tower of function field extensions to a simple extension

archive/issues_012022.json:
```json
{
    "body": "Assignee: malb\n\nCC:  sydahmad mderickx minz\n\nKeywords: function fields\n\nImplement a method `absolute_field()` for function fields, i.e., collapse a tower of separable extensions to one simple extension.\n\nIssue created by migration from https://trac.sagemath.org/ticket/12194\n\n",
    "created_at": "2011-12-20T09:23:29Z",
    "labels": [
        "commutative algebra",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Method to collapse a tower of function field extensions to a simple extension",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12022",
    "user": "saraedum"
}
```
Assignee: malb

CC:  sydahmad mderickx minz

Keywords: function fields

Implement a method `absolute_field()` for function fields, i.e., collapse a tower of separable extensions to one simple extension.

Issue created by migration from https://trac.sagemath.org/ticket/12194





---

archive/issue_comments_138948.json:
```json
{
    "body": "All functions are included and passes the sage -t but need more work",
    "created_at": "2011-12-30T09:43:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12022",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12022#issuecomment-138948",
    "user": "sydahmad"
}
```

All functions are included and passes the sage -t but need more work



---

archive/issue_comments_138949.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2011-12-30T10:36:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12022",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12022#issuecomment-138949",
    "user": "sydahmad"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_138950.json:
```json
{
    "body": "Attachment [trac_12194_julian_func_field_enhancements.patch](tarball://root/attachments/some-uuid/ticket12194/trac_12194_julian_func_field_enhancements.patch) by sydahmad created at 2011-12-30 10:36:20\n\nI know this still incomplete and at least needs more testing and more complete documentation besides housekeeping and other stuff. But I uploaded it, so I can have some inputs from people before taking further steps. The current codes passes all the tests but I had to apply quite few changes to it. Many of them, I think were routine but I would like to share some other one that I'm not sure was ok:\n\n1. The check for validity of construction of FunctionField_polymod has been entirely moved to its constructor, as a result one can not check for the stuff like this:\n\n\n```\nsage: kx.<x> = FunctionField(FiniteField(5))\nsage: kz.<z> = FunctionField(FiniteField(7))\nsage: kzY.<Y> = kz[]\nsage: kxy.<y> = kx.extension(Y^2 - z^3 -1)\nsage: kxy.base_field() == kx\nFalse\nsage: kxy.base_field() == kz\nTrue\n```\n\n\n\nSo I had to put the code for preventing above situation in \"extension\" function.\n\n2. Apparently (polynomial) generator functions do not accept lists of variables anymore raising \"not hashable\" error, so I changed all calls to these functions from names=[name] to names=(name). However the functions in the patches still accepts the variables in list, but I think we should change those as well.\n\n3. Few test examples were failing due to the strange reason that the example line had comments: like this\n\n\n```\nK.<x> = FunctionField(QQ) #optional x\n```\n\n\n\nI couldn't figure out what is the real cause so I just ommited these comments to pass the tests.\n\n4. In some cases the code computes different result from examples expectations, but in those cases, I found that the expectaion doesn't make much of sense. For example we have:\n\n\n```\n(Function field in y defined by -y^4 + x, Morphism of function fields defined by y^4 |--> x, \u00a0y |--> y, Morphism of function fields defined by y |--> y, \u00a0x |--> y^4)\n```\n\n\n\nBut, I think a morphisim should take a generator to somewhere, not a power of it as in y!^4 |--> x. In these cases, I check the result of the code in Magma and it seemed to be correct (the field where isomorphics and the computed isomorphism was one of the possible isomorphism).\n\n5. There was confusion in order of isomorphisms which was stopping the code from working at the beginning. All functions were returning the From_self_to_simpleField first then its inverse, except for the make_simple. So, I changed the order of return vars in make_simple and everthing seems to work fine.\n\nThat is for now and happy new year!",
    "created_at": "2011-12-30T10:36:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12022",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12022#issuecomment-138950",
    "user": "sydahmad"
}
```

Attachment [trac_12194_julian_func_field_enhancements.patch](tarball://root/attachments/some-uuid/ticket12194/trac_12194_julian_func_field_enhancements.patch) by sydahmad created at 2011-12-30 10:36:20

I know this still incomplete and at least needs more testing and more complete documentation besides housekeeping and other stuff. But I uploaded it, so I can have some inputs from people before taking further steps. The current codes passes all the tests but I had to apply quite few changes to it. Many of them, I think were routine but I would like to share some other one that I'm not sure was ok:

1. The check for validity of construction of FunctionField_polymod has been entirely moved to its constructor, as a result one can not check for the stuff like this:


```
sage: kx.<x> = FunctionField(FiniteField(5))
sage: kz.<z> = FunctionField(FiniteField(7))
sage: kzY.<Y> = kz[]
sage: kxy.<y> = kx.extension(Y^2 - z^3 -1)
sage: kxy.base_field() == kx
False
sage: kxy.base_field() == kz
True
```



So I had to put the code for preventing above situation in "extension" function.

2. Apparently (polynomial) generator functions do not accept lists of variables anymore raising "not hashable" error, so I changed all calls to these functions from names=[name] to names=(name). However the functions in the patches still accepts the variables in list, but I think we should change those as well.

3. Few test examples were failing due to the strange reason that the example line had comments: like this


```
K.<x> = FunctionField(QQ) #optional x
```



I couldn't figure out what is the real cause so I just ommited these comments to pass the tests.

4. In some cases the code computes different result from examples expectations, but in those cases, I found that the expectaion doesn't make much of sense. For example we have:


```
(Function field in y defined by -y^4 + x, Morphism of function fields defined by y^4 |--> x,  y |--> y, Morphism of function fields defined by y |--> y,  x |--> y^4)
```



But, I think a morphisim should take a generator to somewhere, not a power of it as in y!^4 |--> x. In these cases, I check the result of the code in Magma and it seemed to be correct (the field where isomorphics and the computed isomorphism was one of the possible isomorphism).

5. There was confusion in order of isomorphisms which was stopping the code from working at the beginning. All functions were returning the From_self_to_simpleField first then its inverse, except for the make_simple. So, I changed the order of return vars in make_simple and everthing seems to work fine.

That is for now and happy new year!



---

archive/issue_comments_138951.json:
```json
{
    "body": "And one more thing:\n\n6. There was no function to compute the inverse of morphisms with RationalFunctionField domain, so I cooked one using the inversion of morphisims with\u00a0FunctionField_polymod domain, but I think we can probably do better.",
    "created_at": "2011-12-30T10:41:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12022",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12022#issuecomment-138951",
    "user": "sydahmad"
}
```

And one more thing:

6. There was no function to compute the inverse of morphisms with RationalFunctionField domain, so I cooked one using the inversion of morphisims with FunctionField_polymod domain, but I think we can probably do better.



---

archive/issue_comments_138952.json:
```json
{
    "body": "I think I \u00a0found a bug in change_generators(t,w) , I think if t isn't\u00a0integral\u00a0over k[x], it doesn't work properly. I think we need to multiply the elements of [t!<sup>e*w!</sup>d] matrix with the lcm of their denominators and that's enough for a cure. In few cases, that I checked I got the correct result.\n\nAlso, I don't understand how do we know that dimension of the kernel of the above matrix is always one. Doesn't it mean that we should know the dimension of the Riemman-Roch space generated by the by poles of t and w with some\u00a0multiplicity? Is it easy to be computed? If it's that easy, can't we use it to compute the genus?",
    "created_at": "2012-01-20T09:17:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12022",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12022#issuecomment-138952",
    "user": "sydahmad"
}
```

I think I  found a bug in change_generators(t,w) , I think if t isn't integral over k[x], it doesn't work properly. I think we need to multiply the elements of [t!<sup>e*w!</sup>d] matrix with the lcm of their denominators and that's enough for a cure. In few cases, that I checked I got the correct result.

Also, I don't understand how do we know that dimension of the kernel of the above matrix is always one. Doesn't it mean that we should know the dimension of the Riemman-Roch space generated by the by poles of t and w with some multiplicity? Is it easy to be computed? If it's that easy, can't we use it to compute the genus?



---

archive/issue_comments_138953.json:
```json
{
    "body": "This is now superseded by #16518, #16530, #16561, #16562, #16563, #16564, #16565, #16572, #16575, #16576.",
    "created_at": "2014-06-27T19:10:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12022",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12022#issuecomment-138953",
    "user": "saraedum"
}
```

This is now superseded by #16518, #16530, #16561, #16562, #16563, #16564, #16565, #16572, #16575, #16576.



---

archive/issue_comments_138954.json:
```json
{
    "body": "Changing status from needs_info to positive_review.",
    "created_at": "2014-06-27T19:10:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12022",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12022#issuecomment-138954",
    "user": "saraedum"
}
```

Changing status from needs_info to positive_review.



---

archive/issue_comments_138955.json:
```json
{
    "body": "Resolution: duplicate",
    "created_at": "2014-06-28T01:16:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12022",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12022#issuecomment-138955",
    "user": "vbraun"
}
```

Resolution: duplicate
