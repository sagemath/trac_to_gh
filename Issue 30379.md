# Issue 30379: lazy_import: Add keyword argument 'feature'

archive/issues_030379.json:
```json
{
    "body": "CC:  fbissey jhpalmieri slelievre slabbe dcoudert\n\nThis helps with the modularization of sagelib.\n\nWe demonstrate its use by simplifying `sage.groups.braid` (which depends on the optional library `libbraiding` via `sage.libs.libbraiding`).\n\nIssue created by migration from https://trac.sagemath.org/ticket/30616\n\n",
    "created_at": "2020-09-19T23:40:57Z",
    "labels": [
        "refactoring",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "lazy_import: Add keyword argument 'feature'",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30379",
    "user": "mkoeppe"
}
```
CC:  fbissey jhpalmieri slelievre slabbe dcoudert

This helps with the modularization of sagelib.

We demonstrate its use by simplifying `sage.groups.braid` (which depends on the optional library `libbraiding` via `sage.libs.libbraiding`).

Issue created by migration from https://trac.sagemath.org/ticket/30616





---

archive/issue_comments_433275.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-20T01:09:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30379",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30379#issuecomment-433275",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_433276.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-09-20T01:26:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30379",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30379#issuecomment-433276",
    "user": "mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_433277.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-21T02:32:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30379",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30379#issuecomment-433277",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_433278.json:
```json
{
    "body": "I tried before and after installing `tdlib`, `mcqd`, `cryptominisat`, `pycosat` (not obvious to know that its picosat), `meataxe`. Note that `libbraiding` was already installed (is it standard now ?). It's working well.\n\nHowever, we have several pyflakes errors (see patchbot)\n\n```\nsrc/sage/graphs/graph.py:6419:20 undefined name 'mcqd'\nsrc/sage/graphs/graph.py:6517:24 undefined name 'mcqd'\n\nsrc/sage/groups/braid.py:82:1 'sage.misc.package.PackageNotFoundError' imported but unused\nsrc/sage/groups/braid.py:1080:13 undefined name 'rightnormalform'\nsrc/sage/groups/braid.py:1096:13 undefined name 'centralizer'\nsrc/sage/groups/braid.py:1115:13 undefined name 'supersummitset'\nsrc/sage/groups/braid.py:1138:13 undefined name 'greatestcommondivisor'\nsrc/sage/groups/braid.py:1158:13 undefined name 'leastcommonmultiple'\nsrc/sage/groups/braid.py:1183:13 undefined name 'conjugatingbraid'\nsrc/sage/groups/braid.py:1208:13 undefined name 'conjugatingbraid'\nsrc/sage/groups/braid.py:1236:15 undefined name 'ultrasummitset'\nsrc/sage/groups/braid.py:1261:16 undefined name 'thurston_type'\nsrc/sage/groups/braid.py:1326:24 undefined name 'rigidity'\nsrc/sage/groups/braid.py:1358:15 undefined name 'sliding_circuits'\n\nsrc/sage/matrix/matrix_space.py:287:24 undefined name 'Matrix_gfpn_dense'\n\nsrc/sage/sat/solvers/cryptominisat.py:72:24 undefined name 'Solver'\n\nsrc/sage/sat/solvers/picosat.py:63:23 undefined name 'solve'\n```\n",
    "created_at": "2020-09-23T14:18:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30379",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30379#issuecomment-433278",
    "user": "dcoudert"
}
```

I tried before and after installing `tdlib`, `mcqd`, `cryptominisat`, `pycosat` (not obvious to know that its picosat), `meataxe`. Note that `libbraiding` was already installed (is it standard now ?). It's working well.

However, we have several pyflakes errors (see patchbot)

```
src/sage/graphs/graph.py:6419:20 undefined name 'mcqd'
src/sage/graphs/graph.py:6517:24 undefined name 'mcqd'

src/sage/groups/braid.py:82:1 'sage.misc.package.PackageNotFoundError' imported but unused
src/sage/groups/braid.py:1080:13 undefined name 'rightnormalform'
src/sage/groups/braid.py:1096:13 undefined name 'centralizer'
src/sage/groups/braid.py:1115:13 undefined name 'supersummitset'
src/sage/groups/braid.py:1138:13 undefined name 'greatestcommondivisor'
src/sage/groups/braid.py:1158:13 undefined name 'leastcommonmultiple'
src/sage/groups/braid.py:1183:13 undefined name 'conjugatingbraid'
src/sage/groups/braid.py:1208:13 undefined name 'conjugatingbraid'
src/sage/groups/braid.py:1236:15 undefined name 'ultrasummitset'
src/sage/groups/braid.py:1261:16 undefined name 'thurston_type'
src/sage/groups/braid.py:1326:24 undefined name 'rigidity'
src/sage/groups/braid.py:1358:15 undefined name 'sliding_circuits'

src/sage/matrix/matrix_space.py:287:24 undefined name 'Matrix_gfpn_dense'

src/sage/sat/solvers/cryptominisat.py:72:24 undefined name 'Solver'

src/sage/sat/solvers/picosat.py:63:23 undefined name 'solve'
```




---

archive/issue_comments_433279.json:
```json
{
    "body": "Replying to [comment:8 dcoudert]:\n> Note that `libbraiding` was already installed (is it standard now ?).\n\nYes, see `build/pkgs/libbraiding/type` which you can either\ncheck with this command:\n\n```\n$ cat build/pkgs/libbraiding/type\nstandard\n```\n\nor by viewing that file online:\n- https://github.com/sagemath/sage/blob/develop/build/pkgs/libbraiding/type\n\nThis happened in\n\n- #25705 Make libhomfly and libbraiding standard packages\n\nwhich was merged in Sage 8.4.beta0.",
    "created_at": "2020-09-23T14:22:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30379",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30379#issuecomment-433279",
    "user": "slelievre"
}
```

Replying to [comment:8 dcoudert]:
> Note that `libbraiding` was already installed (is it standard now ?).

Yes, see `build/pkgs/libbraiding/type` which you can either
check with this command:

```
$ cat build/pkgs/libbraiding/type
standard
```

or by viewing that file online:
- https://github.com/sagemath/sage/blob/develop/build/pkgs/libbraiding/type

This happened in

- #25705 Make libhomfly and libbraiding standard packages

which was merged in Sage 8.4.beta0.



---

archive/issue_comments_433280.json:
```json
{
    "body": "Thanks.\n\nCan we do something for the pyflakes issues or is it the prize to pay for lazy import ?",
    "created_at": "2020-09-23T14:53:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30379",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30379#issuecomment-433280",
    "user": "dcoudert"
}
```

Thanks.

Can we do something for the pyflakes issues or is it the prize to pay for lazy import ?



---

archive/issue_comments_433281.json:
```json
{
    "body": "Unfortunately that's the prize to pay...",
    "created_at": "2020-09-23T17:05:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30379",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30379#issuecomment-433281",
    "user": "mkoeppe"
}
```

Unfortunately that's the prize to pay...



---

archive/issue_comments_433282.json:
```json
{
    "body": "So then.",
    "created_at": "2020-09-23T17:37:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30379",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30379#issuecomment-433282",
    "user": "dcoudert"
}
```

So then.



---

archive/issue_comments_433283.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-09-23T17:37:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30379",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30379#issuecomment-433283",
    "user": "dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_433284.json:
```json
{
    "body": "Thank you!",
    "created_at": "2020-09-23T17:51:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30379",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30379#issuecomment-433284",
    "user": "mkoeppe"
}
```

Thank you!



---

archive/issue_comments_433285.json:
```json
{
    "body": "Replying to [comment:11 mkoeppe]:\n> Unfortunately that's the price to pay...\nFollow-up: #30647 - Make `lazy_import` more friendly to pyflakes and other static checkers",
    "created_at": "2020-09-23T18:11:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30379",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30379#issuecomment-433285",
    "user": "mkoeppe"
}
```

Replying to [comment:11 mkoeppe]:
> Unfortunately that's the price to pay...
Follow-up: #30647 - Make `lazy_import` more friendly to pyflakes and other static checkers



---

archive/issue_comments_433286.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-10-05T20:13:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30379",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30379#issuecomment-433286",
    "user": "vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_433287.json:
```json
{
    "body": "I'm going to add the missing documentation on #30587.",
    "created_at": "2020-12-10T08:38:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30379",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30379#issuecomment-433287",
    "user": "@kliem"
}
```

I'm going to add the missing documentation on #30587.
