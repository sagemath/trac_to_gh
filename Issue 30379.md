# Issue 30379: lazy_import: Add keyword argument 'feature'

Issue created by migration from https://trac.sagemath.org/ticket/30616

Original creator: mkoeppe

Original creation time: 2020-09-19 23:40:57

CC:  fbissey jhpalmieri slelievre slabbe dcoudert

This helps with the modularization of sagelib.

We demonstrate its use by simplifying `sage.groups.braid` (which depends on the optional library `libbraiding` via `sage.libs.libbraiding`).


---

Comment by git created at 2020-09-20 01:09:01

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2020-09-20 01:26:57

Changing status from new to needs_review.


---

Comment by git created at 2020-09-21 02:32:18

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2020-09-23 14:18:36

I tried before and after installing `tdlib`, `mcqd`, `cryptominisat`, `pycosat` (not obvious to know that its picosat), `meataxe`. Note that `libbraiding` was already installed (is it standard now ?). It's working well.

However, we have several pyflakes errors (see patchbot)

```
src/sage/graphs/graph.py:6419:20 undefined name 'mcqd'
src/sage/graphs/graph.py:6517:24 undefined name 'mcqd'

src/sage/groups/braid.py:82:1 'sage.misc.package.PackageNotFoundError' imported but unused
src/sage/groups/braid.py:1080:13 undefined name 'rightnormalform'
src/sage/groups/braid.py:1096:13 undefined name 'centralizer'
src/sage/groups/braid.py:1115:13 undefined name 'supersummitset'
src/sage/groups/braid.py:1138:13 undefined name 'greatestcommondivisor'
src/sage/groups/braid.py:1158:13 undefined name 'leastcommonmultiple'
src/sage/groups/braid.py:1183:13 undefined name 'conjugatingbraid'
src/sage/groups/braid.py:1208:13 undefined name 'conjugatingbraid'
src/sage/groups/braid.py:1236:15 undefined name 'ultrasummitset'
src/sage/groups/braid.py:1261:16 undefined name 'thurston_type'
src/sage/groups/braid.py:1326:24 undefined name 'rigidity'
src/sage/groups/braid.py:1358:15 undefined name 'sliding_circuits'

src/sage/matrix/matrix_space.py:287:24 undefined name 'Matrix_gfpn_dense'

src/sage/sat/solvers/cryptominisat.py:72:24 undefined name 'Solver'

src/sage/sat/solvers/picosat.py:63:23 undefined name 'solve'
```



---

Comment by slelievre created at 2020-09-23 14:22:52

Replying to [comment:8 dcoudert]:
> Note that `libbraiding` was already installed (is it standard now ?).

Yes, see `build/pkgs/libbraiding/type` which you can either
check with this command:

```
$ cat build/pkgs/libbraiding/type
standard
```

or by viewing that file online:
- https://github.com/sagemath/sage/blob/develop/build/pkgs/libbraiding/type

This happened in

- #25705 Make libhomfly and libbraiding standard packages

which was merged in Sage 8.4.beta0.


---

Comment by dcoudert created at 2020-09-23 14:53:18

Thanks.

Can we do something for the pyflakes issues or is it the prize to pay for lazy import ?


---

Comment by mkoeppe created at 2020-09-23 17:05:16

Unfortunately that's the prize to pay...


---

Comment by dcoudert created at 2020-09-23 17:37:29

So then.


---

Comment by dcoudert created at 2020-09-23 17:37:29

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2020-09-23 17:51:26

Thank you!


---

Comment by mkoeppe created at 2020-09-23 18:11:07

Replying to [comment:11 mkoeppe]:
> Unfortunately that's the price to pay...
Follow-up: #30647 - Make `lazy_import` more friendly to pyflakes and other static checkers


---

Comment by vbraun created at 2020-10-05 20:13:08

Resolution: fixed


---

Comment by @kliem created at 2020-12-10 08:38:09

I'm going to add the missing documentation on #30587.
