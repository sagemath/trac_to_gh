# Issue 16320: FiniteStateMachine - LaTeX output in notebook

Issue created by migration from Trac.

Original creator: cheuberg

Original creation time: 2014-06-26 18:13:25

CC:  skropf dkrenn elixyre ncohen

Keywords: finite_state_machine, latex

In #16020, `graphs.setup_latex_preamble` has been modified to include tikz
into the mathjax avoid list so that graphs can be rendered more easily in
the sage notebook.
    
This ticket does the same for `finite_state_machine.setup_latex_preamble`.


---

Comment by cheuberg created at 2014-06-26 18:13:43

Changing status from new to needs_review.


---

Comment by elixyre created at 2014-07-03 03:00:08

In #16020, we don't need to call:

```
sage.combinat.finite_state_machine.setup_latex_preamble()
```

to see some multi-graphs.
It could be convenient to directly load these lines:

```
latex.add_package_to_preamble_if_available('tikz')
latex.add_to_mathjax_avoid_list("tikz")
latex.add_to_preamble('\\usetikzlibrary{automata}')
```

when we load the file.

It seems to me, that is not disturbing to load these lines... but it is disturbing to have to call this method to draw some automata.

Cheers,

Jean-Baptiste Priez


---

Comment by elixyre created at 2014-07-03 03:00:08

Changing status from needs_review to needs_work.


---

Comment by git created at 2014-07-06 17:04:44

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by cheuberg created at 2014-07-06 17:09:07

Thanks for pointing this out, I was not aware of the fact that the graphs module calls `setup_latex_preamble` automatically. Therefore, I submitted a patch for adapting the documentation of the graphs module (#16620).

So, we now call `setup_latex_preamble` automatically (not when first loading the file as suggested, but when `_latex_` is called as the graphs module does). To reduce overhead,
`setup_latex_preamble` is now a cached function (as in the graphs module). Finally, the documentation has been adapted to reflect the change.


---

Comment by cheuberg created at 2014-07-06 17:09:07

Changing status from needs_work to needs_review.


---

Comment by elixyre created at 2014-07-16 03:35:26

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-07-17 00:01:14

Resolution: fixed
