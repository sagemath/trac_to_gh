# Issue 16320: FiniteStateMachine - LaTeX output in notebook

archive/issues_016320.json:
```json
{
    "body": "CC:  skropf @dkrenn elixyre @nathanncohen\n\nKeywords: finite_state_machine, latex\n\nIn #16020, `graphs.setup_latex_preamble` has been modified to include tikz\ninto the mathjax avoid list so that graphs can be rendered more easily in\nthe sage notebook.\n    \nThis ticket does the same for `finite_state_machine.setup_latex_preamble`.\n\nMoreover, `finite_state_machine.setup_latex_preamble` is now loaded automatically (as it is the case in the graphs module).\n\nIssue created by migration from https://trac.sagemath.org/ticket/16557\n\n",
    "closed_at": "2014-07-17T00:01:14Z",
    "created_at": "2014-06-26T18:13:25Z",
    "labels": [
        "component: finite state machines",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.3",
    "title": "FiniteStateMachine - LaTeX output in notebook",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16320",
    "user": "https://github.com/cheuberg"
}
```
CC:  skropf @dkrenn elixyre @nathanncohen

Keywords: finite_state_machine, latex

In #16020, `graphs.setup_latex_preamble` has been modified to include tikz
into the mathjax avoid list so that graphs can be rendered more easily in
the sage notebook.
    
This ticket does the same for `finite_state_machine.setup_latex_preamble`.

Moreover, `finite_state_machine.setup_latex_preamble` is now loaded automatically (as it is the case in the graphs module).

Issue created by migration from https://trac.sagemath.org/ticket/16557





---

archive/issue_comments_213499.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-06-26T18:13:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16320#issuecomment-213499",
    "user": "https://github.com/cheuberg"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_213500.json:
```json
{
    "body": "In #16020, we don't need to call:\n\n```\nsage.combinat.finite_state_machine.setup_latex_preamble()\n```\nto see some multi-graphs.\nIt could be convenient to directly load these lines:\n\n```\nlatex.add_package_to_preamble_if_available('tikz')\nlatex.add_to_mathjax_avoid_list(\"tikz\")\nlatex.add_to_preamble('\\\\usetikzlibrary{automata}')\n```\nwhen we load the file.\n\nIt seems to me, that is not disturbing to load these lines... but it is disturbing to have to call this method to draw some automata.\n\nCheers,\n\nJean-Baptiste Priez",
    "created_at": "2014-07-03T03:00:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16320#issuecomment-213500",
    "user": "https://trac.sagemath.org/admin/accounts/users/elixyre"
}
```

In #16020, we don't need to call:

```
sage.combinat.finite_state_machine.setup_latex_preamble()
```
to see some multi-graphs.
It could be convenient to directly load these lines:

```
latex.add_package_to_preamble_if_available('tikz')
latex.add_to_mathjax_avoid_list("tikz")
latex.add_to_preamble('\\usetikzlibrary{automata}')
```
when we load the file.

It seems to me, that is not disturbing to load these lines... but it is disturbing to have to call this method to draw some automata.

Cheers,

Jean-Baptiste Priez



---

archive/issue_comments_213501.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-07-03T03:00:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16320#issuecomment-213501",
    "user": "https://trac.sagemath.org/admin/accounts/users/elixyre"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_213502.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-06T17:04:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16320#issuecomment-213502",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_213503.json:
```json
{
    "body": "Thanks for pointing this out, I was not aware of the fact that the graphs module calls `setup_latex_preamble` automatically. Therefore, I submitted a patch for adapting the documentation of the graphs module (#16620).\n\nSo, we now call `setup_latex_preamble` automatically (not when first loading the file as suggested, but when `_latex_` is called as the graphs module does). To reduce overhead,\n`setup_latex_preamble` is now a cached function (as in the graphs module). Finally, the documentation has been adapted to reflect the change.",
    "created_at": "2014-07-06T17:09:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16320#issuecomment-213503",
    "user": "https://github.com/cheuberg"
}
```

Thanks for pointing this out, I was not aware of the fact that the graphs module calls `setup_latex_preamble` automatically. Therefore, I submitted a patch for adapting the documentation of the graphs module (#16620).

So, we now call `setup_latex_preamble` automatically (not when first loading the file as suggested, but when `_latex_` is called as the graphs module does). To reduce overhead,
`setup_latex_preamble` is now a cached function (as in the graphs module). Finally, the documentation has been adapted to reflect the change.



---

archive/issue_comments_213504.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-07-06T17:09:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16320#issuecomment-213504",
    "user": "https://github.com/cheuberg"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_213505.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-07-16T03:35:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16320#issuecomment-213505",
    "user": "https://trac.sagemath.org/admin/accounts/users/elixyre"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_048598.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-17T00:01:14Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16320",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16320#event-48598"
}
```



---

archive/issue_comments_213506.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-07-17T00:01:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16320#issuecomment-213506",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
