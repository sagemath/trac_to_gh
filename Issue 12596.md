# Issue 12596: Better plotting for isogeny graphs of elliptic curves

Issue created by migration from Trac.

Original creator: roed

Original creation time: 2012-03-28 11:42:39

Assignee: cremona

CC:  cremona kedlaya vbraun

There are only 17 different possible isogeny graphs for elliptic curves over Q.  It would be nice if the isogeny graph was laid out in the same way each time, and if the labels corresponded to the Cremona labels of the curves in the isogeny class.


---

Comment by roed created at 2012-04-02 05:24:34

I still need to finish doctesting this, but I wanted to post it now since I'm not going to be able to work on it tomorrow.  It adds the capability to make curves from LMFDB labels, to reorder isogeny classes, and makes the plot for the graph of an isogeny class deterministic.  I have a corresponding patch to the LMFDB code that fixes all the problems I've observed with ordering and plotting.


---

Comment by roed created at 2012-04-05 22:50:05

Ready for review


---

Attachment

The tests in `sage/schemes/elliptic_curves` pass for me.  Let's see what patchbot says.


---

Comment by roed created at 2012-04-05 23:00:58

Changing status from new to needs_review.


---

Comment by davidloeffler created at 2012-04-07 10:52:24

Patchbot says "angry red blob", I'm afraid. Here's the problem:

```
patching file sage/databases/cremona.py
Hunk #5 FAILED at 792
1 out of 6 hunks FAILED -- saving rejects to file sage/databases/cremona.py.rej
patch failed, unable to continue (try -v)
patch failed, rejects left in working dir
errors during apply, please fix and refresh 12768.patch
```



---

Comment by davidloeffler created at 2012-04-07 10:52:38

Changing status from needs_review to needs_work.


---

Comment by roed created at 2012-04-08 03:38:37

Changing status from needs_work to needs_review.


---

Comment by roed created at 2012-04-08 03:38:37

Oops.  Forgot a dependency.


---

Comment by cremona created at 2012-04-10 13:57:00

Patch applies fine after the one from #12769.  Checking the code now.


---

Comment by cremona created at 2012-04-10 15:37:04

Review:  This patch implements three different things:  (1) A new class for isogeny classes of elliptic curves (currently only for curves over Q); (2) implementation of the new (March 2012) LMFDB labels for elliptic curves over Q, with utilities for comverting to and from Cremona labels; (3) better layouts for isogeny graphs of elliptic curves over Q.

I have been through the code in some detail and only found some minor things to fix, as in the reviewer's patch.  One of these was a typo causing doctest failure.  Nothing more than minor.  If David R is happy with these, I'll give the ticket a positive review.


---

Comment by roed created at 2012-04-10 20:01:44

The changes all look fine to me, but the fourth hunk for `ell_rational_field` in the review patch fails to apply.  I'll try to fix it later tonight, but if you get to it first go for it.


---

Comment by roed created at 2012-04-10 20:01:53

Changing status from needs_review to needs_work.


---

Comment by cremona created at 2012-04-10 21:43:53

My patch was based on 5.0.beta13, if that helps.  By the way, the reason I changed ell_generic to ell_rational_field was so that when testing a valid elliptic curve defined over a different field for membership of the isogenyclass one just gets False instead of an error as before;  but I forgot to add some doctests to illustrate.


---

Comment by cremona created at 2012-04-30 02:06:48

Apply after previous


---

Attachment

I have updated the review patch: it used to be that when asking for order='database' for a curve not in the database, this was caught but the error message output itself raised a confusing error (on trying to output %self).  Instead the error message now uses %self.E.  I added a doctest which illustrates this.

I give David's original patch a positive review modulo my own reviewer's patch, so if David (or anyone) thinks my patch is OK, please give the whole ticket a positive review.  I tested this on 5.0.beta14.


---

Comment by cremona created at 2012-04-30 02:10:08

Changing status from needs_work to needs_review.


---

Comment by roed created at 2012-06-08 19:43:00

Changing status from needs_review to positive_review.


---

Comment by roed created at 2012-06-08 19:43:00

John's changes look fine to me.


---

Comment by jhpalmieri created at 2012-06-30 18:49:40

Changing status from positive_review to needs_work.


---

Comment by jhpalmieri created at 2012-06-30 18:51:00

Changing status from needs_work to needs_review.


---

Attachment

Only the rebase patch needs to be reviewed.


---

Comment by vbraun created at 2012-06-30 20:13:53

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2012-06-30 20:13:53

Looks good to me!


---

Attachment


---

Comment by jhpalmieri created at 2012-06-30 20:17:42

Should I add a doctest for the deprecation? The 'v2' patch does that, so if you want to use that instead, change the ticket description accordingly.


---

Comment by cremona created at 2012-07-01 18:54:42

Replying to [comment:19 jdemeyer]:

Why not 5.2?


---

Comment by jdemeyer created at 2012-07-01 19:00:21

Because of the long chain of dependencies which might not all be merged in sage-5.2.  Maybe they will, but I can't guarantee.


---

Comment by jdemeyer created at 2012-08-01 12:10:42

Resolution: fixed


---

Comment by cremona created at 2013-10-28 09:45:47

I think it is time that the deparecation message introduced here is removed.


---

Comment by cremona created at 2014-01-18 17:12:27

Replying to [comment:24 cremona]:
> I think it is time that the deprecation message introduced here is removed.

See #15694.
