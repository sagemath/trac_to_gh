# Issue 22646: Implement Lie algebra (co)homology

archive/issues_022646.json:
```json
{
    "body": "CC:  darij bsalisbury1\n\nKeywords: lie algebras\n\nWe implement the Lie algebra (co)homology for finite dimensional Lie algebras by constructing the Chevalley-Eilenberg complex.\n\nIssue created by migration from https://trac.sagemath.org/ticket/22883\n\n",
    "created_at": "2017-04-27T04:29:32Z",
    "labels": [
        "algebra",
        "major",
        "enhancement"
    ],
    "title": "Implement Lie algebra (co)homology",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22646",
    "user": "tscrim"
}
```
CC:  darij bsalisbury1

Keywords: lie algebras

We implement the Lie algebra (co)homology for finite dimensional Lie algebras by constructing the Chevalley-Eilenberg complex.

Issue created by migration from https://trac.sagemath.org/ticket/22883





---

archive/issue_comments_315907.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-04-27T04:30:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22646#issuecomment-315907",
    "user": "tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_315908.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-04-27T04:30:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22646#issuecomment-315908",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_315909.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-07-08T20:08:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22646#issuecomment-315909",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_315910.json:
```json
{
    "body": "The doc of ChainComplex ( http://doc.sagemath.org/html/en/reference/homology/sage/homology/chain_complex.html ) says that the syntax you're invoking ChainComplex with (\"a list/tuple/iterable of the form [d0,d1,d2,...] where each di is a matrix\") only makes sense if degree is 1; but your degree is -1. Are you sure that this is legit? (I don't know ChainComplex well, so this is just a question.)\n\nThe doc for cohomology uses left g-modules, whereas you have defined the Chevalley-Eilenberg complex for right g-modules. Of course, g being a Lie algebra, there is a 1-to-1 correspondence between those, but signs may get messed up. This is not a problem when the module is trivial, but it's worth checking that we aren't making something that will be a pain to deprecate.\n\nAnother reference: 10.1.3--10.1.6 of Loday's Cyclic Homology. He uses the opposite signs, though. Convention differences?",
    "created_at": "2017-07-08T20:55:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22646#issuecomment-315910",
    "user": "darij"
}
```

The doc of ChainComplex ( http://doc.sagemath.org/html/en/reference/homology/sage/homology/chain_complex.html ) says that the syntax you're invoking ChainComplex with ("a list/tuple/iterable of the form [d0,d1,d2,...] where each di is a matrix") only makes sense if degree is 1; but your degree is -1. Are you sure that this is legit? (I don't know ChainComplex well, so this is just a question.)

The doc for cohomology uses left g-modules, whereas you have defined the Chevalley-Eilenberg complex for right g-modules. Of course, g being a Lie algebra, there is a 1-to-1 correspondence between those, but signs may get messed up. This is not a problem when the module is trivial, but it's worth checking that we aren't making something that will be a pain to deprecate.

Another reference: 10.1.3--10.1.6 of Loday's Cyclic Homology. He uses the opposite signs, though. Convention differences?



---

archive/issue_comments_315911.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-07-08T20:57:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22646#issuecomment-315911",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_315912.json:
```json
{
    "body": "The module case is waiting for a framework for Lie algebra modules, or do we have that already?\n\nApart from my previous comments, by the way, the patch is fine with me.",
    "created_at": "2017-07-08T20:59:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22646#issuecomment-315912",
    "user": "darij"
}
```

The module case is waiting for a framework for Lie algebra modules, or do we have that already?

Apart from my previous comments, by the way, the patch is fine with me.



---

archive/issue_comments_315913.json:
```json
{
    "body": "PS. Do you know of an example where the Betti numbers aren't symmetric around the middle? I'm a bit paranoid about the degree; such an example would help ensure that we aren't secretly computing the dual complex and getting our homology and cohomology mixed up...",
    "created_at": "2017-07-08T21:05:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22646#issuecomment-315913",
    "user": "darij"
}
```

PS. Do you know of an example where the Betti numbers aren't symmetric around the middle? I'm a bit paranoid about the degree; such an example would help ensure that we aren't secretly computing the dual complex and getting our homology and cohomology mixed up...



---

archive/issue_comments_315914.json:
```json
{
    "body": "Do not use .iteritems, please (for python3 compatibility).",
    "created_at": "2017-07-09T14:48:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22646#issuecomment-315914",
    "user": "chapoton"
}
```

Do not use .iteritems, please (for python3 compatibility).



---

archive/issue_comments_315915.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-07-10T15:19:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22646#issuecomment-315915",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_315916.json:
```json
{
    "body": "Replying to [comment:4 darij]:\n> The doc of ChainComplex ( http://doc.sagemath.org/html/en/reference/homology/sage/homology/chain_complex.html ) says that the syntax you're invoking ChainComplex with (\"a list/tuple/iterable of the form [d0,d1,d2,...] where each di is a matrix\") only makes sense if degree is 1; but your degree is -1. Are you sure that this is legit? (I don't know ChainComplex well, so this is just a question.)\n\nI am not doing that. `chain_data` is a `dict`.\n\n> The doc for cohomology uses left g-modules, whereas you have defined the Chevalley-Eilenberg complex for right g-modules. Of course, g being a Lie algebra, there is a 1-to-1 correspondence between those, but signs may get messed up. This is not a problem when the module is trivial, but it's worth checking that we aren't making something that will be a pain to deprecate.\n\nSince we do not currently support anything but the trivial module, this won't be a problem to change at a later point. However, there is a slight technical issue of left vs. right in that the *co*homology should be a left **g**-module, but the homology is a right **g**-module. This would be something that would eventually be taken care of when general coefficient modules are implemented.\n\nI added options to compute using sparse matrices (as I believe the matrices for the chain complex will generally be sparse) and to do the differential computation in parallel.\n\n> Another reference: 10.1.3--10.1.6 of Loday's Cyclic Homology. He uses the opposite signs, though. Convention differences?\n\nConvention difference. The differential can always be multiplied by any (invertible) scalar as `d(d(ax)) = d(a(dx)) = a d(d(x)) = 0` and scaling by a constant is homotopic to the identity map on chain complex (i.e., the resulting homology groups are isomorphic).",
    "created_at": "2017-07-10T15:37:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22646#issuecomment-315916",
    "user": "tscrim"
}
```

Replying to [comment:4 darij]:
> The doc of ChainComplex ( http://doc.sagemath.org/html/en/reference/homology/sage/homology/chain_complex.html ) says that the syntax you're invoking ChainComplex with ("a list/tuple/iterable of the form [d0,d1,d2,...] where each di is a matrix") only makes sense if degree is 1; but your degree is -1. Are you sure that this is legit? (I don't know ChainComplex well, so this is just a question.)

I am not doing that. `chain_data` is a `dict`.

> The doc for cohomology uses left g-modules, whereas you have defined the Chevalley-Eilenberg complex for right g-modules. Of course, g being a Lie algebra, there is a 1-to-1 correspondence between those, but signs may get messed up. This is not a problem when the module is trivial, but it's worth checking that we aren't making something that will be a pain to deprecate.

Since we do not currently support anything but the trivial module, this won't be a problem to change at a later point. However, there is a slight technical issue of left vs. right in that the *co*homology should be a left **g**-module, but the homology is a right **g**-module. This would be something that would eventually be taken care of when general coefficient modules are implemented.

I added options to compute using sparse matrices (as I believe the matrices for the chain complex will generally be sparse) and to do the differential computation in parallel.

> Another reference: 10.1.3--10.1.6 of Loday's Cyclic Homology. He uses the opposite signs, though. Convention differences?

Convention difference. The differential can always be multiplied by any (invertible) scalar as `d(d(ax)) = d(a(dx)) = a d(d(x)) = 0` and scaling by a constant is homotopic to the identity map on chain complex (i.e., the resulting homology groups are isomorphic).



---

archive/issue_comments_315917.json:
```json
{
    "body": "Replying to [comment:8 darij]:\n> PS. Do you know of an example where the Betti numbers aren't symmetric around the middle? I'm a bit paranoid about the degree; such an example would help ensure that we aren't secretly computing the dual complex and getting our homology and cohomology mixed up...\n\nI do not, but I will try to construct such an example.",
    "created_at": "2017-07-10T15:38:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22646#issuecomment-315917",
    "user": "tscrim"
}
```

Replying to [comment:8 darij]:
> PS. Do you know of an example where the Betti numbers aren't symmetric around the middle? I'm a bit paranoid about the degree; such an example would help ensure that we aren't secretly computing the dual complex and getting our homology and cohomology mixed up...

I do not, but I will try to construct such an example.



---

archive/issue_comments_315918.json:
```json
{
    "body": "Replying to [comment:9 chapoton]:\n> Do not use .iteritems, please (for python3 compatibility).\n\nThat is for a `vector` instance (and not a `dict`), so it is a well-defined method (for now).",
    "created_at": "2017-07-10T15:38:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22646#issuecomment-315918",
    "user": "tscrim"
}
```

Replying to [comment:9 chapoton]:
> Do not use .iteritems, please (for python3 compatibility).

That is for a `vector` instance (and not a `dict`), so it is a well-defined method (for now).



---

archive/issue_comments_315919.json:
```json
{
    "body": "one failing doctest, see bot",
    "created_at": "2017-08-23T06:04:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22646#issuecomment-315919",
    "user": "chapoton"
}
```

one failing doctest, see bot



---

archive/issue_comments_315920.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-23T14:43:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22646#issuecomment-315920",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_315921.json:
```json
{
    "body": "Green patchbot.\n\n`@`darij I could not construct an example that was not symmetric. However, I think we are okay. The left/right difference comes from the fact that we should be taking a dual module, but we don't see that for the trivial representation. So the care will have to be taken when that implementation is done, but I don't think we have to (or even can) worry about that here.",
    "created_at": "2017-08-28T05:01:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22646#issuecomment-315921",
    "user": "tscrim"
}
```

Green patchbot.

`@`darij I could not construct an example that was not symmetric. However, I think we are okay. The left/right difference comes from the fact that we should be taking a dual module, but we don't see that for the trivial representation. So the care will have to be taken when that implementation is done, but I don't think we have to (or even can) worry about that here.



---

archive/issue_comments_315922.json:
```json
{
    "body": "From https://mathoverflow.net/questions/184590/poincare-duality-for-cohomology-of-lie-algebras, a 2-dimensional Lie algebra for which the integral betti numbers do not satisfy `\\beta_k = \\beta_{2-k}`:\n\n```\nsage: d = {('x', 'y'): {'y': 2}}\nsage: L.<x,y> = LieAlgebra(ZZ, d)\nsage: L.cohomology()\n{0: Z, 1: Z, 2: C2}\n```\n",
    "created_at": "2017-08-28T05:16:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22646#issuecomment-315922",
    "user": "jhpalmieri"
}
```

From https://mathoverflow.net/questions/184590/poincare-duality-for-cohomology-of-lie-algebras, a 2-dimensional Lie algebra for which the integral betti numbers do not satisfy `\beta_k = \beta_{2-k}`:

```
sage: d = {('x', 'y'): {'y': 2}}
sage: L.<x,y> = LieAlgebra(ZZ, d)
sage: L.cohomology()
{0: Z, 1: Z, 2: C2}
```




---

archive/issue_comments_315923.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-29T05:12:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22646#issuecomment-315923",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_315924.json:
```json
{
    "body": "I've added John's example from comment:18 (and its homology).",
    "created_at": "2018-05-29T05:13:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22646#issuecomment-315924",
    "user": "tscrim"
}
```

I've added John's example from comment:18 (and its homology).



---

archive/issue_comments_315925.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-29T20:45:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22646#issuecomment-315925",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_315926.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-05-29T20:45:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22646#issuecomment-315926",
    "user": "bsalisbury1"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_315927.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-05-31T17:25:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22646",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22646#issuecomment-315927",
    "user": "vbraun"
}
```

Resolution: fixed
