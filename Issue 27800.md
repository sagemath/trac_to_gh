# Issue 27800: topcom should not set itself up as default "engine".

Issue created by migration from https://trac.sagemath.org/ticket/28037

Original creator: dimpase

Original creation time: 2019-06-21 10:10:32

CC:  slabbe vbraun mkoeppe




---

Comment by slabbe created at 2019-06-24 08:26:12

There is no `sleep` call in the file `point_configuration.py`. I am wondering in which line of which file are the `time.sleep` calls being done?


---

Comment by dimpase created at 2019-06-24 08:40:10

Replying to [comment:4 slabbe]:
> There is no `sleep` call in the file `point_configuration.py`. I am wondering in which line of which file are the `time.sleep` calls being done?

they come from the topcom's pexpect interface.

```
pexpect-4.6.0/pexpect $ grep -R "time.sleep" .
./pty_spawn.py:            time.sleep(0.1)
./pty_spawn.py:            time.sleep(self.delaybeforesend)
./pty_spawn.py:            time.sleep(self.delayafterterminate)
./pty_spawn.py:            time.sleep(self.delayafterterminate)
./pty_spawn.py:            time.sleep(self.delayafterterminate)
./pty_spawn.py:                time.sleep(self.delayafterterminate)
./pty_spawn.py:            time.sleep(self.delayafterterminate)
./spawnbase.py:        # Set this to None to skip the time.sleep() call completely.
./spawnbase.py:        # Set this to None to skip the time.sleep() call completely: that
./expect.py:                    time.sleep(self.spawn.delayafterread)
./pxssh.py:        time.sleep(0.1)
```



---

Comment by slabbe created at 2019-06-25 14:08:07

This removes TOPCOM from being the default engine for triangulations. While this fixes the issue, maybe there exist examples where using TOPCOM as default engine would be desirable?
----
New commits:


---

Comment by dimpase created at 2019-06-26 23:47:00

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2019-06-26 23:55:09

Replying to [comment:6 slabbe]:
> This removes TOPCOM from being the default engine for triangulations. While this fixes the issue, maybe there exist examples where using TOPCOM as default engine would be desirable?

No objections to changing the default engine as in the proposed patch.

For computing one triangulation, if I remember correctly, there's nothing special in TOPCOM; it just computes a regular triangulation via cddlib. Using normaliz for computing a triangulation is probably faster.

For listing all triangulations, TOPCOM is probably the best choice for nontrivial examples, but the interfacing should be improved.


---

Comment by dimpase created at 2019-06-27 07:05:24

Changing status from needs_review to positive_review.


---

Comment by dimpase created at 2019-06-27 07:05:24

OK, let's get it in.


---

Comment by dimpase created at 2019-06-27 07:07:31

by the way, the bot says

```
+src/sage/geometry/triangulation/point_configuration.py:1919: undefined name 'ker'
+src/sage/geometry/triangulation/point_configuration.py:1923: local variable 'ker' is assigned to but never used
```

does this make sense to fix?


---

Comment by git created at 2019-06-27 08:52:08

Changing status from positive_review to needs_review.


---

Comment by git created at 2019-06-27 08:52:08

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by slabbe created at 2019-06-27 08:55:02

I updated the doc according to the new default behavior.

I need to catch a plane today and will be unavailable during the next week. I had no time now to fix the ker thing (I don't understand how this part of code can work as the `ker` is indeed not defined before being used). So I let you do the follow up if needed.


---

Comment by dimpase created at 2019-06-27 09:19:35

Replying to [comment:12 slabbe]:
> I updated the doc according to the new default behavior.
> 
> I need to catch a plane today and will be unavailable during the next week. I had no time now to fix the ker thing (I don't understand how this part of code can work as the `ker` is indeed not defined before being used). So I let you do the follow up if needed.

I think it's actually OK, as on the 1st run of the loop the condition where `ker` is used is never reached (as `edges == []` at this moment, so `if edges ...` stops at evaluating `edges` and does not see `ker`); and then `ker` is set, and all is kosher.


---

Comment by dimpase created at 2019-06-27 09:21:01

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2019-06-28 04:29:29

Resolution: fixed
