# Issue 22540: Animate in Jupyter notebook

Issue created by migration from Trac.

Original creator: mforets

Original creation time: 2017-04-07 12:48:11

CC:  kcrisman

Keywords: animate jupyter plot

The animate command allows to animate a list of frames by creating a `sage.plot.animate.Animation` object.

In a Jupyter notebook environment, the code below returns `Animation with 20 frames`, while it should have a similar behaviour as with the sage notebook (displaying a gif).


```
f(x) = 5*x - x^2/8 + x^3/1200
df(x) = diff(f(x),x)
max = 100
p = plot(f(x),x,0,max)
lblp = text("$y = " + latex(f(x)) + "$",[40,100],fontsize=14)
lbldp = text("$y' = " + latex(df(x)) + "$",[40,80],fontsize=14,rgbcolor='#006000')
ga = []
for argx in srange(0,max,5):
    dp = plot(f(argx) + (df(argx)*(x-argx)),x,0,max,color="#006000")
    xp = point((argx,f(argx)),rgbcolor='#800000')    
    ga.append(p+lblp+lbldp+dp+xp)
animate(ga,ymin=0,ymax=max,axes_labels=['x','y'],fontsize=12,figsize=(4,3)).show(delay=1)
```


Reported in [Animation doesn't work](https://ask.sagemath.org/question/37209/animation-doesnt-work/) by cybervigilante.

Probably intersecting #16753 and #17783.


---

Comment by jdemeyer created at 2017-06-23 14:01:25

Changing component from graphics to notebook.


---

Comment by jdemeyer created at 2017-06-23 14:01:25

Changing priority from major to critical.


---

Comment by vbraun created at 2017-06-23 20:21:09

Last time I checked jupyter didn't support gif (hence no animated gif either).


---

Comment by kcrisman created at 2017-06-24 00:47:53

But see also [this post](http://louistiao.me/posts/notebooks/embedding-matplotlib-animations-in-jupyter-notebooks/) about mpl html5 animations.  Various [other](https://eliezersilva.blog/2015/12/26/embedding-gif-animations-in-ipython-notebook/) [workarounds](https://www.reddit.com/r/IPython/comments/50pnvq/view_gif_in_ipython_notebook_on_github/) of varying quality are out there ... and there is even a [request](https://github.com/ipython/ipython/issues/10045).


---

Comment by vbraun created at 2017-06-25 11:13:25

The patch adds GIF support to the jupyter notebook.

Actual html5 video would be better, but also requires some encoder like ffmpeg. Whereas I think we can generate animated gif without external dependencies.

Of course you don't have to call `animate(...).show()`, the displayhook already renders the animation if it can. Really its our fault for having that confusingly-named `show()` method.
----
New commits:


---

Comment by vbraun created at 2017-06-25 11:22:25

Changing status from new to needs_review.


---

Comment by vbraun created at 2017-06-25 11:23:12

Changing priority from critical to blocker.


---

Comment by mforets created at 2017-06-25 20:36:09

Changing status from needs_review to positive_review.


---

Comment by mforets created at 2017-06-25 20:36:09

looks good to me.

PS: in my (Mac osx) machine, `animate` produces ugly yellowish axes, see [screenshot](https://raw.githubusercontent.com/mforets/escritoire/master/plot/animate/Screen%20Shot%202017-06-25%20at%2022.03.47.png) and [gif](https://raw.githubusercontent.com/mforets/escritoire/master/plot/animate/a.gif). but i think this has nothing to do with the jupyter notebook itself..


---

Comment by vbraun created at 2017-06-26 21:24:43

Resolution: fixed
