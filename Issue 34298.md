# Issue 34298: Segfault when floor dividing in infinite polynomial ring

Issue created by migration from https://trac.sagemath.org/ticket/34535

Original creator: tkarn

Original creation time: 2022-09-15 04:19:57

CC:  tscrim tkarn

Keywords: gsoc2022 infinite-polynomial divide


```
sage: R.<z> = InfinitePolynomialRing(QQ)
sage: (z[4] + z[5])//(z[4] + z[5])
------------------------------------------------------------------------
(no backtrace available)
------------------------------------------------------------------------
Unhandled SIGSEGV: A segmentation fault occurred.
This probably occurred because a *compiled* module has a bug
in it and is not properly wrapped with sig_on(), sig_off().
Python will now terminate.
------------------------------------------------------------------------
/Users/trevorkarn/Applications/sage/src/bin/sage-python: line 2: 49123 Segmentation fault: 11  sage -python "$@"
```



---

Comment by tkarn created at 2022-09-15 04:52:35

New commits:


---

Comment by tkarn created at 2022-09-15 04:52:35

Changing status from new to needs_review.


---

Comment by tscrim created at 2022-09-15 06:54:28

Do we need to implement checks for when the polynomials might not be in the same ring? Cf. `_add_`.


---

Comment by git created at 2022-09-15 22:53:45

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tkarn created at 2022-09-15 22:54:09

Updated to be modeled after `_add_`.


---

Comment by git created at 2022-09-17 13:49:34

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tkarn created at 2022-09-17 13:50:27

Ok things should now be good.


---

Comment by tscrim created at 2022-09-18 00:04:09

Green bot => positive review.


---

Comment by tkarn created at 2022-09-19 12:40:46

There is one failure on the bot

```
**********************************************************************
File "src/sage/schemes/toric/sheaf/klyachko.py", line 951, in sage.schemes.toric.sheaf.klyachko.KlyachkoBundle_class.random_deformation
Failed example:
    Vtilde.cohomology(dim=True, weight=(0,))
Expected:
    (1, 0)
Got:
    (0, 0)
**********************************************************************
```

Which seems unrelated to this ticket.


---

Comment by tscrim created at 2022-09-19 13:56:44

Indeed.


---

Comment by tscrim created at 2022-09-19 13:56:44

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2022-09-25 16:34:02

Resolution: fixed
