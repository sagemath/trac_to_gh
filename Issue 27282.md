# Issue 27282: Update `src/ext/doctest/python3-known-passing.txt`

archive/issues_027282.json:
```json
{
    "body": "Update the list of files whose doctests should pass with Python 3.\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/27519\n\n",
    "created_at": "2019-03-20T20:45:09Z",
    "labels": [
        "PLEASE CHANGE",
        "critical",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.8",
    "title": "Update `src/ext/doctest/python3-known-passing.txt`",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27282",
    "user": "jhpalmieri"
}
```
Update the list of files whose doctests should pass with Python 3.


Issue created by migration from https://trac.sagemath.org/ticket/27519





---

archive/issue_comments_384607.json:
```json
{
    "body": "I'm also tempted to make this change:\n\n```diff\ndiff --git a/Makefile b/Makefile\nindex cb1e291313..7628ad7855 100644\n--- a/Makefile\n+++ b/Makefile\n@@ -143,7 +143,7 @@ fast-rebuild-clean: misc-clean bdist-clean\n \n TESTALL = ./sage -t --all\n PTESTALL = ./sage -t -p --all\n-PTEST_PYTHON3 = cat src/ext/doctest/python3-known-passing.txt | xargs ./sage -t --long -p\n+PTEST_PYTHON3 = sed '/^\\#.*$$/d' src/ext/doctest/python3-known-passing.txt | xargs ./sage -t --long -p\n \n # Flags for ./sage -t --all.\n # By default, include all tests marked 'dochtml' -- see\ndiff --git a/src/ext/doctest/python3-known-passing.txt b/src/ext/doctest/python3-known-passing.txt\nindex 0b70f229f0..99412b844e 100644\n--- a/src/ext/doctest/python3-known-passing.txt\n+++ b/src/ext/doctest/python3-known-passing.txt\n@@ -1,3 +1,7 @@\n+# Each line starting with '#' is a comment.\n+# Each other line should list a directory in which doctests are known\n+# to pass with Python 3.\n+#\n src/sage/algebras/\n src/sage/arith/\n src/sage/calculus/\n```\n\nComments? Good idea or bad? Here or on another ticket?\n----\nNew commits:",
    "created_at": "2019-03-20T21:17:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27282#issuecomment-384607",
    "user": "jhpalmieri"
}
```

I'm also tempted to make this change:

```diff
diff --git a/Makefile b/Makefile
index cb1e291313..7628ad7855 100644
--- a/Makefile
+++ b/Makefile
@@ -143,7 +143,7 @@ fast-rebuild-clean: misc-clean bdist-clean
 
 TESTALL = ./sage -t --all
 PTESTALL = ./sage -t -p --all
-PTEST_PYTHON3 = cat src/ext/doctest/python3-known-passing.txt | xargs ./sage -t --long -p
+PTEST_PYTHON3 = sed '/^\#.*$$/d' src/ext/doctest/python3-known-passing.txt | xargs ./sage -t --long -p
 
 # Flags for ./sage -t --all.
 # By default, include all tests marked 'dochtml' -- see
diff --git a/src/ext/doctest/python3-known-passing.txt b/src/ext/doctest/python3-known-passing.txt
index 0b70f229f0..99412b844e 100644
--- a/src/ext/doctest/python3-known-passing.txt
+++ b/src/ext/doctest/python3-known-passing.txt
@@ -1,3 +1,7 @@
+# Each line starting with '#' is a comment.
+# Each other line should list a directory in which doctests are known
+# to pass with Python 3.
+#
 src/sage/algebras/
 src/sage/arith/
 src/sage/calculus/
```

Comments? Good idea or bad? Here or on another ticket?
----
New commits:



---

archive/issue_comments_384608.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-03-20T21:19:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27282#issuecomment-384608",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_384609.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-03-20T21:20:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27282#issuecomment-384609",
    "user": "jhpalmieri"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_384610.json:
```json
{
    "body": "I would really like to focus our Python3 effort on Python 3.7 (#25680) first.\n\nIf it weren't for the previous ticket updating `python3-known-passing.txt`, #25680 would have been merged already. At some point, everything worked with 3.7 but because the tests are such a moving target, stuff got broken again.\n\nFor that reason, I'm personally -1 on this ticket.",
    "created_at": "2019-03-21T01:22:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27282#issuecomment-384610",
    "user": "jdemeyer"
}
```

I would really like to focus our Python3 effort on Python 3.7 (#25680) first.

If it weren't for the previous ticket updating `python3-known-passing.txt`, #25680 would have been merged already. At some point, everything worked with 3.7 but because the tests are such a moving target, stuff got broken again.

For that reason, I'm personally -1 on this ticket.



---

archive/issue_comments_384611.json:
```json
{
    "body": "The file hasn't been modified in a month, and it is important to try to catch regressions. I think upgrading once per release is not too often. Did you never want to modify this file? What's your alternative?\n\nWhat is left to be done on #25680, anyway?",
    "created_at": "2019-03-21T03:58:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27282#issuecomment-384611",
    "user": "jhpalmieri"
}
```

The file hasn't been modified in a month, and it is important to try to catch regressions. I think upgrading once per release is not too often. Did you never want to modify this file? What's your alternative?

What is left to be done on #25680, anyway?



---

archive/issue_comments_384612.json:
```json
{
    "body": "Replying to [comment:6 jhpalmieri]:\n> Did you never want to modify this file? What's your alternative?\n\nMy suggestion is to first merge #25680.",
    "created_at": "2019-03-21T06:58:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27282#issuecomment-384612",
    "user": "jdemeyer"
}
```

Replying to [comment:6 jhpalmieri]:
> Did you never want to modify this file? What's your alternative?

My suggestion is to first merge #25680.



---

archive/issue_comments_384613.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to python3.",
    "created_at": "2019-03-21T15:40:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27282#issuecomment-384613",
    "user": "jdemeyer"
}
```

Changing component from PLEASE CHANGE to python3.



---

archive/issue_comments_384614.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-03-21T15:47:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27282#issuecomment-384614",
    "user": "jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_384615.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-03-31T22:43:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27282#issuecomment-384615",
    "user": "vbraun"
}
```

Resolution: fixed
