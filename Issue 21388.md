# Issue 21388: Starnge linking order for omalloc

archive/issues_021388.json:
```json
{
    "body": "This is a follow up to #17254 which upgraded to singular 4:\n\n* strange linking order (omalloc comes before singular!)\n\nIssue created by migration from https://trac.sagemath.org/ticket/21625\n\n",
    "created_at": "2016-10-03T10:05:10Z",
    "labels": [
        "packages: standard",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.5",
    "title": "Starnge linking order for omalloc",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21388",
    "user": "jpflori"
}
```
This is a follow up to #17254 which upgraded to singular 4:

* strange linking order (omalloc comes before singular!)

Issue created by migration from https://trac.sagemath.org/ticket/21625





---

archive/issue_comments_296962.json:
```json
{
    "body": "Replying to [ticket:21625 jpflori]:\n> This is a follow up to #17254 which upgraded to singular 4:\n> \n> * strange linking order (omalloc comes before singular!) \n\nYou mean during the build of Singular itself or Sage modules using Singular?",
    "created_at": "2016-10-21T08:09:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-296962",
    "user": "jdemeyer"
}
```

Replying to [ticket:21625 jpflori]:
> This is a follow up to #17254 which upgraded to singular 4:
> 
> * strange linking order (omalloc comes before singular!) 

You mean during the build of Singular itself or Sage modules using Singular?



---

archive/issue_comments_296963.json:
```json
{
    "body": "See #17254#comment:510 :\n\"\"\"\nDuring linking some Sage files I see -lomalloc -lSingular -lpolys -lfactory -lresources which does not look that right.\n\"\"\"",
    "created_at": "2016-10-21T08:12:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-296963",
    "user": "jpflori"
}
```

See #17254#comment:510 :
"""
During linking some Sage files I see -lomalloc -lSingular -lpolys -lfactory -lresources which does not look that right.
"""



---

archive/issue_comments_296964.json:
```json
{
    "body": "That's an annoying defect that I have noticed before in the python interface to pkg-config. The libraries are put in a set and of course it is not preserving the order. It was already evident when using ATLAS for blas/lapack.\n\n```\n$ pkg-config --libs Singular\n-lSingular -ldl -lpolys -lflint -lmpfr -lntl -lgmp -ldl -lfactory -lflint -lmpfr -lntl -lgmp -lomalloc -lresources \n```\n\nbut\n\n```\n$ python\nPython 2.7.10 (default, Jun 12 2016, 19:30:46) \n[GCC 5.3.0] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import pkgconfig\n>>> singular_pc = pkgconfig.parse('Singular')\n>>> list(singular_pc['libraries'])\n[u'omalloc', u'dl', u'Singular', u'polys', u'factory', u'flint', u'ntl', u'gmp', u'resources', u'mpfr']\n>>> singular_pc['libraries']\nset([u'omalloc', u'dl', u'Singular', u'polys', u'factory', u'flint', u'ntl', u'gmp', u'resources', u'mpfr'])\n```\n\nwhich is what you are seeing. If you still have a sage with ATLAS somewhere look at what you get for lapack. This needs to be fixed upstream so that something preserving the order is used instead of a set.",
    "created_at": "2016-10-23T08:23:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-296964",
    "user": "fbissey"
}
```

That's an annoying defect that I have noticed before in the python interface to pkg-config. The libraries are put in a set and of course it is not preserving the order. It was already evident when using ATLAS for blas/lapack.

```
$ pkg-config --libs Singular
-lSingular -ldl -lpolys -lflint -lmpfr -lntl -lgmp -ldl -lfactory -lflint -lmpfr -lntl -lgmp -lomalloc -lresources 
```

but

```
$ python
Python 2.7.10 (default, Jun 12 2016, 19:30:46) 
[GCC 5.3.0] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import pkgconfig
>>> singular_pc = pkgconfig.parse('Singular')
>>> list(singular_pc['libraries'])
[u'omalloc', u'dl', u'Singular', u'polys', u'factory', u'flint', u'ntl', u'gmp', u'resources', u'mpfr']
>>> singular_pc['libraries']
set([u'omalloc', u'dl', u'Singular', u'polys', u'factory', u'flint', u'ntl', u'gmp', u'resources', u'mpfr'])
```

which is what you are seeing. If you still have a sage with ATLAS somewhere look at what you get for lapack. This needs to be fixed upstream so that something preserving the order is used instead of a set.



---

archive/issue_comments_296965.json:
```json
{
    "body": "Is this upstream:\n* https://github.com/matze/pkgconfig\n?\n\nIt does not look very active, last release was three years ago.",
    "created_at": "2016-10-25T12:25:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-296965",
    "user": "jpflori"
}
```

Is this upstream:
* https://github.com/matze/pkgconfig
?

It does not look very active, last release was three years ago.



---

archive/issue_comments_296966.json:
```json
{
    "body": "Debian also thinks that is the homepage, yes.",
    "created_at": "2016-11-12T18:36:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-296966",
    "user": "infinity0"
}
```

Debian also thinks that is the homepage, yes.



---

archive/issue_comments_296967.json:
```json
{
    "body": "Well `pkg-config` is relatively stable. The nice thing about the set is of course that you don't have repeated elements in it. Is there an \"ordered set\" type in python?",
    "created_at": "2016-11-12T18:55:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-296967",
    "user": "fbissey"
}
```

Well `pkg-config` is relatively stable. The nice thing about the set is of course that you don't have repeated elements in it. Is there an "ordered set" type in python?



---

archive/issue_comments_296968.json:
```json
{
    "body": "After a bit of googling I think upstream should either depend from an \"ordered set\" package or switch to a dictionary of list instead of a dictionary of set and then remove duplication.",
    "created_at": "2016-11-12T20:08:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-296968",
    "user": "fbissey"
}
```

After a bit of googling I think upstream should either depend from an "ordered set" package or switch to a dictionary of list instead of a dictionary of set and then remove duplication.



---

archive/issue_comments_296969.json:
```json
{
    "body": "I have been working on making `pkgconfig` use lists instead of sets and then doing some deduplication. \n\nThere are two issues with deduplication - which was originally achieved by using sets:\n* Is it really necessary, that makes longer lines but `pkg-config` doesn't do it in the first place. Which brings us to second issue\n* Currently the first instance of everything is kept. Not a problem for macros, may be for include directories and library directories. Definitely a potential problem for libraries.\n\nI don't think deduplication - potentially from the end of the list rather than the beginning of it, is worth it.\n\nOpinion?",
    "created_at": "2016-11-14T01:38:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-296969",
    "user": "fbissey"
}
```

I have been working on making `pkgconfig` use lists instead of sets and then doing some deduplication. 

There are two issues with deduplication - which was originally achieved by using sets:
* Is it really necessary, that makes longer lines but `pkg-config` doesn't do it in the first place. Which brings us to second issue
* Currently the first instance of everything is kept. Not a problem for macros, may be for include directories and library directories. Definitely a potential problem for libraries.

I don't think deduplication - potentially from the end of the list rather than the beginning of it, is worth it.

Opinion?



---

archive/issue_comments_296970.json:
```json
{
    "body": "I agree with Fran\u00e7ois: we shouldn't be smarter than necessary. There is nothing wrong with longer command lines (as long as it's not excessive).",
    "created_at": "2016-11-14T07:04:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-296970",
    "user": "jdemeyer"
}
```

I agree with FranÃ§ois: we shouldn't be smarter than necessary. There is nothing wrong with longer command lines (as long as it's not excessive).



---

archive/issue_comments_296971.json:
```json
{
    "body": "OK, I definitely think it is not worth the bother so I'll probably go with this branch for my upstream pull request https://github.com/kiwifb/pkgconfig/tree/listify. If anyone wants to comment, now is the time.",
    "created_at": "2016-11-14T20:54:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-296971",
    "user": "fbissey"
}
```

OK, I definitely think it is not worth the bother so I'll probably go with this branch for my upstream pull request https://github.com/kiwifb/pkgconfig/tree/listify. If anyone wants to comment, now is the time.



---

archive/issue_comments_296972.json:
```json
{
    "body": "Upstream accepted my change, hopefully that will come with a new release soon. I did some experiments, while we will be able to simplify sage's code to populate the various variables `*_{libs,library_dirs,include_dir}` it should work out of the box without modification (haven't checked cflags actually).",
    "created_at": "2016-11-16T10:28:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-296972",
    "user": "fbissey"
}
```

Upstream accepted my change, hopefully that will come with a new release soon. I did some experiments, while we will be able to simplify sage's code to populate the various variables `*_{libs,library_dirs,include_dir}` it should work out of the box without modification (haven't checked cflags actually).



---

archive/issue_comments_296973.json:
```json
{
    "body": "Not sure when upstream will cut a release, should we patch in the meantime?",
    "created_at": "2016-11-16T20:18:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-296973",
    "user": "fbissey"
}
```

Not sure when upstream will cut a release, should we patch in the meantime?



---

archive/issue_comments_296974.json:
```json
{
    "body": "I say we patch.",
    "created_at": "2016-11-17T13:44:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-296974",
    "user": "jpflori"
}
```

I say we patch.



---

archive/issue_comments_296975.json:
```json
{
    "body": "Working on this. Some adjustments are needed in `modules_list.py`.",
    "created_at": "2016-11-22T22:16:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-296975",
    "user": "fbissey"
}
```

Working on this. Some adjustments are needed in `modules_list.py`.



---

archive/issue_comments_296976.json:
```json
{
    "body": "Now ready for review.\n----\nNew commits:",
    "created_at": "2016-11-22T23:51:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-296976",
    "user": "fbissey"
}
```

Now ready for review.
----
New commits:



---

archive/issue_comments_296977.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-11-22T23:51:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-296977",
    "user": "fbissey"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_296978.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2016-11-23T07:11:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-296978",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_296979.json:
```json
{
    "body": "For reference, please add a link to the upstream ticket in the patch file and in the ticket description.",
    "created_at": "2016-11-23T07:11:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-296979",
    "user": "jdemeyer"
}
```

For reference, please add a link to the upstream ticket in the patch file and in the ticket description.



---

archive/issue_comments_296980.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-24T20:44:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-296980",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_296981.json:
```json
{
    "body": "Hope it is satisfactory.",
    "created_at": "2016-11-24T20:44:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-296981",
    "user": "fbissey"
}
```

Hope it is satisfactory.



---

archive/issue_comments_296982.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2016-11-24T20:44:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-296982",
    "user": "fbissey"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_296983.json:
```json
{
    "body": "Would it make sense to bump the Singular version to force a rebuild with the new `pkgconfig`?",
    "created_at": "2016-11-25T06:06:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-296983",
    "user": "jdemeyer"
}
```

Would it make sense to bump the Singular version to force a rebuild with the new `pkgconfig`?



---

archive/issue_comments_296984.json:
```json
{
    "body": "I guess so, of course we need to bump `singular` one way or another before 7.5 is released. But I can easily add a commit here and have the singular ticket depend on it.",
    "created_at": "2016-11-25T06:32:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-296984",
    "user": "fbissey"
}
```

I guess so, of course we need to bump `singular` one way or another before 7.5 is released. But I can easily add a commit here and have the singular ticket depend on it.



---

archive/issue_comments_296985.json:
```json
{
    "body": "Replying to [comment:22 fbissey]:\n> I guess so, of course we need to bump `singular` one way or another before 7.5 is released. But I can easily add a commit here and have the singular ticket depend on it.\n\nOn second thought, the problem is really in `pkgconfig` (the Python package) which simply reads the system `.pc` files. So there is no need to regenerate the `.pc` files. So no further action is needed I guess.\n\nI am now going to do a complete build from scratch with this ticket and see if it works...",
    "created_at": "2016-11-25T09:48:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-296985",
    "user": "jdemeyer"
}
```

Replying to [comment:22 fbissey]:
> I guess so, of course we need to bump `singular` one way or another before 7.5 is released. But I can easily add a commit here and have the singular ticket depend on it.

On second thought, the problem is really in `pkgconfig` (the Python package) which simply reads the system `.pc` files. So there is no need to regenerate the `.pc` files. So no further action is needed I guess.

I am now going to do a complete build from scratch with this ticket and see if it works...



---

archive/issue_comments_296986.json:
```json
{
    "body": "This seems to break building scipy, log attached.",
    "created_at": "2016-11-26T09:13:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-296986",
    "user": "jdemeyer"
}
```

This seems to break building scipy, log attached.



---

archive/issue_comments_296987.json:
```json
{
    "body": "Attachment [scipy-0.17.1.p0.log](tarball://root/attachments/some-uuid/ticket21625/scipy-0.17.1.p0.log) by jdemeyer created at 2016-11-26 09:14:29\n\nLog of failed scipy build",
    "created_at": "2016-11-26T09:14:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-296987",
    "user": "jdemeyer"
}
```

Attachment [scipy-0.17.1.p0.log](tarball://root/attachments/some-uuid/ticket21625/scipy-0.17.1.p0.log) by jdemeyer created at 2016-11-26 09:14:29

Log of failed scipy build



---

archive/issue_comments_296988.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-11-26T09:14:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-296988",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_296989.json:
```json
{
    "body": "Hum, I can reproduce it. It is triggered by the `site.cfg` generated for `numpy` (installed at `local/lib/python2.7/site-packages/numpy/distutils/site.cfg`). There is now a repetition of `openblas` for `blas_libs` and that seems to be the issue strangely enough (it should be able to take more than one library).",
    "created_at": "2016-11-26T09:38:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-296989",
    "user": "fbissey"
}
```

Hum, I can reproduce it. It is triggered by the `site.cfg` generated for `numpy` (installed at `local/lib/python2.7/site-packages/numpy/distutils/site.cfg`). There is now a repetition of `openblas` for `blas_libs` and that seems to be the issue strangely enough (it should be able to take more than one library).



---

archive/issue_comments_296990.json:
```json
{
    "body": "Ok `pkgconfig` (python) does another thing that's weird compared to `pkg-config`. I can do this\n\n```\n(sage-sh) fbissey@QCD-nzi3:sage$ pkg-config --libs blas cblas\n-L/home/fbissey/sandbox/git-fork/sage/local/lib -lopenblas \n```\n\nbut `pkgconfig` (python) will do two calls to `pkg-config` and add them together. Of course with sets that wasn't visible. In any case we should be able to survive with just `blas` in `numpy`'s `site.cfg`. I am not sure why Gentoo insists on both - possibly historical reasons.",
    "created_at": "2016-11-26T09:51:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-296990",
    "user": "fbissey"
}
```

Ok `pkgconfig` (python) does another thing that's weird compared to `pkg-config`. I can do this

```
(sage-sh) fbissey@QCD-nzi3:sage$ pkg-config --libs blas cblas
-L/home/fbissey/sandbox/git-fork/sage/local/lib -lopenblas 
```

but `pkgconfig` (python) will do two calls to `pkg-config` and add them together. Of course with sets that wasn't visible. In any case we should be able to survive with just `blas` in `numpy`'s `site.cfg`. I am not sure why Gentoo insists on both - possibly historical reasons.



---

archive/issue_comments_296991.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-26T09:57:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-296991",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_296992.json:
```json
{
    "body": "You'll need to rebuild `numpy` before `scipy` for the fix to work.",
    "created_at": "2016-11-26T09:59:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-296992",
    "user": "fbissey"
}
```

You'll need to rebuild `numpy` before `scipy` for the fix to work.



---

archive/issue_comments_296993.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-11-26T09:59:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-296993",
    "user": "fbissey"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_296994.json:
```json
{
    "body": "I don't really like that fix. It should not be a problem to have `-lopenblas -lopenblas` in the libraries.",
    "created_at": "2016-11-26T11:00:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-296994",
    "user": "jdemeyer"
}
```

I don't really like that fix. It should not be a problem to have `-lopenblas -lopenblas` in the libraries.



---

archive/issue_comments_296995.json:
```json
{
    "body": "I would have to dig inside `numpy`. That's where the problem is, really. But it could need a mirror fix in `scipy`. I think it would be better to go back to `pkgconfig`and add a patch to make its output more consistent, both internally and with `pkg-config`. That wouldn't do anything for `numpy`/`scipy` setup problem of course.",
    "created_at": "2016-11-26T19:11:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-296995",
    "user": "fbissey"
}
```

I would have to dig inside `numpy`. That's where the problem is, really. But it could need a mirror fix in `scipy`. I think it would be better to go back to `pkgconfig`and add a patch to make its output more consistent, both internally and with `pkg-config`. That wouldn't do anything for `numpy`/`scipy` setup problem of course.



---

archive/issue_comments_296996.json:
```json
{
    "body": "Please bump the numpy version number since the change you make is non-trivial.",
    "created_at": "2016-11-26T20:13:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-296996",
    "user": "jdemeyer"
}
```

Please bump the numpy version number since the change you make is non-trivial.



---

archive/issue_comments_296997.json:
```json
{
    "body": "Was thinking about that. I am not satisfied with the branch as it is anyway. I will hammer some more on `pkgconfig` side with another pull upstream as soon as I can. I'll probably revert my last commit but even so it is probably best if `numpy` is bumped as well.",
    "created_at": "2016-11-26T20:16:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-296997",
    "user": "fbissey"
}
```

Was thinking about that. I am not satisfied with the branch as it is anyway. I will hammer some more on `pkgconfig` side with another pull upstream as soon as I can. I'll probably revert my last commit but even so it is probably best if `numpy` is bumped as well.



---

archive/issue_comments_296998.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-11-26T20:34:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-296998",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_296999.json:
```json
{
    "body": "If you cannot immediately fix the real issue, it's OK for me to merge this hack as-is.\n\nI'm setting it back to needs_work because you still want to work on it.",
    "created_at": "2016-11-26T20:34:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-296999",
    "user": "jdemeyer"
}
```

If you cannot immediately fix the real issue, it's OK for me to merge this hack as-is.

I'm setting it back to needs_work because you still want to work on it.



---

archive/issue_comments_297000.json:
```json
{
    "body": "I have pushed a few more things upstream and requested a release.  The changes I sent upstream makes my last commit unnecessary, so at the very least I'll retract it. If upstream makes a new release, I'll update the package instead of adding more patches.",
    "created_at": "2016-11-29T23:05:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-297000",
    "user": "fbissey"
}
```

I have pushed a few more things upstream and requested a release.  The changes I sent upstream makes my last commit unnecessary, so at the very least I'll retract it. If upstream makes a new release, I'll update the package instead of adding more patches.



---

archive/issue_comments_297001.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-12-03T20:09:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-297001",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_297002.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-12-03T20:20:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-297002",
    "user": "fbissey"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_297003.json:
```json
{
    "body": "OK, new release from upstream with all fixes included. Now the output is list, which keep the order, and is also strictly mirroring the output of the equivalent `pkg-config` command. The extra 2 minor releases are for various fixes to the tests that we don't use in sage but are important for me in Gentoo since I do run `nose` tests.",
    "created_at": "2016-12-03T20:20:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-297003",
    "user": "fbissey"
}
```

OK, new release from upstream with all fixes included. Now the output is list, which keep the order, and is also strictly mirroring the output of the equivalent `pkg-config` command. The extra 2 minor releases are for various fixes to the tests that we don't use in sage but are important for me in Gentoo since I do run `nose` tests.



---

archive/issue_comments_297004.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-12-04T13:14:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-297004",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_297005.json:
```json
{
    "body": "[comment:33]",
    "created_at": "2016-12-04T13:14:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-297005",
    "user": "jdemeyer"
}
```

[comment:33]



---

archive/issue_comments_297006.json:
```json
{
    "body": "All right, I'll do that ASAP.",
    "created_at": "2016-12-04T18:52:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-297006",
    "user": "fbissey"
}
```

All right, I'll do that ASAP.



---

archive/issue_comments_297007.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-12-04T20:08:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-297007",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_297008.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-12-04T20:08:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-297008",
    "user": "fbissey"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_297009.json:
```json
{
    "body": "Done.",
    "created_at": "2016-12-04T20:08:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-297009",
    "user": "fbissey"
}
```

Done.



---

archive/issue_comments_297010.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-12-06T14:56:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-297010",
    "user": "jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_297011.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-12-07T23:29:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-297011",
    "user": "vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_297012.json:
```json
{
    "body": "Breakage: #22047",
    "created_at": "2016-12-11T20:05:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21388#issuecomment-297012",
    "user": "jdemeyer"
}
```

Breakage: #22047
