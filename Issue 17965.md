# Issue 17965: Six requires setuptools

Issue created by migration from https://trac.sagemath.org/ticket/18202

Original creator: vbraun

Original creation time: 2015-04-15 10:46:00

CC:  fbissey

Build time race:

```
Traceback (most recent call last):
  File "setup.py", line 4, in <module>
    from setuptools import setup
  File "build/bdist.linux-x86_64/egg/setuptools/__init__.py", line 12, in <module>
  File "build/bdist.linux-x86_64/egg/setuptools/extension.py", line 7, in <module>
  File "build/bdist.linux-x86_64/egg/setuptools/dist.py", line 17, in <module>
  File "build/bdist.linux-x86_64/egg/pkg_resources.py", line 2817, in <module>
  File "build/bdist.linux-x86_64/egg/pkg_resources.py", line 440, in _build_master
  File "build/bdist.linux-x86_64/egg/pkg_resources.py", line 433, in __init__
  File "build/bdist.linux-x86_64/egg/pkg_resources.py", line 489, in add_entry
  File "build/bdist.linux-x86_64/egg/pkg_resources.py", line 1817, in find_eggs_in_zip
  File "build/bdist.linux-x86_64/egg/pkg_resources.py", line 1782, in __init__
  File "build/bdist.linux-x86_64/egg/pkg_resources.py", line 1545, in build_zipmanifest
  File "/mnt/SSD1/mod_buildslave/sage_git/build/local/lib/python/zipfile.py", line 756, in __init__
    self.fp = open(file, modeDict[mode])
IOError: [Errno 2] No such file or directory: '/mnt/SSD1/mod_buildslave/sage_git/build/local/lib/python2.7/site-packages/setuptools-3.6-py2.7.egg'
Error installing six ... exiting
```



---

Comment by vbraun created at 2015-04-15 10:47:56

Changing status from new to needs_review.


---

Comment by vbraun created at 2015-04-15 10:47:56

New commits:


---

Comment by fbissey created at 2015-04-15 10:59:38

That's very strange. I am guessing it's happening during an upgrade, this is from six's `setup.py`

```
try:
    from setuptools import setup
except ImportError:
    from distutils.core import setup
```

So we should have a nice fallback. Oh I get it "race condition" so setuptool is removed while you are using it. Yeah that will fix that.


---

Comment by fbissey created at 2015-04-15 10:59:38

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-04-15 13:58:26

Resolution: fixed
