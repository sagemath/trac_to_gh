# Issue 24724: Followup to #21524 -- upgrade broken when gcc spkg is installed

archive/issues_024724.json:
```json
{
    "body": "\n\nIssue created by migration from https://trac.sagemath.org/ticket/24961\n\n",
    "created_at": "2018-03-12T19:52:52Z",
    "labels": [
        "build",
        "blocker",
        "bug"
    ],
    "title": "Followup to #21524 -- upgrade broken when gcc spkg is installed",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24724",
    "user": "embray"
}
```


Issue created by migration from https://trac.sagemath.org/ticket/24961





---

archive/issue_comments_347068.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-03-12T19:53:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24724",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24724#issuecomment-347068",
    "user": "embray"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_347069.json:
```json
{
    "body": "There was a change in a recent beta to use clang instead of gcc when available. As a result, I have machines which used to build gcc, and indeed in which `$SAGE_LOCAL/bin/gcc` exists, but which now use clang according to Sage's configure:\n\n```\nconfigure:8250: result:     gcc-7.2.0 not installed (configure check)\n```\n\nSo should you check whether `$(SAGE_LOCAL)/bin/gcc` exists, or should you check whether gcc is going to be installed?",
    "created_at": "2018-03-12T20:16:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24724",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24724#issuecomment-347069",
    "user": "jhpalmieri"
}
```

There was a change in a recent beta to use clang instead of gcc when available. As a result, I have machines which used to build gcc, and indeed in which `$SAGE_LOCAL/bin/gcc` exists, but which now use clang according to Sage's configure:

```
configure:8250: result:     gcc-7.2.0 not installed (configure check)
```

So should you check whether `$(SAGE_LOCAL)/bin/gcc` exists, or should you check whether gcc is going to be installed?



---

archive/issue_comments_347070.json:
```json
{
    "body": "I also don't understand the spacing. I am guessing that the leading space in `GCC_DEP` was put there intentionally in #24703 (maybe so people could concatenate dependencies without worrying about the sort of issue that arose here), so why delete it? It doesn't harm anything, right?",
    "created_at": "2018-03-12T23:47:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24724",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24724#issuecomment-347070",
    "user": "jhpalmieri"
}
```

I also don't understand the spacing. I am guessing that the leading space in `GCC_DEP` was put there intentionally in #24703 (maybe so people could concatenate dependencies without worrying about the sort of issue that arose here), so why delete it? It doesn't harm anything, right?



---

archive/issue_comments_347071.json:
```json
{
    "body": "Replying to [comment:3 jhpalmieri]:\n> I also don't understand the spacing. I am guessing that the leading space in `GCC_DEP` was put there intentionally in #24703 (maybe so people could concatenate dependencies without worrying about the sort of issue that arose here), so why delete it? It doesn't harm anything, right?\n\nThat leading space was actually needed in the old code, but it's superfluous (albeit harmless, as you say) in the new code.",
    "created_at": "2018-03-13T14:40:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24724",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24724#issuecomment-347071",
    "user": "embray"
}
```

Replying to [comment:3 jhpalmieri]:
> I also don't understand the spacing. I am guessing that the leading space in `GCC_DEP` was put there intentionally in #24703 (maybe so people could concatenate dependencies without worrying about the sort of issue that arose here), so why delete it? It doesn't harm anything, right?

That leading space was actually needed in the old code, but it's superfluous (albeit harmless, as you say) in the new code.



---

archive/issue_comments_347072.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-03-13T16:37:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24724",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24724#issuecomment-347072",
    "user": "jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_347073.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2018-03-16T16:40:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24724",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24724#issuecomment-347073",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_347074.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2018-03-16T16:40:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24724",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24724#issuecomment-347074",
    "user": "git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_347075.json:
```json
{
    "body": "While we're at it, since this wasn't merged yet here's a quick fix to another bug I found.",
    "created_at": "2018-03-16T16:41:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24724",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24724#issuecomment-347075",
    "user": "embray"
}
```

While we're at it, since this wasn't merged yet here's a quick fix to another bug I found.



---

archive/issue_comments_347076.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-03-16T16:41:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24724",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24724#issuecomment-347076",
    "user": "embray"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_347077.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-03-19T07:57:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24724",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24724#issuecomment-347077",
    "user": "vbraun"
}
```

Resolution: fixed
