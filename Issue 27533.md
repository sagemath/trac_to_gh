# Issue 27533: Ran yapf on modular/abvar code

Issue created by migration from https://trac.sagemath.org/ticket/27770

Original creator: klui

Original creation time: 2019-05-05 03:56:19

Keywords: yapf, abvar

I'm about to make changes to the modular/abvar code so I figure I ran yapf on it first.


---

Comment by klui created at 2019-05-05 03:57:17

New commits:


---

Comment by klui created at 2019-05-05 03:57:17

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2019-05-05 12:00:46

There are some strange formattings IMHO. For example

```
        if not self.is_subvariety_of_ambient_jacobian(
        ) or not other.is_subvariety_of_ambient_jacobian():
```

and

```
        elif isinstance(
                other,
                ModularAbelianVariety_abstract) and other.is_subvariety(self):
```

and

```
            decomp = [
                AbelianVariety(f) for f in self.newform_decomposition('a')
            ]
```

I'm not convinced that all of these are improvements.


---

Comment by klui created at 2019-05-06 05:13:23

Okay, that's fair. I'll manually check it.


---

Comment by klui created at 2019-05-06 05:13:23

Changing status from needs_review to needs_work.


---

Comment by git created at 2019-05-06 06:56:31

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by klui created at 2019-05-06 07:00:31

Changing status from needs_work to needs_review.


---

Comment by klui created at 2019-05-06 07:00:31

I just manually checked it. I mostly changed how yapf handles long sequences of method application. I didn't like how it often ended a line with `(` . 


This one seems okay?

```
            decomp = [
                AbelianVariety(f) for f in self.newform_decomposition('a')
            ]
```



---

Comment by jdemeyer created at 2019-05-06 07:25:55

This is of course bikeshedding, but I would write that like

```
            decomp = [AbelianVariety(f)
                      for f in self.newform_decomposition('a')]
```



---

Comment by git created at 2019-05-06 19:19:39

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by klui created at 2019-05-06 19:20:19

Replying to [comment:7 jdemeyer]:
> This is of course bikeshedding, but I would write that like
> {{{
>             decomp = [AbelianVariety(f)
>                       for f in self.newform_decomposition('a')]
> }}}

I like that too. Thanks!


---

Comment by git created at 2019-06-28 03:32:34

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by embray created at 2019-07-03 11:37:56

Moving tickets from the Sage 8.8 milestone that have been actively worked on in the last six months to the next release milestone (optimistically).


---

Comment by klui created at 2019-08-20 07:38:38

Changing status from needs_review to needs_work.


---

Comment by embray created at 2019-12-30 14:48:17

Ticket retargeted after milestone closed


---

Comment by mkoeppe created at 2020-04-14 19:41:51

Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.


---

Comment by mkoeppe created at 2021-02-13 20:51:01

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.


---

Comment by mkoeppe created at 2021-07-19 00:44:56

Setting a new milestone for this ticket based on a cursory review.
