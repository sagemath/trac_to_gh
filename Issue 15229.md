# Issue 15229: Remove deprecated code from combinat.py

archive/issues_015229.json:
```json
{
    "body": "CC:  sage-combinat\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/15466\n\n",
    "created_at": "2013-11-29T14:11:00Z",
    "labels": [
        "combinatorics",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "Remove deprecated code from combinat.py",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15229",
    "user": "ncohen"
}
```
CC:  sage-combinat



Issue created by migration from https://trac.sagemath.org/ticket/15466





---

archive/issue_comments_195745.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-11-29T19:24:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15229#issuecomment-195745",
    "user": "ncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_195746.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2013-11-29T19:24:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15229#issuecomment-195746",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_195747.json:
```json
{
    "body": "Hi Nathann, thanks for starting this (or should that be thaaaaaaaaaaaanks!:).\n\nI found a few more depreciated [sic] functions to remove in the words subdirectory and I moved a few import statements of `deprecation` so that they are now immediately above the function call. This will help ensure that there are no stray `deprecation` import statements left when the corresponding soon-to-be-depreciated code is removed. Finally, I killed off some documentation for some functions that are removed by this patch.\n\nIf you are happy with my changes let's make this a positive review. I've bumped the version number to 6 since we're using git.\n\n[ps I have checked all of the doctsts in sage/combinat. I do get a doctext failure in `root_system/coxeter_group.py` but I get the same failure in master, so I think it has nothing to do with this ticket.]\n----\nNew commits:",
    "created_at": "2013-12-05T22:15:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15229#issuecomment-195747",
    "user": "andrew.mathas"
}
```

Hi Nathann, thanks for starting this (or should that be thaaaaaaaaaaaanks!:).

I found a few more depreciated [sic] functions to remove in the words subdirectory and I moved a few import statements of `deprecation` so that they are now immediately above the function call. This will help ensure that there are no stray `deprecation` import statements left when the corresponding soon-to-be-depreciated code is removed. Finally, I killed off some documentation for some functions that are removed by this patch.

If you are happy with my changes let's make this a positive review. I've bumped the version number to 6 since we're using git.

[ps I have checked all of the doctsts in sage/combinat. I do get a doctext failure in `root_system/coxeter_group.py` but I get the same failure in master, so I think it has nothing to do with this ticket.]
----
New commits:



---

archive/issue_comments_195748.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-12-05T22:48:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15229#issuecomment-195748",
    "user": "ncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_195749.json:
```json
{
    "body": "Yooooooooooo !!\n\n> Hi Nathann, thanks for starting this (or should that be thaaaaaaaaaaaanks!:).\n\nWell I'm glad to receive your help with this ! `:-D`\n\n> I found a few more depreciated [sic] functions to remove in the words subdirectory and I moved a few import statements of `deprecation` so that they are now immediately above the function call. This will help ensure that there are no stray `deprecation` import statements left when the corresponding soon-to-be-depreciated code is removed.\n\nGoodGoodGood !\n\n> Finally, I killed off some documentation for some functions that are removed by this patch.\n\nArgggg ! Nice job spotting that `;-)`\n\nBy the way : these days I use the --warn-links flag when building the doc. It tells you whenever some links are made toward non-existent functions. I guess it will be useful to spot things like that in the future, when this --warn-links will be a default, though right now there are too many broken lins in Sage to make it the default `:-)`\n\n> If you are happy with my changes let's make this a positive review. I've bumped the version number to 6 since we're using git.\n\nThe tests passed while I was reading the patch. Good to go, thanks `:-)`\n\n> [ps I have checked all of the doctsts in sage/combinat. I do get a doctext failure in `root_system/coxeter_group.py` but I get the same failure in master, so I think it has nothing to do with this ticket.]\n\nHmmmmm.. I don't get this error. Though at some point Volker told me that I should run \"make\" again in Sage's directory to update the spkg which may have changed since. Do give it a try when you don't need to use Sage for a while (it will recompile a lot of things). I used to have a couple of broken doctests, and it solved it !\n\nThank you again, and positive review to this patch ! `;-)`\n\nNathann",
    "created_at": "2013-12-05T22:48:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15229#issuecomment-195749",
    "user": "ncohen"
}
```

Yooooooooooo !!

> Hi Nathann, thanks for starting this (or should that be thaaaaaaaaaaaanks!:).

Well I'm glad to receive your help with this ! `:-D`

> I found a few more depreciated [sic] functions to remove in the words subdirectory and I moved a few import statements of `deprecation` so that they are now immediately above the function call. This will help ensure that there are no stray `deprecation` import statements left when the corresponding soon-to-be-depreciated code is removed.

GoodGoodGood !

> Finally, I killed off some documentation for some functions that are removed by this patch.

Argggg ! Nice job spotting that `;-)`

By the way : these days I use the --warn-links flag when building the doc. It tells you whenever some links are made toward non-existent functions. I guess it will be useful to spot things like that in the future, when this --warn-links will be a default, though right now there are too many broken lins in Sage to make it the default `:-)`

> If you are happy with my changes let's make this a positive review. I've bumped the version number to 6 since we're using git.

The tests passed while I was reading the patch. Good to go, thanks `:-)`

> [ps I have checked all of the doctsts in sage/combinat. I do get a doctext failure in `root_system/coxeter_group.py` but I get the same failure in master, so I think it has nothing to do with this ticket.]

Hmmmmm.. I don't get this error. Though at some point Volker told me that I should run "make" again in Sage's directory to update the spkg which may have changed since. Do give it a try when you don't need to use Sage for a while (it will recompile a lot of things). I used to have a couple of broken doctests, and it solved it !

Thank you again, and positive review to this patch ! `;-)`

Nathann



---

archive/issue_comments_195750.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-12-17T21:52:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15229#issuecomment-195750",
    "user": "vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_195751.json:
```json
{
    "body": "Resolution changed from fixed to ",
    "created_at": "2013-12-17T22:08:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15229#issuecomment-195751",
    "user": "vbraun"
}
```

Resolution changed from fixed to 



---

archive/issue_comments_195752.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2013-12-17T22:08:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15229#issuecomment-195752",
    "user": "vbraun"
}
```

Changing status from closed to new.



---

archive/issue_comments_195753.json:
```json
{
    "body": "\n```\nsage -t src/sage/misc/cachefunc.pyx\n**********************************************************************\nFile \"src/sage/misc/cachefunc.pyx\", line 534, in sage.misc.cachefunc.CachedFunction.__init__\nFailed example:\n    g.cache\nExpected:\n    {((5, None, 'default'), ()): 7}\nGot:\n    {((5, 'default'), ()): 7}\n**********************************************************************\nFile \"src/sage/misc/cachefunc.pyx\", line 722, in sage.misc.cachefunc.CachedFunction.__call__\nFailed example:\n    g.get_cache()\nExpected:\n    {((5, None, 'default'), ()): 7}\nGot:\n    {((5, 'default'), ()): 7}\n**********************************************************************\nFile \"src/sage/misc/cachefunc.pyx\", line 761, in sage.misc.cachefunc.CachedFunction.get_cache\nFailed example:\n    g.get_cache()\nExpected:\n    {((5, None, 'default'), ()): 7}\nGot:\n    {((5, 'default'), ()): 7}\n**********************************************************************\nFile \"src/sage/misc/cachefunc.pyx\", line 802, in sage.misc.cachefunc.CachedFunction.set_cache\nFailed example:\n    g.get_cache()\nExpected:\n    {((5, None, 'default'), ()): 7}\nGot:\n    {((5, 'default'), ()): 7}\n**********************************************************************\nFile \"src/sage/misc/cachefunc.pyx\", line 805, in sage.misc.cachefunc.CachedFunction.set_cache\nFailed example:\n    g.get_cache()\nExpected:\n    {((5, None, 'default'), ()): 17}\nGot:\n    {((5, 'default'), ()): 17}\n**********************************************************************\nFile \"src/sage/misc/cachefunc.pyx\", line 867, in sage.misc.cachefunc.CachedFunction.clear_cache\nFailed example:\n    g.get_cache()\nExpected:\n    {((5, None, 'default'), ()): 7}\nGot:\n    {((5, 'default'), ()): 7}\n**********************************************************************\n```\n",
    "created_at": "2013-12-17T22:08:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15229#issuecomment-195753",
    "user": "vbraun"
}
```


```
sage -t src/sage/misc/cachefunc.pyx
**********************************************************************
File "src/sage/misc/cachefunc.pyx", line 534, in sage.misc.cachefunc.CachedFunction.__init__
Failed example:
    g.cache
Expected:
    {((5, None, 'default'), ()): 7}
Got:
    {((5, 'default'), ()): 7}
**********************************************************************
File "src/sage/misc/cachefunc.pyx", line 722, in sage.misc.cachefunc.CachedFunction.__call__
Failed example:
    g.get_cache()
Expected:
    {((5, None, 'default'), ()): 7}
Got:
    {((5, 'default'), ()): 7}
**********************************************************************
File "src/sage/misc/cachefunc.pyx", line 761, in sage.misc.cachefunc.CachedFunction.get_cache
Failed example:
    g.get_cache()
Expected:
    {((5, None, 'default'), ()): 7}
Got:
    {((5, 'default'), ()): 7}
**********************************************************************
File "src/sage/misc/cachefunc.pyx", line 802, in sage.misc.cachefunc.CachedFunction.set_cache
Failed example:
    g.get_cache()
Expected:
    {((5, None, 'default'), ()): 7}
Got:
    {((5, 'default'), ()): 7}
**********************************************************************
File "src/sage/misc/cachefunc.pyx", line 805, in sage.misc.cachefunc.CachedFunction.set_cache
Failed example:
    g.get_cache()
Expected:
    {((5, None, 'default'), ()): 17}
Got:
    {((5, 'default'), ()): 17}
**********************************************************************
File "src/sage/misc/cachefunc.pyx", line 867, in sage.misc.cachefunc.CachedFunction.clear_cache
Failed example:
    g.get_cache()
Expected:
    {((5, None, 'default'), ()): 7}
Got:
    {((5, 'default'), ()): 7}
**********************************************************************
```




---

archive/issue_comments_195754.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-01-21T19:58:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15229#issuecomment-195754",
    "user": "tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_195755.json:
```json
{
    "body": "Fixed the failing doctest.\n----\nNew commits:",
    "created_at": "2014-01-21T19:58:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15229#issuecomment-195755",
    "user": "tscrim"
}
```

Fixed the failing doctest.
----
New commits:



---

archive/issue_comments_195756.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-01-22T07:19:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15229#issuecomment-195756",
    "user": "andrew.mathas"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_195757.json:
```json
{
    "body": "I didn't understand why this patch should affect `cachefunc.pyx` but the doc-tests causing the problems all call `number_of_partitions`. Part of this patch removes depreciated code in `partition.py` and, in particular, it changes the calling syntax by removing a depreciated argument of `k=None`. This both explains the errors above and says that the correct fix is simply to change the output of the doct-tests as the patch does. Hence, positive review.\n\nAndrew",
    "created_at": "2014-01-22T07:19:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15229#issuecomment-195757",
    "user": "andrew.mathas"
}
```

I didn't understand why this patch should affect `cachefunc.pyx` but the doc-tests causing the problems all call `number_of_partitions`. Part of this patch removes depreciated code in `partition.py` and, in particular, it changes the calling syntax by removing a depreciated argument of `k=None`. This both explains the errors above and says that the correct fix is simply to change the output of the doct-tests as the patch does. Hence, positive review.

Andrew



---

archive/issue_comments_195758.json:
```json
{
    "body": "conflict, please merge in latest beta",
    "created_at": "2014-02-21T23:05:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15229#issuecomment-195758",
    "user": "vbraun"
}
```

conflict, please merge in latest beta



---

archive/issue_comments_195759.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2014-02-22T06:22:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15229#issuecomment-195759",
    "user": "git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_195760.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2014-02-22T06:22:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15229#issuecomment-195760",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_195761.json:
```json
{
    "body": "Done.",
    "created_at": "2014-02-22T06:23:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15229#issuecomment-195761",
    "user": "tscrim"
}
```

Done.



---

archive/issue_comments_195762.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-02-22T06:23:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15229#issuecomment-195762",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_195763.json:
```json
{
    "body": "Documentation doesn't build\n\n```\nbuild/pipestatus \"./sage --docbuild --no-pdf-links all html -j  2>&1\" \"tee -a logs/dochtml.log\"\nSetting permissions of DOT_SAGE directory so only you can read and write it.\nTraceback (most recent call last):\n  File \"/Users/buildslave-sage/slave/sage_git/build/src/doc/common/builder.py\", line 1465, in <module>\n    import sage.all\n  File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/all.py\", line 133, in <module>\n    from sage.combinat.all   import *\n  File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/combinat/all.py\", line 1, in <module>\n    from combinat import bell_number, catalan_number, euler_number, fibonacci, \\\nImportError: cannot import name combinations\n```\n",
    "created_at": "2014-02-22T07:15:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15229#issuecomment-195763",
    "user": "vbraun"
}
```

Documentation doesn't build

```
build/pipestatus "./sage --docbuild --no-pdf-links all html -j  2>&1" "tee -a logs/dochtml.log"
Setting permissions of DOT_SAGE directory so only you can read and write it.
Traceback (most recent call last):
  File "/Users/buildslave-sage/slave/sage_git/build/src/doc/common/builder.py", line 1465, in <module>
    import sage.all
  File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/all.py", line 133, in <module>
    from sage.combinat.all   import *
  File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/combinat/all.py", line 1, in <module>
    from combinat import bell_number, catalan_number, euler_number, fibonacci, \
ImportError: cannot import name combinations
```




---

archive/issue_comments_195764.json:
```json
{
    "body": "I'm unable to reproduce this. I rebuilt, ran sync-build, rebuilt, nuked my docbuild, and rebuilt the entire doc.",
    "created_at": "2014-02-22T17:50:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15229#issuecomment-195764",
    "user": "tscrim"
}
```

I'm unable to reproduce this. I rebuilt, ran sync-build, rebuilt, nuked my docbuild, and rebuilt the entire doc.



---

archive/issue_comments_195765.json:
```json
{
    "body": "Might be due to #9505, please wait until 6.2.beta3 is out and then merge that in.",
    "created_at": "2014-02-22T21:28:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15229#issuecomment-195765",
    "user": "vbraun"
}
```

Might be due to #9505, please wait until 6.2.beta3 is out and then merge that in.



---

archive/issue_comments_195766.json:
```json
{
    "body": "6.2.beta3 is out ;-)",
    "created_at": "2014-03-04T17:02:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15229#issuecomment-195766",
    "user": "vbraun"
}
```

6.2.beta3 is out ;-)



---

archive/issue_comments_195767.json:
```json
{
    "body": "Done !\n\nNathann\n----\nNew commits:",
    "created_at": "2014-03-05T10:00:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15229#issuecomment-195767",
    "user": "ncohen"
}
```

Done !

Nathann
----
New commits:



---

archive/issue_comments_195768.json:
```json
{
    "body": "Hmmm...strange... I didn't see those imports when looking at the branch before. *shrugs*\n\nPS - Thanks Nathann.",
    "created_at": "2014-03-05T16:14:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15229#issuecomment-195768",
    "user": "tscrim"
}
```

Hmmm...strange... I didn't see those imports when looking at the branch before. *shrugs*

PS - Thanks Nathann.



---

archive/issue_comments_195769.json:
```json
{
    "body": "Yeah, I find it strange too.... And I don't see why they could have been added from another patch in the meantime `O_o`\n\nNathann",
    "created_at": "2014-03-05T16:29:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15229#issuecomment-195769",
    "user": "ncohen"
}
```

Yeah, I find it strange too.... And I don't see why they could have been added from another patch in the meantime `O_o`

Nathann



---

archive/issue_comments_195770.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-03-06T15:06:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15229",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15229#issuecomment-195770",
    "user": "vbraun"
}
```

Resolution: fixed
