# Issue 15117: elliptic_j function should not compute numerically unless asked for

Issue created by migration from https://trac.sagemath.org/ticket/15354

Original creator: davidamadore

Original creation time: 2013-11-04 19:00:30

Keywords: special function

Sage's elliptic_j function does not behave similarly to the other standard or special functions: it tries to numerically evaluate instead of building a symbolic expression:


```
sage: elliptic_j(I)
1728.00000000000
sage: elliptic_j(x)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-5-b3ba173d2e63> in <module>()
----> 1 elliptic_j(x)

/usr/src/local/sage-5.12/local/lib/python2.7/site-packages/sage/functions/special.pyc in elliptic_j(z)
    803       CC = ComplexField()
    804       try:
--> 805          z = CC(z)
    806       except ValueError:
    807          raise ValueError, "elliptic_j only defined for complex arguments."

/usr/src/local/sage-5.12/local/lib/python2.7/site-packages/sage/rings/complex_field.pyc in __call__(self, x, im)
    345         if im is not None:
    346             x = x, im
--> 347         return Parent.__call__(self, x)
    348 
    349     def _element_constructor_(self, x):

/usr/src/local/sage-5.12/local/lib/python2.7/site-packages/sage/structure/parent.so in sage.structure.parent.Parent.__call__ (sage/structure/parent.c:8372)()

/usr/src/local/sage-5.12/local/lib/python2.7/site-packages/sage/structure/coerce_maps.so in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (sage/structure/coerce_maps.c:3856)()

/usr/src/local/sage-5.12/local/lib/python2.7/site-packages/sage/structure/coerce_maps.so in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (sage/structure/coerce_maps.c:3757)()

/usr/src/local/sage-5.12/local/lib/python2.7/site-packages/sage/rings/complex_field.pyc in _element_constructor_(self, x)
    375                 pass
    376             try:
--> 377                 return x._complex_mpfr_field_( self )
    378             except AttributeError:
    379                 pass

/usr/src/local/sage-5.12/local/lib/python2.7/site-packages/sage/symbolic/expression.so in sage.symbolic.expression.Expression._complex_mpfr_field_ (sage/symbolic/expression.cpp:7534)()

/usr/src/local/sage-5.12/local/lib/python2.7/site-packages/sage/symbolic/expression.so in sage.symbolic.expression.Expression._eval_self (sage/symbolic/expression.cpp:6913)()

TypeError: Cannot evaluate symbolic expression to a numeric value.
```


This is very weird: it means, for example, that plot(real(elliptic_j(x+I)), (x,0,1)) will fail (instead, one must use plot(lambda t: real(elliptic_j(t+I)), (0,1)))


---

Comment by rws created at 2014-12-09 15:06:58

Changing priority from minor to major.


---

Comment by rws created at 2014-12-09 15:06:58

Changing keywords from "special function" to "special function, elliptic, modular".
