# Issue 10874: is_regular yields StopIterator error on empty graph

Issue created by migration from https://trac.sagemath.org/ticket/10953

Original creator: pgdx

Original creation time: 2011-03-17 12:06:03

Assignee: jason, ncohen, rlm

CC:  mjo

Keywords: regular is_regular empty graph iterator

The following statement yields an error:

 sage: Graph().is_regular()

A quick fix to this is to test if the size of the graph is zero, in which case we return true. I assume the empty graph is k-regular for any k. If this is not the case for sage, another (better) error should be thrown.


---

Attachment


---

Comment by brunellus created at 2011-12-13 00:35:50

Changing status from new to needs_review.


---

Comment by mjo created at 2012-01-02 01:13:02

You should include the ticket number in the doctest.

I would test self.order() rather than len(self) to save the reader from having to go look up what `__len__` does, but that's just personal taste.


---

Attachment


---

Comment by brunellus created at 2012-01-02 17:29:20

Thanks! Is it better now?


---

Comment by mjo created at 2012-01-02 20:26:47

Almost! Would you mind moving the comment to its own line? There's nothing wrong with it at the moment, but in-line comments like that are given special treatment (e.g. #long, #optional, #todo...) so I think they should be avoided to prevent unexpected interactions.

Also: I find regularity defined "for all vertices..." so it is vacuously true that the empty graph is k-regular for any k.

I'm running a full ptestlong with the patch, and don't expect any problems.


---

Comment by brunellus created at 2012-01-03 23:20:53

I agree that the empty graph is k-regular for any k -- I think the change works that way now. Or do you have in mind that I write another test for this?


---

Comment by mjo created at 2012-01-03 23:24:15

Nope, it's fine. I wasn't sure how regularity was defined, and your description said "I assume the empty graph is k-regular for any k", so I looked it up.


---

Attachment


---

Comment by brunellus created at 2012-01-03 23:40:09

Is this way of commenting possible?

Thanks for all the help. I'll try to not repeat those errors in my next patches. :-)


---

Comment by mjo created at 2012-01-03 23:59:17

Perfect.


---

Comment by mjo created at 2012-01-03 23:59:17

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2012-01-05 22:35:45

Changing status from positive_review to needs_work.


---

Comment by jdemeyer created at 2012-01-05 22:36:03

Changing status from needs_work to needs_review.


---

Attachment


---

Comment by jdemeyer created at 2012-01-05 22:37:32

Small fix to the doctest, needs review.


---

Comment by mjo created at 2012-01-06 01:06:32

It passed another ptestlong, and the example looks good in the docs.

Sorry I missed the backticks, I finally fixed my dvipng and created a review checklist so I won't miss them in the future.


---

Comment by mjo created at 2012-01-06 01:06:32

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2012-01-18 08:13:56

Resolution: fixed
