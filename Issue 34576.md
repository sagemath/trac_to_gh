# Issue 34576: src/doc/en/installation/source.rst gives CRITICAL sphinx warnings

Issue created by migration from https://trac.sagemath.org/ticket/34813

Original creator: dimpase

Original creation time: 2022-11-30 11:04:35

CC:  jhpalmieri


```
[sagemath_doc_html-none] [installat] /Users/dima/software/sage/src/doc/en/installation/source.rst:455: CRITICAL: Title level inconsistent:
[sagemath_doc_html-none] [installat] Recommended programs
[sagemath_doc_html-none] [installat] ~~~~~~~~~~~~~~~~~~~~
[sagemath_doc_html-none] [installat] /Users/dima/software/sage/src/doc/en/installation/source.rst:508: CRITICAL: Title level inconsistent:
[sagemath_doc_html-none] [installat] Tcl/Tk
[sagemath_doc_html-none] [installat] ~~~~~~
[sagemath_doc_html-none] [installat] /Users/dima/software/sage/src/doc/en/installation/source.rst:548: CRITICAL: Title level inconsistent:
[sagemath_doc_html-none] [installat] General procedure
[sagemath_doc_html-none] [installat] ~~~~~~~~~~~~~~~~~
```


Note that `~~~~~...` is not even official Sphinx.



---

Comment by dimpase created at 2022-12-07 23:28:14

replaced ~~s with <sup>^</sup>s
rst determines the subheading levels dynamically, if it sees

```    
    Foo
    ---
    
    Bar
    ^^^
    
    and then
    
    Baz
    ---
    
    Oops
    ~~~~
}}}    
it apparently can't figure out whether `Oops` heading should be bigger or smaller
than `Bar` heading. Thus the warning, fixed here.
----
New commits:


---

Comment by dimpase created at 2022-12-07 23:28:14

Changing status from new to needs_review.


---

Comment by jhpalmieri created at 2022-12-07 23:56:22

Not only does this give warnings, but it seems to omit printing the section titles completely, at least on my computer, and this fixes the problem. (The Sage website has those section titles.) It is also interesting that `~~~~~~` is used in other parts of the Sage documentation without any issues (`git grep '~~~~~~' src/doc` has lots of hits).


---

Comment by jhpalmieri created at 2022-12-07 23:56:22

Changing status from needs_review to positive_review.


---

Comment by jhpalmieri created at 2022-12-08 00:05:20

Maybe the other places just don't mix `~~~~` with `<sup>^</sup>^^` or other subsection markdown, and that's why they don't cause problems.


---

Comment by dimpase created at 2022-12-09 19:14:57

Replying to [comment:3 John Palmieri]:
> Maybe the other places just don't mix `~~~~` with `<sup>^</sup>^^` or other subsection markdown, and that's why they don't cause problems. 

it seems that sphinx does some kind of discovery to establish hierarchy of subheadings in the text, and while you can certainly use
`~~~` and `<sup>^</sup>` and other such undertitles in the text, they should not contradict the hierarchy already established.
And in the file we fix here these two were both used for the same level of subheadings, thus the warning.


---

Comment by vbraun created at 2022-12-14 22:11:48

Resolution: fixed
