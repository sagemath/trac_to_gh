# Issue 16802: Allow IndexedGenerators to handle `names`

archive/issues_016802.json:
```json
{
    "body": "Assignee: tscrim\n\nCC:  nthiery nbruin chapoton bsalisbury1\n\nKeywords: variable names input\n\nSo we can do things like\n\n```\nsage: C.<x,y,z> = CombinatorialFreeModule(QQ)\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/17039\n\n",
    "created_at": "2014-09-25T12:17:40Z",
    "labels": [
        "misc",
        "major",
        "enhancement"
    ],
    "title": "Allow IndexedGenerators to handle `names`",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16802",
    "user": "tscrim"
}
```
Assignee: tscrim

CC:  nthiery nbruin chapoton bsalisbury1

Keywords: variable names input

So we can do things like

```
sage: C.<x,y,z> = CombinatorialFreeModule(QQ)
```


Issue created by migration from https://trac.sagemath.org/ticket/17039





---

archive/issue_comments_222433.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-09-25T16:34:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16802#issuecomment-222433",
    "user": "tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_222434.json:
```json
{
    "body": "Done and up for review.\n----\nNew commits:",
    "created_at": "2014-09-25T16:34:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16802#issuecomment-222434",
    "user": "tscrim"
}
```

Done and up for review.
----
New commits:



---

archive/issue_comments_222435.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-06T23:29:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16802#issuecomment-222435",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_222436.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-26T04:57:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16802#issuecomment-222436",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_222437.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-09T11:57:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16802#issuecomment-222437",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_222438.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-09T20:22:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16802#issuecomment-222438",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_222439.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-10T08:33:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16802#issuecomment-222439",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_222440.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-10T12:45:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16802#issuecomment-222440",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_222441.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-10T12:49:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16802#issuecomment-222441",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_222442.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2016-04-10T19:07:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16802#issuecomment-222442",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_222443.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-11T07:07:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16802#issuecomment-222443",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_222444.json:
```json
{
    "body": "I don't care much about this ticket, just pointing out that it no longer applies.",
    "created_at": "2016-09-14T10:04:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16802#issuecomment-222444",
    "user": "jdemeyer"
}
```

I don't care much about this ticket, just pointing out that it no longer applies.



---

archive/issue_comments_222445.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-09-14T10:04:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16802#issuecomment-222445",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_222446.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-04-16T22:20:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16802#issuecomment-222446",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_222447.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-04-16T22:21:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16802#issuecomment-222447",
    "user": "tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_222448.json:
```json
{
    "body": "Green patchbot (essentially).",
    "created_at": "2017-05-21T02:18:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16802#issuecomment-222448",
    "user": "tscrim"
}
```

Green patchbot (essentially).



---

archive/issue_comments_222449.json:
```json
{
    "body": "This is not good:\n\n```diff\n@@ -127,6 +131,8 @@ def FreeMonoid(index_set=None, names=None, commutative=False, **kwds):\n \n     if index_set not in ZZ:\n         if names is not None:\n+            if isinstance(names, str):\n+                names = names.split(',')\n             names = normalize_names(len(names), names)\n         from sage.monoids.indexed_free_monoid import IndexedFreeMonoid\n         return IndexedFreeMonoid(index_set, names=names, **kwds)\n```\n\nThis splitting should be handled by `normalize_names()` (I guess you should replace `len(names)` by `-1`).\n\nI also wonder why you do *not* use `normalize_names()` in `parse_indices_names()`. The function `normalize_names()` is precisely meant to handle `names` arguments consistently. Don't reinvent the wheel!",
    "created_at": "2017-05-22T08:12:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16802#issuecomment-222449",
    "user": "jdemeyer"
}
```

This is not good:

```diff
@@ -127,6 +131,8 @@ def FreeMonoid(index_set=None, names=None, commutative=False, **kwds):
 
     if index_set not in ZZ:
         if names is not None:
+            if isinstance(names, str):
+                names = names.split(',')
             names = normalize_names(len(names), names)
         from sage.monoids.indexed_free_monoid import IndexedFreeMonoid
         return IndexedFreeMonoid(index_set, names=names, **kwds)
```

This splitting should be handled by `normalize_names()` (I guess you should replace `len(names)` by `-1`).

I also wonder why you do *not* use `normalize_names()` in `parse_indices_names()`. The function `normalize_names()` is precisely meant to handle `names` arguments consistently. Don't reinvent the wheel!



---

archive/issue_comments_222450.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-05-22T08:12:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16802#issuecomment-222450",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_222451.json:
```json
{
    "body": "Instead of\n\n```\nif 'bracket' not in kwds:\n    kwds['bracket'] = False\n```\n\nuse [setdefault](https://docs.python.org/2/library/stdtypes.html#dict.setdefault)",
    "created_at": "2017-05-22T08:30:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16802#issuecomment-222451",
    "user": "jdemeyer"
}
```

Instead of

```
if 'bracket' not in kwds:
    kwds['bracket'] = False
```

use [setdefault](https://docs.python.org/2/library/stdtypes.html#dict.setdefault)



---

archive/issue_comments_222452.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-05-27T17:11:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16802#issuecomment-222452",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_222453.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-05-27T17:14:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16802#issuecomment-222453",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_222454.json:
```json
{
    "body": "Thank you for looking at this.\n\ncomment:18 Good point. IIRC, back when I did this, that was not separated as a standalone function but instead a method of `CategoryObject`. I also made some other changes to remove code duplication and improve the documentation.\n\ncomment:20 I don't want to do that because other keyword options that are used should not default to `False`, such as `scalar_mult`.",
    "created_at": "2017-05-27T17:15:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16802#issuecomment-222454",
    "user": "tscrim"
}
```

Thank you for looking at this.

comment:18 Good point. IIRC, back when I did this, that was not separated as a standalone function but instead a method of `CategoryObject`. I also made some other changes to remove code duplication and improve the documentation.

comment:20 I don't want to do that because other keyword options that are used should not default to `False`, such as `scalar_mult`.



---

archive/issue_comments_222455.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-05-27T17:15:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16802#issuecomment-222455",
    "user": "tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_222456.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-05-27T22:18:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16802#issuecomment-222456",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_222457.json:
```json
{
    "body": "Replying to [comment:23 tscrim]:\n> comment:20 I don't want to do that because other keyword options that are used should not default to `False`, such as `scalar_mult`.\n\nI don't get your point. I am saying that you can replace\n\n```\nif 'bracket' not in kwds:\n    kwds['bracket'] = False\n```\n\nby\n\n```\nkwds.setdefault('bracket', False)\n```\n\nYou can do the same for `string_quotes` but I'm not saying that you must do this for *every* keyword if you don't want.",
    "created_at": "2017-05-28T21:22:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16802#issuecomment-222457",
    "user": "jdemeyer"
}
```

Replying to [comment:23 tscrim]:
> comment:20 I don't want to do that because other keyword options that are used should not default to `False`, such as `scalar_mult`.

I don't get your point. I am saying that you can replace

```
if 'bracket' not in kwds:
    kwds['bracket'] = False
```

by

```
kwds.setdefault('bracket', False)
```

You can do the same for `string_quotes` but I'm not saying that you must do this for *every* keyword if you don't want.



---

archive/issue_comments_222458.json:
```json
{
    "body": "Replying to [comment:23 tscrim]:\n> comment:18 Good point. IIRC, back when I did this, that was not separated as a standalone function but instead a method of `CategoryObject`.\n\nYes, this was fixed in #19675.",
    "created_at": "2017-05-28T21:24:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16802#issuecomment-222458",
    "user": "jdemeyer"
}
```

Replying to [comment:23 tscrim]:
> comment:18 Good point. IIRC, back when I did this, that was not separated as a standalone function but instead a method of `CategoryObject`.

Yes, this was fixed in #19675.



---

archive/issue_comments_222459.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-05-29T21:02:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16802#issuecomment-222459",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_222460.json:
```json
{
    "body": "Replying to [comment:25 jdemeyer]:\n> Replying to [comment:23 tscrim]:\n> > comment:20 I don't want to do that because other keyword options that are used should not default to `False`, such as `scalar_mult`.\n> \n> I don't get your point. I am saying that you can replace\n> {{{\n> if 'bracket' not in kwds:\n>     kwds['bracket'] = False\n> }}}\n> by\n> {{{\n> kwds.setdefault('bracket', False)\n> }}}\n> You can do the same for `string_quotes` but I'm not saying that you must do this for *every* keyword if you don't want.\n\nI misread `setdefault`. I was thinking it made the `dict` behave like a `defaultdict`. I agree that this is a better way to go.",
    "created_at": "2017-05-29T21:04:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16802#issuecomment-222460",
    "user": "tscrim"
}
```

Replying to [comment:25 jdemeyer]:
> Replying to [comment:23 tscrim]:
> > comment:20 I don't want to do that because other keyword options that are used should not default to `False`, such as `scalar_mult`.
> 
> I don't get your point. I am saying that you can replace
> {{{
> if 'bracket' not in kwds:
>     kwds['bracket'] = False
> }}}
> by
> {{{
> kwds.setdefault('bracket', False)
> }}}
> You can do the same for `string_quotes` but I'm not saying that you must do this for *every* keyword if you don't want.

I misread `setdefault`. I was thinking it made the `dict` behave like a `defaultdict`. I agree that this is a better way to go.



---

archive/issue_comments_222461.json:
```json
{
    "body": "Patchbot is back to (essentially) green.",
    "created_at": "2017-06-03T13:42:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16802#issuecomment-222461",
    "user": "tscrim"
}
```

Patchbot is back to (essentially) green.



---

archive/issue_comments_222462.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-06-12T03:48:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16802#issuecomment-222462",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_222463.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-06-23T12:52:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16802#issuecomment-222463",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_222464.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-06-23T12:56:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16802#issuecomment-222464",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_222465.json:
```json
{
    "body": "Rebased over beta12.",
    "created_at": "2017-06-23T12:58:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16802#issuecomment-222465",
    "user": "tscrim"
}
```

Rebased over beta12.



---

archive/issue_comments_222466.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-06-26T15:17:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16802#issuecomment-222466",
    "user": "bsalisbury1"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_222467.json:
```json
{
    "body": "Changes look good and everything builds and passes on my machine.",
    "created_at": "2017-06-26T15:17:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16802#issuecomment-222467",
    "user": "bsalisbury1"
}
```

Changes look good and everything builds and passes on my machine.



---

archive/issue_comments_222468.json:
```json
{
    "body": "Thank you.",
    "created_at": "2017-06-27T02:26:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16802#issuecomment-222468",
    "user": "tscrim"
}
```

Thank you.



---

archive/issue_comments_222469.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-06-29T06:46:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16802#issuecomment-222469",
    "user": "vbraun"
}
```

Resolution: fixed
