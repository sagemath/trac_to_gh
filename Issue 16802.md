# Issue 16802: Allow IndexedGenerators to handle `names`

Issue created by migration from Trac.

Original creator: tscrim

Original creation time: 2014-09-25 12:17:40

Assignee: tscrim

CC:  nthiery nbruin chapoton bsalisbury1

Keywords: variable names input

So we can do things like

```
sage: C.<x,y,z> = CombinatorialFreeModule(QQ)
```



---

Comment by tscrim created at 2014-09-25 16:34:07

Changing status from new to needs_review.


---

Comment by tscrim created at 2014-09-25 16:34:07

Done and up for review.
----
New commits:


---

Comment by git created at 2015-03-06 23:29:46

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-05-26 04:57:31

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-03-09 11:57:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-04-09 20:22:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-04-10 08:33:21

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-04-10 12:45:18

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-04-10 12:49:26

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-04-10 19:07:02

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by git created at 2016-04-11 07:07:43

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2016-09-14 10:04:48

I don't care much about this ticket, just pointing out that it no longer applies.


---

Comment by jdemeyer created at 2016-09-14 10:04:48

Changing status from needs_review to needs_work.


---

Comment by git created at 2017-04-16 22:20:40

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2017-04-16 22:21:25

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2017-05-21 02:18:05

Green patchbot (essentially).


---

Comment by jdemeyer created at 2017-05-22 08:12:29

This is not good:

```diff
`@``@` -127,6 +131,8 `@``@` def FreeMonoid(index_set=None, names=None, commutative=False, **kwds):
 
     if index_set not in ZZ:
         if names is not None:
+            if isinstance(names, str):
+                names = names.split(',')
             names = normalize_names(len(names), names)
         from sage.monoids.indexed_free_monoid import IndexedFreeMonoid
         return IndexedFreeMonoid(index_set, names=names, **kwds)
```

This splitting should be handled by `normalize_names()` (I guess you should replace `len(names)` by `-1`).

I also wonder why you do _not_ use `normalize_names()` in `parse_indices_names()`. The function `normalize_names()` is precisely meant to handle `names` arguments consistently. Don't reinvent the wheel!


---

Comment by jdemeyer created at 2017-05-22 08:12:47

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2017-05-22 08:30:18

Instead of

```
if 'bracket' not in kwds:
    kwds['bracket'] = False
```

use [setdefault](https://docs.python.org/2/library/stdtypes.html#dict.setdefault)


---

Comment by git created at 2017-05-27 17:11:04

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-05-27 17:14:25

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by tscrim created at 2017-05-27 17:15:34

Thank you for looking at this.

comment:18 Good point. IIRC, back when I did this, that was not separated as a standalone function but instead a method of `CategoryObject`. I also made some other changes to remove code duplication and improve the documentation.

comment:20 I don't want to do that because other keyword options that are used should not default to `False`, such as `scalar_mult`.


---

Comment by tscrim created at 2017-05-27 17:15:34

Changing status from needs_work to needs_review.


---

Comment by git created at 2017-05-27 22:18:37

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2017-05-28 21:22:24

Replying to [comment:23 tscrim]:
> comment:20 I don't want to do that because other keyword options that are used should not default to `False`, such as `scalar_mult`.

I don't get your point. I am saying that you can replace

```
if 'bracket' not in kwds:
    kwds['bracket'] = False
```

by

```
kwds.setdefault('bracket', False)
```

You can do the same for `string_quotes` but I'm not saying that you must do this for _every_ keyword if you don't want.


---

Comment by jdemeyer created at 2017-05-28 21:24:08

Replying to [comment:23 tscrim]:
> comment:18 Good point. IIRC, back when I did this, that was not separated as a standalone function but instead a method of `CategoryObject`.

Yes, this was fixed in #19675.


---

Comment by git created at 2017-05-29 21:02:49

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2017-05-29 21:04:13

Replying to [comment:25 jdemeyer]:
> Replying to [comment:23 tscrim]:
> > comment:20 I don't want to do that because other keyword options that are used should not default to `False`, such as `scalar_mult`.
> 
> I don't get your point. I am saying that you can replace
> {{{
> if 'bracket' not in kwds:
>     kwds['bracket'] = False
> }}}
> by
> {{{
> kwds.setdefault('bracket', False)
> }}}
> You can do the same for `string_quotes` but I'm not saying that you must do this for _every_ keyword if you don't want.

I misread `setdefault`. I was thinking it made the `dict` behave like a `defaultdict`. I agree that this is a better way to go.


---

Comment by tscrim created at 2017-06-03 13:42:33

Patchbot is back to (essentially) green.


---

Comment by git created at 2017-06-12 03:48:00

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-06-23 12:52:26

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-06-23 12:56:13

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2017-06-23 12:58:27

Rebased over beta12.


---

Comment by bsalisbury1 created at 2017-06-26 15:17:17

Changing status from needs_review to positive_review.


---

Comment by bsalisbury1 created at 2017-06-26 15:17:17

Changes look good and everything builds and passes on my machine.


---

Comment by tscrim created at 2017-06-27 02:26:31

Thank you.


---

Comment by vbraun created at 2017-06-29 06:46:51

Resolution: fixed
