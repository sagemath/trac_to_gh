# Issue 32941: hilbert_numerator() algorithms disagree

Issue created by migration from https://trac.sagemath.org/ticket/33178

Original creator: mjo

Original creation time: 2022-01-15 03:11:35

We discovered in #33134 that `hilbert_numerator()` can return different results with `algorithm="singular"` and the default `algorithm="sage"`:


```
sage: n=4; m=11; P = PolynomialRing(QQ,n*m,"x")
sage: x = P.gens(); M = Matrix(n,x)
sage: I = P.ideal(M.minors(2))
sage: J = P*[m.lm() for m in I.groebner_basis()]
sage: expected = J.hilbert_numerator()
sage: actual = J.hilbert_numerator(algorithm='singular')
sage: actual == expected
False
sage: actual - expected
4294967296*t^22 - 4294967296*t^21 + 4294967296*t^20 - 4294967296*t^19 + 4294967296*t^18
```


Note that this requires singular >= 4.2.1p3, otherwise the example will fail entirely.


---

Comment by chapoton created at 2022-01-15 08:09:58

overflow somewhere ?


```
sage: factor(4294967296)
2^32
```



---

Comment by slelievre created at 2022-01-23 11:59:44

The [Singular 4.3.0 release notes](https://www.singular.uni-kl.de/index.php/news/release-of-singular-4-3-0.html) mention:

> - `hilb` avoids int overflow (also in `degree`, `stdhilb`)


---

Comment by @mwageringel created at 2022-02-01 20:16:46

Replying to [comment:3 slelievre]:
> The [Singular 4.3.0 release notes](https://www.singular.uni-kl.de/index.php/news/release-of-singular-4-3-0.html) mention:
> 
> > - `hilb` avoids int overflow (also in `degree`, `stdhilb`)

The issue persists with Singular 4.3.0 (tested on Arch).


---

Comment by dimpase created at 2022-07-11 11:50:30

which one is correct, `actual` or `expected` ?


---

Comment by mjo created at 2022-07-13 00:43:15

Replying to [comment:6 dimpase]:
> which one is correct, `actual` or `expected` ?

Barring a second, independent, bug: the "expected" answer should be the correct one.
