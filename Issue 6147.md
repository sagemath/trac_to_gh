# Issue 6147: [with patch, needs review] Make sage -sync-build smarter.

Issue created by migration from https://trac.sagemath.org/ticket/6147

Original creator: craigcitro

Original creation time: 2009-05-28 08:08:41

Assignee: craigcitro

CC:  mhansen was

As it stands, `sage -sync-build` simply looks for corresponding `C/C++` source files for a given `.o` or `.so` file. However, since the vast majority of such files are generated by `.pyx` files, this means that if you simply delete the `.pyx` file without deleting the generated `C/C++` file, then it won't clean out the compiled object file, which is bad.

We fix this by searching for `.pyx` files instead. However, there are several `C/C++` source files in the sage tree which aren't created from Cython; to keep track of these, we walk through the list of extensions (which is generated by `module_list.py` and `sage/ext/gen_interpreters.py`) and make a list of these non-Cython source files, then don't delete things that occur there.


---

Comment by craigcitro created at 2009-05-28 08:09:28

apply to repo in $SAGE_LOCAL/bin


---

Attachment

I'm adding some potential referees to the `cc` field ...


---

Comment by craigcitro created at 2009-05-28 08:10:44

Changing status from new to assigned.


---

Comment by mhansen created at 2009-05-28 16:35:38

Resolution: fixed


---

Comment by mhansen created at 2009-05-28 16:35:38

Looks good to me.

Merged in 4.0.rc2.
