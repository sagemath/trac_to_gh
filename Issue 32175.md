# Issue 32175: Deprecate sage.interfaces.primecount

archive/issues_032175.json:
```json
{
    "body": "CC:  @videlec @tscrim\n\n(see #25009#comment:4)\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/32412\n\n",
    "created_at": "2021-08-24T06:54:05Z",
    "labels": [
        "component: packages: optional"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "Deprecate sage.interfaces.primecount",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32175",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @videlec @tscrim

(see #25009#comment:4)



Issue created by migration from https://trac.sagemath.org/ticket/32412





---

archive/issue_comments_458982.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-08-26T21:24:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32175#issuecomment-458982",
    "user": "https://github.com/mkoeppe"
}
```

New commits:



---

archive/issue_comments_458983.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-08-26T21:24:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32175#issuecomment-458983",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_458984.json:
```json
{
    "body": "Just to confirm, we are deprecating the interface in favor of only having the `libs/primecount.pxd`, correct? If so, LGTM and you can set a positive review.",
    "created_at": "2021-08-26T23:45:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32175#issuecomment-458984",
    "user": "https://github.com/tscrim"
}
```

Just to confirm, we are deprecating the interface in favor of only having the `libs/primecount.pxd`, correct? If so, LGTM and you can set a positive review.



---

archive/issue_comments_458985.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-27T00:03:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32175#issuecomment-458985",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_458986.json:
```json
{
    "body": "Actually, the pxd file would also be scheduled for removal.",
    "created_at": "2021-08-27T00:04:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32175#issuecomment-458986",
    "user": "https://github.com/mkoeppe"
}
```

Actually, the pxd file would also be scheduled for removal.



---

archive/issue_comments_458987.json:
```json
{
    "body": "Okay, then I am a bit confused about this now. We still want to link to the library, right? If we don't have a lib or interface, then how will we access it within Sage?",
    "created_at": "2021-08-27T01:06:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32175#issuecomment-458987",
    "user": "https://github.com/tscrim"
}
```

Okay, then I am a bit confused about this now. We still want to link to the library, right? If we don't have a lib or interface, then how will we access it within Sage?



---

archive/issue_comments_458988.json:
```json
{
    "body": "Note that it is currently unused in Sage.\n\n`sage.interfaces.primecount`, because its compilation depends on an optional package, \nwould have to be provided by a distribution separate from `sagemath-standard`.\n\nFor other modules such as `sage.graphs.graph_decompositions.tdlib` that depend on an optional package, we would indeed split it out as a distribution `sagemath-tdlib`. This is done in #29864. Note that `sage.graphs.graph_decompositions.tdlib` depends on both Sage (by using the `Graph` class) and on the optional package.\n\nThe difference is that `sage.interfaces.primecount` does not depend in any way on Sage. Therefore it should be redone as a standalone Python (Cython) package, in the same way that Vincent split out (and extended) https://pypi.org/project/pplpy/ from Sage (`sage.libs.ppl`).",
    "created_at": "2021-08-27T02:41:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32175#issuecomment-458988",
    "user": "https://github.com/mkoeppe"
}
```

Note that it is currently unused in Sage.

`sage.interfaces.primecount`, because its compilation depends on an optional package, 
would have to be provided by a distribution separate from `sagemath-standard`.

For other modules such as `sage.graphs.graph_decompositions.tdlib` that depend on an optional package, we would indeed split it out as a distribution `sagemath-tdlib`. This is done in #29864. Note that `sage.graphs.graph_decompositions.tdlib` depends on both Sage (by using the `Graph` class) and on the optional package.

The difference is that `sage.interfaces.primecount` does not depend in any way on Sage. Therefore it should be redone as a standalone Python (Cython) package, in the same way that Vincent split out (and extended) https://pypi.org/project/pplpy/ from Sage (`sage.libs.ppl`).



---

archive/issue_comments_458989.json:
```json
{
    "body": "Replying to [comment:7 mkoeppe]:\n> For other modules such as `sage.graphs.graph_decompositions.tdlib` that depend on an optional package, we would indeed split it out as a distribution `sagemath-tdlib`. This is done in #29864. Note that `sage.graphs.graph_decompositions.tdlib` depends on both Sage (by using the `Graph` class) and on the optional package.\n\nThank you for the explanation. Does that mean this distribution meant to replace the current package? Otherwise it feels like double duty as there already is the package itself on top of the library. (My standard example of this is `meataxe`.)\n\n> The difference is that `sage.interfaces.primecount` does not depend in any way on Sage. Therefore it should be redone as a standalone Python (Cython) package, in the same way that Vincent split out (and extended) https://pypi.org/project/pplpy/ from Sage (`sage.libs.ppl`).\n\nSo the expectation here is that such a standalone package would provide a way for it to be important from Python with a usual `import` statement?",
    "created_at": "2021-08-27T12:58:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32175#issuecomment-458989",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:7 mkoeppe]:
> For other modules such as `sage.graphs.graph_decompositions.tdlib` that depend on an optional package, we would indeed split it out as a distribution `sagemath-tdlib`. This is done in #29864. Note that `sage.graphs.graph_decompositions.tdlib` depends on both Sage (by using the `Graph` class) and on the optional package.

Thank you for the explanation. Does that mean this distribution meant to replace the current package? Otherwise it feels like double duty as there already is the package itself on top of the library. (My standard example of this is `meataxe`.)

> The difference is that `sage.interfaces.primecount` does not depend in any way on Sage. Therefore it should be redone as a standalone Python (Cython) package, in the same way that Vincent split out (and extended) https://pypi.org/project/pplpy/ from Sage (`sage.libs.ppl`).

So the expectation here is that such a standalone package would provide a way for it to be important from Python with a usual `import` statement?



---

archive/issue_comments_458990.json:
```json
{
    "body": "Replying to [comment:8 tscrim]:\n> Replying to [comment:7 mkoeppe]:\n> > For other modules such as `sage.graphs.graph_decompositions.tdlib` that depend on an optional package, we would indeed split it out as a distribution `sagemath-tdlib`. This is done in #29864. Note that `sage.graphs.graph_decompositions.tdlib` depends on both Sage (by using the `Graph` class) and on the optional package.\n> \n> Thank you for the explanation. Does that mean this distribution meant to replace the current package? Otherwise it feels like double duty as there already is the package itself on top of the library. (My standard example of this is `meataxe`.)\n\nThere will always be two packages - one providing the C library and one providing the Python bindings.\n\nWhen the Python bindings are not Sage-specific:\n- `ppl` / `pplpy`\n- `igraph` / `python_igraph`\n- `primecount` / `pyprimecount` (to be created) \n\nWhen the Python package is Sage-specific:\n- `tdlib` / `sagemath-tdlib` (to be created in #29864)\n- `meataxe` / `sagemath-meataxe` (to be created in #30151)",
    "created_at": "2021-08-27T18:54:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32175#issuecomment-458990",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:8 tscrim]:
> Replying to [comment:7 mkoeppe]:
> > For other modules such as `sage.graphs.graph_decompositions.tdlib` that depend on an optional package, we would indeed split it out as a distribution `sagemath-tdlib`. This is done in #29864. Note that `sage.graphs.graph_decompositions.tdlib` depends on both Sage (by using the `Graph` class) and on the optional package.
> 
> Thank you for the explanation. Does that mean this distribution meant to replace the current package? Otherwise it feels like double duty as there already is the package itself on top of the library. (My standard example of this is `meataxe`.)

There will always be two packages - one providing the C library and one providing the Python bindings.

When the Python bindings are not Sage-specific:
- `ppl` / `pplpy`
- `igraph` / `python_igraph`
- `primecount` / `pyprimecount` (to be created) 

When the Python package is Sage-specific:
- `tdlib` / `sagemath-tdlib` (to be created in #29864)
- `meataxe` / `sagemath-meataxe` (to be created in #30151)



---

archive/issue_comments_458991.json:
```json
{
    "body": "Replying to [comment:8 tscrim]:\n> > The difference is that `sage.interfaces.primecount` does not depend in any way on Sage. Therefore it should be redone as a standalone Python (Cython) package, in the same way that Vincent split out (and extended) https://pypi.org/project/pplpy/ from Sage (`sage.libs.ppl`).\n> \n> So the expectation here is that such a standalone package would provide a way for it to be imported from Python with a usual `import` statement?\n\nYes, exactly.",
    "created_at": "2021-08-27T18:55:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32175#issuecomment-458991",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:8 tscrim]:
> > The difference is that `sage.interfaces.primecount` does not depend in any way on Sage. Therefore it should be redone as a standalone Python (Cython) package, in the same way that Vincent split out (and extended) https://pypi.org/project/pplpy/ from Sage (`sage.libs.ppl`).
> 
> So the expectation here is that such a standalone package would provide a way for it to be imported from Python with a usual `import` statement?

Yes, exactly.



---

archive/issue_comments_458992.json:
```json
{
    "body": "Okay, thank you. LGTM.",
    "created_at": "2021-08-27T22:33:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32175#issuecomment-458992",
    "user": "https://github.com/tscrim"
}
```

Okay, thank you. LGTM.



---

archive/issue_comments_458993.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-08-27T22:33:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32175#issuecomment-458993",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_458994.json:
```json
{
    "body": "Thanks!",
    "created_at": "2021-08-27T22:58:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32175#issuecomment-458994",
    "user": "https://github.com/mkoeppe"
}
```

Thanks!



---

archive/issue_comments_458995.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-09-13T22:18:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32175#issuecomment-458995",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_458996.json:
```json
{
    "body": "Let us revert this, upgrade primecount, and use it to compute `prime_pi`, instead of buggy and slow Sage code - cf. #24960",
    "created_at": "2021-11-12T22:35:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32175#issuecomment-458996",
    "user": "https://github.com/dimpase"
}
```

Let us revert this, upgrade primecount, and use it to compute `prime_pi`, instead of buggy and slow Sage code - cf. #24960



---

archive/issue_comments_458997.json:
```json
{
    "body": "comment:7, 3rd paragraph, explains the correct way forward",
    "created_at": "2021-11-12T22:37:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32175#issuecomment-458997",
    "user": "https://github.com/mkoeppe"
}
```

comment:7, 3rd paragraph, explains the correct way forward



---

archive/issue_comments_458998.json:
```json
{
    "body": "Replying to [comment:15 mkoeppe]:\n> comment:7, 3rd paragraph, explains the correct way forward\n\nI forgot to mention that we should promote primecount to standard.\nI don't understand why one need to do a special package thing for the (pretty trivial)\ninterface, why can't this just live in sagelib, like other interfaces to C/C++ libs?",
    "created_at": "2021-11-12T23:23:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32175#issuecomment-458998",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:15 mkoeppe]:
> comment:7, 3rd paragraph, explains the correct way forward

I forgot to mention that we should promote primecount to standard.
I don't understand why one need to do a special package thing for the (pretty trivial)
interface, why can't this just live in sagelib, like other interfaces to C/C++ libs?



---

archive/issue_comments_458999.json:
```json
{
    "body": "Replying to [comment:16 dimpase]:\n> I don't understand why one need to do a special package thing for the (pretty trivial)\n> interface, why can't this just live in sagelib, like other interfaces to C/C++ libs?\n\nDid you read my discussion with tscrim above, on exactly this topic?",
    "created_at": "2021-11-12T23:26:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32175#issuecomment-458999",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:16 dimpase]:
> I don't understand why one need to do a special package thing for the (pretty trivial)
> interface, why can't this just live in sagelib, like other interfaces to C/C++ libs?

Did you read my discussion with tscrim above, on exactly this topic?



---

archive/issue_comments_459000.json:
```json
{
    "body": "Perhaps we can use https://github.com/hearot/primecount-python (not on pip, unfortunately)",
    "created_at": "2021-11-12T23:36:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32175#issuecomment-459000",
    "user": "https://github.com/dimpase"
}
```

Perhaps we can use https://github.com/hearot/primecount-python (not on pip, unfortunately)



---

archive/issue_comments_459001.json:
```json
{
    "body": "Replying to [comment:17 mkoeppe]:\n> Replying to [comment:16 dimpase]:\n> > I don't understand why one need to do a special package thing for the (pretty trivial)\n> > interface, why can't this just live in sagelib, like other interfaces to C/C++ libs?\n> \n> Did you read my discussion with tscrim above, on exactly this topic?\n\nIt was about dependence on an optional package, but we're promoting it to standard now?",
    "created_at": "2021-11-12T23:37:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32175#issuecomment-459001",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:17 mkoeppe]:
> Replying to [comment:16 dimpase]:
> > I don't understand why one need to do a special package thing for the (pretty trivial)
> > interface, why can't this just live in sagelib, like other interfaces to C/C++ libs?
> 
> Did you read my discussion with tscrim above, on exactly this topic?

It was about dependence on an optional package, but we're promoting it to standard now?



---

archive/issue_comments_459002.json:
```json
{
    "body": "It doesn't matter that you are promoting it to standard.",
    "created_at": "2021-11-12T23:39:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32175#issuecomment-459002",
    "user": "https://github.com/mkoeppe"
}
```

It doesn't matter that you are promoting it to standard.



---

archive/issue_comments_459003.json:
```json
{
    "body": "anyhow, there is an external package already, it's unfortunately a bit light on the distribution side - well, the author is still in high school according to GH. Maybe he can use some help in building wheels and stuff.",
    "created_at": "2021-11-12T23:43:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32175#issuecomment-459003",
    "user": "https://github.com/dimpase"
}
```

anyhow, there is an external package already, it's unfortunately a bit light on the distribution side - well, the author is still in high school according to GH. Maybe he can use some help in building wheels and stuff.
