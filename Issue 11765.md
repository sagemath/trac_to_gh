# Issue 11765: doctest fails in gap_reps.py

Issue created by migration from https://trac.sagemath.org/ticket/11937

Original creator: dkrenn

Original creation time: 2011-10-18 08:11:09

Assignee: mvngu

Keywords: doctest, gap_reps

The doctest in gap_reps.py


```
EllipticCurve([Integer(1),-Integer(1),Integer(1),-Integer(2680),-Integer(50053)]).galois_representation().image_type(Integer(7))    # long time
```

fails by doctest -long because


```
Expected:
    'The image is a group of order 18.'
Got:
    'The image is a non-abelian group of order 18.'
```

That error is covered by the doctest command of [#11936](http://trac.sagemath.org/sage_trac/ticket/11936), which produces a timeout.

One could think about an extra error message saying that there was an error *and* a timeout


---

Attachment


---

Comment by dkrenn created at 2011-10-18 12:29:02

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2011-11-03 16:14:43

Milestone sage-4.7.3 deleted


---

Comment by johanbosman created at 2011-11-06 18:39:19

I do get 'The image is a group of order 18.' as output to that command.  Is it possible that this problem is caused by the fact that you have installed Kash (or other packages)?


---

Comment by johanbosman created at 2011-11-06 18:39:19

Changing status from needs_review to needs_info.


---

Comment by johanbosman created at 2011-11-06 21:19:43

Replying to [comment:5 johanbosman]:
> I do get 'The image is a group of order 18.' as output to that command.  Is it possible that this problem is caused by the fact that you have installed Kash (or other packages)?
Yes, this is indeed the case. :).  See http://trac.sagemath.org/sage_trac/ticket/11936#comment:6


---

Comment by johanbosman created at 2011-11-08 15:28:28

Changing status from needs_info to needs_review.


---

Comment by johanbosman created at 2011-11-08 15:31:01

In doctests you can make use of ... to handle non-determinstic pieces of the output.  So you could change it into something like

```
'The image is a... group of order 18.'
```

and for consistency, use this for the 36 case as well. :).


---

Comment by johanbosman created at 2011-11-08 15:31:01

Changing status from needs_review to needs_work.


---

Attachment

replaces previous patch


---

Comment by dkrenn created at 2011-11-08 17:05:15

Changing status from needs_work to needs_review.


---

Comment by johanbosman created at 2011-11-08 17:10:47

Changing status from needs_review to needs_work.


---

Comment by johanbosman created at 2011-11-08 17:10:47

Could you add a remark to that doctest that this fixes #11937?  The dots may otherwise look a bit weird to someone who hasn't worked on this ticket. ;).


---

Comment by dkrenn created at 2011-11-08 17:27:49

replaces previous patch


---

Attachment


---

Comment by dkrenn created at 2011-11-08 17:28:26

Changing status from needs_work to needs_review.


---

Comment by johanbosman created at 2011-11-08 18:00:47

Changing status from needs_review to needs_work.


---

Comment by johanbosman created at 2011-11-08 18:00:47

One last piece of nitpicking from my side: it is "may give" instead of "may gives".


---

Attachment

replaces previous patch


---

Comment by dkrenn created at 2011-11-08 18:11:01

Changing status from needs_work to needs_review.


---

Comment by johanbosman created at 2011-11-08 19:18:47

Changing status from needs_review to positive_review.


---

Comment by johanbosman created at 2011-11-08 19:18:47

I've tested it with and without Kash installed (in the former case with a fix of #11936).  Everything works perfectly.


---

Comment by johanbosman created at 2011-11-08 19:18:47

Changing keywords from "doctest, gap_reps" to "doctest, gap_reps, kash".


---

Comment by jdemeyer created at 2011-11-10 13:30:14

Resolution: fixed
