# Issue 21131: Multigraph plot does not use vertex_shape-parameter

archive/issues_021131.json:
```json
{
    "body": "CC:  paulmasson\n\nThis shows how for example `vertex_colors` is used in both simple and multigprahs, but `vertex_shape` is not:\n\n\n```\ng = DiGraph({0: [1]})\ng.show(vertex_shape='s', vertex_colors={'red': [0]})\ng.allow_multiple_edges(True)\ng.add_edge(0, 1)\ng.show(vertex_shape='s', vertex_colors={'blue': [0]})\n```\n\n\nIf I change `graph_plot.py` line 471 to be `if False:` it seems to work. So what is the reason to plot multigraph with `[circle(...) for ...]` and simple graph with `scatter_plot(...)`?\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/21368\n\n",
    "created_at": "2016-08-30T08:12:57Z",
    "labels": [
        "graphics",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.4",
    "title": "Multigraph plot does not use vertex_shape-parameter",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21131",
    "user": "jmantysalo"
}
```
CC:  paulmasson

This shows how for example `vertex_colors` is used in both simple and multigprahs, but `vertex_shape` is not:


```
g = DiGraph({0: [1]})
g.show(vertex_shape='s', vertex_colors={'red': [0]})
g.allow_multiple_edges(True)
g.add_edge(0, 1)
g.show(vertex_shape='s', vertex_colors={'blue': [0]})
```


If I change `graph_plot.py` line 471 to be `if False:` it seems to work. So what is the reason to plot multigraph with `[circle(...) for ...]` and simple graph with `scatter_plot(...)`?


Issue created by migration from https://trac.sagemath.org/ticket/21368





---

archive/issue_comments_292784.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-08-30T09:19:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21131#issuecomment-292784",
    "user": "jmantysalo"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_292785.json:
```json
{
    "body": "This code is painful to read. However, with this patch it should be a little bit shorter and one bug corrected.\n----\nNew commits:",
    "created_at": "2016-08-30T09:19:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21131#issuecomment-292785",
    "user": "jmantysalo"
}
```

This code is painful to read. However, with this patch it should be a little bit shorter and one bug corrected.
----
New commits:



---

archive/issue_comments_292786.json:
```json
{
    "body": "If appears to me that the reason for using only circles on the multigraphs is to make the graph look better by having edges terminate close to the circle's radius. That looks like the entire point of the method `_polar_hack_for_multidigraph`.\n\nSimply removing the code with `circle` invalidates a whole bunch of other code in this file. I wouldn't recommend doing so unless you're going to remove all of the other code dependent on the existence of the circles. At the very least this ticket should be discussed on `sage-devel` because it will change the appearance of multigraphs significantly.",
    "created_at": "2016-09-02T01:50:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21131#issuecomment-292786",
    "user": "paulmasson"
}
```

If appears to me that the reason for using only circles on the multigraphs is to make the graph look better by having edges terminate close to the circle's radius. That looks like the entire point of the method `_polar_hack_for_multidigraph`.

Simply removing the code with `circle` invalidates a whole bunch of other code in this file. I wouldn't recommend doing so unless you're going to remove all of the other code dependent on the existence of the circles. At the very least this ticket should be discussed on `sage-devel` because it will change the appearance of multigraphs significantly.



---

archive/issue_comments_292787.json:
```json
{
    "body": "Replying to [comment:3 paulmasson]:\n\n> Simply removing the code with `circle` invalidates a whole bunch of other code in this file. I wouldn't recommend doing so unless you're going to remove all of the other code dependent on the existence of the circles.\n\nHmm... Can you give an example of a graph that changes with this patch?\n\nIn general: We need a quite large test set to see that all combinations of graph/digraph, graph/pseudograph and graph/multigraph works. Also there can be several combinations of vertex sizes and colors etc. Edge coloring should work with or without edge labels etc. Something like\n\n\n```\nG = DiGraph(3)\nG.allow_multiple_edges(True)\nG.add_edge(1, 2, 'a')\nG.add_edge(1, 2, 'b')\nG.add_edge(2, 1, 'a')\nG.add_edge(1, 3, 'd')\nG.add_edge(1, 3, 'e')\nG.add_edge(0, 3)\nG.show(edge_colors={'red': [(1, 2, 'a')], 'blue': [(1,3)]})\n```\n\n\nshould work.",
    "created_at": "2016-09-02T06:58:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21131#issuecomment-292787",
    "user": "jmantysalo"
}
```

Replying to [comment:3 paulmasson]:

> Simply removing the code with `circle` invalidates a whole bunch of other code in this file. I wouldn't recommend doing so unless you're going to remove all of the other code dependent on the existence of the circles.

Hmm... Can you give an example of a graph that changes with this patch?

In general: We need a quite large test set to see that all combinations of graph/digraph, graph/pseudograph and graph/multigraph works. Also there can be several combinations of vertex sizes and colors etc. Edge coloring should work with or without edge labels etc. Something like


```
G = DiGraph(3)
G.allow_multiple_edges(True)
G.add_edge(1, 2, 'a')
G.add_edge(1, 2, 'b')
G.add_edge(2, 1, 'a')
G.add_edge(1, 3, 'd')
G.add_edge(1, 3, 'e')
G.add_edge(0, 3)
G.show(edge_colors={'red': [(1, 2, 'a')], 'blue': [(1,3)]})
```


should work.



---

archive/issue_comments_292788.json:
```json
{
    "body": "Btw, this fails too:\n\n\n```\nG = graphs.CubeGraph(3)\nG.show()\nsage.graphs.graph_plot.DEFAULT_SHOW_OPTIONS['figsize'] = [2,2]\nsage.graphs.graph_plot.DEFAULT_PLOT_OPTIONS['vertex_color'] = 'green'\nG.show()\nsage.graphs.graph_plot.DEFAULT_SHOW_OPTIONS['vertex_color'] = 'red'\nG.show()\n```\n\n\nThat is, `DEFAULT_SHOW_OPTIONS` accepts only some values whereas `DEFAULT_PLOT_OPTIONS` accepts them all.",
    "created_at": "2016-09-02T07:05:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21131#issuecomment-292788",
    "user": "jmantysalo"
}
```

Btw, this fails too:


```
G = graphs.CubeGraph(3)
G.show()
sage.graphs.graph_plot.DEFAULT_SHOW_OPTIONS['figsize'] = [2,2]
sage.graphs.graph_plot.DEFAULT_PLOT_OPTIONS['vertex_color'] = 'green'
G.show()
sage.graphs.graph_plot.DEFAULT_SHOW_OPTIONS['vertex_color'] = 'red'
G.show()
```


That is, `DEFAULT_SHOW_OPTIONS` accepts only some values whereas `DEFAULT_PLOT_OPTIONS` accepts them all.



---

archive/issue_comments_292789.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-09-02T08:01:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21131#issuecomment-292789",
    "user": "jmantysalo"
}
```

Changing status from needs_review to needs_work.
