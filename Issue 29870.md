# Issue 29870: Fix docstring failures in designs.balanced_incomplete_block_design with use_LJCR=True

archive/issues_029870.json:
```json
{
    "body": "CC:  @dimpase\n\nKeywords: bibd, LJCR\n\nThe use of `use_LJCR=True` in `designs.balanced_incomplete_block_design` give rise to a few issues.\n1. The returned object has type `IncidenceStructure` instead of `BalancedIncompleteBlockDesign`\n2. A `URLError` exception is raised\n\nAn example for 2 is:\n\n```\nsage: designs.balanced_incomplete_block_design(85,7,1,use_LJCR=True)\nTraceback (most recent call last):\n...\nURLError: <urlopen error unknown url type: https>\n```\n\n\nIn addition to the above, the docstring tests that are meant to test the use of `use_LJCR=True` are not actually testing the LJCR online database.\n\nIssue created by migration from https://trac.sagemath.org/ticket/30107\n\n",
    "created_at": "2020-07-10T21:46:38Z",
    "labels": [
        "component: combinatorial designs",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Fix docstring failures in designs.balanced_incomplete_block_design with use_LJCR=True",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29870",
    "user": "https://github.com/Ivo-Maffei"
}
```
CC:  @dimpase

Keywords: bibd, LJCR

The use of `use_LJCR=True` in `designs.balanced_incomplete_block_design` give rise to a few issues.
1. The returned object has type `IncidenceStructure` instead of `BalancedIncompleteBlockDesign`
2. A `URLError` exception is raised

An example for 2 is:

```
sage: designs.balanced_incomplete_block_design(85,7,1,use_LJCR=True)
Traceback (most recent call last):
...
URLError: <urlopen error unknown url type: https>
```


In addition to the above, the docstring tests that are meant to test the use of `use_LJCR=True` are not actually testing the LJCR online database.

Issue created by migration from https://trac.sagemath.org/ticket/30107





---

archive/issue_comments_423804.json:
```json
{
    "body": "I tried looking for an entry in the LJCR database that gets used by Sage, but I can't find one.\nI run the code\n\n\n```\nsage: for v in range(100):\n....:     for k in range(v):\n....:         D = designs.balanced_incomplete_block_design(v,k,1,use_LJCR=True, existence=True)\n....:         if D == 3:\n....:             print(v,k)\n```\n\nwhere I changed the `balanced_incomplete_block_design` function to return 3 instead of `True` if the LJCR database was used.\n\nI didn't obtain any results. So I think that the LJCR database is actually never used.\n\nOn a side note, to fix the `URLError` I swapped the url to use http instead of https. I don't think there is a security issue in retrieving values for Sage, yet you never know how Sage might get used. Hence, I believe the issue should be fixed at the level of `urllib` (the python library used for the request).\nI don't have the knowledge to fix it myself, though.\n----\nNew commits:",
    "created_at": "2020-07-10T22:26:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29870#issuecomment-423804",
    "user": "https://github.com/Ivo-Maffei"
}
```

I tried looking for an entry in the LJCR database that gets used by Sage, but I can't find one.
I run the code


```
sage: for v in range(100):
....:     for k in range(v):
....:         D = designs.balanced_incomplete_block_design(v,k,1,use_LJCR=True, existence=True)
....:         if D == 3:
....:             print(v,k)
```

where I changed the `balanced_incomplete_block_design` function to return 3 instead of `True` if the LJCR database was used.

I didn't obtain any results. So I think that the LJCR database is actually never used.

On a side note, to fix the `URLError` I swapped the url to use http instead of https. I don't think there is a security issue in retrieving values for Sage, yet you never know how Sage might get used. Hence, I believe the issue should be fixed at the level of `urllib` (the python library used for the request).
I don't have the knowledge to fix it myself, though.
----
New commits:



---

archive/issue_comments_423805.json:
```json
{
    "body": "to see the errors (before this branch), run\n\n```\n./sage -tp --optional=build,dochtml,memlimit,internet,sage src/sage/combinat/designs/\n```\n\nIn particular I see\n\n```\nsage -t --warn-long 81.5 src/sage/combinat/designs/bibd.py\n**********************************************************************\nFile \"src/sage/combinat/designs/bibd.py\", line 157, in sage.combinat.designs.bibd.balanced_incomplete_block_design\nFailed example:\n    B                                                              # optional - internet\nExpected:\n    Incidence structure with 66 points and 143 blocks\nGot:\n    (66,6,1)-Balanced Incomplete Block Design\n**********************************************************************\nFile \"src/sage/combinat/designs/bibd.py\", line 161, in sage.combinat.designs.bibd.balanced_incomplete_block_design\nFailed example:\n    designs.balanced_incomplete_block_design(66, 6, 1, use_LJCR=True)  # optional - internet\nExpected:\n    Incidence structure with 66 points and 143 blocks\nGot:\n    (66,6,1)-Balanced Incomplete Block Design\n**********************************************************************\n```\n",
    "created_at": "2020-07-11T10:25:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29870#issuecomment-423805",
    "user": "https://github.com/dimpase"
}
```

to see the errors (before this branch), run

```
./sage -tp --optional=build,dochtml,memlimit,internet,sage src/sage/combinat/designs/
```

In particular I see

```
sage -t --warn-long 81.5 src/sage/combinat/designs/bibd.py
**********************************************************************
File "src/sage/combinat/designs/bibd.py", line 157, in sage.combinat.designs.bibd.balanced_incomplete_block_design
Failed example:
    B                                                              # optional - internet
Expected:
    Incidence structure with 66 points and 143 blocks
Got:
    (66,6,1)-Balanced Incomplete Block Design
**********************************************************************
File "src/sage/combinat/designs/bibd.py", line 161, in sage.combinat.designs.bibd.balanced_incomplete_block_design
Failed example:
    designs.balanced_incomplete_block_design(66, 6, 1, use_LJCR=True)  # optional - internet
Expected:
    Incidence structure with 66 points and 143 blocks
Got:
    (66,6,1)-Balanced Incomplete Block Design
**********************************************************************
```




---

archive/issue_comments_423806.json:
```json
{
    "body": "With your branch, all the tests as in comment:3 pass. However, I can revert your change https->http as follows and still have all the tests pass.\n\n\n```diff\n--- a/src/sage/combinat/designs/covering_design.py\n+++ b/src/sage/combinat/designs/covering_design.py\n@@ -521,7 +521,7 @@ def best_known_covering_design_www(v, k, t, verbose=False):\n     k = int(k)\n     t = int(t)\n     param = \"?v=%s&k=%s&t=%s\" % (v, k, t)\n-    url = \"http://ljcr.dmgordon.org/cover/get_cover.php\" + param\n+    url = \"https://ljcr.dmgordon.org/cover/get_cover.php\" + param\n     if verbose:\n         print(\"Looking up the bounds at %s\" % url)\n \n```\n\n\nIt appears that in your Sage's python URLlib is broken. Of course it should be able to handle https. Tell me more about your `./sage --python`. Do you build it, or use one from OS?",
    "created_at": "2020-07-11T10:33:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29870#issuecomment-423806",
    "user": "https://github.com/dimpase"
}
```

With your branch, all the tests as in comment:3 pass. However, I can revert your change https->http as follows and still have all the tests pass.


```diff
--- a/src/sage/combinat/designs/covering_design.py
+++ b/src/sage/combinat/designs/covering_design.py
@@ -521,7 +521,7 @@ def best_known_covering_design_www(v, k, t, verbose=False):
     k = int(k)
     t = int(t)
     param = "?v=%s&k=%s&t=%s" % (v, k, t)
-    url = "http://ljcr.dmgordon.org/cover/get_cover.php" + param
+    url = "https://ljcr.dmgordon.org/cover/get_cover.php" + param
     if verbose:
         print("Looking up the bounds at %s" % url)
 
```


It appears that in your Sage's python URLlib is broken. Of course it should be able to handle https. Tell me more about your `./sage --python`. Do you build it, or use one from OS?



---

archive/issue_comments_423807.json:
```json
{
    "body": "Is this otherwise ready for review?",
    "created_at": "2020-07-11T10:36:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29870#issuecomment-423807",
    "user": "https://github.com/dimpase"
}
```

Is this otherwise ready for review?



---

archive/issue_comments_423808.json:
```json
{
    "body": "I'm not sure where the python software I have comes from.\nIf it can help I have the following output\n\n```\n% sage --python\nPython 3.7.3 (default, May  6 2020, 12:19:52) \n[Clang 11.0.3 (clang-1103.0.32.59)] on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n```\n\n\nActually the full traceback when I get the `URLError` is the following:\n\n```\nURLError                                  Traceback (most recent call last)\n<ipython-input-1-aace303dd913> in <module>()\n----> 1 designs.balanced_incomplete_block_design(Integer(85),Integer(7),Integer(1),use_LJCR=True)\n\n/Users/ivomaffei/sage/local/lib/python3.7/site-packages/sage/misc/lazy_import.pyx in sage.misc.lazy_import.LazyImport.__call__ (build/cythonized/sage/misc/lazy_import.c:3675)()\n    351             True\n    352         \"\"\"\n--> 353         return self.get_object()(*args, **kwds)\n    354 \n    355     def __repr__(self):\n\n/Users/ivomaffei/sage/local/lib/python3.7/site-packages/sage/combinat/designs/bibd.py in balanced_incomplete_block_design(v, k, lambd, existence, use_LJCR)\n    253         values_in_db = False\n    254         try:\n--> 255             B = best_known_covering_design_www(v, k, 2)\n    256             values_in_db = True\n    257         except ValueError:\n\n/Users/ivomaffei/sage/local/lib/python3.7/site-packages/sage/combinat/designs/covering_design.py in best_known_covering_design_www(v, k, t, verbose)\n    526         print(\"Looking up the bounds at %s\" % url)\n    527 \n--> 528     f = urlopen(url)\n    529     try:\n    530         s = bytes_to_str(f.read())\n\n/Users/ivomaffei/sage/local/lib/python3.7/urllib/request.py in urlopen(url, data, timeout, cafile, capath, cadefault, context)\n    220     else:\n    221         opener = _opener\n--> 222     return opener.open(url, data, timeout)\n    223 \n    224 def install_opener(opener):\n\n/Users/ivomaffei/sage/local/lib/python3.7/urllib/request.py in open(self, fullurl, data, timeout)\n    523             req = meth(req)\n    524 \n--> 525         response = self._open(req, data)\n    526 \n    527         # post-process response\n\n/Users/ivomaffei/sage/local/lib/python3.7/urllib/request.py in _open(self, req, data)\n    546 \n    547         return self._call_chain(self.handle_open, 'unknown',\n--> 548                                 'unknown_open', req)\n    549 \n    550     def error(self, proto, *args):\n\n/Users/ivomaffei/sage/local/lib/python3.7/urllib/request.py in _call_chain(self, chain, kind, meth_name, *args)\n    501         for handler in handlers:\n    502             func = getattr(handler, meth_name)\n--> 503             result = func(*args)\n    504             if result is not None:\n    505                 return result\n\n/Users/ivomaffei/sage/local/lib/python3.7/urllib/request.py in unknown_open(self, req)\n   1385     def unknown_open(self, req):\n   1386         type = req.type\n-> 1387         raise URLError('unknown url type: %s' % type)\n   1388 \n   1389 def parse_keqv_list(l):\n\nURLError: <urlopen error unknown url type: https>\n```\n\n\nSo it seems the issues lies in the python shipped with sage.\n\nApart from the above, I would like to substitute the parameters of the docstring test as at the moment they are not testing the LJCR database. However, I can't find any set of parameters for which the LJCR database is actually used by sage.",
    "created_at": "2020-07-11T15:39:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29870#issuecomment-423808",
    "user": "https://github.com/Ivo-Maffei"
}
```

I'm not sure where the python software I have comes from.
If it can help I have the following output

```
% sage --python
Python 3.7.3 (default, May  6 2020, 12:19:52) 
[Clang 11.0.3 (clang-1103.0.32.59)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
```


Actually the full traceback when I get the `URLError` is the following:

```
URLError                                  Traceback (most recent call last)
<ipython-input-1-aace303dd913> in <module>()
----> 1 designs.balanced_incomplete_block_design(Integer(85),Integer(7),Integer(1),use_LJCR=True)

/Users/ivomaffei/sage/local/lib/python3.7/site-packages/sage/misc/lazy_import.pyx in sage.misc.lazy_import.LazyImport.__call__ (build/cythonized/sage/misc/lazy_import.c:3675)()
    351             True
    352         """
--> 353         return self.get_object()(*args, **kwds)
    354 
    355     def __repr__(self):

/Users/ivomaffei/sage/local/lib/python3.7/site-packages/sage/combinat/designs/bibd.py in balanced_incomplete_block_design(v, k, lambd, existence, use_LJCR)
    253         values_in_db = False
    254         try:
--> 255             B = best_known_covering_design_www(v, k, 2)
    256             values_in_db = True
    257         except ValueError:

/Users/ivomaffei/sage/local/lib/python3.7/site-packages/sage/combinat/designs/covering_design.py in best_known_covering_design_www(v, k, t, verbose)
    526         print("Looking up the bounds at %s" % url)
    527 
--> 528     f = urlopen(url)
    529     try:
    530         s = bytes_to_str(f.read())

/Users/ivomaffei/sage/local/lib/python3.7/urllib/request.py in urlopen(url, data, timeout, cafile, capath, cadefault, context)
    220     else:
    221         opener = _opener
--> 222     return opener.open(url, data, timeout)
    223 
    224 def install_opener(opener):

/Users/ivomaffei/sage/local/lib/python3.7/urllib/request.py in open(self, fullurl, data, timeout)
    523             req = meth(req)
    524 
--> 525         response = self._open(req, data)
    526 
    527         # post-process response

/Users/ivomaffei/sage/local/lib/python3.7/urllib/request.py in _open(self, req, data)
    546 
    547         return self._call_chain(self.handle_open, 'unknown',
--> 548                                 'unknown_open', req)
    549 
    550     def error(self, proto, *args):

/Users/ivomaffei/sage/local/lib/python3.7/urllib/request.py in _call_chain(self, chain, kind, meth_name, *args)
    501         for handler in handlers:
    502             func = getattr(handler, meth_name)
--> 503             result = func(*args)
    504             if result is not None:
    505                 return result

/Users/ivomaffei/sage/local/lib/python3.7/urllib/request.py in unknown_open(self, req)
   1385     def unknown_open(self, req):
   1386         type = req.type
-> 1387         raise URLError('unknown url type: %s' % type)
   1388 
   1389 def parse_keqv_list(l):

URLError: <urlopen error unknown url type: https>
```


So it seems the issues lies in the python shipped with sage.

Apart from the above, I would like to substitute the parameters of the docstring test as at the moment they are not testing the LJCR database. However, I can't find any set of parameters for which the LJCR database is actually used by sage.



---

archive/issue_comments_423809.json:
```json
{
    "body": "Seems you built or installed Sage without OpenSSL.",
    "created_at": "2020-07-11T22:50:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29870#issuecomment-423809",
    "user": "https://github.com/slel"
}
```

Seems you built or installed Sage without OpenSSL.



---

archive/issue_comments_423810.json:
```json
{
    "body": "I use macOS which ships with LibreSSL and sort of \"redirect\" all OpenSSL commands to LibreSSL, i.e.\n\n```\n% openssl version\nLibreSSL 2.8.3\n```\n\n\nI looked back at the installation guide (https://doc.sagemath.org/html/en/installation/source.html#prerequisites) and it seems that OpenSSL is recommended but not strictly required.\nI personally, would like to avoid the need to install OpenSSL systemwide.\n\nIf OpenSSL is actually required (as it seems in this case), then the installation guide should be changed.\nMoreover, reading both the \"Install from Source Code\" and \"Install from Pre-built Binaries\" sections I have another doubt:\nthe former states that it is not possible to distribute OpenSSL with Sage, yet the latter doesn't mention OpenSSL under the macOS section, so that section would also need to change.",
    "created_at": "2020-07-12T10:17:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29870#issuecomment-423810",
    "user": "https://github.com/Ivo-Maffei"
}
```

I use macOS which ships with LibreSSL and sort of "redirect" all OpenSSL commands to LibreSSL, i.e.

```
% openssl version
LibreSSL 2.8.3
```


I looked back at the installation guide (https://doc.sagemath.org/html/en/installation/source.html#prerequisites) and it seems that OpenSSL is recommended but not strictly required.
I personally, would like to avoid the need to install OpenSSL systemwide.

If OpenSSL is actually required (as it seems in this case), then the installation guide should be changed.
Moreover, reading both the "Install from Source Code" and "Install from Pre-built Binaries" sections I have another doubt:
the former states that it is not possible to distribute OpenSSL with Sage, yet the latter doesn't mention OpenSSL under the macOS section, so that section would also need to change.



---

archive/issue_comments_423811.json:
```json
{
    "body": "We have had long discussions on OpenSSL, you can check sage-devel...\n\nWell, thanks to Apple for breaking Python on macOS, what can I say.\n\nYou can install Homebrew Python3, so it will live in /usr/local, \nor use something like docker to test on unbroken Python, or build Sage's Python\nby configuring with `--with-system-python=no` (and then you'd also need to first install Sage's openssl and pyopenssl packages)\n\nAnyhow, just revert the change https->http, so that I can set this ticket to positive review.",
    "created_at": "2020-07-12T10:49:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29870#issuecomment-423811",
    "user": "https://github.com/dimpase"
}
```

We have had long discussions on OpenSSL, you can check sage-devel...

Well, thanks to Apple for breaking Python on macOS, what can I say.

You can install Homebrew Python3, so it will live in /usr/local, 
or use something like docker to test on unbroken Python, or build Sage's Python
by configuring with `--with-system-python=no` (and then you'd also need to first install Sage's openssl and pyopenssl packages)

Anyhow, just revert the change https->http, so that I can set this ticket to positive review.



---

archive/issue_comments_423812.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-12T11:00:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29870#issuecomment-423812",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_423813.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-07-12T11:02:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29870#issuecomment-423813",
    "user": "https://github.com/dimpase"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_423814.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-07-12T11:03:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29870#issuecomment-423814",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_423815.json:
```json
{
    "body": "lgtm",
    "created_at": "2020-07-12T11:03:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29870#issuecomment-423815",
    "user": "https://github.com/dimpase"
}
```

lgtm



---

archive/issue_comments_423816.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-07-12T18:22:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29870#issuecomment-423816",
    "user": "https://github.com/slel"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_423817.json:
```json
{
    "body": "Some more suggestions if you care. Otherwise just set back to positive review.\n\nRemove this commented-out print (debugging leftover?)\n\n```\n        #print(\"LJCR with params {}, {}, 1\".format(v,k))\n```\n\n\nRemove space before question mark:\n\n```\n-            # Is it a BIBD or just a good covering ?\n+            # Is it a BIBD or just a good covering?\n```\n\n\nAdd space around `//`:\n\n```\n-            expected_n_of_blocks = binomial(v, 2)//binomial(k, 2)\n+            expected_n_of_blocks = binomial(v, 2) // binomial(k, 2)\n```\n\n\nUse f-strings and lowercase.\n\n```\n-                raise EmptySetError(\"There exists no ({},{},{})-BIBD\".format(v, k, lambd))\n+                raise EmptySetError(f\"there exists no ({v},{k},{lambd})-BIBD\")\n```\n",
    "created_at": "2020-07-12T18:22:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29870#issuecomment-423817",
    "user": "https://github.com/slel"
}
```

Some more suggestions if you care. Otherwise just set back to positive review.

Remove this commented-out print (debugging leftover?)

```
        #print("LJCR with params {}, {}, 1".format(v,k))
```


Remove space before question mark:

```
-            # Is it a BIBD or just a good covering ?
+            # Is it a BIBD or just a good covering?
```


Add space around `//`:

```
-            expected_n_of_blocks = binomial(v, 2)//binomial(k, 2)
+            expected_n_of_blocks = binomial(v, 2) // binomial(k, 2)
```


Use f-strings and lowercase.

```
-                raise EmptySetError("There exists no ({},{},{})-BIBD".format(v, k, lambd))
+                raise EmptySetError(f"there exists no ({v},{k},{lambd})-BIBD")
```




---

archive/issue_comments_423818.json:
```json
{
    "body": "After the class `BalancedIncompleteBlockDesign`,\nan alias `BIBD = BalancedIncompleteBlockDesign`\ncould help shorten many long lines.",
    "created_at": "2020-07-12T18:47:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29870#issuecomment-423818",
    "user": "https://github.com/slel"
}
```

After the class `BalancedIncompleteBlockDesign`,
an alias `BIBD = BalancedIncompleteBlockDesign`
could help shorten many long lines.



---

archive/issue_comments_423819.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-07-12T22:22:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29870#issuecomment-423819",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_423820.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-07-12T22:23:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29870#issuecomment-423820",
    "user": "https://github.com/Ivo-Maffei"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_423821.json:
```json
{
    "body": "I fixed the suggested formatting and rebased the branch on 9.2.beta5",
    "created_at": "2020-07-12T22:23:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29870#issuecomment-423821",
    "user": "https://github.com/Ivo-Maffei"
}
```

I fixed the suggested formatting and rebased the branch on 9.2.beta5



---

archive/issue_comments_423822.json:
```json
{
    "body": "Looks good to me if the patchbot is happy.",
    "created_at": "2020-07-12T22:33:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29870#issuecomment-423822",
    "user": "https://github.com/slel"
}
```

Looks good to me if the patchbot is happy.



---

archive/issue_comments_423823.json:
```json
{
    "body": "Regarding OpenSSL for Sage on macOS, you can fix\nyour Sage installation using fix_mac_sage.\n\n- https://github.com/3-manifolds/fix_mac_sage/",
    "created_at": "2020-07-13T08:39:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29870#issuecomment-423823",
    "user": "https://github.com/slel"
}
```

Regarding OpenSSL for Sage on macOS, you can fix
your Sage installation using fix_mac_sage.

- https://github.com/3-manifolds/fix_mac_sage/



---

archive/issue_comments_423824.json:
```json
{
    "body": "Bots are happy. Positive review.\n\nRegarding the minor warnings:\n- Pycodestyle complains about \"multiple statements on one line\".\n  Those are not from this ticket, so they could be dealt with elsewhere.\n- Pyflakes complains about the f-string, maybe it still wants py2 and py3 compatible code.",
    "created_at": "2020-07-13T08:47:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29870#issuecomment-423824",
    "user": "https://github.com/slel"
}
```

Bots are happy. Positive review.

Regarding the minor warnings:
- Pycodestyle complains about "multiple statements on one line".
  Those are not from this ticket, so they could be dealt with elsewhere.
- Pyflakes complains about the f-string, maybe it still wants py2 and py3 compatible code.



---

archive/issue_comments_423825.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-07-13T08:47:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29870#issuecomment-423825",
    "user": "https://github.com/slel"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_423826.json:
```json
{
    "body": "The \"multiple statements on one line\" are fixed at #30131.",
    "created_at": "2020-07-15T01:33:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29870#issuecomment-423826",
    "user": "https://github.com/slel"
}
```

The "multiple statements on one line" are fixed at #30131.



---

archive/issue_comments_423827.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2020-07-15T09:02:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29870#issuecomment-423827",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_423828.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2020-07-15T09:02:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29870#issuecomment-423828",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_423829.json:
```json
{
    "body": "I merged the tickets because there was a merge conflict",
    "created_at": "2020-07-15T09:06:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29870#issuecomment-423829",
    "user": "https://github.com/Ivo-Maffei"
}
```

I merged the tickets because there was a merge conflict



---

archive/issue_comments_423830.json:
```json
{
    "body": "coudln't\n\n```\n+    elif x <= 66:\n+        t,u = 30*s+11, x-55\n+    elif x <= 96:\n+        t,u = 30*s+11, x-55\n+    elif x <= 121:\n+        t,u = 30*s+11, x-55\n```\n\nbe simplified to\n\n```\n+    elif x <= 121:\n+        t,u = 30*s+11, x-55\n```\n\n\n?",
    "created_at": "2020-07-15T10:21:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29870#issuecomment-423830",
    "user": "https://github.com/dimpase"
}
```

coudln't

```
+    elif x <= 66:
+        t,u = 30*s+11, x-55
+    elif x <= 96:
+        t,u = 30*s+11, x-55
+    elif x <= 121:
+        t,u = 30*s+11, x-55
```

be simplified to

```
+    elif x <= 121:
+        t,u = 30*s+11, x-55
```


?



---

archive/issue_comments_423831.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-15T11:51:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29870#issuecomment-423831",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_423832.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-07-17T08:46:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29870#issuecomment-423832",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_423833.json:
```json
{
    "body": "OK, good",
    "created_at": "2020-07-17T08:46:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29870#issuecomment-423833",
    "user": "https://github.com/dimpase"
}
```

OK, good



---

archive/issue_comments_423834.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-07-28T22:34:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29870#issuecomment-423834",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_077550.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-07-28T22:34:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29870",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29870#event-77550"
}
```
