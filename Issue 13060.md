# Issue 13060: LaTeX export for plots

Issue created by migration from https://trac.sagemath.org/ticket/13232

Original creator: nthiery

Original creation time: 2012-07-11 20:40:16

Assignee: jason, was

CC:  ddrake jhpalmieri kcrisman bertheville.chloe@club-internet.fr thomas.ayoub@u-psud.fr arthur.mauvezin@u-psud.fr tscrim

Keywords: latex, plot

Implement latex methods for plots to produce latex/tikz pictures.


---

Attachment


---

Comment by nthiery created at 2012-07-11 22:47:35

First draft written by three students of mine. More details to come after dinner :-)


---

Comment by kcrisman created at 2012-07-12 03:32:02

Oh wow, this would be cool.  Now I don't know which would look better - SageTeX with `sageplot` environment or this?


---

Comment by nthiery created at 2012-07-12 04:09:45

A sage plot


---

Attachment

The TeX  produced from it (with a little manual tweak)


---

Comment by nthiery created at 2012-07-12 04:10:59

The pdf obtained by compiling the TeX


---

Attachment

As an example, I attached the result of using this patch on the following plot::

```
sage: L = RootSystem(['A',2,1]).weight_space()
sage: P = L.plot(size=[[-1..1],[-1..1]],alcovewalks=[[0,2,0,1,2,1,2,0,2,1]]); P
```


I had to tweak a tiny bit the latex, for tikz crashes with an arithmetic error when given the option `color={rgb: red,0;green,0;blue,0`}. Otherwise, I guess that using

```
sage: view(P)
```

would have worked.

Anyway, it would be best to use named colors instead, and not to repeat opacity=1 all the time.


---

Comment by ppurka created at 2012-07-12 07:22:41

Some minor comments:
1. Is it necessary or useful to add `_latex` method to `GraphicsPrimitive` and override that from the `arc`, `line`, etc? I think this method is used only in `Graphics` so that only one `\begin{tikzpicture}` is used, right? Since the classes `Arc`, `Line`, etc are not exposed hence it doesn't seem to matter whether the method is named `latex` or `_latex`. I am not sure which is the correct approach here, so I am just curious.
2. Should it return an empty string from `Graphics` if there are no objects in it? Again, I am just wondering because I am not sure which behavior is more appropriate. Currently, this patch results in the following behavior:

```
sage: G = Graphics()
sage: latex(G)
\begin{tikzpicture}

\end{tikzpicture}
sage: len(G)
0
```

3. The check for `None` should be done by using `is` or `is not`, according to [this PEP](http://www.python.org/dev/peps/pep-0008/#programming-recommendations).


---

Comment by nthiery created at 2012-07-12 15:05:02

Replying to [comment:7 ppurka]:
> Some minor comments:
> 1. Is it necessary or useful to add `_latex` method to `GraphicsPrimitive` and override that from the `arc`, `line`, etc? I think this method is used only in `Graphics` so that only one `\begin{tikzpicture}` is used, right? Since the classes `Arc`, `Line`, etc are not exposed hence it doesn't seem to matter whether the method is named `latex` or `_latex`. I am not sure which is the correct approach here, so I am just curious.

In any cases, all the methods should be named _latex_, for consistency with SageObject. At this point, I don't see a use for having _latex_ in GraphicsPrimitive, since there is already a default (admittedly pretty useless in this case) implementation in SageObject. 

> 2. Should it return an empty string from `Graphics` if there are no objects in it? Again, I am just wondering because I am not sure which behavior is more appropriate. Currently, this patch results in the following behavior:
> {{{
> sage: G = Graphics()
> sage: latex(G)
> \begin{tikzpicture}
> 
> \end{tikzpicture}
> sage: len(G)
> 0
> }}}

That's sounds reasonable; let's not introduce a special case.

> 3. The check for `None` should be done by using `is` or `is not`, according to [this PEP](http://www.python.org/dev/peps/pep-0008/#programming-recommendations).

+1

Thanks for your comments!


---

Comment by nthiery created at 2012-07-12 15:08:47

Chloe, Thomas, Arthur,

Are you planning to work further on this patch?

If not, any volunteer to take on this project?


---

Comment by ddrake created at 2012-07-12 19:40:46

A plot of a function produces unexciting results:

```
sage: p = plot(sin(x), (0, 2*pi))
sage: latex(p)
\begin{tikzpicture}
\draw [color={rgb: red,0;green,0;blue,1}, line width=1pt, opacity=1] (0.0,0.0) -- (0.0199042066897,0.0199028924494);
\end{tikzpicture}
```

But perhaps we should focus on getting plots to work later.


---

Comment by ddrake created at 2012-07-12 19:58:40

Also, here are a couple links to projects for turning matplotlib things into TikZ:

https://github.com/nschloe/matplotlib2tikz

https://github.com/pwuertz/matplotlib-backend-pgf/

We might still want to do our own TikZ export, but those are potentially of use.


---

Comment by tscrim created at 2016-07-02 18:30:50

In some ways, this is already handled by matplotlib's PGF export, but I think it would still be good to have a native (and more compact) version of the graphics objects (in particular, so it doesn't go through `show`, need to create a temp file, and come with all of the "standard" plot things).
