# Issue 22351: Let make (doc) really always work

archive/issues_022351.json:
```json
{
    "body": "If we change git branches, make (doc) often fails. It turns out that the caching mechanism in sage doc builder is unreliable and is the root cause of these failures. The patch removes the caching mechanism and implements a more robust logic to auto-update module docs.\n\nIssue created by migration from https://trac.sagemath.org/ticket/22588\n\n",
    "created_at": "2017-03-13T00:24:58Z",
    "labels": [
        "documentation",
        "major",
        "bug"
    ],
    "title": "Let make (doc) really always work",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22351",
    "user": "klee"
}
```
If we change git branches, make (doc) often fails. It turns out that the caching mechanism in sage doc builder is unreliable and is the root cause of these failures. The patch removes the caching mechanism and implements a more robust logic to auto-update module docs.

Issue created by migration from https://trac.sagemath.org/ticket/22588





---

archive/issue_comments_310733.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-13T00:35:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310733",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_310734.json:
```json
{
    "body": "Hi,\n\nThanks for this suggestion ! I've a few question for your patch.\n\n- Usually caching is here for performance reason. Did you test that there isn't a huge speed loss ?\n\n- Can you explain a little in the description of this patch how your new robust logic works ?\n\n- Finally, from a first glance, It seems that you don't handle the 'underscore' option anymore, do you ?\n\nCheers,\n\nFlorent",
    "created_at": "2017-03-13T15:40:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310734",
    "user": "hivert"
}
```

Hi,

Thanks for this suggestion ! I've a few question for your patch.

- Usually caching is here for performance reason. Did you test that there isn't a huge speed loss ?

- Can you explain a little in the description of this patch how your new robust logic works ?

- Finally, from a first glance, It seems that you don't handle the 'underscore' option anymore, do you ?

Cheers,

Florent



---

archive/issue_comments_310735.json:
```json
{
    "body": "I got\n\n```\n[...]\ncd ../.. && sage-logger -p './sage --docbuild --no-pdf-links all html ' logs/dochtml.log\n[dochtml] \n[dochtml] Building reference manual, first pass.\n[dochtml] \n[dochtml] Error building the documentation.\n[dochtml] Traceback (most recent call last):\n[dochtml]   File \"/home/data/Sage-Install/sage-7.5.1/local/lib/python/runpy.py\", line 174, in _run_module_as_main\n[dochtml]     \"__main__\", fname, loader, pkg_name)\n[dochtml]   File \"/home/data/Sage-Install/sage-7.5.1/local/lib/python/runpy.py\", line 72, in _run_code\n[dochtml]     exec code in run_globals\n[dochtml]   File \"/home/data/Sage-Install/sage-7.5.1/local/lib/python2.7/site-packages/sage_setup/docbuild/__main__.py\", line 2, in <module>\n[dochtml]     main()\n[dochtml]   File \"/home/data/Sage-Install/sage-7.5.1/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 1618, in main\n[dochtml]     builder()\n[dochtml]   File \"/home/data/Sage-Install/sage-7.5.1/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 316, in _wrapper\n[dochtml]     getattr(get_builder(document), 'inventory')(*args, **kwds)\n[dochtml]   File \"/home/data/Sage-Install/sage-7.5.1/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 510, in _wrapper\n[dochtml]     build_many(build_ref_doc, L)\n[dochtml]   File \"/home/data/Sage-Install/sage-7.5.1/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 252, in build_many\n[dochtml]     ret = x.get(99999)\n[dochtml]   File \"/home/data/Sage-Install/sage-7.5.1/local/lib/python/multiprocessing/pool.py\", line 567, in get\n[dochtml]     raise self._value\n[dochtml] AttributeError: 'NoneType' object has no attribute 'all_docs'\n[...]\n```\n\nHere is how to reproduce the problem: I went to `7.6.beta6` and compiled the doc normally. Then I switched to `22588` and issued a `make doc-clean` and `make doc`. \n\nAlso the git managed file `src/doc/en/reference/misc/sagetex.rst` was deleted.",
    "created_at": "2017-03-13T16:16:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310735",
    "user": "hivert"
}
```

I got

```
[...]
cd ../.. && sage-logger -p './sage --docbuild --no-pdf-links all html ' logs/dochtml.log
[dochtml] 
[dochtml] Building reference manual, first pass.
[dochtml] 
[dochtml] Error building the documentation.
[dochtml] Traceback (most recent call last):
[dochtml]   File "/home/data/Sage-Install/sage-7.5.1/local/lib/python/runpy.py", line 174, in _run_module_as_main
[dochtml]     "__main__", fname, loader, pkg_name)
[dochtml]   File "/home/data/Sage-Install/sage-7.5.1/local/lib/python/runpy.py", line 72, in _run_code
[dochtml]     exec code in run_globals
[dochtml]   File "/home/data/Sage-Install/sage-7.5.1/local/lib/python2.7/site-packages/sage_setup/docbuild/__main__.py", line 2, in <module>
[dochtml]     main()
[dochtml]   File "/home/data/Sage-Install/sage-7.5.1/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 1618, in main
[dochtml]     builder()
[dochtml]   File "/home/data/Sage-Install/sage-7.5.1/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 316, in _wrapper
[dochtml]     getattr(get_builder(document), 'inventory')(*args, **kwds)
[dochtml]   File "/home/data/Sage-Install/sage-7.5.1/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 510, in _wrapper
[dochtml]     build_many(build_ref_doc, L)
[dochtml]   File "/home/data/Sage-Install/sage-7.5.1/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 252, in build_many
[dochtml]     ret = x.get(99999)
[dochtml]   File "/home/data/Sage-Install/sage-7.5.1/local/lib/python/multiprocessing/pool.py", line 567, in get
[dochtml]     raise self._value
[dochtml] AttributeError: 'NoneType' object has no attribute 'all_docs'
[...]
```

Here is how to reproduce the problem: I went to `7.6.beta6` and compiled the doc normally. Then I switched to `22588` and issued a `make doc-clean` and `make doc`. 

Also the git managed file `src/doc/en/reference/misc/sagetex.rst` was deleted.



---

archive/issue_comments_310736.json:
```json
{
    "body": "Changing keywords from \"\" to \"days85\".",
    "created_at": "2017-03-13T16:41:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310736",
    "user": "jdemeyer"
}
```

Changing keywords from "" to "days85".



---

archive/issue_comments_310737.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-13T16:55:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310737",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_310738.json:
```json
{
    "body": "Try the quickfix to fix the problem. Meanwhile I will think to reply to your questions.",
    "created_at": "2017-03-13T17:00:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310738",
    "user": "klee"
}
```

Try the quickfix to fix the problem. Meanwhile I will think to reply to your questions.



---

archive/issue_comments_310739.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-13T17:20:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310739",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_310740.json:
```json
{
    "body": "Yes, the new code is to blame for the phenomenon that the innocent \"sagetex.rst\" disappears! Hope that the two quickfixes work.",
    "created_at": "2017-03-13T17:23:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310740",
    "user": "klee"
}
```

Yes, the new code is to blame for the phenomenon that the innocent "sagetex.rst" disappears! Hope that the two quickfixes work.



---

archive/issue_comments_310741.json:
```json
{
    "body": "Now the code with the quickfixes works fine for me. How about you?\n\nI will try to answer your questions as far as I understand the old and the new code :-) First I describe the use of cache in the old code:\n\nThe cache stores the list of the modules for which rst files were auto-generated in the previous run of the doc builder. In a new run, the list of the modules for which rst files should be auto-generated is computed and compared with the list in the cache. The rst files of newly added modules are auto-generated. Then the cache is updated.  \n\nIn the new code:\n\nIn a new run, the list of the modules for which rst files should be auto-generated is computed, and the modules are put into \"new\", \"updated\", \"removed\", \"old\" bins, comparing with the list of rst files which were auto-generated in the previous run of the doc builder (this formation is in the Sphinx environment). For modules in \"new\" and \"updated\" bins, new rst files are auto-generated. The modules in \"removed\" are removed. The modules in \"old\"  are just kept.\n\nReplying to [comment:3 hivert]:\n> Usually caching is here for performance reason. Did you test that there isn't a huge speed loss ?\n\nThe merit of caching here is that supposedly we do not need to look into the \"sage/...\" folder to get the list of modules for which rst files were auto-generated. The new code gets the information from the Sphinx environment (`.all_docs`). There is no loss in speed.\n\n> Can you explain a little in the description of this patch how your new robust logic works ?\n\nThe information about the files in \"sage/...\" from the Sphinx environment is *independent* from git branch changing, unlike the cache. The dependence of the cache on git branch was the cause of the failures. \n\n> Finally, from a first glance, It seems that you don't handle the 'underscore' option anymore, do you?\n\nThe (new/old) code is not responsible for handling the 'underscore' option. Is it?\n\nThanks for asking.",
    "created_at": "2017-03-13T19:14:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310741",
    "user": "klee"
}
```

Now the code with the quickfixes works fine for me. How about you?

I will try to answer your questions as far as I understand the old and the new code :-) First I describe the use of cache in the old code:

The cache stores the list of the modules for which rst files were auto-generated in the previous run of the doc builder. In a new run, the list of the modules for which rst files should be auto-generated is computed and compared with the list in the cache. The rst files of newly added modules are auto-generated. Then the cache is updated.  

In the new code:

In a new run, the list of the modules for which rst files should be auto-generated is computed, and the modules are put into "new", "updated", "removed", "old" bins, comparing with the list of rst files which were auto-generated in the previous run of the doc builder (this formation is in the Sphinx environment). For modules in "new" and "updated" bins, new rst files are auto-generated. The modules in "removed" are removed. The modules in "old"  are just kept.

Replying to [comment:3 hivert]:
> Usually caching is here for performance reason. Did you test that there isn't a huge speed loss ?

The merit of caching here is that supposedly we do not need to look into the "sage/..." folder to get the list of modules for which rst files were auto-generated. The new code gets the information from the Sphinx environment (`.all_docs`). There is no loss in speed.

> Can you explain a little in the description of this patch how your new robust logic works ?

The information about the files in "sage/..." from the Sphinx environment is *independent* from git branch changing, unlike the cache. The dependence of the cache on git branch was the cause of the failures. 

> Finally, from a first glance, It seems that you don't handle the 'underscore' option anymore, do you?

The (new/old) code is not responsible for handling the 'underscore' option. Is it?

Thanks for asking.



---

archive/issue_comments_310742.json:
```json
{
    "body": "Replying to [comment:10 klee]:\n> Now the code with the quickfixes works fine for me. How about you?\n> \n> I will try to answer your questions as far as I understand the old and the new code :-) First I describe the use of cache in the old code:\n\nThanks for clarifying all of these\n\n> The (new/old) code is not responsible for handling the 'underscore' option. Is it?\n\nI'm pretty sure the old code is:\n\n```\nif (inherit_prev is None or inherit_prev != options.inherited or\n            underscore_prev is None or underscore_prev != options.underscore):\n```\n\nThey are two options that force us to regenerate all the stub:\n\n- `inherit` -- whether we show inherited funs and attrs in the doc\n- `underscore` -- whether we show private (starting with __) funs and attrs\n\nIf any of those two option are changed, then every stub must be regenerated, because these option are included in the stub file as in\n\n```\n.. automodule:: sage.sets.integer_range\n   :members:\n   :undoc-members:\n   :show-inheritance:\n```\n\nThis needs to be taken care of in your logic.",
    "created_at": "2017-03-14T12:47:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310742",
    "user": "hivert"
}
```

Replying to [comment:10 klee]:
> Now the code with the quickfixes works fine for me. How about you?
> 
> I will try to answer your questions as far as I understand the old and the new code :-) First I describe the use of cache in the old code:

Thanks for clarifying all of these

> The (new/old) code is not responsible for handling the 'underscore' option. Is it?

I'm pretty sure the old code is:

```
if (inherit_prev is None or inherit_prev != options.inherited or
            underscore_prev is None or underscore_prev != options.underscore):
```

They are two options that force us to regenerate all the stub:

- `inherit` -- whether we show inherited funs and attrs in the doc
- `underscore` -- whether we show private (starting with __) funs and attrs

If any of those two option are changed, then every stub must be regenerated, because these option are included in the stub file as in

```
.. automodule:: sage.sets.integer_range
   :members:
   :undoc-members:
   :show-inheritance:
```

This needs to be taken care of in your logic.



---

archive/issue_comments_310743.json:
```json
{
    "body": "You are right. It seems that putting the options back in work forces us to resurrect the cache file. Then the role of the cache file is just to keep the previous settings of the options. I think I can do this. Do you have any other idea? \n\nOne alternative approach could be to resurrect the cache file in full force as it was and make its pickle *not* git-tracted... I am not sure if this is really possible and sound... What do you think?",
    "created_at": "2017-03-14T13:35:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310743",
    "user": "klee"
}
```

You are right. It seems that putting the options back in work forces us to resurrect the cache file. Then the role of the cache file is just to keep the previous settings of the options. I think I can do this. Do you have any other idea? 

One alternative approach could be to resurrect the cache file in full force as it was and make its pickle *not* git-tracted... I am not sure if this is really possible and sound... What do you think?



---

archive/issue_comments_310744.json:
```json
{
    "body": "I somehow presumed that the pickle of the cache is git branch dependent or git-tracted, and that caused failures. It is not true: the pickle is not git-tracted! Now I think problems were that the cache lacked the modification time info (so it could not be used to detect updated module) and that the old code did not remove rst files for removed modules.\n\nI am now experimenting with the options. I resurrected the cache and use it to store the previously used options. I will push the commits after I am confirmed that it works well...",
    "created_at": "2017-03-14T20:21:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310744",
    "user": "klee"
}
```

I somehow presumed that the pickle of the cache is git branch dependent or git-tracted, and that caused failures. It is not true: the pickle is not git-tracted! Now I think problems were that the cache lacked the modification time info (so it could not be used to detect updated module) and that the old code did not remove rst files for removed modules.

I am now experimenting with the options. I resurrected the cache and use it to store the previously used options. I will push the commits after I am confirmed that it works well...



---

archive/issue_comments_310745.json:
```json
{
    "body": "With the underscore option, it ends with an error (independent from the present patch). With the inherited option, it takes forever (understandably...). So I stopped this experiment. Anyway I can confirm that the options take effect :-)",
    "created_at": "2017-03-14T20:41:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310745",
    "user": "klee"
}
```

With the underscore option, it ends with an error (independent from the present patch). With the inherited option, it takes forever (understandably...). So I stopped this experiment. Anyway I can confirm that the options take effect :-)



---

archive/issue_comments_310746.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-14T21:20:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310746",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_310747.json:
```json
{
    "body": "This is extremely minor, but as far as I can tell, the preferred capitalization is \"reST\", not \"ReST\". The official documentation only uses \"reStructuredText\", not the abbreviation, but the lowercase \"r\" suggests \"reST\", and that's what others use (see http://www.sphinx-doc.org/en/stable/rest.html, for example).",
    "created_at": "2017-03-14T21:34:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310747",
    "user": "jhpalmieri"
}
```

This is extremely minor, but as far as I can tell, the preferred capitalization is "reST", not "ReST". The official documentation only uses "reStructuredText", not the abbreviation, but the lowercase "r" suggests "reST", and that's what others use (see http://www.sphinx-doc.org/en/stable/rest.html, for example).



---

archive/issue_comments_310748.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-15T01:54:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310748",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_310749.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-03-15T08:46:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310749",
    "user": "klee"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_310750.json:
```json
{
    "body": "Changing component from documentation to build.",
    "created_at": "2017-03-15T08:46:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310750",
    "user": "klee"
}
```

Changing component from documentation to build.



---

archive/issue_comments_310751.json:
```json
{
    "body": "One annoying problem I noticed is that we now have these warning as a side effect of `__import__(module)`: \n\n```\n[dochtml] /Users/Kwankyu/GitHub/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py:909: DeprecationWarning: the module sage.rings.commutative_ring is deprecated and will be removed\n[dochtml] See http://trac.sagemath.org/20011 for details.\n[dochtml]   __import__(module)\n```\n\n\nCould we just ignore these or can you provide how to fix this?\n\nAs I understand, the Sphinx autodoc extension also import a module to do its work. So importing a module is not a problem. Sphinx seems not to spit out the warning messages...",
    "created_at": "2017-03-15T09:43:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310751",
    "user": "klee"
}
```

One annoying problem I noticed is that we now have these warning as a side effect of `__import__(module)`: 

```
[dochtml] /Users/Kwankyu/GitHub/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py:909: DeprecationWarning: the module sage.rings.commutative_ring is deprecated and will be removed
[dochtml] See http://trac.sagemath.org/20011 for details.
[dochtml]   __import__(module)
```


Could we just ignore these or can you provide how to fix this?

As I understand, the Sphinx autodoc extension also import a module to do its work. So importing a module is not a problem. Sphinx seems not to spit out the warning messages...



---

archive/issue_comments_310752.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-15T10:27:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310752",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_310753.json:
```json
{
    "body": "I decided to suppress the deprecation warnings. It works well.",
    "created_at": "2017-03-15T10:33:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310753",
    "user": "klee"
}
```

I decided to suppress the deprecation warnings. It works well.



---

archive/issue_comments_310754.json:
```json
{
    "body": "I'm not sure it's a good idea to suppress deprecation warnings. The underlying issues should be fixed, instead. (There are deprecation warnings already. Does your branch create new ones?)",
    "created_at": "2017-03-15T21:03:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310754",
    "user": "jhpalmieri"
}
```

I'm not sure it's a good idea to suppress deprecation warnings. The underlying issues should be fixed, instead. (There are deprecation warnings already. Does your branch create new ones?)



---

archive/issue_comments_310755.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-03-15T22:30:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310755",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_310756.json:
```json
{
    "body": "Please do not make useless changes like\n\n```diff\n def format_annotation(annotation):\n-    \"\"\"Return formatted representation of a type annotation.\n+    \"\"\"\n+    Return formatted representation of a type annotation.\n```\n\n\nThat will only introduce merge conflicts.",
    "created_at": "2017-03-15T22:30:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310756",
    "user": "jdemeyer"
}
```

Please do not make useless changes like

```diff
 def format_annotation(annotation):
-    """Return formatted representation of a type annotation.
+    """
+    Return formatted representation of a type annotation.
```


That will only introduce merge conflicts.



---

archive/issue_comments_310757.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-16T00:35:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310757",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_310758.json:
```json
{
    "body": "Replying to [comment:24 jhpalmieri]:\n> I'm not sure it's a good idea to suppress deprecation warnings. The underlying issues should be fixed, instead. (There are deprecation warnings already. Does your branch create new ones?)\n\nYou are right. Deprecation warnings were already there. My branch did not create new ones.\n\nI think this is a good case where suppressing deprecation warnings is good and harmless. Those warnings are targeted for *users* of deprecated classes and methods. In our case, there is no real use of the deprecated. And the user who is building the reference manual would just wonder why he or she gets those warnings and has nothing to do to avoid them.",
    "created_at": "2017-03-16T01:08:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310758",
    "user": "klee"
}
```

Replying to [comment:24 jhpalmieri]:
> I'm not sure it's a good idea to suppress deprecation warnings. The underlying issues should be fixed, instead. (There are deprecation warnings already. Does your branch create new ones?)

You are right. Deprecation warnings were already there. My branch did not create new ones.

I think this is a good case where suppressing deprecation warnings is good and harmless. Those warnings are targeted for *users* of deprecated classes and methods. In our case, there is no real use of the deprecated. And the user who is building the reference manual would just wonder why he or she gets those warnings and has nothing to do to avoid them.



---

archive/issue_comments_310759.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-16T01:16:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310759",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_310760.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-03-16T01:19:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310760",
    "user": "klee"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_310761.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-29T10:39:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310761",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_310762.json:
```json
{
    "body": "It is a pain to see document building fail with the branch changed. This patch should be merged as soon as possible. Please review if you agree.",
    "created_at": "2017-03-29T10:44:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310762",
    "user": "klee"
}
```

It is a pain to see document building fail with the branch changed. This patch should be merged as soon as possible. Please review if you agree.



---

archive/issue_comments_310763.json:
```json
{
    "body": "Florent, can you review this?",
    "created_at": "2017-04-04T19:14:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310763",
    "user": "jdemeyer"
}
```

Florent, can you review this?



---

archive/issue_comments_310764.json:
```json
{
    "body": "Thanks for trying to fix this--it's been a huge source of irritation for me as well.  \n\nFlorent is the expert on this code so he should have final say (but I'm not sure where he is--I haven't seen him in the office this week).  But the logic here makes sense to me.  I just have a few questions:\n\nIn the old `get_newly_included_modules(self, save=False)` method (which is now obsolete--it is not used anywhere and could be removed?) there is a `save` argument.  Your new `get_new_and_updated_modules()` method also has the `save` argument but it isn't used anywhere (nor would it be).\n\nAlso I think it's a little confusing that what is now being called the \"cache\" is just storing the options that were used in the last docbuild run, and nothing else AFAICT (since as you point out the same information can be found in the Sphinx environment).",
    "created_at": "2017-04-05T09:18:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310764",
    "user": "embray"
}
```

Thanks for trying to fix this--it's been a huge source of irritation for me as well.  

Florent is the expert on this code so he should have final say (but I'm not sure where he is--I haven't seen him in the office this week).  But the logic here makes sense to me.  I just have a few questions:

In the old `get_newly_included_modules(self, save=False)` method (which is now obsolete--it is not used anywhere and could be removed?) there is a `save` argument.  Your new `get_new_and_updated_modules()` method also has the `save` argument but it isn't used anywhere (nor would it be).

Also I think it's a little confusing that what is now being called the "cache" is just storing the options that were used in the last docbuild run, and nothing else AFAICT (since as you point out the same information can be found in the Sphinx environment).



---

archive/issue_comments_310765.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-04-05T10:23:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310765",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_310766.json:
```json
{
    "body": "Replying to [comment:33 embray]:\n> In the old `get_newly_included_modules(self, save=False)` method (which is now obsolete--it is not used anywhere and could be removed?) there is a `save` argument.  Your new `get_new_and_updated_modules()` method also has the `save` argument but it isn't used anywhere (nor would it be).\n\nI agree. Removed them just now.\n\n> Also I think it's a little confusing that what is now being called the \"cache\" is just storing the options that were used in the last docbuild run, and nothing else AFAICT (since as you point out the same information can be found in the Sphinx environment).\n\nYou are right. I wanted to get rid of the cache file. But unfortunately, as Florent noted, it turned out that we need to save the last options used somewhere, to decide whether to rebuild all modules or not given the new options. So the main role of the cache changed (and I started to call the cache \"reference cache\" -- a cache for building the reference)",
    "created_at": "2017-04-05T10:33:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310766",
    "user": "klee"
}
```

Replying to [comment:33 embray]:
> In the old `get_newly_included_modules(self, save=False)` method (which is now obsolete--it is not used anywhere and could be removed?) there is a `save` argument.  Your new `get_new_and_updated_modules()` method also has the `save` argument but it isn't used anywhere (nor would it be).

I agree. Removed them just now.

> Also I think it's a little confusing that what is now being called the "cache" is just storing the options that were used in the last docbuild run, and nothing else AFAICT (since as you point out the same information can be found in the Sphinx environment).

You are right. I wanted to get rid of the cache file. But unfortunately, as Florent noted, it turned out that we need to save the last options used somewhere, to decide whether to rebuild all modules or not given the new options. So the main role of the cache changed (and I started to call the cache "reference cache" -- a cache for building the reference)



---

archive/issue_comments_310767.json:
```json
{
    "body": "Replying to [comment:33 embray]:\n\n> Florent is the expert on this code so he should have final say (but I'm not sure where he is--I haven't seen him in the office this week).  But the logic here makes sense to me.  \n\nHi Embray ! I've been sick and unable to work for one week. That's why you haven't seen me. I'm currently catching up and then I'll review this ticket.",
    "created_at": "2017-04-05T19:15:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310767",
    "user": "hivert"
}
```

Replying to [comment:33 embray]:

> Florent is the expert on this code so he should have final say (but I'm not sure where he is--I haven't seen him in the office this week).  But the logic here makes sense to me.  

Hi Embray ! I've been sick and unable to work for one week. That's why you haven't seen me. I'm currently catching up and then I'll review this ticket.



---

archive/issue_comments_310768.json:
```json
{
    "body": "I wonder which is the case: this patch is not so useful to developers as I believe or they are too busy to spare some time for this ticket...",
    "created_at": "2017-05-11T21:52:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310768",
    "user": "klee"
}
```

I wonder which is the case: this patch is not so useful to developers as I believe or they are too busy to spare some time for this ticket...



---

archive/issue_comments_310769.json:
```json
{
    "body": "I think it's definitely useful--people are just busy.",
    "created_at": "2017-05-12T09:47:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310769",
    "user": "embray"
}
```

I think it's definitely useful--people are just busy.



---

archive/issue_comments_310770.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-06-04T10:52:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310770",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_310771.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-06-11T21:27:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310771",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_310772.json:
```json
{
    "body": "Florent, I beg your review.",
    "created_at": "2017-06-11T21:30:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310772",
    "user": "klee"
}
```

Florent, I beg your review.



---

archive/issue_comments_310773.json:
```json
{
    "body": "I'm not quite competent to review this but it would be really useful ... ping!",
    "created_at": "2017-07-05T15:26:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310773",
    "user": "kcrisman"
}
```

I'm not quite competent to review this but it would be really useful ... ping!



---

archive/issue_comments_310774.json:
```json
{
    "body": "Replying to [comment:43 kcrisman]:\n> I'm not quite competent to review this but it would be really useful ... ping!\n\nYes! I repeatedly rely on this patch when I work with my branch, since without it \"make\" often fails while building docs. I just wonder how other developers live with the limped doc builder. I hoped this had been merged to Sage 8.0...",
    "created_at": "2017-07-05T15:41:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310774",
    "user": "klee"
}
```

Replying to [comment:43 kcrisman]:
> I'm not quite competent to review this but it would be really useful ... ping!

Yes! I repeatedly rely on this patch when I work with my branch, since without it "make" often fails while building docs. I just wonder how other developers live with the limped doc builder. I hoped this had been merged to Sage 8.0...



---

archive/issue_comments_310775.json:
```json
{
    "body": "I wonder if it would also enable speeding up patchbot builds, if we don't have to do a full `make doc-clean` on every build...",
    "created_at": "2017-07-05T16:18:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310775",
    "user": "embray"
}
```

I wonder if it would also enable speeding up patchbot builds, if we don't have to do a full `make doc-clean` on every build...



---

archive/issue_comments_310776.json:
```json
{
    "body": "Replying to [comment:45 embray]:\n> I wonder if it would also enable speeding up patchbot builds, if we don't have to do a full `make doc-clean` on every build...\n\nIn theory, yes.  If we are 100% sure that the doc builder is totally reliable and robust against changing branches after this ticket is merged, then we may make it an option to do `make doc-clean` in the patchbot.\n\nOn the other hand, I once observed that some hyperlinks don't work properly in the docs built without `make doc-clean`.",
    "created_at": "2017-07-05T16:54:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310776",
    "user": "klee"
}
```

Replying to [comment:45 embray]:
> I wonder if it would also enable speeding up patchbot builds, if we don't have to do a full `make doc-clean` on every build...

In theory, yes.  If we are 100% sure that the doc builder is totally reliable and robust against changing branches after this ticket is merged, then we may make it an option to do `make doc-clean` in the patchbot.

On the other hand, I once observed that some hyperlinks don't work properly in the docs built without `make doc-clean`.



---

archive/issue_comments_310777.json:
```json
{
    "body": "I think, for the patchbot's purposes, it's fine if the docs don't build 100% correctly as long as they *can* be built without errors from Sphinx, or problems that impact the doctests.\n\nIf nothing else, once this (or a fix like it) is merged it would be worth updating the patchbot to make the doc-clean an option, as you suggest, and experiment with running without it for a while.",
    "created_at": "2017-07-06T08:45:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310777",
    "user": "embray"
}
```

I think, for the patchbot's purposes, it's fine if the docs don't build 100% correctly as long as they *can* be built without errors from Sphinx, or problems that impact the doctests.

If nothing else, once this (or a fix like it) is merged it would be worth updating the patchbot to make the doc-clean an option, as you suggest, and experiment with running without it for a while.



---

archive/issue_comments_310778.json:
```json
{
    "body": "I would like to give this a positive review, but here is an issue: I tested this by deleting a file \u2013\u00a0I happened to choose `homology/koszul_complex.py`, along with its link in the reference manual. When I rebuilt the docs with the `develop` branch, it crashed because of the missing file, but with this branch, the docs built. That's great. What's not as great is that with this branch, the other pages in the `homology` part of the reference manual were not changed to reflect the missing page, so for example, `cell_complex.html` was not rewritten and so still has the line\n\n```\n    <link rel=\"next\" title=\"Koszul Complexes\" href=\"koszul_complex.html\" />\n```\n\n(This means that at the top of that page, it says \"Next page: Koszul complexes\".) Fortunately (?), the page `koszul_complex.html` was not deleted, so the link still works.\n\nNote also that there are still references to `koszul_complex.html` in the search indices.\n\nThe problem with docbuilding before this branch is that the auto-generated `koszul_complex.rst` would remain, while this branch does a good job of cleaning it up. What about these other references to `koszul_complex.html`? Deal with here or on another ticket, or ignore altogether?",
    "created_at": "2017-08-04T17:05:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310778",
    "user": "jhpalmieri"
}
```

I would like to give this a positive review, but here is an issue: I tested this by deleting a file – I happened to choose `homology/koszul_complex.py`, along with its link in the reference manual. When I rebuilt the docs with the `develop` branch, it crashed because of the missing file, but with this branch, the docs built. That's great. What's not as great is that with this branch, the other pages in the `homology` part of the reference manual were not changed to reflect the missing page, so for example, `cell_complex.html` was not rewritten and so still has the line

```
    <link rel="next" title="Koszul Complexes" href="koszul_complex.html" />
```

(This means that at the top of that page, it says "Next page: Koszul complexes".) Fortunately (?), the page `koszul_complex.html` was not deleted, so the link still works.

Note also that there are still references to `koszul_complex.html` in the search indices.

The problem with docbuilding before this branch is that the auto-generated `koszul_complex.rst` would remain, while this branch does a good job of cleaning it up. What about these other references to `koszul_complex.html`? Deal with here or on another ticket, or ignore altogether?



---

archive/issue_comments_310779.json:
```json
{
    "body": "A similar problem happens when you add a file: suppose you are adding a file \"B.py\" whose html file is supposed to go between \"A.html\" and \"C.html\" (that is, in \"A.html\", the next topic should point to \"B.html\"). If the docs have already been built, with A.html pointing to C.html, then you add B.html, the links in A.html and C.html will not change: they will point to each other as previous and next topics.\n\nWith the \"develop\" branch, docbuilding fails completely so you have to delete the built docs, so you never see this problem. With the branch from this ticket, you see it. Essentially the same question as in my previous comment: is the rest of this enough of an improvement that we can put off this problem to another ticket?",
    "created_at": "2017-08-04T18:10:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310779",
    "user": "jhpalmieri"
}
```

A similar problem happens when you add a file: suppose you are adding a file "B.py" whose html file is supposed to go between "A.html" and "C.html" (that is, in "A.html", the next topic should point to "B.html"). If the docs have already been built, with A.html pointing to C.html, then you add B.html, the links in A.html and C.html will not change: they will point to each other as previous and next topics.

With the "develop" branch, docbuilding fails completely so you have to delete the built docs, so you never see this problem. With the branch from this ticket, you see it. Essentially the same question as in my previous comment: is the rest of this enough of an improvement that we can put off this problem to another ticket?



---

archive/issue_comments_310780.json:
```json
{
    "body": "Replying to [comment:48 jhpalmieri]:\n> The problem with docbuilding before this branch is that the auto-generated `koszul_complex.rst` would remain, while this branch does a good job of cleaning it up. What about these other references to `koszul_complex.html`? Deal with here or on another ticket, or ignore altogether?\n\nThis branch is about auto-generating .rst files correctly. So the problem of wrong cross-references could be dealt with separately in another ticket.\n\nThe problem of wrong cross-references seems related with how intersphinx extension works. I guess that the intersphinx inventory files should be updated somehow when the auto-generated .rst files are updated. I am not Sphinx expert though, and it would take me some time to figure out what is wrong and to find a proper fix.",
    "created_at": "2017-08-05T14:22:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310780",
    "user": "klee"
}
```

Replying to [comment:48 jhpalmieri]:
> The problem with docbuilding before this branch is that the auto-generated `koszul_complex.rst` would remain, while this branch does a good job of cleaning it up. What about these other references to `koszul_complex.html`? Deal with here or on another ticket, or ignore altogether?

This branch is about auto-generating .rst files correctly. So the problem of wrong cross-references could be dealt with separately in another ticket.

The problem of wrong cross-references seems related with how intersphinx extension works. I guess that the intersphinx inventory files should be updated somehow when the auto-generated .rst files are updated. I am not Sphinx expert though, and it would take me some time to figure out what is wrong and to find a proper fix.



---

archive/issue_comments_310781.json:
```json
{
    "body": "I agree--the way I feel about this ticket is that it's not fixing every possible issue with incremental doc builds between branch changes, of which there are many.  More importantly, it's just making it so that the doc build succeeds without crashing.  It's not *generally* too important for the docs themselves to be exactly correct in this case--for perfectly correct docs they should be built from scratch.  Rather, this avoids having to rebuild the docs from scratch every time a branch is switched (this is especially nice for the patchbot).\n\nI wouldn't say this would never lead to confusion--people might want to read the development docs, especially if they're working on the docs themselves.  But this isn't a showstopper.  The current situation, however, is very annoying :)",
    "created_at": "2017-08-07T09:38:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310781",
    "user": "embray"
}
```

I agree--the way I feel about this ticket is that it's not fixing every possible issue with incremental doc builds between branch changes, of which there are many.  More importantly, it's just making it so that the doc build succeeds without crashing.  It's not *generally* too important for the docs themselves to be exactly correct in this case--for perfectly correct docs they should be built from scratch.  Rather, this avoids having to rebuild the docs from scratch every time a branch is switched (this is especially nice for the patchbot).

I wouldn't say this would never lead to confusion--people might want to read the development docs, especially if they're working on the docs themselves.  But this isn't a showstopper.  The current situation, however, is very annoying :)



---

archive/issue_comments_310782.json:
```json
{
    "body": "Okay, then let's merge this and see how it goes.",
    "created_at": "2017-08-07T15:17:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310782",
    "user": "jhpalmieri"
}
```

Okay, then let's merge this and see how it goes.



---

archive/issue_comments_310783.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-08-07T15:17:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310783",
    "user": "jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_310784.json:
```json
{
    "body": "Here is the ticket for the problem of wrong cross references\n\nhttps://trac.sagemath.org/ticket/23602",
    "created_at": "2017-08-09T01:34:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310784",
    "user": "klee"
}
```

Here is the ticket for the problem of wrong cross references

https://trac.sagemath.org/ticket/23602



---

archive/issue_comments_310785.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-08-11T18:18:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310785",
    "user": "vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_310786.json:
```json
{
    "body": "Nice work!",
    "created_at": "2017-08-18T18:27:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310786",
    "user": "kcrisman"
}
```

Nice work!



---

archive/issue_comments_310787.json:
```json
{
    "body": "There is an important regression: #23975",
    "created_at": "2017-10-07T14:49:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310787",
    "user": "jdemeyer"
}
```

There is an important regression: #23975



---

archive/issue_comments_310788.json:
```json
{
    "body": "Replying to [comment:56 jdemeyer]:\n> There is an important regression: #23975\n\nI looked at #23975. As far as I understand, an issue was raised about sage-location and fixed by a patch there. Is the regression still present? What is the regression? Is there something to be done here? Help me catch up.",
    "created_at": "2017-10-08T00:42:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22351#issuecomment-310788",
    "user": "klee"
}
```

Replying to [comment:56 jdemeyer]:
> There is an important regression: #23975

I looked at #23975. As far as I understand, an issue was raised about sage-location and fixed by a patch there. Is the regression still present? What is the regression? Is there something to be done here? Help me catch up.
