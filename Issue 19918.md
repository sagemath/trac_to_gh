# Issue 19918: Graph Generators: Add Turan Graph

archive/issues_019918.json:
```json
{
    "body": "Keywords: graphs\n\nTuran graphs are a well known family of graphs but have not been added to Sage (although they are in some other computer algebra systems). This patch would add support for Turan Graphs in the sage/graphs/families.py code.\n\nIssue created by migration from https://trac.sagemath.org/ticket/20155\n\n",
    "created_at": "2016-03-03T22:29:53Z",
    "labels": [
        "graph theory",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.1",
    "title": "Graph Generators: Add Turan Graph",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19918",
    "user": "mcognetta"
}
```
Keywords: graphs

Turan graphs are a well known family of graphs but have not been added to Sage (although they are in some other computer algebra systems). This patch would add support for Turan Graphs in the sage/graphs/families.py code.

Issue created by migration from https://trac.sagemath.org/ticket/20155





---

archive/issue_comments_274179.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-03-04T03:16:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19918#issuecomment-274179",
    "user": "mcognetta"
}
```

New commits:



---

archive/issue_comments_274180.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-03-04T03:16:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19918#issuecomment-274180",
    "user": "mcognetta"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_274181.json:
```json
{
    "body": "Hello,\n\nIf the method for assigning positions to vertices is also valid for multipartite complete graphs, you could instead add it to the `CompleteMultipartiteGraph` method and then just call this method with appropriate parameters. This would thus improve both methods. Your method could thus be reduced to:\n\n```\nif n < r:\n   raise ValueError('n should be at least r')\nif n < 1:\n   raise ValueError('n should be at least 1')\nif r < 1:\n   raise ValueError('r should be at least 1')\n\nname = \"Turan Graph with n: {}, r: {}\".format(n,r)\n\nif r == 1:\n   g = Graph(name=name)\n   g.add_vertices(range(n))\n   return g\n\nif r == 2:\n   g = graphs.CompleteBipartiteGraph(floor(n/2),ceil(n/2))\n   g.name(name)\n   return g\n\nsizes = [ceil(n/r) for i in range(n%r)]\nsizes += [floor(n/r) for i in range(r-(n%r))]\ng = graphs.CompleteMultipartiteGraph(sizes)\ng.name(name)\nreturn g\n```\n\nI'm not sure the case `r==2` is actually needed. \n\nAlso, I don't understand the need for method `calculate_positions` since it is called only once. You could simply add the code in the method.\n\nI think there is no need for importing `math`. You should try calling `floor` and `ceil` directly.\n\nThere are several typos in the method descriptions: `wih`, `properity`, etc.\n\nYou must add some `TESTS` to ilustrate the errors when calling the method with wrong parameters.\n\nThanks for your first patch.\n\nDavid.",
    "created_at": "2016-03-04T07:50:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19918#issuecomment-274181",
    "user": "dcoudert"
}
```

Hello,

If the method for assigning positions to vertices is also valid for multipartite complete graphs, you could instead add it to the `CompleteMultipartiteGraph` method and then just call this method with appropriate parameters. This would thus improve both methods. Your method could thus be reduced to:

```
if n < r:
   raise ValueError('n should be at least r')
if n < 1:
   raise ValueError('n should be at least 1')
if r < 1:
   raise ValueError('r should be at least 1')

name = "Turan Graph with n: {}, r: {}".format(n,r)

if r == 1:
   g = Graph(name=name)
   g.add_vertices(range(n))
   return g

if r == 2:
   g = graphs.CompleteBipartiteGraph(floor(n/2),ceil(n/2))
   g.name(name)
   return g

sizes = [ceil(n/r) for i in range(n%r)]
sizes += [floor(n/r) for i in range(r-(n%r))]
g = graphs.CompleteMultipartiteGraph(sizes)
g.name(name)
return g
```

I'm not sure the case `r==2` is actually needed. 

Also, I don't understand the need for method `calculate_positions` since it is called only once. You could simply add the code in the method.

I think there is no need for importing `math`. You should try calling `floor` and `ceil` directly.

There are several typos in the method descriptions: `wih`, `properity`, etc.

You must add some `TESTS` to ilustrate the errors when calling the method with wrong parameters.

Thanks for your first patch.

David.



---

archive/issue_comments_274182.json:
```json
{
    "body": "It might actually be safer to use something like that (without calls to ceil, floor):\n\n```\nsage: n,r=20,3\nsage: [n//r]*(r-n%r)+[n//r+1]*(n%r)\n[6, 7, 7]\n```\n",
    "created_at": "2016-03-04T12:33:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19918#issuecomment-274182",
    "user": "dcoudert"
}
```

It might actually be safer to use something like that (without calls to ceil, floor):

```
sage: n,r=20,3
sage: [n//r]*(r-n%r)+[n//r+1]*(n%r)
[6, 7, 7]
```




---

archive/issue_comments_274183.json:
```json
{
    "body": "Replying to [comment:3 dcoudert]:\n> Hello,\n> \n> If the method for assigning positions to vertices is also valid for multipartite complete graphs, you could instead add it to the `CompleteMultipartiteGraph` method and then just call this method with appropriate parameters. This would thus improve both methods. Your method could thus be reduced to:\n> {{{\n> if n < r:\n>    raise ValueError('n should be at least r')\n> if n < 1:\n>    raise ValueError('n should be at least 1')\n> if r < 1:\n>    raise ValueError('r should be at least 1')\n> \n> name = \"Turan Graph with n: {}, r: {}\".format(n,r)\n> \n> if r == 1:\n>    g = Graph(name=name)\n>    g.add_vertices(range(n))\n>    return g\n> \n> if r == 2:\n>    g = graphs.CompleteBipartiteGraph(floor(n/2),ceil(n/2))\n>    g.name(name)\n>    return g\n> \n> sizes = [ceil(n/r) for i in range(n%r)]\n> sizes += [floor(n/r) for i in range(r-(n%r))]\n> g = graphs.CompleteMultipartiteGraph(sizes)\n> g.name(name)\n> return g\n> }}}\n> I'm not sure the case `r==2` is actually needed. \n> \n> Also, I don't understand the need for method `calculate_positions` since it is called only once. You could simply add the code in the method.\n> \n> I think there is no need for importing `math`. You should try calling `floor` and `ceil` directly.\n> \n> There are several typos in the method descriptions: `wih`, `properity`, etc.\n> \n> You must add some `TESTS` to ilustrate the errors when calling the method with wrong parameters.\n> \n> Thanks for your first patch.\n> \n> David.\n\n\nYes, I think that I will end up doing this. I wrote the code before really thinking about just using the CompleteMultipartiteGraph code.\n\n\nI originally tried to just use ceil() and floor() but I got an error that I couldn't fix.\n\nI will edit this patch and reupload it.\n\nThanks.",
    "created_at": "2016-03-04T16:25:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19918#issuecomment-274183",
    "user": "mcognetta"
}
```

Replying to [comment:3 dcoudert]:
> Hello,
> 
> If the method for assigning positions to vertices is also valid for multipartite complete graphs, you could instead add it to the `CompleteMultipartiteGraph` method and then just call this method with appropriate parameters. This would thus improve both methods. Your method could thus be reduced to:
> {{{
> if n < r:
>    raise ValueError('n should be at least r')
> if n < 1:
>    raise ValueError('n should be at least 1')
> if r < 1:
>    raise ValueError('r should be at least 1')
> 
> name = "Turan Graph with n: {}, r: {}".format(n,r)
> 
> if r == 1:
>    g = Graph(name=name)
>    g.add_vertices(range(n))
>    return g
> 
> if r == 2:
>    g = graphs.CompleteBipartiteGraph(floor(n/2),ceil(n/2))
>    g.name(name)
>    return g
> 
> sizes = [ceil(n/r) for i in range(n%r)]
> sizes += [floor(n/r) for i in range(r-(n%r))]
> g = graphs.CompleteMultipartiteGraph(sizes)
> g.name(name)
> return g
> }}}
> I'm not sure the case `r==2` is actually needed. 
> 
> Also, I don't understand the need for method `calculate_positions` since it is called only once. You could simply add the code in the method.
> 
> I think there is no need for importing `math`. You should try calling `floor` and `ceil` directly.
> 
> There are several typos in the method descriptions: `wih`, `properity`, etc.
> 
> You must add some `TESTS` to ilustrate the errors when calling the method with wrong parameters.
> 
> Thanks for your first patch.
> 
> David.


Yes, I think that I will end up doing this. I wrote the code before really thinking about just using the CompleteMultipartiteGraph code.


I originally tried to just use ceil() and floor() but I got an error that I couldn't fix.

I will edit this patch and reupload it.

Thanks.



---

archive/issue_comments_274184.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-05T19:43:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19918#issuecomment-274184",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_274185.json:
```json
{
    "body": "Hello,\n\nI saw that you have opened a new ticket for the method to compute the position of vertices of complete multi-partite graphs.\n\nI have some comments on this ticket:\n* remove the empty line between 'def' and 'r\"\"\"'\n* You could use some latex in the method description: ``(n mod r)` subsets of size floor`(n/r)` and `r - (n mod r)` subsets of size ceil`(n/r)`` -> ``(n mod r)` subsets of size `\\floor{n/r}` and `r - (n mod r)` subsets of size `\\ceil{n/r}``\n* use `g.size()`instead of `len(g.edges())`\n* You can combine the tests. \n\n```\nif n<1 or n<r or r<1:\n    raise ValueError(\"Input parameters must satisfy '1 < r < n'.\")\n```\n\n* TESTS -> TEST\n* instead of `floor(...)`  you should use `[n//r]*(r-n%r)+[n//r+1]*(n%r)`. This is safe in Python. \n* you can remove `import math`\n* move the `from ... import...` after the ifs. No need to import when the parameters are wrong (ok, minor improvement)\n* You don't need the `vertex_set = []` statement.\n* I'm not sure if the statement `'Turan Graph with n: %d, r: %d'%(n,r)` is compatible with Python 3. This should be better `'Turan Graph with n: {}, r: {}'.format(n,r)`\n\nDavid.",
    "created_at": "2016-03-07T13:33:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19918#issuecomment-274185",
    "user": "dcoudert"
}
```

Hello,

I saw that you have opened a new ticket for the method to compute the position of vertices of complete multi-partite graphs.

I have some comments on this ticket:
* remove the empty line between 'def' and 'r"""'
* You could use some latex in the method description: ``(n mod r)` subsets of size floor`(n/r)` and `r - (n mod r)` subsets of size ceil`(n/r)`` -> ``(n mod r)` subsets of size `\floor{n/r}` and `r - (n mod r)` subsets of size `\ceil{n/r}``
* use `g.size()`instead of `len(g.edges())`
* You can combine the tests. 

```
if n<1 or n<r or r<1:
    raise ValueError("Input parameters must satisfy '1 < r < n'.")
```

* TESTS -> TEST
* instead of `floor(...)`  you should use `[n//r]*(r-n%r)+[n//r+1]*(n%r)`. This is safe in Python. 
* you can remove `import math`
* move the `from ... import...` after the ifs. No need to import when the parameters are wrong (ok, minor improvement)
* You don't need the `vertex_set = []` statement.
* I'm not sure if the statement `'Turan Graph with n: %d, r: %d'%(n,r)` is compatible with Python 3. This should be better `'Turan Graph with n: {}, r: {}'.format(n,r)`

David.



---

archive/issue_comments_274186.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-03-07T13:33:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19918#issuecomment-274186",
    "user": "dcoudert"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_274187.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-07T19:40:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19918#issuecomment-274187",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_274188.json:
```json
{
    "body": "Replying to [comment:7 dcoudert]:\n> Hello,\n> \n> I saw that you have opened a new ticket for the method to compute the position of vertices of complete multi-partite graphs.\n> \n> I have some comments on this ticket:\n> * remove the empty line between 'def' and 'r\"\"\"'\n> * You could use some latex in the method description: ``(n mod r)` subsets of size floor`(n/r)` and `r - (n mod r)` subsets of size ceil`(n/r)`` -> ``(n mod r)` subsets of size `\\floor{n/r}` and `r - (n mod r)` subsets of size `\\ceil{n/r}``\n> * use `g.size()`instead of `len(g.edges())`\n> * You can combine the tests. \n> {{{\n> if n<1 or n<r or r<1:\n>     raise ValueError(\"Input parameters must satisfy '1 < r < n'.\")\n> }}}\n> * TESTS -> TEST\n> * instead of `floor(...)`  you should use `[n//r]*(r-n%r)+[n//r+1]*(n%r)`. This is safe in Python. \n> * you can remove `import math`\n> * move the `from ... import...` after the ifs. No need to import when the parameters are wrong (ok, minor improvement)\n> * You don't need the `vertex_set = []` statement.\n> * I'm not sure if the statement `'Turan Graph with n: %d, r: %d'%(n,r)` is compatible with Python 3. This should be better `'Turan Graph with n: {}, r: {}'.format(n,r)`\n> \n> David.\n\nThanks for the advice. I updated the code to reflect your suggestions.",
    "created_at": "2016-03-07T19:40:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19918#issuecomment-274188",
    "user": "mcognetta"
}
```

Replying to [comment:7 dcoudert]:
> Hello,
> 
> I saw that you have opened a new ticket for the method to compute the position of vertices of complete multi-partite graphs.
> 
> I have some comments on this ticket:
> * remove the empty line between 'def' and 'r"""'
> * You could use some latex in the method description: ``(n mod r)` subsets of size floor`(n/r)` and `r - (n mod r)` subsets of size ceil`(n/r)`` -> ``(n mod r)` subsets of size `\floor{n/r}` and `r - (n mod r)` subsets of size `\ceil{n/r}``
> * use `g.size()`instead of `len(g.edges())`
> * You can combine the tests. 
> {{{
> if n<1 or n<r or r<1:
>     raise ValueError("Input parameters must satisfy '1 < r < n'.")
> }}}
> * TESTS -> TEST
> * instead of `floor(...)`  you should use `[n//r]*(r-n%r)+[n//r+1]*(n%r)`. This is safe in Python. 
> * you can remove `import math`
> * move the `from ... import...` after the ifs. No need to import when the parameters are wrong (ok, minor improvement)
> * You don't need the `vertex_set = []` statement.
> * I'm not sure if the statement `'Turan Graph with n: %d, r: %d'%(n,r)` is compatible with Python 3. This should be better `'Turan Graph with n: {}, r: {}'.format(n,r)`
> 
> David.

Thanks for the advice. I updated the code to reflect your suggestions.



---

archive/issue_comments_274189.json:
```json
{
    "body": "Much better.\n\n- `the nuber of vertices`-> `the number of vertices`\n\n- Why have you 4 points at the end of the `ValueError: ` line. 1 point is enough.\n\nWhen done, you have to switch back the paper to needs review.\n\nDavid.",
    "created_at": "2016-03-08T10:52:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19918#issuecomment-274189",
    "user": "dcoudert"
}
```

Much better.

- `the nuber of vertices`-> `the number of vertices`

- Why have you 4 points at the end of the `ValueError: ` line. 1 point is enough.

When done, you have to switch back the paper to needs review.

David.



---

archive/issue_comments_274190.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-08T17:47:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19918#issuecomment-274190",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_274191.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-03-08T19:42:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19918#issuecomment-274191",
    "user": "mcognetta"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_274192.json:
```json
{
    "body": "Hello,\n\nthe patch is almost good to go. I just realizes that the `n mod r` was not properly displayed in the html doc. You could use instead `n \\pmod{r}` which produces `n (mod r)`.\nCheck also the `\\ceil`, etc.\n\nDavid.",
    "created_at": "2016-03-09T08:06:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19918#issuecomment-274192",
    "user": "dcoudert"
}
```

Hello,

the patch is almost good to go. I just realizes that the `n mod r` was not properly displayed in the html doc. You could use instead `n \pmod{r}` which produces `n (mod r)`.
Check also the `\ceil`, etc.

David.



---

archive/issue_comments_274193.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-09T22:23:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19918#issuecomment-274193",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_274194.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-03-10T07:40:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19918#issuecomment-274194",
    "user": "dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_274195.json:
```json
{
    "body": "This patch is now good to go.\nThanks.\nDavid.",
    "created_at": "2016-03-10T07:40:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19918#issuecomment-274195",
    "user": "dcoudert"
}
```

This patch is now good to go.
Thanks.
David.



---

archive/issue_comments_274196.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-03-10T21:25:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19918#issuecomment-274196",
    "user": "vbraun"
}
```

Resolution: fixed
