# Issue 32720: Replace `have_program` usage by Features

archive/issues_032720.json:
```json
{
    "body": "CC:  @seblabbe @tornaria\n\nAfter #32650, remaining usage of `have_program` are:\n\n```\n$ git grep have_program\nsrc/sage/interfaces/chomp.py:        from sage.misc.sage_ostools import have_program\nsrc/sage/interfaces/chomp.py:        _have_chomp[program] = have_program(program)\nsrc/sage/interfaces/phc.py:            from sage.misc.sage_ostools import have_program\nsrc/sage/interfaces/phc.py:            if not have_program('phc'):\nsrc/sage/misc/dist.py:    from sage.misc.sage_ostools import have_program\nsrc/sage/misc/dist.py:        cmd_inside_sage = have_program(cmd, path=SAGE_BIN)\nsrc/sage/misc/dist.py:        cmd_outside_sage = have_program(cmd, path=PATH)\nsrc/sage/misc/sage_ostools.pyx:def have_program(program, path=None):\nsrc/sage/misc/sage_ostools.pyx:        sage: from sage.misc.sage_ostools import have_program\nsrc/sage/misc/sage_ostools.pyx:        sage: have_program('ls')\nsrc/sage/misc/sage_ostools.pyx:        sage: have_program('there_is_not_a_program_with_this_name')\nsrc/sage/misc/sage_ostools.pyx:        sage: have_program('sage', os.path.join(SAGE_VENV, 'bin'))\nsrc/sage/misc/sage_ostools.pyx:        sage: have_program('sage', '/there_is_not_a_path_with_this_name')\nsrc/sage/misc/sage_ostools.pyx:        sage: have_program('there_is_not_a_program_with_this_name', os.path.join(SAGE_VENV, 'bin'))\nsrc/sage/misc/viewer.py:    from sage.misc.sage_ostools import have_program\nsrc/sage/misc/viewer.py:    elif have_program('xdg-open'):\nsrc/sage/misc/viewer.py:                if have_program(cmd):\nsrc/sage/misc/viewer.py:                if have_program(cmd):\nsrc/sage/misc/viewer.py:                if have_program(cmd):\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/32957\n\n",
    "created_at": "2021-12-01T21:11:38Z",
    "labels": [
        "distribution",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Replace `have_program` usage by Features",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32720",
    "user": "@seblabbe"
}
```
CC:  @seblabbe @tornaria

After #32650, remaining usage of `have_program` are:

```
$ git grep have_program
src/sage/interfaces/chomp.py:        from sage.misc.sage_ostools import have_program
src/sage/interfaces/chomp.py:        _have_chomp[program] = have_program(program)
src/sage/interfaces/phc.py:            from sage.misc.sage_ostools import have_program
src/sage/interfaces/phc.py:            if not have_program('phc'):
src/sage/misc/dist.py:    from sage.misc.sage_ostools import have_program
src/sage/misc/dist.py:        cmd_inside_sage = have_program(cmd, path=SAGE_BIN)
src/sage/misc/dist.py:        cmd_outside_sage = have_program(cmd, path=PATH)
src/sage/misc/sage_ostools.pyx:def have_program(program, path=None):
src/sage/misc/sage_ostools.pyx:        sage: from sage.misc.sage_ostools import have_program
src/sage/misc/sage_ostools.pyx:        sage: have_program('ls')
src/sage/misc/sage_ostools.pyx:        sage: have_program('there_is_not_a_program_with_this_name')
src/sage/misc/sage_ostools.pyx:        sage: have_program('sage', os.path.join(SAGE_VENV, 'bin'))
src/sage/misc/sage_ostools.pyx:        sage: have_program('sage', '/there_is_not_a_path_with_this_name')
src/sage/misc/sage_ostools.pyx:        sage: have_program('there_is_not_a_program_with_this_name', os.path.join(SAGE_VENV, 'bin'))
src/sage/misc/viewer.py:    from sage.misc.sage_ostools import have_program
src/sage/misc/viewer.py:    elif have_program('xdg-open'):
src/sage/misc/viewer.py:                if have_program(cmd):
src/sage/misc/viewer.py:                if have_program(cmd):
src/sage/misc/viewer.py:                if have_program(cmd):
```


Issue created by migration from https://trac.sagemath.org/ticket/32957





---

archive/issue_comments_466706.json:
```json
{
    "body": "#30207 proposes to deprecate `sage.misc.dist`",
    "created_at": "2021-12-09T19:59:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32720#issuecomment-466706",
    "user": "@mkoeppe"
}
```

#30207 proposes to deprecate `sage.misc.dist`



---

archive/issue_comments_466707.json:
```json
{
    "body": "I can try to convert the `chomp` stuff to something in `features`, but I can't test it very well because `CHomP` doesn't build on OS X, with an error\n\n```\nIn file included from /Users/jpalmier/Desktop/Sage/git/CHomP/source/chomp-matrix.cpp:4:\n/Users/jpalmier/Desktop/Sage/git/CHomP/include/chomp/Ring.h:224:3: error: C++ requires a type specifier for all declarations\n  BOOST_SERIALIZATION_SPLIT_MEMBER()\n```\n\n`BOOST_SERIALIZATION_SPLIT_MEMBER` seems to come from `/usr/local/include/boost/`, and I don't know why it's not being found. I wonder if it's time to deprecate the `CHomP` stuff in Sage anyway; the software at https://github.com/marciogameiro/CHomP hasn't been modified in 5 years.",
    "created_at": "2022-04-27T18:26:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32720#issuecomment-466707",
    "user": "@jhpalmieri"
}
```

I can try to convert the `chomp` stuff to something in `features`, but I can't test it very well because `CHomP` doesn't build on OS X, with an error

```
In file included from /Users/jpalmier/Desktop/Sage/git/CHomP/source/chomp-matrix.cpp:4:
/Users/jpalmier/Desktop/Sage/git/CHomP/include/chomp/Ring.h:224:3: error: C++ requires a type specifier for all declarations
  BOOST_SERIALIZATION_SPLIT_MEMBER()
```

`BOOST_SERIALIZATION_SPLIT_MEMBER` seems to come from `/usr/local/include/boost/`, and I don't know why it's not being found. I wonder if it's time to deprecate the `CHomP` stuff in Sage anyway; the software at https://github.com/marciogameiro/CHomP hasn't been modified in 5 years.



---

archive/issue_comments_466708.json:
```json
{
    "body": "I also feel like there must be a good way to replace `sage/misc/viewer.py` these days.",
    "created_at": "2022-04-27T18:31:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32720#issuecomment-466708",
    "user": "@jhpalmieri"
}
```

I also feel like there must be a good way to replace `sage/misc/viewer.py` these days.



---

archive/issue_comments_466709.json:
```json
{
    "body": "Should we deprecate `sage/misc/dist.py`? It obviously hasn't been examined in a while, since it still talks about installing a script for `mercurial`. It is an artifact of older days when a feature of Sage was that it provided copies of `gap`, `gp/pari`, etc., as opposed to now, when we are trying to modularize and we want Sage to rely on system versions of those packages.",
    "created_at": "2022-04-27T18:34:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32720#issuecomment-466709",
    "user": "@jhpalmieri"
}
```

Should we deprecate `sage/misc/dist.py`? It obviously hasn't been examined in a while, since it still talks about installing a script for `mercurial`. It is an artifact of older days when a feature of Sage was that it provided copies of `gap`, `gp/pari`, etc., as opposed to now, when we are trying to modularize and we want Sage to rely on system versions of those packages.



---

archive/issue_comments_466710.json:
```json
{
    "body": "I'm in favor of deprecating sage.misc.dist (see #30207).",
    "created_at": "2022-04-27T18:38:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32720#issuecomment-466710",
    "user": "@mkoeppe"
}
```

I'm in favor of deprecating sage.misc.dist (see #30207).



---

archive/issue_comments_466711.json:
```json
{
    "body": "Replying to [comment:7 jhpalmieri]:\n> I wonder if it's time to deprecate the `CHomP` stuff in Sage anyway\n\nI agree. Looks like it was only provided by an old-style spkg",
    "created_at": "2022-04-27T18:43:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32720#issuecomment-466711",
    "user": "@mkoeppe"
}
```

Replying to [comment:7 jhpalmieri]:
> I wonder if it's time to deprecate the `CHomP` stuff in Sage anyway

I agree. Looks like it was only provided by an old-style spkg



---

archive/issue_comments_466712.json:
```json
{
    "body": "Deprecating `CHomP` is now #33777.",
    "created_at": "2022-04-30T19:55:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32720#issuecomment-466712",
    "user": "@jhpalmieri"
}
```

Deprecating `CHomP` is now #33777.



---

archive/issue_comments_466713.json:
```json
{
    "body": "Replying to [comment:8 jhpalmieri]:\n> I also feel like there must be a good way to replace `sage/misc/viewer.py` these days.\n\nthere's https://docs.python.org/3/library/webbrowser.html",
    "created_at": "2022-05-18T06:07:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32720#issuecomment-466713",
    "user": "@mkoeppe"
}
```

Replying to [comment:8 jhpalmieri]:
> I also feel like there must be a good way to replace `sage/misc/viewer.py` these days.

there's https://docs.python.org/3/library/webbrowser.html



---

archive/issue_comments_466714.json:
```json
{
    "body": "Replying to [comment:13 mkoeppe]:\n> Replying to [comment:8 jhpalmieri]:\n> > I also feel like there must be a good way to replace `sage/misc/viewer.py` these days.\n> \n> there's https://docs.python.org/3/library/webbrowser.html\n\nOh, I see:\n\n```\nwebbrowser.open(r'file:///path/to/file')\n```\n\nworks for me on OS X, for `pdf` and image files. For `png` and `jpg` files, there is also `PIL`:\n\n```\nfrom PIL import Image\nwith Image.open('filename') as im:\n    im.show()\n```\n",
    "created_at": "2022-05-27T21:35:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32720#issuecomment-466714",
    "user": "@jhpalmieri"
}
```

Replying to [comment:13 mkoeppe]:
> Replying to [comment:8 jhpalmieri]:
> > I also feel like there must be a good way to replace `sage/misc/viewer.py` these days.
> 
> there's https://docs.python.org/3/library/webbrowser.html

Oh, I see:

```
webbrowser.open(r'file:///path/to/file')
```

works for me on OS X, for `pdf` and image files. For `png` and `jpg` files, there is also `PIL`:

```
from PIL import Image
with Image.open('filename') as im:
    im.show()
```




---

archive/issue_comments_466715.json:
```json
{
    "body": "See #33931 for the deprecation of `sage.misc.viewer`.",
    "created_at": "2022-05-29T00:54:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32720#issuecomment-466715",
    "user": "@jhpalmieri"
}
```

See #33931 for the deprecation of `sage.misc.viewer`.
