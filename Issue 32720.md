# Issue 32720: Replace `have_program` usage by Features

Issue created by migration from https://trac.sagemath.org/ticket/32957

Original creator: slabbe

Original creation time: 2021-12-01 21:11:38

CC:  slabbe tornaria

After #32650, remaining usage of `have_program` are:

```
$ git grep have_program
src/sage/interfaces/chomp.py:        from sage.misc.sage_ostools import have_program
src/sage/interfaces/chomp.py:        _have_chomp[program] = have_program(program)
src/sage/interfaces/phc.py:            from sage.misc.sage_ostools import have_program
src/sage/interfaces/phc.py:            if not have_program('phc'):
src/sage/misc/dist.py:    from sage.misc.sage_ostools import have_program
src/sage/misc/dist.py:        cmd_inside_sage = have_program(cmd, path=SAGE_BIN)
src/sage/misc/dist.py:        cmd_outside_sage = have_program(cmd, path=PATH)
src/sage/misc/sage_ostools.pyx:def have_program(program, path=None):
src/sage/misc/sage_ostools.pyx:        sage: from sage.misc.sage_ostools import have_program
src/sage/misc/sage_ostools.pyx:        sage: have_program('ls')
src/sage/misc/sage_ostools.pyx:        sage: have_program('there_is_not_a_program_with_this_name')
src/sage/misc/sage_ostools.pyx:        sage: have_program('sage', os.path.join(SAGE_VENV, 'bin'))
src/sage/misc/sage_ostools.pyx:        sage: have_program('sage', '/there_is_not_a_path_with_this_name')
src/sage/misc/sage_ostools.pyx:        sage: have_program('there_is_not_a_program_with_this_name', os.path.join(SAGE_VENV, 'bin'))
src/sage/misc/viewer.py:    from sage.misc.sage_ostools import have_program
src/sage/misc/viewer.py:    elif have_program('xdg-open'):
src/sage/misc/viewer.py:                if have_program(cmd):
src/sage/misc/viewer.py:                if have_program(cmd):
src/sage/misc/viewer.py:                if have_program(cmd):
```



---

Comment by mkoeppe created at 2021-12-09 19:59:22

#30207 proposes to deprecate `sage.misc.dist`


---

Comment by jhpalmieri created at 2022-04-27 18:26:47

I can try to convert the `chomp` stuff to something in `features`, but I can't test it very well because `CHomP` doesn't build on OS X, with an error

```
In file included from /Users/jpalmier/Desktop/Sage/git/CHomP/source/chomp-matrix.cpp:4:
/Users/jpalmier/Desktop/Sage/git/CHomP/include/chomp/Ring.h:224:3: error: C++ requires a type specifier for all declarations
  BOOST_SERIALIZATION_SPLIT_MEMBER()
```

`BOOST_SERIALIZATION_SPLIT_MEMBER` seems to come from `/usr/local/include/boost/`, and I don't know why it's not being found. I wonder if it's time to deprecate the `CHomP` stuff in Sage anyway; the software at https://github.com/marciogameiro/CHomP hasn't been modified in 5 years.


---

Comment by jhpalmieri created at 2022-04-27 18:31:38

I also feel like there must be a good way to replace `sage/misc/viewer.py` these days.


---

Comment by jhpalmieri created at 2022-04-27 18:34:52

Should we deprecate `sage/misc/dist.py`? It obviously hasn't been examined in a while, since it still talks about installing a script for `mercurial`. It is an artifact of older days when a feature of Sage was that it provided copies of `gap`, `gp/pari`, etc., as opposed to now, when we are trying to modularize and we want Sage to rely on system versions of those packages.


---

Comment by mkoeppe created at 2022-04-27 18:38:22

I'm in favor of deprecating sage.misc.dist (see #30207).


---

Comment by mkoeppe created at 2022-04-27 18:43:17

Replying to [comment:7 jhpalmieri]:
> I wonder if it's time to deprecate the `CHomP` stuff in Sage anyway

I agree. Looks like it was only provided by an old-style spkg


---

Comment by jhpalmieri created at 2022-04-30 19:55:32

Deprecating `CHomP` is now #33777.


---

Comment by mkoeppe created at 2022-05-18 06:07:33

Replying to [comment:8 jhpalmieri]:
> I also feel like there must be a good way to replace `sage/misc/viewer.py` these days.

there's https://docs.python.org/3/library/webbrowser.html


---

Comment by jhpalmieri created at 2022-05-27 21:35:04

Replying to [comment:13 mkoeppe]:
> Replying to [comment:8 jhpalmieri]:
> > I also feel like there must be a good way to replace `sage/misc/viewer.py` these days.
> 
> there's https://docs.python.org/3/library/webbrowser.html

Oh, I see:

```
webbrowser.open(r'file:///path/to/file')
```

works for me on OS X, for `pdf` and image files. For `png` and `jpg` files, there is also `PIL`:

```
from PIL import Image
with Image.open('filename') as im:
    im.show()
```



---

Comment by jhpalmieri created at 2022-05-29 00:54:08

See #33931 for the deprecation of `sage.misc.viewer`.
