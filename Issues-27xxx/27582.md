# Issue 27582: py3: fix bug in all_paths

archive/issues_027345.json:
```json
{
    "body": "With #27501, we introduced an error in `all_paths` for Python 3. Indeed, `my_dict.keys()` returns a list in Python 2 but it is an iterator in Python 3, so the following code breaks as the size of the dictionary change during iteration.\n\n```\n                for u, v in my_dict.keys():\n                    my_dict[v, u] = my_dict[u, v]\n```\n\nWe fix this issue using `list(my_dict.keys())`. On the way, we also rename `my_dict` to `edge_labels`.\n\n**CC:**  @rajat1433\n\n**Keywords:** py3, graph\n\n**Branch/Commit:** [934c54da862f86d3844b4a7a0f5830f21514a95b](https://github.com/sagemath/sagetrac-mirror/commit/934c54da862f86d3844b4a7a0f5830f21514a95b)\n\n**Reviewer:** Fr\u00e9d\u00e9ric Chapoton\n\n**Author:** David Coudert\n\nIssue created by migration from https://trac.sagemath.org/ticket/27582\n\n",
    "closed_at": "2019-04-03T18:38:33Z",
    "created_at": "2019-03-31T17:38:25Z",
    "labels": [
        "component: graph theory",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.8",
    "title": "py3: fix bug in all_paths",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27582",
    "user": "https://github.com/dcoudert"
}
```
With #27501, we introduced an error in `all_paths` for Python 3. Indeed, `my_dict.keys()` returns a list in Python 2 but it is an iterator in Python 3, so the following code breaks as the size of the dictionary change during iteration.

```
                for u, v in my_dict.keys():
                    my_dict[v, u] = my_dict[u, v]
```

We fix this issue using `list(my_dict.keys())`. On the way, we also rename `my_dict` to `edge_labels`.

**CC:**  @rajat1433

**Keywords:** py3, graph

**Branch/Commit:** [934c54da862f86d3844b4a7a0f5830f21514a95b](https://github.com/sagemath/sagetrac-mirror/commit/934c54da862f86d3844b4a7a0f5830f21514a95b)

**Reviewer:** Frédéric Chapoton

**Author:** David Coudert

Issue created by migration from https://trac.sagemath.org/ticket/27582





---

archive/issue_comments_509143.json:
```json
{
    "body": "<a id='comment:1'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4324b87cdad0c79baba49d2565f1689f4b35595e\">4324b87</a></td><td><code>trac #27582: fix bug and rename my_dict as edge_labels</code></td></tr></table>\n",
    "created_at": "2019-03-31T17:40:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27582#issuecomment-509143",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:1'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4324b87cdad0c79baba49d2565f1689f4b35595e">4324b87</a></td><td><code>trac #27582: fix bug and rename my_dict as edge_labels</code></td></tr></table>




---

archive/issue_comments_509144.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2019-03-31T17:40:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27582#issuecomment-509144",
    "user": "https://github.com/dcoudert"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_509145.json:
```json
{
    "body": "**Commit:** [4324b87cdad0c79baba49d2565f1689f4b35595e](https://github.com/sagemath/sagetrac-mirror/commit/4324b87cdad0c79baba49d2565f1689f4b35595e)",
    "created_at": "2019-03-31T17:40:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27582#issuecomment-509145",
    "user": "https://github.com/dcoudert"
}
```

**Commit:** [4324b87cdad0c79baba49d2565f1689f4b35595e](https://github.com/sagemath/sagetrac-mirror/commit/4324b87cdad0c79baba49d2565f1689f4b35595e)



---

archive/issue_comments_509146.json:
```json
{
    "body": "**Branch:** [public/graphs/27582_all_paths](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/27582_all_paths)",
    "created_at": "2019-03-31T17:40:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27582#issuecomment-509146",
    "user": "https://github.com/dcoudert"
}
```

**Branch:** [public/graphs/27582_all_paths](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/27582_all_paths)



---

archive/issue_comments_509147.json:
```json
{
    "body": "<a id='comment:2'></a>\nyou can also remove the `.keys()`",
    "created_at": "2019-03-31T18:34:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27582#issuecomment-509147",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:2'></a>
you can also remove the `.keys()`



---

archive/issue_comments_509148.json:
```json
{
    "body": "**Changing commit** from \"[4324b87cdad0c79baba49d2565f1689f4b35595e](https://github.com/sagemath/sagetrac-mirror/commit/4324b87cdad0c79baba49d2565f1689f4b35595e)\" to \"[4483ba60722f020ea5b3111497dc02a489cbe271](https://github.com/sagemath/sagetrac-mirror/commit/4483ba60722f020ea5b3111497dc02a489cbe271)\".",
    "created_at": "2019-03-31T18:41:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27582#issuecomment-509148",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[4324b87cdad0c79baba49d2565f1689f4b35595e](https://github.com/sagemath/sagetrac-mirror/commit/4324b87cdad0c79baba49d2565f1689f4b35595e)" to "[4483ba60722f020ea5b3111497dc02a489cbe271](https://github.com/sagemath/sagetrac-mirror/commit/4483ba60722f020ea5b3111497dc02a489cbe271)".



---

archive/issue_comments_509149.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4483ba60722f020ea5b3111497dc02a489cbe271\">4483ba6</a></td><td><code>trac #27582: remove .keys()</code></td></tr></table>\n",
    "created_at": "2019-03-31T18:41:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27582#issuecomment-509149",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4483ba60722f020ea5b3111497dc02a489cbe271">4483ba6</a></td><td><code>trac #27582: remove .keys()</code></td></tr></table>




---

archive/issue_comments_509150.json:
```json
{
    "body": "<a id='comment:4'></a>\nRight, done.",
    "created_at": "2019-03-31T18:41:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27582#issuecomment-509150",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:4'></a>
Right, done.



---

archive/issue_comments_509151.json:
```json
{
    "body": "<a id='comment:5'></a>\nsome `.keys()` are still there",
    "created_at": "2019-03-31T19:23:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27582#issuecomment-509151",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'></a>
some `.keys()` are still there



---

archive/issue_comments_509152.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/934c54da862f86d3844b4a7a0f5830f21514a95b\">934c54d</a></td><td><code>trac #27582: remove .keys()</code></td></tr></table>\n",
    "created_at": "2019-03-31T19:53:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27582#issuecomment-509152",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/934c54da862f86d3844b4a7a0f5830f21514a95b">934c54d</a></td><td><code>trac #27582: remove .keys()</code></td></tr></table>




---

archive/issue_comments_509153.json:
```json
{
    "body": "**Changing commit** from \"[4483ba60722f020ea5b3111497dc02a489cbe271](https://github.com/sagemath/sagetrac-mirror/commit/4483ba60722f020ea5b3111497dc02a489cbe271)\" to \"[934c54da862f86d3844b4a7a0f5830f21514a95b](https://github.com/sagemath/sagetrac-mirror/commit/934c54da862f86d3844b4a7a0f5830f21514a95b)\".",
    "created_at": "2019-03-31T19:53:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27582#issuecomment-509153",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[4483ba60722f020ea5b3111497dc02a489cbe271](https://github.com/sagemath/sagetrac-mirror/commit/4483ba60722f020ea5b3111497dc02a489cbe271)" to "[934c54da862f86d3844b4a7a0f5830f21514a95b](https://github.com/sagemath/sagetrac-mirror/commit/934c54da862f86d3844b4a7a0f5830f21514a95b)".



---

archive/issue_comments_509154.json:
```json
{
    "body": "<a id='comment:7'></a>\nShould be OK now. Thanks.",
    "created_at": "2019-03-31T19:54:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27582#issuecomment-509154",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:7'></a>
Should be OK now. Thanks.



---

archive/issue_comments_509155.json:
```json
{
    "body": "<a id='comment:8'></a>\ngood to go if the patchbot is green",
    "created_at": "2019-03-31T20:11:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27582#issuecomment-509155",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:8'></a>
good to go if the patchbot is green



---

archive/issue_comments_509156.json:
```json
{
    "body": "**Reviewer:** Fr\u00e9d\u00e9ric Chapoton",
    "created_at": "2019-04-01T07:24:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27582#issuecomment-509156",
    "user": "https://github.com/fchapoton"
}
```

**Reviewer:** Frédéric Chapoton



---

archive/issue_comments_509157.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2019-04-01T07:24:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27582#issuecomment-509157",
    "user": "https://github.com/fchapoton"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_509158.json:
```json
{
    "body": "**Changing branch** from \"[public/graphs/27582_all_paths](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/27582_all_paths)\" to \"[934c54da862f86d3844b4a7a0f5830f21514a95b](https://github.com/sagemath/sagetrac-mirror/commit/934c54da862f86d3844b4a7a0f5830f21514a95b)\".",
    "created_at": "2019-04-03T18:38:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27582#issuecomment-509158",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/graphs/27582_all_paths](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/27582_all_paths)" to "[934c54da862f86d3844b4a7a0f5830f21514a95b](https://github.com/sagemath/sagetrac-mirror/commit/934c54da862f86d3844b4a7a0f5830f21514a95b)".



---

archive/issue_events_077359.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-04-03T18:38:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27582",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27582#event-77359"
}
```
