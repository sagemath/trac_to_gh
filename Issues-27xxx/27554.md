# Issue 27554: Kenzo interface is broken

archive/issues_027317.json:
```json
{
    "assignees": [],
    "body": "Seems like a missing import...\n\n```\nsage -t --long src/sage/interfaces/kenzo.py\n**********************************************************************\nFile \"src/sage/interfaces/kenzo.py\", line 157, in sage.interfaces.kenzo.EilenbergMacLaneSpace\nFailed example:\n    f3 = EilenbergMacLaneSpace(AdditiveAbelianGroup([2]), 3)   # optional - kenzo\nException raised:\n    Traceback (most recent call last):\n      File \"/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 671, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1095, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.interfaces.kenzo.EilenbergMacLaneSpace[3]>\", line 1, in <module>\n        f3 = EilenbergMacLaneSpace(AdditiveAbelianGroup([Integer(2)]), Integer(3))   # optional - kenzo\n      File \"/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/interfaces/kenzo.py\", line 164, in EilenbergMacLaneSpace\n        elif G in CommutativeAdditiveGroups() and G.cardinality() == 2:\n    NameError: global name 'CommutativeAdditiveGroups' is not defined\n**********************************************************************\nFile \"src/sage/interfaces/kenzo.py\", line 158, in sage.interfaces.kenzo.EilenbergMacLaneSpace\nFailed example:\n    [f3.homology(i) for i in range(8)]                         # optional - kenzo\nException raised:\n    Traceback (most recent call last):\n      File \"/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 671, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1095, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.interfaces.kenzo.EilenbergMacLaneSpace[4]>\", line 1, in <module>\n        [f3.homology(i) for i in range(Integer(8))]                         # optional - kenzo\n    NameError: name 'f3' is not defined\n**********************************************************************\n```\n\n\n\nA problem with the instalation using different partitions has been solved upstream. We include a new version of the package here. The new tarball is in https://github.com/miguelmarco/kenzo/releases/download/1.1.7-r3/kenzo-1.1.7-r3.tar.gz\n\nCC:  @miguelmarco @nbruin\n\nBranch/Commit: **[4cbeb6f](https://github.com/sagemath/sagetrac-mirror/commit/4cbeb6f2815246ef7550eea05f787cbe3084633d)**\n\nUpstream: **Reported upstream. No feedback yet.**\n\nReviewer: **Dima Pasechnik**\n\nAuthor: **Miguel Marco**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/27554_\n\n",
    "closed_at": "2019-03-31T22:43:42Z",
    "created_at": "2019-03-26T13:18:43Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20interfaces%3A%20optional",
        "https://github.com/sagemath/sage/labels/p1%20%E2%80%93%20blocker",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Kenzo interface is broken",
    "type": "issue",
    "updated_at": "2019-03-31T22:43:42Z",
    "url": "https://github.com/sagemath/sage/issues/27554",
    "user": "https://github.com/jdemeyer"
}
```
Seems like a missing import...

```
sage -t --long src/sage/interfaces/kenzo.py
**********************************************************************
File "src/sage/interfaces/kenzo.py", line 157, in sage.interfaces.kenzo.EilenbergMacLaneSpace
Failed example:
    f3 = EilenbergMacLaneSpace(AdditiveAbelianGroup([2]), 3)   # optional - kenzo
Exception raised:
    Traceback (most recent call last):
      File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 671, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1095, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.interfaces.kenzo.EilenbergMacLaneSpace[3]>", line 1, in <module>
        f3 = EilenbergMacLaneSpace(AdditiveAbelianGroup([Integer(2)]), Integer(3))   # optional - kenzo
      File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/interfaces/kenzo.py", line 164, in EilenbergMacLaneSpace
        elif G in CommutativeAdditiveGroups() and G.cardinality() == 2:
    NameError: global name 'CommutativeAdditiveGroups' is not defined
**********************************************************************
File "src/sage/interfaces/kenzo.py", line 158, in sage.interfaces.kenzo.EilenbergMacLaneSpace
Failed example:
    [f3.homology(i) for i in range(8)]                         # optional - kenzo
Exception raised:
    Traceback (most recent call last):
      File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 671, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1095, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.interfaces.kenzo.EilenbergMacLaneSpace[4]>", line 1, in <module>
        [f3.homology(i) for i in range(Integer(8))]                         # optional - kenzo
    NameError: name 'f3' is not defined
**********************************************************************
```



A problem with the instalation using different partitions has been solved upstream. We include a new version of the package here. The new tarball is in https://github.com/miguelmarco/kenzo/releases/download/1.1.7-r3/kenzo-1.1.7-r3.tar.gz

CC:  @miguelmarco @nbruin

Branch/Commit: **[4cbeb6f](https://github.com/sagemath/sagetrac-mirror/commit/4cbeb6f2815246ef7550eea05f787cbe3084633d)**

Upstream: **Reported upstream. No feedback yet.**

Reviewer: **Dima Pasechnik**

Author: **Miguel Marco**

_Issue created by migration from https://trac.sagemath.org/ticket/27554_





---

archive/issue_events_360141.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-03-26T13:18:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27554#event-360141"
}
```



---

archive/issue_events_360142.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-03-26T13:18:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20interfaces%3A%20optional",
    "label_color": "0000ff",
    "label_name": "component: interfaces: optional",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27554#event-360142"
}
```



---

archive/issue_events_360143.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-03-26T13:18:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "label": "https://github.com/sagemath/sage/labels/p1%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27554#event-360143"
}
```



---

archive/issue_events_360144.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-03-26T13:18:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27554#event-360144"
}
```



---

archive/issue_comments_429713.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nIt doesn't even install for me:\n\n```\n...\nkenzo-1.1.7-r1] ;;; Emitting code for CHML-CLSS.\n[kenzo-1.1.7-r1] ;;; Finished compiling /mnt/opt/Sage/sage-dev/local/var/tmp/sage/build/kenzo-1.1.7-r1/src/src/smith.lisp.\n[kenzo-1.1.7-r1] ;;;\n[kenzo-1.1.7-r1] ;;; Warning: Lisp compilation had style-warnings while compiling #<cl-source-file \"kenzo\" \"src\" \"smith\">\n[kenzo-1.1.7-r1] (\"smith\" \"whitehead\" \"cl-space-efhm\" \"cs-twisted-products\" \"serre\" \"k-pi-1\" \"classifying-spaces\" \"lp-space-efhm\" \"ls-twisted-products\" \"loop-spaces\" ...)\n[kenzo-1.1.7-r1] > \n[kenzo-1.1.7-r1] Condition of type: SIMPLE-FILE-ERROR\n[kenzo-1.1.7-r1] Unable to rename file #P\"/home/dima/.cache/common-lisp/ecl-16.1.2-unknown-linux-x64/mnt/opt/Sage/sage-dev/local/var/tmp/sage/build/kenzo-1.1.7-r1/src/kenzo--all-systems.fasb\" to #P\"/mnt/opt/Sage/sage-dev/local/var/tmp/sage/build/kenzo-1.1.7-r1/src/kenzo--all-systems.fasb\".\n[kenzo-1.1.7-r1] C library error: \"Invalid cross-device link\"\n[kenzo-1.1.7-r1] \n[kenzo-1.1.7-r1] Available restarts:\n[kenzo-1.1.7-r1] \n[kenzo-1.1.7-r1] 1. (RESTART-TOPLEVEL) Go back to Top-Level REPL.\n[kenzo-1.1.7-r1] \n[kenzo-1.1.7-r1] Broken at SI:BYTECODES. [Evaluation of: (ASDF/BUNDLE:MAKE-BUILD :KENZO :TYPE :FASL :MONOLITHIC T :MOVE-HERE #P\".\")]\n[kenzo-1.1.7-r1] >> \n[kenzo-1.1.7-r1] moving kenzo--all-systems.fasb to  /mnt/opt/Sage/sage-dev/local/lib/ecl/kenzo.fas\n[kenzo-1.1.7-r1] mv: cannot stat 'kenzo--all-systems.fasb': No such file or directory\n[kenzo-1.1.7-r1] Error installing Kenzo.\n[kenzo-1.1.7-r1] \n```",
    "created_at": "2019-03-26T21:31:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27554#issuecomment-429713",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:1" align="right">Comment 1</div>

It doesn't even install for me:

```
...
kenzo-1.1.7-r1] ;;; Emitting code for CHML-CLSS.
[kenzo-1.1.7-r1] ;;; Finished compiling /mnt/opt/Sage/sage-dev/local/var/tmp/sage/build/kenzo-1.1.7-r1/src/src/smith.lisp.
[kenzo-1.1.7-r1] ;;;
[kenzo-1.1.7-r1] ;;; Warning: Lisp compilation had style-warnings while compiling #<cl-source-file "kenzo" "src" "smith">
[kenzo-1.1.7-r1] ("smith" "whitehead" "cl-space-efhm" "cs-twisted-products" "serre" "k-pi-1" "classifying-spaces" "lp-space-efhm" "ls-twisted-products" "loop-spaces" ...)
[kenzo-1.1.7-r1] > 
[kenzo-1.1.7-r1] Condition of type: SIMPLE-FILE-ERROR
[kenzo-1.1.7-r1] Unable to rename file #P"/home/dima/.cache/common-lisp/ecl-16.1.2-unknown-linux-x64/mnt/opt/Sage/sage-dev/local/var/tmp/sage/build/kenzo-1.1.7-r1/src/kenzo--all-systems.fasb" to #P"/mnt/opt/Sage/sage-dev/local/var/tmp/sage/build/kenzo-1.1.7-r1/src/kenzo--all-systems.fasb".
[kenzo-1.1.7-r1] C library error: "Invalid cross-device link"
[kenzo-1.1.7-r1] 
[kenzo-1.1.7-r1] Available restarts:
[kenzo-1.1.7-r1] 
[kenzo-1.1.7-r1] 1. (RESTART-TOPLEVEL) Go back to Top-Level REPL.
[kenzo-1.1.7-r1] 
[kenzo-1.1.7-r1] Broken at SI:BYTECODES. [Evaluation of: (ASDF/BUNDLE:MAKE-BUILD :KENZO :TYPE :FASL :MONOLITHIC T :MOVE-HERE #P".")]
[kenzo-1.1.7-r1] >> 
[kenzo-1.1.7-r1] moving kenzo--all-systems.fasb to  /mnt/opt/Sage/sage-dev/local/lib/ecl/kenzo.fas
[kenzo-1.1.7-r1] mv: cannot stat 'kenzo--all-systems.fasb': No such file or directory
[kenzo-1.1.7-r1] Error installing Kenzo.
[kenzo-1.1.7-r1] 
```



---

archive/issue_comments_429714.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nseems like the problem is in copying between partitions, and this has already been fixed for Maxima on #8645",
    "created_at": "2019-03-26T21:39:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27554#issuecomment-429714",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:2" align="right">Comment 2</div>

seems like the problem is in copying between partitions, and this has already been fixed for Maxima on #8645



---

archive/issue_comments_429715.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nPerhaps Nils knows how to do this properly, as no traces of the fix from #8645 can be found, and the fix itself does not seem to work - perhaps it's outdated.",
    "created_at": "2019-03-26T22:02:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27554#issuecomment-429715",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:3" align="right">Comment 3</div>

Perhaps Nils knows how to do this properly, as no traces of the fix from #8645 can be found, and the fix itself does not seem to work - perhaps it's outdated.



---

archive/issue_comments_429716.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nI think this should fix the doctest, but I don't know about Dima's installation problem.\n\n```diff\ndiff --git a/src/sage/interfaces/kenzo.py b/src/sage/interfaces/kenzo.py\nindex cc24ed3f0c..f0b4a1aafb 100644\n--- a/src/sage/interfaces/kenzo.py\n+++ b/src/sage/interfaces/kenzo.py\n@@ -36,6 +36,7 @@ from sage.structure.sage_object import SageObject\n from sage.homology.homology_group import HomologyGroup\n from sage.rings.integer_ring import ZZ\n from sage.groups.additive_abelian.additive_abelian_group import AdditiveAbelianGroup\n+from sage.categories.commutative_additive_groups import CommutativeAdditiveGroups\n \n from sage.libs.ecl import EclObject, ecl_eval, EclListIterator\n \n```",
    "created_at": "2019-03-27T05:24:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27554#issuecomment-429716",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:4" align="right">Comment 4</div>

I think this should fix the doctest, but I don't know about Dima's installation problem.

```diff
diff --git a/src/sage/interfaces/kenzo.py b/src/sage/interfaces/kenzo.py
index cc24ed3f0c..f0b4a1aafb 100644
--- a/src/sage/interfaces/kenzo.py
+++ b/src/sage/interfaces/kenzo.py
@@ -36,6 +36,7 @@ from sage.structure.sage_object import SageObject
 from sage.homology.homology_group import HomologyGroup
 from sage.rings.integer_ring import ZZ
 from sage.groups.additive_abelian.additive_abelian_group import AdditiveAbelianGroup
+from sage.categories.commutative_additive_groups import CommutativeAdditiveGroups
 
 from sage.libs.ecl import EclObject, ecl_eval, EclListIterator
 
```



---

archive/issue_comments_429717.json:
```json
{
    "body": "Upstream: **Reported upstream. No feedback yet.**",
    "created_at": "2019-03-27T09:13:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27554#issuecomment-429717",
    "user": "https://github.com/dimpase"
}
```

Upstream: **Reported upstream. No feedback yet.**



---

archive/issue_comments_429718.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nThe following patch makes it work for me\n\n```diff\n--- a/compile.lisp\n+++ b/compile.lisp\n@@ -5,6 +5,7 @@\n \n \n (require :asdf)\n+(asdf:disable-output-translations)\n (push #P\"./\" asdf:*central-registry*)\n (require :kenzo)\n (asdf:make-build :kenzo :type :fasl :monolithic t :move-here #P\".\")\n```\n\n(yes, I RTFM'd for a bit... :-)\n\nI've opened https://github.com/miguelmarco/kenzo/pull/1 to put this fix upstream",
    "created_at": "2019-03-27T09:13:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27554#issuecomment-429718",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:5" align="right">Comment 5</div>

The following patch makes it work for me

```diff
--- a/compile.lisp
+++ b/compile.lisp
@@ -5,6 +5,7 @@
 
 
 (require :asdf)
+(asdf:disable-output-translations)
 (push #P"./" asdf:*central-registry*)
 (require :kenzo)
 (asdf:make-build :kenzo :type :fasl :monolithic t :move-here #P".")
```

(yes, I RTFM'd for a bit... :-)

I've opened https://github.com/miguelmarco/kenzo/pull/1 to put this fix upstream



---

archive/issue_comments_429719.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nI did a new upstream release with Dima's patch:\n\nhttps://github.com/miguelmarco/kenzo/releases/tag/1.1.7-r2",
    "created_at": "2019-03-27T09:33:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27554#issuecomment-429719",
    "user": "https://github.com/miguelmarco"
}
```

<div id="comment:6" align="right">Comment 6</div>

I did a new upstream release with Dima's patch:

https://github.com/miguelmarco/kenzo/releases/tag/1.1.7-r2



---

archive/issue_comments_429720.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nI'm a bit unsure whether, given that Kenzo is now a Sage package, about Kenzo examples in  `src/sage/homology/simplicial_set_examples.py`. \n\nShould there at least be a script (or Lisp code) available there to re-create these files?",
    "created_at": "2019-03-27T10:54:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27554#issuecomment-429720",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:7" align="right">Comment 7</div>

I'm a bit unsure whether, given that Kenzo is now a Sage package, about Kenzo examples in  `src/sage/homology/simplicial_set_examples.py`. 

Should there at least be a script (or Lisp code) available there to re-create these files?



---

archive/issue_comments_429721.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nReplying to [@dimpase](#comment%3A7):\n> I'm a bit unsure whether, given that Kenzo is now a Sage package, about Kenzo examples in  `src/sage/homology/simplicial_set_examples.py`. \n> \n> Should there at least be a script (or Lisp code) available there to re-create these files?\n\nOur plan with Ana Romero and her student is to keep working on a more complete interface between Kenzo and Sage. The long term idea is to be able to seamlessly translate simplicial sets back and forth. That includes writing some specific Kenzo code to be able to create simplicial sets from the kind of information that Sage uses to define them, and to output the kind of information that Sage would need.\n\nConsidering that, I would wait until we have that ready to redesign the interface used in those examples.",
    "created_at": "2019-03-27T12:40:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27554#issuecomment-429721",
    "user": "https://github.com/miguelmarco"
}
```

<div id="comment:8" align="right">Comment 8</div>

Replying to [@dimpase](#comment%3A7):
> I'm a bit unsure whether, given that Kenzo is now a Sage package, about Kenzo examples in  `src/sage/homology/simplicial_set_examples.py`. 
> 
> Should there at least be a script (or Lisp code) available there to re-create these files?

Our plan with Ana Romero and her student is to keep working on a more complete interface between Kenzo and Sage. The long term idea is to be able to seamlessly translate simplicial sets back and forth. That includes writing some specific Kenzo code to be able to create simplicial sets from the kind of information that Sage uses to define them, and to output the kind of information that Sage would need.

Considering that, I would wait until we have that ready to redesign the interface used in those examples.



---

archive/issue_comments_429722.json:
```json
{
    "body": "Branch: **[u/mmarco/kenzo_interface_is_broken](https://github.com/sagemath/sagetrac-mirror/tree/u/mmarco/kenzo_interface_is_broken)**",
    "created_at": "2019-03-27T12:56:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27554#issuecomment-429722",
    "user": "https://github.com/miguelmarco"
}
```

Branch: **[u/mmarco/kenzo_interface_is_broken](https://github.com/sagemath/sagetrac-mirror/tree/u/mmarco/kenzo_interface_is_broken)**



---

archive/issue_comments_429723.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nI added the missing import, and also made a version bump of the kenzo package, to include Dima's patch (tarball is in https://github.com/miguelmarco/kenzo/archive/1.1.7-r2.tar.gz ).\n\nCan you please test it?\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1383821b3dcaf55f525c6c52194d21c13f4ae9f3\">1383821</a></td><td><code>Add import and version bump</code></td></tr></table>\n",
    "created_at": "2019-03-27T12:58:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27554#issuecomment-429723",
    "user": "https://github.com/miguelmarco"
}
```

<div id="comment:10" align="right">Comment 10</div>

I added the missing import, and also made a version bump of the kenzo package, to include Dima's patch (tarball is in https://github.com/miguelmarco/kenzo/archive/1.1.7-r2.tar.gz ).

Can you please test it?

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1383821b3dcaf55f525c6c52194d21c13f4ae9f3">1383821</a></td><td><code>Add import and version bump</code></td></tr></table>




---

archive/issue_comments_429724.json:
```json
{
    "body": "Commit: **[1383821](https://github.com/sagemath/sagetrac-mirror/commit/1383821b3dcaf55f525c6c52194d21c13f4ae9f3)**",
    "created_at": "2019-03-27T12:58:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27554#issuecomment-429724",
    "user": "https://github.com/miguelmarco"
}
```

Commit: **[1383821](https://github.com/sagemath/sagetrac-mirror/commit/1383821b3dcaf55f525c6c52194d21c13f4ae9f3)**



---

archive/issue_comments_429725.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nOK, this works. \nBy the way, I'm not sure all the contents of the tarball should be there, e.g. archive/ and jupyter notebooks in examples.\n\nYou can create a slimmed down tarball and add to the release.",
    "created_at": "2019-03-27T13:23:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27554#issuecomment-429725",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:11" align="right">Comment 11</div>

OK, this works. 
By the way, I'm not sure all the contents of the tarball should be there, e.g. archive/ and jupyter notebooks in examples.

You can create a slimmed down tarball and add to the release.



---

archive/issue_comments_429726.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4cbeb6f2815246ef7550eea05f787cbe3084633d\">4cbeb6f</a></td><td><code>Version bump to slimmed down tarball</code></td></tr></table>\n",
    "created_at": "2019-03-28T09:38:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27554#issuecomment-429726",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12" align="right">Comment 12</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4cbeb6f2815246ef7550eea05f787cbe3084633d">4cbeb6f</a></td><td><code>Version bump to slimmed down tarball</code></td></tr></table>




---

archive/issue_comments_429727.json:
```json
{
    "body": "Changed commit from **[1383821](https://github.com/sagemath/sagetrac-mirror/commit/1383821b3dcaf55f525c6c52194d21c13f4ae9f3)** to **[4cbeb6f](https://github.com/sagemath/sagetrac-mirror/commit/4cbeb6f2815246ef7550eea05f787cbe3084633d)**",
    "created_at": "2019-03-28T09:38:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27554#issuecomment-429727",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1383821](https://github.com/sagemath/sagetrac-mirror/commit/1383821b3dcaf55f525c6c52194d21c13f4ae9f3)** to **[4cbeb6f](https://github.com/sagemath/sagetrac-mirror/commit/4cbeb6f2815246ef7550eea05f787cbe3084633d)**



---

archive/issue_comments_429728.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nReplying to [@dimpase](#comment%3A11):\n> OK, this works. \n> By the way, I'm not sure all the contents of the tarball should be there, e.g. archive/ and jupyter notebooks in examples.\n> \n> You can create a slimmed down tarball and add to the release.\n\n\nDone! The tarball is at https://github.com/miguelmarco/kenzo/archive/1.1.7-r3.tar.gz",
    "created_at": "2019-03-28T09:38:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27554#issuecomment-429728",
    "user": "https://github.com/miguelmarco"
}
```

<div id="comment:13" align="right">Comment 13</div>

Replying to [@dimpase](#comment%3A11):
> OK, this works. 
> By the way, I'm not sure all the contents of the tarball should be there, e.g. archive/ and jupyter notebooks in examples.
> 
> You can create a slimmed down tarball and add to the release.


Done! The tarball is at https://github.com/miguelmarco/kenzo/archive/1.1.7-r3.tar.gz



---

archive/issue_comments_429729.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nThe tarball for Sage need not be the same as what you automatically get from github. On the releases page there is \"Edit\" button to the right of each release, clicking on it allows you to add more \"assets\", e.g. a tarball - properly named, so that one can just wget it without a need to rename.",
    "created_at": "2019-03-28T10:28:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27554#issuecomment-429729",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:14" align="right">Comment 14</div>

The tarball for Sage need not be the same as what you automatically get from github. On the releases page there is "Edit" button to the right of each release, clicking on it allows you to add more "assets", e.g. a tarball - properly named, so that one can just wget it without a need to rename.



---

archive/issue_comments_429730.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nReplying to [@dimpase](#comment%3A14):\n> The tarball for Sage need not be the same as what you automatically get from github. On the releases page there is \"Edit\" button to the right of each release, clicking on it allows you to add more \"assets\", e.g. a tarball - properly named, so that one can just wget it without a need to rename.\n\nI know, but that kind of goes against the idea of version control. I do prefear to have everything fully synced.",
    "created_at": "2019-03-28T10:36:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27554#issuecomment-429730",
    "user": "https://github.com/miguelmarco"
}
```

<div id="comment:15" align="right">Comment 15</div>

Replying to [@dimpase](#comment%3A14):
> The tarball for Sage need not be the same as what you automatically get from github. On the releases page there is "Edit" button to the right of each release, clicking on it allows you to add more "assets", e.g. a tarball - properly named, so that one can just wget it without a need to rename.

I know, but that kind of goes against the idea of version control. I do prefear to have everything fully synced.



---

archive/issue_comments_429731.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nWell, in fact sometimes we do have issues with automatically created, by github, tarballs, as they are not stable, they may be affected by changes in the git repo! \n\nhttps://www.google.com/search?q=github+tarballs+changing",
    "created_at": "2019-03-28T10:39:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27554#issuecomment-429731",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:16" align="right">Comment 16</div>

Well, in fact sometimes we do have issues with automatically created, by github, tarballs, as they are not stable, they may be affected by changes in the git repo! 

https://www.google.com/search?q=github+tarballs+changing



---

archive/issue_comments_429732.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nI'd rather use something like git submodules/subtrees/subwhatever for source Sage packages, in fact. This is IMHO safer than tarballs, generally speaking.",
    "created_at": "2019-03-28T10:45:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27554#issuecomment-429732",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:17" align="right">Comment 17</div>

I'd rather use something like git submodules/subtrees/subwhatever for source Sage packages, in fact. This is IMHO safer than tarballs, generally speaking.



---

archive/issue_comments_429733.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nBut the tarballs corresponding to releases shouldn't change at all, right?",
    "created_at": "2019-03-28T10:46:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27554#issuecomment-429733",
    "user": "https://github.com/miguelmarco"
}
```

<div id="comment:18" align="right">Comment 18</div>

But the tarballs corresponding to releases shouldn't change at all, right?



---

archive/issue_comments_429734.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nReplying to [@miguelmarco](#comment%3A18):\n> But the tarballs corresponding to releases shouldn't change at all, right?\n\nI am trying to say that the automatically generated by github tarballs are not stable, they may change overtime, and should be avoided. On the other hand, if you add to a github release an \"asset\" tarball, it will stay intact.",
    "created_at": "2019-03-28T11:39:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27554#issuecomment-429734",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:19" align="right">Comment 19</div>

Replying to [@miguelmarco](#comment%3A18):
> But the tarballs corresponding to releases shouldn't change at all, right?

I am trying to say that the automatically generated by github tarballs are not stable, they may change overtime, and should be avoided. On the other hand, if you add to a github release an "asset" tarball, it will stay intact.



---

archive/issue_comments_429735.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\njust to explain, I did the following, as an example:\nhttps://github.com/dimpase/kenzo/releases/tag/test\n\nthere you see https://github.com/dimpase/kenzo/releases/download/test/kenzo-test.tar.gz\nwhich is the copy of what I got after clicking on \nhttps://github.com/dimpase/kenzo/archive/test.tar.gz\nand uploading back using \"Edit\" button.\nWhile the latter tarball might change overtime, the former would not, and it also has the correct name.",
    "created_at": "2019-03-30T07:49:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27554#issuecomment-429735",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:20" align="right">Comment 20</div>

just to explain, I did the following, as an example:
https://github.com/dimpase/kenzo/releases/tag/test

there you see https://github.com/dimpase/kenzo/releases/download/test/kenzo-test.tar.gz
which is the copy of what I got after clicking on 
https://github.com/dimpase/kenzo/archive/test.tar.gz
and uploading back using "Edit" button.
While the latter tarball might change overtime, the former would not, and it also has the correct name.



---

archive/issue_comments_429736.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nI see, thanks for the hint.\n\nI just added that to the release. The link is now https://github.com/miguelmarco/kenzo/releases/download/1.1.7-r3/kenzo-1.1.7-r3.tar.gz",
    "created_at": "2019-03-30T11:26:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27554#issuecomment-429736",
    "user": "https://github.com/miguelmarco"
}
```

<div id="comment:21" align="right">Comment 21</div>

I see, thanks for the hint.

I just added that to the release. The link is now https://github.com/miguelmarco/kenzo/releases/download/1.1.7-r3/kenzo-1.1.7-r3.tar.gz



---

archive/issue_comments_429737.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nOK, can you update the branch to reflect this - or do checksum remain the same?",
    "created_at": "2019-03-30T11:29:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27554#issuecomment-429737",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:22" align="right">Comment 22</div>

OK, can you update the branch to reflect this - or do checksum remain the same?



---

archive/issue_comments_429738.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nThe checksums have not changed",
    "created_at": "2019-03-30T12:15:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27554#issuecomment-429738",
    "user": "https://github.com/miguelmarco"
}
```

<div id="comment:23" align="right">Comment 23</div>

The checksums have not changed



---

archive/issue_comments_429739.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nOk, please provide a link to the tarballs in the ticket description, as we always do for package updates.",
    "created_at": "2019-03-30T12:20:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27554#issuecomment-429739",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:24" align="right">Comment 24</div>

Ok, please provide a link to the tarballs in the ticket description, as we always do for package updates.



---

archive/issue_comments_429740.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -32,3 +32,7 @@\n     NameError: name 'f3' is not defined\n **********************************************************************\n ```\n+\n+\n+\n+A problem with the instalation using different partitions has been solved upstream. We include a new version of the package here. The new tarball is in https://github.com/miguelmarco/kenzo/releases/download/1.1.7-r3/kenzo-1.1.7-r3.tar.gz\n``````\n",
    "created_at": "2019-03-30T12:23:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27554#issuecomment-429740",
    "user": "https://github.com/miguelmarco"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -32,3 +32,7 @@
     NameError: name 'f3' is not defined
 **********************************************************************
 ```
+
+
+
+A problem with the instalation using different partitions has been solved upstream. We include a new version of the package here. The new tarball is in https://github.com/miguelmarco/kenzo/releases/download/1.1.7-r3/kenzo-1.1.7-r3.tar.gz
``````




---

archive/issue_events_360145.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-03-30T12:26:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27554#event-360145"
}
```



---

archive/issue_comments_429741.json:
```json
{
    "body": "Reviewer: **Dima Pasechnik**",
    "created_at": "2019-03-30T12:26:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27554#issuecomment-429741",
    "user": "https://github.com/dimpase"
}
```

Reviewer: **Dima Pasechnik**



---

archive/issue_comments_429742.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nfeel free to set it to positive review, and provide author name.",
    "created_at": "2019-03-30T12:26:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27554#issuecomment-429742",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:26" align="right">Comment 26</div>

feel free to set it to positive review, and provide author name.



---

archive/issue_events_360146.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2019-03-30T12:27:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27554#event-360146"
}
```



---

archive/issue_events_360147.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2019-03-30T12:27:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27554#event-360147"
}
```



---

archive/issue_comments_429743.json:
```json
{
    "body": "Author: **Miguel Marco**",
    "created_at": "2019-03-30T12:27:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27554#issuecomment-429743",
    "user": "https://github.com/miguelmarco"
}
```

Author: **Miguel Marco**



---

archive/issue_events_360148.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-03-31T22:43:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27554#event-360148"
}
```



---

archive/issue_events_360149.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "1ac4304ff3d0c59008ff33da8e7a23320da3b409",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-03-31T22:43:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27554#event-360149"
}
```



---

archive/issue_comments_429744.json:
```json
{
    "body": "Changed branch from **[u/mmarco/kenzo_interface_is_broken](https://github.com/sagemath/sagetrac-mirror/tree/u/mmarco/kenzo_interface_is_broken)** to **[4cbeb6f](https://github.com/sagemath/sagetrac-mirror/commit/4cbeb6f2815246ef7550eea05f787cbe3084633d)**",
    "created_at": "2019-03-31T22:43:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27554#issuecomment-429744",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mmarco/kenzo_interface_is_broken](https://github.com/sagemath/sagetrac-mirror/tree/u/mmarco/kenzo_interface_is_broken)** to **[4cbeb6f](https://github.com/sagemath/sagetrac-mirror/commit/4cbeb6f2815246ef7550eea05f787cbe3084633d)**
