# Issue 27554: Kenzo interface is broken

archive/issues_027317.json:
```json
{
    "body": "Seems like a missing import...\n\n```\nsage -t --long src/sage/interfaces/kenzo.py\n**********************************************************************\nFile \"src/sage/interfaces/kenzo.py\", line 157, in sage.interfaces.kenzo.EilenbergMacLaneSpace\nFailed example:\n    f3 = EilenbergMacLaneSpace(AdditiveAbelianGroup([2]), 3)   # optional - kenzo\nException raised:\n    Traceback (most recent call last):\n      File \"/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 671, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1095, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.interfaces.kenzo.EilenbergMacLaneSpace[3]>\", line 1, in <module>\n        f3 = EilenbergMacLaneSpace(AdditiveAbelianGroup([Integer(2)]), Integer(3))   # optional - kenzo\n      File \"/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/interfaces/kenzo.py\", line 164, in EilenbergMacLaneSpace\n        elif G in CommutativeAdditiveGroups() and G.cardinality() == 2:\n    NameError: global name 'CommutativeAdditiveGroups' is not defined\n**********************************************************************\nFile \"src/sage/interfaces/kenzo.py\", line 158, in sage.interfaces.kenzo.EilenbergMacLaneSpace\nFailed example:\n    [f3.homology(i) for i in range(8)]                         # optional - kenzo\nException raised:\n    Traceback (most recent call last):\n      File \"/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 671, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1095, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.interfaces.kenzo.EilenbergMacLaneSpace[4]>\", line 1, in <module>\n        [f3.homology(i) for i in range(Integer(8))]                         # optional - kenzo\n    NameError: name 'f3' is not defined\n**********************************************************************\n```\n\n\n\nA problem with the instalation using different partitions has been solved upstream. We include a new version of the package here. The new tarball is in https://github.com/miguelmarco/kenzo/releases/download/1.1.7-r3/kenzo-1.1.7-r3.tar.gz\n\nCC:  @miguelmarco @nbruin\n\nBranch/Commit: 4cbeb6f2815246ef7550eea05f787cbe3084633d\n\nUpstream: Reported upstream. No feedback yet.\n\nReviewer: Dima Pasechnik\n\nAuthor: Miguel Marco\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/27554\n\n",
    "closed_at": "2019-03-31T22:43:42Z",
    "created_at": "2019-03-26T13:18:43Z",
    "labels": [
        "component: interfaces: optional",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.8",
    "title": "Kenzo interface is broken",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27554",
    "user": "https://github.com/jdemeyer"
}
```
Seems like a missing import...

```
sage -t --long src/sage/interfaces/kenzo.py
**********************************************************************
File "src/sage/interfaces/kenzo.py", line 157, in sage.interfaces.kenzo.EilenbergMacLaneSpace
Failed example:
    f3 = EilenbergMacLaneSpace(AdditiveAbelianGroup([2]), 3)   # optional - kenzo
Exception raised:
    Traceback (most recent call last):
      File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 671, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1095, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.interfaces.kenzo.EilenbergMacLaneSpace[3]>", line 1, in <module>
        f3 = EilenbergMacLaneSpace(AdditiveAbelianGroup([Integer(2)]), Integer(3))   # optional - kenzo
      File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/interfaces/kenzo.py", line 164, in EilenbergMacLaneSpace
        elif G in CommutativeAdditiveGroups() and G.cardinality() == 2:
    NameError: global name 'CommutativeAdditiveGroups' is not defined
**********************************************************************
File "src/sage/interfaces/kenzo.py", line 158, in sage.interfaces.kenzo.EilenbergMacLaneSpace
Failed example:
    [f3.homology(i) for i in range(8)]                         # optional - kenzo
Exception raised:
    Traceback (most recent call last):
      File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 671, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1095, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.interfaces.kenzo.EilenbergMacLaneSpace[4]>", line 1, in <module>
        [f3.homology(i) for i in range(Integer(8))]                         # optional - kenzo
    NameError: name 'f3' is not defined
**********************************************************************
```



A problem with the instalation using different partitions has been solved upstream. We include a new version of the package here. The new tarball is in https://github.com/miguelmarco/kenzo/releases/download/1.1.7-r3/kenzo-1.1.7-r3.tar.gz

CC:  @miguelmarco @nbruin

Branch/Commit: 4cbeb6f2815246ef7550eea05f787cbe3084633d

Upstream: Reported upstream. No feedback yet.

Reviewer: Dima Pasechnik

Author: Miguel Marco

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/27554





---

archive/issue_comments_531774.json:
```json
{
    "body": "<a id='comment:1'></a>It doesn't even install for me:\n\n```\n...\nkenzo-1.1.7-r1] ;;; Emitting code for CHML-CLSS.\n[kenzo-1.1.7-r1] ;;; Finished compiling /mnt/opt/Sage/sage-dev/local/var/tmp/sage/build/kenzo-1.1.7-r1/src/src/smith.lisp.\n[kenzo-1.1.7-r1] ;;;\n[kenzo-1.1.7-r1] ;;; Warning: Lisp compilation had style-warnings while compiling #<cl-source-file \"kenzo\" \"src\" \"smith\">\n[kenzo-1.1.7-r1] (\"smith\" \"whitehead\" \"cl-space-efhm\" \"cs-twisted-products\" \"serre\" \"k-pi-1\" \"classifying-spaces\" \"lp-space-efhm\" \"ls-twisted-products\" \"loop-spaces\" ...)\n[kenzo-1.1.7-r1] > \n[kenzo-1.1.7-r1] Condition of type: SIMPLE-FILE-ERROR\n[kenzo-1.1.7-r1] Unable to rename file #P\"/home/dima/.cache/common-lisp/ecl-16.1.2-unknown-linux-x64/mnt/opt/Sage/sage-dev/local/var/tmp/sage/build/kenzo-1.1.7-r1/src/kenzo--all-systems.fasb\" to #P\"/mnt/opt/Sage/sage-dev/local/var/tmp/sage/build/kenzo-1.1.7-r1/src/kenzo--all-systems.fasb\".\n[kenzo-1.1.7-r1] C library error: \"Invalid cross-device link\"\n[kenzo-1.1.7-r1] \n[kenzo-1.1.7-r1] Available restarts:\n[kenzo-1.1.7-r1] \n[kenzo-1.1.7-r1] 1. (RESTART-TOPLEVEL) Go back to Top-Level REPL.\n[kenzo-1.1.7-r1] \n[kenzo-1.1.7-r1] Broken at SI:BYTECODES. [Evaluation of: (ASDF/BUNDLE:MAKE-BUILD :KENZO :TYPE :FASL :MONOLITHIC T :MOVE-HERE #P\".\")]\n[kenzo-1.1.7-r1] >> \n[kenzo-1.1.7-r1] moving kenzo--all-systems.fasb to  /mnt/opt/Sage/sage-dev/local/lib/ecl/kenzo.fas\n[kenzo-1.1.7-r1] mv: cannot stat 'kenzo--all-systems.fasb': No such file or directory\n[kenzo-1.1.7-r1] Error installing Kenzo.\n[kenzo-1.1.7-r1] \n```",
    "created_at": "2019-03-26T21:31:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27554#issuecomment-531774",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:1'></a>It doesn't even install for me:

```
...
kenzo-1.1.7-r1] ;;; Emitting code for CHML-CLSS.
[kenzo-1.1.7-r1] ;;; Finished compiling /mnt/opt/Sage/sage-dev/local/var/tmp/sage/build/kenzo-1.1.7-r1/src/src/smith.lisp.
[kenzo-1.1.7-r1] ;;;
[kenzo-1.1.7-r1] ;;; Warning: Lisp compilation had style-warnings while compiling #<cl-source-file "kenzo" "src" "smith">
[kenzo-1.1.7-r1] ("smith" "whitehead" "cl-space-efhm" "cs-twisted-products" "serre" "k-pi-1" "classifying-spaces" "lp-space-efhm" "ls-twisted-products" "loop-spaces" ...)
[kenzo-1.1.7-r1] > 
[kenzo-1.1.7-r1] Condition of type: SIMPLE-FILE-ERROR
[kenzo-1.1.7-r1] Unable to rename file #P"/home/dima/.cache/common-lisp/ecl-16.1.2-unknown-linux-x64/mnt/opt/Sage/sage-dev/local/var/tmp/sage/build/kenzo-1.1.7-r1/src/kenzo--all-systems.fasb" to #P"/mnt/opt/Sage/sage-dev/local/var/tmp/sage/build/kenzo-1.1.7-r1/src/kenzo--all-systems.fasb".
[kenzo-1.1.7-r1] C library error: "Invalid cross-device link"
[kenzo-1.1.7-r1] 
[kenzo-1.1.7-r1] Available restarts:
[kenzo-1.1.7-r1] 
[kenzo-1.1.7-r1] 1. (RESTART-TOPLEVEL) Go back to Top-Level REPL.
[kenzo-1.1.7-r1] 
[kenzo-1.1.7-r1] Broken at SI:BYTECODES. [Evaluation of: (ASDF/BUNDLE:MAKE-BUILD :KENZO :TYPE :FASL :MONOLITHIC T :MOVE-HERE #P".")]
[kenzo-1.1.7-r1] >> 
[kenzo-1.1.7-r1] moving kenzo--all-systems.fasb to  /mnt/opt/Sage/sage-dev/local/lib/ecl/kenzo.fas
[kenzo-1.1.7-r1] mv: cannot stat 'kenzo--all-systems.fasb': No such file or directory
[kenzo-1.1.7-r1] Error installing Kenzo.
[kenzo-1.1.7-r1] 
```



---

archive/issue_comments_531775.json:
```json
{
    "body": "<a id='comment:2'></a>seems like the problem is in copying between partitions, and this has already been fixed for Maxima on #8645",
    "created_at": "2019-03-26T21:39:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27554#issuecomment-531775",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:2'></a>seems like the problem is in copying between partitions, and this has already been fixed for Maxima on #8645



---

archive/issue_comments_531776.json:
```json
{
    "body": "<a id='comment:3'></a>Perhaps Nils knows how to do this properly, as no traces of the fix from #8645 can be found, and the fix itself does not seem to work - perhaps it's outdated.",
    "created_at": "2019-03-26T22:02:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27554#issuecomment-531776",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:3'></a>Perhaps Nils knows how to do this properly, as no traces of the fix from #8645 can be found, and the fix itself does not seem to work - perhaps it's outdated.



---

archive/issue_comments_531777.json:
```json
{
    "body": "<a id='comment:4'></a>I think this should fix the doctest, but I don't know about Dima's installation problem.\n\n```diff\ndiff --git a/src/sage/interfaces/kenzo.py b/src/sage/interfaces/kenzo.py\nindex cc24ed3f0c..f0b4a1aafb 100644\n--- a/src/sage/interfaces/kenzo.py\n+++ b/src/sage/interfaces/kenzo.py\n@@ -36,6 +36,7 @@ from sage.structure.sage_object import SageObject\n from sage.homology.homology_group import HomologyGroup\n from sage.rings.integer_ring import ZZ\n from sage.groups.additive_abelian.additive_abelian_group import AdditiveAbelianGroup\n+from sage.categories.commutative_additive_groups import CommutativeAdditiveGroups\n \n from sage.libs.ecl import EclObject, ecl_eval, EclListIterator\n \n```",
    "created_at": "2019-03-27T05:24:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27554#issuecomment-531777",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:4'></a>I think this should fix the doctest, but I don't know about Dima's installation problem.

```diff
diff --git a/src/sage/interfaces/kenzo.py b/src/sage/interfaces/kenzo.py
index cc24ed3f0c..f0b4a1aafb 100644
--- a/src/sage/interfaces/kenzo.py
+++ b/src/sage/interfaces/kenzo.py
@@ -36,6 +36,7 @@ from sage.structure.sage_object import SageObject
 from sage.homology.homology_group import HomologyGroup
 from sage.rings.integer_ring import ZZ
 from sage.groups.additive_abelian.additive_abelian_group import AdditiveAbelianGroup
+from sage.categories.commutative_additive_groups import CommutativeAdditiveGroups
 
 from sage.libs.ecl import EclObject, ecl_eval, EclListIterator
 
```



---

archive/issue_comments_531778.json:
```json
{
    "body": "Changing upstream from \"N/A\" to \"Reported upstream. No feedback yet.\"",
    "created_at": "2019-03-27T09:13:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27554#issuecomment-531778",
    "user": "https://github.com/dimpase"
}
```

Changing upstream from "N/A" to "Reported upstream. No feedback yet."



---

archive/issue_comments_531779.json:
```json
{
    "body": "<a id='comment:5'></a>The following patch makes it work for me\n\n```diff\n--- a/compile.lisp\n+++ b/compile.lisp\n@@ -5,6 +5,7 @@\n \n \n (require :asdf)\n+(asdf:disable-output-translations)\n (push #P\"./\" asdf:*central-registry*)\n (require :kenzo)\n (asdf:make-build :kenzo :type :fasl :monolithic t :move-here #P\".\")\n```\n\n(yes, I RTFM'd for a bit... :-)\n\nI've opened https://github.com/miguelmarco/kenzo/pull/1 to put this fix upstream",
    "created_at": "2019-03-27T09:13:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27554#issuecomment-531779",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:5'></a>The following patch makes it work for me

```diff
--- a/compile.lisp
+++ b/compile.lisp
@@ -5,6 +5,7 @@
 
 
 (require :asdf)
+(asdf:disable-output-translations)
 (push #P"./" asdf:*central-registry*)
 (require :kenzo)
 (asdf:make-build :kenzo :type :fasl :monolithic t :move-here #P".")
```

(yes, I RTFM'd for a bit... :-)

I've opened https://github.com/miguelmarco/kenzo/pull/1 to put this fix upstream



---

archive/issue_comments_531780.json:
```json
{
    "body": "<a id='comment:6'></a>I did a new upstream release with Dima's patch:\n\nhttps://github.com/miguelmarco/kenzo/releases/tag/1.1.7-r2",
    "created_at": "2019-03-27T09:33:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27554#issuecomment-531780",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:6'></a>I did a new upstream release with Dima's patch:

https://github.com/miguelmarco/kenzo/releases/tag/1.1.7-r2



---

archive/issue_comments_531781.json:
```json
{
    "body": "<a id='comment:7'></a>I'm a bit unsure whether, given that Kenzo is now a Sage package, about Kenzo examples in  `src/sage/homology/simplicial_set_examples.py`. \n\nShould there at least be a script (or Lisp code) available there to re-create these files?",
    "created_at": "2019-03-27T10:54:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27554#issuecomment-531781",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:7'></a>I'm a bit unsure whether, given that Kenzo is now a Sage package, about Kenzo examples in  `src/sage/homology/simplicial_set_examples.py`. 

Should there at least be a script (or Lisp code) available there to re-create these files?



---

archive/issue_comments_531782.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [comment:7 dimpase]:\n> I'm a bit unsure whether, given that Kenzo is now a Sage package, about Kenzo examples in  `src/sage/homology/simplicial_set_examples.py`. \n> \n> Should there at least be a script (or Lisp code) available there to re-create these files?\n\n\nOur plan with Ana Romero and her student is to keep working on a more complete interface between Kenzo and Sage. The long term idea is to be able to seamlessly translate simplicial sets back and forth. That includes writing some specific Kenzo code to be able to create simplicial sets from the kind of information that Sage uses to define them, and to output the kind of information that Sage would need.\n\nConsidering that, I would wait until we have that ready to redesign the interface used in those examples.",
    "created_at": "2019-03-27T12:40:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27554#issuecomment-531782",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:8'></a>Replying to [comment:7 dimpase]:
> I'm a bit unsure whether, given that Kenzo is now a Sage package, about Kenzo examples in  `src/sage/homology/simplicial_set_examples.py`. 
> 
> Should there at least be a script (or Lisp code) available there to re-create these files?


Our plan with Ana Romero and her student is to keep working on a more complete interface between Kenzo and Sage. The long term idea is to be able to seamlessly translate simplicial sets back and forth. That includes writing some specific Kenzo code to be able to create simplicial sets from the kind of information that Sage uses to define them, and to output the kind of information that Sage would need.

Considering that, I would wait until we have that ready to redesign the interface used in those examples.



---

archive/issue_comments_531783.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mmarco/kenzo_interface_is_broken\"",
    "created_at": "2019-03-27T12:56:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27554#issuecomment-531783",
    "user": "https://github.com/miguelmarco"
}
```

Changing branch from "" to "u/mmarco/kenzo_interface_is_broken"



---

archive/issue_comments_531784.json:
```json
{
    "body": "<a id='comment:10'></a>I added the missing import, and also made a version bump of the kenzo package, to include Dima's patch (tarball is in https://github.com/miguelmarco/kenzo/archive/1.1.7-r2.tar.gz ).\n\nCan you please test it?\n\n---\nNew commits:",
    "created_at": "2019-03-27T12:58:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27554#issuecomment-531784",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:10'></a>I added the missing import, and also made a version bump of the kenzo package, to include Dima's patch (tarball is in https://github.com/miguelmarco/kenzo/archive/1.1.7-r2.tar.gz ).

Can you please test it?

---
New commits:



---

archive/issue_comments_531785.json:
```json
{
    "body": "Changing commit from \"\" to \"1383821b3dcaf55f525c6c52194d21c13f4ae9f3\"",
    "created_at": "2019-03-27T12:58:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27554#issuecomment-531785",
    "user": "https://github.com/miguelmarco"
}
```

Changing commit from "" to "1383821b3dcaf55f525c6c52194d21c13f4ae9f3"



---

archive/issue_comments_531786.json:
```json
{
    "body": "<a id='comment:11'></a>OK, this works. \nBy the way, I'm not sure all the contents of the tarball should be there, e.g. archive/ and jupyter notebooks in examples.\n\nYou can create a slimmed down tarball and add to the release.",
    "created_at": "2019-03-27T13:23:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27554#issuecomment-531786",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:11'></a>OK, this works. 
By the way, I'm not sure all the contents of the tarball should be there, e.g. archive/ and jupyter notebooks in examples.

You can create a slimmed down tarball and add to the release.



---

archive/issue_comments_531787.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-03-28T09:38:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27554#issuecomment-531787",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_531788.json:
```json
{
    "body": "Changing commit from \"1383821b3dcaf55f525c6c52194d21c13f4ae9f3\" to \"4cbeb6f2815246ef7550eea05f787cbe3084633d\"",
    "created_at": "2019-03-28T09:38:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27554#issuecomment-531788",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "1383821b3dcaf55f525c6c52194d21c13f4ae9f3" to "4cbeb6f2815246ef7550eea05f787cbe3084633d"



---

archive/issue_comments_531789.json:
```json
{
    "body": "<a id='comment:13'></a>Replying to [comment:11 dimpase]:\n> OK, this works. \n> By the way, I'm not sure all the contents of the tarball should be there, e.g. archive/ and jupyter notebooks in examples.\n> \n> You can create a slimmed down tarball and add to the release.\n\n\n\nDone! The tarball is at https://github.com/miguelmarco/kenzo/archive/1.1.7-r3.tar.gz",
    "created_at": "2019-03-28T09:38:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27554#issuecomment-531789",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:13'></a>Replying to [comment:11 dimpase]:
> OK, this works. 
> By the way, I'm not sure all the contents of the tarball should be there, e.g. archive/ and jupyter notebooks in examples.
> 
> You can create a slimmed down tarball and add to the release.



Done! The tarball is at https://github.com/miguelmarco/kenzo/archive/1.1.7-r3.tar.gz



---

archive/issue_comments_531790.json:
```json
{
    "body": "<a id='comment:14'></a>The tarball for Sage need not be the same as what you automatically get from github. On the releases page there is \"Edit\" button to the right of each release, clicking on it allows you to add more \"assets\", e.g. a tarball - properly named, so that one can just wget it without a need to rename.",
    "created_at": "2019-03-28T10:28:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27554#issuecomment-531790",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:14'></a>The tarball for Sage need not be the same as what you automatically get from github. On the releases page there is "Edit" button to the right of each release, clicking on it allows you to add more "assets", e.g. a tarball - properly named, so that one can just wget it without a need to rename.



---

archive/issue_comments_531791.json:
```json
{
    "body": "<a id='comment:15'></a>Replying to [comment:14 dimpase]:\n> The tarball for Sage need not be the same as what you automatically get from github. On the releases page there is \"Edit\" button to the right of each release, clicking on it allows you to add more \"assets\", e.g. a tarball - properly named, so that one can just wget it without a need to rename.\n\n\nI know, but that kind of goes against the idea of version control. I do prefear to have everything fully synced.",
    "created_at": "2019-03-28T10:36:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27554#issuecomment-531791",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:15'></a>Replying to [comment:14 dimpase]:
> The tarball for Sage need not be the same as what you automatically get from github. On the releases page there is "Edit" button to the right of each release, clicking on it allows you to add more "assets", e.g. a tarball - properly named, so that one can just wget it without a need to rename.


I know, but that kind of goes against the idea of version control. I do prefear to have everything fully synced.



---

archive/issue_comments_531792.json:
```json
{
    "body": "<a id='comment:16'></a>Well, in fact sometimes we do have issues with automatically created, by github, tarballs, as they are not stable, they may be affected by changes in the git repo! \n\nhttps://www.google.com/search?q=github+tarballs+changing",
    "created_at": "2019-03-28T10:39:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27554#issuecomment-531792",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:16'></a>Well, in fact sometimes we do have issues with automatically created, by github, tarballs, as they are not stable, they may be affected by changes in the git repo! 

https://www.google.com/search?q=github+tarballs+changing



---

archive/issue_comments_531793.json:
```json
{
    "body": "<a id='comment:17'></a>I'd rather use something like git submodules/subtrees/subwhatever for source Sage packages, in fact. This is IMHO safer than tarballs, generally speaking.",
    "created_at": "2019-03-28T10:45:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27554#issuecomment-531793",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:17'></a>I'd rather use something like git submodules/subtrees/subwhatever for source Sage packages, in fact. This is IMHO safer than tarballs, generally speaking.



---

archive/issue_comments_531794.json:
```json
{
    "body": "<a id='comment:18'></a>But the tarballs corresponding to releases shouldn't change at all, right?",
    "created_at": "2019-03-28T10:46:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27554#issuecomment-531794",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:18'></a>But the tarballs corresponding to releases shouldn't change at all, right?



---

archive/issue_comments_531795.json:
```json
{
    "body": "<a id='comment:19'></a>Replying to [comment:18 mmarco]:\n> But the tarballs corresponding to releases shouldn't change at all, right?\n\n\nI am trying to say that the automatically generated by github tarballs are not stable, they may change overtime, and should be avoided. On the other hand, if you add to a github release an \"asset\" tarball, it will stay intact.",
    "created_at": "2019-03-28T11:39:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27554#issuecomment-531795",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:19'></a>Replying to [comment:18 mmarco]:
> But the tarballs corresponding to releases shouldn't change at all, right?


I am trying to say that the automatically generated by github tarballs are not stable, they may change overtime, and should be avoided. On the other hand, if you add to a github release an "asset" tarball, it will stay intact.



---

archive/issue_comments_531796.json:
```json
{
    "body": "<a id='comment:20'></a>just to explain, I did the following, as an example:\nhttps://github.com/dimpase/kenzo/releases/tag/test\n\nthere you see https://github.com/dimpase/kenzo/releases/download/test/kenzo-test.tar.gz\nwhich is the copy of what I got after clicking on \nhttps://github.com/dimpase/kenzo/archive/test.tar.gz\nand uploading back using \"Edit\" button.\nWhile the latter tarball might change overtime, the former would not, and it also has the correct name.",
    "created_at": "2019-03-30T07:49:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27554#issuecomment-531796",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:20'></a>just to explain, I did the following, as an example:
https://github.com/dimpase/kenzo/releases/tag/test

there you see https://github.com/dimpase/kenzo/releases/download/test/kenzo-test.tar.gz
which is the copy of what I got after clicking on 
https://github.com/dimpase/kenzo/archive/test.tar.gz
and uploading back using "Edit" button.
While the latter tarball might change overtime, the former would not, and it also has the correct name.



---

archive/issue_comments_531797.json:
```json
{
    "body": "<a id='comment:21'></a>I see, thanks for the hint.\n\nI just added that to the release. The link is now https://github.com/miguelmarco/kenzo/releases/download/1.1.7-r3/kenzo-1.1.7-r3.tar.gz",
    "created_at": "2019-03-30T11:26:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27554#issuecomment-531797",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:21'></a>I see, thanks for the hint.

I just added that to the release. The link is now https://github.com/miguelmarco/kenzo/releases/download/1.1.7-r3/kenzo-1.1.7-r3.tar.gz



---

archive/issue_comments_531798.json:
```json
{
    "body": "<a id='comment:22'></a>OK, can you update the branch to reflect this - or do checksum remain the same?",
    "created_at": "2019-03-30T11:29:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27554#issuecomment-531798",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:22'></a>OK, can you update the branch to reflect this - or do checksum remain the same?



---

archive/issue_comments_531799.json:
```json
{
    "body": "<a id='comment:23'></a>The checksums have not changed",
    "created_at": "2019-03-30T12:15:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27554#issuecomment-531799",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:23'></a>The checksums have not changed



---

archive/issue_comments_531800.json:
```json
{
    "body": "<a id='comment:24'></a>Ok, please provide a link to the tarballs in the ticket description, as we always do for package updates.",
    "created_at": "2019-03-30T12:20:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27554#issuecomment-531800",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:24'></a>Ok, please provide a link to the tarballs in the ticket description, as we always do for package updates.



---

archive/issue_comments_531801.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -32,3 +32,7 @@\n     NameError: name 'f3' is not defined\n **********************************************************************\n ```\n+\n+\n+\n+A problem with the instalation using different partitions has been solved upstream. We include a new version of the package here. The new tarball is in https://github.com/miguelmarco/kenzo/releases/download/1.1.7-r3/kenzo-1.1.7-r3.tar.gz\n``````\n",
    "created_at": "2019-03-30T12:23:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27554#issuecomment-531801",
    "user": "https://github.com/miguelmarco"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -32,3 +32,7 @@
     NameError: name 'f3' is not defined
 **********************************************************************
 ```
+
+
+
+A problem with the instalation using different partitions has been solved upstream. We include a new version of the package here. The new tarball is in https://github.com/miguelmarco/kenzo/releases/download/1.1.7-r3/kenzo-1.1.7-r3.tar.gz
``````




---

archive/issue_comments_531802.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-03-30T12:26:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27554#issuecomment-531802",
    "user": "https://github.com/dimpase"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_531803.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Dima Pasechnik\"",
    "created_at": "2019-03-30T12:26:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27554#issuecomment-531803",
    "user": "https://github.com/dimpase"
}
```

Changing reviewer from "" to "Dima Pasechnik"



---

archive/issue_comments_531804.json:
```json
{
    "body": "<a id='comment:26'></a>feel free to set it to positive review, and provide author name.",
    "created_at": "2019-03-30T12:26:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27554#issuecomment-531804",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:26'></a>feel free to set it to positive review, and provide author name.



---

archive/issue_comments_531805.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-03-30T12:27:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27554#issuecomment-531805",
    "user": "https://github.com/miguelmarco"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_531806.json:
```json
{
    "body": "Changing author from \"\" to \"Miguel Marco\"",
    "created_at": "2019-03-30T12:27:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27554#issuecomment-531806",
    "user": "https://github.com/miguelmarco"
}
```

Changing author from "" to "Miguel Marco"



---

archive/issue_events_068445.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-03-31T22:43:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27554",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27554#event-68445"
}
```



---

archive/issue_comments_531807.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-03-31T22:43:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27554#issuecomment-531807",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_531808.json:
```json
{
    "body": "Changing branch from \"u/mmarco/kenzo_interface_is_broken\" to \"4cbeb6f2815246ef7550eea05f787cbe3084633d\"",
    "created_at": "2019-03-31T22:43:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27554#issuecomment-531808",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mmarco/kenzo_interface_is_broken" to "4cbeb6f2815246ef7550eea05f787cbe3084633d"
