# Issue 27916: using more lazy imports

archive/issues_027679.json:
```json
{
    "assignees": [],
    "body": "in order to avoid importing urllib at startup\n\nCC:  @embray @jdemeyer @kiwifb @tscrim @jhpalmieri @vinklein\n\nBranch/Commit: **[2cfa486](https://github.com/sagemath/sagetrac-mirror/commit/2cfa48617c7af290330d950a846f7325a1283181)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/27916_\n\n",
    "closed_at": "2019-06-27T20:13:20Z",
    "created_at": "2019-06-01T13:00:26Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/refactoring",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.9",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "using more lazy imports",
    "type": "issue",
    "updated_at": "2019-07-03T11:34:48Z",
    "url": "https://github.com/sagemath/sage/issues/27916",
    "user": "https://github.com/fchapoton"
}
```
in order to avoid importing urllib at startup

CC:  @embray @jdemeyer @kiwifb @tscrim @jhpalmieri @vinklein

Branch/Commit: **[2cfa486](https://github.com/sagemath/sagetrac-mirror/commit/2cfa48617c7af290330d950a846f7325a1283181)**

Reviewer: **Travis Scrimshaw**

Author: **Frédéric Chapoton**

_Issue created by migration from https://trac.sagemath.org/ticket/27916_





---

archive/issue_events_364597.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-06-01T13:00:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27916#event-364597"
}
```



---

archive/issue_events_364598.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-06-01T13:00:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "label": "https://github.com/sagemath/sage/labels/refactoring",
    "label_color": "696969",
    "label_name": "refactoring",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27916#event-364598"
}
```



---

archive/issue_events_364599.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-06-01T13:00:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27916#event-364599"
}
```



---

archive/issue_events_364600.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-06-01T13:00:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27916#event-364600"
}
```



---

archive/issue_comments_436668.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/00094d011d48115e66c5a4ba83fbfca5a2eba65e\">00094d0</a></td><td><code>more lazy imports, to avoid import of urllib at startup</code></td></tr></table>\n",
    "created_at": "2019-06-01T13:00:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27916#issuecomment-436668",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:1" align="right">Comment 1</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/00094d011d48115e66c5a4ba83fbfca5a2eba65e">00094d0</a></td><td><code>more lazy imports, to avoid import of urllib at startup</code></td></tr></table>




---

archive/issue_events_364601.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-06-01T13:00:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27916#event-364601"
}
```



---

archive/issue_comments_436669.json:
```json
{
    "body": "Branch: **[u/chapoton/27916](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/27916)**",
    "created_at": "2019-06-01T13:00:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27916#issuecomment-436669",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[u/chapoton/27916](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/27916)**



---

archive/issue_comments_436670.json:
```json
{
    "body": "Commit: **[00094d0](https://github.com/sagemath/sagetrac-mirror/commit/00094d011d48115e66c5a4ba83fbfca5a2eba65e)**",
    "created_at": "2019-06-01T13:00:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27916#issuecomment-436670",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[00094d0](https://github.com/sagemath/sagetrac-mirror/commit/00094d011d48115e66c5a4ba83fbfca5a2eba65e)**



---

archive/issue_events_364602.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-06-01T15:06:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27916#event-364602"
}
```



---

archive/issue_events_364603.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-06-01T15:06:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27916#event-364603"
}
```



---

archive/issue_comments_436671.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/08971b10174e0b6081928db3fc88c5017b729776\">08971b1</a></td><td><code>fix some mistakes</code></td></tr></table>\n",
    "created_at": "2019-06-01T15:16:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27916#issuecomment-436671",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3" align="right">Comment 3</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/08971b10174e0b6081928db3fc88c5017b729776">08971b1</a></td><td><code>fix some mistakes</code></td></tr></table>




---

archive/issue_comments_436672.json:
```json
{
    "body": "Changed commit from **[00094d0](https://github.com/sagemath/sagetrac-mirror/commit/00094d011d48115e66c5a4ba83fbfca5a2eba65e)** to **[08971b1](https://github.com/sagemath/sagetrac-mirror/commit/08971b10174e0b6081928db3fc88c5017b729776)**",
    "created_at": "2019-06-01T15:16:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27916#issuecomment-436672",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[00094d0](https://github.com/sagemath/sagetrac-mirror/commit/00094d011d48115e66c5a4ba83fbfca5a2eba65e)** to **[08971b1](https://github.com/sagemath/sagetrac-mirror/commit/08971b10174e0b6081928db3fc88c5017b729776)**



---

archive/issue_comments_436673.json:
```json
{
    "body": "Changed commit from **[08971b1](https://github.com/sagemath/sagetrac-mirror/commit/08971b10174e0b6081928db3fc88c5017b729776)** to **[5e81335](https://github.com/sagemath/sagetrac-mirror/commit/5e81335087a4146e200bc5224dad14ff0f41f1d5)**",
    "created_at": "2019-06-01T15:28:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27916#issuecomment-436673",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[08971b1](https://github.com/sagemath/sagetrac-mirror/commit/08971b10174e0b6081928db3fc88c5017b729776)** to **[5e81335](https://github.com/sagemath/sagetrac-mirror/commit/5e81335087a4146e200bc5224dad14ff0f41f1d5)**



---

archive/issue_comments_436674.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5e81335087a4146e200bc5224dad14ff0f41f1d5\">5e81335</a></td><td><code>fix</code></td></tr></table>\n",
    "created_at": "2019-06-01T15:28:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27916#issuecomment-436674",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4" align="right">Comment 4</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5e81335087a4146e200bc5224dad14ff0f41f1d5">5e81335</a></td><td><code>fix</code></td></tr></table>




---

archive/issue_comments_436675.json:
```json
{
    "body": "Changed commit from **[5e81335](https://github.com/sagemath/sagetrac-mirror/commit/5e81335087a4146e200bc5224dad14ff0f41f1d5)** to **[ef06b0d](https://github.com/sagemath/sagetrac-mirror/commit/ef06b0d60f1d184b8eb38ed5c212d0e3f96baf9d)**",
    "created_at": "2019-06-01T18:54:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27916#issuecomment-436675",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5e81335](https://github.com/sagemath/sagetrac-mirror/commit/5e81335087a4146e200bc5224dad14ff0f41f1d5)** to **[ef06b0d](https://github.com/sagemath/sagetrac-mirror/commit/ef06b0d60f1d184b8eb38ed5c212d0e3f96baf9d)**



---

archive/issue_comments_436676.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ef06b0d60f1d184b8eb38ed5c212d0e3f96baf9d\">ef06b0d</a></td><td><code>trac 27916 one more fix</code></td></tr></table>\n",
    "created_at": "2019-06-01T18:54:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27916#issuecomment-436676",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5" align="right">Comment 5</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ef06b0d60f1d184b8eb38ed5c212d0e3f96baf9d">ef06b0d</a></td><td><code>trac 27916 one more fix</code></td></tr></table>




---

archive/issue_comments_436677.json:
```json
{
    "body": "Changed commit from **[ef06b0d](https://github.com/sagemath/sagetrac-mirror/commit/ef06b0d60f1d184b8eb38ed5c212d0e3f96baf9d)** to **[2cfa486](https://github.com/sagemath/sagetrac-mirror/commit/2cfa48617c7af290330d950a846f7325a1283181)**",
    "created_at": "2019-06-01T18:59:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27916#issuecomment-436677",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ef06b0d](https://github.com/sagemath/sagetrac-mirror/commit/ef06b0d60f1d184b8eb38ed5c212d0e3f96baf9d)** to **[2cfa486](https://github.com/sagemath/sagetrac-mirror/commit/2cfa48617c7af290330d950a846f7325a1283181)**



---

archive/issue_comments_436678.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2cfa48617c7af290330d950a846f7325a1283181\">2cfa486</a></td><td><code>more lazy imports, to avoid import of urllib at startup</code></td></tr></table>\n",
    "created_at": "2019-06-01T18:59:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27916#issuecomment-436678",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6" align="right">Comment 6</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2cfa48617c7af290330d950a846f7325a1283181">2cfa486</a></td><td><code>more lazy imports, to avoid import of urllib at startup</code></td></tr></table>




---

archive/issue_comments_436679.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\ngreen bot, please review",
    "created_at": "2019-06-02T06:34:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27916#issuecomment-436679",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:7" align="right">Comment 7</div>

green bot, please review



---

archive/issue_events_364604.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-06-02T16:49:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27916#event-364604"
}
```



---

archive/issue_events_364605.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-06-02T16:49:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27916#event-364605"
}
```



---

archive/issue_comments_436680.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nPlease review, somebody ? This cuts off slightly sage startup time.",
    "created_at": "2019-06-05T18:28:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27916#issuecomment-436680",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:9" align="right">Comment 9</div>

Please review, somebody ? This cuts off slightly sage startup time.



---

archive/issue_comments_436681.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nI am a little worried about multiple lazy_import resolutions of the designs stuff. I am wondering if it might be better to lazily import the whole catalog instead. Or do you think I am being paranoid or that we should take the more granular approach?",
    "created_at": "2019-06-05T23:12:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27916#issuecomment-436681",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:10" align="right">Comment 10</div>

I am a little worried about multiple lazy_import resolutions of the designs stuff. I am wondering if it might be better to lazily import the whole catalog instead. Or do you think I am being paranoid or that we should take the more granular approach?



---

archive/issue_comments_436682.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nI think that I tried that first, and was forced to the current solution. I suspect that the line\n\n```\nfrom . import design_catalog as designs\n```\nmay be preventing the lazy import. Let me try again.",
    "created_at": "2019-06-06T09:23:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27916#issuecomment-436682",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:11" align="right">Comment 11</div>

I think that I tried that first, and was forced to the current solution. I suspect that the line

```
from . import design_catalog as designs
```
may be preventing the lazy import. Let me try again.



---

archive/issue_comments_436683.json:
```json
{
    "body": "Changed commit from **[2cfa486](https://github.com/sagemath/sagetrac-mirror/commit/2cfa48617c7af290330d950a846f7325a1283181)** to **[3c80958](https://github.com/sagemath/sagetrac-mirror/commit/3c809588f7c5e7414629fdf1850c876019090eed)**",
    "created_at": "2019-06-06T09:31:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27916#issuecomment-436683",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2cfa486](https://github.com/sagemath/sagetrac-mirror/commit/2cfa48617c7af290330d950a846f7325a1283181)** to **[3c80958](https://github.com/sagemath/sagetrac-mirror/commit/3c809588f7c5e7414629fdf1850c876019090eed)**



---

archive/issue_comments_436684.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3c809588f7c5e7414629fdf1850c876019090eed\">3c80958</a></td><td><code>more lazy imports, to avoid import of urllib at startup</code></td></tr></table>\n",
    "created_at": "2019-06-06T09:31:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27916#issuecomment-436684",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12" align="right">Comment 12</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3c809588f7c5e7414629fdf1850c876019090eed">3c80958</a></td><td><code>more lazy imports, to avoid import of urllib at startup</code></td></tr></table>




---

archive/issue_comments_436685.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nThis seems to work, let us see if the patchbot turns green.",
    "created_at": "2019-06-06T09:32:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27916#issuecomment-436685",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:13" align="right">Comment 13</div>

This seems to work, let us see if the patchbot turns green.



---

archive/issue_comments_436686.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nThat seems to cause massive breakage on one of the patchbots. `:/`",
    "created_at": "2019-06-06T10:25:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27916#issuecomment-436686",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:14" align="right">Comment 14</div>

That seems to cause massive breakage on one of the patchbots. `:/`



---

archive/issue_comments_436687.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nok, this was the reason for not doing it. Let me put back my previous branch..\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2cfa48617c7af290330d950a846f7325a1283181\">2cfa486</a></td><td><code>more lazy imports, to avoid import of urllib at startup</code></td></tr></table>\n",
    "created_at": "2019-06-06T12:07:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27916#issuecomment-436687",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:15" align="right">Comment 15</div>

ok, this was the reason for not doing it. Let me put back my previous branch..

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2cfa48617c7af290330d950a846f7325a1283181">2cfa486</a></td><td><code>more lazy imports, to avoid import of urllib at startup</code></td></tr></table>




---

archive/issue_comments_436688.json:
```json
{
    "body": "Changed branch from **[u/chapoton/27916](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/27916)** to **[u/chapoton/27916_original](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/27916_original)**",
    "created_at": "2019-06-06T12:07:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27916#issuecomment-436688",
    "user": "https://github.com/fchapoton"
}
```

Changed branch from **[u/chapoton/27916](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/27916)** to **[u/chapoton/27916_original](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/27916_original)**



---

archive/issue_comments_436689.json:
```json
{
    "body": "Changed commit from **[3c80958](https://github.com/sagemath/sagetrac-mirror/commit/3c809588f7c5e7414629fdf1850c876019090eed)** to **[2cfa486](https://github.com/sagemath/sagetrac-mirror/commit/2cfa48617c7af290330d950a846f7325a1283181)**",
    "created_at": "2019-06-06T12:07:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27916#issuecomment-436689",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[3c80958](https://github.com/sagemath/sagetrac-mirror/commit/3c809588f7c5e7414629fdf1850c876019090eed)** to **[2cfa486](https://github.com/sagemath/sagetrac-mirror/commit/2cfa48617c7af290330d950a846f7325a1283181)**



---

archive/issue_comments_436690.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nThen so be it.",
    "created_at": "2019-06-07T12:32:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27916#issuecomment-436690",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:16" align="right">Comment 16</div>

Then so be it.



---

archive/issue_comments_436691.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2019-06-07T12:32:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27916#issuecomment-436691",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_events_364606.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2019-06-07T12:32:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27916#event-364606"
}
```



---

archive/issue_events_364607.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2019-06-07T12:32:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27916#event-364607"
}
```



---

archive/issue_comments_436692.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nYou write that this is all to avoid importing `urllib`.  But is `urllib` a major contributor to start-up time?  `lazy_import` has its own overhead.  Less directly than actually importing one module in many cases.  But is adding *more* `lazy_imports` actually better in this case than avoiding just one import (urllib)?\n\nNote, I'm all for more lazy_import in general so I'm not changing the ticket status, but I don't understand the motivation here or if it's justified.",
    "created_at": "2019-06-07T14:42:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27916#issuecomment-436692",
    "user": "https://github.com/embray"
}
```

<div id="comment:17" align="right">Comment 17</div>

You write that this is all to avoid importing `urllib`.  But is `urllib` a major contributor to start-up time?  `lazy_import` has its own overhead.  Less directly than actually importing one module in many cases.  But is adding *more* `lazy_imports` actually better in this case than avoiding just one import (urllib)?

Note, I'm all for more lazy_import in general so I'm not changing the ticket status, but I don't understand the motivation here or if it's justified.



---

archive/issue_comments_436693.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nI used `sage -startuptime` to see what imported modules could be avoided without too much work. I have seen in the list `email` and `http`. Tracking who imported them lead to `urllib`.",
    "created_at": "2019-06-07T14:47:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27916#issuecomment-436693",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:18" align="right">Comment 18</div>

I used `sage -startuptime` to see what imported modules could be avoided without too much work. I have seen in the list `email` and `http`. Tracking who imported them lead to `urllib`.



---

archive/issue_comments_436694.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nSeems like a bit overkill.  Just loading plain `IPython` causes both the `email` and `urllib` modules to be loaded (but not `urllib.requests` which is showing up in `./sage -startuptime`).  Running the Jupyter notebook is almost certain to ultimately use the others.\n\nDoes this definitely shave anything noticeable off the startup time (again, all for it if it does)?",
    "created_at": "2019-06-07T14:56:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27916#issuecomment-436694",
    "user": "https://github.com/embray"
}
```

<div id="comment:19" align="right">Comment 19</div>

Seems like a bit overkill.  Just loading plain `IPython` causes both the `email` and `urllib` modules to be loaded (but not `urllib.requests` which is showing up in `./sage -startuptime`).  Running the Jupyter notebook is almost certain to ultimately use the others.

Does this definitely shave anything noticeable off the startup time (again, all for it if it does)?



---

archive/issue_comments_436695.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nAnswering my own question, I noticed an improvement with this patch of ~100-150ms over without it, pretty consistently.  In this game every bit counts, so, +1.",
    "created_at": "2019-06-07T17:09:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27916#issuecomment-436695",
    "user": "https://github.com/embray"
}
```

<div id="comment:20" align="right">Comment 20</div>

Answering my own question, I noticed an improvement with this patch of ~100-150ms over without it, pretty consistently.  In this game every bit counts, so, +1.



---

archive/issue_comments_436696.json:
```json
{
    "body": "Changed branch from **[u/chapoton/27916_original](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/27916_original)** to **[2cfa486](https://github.com/sagemath/sagetrac-mirror/commit/2cfa48617c7af290330d950a846f7325a1283181)**",
    "created_at": "2019-06-27T20:13:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27916#issuecomment-436696",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/chapoton/27916_original](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/27916_original)** to **[2cfa486](https://github.com/sagemath/sagetrac-mirror/commit/2cfa48617c7af290330d950a846f7325a1283181)**



---

archive/issue_events_364608.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-06-27T20:13:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27916#event-364608"
}
```



---

archive/issue_events_364609.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "9686e67c09d2c11bebc12f7bac76bae0e9c7bcd9",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-06-27T20:13:20Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27916#event-364609"
}
```



---

archive/issue_events_364610.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-07-03T11:34:48Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27916#event-364610"
}
```



---

archive/issue_events_364611.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-07-03T11:34:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27916#event-364611"
}
```



---

archive/issue_comments_436697.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nNot in Sage 8.8.  Let's please to try keep tickets' milestones related to the release in which we actually intend to include them, and in particular the release in which they were *actually* included, especially when closing tickets.",
    "created_at": "2019-07-03T11:34:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27916#issuecomment-436697",
    "user": "https://github.com/embray"
}
```

<div id="comment:22" align="right">Comment 22</div>

Not in Sage 8.8.  Let's please to try keep tickets' milestones related to the release in which we actually intend to include them, and in particular the release in which they were *actually* included, especially when closing tickets.
