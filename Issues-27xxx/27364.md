# Issue 27364: cannot multiply multivariate polynomial ring and vector

archive/issues_027127.json:
```json
{
    "assignees": [],
    "body": "\n```\nsage: R = PolynomialRing(QQ, 't', 1); t = R.gen()\nsage: (t/2) * vector([1,2])\n```\nresults in a\n\n```\nTypeError: unsupported operand parent(s) for *: 'Multivariate Polynomial Ring in t over Rational Field' and 'Ambient free module of rank 2 over the principal ideal domain Integer Ring'\n```\n\nInterestingly, for a \"true\" univariate polynomial ring it works:\n\n```\nsage: R = PolynomialRing(QQ, 't'); t = R.gen()\nsage: (t/2) * vector([1,2])\n(1/2*t, t)\n```\nAlso for a multivariate polynomial ring in more than one variable it works:\n\n```\nsage: sage: R = PolynomialRing(QQ, 't', 2); t = R.gen()\n....: sage: (t/2) * vector([1,2])\n```\n\nThis issue was raised by the following doctest in sage.geometry.polyhedron.base, method `integrate`, ticket #27365:\n\n```\n        Integral over a non full-dimensional polytope::\n\n            sage: x, y = polygens(QQ, 'x, y')\n            sage: P = Polyhedron(vertices=[[0,0],[1,1]])\n            sage: P.integrate(x*y)    # optional - latte_int\n            0\n            sage: P.integrate(x*y, measure='induced')    # optional - latte_int  # not tested (see :trac:`27364`)\n```\n\n\nCC:  @tscrim @yuan-zhou @kliem\n\nBranch/Commit: **[u/mkoeppe/poly-times-vector](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/poly-times-vector) @ [a5fd62d](https://github.com/sagemath/sagetrac-mirror/commit/a5fd62d63024e6fecb1f6836a52ff894e8de7a92)**\n\nReviewer: **Matthias Koeppe, ...**\n\nAuthor: **Daniel Krenn**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/27364_\n\n",
    "created_at": "2019-02-26T14:14:17Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20coercion",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "cannot multiply multivariate polynomial ring and vector",
    "type": "issue",
    "updated_at": "2022-09-19T18:58:47Z",
    "url": "https://github.com/sagemath/sage/issues/27364",
    "user": "https://github.com/dkrenn"
}
```

```
sage: R = PolynomialRing(QQ, 't', 1); t = R.gen()
sage: (t/2) * vector([1,2])
```
results in a

```
TypeError: unsupported operand parent(s) for *: 'Multivariate Polynomial Ring in t over Rational Field' and 'Ambient free module of rank 2 over the principal ideal domain Integer Ring'
```

Interestingly, for a "true" univariate polynomial ring it works:

```
sage: R = PolynomialRing(QQ, 't'); t = R.gen()
sage: (t/2) * vector([1,2])
(1/2*t, t)
```
Also for a multivariate polynomial ring in more than one variable it works:

```
sage: sage: R = PolynomialRing(QQ, 't', 2); t = R.gen()
....: sage: (t/2) * vector([1,2])
```

This issue was raised by the following doctest in sage.geometry.polyhedron.base, method `integrate`, ticket #27365:

```
        Integral over a non full-dimensional polytope::

            sage: x, y = polygens(QQ, 'x, y')
            sage: P = Polyhedron(vertices=[[0,0],[1,1]])
            sage: P.integrate(x*y)    # optional - latte_int
            0
            sage: P.integrate(x*y, measure='induced')    # optional - latte_int  # not tested (see :trac:`27364`)
```


CC:  @tscrim @yuan-zhou @kliem

Branch/Commit: **[u/mkoeppe/poly-times-vector](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/poly-times-vector) @ [a5fd62d](https://github.com/sagemath/sagetrac-mirror/commit/a5fd62d63024e6fecb1f6836a52ff894e8de7a92)**

Reviewer: **Matthias Koeppe, ...**

Author: **Daniel Krenn**

_Issue created by migration from https://trac.sagemath.org/ticket/27364_





---

archive/issue_events_345025.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2019-02-26T14:14:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27364#event-345025"
}
```



---

archive/issue_events_345026.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2019-02-26T14:14:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20coercion",
    "label_color": "0000ff",
    "label_name": "component: coercion",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27364#event-345026"
}
```



---

archive/issue_events_345027.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2019-02-26T14:14:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27364#event-345027"
}
```



---

archive/issue_events_345028.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2019-02-26T14:14:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27364#event-345028"
}
```



---

archive/issue_comments_426057.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,6 +12,7 @@\n Interestingly, for a \"true\" univariate polynomial ring it works:\n \n ```\n+sage: R = PolynomialRing(QQ, 't'); t = R.gen()\n sage: (t/2) * vector([1,2])\n (1/2*t, t)\n ```\n``````\n",
    "created_at": "2019-02-26T14:14:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27364#issuecomment-426057",
    "user": "https://github.com/dkrenn"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,6 +12,7 @@
 Interestingly, for a "true" univariate polynomial ring it works:
 
 ```
+sage: R = PolynomialRing(QQ, 't'); t = R.gen()
 sage: (t/2) * vector([1,2])
 (1/2*t, t)
 ```
``````




---

archive/issue_comments_426058.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -16,4 +16,9 @@\n sage: (t/2) * vector([1,2])\n (1/2*t, t)\n ```\n+Also for a multivariate polynomial ring in more than one variable it works:\n \n+```\n+sage: sage: R = PolynomialRing(QQ, 't', 2); t = R.gen()\n+....: sage: (t/2) * vector([1,2])\n+```\n``````\n",
    "created_at": "2019-02-26T14:17:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27364#issuecomment-426058",
    "user": "https://github.com/dkrenn"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -16,4 +16,9 @@
 sage: (t/2) * vector([1,2])
 (1/2*t, t)
 ```
+Also for a multivariate polynomial ring in more than one variable it works:
 
+```
+sage: sage: R = PolynomialRing(QQ, 't', 2); t = R.gen()
+....: sage: (t/2) * vector([1,2])
+```
``````




---

archive/issue_comments_426059.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -22,3 +22,16 @@\n sage: sage: R = PolynomialRing(QQ, 't', 2); t = R.gen()\n ....: sage: (t/2) * vector([1,2])\n ```\n+\n+This issue was raised by the following doctest in sage.geometry.polyhedron.base, method `integrate`, ticket #27365:\n+\n+```\n+        Integral over a non full-dimensional polytope::\n+\n+            sage: x, y = polygens(QQ, 'x, y')\n+            sage: P = Polyhedron(vertices=[[0,0],[1,1]])\n+            sage: P.integrate(x*y)    # optional - latte_int\n+            0\n+            sage: P.integrate(x*y, measure='induced')    # optional - latte_int  # not tested (see :trac:`27364`)\n+```\n+\n``````\n",
    "created_at": "2019-02-26T14:20:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27364#issuecomment-426059",
    "user": "https://github.com/dkrenn"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -22,3 +22,16 @@
 sage: sage: R = PolynomialRing(QQ, 't', 2); t = R.gen()
 ....: sage: (t/2) * vector([1,2])
 ```
+
+This issue was raised by the following doctest in sage.geometry.polyhedron.base, method `integrate`, ticket #27365:
+
+```
+        Integral over a non full-dimensional polytope::
+
+            sage: x, y = polygens(QQ, 'x, y')
+            sage: P = Polyhedron(vertices=[[0,0],[1,1]])
+            sage: P.integrate(x*y)    # optional - latte_int
+            0
+            sage: P.integrate(x*y, measure='induced')    # optional - latte_int  # not tested (see :trac:`27364`)
+```
+
``````




---

archive/issue_comments_426060.json:
```json
{
    "body": "Branch: **[u/dkrenn/poly-times-vector](https://github.com/sagemath/sagetrac-mirror/tree/u/dkrenn/poly-times-vector)**",
    "created_at": "2019-02-28T12:37:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27364#issuecomment-426060",
    "user": "https://github.com/dkrenn"
}
```

Branch: **[u/dkrenn/poly-times-vector](https://github.com/sagemath/sagetrac-mirror/tree/u/dkrenn/poly-times-vector)**



---

archive/issue_events_345029.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2019-02-28T12:39:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27364#event-345029"
}
```



---

archive/issue_comments_426061.json:
```json
{
    "body": "Commit: **[54a350e](https://github.com/sagemath/sagetrac-mirror/commit/54a350e1f95faa40b3b069bb3c3c3baea0e93a8b)**",
    "created_at": "2019-02-28T12:39:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27364#issuecomment-426061",
    "user": "https://github.com/dkrenn"
}
```

Commit: **[54a350e](https://github.com/sagemath/sagetrac-mirror/commit/54a350e1f95faa40b3b069bb3c3c3baea0e93a8b)**



---

archive/issue_comments_426062.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nCurrent fix indeed fixes the problem but introduces new problems:\n\n```\nsage: R = PolynomialRing(ZZ, 'x', 500)\nsage: S = PolynomialRing(GF(5), 'x', 200)\nsage: R.gen(0) + S.gen(0)\n```\nThe last line takes a second or so without patch, but ages (I've\ninterrupted after two minutes) with the change above. RunSnakeRun says\nthat most of the time is spent in\n\n```\nmethod '_coerce_' of 'sage.structure.parent_old.Parent'\n```\nThis is also not what we'd like. So what should we do now?\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/54a350e1f95faa40b3b069bb3c3c3baea0e93a8b\">54a350e</a></td><td><code>Trac #27364: MPoly functor always returns MultiPolynomialRing</code></td></tr></table>\n",
    "created_at": "2019-02-28T12:39:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27364#issuecomment-426062",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:5'>Comment 5:</a>
Current fix indeed fixes the problem but introduces new problems:

```
sage: R = PolynomialRing(ZZ, 'x', 500)
sage: S = PolynomialRing(GF(5), 'x', 200)
sage: R.gen(0) + S.gen(0)
```
The last line takes a second or so without patch, but ages (I've
interrupted after two minutes) with the change above. RunSnakeRun says
that most of the time is spent in

```
method '_coerce_' of 'sage.structure.parent_old.Parent'
```
This is also not what we'd like. So what should we do now?

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/54a350e1f95faa40b3b069bb3c3c3baea0e93a8b">54a350e</a></td><td><code>Trac #27364: MPoly functor always returns MultiPolynomialRing</code></td></tr></table>




---

archive/issue_comments_426063.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nTicket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)",
    "created_at": "2019-03-25T10:56:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27364#issuecomment-426063",
    "user": "https://github.com/embray"
}
```

<a id='comment:6'>Comment 6:</a>
Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)



---

archive/issue_events_345030.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27364#event-345030"
}
```



---

archive/issue_events_345031.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27364#event-345031"
}
```



---

archive/issue_comments_426064.json:
```json
{
    "body": "Changed commit from **[54a350e](https://github.com/sagemath/sagetrac-mirror/commit/54a350e1f95faa40b3b069bb3c3c3baea0e93a8b)** to **[0249494](https://github.com/sagemath/sagetrac-mirror/commit/02494942c70b6d26032d4eade470d2ebe475ff7a)**",
    "created_at": "2019-03-28T13:57:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27364#issuecomment-426064",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[54a350e](https://github.com/sagemath/sagetrac-mirror/commit/54a350e1f95faa40b3b069bb3c3c3baea0e93a8b)** to **[0249494](https://github.com/sagemath/sagetrac-mirror/commit/02494942c70b6d26032d4eade470d2ebe475ff7a)**



---

archive/issue_comments_426065.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2661f6520cd717605318dc8ecd3c225fa61ea8d1\">2661f65</a></td><td><code>Trac #27364: speedup multivariate polynomial construction</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/02494942c70b6d26032d4eade470d2ebe475ff7a\">0249494</a></td><td><code>Trac #27364: change doctest (due to timing)</code></td></tr></table>\n",
    "created_at": "2019-03-28T13:57:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27364#issuecomment-426065",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:7'>Comment 7:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2661f6520cd717605318dc8ecd3c225fa61ea8d1">2661f65</a></td><td><code>Trac #27364: speedup multivariate polynomial construction</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/02494942c70b6d26032d4eade470d2ebe475ff7a">0249494</a></td><td><code>Trac #27364: change doctest (due to timing)</code></td></tr></table>




---

archive/issue_comments_426066.json:
```json
{
    "body": "Author: **Daniel Krenn**",
    "created_at": "2019-03-28T13:58:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27364#issuecomment-426066",
    "user": "https://github.com/dkrenn"
}
```

Author: **Daniel Krenn**



---

archive/issue_events_345032.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2019-03-28T13:58:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27364#event-345032"
}
```



---

archive/issue_events_345033.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2019-03-28T13:58:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27364#event-345033"
}
```



---

archive/issue_comments_426067.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nReplying to [@dkrenn](#comment%3A5):\n> RunSnakeRun says\n> that most of the time is spent in\n> \n> ```\n> method '_coerce_' of 'sage.structure.parent_old.Parent'\n> ```\n> This is also not what we'd like. So what should we do now?\n\nThe current branch patches `__call__` so that `_coerce_` is not called that often. #25558 might change everything, but this seems somehow more out of reach.",
    "created_at": "2019-03-28T13:59:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27364#issuecomment-426067",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:9'>Comment 9:</a>
Replying to [@dkrenn](#comment%3A5):
> RunSnakeRun says
> that most of the time is spent in
> 
> ```
> method '_coerce_' of 'sage.structure.parent_old.Parent'
> ```
> This is also not what we'd like. So what should we do now?

The current branch patches `__call__` so that `_coerce_` is not called that often. #25558 might change everything, but this seems somehow more out of reach.



---

archive/issue_comments_426068.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\n\n```\n+            #from sage.structure.element import parent\n+            #print(self, '__call__')\n+            #print('    ', x, parent(x))\n```",
    "created_at": "2019-04-18T20:23:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27364#issuecomment-426068",
    "user": "https://github.com/videlec"
}
```

<a id='comment:10'>Comment 10:</a>

```
+            #from sage.structure.element import parent
+            #print(self, '__call__')
+            #print('    ', x, parent(x))
```



---

archive/issue_comments_426069.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nAs far as I understand, zero and one are already cached from `sage/rings/rings.py`\n\n```\nsage: R = QQ['x','y']\nsage: R.zero() is R.zero()\nTrue\nsage: R.one() is R.one()\nTrue\n```",
    "created_at": "2019-04-18T20:24:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27364#issuecomment-426069",
    "user": "https://github.com/videlec"
}
```

<a id='comment:11'>Comment 11:</a>
As far as I understand, zero and one are already cached from `sage/rings/rings.py`

```
sage: R = QQ['x','y']
sage: R.zero() is R.zero()
True
sage: R.one() is R.one()
True
```



---

archive/issue_events_345034.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-04-18T20:25:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27364#event-345034"
}
```



---

archive/issue_events_345035.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-04-18T20:25:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27364#event-345035"
}
```



---

archive/issue_events_345036.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:50:27Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27364#event-345036"
}
```



---

archive/issue_events_345037.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:50:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27364#event-345037"
}
```



---

archive/issue_comments_426070.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nTickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).",
    "created_at": "2019-06-14T14:50:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27364#issuecomment-426070",
    "user": "https://github.com/embray"
}
```

<a id='comment:13'>Comment 13:</a>
Tickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).



---

archive/issue_comments_426071.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nTicket retargeted after milestone closed",
    "created_at": "2019-12-30T14:48:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27364#issuecomment-426071",
    "user": "https://github.com/embray"
}
```

<a id='comment:14'>Comment 14:</a>
Ticket retargeted after milestone closed



---

archive/issue_events_345038.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27364#event-345038"
}
```



---

archive/issue_events_345039.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27364#event-345039"
}
```



---

archive/issue_events_345040.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27364#event-345040"
}
```



---

archive/issue_events_345041.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27364#event-345041"
}
```



---

archive/issue_comments_426072.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nBatch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.",
    "created_at": "2020-04-14T19:41:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27364#issuecomment-426072",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'>Comment 15:</a>
Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.



---

archive/issue_comments_426073.json:
```json
{
    "body": "Dependencies: **#25558**",
    "created_at": "2020-08-27T04:44:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27364#issuecomment-426073",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#25558**



---

archive/issue_events_345042.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-27T04:44:12Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27364#event-345042"
}
```



---

archive/issue_events_345043.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-27T04:44:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27364#event-345043"
}
```



---

archive/issue_events_345044.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27364#event-345044"
}
```



---

archive/issue_events_345045.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27364#event-345045"
}
```



---

archive/issue_comments_426074.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27364#issuecomment-426074",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'>Comment 17:</a>
Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_426075.json:
```json
{
    "body": "Changed branch from **[u/dkrenn/poly-times-vector](https://github.com/sagemath/sagetrac-mirror/tree/u/dkrenn/poly-times-vector)** to **[u/mkoeppe/poly-times-vector](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/poly-times-vector)**",
    "created_at": "2021-04-13T17:25:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27364#issuecomment-426075",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[u/dkrenn/poly-times-vector](https://github.com/sagemath/sagetrac-mirror/tree/u/dkrenn/poly-times-vector)** to **[u/mkoeppe/poly-times-vector](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/poly-times-vector)**



---

archive/issue_comments_426076.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nClean merge with current develop\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ec7977bf22d30aea6531d0d32ba01661a16f9f29\">ec7977b</a></td><td><code>Merge tag '9.3.rc3' into t/27364/poly-times-vector</code></td></tr></table>\n",
    "created_at": "2021-04-13T17:25:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27364#issuecomment-426076",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'>Comment 20:</a>
Clean merge with current develop

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ec7977bf22d30aea6531d0d32ba01661a16f9f29">ec7977b</a></td><td><code>Merge tag '9.3.rc3' into t/27364/poly-times-vector</code></td></tr></table>




---

archive/issue_comments_426077.json:
```json
{
    "body": "Changed commit from **[0249494](https://github.com/sagemath/sagetrac-mirror/commit/02494942c70b6d26032d4eade470d2ebe475ff7a)** to **[ec7977b](https://github.com/sagemath/sagetrac-mirror/commit/ec7977bf22d30aea6531d0d32ba01661a16f9f29)**",
    "created_at": "2021-04-13T17:25:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27364#issuecomment-426077",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[0249494](https://github.com/sagemath/sagetrac-mirror/commit/02494942c70b6d26032d4eade470d2ebe475ff7a)** to **[ec7977b](https://github.com/sagemath/sagetrac-mirror/commit/ec7977bf22d30aea6531d0d32ba01661a16f9f29)**



---

archive/issue_comments_426078.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a5fd62d63024e6fecb1f6836a52ff894e8de7a92\">a5fd62d</a></td><td><code>src/sage/rings/polynomial/multi_polynomial_ring.py: Remove commented-out code</code></td></tr></table>\n",
    "created_at": "2021-04-13T17:29:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27364#issuecomment-426078",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:21'>Comment 21:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a5fd62d63024e6fecb1f6836a52ff894e8de7a92">a5fd62d</a></td><td><code>src/sage/rings/polynomial/multi_polynomial_ring.py: Remove commented-out code</code></td></tr></table>




---

archive/issue_comments_426079.json:
```json
{
    "body": "Changed commit from **[ec7977b](https://github.com/sagemath/sagetrac-mirror/commit/ec7977bf22d30aea6531d0d32ba01661a16f9f29)** to **[a5fd62d](https://github.com/sagemath/sagetrac-mirror/commit/a5fd62d63024e6fecb1f6836a52ff894e8de7a92)**",
    "created_at": "2021-04-13T17:29:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27364#issuecomment-426079",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ec7977b](https://github.com/sagemath/sagetrac-mirror/commit/ec7977bf22d30aea6531d0d32ba01661a16f9f29)** to **[a5fd62d](https://github.com/sagemath/sagetrac-mirror/commit/a5fd62d63024e6fecb1f6836a52ff894e8de7a92)**



---

archive/issue_events_345046.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-13T18:01:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27364#event-345046"
}
```



---

archive/issue_events_345047.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-13T18:01:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27364#event-345047"
}
```



---

archive/issue_comments_426080.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nReplying to [@videlec](#comment%3A11):\n> As far as I understand, zero and one are already cached from `sage/rings/rings.py`\n> \n> ```\n> sage: R = QQ['x','y']\n> sage: R.zero() is R.zero()\n> True\n> sage: R.one() is R.one()\n> True\n> ```\n\nNevertheless, this code for caching 0 and 1 does make things a bit faster.\nOn my machine, `%time R.gen(0) + S.gen(0)` gives 9.6 s, but taking out the caching it's 12.6 s.",
    "created_at": "2021-04-13T18:01:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27364#issuecomment-426080",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:22'>Comment 22:</a>
Replying to [@videlec](#comment%3A11):
> As far as I understand, zero and one are already cached from `sage/rings/rings.py`
> 
> ```
> sage: R = QQ['x','y']
> sage: R.zero() is R.zero()
> True
> sage: R.one() is R.one()
> True
> ```

Nevertheless, this code for caching 0 and 1 does make things a bit faster.
On my machine, `%time R.gen(0) + S.gen(0)` gives 9.6 s, but taking out the caching it's 12.6 s.



---

archive/issue_comments_426081.json:
```json
{
    "body": "Changed dependencies from **#25558** to none",
    "created_at": "2021-04-13T18:35:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27364#issuecomment-426081",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#25558** to none



---

archive/issue_comments_426082.json:
```json
{
    "body": "Reviewer: **Matthias Koeppe, ...**",
    "created_at": "2021-04-13T18:36:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27364#issuecomment-426082",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Matthias Koeppe, ...**



---

archive/issue_events_345048.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2021-04-15T07:41:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27364#event-345048"
}
```



---

archive/issue_events_345049.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2021-04-15T07:41:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27364#event-345049"
}
```



---

archive/issue_comments_426083.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nThere are several doctest failures. Among them we see that the pushout **wrongly** changes some `Univariate` to `Multivariate`.\n\n```\nFile \"src/sage/categories/pushout.py\", line 3772, in sage.categories.pushout.pushout\nFailed example:\n    pushout(ZZ['x,y,z'], Frac(ZZ['x'])['y'])\nExpected:\n    Multivariate Polynomial Ring in y, z over Fraction Field of Univariate Polynomial Ring in x over Integer Ring\nGot:\n    Multivariate Polynomial Ring in y, z over Fraction Field of Multivariate Polynomial Ring in x over Integer Ring\n```\nAbove the action of `ZZ[x,y,z]` on `ZZ(x)[y]` is `ZZ(x)[y,z]` in both situations. However, I think that the `ZZ(x)` **must not** change. It would be good to test this pushout with `ZZ(x)` in different forms\n- univariate `PolynomialRing(ZZ, 'x')`\n- univariate NTL `PolynomialRing(ZZ, 'x', implementation='NTL')`\n- multivariate `PolynomialRing(ZZ, ['x'], 1))`.\n\nIn this second example it is unclear what is best.\n\n```\nFile \"src/sage/categories/pushout.py\", line 3778, in sage.categories.pushout.pushout\nFailed example:\n    pushout(QQ['x,y'], ZZ[['x']])\nExpected:\n    Univariate Polynomial Ring in y over Power Series Ring in x over Rational Field\nGot:\n    Multivariate Polynomial Ring in y over Power Series Ring in x over Rational Field\n```\nThe action of `QQ[x,y]` on `ZZ[This is the Trac macro *x* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#x-macro)` does correctly produce `QQ[y][This is the Trac macro *x* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#x-macro)` in both situations. Since `QQ[x,y] -> QQ[y]` drops a variable it is unclear to me if there is a best answer.",
    "created_at": "2021-04-15T07:41:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27364#issuecomment-426083",
    "user": "https://github.com/videlec"
}
```

<a id='comment:25'>Comment 25:</a>
There are several doctest failures. Among them we see that the pushout **wrongly** changes some `Univariate` to `Multivariate`.

```
File "src/sage/categories/pushout.py", line 3772, in sage.categories.pushout.pushout
Failed example:
    pushout(ZZ['x,y,z'], Frac(ZZ['x'])['y'])
Expected:
    Multivariate Polynomial Ring in y, z over Fraction Field of Univariate Polynomial Ring in x over Integer Ring
Got:
    Multivariate Polynomial Ring in y, z over Fraction Field of Multivariate Polynomial Ring in x over Integer Ring
```
Above the action of `ZZ[x,y,z]` on `ZZ(x)[y]` is `ZZ(x)[y,z]` in both situations. However, I think that the `ZZ(x)` **must not** change. It would be good to test this pushout with `ZZ(x)` in different forms
- univariate `PolynomialRing(ZZ, 'x')`
- univariate NTL `PolynomialRing(ZZ, 'x', implementation='NTL')`
- multivariate `PolynomialRing(ZZ, ['x'], 1))`.

In this second example it is unclear what is best.

```
File "src/sage/categories/pushout.py", line 3778, in sage.categories.pushout.pushout
Failed example:
    pushout(QQ['x,y'], ZZ[['x']])
Expected:
    Univariate Polynomial Ring in y over Power Series Ring in x over Rational Field
Got:
    Multivariate Polynomial Ring in y over Power Series Ring in x over Rational Field
```
The action of `QQ[x,y]` on `ZZ[This is the Trac macro *x* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#x-macro)` does correctly produce `QQ[y][This is the Trac macro *x* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#x-macro)` in both situations. Since `QQ[x,y] -> QQ[y]` drops a variable it is unclear to me if there is a best answer.



---

archive/issue_comments_426084.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nRelated: it is desirable that the string representation of multivariate polynomial rings make visible the implementation. Currently we have\n\n```\nsage: PolynomialRing(ZZ, ['x', 'y'], 2, implementation='generic')\nMultivariate Polynomial Ring in x, y over Integer Ring\nsage: PolynomialRing(ZZ, ['x', 'y'], 2, implementation='singular')\nMultivariate Polynomial Ring in x, y over Integer Ring\n```\nBut it would be better as\n\n```\nsage: PolynomialRing(ZZ, ['x', 'y'], 2, implementation='generic')\nMultivariate Polynomial Ring in x, y over Integer Ring (using generic implementation)\nsage: PolynomialRing(ZZ, ['x', 'y'], 2, implementation='singular')\nMultivariate Polynomial Ring in x, y over Integer Ring\n```\nIdeally (as for univariate polynomials and matrices) the default implementation would show nothing.",
    "created_at": "2021-04-15T07:50:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27364#issuecomment-426084",
    "user": "https://github.com/videlec"
}
```

<a id='comment:26'>Comment 26:</a>
Related: it is desirable that the string representation of multivariate polynomial rings make visible the implementation. Currently we have

```
sage: PolynomialRing(ZZ, ['x', 'y'], 2, implementation='generic')
Multivariate Polynomial Ring in x, y over Integer Ring
sage: PolynomialRing(ZZ, ['x', 'y'], 2, implementation='singular')
Multivariate Polynomial Ring in x, y over Integer Ring
```
But it would be better as

```
sage: PolynomialRing(ZZ, ['x', 'y'], 2, implementation='generic')
Multivariate Polynomial Ring in x, y over Integer Ring (using generic implementation)
sage: PolynomialRing(ZZ, ['x', 'y'], 2, implementation='singular')
Multivariate Polynomial Ring in x, y over Integer Ring
```
Ideally (as for univariate polynomials and matrices) the default implementation would show nothing.



---

archive/issue_comments_426085.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nThe construction functor should take into account the implementation. Please fix and add the doctest\n\n```\nsage: TT = PolynomialRing(QQ, 't', 2, implementation='generic')\nsage: F, R = TT.construction()\nsage: F(R) is TT  # bug: returns False\nTrue\n```",
    "created_at": "2021-04-15T07:51:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27364#issuecomment-426085",
    "user": "https://github.com/videlec"
}
```

<a id='comment:27'>Comment 27:</a>
The construction functor should take into account the implementation. Please fix and add the doctest

```
sage: TT = PolynomialRing(QQ, 't', 2, implementation='generic')
sage: F, R = TT.construction()
sage: F(R) is TT  # bug: returns False
True
```



---

archive/issue_comments_426086.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nThe construction is similarly broken on univariate polynomials\n\n```\nsage: T = PolynomialRing(ZZ, 'x')\nsage: F, R = T.construction()\nsage: F(R) is T\nTrue\nsage: T = PolynomialRing(ZZ, 'x', implementation='NTL')\nsage: F, R = T.construction()\nsage: F(R) is T  # bug: returns False\nTrue\n```",
    "created_at": "2021-04-15T07:55:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27364#issuecomment-426086",
    "user": "https://github.com/videlec"
}
```

<a id='comment:28'>Comment 28:</a>
The construction is similarly broken on univariate polynomials

```
sage: T = PolynomialRing(ZZ, 'x')
sage: F, R = T.construction()
sage: F(R) is T
True
sage: T = PolynomialRing(ZZ, 'x', implementation='NTL')
sage: F, R = T.construction()
sage: F(R) is T  # bug: returns False
True
```



---

archive/issue_comments_426087.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\n#31668 is adding lots of these tests via the `_test_construction` method.",
    "created_at": "2021-04-15T15:30:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27364#issuecomment-426087",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:29'>Comment 29:</a>
#31668 is adding lots of these tests via the `_test_construction` method.



---

archive/issue_comments_426088.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nReplying to [@mkoeppe](#comment%3A29):\n> #31668 is adding lots of these tests via the `_test_construction` method.\n\nnice!",
    "created_at": "2021-04-15T15:32:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27364#issuecomment-426088",
    "user": "https://github.com/videlec"
}
```

<a id='comment:30'>Comment 30:</a>
Replying to [@mkoeppe](#comment%3A29):
> #31668 is adding lots of these tests via the `_test_construction` method.

nice!



---

archive/issue_events_345050.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27364#event-345050"
}
```



---

archive/issue_events_345051.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27364#event-345051"
}
```



---

archive/issue_comments_426089.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nSetting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27364#issuecomment-426089",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:32'>Comment 32:</a>
Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_events_345052.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27364#event-345052"
}
```



---

archive/issue_events_345053.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27364#event-345053"
}
```



---

archive/issue_events_345054.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-11T17:19:39Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27364#event-345054"
}
```



---

archive/issue_events_345055.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-11T17:19:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27364#event-345055"
}
```



---

archive/issue_events_345056.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27364#event-345056"
}
```



---

archive/issue_events_345057.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27364",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27364#event-345057"
}
```
