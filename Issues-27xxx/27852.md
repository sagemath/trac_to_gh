# Issue 27852: Refactor structure of RSK

archive/issues_027615.json:
```json
{
    "body": "To change the structure of rsk() function to follow a Rule-based framework.\n\nCC:  @tscrim @darijgr @anneschilling\n\nKeywords: gsocRSK, fpsac2019\n\nReviewer: Travis Scrimshaw, Anne Schilling, Darij Grinberg\n\nAuthor: Chaman Agrawal\n\nBranch: 581ae30c3441f302569a0b934994434a8e83d1c7\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/27852\n\n",
    "closed_at": "2019-07-10T01:31:25Z",
    "created_at": "2019-05-20T01:45:35Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.9",
    "title": "Refactor structure of RSK",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27852",
    "user": "https://github.com/ChamanAgrawal"
}
```
To change the structure of rsk() function to follow a Rule-based framework.

CC:  @tscrim @darijgr @anneschilling

Keywords: gsocRSK, fpsac2019

Reviewer: Travis Scrimshaw, Anne Schilling, Darij Grinberg

Author: Chaman Agrawal

Branch: 581ae30c3441f302569a0b934994434a8e83d1c7

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/27852





---

archive/issue_comments_414837.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to task.",
    "created_at": "2019-05-20T01:47:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414837",
    "user": "https://github.com/ChamanAgrawal"
}
```

Changing type from PLEASE CHANGE to task.



---

archive/issue_comments_414838.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2019-05-20T02:11:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414838",
    "user": "https://github.com/ChamanAgrawal"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_414839.json:
```json
{
    "body": "<a id='comment:3'></a>`@`tscrim.\nWIP\nThe current code is not working (Doc tests and all).",
    "created_at": "2019-05-20T02:17:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414839",
    "user": "https://github.com/ChamanAgrawal"
}
```

<a id='comment:3'></a>`@`tscrim.
WIP
The current code is not working (Doc tests and all).



---

archive/issue_comments_414840.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-20T17:38:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414840",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414841.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to combinatorics.",
    "created_at": "2019-05-20T17:39:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414841",
    "user": "https://github.com/ChamanAgrawal"
}
```

Changing component from PLEASE CHANGE to combinatorics.



---

archive/issue_comments_414842.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-21T18:14:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414842",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414843.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-24T18:19:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414843",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414844.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-25T11:02:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414844",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414845.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-27T20:18:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414845",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414846.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-28T18:26:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414846",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414847.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-30T21:04:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414847",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414848.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-31T21:24:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414848",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414849.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-06-05T17:39:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414849",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414850.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-06-06T17:41:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414850",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414851.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-06-07T18:37:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414851",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414852.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-06-11T17:29:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414852",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414853.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-06-13T18:05:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414853",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414854.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-06-15T02:51:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414854",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414855.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-06-16T08:09:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414855",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414856.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-06-17T13:54:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414856",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414857.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-06-17T18:14:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414857",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414858.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-06-19T18:46:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414858",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414859.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-06-19T20:20:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414859",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414860.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-06-20T16:44:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414860",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414861.json:
```json
{
    "body": "<a id='comment:25'></a>Here are my comments on the current version:\n\nThe `insertion` and `rev(erse)_insertion` should be doing the insertion on a specific row, and going row-by-row should be done in the `forward_rule` and `backwards_rule`. Look at the amount of common code between the RSK and EG rules.\n\nI prefer the original here:\n\n```diff\n-We can perform RSK and the inverse on a variety of objects::\n+We can perform RSK and the RSK_inverse on a variety of objects::\n```\n\n`type-`A`` -> `type `A``\n\nI think we should move all of the information about the different types of insertions to their respective rule class docs. It is better locality and the RSK module-level doc will only be looked at by the compiled documentation, so links will be sufficient.\n\n`Returns` -> `Return` for 1-line docs (e.g., in `to_pair`). Similarly `Inserts` -> `Insert`.\n\n`to_pair` does not need to return a `list` from what I see.\n\nFor `INPUT:` items, they do not start with a capital letter by convention, e.g.\n\n```diff\n-        - ``check_standard`` -- (Default: ``False``) Check if either of the\n+        - ``check_standard`` -- (default: ``False``) check if either of the\n```\n\nComments should be followed by at least one space.\n\nI would move the `import` from `_forward_formatOutput` to the module-level. (Or does this cause an import cycle?) Same for the import of `from bisect import bisect_left`.\n\n`_*_formatOuput` -> `_*_format_output`.\n\nYou should have the doc lines at most 80 chars/line (unless there is a really good reason to do so).\n\n`rev_insertion` -> `reverse_insertion`\n\n`Examples::` -> `EXAMPLES::`\n\nI would just call `p_copy` `p` in `rev(erse)_insertion`.\n\n```diff\n-For precise information about I/O constrains, see the particular Rule class.\n+For precise information about constraints on the input and\n+output, see the particular :class:`~sage.combinat.rsk.Rule` class.\n```",
    "created_at": "2019-06-22T06:50:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414861",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:25'></a>Here are my comments on the current version:

The `insertion` and `rev(erse)_insertion` should be doing the insertion on a specific row, and going row-by-row should be done in the `forward_rule` and `backwards_rule`. Look at the amount of common code between the RSK and EG rules.

I prefer the original here:

```diff
-We can perform RSK and the inverse on a variety of objects::
+We can perform RSK and the RSK_inverse on a variety of objects::
```

`type-`A`` -> `type `A``

I think we should move all of the information about the different types of insertions to their respective rule class docs. It is better locality and the RSK module-level doc will only be looked at by the compiled documentation, so links will be sufficient.

`Returns` -> `Return` for 1-line docs (e.g., in `to_pair`). Similarly `Inserts` -> `Insert`.

`to_pair` does not need to return a `list` from what I see.

For `INPUT:` items, they do not start with a capital letter by convention, e.g.

```diff
-        - ``check_standard`` -- (Default: ``False``) Check if either of the
+        - ``check_standard`` -- (default: ``False``) check if either of the
```

Comments should be followed by at least one space.

I would move the `import` from `_forward_formatOutput` to the module-level. (Or does this cause an import cycle?) Same for the import of `from bisect import bisect_left`.

`_*_formatOuput` -> `_*_format_output`.

You should have the doc lines at most 80 chars/line (unless there is a really good reason to do so).

`rev_insertion` -> `reverse_insertion`

`Examples::` -> `EXAMPLES::`

I would just call `p_copy` `p` in `rev(erse)_insertion`.

```diff
-For precise information about I/O constrains, see the particular Rule class.
+For precise information about constraints on the input and
+output, see the particular :class:`~sage.combinat.rsk.Rule` class.
```



---

archive/issue_comments_414862.json:
```json
{
    "body": "<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-06-22T20:17:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414862",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414863.json:
```json
{
    "body": "<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-06-22T22:37:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414863",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414864.json:
```json
{
    "body": "<a id='comment:28'></a>This is looking much better. A few more comments:\n\nChange:\n\n```diff\n-                r = [j]; p.append(r)\n-                qr = [i]; q.append(qr)\n+                p.append([j])\n+                q.append([i])\n```\n\n```diff\n-d = dict((qij,i) for i, Li in enumerate(q) for qij in Li)\n+d = {qij: i for i, Li in enumerate(q) for qij in Li}\n```\n\nI don't think the `insertion` needs to take the `qr` as you can have it have a `True/False` return value which then is handled by the `forward_rule` function (you always add to the end of the row).\n\nI might have a few more additional comments, but this is all I have time right now to look at. However, you should now set this to needs review and put your real name as the author.",
    "created_at": "2019-06-23T21:57:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414864",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:28'></a>This is looking much better. A few more comments:

Change:

```diff
-                r = [j]; p.append(r)
-                qr = [i]; q.append(qr)
+                p.append([j])
+                q.append([i])
```

```diff
-d = dict((qij,i) for i, Li in enumerate(q) for qij in Li)
+d = {qij: i for i, Li in enumerate(q) for qij in Li}
```

I don't think the `insertion` needs to take the `qr` as you can have it have a `True/False` return value which then is handled by the `forward_rule` function (you always add to the end of the row).

I might have a few more additional comments, but this is all I have time right now to look at. However, you should now set this to needs review and put your real name as the author.



---

archive/issue_comments_414865.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-06-24T02:06:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414865",
    "user": "https://github.com/ChamanAgrawal"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_414866.json:
```json
{
    "body": "<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-06-24T02:44:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414866",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414867.json:
```json
{
    "body": "<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-06-26T19:33:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414867",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414868.json:
```json
{
    "body": "<a id='comment:32'></a>A few last little small details:\n\n- For the `INPUT:` blocks, do not start bullet points with a capital letter.\n- Remove the blank line before the closing `\"\"\"` in the docstrings (personal idiosyncrasy, but I think it looks better without it).\n- Space after the `#` for comments (this is a PEP8 thing).\n- In `the current insertion tableaux`, it should be the singular `tableau`.\n- Remove all trailing whitespace.\n- In `RuleEG`, the `TEST::` should be `TESTS:` and the text is overindented.\n- For `insertion`, you can just return `None` if the letter was added at the end (so you can drop the `insertion_completed` variable).\n- In `forward_rule` after the `else:`, indent the comments one step (i.e., 4 spaces).\n\nDarij, I put you in cc in case you had any comments.",
    "created_at": "2019-06-29T06:08:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414868",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:32'></a>A few last little small details:

- For the `INPUT:` blocks, do not start bullet points with a capital letter.
- Remove the blank line before the closing `"""` in the docstrings (personal idiosyncrasy, but I think it looks better without it).
- Space after the `#` for comments (this is a PEP8 thing).
- In `the current insertion tableaux`, it should be the singular `tableau`.
- Remove all trailing whitespace.
- In `RuleEG`, the `TEST::` should be `TESTS:` and the text is overindented.
- For `insertion`, you can just return `None` if the letter was added at the end (so you can drop the `insertion_completed` variable).
- In `forward_rule` after the `else:`, indent the comments one step (i.e., 4 spaces).

Darij, I put you in cc in case you had any comments.



---

archive/issue_comments_414869.json:
```json
{
    "body": "<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-06-29T15:07:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414869",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414870.json:
```json
{
    "body": "<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-06-29T17:03:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414870",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414871.json:
```json
{
    "body": "<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-06-29T17:53:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414871",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414872.json:
```json
{
    "body": "<a id='comment:36'></a>A few more trivial comments (from Darij):\n\n```diff\nThe Robinson-Schensted-Knuth (RSK) correspondence is most naturally\n-stated as a bijection between generalized permutation (also known\n+stated as a bijection between generalized permutations (also known\nas two-line arrays, biwords, ...) and pairs of semi-standard Young\n```\n\n```diff\n-implemented for the RSK correspondence which can be specify in\n+implemented for the RSK correspondence which can be specified in\n```",
    "created_at": "2019-07-02T06:12:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414872",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:36'></a>A few more trivial comments (from Darij):

```diff
The Robinson-Schensted-Knuth (RSK) correspondence is most naturally
-stated as a bijection between generalized permutation (also known
+stated as a bijection between generalized permutations (also known
as two-line arrays, biwords, ...) and pairs of semi-standard Young
```

```diff
-implemented for the RSK correspondence which can be specify in
+implemented for the RSK correspondence which can be specified in
```



---

archive/issue_comments_414873.json:
```json
{
    "body": "<a id='comment:37'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-02T18:12:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414873",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:37'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414874.json:
```json
{
    "body": "<a id='comment:39'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-07-08T07:46:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414874",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:39'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_414875.json:
```json
{
    "body": "<a id='comment:40'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-08T08:41:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414875",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:40'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414876.json:
```json
{
    "body": "<a id='comment:41'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-08T08:54:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414876",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:41'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414877.json:
```json
{
    "body": "<a id='comment:42'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-08T08:56:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414877",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:42'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414878.json:
```json
{
    "body": "<a id='comment:43'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-07-08T08:57:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414878",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:43'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_414879.json:
```json
{
    "body": "<a id='comment:44'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-08T09:20:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414879",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:44'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414880.json:
```json
{
    "body": "<a id='comment:45'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-08T09:42:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414880",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:45'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414881.json:
```json
{
    "body": "<a id='comment:46'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-08T09:48:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414881",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:46'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414882.json:
```json
{
    "body": "<a id='comment:47'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-08T13:15:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414882",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:47'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414883.json:
```json
{
    "body": "<a id='comment:48'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-08T13:31:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414883",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:48'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414884.json:
```json
{
    "body": "<a id='comment:49'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-08T13:33:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414884",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:49'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414885.json:
```json
{
    "body": "<a id='comment:50'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-07-08T13:34:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414885",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:50'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_414886.json:
```json
{
    "body": "<a id='comment:51'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-07-08T13:35:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414886",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:51'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_414887.json:
```json
{
    "body": "<a id='comment:52'></a>Construction zone -- some functionality (reverse EG output as permutation) removed for now since I don't understand it and the tests are broken. We will perhaps want to reintroduce it after reviewing the rest.",
    "created_at": "2019-07-08T13:38:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414887",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:52'></a>Construction zone -- some functionality (reverse EG output as permutation) removed for now since I don't understand it and the tests are broken. We will perhaps want to reintroduce it after reviewing the rest.



---

archive/issue_comments_414888.json:
```json
{
    "body": "<a id='comment:53'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-08T13:44:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414888",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:53'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414889.json:
```json
{
    "body": "<a id='comment:54'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-07-08T13:46:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414889",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:54'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_414890.json:
```json
{
    "body": "<a id='comment:55'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-08T14:10:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414890",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:55'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414891.json:
```json
{
    "body": "<a id='comment:56'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-08T15:38:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414891",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:56'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414892.json:
```json
{
    "body": "<a id='comment:57'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-07-08T18:15:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414892",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:57'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_414893.json:
```json
{
    "body": "<a id='comment:58'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-08T20:14:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414893",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:58'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414894.json:
```json
{
    "body": "<a id='comment:59'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-08T21:29:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414894",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:59'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414895.json:
```json
{
    "body": "<a id='comment:60'></a>This looks good, with one exception: The permutation output for reverse EG is neither doced nor (explicitly) doctested; it's almost an easter egg...",
    "created_at": "2019-07-08T21:30:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414895",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:60'></a>This looks good, with one exception: The permutation output for reverse EG is neither doced nor (explicitly) doctested; it's almost an easter egg...



---

archive/issue_comments_414896.json:
```json
{
    "body": "<a id='comment:62'></a>There is an explicit test in `RuleEG` for the permutation output (it is the last test in that docstring) and the permutation output doc is inherited from `Rule.backward_rule()`. So they are there.\n\nAlso, I forgot to make this change on my push:\n\n```diff\n-for RSK() and RSK_inverse() respectively (as methods\n+for :func:`RSK()` and :func:`RSK_inverse()` respectively (as methods\n```",
    "created_at": "2019-07-08T21:37:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414896",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:62'></a>There is an explicit test in `RuleEG` for the permutation output (it is the last test in that docstring) and the permutation output doc is inherited from `Rule.backward_rule()`. So they are there.

Also, I forgot to make this change on my push:

```diff
-for RSK() and RSK_inverse() respectively (as methods
+for :func:`RSK()` and :func:`RSK_inverse()` respectively (as methods
```



---

archive/issue_comments_414897.json:
```json
{
    "body": "<a id='comment:63'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-09T11:16:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414897",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:63'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414898.json:
```json
{
    "body": "Changing type from task to enhancement.",
    "created_at": "2019-07-09T12:03:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414898",
    "user": "https://github.com/tscrim"
}
```

Changing type from task to enhancement.



---

archive/issue_comments_414899.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-07-09T12:03:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414899",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_069037.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2019-07-09T12:03:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27852#event-69037"
}
```



---

archive/issue_comments_414900.json:
```json
{
    "body": "<a id='comment:64'></a>Thank you for the help with the review Darij.",
    "created_at": "2019-07-09T12:03:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414900",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:64'></a>Thank you for the help with the review Darij.



---

archive/issue_comments_414901.json:
```json
{
    "body": "Changing keywords from \"gsocRSK\" to \"gsocRSK, fpsac2019\".",
    "created_at": "2019-07-09T12:03:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414901",
    "user": "https://github.com/tscrim"
}
```

Changing keywords from "gsocRSK" to "gsocRSK, fpsac2019".



---

archive/issue_comments_414902.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-07-10T01:31:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27852#issuecomment-414902",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_069038.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-07-10T01:31:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27852",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27852#event-69038"
}
```
