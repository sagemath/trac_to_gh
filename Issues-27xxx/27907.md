# Issue 27907: Building gcc 7.2.0 fails on CentOS / Red Hat / Fedora Linux systems because of crti.o

archive/issues_027670.json:
```json
{
    "body": "On various Linux systemswith old compilers, building gcc 7.2.0 fails because crti.o is not found.\n\nReported for Red Hat 6.10 at https://groups.google.com/d/msg/sage-devel/ze5SzgXZAgk/tai9F4flBQAJ\n\nAlso occurs on a different system: CentOS Linux release 7.6.1810 (Core): There is only `/lib64/crti.o` (same as `/usr/lib64/crti.o`) and the gcc build does not find it and fails as well. \nFix for this system: \n\n```\nexport LIBRARY_PATH=\"/lib64\"\n```\nbefore building sage.\n\n\n\n\nCC:  @dimpase stumpc5 @jdemeyer @vbraun @embray\n\nBranch: [8ed2677d73e1222c6c84e187a0772221d52946ca](https://github.com/sagemath/sagetrac-mirror/commit/8ed2677d73e1222c6c84e187a0772221d52946ca)\n\nReviewer: Volker Braun\n\nAuthor: Matthias Koeppe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/27907\n\n",
    "closed_at": "2019-07-20T09:11:04Z",
    "created_at": "2019-05-31T18:43:13Z",
    "labels": [
        "component: build",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.9",
    "title": "Building gcc 7.2.0 fails on CentOS / Red Hat / Fedora Linux systems because of crti.o",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27907",
    "user": "https://github.com/mkoeppe"
}
```
On various Linux systemswith old compilers, building gcc 7.2.0 fails because crti.o is not found.

Reported for Red Hat 6.10 at https://groups.google.com/d/msg/sage-devel/ze5SzgXZAgk/tai9F4flBQAJ

Also occurs on a different system: CentOS Linux release 7.6.1810 (Core): There is only `/lib64/crti.o` (same as `/usr/lib64/crti.o`) and the gcc build does not find it and fails as well. 
Fix for this system: 

```
export LIBRARY_PATH="/lib64"
```
before building sage.




CC:  @dimpase stumpc5 @jdemeyer @vbraun @embray

Branch: [8ed2677d73e1222c6c84e187a0772221d52946ca](https://github.com/sagemath/sagetrac-mirror/commit/8ed2677d73e1222c6c84e187a0772221d52946ca)

Reviewer: Volker Braun

Author: Matthias Koeppe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/27907





---

archive/issue_comments_541393.json:
```json
{
    "body": "<a id='comment:1'></a>\nThis is the same issue as I have -- I first also had the \"not found\" error, which turned into the one I reported after the sysadmin tried to provide that file (I don't know what he actually did).",
    "created_at": "2019-05-31T19:04:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541393",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:1'></a>
This is the same issue as I have -- I first also had the "not found" error, which turned into the one I reported after the sysadmin tried to provide that file (I don't know what he actually did).



---

archive/issue_events_078403.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "rename": {
        "from": "Building gcc 7.2.0 fails on old systems because of crti.o",
        "to": "Building gcc 7.2.0 fails on old CentOS / Red Hat Linux systems because of crti.o"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27907#event-78403"
}
```



---

archive/issue_comments_541394.json:
```json
{
    "body": "<a id='comment:3'></a>\nReplying to [stumpc5](#comment%3A1):\n> This is the same issue as I have -- I first also had the \"not found\" error, which turned into the one I reported after the sysadmin tried to provide that file (I don't know what he actually did).\n\nThanks for the clarification.",
    "created_at": "2019-05-31T20:44:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541394",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>
Replying to [stumpc5](#comment%3A1):
> This is the same issue as I have -- I first also had the "not found" error, which turned into the one I reported after the sysadmin tried to provide that file (I don't know what he actually did).

Thanks for the clarification.



---

archive/issue_comments_541395.json:
```json
{
    "body": "<a id='comment:5'></a>\nThis appears to be a frequent problem. See for example https://stackoverflow.com/questions/91576/crti-o-file-missing and https://github.com/Homebrew/linuxbrew-core/issues/7172\n\nOn the CentOS system mentioned in the ticket's description, the system's gcc is actually configured correctly: `gcc -print-search-dirs` has a long list of paths that includes `/lib64` (= `/usr/lib64` on this system).\n\nThe folks at Linuxbrew do the following in https://github.com/Homebrew/linuxbrew-core/blob/master/Formula/gcc`@`7.rb:\n\n```\n        # Set the search path for glibc libraries and objects, using the system's glibc\n        # Fix the error: ld: cannot find crti.o: No such file or directory\n        ENV.prepend_path \"LIBRARY_PATH\", Pathname.new(Utils.popen_read(ENV.cc, \"-print-file-name=crti.o\")).parent\n```\nOn the CentOS system I can confirm that `gcc -print-file-name=crti.o` gives the correct file name. \nSo this may be a sound approach.",
    "created_at": "2019-05-31T21:49:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541395",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>
This appears to be a frequent problem. See for example https://stackoverflow.com/questions/91576/crti-o-file-missing and https://github.com/Homebrew/linuxbrew-core/issues/7172

On the CentOS system mentioned in the ticket's description, the system's gcc is actually configured correctly: `gcc -print-search-dirs` has a long list of paths that includes `/lib64` (= `/usr/lib64` on this system).

The folks at Linuxbrew do the following in https://github.com/Homebrew/linuxbrew-core/blob/master/Formula/gcc`@`7.rb:

```
        # Set the search path for glibc libraries and objects, using the system's glibc
        # Fix the error: ld: cannot find crti.o: No such file or directory
        ENV.prepend_path "LIBRARY_PATH", Pathname.new(Utils.popen_read(ENV.cc, "-print-file-name=crti.o")).parent
```
On the CentOS system I can confirm that `gcc -print-file-name=crti.o` gives the correct file name. 
So this may be a sound approach.



---

archive/issue_comments_541396.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,12 +1,8 @@\n-On various Linux systems with old compilers, building gcc 7.2.0 fails because either crti.o is not found, or there is 32/64 bit ABI mismatch on the one that is found.\n+On various Linux systems with old compilers, building gcc 7.2.0 fails because crti.o is not found.\n \n-Reported for Red Hat 6.10 at https://groups.google.com/d/msg/sage-devel/ze5SzgXZAgk/tai9F4flBQAJ:\n+Reported for Red Hat 6.10 at https://groups.google.com/d/msg/sage-devel/ze5SzgXZAgk/tai9F4flBQAJ\n \n-```\n-/lib/crti.o: could not read symbols: File in wrong format \n-```\n-\n-On a different system: CentOS Linux release 7.6.1810 (Core), there is only `/lib64/crti.o` and the gcc build does not find it and fails as well. \n+Also occurs on a different system: CentOS Linux release 7.6.1810 (Core): There is only `/lib64/crti.o` (same as `/usr/lib64/crti.o`) and the gcc build does not find it and fails as well. \n Fix for this system: \n \n ```\n``````\n",
    "created_at": "2019-05-31T21:55:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541396",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,12 +1,8 @@
-On various Linux systems with old compilers, building gcc 7.2.0 fails because either crti.o is not found, or there is 32/64 bit ABI mismatch on the one that is found.
+On various Linux systems with old compilers, building gcc 7.2.0 fails because crti.o is not found.
 
-Reported for Red Hat 6.10 at https://groups.google.com/d/msg/sage-devel/ze5SzgXZAgk/tai9F4flBQAJ:
+Reported for Red Hat 6.10 at https://groups.google.com/d/msg/sage-devel/ze5SzgXZAgk/tai9F4flBQAJ
 
-```
-/lib/crti.o: could not read symbols: File in wrong format 
-```
-
-On a different system: CentOS Linux release 7.6.1810 (Core), there is only `/lib64/crti.o` and the gcc build does not find it and fails as well. 
+Also occurs on a different system: CentOS Linux release 7.6.1810 (Core): There is only `/lib64/crti.o` (same as `/usr/lib64/crti.o`) and the gcc build does not find it and fails as well. 
 Fix for this system: 
 
 ```
``````




---

archive/issue_comments_541397.json:
```json
{
    "body": "Branch: [u/mkoeppe/building_gcc_7_2_0_fails_on_old_centos___red_hat_linux_systems_because_of_crti_o](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/building_gcc_7_2_0_fails_on_old_centos___red_hat_linux_systems_because_of_crti_o)",
    "created_at": "2019-06-01T17:52:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541397",
    "user": "https://github.com/mkoeppe"
}
```

Branch: [u/mkoeppe/building_gcc_7_2_0_fails_on_old_centos___red_hat_linux_systems_because_of_crti_o](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/building_gcc_7_2_0_fails_on_old_centos___red_hat_linux_systems_because_of_crti_o)



---

archive/issue_comments_541398.json:
```json
{
    "body": "Author: Matthias Koeppe",
    "created_at": "2019-06-01T17:53:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541398",
    "user": "https://github.com/mkoeppe"
}
```

Author: Matthias Koeppe



---

archive/issue_comments_541399.json:
```json
{
    "body": "Commit: [e8c0e64eea486a78dd51558d1889de3c6db32868](https://github.com/sagemath/sagetrac-mirror/commit/e8c0e64eea486a78dd51558d1889de3c6db32868)",
    "created_at": "2019-06-01T17:53:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541399",
    "user": "https://github.com/mkoeppe"
}
```

Commit: [e8c0e64eea486a78dd51558d1889de3c6db32868](https://github.com/sagemath/sagetrac-mirror/commit/e8c0e64eea486a78dd51558d1889de3c6db32868)



---

archive/issue_comments_541400.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-06-01T17:53:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541400",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_541401.json:
```json
{
    "body": "<a id='comment:8'></a>\nNew commits:\n|                                                                                                                                          |                                                   |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|\n|[e8c0e64](https://github.com/sagemath/sagetrac-mirror/commit/e8c0e64eea486a78dd51558d1889de3c6db32868)|`build-gcc: Find crti.o via ${CC} -print-file-name`|",
    "created_at": "2019-06-01T17:53:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541401",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
New commits:
|                                                                                                                                          |                                                   |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|
|[e8c0e64](https://github.com/sagemath/sagetrac-mirror/commit/e8c0e64eea486a78dd51558d1889de3c6db32868)|`build-gcc: Find crti.o via ${CC} -print-file-name`|



---

archive/issue_comments_541402.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-06-02T00:08:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541402",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_541403.json:
```json
{
    "body": "Changing commit from \"[e8c0e64eea486a78dd51558d1889de3c6db32868](https://github.com/sagemath/sagetrac-mirror/commit/e8c0e64eea486a78dd51558d1889de3c6db32868)\" to \"[169fdf2c681445aab9410cd837c13bd9eefd1303](https://github.com/sagemath/sagetrac-mirror/commit/169fdf2c681445aab9410cd837c13bd9eefd1303)\"",
    "created_at": "2019-06-02T01:28:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541403",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[e8c0e64eea486a78dd51558d1889de3c6db32868](https://github.com/sagemath/sagetrac-mirror/commit/e8c0e64eea486a78dd51558d1889de3c6db32868)" to "[169fdf2c681445aab9410cd837c13bd9eefd1303](https://github.com/sagemath/sagetrac-mirror/commit/169fdf2c681445aab9410cd837c13bd9eefd1303)"



---

archive/issue_comments_541404.json:
```json
{
    "body": "<a id='comment:10'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|\n|[169fdf2](https://github.com/sagemath/sagetrac-mirror/commit/169fdf2c681445aab9410cd837c13bd9eefd1303)|`Add to end of LIBRARY_PATH, not front`|",
    "created_at": "2019-06-02T01:28:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541404",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                       |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|
|[169fdf2](https://github.com/sagemath/sagetrac-mirror/commit/169fdf2c681445aab9410cd837c13bd9eefd1303)|`Add to end of LIBRARY_PATH, not front`|



---

archive/issue_comments_541405.json:
```json
{
    "body": "<a id='comment:11'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|\n|[cdf180d](https://github.com/sagemath/sagetrac-mirror/commit/cdf180d3408bce1590afffc893c23e9f87557454)|`LIBRARY_PATH is needed in spkg-install too`|",
    "created_at": "2019-06-02T01:50:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541405",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|
|[cdf180d](https://github.com/sagemath/sagetrac-mirror/commit/cdf180d3408bce1590afffc893c23e9f87557454)|`LIBRARY_PATH is needed in spkg-install too`|



---

archive/issue_comments_541406.json:
```json
{
    "body": "Changing commit from \"[169fdf2c681445aab9410cd837c13bd9eefd1303](https://github.com/sagemath/sagetrac-mirror/commit/169fdf2c681445aab9410cd837c13bd9eefd1303)\" to \"[cdf180d3408bce1590afffc893c23e9f87557454](https://github.com/sagemath/sagetrac-mirror/commit/cdf180d3408bce1590afffc893c23e9f87557454)\"",
    "created_at": "2019-06-02T01:50:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541406",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[169fdf2c681445aab9410cd837c13bd9eefd1303](https://github.com/sagemath/sagetrac-mirror/commit/169fdf2c681445aab9410cd837c13bd9eefd1303)" to "[cdf180d3408bce1590afffc893c23e9f87557454](https://github.com/sagemath/sagetrac-mirror/commit/cdf180d3408bce1590afffc893c23e9f87557454)"



---

archive/issue_comments_541407.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-06-02T08:11:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541407",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_541408.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-06-02T17:36:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541408",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_541409.json:
```json
{
    "body": "<a id='comment:14'></a>\nThank your for working on this!\nUnfortunately, your fix does not yet solve it for me:\n\n```\n[stumpcl2@dlp762 sage]$ CRTI=$(${CC:-gcc} -print-file-name=crti.o 2>/dev/null || true)\n[stumpcl2@dlp762 sage]$ echo $CRTI\n/usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../lib64/crti.o\n[stumpcl2@dlp762 sage]$ if [ -n \"$CRTI\" ]; then\n>  CRTI_DIR=$(dirname -- \"$CRTI\")\n>  if [ -n \"$CRTI_DIR\" -a \"$CRTI_DIR\" != \".\" ]; then\n>  export LIBRARY_PATH=\"$LIBRARY_PATH:$CRTI_DIR\"\n>  fi\n> fi\n[stumpcl2@dlp762 sage]$ echo $CRTI_DIR\n/usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../lib64\n[stumpcl2@dlp762 sage]$ echo $LIBRARY_PATH\n/lib64:/usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../lib64\n```\nwhile building from scratch yields the error\n\n```\n[gcc-7.2.0] /usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../lib64/../lib/crti.o: could not read symbols: File in wrong format\n```\nSo it leaves `lib64` again and goes back to `lib` to look for `crti.o`.",
    "created_at": "2019-06-02T19:28:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541409",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:14'></a>
Thank your for working on this!
Unfortunately, your fix does not yet solve it for me:

```
[stumpcl2@dlp762 sage]$ CRTI=$(${CC:-gcc} -print-file-name=crti.o 2>/dev/null || true)
[stumpcl2@dlp762 sage]$ echo $CRTI
/usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../lib64/crti.o
[stumpcl2@dlp762 sage]$ if [ -n "$CRTI" ]; then
>  CRTI_DIR=$(dirname -- "$CRTI")
>  if [ -n "$CRTI_DIR" -a "$CRTI_DIR" != "." ]; then
>  export LIBRARY_PATH="$LIBRARY_PATH:$CRTI_DIR"
>  fi
> fi
[stumpcl2@dlp762 sage]$ echo $CRTI_DIR
/usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../lib64
[stumpcl2@dlp762 sage]$ echo $LIBRARY_PATH
/lib64:/usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../lib64
```
while building from scratch yields the error

```
[gcc-7.2.0] /usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../lib64/../lib/crti.o: could not read symbols: File in wrong format
```
So it leaves `lib64` again and goes back to `lib` to look for `crti.o`.



---

archive/issue_comments_541410.json:
```json
{
    "body": "<a id='comment:15'></a>\nI'd suggest to first check with your sysadmin what it is that he did to try to fix the original problem and to undo that.",
    "created_at": "2019-06-02T19:30:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541410",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'></a>
I'd suggest to first check with your sysadmin what it is that he did to try to fix the original problem and to undo that.



---

archive/issue_comments_541411.json:
```json
{
    "body": "<a id='comment:16'></a>\n> I'd suggest to first check with your sysadmin what it is that he did to try to fix the original problem and to undo that.\n\n\nWell, he installed `gcc-7.2.0` systemwide (and then also `gcc-7.3.0`). If I use either of these (making it available using `ini gcc`), I get the errors I originally reported on `sage-devel` (`gfan-0.6.2.p1`, `ppl-1.2.p1`). If I do not use that gcc, but the older `gcc-4.4.7`, the not-found-error turned into the given could-not-read-symbols-error.",
    "created_at": "2019-06-02T20:33:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541411",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:16'></a>
> I'd suggest to first check with your sysadmin what it is that he did to try to fix the original problem and to undo that.


Well, he installed `gcc-7.2.0` systemwide (and then also `gcc-7.3.0`). If I use either of these (making it available using `ini gcc`), I get the errors I originally reported on `sage-devel` (`gfan-0.6.2.p1`, `ppl-1.2.p1`). If I do not use that gcc, but the older `gcc-4.4.7`, the not-found-error turned into the given could-not-read-symbols-error.



---

archive/issue_comments_541412.json:
```json
{
    "body": "<a id='comment:17'></a>\nOK, thanks for the clarification",
    "created_at": "2019-06-02T22:49:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541412",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>
OK, thanks for the clarification



---

archive/issue_comments_541413.json:
```json
{
    "body": "<a id='comment:18'></a>\nNeeds more work also for one of my systems, where it succeeds in building and installing gcc, but that gcc does not work without setting the LIBRARY_PATH variable during its runtime!",
    "created_at": "2019-06-02T23:35:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541413",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'></a>
Needs more work also for one of my systems, where it succeeds in building and installing gcc, but that gcc does not work without setting the LIBRARY_PATH variable during its runtime!



---

archive/issue_comments_541414.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [mkoeppe](#comment%3A17):\n> OK, thanks for the clarification\n\nCould you try the following: \n\n```\nfile /usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../lib64/crt*.o\n```",
    "created_at": "2019-06-02T23:39:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541414",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:19'></a>
Replying to [mkoeppe](#comment%3A17):
> OK, thanks for the clarification

Could you try the following: 

```
file /usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../lib64/crt*.o
```



---

archive/issue_comments_541415.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [mkoeppe](#comment%3A18):\n> Needs more work also for one of my systems, where it succeeds in building and installing gcc, but that gcc does not work without setting the LIBRARY_PATH variable during its runtime!\n\n\nPossible solution, again from Linuxbrew:\n\n```\n      gcc = bin/\"gcc-7\"\n      libgcc = Pathname.new(Utils.popen_read(gcc, \"-print-libgcc-file-name\")).parent\n      raise \"command failed: #{gcc} -print-libgcc-file-name\" if $CHILD_STATUS.exitstatus.nonzero?\n\n      glibc = Formula[\"glibc\"]\n      glibc_installed = glibc.any_version_installed?\n\n      # Symlink crt1.o and friends where gcc can find it.\n      if glibc_installed\n        crtdir = glibc.opt_lib\n      else\n        crtdir = Pathname.new(Utils.popen_read(\"/usr/bin/cc\", \"-print-file-name=crti.o\")).parent\n      end\n      ln_sf Dir[crtdir/\"*crt?.o\"], libgcc\n\n```",
    "created_at": "2019-06-02T23:59:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541415",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'></a>
Replying to [mkoeppe](#comment%3A18):
> Needs more work also for one of my systems, where it succeeds in building and installing gcc, but that gcc does not work without setting the LIBRARY_PATH variable during its runtime!


Possible solution, again from Linuxbrew:

```
      gcc = bin/"gcc-7"
      libgcc = Pathname.new(Utils.popen_read(gcc, "-print-libgcc-file-name")).parent
      raise "command failed: #{gcc} -print-libgcc-file-name" if $CHILD_STATUS.exitstatus.nonzero?

      glibc = Formula["glibc"]
      glibc_installed = glibc.any_version_installed?

      # Symlink crt1.o and friends where gcc can find it.
      if glibc_installed
        crtdir = glibc.opt_lib
      else
        crtdir = Pathname.new(Utils.popen_read("/usr/bin/cc", "-print-file-name=crti.o")).parent
      end
      ln_sf Dir[crtdir/"*crt?.o"], libgcc

```



---

archive/issue_comments_541416.json:
```json
{
    "body": "<a id='comment:21'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|\n|[f57d00c](https://github.com/sagemath/sagetrac-mirror/commit/f57d00c90048a6de34a2ad1e0045be9750a02b39)|`Find SAGE_CRTI_DIR at configure time.`|\n|[73be6cf](https://github.com/sagemath/sagetrac-mirror/commit/73be6cf53f30b53e5a8a3dedf8f30c2c9960475a)|`Symlink crt1.o and friends where gcc can find it`|",
    "created_at": "2019-06-03T02:54:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541416",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                       |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|
|[f57d00c](https://github.com/sagemath/sagetrac-mirror/commit/f57d00c90048a6de34a2ad1e0045be9750a02b39)|`Find SAGE_CRTI_DIR at configure time.`|
|[73be6cf](https://github.com/sagemath/sagetrac-mirror/commit/73be6cf53f30b53e5a8a3dedf8f30c2c9960475a)|`Symlink crt1.o and friends where gcc can find it`|



---

archive/issue_comments_541417.json:
```json
{
    "body": "Changing commit from \"[cdf180d3408bce1590afffc893c23e9f87557454](https://github.com/sagemath/sagetrac-mirror/commit/cdf180d3408bce1590afffc893c23e9f87557454)\" to \"[73be6cf53f30b53e5a8a3dedf8f30c2c9960475a](https://github.com/sagemath/sagetrac-mirror/commit/73be6cf53f30b53e5a8a3dedf8f30c2c9960475a)\"",
    "created_at": "2019-06-03T02:54:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541417",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[cdf180d3408bce1590afffc893c23e9f87557454](https://github.com/sagemath/sagetrac-mirror/commit/cdf180d3408bce1590afffc893c23e9f87557454)" to "[73be6cf53f30b53e5a8a3dedf8f30c2c9960475a](https://github.com/sagemath/sagetrac-mirror/commit/73be6cf53f30b53e5a8a3dedf8f30c2c9960475a)"



---

archive/issue_comments_541418.json:
```json
{
    "body": "<a id='comment:22'></a>\nBased on this `73be6cf`, the error becomes\n\n```\n[gcc-7.2.0] /usr/lib/../lib/crti.o: could not read symbols: File in wrong format\n```\nwith\n\n```\n[stumpcl2@dlp762 sage]$ file /usr/lib/../lib/crti.o\n/usr/lib/../lib/crti.o: ELF 32-bit LSB relocatable, Intel 80386, version 1 (SYSV), not stripped\n```",
    "created_at": "2019-06-03T07:39:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541418",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:22'></a>
Based on this `73be6cf`, the error becomes

```
[gcc-7.2.0] /usr/lib/../lib/crti.o: could not read symbols: File in wrong format
```
with

```
[stumpcl2@dlp762 sage]$ file /usr/lib/../lib/crti.o
/usr/lib/../lib/crti.o: ELF 32-bit LSB relocatable, Intel 80386, version 1 (SYSV), not stripped
```



---

archive/issue_comments_541419.json:
```json
{
    "body": "<a id='comment:23'></a>\nBut what does `file /usr/lib64/crt*.o` give?",
    "created_at": "2019-06-03T07:49:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541419",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:23'></a>
But what does `file /usr/lib64/crt*.o` give?



---

archive/issue_comments_541420.json:
```json
{
    "body": "<a id='comment:24'></a>\n\n```\n[stumpcl2@dlp762 sage]$ file /usr/lib64/crt*.o\n/usr/lib64/crt1.o: ELF 64-bit LSB relocatable, x86-64, version 1 (SYSV), for GNU/Linux 2.6.18, not stripped\n/usr/lib64/crti.o: ELF 64-bit LSB relocatable, x86-64, version 1 (SYSV), not stripped\n/usr/lib64/crtn.o: ELF 64-bit LSB relocatable, x86-64, version 1 (SYSV), stripped\n```",
    "created_at": "2019-06-03T07:58:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541420",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:24'></a>

```
[stumpcl2@dlp762 sage]$ file /usr/lib64/crt*.o
/usr/lib64/crt1.o: ELF 64-bit LSB relocatable, x86-64, version 1 (SYSV), for GNU/Linux 2.6.18, not stripped
/usr/lib64/crti.o: ELF 64-bit LSB relocatable, x86-64, version 1 (SYSV), not stripped
/usr/lib64/crtn.o: ELF 64-bit LSB relocatable, x86-64, version 1 (SYSV), stripped
```



---

archive/issue_comments_541421.json:
```json
{
    "body": "<a id='comment:25'></a>\nCould you attach the latest .log file?",
    "created_at": "2019-06-03T08:14:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541421",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'></a>
Could you attach the latest .log file?



---

archive/issue_comments_541422.json:
```json
{
    "body": "<a id='comment:26'></a>\nThe current version works on the CentOS Linux system where I first encountered this problem.",
    "created_at": "2019-06-03T08:17:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541422",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'></a>
The current version works on the CentOS Linux system where I first encountered this problem.



---

archive/issue_comments_541423.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-06-03T08:17:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541423",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_541424.json:
```json
{
    "body": "<a id='comment:27'></a>\nReplying to [mkoeppe](#comment%3A25):\n> Could you attach the latest .log file?\n\n\nposted on sage-devel",
    "created_at": "2019-06-03T08:21:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541424",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:27'></a>
Replying to [mkoeppe](#comment%3A25):
> Could you attach the latest .log file?


posted on sage-devel



---

archive/issue_comments_541425.json:
```json
{
    "body": "<a id='comment:28'></a>\nLooks like configure was not regenerated. When you get a chance, please run ./bootstrap (this needs autotools installed...)\nIf it still fails, please post both config.log and the gcc-7.2.0.log",
    "created_at": "2019-06-04T00:25:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541425",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:28'></a>
Looks like configure was not regenerated. When you get a chance, please run ./bootstrap (this needs autotools installed...)
If it still fails, please post both config.log and the gcc-7.2.0.log



---

archive/issue_comments_541426.json:
```json
{
    "body": "<a id='comment:29'></a>\nThis now also works for me compiling gcc-7.2.0, many thanks for fixing this! (Unfortunately, the next error occurred right after on Red Hat 6.10.",
    "created_at": "2019-06-04T14:33:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541426",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:29'></a>
This now also works for me compiling gcc-7.2.0, many thanks for fixing this! (Unfortunately, the next error occurred right after on Red Hat 6.10.



---

archive/issue_comments_541427.json:
```json
{
    "body": "<a id='comment:30'></a>\nLet's please get this into the next beta so that this can be tested by people without having to regenerate the configure scripts.",
    "created_at": "2019-06-05T15:02:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541427",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:30'></a>
Let's please get this into the next beta so that this can be tested by people without having to regenerate the configure scripts.



---

archive/issue_comments_541428.json:
```json
{
    "body": "<a id='comment:31'></a>\nYes, I agree. But do you see a way to auto-generate\n\n```\n# Location of system crti.o, in case we build our own gcc\nexport SAGE_CRTI_DIR=\"/usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../lib64\"\n```\nwhich I tweaked by hand?",
    "created_at": "2019-06-05T15:54:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541428",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:31'></a>
Yes, I agree. But do you see a way to auto-generate

```
# Location of system crti.o, in case we build our own gcc
export SAGE_CRTI_DIR="/usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../lib64"
```
which I tweaked by hand?



---

archive/issue_comments_541429.json:
```json
{
    "body": "<a id='comment:32'></a>\nReplying to [stumpc5](#comment%3A31):\n> Yes, I agree. But do you see a way to auto-generate\n> \n> ```\n> # Location of system crti.o, in case we build our own gcc\n> export SAGE_CRTI_DIR=\"/usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../lib64\"\n> ```\n> which I tweaked by hand?\n\nThe scripts already do all of that. Something is broken in your setup that stops your copy of sage from regenerating the autotools scripts correctly. For example, in the last set of logs you posted there is no trace of the crti test at configure time. After `make distclean` your copy of sage likely downloaded the configure scripts from the latest beta, instead of regenerating them.",
    "created_at": "2019-06-06T17:33:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541429",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:32'></a>
Replying to [stumpc5](#comment%3A31):
> Yes, I agree. But do you see a way to auto-generate
> 
> ```
> # Location of system crti.o, in case we build our own gcc
> export SAGE_CRTI_DIR="/usr/lib/gcc/x86_64-redhat-linux/4.4.7/../../../../lib64"
> ```
> which I tweaked by hand?

The scripts already do all of that. Something is broken in your setup that stops your copy of sage from regenerating the autotools scripts correctly. For example, in the last set of logs you posted there is no trace of the crti test at configure time. After `make distclean` your copy of sage likely downloaded the configure scripts from the latest beta, instead of regenerating them.



---

archive/issue_comments_541430.json:
```json
{
    "body": "<a id='comment:34'></a>\ncould it be that the machine either has no autotools installed, or they are outdated/broken?",
    "created_at": "2019-06-06T17:40:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541430",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:34'></a>
could it be that the machine either has no autotools installed, or they are outdated/broken?



---

archive/issue_comments_541431.json:
```json
{
    "body": "<a id='comment:35'></a>\nReplying to [dimpase](#comment%3A34):\n> could it be that the machine either has no autotools installed, or they are outdated/broken?\n\nYes, that's my guess too.\n\nIn any case, I have tested this ticket on one of my machines that had the same problem.",
    "created_at": "2019-06-06T17:44:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541431",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:35'></a>
Replying to [dimpase](#comment%3A34):
> could it be that the machine either has no autotools installed, or they are outdated/broken?

Yes, that's my guess too.

In any case, I have tested this ticket on one of my machines that had the same problem.



---

archive/issue_comments_541432.json:
```json
{
    "body": "<a id='comment:36'></a>\nRegarding the `spkg-postinst`, could you please add a complementary `spkg-postrm` which removes the symlink, if it exists?",
    "created_at": "2019-06-07T18:31:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541432",
    "user": "https://github.com/embray"
}
```

<a id='comment:36'></a>
Regarding the `spkg-postinst`, could you please add a complementary `spkg-postrm` which removes the symlink, if it exists?



---

archive/issue_comments_541433.json:
```json
{
    "body": "<a id='comment:37'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|\n|[d8e9adf](https://github.com/sagemath/sagetrac-mirror/commit/d8e9adf27242e2ad4eca877c9f80b03865c04e42)|`Remove symlinks in postrm`|",
    "created_at": "2019-06-19T22:59:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541433",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:37'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|
|[d8e9adf](https://github.com/sagemath/sagetrac-mirror/commit/d8e9adf27242e2ad4eca877c9f80b03865c04e42)|`Remove symlinks in postrm`|



---

archive/issue_comments_541434.json:
```json
{
    "body": "Changing commit from \"[73be6cf53f30b53e5a8a3dedf8f30c2c9960475a](https://github.com/sagemath/sagetrac-mirror/commit/73be6cf53f30b53e5a8a3dedf8f30c2c9960475a)\" to \"[d8e9adf27242e2ad4eca877c9f80b03865c04e42](https://github.com/sagemath/sagetrac-mirror/commit/d8e9adf27242e2ad4eca877c9f80b03865c04e42)\"",
    "created_at": "2019-06-19T22:59:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541434",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[73be6cf53f30b53e5a8a3dedf8f30c2c9960475a](https://github.com/sagemath/sagetrac-mirror/commit/73be6cf53f30b53e5a8a3dedf8f30c2c9960475a)" to "[d8e9adf27242e2ad4eca877c9f80b03865c04e42](https://github.com/sagemath/sagetrac-mirror/commit/d8e9adf27242e2ad4eca877c9f80b03865c04e42)"



---

archive/issue_comments_541435.json:
```json
{
    "body": "<a id='comment:38'></a>\nNew commits:\n|                                                                                                                                          |                           |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|\n|[d8e9adf](https://github.com/sagemath/sagetrac-mirror/commit/d8e9adf27242e2ad4eca877c9f80b03865c04e42)|`Remove symlinks in postrm`|",
    "created_at": "2019-06-19T23:03:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541435",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:38'></a>
New commits:
|                                                                                                                                          |                           |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|
|[d8e9adf](https://github.com/sagemath/sagetrac-mirror/commit/d8e9adf27242e2ad4eca877c9f80b03865c04e42)|`Remove symlinks in postrm`|



---

archive/issue_comments_541436.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-06-19T23:03:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541436",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_541437.json:
```json
{
    "body": "<a id='comment:39'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------|\n|[cd9a0e8](https://github.com/sagemath/sagetrac-mirror/commit/cd9a0e88aabf85d555b2062f9b25b8270ca48024)|`Fixup`|",
    "created_at": "2019-06-20T05:11:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541437",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:39'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |       |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------|
|[cd9a0e8](https://github.com/sagemath/sagetrac-mirror/commit/cd9a0e88aabf85d555b2062f9b25b8270ca48024)|`Fixup`|



---

archive/issue_comments_541438.json:
```json
{
    "body": "Changing commit from \"[d8e9adf27242e2ad4eca877c9f80b03865c04e42](https://github.com/sagemath/sagetrac-mirror/commit/d8e9adf27242e2ad4eca877c9f80b03865c04e42)\" to \"[cd9a0e88aabf85d555b2062f9b25b8270ca48024](https://github.com/sagemath/sagetrac-mirror/commit/cd9a0e88aabf85d555b2062f9b25b8270ca48024)\"",
    "created_at": "2019-06-20T05:11:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541438",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[d8e9adf27242e2ad4eca877c9f80b03865c04e42](https://github.com/sagemath/sagetrac-mirror/commit/d8e9adf27242e2ad4eca877c9f80b03865c04e42)" to "[cd9a0e88aabf85d555b2062f9b25b8270ca48024](https://github.com/sagemath/sagetrac-mirror/commit/cd9a0e88aabf85d555b2062f9b25b8270ca48024)"



---

archive/issue_comments_541439.json:
```json
{
    "body": "<a id='comment:40'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------|\n|[9e3da9b](https://github.com/sagemath/sagetrac-mirror/commit/9e3da9b5f00b872cf50121b70f635498db1c22ec)|`Fix up`|",
    "created_at": "2019-06-20T05:19:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541439",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:40'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |        |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------|
|[9e3da9b](https://github.com/sagemath/sagetrac-mirror/commit/9e3da9b5f00b872cf50121b70f635498db1c22ec)|`Fix up`|



---

archive/issue_comments_541440.json:
```json
{
    "body": "Changing commit from \"[cd9a0e88aabf85d555b2062f9b25b8270ca48024](https://github.com/sagemath/sagetrac-mirror/commit/cd9a0e88aabf85d555b2062f9b25b8270ca48024)\" to \"[9e3da9b5f00b872cf50121b70f635498db1c22ec](https://github.com/sagemath/sagetrac-mirror/commit/9e3da9b5f00b872cf50121b70f635498db1c22ec)\"",
    "created_at": "2019-06-20T05:19:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541440",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[cd9a0e88aabf85d555b2062f9b25b8270ca48024](https://github.com/sagemath/sagetrac-mirror/commit/cd9a0e88aabf85d555b2062f9b25b8270ca48024)" to "[9e3da9b5f00b872cf50121b70f635498db1c22ec](https://github.com/sagemath/sagetrac-mirror/commit/9e3da9b5f00b872cf50121b70f635498db1c22ec)"



---

archive/issue_comments_541441.json:
```json
{
    "body": "<a id='comment:41'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------|\n|[a04ea6b](https://github.com/sagemath/sagetrac-mirror/commit/a04ea6bb6fc02a21b74b9b4421eaaa9f6604a63f)|`Fix up`|",
    "created_at": "2019-06-20T20:51:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541441",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:41'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |        |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------|
|[a04ea6b](https://github.com/sagemath/sagetrac-mirror/commit/a04ea6bb6fc02a21b74b9b4421eaaa9f6604a63f)|`Fix up`|



---

archive/issue_comments_541442.json:
```json
{
    "body": "Changing commit from \"[9e3da9b5f00b872cf50121b70f635498db1c22ec](https://github.com/sagemath/sagetrac-mirror/commit/9e3da9b5f00b872cf50121b70f635498db1c22ec)\" to \"[a04ea6bb6fc02a21b74b9b4421eaaa9f6604a63f](https://github.com/sagemath/sagetrac-mirror/commit/a04ea6bb6fc02a21b74b9b4421eaaa9f6604a63f)\"",
    "created_at": "2019-06-20T20:51:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541442",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[9e3da9b5f00b872cf50121b70f635498db1c22ec](https://github.com/sagemath/sagetrac-mirror/commit/9e3da9b5f00b872cf50121b70f635498db1c22ec)" to "[a04ea6bb6fc02a21b74b9b4421eaaa9f6604a63f](https://github.com/sagemath/sagetrac-mirror/commit/a04ea6bb6fc02a21b74b9b4421eaaa9f6604a63f)"



---

archive/issue_comments_541443.json:
```json
{
    "body": "<a id='comment:42'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------|\n|[0558eef](https://github.com/sagemath/sagetrac-mirror/commit/0558eef992198c4e1074b96c719be7c702c75152)|`Fix up`|",
    "created_at": "2019-06-21T00:06:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541443",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:42'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |        |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------|
|[0558eef](https://github.com/sagemath/sagetrac-mirror/commit/0558eef992198c4e1074b96c719be7c702c75152)|`Fix up`|



---

archive/issue_comments_541444.json:
```json
{
    "body": "Changing commit from \"[a04ea6bb6fc02a21b74b9b4421eaaa9f6604a63f](https://github.com/sagemath/sagetrac-mirror/commit/a04ea6bb6fc02a21b74b9b4421eaaa9f6604a63f)\" to \"[0558eef992198c4e1074b96c719be7c702c75152](https://github.com/sagemath/sagetrac-mirror/commit/0558eef992198c4e1074b96c719be7c702c75152)\"",
    "created_at": "2019-06-21T00:06:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541444",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[a04ea6bb6fc02a21b74b9b4421eaaa9f6604a63f](https://github.com/sagemath/sagetrac-mirror/commit/a04ea6bb6fc02a21b74b9b4421eaaa9f6604a63f)" to "[0558eef992198c4e1074b96c719be7c702c75152](https://github.com/sagemath/sagetrac-mirror/commit/0558eef992198c4e1074b96c719be7c702c75152)"



---

archive/issue_comments_541445.json:
```json
{
    "body": "Changing commit from \"[0558eef992198c4e1074b96c719be7c702c75152](https://github.com/sagemath/sagetrac-mirror/commit/0558eef992198c4e1074b96c719be7c702c75152)\" to \"[4f0801520ef3c01cd2816081d858e6c25991d8e2](https://github.com/sagemath/sagetrac-mirror/commit/4f0801520ef3c01cd2816081d858e6c25991d8e2)\"",
    "created_at": "2019-06-21T16:51:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541445",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[0558eef992198c4e1074b96c719be7c702c75152](https://github.com/sagemath/sagetrac-mirror/commit/0558eef992198c4e1074b96c719be7c702c75152)" to "[4f0801520ef3c01cd2816081d858e6c25991d8e2](https://github.com/sagemath/sagetrac-mirror/commit/4f0801520ef3c01cd2816081d858e6c25991d8e2)"



---

archive/issue_comments_541446.json:
```json
{
    "body": "<a id='comment:43'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|\n|[4f08015](https://github.com/sagemath/sagetrac-mirror/commit/4f0801520ef3c01cd2816081d858e6c25991d8e2)|`Define SAGE_SPKG_SCRIPTS in build scripts`|",
    "created_at": "2019-06-21T16:51:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541446",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:43'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|
|[4f08015](https://github.com/sagemath/sagetrac-mirror/commit/4f0801520ef3c01cd2816081d858e6c25991d8e2)|`Define SAGE_SPKG_SCRIPTS in build scripts`|



---

archive/issue_comments_541447.json:
```json
{
    "body": "<a id='comment:44'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------|\n|[18300da](https://github.com/sagemath/sagetrac-mirror/commit/18300dab8505158b6c9d274d0267c719f5a69e99)|`Fix postrm additions`|",
    "created_at": "2019-06-21T20:15:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541447",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:44'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------|
|[18300da](https://github.com/sagemath/sagetrac-mirror/commit/18300dab8505158b6c9d274d0267c719f5a69e99)|`Fix postrm additions`|



---

archive/issue_comments_541448.json:
```json
{
    "body": "Changing commit from \"[4f0801520ef3c01cd2816081d858e6c25991d8e2](https://github.com/sagemath/sagetrac-mirror/commit/4f0801520ef3c01cd2816081d858e6c25991d8e2)\" to \"[18300dab8505158b6c9d274d0267c719f5a69e99](https://github.com/sagemath/sagetrac-mirror/commit/18300dab8505158b6c9d274d0267c719f5a69e99)\"",
    "created_at": "2019-06-21T20:15:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541448",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[4f0801520ef3c01cd2816081d858e6c25991d8e2](https://github.com/sagemath/sagetrac-mirror/commit/4f0801520ef3c01cd2816081d858e6c25991d8e2)" to "[18300dab8505158b6c9d274d0267c719f5a69e99](https://github.com/sagemath/sagetrac-mirror/commit/18300dab8505158b6c9d274d0267c719f5a69e99)"



---

archive/issue_comments_541449.json:
```json
{
    "body": "<a id='comment:45'></a>\nReplying to [embray](#comment%3A36):\n> Regarding the `spkg-postinst`, could you please add a complementary `spkg-postrm` which removes the symlink, if it exists?\n\n\nTook me a while to find my way through this little maze of scripts.\nSeems to work now, the crt symlinks are now removed by the postrm script. Please take a look. \n\nI notice that after `make gcc-clean`, an empty chain of directories `gcc/x86_64-pc-linux-gnu/7.2.0/plugin/include/ada` remains under `$SAGE_LOCAL/lib`.\nI think it's unrelated to this ticket.",
    "created_at": "2019-06-22T00:17:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541449",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:45'></a>
Replying to [embray](#comment%3A36):
> Regarding the `spkg-postinst`, could you please add a complementary `spkg-postrm` which removes the symlink, if it exists?


Took me a while to find my way through this little maze of scripts.
Seems to work now, the crt symlinks are now removed by the postrm script. Please take a look. 

I notice that after `make gcc-clean`, an empty chain of directories `gcc/x86_64-pc-linux-gnu/7.2.0/plugin/include/ada` remains under `$SAGE_LOCAL/lib`.
I think it's unrelated to this ticket.



---

archive/issue_comments_541450.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-06-22T00:17:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541450",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_541451.json:
```json
{
    "body": "<a id='comment:46'></a>\nNeeds review.",
    "created_at": "2019-06-28T17:24:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541451",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:46'></a>
Needs review.



---

archive/issue_comments_541452.json:
```json
{
    "body": "<a id='comment:47'></a>\nI'm confused.  What you used to have as `spkg-postinst` you *renamed* to `spkg-postrm`, which is not what I intended.\n\nIt also now reads:\n\n```\n-spkg-postinst\n\\ No newline at end of file\n+# -*- mode: shell-script -*-\n+\n+# Force re-installation of gmp, mpir, mpfr and mpc with the GCC that we\n+# just built. This is needed in particular because gmp/mpir was first\n+# built without C++ support.\n```\n\nThis script is run *after* you *uninstall* a package, so the comment about \"the GCC that we just built\" can't be accurate (it was accurate for when this was a `postinst` script.\n\nI will have to take more time to actually understand what you're trying to do here.  As it is I believe we are spending too much technical debt on trying to maintain gcc builds for old platforms...",
    "created_at": "2019-07-01T12:27:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541452",
    "user": "https://github.com/embray"
}
```

<a id='comment:47'></a>
I'm confused.  What you used to have as `spkg-postinst` you *renamed* to `spkg-postrm`, which is not what I intended.

It also now reads:

```
-spkg-postinst
\ No newline at end of file
+# -*- mode: shell-script -*-
+
+# Force re-installation of gmp, mpir, mpfr and mpc with the GCC that we
+# just built. This is needed in particular because gmp/mpir was first
+# built without C++ support.
```

This script is run *after* you *uninstall* a package, so the comment about "the GCC that we just built" can't be accurate (it was accurate for when this was a `postinst` script.

I will have to take more time to actually understand what you're trying to do here.  As it is I believe we are spending too much technical debt on trying to maintain gcc builds for old platforms...



---

archive/issue_comments_541453.json:
```json
{
    "body": "<a id='comment:48'></a>\nAlso I wonder if we could base this on top of #21707?  (Not to add additional hurdles to this ticket, as I want to move forward on #21707 ASAP as the number of build-related variables in sage-env-config is starting to get out of hand :)",
    "created_at": "2019-07-01T12:40:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541453",
    "user": "https://github.com/embray"
}
```

<a id='comment:48'></a>
Also I wonder if we could base this on top of #21707?  (Not to add additional hurdles to this ticket, as I want to move forward on #21707 ASAP as the number of build-related variables in sage-env-config is starting to get out of hand :)



---

archive/issue_comments_541454.json:
```json
{
    "body": "Changing commit from \"[18300dab8505158b6c9d274d0267c719f5a69e99](https://github.com/sagemath/sagetrac-mirror/commit/18300dab8505158b6c9d274d0267c719f5a69e99)\" to \"[ff0712125a3d05500a1f77e62c371d695d1a9794](https://github.com/sagemath/sagetrac-mirror/commit/ff0712125a3d05500a1f77e62c371d695d1a9794)\"",
    "created_at": "2019-07-01T12:56:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541454",
    "user": "https://github.com/embray"
}
```

Changing commit from "[18300dab8505158b6c9d274d0267c719f5a69e99](https://github.com/sagemath/sagetrac-mirror/commit/18300dab8505158b6c9d274d0267c719f5a69e99)" to "[ff0712125a3d05500a1f77e62c371d695d1a9794](https://github.com/sagemath/sagetrac-mirror/commit/ff0712125a3d05500a1f77e62c371d695d1a9794)"



---

archive/issue_comments_541455.json:
```json
{
    "body": "Changing branch from \"[u/mkoeppe/building_gcc_7_2_0_fails_on_old_centos___red_hat_linux_systems_because_of_crti_o](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/building_gcc_7_2_0_fails_on_old_centos___red_hat_linux_systems_because_of_crti_o)\" to \"[public/split_sage_env_into_sage_build_env_and_sage_env](https://github.com/sagemath/sagetrac-mirror/tree/public/split_sage_env_into_sage_build_env_and_sage_env)\"",
    "created_at": "2019-07-01T12:56:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541455",
    "user": "https://github.com/embray"
}
```

Changing branch from "[u/mkoeppe/building_gcc_7_2_0_fails_on_old_centos___red_hat_linux_systems_because_of_crti_o](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/building_gcc_7_2_0_fails_on_old_centos___red_hat_linux_systems_because_of_crti_o)" to "[public/split_sage_env_into_sage_build_env_and_sage_env](https://github.com/sagemath/sagetrac-mirror/tree/public/split_sage_env_into_sage_build_env_and_sage_env)"



---

archive/issue_comments_541456.json:
```json
{
    "body": "<a id='comment:49'></a>\nWent ahead and rebased on current develop so it could incorporate all the additional variables we've since added.\n\nI didn't change the name of the script yet; I would still prefer to shorten it but if anyone disagrees we can leave it as-is.\n\n---\nNew commits:\n|                                                                                                                                          |                                                  |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|\n|[a34a9f1](https://github.com/sagemath/sagetrac-mirror/commit/a34a9f1c60297944ef119faafe65342cb9cc6ca2)|`Move sage-dist-helpers from src/bin to build/bin`|\n|[ff07121](https://github.com/sagemath/sagetrac-mirror/commit/ff0712125a3d05500a1f77e62c371d695d1a9794)|`Split out build/bin/sage-build-env-config from sage-env-config`|",
    "created_at": "2019-07-01T12:56:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541456",
    "user": "https://github.com/embray"
}
```

<a id='comment:49'></a>
Went ahead and rebased on current develop so it could incorporate all the additional variables we've since added.

I didn't change the name of the script yet; I would still prefer to shorten it but if anyone disagrees we can leave it as-is.

---
New commits:
|                                                                                                                                          |                                                  |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|
|[a34a9f1](https://github.com/sagemath/sagetrac-mirror/commit/a34a9f1c60297944ef119faafe65342cb9cc6ca2)|`Move sage-dist-helpers from src/bin to build/bin`|
|[ff07121](https://github.com/sagemath/sagetrac-mirror/commit/ff0712125a3d05500a1f77e62c371d695d1a9794)|`Split out build/bin/sage-build-env-config from sage-env-config`|



---

archive/issue_comments_541457.json:
```json
{
    "body": "Changing commit from \"[ff0712125a3d05500a1f77e62c371d695d1a9794](https://github.com/sagemath/sagetrac-mirror/commit/ff0712125a3d05500a1f77e62c371d695d1a9794)\" to \"[18300dab8505158b6c9d274d0267c719f5a69e99](https://github.com/sagemath/sagetrac-mirror/commit/18300dab8505158b6c9d274d0267c719f5a69e99)\"",
    "created_at": "2019-07-01T12:56:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541457",
    "user": "https://github.com/embray"
}
```

Changing commit from "[ff0712125a3d05500a1f77e62c371d695d1a9794](https://github.com/sagemath/sagetrac-mirror/commit/ff0712125a3d05500a1f77e62c371d695d1a9794)" to "[18300dab8505158b6c9d274d0267c719f5a69e99](https://github.com/sagemath/sagetrac-mirror/commit/18300dab8505158b6c9d274d0267c719f5a69e99)"



---

archive/issue_comments_541458.json:
```json
{
    "body": "Changing branch from \"[public/split_sage_env_into_sage_build_env_and_sage_env](https://github.com/sagemath/sagetrac-mirror/tree/public/split_sage_env_into_sage_build_env_and_sage_env)\" to \"[u/mkoeppe/building_gcc_7_2_0_fails_on_old_centos___red_hat_linux_systems_because_of_crti_o](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/building_gcc_7_2_0_fails_on_old_centos___red_hat_linux_systems_because_of_crti_o)\"",
    "created_at": "2019-07-01T12:56:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541458",
    "user": "https://github.com/embray"
}
```

Changing branch from "[public/split_sage_env_into_sage_build_env_and_sage_env](https://github.com/sagemath/sagetrac-mirror/tree/public/split_sage_env_into_sage_build_env_and_sage_env)" to "[u/mkoeppe/building_gcc_7_2_0_fails_on_old_centos___red_hat_linux_systems_because_of_crti_o](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/building_gcc_7_2_0_fails_on_old_centos___red_hat_linux_systems_because_of_crti_o)"



---

archive/issue_comments_541459.json:
```json
{
    "body": "<a id='comment:50'></a>\nAck! Wrong ticket, sorry.\n\n---\nLast 10 new commits:\n|                                                                                                                                          |                                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|\n|[cdf180d](https://github.com/sagemath/sagetrac-mirror/commit/cdf180d3408bce1590afffc893c23e9f87557454)|`LIBRARY_PATH is needed in spkg-install too`|\n|[f57d00c](https://github.com/sagemath/sagetrac-mirror/commit/f57d00c90048a6de34a2ad1e0045be9750a02b39)|`Find SAGE_CRTI_DIR at configure time.`|\n|[73be6cf](https://github.com/sagemath/sagetrac-mirror/commit/73be6cf53f30b53e5a8a3dedf8f30c2c9960475a)|`Symlink crt1.o and friends where gcc can find it`|\n|[d8e9adf](https://github.com/sagemath/sagetrac-mirror/commit/d8e9adf27242e2ad4eca877c9f80b03865c04e42)|`Remove symlinks in postrm`|\n|[cd9a0e8](https://github.com/sagemath/sagetrac-mirror/commit/cd9a0e88aabf85d555b2062f9b25b8270ca48024)|`Fixup`|\n|[9e3da9b](https://github.com/sagemath/sagetrac-mirror/commit/9e3da9b5f00b872cf50121b70f635498db1c22ec)|`Fix up`|\n|[a04ea6b](https://github.com/sagemath/sagetrac-mirror/commit/a04ea6bb6fc02a21b74b9b4421eaaa9f6604a63f)|`Fix up`|\n|[0558eef](https://github.com/sagemath/sagetrac-mirror/commit/0558eef992198c4e1074b96c719be7c702c75152)|`Fix up`|\n|[4f08015](https://github.com/sagemath/sagetrac-mirror/commit/4f0801520ef3c01cd2816081d858e6c25991d8e2)|`Define SAGE_SPKG_SCRIPTS in build scripts`|\n|[18300da](https://github.com/sagemath/sagetrac-mirror/commit/18300dab8505158b6c9d274d0267c719f5a69e99)|`Fix postrm additions`|",
    "created_at": "2019-07-01T12:56:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541459",
    "user": "https://github.com/embray"
}
```

<a id='comment:50'></a>
Ack! Wrong ticket, sorry.

---
Last 10 new commits:
|                                                                                                                                          |                                            |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|
|[cdf180d](https://github.com/sagemath/sagetrac-mirror/commit/cdf180d3408bce1590afffc893c23e9f87557454)|`LIBRARY_PATH is needed in spkg-install too`|
|[f57d00c](https://github.com/sagemath/sagetrac-mirror/commit/f57d00c90048a6de34a2ad1e0045be9750a02b39)|`Find SAGE_CRTI_DIR at configure time.`|
|[73be6cf](https://github.com/sagemath/sagetrac-mirror/commit/73be6cf53f30b53e5a8a3dedf8f30c2c9960475a)|`Symlink crt1.o and friends where gcc can find it`|
|[d8e9adf](https://github.com/sagemath/sagetrac-mirror/commit/d8e9adf27242e2ad4eca877c9f80b03865c04e42)|`Remove symlinks in postrm`|
|[cd9a0e8](https://github.com/sagemath/sagetrac-mirror/commit/cd9a0e88aabf85d555b2062f9b25b8270ca48024)|`Fixup`|
|[9e3da9b](https://github.com/sagemath/sagetrac-mirror/commit/9e3da9b5f00b872cf50121b70f635498db1c22ec)|`Fix up`|
|[a04ea6b](https://github.com/sagemath/sagetrac-mirror/commit/a04ea6bb6fc02a21b74b9b4421eaaa9f6604a63f)|`Fix up`|
|[0558eef](https://github.com/sagemath/sagetrac-mirror/commit/0558eef992198c4e1074b96c719be7c702c75152)|`Fix up`|
|[4f08015](https://github.com/sagemath/sagetrac-mirror/commit/4f0801520ef3c01cd2816081d858e6c25991d8e2)|`Define SAGE_SPKG_SCRIPTS in build scripts`|
|[18300da](https://github.com/sagemath/sagetrac-mirror/commit/18300dab8505158b6c9d274d0267c719f5a69e99)|`Fix postrm additions`|



---

archive/issue_events_078404.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "rename": {
        "from": "Building gcc 7.2.0 fails on old CentOS / Red Hat Linux systems because of crti.o",
        "to": "Building gcc 7.2.0 fails on CentOS / Red Hat / Fedora Linux systems because of crti.o"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27907#event-78404"
}
```



---

archive/issue_comments_541460.json:
```json
{
    "body": "<a id='comment:51'></a>\nOn fedora 30 (gcc 9) I'm also getting\n\n```\n[gcc-7.2.0] /home/buildbot-sage/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas39/local/var/tmp/sage/build/gcc-7.2.0/gcc-build/./gcc/xgcc -B/home/buildbot-sage/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas39/local/var/tmp/sage/build/gcc-7.2.0/gcc-build/./gcc/ -B/home/buildbot-sage/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas39/local/x86_64-pc-linux-gnu/bin/ -B/home/buildbot-sage/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas39/local/x86_64-pc-linux-gnu/lib/ -isystem /home/buildbot-sage/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas39/local/x86_64-pc-linux-gnu/include -isystem /home/buildbot-sage/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas39/local/x86_64-pc-linux-gnu/sys-include    -O2  -g -O2 -DIN_GCC    -W -Wall -Wno-narrowing -Wwrite-strings -Wcast-qual -Wno-format -Wstrict-prototypes -Wmissing-prototypes -Wold-style-definition  -isystem ./include   -fpic -mlong-double-80 -DUSE_ELF_SYMVER -g -DIN_LIBGCC2 -fbuilding-libgcc -fno-stack-protector  -shared -nodefaultlibs -Wl,--soname=libgcc_s.so.1 -Wl,--version-script=libgcc.map -o ./libgcc_s.so.1.tmp -g -O2 -B./ _muldi3_s.o _negdi2_s.o _lshrdi3_s.o _ashldi3_s.o _ashrdi3_s.o _cmpdi2_s.o _ucmpdi2_s.o _clear_cache_s.o _trampoline_s.o __main_s.o _absvsi2_s.o _absvdi2_s.o _addvsi3_s.o _addvdi3_s.o _subvsi3_s.o _subvdi3_s.o _mulvsi3_s.o _mulvdi3_s.o _negvsi2_s.o _negvdi2_s.o _ctors_s.o _ffssi2_s.o _ffsdi2_s.o _clz_s.o _clzsi2_s.o _clzdi2_s.o _ctzsi2_s.o _ctzdi2_s.o _popcount_tab_s.o _popcountsi2_s.o _popcountdi2_s.o _paritysi2_s.o _paritydi2_s.o _powisf2_s.o _powidf2_s.o _powixf2_s.o _mulhc3_s.o _mulsc3_s.o _muldc3_s.o _mulxc3_s.o _divhc3_s.o _divsc3_s.o _divdc3_s.o _divxc3_s.o _bswapsi2_s.o _bswapdi2_s.o _clrsbsi2_s.o _clrsbdi2_s.o _fixunssfsi_s.o _fixunsdfsi_s.o _fixunsxfsi_s.o _fixsfdi_s.o _fixdfdi_s.o _fixxfdi_s.o _fixunssfdi_s.o _fixunsdfdi_s.o _fixunsxfdi_s.o _floatdisf_s.o _floatdidf_s.o _floatdixf_s.o _floatundisf_s.o _floatundidf_s.o _floatundixf_s.o _divdi3_s.o _moddi3_s.o _divmoddi4_s.o _udivdi3_s.o _umoddi3_s.o _udivmoddi4_s.o _udiv_w_sdiv_s.o cpuinfo_s.o sfp-exceptions_s.o addtf3_s.o divtf3_s.o multf3_s.o negtf2_s.o subtf3_s.o unordtf2_s.o fixtfsi_s.o fixunstfsi_s.o floatsitf_s.o floatunsitf_s.o fixtfdi_s.o fixunstfdi_s.o floatditf_s.o floatunditf_s.o fixtfti_s.o fixunstfti_s.o floattitf_s.o floatuntitf_s.o extendsftf2_s.o extenddftf2_s.o extendxftf2_s.o trunctfsf2_s.o trunctfdf2_s.o trunctfxf2_s.o getf2_s.o letf2_s.o eqtf2_s.o _divtc3_s.o _multc3_s.o _powitf2_s.o enable-execute-stack_s.o unwind-dw2_s.o unwind-dw2-fde-dip_s.o unwind-sjlj_s.o unwind-c_s.o emutls_s.o libgcc.a -lc && rm -f ./libgcc_s.so && if [ -f ./libgcc_s.so.1 ]; then mv -f ./libgcc_s.so.1 ./libgcc_s.so.1.backup; else true; fi && mv ./libgcc_s.so.1.tmp ./libgcc_s.so.1 && (echo \"/* GNU ld script\"; echo \"   Use the shared library, but some functions are only in\"; echo \"   the static library.  */\"; echo \"GROUP ( libgcc_s.so.1 -lgcc )\" ) > ./libgcc_s.so\n[gcc-7.2.0] /usr/bin/ld: cannot find crti.o: No such file or directory\n[gcc-7.2.0] collect2: error: ld returned 1 exit status\n[gcc-7.2.0] make[9]: *** [Makefile:982: libgcc_s.so] Error 1\n```\nFor the record, its `/lib64/crti.o`\n\n```\n[release@zen Sage]$ cc -print-file-name=crti.o\n/usr/lib/gcc/x86_64-redhat-linux/9/../../../../lib64/crti.o\n```",
    "created_at": "2019-07-01T18:19:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541460",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:51'></a>
On fedora 30 (gcc 9) I'm also getting

```
[gcc-7.2.0] /home/buildbot-sage/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas39/local/var/tmp/sage/build/gcc-7.2.0/gcc-build/./gcc/xgcc -B/home/buildbot-sage/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas39/local/var/tmp/sage/build/gcc-7.2.0/gcc-build/./gcc/ -B/home/buildbot-sage/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas39/local/x86_64-pc-linux-gnu/bin/ -B/home/buildbot-sage/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas39/local/x86_64-pc-linux-gnu/lib/ -isystem /home/buildbot-sage/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas39/local/x86_64-pc-linux-gnu/include -isystem /home/buildbot-sage/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas39/local/x86_64-pc-linux-gnu/sys-include    -O2  -g -O2 -DIN_GCC    -W -Wall -Wno-narrowing -Wwrite-strings -Wcast-qual -Wno-format -Wstrict-prototypes -Wmissing-prototypes -Wold-style-definition  -isystem ./include   -fpic -mlong-double-80 -DUSE_ELF_SYMVER -g -DIN_LIBGCC2 -fbuilding-libgcc -fno-stack-protector  -shared -nodefaultlibs -Wl,--soname=libgcc_s.so.1 -Wl,--version-script=libgcc.map -o ./libgcc_s.so.1.tmp -g -O2 -B./ _muldi3_s.o _negdi2_s.o _lshrdi3_s.o _ashldi3_s.o _ashrdi3_s.o _cmpdi2_s.o _ucmpdi2_s.o _clear_cache_s.o _trampoline_s.o __main_s.o _absvsi2_s.o _absvdi2_s.o _addvsi3_s.o _addvdi3_s.o _subvsi3_s.o _subvdi3_s.o _mulvsi3_s.o _mulvdi3_s.o _negvsi2_s.o _negvdi2_s.o _ctors_s.o _ffssi2_s.o _ffsdi2_s.o _clz_s.o _clzsi2_s.o _clzdi2_s.o _ctzsi2_s.o _ctzdi2_s.o _popcount_tab_s.o _popcountsi2_s.o _popcountdi2_s.o _paritysi2_s.o _paritydi2_s.o _powisf2_s.o _powidf2_s.o _powixf2_s.o _mulhc3_s.o _mulsc3_s.o _muldc3_s.o _mulxc3_s.o _divhc3_s.o _divsc3_s.o _divdc3_s.o _divxc3_s.o _bswapsi2_s.o _bswapdi2_s.o _clrsbsi2_s.o _clrsbdi2_s.o _fixunssfsi_s.o _fixunsdfsi_s.o _fixunsxfsi_s.o _fixsfdi_s.o _fixdfdi_s.o _fixxfdi_s.o _fixunssfdi_s.o _fixunsdfdi_s.o _fixunsxfdi_s.o _floatdisf_s.o _floatdidf_s.o _floatdixf_s.o _floatundisf_s.o _floatundidf_s.o _floatundixf_s.o _divdi3_s.o _moddi3_s.o _divmoddi4_s.o _udivdi3_s.o _umoddi3_s.o _udivmoddi4_s.o _udiv_w_sdiv_s.o cpuinfo_s.o sfp-exceptions_s.o addtf3_s.o divtf3_s.o multf3_s.o negtf2_s.o subtf3_s.o unordtf2_s.o fixtfsi_s.o fixunstfsi_s.o floatsitf_s.o floatunsitf_s.o fixtfdi_s.o fixunstfdi_s.o floatditf_s.o floatunditf_s.o fixtfti_s.o fixunstfti_s.o floattitf_s.o floatuntitf_s.o extendsftf2_s.o extenddftf2_s.o extendxftf2_s.o trunctfsf2_s.o trunctfdf2_s.o trunctfxf2_s.o getf2_s.o letf2_s.o eqtf2_s.o _divtc3_s.o _multc3_s.o _powitf2_s.o enable-execute-stack_s.o unwind-dw2_s.o unwind-dw2-fde-dip_s.o unwind-sjlj_s.o unwind-c_s.o emutls_s.o libgcc.a -lc && rm -f ./libgcc_s.so && if [ -f ./libgcc_s.so.1 ]; then mv -f ./libgcc_s.so.1 ./libgcc_s.so.1.backup; else true; fi && mv ./libgcc_s.so.1.tmp ./libgcc_s.so.1 && (echo "/* GNU ld script"; echo "   Use the shared library, but some functions are only in"; echo "   the static library.  */"; echo "GROUP ( libgcc_s.so.1 -lgcc )" ) > ./libgcc_s.so
[gcc-7.2.0] /usr/bin/ld: cannot find crti.o: No such file or directory
[gcc-7.2.0] collect2: error: ld returned 1 exit status
[gcc-7.2.0] make[9]: *** [Makefile:982: libgcc_s.so] Error 1
```
For the record, its `/lib64/crti.o`

```
[release@zen Sage]$ cc -print-file-name=crti.o
/usr/lib/gcc/x86_64-redhat-linux/9/../../../../lib64/crti.o
```



---

archive/issue_comments_541461.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-On various Linux systems with old compilers, building gcc 7.2.0 fails because crti.o is not found.\n+On various Linux systemswith old compilers, building gcc 7.2.0 fails because crti.o is not found.\n \n Reported for Red Hat 6.10 at https://groups.google.com/d/msg/sage-devel/ze5SzgXZAgk/tai9F4flBQAJ\n \n``````\n",
    "created_at": "2019-07-01T18:19:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541461",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-On various Linux systems with old compilers, building gcc 7.2.0 fails because crti.o is not found.
+On various Linux systemswith old compilers, building gcc 7.2.0 fails because crti.o is not found.
 
 Reported for Red Hat 6.10 at https://groups.google.com/d/msg/sage-devel/ze5SzgXZAgk/tai9F4flBQAJ
 
``````




---

archive/issue_comments_541462.json:
```json
{
    "body": "<a id='comment:52'></a>\nReplying to [vbraun](#comment%3A51):\n> On fedora 30 (gcc 9) I'm also getting\n> \n> ```\n> [gcc-7.2.0] /home/buildbot-sage/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas39/local/var/tmp/sage/build/gcc-7.2.0/gcc-build/./gcc/xgcc -B/home/buildbot-sage/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas39/local/var/tmp/sage/build/gcc-7.2.0/gcc-build/./gcc/ -B/home/buildbot-sage/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas39/local/x86_64-pc-linux-gnu/bin/ -B/home/buildbot-sage/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas39/local/x86_64-pc-linux-gnu/lib/ -isystem /home/buildbot-sage/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas39/local/x86_64-pc-linux-gnu/include -isystem /home/buildbot-sage/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas39/local/x86_64-pc-linux-gnu/sys-include    -O2  -g -O2 -DIN_GCC    -W -Wall -Wno-narrowing -Wwrite-strings -Wcast-qual -Wno-format -Wstrict-prototypes -Wmissing-prototypes -Wold-style-definition  -isystem ./include   -fpic -mlong-double-80 -DUSE_ELF_SYMVER -g -DIN_LIBGCC2 -fbuilding-libgcc -fno-stack-protector  -shared -nodefaultlibs -Wl,--soname=libgcc_s.so.1 -Wl,--version-script=libgcc.map -o ./libgcc_s.so.1.tmp -g -O2 -B./ _muldi3_s.o _negdi2_s.o _lshrdi3_s.o _ashldi3_s.o _ashrdi3_s.o _cmpdi2_s.o _ucmpdi2_s.o _clear_cache_s.o _trampoline_s.o __main_s.o _absvsi2_s.o _absvdi2_s.o _addvsi3_s.o _addvdi3_s.o _subvsi3_s.o _subvdi3_s.o _mulvsi3_s.o _mulvdi3_s.o _negvsi2_s.o _negvdi2_s.o _ctors_s.o _ffssi2_s.o _ffsdi2_s.o _clz_s.o _clzsi2_s.o _clzdi2_s.o _ctzsi2_s.o _ctzdi2_s.o _popcount_tab_s.o _popcountsi2_s.o _popcountdi2_s.o _paritysi2_s.o _paritydi2_s.o _powisf2_s.o _powidf2_s.o _powixf2_s.o _mulhc3_s.o _mulsc3_s.o _muldc3_s.o _mulxc3_s.o _divhc3_s.o _divsc3_s.o _divdc3_s.o _divxc3_s.o _bswapsi2_s.o _bswapdi2_s.o _clrsbsi2_s.o _clrsbdi2_s.o _fixunssfsi_s.o _fixunsdfsi_s.o _fixunsxfsi_s.o _fixsfdi_s.o _fixdfdi_s.o _fixxfdi_s.o _fixunssfdi_s.o _fixunsdfdi_s.o _fixunsxfdi_s.o _floatdisf_s.o _floatdidf_s.o _floatdixf_s.o _floatundisf_s.o _floatundidf_s.o _floatundixf_s.o _divdi3_s.o _moddi3_s.o _divmoddi4_s.o _udivdi3_s.o _umoddi3_s.o _udivmoddi4_s.o _udiv_w_sdiv_s.o cpuinfo_s.o sfp-exceptions_s.o addtf3_s.o divtf3_s.o multf3_s.o negtf2_s.o subtf3_s.o unordtf2_s.o fixtfsi_s.o fixunstfsi_s.o floatsitf_s.o floatunsitf_s.o fixtfdi_s.o fixunstfdi_s.o floatditf_s.o floatunditf_s.o fixtfti_s.o fixunstfti_s.o floattitf_s.o floatuntitf_s.o extendsftf2_s.o extenddftf2_s.o extendxftf2_s.o trunctfsf2_s.o trunctfdf2_s.o trunctfxf2_s.o getf2_s.o letf2_s.o eqtf2_s.o _divtc3_s.o _multc3_s.o _powitf2_s.o enable-execute-stack_s.o unwind-dw2_s.o unwind-dw2-fde-dip_s.o unwind-sjlj_s.o unwind-c_s.o emutls_s.o libgcc.a -lc && rm -f ./libgcc_s.so && if [ -f ./libgcc_s.so.1 ]; then mv -f ./libgcc_s.so.1 ./libgcc_s.so.1.backup; else true; fi && mv ./libgcc_s.so.1.tmp ./libgcc_s.so.1 && (echo \"/* GNU ld script\"; echo \"   Use the shared library, but some functions are only in\"; echo \"   the static library.  */\"; echo \"GROUP ( libgcc_s.so.1 -lgcc )\" ) > ./libgcc_s.so\n> [gcc-7.2.0] /usr/bin/ld: cannot find crti.o: No such file or directory\n> [gcc-7.2.0] collect2: error: ld returned 1 exit status\n> [gcc-7.2.0] make[9]: *** [Makefile:982: libgcc_s.so] Error 1\n> ```\n> For the record, its `/lib64/crti.o`\n> \n> ```\n> [release@zen Sage]$ cc -print-file-name=crti.o\n> /usr/lib/gcc/x86_64-redhat-linux/9/../../../../lib64/crti.o\n> ```\n\nHas `CRTI_DIR` been set correctly in `src/bin/sage-env-config` on this system?",
    "created_at": "2019-07-01T18:25:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541462",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:52'></a>
Replying to [vbraun](#comment%3A51):
> On fedora 30 (gcc 9) I'm also getting
> 
> ```
> [gcc-7.2.0] /home/buildbot-sage/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas39/local/var/tmp/sage/build/gcc-7.2.0/gcc-build/./gcc/xgcc -B/home/buildbot-sage/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas39/local/var/tmp/sage/build/gcc-7.2.0/gcc-build/./gcc/ -B/home/buildbot-sage/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas39/local/x86_64-pc-linux-gnu/bin/ -B/home/buildbot-sage/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas39/local/x86_64-pc-linux-gnu/lib/ -isystem /home/buildbot-sage/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas39/local/x86_64-pc-linux-gnu/include -isystem /home/buildbot-sage/slave/binary_pkg/build/source/SageMath/jc4b6yulaujayb9sr94ia88eourzeqip0oidmas39/local/x86_64-pc-linux-gnu/sys-include    -O2  -g -O2 -DIN_GCC    -W -Wall -Wno-narrowing -Wwrite-strings -Wcast-qual -Wno-format -Wstrict-prototypes -Wmissing-prototypes -Wold-style-definition  -isystem ./include   -fpic -mlong-double-80 -DUSE_ELF_SYMVER -g -DIN_LIBGCC2 -fbuilding-libgcc -fno-stack-protector  -shared -nodefaultlibs -Wl,--soname=libgcc_s.so.1 -Wl,--version-script=libgcc.map -o ./libgcc_s.so.1.tmp -g -O2 -B./ _muldi3_s.o _negdi2_s.o _lshrdi3_s.o _ashldi3_s.o _ashrdi3_s.o _cmpdi2_s.o _ucmpdi2_s.o _clear_cache_s.o _trampoline_s.o __main_s.o _absvsi2_s.o _absvdi2_s.o _addvsi3_s.o _addvdi3_s.o _subvsi3_s.o _subvdi3_s.o _mulvsi3_s.o _mulvdi3_s.o _negvsi2_s.o _negvdi2_s.o _ctors_s.o _ffssi2_s.o _ffsdi2_s.o _clz_s.o _clzsi2_s.o _clzdi2_s.o _ctzsi2_s.o _ctzdi2_s.o _popcount_tab_s.o _popcountsi2_s.o _popcountdi2_s.o _paritysi2_s.o _paritydi2_s.o _powisf2_s.o _powidf2_s.o _powixf2_s.o _mulhc3_s.o _mulsc3_s.o _muldc3_s.o _mulxc3_s.o _divhc3_s.o _divsc3_s.o _divdc3_s.o _divxc3_s.o _bswapsi2_s.o _bswapdi2_s.o _clrsbsi2_s.o _clrsbdi2_s.o _fixunssfsi_s.o _fixunsdfsi_s.o _fixunsxfsi_s.o _fixsfdi_s.o _fixdfdi_s.o _fixxfdi_s.o _fixunssfdi_s.o _fixunsdfdi_s.o _fixunsxfdi_s.o _floatdisf_s.o _floatdidf_s.o _floatdixf_s.o _floatundisf_s.o _floatundidf_s.o _floatundixf_s.o _divdi3_s.o _moddi3_s.o _divmoddi4_s.o _udivdi3_s.o _umoddi3_s.o _udivmoddi4_s.o _udiv_w_sdiv_s.o cpuinfo_s.o sfp-exceptions_s.o addtf3_s.o divtf3_s.o multf3_s.o negtf2_s.o subtf3_s.o unordtf2_s.o fixtfsi_s.o fixunstfsi_s.o floatsitf_s.o floatunsitf_s.o fixtfdi_s.o fixunstfdi_s.o floatditf_s.o floatunditf_s.o fixtfti_s.o fixunstfti_s.o floattitf_s.o floatuntitf_s.o extendsftf2_s.o extenddftf2_s.o extendxftf2_s.o trunctfsf2_s.o trunctfdf2_s.o trunctfxf2_s.o getf2_s.o letf2_s.o eqtf2_s.o _divtc3_s.o _multc3_s.o _powitf2_s.o enable-execute-stack_s.o unwind-dw2_s.o unwind-dw2-fde-dip_s.o unwind-sjlj_s.o unwind-c_s.o emutls_s.o libgcc.a -lc && rm -f ./libgcc_s.so && if [ -f ./libgcc_s.so.1 ]; then mv -f ./libgcc_s.so.1 ./libgcc_s.so.1.backup; else true; fi && mv ./libgcc_s.so.1.tmp ./libgcc_s.so.1 && (echo "/* GNU ld script"; echo "   Use the shared library, but some functions are only in"; echo "   the static library.  */"; echo "GROUP ( libgcc_s.so.1 -lgcc )" ) > ./libgcc_s.so
> [gcc-7.2.0] /usr/bin/ld: cannot find crti.o: No such file or directory
> [gcc-7.2.0] collect2: error: ld returned 1 exit status
> [gcc-7.2.0] make[9]: *** [Makefile:982: libgcc_s.so] Error 1
> ```
> For the record, its `/lib64/crti.o`
> 
> ```
> [release@zen Sage]$ cc -print-file-name=crti.o
> /usr/lib/gcc/x86_64-redhat-linux/9/../../../../lib64/crti.o
> ```

Has `CRTI_DIR` been set correctly in `src/bin/sage-env-config` on this system?



---

archive/issue_comments_541463.json:
```json
{
    "body": "<a id='comment:53'></a>\nReplying to [embray](#comment%3A47):\n> I'm confused.  What you used to have as `spkg-postinst` you *renamed* to `spkg-postrm`, which is not what I intended.\n\n\nBefore this ticket, `spkg-postrm` was a symlink to `spkg-postinst`. \nIn both `spkg-postrm` and `spkg-postinst`, the same actions (trigger uninstalls, reconfigure) are taken.\n\nI added additional things to the front of `spkg-postinst`.\n\n(The diff does not show this very well.)",
    "created_at": "2019-07-01T18:29:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541463",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:53'></a>
Replying to [embray](#comment%3A47):
> I'm confused.  What you used to have as `spkg-postinst` you *renamed* to `spkg-postrm`, which is not what I intended.


Before this ticket, `spkg-postrm` was a symlink to `spkg-postinst`. 
In both `spkg-postrm` and `spkg-postinst`, the same actions (trigger uninstalls, reconfigure) are taken.

I added additional things to the front of `spkg-postinst`.

(The diff does not show this very well.)



---

archive/issue_comments_541464.json:
```json
{
    "body": "<a id='comment:54'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|\n|[8ed2677](https://github.com/sagemath/sagetrac-mirror/commit/8ed2677d73e1222c6c84e187a0772221d52946ca)|`build/pkgs/gcc/spkg-postrm: Update comments`|",
    "created_at": "2019-07-01T18:34:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541464",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:54'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|
|[8ed2677](https://github.com/sagemath/sagetrac-mirror/commit/8ed2677d73e1222c6c84e187a0772221d52946ca)|`build/pkgs/gcc/spkg-postrm: Update comments`|



---

archive/issue_comments_541465.json:
```json
{
    "body": "Changing commit from \"[18300dab8505158b6c9d274d0267c719f5a69e99](https://github.com/sagemath/sagetrac-mirror/commit/18300dab8505158b6c9d274d0267c719f5a69e99)\" to \"[8ed2677d73e1222c6c84e187a0772221d52946ca](https://github.com/sagemath/sagetrac-mirror/commit/8ed2677d73e1222c6c84e187a0772221d52946ca)\"",
    "created_at": "2019-07-01T18:34:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541465",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[18300dab8505158b6c9d274d0267c719f5a69e99](https://github.com/sagemath/sagetrac-mirror/commit/18300dab8505158b6c9d274d0267c719f5a69e99)" to "[8ed2677d73e1222c6c84e187a0772221d52946ca](https://github.com/sagemath/sagetrac-mirror/commit/8ed2677d73e1222c6c84e187a0772221d52946ca)"



---

archive/issue_comments_541466.json:
```json
{
    "body": "<a id='comment:55'></a>\nReplying to [embray](#comment%3A47):\n> [...] `spkg-postrm`  [...] is run *after* you *uninstall* a package, so the comment about \"the GCC that we just built\" can't be accurate\n\n\nI have updated the explanation in `spkg-postrm`.\n(Actually, in the `spkg-postrm` situation, I don't know why `--keep-files` would be used; but it's beyond the scope of this ticket to change it.)",
    "created_at": "2019-07-01T18:37:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541466",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:55'></a>
Replying to [embray](#comment%3A47):
> [...] `spkg-postrm`  [...] is run *after* you *uninstall* a package, so the comment about "the GCC that we just built" can't be accurate


I have updated the explanation in `spkg-postrm`.
(Actually, in the `spkg-postrm` situation, I don't know why `--keep-files` would be used; but it's beyond the scope of this ticket to change it.)



---

archive/issue_comments_541467.json:
```json
{
    "body": "<a id='comment:56'></a>\nGot it--this is starting to make sense to me now.  The part where you actually *modify* the the postrm script on the fly is interesting: That was not an explicitly supported use case, so it makes me a little nervous (since it means now we *do* have to support that), but if it works it works.\n\nIf for some reason we need to change things such that it would not be easy to support this usage, I believe a different solution could be found.",
    "created_at": "2019-07-02T12:08:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541467",
    "user": "https://github.com/embray"
}
```

<a id='comment:56'></a>
Got it--this is starting to make sense to me now.  The part where you actually *modify* the the postrm script on the fly is interesting: That was not an explicitly supported use case, so it makes me a little nervous (since it means now we *do* have to support that), but if it works it works.

If for some reason we need to change things such that it would not be easy to support this usage, I believe a different solution could be found.



---

archive/issue_comments_541468.json:
```json
{
    "body": "<a id='comment:57'></a>\nMoving tickets from the Sage 8.8 milestone that have been actively worked on in the last six months to the next release milestone (optimistically).",
    "created_at": "2019-07-03T11:37:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541468",
    "user": "https://github.com/embray"
}
```

<a id='comment:57'></a>
Moving tickets from the Sage 8.8 milestone that have been actively worked on in the last six months to the next release milestone (optimistically).



---

archive/issue_events_078405.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-07-03T11:37:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27907#event-78405"
}
```



---

archive/issue_comments_541469.json:
```json
{
    "body": "<a id='comment:58'></a>\nI would just unconditionally delete `*crt?.o` in the postrm script, more predictable and fewer moving parts. But either way is imho an acceptable solution, unless Eric objects I'm going to go ahead with this ticket....",
    "created_at": "2019-07-05T12:11:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541469",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:58'></a>
I would just unconditionally delete `*crt?.o` in the postrm script, more predictable and fewer moving parts. But either way is imho an acceptable solution, unless Eric objects I'm going to go ahead with this ticket....



---

archive/issue_comments_541470.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-07-18T07:13:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541470",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_541471.json:
```json
{
    "body": "Reviewer: Volker Braun",
    "created_at": "2019-07-18T11:16:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541471",
    "user": "https://github.com/fchapoton"
}
```

Reviewer: Volker Braun



---

archive/issue_comments_541472.json:
```json
{
    "body": "Changing branch from \"[u/mkoeppe/building_gcc_7_2_0_fails_on_old_centos___red_hat_linux_systems_because_of_crti_o](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/building_gcc_7_2_0_fails_on_old_centos___red_hat_linux_systems_because_of_crti_o)\" to \"[8ed2677d73e1222c6c84e187a0772221d52946ca](https://github.com/sagemath/sagetrac-mirror/commit/8ed2677d73e1222c6c84e187a0772221d52946ca)\"",
    "created_at": "2019-07-20T09:11:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541472",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "[u/mkoeppe/building_gcc_7_2_0_fails_on_old_centos___red_hat_linux_systems_because_of_crti_o](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/building_gcc_7_2_0_fails_on_old_centos___red_hat_linux_systems_because_of_crti_o)" to "[8ed2677d73e1222c6c84e187a0772221d52946ca](https://github.com/sagemath/sagetrac-mirror/commit/8ed2677d73e1222c6c84e187a0772221d52946ca)"



---

archive/issue_events_078406.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-07-20T09:11:04Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27907#event-78406"
}
```



---

archive/issue_comments_541473.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-07-20T09:11:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541473",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_541474.json:
```json
{
    "body": "Changing commit from \"[8ed2677d73e1222c6c84e187a0772221d52946ca](https://github.com/sagemath/sagetrac-mirror/commit/8ed2677d73e1222c6c84e187a0772221d52946ca)\" to \"\"",
    "created_at": "2019-08-02T17:37:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541474",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "[8ed2677d73e1222c6c84e187a0772221d52946ca](https://github.com/sagemath/sagetrac-mirror/commit/8ed2677d73e1222c6c84e187a0772221d52946ca)" to ""



---

archive/issue_comments_541475.json:
```json
{
    "body": "<a id='comment:62'></a>\n`@`stumpc5 Merged in 8.9.beta4, please test",
    "created_at": "2019-08-02T17:37:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27907",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27907#issuecomment-541475",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:62'></a>
`@`stumpc5 Merged in 8.9.beta4, please test
