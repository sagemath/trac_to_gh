# Issue 27182: spkg-configure.m4 for bzip2

archive/issues_026945.json:
```json
{
    "body": "Spun off from #27168.\n\nKeywords: spkg-configure\n\nReviewer: Dima Pasechnik\n\nAuthor: Erik Bray, Dima Pasechnik\n\nBranch: 4ec5dc0850c9ae65cf40d5dc53896ca8028c5203\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/27182\n\n",
    "closed_at": "2019-02-05T16:57:48Z",
    "created_at": "2019-01-31T13:13:48Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.7",
    "title": "spkg-configure.m4 for bzip2",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27182",
    "user": "https://github.com/embray"
}
```
Spun off from #27168.

Keywords: spkg-configure

Reviewer: Dima Pasechnik

Author: Erik Bray, Dima Pasechnik

Branch: 4ec5dc0850c9ae65cf40d5dc53896ca8028c5203

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/27182





---

archive/issue_comments_522937.json:
```json
{
    "body": "<a id='comment:1'></a>This also reminds me, we probably should add a section in the installation docs (especially for Linux) listing optional `-devel` packages that should be installed in order to take advantage of supported system packages where possible.",
    "created_at": "2019-01-31T13:14:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27182#issuecomment-522937",
    "user": "https://github.com/embray"
}
```

<a id='comment:1'></a>This also reminds me, we probably should add a section in the installation docs (especially for Linux) listing optional `-devel` packages that should be installed in order to take advantage of supported system packages where possible.



---

archive/issue_comments_522938.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-01-31T13:14:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27182#issuecomment-522938",
    "user": "https://github.com/embray"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_522939.json:
```json
{
    "body": "<a id='comment:2'></a>For testing tickets like this it's best to start from a fresh install, since otherwise I think, even if the `./configure` script now detects your system's bzip2, it's not like it will *uninstall* the package already installed spkg.",
    "created_at": "2019-01-31T13:28:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27182#issuecomment-522939",
    "user": "https://github.com/embray"
}
```

<a id='comment:2'></a>For testing tickets like this it's best to start from a fresh install, since otherwise I think, even if the `./configure` script now detects your system's bzip2, it's not like it will *uninstall* the package already installed spkg.



---

archive/issue_comments_522940.json:
```json
{
    "body": "<a id='comment:3'></a>Tested a fresh build and `ptestlong` with my system's bzip2 (also 1.0.6).  Actually, I think this software's creator has stopped maintaining it.  There was some discussion about that a bit ago on the Cygwin mailing list IIRC.",
    "created_at": "2019-01-31T14:04:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27182#issuecomment-522940",
    "user": "https://github.com/embray"
}
```

<a id='comment:3'></a>Tested a fresh build and `ptestlong` with my system's bzip2 (also 1.0.6).  Actually, I think this software's creator has stopped maintaining it.  There was some discussion about that a bit ago on the Cygwin mailing list IIRC.



---

archive/issue_comments_522941.json:
```json
{
    "body": "<a id='comment:4'></a>the branch does not seem to contain spkg-configure.m4 :-)\n(at least using the trac view)\n\nNo, it's just not there. Forgotten commit?",
    "created_at": "2019-01-31T14:30:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27182#issuecomment-522941",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:4'></a>the branch does not seem to contain spkg-configure.m4 :-)
(at least using the trac view)

No, it's just not there. Forgotten commit?



---

archive/issue_comments_522942.json:
```json
{
    "body": "<a id='comment:5'></a>![](https://pbs.twimg.com/media/DyPGJFhVsAA9diM.jpg)https://twitter.com/JordanHawker/status/1090933555067158529",
    "created_at": "2019-01-31T14:36:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27182#issuecomment-522942",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:5'></a>![](https://pbs.twimg.com/media/DyPGJFhVsAA9diM.jpg)https://twitter.com/JordanHawker/status/1090933555067158529



---

archive/issue_comments_522943.json:
```json
{
    "body": "<a id='comment:6'></a>Lol. Must be a forgotten `git add`.",
    "created_at": "2019-01-31T14:58:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27182#issuecomment-522943",
    "user": "https://github.com/embray"
}
```

<a id='comment:6'></a>Lol. Must be a forgotten `git add`.



---

archive/issue_comments_522944.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-01-31T15:01:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27182#issuecomment-522944",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_522945.json:
```json
{
    "body": "Changing commit from \"0cb494282d7b4cea50aba7f4d100e7932a4c00b1\" to \"4ec5dc0850c9ae65cf40d5dc53896ca8028c5203\"",
    "created_at": "2019-01-31T15:01:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27182#issuecomment-522945",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "0cb494282d7b4cea50aba7f4d100e7932a4c00b1" to "4ec5dc0850c9ae65cf40d5dc53896ca8028c5203"



---

archive/issue_comments_522946.json:
```json
{
    "body": "<a id='comment:8'></a>looks good to me. See #27212 for ditto for GMP, by the way.",
    "created_at": "2019-02-04T04:37:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27182#issuecomment-522946",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:8'></a>looks good to me. See #27212 for ditto for GMP, by the way.



---

archive/issue_comments_522947.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Dima Pasechnik\"",
    "created_at": "2019-02-04T04:38:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27182#issuecomment-522947",
    "user": "https://github.com/dimpase"
}
```

Changing reviewer from "" to "Dima Pasechnik"



---

archive/issue_comments_522948.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-02-04T04:38:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27182#issuecomment-522948",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_522949.json:
```json
{
    "body": "Changing branch from \"u/embray/build/bzip2-spkg-configure\" to \"4ec5dc0850c9ae65cf40d5dc53896ca8028c5203\"",
    "created_at": "2019-02-05T16:57:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27182#issuecomment-522949",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/embray/build/bzip2-spkg-configure" to "4ec5dc0850c9ae65cf40d5dc53896ca8028c5203"



---

archive/issue_comments_522950.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-02-05T16:57:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27182#issuecomment-522950",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_067483.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-02-05T16:57:48Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27182",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27182#event-67483"
}
```



---

archive/issue_comments_522951.json:
```json
{
    "body": "Changing commit from \"4ec5dc0850c9ae65cf40d5dc53896ca8028c5203\" to \"\"",
    "created_at": "2019-02-12T09:17:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27182#issuecomment-522951",
    "user": "https://github.com/dimpase"
}
```

Changing commit from "4ec5dc0850c9ae65cf40d5dc53896ca8028c5203" to ""



---

archive/issue_comments_522952.json:
```json
{
    "body": "Changing keywords from \"\" to \"spkg-configure\".",
    "created_at": "2019-02-12T09:17:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27182#issuecomment-522952",
    "user": "https://github.com/dimpase"
}
```

Changing keywords from "" to "spkg-configure".



---

archive/issue_comments_522953.json:
```json
{
    "body": "<a id='comment:12'></a>Sanity check: does that last AC_CHECK_PROG really do what it's supposed to?\n\n```\nSAGE_SPKG_CONFIGURE([bzip2], [\n    AC_CHECK_HEADER(bzlib.h, [], [sage_spkg_install_bzip2=yes])\n    AC_SEARCH_LIBS([BZ2_bzCompress], [bz2], [], [sage_spkg_install_bzip2=yes])\n    AC_CHECK_PROG(bzip2, [break], [sage_spkg_install_bzip2=yes])\n])\n```",
    "created_at": "2020-01-06T03:43:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27182#issuecomment-522953",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:12'></a>Sanity check: does that last AC_CHECK_PROG really do what it's supposed to?

```
SAGE_SPKG_CONFIGURE([bzip2], [
    AC_CHECK_HEADER(bzlib.h, [], [sage_spkg_install_bzip2=yes])
    AC_SEARCH_LIBS([BZ2_bzCompress], [bz2], [], [sage_spkg_install_bzip2=yes])
    AC_CHECK_PROG(bzip2, [break], [sage_spkg_install_bzip2=yes])
])
```



---

archive/issue_comments_522954.json:
```json
{
    "body": "<a id='comment:13'></a>Replying to [mjo](#comment%3A12):\n> Sanity check: does that last AC_CHECK_PROG really do what it's supposed to?\n> \n> \n> ```\n> SAGE_SPKG_CONFIGURE([bzip2], [\n>     AC_CHECK_HEADER(bzlib.h, [], [sage_spkg_install_bzip2=yes])\n>     AC_SEARCH_LIBS([BZ2_bzCompress], [bz2], [], [sage_spkg_install_bzip2=yes])\n>     AC_CHECK_PROG(bzip2, [break], [sage_spkg_install_bzip2=yes])\n> ])\n> ```\n\n\nhmm, no. It should be `AC_PATH_PROG([BZIP2], [bzip2], [sage_spkg_install_bzip2=yes])`\n\n- the test as specified always passes.",
    "created_at": "2020-01-06T06:47:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27182#issuecomment-522954",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:13'></a>Replying to [mjo](#comment%3A12):
> Sanity check: does that last AC_CHECK_PROG really do what it's supposed to?
> 
> 
> ```
> SAGE_SPKG_CONFIGURE([bzip2], [
>     AC_CHECK_HEADER(bzlib.h, [], [sage_spkg_install_bzip2=yes])
>     AC_SEARCH_LIBS([BZ2_bzCompress], [bz2], [], [sage_spkg_install_bzip2=yes])
>     AC_CHECK_PROG(bzip2, [break], [sage_spkg_install_bzip2=yes])
> ])
> ```


hmm, no. It should be `AC_PATH_PROG([BZIP2], [bzip2], [sage_spkg_install_bzip2=yes])`

- the test as specified always passes.



---

archive/issue_comments_522955.json:
```json
{
    "body": "<a id='comment:14'></a>I've opened #28956 to deal with it.",
    "created_at": "2020-01-06T07:34:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27182#issuecomment-522955",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:14'></a>I've opened #28956 to deal with it.
