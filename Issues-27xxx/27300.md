# Issue 27300: Pip package: installation order of pip2 vs. pip3 should depend on SAGE_PYTHON3

archive/issues_027063.json:
```json
{
    "body": "The file `spkg-install` for the pip package says\n\n```\n# Install pip3 first so pip2 overwrites local/bin/pip\nfor vers in 3 2; do\n    python${vers} -m pip install --verbose --no-index --ignore-installed \\\n            --no-build-isolation --isolated --root=\"$SAGE_DESTDIR\" . || \\\n        sdh_die \"Error building / installing pip${vers}\"\ndone\n```\nBut really the order should depend on whether `SAGE_PYTHON3` is \"YES\", because then the Python 3 version should overwrite the Python 2 version. The current situation causes a doctest failure in `misc/package.py`, in particular in the function `pip_installed_packages`.\n\nCC:  @fchapoton\n\nKeywords: python3\n\nAuthor: John Palmieri\n\nBranch: u/jhpalmieri/pip\n\nCommit: 18cfb2ea8f3e5aad0bac8561361a50f8a4f4412d\n\nResolution: invalid\n\nIssue created by migration from https://trac.sagemath.org/ticket/27300\n\n",
    "closed_at": "2019-02-26T13:58:00Z",
    "created_at": "2019-02-15T21:14:02Z",
    "labels": [
        "component: python3",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Pip package: installation order of pip2 vs. pip3 should depend on SAGE_PYTHON3",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27300",
    "user": "https://github.com/jhpalmieri"
}
```
The file `spkg-install` for the pip package says

```
# Install pip3 first so pip2 overwrites local/bin/pip
for vers in 3 2; do
    python${vers} -m pip install --verbose --no-index --ignore-installed \
            --no-build-isolation --isolated --root="$SAGE_DESTDIR" . || \
        sdh_die "Error building / installing pip${vers}"
done
```
But really the order should depend on whether `SAGE_PYTHON3` is "YES", because then the Python 3 version should overwrite the Python 2 version. The current situation causes a doctest failure in `misc/package.py`, in particular in the function `pip_installed_packages`.

CC:  @fchapoton

Keywords: python3

Author: John Palmieri

Branch: u/jhpalmieri/pip

Commit: 18cfb2ea8f3e5aad0bac8561361a50f8a4f4412d

Resolution: invalid

Issue created by migration from https://trac.sagemath.org/ticket/27300





---

archive/issue_comments_526027.json:
```json
{
    "body": "Changing branch from \"\" to \"u/jhpalmieri/pip\"",
    "created_at": "2019-02-15T21:16:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27300",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27300#issuecomment-526027",
    "user": "https://github.com/jhpalmieri"
}
```

Changing branch from "" to "u/jhpalmieri/pip"



---

archive/issue_comments_526028.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-02-15T21:17:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27300",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27300#issuecomment-526028",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_526029.json:
```json
{
    "body": "<a id='comment:2'></a>\nNew commits:\n|                                                                                                                                          |                                                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------|\n|[18cfb2e](https://git.sagemath.org/sage.git/commit?id=18cfb2ea8f3e5aad0bac8561361a50f8a4f4412d)|`trac 27300: when SAGE_PYTHON3=yes, install pip3 after pip2.`|",
    "created_at": "2019-02-15T21:17:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27300",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27300#issuecomment-526029",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:2'></a>
New commits:
|                                                                                                                                          |                                                             |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------|
|[18cfb2e](https://git.sagemath.org/sage.git/commit?id=18cfb2ea8f3e5aad0bac8561361a50f8a4f4412d)|`trac 27300: when SAGE_PYTHON3=yes, install pip3 after pip2.`|



---

archive/issue_comments_526030.json:
```json
{
    "body": "Changing commit from \"\" to \"18cfb2ea8f3e5aad0bac8561361a50f8a4f4412d\"",
    "created_at": "2019-02-15T21:17:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27300",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27300#issuecomment-526030",
    "user": "https://github.com/jhpalmieri"
}
```

Changing commit from "" to "18cfb2ea8f3e5aad0bac8561361a50f8a4f4412d"



---

archive/issue_comments_526031.json:
```json
{
    "body": "Changing keywords from \"\" to \"python3\".",
    "created_at": "2019-02-15T21:17:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27300",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27300#issuecomment-526031",
    "user": "https://github.com/jhpalmieri"
}
```

Changing keywords from "" to "python3".



---

archive/issue_comments_526032.json:
```json
{
    "body": "<a id='comment:4'></a>\nrelated to #27001 ?",
    "created_at": "2019-02-16T08:01:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27300",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27300#issuecomment-526032",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:4'></a>
related to #27001 ?



---

archive/issue_comments_526033.json:
```json
{
    "body": "<a id='comment:5'></a>\nIt's related, but it's solving a different problem. Each could be merged independently, although they both fix the same doctests.",
    "created_at": "2019-02-16T17:18:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27300",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27300#issuecomment-526033",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:5'></a>
It's related, but it's solving a different problem. Each could be merged independently, although they both fix the same doctests.



---

archive/issue_comments_526034.json:
```json
{
    "body": "<a id='comment:6'></a>\nOh, and thanks for pointing out #27001.",
    "created_at": "2019-02-16T17:18:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27300",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27300#issuecomment-526034",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:6'></a>
Oh, and thanks for pointing out #27001.



---

archive/issue_comments_526035.json:
```json
{
    "body": "<a id='comment:7'></a>\nBecause of [PEP 394](https://www.python.org/dev/peps/pep-0394/), I disagree with the premise of this ticket.",
    "created_at": "2019-02-21T13:01:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27300",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27300#issuecomment-526035",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>
Because of [PEP 394](https://www.python.org/dev/peps/pep-0394/), I disagree with the premise of this ticket.



---

archive/issue_events_067772.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2019-02-21T17:25:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27300",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27300#event-67772"
}
```



---

archive/issue_comments_526036.json:
```json
{
    "body": "<a id='comment:8'></a>\nThat doesn't refer to pip, but you may have a point. We can close this and focus on #27001 instead.",
    "created_at": "2019-02-21T17:25:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27300",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27300#issuecomment-526036",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:8'></a>
That doesn't refer to pip, but you may have a point. We can close this and focus on #27001 instead.



---

archive/issue_comments_526037.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-02-21T17:25:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27300",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27300#issuecomment-526037",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_526038.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2019-02-26T13:58:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27300",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27300#issuecomment-526038",
    "user": "https://github.com/embray"
}
```

Resolution: invalid



---

archive/issue_comments_526039.json:
```json
{
    "body": "<a id='comment:9'></a>\nPresuming these are all correctly reviewed as either duplicate, invalid, or wontfix.",
    "created_at": "2019-02-26T13:58:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27300",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27300#issuecomment-526039",
    "user": "https://github.com/embray"
}
```

<a id='comment:9'></a>
Presuming these are all correctly reviewed as either duplicate, invalid, or wontfix.



---

archive/issue_events_067773.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-26T13:58:00Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27300",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27300#event-67773"
}
```
