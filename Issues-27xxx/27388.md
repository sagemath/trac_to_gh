# Issue 27388: spkg installation: convert read-only files to owner-writable

archive/issues_027151.json:
```json
{
    "body": "In recent versions of the gap package, the file `local/share/gap/pkg/ctbllib/tst/docxpl.tst` gets installed with permissions `-r--r--r--`, because these are its permissions in the tarball. This can cause problems when upgrading if that involves overwriting that file. So let's fix permissions in the installation process.\n\n\n**Branch/Commit:** [eec04c7ace6b62913bb78fdcaa6205590f2ca0ec](https://github.com/sagemath/sagetrac-mirror/commit/eec04c7ace6b62913bb78fdcaa6205590f2ca0ec)\n\n**Reviewer:** Erik Bray\n\n**Author:** John Palmieri\n\nIssue created by migration from https://trac.sagemath.org/ticket/27388\n\n",
    "closed_at": "2019-03-03T22:38:19Z",
    "created_at": "2019-02-28T18:29:43Z",
    "labels": [
        "component: build",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.7",
    "title": "spkg installation: convert read-only files to owner-writable",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27388",
    "user": "https://github.com/jhpalmieri"
}
```
In recent versions of the gap package, the file `local/share/gap/pkg/ctbllib/tst/docxpl.tst` gets installed with permissions `-r--r--r--`, because these are its permissions in the tarball. This can cause problems when upgrading if that involves overwriting that file. So let's fix permissions in the installation process.


**Branch/Commit:** [eec04c7ace6b62913bb78fdcaa6205590f2ca0ec](https://github.com/sagemath/sagetrac-mirror/commit/eec04c7ace6b62913bb78fdcaa6205590f2ca0ec)

**Reviewer:** Erik Bray

**Author:** John Palmieri

Issue created by migration from https://trac.sagemath.org/ticket/27388





---

archive/issue_comments_504210.json:
```json
{
    "body": "**Branch:** [u/jhpalmieri/gap-chmod](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/gap-chmod)",
    "created_at": "2019-02-28T18:30:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27388#issuecomment-504210",
    "user": "https://github.com/jhpalmieri"
}
```

**Branch:** [u/jhpalmieri/gap-chmod](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/gap-chmod)



---

archive/issue_comments_504211.json:
```json
{
    "body": "<a id='comment:2'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eec04c7ace6b62913bb78fdcaa6205590f2ca0ec\">eec04c7</a></td><td><code>trac 27388: In Sage's tar_file.py, set \"w\" permission for owner</code></td></tr></table>\n",
    "created_at": "2019-02-28T18:31:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27388#issuecomment-504211",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:2'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eec04c7ace6b62913bb78fdcaa6205590f2ca0ec">eec04c7</a></td><td><code>trac 27388: In Sage's tar_file.py, set "w" permission for owner</code></td></tr></table>




---

archive/issue_comments_504212.json:
```json
{
    "body": "**Commit:** [eec04c7ace6b62913bb78fdcaa6205590f2ca0ec](https://github.com/sagemath/sagetrac-mirror/commit/eec04c7ace6b62913bb78fdcaa6205590f2ca0ec)",
    "created_at": "2019-02-28T18:31:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27388#issuecomment-504212",
    "user": "https://github.com/jhpalmieri"
}
```

**Commit:** [eec04c7ace6b62913bb78fdcaa6205590f2ca0ec](https://github.com/sagemath/sagetrac-mirror/commit/eec04c7ace6b62913bb78fdcaa6205590f2ca0ec)



---

archive/issue_comments_504213.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2019-02-28T18:31:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27388#issuecomment-504213",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_504214.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2019-03-01T11:23:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27388#issuecomment-504214",
    "user": "https://github.com/embray"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_504215.json:
```json
{
    "body": "<a id='comment:3'></a>\nI agree--there's really no reason to be installing read-only files.  The one case that we know of, of one file, in the GAP tarball actually comes from a mis-distributed GAP package.  But the GAP developers refuse to fix it unless the developer of that package fixes it, and they in turn are unresponsive.\n\nThis should be fixed at the source, but regardless it's useful to go ahead and apply sensible permissions to files when we unpack tarballs.",
    "created_at": "2019-03-01T11:23:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27388#issuecomment-504215",
    "user": "https://github.com/embray"
}
```

<a id='comment:3'></a>
I agree--there's really no reason to be installing read-only files.  The one case that we know of, of one file, in the GAP tarball actually comes from a mis-distributed GAP package.  But the GAP developers refuse to fix it unless the developer of that package fixes it, and they in turn are unresponsive.

This should be fixed at the source, but regardless it's useful to go ahead and apply sensible permissions to files when we unpack tarballs.



---

archive/issue_comments_504216.json:
```json
{
    "body": "**Reviewer:** Erik Bray",
    "created_at": "2019-03-01T11:23:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27388#issuecomment-504216",
    "user": "https://github.com/embray"
}
```

**Reviewer:** Erik Bray



---

archive/issue_comments_504217.json:
```json
{
    "body": "**Changing branch** from \"[u/jhpalmieri/gap-chmod](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/gap-chmod)\" to \"[eec04c7ace6b62913bb78fdcaa6205590f2ca0ec](https://github.com/sagemath/sagetrac-mirror/commit/eec04c7ace6b62913bb78fdcaa6205590f2ca0ec)\".",
    "created_at": "2019-03-03T22:38:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27388#issuecomment-504217",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/jhpalmieri/gap-chmod](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/gap-chmod)" to "[eec04c7ace6b62913bb78fdcaa6205590f2ca0ec](https://github.com/sagemath/sagetrac-mirror/commit/eec04c7ace6b62913bb78fdcaa6205590f2ca0ec)".



---

archive/issue_events_077480.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-03-03T22:38:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27388",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27388#event-77480"
}
```
