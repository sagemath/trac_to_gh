# Issue 27388: spkg installation: convert read-only files to owner-writable

archive/issues_027151.json:
```json
{
    "assignees": [],
    "body": "In recent versions of the gap package, the file `local/share/gap/pkg/ctbllib/tst/docxpl.tst` gets installed with permissions `-r--r--r--`, because these are its permissions in the tarball. This can cause problems when upgrading if that involves overwriting that file. So let's fix permissions in the installation process.\n\n\nBranch/Commit: **[eec04c7](https://github.com/sagemath/sagetrac-mirror/commit/eec04c7ace6b62913bb78fdcaa6205590f2ca0ec)**\n\nReviewer: **Erik Bray**\n\nAuthor: **John Palmieri**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/27388_\n\n",
    "closed_at": "2019-03-03T22:38:19Z",
    "created_at": "2019-02-28T18:29:43Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20build",
        "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "spkg installation: convert read-only files to owner-writable",
    "type": "issue",
    "updated_at": "2019-03-03T22:38:19Z",
    "url": "https://github.com/sagemath/sage/issues/27388",
    "user": "https://github.com/jhpalmieri"
}
```
In recent versions of the gap package, the file `local/share/gap/pkg/ctbllib/tst/docxpl.tst` gets installed with permissions `-r--r--r--`, because these are its permissions in the tarball. This can cause problems when upgrading if that involves overwriting that file. So let's fix permissions in the installation process.


Branch/Commit: **[eec04c7](https://github.com/sagemath/sagetrac-mirror/commit/eec04c7ace6b62913bb78fdcaa6205590f2ca0ec)**

Reviewer: **Erik Bray**

Author: **John Palmieri**

_Issue created by migration from https://trac.sagemath.org/ticket/27388_





---

archive/issue_events_358040.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2019-02-28T18:29:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27388",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27388#event-358040"
}
```



---

archive/issue_events_358041.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2019-02-28T18:29:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27388",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20build",
    "label_color": "000080",
    "label_name": "component: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27388#event-358041"
}
```



---

archive/issue_events_358042.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2019-02-28T18:29:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27388",
    "label": "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27388#event-358042"
}
```



---

archive/issue_events_358043.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2019-02-28T18:29:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27388",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27388#event-358043"
}
```



---

archive/issue_comments_426549.json:
```json
{
    "body": "Branch: **[u/jhpalmieri/gap-chmod](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/gap-chmod)**",
    "created_at": "2019-02-28T18:30:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27388#issuecomment-426549",
    "user": "https://github.com/jhpalmieri"
}
```

Branch: **[u/jhpalmieri/gap-chmod](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/gap-chmod)**



---

archive/issue_comments_426550.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eec04c7ace6b62913bb78fdcaa6205590f2ca0ec\">eec04c7</a></td><td><code>trac 27388: In Sage's tar_file.py, set \"w\" permission for owner</code></td></tr></table>\n",
    "created_at": "2019-02-28T18:31:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27388#issuecomment-426550",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:2'>Comment 2:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eec04c7ace6b62913bb78fdcaa6205590f2ca0ec">eec04c7</a></td><td><code>trac 27388: In Sage's tar_file.py, set "w" permission for owner</code></td></tr></table>




---

archive/issue_comments_426551.json:
```json
{
    "body": "Commit: **[eec04c7](https://github.com/sagemath/sagetrac-mirror/commit/eec04c7ace6b62913bb78fdcaa6205590f2ca0ec)**",
    "created_at": "2019-02-28T18:31:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27388#issuecomment-426551",
    "user": "https://github.com/jhpalmieri"
}
```

Commit: **[eec04c7](https://github.com/sagemath/sagetrac-mirror/commit/eec04c7ace6b62913bb78fdcaa6205590f2ca0ec)**



---

archive/issue_events_358044.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2019-02-28T18:31:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27388",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27388#event-358044"
}
```



---

archive/issue_events_358045.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-01T11:23:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27388",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27388#event-358045"
}
```



---

archive/issue_events_358046.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-01T11:23:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27388",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27388#event-358046"
}
```



---

archive/issue_comments_426552.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nI agree--there's really no reason to be installing read-only files.  The one case that we know of, of one file, in the GAP tarball actually comes from a mis-distributed GAP package.  But the GAP developers refuse to fix it unless the developer of that package fixes it, and they in turn are unresponsive.\n\nThis should be fixed at the source, but regardless it's useful to go ahead and apply sensible permissions to files when we unpack tarballs.",
    "created_at": "2019-03-01T11:23:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27388#issuecomment-426552",
    "user": "https://github.com/embray"
}
```

<a id='comment:3'>Comment 3:</a>
I agree--there's really no reason to be installing read-only files.  The one case that we know of, of one file, in the GAP tarball actually comes from a mis-distributed GAP package.  But the GAP developers refuse to fix it unless the developer of that package fixes it, and they in turn are unresponsive.

This should be fixed at the source, but regardless it's useful to go ahead and apply sensible permissions to files when we unpack tarballs.



---

archive/issue_comments_426553.json:
```json
{
    "body": "Reviewer: **Erik Bray**",
    "created_at": "2019-03-01T11:23:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27388#issuecomment-426553",
    "user": "https://github.com/embray"
}
```

Reviewer: **Erik Bray**



---

archive/issue_comments_426554.json:
```json
{
    "body": "Changed branch from **[u/jhpalmieri/gap-chmod](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/gap-chmod)** to **[eec04c7](https://github.com/sagemath/sagetrac-mirror/commit/eec04c7ace6b62913bb78fdcaa6205590f2ca0ec)**",
    "created_at": "2019-03-03T22:38:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27388#issuecomment-426554",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jhpalmieri/gap-chmod](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/gap-chmod)** to **[eec04c7](https://github.com/sagemath/sagetrac-mirror/commit/eec04c7ace6b62913bb78fdcaa6205590f2ca0ec)**



---

archive/issue_events_358047.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-03-03T22:38:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27388",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27388#event-358047"
}
```



---

archive/issue_events_358048.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "02db0fd7bb7c4896ca6495af7ee1ac1d05fae319",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-03-03T22:38:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27388",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27388#event-358048"
}
```
