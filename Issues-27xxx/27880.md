# Issue 27880: Update Kenzo and its interface

archive/issues_027643.json:
```json
{
    "body": "An upcoming version of Kenzo will include functions to compute homotopy groups. \n\nThis ticket will track the work to update it and the corresponding interface\n\nThe tarball of the new version is available at https://github.com/miguelmarco/kenzo/releases/download/1.1.9/kenzo-1.1.9.tar.gz\n\nAs usual, the new version can be tested downloading the tarball, putting it in the /upstream/ directory, and runnning\n\n\n```\nsage -f kenzo\n```\n\n\nCC:  @jhpalmieri @tscrim\n\nBranch/Commit: f92fd0807a470bdc0a4cbdcd73aa284660b3533e\n\nReviewer: Travis Scrimshaw, John Palmieri\n\nAuthor: Miguel Marco, Ana Romero, Julian Cuevas\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/27880\n\n",
    "closed_at": "2020-05-31T23:12:02Z",
    "created_at": "2019-05-28T08:27:34Z",
    "labels": [
        "component: algebraic topology"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Update Kenzo and its interface",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27880",
    "user": "https://github.com/miguelmarco"
}
```
An upcoming version of Kenzo will include functions to compute homotopy groups. 

This ticket will track the work to update it and the corresponding interface

The tarball of the new version is available at https://github.com/miguelmarco/kenzo/releases/download/1.1.9/kenzo-1.1.9.tar.gz

As usual, the new version can be tested downloading the tarball, putting it in the /upstream/ directory, and runnning


```
sage -f kenzo
```


CC:  @jhpalmieri @tscrim

Branch/Commit: f92fd0807a470bdc0a4cbdcd73aa284660b3533e

Reviewer: Travis Scrimshaw, John Palmieri

Author: Miguel Marco, Ana Romero, Julian Cuevas

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/27880





---

archive/issue_comments_415495.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2019-06-04T22:14:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415495",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_415496.json:
```json
{
    "body": "<a id='comment:5'></a>I have fixed some style and doctests.\n\nSome functions (k2s_matrix, s2k_matrix, s2k_dictmat and pairing) that still need proper dosctrings.\n\n---\nNew commits:",
    "created_at": "2019-06-07T16:17:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415496",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:5'></a>I have fixed some style and doctests.

Some functions (k2s_matrix, s2k_matrix, s2k_dictmat and pairing) that still need proper dosctrings.

---
New commits:



---

archive/issue_comments_415497.json:
```json
{
    "body": "<a id='comment:6'></a>I have been testing the conversion from sage to kenzo simplicial sets, and it seems to be quite fragile at the moment:\n\n```\n\nsage: from sage.homology.simplicial_set import SimplicialSet\nsage: S = simplicial_sets.Sphere(3)\nsage: W = S.wedge(S)\nsage: SimplicialSet(W)\nSimplicial set with 3 non-degenerate simplices\nsage: KFiniteSimplicialSet(SimplicialSet(W))\n---------------------------------------------------------------------------\nRuntimeError                              Traceback (most recent call last)\n<ipython-input-57-8f9e5a4c20e4> in <module>()\n----> 1 KFiniteSimplicialSet(SimplicialSet(W))\n\n/home/mmarco/sage-python3/local/lib/python3.7/site-packages/sage/interfaces/kenzo.py in KFiniteSimplicialSet(ssimpset)\n    744                             auxiliar_list.append(degen_z)\n    745                         list_rslt.append(auxiliar_list)\n--> 746         return KenzoSimplicialSet(build_finite_ss2(list_rslt))\n    747 \n    748 \n\n/home/mmarco/sage-python3/local/lib/python3.7/site-packages/sage/libs/ecl.pyx in sage.libs.ecl.EclObject.__call__ (build/cythonized/sage/libs/ecl.c:7787)()\n    804         \"\"\"\n    805         lispargs = EclObject(list(args))\n--> 806         return ecl_wrap(ecl_safe_apply(self.obj,(<EclObject>lispargs).obj))\n    807 \n    808     def __richcmp__(left, right, int op):\n\n/home/mmarco/sage-python3/local/lib/python3.7/site-packages/sage/libs/ecl.pyx in sage.libs.ecl.ecl_safe_apply (build/cythonized/sage/libs/ecl.c:5449)()\n    376     if ecl_nvalues > 1:\n    377         s = si_coerce_to_base_string(ecl_values(1))\n--> 378         raise RuntimeError(\"ECL says: {}\".format(\n    379             char_to_str(ecl_base_string_pointer_safe(s))))\n    380     else:\n\nRuntimeError: ECL says: In BUILD-FINITE-SS, the symbol SIGMA_3 is present two times.\n```\n\n\nif we try to avoid the problem of duplication of strings by constructing the wedge from simplicial complexes we get:\n\n```\nsage: S3 = simplicial_complexes.Sphere(3)\nsage: W3 = SimplicialSet(S3.wedge(S3))\nsage: W3\nSimplicial set with 59 non-degenerate simplices\nsage: KFiniteSimplicialSet(W3)\n---------------------------------------------------------------------------\nRuntimeError                              Traceback (most recent call last)\n<ipython-input-61-4b410c60e632> in <module>()\n----> 1 KFiniteSimplicialSet(W3)\n\n/home/mmarco/sage-python3/local/lib/python3.7/site-packages/sage/interfaces/kenzo.py in KFiniteSimplicialSet(ssimpset)\n    744                             auxiliar_list.append(degen_z)\n    745                         list_rslt.append(auxiliar_list)\n--> 746         return KenzoSimplicialSet(build_finite_ss2(list_rslt))\n    747 \n    748 \n\n/home/mmarco/sage-python3/local/lib/python3.7/site-packages/sage/libs/ecl.pyx in sage.libs.ecl.EclObject.__call__ (build/cythonized/sage/libs/ecl.c:7773)()\n    803 \n    804         \"\"\"\n--> 805         lispargs = EclObject(list(args))\n    806         return ecl_wrap(ecl_safe_apply(self.obj,(<EclObject>lispargs).obj))\n    807 \n\n/home/mmarco/sage-python3/local/lib/python3.7/site-packages/sage/libs/ecl.pyx in sage.libs.ecl.EclObject.__init__ (build/cythonized/sage/libs/ecl.c:7307)()\n    668         \"\"\"\n    669         if len(args) != 0:\n--> 670             self.set_obj(python_to_ecl(args[0]))\n    671 \n    672     def __reduce__(self):\n\n/home/mmarco/sage-python3/local/lib/python3.7/site-packages/sage/libs/ecl.pyx in sage.libs.ecl.python_to_ecl (build/cythonized/sage/libs/ecl.c:6351)()\n    483             return Cnil\n    484         else:\n--> 485             L=cl_cons(python_to_ecl(pyobj[0]),Cnil)\n    486             ptr=L\n    487             for a in pyobj[1:]:\n\n/home/mmarco/sage-python3/local/lib/python3.7/site-packages/sage/libs/ecl.pyx in sage.libs.ecl.python_to_ecl (build/cythonized/sage/libs/ecl.c:6351)()\n    483             return Cnil\n    484         else:\n--> 485             L=cl_cons(python_to_ecl(pyobj[0]),Cnil)\n    486             ptr=L\n    487             for a in pyobj[1:]:\n\n/home/mmarco/sage-python3/local/lib/python3.7/site-packages/sage/libs/ecl.pyx in sage.libs.ecl.python_to_ecl (build/cythonized/sage/libs/ecl.c:6045)()\n    464     elif isinstance(pyobj,unicode):\n    465         s=str_to_bytes(pyobj)\n--> 466         return ecl_safe_read_string(s)\n    467     elif isinstance(pyobj,bytes):\n    468         s=<bytes>pyobj\n\n/home/mmarco/sage-python3/local/lib/python3.7/site-packages/sage/libs/ecl.pyx in sage.libs.ecl.ecl_safe_read_string (build/cythonized/sage/libs/ecl.c:5524)()\n    384     cdef cl_object o\n    385     o = ecl_cstring_to_base_string_or_nil(s)\n--> 386     o = ecl_safe_funcall(read_from_string_clobj,o)\n    387     return o\n    388 \n\n/home/mmarco/sage-python3/local/lib/python3.7/site-packages/sage/libs/ecl.pyx in sage.libs.ecl.ecl_safe_funcall (build/cythonized/sage/libs/ecl.c:5291)()\n    363     if ecl_nvalues > 1:\n    364         s = si_coerce_to_base_string(ecl_values(1))\n--> 365         raise RuntimeError(\"ECL says: {}\".format(\n    366             char_to_str(ecl_base_string_pointer_safe(s))))\n    367     else:\n\nRuntimeError: ECL says: Reader error in file #<string-input stream from \"('L1',)\">, position 6:\nA comma has appeared out of a backquote.\n```",
    "created_at": "2019-06-07T16:37:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415497",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:6'></a>I have been testing the conversion from sage to kenzo simplicial sets, and it seems to be quite fragile at the moment:

```

sage: from sage.homology.simplicial_set import SimplicialSet
sage: S = simplicial_sets.Sphere(3)
sage: W = S.wedge(S)
sage: SimplicialSet(W)
Simplicial set with 3 non-degenerate simplices
sage: KFiniteSimplicialSet(SimplicialSet(W))
---------------------------------------------------------------------------
RuntimeError                              Traceback (most recent call last)
<ipython-input-57-8f9e5a4c20e4> in <module>()
----> 1 KFiniteSimplicialSet(SimplicialSet(W))

/home/mmarco/sage-python3/local/lib/python3.7/site-packages/sage/interfaces/kenzo.py in KFiniteSimplicialSet(ssimpset)
    744                             auxiliar_list.append(degen_z)
    745                         list_rslt.append(auxiliar_list)
--> 746         return KenzoSimplicialSet(build_finite_ss2(list_rslt))
    747 
    748 

/home/mmarco/sage-python3/local/lib/python3.7/site-packages/sage/libs/ecl.pyx in sage.libs.ecl.EclObject.__call__ (build/cythonized/sage/libs/ecl.c:7787)()
    804         """
    805         lispargs = EclObject(list(args))
--> 806         return ecl_wrap(ecl_safe_apply(self.obj,(<EclObject>lispargs).obj))
    807 
    808     def __richcmp__(left, right, int op):

/home/mmarco/sage-python3/local/lib/python3.7/site-packages/sage/libs/ecl.pyx in sage.libs.ecl.ecl_safe_apply (build/cythonized/sage/libs/ecl.c:5449)()
    376     if ecl_nvalues > 1:
    377         s = si_coerce_to_base_string(ecl_values(1))
--> 378         raise RuntimeError("ECL says: {}".format(
    379             char_to_str(ecl_base_string_pointer_safe(s))))
    380     else:

RuntimeError: ECL says: In BUILD-FINITE-SS, the symbol SIGMA_3 is present two times.
```


if we try to avoid the problem of duplication of strings by constructing the wedge from simplicial complexes we get:

```
sage: S3 = simplicial_complexes.Sphere(3)
sage: W3 = SimplicialSet(S3.wedge(S3))
sage: W3
Simplicial set with 59 non-degenerate simplices
sage: KFiniteSimplicialSet(W3)
---------------------------------------------------------------------------
RuntimeError                              Traceback (most recent call last)
<ipython-input-61-4b410c60e632> in <module>()
----> 1 KFiniteSimplicialSet(W3)

/home/mmarco/sage-python3/local/lib/python3.7/site-packages/sage/interfaces/kenzo.py in KFiniteSimplicialSet(ssimpset)
    744                             auxiliar_list.append(degen_z)
    745                         list_rslt.append(auxiliar_list)
--> 746         return KenzoSimplicialSet(build_finite_ss2(list_rslt))
    747 
    748 

/home/mmarco/sage-python3/local/lib/python3.7/site-packages/sage/libs/ecl.pyx in sage.libs.ecl.EclObject.__call__ (build/cythonized/sage/libs/ecl.c:7773)()
    803 
    804         """
--> 805         lispargs = EclObject(list(args))
    806         return ecl_wrap(ecl_safe_apply(self.obj,(<EclObject>lispargs).obj))
    807 

/home/mmarco/sage-python3/local/lib/python3.7/site-packages/sage/libs/ecl.pyx in sage.libs.ecl.EclObject.__init__ (build/cythonized/sage/libs/ecl.c:7307)()
    668         """
    669         if len(args) != 0:
--> 670             self.set_obj(python_to_ecl(args[0]))
    671 
    672     def __reduce__(self):

/home/mmarco/sage-python3/local/lib/python3.7/site-packages/sage/libs/ecl.pyx in sage.libs.ecl.python_to_ecl (build/cythonized/sage/libs/ecl.c:6351)()
    483             return Cnil
    484         else:
--> 485             L=cl_cons(python_to_ecl(pyobj[0]),Cnil)
    486             ptr=L
    487             for a in pyobj[1:]:

/home/mmarco/sage-python3/local/lib/python3.7/site-packages/sage/libs/ecl.pyx in sage.libs.ecl.python_to_ecl (build/cythonized/sage/libs/ecl.c:6351)()
    483             return Cnil
    484         else:
--> 485             L=cl_cons(python_to_ecl(pyobj[0]),Cnil)
    486             ptr=L
    487             for a in pyobj[1:]:

/home/mmarco/sage-python3/local/lib/python3.7/site-packages/sage/libs/ecl.pyx in sage.libs.ecl.python_to_ecl (build/cythonized/sage/libs/ecl.c:6045)()
    464     elif isinstance(pyobj,unicode):
    465         s=str_to_bytes(pyobj)
--> 466         return ecl_safe_read_string(s)
    467     elif isinstance(pyobj,bytes):
    468         s=<bytes>pyobj

/home/mmarco/sage-python3/local/lib/python3.7/site-packages/sage/libs/ecl.pyx in sage.libs.ecl.ecl_safe_read_string (build/cythonized/sage/libs/ecl.c:5524)()
    384     cdef cl_object o
    385     o = ecl_cstring_to_base_string_or_nil(s)
--> 386     o = ecl_safe_funcall(read_from_string_clobj,o)
    387     return o
    388 

/home/mmarco/sage-python3/local/lib/python3.7/site-packages/sage/libs/ecl.pyx in sage.libs.ecl.ecl_safe_funcall (build/cythonized/sage/libs/ecl.c:5291)()
    363     if ecl_nvalues > 1:
    364         s = si_coerce_to_base_string(ecl_values(1))
--> 365         raise RuntimeError("ECL says: {}".format(
    366             char_to_str(ecl_base_string_pointer_safe(s))))
    367     else:

RuntimeError: ECL says: Reader error in file #<string-input stream from "('L1',)">, position 6:
A comma has appeared out of a backquote.
```



---

archive/issue_comments_415498.json:
```json
{
    "body": "<a id='comment:7'></a>As the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).",
    "created_at": "2019-06-14T14:55:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415498",
    "user": "https://github.com/embray"
}
```

<a id='comment:7'></a>As the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).



---

archive/issue_comments_415499.json:
```json
{
    "body": "<a id='comment:8'></a>Sorry, but I can't figure out how to install kenzo. I tried `make kenzo` followed by `make`, and that didn't work: if I run `sage -t src/sage/interfaces/kenzo.py`, I get errors like\n\n```\nRuntimeError: ECL says: The function MAKE-ARRAY-FROM-LISTS is undefined.\n```\nIt seems as though ECL doesn't know about Kenzo.\n\nAnyway, regarding the problem with wedges, in Sage, a simplex in a simplicial set cannot be determined from its name: two different simplices may have the same name. (By default, all n-simplices are just called \"sigma_n\".)\n\n```\nsage: from sage.homology.simplicial_set import SimplicialSet\nsage: S = simplicial_sets.Sphere(3)\nsage: W = S.wedge(S)\nsage: W.n_cells(3)\n[sigma_3, sigma_3]\n```\nBut those simplices are not the same:\n\n```\nsage: W.n_cells(3)[0] == W.n_cells(3)[1]\nFalse\n```\nSo when translating to a Kenzo simplicial set, you will need to come up with some way of distinguishing non-equal simplices of the same dimension. You could use their hash values, for instance.\n\nI also don't understand this:\n\n```\n    if hasattr(ssimpset, 'factors') and str(ssimpset)[0:5] != 'Wedge':\n        return KFiniteSimplicialSet(ssimpset.factor(0)).cartesian_product(KFiniteSimplicialSet(ssimpset.factor(1)))\n```\nFirst, maybe it would be better to test `if isinstance(ssimpset, Factors)`. Similarly, you could test `isinstance(ssimpset, WedgeOfSimplicialSets)` instead of checking the string representation. Second, there are four types of simplicial sets with factors, not just wedges and Cartesian products: smash products and disjoint unions also. Oh, finally, there could be more than two factors, and the current code just takes `ssimpset.factor(0)` and `ssimpset.factor(1)`.",
    "created_at": "2019-06-21T21:06:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415499",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:8'></a>Sorry, but I can't figure out how to install kenzo. I tried `make kenzo` followed by `make`, and that didn't work: if I run `sage -t src/sage/interfaces/kenzo.py`, I get errors like

```
RuntimeError: ECL says: The function MAKE-ARRAY-FROM-LISTS is undefined.
```
It seems as though ECL doesn't know about Kenzo.

Anyway, regarding the problem with wedges, in Sage, a simplex in a simplicial set cannot be determined from its name: two different simplices may have the same name. (By default, all n-simplices are just called "sigma_n".)

```
sage: from sage.homology.simplicial_set import SimplicialSet
sage: S = simplicial_sets.Sphere(3)
sage: W = S.wedge(S)
sage: W.n_cells(3)
[sigma_3, sigma_3]
```
But those simplices are not the same:

```
sage: W.n_cells(3)[0] == W.n_cells(3)[1]
False
```
So when translating to a Kenzo simplicial set, you will need to come up with some way of distinguishing non-equal simplices of the same dimension. You could use their hash values, for instance.

I also don't understand this:

```
    if hasattr(ssimpset, 'factors') and str(ssimpset)[0:5] != 'Wedge':
        return KFiniteSimplicialSet(ssimpset.factor(0)).cartesian_product(KFiniteSimplicialSet(ssimpset.factor(1)))
```
First, maybe it would be better to test `if isinstance(ssimpset, Factors)`. Similarly, you could test `isinstance(ssimpset, WedgeOfSimplicialSets)` instead of checking the string representation. Second, there are four types of simplicial sets with factors, not just wedges and Cartesian products: smash products and disjoint unions also. Oh, finally, there could be more than two factors, and the current code just takes `ssimpset.factor(0)` and `ssimpset.factor(1)`.



---

archive/issue_comments_415500.json:
```json
{
    "body": "<a id='comment:9'></a>Maybe Kenzo is installing fine, but the branch here is using commands that aren't present in the current version of Kenzo, and that's why I'm running into problems. Could that be the case? If I install it without using this branch, then things work okay.",
    "created_at": "2019-06-21T21:13:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415500",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:9'></a>Maybe Kenzo is installing fine, but the branch here is using commands that aren't present in the current version of Kenzo, and that's why I'm running into problems. Could that be the case? If I install it without using this branch, then things work okay.



---

archive/issue_comments_415501.json:
```json
{
    "body": "<a id='comment:10'></a>Replying to [comment:9 jhpalmieri]:\n> Maybe Kenzo is installing fine, but the branch here is using commands that aren't present in the current version of Kenzo, and that's why I'm running into problems. Could that be the case? If I install it without using this branch, then things work okay.\n\n\n\nYes, that is exactly what is going on. Some functions in this branch depend on some functionalities of kenzo that we are developing in a fork (more precisely, in the testing branch of https://github.com/miguelmarco/kenzo ).\n\nOur long term goal is to make a new kenzo release and include an update of the kenzo optional package in this ticket when it is ready.\n\nIn the meantime, you can install the testing version of our kenzo fork by cloning the mentioned repo, checking out its testing branch, and runing:\n\n```\nsage -ecl < compile.lisp\n```\n\nthat will compile the kenzo package into a file called `kenzo--all-systems.fasb`. Then rename it as `kenzo.fas` and copy it to your SAGE_LOCAL/lib/ecl directory.",
    "created_at": "2019-06-22T13:38:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415501",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:10'></a>Replying to [comment:9 jhpalmieri]:
> Maybe Kenzo is installing fine, but the branch here is using commands that aren't present in the current version of Kenzo, and that's why I'm running into problems. Could that be the case? If I install it without using this branch, then things work okay.



Yes, that is exactly what is going on. Some functions in this branch depend on some functionalities of kenzo that we are developing in a fork (more precisely, in the testing branch of https://github.com/miguelmarco/kenzo ).

Our long term goal is to make a new kenzo release and include an update of the kenzo optional package in this ticket when it is ready.

In the meantime, you can install the testing version of our kenzo fork by cloning the mentioned repo, checking out its testing branch, and runing:

```
sage -ecl < compile.lisp
```

that will compile the kenzo package into a file called `kenzo--all-systems.fasb`. Then rename it as `kenzo.fas` and copy it to your SAGE_LOCAL/lib/ecl directory.



---

archive/issue_comments_415502.json:
```json
{
    "body": "<a id='comment:11'></a>Replying to [comment:8 jhpalmieri]:\n\n> Anyway, regarding the problem with wedges, in Sage, a simplex in a simplicial set cannot be determined from its name: two different simplices may have the same name. (By default, all n-simplices are just called \"sigma_n\".)\n> \n> ```\n> sage: from sage.homology.simplicial_set import SimplicialSet\n> sage: S = simplicial_sets.Sphere(3)\n> sage: W = S.wedge(S)\n> sage: W.n_cells(3)\n> [sigma_3, sigma_3]\n> ```\n> But those simplices are not the same:\n> \n> ```\n> sage: W.n_cells(3)[0] == W.n_cells(3)[1]\n> False\n> ```\n> So when translating to a Kenzo simplicial set, you will need to come up with some way of distinguishing non-equal simplices of the same dimension. You could use their hash values, for instance.\n\n\n\nYes, that is my impression too. I was a little worried about the strength of the hash value though: can we guarantee that different cells will always have different hashes? From a quick look at the current code, it seems that the memory address of the object is used in the hash, so it should really distiguish them (modulo hash function collisions), but i wanted to make sure about that.\n\n\n> \n> I also don't understand this:\n> \n> ```\n>     if hasattr(ssimpset, 'factors') and str(ssimpset)[0:5] != 'Wedge':\n>         return KFiniteSimplicialSet(ssimpset.factor(0)).cartesian_product(KFiniteSimplicialSet(ssimpset.factor(1)))\n> ```\n> First, maybe it would be better to test `if isinstance(ssimpset, Factors)`. Similarly, you could test `isinstance(ssimpset, WedgeOfSimplicialSets)` instead of checking the string representation. Second, there are four types of simplicial sets with factors, not just wedges and Cartesian products: smash products and disjoint unions also. Oh, finally, there could be more than two factors, and the current code just takes `ssimpset.factor(0)` and `ssimpset.factor(1)`.\n\n\n\nYes, I also noticed that. Hopefully next week I will have some time to try to improve it.",
    "created_at": "2019-06-22T13:47:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415502",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:11'></a>Replying to [comment:8 jhpalmieri]:

> Anyway, regarding the problem with wedges, in Sage, a simplex in a simplicial set cannot be determined from its name: two different simplices may have the same name. (By default, all n-simplices are just called "sigma_n".)
> 
> ```
> sage: from sage.homology.simplicial_set import SimplicialSet
> sage: S = simplicial_sets.Sphere(3)
> sage: W = S.wedge(S)
> sage: W.n_cells(3)
> [sigma_3, sigma_3]
> ```
> But those simplices are not the same:
> 
> ```
> sage: W.n_cells(3)[0] == W.n_cells(3)[1]
> False
> ```
> So when translating to a Kenzo simplicial set, you will need to come up with some way of distinguishing non-equal simplices of the same dimension. You could use their hash values, for instance.



Yes, that is my impression too. I was a little worried about the strength of the hash value though: can we guarantee that different cells will always have different hashes? From a quick look at the current code, it seems that the memory address of the object is used in the hash, so it should really distiguish them (modulo hash function collisions), but i wanted to make sure about that.


> 
> I also don't understand this:
> 
> ```
>     if hasattr(ssimpset, 'factors') and str(ssimpset)[0:5] != 'Wedge':
>         return KFiniteSimplicialSet(ssimpset.factor(0)).cartesian_product(KFiniteSimplicialSet(ssimpset.factor(1)))
> ```
> First, maybe it would be better to test `if isinstance(ssimpset, Factors)`. Similarly, you could test `isinstance(ssimpset, WedgeOfSimplicialSets)` instead of checking the string representation. Second, there are four types of simplicial sets with factors, not just wedges and Cartesian products: smash products and disjoint unions also. Oh, finally, there could be more than two factors, and the current code just takes `ssimpset.factor(0)` and `ssimpset.factor(1)`.



Yes, I also noticed that. Hopefully next week I will have some time to try to improve it.



---

archive/issue_comments_415503.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:11 mmarco]:\n> Replying to [comment:8 jhpalmieri]:\n> \n> > Anyway, regarding the problem with wedges, in Sage, a simplex in a simplicial set cannot be determined from its name: two different simplices may have the same name. (By default, all n-simplices are just called \"sigma_n\".)\n> > \n> > ```\n> > sage: from sage.homology.simplicial_set import SimplicialSet\n> > sage: S = simplicial_sets.Sphere(3)\n> > sage: W = S.wedge(S)\n> > sage: W.n_cells(3)\n> > [sigma_3, sigma_3]\n> > ```\n> > But those simplices are not the same:\n> > \n> > ```\n> > sage: W.n_cells(3)[0] == W.n_cells(3)[1]\n> > False\n> > ```\n> > So when translating to a Kenzo simplicial set, you will need to come up with some way of distinguishing non-equal simplices of the same dimension. You could use their hash values, for instance.\n\n> \n> \n> Yes, that is my impression too. I was a little worried about the strength of the hash value though: can we guarantee that different cells will always have different hashes? From a quick look at the current code, it seems that the memory address of the object is used in the hash, so it should really distiguish them (modulo hash function collisions), but i wanted to make sure about that.\n\n\nSince the hash is based on `id(...)`, it should distinguish them.",
    "created_at": "2019-06-22T15:38:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415503",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:12'></a>Replying to [comment:11 mmarco]:
> Replying to [comment:8 jhpalmieri]:
> 
> > Anyway, regarding the problem with wedges, in Sage, a simplex in a simplicial set cannot be determined from its name: two different simplices may have the same name. (By default, all n-simplices are just called "sigma_n".)
> > 
> > ```
> > sage: from sage.homology.simplicial_set import SimplicialSet
> > sage: S = simplicial_sets.Sphere(3)
> > sage: W = S.wedge(S)
> > sage: W.n_cells(3)
> > [sigma_3, sigma_3]
> > ```
> > But those simplices are not the same:
> > 
> > ```
> > sage: W.n_cells(3)[0] == W.n_cells(3)[1]
> > False
> > ```
> > So when translating to a Kenzo simplicial set, you will need to come up with some way of distinguishing non-equal simplices of the same dimension. You could use their hash values, for instance.

> 
> 
> Yes, that is my impression too. I was a little worried about the strength of the hash value though: can we guarantee that different cells will always have different hashes? From a quick look at the current code, it seems that the memory address of the object is used in the hash, so it should really distiguish them (modulo hash function collisions), but i wanted to make sure about that.


Since the hash is based on `id(...)`, it should distinguish them.



---

archive/issue_comments_415504.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-06-24T12:12:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415504",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_415505.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-03T12:00:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415505",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_415506.json:
```json
{
    "body": "<a id='comment:15'></a>Is it worth having a separate function that takes a Sage simplex and returns a Kenzo simplex with a meaningful name?",
    "created_at": "2019-07-04T17:24:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415506",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:15'></a>Is it worth having a separate function that takes a Sage simplex and returns a Kenzo simplex with a meaningful name?



---

archive/issue_comments_415507.json:
```json
{
    "body": "<a id='comment:16'></a>Replying to [comment:15 jhpalmieri]:\n> Is it worth having a separate function that takes a Sage simplex and returns a Kenzo simplex with a meaningful name?\n\n\n\nIf you ask this because of the KAbstractSimplex function, I also don't see a point for it. I assumed it was used somewhere else, but apparantely it is not.\n\nSince this is still a work in progress it could happen that it becomes useful at some point. If it doesn't, we can safely remove it.",
    "created_at": "2019-07-04T18:39:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415507",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:16'></a>Replying to [comment:15 jhpalmieri]:
> Is it worth having a separate function that takes a Sage simplex and returns a Kenzo simplex with a meaningful name?



If you ask this because of the KAbstractSimplex function, I also don't see a point for it. I assumed it was used somewhere else, but apparantely it is not.

Since this is still a work in progress it could happen that it becomes useful at some point. If it doesn't, we can safely remove it.



---

archive/issue_comments_415508.json:
```json
{
    "body": "<a id='comment:17'></a>I was thinking for `KFiniteSimplicialSet`. With a Sage simplicial set, you can tell if it contains a given simplex, and so you can check if one simplicial set is contained in another. When you do the translation here, you may lose that information.",
    "created_at": "2019-07-04T18:57:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415508",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:17'></a>I was thinking for `KFiniteSimplicialSet`. With a Sage simplicial set, you can tell if it contains a given simplex, and so you can check if one simplicial set is contained in another. When you do the translation here, you may lose that information.



---

archive/issue_comments_415509.json:
```json
{
    "body": "<a id='comment:18'></a>Oh, I see. Maybe it's a good idea, but I don't see off the top of my head how to design/implement it.\n\nDo you have a suggestion?",
    "created_at": "2019-07-04T19:19:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415509",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:18'></a>Oh, I see. Maybe it's a good idea, but I don't see off the top of my head how to design/implement it.

Do you have a suggestion?



---

archive/issue_comments_415510.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-04T20:18:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415510",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_415511.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-05T17:38:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415511",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_415512.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-12T11:21:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415512",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_415513.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-12T11:32:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415513",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_415514.json:
```json
{
    "body": "<a id='comment:25'></a>Some pep and doc cleanup in the branch\n\npublic/ticket/27880\n\n---\nNew commits:",
    "created_at": "2019-09-25T15:19:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415514",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:25'></a>Some pep and doc cleanup in the branch

public/ticket/27880

---
New commits:



---

archive/issue_comments_415515.json:
```json
{
    "body": "<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-09-30T09:09:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415515",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_415516.json:
```json
{
    "body": "<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-12-04T09:26:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415516",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_415517.json:
```json
{
    "body": "<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-12-04T11:39:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415517",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_415518.json:
```json
{
    "body": "<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-12-06T14:48:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415518",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_415519.json:
```json
{
    "body": "<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-12-06T15:32:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415519",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_415520.json:
```json
{
    "body": "<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-12-09T10:25:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415520",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_415521.json:
```json
{
    "body": "<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-12-09T10:36:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415521",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_415522.json:
```json
{
    "body": "<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-12-09T11:28:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415522",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_415523.json:
```json
{
    "body": "<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-12-12T18:01:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415523",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_415524.json:
```json
{
    "body": "<a id='comment:35'></a>EXAMPLES:: must be followed by an empty line",
    "created_at": "2019-12-12T19:51:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415524",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:35'></a>EXAMPLES:: must be followed by an empty line



---

archive/issue_comments_415525.json:
```json
{
    "body": "<a id='comment:36'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-12-15T10:31:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415525",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:36'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_415526.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,6 +1,16 @@\n An upcoming version of Kenzo will include functions to compute homotopy groups. \n \n This ticket will track the work to update it and the corresponding interface\n+\n+The tarball of the new version is available at https://github.com/miguelmarco/kenzo/releases/download/1.1.8/kenzo-1.1.8.tar.gz\n+\n+As usual, the new version can be tested downloading the tarball, putting it in the /upstream/ directory, and runnning\n+\n+\n+\\`\\`\\`\n+sage -f kenzo\n+\\`\\`\\`\n+\n \n Author: Miguel Marco, Ana Romero, Julian Cuevas\n \n```\n",
    "created_at": "2019-12-17T15:01:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415526",
    "user": "https://github.com/miguelmarco"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,6 +1,16 @@
 An upcoming version of Kenzo will include functions to compute homotopy groups. 
 
 This ticket will track the work to update it and the corresponding interface
+
+The tarball of the new version is available at https://github.com/miguelmarco/kenzo/releases/download/1.1.8/kenzo-1.1.8.tar.gz
+
+As usual, the new version can be tested downloading the tarball, putting it in the /upstream/ directory, and runnning
+
+
+\`\`\`
+sage -f kenzo
+\`\`\`
+
 
 Author: Miguel Marco, Ana Romero, Julian Cuevas
 
```




---

archive/issue_comments_415527.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-12-17T15:01:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415527",
    "user": "https://github.com/miguelmarco"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_415528.json:
```json
{
    "body": "<a id='comment:38'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-12-17T15:02:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415528",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:38'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_415529.json:
```json
{
    "body": "<a id='comment:39'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-12-17T15:03:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415529",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:39'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_415530.json:
```json
{
    "body": "<a id='comment:40'></a>First, all tests pass. Second, with some minor tweaks, the documentation builds. I suggest this:\n\n```diff\ndiff --git a/src/doc/en/reference/interfaces/index.rst b/src/doc/en/reference/interfaces/index.rst\nindex 8680b94deb..95a8678b07 100644\n--- a/src/doc/en/reference/interfaces/index.rst\n+++ b/src/doc/en/reference/interfaces/index.rst\n@@ -76,6 +76,7 @@ and testing to make sure nothing funny is going on).\n    sage/interfaces/gp\n    sage/interfaces/jmoldata\n    sage/interfaces/kash\n+   sage/interfaces/kenzo\n    sage/interfaces/latte\n    sage/interfaces/lie\n    sage/interfaces/lisp\ndiff --git a/src/sage/interfaces/kenzo.py b/src/sage/interfaces/kenzo.py\nindex cea442cf0a..82fc2281b4 100644\n--- a/src/sage/interfaces/kenzo.py\n+++ b/src/sage/interfaces/kenzo.py\n@@ -534,9 +534,9 @@ class KenzoChainComplex(KenzoObject):\n         OUTPUT:\n \n         - A :class:`KenzoChainComplexMorphism` representing the null morphism between\n-        ``self`` and ``target`` of degree ``degree``. If ``target`` takes None value,\n-        ``self`` is assumed as the target chain complex; if ``degree`` takes None value,\n-        0 is assumed as the degree of the null morphism.\n+          ``self`` and ``target`` of degree ``degree``. If ``target`` takes None value,\n+          ``self`` is assumed as the target chain complex; if ``degree`` takes None value,\n+          0 is assumed as the degree of the null morphism.\n \n         EXAMPLES::\n \n@@ -576,20 +576,20 @@ class KenzoChainComplex(KenzoObject):\n         - ``dim`` -- An integer number or None (default)\n \n         - ``comb`` -- A list representing a formal sum of generators in the module\n-        of dimension ``dim`` or None (default). For example, to represent\n-        G7G12 + 3*G7G0 - 5*G7G3 we use the list [3, 'G7G0', -5, 'G7G3', 1, 'G7G12'].\n-        Note that the generators must be in ascending order respect to the number\n-        after the second G in their representation; the parameter\n-        ``comb`` = [1, 'G7G12', 3, 'G7G0', -5, 'G7G3'] will produce an error in\n-        Kenzo.\n+          of dimension ``dim`` or None (default). For example, to represent\n+          G7G12 + 3*G7G0 - 5*G7G3 we use the list [3, 'G7G0', -5, 'G7G3', 1, 'G7G12'].\n+          Note that the generators must be in ascending order respect to the number\n+          after the second G in their representation; the parameter\n+          ``comb`` = [1, 'G7G12', 3, 'G7G0', -5, 'G7G3'] will produce an error in\n+          Kenzo.\n \n         OUTPUT:\n \n         - If ``dim`` and ``comb`` are not None, it returns a Kenzo combination\n-        representing the differential of the formal combination represented by\n-        ``comb`` in the chain complex ``self`` in dimension ``dim``. On the other\n-        hand, if `dim`` or ``comb`` (or both) take None value, the differential\n-        :class:`KenzoMorphismChainComplex` of ``self`` is returned.\n+          representing the differential of the formal combination represented by\n+          ``comb`` in the chain complex ``self`` in dimension ``dim``. On the other\n+          hand, if `dim`` or ``comb`` (or both) take None value, the differential\n+          :class:`KenzoMorphismChainComplex` of ``self`` is returned.\n \n         EXAMPLES::\n \n@@ -1805,9 +1805,9 @@ def build_morphism(source_complex, target_complex, degree, algorithm, strategy,\n     - ``algorithm`` -- A Lisp function defining the mapping (:intr slot in Kenzo)\n \n     - ``strategy`` -- The strategy (:strt slot in Kenzo), which must be one of\n-    the two strings ``gnrt`` or ``cmbn``, depending if the ``algorithm`` (a Lisp\n-    function) uses as arguments a degree and a generator or a combination,\n-    respectively.\n+      the two strings ``gnrt`` or ``cmbn``, depending if the ``algorithm`` (a Lisp\n+      function) uses as arguments a degree and a generator or a combination,\n+      respectively.\n \n     - ``orgn`` -- A list containing a description about the origin of the morphism\n \n```\n\nSome other comments:\n- I would prefer that you didn't use `id` for identity morphisms in the examples, since `id` is an important built-in Python function, so I don't like to see it redefined. This is not a major issue.\n- I find it odd that `KenzoSimplicialSet` inherits from the chain complex class. This means that if `K` is a Kenzo simplicial set, the help message for `K.homology` says\n\n```\nReturn the \"n\"'th homology group of the kenzo chain complex\n```\n and also tab completion reveals `K.tensor_product`. I don't know what a tensor product of a simplicial set with a chain complex, or with a simplicial set, is supposed to return.\n- I've had some crashes, but they're not repeatable. \"Crashes\" is the wrong word \u2014\u00a0\"hangs\" is better, and ctrl-c has not interrupted the process successfully, or maybe I didn't wait long enough. If I figure out how to reproduce this problem, I'll let you know. Here's an example:\n\n```pycon\nsage: [K.homotopy_group(n) for n in range(1,4)]\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-11-92360101f0b6> in <module>()\n----> 1 [K.homotopy_group(n) for n in range(Integer(1),Integer(4))]\n\n<ipython-input-11-92360101f0b6> in <listcomp>(.0)\n----> 1 [K.homotopy_group(n) for n in range(Integer(1),Integer(4))]\n\n/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python3.7/site-packages/sage/interfaces/kenzo.py in homotopy_group(self, n)\n    740         if n not in ZZ or n < 2:\n    741             raise ValueError(\"\"\"homotopy groups can only be computed\n--> 742                 for dimensions greater than 1\"\"\")\n    743         lgens = homotopy_list(self._kenzo, n).python()\n    744         if lgens is not None:\n\nValueError: homotopy groups can only be computed\n                for dimensions greater than 1\nsage: [K.homotopy_group(n) for n in range(2,4)]\nthread_suspend failed\n---------------------------------------------------------------------------\nRuntimeError                              Traceback (most recent call last)\n<ipython-input-12-912b096813cd> in <module>()\n----> 1 [K.homotopy_group(n) for n in range(Integer(2),Integer(4))]\n\n<ipython-input-12-912b096813cd> in <listcomp>(.0)\n----> 1 [K.homotopy_group(n) for n in range(Integer(2),Integer(4))]\n\n/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python3.7/site-packages/sage/interfaces/kenzo.py in homotopy_group(self, n)\n    741             raise ValueError(\"\"\"homotopy groups can only be computed\n    742                 for dimensions greater than 1\"\"\")\n--> 743         lgens = homotopy_list(self._kenzo, n).python()\n    744         if lgens is not None:\n    745             trgens = [0 if i == 1 else i for i in sorted(lgens)]\n\n/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python3.7/site-packages/sage/libs/ecl.pyx in sage.libs.ecl.EclObject.__call__ (build/cythonized/sage/libs/ecl.c:7793)()\n    803         \"\"\"\n    804         lispargs = EclObject(list(args))\n--> 805         return ecl_wrap(ecl_safe_apply(self.obj,(<EclObject>lispargs).obj))\n    806 \n    807     def __richcmp__(left, right, int op):\n\n/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python3.7/site-packages/sage/libs/ecl.pyx in sage.libs.ecl.ecl_safe_apply (build/cythonized/sage/libs/ecl.c:5368)()\n    369 cdef cl_object ecl_safe_apply(cl_object func, cl_object args) except NULL:\n    370     cdef cl_object s\n--> 371     ecl_sig_on()\n    372     cl_funcall(3,safe_apply_clobj,func,args)\n    373     ecl_sig_off()\n\nRuntimeError: Aborted\nsage: K.homotopy_group(2)\n^C^C^C^C^C^C^C^C^Z\n```",
    "created_at": "2019-12-17T22:18:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415530",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:40'></a>First, all tests pass. Second, with some minor tweaks, the documentation builds. I suggest this:

```diff
diff --git a/src/doc/en/reference/interfaces/index.rst b/src/doc/en/reference/interfaces/index.rst
index 8680b94deb..95a8678b07 100644
--- a/src/doc/en/reference/interfaces/index.rst
+++ b/src/doc/en/reference/interfaces/index.rst
@@ -76,6 +76,7 @@ and testing to make sure nothing funny is going on).
    sage/interfaces/gp
    sage/interfaces/jmoldata
    sage/interfaces/kash
+   sage/interfaces/kenzo
    sage/interfaces/latte
    sage/interfaces/lie
    sage/interfaces/lisp
diff --git a/src/sage/interfaces/kenzo.py b/src/sage/interfaces/kenzo.py
index cea442cf0a..82fc2281b4 100644
--- a/src/sage/interfaces/kenzo.py
+++ b/src/sage/interfaces/kenzo.py
@@ -534,9 +534,9 @@ class KenzoChainComplex(KenzoObject):
         OUTPUT:
 
         - A :class:`KenzoChainComplexMorphism` representing the null morphism between
-        ``self`` and ``target`` of degree ``degree``. If ``target`` takes None value,
-        ``self`` is assumed as the target chain complex; if ``degree`` takes None value,
-        0 is assumed as the degree of the null morphism.
+          ``self`` and ``target`` of degree ``degree``. If ``target`` takes None value,
+          ``self`` is assumed as the target chain complex; if ``degree`` takes None value,
+          0 is assumed as the degree of the null morphism.
 
         EXAMPLES::
 
@@ -576,20 +576,20 @@ class KenzoChainComplex(KenzoObject):
         - ``dim`` -- An integer number or None (default)
 
         - ``comb`` -- A list representing a formal sum of generators in the module
-        of dimension ``dim`` or None (default). For example, to represent
-        G7G12 + 3*G7G0 - 5*G7G3 we use the list [3, 'G7G0', -5, 'G7G3', 1, 'G7G12'].
-        Note that the generators must be in ascending order respect to the number
-        after the second G in their representation; the parameter
-        ``comb`` = [1, 'G7G12', 3, 'G7G0', -5, 'G7G3'] will produce an error in
-        Kenzo.
+          of dimension ``dim`` or None (default). For example, to represent
+          G7G12 + 3*G7G0 - 5*G7G3 we use the list [3, 'G7G0', -5, 'G7G3', 1, 'G7G12'].
+          Note that the generators must be in ascending order respect to the number
+          after the second G in their representation; the parameter
+          ``comb`` = [1, 'G7G12', 3, 'G7G0', -5, 'G7G3'] will produce an error in
+          Kenzo.
 
         OUTPUT:
 
         - If ``dim`` and ``comb`` are not None, it returns a Kenzo combination
-        representing the differential of the formal combination represented by
-        ``comb`` in the chain complex ``self`` in dimension ``dim``. On the other
-        hand, if `dim`` or ``comb`` (or both) take None value, the differential
-        :class:`KenzoMorphismChainComplex` of ``self`` is returned.
+          representing the differential of the formal combination represented by
+          ``comb`` in the chain complex ``self`` in dimension ``dim``. On the other
+          hand, if `dim`` or ``comb`` (or both) take None value, the differential
+          :class:`KenzoMorphismChainComplex` of ``self`` is returned.
 
         EXAMPLES::
 
@@ -1805,9 +1805,9 @@ def build_morphism(source_complex, target_complex, degree, algorithm, strategy,
     - ``algorithm`` -- A Lisp function defining the mapping (:intr slot in Kenzo)
 
     - ``strategy`` -- The strategy (:strt slot in Kenzo), which must be one of
-    the two strings ``gnrt`` or ``cmbn``, depending if the ``algorithm`` (a Lisp
-    function) uses as arguments a degree and a generator or a combination,
-    respectively.
+      the two strings ``gnrt`` or ``cmbn``, depending if the ``algorithm`` (a Lisp
+      function) uses as arguments a degree and a generator or a combination,
+      respectively.
 
     - ``orgn`` -- A list containing a description about the origin of the morphism
 
```

Some other comments:
- I would prefer that you didn't use `id` for identity morphisms in the examples, since `id` is an important built-in Python function, so I don't like to see it redefined. This is not a major issue.
- I find it odd that `KenzoSimplicialSet` inherits from the chain complex class. This means that if `K` is a Kenzo simplicial set, the help message for `K.homology` says

```
Return the "n"'th homology group of the kenzo chain complex
```
 and also tab completion reveals `K.tensor_product`. I don't know what a tensor product of a simplicial set with a chain complex, or with a simplicial set, is supposed to return.
- I've had some crashes, but they're not repeatable. "Crashes" is the wrong word — "hangs" is better, and ctrl-c has not interrupted the process successfully, or maybe I didn't wait long enough. If I figure out how to reproduce this problem, I'll let you know. Here's an example:

```pycon
sage: [K.homotopy_group(n) for n in range(1,4)]
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-11-92360101f0b6> in <module>()
----> 1 [K.homotopy_group(n) for n in range(Integer(1),Integer(4))]

<ipython-input-11-92360101f0b6> in <listcomp>(.0)
----> 1 [K.homotopy_group(n) for n in range(Integer(1),Integer(4))]

/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python3.7/site-packages/sage/interfaces/kenzo.py in homotopy_group(self, n)
    740         if n not in ZZ or n < 2:
    741             raise ValueError("""homotopy groups can only be computed
--> 742                 for dimensions greater than 1""")
    743         lgens = homotopy_list(self._kenzo, n).python()
    744         if lgens is not None:

ValueError: homotopy groups can only be computed
                for dimensions greater than 1
sage: [K.homotopy_group(n) for n in range(2,4)]
thread_suspend failed
---------------------------------------------------------------------------
RuntimeError                              Traceback (most recent call last)
<ipython-input-12-912b096813cd> in <module>()
----> 1 [K.homotopy_group(n) for n in range(Integer(2),Integer(4))]

<ipython-input-12-912b096813cd> in <listcomp>(.0)
----> 1 [K.homotopy_group(n) for n in range(Integer(2),Integer(4))]

/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python3.7/site-packages/sage/interfaces/kenzo.py in homotopy_group(self, n)
    741             raise ValueError("""homotopy groups can only be computed
    742                 for dimensions greater than 1""")
--> 743         lgens = homotopy_list(self._kenzo, n).python()
    744         if lgens is not None:
    745             trgens = [0 if i == 1 else i for i in sorted(lgens)]

/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python3.7/site-packages/sage/libs/ecl.pyx in sage.libs.ecl.EclObject.__call__ (build/cythonized/sage/libs/ecl.c:7793)()
    803         """
    804         lispargs = EclObject(list(args))
--> 805         return ecl_wrap(ecl_safe_apply(self.obj,(<EclObject>lispargs).obj))
    806 
    807     def __richcmp__(left, right, int op):

/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python3.7/site-packages/sage/libs/ecl.pyx in sage.libs.ecl.ecl_safe_apply (build/cythonized/sage/libs/ecl.c:5368)()
    369 cdef cl_object ecl_safe_apply(cl_object func, cl_object args) except NULL:
    370     cdef cl_object s
--> 371     ecl_sig_on()
    372     cl_funcall(3,safe_apply_clobj,func,args)
    373     ecl_sig_off()

RuntimeError: Aborted
sage: K.homotopy_group(2)
^C^C^C^C^C^C^C^C^Z
```



---

archive/issue_comments_415531.json:
```json
{
    "body": "<a id='comment:41'></a>There are lots of functions defined at the start of the file, which means that `from sage.interfaces.kenzo import [TAB]` lists lots of options, most of which the user won't actually want. Is this a problem? I think you could put something like  `del chcm_mat, homologie, ...` at the end of the file, but I don't know if it's worth bothering.\n\nA related question: is it worth putting commands like `ecl_eval(\"(require :kenzo)\")` in a try-except block, so that if users try `import sage.interfaces.kenzo` without first installing Kenzo, they get a better error message than a traceback followed by\n\n```\nRuntimeError: ECL says: Module error: Don't know how to REQUIRE KENZO.\n```\n?",
    "created_at": "2019-12-17T22:21:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415531",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:41'></a>There are lots of functions defined at the start of the file, which means that `from sage.interfaces.kenzo import [TAB]` lists lots of options, most of which the user won't actually want. Is this a problem? I think you could put something like  `del chcm_mat, homologie, ...` at the end of the file, but I don't know if it's worth bothering.

A related question: is it worth putting commands like `ecl_eval("(require :kenzo)")` in a try-except block, so that if users try `import sage.interfaces.kenzo` without first installing Kenzo, they get a better error message than a traceback followed by

```
RuntimeError: ECL says: Module error: Don't know how to REQUIRE KENZO.
```
?



---

archive/issue_comments_415532.json:
```json
{
    "body": "<a id='comment:42'></a>Are these changes safe?\n\n```diff\ndiff --git a/src/sage/interfaces/kenzo.py b/src/sage/interfaces/kenzo.py\nindex cea442cf0a..9c48464dc5 100644\n--- a/src/sage/interfaces/kenzo.py\n+++ b/src/sage/interfaces/kenzo.py\n@@ -620,7 +620,7 @@ class KenzoChainComplex(KenzoObject):\n             ------------------------------------------------------------------------------\n             <BLANKLINE>\n         \"\"\"\n-        if dim is not None and comb is not None:\n+        if dim and comb:\n             cmbn_list = pairing(comb)\n             return KenzoObject(dffr_aux1(self._kenzo, dim, cmbn_list))\n         else:\n@@ -741,7 +741,7 @@ class KenzoSimplicialSet(KenzoChainComplex):\n             raise ValueError(\"\"\"homotopy groups can only be computed\n                 for dimensions greater than 1\"\"\")\n         lgens = homotopy_list(self._kenzo, n).python()\n-        if lgens is not None:\n+        if lgens:\n             trgens = [0 if i == 1 else i for i in sorted(lgens)]\n             return AbelianGroup(trgens)\n         else:\n```",
    "created_at": "2019-12-17T22:26:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415532",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:42'></a>Are these changes safe?

```diff
diff --git a/src/sage/interfaces/kenzo.py b/src/sage/interfaces/kenzo.py
index cea442cf0a..9c48464dc5 100644
--- a/src/sage/interfaces/kenzo.py
+++ b/src/sage/interfaces/kenzo.py
@@ -620,7 +620,7 @@ class KenzoChainComplex(KenzoObject):
             ------------------------------------------------------------------------------
             <BLANKLINE>
         """
-        if dim is not None and comb is not None:
+        if dim and comb:
             cmbn_list = pairing(comb)
             return KenzoObject(dffr_aux1(self._kenzo, dim, cmbn_list))
         else:
@@ -741,7 +741,7 @@ class KenzoSimplicialSet(KenzoChainComplex):
             raise ValueError("""homotopy groups can only be computed
                 for dimensions greater than 1""")
         lgens = homotopy_list(self._kenzo, n).python()
-        if lgens is not None:
+        if lgens:
             trgens = [0 if i == 1 else i for i in sorted(lgens)]
             return AbelianGroup(trgens)
         else:
```



---

archive/issue_comments_415533.json:
```json
{
    "body": "<a id='comment:43'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-12-18T12:01:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415533",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:43'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_415534.json:
```json
{
    "body": "<a id='comment:44'></a>I did some of the changes suggested by jhpalmieri. In particular, I did add the module to the documentation index, used a different name for the identity in the doctests, checked that kenzo is installed, and changed the names of the functions we import prepending a `_`.\n\nI expected this last change to solve the problem of the functions appearing in the tab completion, but they still appear. At least, they appear at the end of the list, which might make clearer to the user that they are auxiliary functions.\n\n\nI haven't been able to reproduce the hangs. Any hint on what you did to get them?\n\n---\nNew commits:",
    "created_at": "2019-12-18T12:09:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415534",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:44'></a>I did some of the changes suggested by jhpalmieri. In particular, I did add the module to the documentation index, used a different name for the identity in the doctests, checked that kenzo is installed, and changed the names of the functions we import prepending a `_`.

I expected this last change to solve the problem of the functions appearing in the tab completion, but they still appear. At least, they appear at the end of the list, which might make clearer to the user that they are auxiliary functions.


I haven't been able to reproduce the hangs. Any hint on what you did to get them?

---
New commits:



---

archive/issue_comments_415535.json:
```json
{
    "body": "<a id='comment:45'></a>Replying to [comment:42 jhpalmieri]:\n> Are these changes safe?\n\n\n\nI would say they are not. Those variables could be zero or empty lists, and not all of those cases are equivalent to being `None`.\n\nMaybe the code could be rewritten to treat those cases correctly, but for the sake of robustness, I would prefear to leave the specific check for being `None`.",
    "created_at": "2019-12-18T12:17:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415535",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:45'></a>Replying to [comment:42 jhpalmieri]:
> Are these changes safe?



I would say they are not. Those variables could be zero or empty lists, and not all of those cases are equivalent to being `None`.

Maybe the code could be rewritten to treat those cases correctly, but for the sake of robustness, I would prefear to leave the specific check for being `None`.



---

archive/issue_comments_415536.json:
```json
{
    "body": "<a id='comment:46'></a>Replying to [comment:40 jhpalmieri]:\n> - I find it odd that `KenzoSimplicialSet` inherits from the chain complex class. This means that if `K` is a Kenzo simplicial set, the help message for `K.homology` says\n> \n> ```\n> Return the \"n\"'th homology group of the kenzo chain complex\n> ```\n>  and also tab completion reveals `K.tensor_product`. I don't know what a tensor product of a simplicial set with a chain complex, or with a simplicial set, is supposed to return.\n\nWe prefer to maintain the same class structure of Kenzo, where a simplicial set is implemented inheriting from the class Chain Complex because one can always define a chain complex associated to every simplicial set, and the homology groups of a simplicial set are defined as the homology groups of the associated chain complex. When we ask for the tensor product of a simplicial set and a chain complex, Kenzo computes the tensor product of the chain complex associated to the simplicial set and the second chain complex.",
    "created_at": "2019-12-18T12:29:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415536",
    "user": "https://github.com/ana-romero"
}
```

<a id='comment:46'></a>Replying to [comment:40 jhpalmieri]:
> - I find it odd that `KenzoSimplicialSet` inherits from the chain complex class. This means that if `K` is a Kenzo simplicial set, the help message for `K.homology` says
> 
> ```
> Return the "n"'th homology group of the kenzo chain complex
> ```
>  and also tab completion reveals `K.tensor_product`. I don't know what a tensor product of a simplicial set with a chain complex, or with a simplicial set, is supposed to return.

We prefer to maintain the same class structure of Kenzo, where a simplicial set is implemented inheriting from the class Chain Complex because one can always define a chain complex associated to every simplicial set, and the homology groups of a simplicial set are defined as the homology groups of the associated chain complex. When we ask for the tensor product of a simplicial set and a chain complex, Kenzo computes the tensor product of the chain complex associated to the simplicial set and the second chain complex.



---

archive/issue_comments_415537.json:
```json
{
    "body": "<a id='comment:47'></a>Replying to [comment:44 mmarco]:\n> I did some of the changes suggested by jhpalmieri. In particular, I did add the module to the documentation index, used a different name for the identity in the doctests, checked that kenzo is installed, and changed the names of the functions we import prepending a `_`.\n> \n> I expected this last change to solve the problem of the functions appearing in the tab completion, but they still appear. At least, they appear at the end of the list, which might make clearer to the user that they are auxiliary functions.\n> \n> \n> I haven't been able to reproduce the hangs. Any hint on what you did to get them?\n\n\nIt's not repeatable. For example:\n\n```\nsage: from sage.interfaces.kenzo import EilenbergMacLaneSpace, Sphere\nsage: Sphere(4)\n[K1 Simplicial-Set]\nsage: S4 = Sphere(4)\nsage: [S4.homotopy_group(n) for n in range(6)]\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-4-625ee4458732> in <module>()\n----> 1 [S4.homotopy_group(n) for n in range(Integer(6))]\n\n<ipython-input-4-625ee4458732> in <listcomp>(.0)\n----> 1 [S4.homotopy_group(n) for n in range(Integer(6))]\n\n/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/python3.7/site-packages/sage/interfaces/kenzo.py in homotopy_group(self, n)\n    741         if n not in ZZ or n < 2:\n    742             raise ValueError(\"\"\"homotopy groups can only be computed\n--> 743                 for dimensions greater than 1\"\"\")\n    744         lgens = _homotopy_list(self._kenzo, n).python()\n    745         if lgens is not None:\n\nValueError: homotopy groups can only be computed\n                for dimensions greater than 1\nsage: [S4.homotopy_group(n) for n in range(1,6)]\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-6-f090838c72c2> in <module>()\n----> 1 [S4.homotopy_group(n) for n in range(Integer(1),Integer(6))]\n\n<ipython-input-6-f090838c72c2> in <listcomp>(.0)\n----> 1 [S4.homotopy_group(n) for n in range(Integer(1),Integer(6))]\n\n/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/python3.7/site-packages/sage/interfaces/kenzo.py in homotopy_group(self, n)\n    741         if n not in ZZ or n < 2:\n    742             raise ValueError(\"\"\"homotopy groups can only be computed\n--> 743                 for dimensions greater than 1\"\"\")\n    744         lgens = _homotopy_list(self._kenzo, n).python()\n    745         if lgens is not None:\n\nValueError: homotopy groups can only be computed\n                for dimensions greater than 1\nsage: [S4.homotopy_group(n) for n in range(2,6)]\nthread_suspend failed\n---------------------------------------------------------------------------\nRuntimeError                              Traceback (most recent call last)\n<ipython-input-7-e6bf0078ab7e> in <module>()\n----> 1 [S4.homotopy_group(n) for n in range(Integer(2),Integer(6))]\n\n<ipython-input-7-e6bf0078ab7e> in <listcomp>(.0)\n----> 1 [S4.homotopy_group(n) for n in range(Integer(2),Integer(6))]\n\n/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/python3.7/site-packages/sage/interfaces/kenzo.py in homotopy_group(self, n)\n    742             raise ValueError(\"\"\"homotopy groups can only be computed\n    743                 for dimensions greater than 1\"\"\")\n--> 744         lgens = _homotopy_list(self._kenzo, n).python()\n    745         if lgens is not None:\n    746             trgens = [0 if i == 1 else i for i in sorted(lgens)]\n\n/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/python3.7/site-packages/sage/libs/ecl.pyx in sage.libs.ecl.EclObject.__call__ (build/cythonized/sage/libs/ecl.c:7792)()\n    803         \"\"\"\n    804         lispargs = EclObject(list(args))\n--> 805         return ecl_wrap(ecl_safe_apply(self.obj,(<EclObject>lispargs).obj))\n    806 \n    807     def __richcmp__(left, right, int op):\n\n/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/python3.7/site-packages/sage/libs/ecl.pyx in sage.libs.ecl.ecl_safe_apply (build/cythonized/sage/libs/ecl.c:5367)()\n    369 cdef cl_object ecl_safe_apply(cl_object func, cl_object args) except NULL:\n    370     cdef cl_object s\n--> 371     ecl_sig_on()\n    372     cl_funcall(3,safe_apply_clobj,func,args)\n    373     ecl_sig_off()\n\nRuntimeError: Aborted\n```\nbut the next time I run Sage with the same commands, it works.",
    "created_at": "2019-12-18T23:49:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415537",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:47'></a>Replying to [comment:44 mmarco]:
> I did some of the changes suggested by jhpalmieri. In particular, I did add the module to the documentation index, used a different name for the identity in the doctests, checked that kenzo is installed, and changed the names of the functions we import prepending a `_`.
> 
> I expected this last change to solve the problem of the functions appearing in the tab completion, but they still appear. At least, they appear at the end of the list, which might make clearer to the user that they are auxiliary functions.
> 
> 
> I haven't been able to reproduce the hangs. Any hint on what you did to get them?


It's not repeatable. For example:

```
sage: from sage.interfaces.kenzo import EilenbergMacLaneSpace, Sphere
sage: Sphere(4)
[K1 Simplicial-Set]
sage: S4 = Sphere(4)
sage: [S4.homotopy_group(n) for n in range(6)]
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-4-625ee4458732> in <module>()
----> 1 [S4.homotopy_group(n) for n in range(Integer(6))]

<ipython-input-4-625ee4458732> in <listcomp>(.0)
----> 1 [S4.homotopy_group(n) for n in range(Integer(6))]

/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/python3.7/site-packages/sage/interfaces/kenzo.py in homotopy_group(self, n)
    741         if n not in ZZ or n < 2:
    742             raise ValueError("""homotopy groups can only be computed
--> 743                 for dimensions greater than 1""")
    744         lgens = _homotopy_list(self._kenzo, n).python()
    745         if lgens is not None:

ValueError: homotopy groups can only be computed
                for dimensions greater than 1
sage: [S4.homotopy_group(n) for n in range(1,6)]
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-6-f090838c72c2> in <module>()
----> 1 [S4.homotopy_group(n) for n in range(Integer(1),Integer(6))]

<ipython-input-6-f090838c72c2> in <listcomp>(.0)
----> 1 [S4.homotopy_group(n) for n in range(Integer(1),Integer(6))]

/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/python3.7/site-packages/sage/interfaces/kenzo.py in homotopy_group(self, n)
    741         if n not in ZZ or n < 2:
    742             raise ValueError("""homotopy groups can only be computed
--> 743                 for dimensions greater than 1""")
    744         lgens = _homotopy_list(self._kenzo, n).python()
    745         if lgens is not None:

ValueError: homotopy groups can only be computed
                for dimensions greater than 1
sage: [S4.homotopy_group(n) for n in range(2,6)]
thread_suspend failed
---------------------------------------------------------------------------
RuntimeError                              Traceback (most recent call last)
<ipython-input-7-e6bf0078ab7e> in <module>()
----> 1 [S4.homotopy_group(n) for n in range(Integer(2),Integer(6))]

<ipython-input-7-e6bf0078ab7e> in <listcomp>(.0)
----> 1 [S4.homotopy_group(n) for n in range(Integer(2),Integer(6))]

/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/python3.7/site-packages/sage/interfaces/kenzo.py in homotopy_group(self, n)
    742             raise ValueError("""homotopy groups can only be computed
    743                 for dimensions greater than 1""")
--> 744         lgens = _homotopy_list(self._kenzo, n).python()
    745         if lgens is not None:
    746             trgens = [0 if i == 1 else i for i in sorted(lgens)]

/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/python3.7/site-packages/sage/libs/ecl.pyx in sage.libs.ecl.EclObject.__call__ (build/cythonized/sage/libs/ecl.c:7792)()
    803         """
    804         lispargs = EclObject(list(args))
--> 805         return ecl_wrap(ecl_safe_apply(self.obj,(<EclObject>lispargs).obj))
    806 
    807     def __richcmp__(left, right, int op):

/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/python3.7/site-packages/sage/libs/ecl.pyx in sage.libs.ecl.ecl_safe_apply (build/cythonized/sage/libs/ecl.c:5367)()
    369 cdef cl_object ecl_safe_apply(cl_object func, cl_object args) except NULL:
    370     cdef cl_object s
--> 371     ecl_sig_on()
    372     cl_funcall(3,safe_apply_clobj,func,args)
    373     ecl_sig_off()

RuntimeError: Aborted
```
but the next time I run Sage with the same commands, it works.



---

archive/issue_comments_415538.json:
```json
{
    "body": "<a id='comment:48'></a>Replying to [comment:46 gh-ana-romero]:\n> Replying to [comment:40 jhpalmieri]:\n> > - I find it odd that `KenzoSimplicialSet` inherits from the chain complex class. This means that if `K` is a Kenzo simplicial set, the help message for `K.homology` says\n> > \n> > ```\n> > Return the \"n\"'th homology group of the kenzo chain complex\n> > ```\n> >  and also tab completion reveals `K.tensor_product`. I don't know what a tensor product of a simplicial set with a chain complex, or with a simplicial set, is supposed to return.\n\n> We prefer to maintain the same class structure of Kenzo, where a simplicial set is implemented inheriting from the class Chain Complex because one can always define a chain complex associated to every simplicial set, and the homology groups of a simplicial set are defined as the homology groups of the associated chain complex. When we ask for the tensor product of a simplicial set and a chain complex, Kenzo computes the tensor product of the chain complex associated to the simplicial set and the second chain complex.\n\nOkay, in that case I request that you document this: probably document in the class `KenzoSimplicialSet` that the class inherits from chain complexes, and maybe in some of the chain complex methods what happens if you are applying them to simplicial sets.",
    "created_at": "2019-12-18T23:56:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415538",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:48'></a>Replying to [comment:46 gh-ana-romero]:
> Replying to [comment:40 jhpalmieri]:
> > - I find it odd that `KenzoSimplicialSet` inherits from the chain complex class. This means that if `K` is a Kenzo simplicial set, the help message for `K.homology` says
> > 
> > ```
> > Return the "n"'th homology group of the kenzo chain complex
> > ```
> >  and also tab completion reveals `K.tensor_product`. I don't know what a tensor product of a simplicial set with a chain complex, or with a simplicial set, is supposed to return.

> We prefer to maintain the same class structure of Kenzo, where a simplicial set is implemented inheriting from the class Chain Complex because one can always define a chain complex associated to every simplicial set, and the homology groups of a simplicial set are defined as the homology groups of the associated chain complex. When we ask for the tensor product of a simplicial set and a chain complex, Kenzo computes the tensor product of the chain complex associated to the simplicial set and the second chain complex.

Okay, in that case I request that you document this: probably document in the class `KenzoSimplicialSet` that the class inherits from chain complexes, and maybe in some of the chain complex methods what happens if you are applying them to simplicial sets.



---

archive/issue_comments_415539.json:
```json
{
    "body": "<a id='comment:49'></a>Is equality implemented for simplicial sets?\n\n```\nsage: S4 = Sphere(4)\nsage: S4\n[K1 Simplicial-Set]\nsage: Sphere(4)\n[K1 Simplicial-Set]\nsage: S4 == Sphere(4)\nFalse\n```\nIs this the expected behavior?",
    "created_at": "2019-12-18T23:58:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415539",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:49'></a>Is equality implemented for simplicial sets?

```
sage: S4 = Sphere(4)
sage: S4
[K1 Simplicial-Set]
sage: Sphere(4)
[K1 Simplicial-Set]
sage: S4 == Sphere(4)
False
```
Is this the expected behavior?



---

archive/issue_comments_415540.json:
```json
{
    "body": "<a id='comment:50'></a>Related to the simplicial set/chain complex inheritance: how can I get a chain complex from a simplicial set? For example:\n\n```\nsage: from sage.interfaces.kenzo import Sphere, SChainComplex\nsage: S4 = Sphere(4)\nsage: SChainComplex(S4)\nTrivial chain complex over Integer Ring\n```\nThat's not right.",
    "created_at": "2019-12-19T00:01:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415540",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:50'></a>Related to the simplicial set/chain complex inheritance: how can I get a chain complex from a simplicial set? For example:

```
sage: from sage.interfaces.kenzo import Sphere, SChainComplex
sage: S4 = Sphere(4)
sage: SChainComplex(S4)
Trivial chain complex over Integer Ring
```
That's not right.



---

archive/issue_comments_415541.json:
```json
{
    "body": "<a id='comment:51'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-12-19T01:01:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415541",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:51'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_415542.json:
```json
{
    "body": "<a id='comment:52'></a>I changed the leading single underscore to double underscores at the start and end; that seems to hide them. Is this okay?",
    "created_at": "2019-12-19T01:02:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415542",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:52'></a>I changed the leading single underscore to double underscores at the start and end; that seems to hide them. Is this okay?



---

archive/issue_comments_415543.json:
```json
{
    "body": "<a id='comment:53'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-12-19T12:48:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415543",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:53'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_415544.json:
```json
{
    "body": "<a id='comment:54'></a>Replying to [comment:52 jhpalmieri]:\n> I changed the leading single underscore to double underscores at the start and end; that seems to hide them. Is this okay?\n\n\nIt is good from my part. It solves the problem of tab completion, and does not introduce other problems.\n\n\nI haven't been able to reproduce your hangs. I am guessing there might be some system-specific oddity involved.\n\n> Related to the simplicial set/chain complex inheritance: how can I get a chain complex from a simplicial set? For example:\n\n\nI think you are right. I send a commit to treat the case where a nontrivial module in the chain complex is surrounded with trivial ones.\n\n---\nNew commits:\n|                                                                                                                                          |                                                  |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|\n|[0e2e035](https://git.sagemath.org/sage.git/commit?id=0e2e035a92568e09593d715f95e010ff63065703)|`Treat case with trivial modules in SChainComplex`|\n---\nNew commits:",
    "created_at": "2019-12-19T12:48:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415544",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:54'></a>Replying to [comment:52 jhpalmieri]:
> I changed the leading single underscore to double underscores at the start and end; that seems to hide them. Is this okay?


It is good from my part. It solves the problem of tab completion, and does not introduce other problems.


I haven't been able to reproduce your hangs. I am guessing there might be some system-specific oddity involved.

> Related to the simplicial set/chain complex inheritance: how can I get a chain complex from a simplicial set? For example:


I think you are right. I send a commit to treat the case where a nontrivial module in the chain complex is surrounded with trivial ones.

---
New commits:
|                                                                                                                                          |                                                  |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|
|[0e2e035](https://git.sagemath.org/sage.git/commit?id=0e2e035a92568e09593d715f95e010ff63065703)|`Treat case with trivial modules in SChainComplex`|
---
New commits:



---

archive/issue_events_069125.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-12-30T21:04:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27880#event-69125"
}
```



---

archive/issue_comments_415545.json:
```json
{
    "body": "<a id='comment:56'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-15T14:31:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415545",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:56'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_415546.json:
```json
{
    "body": "<a id='comment:57'></a>I added a few lines to clarify that kenzo simplicial sets can be seen as a particular case of chain complexes.\n\nCould not reproduce the problems pointed by jhpalmieri.\n\nDo you agree to give a positive review, and maybe open another ticket to track the heisenbug?",
    "created_at": "2020-01-15T14:41:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415546",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:57'></a>I added a few lines to clarify that kenzo simplicial sets can be seen as a particular case of chain complexes.

Could not reproduce the problems pointed by jhpalmieri.

Do you agree to give a positive review, and maybe open another ticket to track the heisenbug?



---

archive/issue_comments_415547.json:
```json
{
    "body": "<a id='comment:58'></a>I discovered there is a bug in the Kenzo module to compute the homtopy group:\n\n```\nsage: from sage.interfaces.kenzo import KFiniteSimplicialSet\nsage: CP2 = simplicial_sets.ComplexProjectiveSpace(2)\nsage: KCP2 = KFiniteSimplicialSet(CP2)\nsage: KCP2.homotopy_group(2)\nMultiplicative Abelian group isomorphic to Z\nsage: KCP2.homotopy_group(3)\nTrivial Abelian group\nsage: KCP2.homotopy_group(4)\nTrivial Abelian group\nsage: KCP2.homotopy_group(5)\nTrivial Abelian group\nsage: KCP2.homotopy_group(6)\nTrivial Abelian group\n```\n\nThe fifth homotopy groups and higher are wrong.\n\nWe have found the source of the error and are working on it. Will make a new release of the kenzo package in a few days.",
    "created_at": "2020-01-16T11:15:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415547",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:58'></a>I discovered there is a bug in the Kenzo module to compute the homtopy group:

```
sage: from sage.interfaces.kenzo import KFiniteSimplicialSet
sage: CP2 = simplicial_sets.ComplexProjectiveSpace(2)
sage: KCP2 = KFiniteSimplicialSet(CP2)
sage: KCP2.homotopy_group(2)
Multiplicative Abelian group isomorphic to Z
sage: KCP2.homotopy_group(3)
Trivial Abelian group
sage: KCP2.homotopy_group(4)
Trivial Abelian group
sage: KCP2.homotopy_group(5)
Trivial Abelian group
sage: KCP2.homotopy_group(6)
Trivial Abelian group
```

The fifth homotopy groups and higher are wrong.

We have found the source of the error and are working on it. Will make a new release of the kenzo package in a few days.



---

archive/issue_comments_415548.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-01-16T11:15:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415548",
    "user": "https://github.com/miguelmarco"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_events_069126.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27880#event-69126"
}
```



---

archive/issue_events_069127.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27880#event-69127"
}
```



---

archive/issue_comments_415549.json:
```json
{
    "body": "<a id='comment:59'></a>Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.",
    "created_at": "2020-04-14T19:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415549",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:59'></a>Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.



---

archive/issue_comments_415550.json:
```json
{
    "body": "<a id='comment:60'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-05-21T15:02:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415550",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:60'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_415551.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,15 @@\n+An upcoming version of Kenzo will include functions to compute homotopy groups. \n+\n+This ticket will track the work to update it and the corresponding interface\n+\n+The tarball of the new version is available at https://github.com/miguelmarco/kenzo/releases/download/1.1.9/kenzo-1.1.9.tar.gz\n+\n+As usual, the new version can be tested downloading the tarball, putting it in the /upstream/ directory, and runnning\n+\n+\n+\\`\\`\\`\n+sage -f kenzo\n+\\`\\`\\`\n \n \n Author: Miguel Marco, Ana Romero, Julian Cuevas\n```\n",
    "created_at": "2020-05-21T15:02:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415551",
    "user": "https://github.com/miguelmarco"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,15 @@
+An upcoming version of Kenzo will include functions to compute homotopy groups. 
+
+This ticket will track the work to update it and the corresponding interface
+
+The tarball of the new version is available at https://github.com/miguelmarco/kenzo/releases/download/1.1.9/kenzo-1.1.9.tar.gz
+
+As usual, the new version can be tested downloading the tarball, putting it in the /upstream/ directory, and runnning
+
+
+\`\`\`
+sage -f kenzo
+\`\`\`
 
 
 Author: Miguel Marco, Ana Romero, Julian Cuevas
```




---

archive/issue_comments_415552.json:
```json
{
    "body": "<a id='comment:61'></a>Bumped Kenzo version, and added some warnings in the documentation. I think it is ready for review.\n\n---\nNew commits:",
    "created_at": "2020-05-21T15:02:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415552",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:61'></a>Bumped Kenzo version, and added some warnings in the documentation. I think it is ready for review.

---
New commits:



---

archive/issue_comments_415553.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-05-21T15:03:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415553",
    "user": "https://github.com/miguelmarco"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_415554.json:
```json
{
    "body": "<a id='comment:63'></a>Please put the new upstream_url field in checksums.ini",
    "created_at": "2020-05-21T22:34:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415554",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:63'></a>Please put the new upstream_url field in checksums.ini



---

archive/issue_comments_415555.json:
```json
{
    "body": "<a id='comment:64'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-05-21T22:40:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415555",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:64'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_415556.json:
```json
{
    "body": "<a id='comment:65'></a>Does everything it says it does, and I have no troubles with installing it on Ubuntu 18. LGTM.",
    "created_at": "2020-05-25T06:53:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415556",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:65'></a>Does everything it says it does, and I have no troubles with installing it on Ubuntu 18. LGTM.



---

archive/issue_comments_415557.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-05-25T06:53:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415557",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_415558.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-05-26T22:33:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415558",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_415559.json:
```json
{
    "body": "<a id='comment:66'></a>PDF build fails even though its supposedly optional:\n\n```\n[docpdf] Traceback (most recent call last):\n[docpdf]   File \"/home/release/Sage/local/lib/python3.7/runpy.py\", line 193, in _run_module_as_main\n[docpdf]     \"__main__\", mod_spec)\n[docpdf]   File \"/home/release/Sage/local/lib/python3.7/runpy.py\", line 85, in _run_code\n[docpdf]     exec(code, run_globals)\n[docpdf]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__main__.py\", line 2, in <module>\n[docpdf]     main()\n[docpdf]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 1717, in main\n[docpdf]     builder()\n[docpdf]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 328, in _wrapper\n[docpdf]     getattr(get_builder(document), 'inventory')(*args, **kwds)\n[docpdf]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 553, in _wrapper\n[docpdf]     self._build_everything_except_bibliography(lang, format, *args, **kwds)\n[docpdf]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 539, in _build_everything_except_bibliography\n[docpdf]     build_many(build_ref_doc, non_references)\n[docpdf]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 281, in build_many\n[docpdf]     _build_many(target, args, processes=NUM_THREADS)\n[docpdf]   File \"/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/utils.py\", line 283, in build_many\n[docpdf]     raise worker_exc.original_exception\n[docpdf] sage.misc.package.PackageNotFoundError: the package 'kenzo' was not found. You can install it by running 'sage -i kenzo' in a shell\n[docpdf] \n[docpdf]     Note: incremental documentation builds sometimes cause spurious\n[docpdf]     error messages. To be certain that these are real errors, run\n[docpdf]     \"make doc-clean\" first and try again.\nmake[1]: *** [Makefile:2019: doc-pdf] Error 1\n```",
    "created_at": "2020-05-26T22:33:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415559",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:66'></a>PDF build fails even though its supposedly optional:

```
[docpdf] Traceback (most recent call last):
[docpdf]   File "/home/release/Sage/local/lib/python3.7/runpy.py", line 193, in _run_module_as_main
[docpdf]     "__main__", mod_spec)
[docpdf]   File "/home/release/Sage/local/lib/python3.7/runpy.py", line 85, in _run_code
[docpdf]     exec(code, run_globals)
[docpdf]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__main__.py", line 2, in <module>
[docpdf]     main()
[docpdf]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 1717, in main
[docpdf]     builder()
[docpdf]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 328, in _wrapper
[docpdf]     getattr(get_builder(document), 'inventory')(*args, **kwds)
[docpdf]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 553, in _wrapper
[docpdf]     self._build_everything_except_bibliography(lang, format, *args, **kwds)
[docpdf]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 539, in _build_everything_except_bibliography
[docpdf]     build_many(build_ref_doc, non_references)
[docpdf]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 281, in build_many
[docpdf]     _build_many(target, args, processes=NUM_THREADS)
[docpdf]   File "/home/release/Sage/local/lib/python3.7/site-packages/sage_setup/docbuild/utils.py", line 283, in build_many
[docpdf]     raise worker_exc.original_exception
[docpdf] sage.misc.package.PackageNotFoundError: the package 'kenzo' was not found. You can install it by running 'sage -i kenzo' in a shell
[docpdf] 
[docpdf]     Note: incremental documentation builds sometimes cause spurious
[docpdf]     error messages. To be certain that these are real errors, run
[docpdf]     "make doc-clean" first and try again.
make[1]: *** [Makefile:2019: doc-pdf] Error 1
```



---

archive/issue_comments_415560.json:
```json
{
    "body": "<a id='comment:67'></a>It is probably this line at the top of the file:\n\n```\n+if not 'kenzo' in installed_packages():\n+    raise PackageNotFoundError('kenzo')\n```\ncoupled with the fact that it has been added to the references (which it wasn't before).\n\n`@`vbraun Is there a mechanism in the html doc that catches this error being thrown? Is the same thing not done for the pdf doc?",
    "created_at": "2020-05-26T22:47:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415560",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:67'></a>It is probably this line at the top of the file:

```
+if not 'kenzo' in installed_packages():
+    raise PackageNotFoundError('kenzo')
```
coupled with the fact that it has been added to the references (which it wasn't before).

`@`vbraun Is there a mechanism in the html doc that catches this error being thrown? Is the same thing not done for the pdf doc?



---

archive/issue_comments_415561.json:
```json
{
    "body": "<a id='comment:68'></a>I get the same error when building the html docs. Do we need that line? I would be tempted to at least change it to\n\n```\nif 'kenzo' in installed_packages():\n    # do all of the Kenzo initialization\n    # Redirection of ECL and Maxima stdout to /dev/null\n    # This is also done in the Maxima library, but we\n    # also do it here for redundancy.\n    ecl_eval(r\"\"\"(defparameter *dev-null* (make-two-way-stream\n                  (make-concatenated-stream) (make-broadcast-stream)))\"\"\")\n    ...\n```\nMaybe even turn this into a function and then call the function. The style in the Sage library doesn't have a lot of code evaluated when a module is loaded, as is done in `kenzo.py`.",
    "created_at": "2020-05-27T00:04:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415561",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:68'></a>I get the same error when building the html docs. Do we need that line? I would be tempted to at least change it to

```
if 'kenzo' in installed_packages():
    # do all of the Kenzo initialization
    # Redirection of ECL and Maxima stdout to /dev/null
    # This is also done in the Maxima library, but we
    # also do it here for redundancy.
    ecl_eval(r"""(defparameter *dev-null* (make-two-way-stream
                  (make-concatenated-stream) (make-broadcast-stream)))""")
    ...
```
Maybe even turn this into a function and then call the function. The style in the Sage library doesn't have a lot of code evaluated when a module is loaded, as is done in `kenzo.py`.



---

archive/issue_comments_415562.json:
```json
{
    "body": "<a id='comment:69'></a>Oh, and there are some doctests that need fixing:\n\n```diff\ndiff --git a/src/sage/interfaces/kenzo.py b/src/sage/interfaces/kenzo.py\nindex dd3aeae9fe..f23fc54fd2 100644\n--- a/src/sage/interfaces/kenzo.py\n+++ b/src/sage/interfaces/kenzo.py\n@@ -1121,14 +1119,14 @@ def SChainComplex(kchaincomplex, start=0, end=15):\n \n     ::\n \n-        sage: from sage.interfaces.kenzo import SChainComplex, Sphere\n-        sage: S4 = Sphere(4)\n-        sage: C = SChainComplex(S4)\n-        sage: C\n+        sage: from sage.interfaces.kenzo import SChainComplex, Sphere          # optional - kenzo\n+        sage: S4 = Sphere(4)                      # optional - kenzo\n+        sage: C = SChainComplex(S4)               # optional - kenzo\n+        sage: C                                   # optional - kenzo\n         Chain complex with at most 3 nonzero terms over Integer Ring\n-        sage: C._ascii_art_()\n+        sage: C._ascii_art_()                     # optional - kenzo\n         0 <-- C_4 <-- 0  ...  0 <-- C_0 <-- 0\n-        sage: [C.homology(i) for i in range(6)]\n+        sage: [C.homology(i) for i in range(6)]   # optional - kenzo\n         [Z, 0, 0, 0, Z, 0]\n     \"\"\"\n     matrices = {}\n```",
    "created_at": "2020-05-27T00:05:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415562",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:69'></a>Oh, and there are some doctests that need fixing:

```diff
diff --git a/src/sage/interfaces/kenzo.py b/src/sage/interfaces/kenzo.py
index dd3aeae9fe..f23fc54fd2 100644
--- a/src/sage/interfaces/kenzo.py
+++ b/src/sage/interfaces/kenzo.py
@@ -1121,14 +1119,14 @@ def SChainComplex(kchaincomplex, start=0, end=15):
 
     ::
 
-        sage: from sage.interfaces.kenzo import SChainComplex, Sphere
-        sage: S4 = Sphere(4)
-        sage: C = SChainComplex(S4)
-        sage: C
+        sage: from sage.interfaces.kenzo import SChainComplex, Sphere          # optional - kenzo
+        sage: S4 = Sphere(4)                      # optional - kenzo
+        sage: C = SChainComplex(S4)               # optional - kenzo
+        sage: C                                   # optional - kenzo
         Chain complex with at most 3 nonzero terms over Integer Ring
-        sage: C._ascii_art_()
+        sage: C._ascii_art_()                     # optional - kenzo
         0 <-- C_4 <-- 0  ...  0 <-- C_0 <-- 0
-        sage: [C.homology(i) for i in range(6)]
+        sage: [C.homology(i) for i in range(6)]   # optional - kenzo
         [Z, 0, 0, 0, Z, 0]
     """
     matrices = {}
```



---

archive/issue_comments_415563.json:
```json
{
    "body": "<a id='comment:70'></a>And to the extent that I looked at this 5 months ago, I'm sure I didn't run tests without installing Kenzo first.",
    "created_at": "2020-05-27T01:40:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415563",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:70'></a>And to the extent that I looked at this 5 months ago, I'm sure I didn't run tests without installing Kenzo first.



---

archive/issue_comments_415564.json:
```json
{
    "body": "<a id='comment:71'></a>Replying to [comment:70 jhpalmieri]:\n> And to the extent that I looked at this 5 months ago, I'm sure I didn't run tests without installing Kenzo first.\n\n\nI did the same thing: I installed Kenzo and ran tests, forgetting to run them before the installation.",
    "created_at": "2020-05-27T01:45:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415564",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:71'></a>Replying to [comment:70 jhpalmieri]:
> And to the extent that I looked at this 5 months ago, I'm sure I didn't run tests without installing Kenzo first.


I did the same thing: I installed Kenzo and ran tests, forgetting to run them before the installation.



---

archive/issue_comments_415565.json:
```json
{
    "body": "<a id='comment:72'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2020-05-28T01:39:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415565",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:72'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_415566.json:
```json
{
    "body": "<a id='comment:73'></a>Here is a proposed fix (the [last commit](https://git.sagemath.org/sage.git/commit/?id=217e47c23a094e28573a615bd42fc29232d38f3c) is the only new thing). The change to `spkg-install.in` means that `make kenzo-clean` actually does something.",
    "created_at": "2020-05-28T01:41:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415566",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:73'></a>Here is a proposed fix (the [last commit](https://git.sagemath.org/sage.git/commit/?id=217e47c23a094e28573a615bd42fc29232d38f3c) is the only new thing). The change to `spkg-install.in` means that `make kenzo-clean` actually does something.



---

archive/issue_comments_415567.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-05-28T01:41:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415567",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_415568.json:
```json
{
    "body": "<a id='comment:75'></a>Oh, I've also removed the use of `sage.misc.packages`, because (a) the Sage distro people don't like it, and (b) it could allow for the use of a system-wide installation of Kenzo (using a system-wide installation of `ecl`).",
    "created_at": "2020-05-28T01:44:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415568",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:75'></a>Oh, I've also removed the use of `sage.misc.packages`, because (a) the Sage distro people don't like it, and (b) it could allow for the use of a system-wide installation of Kenzo (using a system-wide installation of `ecl`).



---

archive/issue_comments_415569.json:
```json
{
    "body": "<a id='comment:76'></a>Replying to [comment:75 jhpalmieri]:\n> Oh, I've also removed the use of `sage.misc.packages`, because (a) the Sage distro people don't like it, and (b) it could allow for the use of a system-wide installation of Kenzo (using a system-wide installation of `ecl`).\n\n\nI think this would be better as a `Feature` following #20382.",
    "created_at": "2020-05-28T03:26:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415569",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:76'></a>Replying to [comment:75 jhpalmieri]:
> Oh, I've also removed the use of `sage.misc.packages`, because (a) the Sage distro people don't like it, and (b) it could allow for the use of a system-wide installation of Kenzo (using a system-wide installation of `ecl`).


I think this would be better as a `Feature` following #20382.



---

archive/issue_comments_415570.json:
```json
{
    "body": "<a id='comment:77'></a>If you want to do that now, that's great. Otherwise, let's do it on another ticket.",
    "created_at": "2020-05-28T04:56:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415570",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:77'></a>If you want to do that now, that's great. Otherwise, let's do it on another ticket.



---

archive/issue_comments_415571.json:
```json
{
    "body": "<a id='comment:78'></a>I think we should do that now as a replacement to the `kenzo_installed` function. I can't do it today, but I will do it first thing tomorrow morning.",
    "created_at": "2020-05-28T05:05:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415571",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:78'></a>I think we should do that now as a replacement to the `kenzo_installed` function. I can't do it today, but I will do it first thing tomorrow morning.



---

archive/issue_comments_415572.json:
```json
{
    "body": "<a id='comment:79'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-05-29T01:30:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415572",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:79'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_415573.json:
```json
{
    "body": "<a id='comment:80'></a>Okay, here it is using `Feature`. However, I cannot install Kenzo with 9.2.beta0 as I am getting this error:\n\n```\n[kenzo-1.1.9] Copying package files from temporary location /home/uqtscrim/sage/local/var/tmp/sage/build/kenzo-1.1.9/inst to /home/uqtscrim/sage/local\n[kenzo-1.1.9] cp: cannot overwrite non-directory '/home/uqtscrim/sage/local/./lib/ecl' with directory '/home/uqtscrim/sage/local/var/tmp/sage/build/kenzo-1.1.9/inst/home/uqtscrim/sage/local/./lib/ecl'\n```\neven though this `ecl` is a symlink to `$SAGE_ROOT/include/ecl`. Ideas?",
    "created_at": "2020-05-29T01:33:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415573",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:80'></a>Okay, here it is using `Feature`. However, I cannot install Kenzo with 9.2.beta0 as I am getting this error:

```
[kenzo-1.1.9] Copying package files from temporary location /home/uqtscrim/sage/local/var/tmp/sage/build/kenzo-1.1.9/inst to /home/uqtscrim/sage/local
[kenzo-1.1.9] cp: cannot overwrite non-directory '/home/uqtscrim/sage/local/./lib/ecl' with directory '/home/uqtscrim/sage/local/var/tmp/sage/build/kenzo-1.1.9/inst/home/uqtscrim/sage/local/./lib/ecl'
```
even though this `ecl` is a symlink to `$SAGE_ROOT/include/ecl`. Ideas?



---

archive/issue_comments_415574.json:
```json
{
    "body": "<a id='comment:81'></a>What OS is this?",
    "created_at": "2020-05-29T05:03:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415574",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:81'></a>What OS is this?



---

archive/issue_comments_415575.json:
```json
{
    "body": "<a id='comment:82'></a>Ubuntu 18.04",
    "created_at": "2020-05-29T05:04:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415575",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:82'></a>Ubuntu 18.04



---

archive/issue_comments_415576.json:
```json
{
    "body": "<a id='comment:83'></a>I don't have any ideas, but I'll try with an Ubuntu virtual machine on my mac. If necessary, we can revert my change to `spkg-install.in`, and just manually copy the file. Or try this instead:\n\n```diff\ndiff --git a/build/pkgs/kenzo/spkg-install.in b/build/pkgs/kenzo/spkg-install.in\nindex 294a543d7e..315b6142f3 100644\n--- a/build/pkgs/kenzo/spkg-install.in\n+++ b/build/pkgs/kenzo/spkg-install.in\n@@ -8,7 +8,8 @@ cd src\n ecl < compile.lisp\n \n echo \"moving kenzo--all-systems.fasb to  $SAGE_LOCAL/lib/ecl/kenzo.fas\"\n-sdh_install -T kenzo--all-systems.fasb $SAGE_LOCAL/lib/ecl/kenzo.fas\n+cp kenzo--all-systems.fasb kenzo.fas\n+sdh_install kenzo.fas $SAGE_LOCAL/lib/ecl\n \n \n if [ $? -ne 0 ]; then\n```\n(I seem to remember some people have problems with `sdh_install -T` before.)",
    "created_at": "2020-05-29T05:10:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415576",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:83'></a>I don't have any ideas, but I'll try with an Ubuntu virtual machine on my mac. If necessary, we can revert my change to `spkg-install.in`, and just manually copy the file. Or try this instead:

```diff
diff --git a/build/pkgs/kenzo/spkg-install.in b/build/pkgs/kenzo/spkg-install.in
index 294a543d7e..315b6142f3 100644
--- a/build/pkgs/kenzo/spkg-install.in
+++ b/build/pkgs/kenzo/spkg-install.in
@@ -8,7 +8,8 @@ cd src
 ecl < compile.lisp
 
 echo "moving kenzo--all-systems.fasb to  $SAGE_LOCAL/lib/ecl/kenzo.fas"
-sdh_install -T kenzo--all-systems.fasb $SAGE_LOCAL/lib/ecl/kenzo.fas
+cp kenzo--all-systems.fasb kenzo.fas
+sdh_install kenzo.fas $SAGE_LOCAL/lib/ecl
 
 
 if [ $? -ne 0 ]; then
```
(I seem to remember some people have problems with `sdh_install -T` before.)



---

archive/issue_comments_415577.json:
```json
{
    "body": "<a id='comment:84'></a>I see the problem on Ubuntu, and my proposal didn't work, but try this (copied from maxima's spkg-install.in file):\n\n```diff\ndiff --git a/build/pkgs/kenzo/spkg-install.in b/build/pkgs/kenzo/spkg-install.in\nindex 294a543d7e..fed616705f 100644\n--- a/build/pkgs/kenzo/spkg-install.in\n+++ b/build/pkgs/kenzo/spkg-install.in\n@@ -7,8 +7,12 @@ cd src\n \n ecl < compile.lisp\n \n-echo \"moving kenzo--all-systems.fasb to  $SAGE_LOCAL/lib/ecl/kenzo.fas\"\n-sdh_install -T kenzo--all-systems.fasb $SAGE_LOCAL/lib/ecl/kenzo.fas\n+# Install Kenzo into ECL's library directory:\n+ECLLIB=`ecl -eval \"(princ (SI:GET-LIBRARY-PATHNAME))\" -eval \"(quit)\"`\n+echo\n+echo \"Now installing Kenzo as '$ECLLIB/kenzo.fas'...\"\n+cp -f kenzo--all-systems.fasb \"$ECLLIB/kenzo.fas\" \\\n+    || sdh_die \"Failed to install 'kenzo--all-systems.fasb' as '$ECLLIB/kenzo.fas'.\"\n \n \n if [ $? -ne 0 ]; then\n```\nIt doesn't create a good manifest file, so uninstallation doesn't do anything. `maxima.fas` is missing from maxima's manifest, too, so I guess we could settle for this.",
    "created_at": "2020-05-29T05:39:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415577",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:84'></a>I see the problem on Ubuntu, and my proposal didn't work, but try this (copied from maxima's spkg-install.in file):

```diff
diff --git a/build/pkgs/kenzo/spkg-install.in b/build/pkgs/kenzo/spkg-install.in
index 294a543d7e..fed616705f 100644
--- a/build/pkgs/kenzo/spkg-install.in
+++ b/build/pkgs/kenzo/spkg-install.in
@@ -7,8 +7,12 @@ cd src
 
 ecl < compile.lisp
 
-echo "moving kenzo--all-systems.fasb to  $SAGE_LOCAL/lib/ecl/kenzo.fas"
-sdh_install -T kenzo--all-systems.fasb $SAGE_LOCAL/lib/ecl/kenzo.fas
+# Install Kenzo into ECL's library directory:
+ECLLIB=`ecl -eval "(princ (SI:GET-LIBRARY-PATHNAME))" -eval "(quit)"`
+echo
+echo "Now installing Kenzo as '$ECLLIB/kenzo.fas'..."
+cp -f kenzo--all-systems.fasb "$ECLLIB/kenzo.fas" \
+    || sdh_die "Failed to install 'kenzo--all-systems.fasb' as '$ECLLIB/kenzo.fas'."
 
 
 if [ $? -ne 0 ]; then
```
It doesn't create a good manifest file, so uninstallation doesn't do anything. `maxima.fas` is missing from maxima's manifest, too, so I guess we could settle for this.



---

archive/issue_comments_415578.json:
```json
{
    "body": "<a id='comment:85'></a>So that worked. It is strange that this worked on the same machine with 9.1 but not with 9.2.beta0. Something seems to have changed between the two versions...",
    "created_at": "2020-05-29T05:46:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415578",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:85'></a>So that worked. It is strange that this worked on the same machine with 9.1 but not with 9.2.beta0. Something seems to have changed between the two versions...



---

archive/issue_comments_415579.json:
```json
{
    "body": "<a id='comment:86'></a>I may be misunderstanding, but my guess is this: with 9.1, you were using the \"original\" branch. I changed spkg-install.in, and perhaps you didn't try that with 9.1, but coincidentally tried it for the first time with 9.2.\n\nAnyway, I still prefer my most recently proposed change to spkg-install.in to the original branch: the original branch just copies files to `SAGE_LOCAL/lib/ecl`, whereas the proposal tries to guess the location of `ecl` libraries (in case it's in a nonstandard location). Or maybe it's easier to say: we should install `kenzo.fas` the same place we install `maxima.fas`. I wish we could get this to write a good manifest file so that `make kenzo-clean` would actually uninstall something, but I don't know how to overcome the problems on Ubuntu.",
    "created_at": "2020-05-29T16:22:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415579",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:86'></a>I may be misunderstanding, but my guess is this: with 9.1, you were using the "original" branch. I changed spkg-install.in, and perhaps you didn't try that with 9.1, but coincidentally tried it for the first time with 9.2.

Anyway, I still prefer my most recently proposed change to spkg-install.in to the original branch: the original branch just copies files to `SAGE_LOCAL/lib/ecl`, whereas the proposal tries to guess the location of `ecl` libraries (in case it's in a nonstandard location). Or maybe it's easier to say: we should install `kenzo.fas` the same place we install `maxima.fas`. I wish we could get this to write a good manifest file so that `make kenzo-clean` would actually uninstall something, but I don't know how to overcome the problems on Ubuntu.



---

archive/issue_comments_415580.json:
```json
{
    "body": "<a id='comment:87'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-05-29T19:52:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415580",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:87'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_415581.json:
```json
{
    "body": "<a id='comment:88'></a>Here are two changes: my proposed change to `spkg-install.in` and also explicitly `(require :kenzo)`. This shouldn't be necessary since it's part of the feature check, but it doesn't hurt, and it's a good idea to make it explicit in case the feature check gets changed.",
    "created_at": "2020-05-29T19:55:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415581",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:88'></a>Here are two changes: my proposed change to `spkg-install.in` and also explicitly `(require :kenzo)`. This shouldn't be necessary since it's part of the feature check, but it doesn't hurt, and it's a good idea to make it explicit in case the feature check gets changed.



---

archive/issue_comments_415582.json:
```json
{
    "body": "<a id='comment:89'></a>I'm happy with your feature changes, by the way; thanks for doing that.",
    "created_at": "2020-05-30T19:48:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415582",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:89'></a>I'm happy with your feature changes, by the way; thanks for doing that.



---

archive/issue_comments_415583.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-05-31T05:31:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415583",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_415584.json:
```json
{
    "body": "<a id='comment:90'></a>No, I was using commit 217e47c. Strange.\n\nThanks. I think you changes are good. I like the explicit check. Back to positive as this should now build the docs as well (at least is does for me).",
    "created_at": "2020-05-31T05:31:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415584",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:90'></a>No, I was using commit 217e47c. Strange.

Thanks. I think you changes are good. I like the explicit check. Back to positive as this should now build the docs as well (at least is does for me).



---

archive/issue_comments_415585.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-05-31T23:12:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27880#issuecomment-415585",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_069128.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-05-31T23:12:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27880",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27880#event-69128"
}
```
