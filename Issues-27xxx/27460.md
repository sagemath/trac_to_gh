# Issue 27460: fix issue in graph_plot_js

archive/issues_027223.json:
```json
{
    "assignees": [],
    "body": "Fix issue reported in https://groups.google.com/forum/#!topic/sage-devel/oD1jQVirJBs\n\nThe mapping of vertices given to `d3.js` was incorrect\n\n**Branch/Commit:** [8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a](https://github.com/sagemath/sagetrac-mirror/commit/8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a)\n\n**Reviewer:** Fr\u00e9d\u00e9ric Chapoton\n\n**Author:** David Coudert\n\nIssue created by migration from https://trac.sagemath.org/ticket/27460\n\n",
    "closed_at": "2019-03-13T18:29:16Z",
    "created_at": "2019-03-11T08:04:26Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "fix issue in graph_plot_js",
    "type": "issue",
    "updated_at": "2019-03-13T18:29:16Z",
    "url": "https://github.com/sagemath/sage/issues/27460",
    "user": "https://github.com/dcoudert"
}
```
Fix issue reported in https://groups.google.com/forum/#!topic/sage-devel/oD1jQVirJBs

The mapping of vertices given to `d3.js` was incorrect

**Branch/Commit:** [8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a](https://github.com/sagemath/sagetrac-mirror/commit/8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a)

**Reviewer:** Frédéric Chapoton

**Author:** David Coudert

Issue created by migration from https://trac.sagemath.org/ticket/27460





---

archive/issue_events_329677.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-03-11T08:04:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27460#event-329677"
}
```



---

archive/issue_events_329678.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-03-11T08:04:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
    "label_color": "08517b",
    "label_name": "component: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27460#event-329678"
}
```



---

archive/issue_events_329679.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-03-11T08:04:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "008080",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27460#event-329679"
}
```



---

archive/issue_comments_427641.json:
```json
{
    "body": "**Commit:** [771b91e451985ba2476570915ba92ab0228b8b03](https://github.com/sagemath/sagetrac-mirror/commit/771b91e451985ba2476570915ba92ab0228b8b03)",
    "created_at": "2019-03-11T08:06:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27460#issuecomment-427641",
    "user": "https://github.com/dcoudert"
}
```

**Commit:** [771b91e451985ba2476570915ba92ab0228b8b03](https://github.com/sagemath/sagetrac-mirror/commit/771b91e451985ba2476570915ba92ab0228b8b03)



---

archive/issue_comments_427642.json:
```json
{
    "body": "**Branch:** [u/dcoudert/27460_graph_plot_js](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/27460_graph_plot_js)",
    "created_at": "2019-03-11T08:06:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27460#issuecomment-427642",
    "user": "https://github.com/dcoudert"
}
```

**Branch:** [u/dcoudert/27460_graph_plot_js](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/27460_graph_plot_js)



---

archive/issue_comments_427643.json:
```json
{
    "body": "<a id='comment:1'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/771b91e451985ba2476570915ba92ab0228b8b03\">771b91e</a></td><td><code>trac #27460: fix ordering</code></td></tr></table>\n",
    "created_at": "2019-03-11T08:06:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27460#issuecomment-427643",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:1'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/771b91e451985ba2476570915ba92ab0228b8b03">771b91e</a></td><td><code>trac #27460: fix ordering</code></td></tr></table>




---

archive/issue_events_329680.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-03-11T08:06:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27460#event-329680"
}
```



---

archive/issue_comments_427644.json:
```json
{
    "body": "<a id='comment:2'></a>\nHaving a doctest would be good..",
    "created_at": "2019-03-11T12:40:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27460#issuecomment-427644",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:2'></a>
Having a doctest would be good..



---

archive/issue_comments_427645.json:
```json
{
    "body": "**Changing commit** from \"[771b91e451985ba2476570915ba92ab0228b8b03](https://github.com/sagemath/sagetrac-mirror/commit/771b91e451985ba2476570915ba92ab0228b8b03)\" to \"[ebddf9db0304488ab3f6fee747ec6131a1acfd94](https://github.com/sagemath/sagetrac-mirror/commit/ebddf9db0304488ab3f6fee747ec6131a1acfd94)\".",
    "created_at": "2019-03-11T13:19:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27460#issuecomment-427645",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[771b91e451985ba2476570915ba92ab0228b8b03](https://github.com/sagemath/sagetrac-mirror/commit/771b91e451985ba2476570915ba92ab0228b8b03)" to "[ebddf9db0304488ab3f6fee747ec6131a1acfd94](https://github.com/sagemath/sagetrac-mirror/commit/ebddf9db0304488ab3f6fee747ec6131a1acfd94)".



---

archive/issue_comments_427646.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ebddf9db0304488ab3f6fee747ec6131a1acfd94\">ebddf9d</a></td><td><code>trac #27460: add doctest</code></td></tr></table>\n",
    "created_at": "2019-03-11T13:19:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27460#issuecomment-427646",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ebddf9db0304488ab3f6fee747ec6131a1acfd94">ebddf9d</a></td><td><code>trac #27460: add doctest</code></td></tr></table>




---

archive/issue_comments_427647.json:
```json
{
    "body": "<a id='comment:4'></a>\nI added a doctest but it's not good. It works on my laptop with py3, but not with py2.\nThe order of the keys of the dictionaries is not the same in py2 and py3 :(\n\nwith py2, I get\n\n```\n...\"links\": [{\"strength\": 0, \"target\": 0, \"color\": \"#aaa\", \"curve\": 0, \"source\": 1, \"name\": \"\"}], \"pos\": [], \"edge_thickness\": 4, \"loops\": [], \"edge_labels\": false, \"vertex_size\": 7, \"vertex_labels\": true, \"directed\": true, \"gravity\": 0.04, \"charge\": -120, \"nodes\": [{\"group\": \"0\", \"name\": \"10\"}, {\"group\": \"0\", \"name\": \"1\"}]...\n```\nand with py3\n\n```\n...\"nodes\": [{\"name\": \"10\", ...}, {\"name\": \"1\", ...}], \"links\": [{\"source\": 1, \"target\": 0, ...}]...\n```\n\nAny suggestion is more than welcome.",
    "created_at": "2019-03-11T13:25:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27460#issuecomment-427647",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:4'></a>
I added a doctest but it's not good. It works on my laptop with py3, but not with py2.
The order of the keys of the dictionaries is not the same in py2 and py3 :(

with py2, I get

```
..."links": [{"strength": 0, "target": 0, "color": "#aaa", "curve": 0, "source": 1, "name": ""}], "pos": [], "edge_thickness": 4, "loops": [], "edge_labels": false, "vertex_size": 7, "vertex_labels": true, "directed": true, "gravity": 0.04, "charge": -120, "nodes": [{"group": "0", "name": "10"}, {"group": "0", "name": "1"}]...
```
and with py3

```
..."nodes": [{"name": "10", ...}, {"name": "1", ...}], "links": [{"source": 1, "target": 0, ...}]...
```

Any suggestion is more than welcome.



---

archive/issue_comments_427648.json:
```json
{
    "body": "**Changing commit** from \"[ebddf9db0304488ab3f6fee747ec6131a1acfd94](https://github.com/sagemath/sagetrac-mirror/commit/ebddf9db0304488ab3f6fee747ec6131a1acfd94)\" to \"[8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a](https://github.com/sagemath/sagetrac-mirror/commit/8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a)\".",
    "created_at": "2019-03-11T15:09:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27460#issuecomment-427648",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[ebddf9db0304488ab3f6fee747ec6131a1acfd94](https://github.com/sagemath/sagetrac-mirror/commit/ebddf9db0304488ab3f6fee747ec6131a1acfd94)" to "[8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a](https://github.com/sagemath/sagetrac-mirror/commit/8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a)".



---

archive/issue_comments_427649.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a\">8e5f238</a></td><td><code>trac #27460: a more robust doctest</code></td></tr></table>\n",
    "created_at": "2019-03-11T15:09:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27460#issuecomment-427649",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a">8e5f238</a></td><td><code>trac #27460: a more robust doctest</code></td></tr></table>




---

archive/issue_comments_427650.json:
```json
{
    "body": "<a id='comment:6'></a>\nOK, I found a more robust doctest that is OK for py2 and py3. Hope you like it.",
    "created_at": "2019-03-11T15:11:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27460#issuecomment-427650",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:6'></a>
OK, I found a more robust doctest that is OK for py2 and py3. Hope you like it.



---

archive/issue_comments_427651.json:
```json
{
    "body": "<a id='comment:7'></a>\nok, looks good. When patchbot is green, positive review",
    "created_at": "2019-03-11T17:03:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27460#issuecomment-427651",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:7'></a>
ok, looks good. When patchbot is green, positive review



---

archive/issue_comments_427652.json:
```json
{
    "body": "**Reviewer:** Fr\u00e9d\u00e9ric Chapoton",
    "created_at": "2019-03-11T17:03:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27460#issuecomment-427652",
    "user": "https://github.com/fchapoton"
}
```

**Reviewer:** Frédéric Chapoton



---

archive/issue_events_329681.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-03-11T18:50:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27460#event-329681"
}
```



---

archive/issue_events_329682.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-03-11T18:50:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27460#event-329682"
}
```



---

archive/issue_events_329683.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-03-13T18:29:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27460#event-329683"
}
```



---

archive/issue_events_329684.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "db49315d168b6a2e9adc72da93d1cc48570be05a",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-03-13T18:29:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27460#event-329684"
}
```



---

archive/issue_comments_427653.json:
```json
{
    "body": "**Changing branch** from \"[u/dcoudert/27460_graph_plot_js](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/27460_graph_plot_js)\" to \"[8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a](https://github.com/sagemath/sagetrac-mirror/commit/8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a)\".",
    "created_at": "2019-03-13T18:29:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27460#issuecomment-427653",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/dcoudert/27460_graph_plot_js](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/27460_graph_plot_js)" to "[8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a](https://github.com/sagemath/sagetrac-mirror/commit/8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a)".
