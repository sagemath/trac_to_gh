# Issue 27460: fix issue in graph_plot_js

archive/issues_027223.json:
```json
{
    "body": "Fix issue reported in https://groups.google.com/forum/#!topic/sage-devel/oD1jQVirJBs\n\nThe mapping of vertices given to `d3.js` was incorrect\n\nBranch/Commit: 8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a\n\nReviewer: Fr\u00e9d\u00e9ric Chapoton\n\nAuthor: David Coudert\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/27460\n\n",
    "closed_at": "2019-03-13T18:29:16Z",
    "created_at": "2019-03-11T08:04:26Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.7",
    "title": "fix issue in graph_plot_js",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27460",
    "user": "https://github.com/dcoudert"
}
```
Fix issue reported in https://groups.google.com/forum/#!topic/sage-devel/oD1jQVirJBs

The mapping of vertices given to `d3.js` was incorrect

Branch/Commit: 8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a

Reviewer: Frédéric Chapoton

Author: David Coudert

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/27460





---

archive/issue_comments_522966.json:
```json
{
    "body": "Changing commit from \"\" to \"771b91e451985ba2476570915ba92ab0228b8b03\"",
    "created_at": "2019-03-11T08:06:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27460#issuecomment-522966",
    "user": "https://github.com/dcoudert"
}
```

Changing commit from "" to "771b91e451985ba2476570915ba92ab0228b8b03"



---

archive/issue_comments_522967.json:
```json
{
    "body": "Changing branch from \"\" to \"u/dcoudert/27460_graph_plot_js\"",
    "created_at": "2019-03-11T08:06:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27460#issuecomment-522967",
    "user": "https://github.com/dcoudert"
}
```

Changing branch from "" to "u/dcoudert/27460_graph_plot_js"



---

archive/issue_comments_522968.json:
```json
{
    "body": "<a id='comment:1'></a>\nNew commits:\n|                                                                                                                                          |                           |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|\n|[771b91e](https://github.com/sagemath/sagetrac-mirror/commit/771b91e451985ba2476570915ba92ab0228b8b03)|`trac #27460: fix ordering`|",
    "created_at": "2019-03-11T08:06:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27460#issuecomment-522968",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:1'></a>
New commits:
|                                                                                                                                          |                           |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|
|[771b91e](https://github.com/sagemath/sagetrac-mirror/commit/771b91e451985ba2476570915ba92ab0228b8b03)|`trac #27460: fix ordering`|



---

archive/issue_comments_522969.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-03-11T08:06:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27460#issuecomment-522969",
    "user": "https://github.com/dcoudert"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_522970.json:
```json
{
    "body": "<a id='comment:2'></a>\nHaving a doctest would be good..",
    "created_at": "2019-03-11T12:40:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27460#issuecomment-522970",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:2'></a>
Having a doctest would be good..



---

archive/issue_comments_522971.json:
```json
{
    "body": "Changing commit from \"771b91e451985ba2476570915ba92ab0228b8b03\" to \"ebddf9db0304488ab3f6fee747ec6131a1acfd94\"",
    "created_at": "2019-03-11T13:19:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27460#issuecomment-522971",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "771b91e451985ba2476570915ba92ab0228b8b03" to "ebddf9db0304488ab3f6fee747ec6131a1acfd94"



---

archive/issue_comments_522972.json:
```json
{
    "body": "<a id='comment:3'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|\n|[ebddf9d](https://github.com/sagemath/sagetrac-mirror/commit/ebddf9db0304488ab3f6fee747ec6131a1acfd94)|`trac #27460: add doctest`|",
    "created_at": "2019-03-11T13:19:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27460#issuecomment-522972",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                          |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|
|[ebddf9d](https://github.com/sagemath/sagetrac-mirror/commit/ebddf9db0304488ab3f6fee747ec6131a1acfd94)|`trac #27460: add doctest`|



---

archive/issue_comments_522973.json:
```json
{
    "body": "<a id='comment:4'></a>\nI added a doctest but it's not good. It works on my laptop with py3, but not with py2.\nThe order of the keys of the dictionaries is not the same in py2 and py3 :(\n\nwith py2, I get\n\n```\n...\"links\": [{\"strength\": 0, \"target\": 0, \"color\": \"#aaa\", \"curve\": 0, \"source\": 1, \"name\": \"\"}], \"pos\": [], \"edge_thickness\": 4, \"loops\": [], \"edge_labels\": false, \"vertex_size\": 7, \"vertex_labels\": true, \"directed\": true, \"gravity\": 0.04, \"charge\": -120, \"nodes\": [{\"group\": \"0\", \"name\": \"10\"}, {\"group\": \"0\", \"name\": \"1\"}]...\n```\nand with py3\n\n```\n...\"nodes\": [{\"name\": \"10\", ...}, {\"name\": \"1\", ...}], \"links\": [{\"source\": 1, \"target\": 0, ...}]...\n```\n\nAny suggestion is more than welcome.",
    "created_at": "2019-03-11T13:25:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27460#issuecomment-522973",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:4'></a>
I added a doctest but it's not good. It works on my laptop with py3, but not with py2.
The order of the keys of the dictionaries is not the same in py2 and py3 :(

with py2, I get

```
..."links": [{"strength": 0, "target": 0, "color": "#aaa", "curve": 0, "source": 1, "name": ""}], "pos": [], "edge_thickness": 4, "loops": [], "edge_labels": false, "vertex_size": 7, "vertex_labels": true, "directed": true, "gravity": 0.04, "charge": -120, "nodes": [{"group": "0", "name": "10"}, {"group": "0", "name": "1"}]...
```
and with py3

```
..."nodes": [{"name": "10", ...}, {"name": "1", ...}], "links": [{"source": 1, "target": 0, ...}]...
```

Any suggestion is more than welcome.



---

archive/issue_comments_522974.json:
```json
{
    "body": "Changing commit from \"ebddf9db0304488ab3f6fee747ec6131a1acfd94\" to \"8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a\"",
    "created_at": "2019-03-11T15:09:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27460#issuecomment-522974",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ebddf9db0304488ab3f6fee747ec6131a1acfd94" to "8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a"



---

archive/issue_comments_522975.json:
```json
{
    "body": "<a id='comment:5'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|\n|[8e5f238](https://github.com/sagemath/sagetrac-mirror/commit/8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a)|`trac #27460: a more robust doctest`|",
    "created_at": "2019-03-11T15:09:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27460#issuecomment-522975",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|
|[8e5f238](https://github.com/sagemath/sagetrac-mirror/commit/8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a)|`trac #27460: a more robust doctest`|



---

archive/issue_comments_522976.json:
```json
{
    "body": "<a id='comment:6'></a>\nOK, I found a more robust doctest that is OK for py2 and py3. Hope you like it.",
    "created_at": "2019-03-11T15:11:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27460#issuecomment-522976",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:6'></a>
OK, I found a more robust doctest that is OK for py2 and py3. Hope you like it.



---

archive/issue_comments_522977.json:
```json
{
    "body": "<a id='comment:7'></a>\nok, looks good. When patchbot is green, positive review",
    "created_at": "2019-03-11T17:03:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27460#issuecomment-522977",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:7'></a>
ok, looks good. When patchbot is green, positive review



---

archive/issue_comments_522978.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Fr\u00e9d\u00e9ric Chapoton\"",
    "created_at": "2019-03-11T17:03:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27460#issuecomment-522978",
    "user": "https://github.com/fchapoton"
}
```

Changing reviewer from "" to "Frédéric Chapoton"



---

archive/issue_comments_522979.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-03-11T18:50:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27460#issuecomment-522979",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_522980.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-03-13T18:29:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27460#issuecomment-522980",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_085212.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-03-13T18:29:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27460",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27460#event-85212"
}
```



---

archive/issue_comments_522981.json:
```json
{
    "body": "Changing branch from \"u/dcoudert/27460_graph_plot_js\" to \"8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a\"",
    "created_at": "2019-03-13T18:29:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27460#issuecomment-522981",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/dcoudert/27460_graph_plot_js" to "8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a"
