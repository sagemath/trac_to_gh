# Issue 27460: fix issue in graph_plot_js

archive/issues_027223.json:
```json
{
    "assignees": [],
    "body": "Fix issue reported in https://groups.google.com/forum/#!topic/sage-devel/oD1jQVirJBs\n\nThe mapping of vertices given to `d3.js` was incorrect\n\nBranch/Commit: **[`8e5f238`](https://github.com/sagemath/sagetrac-mirror/commit/8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a)**\n\nReviewer: **Fr\u00e9d\u00e9ric Chapoton**\n\nAuthor: **David Coudert**\n\nComponent: **graph theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/27460_\n\n",
    "closed_at": "2019-03-13T18:29:16Z",
    "created_at": "2019-03-11T08:04:26Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "fix issue in graph_plot_js",
    "type": "issue",
    "updated_at": "2019-03-13T18:29:16Z",
    "url": "https://github.com/sagemath/sage/issues/27460",
    "user": "https://github.com/dcoudert"
}
```
Fix issue reported in https://groups.google.com/forum/#!topic/sage-devel/oD1jQVirJBs

The mapping of vertices given to `d3.js` was incorrect

Branch/Commit: **[`8e5f238`](https://github.com/sagemath/sagetrac-mirror/commit/8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a)**

Reviewer: **Frédéric Chapoton**

Author: **David Coudert**

Component: **graph theory**

_Issue created by migration from https://trac.sagemath.org/ticket/27460_





---

archive/issue_events_377120.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-03-11T08:04:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27460#event-377120"
}
```



---

archive/issue_events_377121.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-03-11T08:04:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27460#event-377121"
}
```



---

archive/issue_events_377122.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-03-11T08:04:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27460#event-377122"
}
```



---

archive/issue_events_377123.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-03-11T08:04:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27460#event-377123"
}
```



---

archive/issue_comments_425006.json:
```json
{
    "body": "Commit: **[`771b91e`](https://github.com/sagemath/sagetrac-mirror/commit/771b91e451985ba2476570915ba92ab0228b8b03)**",
    "created_at": "2019-03-11T08:06:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27460#issuecomment-425006",
    "user": "https://github.com/dcoudert"
}
```

Commit: **[`771b91e`](https://github.com/sagemath/sagetrac-mirror/commit/771b91e451985ba2476570915ba92ab0228b8b03)**



---

archive/issue_comments_425007.json:
```json
{
    "body": "Branch: **[u/dcoudert/27460_graph_plot_js](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/27460_graph_plot_js)**",
    "created_at": "2019-03-11T08:06:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27460#issuecomment-425007",
    "user": "https://github.com/dcoudert"
}
```

Branch: **[u/dcoudert/27460_graph_plot_js](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/27460_graph_plot_js)**



---

archive/issue_comments_425008.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/771b91e451985ba2476570915ba92ab0228b8b03\">771b91e</a></td><td><code>trac #27460: fix ordering</code></td></tr></table>\n",
    "created_at": "2019-03-11T08:06:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27460#issuecomment-425008",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/771b91e451985ba2476570915ba92ab0228b8b03">771b91e</a></td><td><code>trac #27460: fix ordering</code></td></tr></table>




---

archive/issue_events_377124.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-03-11T08:06:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27460#event-377124"
}
```



---

archive/issue_comments_425009.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nHaving a doctest would be good..",
    "created_at": "2019-03-11T12:40:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27460#issuecomment-425009",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:2" align="right">comment:2</div>

Having a doctest would be good..



---

archive/issue_comments_425010.json:
```json
{
    "body": "Changed commit from **[`771b91e`](https://github.com/sagemath/sagetrac-mirror/commit/771b91e451985ba2476570915ba92ab0228b8b03)** to **[`ebddf9d`](https://github.com/sagemath/sagetrac-mirror/commit/ebddf9db0304488ab3f6fee747ec6131a1acfd94)**",
    "created_at": "2019-03-11T13:19:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27460#issuecomment-425010",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`771b91e`](https://github.com/sagemath/sagetrac-mirror/commit/771b91e451985ba2476570915ba92ab0228b8b03)** to **[`ebddf9d`](https://github.com/sagemath/sagetrac-mirror/commit/ebddf9db0304488ab3f6fee747ec6131a1acfd94)**



---

archive/issue_comments_425011.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ebddf9db0304488ab3f6fee747ec6131a1acfd94\">ebddf9d</a></td><td><code>trac #27460: add doctest</code></td></tr></table>\n",
    "created_at": "2019-03-11T13:19:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27460#issuecomment-425011",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ebddf9db0304488ab3f6fee747ec6131a1acfd94">ebddf9d</a></td><td><code>trac #27460: add doctest</code></td></tr></table>




---

archive/issue_comments_425012.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI added a doctest but it's not good. It works on my laptop with py3, but not with py2.\nThe order of the keys of the dictionaries is not the same in py2 and py3 :(\n\nwith py2, I get\n\n```\n...\"links\": [{\"strength\": 0, \"target\": 0, \"color\": \"#aaa\", \"curve\": 0, \"source\": 1, \"name\": \"\"}], \"pos\": [], \"edge_thickness\": 4, \"loops\": [], \"edge_labels\": false, \"vertex_size\": 7, \"vertex_labels\": true, \"directed\": true, \"gravity\": 0.04, \"charge\": -120, \"nodes\": [{\"group\": \"0\", \"name\": \"10\"}, {\"group\": \"0\", \"name\": \"1\"}]...\n```\nand with py3\n\n```\n...\"nodes\": [{\"name\": \"10\", ...}, {\"name\": \"1\", ...}], \"links\": [{\"source\": 1, \"target\": 0, ...}]...\n```\n\nAny suggestion is more than welcome.",
    "created_at": "2019-03-11T13:25:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27460#issuecomment-425012",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:4" align="right">comment:4</div>

I added a doctest but it's not good. It works on my laptop with py3, but not with py2.
The order of the keys of the dictionaries is not the same in py2 and py3 :(

with py2, I get

```
..."links": [{"strength": 0, "target": 0, "color": "#aaa", "curve": 0, "source": 1, "name": ""}], "pos": [], "edge_thickness": 4, "loops": [], "edge_labels": false, "vertex_size": 7, "vertex_labels": true, "directed": true, "gravity": 0.04, "charge": -120, "nodes": [{"group": "0", "name": "10"}, {"group": "0", "name": "1"}]...
```
and with py3

```
..."nodes": [{"name": "10", ...}, {"name": "1", ...}], "links": [{"source": 1, "target": 0, ...}]...
```

Any suggestion is more than welcome.



---

archive/issue_comments_425013.json:
```json
{
    "body": "Changed commit from **[`ebddf9d`](https://github.com/sagemath/sagetrac-mirror/commit/ebddf9db0304488ab3f6fee747ec6131a1acfd94)** to **[`8e5f238`](https://github.com/sagemath/sagetrac-mirror/commit/8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a)**",
    "created_at": "2019-03-11T15:09:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27460#issuecomment-425013",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ebddf9d`](https://github.com/sagemath/sagetrac-mirror/commit/ebddf9db0304488ab3f6fee747ec6131a1acfd94)** to **[`8e5f238`](https://github.com/sagemath/sagetrac-mirror/commit/8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a)**



---

archive/issue_comments_425014.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a\">8e5f238</a></td><td><code>trac #27460: a more robust doctest</code></td></tr></table>\n",
    "created_at": "2019-03-11T15:09:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27460#issuecomment-425014",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a">8e5f238</a></td><td><code>trac #27460: a more robust doctest</code></td></tr></table>




---

archive/issue_comments_425015.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nOK, I found a more robust doctest that is OK for py2 and py3. Hope you like it.",
    "created_at": "2019-03-11T15:11:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27460#issuecomment-425015",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:6" align="right">comment:6</div>

OK, I found a more robust doctest that is OK for py2 and py3. Hope you like it.



---

archive/issue_comments_425016.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nok, looks good. When patchbot is green, positive review",
    "created_at": "2019-03-11T17:03:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27460#issuecomment-425016",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:7" align="right">comment:7</div>

ok, looks good. When patchbot is green, positive review



---

archive/issue_comments_425017.json:
```json
{
    "body": "Reviewer: **Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2019-03-11T17:03:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27460#issuecomment-425017",
    "user": "https://github.com/fchapoton"
}
```

Reviewer: **Frédéric Chapoton**



---

archive/issue_events_377125.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-03-11T18:50:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27460#event-377125"
}
```



---

archive/issue_events_377126.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-03-11T18:50:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27460#event-377126"
}
```



---

archive/issue_events_377127.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-03-13T18:29:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27460#event-377127"
}
```



---

archive/issue_events_377128.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "db49315d168b6a2e9adc72da93d1cc48570be05a",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-03-13T18:29:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27460#event-377128"
}
```



---

archive/issue_comments_425018.json:
```json
{
    "body": "Changed branch from **[u/dcoudert/27460_graph_plot_js](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/27460_graph_plot_js)** to **[`8e5f238`](https://github.com/sagemath/sagetrac-mirror/commit/8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a)**",
    "created_at": "2019-03-13T18:29:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27460#issuecomment-425018",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/dcoudert/27460_graph_plot_js](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/27460_graph_plot_js)** to **[`8e5f238`](https://github.com/sagemath/sagetrac-mirror/commit/8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a)**
