# Issue 27917: Standardize doctest headers

archive/issues_027680.json:
```json
{
    "body": "It has recently come to my attention that there are a few doctest strings within Sage that do not follow the standard (http://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings). Please see the comments in #5548 for the details/conversation, but essentially, all doctests should be preceded by either a `TESTS::` or `EXAMPLES::` header.\n\nI have found a few places where this is not done:\n* set_calculus_method() of src/sage/manifolds/manifold.py\n* from_tamari_sorting_tuple() of src/sage/combinat/binary_tree.py (\"EXEMPLES\" instead of \"EXAMPLES\")\n* init() of GenericGraphQuery? in src/sage/graphs/graph_database.py \n* _hnf_mod() of src/sage/matrix/matrix_integer_dense.pyx\n\nThere are also a few places where we have `Examples::` or `Tests::` instead of `EXAMPLES::` or `TESTS::`, and other places have `EXAMPLES:` (only one colon)... I am not sure if this matters for running doctests but for consistency, they should be fixed too.\n\n* preimage() and dual() of src/sage/schemes/projective/projective_subscheme.py\n* _richcmp_() of src/sage/schemes/projective/projective_point.py\n* Lattes_map() of src/sage/schemes/projective/projective_space.py\n* _call_(), SchemeMorphism_polynomial, __getitem__(), __mul__(), glue_along_domains() of src/sage/schemes/generic/morphism.py\n\nI have undoubtedly missed many other mistakes, so I believe this ticket is two-fold - we should first compile a list of files with incorrect docstring headers, and then fix them.\n\n\n\nCC:  @jdemeyer @slel\n\nKeywords: doctest\n\nBranch/Commit: edf9e8ba8ba6082330ba05b5bdd6b804d2e12925\n\nReviewer: Kevin Lui\n\nAuthor: Fr\u00e9d\u00e9ric Chapoton\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/27917\n\n",
    "closed_at": "2019-09-02T21:40:54Z",
    "created_at": "2019-06-01T20:41:42Z",
    "labels": [
        "component: documentation",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.9",
    "title": "Standardize doctest headers",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27917",
    "user": "https://github.com/black-stones"
}
```
It has recently come to my attention that there are a few doctest strings within Sage that do not follow the standard (http://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings). Please see the comments in #5548 for the details/conversation, but essentially, all doctests should be preceded by either a `TESTS::` or `EXAMPLES::` header.

I have found a few places where this is not done:
* set_calculus_method() of src/sage/manifolds/manifold.py
* from_tamari_sorting_tuple() of src/sage/combinat/binary_tree.py ("EXEMPLES" instead of "EXAMPLES")
* init() of GenericGraphQuery? in src/sage/graphs/graph_database.py 
* _hnf_mod() of src/sage/matrix/matrix_integer_dense.pyx

There are also a few places where we have `Examples::` or `Tests::` instead of `EXAMPLES::` or `TESTS::`, and other places have `EXAMPLES:` (only one colon)... I am not sure if this matters for running doctests but for consistency, they should be fixed too.

* preimage() and dual() of src/sage/schemes/projective/projective_subscheme.py
* _richcmp_() of src/sage/schemes/projective/projective_point.py
* Lattes_map() of src/sage/schemes/projective/projective_space.py
* _call_(), SchemeMorphism_polynomial, __getitem__(), __mul__(), glue_along_domains() of src/sage/schemes/generic/morphism.py

I have undoubtedly missed many other mistakes, so I believe this ticket is two-fold - we should first compile a list of files with incorrect docstring headers, and then fix them.



CC:  @jdemeyer @slel

Keywords: doctest

Branch/Commit: edf9e8ba8ba6082330ba05b5bdd6b804d2e12925

Reviewer: Kevin Lui

Author: Frédéric Chapoton

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/27917





---

archive/issue_comments_540177.json:
```json
{
    "body": "<a id='comment:1'></a>* The use of `TESTS:` and `EXAMPLES:` is correct. The double colon is only needed if this is directly followed by doctests.\n\n* All `EXEMPLES` have been fixed recently.\n\n* `Examples` and `Tests` could be fixed, but this has low priority.",
    "created_at": "2019-06-02T09:21:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27917#issuecomment-540177",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'></a>* The use of `TESTS:` and `EXAMPLES:` is correct. The double colon is only needed if this is directly followed by doctests.

* All `EXEMPLES` have been fixed recently.

* `Examples` and `Tests` could be fixed, but this has low priority.



---

archive/issue_comments_540178.json:
```json
{
    "body": "<a id='comment:2'></a>Replying to [chapoton](#comment%3A1):\n> * The use of `TESTS:` and `EXAMPLES:` is correct. The double colon is only needed if this is directly followed by doctests.\n\n\nIn more detail: if the following line is not indented, a single colon is correct, like this:\n\n```\nEXAMPLES:\n\nHere is some explanatory text. ::\n\n    sage: 2+2\n    5\n```\nUsing `EXAMPLES::` would produce an error.",
    "created_at": "2019-06-02T15:52:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27917#issuecomment-540178",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:2'></a>Replying to [chapoton](#comment%3A1):
> * The use of `TESTS:` and `EXAMPLES:` is correct. The double colon is only needed if this is directly followed by doctests.


In more detail: if the following line is not indented, a single colon is correct, like this:

```
EXAMPLES:

Here is some explanatory text. ::

    sage: 2+2
    5
```
Using `EXAMPLES::` would produce an error.



---

archive/issue_comments_540179.json:
```json
{
    "body": "<a id='comment:3'></a>As the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).",
    "created_at": "2019-06-14T14:55:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27917#issuecomment-540179",
    "user": "https://github.com/embray"
}
```

<a id='comment:3'></a>As the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).



---

archive/issue_comments_540180.json:
```json
{
    "body": "<a id='comment:4'></a>As the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).",
    "created_at": "2019-06-14T14:57:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27917#issuecomment-540180",
    "user": "https://github.com/embray"
}
```

<a id='comment:4'></a>As the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).



---

archive/issue_comments_540181.json:
```json
{
    "body": "Changing author from \"\" to \"Fr\u00e9d\u00e9ric Chapoton\"",
    "created_at": "2019-08-24T19:52:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27917#issuecomment-540181",
    "user": "https://github.com/fchapoton"
}
```

Changing author from "" to "Frédéric Chapoton"



---

archive/issue_comments_540182.json:
```json
{
    "body": "Changing commit from \"\" to \"edf9e8ba8ba6082330ba05b5bdd6b804d2e12925\"",
    "created_at": "2019-08-24T19:52:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27917#issuecomment-540182",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "" to "edf9e8ba8ba6082330ba05b5bdd6b804d2e12925"



---

archive/issue_comments_540183.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-08-24T19:52:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27917#issuecomment-540183",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_540184.json:
```json
{
    "body": "<a id='comment:5'></a>done, please review\n\n---\nNew commits:",
    "created_at": "2019-08-24T19:52:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27917#issuecomment-540184",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'></a>done, please review

---
New commits:



---

archive/issue_comments_540185.json:
```json
{
    "body": "Changing branch from \"\" to \"u/chapoton/27917\"",
    "created_at": "2019-08-24T19:52:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27917#issuecomment-540185",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "" to "u/chapoton/27917"



---

archive/issue_comments_540186.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2019-08-25T03:20:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27917#issuecomment-540186",
    "user": "https://github.com/kevinywlui"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_540187.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-08-25T03:20:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27917#issuecomment-540187",
    "user": "https://github.com/kevinywlui"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_540188.json:
```json
{
    "body": "<a id='comment:6'></a>Looks good. \n\nI also change the ticket type to `defect`.",
    "created_at": "2019-08-25T03:20:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27917#issuecomment-540188",
    "user": "https://github.com/kevinywlui"
}
```

<a id='comment:6'></a>Looks good. 

I also change the ticket type to `defect`.



---

archive/issue_events_069193.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-08-25T06:11:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27917",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27917#event-69193"
}
```



---

archive/issue_comments_540189.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Kevin Lui\"",
    "created_at": "2019-08-25T06:11:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27917#issuecomment-540189",
    "user": "https://github.com/fchapoton"
}
```

Changing reviewer from "" to "Kevin Lui"



---

archive/issue_events_069194.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-09-02T21:40:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27917",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27917#event-69194"
}
```



---

archive/issue_comments_540190.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-09-02T21:40:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27917#issuecomment-540190",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_540191.json:
```json
{
    "body": "Changing branch from \"u/chapoton/27917\" to \"edf9e8ba8ba6082330ba05b5bdd6b804d2e12925\"",
    "created_at": "2019-09-02T21:40:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27917#issuecomment-540191",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/chapoton/27917" to "edf9e8ba8ba6082330ba05b5bdd6b804d2e12925"
