# Issue 27173: p_group_cohomology missing dependencies

archive/issues_026936.json:
```json
{
    "body": "The API change of `coercion_model` (#27021) broke `p_group_cohomology`.\n\n- patchbot report: https://patchbot.sagemath.org/log/27152/Ubuntu/18.04/x86_64/4.15.0-38-generic/quasar/2019-01-29%2023:36:43\n\nRebuilding `p_group_cohomology` is sufficient (an analogous problem occurred with `giacpy_sage` on #27021).\n\nAs experimental fix, we make `p_group_cohomology` depend on `element.pxd` and cython.\n\nCC:  simonking\n\nKeywords: dependencies\n\nBranch/Commit: f39c9f1306e5fed045b96df1a4cef3614dca4f75\n\nReviewer: Simon King, Jeroen Demeyer\n\nAuthor: Jeroen Demeyer, Simon King\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/27173\n\n",
    "closed_at": "2019-02-04T23:02:35Z",
    "created_at": "2019-01-30T08:31:29Z",
    "labels": [
        "component: packages: optional",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.7",
    "title": "p_group_cohomology missing dependencies",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27173",
    "user": "https://github.com/jdemeyer"
}
```
The API change of `coercion_model` (#27021) broke `p_group_cohomology`.

- patchbot report: https://patchbot.sagemath.org/log/27152/Ubuntu/18.04/x86_64/4.15.0-38-generic/quasar/2019-01-29%2023:36:43

Rebuilding `p_group_cohomology` is sufficient (an analogous problem occurred with `giacpy_sage` on #27021).

As experimental fix, we make `p_group_cohomology` depend on `element.pxd` and cython.

CC:  simonking

Keywords: dependencies

Branch/Commit: f39c9f1306e5fed045b96df1a4cef3614dca4f75

Reviewer: Simon King, Jeroen Demeyer

Author: Jeroen Demeyer, Simon King

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/27173





---

archive/issue_comments_522830.json:
```json
{
    "body": "Changing branch from \"\" to \"u/jdemeyer/p_group_cohomology_depends_on_cython\"",
    "created_at": "2019-01-30T08:36:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522830",
    "user": "https://github.com/jdemeyer"
}
```

Changing branch from "" to "u/jdemeyer/p_group_cohomology_depends_on_cython"



---

archive/issue_comments_522831.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-01-30T08:38:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522831",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_522832.json:
```json
{
    "body": "Changing commit from \"\" to \"eb9a9ff6a3a7b5805ff725c93f6383c22f703889\"",
    "created_at": "2019-01-30T08:38:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522832",
    "user": "https://github.com/jdemeyer"
}
```

Changing commit from "" to "eb9a9ff6a3a7b5805ff725c93f6383c22f703889"



---

archive/issue_comments_522833.json:
```json
{
    "body": "<a id='comment:3'></a>New commits:",
    "created_at": "2019-01-30T08:38:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522833",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:3'></a>New commits:



---

archive/issue_comments_522834.json:
```json
{
    "body": "Changing commit from \"eb9a9ff6a3a7b5805ff725c93f6383c22f703889\" to \"\"",
    "created_at": "2019-01-30T08:38:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522834",
    "user": "https://github.com/simon-king-jena"
}
```

Changing commit from "eb9a9ff6a3a7b5805ff725c93f6383c22f703889" to ""



---

archive/issue_comments_522835.json:
```json
{
    "body": "Changing branch from \"u/jdemeyer/p_group_cohomology_depends_on_cython\" to \"\"",
    "created_at": "2019-01-30T08:38:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522835",
    "user": "https://github.com/simon-king-jena"
}
```

Changing branch from "u/jdemeyer/p_group_cohomology_depends_on_cython" to ""



---

archive/issue_comments_522836.json:
```json
{
    "body": "Replying to [ticket:27173 jdemeyer]:\n> The fix is simple: rebuilding `p_group_cohomology` is sufficient \n\n\nThat's actually good news. When you wrote \"API change broke the spkg\", I thought I need to change code again (by the way, I am not sure: What is the current official spkg version in Sage? v3.1?).\n\n> (an analogous problem occurred with `giacpy_sage` on #27021). There is no automatic way to do this, but because of the missing dependency on cython (which is what I grepped for) I missed this.\n\n\nThe current dependencies are\n\n```\nsingular meataxe | matplotlib gap xz $(SAGERUNTIME)\n```\n\nReally the package does depend on sagelib. Namely, it cimports various Sage types (including Element, Parent).\n\nIn an ideal world, it would be possible to have a dependency list\n\n```\nsingular meataxe sage.structure.element | matplotlib gap xz $(SAGERUNTIME)\n```",
    "created_at": "2019-01-30T08:38:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522836",
    "user": "https://github.com/simon-king-jena"
}
```

Replying to [ticket:27173 jdemeyer]:
> The fix is simple: rebuilding `p_group_cohomology` is sufficient 


That's actually good news. When you wrote "API change broke the spkg", I thought I need to change code again (by the way, I am not sure: What is the current official spkg version in Sage? v3.1?).

> (an analogous problem occurred with `giacpy_sage` on #27021). There is no automatic way to do this, but because of the missing dependency on cython (which is what I grepped for) I missed this.


The current dependencies are

```
singular meataxe | matplotlib gap xz $(SAGERUNTIME)
```

Really the package does depend on sagelib. Namely, it cimports various Sage types (including Element, Parent).

In an ideal world, it would be possible to have a dependency list

```
singular meataxe sage.structure.element | matplotlib gap xz $(SAGERUNTIME)
```



---

archive/issue_comments_522837.json:
```json
{
    "body": "<a id='comment:5'></a>I hate the trac interface. Writing my comment destroyed your branch.\n\nCan you provide the branch again?",
    "created_at": "2019-01-30T08:39:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522837",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:5'></a>I hate the trac interface. Writing my comment destroyed your branch.

Can you provide the branch again?



---

archive/issue_comments_522838.json:
```json
{
    "body": "<a id='comment:6'></a>New commits:",
    "created_at": "2019-01-30T08:41:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522838",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'></a>New commits:



---

archive/issue_comments_522839.json:
```json
{
    "body": "Changing commit from \"\" to \"eb9a9ff6a3a7b5805ff725c93f6383c22f703889\"",
    "created_at": "2019-01-30T08:41:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522839",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "" to "eb9a9ff6a3a7b5805ff725c93f6383c22f703889"



---

archive/issue_comments_522840.json:
```json
{
    "body": "Changing branch from \"\" to \"u/jdemeyer/p_group_cohomology_depends_on_cython\"",
    "created_at": "2019-01-30T08:41:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522840",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "" to "u/jdemeyer/p_group_cohomology_depends_on_cython"



---

archive/issue_comments_522841.json:
```json
{
    "body": "<a id='comment:7'></a>Replying to [comment:4 SimonKing]:\n> Replying to [ticket:27173 jdemeyer]:\n> > The fix is simple: rebuilding `p_group_cohomology` is sufficient \n\n> \n> That's actually good news. When you wrote \"API change broke the spkg\", I thought I need to change code again\n\n\nNo, what really happened is an incompatible change in `element.pxd` which means that every Cython file cimporting that must be recompiled.",
    "created_at": "2019-01-30T08:46:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522841",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>Replying to [comment:4 SimonKing]:
> Replying to [ticket:27173 jdemeyer]:
> > The fix is simple: rebuilding `p_group_cohomology` is sufficient 

> 
> That's actually good news. When you wrote "API change broke the spkg", I thought I need to change code again


No, what really happened is an incompatible change in `element.pxd` which means that every Cython file cimporting that must be recompiled.



---

archive/issue_comments_522842.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [comment:4 SimonKing]:\n> In an ideal world, it would be possible to have a dependency list\n> \n> ```\n> singular meataxe sage.structure.element | matplotlib gap xz $(SAGERUNTIME)\n> ```\n\n\nActually, why don't we just do that?",
    "created_at": "2019-01-30T08:46:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522842",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>Replying to [comment:4 SimonKing]:
> In an ideal world, it would be possible to have a dependency list
> 
> ```
> singular meataxe sage.structure.element | matplotlib gap xz $(SAGERUNTIME)
> ```


Actually, why don't we just do that?



---

archive/issue_comments_522843.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-01-30T08:46:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522843",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_522844.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [comment:8 jdemeyer]:\n> Replying to [comment:4 SimonKing]:\n> > In an ideal world, it would be possible to have a dependency list\n> > \n> > ```\n> > singular meataxe sage.structure.element | matplotlib gap xz $(SAGERUNTIME)\n> > ```\n\n> \n> Actually, why don't we just do that?\n\n\nWell, when I wrote my comment, I thought that it isn't supported yet.\n\nSo, are you saying that a dependency on *specific* parts of the Sage library is possible? Or would that mean to extend Sage's build system?",
    "created_at": "2019-01-30T08:48:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522844",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:9'></a>Replying to [comment:8 jdemeyer]:
> Replying to [comment:4 SimonKing]:
> > In an ideal world, it would be possible to have a dependency list
> > 
> > ```
> > singular meataxe sage.structure.element | matplotlib gap xz $(SAGERUNTIME)
> > ```

> 
> Actually, why don't we just do that?


Well, when I wrote my comment, I thought that it isn't supported yet.

So, are you saying that a dependency on *specific* parts of the Sage library is possible? Or would that mean to extend Sage's build system?



---

archive/issue_comments_522845.json:
```json
{
    "body": "Changing commit from \"eb9a9ff6a3a7b5805ff725c93f6383c22f703889\" to \"0b3ce61261057cbd0578511f61b0b5168b1eb201\"",
    "created_at": "2019-01-30T08:52:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522845",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "eb9a9ff6a3a7b5805ff725c93f6383c22f703889" to "0b3ce61261057cbd0578511f61b0b5168b1eb201"



---

archive/issue_comments_522846.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-01-30T08:52:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522846",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_522847.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-01-30T08:52:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522847",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_522848.json:
```json
{
    "body": "<a id='comment:12'></a>Note that this won't pick up transitive dependencies (the `Makefile` doesn't know that `element.pxd` depends on `sage_object.pxd` for example), but at least this should work when changing the file `element.pxd`.",
    "created_at": "2019-01-30T08:53:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522848",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>Note that this won't pick up transitive dependencies (the `Makefile` doesn't know that `element.pxd` depends on `sage_object.pxd` for example), but at least this should work when changing the file `element.pxd`.



---

archive/issue_comments_522849.json:
```json
{
    "body": "<a id='comment:13'></a>Replying to [comment:9 SimonKing]:\n> So, are you saying that a dependency on *specific* parts of the Sage library is possible?\n\n\nIt's a `Makefile`, so it is possible to depend on specific filenames. It just never occurred to me to actually do that.",
    "created_at": "2019-01-30T08:54:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522849",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>Replying to [comment:9 SimonKing]:
> So, are you saying that a dependency on *specific* parts of the Sage library is possible?


It's a `Makefile`, so it is possible to depend on specific filenames. It just never occurred to me to actually do that.



---

archive/issue_comments_522850.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n The API change of `coercion_model` (#27021) broke `p_group_cohomology`: https://patchbot.sagemath.org/log/27152/Ubuntu/18.04/x86_64/4.15.0-38-generic/quasar/2019-01-29%2023:36:43\n \n-The fix is simple: rebuilding `p_group_cohomology` is sufficient (an analogous problem occurred with `giacpy_sage` on #27021). There is no automatic way to do this, but because of the missing dependency on cython (which is what I grepped for) I missed this.\n+As experimental fix, we make `p_group_cohomology` depend on `element.pxd`.\n``````\n",
    "created_at": "2019-01-30T08:55:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522850",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 The API change of `coercion_model` (#27021) broke `p_group_cohomology`: https://patchbot.sagemath.org/log/27152/Ubuntu/18.04/x86_64/4.15.0-38-generic/quasar/2019-01-29%2023:36:43
 
-The fix is simple: rebuilding `p_group_cohomology` is sufficient (an analogous problem occurred with `giacpy_sage` on #27021). There is no automatic way to do this, but because of the missing dependency on cython (which is what I grepped for) I missed this.
+As experimental fix, we make `p_group_cohomology` depend on `element.pxd`.
``````




---

archive/issue_comments_522851.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n The API change of `coercion_model` (#27021) broke `p_group_cohomology`: https://patchbot.sagemath.org/log/27152/Ubuntu/18.04/x86_64/4.15.0-38-generic/quasar/2019-01-29%2023:36:43\n \n-As experimental fix, we make `p_group_cohomology` depend on `element.pxd`.\n+The fix is simple: rebuilding `p_group_cohomology` is sufficient (an analogous problem occurred with `giacpy_sage` on #27021). There is no automatic way to do this, but because of the missing dependency on cython (which is what I grepped for) I missed this.\n``````\n",
    "created_at": "2019-01-30T08:57:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522851",
    "user": "https://github.com/simon-king-jena"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 The API change of `coercion_model` (#27021) broke `p_group_cohomology`: https://patchbot.sagemath.org/log/27152/Ubuntu/18.04/x86_64/4.15.0-38-generic/quasar/2019-01-29%2023:36:43
 
-As experimental fix, we make `p_group_cohomology` depend on `element.pxd`.
+The fix is simple: rebuilding `p_group_cohomology` is sufficient (an analogous problem occurred with `giacpy_sage` on #27021). There is no automatic way to do this, but because of the missing dependency on cython (which is what I grepped for) I missed this.
``````




---

archive/issue_comments_522852.json:
```json
{
    "body": "<a id='comment:15'></a>Replying to [comment:13 jdemeyer]:\n> Replying to [comment:9 SimonKing]:\n> > So, are you saying that a dependency on *specific* parts of the Sage library is possible?\n\n> \n> It's a `Makefile`, so it is possible to depend on specific filenames. It just never occurred to me to actually do that.\n\n\nNice! I thought the `dependencies` file may only contain package names.\n\nAlso good that you add pip - indeed spkg-install uses pip.\n\nBut how to test it? Pull the branch, build sage, touch element.pxd, do `make` and see if the spkg gets rebuilt?",
    "created_at": "2019-01-30T08:57:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522852",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:15'></a>Replying to [comment:13 jdemeyer]:
> Replying to [comment:9 SimonKing]:
> > So, are you saying that a dependency on *specific* parts of the Sage library is possible?

> 
> It's a `Makefile`, so it is possible to depend on specific filenames. It just never occurred to me to actually do that.


Nice! I thought the `dependencies` file may only contain package names.

Also good that you add pip - indeed spkg-install uses pip.

But how to test it? Pull the branch, build sage, touch element.pxd, do `make` and see if the spkg gets rebuilt?



---

archive/issue_comments_522853.json:
```json
{
    "body": "<a id='comment:16'></a>I hate the trac interface.\n\nWhen I write a comment, I certainly don't want that trac changes the ticket description back to what it was when I started to write my comment!",
    "created_at": "2019-01-30T09:02:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522853",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:16'></a>I hate the trac interface.

When I write a comment, I certainly don't want that trac changes the ticket description back to what it was when I started to write my comment!



---

archive/issue_comments_522854.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n The API change of `coercion_model` (#27021) broke `p_group_cohomology`: https://patchbot.sagemath.org/log/27152/Ubuntu/18.04/x86_64/4.15.0-38-generic/quasar/2019-01-29%2023:36:43\n+R\n+ebuilding `p_group_cohomology` is sufficient (an analogous problem occurred with `giacpy_sage` on #27021).\n \n-The fix is simple: rebuilding `p_group_cohomology` is sufficient (an analogous problem occurred with `giacpy_sage` on #27021). There is no automatic way to do this, but because of the missing dependency on cython (which is what I grepped for) I missed this.\n+As experimental fix, we make `p_group_cohomology` depend on `element.pxd` and cython.\n``````\n",
    "created_at": "2019-01-30T09:04:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522854",
    "user": "https://github.com/simon-king-jena"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 The API change of `coercion_model` (#27021) broke `p_group_cohomology`: https://patchbot.sagemath.org/log/27152/Ubuntu/18.04/x86_64/4.15.0-38-generic/quasar/2019-01-29%2023:36:43
+R
+ebuilding `p_group_cohomology` is sufficient (an analogous problem occurred with `giacpy_sage` on #27021).
 
-The fix is simple: rebuilding `p_group_cohomology` is sufficient (an analogous problem occurred with `giacpy_sage` on #27021). There is no automatic way to do this, but because of the missing dependency on cython (which is what I grepped for) I missed this.
+As experimental fix, we make `p_group_cohomology` depend on `element.pxd` and cython.
``````




---

archive/issue_comments_522855.json:
```json
{
    "body": "<a id='comment:18'></a>Replying to [comment:15 SimonKing]:\n> But how to test it? Pull the branch, build sage, touch element.pxd, do `make` and see if the spkg gets rebuilt?\n\n\nYes, something like that.",
    "created_at": "2019-01-30T09:13:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522855",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:18'></a>Replying to [comment:15 SimonKing]:
> But how to test it? Pull the branch, build sage, touch element.pxd, do `make` and see if the spkg gets rebuilt?


Yes, something like that.



---

archive/issue_comments_522856.json:
```json
{
    "body": "<a id='comment:19'></a>I think it would be possible to be a little more thorough. Here is the list of all cimports in the spkg that get stuff from outside the spkg (hence, that's dependencies):\n\n```\nsrc/pGroupCohomology/cochain.pxd:from sage.matrix.matrix_gfpn_dense cimport Matrix_gfpn_dense as MTX\nsrc/pGroupCohomology/cochain.pxd:from sage.libs.meataxe cimport *\nsrc/pGroupCohomology/cochain.pxd:from sage.structure.element cimport RingElement, ModuleElement, Element\nsrc/pGroupCohomology/cochain.pxd:from sage.rings.morphism cimport RingHomomorphism\nsrc/pGroupCohomology/cochain.pyx:from sage.structure.element cimport RingElement\nsrc/pGroupCohomology/cochain.pyx:from sage.matrix.matrix_gfpn_dense cimport new_mtx\nsrc/pGroupCohomology/cochain.pyx:from libc.string cimport memcpy\nsrc/pGroupCohomology/cochain.pyx:from cysignals.signals cimport sig_check, sig_on, sig_off\nsrc/pGroupCohomology/cohomology.pyx:from libc.string cimport memcpy\nsrc/pGroupCohomology/cohomology.pyx:from sage.matrix.matrix_gfpn_dense cimport Matrix_gfpn_dense as MTX\nsrc/pGroupCohomology/cohomology.pyx:from sage.matrix.matrix_gfpn_dense cimport new_mtx\nsrc/pGroupCohomology/cohomology.pyx:from sage.libs.meataxe cimport *\nsrc/pGroupCohomology/modular_cohomology.pyx:from sage.libs.meataxe cimport *\nsrc/pGroupCohomology/modular_cohomology.pyx:from sage.matrix.matrix_gfpn_dense cimport Matrix_gfpn_dense as MTX\nsrc/pGroupCohomology/modular_cohomology.pyx:from sage.matrix.matrix_gfpn_dense cimport new_mtx\nsrc/pGroupCohomology/resolution_bindings.pxd:from sage.libs.meataxe cimport *\nsrc/pGroupCohomology/resolution.pxd:from sage.libs.meataxe cimport *\nsrc/pGroupCohomology/resolution.pxd:from sage.matrix.matrix_gfpn_dense cimport Matrix_gfpn_dense as MTX\nsrc/pGroupCohomology/resolution.pyx:from libc.string cimport memcpy\nsrc/pGroupCohomology/resolution.pyx:from cysignals.memory cimport sig_free\nsrc/pGroupCohomology/resolution.pyx:from cysignals.signals cimport sig_check, sig_on, sig_off\nsrc/pGroupCohomology/resolution.pyx:from sage.matrix.matrix_gfpn_dense cimport Matrix_gfpn_dense as MTX\nsrc/pGroupCohomology/resolution.pyx:from sage.matrix.matrix_gfpn_dense cimport FieldConverter_class, FieldConverter, new_mtx\nsrc/pGroupCohomology/resolution.pyx:from sage.matrix.matrix0 cimport Matrix as Matrix0\n```\nSo, the complete lists of dependencies is\n\n```\nsage.matrix.matrix_gfpn_dense\nsage.libs.meataxe\nsage.structure.element\nsage.rings.morphism\nlibc.string\ncysignals.signals\ncysignals.memory\nsage.matrix.matrix0\n```\n\nSo, I suggest to include all this in the list of dependencies. Which gives rise to the questions:\n- Has the dependency list be in a single line, or can it be one dependency per line? Would look nicer!\n- What to do about libc and cysignals? Is that covered by the dependencies `python` and `cython`?",
    "created_at": "2019-01-30T09:22:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522856",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:19'></a>I think it would be possible to be a little more thorough. Here is the list of all cimports in the spkg that get stuff from outside the spkg (hence, that's dependencies):

```
src/pGroupCohomology/cochain.pxd:from sage.matrix.matrix_gfpn_dense cimport Matrix_gfpn_dense as MTX
src/pGroupCohomology/cochain.pxd:from sage.libs.meataxe cimport *
src/pGroupCohomology/cochain.pxd:from sage.structure.element cimport RingElement, ModuleElement, Element
src/pGroupCohomology/cochain.pxd:from sage.rings.morphism cimport RingHomomorphism
src/pGroupCohomology/cochain.pyx:from sage.structure.element cimport RingElement
src/pGroupCohomology/cochain.pyx:from sage.matrix.matrix_gfpn_dense cimport new_mtx
src/pGroupCohomology/cochain.pyx:from libc.string cimport memcpy
src/pGroupCohomology/cochain.pyx:from cysignals.signals cimport sig_check, sig_on, sig_off
src/pGroupCohomology/cohomology.pyx:from libc.string cimport memcpy
src/pGroupCohomology/cohomology.pyx:from sage.matrix.matrix_gfpn_dense cimport Matrix_gfpn_dense as MTX
src/pGroupCohomology/cohomology.pyx:from sage.matrix.matrix_gfpn_dense cimport new_mtx
src/pGroupCohomology/cohomology.pyx:from sage.libs.meataxe cimport *
src/pGroupCohomology/modular_cohomology.pyx:from sage.libs.meataxe cimport *
src/pGroupCohomology/modular_cohomology.pyx:from sage.matrix.matrix_gfpn_dense cimport Matrix_gfpn_dense as MTX
src/pGroupCohomology/modular_cohomology.pyx:from sage.matrix.matrix_gfpn_dense cimport new_mtx
src/pGroupCohomology/resolution_bindings.pxd:from sage.libs.meataxe cimport *
src/pGroupCohomology/resolution.pxd:from sage.libs.meataxe cimport *
src/pGroupCohomology/resolution.pxd:from sage.matrix.matrix_gfpn_dense cimport Matrix_gfpn_dense as MTX
src/pGroupCohomology/resolution.pyx:from libc.string cimport memcpy
src/pGroupCohomology/resolution.pyx:from cysignals.memory cimport sig_free
src/pGroupCohomology/resolution.pyx:from cysignals.signals cimport sig_check, sig_on, sig_off
src/pGroupCohomology/resolution.pyx:from sage.matrix.matrix_gfpn_dense cimport Matrix_gfpn_dense as MTX
src/pGroupCohomology/resolution.pyx:from sage.matrix.matrix_gfpn_dense cimport FieldConverter_class, FieldConverter, new_mtx
src/pGroupCohomology/resolution.pyx:from sage.matrix.matrix0 cimport Matrix as Matrix0
```
So, the complete lists of dependencies is

```
sage.matrix.matrix_gfpn_dense
sage.libs.meataxe
sage.structure.element
sage.rings.morphism
libc.string
cysignals.signals
cysignals.memory
sage.matrix.matrix0
```

So, I suggest to include all this in the list of dependencies. Which gives rise to the questions:
- Has the dependency list be in a single line, or can it be one dependency per line? Would look nicer!
- What to do about libc and cysignals? Is that covered by the dependencies `python` and `cython`?



---

archive/issue_comments_522857.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,7 @@\n-The API change of `coercion_model` (#27021) broke `p_group_cohomology`: https://patchbot.sagemath.org/log/27152/Ubuntu/18.04/x86_64/4.15.0-38-generic/quasar/2019-01-29%2023:36:43\n-R\n-ebuilding `p_group_cohomology` is sufficient (an analogous problem occurred with `giacpy_sage` on #27021).\n+The API change of `coercion_model` (#27021) broke `p_group_cohomology`.\n+\n+- patchbot report: https://patchbot.sagemath.org/log/27152/Ubuntu/18.04/x86_64/4.15.0-38-generic/quasar/2019-01-29%2023:36:43\n+\n+Rebuilding `p_group_cohomology` is sufficient (an analogous problem occurred with `giacpy_sage` on #27021).\n \n As experimental fix, we make `p_group_cohomology` depend on `element.pxd` and cython.\n``````\n",
    "created_at": "2019-01-30T09:40:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522857",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,7 @@
-The API change of `coercion_model` (#27021) broke `p_group_cohomology`: https://patchbot.sagemath.org/log/27152/Ubuntu/18.04/x86_64/4.15.0-38-generic/quasar/2019-01-29%2023:36:43
-R
-ebuilding `p_group_cohomology` is sufficient (an analogous problem occurred with `giacpy_sage` on #27021).
+The API change of `coercion_model` (#27021) broke `p_group_cohomology`.
+
+- patchbot report: https://patchbot.sagemath.org/log/27152/Ubuntu/18.04/x86_64/4.15.0-38-generic/quasar/2019-01-29%2023:36:43
+
+Rebuilding `p_group_cohomology` is sufficient (an analogous problem occurred with `giacpy_sage` on #27021).
 
 As experimental fix, we make `p_group_cohomology` depend on `element.pxd` and cython.
``````




---

archive/issue_comments_522858.json:
```json
{
    "body": "<a id='comment:20'></a>Replying to [comment:19 SimonKing]:\n\n> Must the dependency list be in a single line, or can it be one dependency per line? Would look nicer!\n\n\nOnly the first line of the `dependencies` file is read, so yes, the dependencies must all\nbe listed in the first line of that file.",
    "created_at": "2019-01-30T09:40:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522858",
    "user": "https://github.com/slel"
}
```

<a id='comment:20'></a>Replying to [comment:19 SimonKing]:

> Must the dependency list be in a single line, or can it be one dependency per line? Would look nicer!


Only the first line of the `dependencies` file is read, so yes, the dependencies must all
be listed in the first line of that file.



---

archive/issue_comments_522859.json:
```json
{
    "body": "Changing keywords from \"\" to \"dependencies\".",
    "created_at": "2019-01-30T09:40:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522859",
    "user": "https://github.com/slel"
}
```

Changing keywords from "" to "dependencies".



---

archive/issue_comments_522860.json:
```json
{
    "body": "Changing branch from \"u/jdemeyer/p_group_cohomology_depends_on_cython\" to \"u/SimonKing/p_group_cohomology_depends_on_cython\"",
    "created_at": "2019-01-30T10:41:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522860",
    "user": "https://github.com/simon-king-jena"
}
```

Changing branch from "u/jdemeyer/p_group_cohomology_depends_on_cython" to "u/SimonKing/p_group_cohomology_depends_on_cython"



---

archive/issue_comments_522861.json:
```json
{
    "body": "Changing commit from \"0b3ce61261057cbd0578511f61b0b5168b1eb201\" to \"46b2823ed1082d58c4884516aeb54b7f4b716580\"",
    "created_at": "2019-01-30T10:45:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522861",
    "user": "https://github.com/simon-king-jena"
}
```

Changing commit from "0b3ce61261057cbd0578511f61b0b5168b1eb201" to "46b2823ed1082d58c4884516aeb54b7f4b716580"



---

archive/issue_comments_522862.json:
```json
{
    "body": "<a id='comment:22'></a>I have added all dependencies in sagelib, i.e., all pxd-files from which p_group_cohomology cimports.\n\nSo, what's missing is libc and cysignals. How to name them in the dependencies?\n\n---\nNew commits:",
    "created_at": "2019-01-30T10:45:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522862",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:22'></a>I have added all dependencies in sagelib, i.e., all pxd-files from which p_group_cohomology cimports.

So, what's missing is libc and cysignals. How to name them in the dependencies?

---
New commits:



---

archive/issue_comments_522863.json:
```json
{
    "body": "<a id='comment:23'></a>Replying to [comment:19 SimonKing]:\n> So, the complete lists of dependencies is\n> \n> ```\n> sage.matrix.matrix_gfpn_dense\n> sage.libs.meataxe\n> sage.structure.element\n> sage.rings.morphism\n> libc.string\n> cysignals.signals\n> cysignals.memory\n> sage.matrix.matrix0\n> ```\n\n\nNo, that's not the complete list of dependencies. Like I said, you should also consider implied dependencies: for example, `sage.structure.element` depends on `sage.structure.parent` and so on. So my choice of `sage.structure.element` and `sage.matrix.matrix_gfpn_dense` was meant to be a reasonably small but meaningful set of dependencies.\n\nFor cysignals, just add a dependency on the `cysignals` package.",
    "created_at": "2019-01-30T14:25:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522863",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:23'></a>Replying to [comment:19 SimonKing]:
> So, the complete lists of dependencies is
> 
> ```
> sage.matrix.matrix_gfpn_dense
> sage.libs.meataxe
> sage.structure.element
> sage.rings.morphism
> libc.string
> cysignals.signals
> cysignals.memory
> sage.matrix.matrix0
> ```


No, that's not the complete list of dependencies. Like I said, you should also consider implied dependencies: for example, `sage.structure.element` depends on `sage.structure.parent` and so on. So my choice of `sage.structure.element` and `sage.matrix.matrix_gfpn_dense` was meant to be a reasonably small but meaningful set of dependencies.

For cysignals, just add a dependency on the `cysignals` package.



---

archive/issue_comments_522864.json:
```json
{
    "body": "<a id='comment:24'></a>Replying to [comment:23 jdemeyer]:\n> No, that's not the complete list of dependencies. Like I said, you should also consider implied dependencies:\n\n\nI understood that. But I think to the very least one should name *all* pxd files from which the package cimports. Everything else would be too short.\n\n> For cysignals, just add a dependency on the `cysignals` package.\n\n\nThanks. And for libc?",
    "created_at": "2019-01-30T16:02:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522864",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:24'></a>Replying to [comment:23 jdemeyer]:
> No, that's not the complete list of dependencies. Like I said, you should also consider implied dependencies:


I understood that. But I think to the very least one should name *all* pxd files from which the package cimports. Everything else would be too short.

> For cysignals, just add a dependency on the `cysignals` package.


Thanks. And for libc?



---

archive/issue_comments_522865.json:
```json
{
    "body": "Changing commit from \"46b2823ed1082d58c4884516aeb54b7f4b716580\" to \"f39c9f1306e5fed045b96df1a4cef3614dca4f75\"",
    "created_at": "2019-01-31T14:18:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522865",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "46b2823ed1082d58c4884516aeb54b7f4b716580" to "f39c9f1306e5fed045b96df1a4cef3614dca4f75"



---

archive/issue_comments_522866.json:
```json
{
    "body": "<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-01-31T14:18:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522866",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_522867.json:
```json
{
    "body": "Changing author from \"Jeroen Demeyer\" to \"Jeroen Demeyer, Simon King\"",
    "created_at": "2019-01-31T14:20:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522867",
    "user": "https://github.com/simon-king-jena"
}
```

Changing author from "Jeroen Demeyer" to "Jeroen Demeyer, Simon King"



---

archive/issue_comments_522868.json:
```json
{
    "body": "<a id='comment:26'></a>I have added `cysignals` to the dependencies. What about `libc`? In any case, it is still \"needs review\", and since I added stuff (after searching for all cimports), I guess I qualify as one author.",
    "created_at": "2019-01-31T14:20:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522868",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:26'></a>I have added `cysignals` to the dependencies. What about `libc`? In any case, it is still "needs review", and since I added stuff (after searching for all cimports), I guess I qualify as one author.



---

archive/issue_comments_522869.json:
```json
{
    "body": "<a id='comment:27'></a>Replying to [comment:26 SimonKing]:\n> What about `libc`?\n\n\nThat's just the system C library on which virtually everything depends. It's assumed to remain ABI-compatible, so recompiling isn't needed.",
    "created_at": "2019-01-31T15:20:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522869",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:27'></a>Replying to [comment:26 SimonKing]:
> What about `libc`?


That's just the system C library on which virtually everything depends. It's assumed to remain ABI-compatible, so recompiling isn't needed.



---

archive/issue_comments_522870.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Simon King, Jeroen Demeyer\"",
    "created_at": "2019-01-31T21:44:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522870",
    "user": "https://github.com/jdemeyer"
}
```

Changing reviewer from "" to "Simon King, Jeroen Demeyer"



---

archive/issue_comments_522871.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-01-31T21:44:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522871",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_522872.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-02-04T23:02:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522872",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_522873.json:
```json
{
    "body": "Changing branch from \"u/SimonKing/p_group_cohomology_depends_on_cython\" to \"f39c9f1306e5fed045b96df1a4cef3614dca4f75\"",
    "created_at": "2019-02-04T23:02:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27173#issuecomment-522873",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/SimonKing/p_group_cohomology_depends_on_cython" to "f39c9f1306e5fed045b96df1a4cef3614dca4f75"



---

archive/issue_events_067474.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-02-04T23:02:35Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27173",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27173#event-67474"
}
```
