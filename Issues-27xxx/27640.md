# Issue 27640: Shi arrangement for other types

archive/issues_027403.json:
```json
{
    "body": "m-extended Shi arrangement defined for any finite crystallograpic root system\n\nCC:  vivianepons @tscrim\n\nKeywords: days98\n\nBranch/Commit: b176a2a9d6c11eeda227e969aebe02bc28b15f84\n\nReviewer: Fr\u00e9d\u00e9ric Chapoton, Travis Scrimshaw\n\nAuthor: Eleni Tzanaki, Viviane Pons\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/27640\n\n",
    "closed_at": "2019-04-15T17:47:59Z",
    "created_at": "2019-04-11T09:04:19Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.8",
    "title": "Shi arrangement for other types",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27640",
    "user": "https://trac.sagemath.org/admin/accounts/users/etzanaki"
}
```
m-extended Shi arrangement defined for any finite crystallograpic root system

CC:  vivianepons @tscrim

Keywords: days98

Branch/Commit: b176a2a9d6c11eeda227e969aebe02bc28b15f84

Reviewer: Frédéric Chapoton, Travis Scrimshaw

Author: Eleni Tzanaki, Viviane Pons

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/27640





---

archive/issue_comments_533634.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+m-extended Shi arrangement defined for any finite crystallograpic root system\n``````\n",
    "created_at": "2019-04-11T09:09:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27640#issuecomment-533634",
    "user": "https://trac.sagemath.org/admin/accounts/users/etzanaki"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+m-extended Shi arrangement defined for any finite crystallograpic root system
``````




---

archive/issue_comments_533635.json:
```json
{
    "body": "Changing keywords from \"\" to \"#days98\".",
    "created_at": "2019-04-11T09:09:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27640#issuecomment-533635",
    "user": "https://trac.sagemath.org/admin/accounts/users/etzanaki"
}
```

Changing keywords from "" to "#days98".



---

archive/issue_comments_533636.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to combinatorics.",
    "created_at": "2019-04-11T09:09:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27640#issuecomment-533636",
    "user": "https://trac.sagemath.org/admin/accounts/users/etzanaki"
}
```

Changing component from PLEASE CHANGE to combinatorics.



---

archive/issue_comments_533637.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2019-04-12T08:31:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27640#issuecomment-533637",
    "user": "https://github.com/tscrim"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_533638.json:
```json
{
    "body": "Changing keywords from \"#days98\" to \"days98\".",
    "created_at": "2019-04-12T08:31:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27640#issuecomment-533638",
    "user": "https://github.com/tscrim"
}
```

Changing keywords from "#days98" to "days98".



---

archive/issue_comments_533639.json:
```json
{
    "body": "Changing branch from \"\" to \"u/etzanaki/shi_arrangement_for_other_types\"",
    "created_at": "2019-04-13T07:13:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27640#issuecomment-533639",
    "user": "https://trac.sagemath.org/admin/accounts/users/etzanaki"
}
```

Changing branch from "" to "u/etzanaki/shi_arrangement_for_other_types"



---

archive/issue_comments_533640.json:
```json
{
    "body": "Changing commit from \"\" to \"0924213f7cc85bca0f3ed072605cab1fca817d6d\"",
    "created_at": "2019-04-13T07:17:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27640#issuecomment-533640",
    "user": "https://trac.sagemath.org/admin/accounts/users/etzanaki"
}
```

Changing commit from "" to "0924213f7cc85bca0f3ed072605cab1fca817d6d"



---

archive/issue_comments_533641.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-04-13T07:17:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27640#issuecomment-533641",
    "user": "https://trac.sagemath.org/admin/accounts/users/etzanaki"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_533642.json:
```json
{
    "body": "Changing author from \"\" to \"Eleni Tzanaki\"",
    "created_at": "2019-04-13T07:17:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27640#issuecomment-533642",
    "user": "https://trac.sagemath.org/admin/accounts/users/etzanaki"
}
```

Changing author from "" to "Eleni Tzanaki"



---

archive/issue_comments_533643.json:
```json
{
    "body": "<a id='comment:5'></a>New commits:",
    "created_at": "2019-04-13T07:17:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27640#issuecomment-533643",
    "user": "https://trac.sagemath.org/admin/accounts/users/etzanaki"
}
```

<a id='comment:5'></a>New commits:



---

archive/issue_comments_533644.json:
```json
{
    "body": "Changing branch from \"u/etzanaki/shi_arrangement_for_other_types\" to \"u/VivianePons/shi_arrangement_for_other_types\"",
    "created_at": "2019-04-13T08:18:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27640#issuecomment-533644",
    "user": "https://github.com/VivianePons"
}
```

Changing branch from "u/etzanaki/shi_arrangement_for_other_types" to "u/VivianePons/shi_arrangement_for_other_types"



---

archive/issue_comments_533645.json:
```json
{
    "body": "<a id='comment:7'></a>Some PEP8 and other misc small comments:\n\n```diff\n-    def Shi(self, data, K=QQ, names=None, m = 1):\n+    def Shi(self, data, K=QQ, names=None, m=1):\n```\n\n```diff\n         The characteristic polynomial is pre-computed using the results of\n-         [Ath1996]_ .\n+        [Ath1996]_.\n```\n\n```diff\n         if data in NN:\n-            cartan_type = CartanType([\"A\",data -1])\n+            cartan_type = CartanType(['A', data-1])\n```\n\n```diff\n         for a in PR:\n             for const in range(-m+1,m+1):\n-                hyperplanes.append(sum(a[j]*x[j] for j in range(d\n-                ))-const)\n+                hyperplanes.append(sum(a[j]*x[j] for j in range(d))-const)\n```\n(the 80 char/line is much more of a guideline and you should never sacrifice readability for it IMO).\n\n```diff\n-        charpoly = (x**(d-n))*(x-m*h)**n\n+        charpoly = x**(d-n) * (x - m*h)**n\n```\n\nIt would also be nice to remove those added blanklines at the end of the file.\n\n---\nNew commits:",
    "created_at": "2019-04-13T08:49:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27640#issuecomment-533645",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'></a>Some PEP8 and other misc small comments:

```diff
-    def Shi(self, data, K=QQ, names=None, m = 1):
+    def Shi(self, data, K=QQ, names=None, m=1):
```

```diff
         The characteristic polynomial is pre-computed using the results of
-         [Ath1996]_ .
+        [Ath1996]_.
```

```diff
         if data in NN:
-            cartan_type = CartanType(["A",data -1])
+            cartan_type = CartanType(['A', data-1])
```

```diff
         for a in PR:
             for const in range(-m+1,m+1):
-                hyperplanes.append(sum(a[j]*x[j] for j in range(d
-                ))-const)
+                hyperplanes.append(sum(a[j]*x[j] for j in range(d))-const)
```
(the 80 char/line is much more of a guideline and you should never sacrifice readability for it IMO).

```diff
-        charpoly = (x**(d-n))*(x-m*h)**n
+        charpoly = x**(d-n) * (x - m*h)**n
```

It would also be nice to remove those added blanklines at the end of the file.

---
New commits:



---

archive/issue_comments_533646.json:
```json
{
    "body": "Changing commit from \"0924213f7cc85bca0f3ed072605cab1fca817d6d\" to \"411f5e1bcb875fe8ee5907ee4312220ac1f4cd35\"",
    "created_at": "2019-04-13T08:49:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27640#issuecomment-533646",
    "user": "https://github.com/tscrim"
}
```

Changing commit from "0924213f7cc85bca0f3ed072605cab1fca817d6d" to "411f5e1bcb875fe8ee5907ee4312220ac1f4cd35"



---

archive/issue_comments_533647.json:
```json
{
    "body": "Changing commit from \"411f5e1bcb875fe8ee5907ee4312220ac1f4cd35\" to \"f1bd24e876b88fb3fcc6dda81d5d4a33c0795099\"",
    "created_at": "2019-04-13T09:12:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27640#issuecomment-533647",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "411f5e1bcb875fe8ee5907ee4312220ac1f4cd35" to "f1bd24e876b88fb3fcc6dda81d5d4a33c0795099"



---

archive/issue_comments_533648.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-13T09:12:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27640#issuecomment-533648",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_533649.json:
```json
{
    "body": "<a id='comment:9'></a>It looks like the bot is happy. I have fixed the small things pointed by Travis. \n\nEleni wrote the initial code and I helped with the design and details. The code extends the previous functionalities of the function. The previous usage is still valid and works exactly the same (we haven't changed those tests) and now we have more options (with Cartan types and m parameter), all documented. Eleni checked the math quite carefully. \n\nSo Travis, I let you have a look and hopefully, we can have a positive review soon.",
    "created_at": "2019-04-13T10:53:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27640#issuecomment-533649",
    "user": "https://github.com/VivianePons"
}
```

<a id='comment:9'></a>It looks like the bot is happy. I have fixed the small things pointed by Travis. 

Eleni wrote the initial code and I helped with the design and details. The code extends the previous functionalities of the function. The previous usage is still valid and works exactly the same (we haven't changed those tests) and now we have more options (with Cartan types and m parameter), all documented. Eleni checked the math quite carefully. 

So Travis, I let you have a look and hopefully, we can have a positive review soon.



---

archive/issue_comments_533650.json:
```json
{
    "body": "<a id='comment:10'></a>- avoid using unicode \"\u2013\" in the references, just use - (minus)\n\n- in the doctests, write `h = hyperplane`, namely add space around =\n\n- do not repeat the \"EXAMPLES::\"\n\notherwise, looks good",
    "created_at": "2019-04-13T11:25:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27640#issuecomment-533650",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:10'></a>- avoid using unicode "–" in the references, just use - (minus)

- in the doctests, write `h = hyperplane`, namely add space around =

- do not repeat the "EXAMPLES::"

otherwise, looks good



---

archive/issue_comments_533651.json:
```json
{
    "body": "<a id='comment:11'></a>and this line is useless, as told by the patchbot:\n\n```\nR = RootSystem(cartan_type)\n```",
    "created_at": "2019-04-13T11:28:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27640#issuecomment-533651",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:11'></a>and this line is useless, as told by the patchbot:

```
R = RootSystem(cartan_type)
```



---

archive/issue_comments_533652.json:
```json
{
    "body": "Changing commit from \"f1bd24e876b88fb3fcc6dda81d5d4a33c0795099\" to \"b176a2a9d6c11eeda227e969aebe02bc28b15f84\"",
    "created_at": "2019-04-13T11:59:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27640#issuecomment-533652",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f1bd24e876b88fb3fcc6dda81d5d4a33c0795099" to "b176a2a9d6c11eeda227e969aebe02bc28b15f84"



---

archive/issue_comments_533653.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-13T11:59:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27640#issuecomment-533653",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_533654.json:
```json
{
    "body": "<a id='comment:13'></a>All done!",
    "created_at": "2019-04-13T11:59:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27640#issuecomment-533654",
    "user": "https://github.com/VivianePons"
}
```

<a id='comment:13'></a>All done!



---

archive/issue_comments_533655.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Fr\u00e9d\u00e9ric Chapoton\"",
    "created_at": "2019-04-13T14:02:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27640#issuecomment-533655",
    "user": "https://github.com/fchapoton"
}
```

Changing reviewer from "" to "Frédéric Chapoton"



---

archive/issue_comments_533656.json:
```json
{
    "body": "<a id='comment:14'></a>ok, thx",
    "created_at": "2019-04-13T14:02:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27640#issuecomment-533656",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:14'></a>ok, thx



---

archive/issue_comments_533657.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-04-13T14:02:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27640#issuecomment-533657",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_533658.json:
```json
{
    "body": "Changing author from \"Eleni Tzanaki\" to \"Eleni Tzanaki, Viviane Pons\"",
    "created_at": "2019-04-13T15:16:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27640#issuecomment-533658",
    "user": "https://github.com/tscrim"
}
```

Changing author from "Eleni Tzanaki" to "Eleni Tzanaki, Viviane Pons"



---

archive/issue_comments_533659.json:
```json
{
    "body": "<a id='comment:15'></a>Viviane, I added you as an author based on[comment:9](#comment%3A9). If you feel you closer to a reviewer, feel free to move yourself over.",
    "created_at": "2019-04-13T15:16:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27640#issuecomment-533659",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:15'></a>Viviane, I added you as an author based on[comment:9](#comment%3A9). If you feel you closer to a reviewer, feel free to move yourself over.



---

archive/issue_comments_533660.json:
```json
{
    "body": "Changing reviewer from \"Fr\u00e9d\u00e9ric Chapoton\" to \"Fr\u00e9d\u00e9ric Chapoton, Travis Scrimshaw\"",
    "created_at": "2019-04-13T15:16:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27640#issuecomment-533660",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "Frédéric Chapoton" to "Frédéric Chapoton, Travis Scrimshaw"



---

archive/issue_events_068598.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-04-15T17:47:59Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27640",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27640#event-68598"
}
```



---

archive/issue_comments_533661.json:
```json
{
    "body": "Changing branch from \"u/VivianePons/shi_arrangement_for_other_types\" to \"b176a2a9d6c11eeda227e969aebe02bc28b15f84\"",
    "created_at": "2019-04-15T17:47:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27640#issuecomment-533661",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/VivianePons/shi_arrangement_for_other_types" to "b176a2a9d6c11eeda227e969aebe02bc28b15f84"



---

archive/issue_comments_533662.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-04-15T17:47:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27640#issuecomment-533662",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
