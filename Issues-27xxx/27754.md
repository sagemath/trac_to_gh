# Issue 27754: Upgrade: Python 3.8.5

archive/issues_027517.json:
```json
{
    "assignees": [],
    "body": "This is to upgrade to Python 3.8.x.\n\n- [PEP569 -- Python 3.8 Release Schedule](https://www.python.org/dev/peps/pep-0569/)\n- [What's new in Python 3.8](https://docs.python.org/3.8/whatsnew/3.8.html)\n\n**Tarball**: see checksums.ini\n\nPrevious and next Python upgrades:\n- #25680 - Python 3.7.3\n- #30210 - Python 3.7.8\n- #30184 - Python 3.9.x\n\nSee also:\n- #30384 Adopt the \u201ctime window-based\u201d policy for support of Python versions from NEP 29\n\n\nDepends on #28197\nDepends on #29042\nDepends on #29861\nDepends on #30162\nDepends on #30225\nDepends on #30127\nDepends on #30144\nDepends on #30345\nDepends on #30365\nDepends on #30140\nDepends on #30351\n\nCC:  @fchapoton @embray @kiwifb @jdemeyer @mkoeppe @slel @timokau @isuruf @kliem @tscrim @heluani @sheerluck\n\nKeywords: **days101**\n\nBranch: **[`f1cda12`](https://github.com/sagemath/sagetrac-mirror/commit/f1cda120e6c715ec6bdd6d8bb776b3b0aa921794)**\n\nUpstream: **Reported upstream. Developers acknowledge bug.**\n\nReviewer: **Matthias Koeppe, Fran\u00e7ois Bissey**\n\nAuthor: **Jeroen Demeyer, John Palmieri, Matthias Koeppe, Antonio Rojas**\n\nComponent: **packages: standard**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/27754_\n\n",
    "closed_at": "2020-09-06T21:52:04Z",
    "created_at": "2019-05-01T01:46:00Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade: Python 3.8.5",
    "type": "issue",
    "updated_at": "2020-09-11T00:48:53Z",
    "url": "https://github.com/sagemath/sage/issues/27754",
    "user": "https://github.com/slel"
}
```
This is to upgrade to Python 3.8.x.

- [PEP569 -- Python 3.8 Release Schedule](https://www.python.org/dev/peps/pep-0569/)
- [What's new in Python 3.8](https://docs.python.org/3.8/whatsnew/3.8.html)

**Tarball**: see checksums.ini

Previous and next Python upgrades:
- #25680 - Python 3.7.3
- #30210 - Python 3.7.8
- #30184 - Python 3.9.x

See also:
- #30384 Adopt the “time window-based” policy for support of Python versions from NEP 29


Depends on #28197
Depends on #29042
Depends on #29861
Depends on #30162
Depends on #30225
Depends on #30127
Depends on #30144
Depends on #30345
Depends on #30365
Depends on #30140
Depends on #30351

CC:  @fchapoton @embray @kiwifb @jdemeyer @mkoeppe @slel @timokau @isuruf @kliem @tscrim @heluani @sheerluck

Keywords: **days101**

Branch: **[`f1cda12`](https://github.com/sagemath/sagetrac-mirror/commit/f1cda120e6c715ec6bdd6d8bb776b3b0aa921794)**

Upstream: **Reported upstream. Developers acknowledge bug.**

Reviewer: **Matthias Koeppe, François Bissey**

Author: **Jeroen Demeyer, John Palmieri, Matthias Koeppe, Antonio Rojas**

Component: **packages: standard**

_Issue created by migration from https://trac.sagemath.org/ticket/27754_





---

archive/issue_events_380729.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2019-05-01T01:46:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380729"
}
```



---

archive/issue_events_380730.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2019-05-01T01:46:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380730"
}
```



---

archive/issue_events_380731.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2019-05-01T01:46:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "label": "https://github.com/sagemath/sage/labels/wishlist%20item",
    "label_color": "e81ff9",
    "label_name": "wishlist item",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380731"
}
```



---

archive/issue_comments_430430.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nIf people want to start testing, Python 3.8.0a3 is out:\n- [Python 3.8.0a3](https://www.python.org/downloads/release/python-380a3/)",
    "created_at": "2019-05-01T01:46:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430430",
    "user": "https://github.com/slel"
}
```

<div id="comment:1" align="right">comment:1</div>

If people want to start testing, Python 3.8.0a3 is out:
- [Python 3.8.0a3](https://www.python.org/downloads/release/python-380a3/)



---

archive/issue_comments_430431.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI think it's a bit early for testing. I'd rather wait for the first beta, which is supposed to be released later this month.",
    "created_at": "2019-05-01T09:36:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430431",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:2" align="right">comment:2</div>

I think it's a bit early for testing. I'd rather wait for the first beta, which is supposed to be released later this month.



---

archive/issue_comments_430432.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nPython 3.8.0b1 is out:\n\n- [Python 3.8.0b1](https://www.python.org/downloads/release/python-380b1/)",
    "created_at": "2019-06-10T16:39:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430432",
    "user": "https://github.com/slel"
}
```

<div id="comment:3" align="right">comment:3</div>

Python 3.8.0b1 is out:

- [Python 3.8.0b1](https://www.python.org/downloads/release/python-380b1/)



---

archive/issue_comments_430433.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nNote: this requires a Cython upgrade.",
    "created_at": "2019-06-11T10:09:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430433",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:4" align="right">comment:4</div>

Note: this requires a Cython upgrade.



---

archive/issue_comments_430434.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nCython upgrade needs review at #27886.",
    "created_at": "2019-06-11T20:23:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430434",
    "user": "https://github.com/slel"
}
```

<div id="comment:5" align="right">comment:5</div>

Cython upgrade needs review at #27886.



---

archive/issue_comments_430435.json:
```json
{
    "body": "Changed keywords from none to **days101**",
    "created_at": "2019-06-19T00:30:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430435",
    "user": "https://github.com/slel"
}
```

Changed keywords from none to **days101**



---

archive/issue_comments_430436.json:
```json
{
    "body": "Dependencies: **#28012**",
    "created_at": "2019-06-19T00:30:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430436",
    "user": "https://github.com/slel"
}
```

Dependencies: **#28012**



---

archive/issue_comments_430437.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI'll have a look at this today.",
    "created_at": "2019-06-19T05:37:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430437",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:7" align="right">comment:7</div>

I'll have a look at this today.



---

archive/issue_comments_430438.json:
```json
{
    "body": "Changed dependencies from **#28012** to **#27886**",
    "created_at": "2019-06-19T12:39:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430438",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#28012** to **#27886**



---

archive/issue_events_380732.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-06-19T12:45:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380732"
}
```



---

archive/issue_comments_430439.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,3 +3,4 @@\n - [PEP569 -- Python 3.8 Release Schedule](https://www.python.org/dev/peps/pep-0569/)\n - [What's new in Python 3.8](https://docs.python.org/3.8/whatsnew/3.8.html)\n \n+**Tarball**: https://www.python.org/ftp/python/3.8.0/Python-3.8.0b1.tar.xz\n``````\n",
    "created_at": "2019-06-19T12:45:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430439",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,3 +3,4 @@
 - [PEP569 -- Python 3.8 Release Schedule](https://www.python.org/dev/peps/pep-0569/)
 - [What's new in Python 3.8](https://docs.python.org/3.8/whatsnew/3.8.html)
 
+**Tarball**: https://www.python.org/ftp/python/3.8.0/Python-3.8.0b1.tar.xz
``````




---

archive/issue_events_380733.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-06-19T12:45:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380733"
}
```



---

archive/issue_events_380734.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-06-19T12:45:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "label": "https://github.com/sagemath/sage/labels/wishlist%20item",
    "label_color": "e81ff9",
    "label_name": "wishlist item",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380734"
}
```



---

archive/issue_comments_430440.json:
```json
{
    "body": "Author: **Jeroen Demeyer**",
    "created_at": "2019-06-19T12:45:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430440",
    "user": "https://github.com/jdemeyer"
}
```

Author: **Jeroen Demeyer**



---

archive/issue_comments_430441.json:
```json
{
    "body": "Branch: **[u/jdemeyer/upgrade__python_3_8_x](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade__python_3_8_x)**",
    "created_at": "2019-06-19T13:12:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430441",
    "user": "https://github.com/jdemeyer"
}
```

Branch: **[u/jdemeyer/upgrade__python_3_8_x](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade__python_3_8_x)**



---

archive/issue_comments_430442.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/46837b74871a41b8f79af5c9d477428b183dc2d7\"><code>46837b7</code></a></td><td><code>Python 3.8.0</code></td></tr></table>\n",
    "created_at": "2019-06-19T14:50:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430442",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/46837b74871a41b8f79af5c9d477428b183dc2d7"><code>46837b7</code></a></td><td><code>Python 3.8.0</code></td></tr></table>




---

archive/issue_comments_430443.json:
```json
{
    "body": "Commit: **[`46837b7`](https://github.com/sagemath/sagetrac-mirror/commit/46837b74871a41b8f79af5c9d477428b183dc2d7)**",
    "created_at": "2019-06-19T14:50:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430443",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`46837b7`](https://github.com/sagemath/sagetrac-mirror/commit/46837b74871a41b8f79af5c9d477428b183dc2d7)**



---

archive/issue_comments_430444.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,3 +4,9 @@\n - [What's new in Python 3.8](https://docs.python.org/3.8/whatsnew/3.8.html)\n \n **Tarball**: https://www.python.org/ftp/python/3.8.0/Python-3.8.0b1.tar.xz\n+\n+Patches added:\n+- https://github.com/python/cpython/pull/13959\n+- https://github.com/python/cpython/pull/14193\n+\n+It is likely that these will be accepted by the next beta\n``````\n",
    "created_at": "2019-06-19T14:52:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430444",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,3 +4,9 @@
 - [What's new in Python 3.8](https://docs.python.org/3.8/whatsnew/3.8.html)
 
 **Tarball**: https://www.python.org/ftp/python/3.8.0/Python-3.8.0b1.tar.xz
+
+Patches added:
+- https://github.com/python/cpython/pull/13959
+- https://github.com/python/cpython/pull/14193
+
+It is likely that these will be accepted by the next beta
``````




---

archive/issue_comments_430445.json:
```json
{
    "body": "Changed dependencies from **#27886** to none",
    "created_at": "2019-06-19T14:52:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430445",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#27886** to none



---

archive/issue_comments_430446.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nActually, thanks to two patches which are likely going to be accepted upstream, it no longer depends on the Cython upgrade.",
    "created_at": "2019-06-19T14:52:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430446",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:12" align="right">comment:12</div>

Actually, thanks to two patches which are likely going to be accepted upstream, it no longer depends on the Cython upgrade.



---

archive/issue_comments_430447.json:
```json
{
    "body": "Upstream: **Reported upstream. Developers acknowledge bug.**",
    "created_at": "2019-06-19T15:23:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430447",
    "user": "https://github.com/jdemeyer"
}
```

Upstream: **Reported upstream. Developers acknowledge bug.**



---

archive/issue_comments_430448.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nThere is a mysterious build failure of matplotlib:\n\n```\nProcessing /home/jdemeyer/sage-python3/local/var/tmp/sage/build/matplotlib-2.2.3.p0/src\n  Created temporary directory: /tmp/pip-req-build-vq4okaxf\n  Added file:///home/jdemeyer/sage-python3/local/var/tmp/sage/build/matplotlib-2.2.3.p0/src to build tracker '/tmp/pip-req-tracker-xcv165b_'\n  Running setup.py (path:/tmp/pip-req-build-vq4okaxf/setup.py) egg_info for package from file:///home/jdemeyer/sage-python3/local/var/tmp/sage/build/matplotlib-2.2.3.p0/src\n    Running command python setup.py egg_info\n    Traceback (most recent call last):\n      File \"<string>\", line 1, in <module>\n      File \"/tmp/pip-req-build-vq4okaxf/setup.py\", line 172, in <module>\n        result = package.check()\n      File \"/tmp/pip-req-build-vq4okaxf/setupext.py\", line 963, in check\n        import numpy\n      File \"/home/jdemeyer/sage-python3/local/lib/python3.8/site-packages/numpy/__init__.py\", line 142, in <module>\n        from . import core\n      File \"/home/jdemeyer/sage-python3/local/lib/python3.8/site-packages/numpy/core/__init__.py\", line 16, in <module>\n        from . import multiarray\n      File \"/home/jdemeyer/sage-python3/local/lib/python3.8/site-packages/numpy/core/multiarray.py\", line 12, in <module>\n        from . import overrides\n      File \"/home/jdemeyer/sage-python3/local/lib/python3.8/site-packages/numpy/core/overrides.py\", line 8, in <module>\n        from numpy.compat._inspect import getargspec\n      File \"/home/jdemeyer/sage-python3/local/lib/python3.8/site-packages/numpy/compat/__init__.py\", line 14, in <module>\n        from . import py3k\n      File \"/home/jdemeyer/sage-python3/local/lib/python3.8/site-packages/numpy/compat/py3k.py\", line 15, in <module>\n        from pathlib import Path, PurePath\n      File \"/home/jdemeyer/sage-python3/local/lib/python3.8/pathlib.py\", line 391, in <module>\n        class _NormalAccessor(_Accessor):\n      File \"/home/jdemeyer/sage-python3/local/lib/python3.8/pathlib.py\", line 415, in _NormalAccessor\n        link_to = os.link\n    AttributeError: module 'os' has no attribute 'link'\n```\n\nBut when running Python normally, `os.link` does exist:\n\n```\njdemeyer@sage4:~/sage-python3$ ./sage --python3\nPython 3.8.0b1 (default, Jun 19 2019, 16:54:26) \n[GCC 4.9.3] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import os\n>>> os.link\n<built-in function link>\n```\n\nI have no clue how this could happen.",
    "created_at": "2019-06-19T15:57:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430448",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:14" align="right">comment:14</div>

There is a mysterious build failure of matplotlib:

```
Processing /home/jdemeyer/sage-python3/local/var/tmp/sage/build/matplotlib-2.2.3.p0/src
  Created temporary directory: /tmp/pip-req-build-vq4okaxf
  Added file:///home/jdemeyer/sage-python3/local/var/tmp/sage/build/matplotlib-2.2.3.p0/src to build tracker '/tmp/pip-req-tracker-xcv165b_'
  Running setup.py (path:/tmp/pip-req-build-vq4okaxf/setup.py) egg_info for package from file:///home/jdemeyer/sage-python3/local/var/tmp/sage/build/matplotlib-2.2.3.p0/src
    Running command python setup.py egg_info
    Traceback (most recent call last):
      File "<string>", line 1, in <module>
      File "/tmp/pip-req-build-vq4okaxf/setup.py", line 172, in <module>
        result = package.check()
      File "/tmp/pip-req-build-vq4okaxf/setupext.py", line 963, in check
        import numpy
      File "/home/jdemeyer/sage-python3/local/lib/python3.8/site-packages/numpy/__init__.py", line 142, in <module>
        from . import core
      File "/home/jdemeyer/sage-python3/local/lib/python3.8/site-packages/numpy/core/__init__.py", line 16, in <module>
        from . import multiarray
      File "/home/jdemeyer/sage-python3/local/lib/python3.8/site-packages/numpy/core/multiarray.py", line 12, in <module>
        from . import overrides
      File "/home/jdemeyer/sage-python3/local/lib/python3.8/site-packages/numpy/core/overrides.py", line 8, in <module>
        from numpy.compat._inspect import getargspec
      File "/home/jdemeyer/sage-python3/local/lib/python3.8/site-packages/numpy/compat/__init__.py", line 14, in <module>
        from . import py3k
      File "/home/jdemeyer/sage-python3/local/lib/python3.8/site-packages/numpy/compat/py3k.py", line 15, in <module>
        from pathlib import Path, PurePath
      File "/home/jdemeyer/sage-python3/local/lib/python3.8/pathlib.py", line 391, in <module>
        class _NormalAccessor(_Accessor):
      File "/home/jdemeyer/sage-python3/local/lib/python3.8/pathlib.py", line 415, in _NormalAccessor
        link_to = os.link
    AttributeError: module 'os' has no attribute 'link'
```

But when running Python normally, `os.link` does exist:

```
jdemeyer@sage4:~/sage-python3$ ./sage --python3
Python 3.8.0b1 (default, Jun 19 2019, 16:54:26) 
[GCC 4.9.3] on linux
Type "help", "copyright", "credits" or "license" for more information.
>>> import os
>>> os.link
<built-in function link>
```

I have no clue how this could happen.



---

archive/issue_comments_430449.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nI tried this with OS X and ran into a problem with Pillow:\n\n```\n  File \"setup.py\", line 316, in build_extensions\n    _add_directory(library_dirs, sysroot+\"/usr/lib\")\nTypeError: unsupported operand type(s) for +: 'NoneType' and 'str'\n```\nHere is the problem code from Pillow's setup.py:\n\n```\nsysroot = sysconfig.get_config_var('Py_MACOS_SYSROOT')\n_add_directory(library_dirs, sysroot+\"/usr/lib\")\n```\nPython 3.7.3 does this:\n\n```\nPython 3.7.3 (default, Jun 17 2019, 15:38:22) \n[Clang 10.0.1 (clang-1001.0.46.4)] on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import sysconfig\n>>> sysconfig.get_config_var('Py_MACOS_SYSROOT')\n'/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.14.sdk'\n>>>\n```\nThe new Python does this:\n\n```\nPython 3.8.0b1 (default, Jun 19 2019, 11:09:54) \n[Clang 10.0.1 (clang-1001.0.46.4)] on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import sysconfig\n>>> sysconfig.get_config_var('Py_MACOS_SYSROOT')\n>>>\n```",
    "created_at": "2019-06-19T18:31:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430449",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:15" align="right">comment:15</div>

I tried this with OS X and ran into a problem with Pillow:

```
  File "setup.py", line 316, in build_extensions
    _add_directory(library_dirs, sysroot+"/usr/lib")
TypeError: unsupported operand type(s) for +: 'NoneType' and 'str'
```
Here is the problem code from Pillow's setup.py:

```
sysroot = sysconfig.get_config_var('Py_MACOS_SYSROOT')
_add_directory(library_dirs, sysroot+"/usr/lib")
```
Python 3.7.3 does this:

```
Python 3.7.3 (default, Jun 17 2019, 15:38:22) 
[Clang 10.0.1 (clang-1001.0.46.4)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import sysconfig
>>> sysconfig.get_config_var('Py_MACOS_SYSROOT')
'/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.14.sdk'
>>>
```
The new Python does this:

```
Python 3.8.0b1 (default, Jun 19 2019, 11:09:54) 
[Clang 10.0.1 (clang-1001.0.46.4)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import sysconfig
>>> sysconfig.get_config_var('Py_MACOS_SYSROOT')
>>>
```



---

archive/issue_comments_430450.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nI see the same problem with matplotlib. For laughs, I put a `print(dir(os))` command right before the line `link_to = os.link`. The output is identical to what I get when I do `import os; dir(os)` from `sage --python3`, except it is missing `link`.\n\nIf I run `make -k`, I also see problems building the Sage library, by the way: lots of errors of the form\n\n```\nRuntimeError: \n        An attempt has been made to start a new process before the\n        current process has finished its bootstrapping phase.\n\n        This probably means that you are not using fork to start your\n        child processes and you have forgotten to use the proper idiom\n        in the main module:\n\n            if __name__ == '__main__':\n                freeze_support()\n                ...\n\n        The \"freeze_support()\" line can be omitted if the program\n        is not going to be frozen to produce an executable.\n```",
    "created_at": "2019-06-19T18:48:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430450",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:16" align="right">comment:16</div>

I see the same problem with matplotlib. For laughs, I put a `print(dir(os))` command right before the line `link_to = os.link`. The output is identical to what I get when I do `import os; dir(os)` from `sage --python3`, except it is missing `link`.

If I run `make -k`, I also see problems building the Sage library, by the way: lots of errors of the form

```
RuntimeError: 
        An attempt has been made to start a new process before the
        current process has finished its bootstrapping phase.

        This probably means that you are not using fork to start your
        child processes and you have forgotten to use the proper idiom
        in the main module:

            if __name__ == '__main__':
                freeze_support()
                ...

        The "freeze_support()" line can be omitted if the program
        is not going to be frozen to produce an executable.
```



---

archive/issue_comments_430451.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@jhpalmieri](#comment:16):\n> I see the same problem with matplotlib. For laughs, I put a `print(dir(os))` command right before the line `link_to = os.link`. The output is identical to what I get when I do `import os; dir(os)` from `sage --python3`, except it is missing `link`.\n\nThat makes no sense. Somebody is fooling with us...\n\nCould you try also `print(os)`? Maybe there is a different `os` module shadowing the standard one or something...\n\nJust in case, I checked that the problem unfortunately persists after `make distclean`.\n\nAnd a Google search for this error doesn't find anything.",
    "created_at": "2019-06-19T19:16:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430451",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@jhpalmieri](#comment:16):
> I see the same problem with matplotlib. For laughs, I put a `print(dir(os))` command right before the line `link_to = os.link`. The output is identical to what I get when I do `import os; dir(os)` from `sage --python3`, except it is missing `link`.

That makes no sense. Somebody is fooling with us...

Could you try also `print(os)`? Maybe there is a different `os` module shadowing the standard one or something...

Just in case, I checked that the problem unfortunately persists after `make distclean`.

And a Google search for this error doesn't find anything.



---

archive/issue_comments_430452.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI'm guessing the problem is coming from `matplotlib`'s setup.py:\n\n```\nimport os\ntry:\n    del os.link\nexcept AttributeError:\n    pass\n```",
    "created_at": "2019-06-19T19:31:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430452",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:18" align="right">comment:18</div>

I'm guessing the problem is coming from `matplotlib`'s setup.py:

```
import os
try:
    del os.link
except AttributeError:
    pass
```



---

archive/issue_comments_430453.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nMy question is why it worked with Python 3.7.3 but not 3.8.0.",
    "created_at": "2019-06-19T19:34:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430453",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:19" align="right">comment:19</div>

My question is why it worked with Python 3.7.3 but not 3.8.0.



---

archive/issue_comments_430454.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@jhpalmieri](#comment:19):\n> My question is why it worked with Python 3.7.3 but not 3.8.0.\n\nA different implementation of `pathlib`: https://bugs.python.org/issue26978",
    "created_at": "2019-06-19T19:52:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430454",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@jhpalmieri](#comment:19):
> My question is why it worked with Python 3.7.3 but not 3.8.0.

A different implementation of `pathlib`: https://bugs.python.org/issue26978



---

archive/issue_comments_430455.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,4 +9,6 @@\n - https://github.com/python/cpython/pull/13959\n - https://github.com/python/cpython/pull/14193\n \n-It is likely that these will be accepted by the next beta\n+It is likely that these will be accepted by the next beta.\n+\n+This breaks matplotlib: https://github.com/matplotlib/matplotlib/issues/14580\n``````\n",
    "created_at": "2019-06-19T20:06:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430455",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,4 +9,6 @@
 - https://github.com/python/cpython/pull/13959
 - https://github.com/python/cpython/pull/14193
 
-It is likely that these will be accepted by the next beta
+It is likely that these will be accepted by the next beta.
+
+This breaks matplotlib: https://github.com/matplotlib/matplotlib/issues/14580
``````




---

archive/issue_comments_430456.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nI reported this to matplotlib: https://github.com/matplotlib/matplotlib/issues/14580",
    "created_at": "2019-06-19T20:06:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430456",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:21" align="right">comment:21</div>

I reported this to matplotlib: https://github.com/matplotlib/matplotlib/issues/14580



---

archive/issue_comments_430457.json:
```json
{
    "body": "Dependencies: **#28023**",
    "created_at": "2019-06-20T10:13:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430457",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#28023**



---

archive/issue_comments_430458.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,5 +10,3 @@\n - https://github.com/python/cpython/pull/14193\n \n It is likely that these will be accepted by the next beta.\n-\n-This breaks matplotlib: https://github.com/matplotlib/matplotlib/issues/14580\n``````\n",
    "created_at": "2019-06-20T10:13:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430458",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,5 +10,3 @@
 - https://github.com/python/cpython/pull/14193
 
 It is likely that these will be accepted by the next beta.
-
-This breaks matplotlib: https://github.com/matplotlib/matplotlib/issues/14580
``````




---

archive/issue_comments_430459.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/296092eedf7bf082e9b4d777fbdf17c223f3a7a5\"><code>296092e</code></a></td><td><code>matplotlib 2.2.4</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cc78db22810ca605ed28235b45eeafe72418b269\"><code>cc78db2</code></a></td><td><code>Python 3.8.0</code></td></tr></table>\n",
    "created_at": "2019-06-20T11:59:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430459",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/296092eedf7bf082e9b4d777fbdf17c223f3a7a5"><code>296092e</code></a></td><td><code>matplotlib 2.2.4</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cc78db22810ca605ed28235b45eeafe72418b269"><code>cc78db2</code></a></td><td><code>Python 3.8.0</code></td></tr></table>




---

archive/issue_comments_430460.json:
```json
{
    "body": "Changed commit from **[`46837b7`](https://github.com/sagemath/sagetrac-mirror/commit/46837b74871a41b8f79af5c9d477428b183dc2d7)** to **[`cc78db2`](https://github.com/sagemath/sagetrac-mirror/commit/cc78db22810ca605ed28235b45eeafe72418b269)**",
    "created_at": "2019-06-20T11:59:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430460",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`46837b7`](https://github.com/sagemath/sagetrac-mirror/commit/46837b74871a41b8f79af5c9d477428b183dc2d7)** to **[`cc78db2`](https://github.com/sagemath/sagetrac-mirror/commit/cc78db22810ca605ed28235b45eeafe72418b269)**



---

archive/issue_comments_430461.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nWith matplotlib fixes, I'm getting these errors at runtime:\n\n```\nException ignored in: <sage.misc.weak_dict.WeakValueDictEraser object at 0x7f1bf60b5460>\nTraceback (most recent call last):\n  File \"sage/misc/weak_dict.pyx\", line 219, in sage.misc.weak_dict.WeakValueDictEraser.__call__ (build/cythonized/sage/misc/weak_dict.c:1968)\n  File \"sage/cpython/dict_del_by_value.pyx\", line 375, in sage.cpython.dict_del_by_value.del_dictitem_by_exact_value (build/cythonized/sage/cpython/dict_del_by_value.c:2311)\n  File \"sage/cpython/dict_del_by_value.pyx\", line 294, in sage.cpython.dict_del_by_value.ensure_allows_deletions (build/cythonized/sage/cpython/dict_del_by_value.c:2025)\nAssertionError: \n```",
    "created_at": "2019-06-20T12:11:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430461",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:24" align="right">comment:24</div>

With matplotlib fixes, I'm getting these errors at runtime:

```
Exception ignored in: <sage.misc.weak_dict.WeakValueDictEraser object at 0x7f1bf60b5460>
Traceback (most recent call last):
  File "sage/misc/weak_dict.pyx", line 219, in sage.misc.weak_dict.WeakValueDictEraser.__call__ (build/cythonized/sage/misc/weak_dict.c:1968)
  File "sage/cpython/dict_del_by_value.pyx", line 375, in sage.cpython.dict_del_by_value.del_dictitem_by_exact_value (build/cythonized/sage/cpython/dict_del_by_value.c:2311)
  File "sage/cpython/dict_del_by_value.pyx", line 294, in sage.cpython.dict_del_by_value.ensure_allows_deletions (build/cythonized/sage/cpython/dict_del_by_value.c:2025)
AssertionError: 
```



---

archive/issue_comments_430462.json:
```json
{
    "body": "Changed dependencies from **#28023** to **#28023, #28025**",
    "created_at": "2019-06-20T13:59:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430462",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#28023** to **#28023, #28025**



---

archive/issue_comments_430463.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nAlso getargspec is completely broken, causing docbuild errors.",
    "created_at": "2019-06-20T14:33:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430463",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:26" align="right">comment:26</div>

Also getargspec is completely broken, causing docbuild errors.



---

archive/issue_comments_430464.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nsee #27971 for getargspec ?",
    "created_at": "2019-06-20T14:35:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430464",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:27" align="right">comment:27</div>

see #27971 for getargspec ?



---

archive/issue_comments_430465.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@fchapoton](#comment:27):\n> see #27971 for getargspec ?\n\nI'll have to look at that. In any case, these seem to be new failures that did not exist on Python 3.7.",
    "created_at": "2019-06-20T15:01:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430465",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@fchapoton](#comment:27):
> see #27971 for getargspec ?

I'll have to look at that. In any case, these seem to be new failures that did not exist on Python 3.7.



---

archive/issue_comments_430466.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nReplying to [@jhpalmieri](#comment:15):\n> I tried this with OS X and ran into a problem with Pillow:\n> Here is the problem code from Pillow's setup.py:\n> \n> ```\n> sysroot = sysconfig.get_config_var('Py_MACOS_SYSROOT')\n> _add_directory(library_dirs, sysroot+\"/usr/lib\")\n> ```\n\nThis is actually added in a Sage patch. It's failing because of the removal of `macos_no_include.patch`, which was added in #27631. I'll have to see if that patch is necessary anymore. If not, we need to unpatch Pillow.",
    "created_at": "2019-06-20T17:42:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430466",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:29" align="right">comment:29</div>

Replying to [@jhpalmieri](#comment:15):
> I tried this with OS X and ran into a problem with Pillow:
> Here is the problem code from Pillow's setup.py:
> 
> ```
> sysroot = sysconfig.get_config_var('Py_MACOS_SYSROOT')
> _add_directory(library_dirs, sysroot+"/usr/lib")
> ```

This is actually added in a Sage patch. It's failing because of the removal of `macos_no_include.patch`, which was added in #27631. I'll have to see if that patch is necessary anymore. If not, we need to unpatch Pillow.



---

archive/issue_comments_430467.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nI still gets lots of errors as in [comment:16](#comment:16). The build process for `sagelib` seems to go into an infinite loop. I just hit ctrl-C, and there are about 2400 instances of\n\n```\n************************************************************************\nError building the Sage library\n************************************************************************\nPlease email sage-devel (http://groups.google.com/group/sage-devel)\nexplaining the problem and including the relevant part of the log file\n  /Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-8.8.rc2/logs/pkgs/sagelib-8.8.rc2.log\nDescribe your computer, operating system, etc.\n```\nin the log file, all connected with the same error message.",
    "created_at": "2019-06-20T19:29:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430467",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:30" align="right">comment:30</div>

I still gets lots of errors as in [comment:16](#comment:16). The build process for `sagelib` seems to go into an infinite loop. I just hit ctrl-C, and there are about 2400 instances of

```
************************************************************************
Error building the Sage library
************************************************************************
Please email sage-devel (http://groups.google.com/group/sage-devel)
explaining the problem and including the relevant part of the log file
  /Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-8.8.rc2/logs/pkgs/sagelib-8.8.rc2.log
Describe your computer, operating system, etc.
```
in the log file, all connected with the same error message.



---

archive/issue_comments_430468.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nOn which system are you seeing that? The build of the Sage library worked for me on Linux.",
    "created_at": "2019-06-20T19:30:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430468",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:31" align="right">comment:31</div>

On which system are you seeing that? The build of the Sage library worked for me on Linux.



---

archive/issue_comments_430469.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@jdemeyer](#comment:31):\n> On which system are you seeing that? The build of the Sage library worked for me on Linux.\n\nOS X, both 10.13 and 10.14.",
    "created_at": "2019-06-20T22:05:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430469",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@jdemeyer](#comment:31):
> On which system are you seeing that? The build of the Sage library worked for me on Linux.

OS X, both 10.13 and 10.14.



---

archive/issue_comments_430470.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@jhpalmieri](#comment:29):\n> Replying to [@jhpalmieri](#comment:15):\n> > I tried this with OS X and ran into a problem with Pillow:\n> > Here is the problem code from Pillow's setup.py:\n> > \n> > ```\n> > sysroot = sysconfig.get_config_var('Py_MACOS_SYSROOT')\n> > _add_directory(library_dirs, sysroot+\"/usr/lib\")\n> > ```\n\n> \n> This is actually added in a Sage patch. It's failing because of the removal of `macos_no_include.patch`, which was added in #27631. I'll have to see if that patch is necessary anymore. If not, we need to unpatch Pillow.\n\nOn an OS X 10.14 machine, one affected by #27631 (no `/usr/include`), `pip` builds just fine, so I think Python and pip are finding zlib, but Pillow does not. \n\nIf I keep the Pillow patch, it fails to build at all, with the error mentioned above. If I delete the Pillow patch and build, I see in its log file \"The headers and library files could not be found for zlib\".",
    "created_at": "2019-06-20T22:07:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430470",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@jhpalmieri](#comment:29):
> Replying to [@jhpalmieri](#comment:15):
> > I tried this with OS X and ran into a problem with Pillow:
> > Here is the problem code from Pillow's setup.py:
> > 
> > ```
> > sysroot = sysconfig.get_config_var('Py_MACOS_SYSROOT')
> > _add_directory(library_dirs, sysroot+"/usr/lib")
> > ```

> 
> This is actually added in a Sage patch. It's failing because of the removal of `macos_no_include.patch`, which was added in #27631. I'll have to see if that patch is necessary anymore. If not, we need to unpatch Pillow.

On an OS X 10.14 machine, one affected by #27631 (no `/usr/include`), `pip` builds just fine, so I think Python and pip are finding zlib, but Pillow does not. 

If I keep the Pillow patch, it fails to build at all, with the error mentioned above. If I delete the Pillow patch and build, I see in its log file "The headers and library files could not be found for zlib".



---

archive/issue_comments_430471.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nAttachment: **[sagelib-8.8.rc2.log](https://github.com/sagemath/sage/files/ticket27754/sagelib-8.8.rc2.log)**\n\nHere is the start of the log file. I've deleted more than 2000 repeated tracebacks.",
    "created_at": "2019-06-20T23:20:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430471",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:34" align="right">comment:34</div>

Attachment: **[sagelib-8.8.rc2.log](https://github.com/sagemath/sage/files/ticket27754/sagelib-8.8.rc2.log)**

Here is the start of the log file. I've deleted more than 2000 repeated tracebacks.



---

archive/issue_comments_430472.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nI think the problem is this (from the [3.8 changelog](https://www.python.org/downloads/release/python-380b1/)):\n\n```\non macOS, the spawn start method is now used by default in multiprocessing\n```\nThe documentation for `multiprocessing` then points to a [bug report](https://bugs.python.org/issue33725) which discusses our old friend `OBJC_DISABLE_INITIALIZE_FORK_SAFETY` (#25921). So if we get multiprocessing to work properly on OS X, maybe we can remove the line\n\n```\n    export OBJC_DISABLE_INITIALIZE_FORK_SAFETY=YES\n```\nfrom sage-env.\n\nIn the meantime, I don't know how to get it working properly; using `fork` instead of `spawn` in `src/setup.py` is the only way I've found to proceed so far. I don't understand the distinctions in the [multiprocessing documentation](https://docs.python.org/3.8/library/multiprocessing.html#contexts-and-start-methods) between `fork` and `spawn` to know what should be set differently to use `spawn` correctly.",
    "created_at": "2019-06-22T02:19:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430472",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:35" align="right">comment:35</div>

I think the problem is this (from the [3.8 changelog](https://www.python.org/downloads/release/python-380b1/)):

```
on macOS, the spawn start method is now used by default in multiprocessing
```
The documentation for `multiprocessing` then points to a [bug report](https://bugs.python.org/issue33725) which discusses our old friend `OBJC_DISABLE_INITIALIZE_FORK_SAFETY` (#25921). So if we get multiprocessing to work properly on OS X, maybe we can remove the line

```
    export OBJC_DISABLE_INITIALIZE_FORK_SAFETY=YES
```
from sage-env.

In the meantime, I don't know how to get it working properly; using `fork` instead of `spawn` in `src/setup.py` is the only way I've found to proceed so far. I don't understand the distinctions in the [multiprocessing documentation](https://docs.python.org/3.8/library/multiprocessing.html#contexts-and-start-methods) between `fork` and `spawn` to know what should be set differently to use `spawn` correctly.



---

archive/issue_comments_430473.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nUsing `fork` instead of `spawn` lets me build the Sage library:\n\n```diff\ndiff --git a/src/setup.py b/src/setup.py\nindex 42ba3a63da..5e2d65f9cc 100755\n--- a/src/setup.py\n+++ b/src/setup.py\n@@ -493,11 +493,12 @@ def execute_list_of_commands_in_parallel(command_list, nthreads):\n         progress = progress_fmt.format(i+1, N)\n         command_list[i] = command_list[i] + (progress,)\n \n-    from multiprocessing import Pool\n+    import multiprocessing as mp\n+    mp.set_start_method('fork')\n     # map_async handles KeyboardInterrupt correctly if an argument is\n     # given to get().  Plain map() and apply_async() do not work\n     # correctly, see Trac #16113.\n-    pool = Pool(nthreads)\n+    pool = mp.Pool(nthreads)\n     result = pool.map_async(apply_func_progress, command_list, 1).get(99999)\n     pool.close()\n     pool.join()\n```\nI made a similar change to allow docbuilding to work. Now I get failures with docbuilding. First, lots of warnings:\n\n```\n..../local/lib/python3.8/site-packages/matplotlib/backends/backend_agg.py:531: DeprecationWarning: PY_SSIZE_T_CLEAN will be required for '#' formats\n```\nThen an error:\n\n```\nTraceback (most recent call last):\n  File \"/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-8.8.rc2/local/lib/python3.8/runpy.py\", line 192, in _run_module_as_main\n    return _run_code(code, main_globals, None,\n  File \"/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-8.8.rc2/local/lib/python3.8/runpy.py\", line 85, in _run_code\n    exec(code, run_globals)\n  File \"/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-8.8.rc2/local/lib/python3.8/site-packages/sage_setup/docbuild/__main__.py\", line 2, in <module>\n    main()\n  File \"/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-8.8.rc2/local/lib/python3.8/site-packages/sage_setup/docbuild/__init__.py\", line 1731, in main\n    builder()\n  File \"/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-8.8.rc2/local/lib/python3.8/site-packages/sage_setup/docbuild/__init__.py\", line 352, in _wrapper\n    getattr(get_builder(document), 'inventory')(*args, **kwds)\n  File \"/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-8.8.rc2/local/lib/python3.8/site-packages/sage_setup/docbuild/__init__.py\", line 548, in _wrapper\n    build_many(build_ref_doc, L)\n  File \"/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-8.8.rc2/local/lib/python3.8/site-packages/sage_setup/docbuild/__init__.py\", line 289, in build_many\n    ret = x.get(99999)\n  File \"/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-8.8.rc2/local/lib/python3.8/multiprocessing/pool.py\", line 768, in get\n    raise self._value\nOSError: WARNING: error while formatting arguments for sage.calculus.riemann.Riemann_Map.get_szego: bad operand type for unary -: 'NoneType'\n```",
    "created_at": "2019-06-22T02:41:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430473",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:36" align="right">comment:36</div>

Using `fork` instead of `spawn` lets me build the Sage library:

```diff
diff --git a/src/setup.py b/src/setup.py
index 42ba3a63da..5e2d65f9cc 100755
--- a/src/setup.py
+++ b/src/setup.py
@@ -493,11 +493,12 @@ def execute_list_of_commands_in_parallel(command_list, nthreads):
         progress = progress_fmt.format(i+1, N)
         command_list[i] = command_list[i] + (progress,)
 
-    from multiprocessing import Pool
+    import multiprocessing as mp
+    mp.set_start_method('fork')
     # map_async handles KeyboardInterrupt correctly if an argument is
     # given to get().  Plain map() and apply_async() do not work
     # correctly, see Trac #16113.
-    pool = Pool(nthreads)
+    pool = mp.Pool(nthreads)
     result = pool.map_async(apply_func_progress, command_list, 1).get(99999)
     pool.close()
     pool.join()
```
I made a similar change to allow docbuilding to work. Now I get failures with docbuilding. First, lots of warnings:

```
..../local/lib/python3.8/site-packages/matplotlib/backends/backend_agg.py:531: DeprecationWarning: PY_SSIZE_T_CLEAN will be required for '#' formats
```
Then an error:

```
Traceback (most recent call last):
  File "/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-8.8.rc2/local/lib/python3.8/runpy.py", line 192, in _run_module_as_main
    return _run_code(code, main_globals, None,
  File "/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-8.8.rc2/local/lib/python3.8/runpy.py", line 85, in _run_code
    exec(code, run_globals)
  File "/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-8.8.rc2/local/lib/python3.8/site-packages/sage_setup/docbuild/__main__.py", line 2, in <module>
    main()
  File "/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-8.8.rc2/local/lib/python3.8/site-packages/sage_setup/docbuild/__init__.py", line 1731, in main
    builder()
  File "/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-8.8.rc2/local/lib/python3.8/site-packages/sage_setup/docbuild/__init__.py", line 352, in _wrapper
    getattr(get_builder(document), 'inventory')(*args, **kwds)
  File "/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-8.8.rc2/local/lib/python3.8/site-packages/sage_setup/docbuild/__init__.py", line 548, in _wrapper
    build_many(build_ref_doc, L)
  File "/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-8.8.rc2/local/lib/python3.8/site-packages/sage_setup/docbuild/__init__.py", line 289, in build_many
    ret = x.get(99999)
  File "/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-8.8.rc2/local/lib/python3.8/multiprocessing/pool.py", line 768, in get
    raise self._value
OSError: WARNING: error while formatting arguments for sage.calculus.riemann.Riemann_Map.get_szego: bad operand type for unary -: 'NoneType'
```



---

archive/issue_comments_430474.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nAnd of course I can't run any doctests because they use `multiprocessing`, and I haven't figured out how to tell doctesting (forker.py in particular) to use `fork` instead of `spawn`. Sage starts and some basic things work. The Jupyter notebook is giving me problems.",
    "created_at": "2019-06-22T02:52:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430474",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:37" align="right">comment:37</div>

And of course I can't run any doctests because they use `multiprocessing`, and I haven't figured out how to tell doctesting (forker.py in particular) to use `fork` instead of `spawn`. Sage starts and some basic things work. The Jupyter notebook is giving me problems.



---

archive/issue_comments_430475.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nI also didn't manage to build the docs because the same error. I know it's a problem with `sage_getargspec` but I haven't checked further.",
    "created_at": "2019-06-24T13:55:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430475",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:38" align="right">comment:38</div>

I also didn't manage to build the docs because the same error. I know it's a problem with `sage_getargspec` but I haven't checked further.



---

archive/issue_comments_430476.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nI don't have a good solution for the problem with Pillow (comment:33). I have been deleting the patch and force installing `zlib`, which works for now.",
    "created_at": "2019-06-24T20:07:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430476",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:39" align="right">comment:39</div>

I don't have a good solution for the problem with Pillow (comment:33). I have been deleting the patch and force installing `zlib`, which works for now.



---

archive/issue_comments_430477.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nFor the record: for the `spawn` vs. `fork` issue with OS X, I have had to make changes in three files: `src/setup.py`, `src/sage_setup/docbuild/__init__.py`, and `Cython/Build/Dependencies.py`. The changes are all pretty much the same; for example in `docbuild/__init__.py`:\n\n```diff\ndiff --git a/src/sage_setup/docbuild/__init__.py b/src/sage_setup/docbuild/__init__.py\nindex 0f2700168a..6d1ff4e377 100644\n--- a/src/sage_setup/docbuild/__init__.py\n+++ b/src/sage_setup/docbuild/__init__.py\n@@ -279,8 +279,9 @@ if not (CYGWIN_VERSION and CYGWIN_VERSION[0] < 3):\n         # serialize this by taking the pool (and thus the call to fork()) out\n         # completely: The call to Sphinx leaks memory, so we need to build each\n         # document in its own process to control the RAM usage.\n-        from multiprocessing import Pool\n-        pool = Pool(NUM_THREADS, maxtasksperchild=1)\n+        import multiprocessing\n+        ctx = multiprocessing.get_context('fork')\n+        pool = ctx.Pool(NUM_THREADS, maxtasksperchild=1)\n         # map_async handles KeyboardInterrupt correctly. Plain map and\n         # apply_async does not, so don't use it.\n         x = pool.map_async(target, args, 1)\n```",
    "created_at": "2019-06-24T20:26:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430477",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:40" align="right">comment:40</div>

For the record: for the `spawn` vs. `fork` issue with OS X, I have had to make changes in three files: `src/setup.py`, `src/sage_setup/docbuild/__init__.py`, and `Cython/Build/Dependencies.py`. The changes are all pretty much the same; for example in `docbuild/__init__.py`:

```diff
diff --git a/src/sage_setup/docbuild/__init__.py b/src/sage_setup/docbuild/__init__.py
index 0f2700168a..6d1ff4e377 100644
--- a/src/sage_setup/docbuild/__init__.py
+++ b/src/sage_setup/docbuild/__init__.py
@@ -279,8 +279,9 @@ if not (CYGWIN_VERSION and CYGWIN_VERSION[0] < 3):
         # serialize this by taking the pool (and thus the call to fork()) out
         # completely: The call to Sphinx leaks memory, so we need to build each
         # document in its own process to control the RAM usage.
-        from multiprocessing import Pool
-        pool = Pool(NUM_THREADS, maxtasksperchild=1)
+        import multiprocessing
+        ctx = multiprocessing.get_context('fork')
+        pool = ctx.Pool(NUM_THREADS, maxtasksperchild=1)
         # map_async handles KeyboardInterrupt correctly. Plain map and
         # apply_async does not, so don't use it.
         x = pool.map_async(target, args, 1)
```



---

archive/issue_comments_430478.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nI am also seeing the error \"ImportError: cannot import name 'clock' from 'time' (unknown location)\". I don't think this is coming from the Sage library, but rather from other packages, and in particular brial and sympy may need to be changed.\n\n```\n$ grep -R \"from time import clock\" local/lib/python3.8/\nlocal/lib/python3.8//site-packages/sympy/plotting/pygletplot/plot_window.py:from time import clock\nlocal/lib/python3.8//site-packages/brial/interpolate.py:from time import clock\nlocal/lib/python3.8//site-packages/future/backports/test/pystone.py:from time import clock\nlocal/lib/python3.8//site-packages/zmq/backend/cffi/_poll.py:    from time import clock as monotonic\nlocal/lib/python3.8//site-packages/sage/coding/information_set_decoder.py:            from time import clock as process_time\n```\nChanging the import to something like\n\n```\ntry:\n    from time import perf_counter as clock # or process_time instead of perf_counter?\nexcept ImportError:\n    from time import clock\n```\nmight work.",
    "created_at": "2019-06-24T20:44:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430478",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:41" align="right">comment:41</div>

I am also seeing the error "ImportError: cannot import name 'clock' from 'time' (unknown location)". I don't think this is coming from the Sage library, but rather from other packages, and in particular brial and sympy may need to be changed.

```
$ grep -R "from time import clock" local/lib/python3.8/
local/lib/python3.8//site-packages/sympy/plotting/pygletplot/plot_window.py:from time import clock
local/lib/python3.8//site-packages/brial/interpolate.py:from time import clock
local/lib/python3.8//site-packages/future/backports/test/pystone.py:from time import clock
local/lib/python3.8//site-packages/zmq/backend/cffi/_poll.py:    from time import clock as monotonic
local/lib/python3.8//site-packages/sage/coding/information_set_decoder.py:            from time import clock as process_time
```
Changing the import to something like

```
try:
    from time import perf_counter as clock # or process_time instead of perf_counter?
except ImportError:
    from time import clock
```
might work.



---

archive/issue_comments_430479.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nReplying to [@jhpalmieri](#comment:41):\n> I am also seeing the error \"ImportError: cannot import name 'clock' from 'time' (unknown location)\". I don't think this is coming from the Sage library, but rather from other packages, and in particular brial and sympy may need to be changed.\n> \n> ```\n> $ grep -R \"from time import clock\" local/lib/python3.8/\n> local/lib/python3.8//site-packages/sympy/plotting/pygletplot/plot_window.py:from time import clock\n> local/lib/python3.8//site-packages/brial/interpolate.py:from time import clock\n> local/lib/python3.8//site-packages/future/backports/test/pystone.py:from time import clock\n> local/lib/python3.8//site-packages/zmq/backend/cffi/_poll.py:    from time import clock as monotonic\n> local/lib/python3.8//site-packages/sage/coding/information_set_decoder.py:            from time import clock as process_time\n> ```\n> Changing the import to something like\n> \n> ```\n> try:\n>     from time import perf_counter as clock # or process_time instead of perf_counter?\n> except ImportError:\n>     from time import clock\n> ```\n> might work.\n\n* The sympy issue has been fixed 16 days ago.\n* I have just made a pull request for brial\n* The zmq issue is already fixed in https://github.com/zeromq/pyzmq/blob/master/zmq/backend/cffi/_poll.py\n* The last line (our own information_set_decoder.py) is already correctly using a try/except for this import.",
    "created_at": "2019-06-25T08:27:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430479",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:42" align="right">comment:42</div>

Replying to [@jhpalmieri](#comment:41):
> I am also seeing the error "ImportError: cannot import name 'clock' from 'time' (unknown location)". I don't think this is coming from the Sage library, but rather from other packages, and in particular brial and sympy may need to be changed.
> 
> ```
> $ grep -R "from time import clock" local/lib/python3.8/
> local/lib/python3.8//site-packages/sympy/plotting/pygletplot/plot_window.py:from time import clock
> local/lib/python3.8//site-packages/brial/interpolate.py:from time import clock
> local/lib/python3.8//site-packages/future/backports/test/pystone.py:from time import clock
> local/lib/python3.8//site-packages/zmq/backend/cffi/_poll.py:    from time import clock as monotonic
> local/lib/python3.8//site-packages/sage/coding/information_set_decoder.py:            from time import clock as process_time
> ```
> Changing the import to something like
> 
> ```
> try:
>     from time import perf_counter as clock # or process_time instead of perf_counter?
> except ImportError:
>     from time import clock
> ```
> might work.

* The sympy issue has been fixed 16 days ago.
* I have just made a pull request for brial
* The zmq issue is already fixed in https://github.com/zeromq/pyzmq/blob/master/zmq/backend/cffi/_poll.py
* The last line (our own information_set_decoder.py) is already correctly using a try/except for this import.



---

archive/issue_comments_430480.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,10 +3,4 @@\n - [PEP569 -- Python 3.8 Release Schedule](https://www.python.org/dev/peps/pep-0569/)\n - [What's new in Python 3.8](https://docs.python.org/3.8/whatsnew/3.8.html)\n \n-**Tarball**: https://www.python.org/ftp/python/3.8.0/Python-3.8.0b1.tar.xz\n-\n-Patches added:\n-- https://github.com/python/cpython/pull/13959\n-- https://github.com/python/cpython/pull/14193\n-\n-It is likely that these will be accepted by the next beta.\n+**Tarball**: https://www.python.org/ftp/python/3.8.0/Python-3.8.0b2.tar.xz\n``````\n",
    "created_at": "2019-07-08T08:56:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430480",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,10 +3,4 @@
 - [PEP569 -- Python 3.8 Release Schedule](https://www.python.org/dev/peps/pep-0569/)
 - [What's new in Python 3.8](https://docs.python.org/3.8/whatsnew/3.8.html)
 
-**Tarball**: https://www.python.org/ftp/python/3.8.0/Python-3.8.0b1.tar.xz
-
-Patches added:
-- https://github.com/python/cpython/pull/13959
-- https://github.com/python/cpython/pull/14193
-
-It is likely that these will be accepted by the next beta.
+**Tarball**: https://www.python.org/ftp/python/3.8.0/Python-3.8.0b2.tar.xz
``````




---

archive/issue_comments_430481.json:
```json
{
    "body": "Changed dependencies from **#28023, #28025** to **#28023, #28025, #28116**",
    "created_at": "2019-07-08T08:56:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430481",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#28023, #28025** to **#28023, #28025, #28116**



---

archive/issue_comments_430482.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,4 +3,4 @@\n - [PEP569 -- Python 3.8 Release Schedule](https://www.python.org/dev/peps/pep-0569/)\n - [What's new in Python 3.8](https://docs.python.org/3.8/whatsnew/3.8.html)\n \n-**Tarball**: https://www.python.org/ftp/python/3.8.0/Python-3.8.0b2.tar.xz\n+**Tarball**: https://www.python.org/ftp/python/3.8.0/Python-3.8.0b4.tar.xz\n``````\n",
    "created_at": "2019-08-30T09:31:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430482",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,4 +3,4 @@
 - [PEP569 -- Python 3.8 Release Schedule](https://www.python.org/dev/peps/pep-0569/)
 - [What's new in Python 3.8](https://docs.python.org/3.8/whatsnew/3.8.html)
 
-**Tarball**: https://www.python.org/ftp/python/3.8.0/Python-3.8.0b2.tar.xz
+**Tarball**: https://www.python.org/ftp/python/3.8.0/Python-3.8.0b4.tar.xz
``````




---

archive/issue_comments_430483.json:
```json
{
    "body": "Changed dependencies from **#28023, #28025, #28116** to **#28025**",
    "created_at": "2019-08-30T09:31:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430483",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#28023, #28025, #28116** to **#28025**



---

archive/issue_comments_430484.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nPython 3.8 is getting closer, it would be great if somebody could review the dependency #28025.",
    "created_at": "2019-08-30T09:32:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430484",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:45" align="right">comment:45</div>

Python 3.8 is getting closer, it would be great if somebody could review the dependency #28025.



---

archive/issue_comments_430485.json:
```json
{
    "body": "Changed dependencies from **#28025** to **#28025, #28428**",
    "created_at": "2019-08-30T09:57:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430485",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#28025** to **#28025, #28428**



---

archive/issue_comments_430486.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nPython 3.8.0 is out. Added tarball link to ticket description.",
    "created_at": "2019-10-15T14:01:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430486",
    "user": "https://github.com/slel"
}
```

<div id="comment:47" align="right">comment:47</div>

Python 3.8.0 is out. Added tarball link to ticket description.



---

archive/issue_comments_430487.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,4 +3,4 @@\n - [PEP569 -- Python 3.8 Release Schedule](https://www.python.org/dev/peps/pep-0569/)\n - [What's new in Python 3.8](https://docs.python.org/3.8/whatsnew/3.8.html)\n \n-**Tarball**: https://www.python.org/ftp/python/3.8.0/Python-3.8.0b4.tar.xz\n+**Tarball**: https://www.python.org/ftp/python/3.8.0/Python-3.8.0.tar.xz\n``````\n",
    "created_at": "2019-10-15T14:01:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430487",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,4 +3,4 @@
 - [PEP569 -- Python 3.8 Release Schedule](https://www.python.org/dev/peps/pep-0569/)
 - [What's new in Python 3.8](https://docs.python.org/3.8/whatsnew/3.8.html)
 
-**Tarball**: https://www.python.org/ftp/python/3.8.0/Python-3.8.0b4.tar.xz
+**Tarball**: https://www.python.org/ftp/python/3.8.0/Python-3.8.0.tar.xz
``````




---

archive/issue_comments_430488.json:
```json
{
    "body": "Changed commit from **[`cc78db2`](https://github.com/sagemath/sagetrac-mirror/commit/cc78db22810ca605ed28235b45eeafe72418b269)** to **[`193e9f4`](https://github.com/sagemath/sagetrac-mirror/commit/193e9f49517a95e483af785d9879948468e9ed98)**",
    "created_at": "2019-10-28T15:25:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430488",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[`cc78db2`](https://github.com/sagemath/sagetrac-mirror/commit/cc78db22810ca605ed28235b45eeafe72418b269)** to **[`193e9f4`](https://github.com/sagemath/sagetrac-mirror/commit/193e9f49517a95e483af785d9879948468e9ed98)**



---

archive/issue_comments_430489.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/upgrade__python_3_8_x](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade__python_3_8_x)** to **[public/python3.8](https://github.com/sagemath/sagetrac-mirror/tree/public/python3.8)**",
    "created_at": "2019-10-28T15:25:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430489",
    "user": "https://github.com/fchapoton"
}
```

Changed branch from **[u/jdemeyer/upgrade__python_3_8_x](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade__python_3_8_x)** to **[public/python3.8](https://github.com/sagemath/sagetrac-mirror/tree/public/python3.8)**



---

archive/issue_comments_430490.json:
```json
{
    "body": "<div id=\"comment:48\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/193e9f49517a95e483af785d9879948468e9ed98\"><code>193e9f4</code></a></td><td><code>Python 3.8.0</code></td></tr></table>\n",
    "created_at": "2019-10-28T15:25:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430490",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:48"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/193e9f49517a95e483af785d9879948468e9ed98"><code>193e9f4</code></a></td><td><code>Python 3.8.0</code></td></tr></table>




---

archive/issue_comments_430491.json:
```json
{
    "body": "Changed dependencies from **#28025, #28428** to none",
    "created_at": "2019-10-28T15:25:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430491",
    "user": "https://github.com/fchapoton"
}
```

Changed dependencies from **#28025, #28428** to none



---

archive/issue_events_380735.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-10-28T15:25:50Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380735"
}
```



---

archive/issue_events_380736.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-10-28T15:25:50Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "milestone_number": null,
    "milestone_title": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380736"
}
```



---

archive/issue_comments_430492.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\napparently some patches do no longer apply..",
    "created_at": "2019-10-28T15:33:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430492",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:49" align="right">comment:49</div>

apparently some patches do no longer apply..



---

archive/issue_comments_430493.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nIt looks to me as though the two new patches were actually merged into the release, and so they are no longer needed. I'm not positive, though.",
    "created_at": "2019-10-28T23:03:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430493",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:50" align="right">comment:50</div>

It looks to me as though the two new patches were actually merged into the release, and so they are no longer needed. I'm not positive, though.



---

archive/issue_comments_430494.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nOn OS X, the Pillow problem is still there. I tried upgrading to the most recent version of Pillow, but it did not help. I'm going to force installation of `zlib` and proceed from there.",
    "created_at": "2019-10-29T16:34:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430494",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:51" align="right">comment:51</div>

On OS X, the Pillow problem is still there. I tried upgrading to the most recent version of Pillow, but it did not help. I'm going to force installation of `zlib` and proceed from there.



---

archive/issue_comments_430495.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nThere is still a problem with a `from time import clock` statement. I don't know which one is causing the problem, but I'm guessing either brial or sympy. Neither package has fixed it in a release, as far as I can tell, but I think it's been fixed upstream in both.",
    "created_at": "2019-10-29T17:36:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430495",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:52" align="right">comment:52</div>

There is still a problem with a `from time import clock` statement. I don't know which one is causing the problem, but I'm guessing either brial or sympy. Neither package has fixed it in a release, as far as I can tell, but I think it's been fixed upstream in both.



---

archive/issue_comments_430496.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nI am also, not surprisingly, having the same `multiprocessing` problems on OS X as before. I can get the Sage library and the documentation to build, but I don't know how to get doctesting to work.",
    "created_at": "2019-10-29T17:48:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430496",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:53" align="right">comment:53</div>

I am also, not surprisingly, having the same `multiprocessing` problems on OS X as before. I can get the Sage library and the documentation to build, but I don't know how to get doctesting to work.



---

archive/issue_comments_430497.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nFWIW after updating to python 3.8 on Arch I'm getting test failures on 223 modules, so things don't look good. Most of them seem to stem from the same 3-4 issues though.",
    "created_at": "2019-11-14T07:58:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430497",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:54" align="right">comment:54</div>

FWIW after updating to python 3.8 on Arch I'm getting test failures on 223 modules, so things don't look good. Most of them seem to stem from the same 3-4 issues though.



---

archive/issue_comments_430498.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nAfter taking a closer look, besides some string changes, most of the failures fall into one of the following categories:\n\n(1) Hash changes - all hashes have changed in 3.8. This requires updating many tests, making them conditional on the python version. Not sure if it makes sense to fork so many tests at this point rather than just drop python2 support or at least not run those tests.\n\n(2) Sorting changes - many lists are now output in a different order. Same comment as in (1) about the solution.\n\n(3) \"DeprecationWarning: In future, it will be an error for 'np.bool_' scalars to be interpreted as an index\" from numpy. These are fixed with https://github.com/matplotlib/matplotlib/commit/4651a125\n\n(4) \"DeprecationWarning: PY_SSIZE_T_CLEAN will be required for '#' formats\" - this happens mostly when pickling/unpickling functions. No idea where the actual code that throws the warning is.\n\n(5) \"DeprecationWarning: an integer is required (got type sage.rings.real_mpfr.RealLiteral).  Implicit conversion to integers using `__int__` is deprecated, and may be removed in a future version of Python.\" when calling time.sleep with a Sage (sage.rings.real_mpfr.RealLiteral) float. Coercing to float first fixes the issue.\n\n(6) \"SyntaxWarning: \"is\" with a literal. Did you mean \"==\"?\" when comparing strings with 'is'\n\n(7) Use of the removed cgi.escape in sage/interacts/debugger.py. Should be changed to html.escape.\n\n(8) The signature of code() (used in sage/misc/fpickle.pyx) has changed and now requires a 'posonlyargcount' argument.\n\n(9) Mismatch after pickling/unpickling for some objects:\n\n```\nsage: A = Poset()._hasse_diagram.antichains()\nsage: A == loads(dumps(A))\nFalse\n```\n\n\nFor packagers that don't care about python2 compatibility (or 32 bit hashes) a WIP patch that fixes or works around most of these issues is at https://aur.archlinux.org/cgit/aur.git/tree/sagemath-python-3.8.patch?h=sagemath-git. A backport of https://github.com/BRiAl/BRiAl/commit/74d86170 is also needed.",
    "created_at": "2019-11-22T18:25:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430498",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:55" align="right">comment:55</div>

After taking a closer look, besides some string changes, most of the failures fall into one of the following categories:

(1) Hash changes - all hashes have changed in 3.8. This requires updating many tests, making them conditional on the python version. Not sure if it makes sense to fork so many tests at this point rather than just drop python2 support or at least not run those tests.

(2) Sorting changes - many lists are now output in a different order. Same comment as in (1) about the solution.

(3) "DeprecationWarning: In future, it will be an error for 'np.bool_' scalars to be interpreted as an index" from numpy. These are fixed with https://github.com/matplotlib/matplotlib/commit/4651a125

(4) "DeprecationWarning: PY_SSIZE_T_CLEAN will be required for '#' formats" - this happens mostly when pickling/unpickling functions. No idea where the actual code that throws the warning is.

(5) "DeprecationWarning: an integer is required (got type sage.rings.real_mpfr.RealLiteral).  Implicit conversion to integers using `__int__` is deprecated, and may be removed in a future version of Python." when calling time.sleep with a Sage (sage.rings.real_mpfr.RealLiteral) float. Coercing to float first fixes the issue.

(6) "SyntaxWarning: "is" with a literal. Did you mean "=="?" when comparing strings with 'is'

(7) Use of the removed cgi.escape in sage/interacts/debugger.py. Should be changed to html.escape.

(8) The signature of code() (used in sage/misc/fpickle.pyx) has changed and now requires a 'posonlyargcount' argument.

(9) Mismatch after pickling/unpickling for some objects:

```
sage: A = Poset()._hasse_diagram.antichains()
sage: A == loads(dumps(A))
False
```


For packagers that don't care about python2 compatibility (or 32 bit hashes) a WIP patch that fixes or works around most of these issues is at https://aur.archlinux.org/cgit/aur.git/tree/sagemath-python-3.8.patch?h=sagemath-git. A backport of https://github.com/BRiAl/BRiAl/commit/74d86170 is also needed.



---

archive/issue_comments_430499.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nPython 3.8.1rc1 was released. See python-announce post:\n\n- https://mail.python.org/archives/list/python-announce-list@python.org/thread/IGJ6ZOAOT2WFY5ZIPRQNTHOSUMPUAO2H/",
    "created_at": "2019-12-10T17:44:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430499",
    "user": "https://github.com/slel"
}
```

<div id="comment:57" align="right">comment:57</div>

Python 3.8.1rc1 was released. See python-announce post:

- https://mail.python.org/archives/list/python-announce-list@python.org/thread/IGJ6ZOAOT2WFY5ZIPRQNTHOSUMPUAO2H/



---

archive/issue_comments_430500.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nIt would be great if someone with access to OS X could look at this. I don't know how to solve all of the problems mentioned above. In particular:\n\n- multiprocessing on OS X has a different default behavior than on linux (comment:35). As a result, the Sage library doesn't build and the docs don't build without some modification, and I don't know how to get doctesting to work.\n\n- Pillow does not find the system `zlib`. Is there a better solution than force-installing Sage's `zlib`?",
    "created_at": "2019-12-10T18:48:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430500",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:58" align="right">comment:58</div>

It would be great if someone with access to OS X could look at this. I don't know how to solve all of the problems mentioned above. In particular:

- multiprocessing on OS X has a different default behavior than on linux (comment:35). As a result, the Sage library doesn't build and the docs don't build without some modification, and I don't know how to get doctesting to work.

- Pillow does not find the system `zlib`. Is there a better solution than force-installing Sage's `zlib`?



---

archive/issue_comments_430501.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nI have access to macOS but I would need to be told what to try.",
    "created_at": "2020-01-04T23:59:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430501",
    "user": "https://github.com/slel"
}
```

<div id="comment:59" align="right">comment:59</div>

I have access to macOS but I would need to be told what to try.



---

archive/issue_comments_430502.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nReports of issues with [SageMath](../wiki/SageMath) and Python 3.8:\n\n- Sage error from module `typing` and python 3.8\n  https://ask.sagemath.org/question/49326\n\n- Sage crash report: Manjaro, Python 3.8.1\n  #28946",
    "created_at": "2020-01-05T00:00:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430502",
    "user": "https://github.com/slel"
}
```

<div id="comment:60" align="right">comment:60</div>

Reports of issues with [SageMath](../wiki/SageMath) and Python 3.8:

- Sage error from module `typing` and python 3.8
  https://ask.sagemath.org/question/49326

- Sage crash report: Manjaro, Python 3.8.1
  #28946



---

archive/issue_comments_430503.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nReplying to [@slel](#comment:60):\n> Reports of issues with [SageMath](../wiki/SageMath) and Python 3.8:\n> \n> - Sage error from module `typing` and python 3.8\n>   https://ask.sagemath.org/question/49326\n> \n> - Sage crash report: Manjaro, Python 3.8.1\n>   #28946\n\nNone of these is a Sage issue: the first one is caused by the user mixing up distro and pip packages, the second one is a ntl soversion mismatch in Manjaro. The errors that still need to be figured out (besides the macOS problems) are (4), (5) and (9) in [comment:55](#comment:55) above.",
    "created_at": "2020-01-05T07:01:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430503",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:61" align="right">comment:61</div>

Replying to [@slel](#comment:60):
> Reports of issues with [SageMath](../wiki/SageMath) and Python 3.8:
> 
> - Sage error from module `typing` and python 3.8
>   https://ask.sagemath.org/question/49326
> 
> - Sage crash report: Manjaro, Python 3.8.1
>   #28946

None of these is a Sage issue: the first one is caused by the user mixing up distro and pip packages, the second one is a ntl soversion mismatch in Manjaro. The errors that still need to be figured out (besides the macOS problems) are (4), (5) and (9) in [comment:55](#comment:55) above.



---

archive/issue_comments_430504.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nSage 9.0 is out.  I think this should wait until after 9.1 to give Sage with Python 3.7 a little more time to breathe, but of course this is debatable.",
    "created_at": "2020-01-06T14:08:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430504",
    "user": "https://github.com/embray"
}
```

<div id="comment:62" align="right">comment:62</div>

Sage 9.0 is out.  I think this should wait until after 9.1 to give Sage with Python 3.7 a little more time to breathe, but of course this is debatable.



---

archive/issue_events_380737.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2020-01-06T14:08:14Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "milestone_number": null,
    "milestone_title": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380737"
}
```



---

archive/issue_events_380738.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2020-01-06T14:08:14Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380738"
}
```



---

archive/issue_comments_430505.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nReplying to [@jhpalmieri](#comment:58):\n> - Pillow does not find the system `zlib`. Is there a better solution than force-installing Sage's `zlib`?\n\nI have created #29019 for the problems with Pillow because they also affect #27824.",
    "created_at": "2020-01-15T18:42:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430505",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:63" align="right">comment:63</div>

Replying to [@jhpalmieri](#comment:58):
> - Pillow does not find the system `zlib`. Is there a better solution than force-installing Sage's `zlib`?

I have created #29019 for the problems with Pillow because they also affect #27824.



---

archive/issue_comments_430506.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nReplying to [@jhpalmieri](#comment:15):\n> I tried this with OS X and ran into a problem with Pillow:\n> \n> ```\n>   File \"setup.py\", line 316, in build_extensions\n>     _add_directory(library_dirs, sysroot+\"/usr/lib\")\n> TypeError: unsupported operand type(s) for +: 'NoneType' and 'str'\n> ```\n> Here is the problem code from Pillow's setup.py:\n> \n> ```\n> sysroot = sysconfig.get_config_var('Py_MACOS_SYSROOT')\n> _add_directory(library_dirs, sysroot+\"/usr/lib\")\n> ```\n> Python 3.7.3 does this:\n> \n> ```\n> Python 3.7.3 (default, Jun 17 2019, 15:38:22) \n> [Clang 10.0.1 (clang-1001.0.46.4)] on darwin\n> Type \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n> >>> import sysconfig\n> >>> sysconfig.get_config_var('Py_MACOS_SYSROOT')\n> '/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.14.sdk'\n> >>>\n> ```\n> The new Python does this:\n> \n> ```\n> Python 3.8.0b1 (default, Jun 19 2019, 11:09:54) \n> [Clang 10.0.1 (clang-1001.0.46.4)] on darwin\n> Type \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n> >>> import sysconfig\n> >>> sysconfig.get_config_var('Py_MACOS_SYSROOT')\n> >>>\n> ```\n\nAs far as I can see, this config variable was invented in #27631 and is not available on any other Python than our patched Python.",
    "created_at": "2020-01-15T18:44:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430506",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:64" align="right">comment:64</div>

Replying to [@jhpalmieri](#comment:15):
> I tried this with OS X and ran into a problem with Pillow:
> 
> ```
>   File "setup.py", line 316, in build_extensions
>     _add_directory(library_dirs, sysroot+"/usr/lib")
> TypeError: unsupported operand type(s) for +: 'NoneType' and 'str'
> ```
> Here is the problem code from Pillow's setup.py:
> 
> ```
> sysroot = sysconfig.get_config_var('Py_MACOS_SYSROOT')
> _add_directory(library_dirs, sysroot+"/usr/lib")
> ```
> Python 3.7.3 does this:
> 
> ```
> Python 3.7.3 (default, Jun 17 2019, 15:38:22) 
> [Clang 10.0.1 (clang-1001.0.46.4)] on darwin
> Type "help", "copyright", "credits" or "license" for more information.
> >>> import sysconfig
> >>> sysconfig.get_config_var('Py_MACOS_SYSROOT')
> '/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.14.sdk'
> >>>
> ```
> The new Python does this:
> 
> ```
> Python 3.8.0b1 (default, Jun 19 2019, 11:09:54) 
> [Clang 10.0.1 (clang-1001.0.46.4)] on darwin
> Type "help", "copyright", "credits" or "license" for more information.
> >>> import sysconfig
> >>> sysconfig.get_config_var('Py_MACOS_SYSROOT')
> >>>
> ```

As far as I can see, this config variable was invented in #27631 and is not available on any other Python than our patched Python.



---

archive/issue_comments_430507.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nindeed, `Py_MACOS_SYSROOT`  comes from  #27631.\nNote that #27631 followed a cpython patch we proposed on \nhttps://bugs.python.org/issue36231\nwhich was rejected in favour of \nhttps://github.com/python/cpython/commit/c421c66a58a6caae30f0679d7e61411418e67cec\n\nand so in 3.7.x with x>3 and in 3.y with y>7 the problem apparently is fixed, but I don't quite know how.\nI don't have any access to a modern MacOS box with Xcode without sane `/usr/incude` etc, so it's hard to experiment for me (I guess the patch for pillow in #27631 needs to be replaced with whatever hack they came up with for MacOS.",
    "created_at": "2020-01-15T19:49:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430507",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:65" align="right">comment:65</div>

indeed, `Py_MACOS_SYSROOT`  comes from  #27631.
Note that #27631 followed a cpython patch we proposed on 
https://bugs.python.org/issue36231
which was rejected in favour of 
https://github.com/python/cpython/commit/c421c66a58a6caae30f0679d7e61411418e67cec

and so in 3.7.x with x>3 and in 3.y with y>7 the problem apparently is fixed, but I don't quite know how.
I don't have any access to a modern MacOS box with Xcode without sane `/usr/incude` etc, so it's hard to experiment for me (I guess the patch for pillow in #27631 needs to be replaced with whatever hack they came up with for MacOS.



---

archive/issue_comments_430508.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nSee [comment:33](#comment:33) \u2014\u00a0I could not build Pillow (after removing Sage's patch) with Python 3.8. So I don't know if I believe that the problem has been fixed.",
    "created_at": "2020-01-15T20:06:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430508",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:66" align="right">comment:66</div>

See [comment:33](#comment:33) — I could not build Pillow (after removing Sage's patch) with Python 3.8. So I don't know if I believe that the problem has been fixed.



---

archive/issue_comments_430509.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nReplying to [@jhpalmieri](#comment:66):\n> See [comment:33](#comment:33) \u2014\u00a0I could not build Pillow (after removing Sage's patch) with Python 3.8. So I don't know if I believe that the problem has been fixed.\n\nPlease try again with the latest commit in #29019.",
    "created_at": "2020-01-15T20:36:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430509",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:67" align="right">comment:67</div>

Replying to [@jhpalmieri](#comment:66):
> See [comment:33](#comment:33) — I could not build Pillow (after removing Sage's patch) with Python 3.8. So I don't know if I believe that the problem has been fixed.

Please try again with the latest commit in #29019.



---

archive/issue_comments_430510.json:
```json
{
    "body": "Changed commit from **[`193e9f4`](https://github.com/sagemath/sagetrac-mirror/commit/193e9f49517a95e483af785d9879948468e9ed98)** to **[`9cf6f0e`](https://github.com/sagemath/sagetrac-mirror/commit/9cf6f0ebf83c57384161fdc1594bc8156e1c49c3)**",
    "created_at": "2020-01-15T21:29:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430510",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`193e9f4`](https://github.com/sagemath/sagetrac-mirror/commit/193e9f49517a95e483af785d9879948468e9ed98)** to **[`9cf6f0e`](https://github.com/sagemath/sagetrac-mirror/commit/9cf6f0ebf83c57384161fdc1594bc8156e1c49c3)**



---

archive/issue_comments_430511.json:
```json
{
    "body": "<div id=\"comment:68\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9c6324b8e3b7385a7aee3383e863afa884f8bf39\"><code>9c6324b</code></a></td><td><code>Python 3.8.0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9cf6f0ebf83c57384161fdc1594bc8156e1c49c3\"><code>9cf6f0e</code></a></td><td><code>trac 27754: remove patches that have been merged upstream</code></td></tr></table>\n",
    "created_at": "2020-01-15T21:29:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430511",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:68"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9c6324b8e3b7385a7aee3383e863afa884f8bf39"><code>9c6324b</code></a></td><td><code>Python 3.8.0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9cf6f0ebf83c57384161fdc1594bc8156e1c49c3"><code>9cf6f0e</code></a></td><td><code>trac 27754: remove patches that have been merged upstream</code></td></tr></table>




---

archive/issue_comments_430512.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nReplying to [@mkoeppe](#comment:67):\n> Replying to [@jhpalmieri](#comment:66):\n> > See [comment:33](#comment:33) \u2014\u00a0I could not build Pillow (after removing Sage's patch) with Python 3.8. So I don't know if I believe that the problem has been fixed.\n\n> Please try again with the latest commit in #29019.\n\nThat works for me. With this branch plus #29019, the build succeeds until I get to the Sage library, at which point the changes to multiprocessing start causing problems (as in [comment:16](#comment:16), [comment:35](#comment:35), [comment:36](#comment:36)).",
    "created_at": "2020-01-15T22:34:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430512",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:69" align="right">comment:69</div>

Replying to [@mkoeppe](#comment:67):
> Replying to [@jhpalmieri](#comment:66):
> > See [comment:33](#comment:33) — I could not build Pillow (after removing Sage's patch) with Python 3.8. So I don't know if I believe that the problem has been fixed.

> Please try again with the latest commit in #29019.

That works for me. With this branch plus #29019, the build succeeds until I get to the Sage library, at which point the changes to multiprocessing start causing problems (as in [comment:16](#comment:16), [comment:35](#comment:35), [comment:36](#comment:36)).



---

archive/issue_comments_430513.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\nSee https://github.com/cython/cython/issues/3262 and https://github.com/conda-forge/cython-feedstock/pull/59 (?) for multiprocessing issues with Cython + Python 3.8 + OS X. One proposed solution there is to disable parallel processing on OS X (or more generally if `multiprocessing.get_start_method() == 'spawn'`). Do we want to do that, or are we willing to use a patch like the proposal in [comment:40](#comment:40), applied to `Cython/Build/Dependencies.py`?",
    "created_at": "2020-01-15T23:31:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430513",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:70" align="right">comment:70</div>

See https://github.com/cython/cython/issues/3262 and https://github.com/conda-forge/cython-feedstock/pull/59 (?) for multiprocessing issues with Cython + Python 3.8 + OS X. One proposed solution there is to disable parallel processing on OS X (or more generally if `multiprocessing.get_start_method() == 'spawn'`). Do we want to do that, or are we willing to use a patch like the proposal in [comment:40](#comment:40), applied to `Cython/Build/Dependencies.py`?



---

archive/issue_comments_430514.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nAnd by the way, even with the patches as in [comment:40](#comment:40), I still can't get the documentation to build. It ends with\n\n```\n[dochtml]     ForkingPickler(file, protocol).dump(obj)\n[dochtml] AttributeError: Can't pickle local object 'build_many.<locals>.run_worker'\n```",
    "created_at": "2020-01-16T00:11:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430514",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:71" align="right">comment:71</div>

And by the way, even with the patches as in [comment:40](#comment:40), I still can't get the documentation to build. It ends with

```
[dochtml]     ForkingPickler(file, protocol).dump(obj)
[dochtml] AttributeError: Can't pickle local object 'build_many.<locals>.run_worker'
```



---

archive/issue_comments_430515.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nReplying to [@antonio-rojas](#comment:55):\n[...]\n> For packagers that don't care about python2 compatibility (or 32 bit hashes) a WIP patch that fixes or works around most of these issues is at https://aur.archlinux.org/cgit/aur.git/tree/sagemath-python-3.8.patch?h=sagemath-git. A backport of https://github.com/BRiAl/BRiAl/commit/74d86170 is also needed.\n\n@antonio-rojas, I'm trying to update sage on nix to 9.0 with python 3.8. I'm using your 3.8 patch in the 9.0 version [1]. I'm still seeing some test failures caused by the python update though:\n\n```\nsage -t --long src/sage/categories/homset.py  # 3 doctests failed\nsage -t --long src/sage/combinat/cluster_algebra_quiver/quiver_mutation_type.py  # 1 doctest failed\nsage -t --long src/sage/combinat/finite_state_machine.py  # 1 doctest failed\nsage -t --long src/sage/combinat/posets/hasse_diagram.py  # 2 doctests failed\nsage -t --long src/sage/groups/cubic_braid.py  # 1 doctest failed\nsage -t --long src/sage/homology/simplicial_complex_morphism.py  # 1 doctest failed\nsage -t --long src/sage/structure/sequence.py  # 2 doctests failed\n```\n\nHere[2] is the full log. You said that your patch fixes \"most\" failures, so is that to be expected? Do you have the same failures on arch?\n\n[1] https://aur.archlinux.org/cgit/aur.git/plain/sagemath-python-3.8.patch?h=sagemath-git&id=138b3db82d8d13f9c66bf8d7515aa37671710e0a\n[2] https://gist.github.com/timokau/13c97bf8f45162f3d4155999fc5bec13",
    "created_at": "2020-03-18T00:05:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430515",
    "user": "https://github.com/timokau"
}
```

<div id="comment:72" align="right">comment:72</div>

Replying to [@antonio-rojas](#comment:55):
[...]
> For packagers that don't care about python2 compatibility (or 32 bit hashes) a WIP patch that fixes or works around most of these issues is at https://aur.archlinux.org/cgit/aur.git/tree/sagemath-python-3.8.patch?h=sagemath-git. A backport of https://github.com/BRiAl/BRiAl/commit/74d86170 is also needed.

@antonio-rojas, I'm trying to update sage on nix to 9.0 with python 3.8. I'm using your 3.8 patch in the 9.0 version [1]. I'm still seeing some test failures caused by the python update though:

```
sage -t --long src/sage/categories/homset.py  # 3 doctests failed
sage -t --long src/sage/combinat/cluster_algebra_quiver/quiver_mutation_type.py  # 1 doctest failed
sage -t --long src/sage/combinat/finite_state_machine.py  # 1 doctest failed
sage -t --long src/sage/combinat/posets/hasse_diagram.py  # 2 doctests failed
sage -t --long src/sage/groups/cubic_braid.py  # 1 doctest failed
sage -t --long src/sage/homology/simplicial_complex_morphism.py  # 1 doctest failed
sage -t --long src/sage/structure/sequence.py  # 2 doctests failed
```

Here[2] is the full log. You said that your patch fixes "most" failures, so is that to be expected? Do you have the same failures on arch?

[1] https://aur.archlinux.org/cgit/aur.git/plain/sagemath-python-3.8.patch?h=sagemath-git&id=138b3db82d8d13f9c66bf8d7515aa37671710e0a
[2] https://gist.github.com/timokau/13c97bf8f45162f3d4155999fc5bec13



---

archive/issue_comments_430516.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nReplying to [@timokau](#comment:72):\n> Here[2] is the full log. You said that your patch fixes \"most\" failures, so is that to be expected? Do you have the same failures on arch?\n\nYes, I have the same failures (the one in cubic_braid no longer happens in the latest beta). They are mostly related to pickling, which I don't understand.",
    "created_at": "2020-03-18T07:36:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430516",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:73" align="right">comment:73</div>

Replying to [@timokau](#comment:72):
> Here[2] is the full log. You said that your patch fixes "most" failures, so is that to be expected? Do you have the same failures on arch?

Yes, I have the same failures (the one in cubic_braid no longer happens in the latest beta). They are mostly related to pickling, which I don't understand.



---

archive/issue_comments_430517.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nThanks!\n\nI had a look at the python 3.8 changelog, the most obvious change seemed to be the change of the default pickle protocol (3 -> 4). But I have patched python to revert that change and that did not fix the issue.\n\nI'll look into git-bisect'ing the cpython update, though that is of course not exactly trivial. Maybe it will help.",
    "created_at": "2020-03-18T13:37:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430517",
    "user": "https://github.com/timokau"
}
```

<div id="comment:74" align="right">comment:74</div>

Thanks!

I had a look at the python 3.8 changelog, the most obvious change seemed to be the change of the default pickle protocol (3 -> 4). But I have patched python to revert that change and that did not fix the issue.

I'll look into git-bisect'ing the cpython update, though that is of course not exactly trivial. Maybe it will help.



---

archive/issue_comments_430518.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nthere is a change of API in the ast, so this breaks old versions of ipython with python 3.8. In particular, it breaks ipython 5.8 so you cannot run sage under jupyter in python 3.8 so far.",
    "created_at": "2020-03-31T13:06:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430518",
    "user": "https://github.com/jaliste"
}
```

<div id="comment:75" align="right">comment:75</div>

there is a change of API in the ast, so this breaks old versions of ipython with python 3.8. In particular, it breaks ipython 5.8 so you cannot run sage under jupyter in python 3.8 so far.



---

archive/issue_comments_430519.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nI've added as a dependency: #28197 - upgrade to ipython 7",
    "created_at": "2020-03-31T14:38:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430519",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:76" align="right">comment:76</div>

I've added as a dependency: #28197 - upgrade to ipython 7



---

archive/issue_comments_430520.json:
```json
{
    "body": "Dependencies: **#28197**",
    "created_at": "2020-03-31T14:38:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430520",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#28197**



---

archive/issue_comments_430521.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nReplying to [@antonio-rojas](#comment:55):\n> For packagers that don't care about python2 compatibility (or 32 bit hashes) a WIP patch that fixes or works around most of these issues is at https://aur.archlinux.org/cgit/aur.git/tree/sagemath-python-3.8.patch?h=sagemath-git.\n\nThanks for the patch. A version of this patch including the 32 bit hashes can now be found at https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u0-version-python-3.8.patch.\n\nUnfortunately many of the ordering issues addressed in this patch also depend on 32/64 bit now. See 32-bit build log at https://buildd.debian.org/status/fetch.php?pkg=sagemath&arch=i386&ver=9.0-3&stamp=1586083972&raw=0.",
    "created_at": "2020-04-05T13:06:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430521",
    "user": "https://github.com/tobihan"
}
```

<div id="comment:77" align="right">comment:77</div>

Replying to [@antonio-rojas](#comment:55):
> For packagers that don't care about python2 compatibility (or 32 bit hashes) a WIP patch that fixes or works around most of these issues is at https://aur.archlinux.org/cgit/aur.git/tree/sagemath-python-3.8.patch?h=sagemath-git.

Thanks for the patch. A version of this patch including the 32 bit hashes can now be found at https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u0-version-python-3.8.patch.

Unfortunately many of the ordering issues addressed in this patch also depend on 32/64 bit now. See 32-bit build log at https://buildd.debian.org/status/fetch.php?pkg=sagemath&arch=i386&ver=9.0-3&stamp=1586083972&raw=0.



---

archive/issue_comments_430522.json:
```json
{
    "body": "Changed dependencies from **#28197** to **#28197, #29042**",
    "created_at": "2020-06-05T21:23:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430522",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#28197** to **#28197, #29042**



---

archive/issue_comments_430523.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">comment:80</div>\n\nCan we get this ticket unstuck please?",
    "created_at": "2020-07-11T22:46:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430523",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:80" align="right">comment:80</div>

Can we get this ticket unstuck please?



---

archive/issue_comments_430524.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nI am seeing negative progress: I can't even get the Sage library to build on OS X anymore: I just see errors as in [comment:16](#comment:16). I assume the problem is parallel building with `spawn` instead of `fork`, but I can't figure out where to change things to get it to work.\n\nFor the record, I tried this with Python 3.8.4, not 3.8.0. I'll try with 3.8.0, but I don't expect any difference. I tried this but it didn't help:\n\n```diff\ndiff --git a/src/sage_setup/run_parallel.py b/src/sage_setup/run_parallel.py\nindex 7a9b787b4e..a4cf73801d 100644\n--- a/src/sage_setup/run_parallel.py\n+++ b/src/sage_setup/run_parallel.py\n@@ -73,11 +73,12 @@ def execute_list_of_commands_in_parallel(command_list, nthreads):\n         progress = progress_fmt.format(i+1, N)\n         command_list[i] = command_list[i] + (progress,)\n \n-    from multiprocessing import Pool\n+    import multiprocessing\n+    ctx = multiprocessing.get_context('fork')\n     # map_async handles KeyboardInterrupt correctly if an argument is\n     # given to get().  Plain map() and apply_async() do not work\n     # correctly, see Trac #16113.\n-    pool = Pool(nthreads)\n+    pool = ctx.Pool(nthreads, maxtasksperchild=1)\n     result = pool.map_async(apply_func_progress, command_list, 1).get(99999)\n     pool.close()\n     pool.join()\n```",
    "created_at": "2020-07-14T23:32:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430524",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:81" align="right">comment:81</div>

I am seeing negative progress: I can't even get the Sage library to build on OS X anymore: I just see errors as in [comment:16](#comment:16). I assume the problem is parallel building with `spawn` instead of `fork`, but I can't figure out where to change things to get it to work.

For the record, I tried this with Python 3.8.4, not 3.8.0. I'll try with 3.8.0, but I don't expect any difference. I tried this but it didn't help:

```diff
diff --git a/src/sage_setup/run_parallel.py b/src/sage_setup/run_parallel.py
index 7a9b787b4e..a4cf73801d 100644
--- a/src/sage_setup/run_parallel.py
+++ b/src/sage_setup/run_parallel.py
@@ -73,11 +73,12 @@ def execute_list_of_commands_in_parallel(command_list, nthreads):
         progress = progress_fmt.format(i+1, N)
         command_list[i] = command_list[i] + (progress,)
 
-    from multiprocessing import Pool
+    import multiprocessing
+    ctx = multiprocessing.get_context('fork')
     # map_async handles KeyboardInterrupt correctly if an argument is
     # given to get().  Plain map() and apply_async() do not work
     # correctly, see Trac #16113.
-    pool = Pool(nthreads)
+    pool = ctx.Pool(nthreads, maxtasksperchild=1)
     result = pool.map_async(apply_func_progress, command_list, 1).get(99999)
     pool.close()
     pool.join()
```



---

archive/issue_comments_430525.json:
```json
{
    "body": "<div id=\"comment:82\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c119cf2acc9599a77d1b887fb40e3fc024215a1d\"><code>c119cf2</code></a></td><td><code>Merge tag '9.2.beta5' into t/27754/public/python3.8</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9688a9c6064603725c6aca4278f7098b758743c9\"><code>9688a9c</code></a></td><td><code>build/pkgs/python3: Update to 3.8.4</code></td></tr></table>\n",
    "created_at": "2020-07-15T00:37:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430525",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:82"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c119cf2acc9599a77d1b887fb40e3fc024215a1d"><code>c119cf2</code></a></td><td><code>Merge tag '9.2.beta5' into t/27754/public/python3.8</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9688a9c6064603725c6aca4278f7098b758743c9"><code>9688a9c</code></a></td><td><code>build/pkgs/python3: Update to 3.8.4</code></td></tr></table>




---

archive/issue_comments_430526.json:
```json
{
    "body": "Changed commit from **[`9cf6f0e`](https://github.com/sagemath/sagetrac-mirror/commit/9cf6f0ebf83c57384161fdc1594bc8156e1c49c3)** to **[`9688a9c`](https://github.com/sagemath/sagetrac-mirror/commit/9688a9c6064603725c6aca4278f7098b758743c9)**",
    "created_at": "2020-07-15T00:37:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430526",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9cf6f0e`](https://github.com/sagemath/sagetrac-mirror/commit/9cf6f0ebf83c57384161fdc1594bc8156e1c49c3)** to **[`9688a9c`](https://github.com/sagemath/sagetrac-mirror/commit/9688a9c6064603725c6aca4278f7098b758743c9)**



---

archive/issue_comments_430527.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,4 +3,6 @@\n - [PEP569 -- Python 3.8 Release Schedule](https://www.python.org/dev/peps/pep-0569/)\n - [What's new in Python 3.8](https://docs.python.org/3.8/whatsnew/3.8.html)\n \n-**Tarball**: https://www.python.org/ftp/python/3.8.0/Python-3.8.0.tar.xz\n+**Tarball**: see checksums.ini\n+\n+\n``````\n",
    "created_at": "2020-07-15T00:37:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430527",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,4 +3,6 @@
 - [PEP569 -- Python 3.8 Release Schedule](https://www.python.org/dev/peps/pep-0569/)
 - [What's new in Python 3.8](https://docs.python.org/3.8/whatsnew/3.8.html)
 
-**Tarball**: https://www.python.org/ftp/python/3.8.0/Python-3.8.0.tar.xz
+**Tarball**: see checksums.ini
+
+
``````




---

archive/issue_events_380739.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-15T00:37:44Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "title_is": "Upgrade: Python 3.8.4",
    "title_was": "Upgrade: Python 3.8.x",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380739"
}
```



---

archive/issue_comments_430528.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">comment:84</div>\n\nI'll try to fix / work around the build problem",
    "created_at": "2020-07-15T00:43:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430528",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:84" align="right">comment:84</div>

I'll try to fix / work around the build problem



---

archive/issue_comments_430529.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">comment:85</div>\n\nhttps://github.com/cython/cython/issues/3262",
    "created_at": "2020-07-15T01:19:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430529",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:85" align="right">comment:85</div>

https://github.com/cython/cython/issues/3262



---

archive/issue_comments_430530.json:
```json
{
    "body": "Changed commit from **[`9688a9c`](https://github.com/sagemath/sagetrac-mirror/commit/9688a9c6064603725c6aca4278f7098b758743c9)** to **[`c44c448`](https://github.com/sagemath/sagetrac-mirror/commit/c44c448acfb4152e981d91ec02b4eb6ae34c57a7)**",
    "created_at": "2020-07-15T01:30:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430530",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9688a9c`](https://github.com/sagemath/sagetrac-mirror/commit/9688a9c6064603725c6aca4278f7098b758743c9)** to **[`c44c448`](https://github.com/sagemath/sagetrac-mirror/commit/c44c448acfb4152e981d91ec02b4eb6ae34c57a7)**



---

archive/issue_comments_430531.json:
```json
{
    "body": "<div id=\"comment:86\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c24d109199a68d09b138b3a29436704b9532fb39\"><code>c24d109</code></a></td><td><code>build/pkgs/cython: Updatt to 0.29.21</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/beb8c8a3241dca36dd0fe0c12bddabce184b53a6\"><code>beb8c8a</code></a></td><td><code>Merge branch 't/29861/upgrade_cython_to_0_29_20' into t/27754/public/python3.8</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c44c448acfb4152e981d91ec02b4eb6ae34c57a7\"><code>c44c448</code></a></td><td><code>src/setup.py: Work around a Cython problem with multiprocessing in Python 3.8.x on macOS</code></td></tr></table>\n",
    "created_at": "2020-07-15T01:30:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430531",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:86"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c24d109199a68d09b138b3a29436704b9532fb39"><code>c24d109</code></a></td><td><code>build/pkgs/cython: Updatt to 0.29.21</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/beb8c8a3241dca36dd0fe0c12bddabce184b53a6"><code>beb8c8a</code></a></td><td><code>Merge branch 't/29861/upgrade_cython_to_0_29_20' into t/27754/public/python3.8</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c44c448acfb4152e981d91ec02b4eb6ae34c57a7"><code>c44c448</code></a></td><td><code>src/setup.py: Work around a Cython problem with multiprocessing in Python 3.8.x on macOS</code></td></tr></table>




---

archive/issue_comments_430532.json:
```json
{
    "body": "<div id=\"comment:87\" align=\"right\">comment:87</div>\n\nNot sure if the Cython update (from #29861) was necessary. But 0.29.21 does have a change specifically for 3.8.",
    "created_at": "2020-07-15T01:37:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430532",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:87" align="right">comment:87</div>

Not sure if the Cython update (from #29861) was necessary. But 0.29.21 does have a change specifically for 3.8.



---

archive/issue_comments_430533.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">comment:88</div>\n\nsagelib builds now on my Mac. Haven't tested anything else yet.",
    "created_at": "2020-07-15T01:39:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430533",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:88" align="right">comment:88</div>

sagelib builds now on my Mac. Haven't tested anything else yet.



---

archive/issue_comments_430534.json:
```json
{
    "body": "<div id=\"comment:89\" align=\"right\">comment:89</div>\n\nRight, thanks, I forgot to deal with Cython. I can now build sagelib. Also the docs, with the following changes:\n\n```diff\ndiff --git a/src/sage_setup/docbuild/utils.py b/src/sage_setup/docbuild/utils.py\nindex 272f7e2d0f..2691339ea6 100644\n--- a/src/sage_setup/docbuild/utils.py\n+++ b/src/sage_setup/docbuild/utils.py\n@@ -112,11 +112,14 @@ def build_many(target, args, processes=None):\n         ...\n         WorkerDiedException: worker for 4 died with non-zero exit code -9\n     \"\"\"\n-    from multiprocessing import Process, Queue, cpu_count\n+    import multiprocessing\n+    ctx = multiprocessing.get_context('fork')\n+    Process = ctx.Process\n+    Queue = ctx.Queue\n     from six.moves.queue import Empty\n \n     if processes is None:\n-        processes = cpu_count()\n+        processes = multiprocessing.cpu_count()\n \n     workers = [None] * processes\n     tasks = enumerate(args)\n```\nDoctesting doesn't work, though; first, it failed completely, and then I tried to patch a few files in `src/sage/doctest`, but I was not successful. (I got some tests to run, but there were doctest failures, and then the process just quit.)",
    "created_at": "2020-07-15T05:12:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430534",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:89" align="right">comment:89</div>

Right, thanks, I forgot to deal with Cython. I can now build sagelib. Also the docs, with the following changes:

```diff
diff --git a/src/sage_setup/docbuild/utils.py b/src/sage_setup/docbuild/utils.py
index 272f7e2d0f..2691339ea6 100644
--- a/src/sage_setup/docbuild/utils.py
+++ b/src/sage_setup/docbuild/utils.py
@@ -112,11 +112,14 @@ def build_many(target, args, processes=None):
         ...
         WorkerDiedException: worker for 4 died with non-zero exit code -9
     """
-    from multiprocessing import Process, Queue, cpu_count
+    import multiprocessing
+    ctx = multiprocessing.get_context('fork')
+    Process = ctx.Process
+    Queue = ctx.Queue
     from six.moves.queue import Empty
 
     if processes is None:
-        processes = cpu_count()
+        processes = multiprocessing.cpu_count()
 
     workers = [None] * processes
     tasks = enumerate(args)
```
Doctesting doesn't work, though; first, it failed completely, and then I tried to patch a few files in `src/sage/doctest`, but I was not successful. (I got some tests to run, but there were doctest failures, and then the process just quit.)



---

archive/issue_comments_430535.json:
```json
{
    "body": "<div id=\"comment:90\" align=\"right\">comment:90</div>\n\nAccording to https://docs.python.org/3/library/multiprocessing.html#multiprocessing.get_context, \n`get_context` is available for python >= 3.4. We support python >= 3.6, so I would guess it is safe to make this change to `utils.py`. Could you push it to the branch please?",
    "created_at": "2020-07-15T05:18:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430535",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:90" align="right">comment:90</div>

According to https://docs.python.org/3/library/multiprocessing.html#multiprocessing.get_context, 
`get_context` is available for python >= 3.4. We support python >= 3.6, so I would guess it is safe to make this change to `utils.py`. Could you push it to the branch please?



---

archive/issue_comments_430536.json:
```json
{
    "body": "<div id=\"comment:91\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6a8c543c70ee90b5ad332ace5aebf5e498fb1444\"><code>6a8c543</code></a></td><td><code>trac 27754: docbuilding on OS X</code></td></tr></table>\n",
    "created_at": "2020-07-15T20:25:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430536",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:91"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6a8c543c70ee90b5ad332ace5aebf5e498fb1444"><code>6a8c543</code></a></td><td><code>trac 27754: docbuilding on OS X</code></td></tr></table>




---

archive/issue_comments_430537.json:
```json
{
    "body": "Changed commit from **[`c44c448`](https://github.com/sagemath/sagetrac-mirror/commit/c44c448acfb4152e981d91ec02b4eb6ae34c57a7)** to **[`6a8c543`](https://github.com/sagemath/sagetrac-mirror/commit/6a8c543c70ee90b5ad332ace5aebf5e498fb1444)**",
    "created_at": "2020-07-15T20:25:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430537",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c44c448`](https://github.com/sagemath/sagetrac-mirror/commit/c44c448acfb4152e981d91ec02b4eb6ae34c57a7)** to **[`6a8c543`](https://github.com/sagemath/sagetrac-mirror/commit/6a8c543c70ee90b5ad332ace5aebf5e498fb1444)**



---

archive/issue_comments_430538.json:
```json
{
    "body": "<div id=\"comment:92\" align=\"right\">comment:92</div>\n\nThis builds `sagelib` plus the documentation for me on, either using the system Python or Python 3.8.4.",
    "created_at": "2020-07-15T21:21:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430538",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:92" align="right">comment:92</div>

This builds `sagelib` plus the documentation for me on, either using the system Python or Python 3.8.4.



---

archive/issue_comments_430539.json:
```json
{
    "body": "Changed dependencies from **#28197, #29042** to **#28197, #29042, #29861**",
    "created_at": "2020-07-15T21:37:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430539",
    "user": "https://github.com/jhpalmieri"
}
```

Changed dependencies from **#28197, #29042** to **#28197, #29042, #29861**



---

archive/issue_comments_430540.json:
```json
{
    "body": "<div id=\"comment:94\" align=\"right\">comment:94</div>\n\nThanks. Do we know if the problem with doctesting is specific to macOS?",
    "created_at": "2020-07-15T22:15:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430540",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:94" align="right">comment:94</div>

Thanks. Do we know if the problem with doctesting is specific to macOS?



---

archive/issue_comments_430541.json:
```json
{
    "body": "<div id=\"comment:95\" align=\"right\">comment:95</div>\n\nWith this branch, everything builds on an Ubuntu virtual machine. I didn't run doctests.\n\nI also didn't know about the\n\n```\nmultiprocessing.set_start_method('fork', force=True)\n```\ncommand. With this change, doctests on OS X run, although there are a lot of failures:\n\n```diff\ndiff --git a/src/sage/doctest/external.py b/src/sage/doctest/external.py\nindex b0db07b47a..af49ca29e5 100644\n--- a/src/sage/doctest/external.py\n+++ b/src/sage/doctest/external.py\n@@ -25,7 +25,11 @@ AUTHORS:\n #                  http://www.gnu.org/licenses/\n #*****************************************************************************\n \n-from multiprocessing import Array\n+import multiprocessing\n+import os\n+if os.uname().sysname == 'Darwin':\n+    multiprocessing.set_start_method('fork', force=True)\n+Array = multiprocessing.Array\n \n import urllib.error\n from urllib.request import Request, urlopen\ndiff --git a/src/sage/doctest/forker.py b/src/sage/doctest/forker.py\nindex 75559667d1..8f5f2bff2b 100644\n--- a/src/sage/doctest/forker.py\n+++ b/src/sage/doctest/forker.py\n@@ -63,6 +63,8 @@ from sage.repl.user_globals import set_globals\n from sage.cpython.atexit import restore_atexit\n from sage.cpython.string import bytes_to_str, str_to_bytes\n \n+if os.uname().sysname == 'Darwin':\n+    multiprocessing.set_start_method('fork', force=True)\n \n # All doctests run as if the following future imports are present\n import __future__\n```",
    "created_at": "2020-07-16T00:59:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430541",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:95" align="right">comment:95</div>

With this branch, everything builds on an Ubuntu virtual machine. I didn't run doctests.

I also didn't know about the

```
multiprocessing.set_start_method('fork', force=True)
```
command. With this change, doctests on OS X run, although there are a lot of failures:

```diff
diff --git a/src/sage/doctest/external.py b/src/sage/doctest/external.py
index b0db07b47a..af49ca29e5 100644
--- a/src/sage/doctest/external.py
+++ b/src/sage/doctest/external.py
@@ -25,7 +25,11 @@ AUTHORS:
 #                  http://www.gnu.org/licenses/
 #*****************************************************************************
 
-from multiprocessing import Array
+import multiprocessing
+import os
+if os.uname().sysname == 'Darwin':
+    multiprocessing.set_start_method('fork', force=True)
+Array = multiprocessing.Array
 
 import urllib.error
 from urllib.request import Request, urlopen
diff --git a/src/sage/doctest/forker.py b/src/sage/doctest/forker.py
index 75559667d1..8f5f2bff2b 100644
--- a/src/sage/doctest/forker.py
+++ b/src/sage/doctest/forker.py
@@ -63,6 +63,8 @@ from sage.repl.user_globals import set_globals
 from sage.cpython.atexit import restore_atexit
 from sage.cpython.string import bytes_to_str, str_to_bytes
 
+if os.uname().sysname == 'Darwin':
+    multiprocessing.set_start_method('fork', force=True)
 
 # All doctests run as if the following future imports are present
 import __future__
```



---

archive/issue_comments_430542.json:
```json
{
    "body": "<div id=\"comment:96\" align=\"right\">comment:96</div>\n\nCould you push it on the branch?",
    "created_at": "2020-07-16T02:47:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430542",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:96" align="right">comment:96</div>

Could you push it on the branch?



---

archive/issue_comments_430543.json:
```json
{
    "body": "<div id=\"comment:97\" align=\"right\">comment:97</div>\n\nWithout the changes from comment 95, I get the following error:\n\n```\n$ ./sage -t src/sage/geometry/polyhedron/base.py\ntoo many failed tests, not using stored timings\nRunning doctests with ID 2020-07-15-19-42-59-9c236f91.\nGit branch: big-update\nUsing --optional=build,cryptominisat,dochtml,sage\nDoctesting 1 file.\n----------------------------------------------------------------------\nDoctests interrupted: 0/1 files tested\n----------------------------------------------------------------------\nTotal time for all tests: 0.0 seconds\n    cpu time: 0.0 seconds\n    cumulative wall time: 0.0 seconds\nTraceback (most recent call last):\n  File \"/Users/mkoeppe/s/sage/sage-rebasing/src/bin/sage-runtests\", line 177, in <module>\n    err = DC.run()\n  File \"/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/site-packages/sage/doctest/control.py\", line 1207, in run\n    self.run_doctests()\n  File \"/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/site-packages/sage/doctest/control.py\", line 908, in run_doctests\n    self.dispatcher.dispatch()\n  File \"/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 2039, in dispatch\n    self.parallel_dispatch()\n  File \"/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1934, in parallel_dispatch\n    w.start()  # This might take some time\n  File \"/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 2206, in start\n    super(DocTestWorker, self).start()\n  File \"/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/multiprocessing/process.py\", line 121, in start\n    self._popen = self._Popen(self)\n  File \"/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/multiprocessing/context.py\", line 224, in _Popen\n    return _default_context.get_context().Process._Popen(process_obj)\n  File \"/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/multiprocessing/context.py\", line 284, in _Popen\n    return Popen(process_obj)\n  File \"/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/multiprocessing/popen_spawn_posix.py\", line 32, in __init__\n    super().__init__(process_obj)\n  File \"/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/multiprocessing/popen_fork.py\", line 19, in __init__\n    self._launch(process_obj)\n  File \"/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/multiprocessing/popen_spawn_posix.py\", line 47, in _launch\n    reduction.dump(process_obj, fp)\n  File \"/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/multiprocessing/reduction.py\", line 60, in dump\n    ForkingPickler(file, protocol).dump(obj)\nAttributeError: Can't pickle local object 'DocTestDispatcher.parallel_dispatch.<locals>.sel_exit'\n```\n\nIs this the same error that you were getting?",
    "created_at": "2020-07-16T02:48:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430543",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:97" align="right">comment:97</div>

Without the changes from comment 95, I get the following error:

```
$ ./sage -t src/sage/geometry/polyhedron/base.py
too many failed tests, not using stored timings
Running doctests with ID 2020-07-15-19-42-59-9c236f91.
Git branch: big-update
Using --optional=build,cryptominisat,dochtml,sage
Doctesting 1 file.
----------------------------------------------------------------------
Doctests interrupted: 0/1 files tested
----------------------------------------------------------------------
Total time for all tests: 0.0 seconds
    cpu time: 0.0 seconds
    cumulative wall time: 0.0 seconds
Traceback (most recent call last):
  File "/Users/mkoeppe/s/sage/sage-rebasing/src/bin/sage-runtests", line 177, in <module>
    err = DC.run()
  File "/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/site-packages/sage/doctest/control.py", line 1207, in run
    self.run_doctests()
  File "/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/site-packages/sage/doctest/control.py", line 908, in run_doctests
    self.dispatcher.dispatch()
  File "/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 2039, in dispatch
    self.parallel_dispatch()
  File "/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 1934, in parallel_dispatch
    w.start()  # This might take some time
  File "/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 2206, in start
    super(DocTestWorker, self).start()
  File "/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/multiprocessing/process.py", line 121, in start
    self._popen = self._Popen(self)
  File "/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/multiprocessing/context.py", line 224, in _Popen
    return _default_context.get_context().Process._Popen(process_obj)
  File "/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/multiprocessing/context.py", line 284, in _Popen
    return Popen(process_obj)
  File "/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/multiprocessing/popen_spawn_posix.py", line 32, in __init__
    super().__init__(process_obj)
  File "/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/multiprocessing/popen_fork.py", line 19, in __init__
    self._launch(process_obj)
  File "/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/multiprocessing/popen_spawn_posix.py", line 47, in _launch
    reduction.dump(process_obj, fp)
  File "/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/multiprocessing/reduction.py", line 60, in dump
    ForkingPickler(file, protocol).dump(obj)
AttributeError: Can't pickle local object 'DocTestDispatcher.parallel_dispatch.<locals>.sel_exit'
```

Is this the same error that you were getting?



---

archive/issue_comments_430544.json:
```json
{
    "body": "Changed commit from **[`6a8c543`](https://github.com/sagemath/sagetrac-mirror/commit/6a8c543c70ee90b5ad332ace5aebf5e498fb1444)** to **[`5a5fa82`](https://github.com/sagemath/sagetrac-mirror/commit/5a5fa82344129e34f03b62ec2c3bb0a72de0d808)**",
    "created_at": "2020-07-16T03:00:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430544",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6a8c543`](https://github.com/sagemath/sagetrac-mirror/commit/6a8c543c70ee90b5ad332ace5aebf5e498fb1444)** to **[`5a5fa82`](https://github.com/sagemath/sagetrac-mirror/commit/5a5fa82344129e34f03b62ec2c3bb0a72de0d808)**



---

archive/issue_comments_430545.json:
```json
{
    "body": "<div id=\"comment:98\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5a5fa82344129e34f03b62ec2c3bb0a72de0d808\"><code>5a5fa82</code></a></td><td><code>trac 27754: on OS X, use 'fork' with multiprocessing when doctesting</code></td></tr></table>\n",
    "created_at": "2020-07-16T03:00:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430545",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:98"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5a5fa82344129e34f03b62ec2c3bb0a72de0d808"><code>5a5fa82</code></a></td><td><code>trac 27754: on OS X, use 'fork' with multiprocessing when doctesting</code></td></tr></table>




---

archive/issue_comments_430546.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">comment:99</div>\n\nYes, that's the error I was getting. Now I'm getting the same doctest failures on OS X as on the Ubuntu virtual machine (approximately: I think I get 113 files with failures on OS X, 114 with failures on Ubuntu).",
    "created_at": "2020-07-16T03:02:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430546",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:99" align="right">comment:99</div>

Yes, that's the error I was getting. Now I'm getting the same doctest failures on OS X as on the Ubuntu virtual machine (approximately: I think I get 113 files with failures on OS X, 114 with failures on Ubuntu).



---

archive/issue_comments_430547.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nI tried `make ptest`, and it ended with:\n\n```\nsage -t src/sage/calculus/riemann.pyx  # 18 doctests failed\nsage -t src/sage/functions/log.py  # 2 doctests failed\nsage -t src/sage/graphs/graph_plot.py  # 4 doctests failed\nDoctests interrupted: 344/4127 files tested\n  File \"/Users/mkoeppe/s/sage/sage-rebasing/src/bin/sage-runtests\", line 177, in <module>\n    err = DC.run()\n  File \"/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/site-packages/sage/doctest/control.py\", line 1207, in run\n    self.run_doctests()\n  File \"/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/site-packages/sage/doctest/control.py\", line 908, in run_doctests\n    self.dispatcher.dispatch()\n  File \"/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 2044, in dispatch\n    self.parallel_dispatch()\n  File \"/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1939, in parallel_dispatch\n    w.start()  # This might take some time\n  File \"/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 2211, in start\n    super(DocTestWorker, self).start()\n  File \"/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/multiprocessing/process.py\", line 121, in start\n    self._popen = self._Popen(self)\n  File \"/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/multiprocessing/context.py\", line 224, in _Popen\n    return _default_context.get_context().Process._Popen(process_obj)\n  File \"/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/multiprocessing/context.py\", line 277, in _Popen\n    return Popen(process_obj)\n  File \"/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/multiprocessing/popen_fork.py\", line 19, in __init__\n    self._launch(process_obj)\n  File \"/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/multiprocessing/popen_fork.py\", line 69, in _launch\n    child_r, parent_w = os.pipe()\nOSError: [Errno 24] Too many open files\nmake: *** [ptest] Error 1\n```",
    "created_at": "2020-07-16T05:25:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430547",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:0" align="right">comment:0</div>

I tried `make ptest`, and it ended with:

```
sage -t src/sage/calculus/riemann.pyx  # 18 doctests failed
sage -t src/sage/functions/log.py  # 2 doctests failed
sage -t src/sage/graphs/graph_plot.py  # 4 doctests failed
Doctests interrupted: 344/4127 files tested
  File "/Users/mkoeppe/s/sage/sage-rebasing/src/bin/sage-runtests", line 177, in <module>
    err = DC.run()
  File "/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/site-packages/sage/doctest/control.py", line 1207, in run
    self.run_doctests()
  File "/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/site-packages/sage/doctest/control.py", line 908, in run_doctests
    self.dispatcher.dispatch()
  File "/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 2044, in dispatch
    self.parallel_dispatch()
  File "/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 1939, in parallel_dispatch
    w.start()  # This might take some time
  File "/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 2211, in start
    super(DocTestWorker, self).start()
  File "/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/multiprocessing/process.py", line 121, in start
    self._popen = self._Popen(self)
  File "/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/multiprocessing/context.py", line 224, in _Popen
    return _default_context.get_context().Process._Popen(process_obj)
  File "/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/multiprocessing/context.py", line 277, in _Popen
    return Popen(process_obj)
  File "/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/multiprocessing/popen_fork.py", line 19, in __init__
    self._launch(process_obj)
  File "/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.8/multiprocessing/popen_fork.py", line 69, in _launch
    child_r, parent_w = os.pipe()
OSError: [Errno 24] Too many open files
make: *** [ptest] Error 1
```



---

archive/issue_comments_430548.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\n`make ptestlong` completed for me (with `make -j6`). I see several types of failures:\n\n- sorting issues:\n\n```\nFile \"src/sage/dynamics/arithmetic_dynamics/projective_ds.py\", line 3148, in sage.dynamics.arithmetic_dynamics.projective_ds.?.automorphism_group\nFailed example:\n    D6.automorphism_group()\nExpected:\n    [\n    [1 0]  [0 w]  [0 1]  [w 0]  [-w - 1      0]  [     0 -w - 1]\n    [0 1], [1 0], [1 0], [0 1], [     0      1], [     1      0]\n    ]\nGot:\n    [\n    [1 0]  [0 1]  [     0 -w - 1]  [w 0]  [-w - 1      0]  [0 w]\n    [0 1], [1 0], [     1      0], [0 1], [     0      1], [1 0]\n    ]\n```\n- hashes have changed:\n\n```\nFile \"src/sage/combinat/similarity_class_type.py\", line 411, in sage.combinat.similarity_class_type.?.__hash__\nFailed example:\n    hash(PT1)\nExpected:\n    5050909583595644741 \nGot:\n    -925386691174542829\n```\n- pickling?\n\n```\nFile \"src/sage/manifolds/differentiable/affine_connection.py\", line 1785, in sage.manifolds.differentiable.affine_connection.AffineConnection.riemann\nFailed example:\n    for i in M.irange():\n        for j in M.irange():\n            for k in M.irange():\n                nab.add_coef(eV)[i,j,k] = nab.coef(eVW)[i,j,k,c_uvW].expr()\nException raised:\n    multiprocessing.pool.RemoteTraceback: \n    \"\"\"\n    Traceback (most recent call last):\n      File \"/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.2.beta5/local/lib/python3.8/multiprocessing/pool.py\", line 125, in worker\n        result = (True, func(*args, **kwds))\n      File \"sage/misc/fpickle.pyx\", line 99, in sage.misc.fpickle.call_pickled_function (build/cythonized/sage/misc/fpickle.c:2279)\n        f = eval(\"unpickle_function(fp)\", sage.all.__dict__, {'fp':fp})\n      File \"<string>\", line 1, in <module>\n      File \"sage/misc/fpickle.pyx\", line 90, in sage.misc.fpickle.unpickle_function (build/cythonized/sage/misc/fpickle.c:1975)\n        recovered = pickle.loads(pickled)\n      File \"sage/misc/fpickle.pyx\", line 26, in sage.misc.fpickle.code_ctor (build/cythonized/sage/misc/fpickle.c:1536)\n        return types.CodeType(*args)\n    TypeError: code() takes at least 14 arguments (13 given)\n    \"\"\"\n\n    The above exception was the direct cause of the following exception:\n\n    Traceback (most recent call last):\n      File \"/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.2.beta5/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 709, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.2.beta5/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1133, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.manifolds.differentiable.affine_connection.AffineConnection.riemann[30]>\", line 4, in <module>\n        nab.add_coef(eV)[i,j,k] = nab.coef(eVW)[i,j,k,c_uvW].expr()\n      File \"/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.2.beta5/local/lib/python3.8/site-packages/sage/manifolds/differentiable/affine_connection.py\", line 663, in coef\n        nab_evi = self(ev[i])\n      File \"/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.2.beta5/local/lib/python3.8/site-packages/sage/manifolds/differentiable/affine_connection.py\", line 1386, in __call__\n        return self._derive_paral(tensor_r)\n      File \"/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.2.beta5/local/lib/python3.8/site-packages/sage/manifolds/differentiable/affine_connection.py\", line 1508, in _derive_paral\n        for ii,val in make_CovDerivative(listParalInput):\n      File \"/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.2.beta5/local/lib/python3.8/site-packages/sage/parallel/multiprocessing_sage.py\", line 77, in parallel_iter\n        for res in result:\n      File \"/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.2.beta5/local/lib/python3.8/multiprocessing/pool.py\", line 868, in next\n        raise value\n    TypeError: code() takes at least 14 arguments (13 given)\n```\n- a deprecation warning:\n\n```\nFile \"src/sage/plot/plot3d/base.pyx\", line 1560, in sage.plot.plot3d.base.Graphics3d.save_image\nFailed example:\n    G.save_image(gif)\nExpected nothing\nGot:\n    doctest:warning\n    ...\n    DeprecationWarning: PY_SSIZE_T_CLEAN will be required for '#' formats\n```\n- another one:\n\n```\nFile \"src/sage/doctest/forker.py\", line 2351, in sage.doctest.forker.DocTestWorker.kill\nFailed example:\n    time.sleep(0.2)  # Worker doesn't die\nExpected nothing\nGot:\n    doctest:warning\n    ...\n    DeprecationWarning: an integer is required (got type sage.rings.real_mpfr.RealLiteral).  Implicit conversion to integers using __int__ is deprecated, and may be removed in a future version of Python.\n```\nI haven't gone through all of the failures yet, nor have I pored over the Python 3.8 changelog to try to figure any of these out. The first few types are easy to fix, I hope.",
    "created_at": "2020-07-17T01:48:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430548",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:1" align="right">comment:1</div>

`make ptestlong` completed for me (with `make -j6`). I see several types of failures:

- sorting issues:

```
File "src/sage/dynamics/arithmetic_dynamics/projective_ds.py", line 3148, in sage.dynamics.arithmetic_dynamics.projective_ds.?.automorphism_group
Failed example:
    D6.automorphism_group()
Expected:
    [
    [1 0]  [0 w]  [0 1]  [w 0]  [-w - 1      0]  [     0 -w - 1]
    [0 1], [1 0], [1 0], [0 1], [     0      1], [     1      0]
    ]
Got:
    [
    [1 0]  [0 1]  [     0 -w - 1]  [w 0]  [-w - 1      0]  [0 w]
    [0 1], [1 0], [     1      0], [0 1], [     0      1], [1 0]
    ]
```
- hashes have changed:

```
File "src/sage/combinat/similarity_class_type.py", line 411, in sage.combinat.similarity_class_type.?.__hash__
Failed example:
    hash(PT1)
Expected:
    5050909583595644741 
Got:
    -925386691174542829
```
- pickling?

```
File "src/sage/manifolds/differentiable/affine_connection.py", line 1785, in sage.manifolds.differentiable.affine_connection.AffineConnection.riemann
Failed example:
    for i in M.irange():
        for j in M.irange():
            for k in M.irange():
                nab.add_coef(eV)[i,j,k] = nab.coef(eVW)[i,j,k,c_uvW].expr()
Exception raised:
    multiprocessing.pool.RemoteTraceback: 
    """
    Traceback (most recent call last):
      File "/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.2.beta5/local/lib/python3.8/multiprocessing/pool.py", line 125, in worker
        result = (True, func(*args, **kwds))
      File "sage/misc/fpickle.pyx", line 99, in sage.misc.fpickle.call_pickled_function (build/cythonized/sage/misc/fpickle.c:2279)
        f = eval("unpickle_function(fp)", sage.all.__dict__, {'fp':fp})
      File "<string>", line 1, in <module>
      File "sage/misc/fpickle.pyx", line 90, in sage.misc.fpickle.unpickle_function (build/cythonized/sage/misc/fpickle.c:1975)
        recovered = pickle.loads(pickled)
      File "sage/misc/fpickle.pyx", line 26, in sage.misc.fpickle.code_ctor (build/cythonized/sage/misc/fpickle.c:1536)
        return types.CodeType(*args)
    TypeError: code() takes at least 14 arguments (13 given)
    """

    The above exception was the direct cause of the following exception:

    Traceback (most recent call last):
      File "/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.2.beta5/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 709, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.2.beta5/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 1133, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.manifolds.differentiable.affine_connection.AffineConnection.riemann[30]>", line 4, in <module>
        nab.add_coef(eV)[i,j,k] = nab.coef(eVW)[i,j,k,c_uvW].expr()
      File "/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.2.beta5/local/lib/python3.8/site-packages/sage/manifolds/differentiable/affine_connection.py", line 663, in coef
        nab_evi = self(ev[i])
      File "/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.2.beta5/local/lib/python3.8/site-packages/sage/manifolds/differentiable/affine_connection.py", line 1386, in __call__
        return self._derive_paral(tensor_r)
      File "/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.2.beta5/local/lib/python3.8/site-packages/sage/manifolds/differentiable/affine_connection.py", line 1508, in _derive_paral
        for ii,val in make_CovDerivative(listParalInput):
      File "/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.2.beta5/local/lib/python3.8/site-packages/sage/parallel/multiprocessing_sage.py", line 77, in parallel_iter
        for res in result:
      File "/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.2.beta5/local/lib/python3.8/multiprocessing/pool.py", line 868, in next
        raise value
    TypeError: code() takes at least 14 arguments (13 given)
```
- a deprecation warning:

```
File "src/sage/plot/plot3d/base.pyx", line 1560, in sage.plot.plot3d.base.Graphics3d.save_image
Failed example:
    G.save_image(gif)
Expected nothing
Got:
    doctest:warning
    ...
    DeprecationWarning: PY_SSIZE_T_CLEAN will be required for '#' formats
```
- another one:

```
File "src/sage/doctest/forker.py", line 2351, in sage.doctest.forker.DocTestWorker.kill
Failed example:
    time.sleep(0.2)  # Worker doesn't die
Expected nothing
Got:
    doctest:warning
    ...
    DeprecationWarning: an integer is required (got type sage.rings.real_mpfr.RealLiteral).  Implicit conversion to integers using __int__ is deprecated, and may be removed in a future version of Python.
```
I haven't gone through all of the failures yet, nor have I pored over the Python 3.8 changelog to try to figure any of these out. The first few types are easy to fix, I hope.



---

archive/issue_comments_430549.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\ncomment 77 above already mentions the hashing/ordering issues. I haven't looked at these patches",
    "created_at": "2020-07-17T01:53:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430549",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2" align="right">comment:2</div>

comment 77 above already mentions the hashing/ordering issues. I haven't looked at these patches



---

archive/issue_comments_430550.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nIf doctests need patching because of sorting order changes, I hope we can do better than what I see in https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u0-version-python-3.8.patch\n\nMany of such tests should in my opinion be fixed by using explicitly `sorted` when comparing lists whose order has no mathematical meaning",
    "created_at": "2020-07-17T01:57:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430550",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:3" align="right">comment:3</div>

If doctests need patching because of sorting order changes, I hope we can do better than what I see in https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u0-version-python-3.8.patch

Many of such tests should in my opinion be fixed by using explicitly `sorted` when comparing lists whose order has no mathematical meaning



---

archive/issue_comments_430551.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nIn this one from the Debian patch, I'm wondering whether printing of `Set` in doctests should be modified similar to what was done in #29042 for `dict`\n\n```diff\n--- a/sage/src/sage/schemes/elliptic_curves/ell_point.py\n+++ b/sage/src/sage/schemes/elliptic_curves/ell_point.py\n@@ -822,9 +822,9 @@\n             sage: all(T.is_divisible_by(3) for T in tor)\n             True\n             sage: Set([T for T in tor if T.is_divisible_by(2)])\n-            {(0 : 1 : 0), (1 : 0 : 1)}\n+            {(1 : 0 : 1), (0 : 1 : 0)}\n             sage: Set([2*T for T in tor])\n-            {(0 : 1 : 0), (1 : 0 : 1)}\n+            {(1 : 0 : 1), (0 : 1 : 0)}\n\n```",
    "created_at": "2020-07-17T02:00:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430551",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:4" align="right">comment:4</div>

In this one from the Debian patch, I'm wondering whether printing of `Set` in doctests should be modified similar to what was done in #29042 for `dict`

```diff
--- a/sage/src/sage/schemes/elliptic_curves/ell_point.py
+++ b/sage/src/sage/schemes/elliptic_curves/ell_point.py
@@ -822,9 +822,9 @@
             sage: all(T.is_divisible_by(3) for T in tor)
             True
             sage: Set([T for T in tor if T.is_divisible_by(2)])
-            {(0 : 1 : 0), (1 : 0 : 1)}
+            {(1 : 0 : 1), (0 : 1 : 0)}
             sage: Set([2*T for T in tor])
-            {(0 : 1 : 0), (1 : 0 : 1)}
+            {(1 : 0 : 1), (0 : 1 : 0)}

```



---

archive/issue_comments_430552.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nFor these ones from the Debian patch I have created #30162:\n\n```\n--- a/sage/src/sage/symbolic/callable.py\n+++ b/sage/src/sage/symbolic/callable.py\n@@ -38,27 +38,27 @@\n     sage: f(1)=2\n     Traceback (most recent call last):\n     ...\n-    SyntaxError: can't assign to function call\n+    SyntaxError: cannot assign to function call\n\n```",
    "created_at": "2020-07-17T02:07:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430552",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6" align="right">comment:6</div>

For these ones from the Debian patch I have created #30162:

```
--- a/sage/src/sage/symbolic/callable.py
+++ b/sage/src/sage/symbolic/callable.py
@@ -38,27 +38,27 @@
     sage: f(1)=2
     Traceback (most recent call last):
     ...
-    SyntaxError: can't assign to function call
+    SyntaxError: cannot assign to function call

```



---

archive/issue_comments_430553.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nFor this one from the Debian patch, I also wonder whether some methods should be changed so that they return generators rather than lists - for better py3 style. \n\n```\n--- a/sage/src/sage/categories/coxeter_groups.py\n+++ b/sage/src/sage/categories/coxeter_groups.py\n@@ -283,7 +283,7 @@\n                 [[0, 1, 2, 1], [0, 2, 1, 2], [2, 0, 1, 2]]\n \n                 sage: W.braid_orbit([2,1,1,2,1])\n-                [[2, 2, 1, 2, 2], [2, 1, 1, 2, 1], [1, 2, 1, 1, 2], [2, 1, 2, 1, 2]]\n+                [[2, 1, 1, 2, 1], [1, 2, 1, 1, 2], [2, 2, 1, 2, 2], [2, 1, 2, 1, 2]]\n \n                 sage: W = ReflectionGroup(['A',3], index_set=[\"AA\",\"BB\",5])  # optional - gap3\n                 sage: w = W.long_element()                                   # optional - gap3\n\n```",
    "created_at": "2020-07-17T02:36:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430553",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

For this one from the Debian patch, I also wonder whether some methods should be changed so that they return generators rather than lists - for better py3 style. 

```
--- a/sage/src/sage/categories/coxeter_groups.py
+++ b/sage/src/sage/categories/coxeter_groups.py
@@ -283,7 +283,7 @@
                 [[0, 1, 2, 1], [0, 2, 1, 2], [2, 0, 1, 2]]
 
                 sage: W.braid_orbit([2,1,1,2,1])
-                [[2, 2, 1, 2, 2], [2, 1, 1, 2, 1], [1, 2, 1, 1, 2], [2, 1, 2, 1, 2]]
+                [[2, 1, 1, 2, 1], [1, 2, 1, 1, 2], [2, 2, 1, 2, 2], [2, 1, 2, 1, 2]]
 
                 sage: W = ReflectionGroup(['A',3], index_set=["AA","BB",5])  # optional - gap3
                 sage: w = W.long_element()                                   # optional - gap3

```



---

archive/issue_comments_430554.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThat is a big Sage-wide issue/question: should things be iterators/generators or lists. Some places we do both (e.g., in graphs), in others we only have the lists, and even still some places only do iterators.\n\nThe simple fix here to make everything consistent is just to sort the output (as was done in the test before) as this should be considered more as a set than an enumerated list IIRC.",
    "created_at": "2020-07-17T03:03:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430554",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:8" align="right">comment:8</div>

That is a big Sage-wide issue/question: should things be iterators/generators or lists. Some places we do both (e.g., in graphs), in others we only have the lists, and even still some places only do iterators.

The simple fix here to make everything consistent is just to sort the output (as was done in the test before) as this should be considered more as a set than an enumerated list IIRC.



---

archive/issue_comments_430555.json:
```json
{
    "body": "<div id=\"comment:109\" align=\"right\">comment:109</div>\n\nReplying to [@tscrim](#comment:108):\n> The simple fix here to make everything consistent is just to sort the output (as was done in the test before) as this should be considered more as a set than an enumerated list IIRC.\n\nSure, this is what we should do for this ticket.",
    "created_at": "2020-07-17T03:14:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430555",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:109" align="right">comment:109</div>

Replying to [@tscrim](#comment:108):
> The simple fix here to make everything consistent is just to sort the output (as was done in the test before) as this should be considered more as a set than an enumerated list IIRC.

Sure, this is what we should do for this ticket.



---

archive/issue_comments_430556.json:
```json
{
    "body": "Changed dependencies from **#28197, #29042, #29861** to **#28197, #29042, #29861, #30162**",
    "created_at": "2020-07-17T06:50:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430556",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#28197, #29042, #29861** to **#28197, #29042, #29861, #30162**



---

archive/issue_comments_430557.json:
```json
{
    "body": "Changed author from **Jeroen Demeyer** to **Jeroen Demeyer, John Palmieri, Matthias Koeppe**",
    "created_at": "2020-07-17T06:53:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430557",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Jeroen Demeyer** to **Jeroen Demeyer, John Palmieri, Matthias Koeppe**



---

archive/issue_comments_430558.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI don't understand the point of checking specific hash values. For example, in `src/sage/combinat/similarity_class_type.py`, the hashes depend on how Python determines `hash(tuple([3,2,1]))`, for example. Since I think that is an implementation detail of Python, not Sage, doctesting for a specific value is the opposite of robust.",
    "created_at": "2020-07-17T21:09:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430558",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:2" align="right">comment:2</div>

I don't understand the point of checking specific hash values. For example, in `src/sage/combinat/similarity_class_type.py`, the hashes depend on how Python determines `hash(tuple([3,2,1]))`, for example. Since I think that is an implementation detail of Python, not Sage, doctesting for a specific value is the opposite of robust.



---

archive/issue_comments_430559.json:
```json
{
    "body": "<div id=\"comment:113\" align=\"right\">comment:113</div>\n\nReplying to [@jhpalmieri](#comment:112):\n> I don't understand the point of checking specific hash values. For example, in `src/sage/combinat/similarity_class_type.py`, the hashes depend on how Python determines `hash(tuple([3,2,1]))`, for example. Since I think that is an implementation detail of Python, not Sage, doctesting for a specific value is the opposite of robust.\n\nMy guess is that these tests are there to guard against thoughtless or accidental changes to hash functions. \n\nI could imagine that we may want to change these tests to something like this:\n\n```\n    sage: hash(x) in (5050909583595644741, -925386691174542829, 234567876545678)\n    True\n```",
    "created_at": "2020-07-17T21:15:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430559",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:113" align="right">comment:113</div>

Replying to [@jhpalmieri](#comment:112):
> I don't understand the point of checking specific hash values. For example, in `src/sage/combinat/similarity_class_type.py`, the hashes depend on how Python determines `hash(tuple([3,2,1]))`, for example. Since I think that is an implementation detail of Python, not Sage, doctesting for a specific value is the opposite of robust.

My guess is that these tests are there to guard against thoughtless or accidental changes to hash functions. 

I could imagine that we may want to change these tests to something like this:

```
    sage: hash(x) in (5050909583595644741, -925386691174542829, 234567876545678)
    True
```



---

archive/issue_comments_430560.json:
```json
{
    "body": "Changed commit from **[`5a5fa82`](https://github.com/sagemath/sagetrac-mirror/commit/5a5fa82344129e34f03b62ec2c3bb0a72de0d808)** to **[`3d6ae39`](https://github.com/sagemath/sagetrac-mirror/commit/3d6ae39a62049a0a02e71f56c9cdd970407147a4)**",
    "created_at": "2020-07-17T23:58:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430560",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5a5fa82`](https://github.com/sagemath/sagetrac-mirror/commit/5a5fa82344129e34f03b62ec2c3bb0a72de0d808)** to **[`3d6ae39`](https://github.com/sagemath/sagetrac-mirror/commit/3d6ae39a62049a0a02e71f56c9cdd970407147a4)**



---

archive/issue_comments_430561.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3d6ae39a62049a0a02e71f56c9cdd970407147a4\"><code>3d6ae39</code></a></td><td><code>trac 27754: fix some doctests for Python 3.8</code></td></tr></table>\n",
    "created_at": "2020-07-17T23:58:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430561",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3d6ae39a62049a0a02e71f56c9cdd970407147a4"><code>3d6ae39</code></a></td><td><code>trac 27754: fix some doctests for Python 3.8</code></td></tr></table>




---

archive/issue_comments_430562.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nHere are \"fixes\" for some doctests. Some are probably not ideal. This is also far from complete: I didn't have the energy to do more, and I don't know how to handle some of the failures. But maybe this is a start.",
    "created_at": "2020-07-17T23:59:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430562",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:5" align="right">comment:5</div>

Here are "fixes" for some doctests. Some are probably not ideal. This is also far from complete: I didn't have the energy to do more, and I don't know how to handle some of the failures. But maybe this is a start.



---

archive/issue_comments_430563.json:
```json
{
    "body": "Work Issues: **merge #30162**",
    "created_at": "2020-07-18T00:02:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430563",
    "user": "https://github.com/mkoeppe"
}
```

Work Issues: **merge #30162**



---

archive/issue_comments_430564.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nFor `similarity_class_type.py`, back when this was written IIRC, there was less decided about how to test a `__hash__` method and less concern about how changes in Python would affect this. So I think the changed tests here are good.",
    "created_at": "2020-07-18T00:10:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430564",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:7" align="right">comment:7</div>

For `similarity_class_type.py`, back when this was written IIRC, there was less decided about how to test a `__hash__` method and less concern about how changes in Python would affect this. So I think the changed tests here are good.



---

archive/issue_comments_430565.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,4 +5,6 @@\n \n **Tarball**: see checksums.ini\n \n-\n+Previous and next Python upgrades:\n+- #25680 - Python 3.7.x\n+- #30184 - Python 3.9.x\n``````\n",
    "created_at": "2020-07-20T23:21:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430565",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,4 +5,6 @@
 
 **Tarball**: see checksums.ini
 
-
+Previous and next Python upgrades:
+- #25680 - Python 3.7.x
+- #30184 - Python 3.9.x
``````




---

archive/issue_comments_430566.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nPython 3.8.5 was released as a security hotfix.\n\nSee #30184 for Python 3.9.x.",
    "created_at": "2020-07-20T23:21:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430566",
    "user": "https://github.com/slel"
}
```

<div id="comment:8" align="right">comment:8</div>

Python 3.8.5 was released as a security hotfix.

See #30184 for Python 3.9.x.



---

archive/issue_comments_430567.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI'm not going to be able to work on this for a few days. If someone else wants to work on doctests, please feel free. Do we have a Pillow-upgrade ticket? I wonder if that would help with some of the tests. And #30176 (matplotlib upgrade) might help, too.\n\nShould this be delayed to Sage 9.3, ideally early in the release cycle?",
    "created_at": "2020-07-21T01:51:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430567",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:9" align="right">comment:9</div>

I'm not going to be able to work on this for a few days. If someone else wants to work on doctests, please feel free. Do we have a Pillow-upgrade ticket? I wonder if that would help with some of the tests. And #30176 (matplotlib upgrade) might help, too.

Should this be delayed to Sage 9.3, ideally early in the release cycle?



---

archive/issue_comments_430568.json:
```json
{
    "body": "<div id=\"comment:120\" align=\"right\">comment:120</div>\n\nReplying to [@jhpalmieri](#comment:119):\n> Do we have a Pillow-upgrade ticket? \n\nYes, it's on #30103",
    "created_at": "2020-07-21T02:01:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430568",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:120" align="right">comment:120</div>

Replying to [@jhpalmieri](#comment:119):
> Do we have a Pillow-upgrade ticket? 

Yes, it's on #30103



---

archive/issue_comments_430569.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8a43db65c28fdcf6f347def9a612c77eedef3c9c\"><code>8a43db6</code></a></td><td><code>build/pkgs/python3: Update to 3.8.5</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/60a8922223959424b9e89140c9c5258fa23cb826\"><code>60a8922</code></a></td><td><code>In doctests, accept both can't and cannot in error messages</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/71da37b486fed8c95fe5e303d62030d0de8086d9\"><code>71da37b</code></a></td><td><code>Fixup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2727aa8a97da050c3a0702a66aa37723a940ee09\"><code>2727aa8</code></a></td><td><code>src/sage/combinat/words/word.py: More wildcarding for respelled error messages</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c43343c3b767e0029b1f1d3c3fdc102dc1e8cd31\"><code>c43343c</code></a></td><td><code>Even more wildcarding for respelled error messages; remove some py2-only tests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1a7bc97aa9281b28f8951a4a87fdf656b218af95\"><code>1a7bc97</code></a></td><td><code>Merge branch 'u/mkoeppe/make_doctests_accept_python_3_8_x_respellings_of_some_error_messages' of git://trac.sagemath.org/sage into t/27754/public/python3.8</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ccc461e59d246b87a99d8b3426ecd419bd8484ab\"><code>ccc461e</code></a></td><td><code>Merge branch 'public/python3.8' of git://trac.sagemath.org/sage into t/27754/public/python3.8</code></td></tr></table>\n",
    "created_at": "2020-07-22T02:11:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430569",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8a43db65c28fdcf6f347def9a612c77eedef3c9c"><code>8a43db6</code></a></td><td><code>build/pkgs/python3: Update to 3.8.5</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/60a8922223959424b9e89140c9c5258fa23cb826"><code>60a8922</code></a></td><td><code>In doctests, accept both can't and cannot in error messages</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/71da37b486fed8c95fe5e303d62030d0de8086d9"><code>71da37b</code></a></td><td><code>Fixup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2727aa8a97da050c3a0702a66aa37723a940ee09"><code>2727aa8</code></a></td><td><code>src/sage/combinat/words/word.py: More wildcarding for respelled error messages</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c43343c3b767e0029b1f1d3c3fdc102dc1e8cd31"><code>c43343c</code></a></td><td><code>Even more wildcarding for respelled error messages; remove some py2-only tests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1a7bc97aa9281b28f8951a4a87fdf656b218af95"><code>1a7bc97</code></a></td><td><code>Merge branch 'u/mkoeppe/make_doctests_accept_python_3_8_x_respellings_of_some_error_messages' of git://trac.sagemath.org/sage into t/27754/public/python3.8</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ccc461e59d246b87a99d8b3426ecd419bd8484ab"><code>ccc461e</code></a></td><td><code>Merge branch 'public/python3.8' of git://trac.sagemath.org/sage into t/27754/public/python3.8</code></td></tr></table>




---

archive/issue_comments_430570.json:
```json
{
    "body": "Changed commit from **[`3d6ae39`](https://github.com/sagemath/sagetrac-mirror/commit/3d6ae39a62049a0a02e71f56c9cdd970407147a4)** to **[`ccc461e`](https://github.com/sagemath/sagetrac-mirror/commit/ccc461e59d246b87a99d8b3426ecd419bd8484ab)**",
    "created_at": "2020-07-22T02:11:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430570",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3d6ae39`](https://github.com/sagemath/sagetrac-mirror/commit/3d6ae39a62049a0a02e71f56c9cdd970407147a4)** to **[`ccc461e`](https://github.com/sagemath/sagetrac-mirror/commit/ccc461e59d246b87a99d8b3426ecd419bd8484ab)**



---

archive/issue_comments_430571.json:
```json
{
    "body": "Changed work issues from **merge #30162** to none",
    "created_at": "2020-07-22T02:11:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430571",
    "user": "https://github.com/mkoeppe"
}
```

Changed work issues from **merge #30162** to none



---

archive/issue_events_380740.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-22T02:11:28Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "title_is": "Upgrade: Python 3.8.5",
    "title_was": "Upgrade: Python 3.8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380740"
}
```



---

archive/issue_comments_430572.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,5 +6,6 @@\n **Tarball**: see checksums.ini\n \n Previous and next Python upgrades:\n-- #25680 - Python 3.7.x\n+- #25680 - Python 3.7.3\n+- #30210 - Python 3.7.8\n - #30184 - Python 3.9.x\n``````\n",
    "created_at": "2020-07-23T23:41:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430572",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,5 +6,6 @@
 **Tarball**: see checksums.ini
 
 Previous and next Python upgrades:
-- #25680 - Python 3.7.x
+- #25680 - Python 3.7.3
+- #30210 - Python 3.7.8
 - #30184 - Python 3.9.x
``````




---

archive/issue_events_380741.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-25T18:37:46Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380741"
}
```



---

archive/issue_events_380742.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-25T18:37:46Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380742"
}
```



---

archive/issue_comments_430573.json:
```json
{
    "body": "<div id=\"comment:126\" align=\"right\">comment:126</div>\n\nReplying to [@jhpalmieri](#comment:119):\n> Should this be delayed to Sage 9.3, ideally early in the release cycle?\n\nYes, I think so. Let's do #30210 (Upgrade Python to 3.7.8) for 9.2",
    "created_at": "2020-07-25T18:38:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430573",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:126" align="right">comment:126</div>

Replying to [@jhpalmieri](#comment:119):
> Should this be delayed to Sage 9.3, ideally early in the release cycle?

Yes, I think so. Let's do #30210 (Upgrade Python to 3.7.8) for 9.2



---

archive/issue_comments_430574.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThere are lots of failures caused by deprecation warnings on unpickling\n\n```\nDeprecationWarning: PY_SSIZE_T_CLEAN will be required for '#' formats\n```\nthat come from pynac. These are fixed with https://github.com/pynac/pynac/pull/354, but pynac development seems stalled unfortunately",
    "created_at": "2020-07-26T18:10:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430574",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:7" align="right">comment:7</div>

There are lots of failures caused by deprecation warnings on unpickling

```
DeprecationWarning: PY_SSIZE_T_CLEAN will be required for '#' formats
```
that come from pynac. These are fixed with https://github.com/pynac/pynac/pull/354, but pynac development seems stalled unfortunately



---

archive/issue_comments_430575.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nCould you please create a sage ticket for this pynac patch?",
    "created_at": "2020-07-26T18:18:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430575",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">comment:8</div>

Could you please create a sage ticket for this pynac patch?



---

archive/issue_comments_430576.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f243937bd7fae39ed51ac93d9da20696167d90ee\"><code>f243937</code></a></td><td><code>Merge remote-tracking branch 'origin/develop' into t/27754/public/python3.8</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/73539f6698f9393e0ea2832e4ce7949e6c3f52a8\"><code>73539f6</code></a></td><td><code>Make tests in categories/finite_enumerated_sets.py pass with Python 3.8</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c893db8c24c078e2d8010311c9d0375aa7063d6\"><code>0c893db</code></a></td><td><code>Fix 'SyntaxWarning: \"is\" with a literal. Did you mean \"==\"?' with Python 3.8</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b1fc3553e32333143adb763e74728b8d45d99f2e\"><code>b1fc355</code></a></td><td><code>Make tests in combinat/words/word_infinite_datatypes.py compatible with Python 3.8</code></td></tr></table>\n",
    "created_at": "2020-07-26T18:39:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430576",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f243937bd7fae39ed51ac93d9da20696167d90ee"><code>f243937</code></a></td><td><code>Merge remote-tracking branch 'origin/develop' into t/27754/public/python3.8</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/73539f6698f9393e0ea2832e4ce7949e6c3f52a8"><code>73539f6</code></a></td><td><code>Make tests in categories/finite_enumerated_sets.py pass with Python 3.8</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c893db8c24c078e2d8010311c9d0375aa7063d6"><code>0c893db</code></a></td><td><code>Fix 'SyntaxWarning: "is" with a literal. Did you mean "=="?' with Python 3.8</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b1fc3553e32333143adb763e74728b8d45d99f2e"><code>b1fc355</code></a></td><td><code>Make tests in combinat/words/word_infinite_datatypes.py compatible with Python 3.8</code></td></tr></table>




---

archive/issue_comments_430577.json:
```json
{
    "body": "Changed commit from **[`ccc461e`](https://github.com/sagemath/sagetrac-mirror/commit/ccc461e59d246b87a99d8b3426ecd419bd8484ab)** to **[`b1fc355`](https://github.com/sagemath/sagetrac-mirror/commit/b1fc3553e32333143adb763e74728b8d45d99f2e)**",
    "created_at": "2020-07-26T18:39:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430577",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ccc461e`](https://github.com/sagemath/sagetrac-mirror/commit/ccc461e59d246b87a99d8b3426ecd419bd8484ab)** to **[`b1fc355`](https://github.com/sagemath/sagetrac-mirror/commit/b1fc3553e32333143adb763e74728b8d45d99f2e)**



---

archive/issue_comments_430578.json:
```json
{
    "body": "Changed dependencies from **#28197, #29042, #29861, #30162** to **#28197, #29042, #29861, #30162, #30225**",
    "created_at": "2020-07-26T18:54:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430578",
    "user": "https://github.com/antonio-rojas"
}
```

Changed dependencies from **#28197, #29042, #29861, #30162** to **#28197, #29042, #29861, #30162, #30225**



---

archive/issue_comments_430579.json:
```json
{
    "body": "<div id=\"comment:130\" align=\"right\">comment:130</div>\n\nReplying to [@mkoeppe](#comment:128):\n> Could you please create a sage ticket for this pynac patch? \n\nDone: #30225",
    "created_at": "2020-07-26T18:54:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430579",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:130" align="right">comment:130</div>

Replying to [@mkoeppe](#comment:128):
> Could you please create a sage ticket for this pynac patch? 

Done: #30225



---

archive/issue_comments_430580.json:
```json
{
    "body": "Changed commit from **[`b1fc355`](https://github.com/sagemath/sagetrac-mirror/commit/b1fc3553e32333143adb763e74728b8d45d99f2e)** to **[`6eb6a47`](https://github.com/sagemath/sagetrac-mirror/commit/6eb6a473d81c6bc3d04a3432f78ce3d8bfa192be)**",
    "created_at": "2020-07-26T19:30:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430580",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b1fc355`](https://github.com/sagemath/sagetrac-mirror/commit/b1fc3553e32333143adb763e74728b8d45d99f2e)** to **[`6eb6a47`](https://github.com/sagemath/sagetrac-mirror/commit/6eb6a473d81c6bc3d04a3432f78ce3d8bfa192be)**



---

archive/issue_comments_430581.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6eb6a473d81c6bc3d04a3432f78ce3d8bfa192be\"><code>6eb6a47</code></a></td><td><code>More sorted()</code></td></tr></table>\n",
    "created_at": "2020-07-26T19:30:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430581",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:1"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6eb6a473d81c6bc3d04a3432f78ce3d8bfa192be"><code>6eb6a47</code></a></td><td><code>More sorted()</code></td></tr></table>




---

archive/issue_comments_430582.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/583042aaac9c36e11e76a4c9accf95188ec9d2d5\"><code>583042a</code></a></td><td><code>Update compile flags for python 3.8</code></td></tr></table>\n",
    "created_at": "2020-07-26T19:44:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430582",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/583042aaac9c36e11e76a4c9accf95188ec9d2d5"><code>583042a</code></a></td><td><code>Update compile flags for python 3.8</code></td></tr></table>




---

archive/issue_comments_430583.json:
```json
{
    "body": "Changed commit from **[`6eb6a47`](https://github.com/sagemath/sagetrac-mirror/commit/6eb6a473d81c6bc3d04a3432f78ce3d8bfa192be)** to **[`583042a`](https://github.com/sagemath/sagetrac-mirror/commit/583042aaac9c36e11e76a4c9accf95188ec9d2d5)**",
    "created_at": "2020-07-26T19:44:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430583",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6eb6a47`](https://github.com/sagemath/sagetrac-mirror/commit/6eb6a473d81c6bc3d04a3432f78ce3d8bfa192be)** to **[`583042a`](https://github.com/sagemath/sagetrac-mirror/commit/583042aaac9c36e11e76a4c9accf95188ec9d2d5)**



---

archive/issue_comments_430584.json:
```json
{
    "body": "Changed commit from **[`583042a`](https://github.com/sagemath/sagetrac-mirror/commit/583042aaac9c36e11e76a4c9accf95188ec9d2d5)** to **[`d9ca5c5`](https://github.com/sagemath/sagetrac-mirror/commit/d9ca5c5715da4b6c78adc66095eeaca7c4a26c96)**",
    "created_at": "2020-07-26T19:51:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430584",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`583042a`](https://github.com/sagemath/sagetrac-mirror/commit/583042aaac9c36e11e76a4c9accf95188ec9d2d5)** to **[`d9ca5c5`](https://github.com/sagemath/sagetrac-mirror/commit/d9ca5c5715da4b6c78adc66095eeaca7c4a26c96)**



---

archive/issue_comments_430585.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e573b93588570e3c798e4c15f9d49e6cdf95c8a9\"><code>e573b93</code></a></td><td><code>Port away from deprecated cgi.escape</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d9ca5c5715da4b6c78adc66095eeaca7c4a26c96\"><code>d9ca5c5</code></a></td><td><code>Fix deprecation warnings in graphs/graph_latex.py with Python 3.8</code></td></tr></table>\n",
    "created_at": "2020-07-26T19:51:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430585",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e573b93588570e3c798e4c15f9d49e6cdf95c8a9"><code>e573b93</code></a></td><td><code>Port away from deprecated cgi.escape</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d9ca5c5715da4b6c78adc66095eeaca7c4a26c96"><code>d9ca5c5</code></a></td><td><code>Fix deprecation warnings in graphs/graph_latex.py with Python 3.8</code></td></tr></table>




---

archive/issue_comments_430586.json:
```json
{
    "body": "Changed author from **Jeroen Demeyer, John Palmieri, Matthias Koeppe** to **Jeroen Demeyer, John Palmieri, Matthias Koeppe, Antonio Rojas**",
    "created_at": "2020-07-26T19:52:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430586",
    "user": "https://github.com/antonio-rojas"
}
```

Changed author from **Jeroen Demeyer, John Palmieri, Matthias Koeppe** to **Jeroen Demeyer, John Palmieri, Matthias Koeppe, Antonio Rojas**



---

archive/issue_comments_430587.json:
```json
{
    "body": "Changed commit from **[`d9ca5c5`](https://github.com/sagemath/sagetrac-mirror/commit/d9ca5c5715da4b6c78adc66095eeaca7c4a26c96)** to **[`86d5e94`](https://github.com/sagemath/sagetrac-mirror/commit/86d5e94dc2ce2f0b674b275e039cecaaa7d0e130)**",
    "created_at": "2020-07-26T22:30:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430587",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d9ca5c5`](https://github.com/sagemath/sagetrac-mirror/commit/d9ca5c5715da4b6c78adc66095eeaca7c4a26c96)** to **[`86d5e94`](https://github.com/sagemath/sagetrac-mirror/commit/86d5e94dc2ce2f0b674b275e039cecaaa7d0e130)**



---

archive/issue_comments_430588.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/86d5e94dc2ce2f0b674b275e039cecaaa7d0e130\"><code>86d5e94</code></a></td><td><code>Rewrite some hash tests to be independent of the actual hashes</code></td></tr></table>\n",
    "created_at": "2020-07-26T22:30:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430588",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/86d5e94dc2ce2f0b674b275e039cecaaa7d0e130"><code>86d5e94</code></a></td><td><code>Rewrite some hash tests to be independent of the actual hashes</code></td></tr></table>




---

archive/issue_comments_430589.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/be98eb0a2721506f55a1a9dd30a647d006018e01\"><code>be98eb0</code></a></td><td><code>Rewrite direct tests for hashes</code></td></tr></table>\n",
    "created_at": "2020-07-27T11:00:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430589",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/be98eb0a2721506f55a1a9dd30a647d006018e01"><code>be98eb0</code></a></td><td><code>Rewrite direct tests for hashes</code></td></tr></table>




---

archive/issue_comments_430590.json:
```json
{
    "body": "Changed commit from **[`86d5e94`](https://github.com/sagemath/sagetrac-mirror/commit/86d5e94dc2ce2f0b674b275e039cecaaa7d0e130)** to **[`be98eb0`](https://github.com/sagemath/sagetrac-mirror/commit/be98eb0a2721506f55a1a9dd30a647d006018e01)**",
    "created_at": "2020-07-27T11:00:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430590",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`86d5e94`](https://github.com/sagemath/sagetrac-mirror/commit/86d5e94dc2ce2f0b674b275e039cecaaa7d0e130)** to **[`be98eb0`](https://github.com/sagemath/sagetrac-mirror/commit/be98eb0a2721506f55a1a9dd30a647d006018e01)**



---

archive/issue_comments_430591.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cdd8cb616842841d852aa708001213b725ee5e9a\"><code>cdd8cb6</code></a></td><td><code>Homogenize tuple notation from previous commit</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/74f9352dccdd1d7e4f2c21da22b6625b88362884\"><code>74f9352</code></a></td><td><code>Add posonlyargcount argument required by Python 3.8</code></td></tr></table>\n",
    "created_at": "2020-07-27T11:12:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430591",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cdd8cb616842841d852aa708001213b725ee5e9a"><code>cdd8cb6</code></a></td><td><code>Homogenize tuple notation from previous commit</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/74f9352dccdd1d7e4f2c21da22b6625b88362884"><code>74f9352</code></a></td><td><code>Add posonlyargcount argument required by Python 3.8</code></td></tr></table>




---

archive/issue_comments_430592.json:
```json
{
    "body": "Changed commit from **[`be98eb0`](https://github.com/sagemath/sagetrac-mirror/commit/be98eb0a2721506f55a1a9dd30a647d006018e01)** to **[`74f9352`](https://github.com/sagemath/sagetrac-mirror/commit/74f9352dccdd1d7e4f2c21da22b6625b88362884)**",
    "created_at": "2020-07-27T11:12:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430592",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`be98eb0`](https://github.com/sagemath/sagetrac-mirror/commit/be98eb0a2721506f55a1a9dd30a647d006018e01)** to **[`74f9352`](https://github.com/sagemath/sagetrac-mirror/commit/74f9352dccdd1d7e4f2c21da22b6625b88362884)**



---

archive/issue_comments_430593.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ea5518233c8e71ea6efe5cb75e87b236c70a2726\"><code>ea55182</code></a></td><td><code>Accept more detailed syntax error with Python 3.8</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a736d791ddeeea6dbc2e53e2c34a580dda32127b\"><code>a736d79</code></a></td><td><code>Fix missing import</code></td></tr></table>\n",
    "created_at": "2020-07-27T11:32:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430593",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ea5518233c8e71ea6efe5cb75e87b236c70a2726"><code>ea55182</code></a></td><td><code>Accept more detailed syntax error with Python 3.8</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a736d791ddeeea6dbc2e53e2c34a580dda32127b"><code>a736d79</code></a></td><td><code>Fix missing import</code></td></tr></table>




---

archive/issue_comments_430594.json:
```json
{
    "body": "Changed commit from **[`74f9352`](https://github.com/sagemath/sagetrac-mirror/commit/74f9352dccdd1d7e4f2c21da22b6625b88362884)** to **[`a736d79`](https://github.com/sagemath/sagetrac-mirror/commit/a736d791ddeeea6dbc2e53e2c34a580dda32127b)**",
    "created_at": "2020-07-27T11:32:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430594",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`74f9352`](https://github.com/sagemath/sagetrac-mirror/commit/74f9352dccdd1d7e4f2c21da22b6625b88362884)** to **[`a736d79`](https://github.com/sagemath/sagetrac-mirror/commit/a736d791ddeeea6dbc2e53e2c34a580dda32127b)**



---

archive/issue_comments_430595.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f384065cbf40774888040b1180ed0320add546ad\"><code>f384065</code></a></td><td><code>Make computing graph faces deterministic</code></td></tr></table>\n",
    "created_at": "2020-07-27T19:39:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430595",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f384065cbf40774888040b1180ed0320add546ad"><code>f384065</code></a></td><td><code>Make computing graph faces deterministic</code></td></tr></table>




---

archive/issue_comments_430596.json:
```json
{
    "body": "Changed commit from **[`a736d79`](https://github.com/sagemath/sagetrac-mirror/commit/a736d791ddeeea6dbc2e53e2c34a580dda32127b)** to **[`f384065`](https://github.com/sagemath/sagetrac-mirror/commit/f384065cbf40774888040b1180ed0320add546ad)**",
    "created_at": "2020-07-27T19:39:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430596",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a736d79`](https://github.com/sagemath/sagetrac-mirror/commit/a736d791ddeeea6dbc2e53e2c34a580dda32127b)** to **[`f384065`](https://github.com/sagemath/sagetrac-mirror/commit/f384065cbf40774888040b1180ed0320add546ad)**



---

archive/issue_comments_430597.json:
```json
{
    "body": "Changed commit from **[`f384065`](https://github.com/sagemath/sagetrac-mirror/commit/f384065cbf40774888040b1180ed0320add546ad)** to **[`694c6b1`](https://github.com/sagemath/sagetrac-mirror/commit/694c6b153eb1b2e69aa5345f5108ceeb6acfb1d9)**",
    "created_at": "2020-07-28T07:30:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430597",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f384065`](https://github.com/sagemath/sagetrac-mirror/commit/f384065cbf40774888040b1180ed0320add546ad)** to **[`694c6b1`](https://github.com/sagemath/sagetrac-mirror/commit/694c6b153eb1b2e69aa5345f5108ceeb6acfb1d9)**



---

archive/issue_comments_430598.json:
```json
{
    "body": "<div id=\"comment:0\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/de571225358fe7f9b6e253f5344422532a03bb7e\"><code>de57122</code></a></td><td><code>Update tests in graphs/schnyder.py after previous commit</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/694c6b153eb1b2e69aa5345f5108ceeb6acfb1d9\"><code>694c6b1</code></a></td><td><code>Cast sleep arguments to float</code></td></tr></table>\n",
    "created_at": "2020-07-28T07:30:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430598",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:0"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/de571225358fe7f9b6e253f5344422532a03bb7e"><code>de57122</code></a></td><td><code>Update tests in graphs/schnyder.py after previous commit</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/694c6b153eb1b2e69aa5345f5108ceeb6acfb1d9"><code>694c6b1</code></a></td><td><code>Cast sleep arguments to float</code></td></tr></table>




---

archive/issue_comments_430599.json:
```json
{
    "body": "Changed commit from **[`694c6b1`](https://github.com/sagemath/sagetrac-mirror/commit/694c6b153eb1b2e69aa5345f5108ceeb6acfb1d9)** to **[`14c57e5`](https://github.com/sagemath/sagetrac-mirror/commit/14c57e57275bdedce87b159d4cfe9658e94ec555)**",
    "created_at": "2020-07-28T10:27:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430599",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`694c6b1`](https://github.com/sagemath/sagetrac-mirror/commit/694c6b153eb1b2e69aa5345f5108ceeb6acfb1d9)** to **[`14c57e5`](https://github.com/sagemath/sagetrac-mirror/commit/14c57e57275bdedce87b159d4cfe9658e94ec555)**



---

archive/issue_comments_430600.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3597904a03c2f780faa89b80a7cdcccce69dcec1\"><code>3597904</code></a></td><td><code>Accept ValueError in addition to KeyError</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/14c57e57275bdedce87b159d4cfe9658e94ec555\"><code>14c57e5</code></a></td><td><code>More sorted()</code></td></tr></table>\n",
    "created_at": "2020-07-28T10:27:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430600",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:1"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3597904a03c2f780faa89b80a7cdcccce69dcec1"><code>3597904</code></a></td><td><code>Accept ValueError in addition to KeyError</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/14c57e57275bdedce87b159d4cfe9658e94ec555"><code>14c57e5</code></a></td><td><code>More sorted()</code></td></tr></table>




---

archive/issue_comments_430601.json:
```json
{
    "body": "Changed commit from **[`14c57e5`](https://github.com/sagemath/sagetrac-mirror/commit/14c57e57275bdedce87b159d4cfe9658e94ec555)** to **[`cd346fa`](https://github.com/sagemath/sagetrac-mirror/commit/cd346fa5bf72e14338a944626aa6fc3e8fe2833c)**",
    "created_at": "2020-07-28T13:20:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430601",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`14c57e5`](https://github.com/sagemath/sagetrac-mirror/commit/14c57e57275bdedce87b159d4cfe9658e94ec555)** to **[`cd346fa`](https://github.com/sagemath/sagetrac-mirror/commit/cd346fa5bf72e14338a944626aa6fc3e8fe2833c)**



---

archive/issue_comments_430602.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/446afe72886f5b10049414257d56ea1931703442\"><code>446afe7</code></a></td><td><code>Remove some randomness</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cd346fa5bf72e14338a944626aa6fc3e8fe2833c\"><code>cd346fa</code></a></td><td><code>Make computing fan rays deterministic</code></td></tr></table>\n",
    "created_at": "2020-07-28T13:20:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430602",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/446afe72886f5b10049414257d56ea1931703442"><code>446afe7</code></a></td><td><code>Remove some randomness</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cd346fa5bf72e14338a944626aa6fc3e8fe2833c"><code>cd346fa</code></a></td><td><code>Make computing fan rays deterministic</code></td></tr></table>




---

archive/issue_comments_430603.json:
```json
{
    "body": "Changed commit from **[`cd346fa`](https://github.com/sagemath/sagetrac-mirror/commit/cd346fa5bf72e14338a944626aa6fc3e8fe2833c)** to **[`093e9d6`](https://github.com/sagemath/sagetrac-mirror/commit/093e9d61181d5ae221bc7d20e4b408b7efb251e8)**",
    "created_at": "2020-07-28T16:56:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430603",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cd346fa`](https://github.com/sagemath/sagetrac-mirror/commit/cd346fa5bf72e14338a944626aa6fc3e8fe2833c)** to **[`093e9d6`](https://github.com/sagemath/sagetrac-mirror/commit/093e9d61181d5ae221bc7d20e4b408b7efb251e8)**



---

archive/issue_comments_430604.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/feb582a4b22b0d2c934a5f0e79e9914217c4e12a\"><code>feb582a</code></a></td><td><code>Make sparse_2term_quotient deterministic</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/093e9d61181d5ae221bc7d20e4b408b7efb251e8\"><code>093e9d6</code></a></td><td><code>More sorting</code></td></tr></table>\n",
    "created_at": "2020-07-28T16:56:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430604",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/feb582a4b22b0d2c934a5f0e79e9914217c4e12a"><code>feb582a</code></a></td><td><code>Make sparse_2term_quotient deterministic</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/093e9d61181d5ae221bc7d20e4b408b7efb251e8"><code>093e9d6</code></a></td><td><code>More sorting</code></td></tr></table>




---

archive/issue_comments_430605.json:
```json
{
    "body": "Changed commit from **[`093e9d6`](https://github.com/sagemath/sagetrac-mirror/commit/093e9d61181d5ae221bc7d20e4b408b7efb251e8)** to **[`73d6c7f`](https://github.com/sagemath/sagetrac-mirror/commit/73d6c7f47c6a203da2cca58f56e68df6fc3e6852)**",
    "created_at": "2020-07-28T21:41:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430605",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`093e9d6`](https://github.com/sagemath/sagetrac-mirror/commit/093e9d61181d5ae221bc7d20e4b408b7efb251e8)** to **[`73d6c7f`](https://github.com/sagemath/sagetrac-mirror/commit/73d6c7f47c6a203da2cca58f56e68df6fc3e6852)**



---

archive/issue_comments_430606.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9ee9cb8c34e5b1301de3912933de94c417a39111\"><code>9ee9cb8</code></a></td><td><code>Fix some tests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/72b40cad7f1e6abfca5dfd04be0118a48bd3896b\"><code>72b40ca</code></a></td><td><code>Revert unintended change</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/73d6c7f47c6a203da2cca58f56e68df6fc3e6852\"><code>73d6c7f</code></a></td><td><code>Update test</code></td></tr></table>\n",
    "created_at": "2020-07-28T21:41:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430606",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9ee9cb8c34e5b1301de3912933de94c417a39111"><code>9ee9cb8</code></a></td><td><code>Fix some tests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/72b40cad7f1e6abfca5dfd04be0118a48bd3896b"><code>72b40ca</code></a></td><td><code>Revert unintended change</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/73d6c7f47c6a203da2cca58f56e68df6fc3e6852"><code>73d6c7f</code></a></td><td><code>Update test</code></td></tr></table>




---

archive/issue_comments_430607.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nJust a handful of issues left, mostly pickling related\n\n```\n**********************************************************************\nFile \"/usr/lib/python3.8/site-packages/sage/matroids/linear_matroid.pyx\", line 3674, in sage.matroids.linear_matroid.BinaryMatroid._projection_partition\nFailed example:\n    N._projection_partition()\nExpected:\n    2 x 12 BinaryMatrix\n    [110011001100]\n    [001100110011]\nGot:\n    2 x 12 BinaryMatrix\n    [001100110011]\n    [110011001100]\n**********************************************************************\nFile \"/usr/lib/python3.8/site-packages/sage/structure/sequence.py\", line 824, in sage.structure.sequence.Sequence_generic.__copy__\nFailed example:\n    t.is_immutable == s.is_immutable\nExpected:\n    True\nGot:\n    False\n**********************************************************************\nFile \"/usr/lib/python3.8/site-packages/sage/structure/sequence.py\", line 826, in sage.structure.sequence.Sequence_generic.__copy__\nFailed example:\n    t.is_mutable == s.is_mutable\nExpected:\n    True\nGot:\n    False\n**********************************************************************\nFile \"/usr/lib/python3.8/site-packages/sage/combinat/posets/hasse_diagram.py\", line 2185, in sage.combinat.posets.hasse_diagram.HasseDiagram.antichains\nFailed example:\n    TestSuite(A).run()\nExpected nothing\nGot:\n    Failure in _test_pickling:\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.8/site-packages/sage/misc/sage_unittest.py\", line 296, in run\n        test_method(tester=tester)\n      File \"sage/structure/sage_object.pyx\", line 639, in sage.structure.sage_object.SageObject._test_pickling (build/cythonized/sage/structure/sage_object.c:4953)\n        tester.assertEqual(loads(dumps(self)), self)\n      File \"/usr/lib/python3.8/unittest/case.py\", line 912, in assertEqual\n        assertion_func(first, second, msg=msg)\n      File \"/usr/lib/python3.8/unittest/case.py\", line 905, in _baseAssertEqual\n        raise self.failureException(msg)\n    AssertionError: An enumerated set with a forest structure != An enumerated set with a forest structure\n    ------------------------------------------------------------\n    The following tests failed: _test_pickling\n**********************************************************************\nFile \"/usr/lib/python3.8/site-packages/sage/combinat/posets/hasse_diagram.py\", line 2190, in sage.combinat.posets.hasse_diagram.HasseDiagram.antichains\nFailed example:\n    TestSuite(A).run()\nExpected nothing\nGot:\n    Failure in _test_pickling:\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.8/site-packages/sage/misc/sage_unittest.py\", line 296, in run\n        test_method(tester=tester)\n      File \"sage/structure/sage_object.pyx\", line 639, in sage.structure.sage_object.SageObject._test_pickling (build/cythonized/sage/structure/sage_object.c:4953)\n        tester.assertEqual(loads(dumps(self)), self)\n      File \"/usr/lib/python3.8/unittest/case.py\", line 912, in assertEqual\n        assertion_func(first, second, msg=msg)\n      File \"/usr/lib/python3.8/unittest/case.py\", line 905, in _baseAssertEqual\n        raise self.failureException(msg)\n    AssertionError: An enumerated set with a forest structure != An enumerated set with a forest structure\n    ------------------------------------------------------------\n    The following tests failed: _test_pickling\n**********************************************************************\nFile \"/usr/lib/python3.8/site-packages/sage/combinat/cluster_algebra_quiver/quiver_mutation_type.py\", line 2171, in sage.combinat.cluster_algebra_quiver.quiver_mutation_type._construct_exceptional_mutation_classes\nFailed example:\n    for mut_class in sorted(rank_3_exceptional.keys(), key=str): # long time\n      print(\"{} {}\".format(mut_class, rank_3_exceptional[mut_class]))\nExpected:\n    ('G', 2, -1) [('BH?', (((1, 2), (1, -3)),)),\n    ('BGO', (((2, 1), (3, -1)),)), ('BW?', (((0, 1), (3, -1)),)),\n    ('BP?', (((0, 1), (1, -3)),)),\n    ('BP_', (((0, 1), (1, -3)), ((2, 0), (3, -1)))),\n    ('BP_', (((0, 1), (3, -1)), ((1, 2), (1, -3)), ((2, 0), (2, -2))))]\n    ('G', 2, 1) [('BH?', (((1, 2), (3, -1)),)),\n    ('BGO', (((2, 1), (1, -3)),)), ('BW?', (((0, 1), (1, -3)),)),\n    ('BP?', (((0, 1), (3, -1)),)),\n    ('BKO', (((1, 0), (3, -1)), ((2, 1), (1, -3)))),\n    ('BP_', (((0, 1), (2, -2)), ((1, 2), (1, -3)), ((2, 0), (3, -1))))]\nGot:\n    ('G', 2, -1) [('BH?', (((1, 2), (1, -3)),)), ('BGO', (((2, 1), (3, -1)),)), ('BW?', (((0, 1), (3, -1)),)), ('BP?', (((0, 1), (1, -3)),)), ('BP_', (((0, 1), (1, -3)), ((2, 0), (3, -1)))), ('BP_', (((0, 1), (1, -3)), ((1, 2), (2, -2)), ((2, 0), (3, -1))))]\n    ('G', 2, 1) [('BH?', (((1, 2), (3, -1)),)), ('BGO', (((2, 1), (1, -3)),)), ('BW?', (((0, 1), (1, -3)),)), ('BP?', (((0, 1), (3, -1)),)), ('BKO', (((1, 0), (3, -1)), ((2, 1), (1, -3)))), ('BP_', (((0, 1), (3, -1)), ((1, 2), (2, -2)), ((2, 0), (1, -3)))), ('BP_', (((0, 1), (2, -2)), ((1, 2), (1, -3)), ((2, 0), (3, -1))))]\n**********************************************************************\nFile \"/usr/lib/python3.8/site-packages/sage/combinat/cluster_algebra_quiver/mutation_type.py\", line 1348, in sage.combinat.cluster_algebra_quiver.mutation_type._mutation_type_test\nFailed example:\n    _mutation_type_test(3) # long time\nExpected:\n    True ('A', (2, 1), 1)\n    True ('A', 3)\n    True ('B', 3)\n    True ('BB', 2, 1)\n    True ('BC', 2, 1)\n    True ('C', 3)\n    True ('CC', 2, 1)\n    True ('G', 2, -1)\n    True ('G', 2, 1)\nGot:\n    True ('A', (2, 1), 1)\n    True ('A', 3)\n    True ('B', 3)\n    True ('BB', 2, 1)\n    True ('BC', 2, 1)\n    True ('C', 3)\n    True ('CC', 2, 1)\n    False ('G', 2, -1)\n    False ('G', 2, 1)\n**********************************************************************\nFile \"/usr/lib/python3.8/site-packages/sage/schemes/riemann_surfaces/riemann_surface.py\", line 355, in sage.schemes.riemann_surfaces.riemann_surface.RiemannSurface\nFailed example:\n    S.riemann_matrix() #abs tol 0.00000001\nExpected:\n    [0.500000000000000000000000... + 0.866025403784438646763723...*I]\nGot:\n    [-0.50000000000000000000000000000 + 0.86602540378443864676372317075*I]\nTolerance exceeded in 1 of 2:\n    0.500000000000000000000000 vs -0.50000000000000000000000000000, tolerance 1e0 > 1e-8\n**********************************************************************\nFile \"/usr/lib/python3.8/site-packages/sage/homology/simplicial_complex_morphism.py\", line 82, in sage.homology.simplicial_complex_morphism\nFailed example:\n    z                                     # this is the mapping path space\nExpected:\n    Simplicial complex morphism:\n      From: Simplicial complex with 6 vertices and 4 facets\n      To:   Minimal triangulation of the 2-sphere\n      Defn: ['L0R(0, 0)', 'L0R(0, 1)', 'L1R(1, 0)', 'L1R(1, 1)', 'L2R(2, 0)', 'L2R(2, 1)'] --> [0, 0, 1, 1, 2, 2]\nGot:\n    Simplicial complex morphism:\n      From: Simplicial complex with 6 vertices and 5 facets\n      To:   Minimal triangulation of the 2-sphere\n      Defn: ['L0R(0, 0)', 'L0R(0, 1)', 'L1R(1, 0)', 'L1R(1, 1)', 'L2R(2, 0)', 'L2R(2, 1)'] --> [0, 0, 1, 1, 2, 2]\n**********************************************************************\nFile \"/usr/lib/python3.8/site-packages/sage/categories/homset.py\", line 598, in sage.categories.homset.Homset.__init__\nFailed example:\n    TestSuite(H).run()\nExpected nothing\nGot:\n      Failure in _test_pickling:\n      Traceback (most recent call last):\n        File \"/usr/lib/python3.8/site-packages/sage/misc/sage_unittest.py\", line 296, in run\n          test_method(tester=tester)\n        File \"sage/structure/sage_object.pyx\", line 639, in sage.structure.sage_object.SageObject._test_pickling (build/cythonized/sage/structure/sage_object.c:4953)\n          tester.assertEqual(loads(dumps(self)), self)\n        File \"/usr/lib/python3.8/unittest/case.py\", line 912, in assertEqual\n          assertion_func(first, second, msg=msg)\n        File \"/usr/lib/python3.8/unittest/case.py\", line 905, in _baseAssertEqual\n          raise self.failureException(msg)\n      AssertionError: Generic morphism:\n        From: X\n        To:   Y != Generic morphism:\n        From: X\n        To:   Y\n      ------------------------------------------------------------\n      The following tests failed: _test_pickling\n    Failure in _test_elements\n    The following tests failed: _test_elements\n**********************************************************************\nFile \"/usr/lib/python3.8/site-packages/sage/categories/homset.py\", line 607, in sage.categories.homset.Homset.__init__\nFailed example:\n    TestSuite(H).run()\nExpected nothing\nGot:\n      Failure in _test_pickling:\n      Traceback (most recent call last):\n        File \"/usr/lib/python3.8/site-packages/sage/misc/sage_unittest.py\", line 296, in run\n          test_method(tester=tester)\n        File \"sage/structure/sage_object.pyx\", line 639, in sage.structure.sage_object.SageObject._test_pickling (build/cythonized/sage/structure/sage_object.c:4953)\n          tester.assertEqual(loads(dumps(self)), self)\n        File \"/usr/lib/python3.8/unittest/case.py\", line 912, in assertEqual\n          assertion_func(first, second, msg=msg)\n        File \"/usr/lib/python3.8/unittest/case.py\", line 905, in _baseAssertEqual\n          raise self.failureException(msg)\n      AssertionError: Generic morphism:\n        From: X\n        To:   Y != Generic morphism:\n        From: X\n        To:   Y\n      ------------------------------------------------------------\n      The following tests failed: _test_pickling\n    Failure in _test_elements\n    The following tests failed: _test_elements\n**********************************************************************\nFile \"/usr/lib/python3.8/site-packages/sage/categories/homset.py\", line 1253, in sage.categories.homset.HomsetWithBase.__init__\nFailed example:\n    TestSuite(H).run()\nExpected nothing\nGot:\n      Failure in _test_pickling:\n      Traceback (most recent call last):\n        File \"/usr/lib/python3.8/site-packages/sage/misc/sage_unittest.py\", line 296, in run\n          test_method(tester=tester)\n        File \"sage/structure/sage_object.pyx\", line 639, in sage.structure.sage_object.SageObject._test_pickling (build/cythonized/sage/structure/sage_object.c:4953)\n          tester.assertEqual(loads(dumps(self)), self)\n        File \"/usr/lib/python3.8/unittest/case.py\", line 912, in assertEqual\n          assertion_func(first, second, msg=msg)\n        File \"/usr/lib/python3.8/unittest/case.py\", line 905, in _baseAssertEqual\n          raise self.failureException(msg)\n      AssertionError: Generic morphism:\n        From: X\n        To:   Y != Generic morphism:\n        From: X\n        To:   Y\n      ------------------------------------------------------------\n      The following tests failed: _test_pickling\n    Failure in _test_elements\n    The following tests failed: _test_elements\n```",
    "created_at": "2020-07-28T22:22:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430607",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:5" align="right">comment:5</div>

Just a handful of issues left, mostly pickling related

```
**********************************************************************
File "/usr/lib/python3.8/site-packages/sage/matroids/linear_matroid.pyx", line 3674, in sage.matroids.linear_matroid.BinaryMatroid._projection_partition
Failed example:
    N._projection_partition()
Expected:
    2 x 12 BinaryMatrix
    [110011001100]
    [001100110011]
Got:
    2 x 12 BinaryMatrix
    [001100110011]
    [110011001100]
**********************************************************************
File "/usr/lib/python3.8/site-packages/sage/structure/sequence.py", line 824, in sage.structure.sequence.Sequence_generic.__copy__
Failed example:
    t.is_immutable == s.is_immutable
Expected:
    True
Got:
    False
**********************************************************************
File "/usr/lib/python3.8/site-packages/sage/structure/sequence.py", line 826, in sage.structure.sequence.Sequence_generic.__copy__
Failed example:
    t.is_mutable == s.is_mutable
Expected:
    True
Got:
    False
**********************************************************************
File "/usr/lib/python3.8/site-packages/sage/combinat/posets/hasse_diagram.py", line 2185, in sage.combinat.posets.hasse_diagram.HasseDiagram.antichains
Failed example:
    TestSuite(A).run()
Expected nothing
Got:
    Failure in _test_pickling:
    Traceback (most recent call last):
      File "/usr/lib/python3.8/site-packages/sage/misc/sage_unittest.py", line 296, in run
        test_method(tester=tester)
      File "sage/structure/sage_object.pyx", line 639, in sage.structure.sage_object.SageObject._test_pickling (build/cythonized/sage/structure/sage_object.c:4953)
        tester.assertEqual(loads(dumps(self)), self)
      File "/usr/lib/python3.8/unittest/case.py", line 912, in assertEqual
        assertion_func(first, second, msg=msg)
      File "/usr/lib/python3.8/unittest/case.py", line 905, in _baseAssertEqual
        raise self.failureException(msg)
    AssertionError: An enumerated set with a forest structure != An enumerated set with a forest structure
    ------------------------------------------------------------
    The following tests failed: _test_pickling
**********************************************************************
File "/usr/lib/python3.8/site-packages/sage/combinat/posets/hasse_diagram.py", line 2190, in sage.combinat.posets.hasse_diagram.HasseDiagram.antichains
Failed example:
    TestSuite(A).run()
Expected nothing
Got:
    Failure in _test_pickling:
    Traceback (most recent call last):
      File "/usr/lib/python3.8/site-packages/sage/misc/sage_unittest.py", line 296, in run
        test_method(tester=tester)
      File "sage/structure/sage_object.pyx", line 639, in sage.structure.sage_object.SageObject._test_pickling (build/cythonized/sage/structure/sage_object.c:4953)
        tester.assertEqual(loads(dumps(self)), self)
      File "/usr/lib/python3.8/unittest/case.py", line 912, in assertEqual
        assertion_func(first, second, msg=msg)
      File "/usr/lib/python3.8/unittest/case.py", line 905, in _baseAssertEqual
        raise self.failureException(msg)
    AssertionError: An enumerated set with a forest structure != An enumerated set with a forest structure
    ------------------------------------------------------------
    The following tests failed: _test_pickling
**********************************************************************
File "/usr/lib/python3.8/site-packages/sage/combinat/cluster_algebra_quiver/quiver_mutation_type.py", line 2171, in sage.combinat.cluster_algebra_quiver.quiver_mutation_type._construct_exceptional_mutation_classes
Failed example:
    for mut_class in sorted(rank_3_exceptional.keys(), key=str): # long time
      print("{} {}".format(mut_class, rank_3_exceptional[mut_class]))
Expected:
    ('G', 2, -1) [('BH?', (((1, 2), (1, -3)),)),
    ('BGO', (((2, 1), (3, -1)),)), ('BW?', (((0, 1), (3, -1)),)),
    ('BP?', (((0, 1), (1, -3)),)),
    ('BP_', (((0, 1), (1, -3)), ((2, 0), (3, -1)))),
    ('BP_', (((0, 1), (3, -1)), ((1, 2), (1, -3)), ((2, 0), (2, -2))))]
    ('G', 2, 1) [('BH?', (((1, 2), (3, -1)),)),
    ('BGO', (((2, 1), (1, -3)),)), ('BW?', (((0, 1), (1, -3)),)),
    ('BP?', (((0, 1), (3, -1)),)),
    ('BKO', (((1, 0), (3, -1)), ((2, 1), (1, -3)))),
    ('BP_', (((0, 1), (2, -2)), ((1, 2), (1, -3)), ((2, 0), (3, -1))))]
Got:
    ('G', 2, -1) [('BH?', (((1, 2), (1, -3)),)), ('BGO', (((2, 1), (3, -1)),)), ('BW?', (((0, 1), (3, -1)),)), ('BP?', (((0, 1), (1, -3)),)), ('BP_', (((0, 1), (1, -3)), ((2, 0), (3, -1)))), ('BP_', (((0, 1), (1, -3)), ((1, 2), (2, -2)), ((2, 0), (3, -1))))]
    ('G', 2, 1) [('BH?', (((1, 2), (3, -1)),)), ('BGO', (((2, 1), (1, -3)),)), ('BW?', (((0, 1), (1, -3)),)), ('BP?', (((0, 1), (3, -1)),)), ('BKO', (((1, 0), (3, -1)), ((2, 1), (1, -3)))), ('BP_', (((0, 1), (3, -1)), ((1, 2), (2, -2)), ((2, 0), (1, -3)))), ('BP_', (((0, 1), (2, -2)), ((1, 2), (1, -3)), ((2, 0), (3, -1))))]
**********************************************************************
File "/usr/lib/python3.8/site-packages/sage/combinat/cluster_algebra_quiver/mutation_type.py", line 1348, in sage.combinat.cluster_algebra_quiver.mutation_type._mutation_type_test
Failed example:
    _mutation_type_test(3) # long time
Expected:
    True ('A', (2, 1), 1)
    True ('A', 3)
    True ('B', 3)
    True ('BB', 2, 1)
    True ('BC', 2, 1)
    True ('C', 3)
    True ('CC', 2, 1)
    True ('G', 2, -1)
    True ('G', 2, 1)
Got:
    True ('A', (2, 1), 1)
    True ('A', 3)
    True ('B', 3)
    True ('BB', 2, 1)
    True ('BC', 2, 1)
    True ('C', 3)
    True ('CC', 2, 1)
    False ('G', 2, -1)
    False ('G', 2, 1)
**********************************************************************
File "/usr/lib/python3.8/site-packages/sage/schemes/riemann_surfaces/riemann_surface.py", line 355, in sage.schemes.riemann_surfaces.riemann_surface.RiemannSurface
Failed example:
    S.riemann_matrix() #abs tol 0.00000001
Expected:
    [0.500000000000000000000000... + 0.866025403784438646763723...*I]
Got:
    [-0.50000000000000000000000000000 + 0.86602540378443864676372317075*I]
Tolerance exceeded in 1 of 2:
    0.500000000000000000000000 vs -0.50000000000000000000000000000, tolerance 1e0 > 1e-8
**********************************************************************
File "/usr/lib/python3.8/site-packages/sage/homology/simplicial_complex_morphism.py", line 82, in sage.homology.simplicial_complex_morphism
Failed example:
    z                                     # this is the mapping path space
Expected:
    Simplicial complex morphism:
      From: Simplicial complex with 6 vertices and 4 facets
      To:   Minimal triangulation of the 2-sphere
      Defn: ['L0R(0, 0)', 'L0R(0, 1)', 'L1R(1, 0)', 'L1R(1, 1)', 'L2R(2, 0)', 'L2R(2, 1)'] --> [0, 0, 1, 1, 2, 2]
Got:
    Simplicial complex morphism:
      From: Simplicial complex with 6 vertices and 5 facets
      To:   Minimal triangulation of the 2-sphere
      Defn: ['L0R(0, 0)', 'L0R(0, 1)', 'L1R(1, 0)', 'L1R(1, 1)', 'L2R(2, 0)', 'L2R(2, 1)'] --> [0, 0, 1, 1, 2, 2]
**********************************************************************
File "/usr/lib/python3.8/site-packages/sage/categories/homset.py", line 598, in sage.categories.homset.Homset.__init__
Failed example:
    TestSuite(H).run()
Expected nothing
Got:
      Failure in _test_pickling:
      Traceback (most recent call last):
        File "/usr/lib/python3.8/site-packages/sage/misc/sage_unittest.py", line 296, in run
          test_method(tester=tester)
        File "sage/structure/sage_object.pyx", line 639, in sage.structure.sage_object.SageObject._test_pickling (build/cythonized/sage/structure/sage_object.c:4953)
          tester.assertEqual(loads(dumps(self)), self)
        File "/usr/lib/python3.8/unittest/case.py", line 912, in assertEqual
          assertion_func(first, second, msg=msg)
        File "/usr/lib/python3.8/unittest/case.py", line 905, in _baseAssertEqual
          raise self.failureException(msg)
      AssertionError: Generic morphism:
        From: X
        To:   Y != Generic morphism:
        From: X
        To:   Y
      ------------------------------------------------------------
      The following tests failed: _test_pickling
    Failure in _test_elements
    The following tests failed: _test_elements
**********************************************************************
File "/usr/lib/python3.8/site-packages/sage/categories/homset.py", line 607, in sage.categories.homset.Homset.__init__
Failed example:
    TestSuite(H).run()
Expected nothing
Got:
      Failure in _test_pickling:
      Traceback (most recent call last):
        File "/usr/lib/python3.8/site-packages/sage/misc/sage_unittest.py", line 296, in run
          test_method(tester=tester)
        File "sage/structure/sage_object.pyx", line 639, in sage.structure.sage_object.SageObject._test_pickling (build/cythonized/sage/structure/sage_object.c:4953)
          tester.assertEqual(loads(dumps(self)), self)
        File "/usr/lib/python3.8/unittest/case.py", line 912, in assertEqual
          assertion_func(first, second, msg=msg)
        File "/usr/lib/python3.8/unittest/case.py", line 905, in _baseAssertEqual
          raise self.failureException(msg)
      AssertionError: Generic morphism:
        From: X
        To:   Y != Generic morphism:
        From: X
        To:   Y
      ------------------------------------------------------------
      The following tests failed: _test_pickling
    Failure in _test_elements
    The following tests failed: _test_elements
**********************************************************************
File "/usr/lib/python3.8/site-packages/sage/categories/homset.py", line 1253, in sage.categories.homset.HomsetWithBase.__init__
Failed example:
    TestSuite(H).run()
Expected nothing
Got:
      Failure in _test_pickling:
      Traceback (most recent call last):
        File "/usr/lib/python3.8/site-packages/sage/misc/sage_unittest.py", line 296, in run
          test_method(tester=tester)
        File "sage/structure/sage_object.pyx", line 639, in sage.structure.sage_object.SageObject._test_pickling (build/cythonized/sage/structure/sage_object.c:4953)
          tester.assertEqual(loads(dumps(self)), self)
        File "/usr/lib/python3.8/unittest/case.py", line 912, in assertEqual
          assertion_func(first, second, msg=msg)
        File "/usr/lib/python3.8/unittest/case.py", line 905, in _baseAssertEqual
          raise self.failureException(msg)
      AssertionError: Generic morphism:
        From: X
        To:   Y != Generic morphism:
        From: X
        To:   Y
      ------------------------------------------------------------
      The following tests failed: _test_pickling
    Failure in _test_elements
    The following tests failed: _test_elements
```



---

archive/issue_comments_430608.json:
```json
{
    "body": "Changed commit from **[`73d6c7f`](https://github.com/sagemath/sagetrac-mirror/commit/73d6c7f47c6a203da2cca58f56e68df6fc3e6852)** to **[`ce0f0e0`](https://github.com/sagemath/sagetrac-mirror/commit/ce0f0e0404b23485c7c8b2e38e4c8a36eb1354e1)**",
    "created_at": "2020-07-30T17:36:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430608",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`73d6c7f`](https://github.com/sagemath/sagetrac-mirror/commit/73d6c7f47c6a203da2cca58f56e68df6fc3e6852)** to **[`ce0f0e0`](https://github.com/sagemath/sagetrac-mirror/commit/ce0f0e0404b23485c7c8b2e38e4c8a36eb1354e1)**



---

archive/issue_comments_430609.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/687d070be57eb67745e4626918dcf48bc4b34436\"><code>687d070</code></a></td><td><code>Make vertices tuple of a simplicial complex deterministic</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/46114aa0aaa9cb69f10713bbc8477652b6fd2caa\"><code>46114aa</code></a></td><td><code>Make test in matroids/linear_matroid.pyx pass regardless of the matrix row order</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/723b48f1e46edcf0b8014802fb44819366ebb46d\"><code>723b48f</code></a></td><td><code>Make _graph_without_edge_labels deterministic</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ce0f0e0404b23485c7c8b2e38e4c8a36eb1354e1\"><code>ce0f0e0</code></a></td><td><code>Make riemann_matrix test more robust</code></td></tr></table>\n",
    "created_at": "2020-07-30T17:36:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430609",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/687d070be57eb67745e4626918dcf48bc4b34436"><code>687d070</code></a></td><td><code>Make vertices tuple of a simplicial complex deterministic</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/46114aa0aaa9cb69f10713bbc8477652b6fd2caa"><code>46114aa</code></a></td><td><code>Make test in matroids/linear_matroid.pyx pass regardless of the matrix row order</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/723b48f1e46edcf0b8014802fb44819366ebb46d"><code>723b48f</code></a></td><td><code>Make _graph_without_edge_labels deterministic</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ce0f0e0404b23485c7c8b2e38e4c8a36eb1354e1"><code>ce0f0e0</code></a></td><td><code>Make riemann_matrix test more robust</code></td></tr></table>




---

archive/issue_comments_430610.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThe remaining issues are caused by this commit https://github.com/python/cpython/commit/ac20e0f98d6727ba97a9575bfa2a11b2f6247c35\n\nIn particular, if `B=loads(dumps(A))`, then `A.method` and `B.method` have different hashes, so `A.method==B.method` is always false.",
    "created_at": "2020-07-30T19:40:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430610",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:7" align="right">comment:7</div>

The remaining issues are caused by this commit https://github.com/python/cpython/commit/ac20e0f98d6727ba97a9575bfa2a11b2f6247c35

In particular, if `B=loads(dumps(A))`, then `A.method` and `B.method` have different hashes, so `A.method==B.method` is always false.



---

archive/issue_comments_430611.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nNote that the issue of sorting vertices in simplicial complexes was discussed at length in #26966. I may propose a different solution to this problem, but give me a few days.",
    "created_at": "2020-07-30T20:17:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430611",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:8" align="right">comment:8</div>

Note that the issue of sorting vertices in simplicial complexes was discussed at length in #26966. I may propose a different solution to this problem, but give me a few days.



---

archive/issue_comments_430612.json:
```json
{
    "body": "Changed commit from **[`ce0f0e0`](https://github.com/sagemath/sagetrac-mirror/commit/ce0f0e0404b23485c7c8b2e38e4c8a36eb1354e1)** to **[`5a98f90`](https://github.com/sagemath/sagetrac-mirror/commit/5a98f9094bf29c5ddb7098ea21ca7076ab6d1a7d)**",
    "created_at": "2020-07-30T22:52:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430612",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ce0f0e0`](https://github.com/sagemath/sagetrac-mirror/commit/ce0f0e0404b23485c7c8b2e38e4c8a36eb1354e1)** to **[`5a98f90`](https://github.com/sagemath/sagetrac-mirror/commit/5a98f9094bf29c5ddb7098ea21ca7076ab6d1a7d)**



---

archive/issue_comments_430613.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a4d76600a11aa1dc3785b6c03d588ef21084d07f\"><code>a4d7660</code></a></td><td><code>Call methods before comparing</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f8768cf150ca43ad3ff2d6706cef0c8adf87ae4f\"><code>f8768cf</code></a></td><td><code>Compare the string representations of predicated instead of the predicates themselves</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8369b6090cdf2fc9ff9dd6ee55887cb41f8856d9\"><code>8369b60</code></a></td><td><code>Fix tests in categories/homset.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5a98f9094bf29c5ddb7098ea21ca7076ab6d1a7d\"><code>5a98f90</code></a></td><td><code>Remove duplicate tests</code></td></tr></table>\n",
    "created_at": "2020-07-30T22:52:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430613",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a4d76600a11aa1dc3785b6c03d588ef21084d07f"><code>a4d7660</code></a></td><td><code>Call methods before comparing</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f8768cf150ca43ad3ff2d6706cef0c8adf87ae4f"><code>f8768cf</code></a></td><td><code>Compare the string representations of predicated instead of the predicates themselves</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8369b6090cdf2fc9ff9dd6ee55887cb41f8856d9"><code>8369b60</code></a></td><td><code>Fix tests in categories/homset.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5a98f9094bf29c5ddb7098ea21ca7076ab6d1a7d"><code>5a98f90</code></a></td><td><code>Remove duplicate tests</code></td></tr></table>




---

archive/issue_comments_430614.json:
```json
{
    "body": "<div id=\"comment:150\" align=\"right\">comment:150</div>\n\nReplying to [@jhpalmieri](#comment:148):\n> Note that the issue of sorting vertices in simplicial complexes was discussed at length in #26966. I may propose a different solution to this problem, but give me a few days.\n\nOh, I see now that you proposed the same fix there but reverted it.",
    "created_at": "2020-07-30T23:02:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430614",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:150" align="right">comment:150</div>

Replying to [@jhpalmieri](#comment:148):
> Note that the issue of sorting vertices in simplicial complexes was discussed at length in #26966. I may propose a different solution to this problem, but give me a few days.

Oh, I see now that you proposed the same fix there but reverted it.



---

archive/issue_comments_430615.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nWith the current branch all tests are passing for me. There may be room for some improvements (besides the simplicial complex vertex ordering issue), but I hope there's still a chance that this can make it in 9.2. It would be quite unfortunate to not support python 3.8 one year after its release.",
    "created_at": "2020-07-30T23:04:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430615",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:1" align="right">comment:1</div>

With the current branch all tests are passing for me. There may be room for some improvements (besides the simplicial complex vertex ordering issue), but I hope there's still a chance that this can make it in 9.2. It would be quite unfortunate to not support python 3.8 one year after its release.



---

archive/issue_comments_430616.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI wrote a long post about simplicial complexes with various solutions, but now I realize there is a simpler solution.\n\nThere are a few problems here: first, if you want consistency when dealing with products of simplicial complexes, some sorting is needed: if you triangulate a square, for example, you have two choices for how to add the diagonal, and different sortings will result in different choices. Second, Python 3.7 and 3.8 are handling some data differently from each other, and that's where the doctest failure in `simplicial_complex_morphism.py` is coming from: different sortings yielding different triangulations of a product. Third, I think that this really means that the doctest in `simplicial_complex_morphishm.py` is a bad one, because it is essentially relying on how intrinsically unsorted data is converted to an ordered object (a tuple). I tried putting in various ways of sorting, and I got at least three different results, all of which are mathematically valid, and I don't see any reason to force one sorting option over another.\n\nAs a result, we should make this change: get rid of the new sorting in `simplicial_complex.py` and make the doctest more robust:\n\n```diff\ndiff --git a/src/sage/homology/simplicial_complex.py b/src/sage/homology/simplicial_complex.py\nindex 8ee9a4f84c..1c9dd8da8e 100644\n--- a/src/sage/homology/simplicial_complex.py\n+++ b/src/sage/homology/simplicial_complex.py\n@@ -1045,10 +1045,7 @@ class SimplicialComplex(Parent, GenericCellComplex):\n         else:\n             vertex_set = range(n + 1)\n \n-        try:               # use natural order if vertices are integers\n-            vertices = tuple(sorted(vertex_set))\n-        except TypeError:  # incomparable vertices\n-            vertices = tuple(sorted(vertex_set, key=str))\n+        vertices = tuple(vertex_set)\n \n         gen_dict = {}\n         for v in vertices:\ndiff --git a/src/sage/homology/simplicial_complex_morphism.py b/src/sage/homology/simplicial_complex_morphism.py\nindex d954dd90b4..8db933b9fe 100644\n--- a/src/sage/homology/simplicial_complex_morphism.py\n+++ b/src/sage/homology/simplicial_complex_morphism.py\n@@ -81,7 +81,7 @@ EXAMPLES::\n     sage: z = y.fiber_product(x)\n     sage: z                                     # this is the mapping path space\n     Simplicial complex morphism:\n-      From: Simplicial complex with 6 vertices and 6 facets\n+      From: Simplicial complex with 6 vertices and ... facets\n       To:   Minimal triangulation of the 2-sphere\n       Defn: ['L0R(0, 0)', 'L0R(0, 1)', 'L1R(1, 0)', 'L1R(1, 1)', 'L2R(2, 0)', 'L2R(2, 1)'] --> [0, 0, 1, 1, 2, 2]\n \"\"\"\n```\nBy the way, see [#26966 comment:25](https://github.com/sagemath/sage/issues/26966#comment:25) for the an example of the evils of sorting using `key=str`.",
    "created_at": "2020-07-31T18:11:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430616",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:2" align="right">comment:2</div>

I wrote a long post about simplicial complexes with various solutions, but now I realize there is a simpler solution.

There are a few problems here: first, if you want consistency when dealing with products of simplicial complexes, some sorting is needed: if you triangulate a square, for example, you have two choices for how to add the diagonal, and different sortings will result in different choices. Second, Python 3.7 and 3.8 are handling some data differently from each other, and that's where the doctest failure in `simplicial_complex_morphism.py` is coming from: different sortings yielding different triangulations of a product. Third, I think that this really means that the doctest in `simplicial_complex_morphishm.py` is a bad one, because it is essentially relying on how intrinsically unsorted data is converted to an ordered object (a tuple). I tried putting in various ways of sorting, and I got at least three different results, all of which are mathematically valid, and I don't see any reason to force one sorting option over another.

As a result, we should make this change: get rid of the new sorting in `simplicial_complex.py` and make the doctest more robust:

```diff
diff --git a/src/sage/homology/simplicial_complex.py b/src/sage/homology/simplicial_complex.py
index 8ee9a4f84c..1c9dd8da8e 100644
--- a/src/sage/homology/simplicial_complex.py
+++ b/src/sage/homology/simplicial_complex.py
@@ -1045,10 +1045,7 @@ class SimplicialComplex(Parent, GenericCellComplex):
         else:
             vertex_set = range(n + 1)
 
-        try:               # use natural order if vertices are integers
-            vertices = tuple(sorted(vertex_set))
-        except TypeError:  # incomparable vertices
-            vertices = tuple(sorted(vertex_set, key=str))
+        vertices = tuple(vertex_set)
 
         gen_dict = {}
         for v in vertices:
diff --git a/src/sage/homology/simplicial_complex_morphism.py b/src/sage/homology/simplicial_complex_morphism.py
index d954dd90b4..8db933b9fe 100644
--- a/src/sage/homology/simplicial_complex_morphism.py
+++ b/src/sage/homology/simplicial_complex_morphism.py
@@ -81,7 +81,7 @@ EXAMPLES::
     sage: z = y.fiber_product(x)
     sage: z                                     # this is the mapping path space
     Simplicial complex morphism:
-      From: Simplicial complex with 6 vertices and 6 facets
+      From: Simplicial complex with 6 vertices and ... facets
       To:   Minimal triangulation of the 2-sphere
       Defn: ['L0R(0, 0)', 'L0R(0, 1)', 'L1R(1, 0)', 'L1R(1, 1)', 'L2R(2, 0)', 'L2R(2, 1)'] --> [0, 0, 1, 1, 2, 2]
 """
```
By the way, see [#26966 comment:25](https://github.com/sagemath/sage/issues/26966#comment:25) for the an example of the evils of sorting using `key=str`.



---

archive/issue_comments_430617.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/196a30ad097999a707b71140abc6afd5265c652f\"><code>196a30a</code></a></td><td><code>trac 27754: make doctest in simplicial_complex_morphism.py more robust</code></td></tr></table>\n",
    "created_at": "2020-07-31T18:14:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430617",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/196a30ad097999a707b71140abc6afd5265c652f"><code>196a30a</code></a></td><td><code>trac 27754: make doctest in simplicial_complex_morphism.py more robust</code></td></tr></table>




---

archive/issue_comments_430618.json:
```json
{
    "body": "Changed commit from **[`5a98f90`](https://github.com/sagemath/sagetrac-mirror/commit/5a98f9094bf29c5ddb7098ea21ca7076ab6d1a7d)** to **[`196a30a`](https://github.com/sagemath/sagetrac-mirror/commit/196a30ad097999a707b71140abc6afd5265c652f)**",
    "created_at": "2020-07-31T18:14:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430618",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5a98f90`](https://github.com/sagemath/sagetrac-mirror/commit/5a98f9094bf29c5ddb7098ea21ca7076ab6d1a7d)** to **[`196a30a`](https://github.com/sagemath/sagetrac-mirror/commit/196a30ad097999a707b71140abc6afd5265c652f)**



---

archive/issue_comments_430619.json:
```json
{
    "body": "Changed commit from **[`196a30a`](https://github.com/sagemath/sagetrac-mirror/commit/196a30ad097999a707b71140abc6afd5265c652f)** to **[`35cf0e1`](https://github.com/sagemath/sagetrac-mirror/commit/35cf0e197e4142b4849d09398a31063b5537eec9)**",
    "created_at": "2020-08-01T12:40:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430619",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`196a30a`](https://github.com/sagemath/sagetrac-mirror/commit/196a30ad097999a707b71140abc6afd5265c652f)** to **[`35cf0e1`](https://github.com/sagemath/sagetrac-mirror/commit/35cf0e197e4142b4849d09398a31063b5537eec9)**



---

archive/issue_comments_430620.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/35cf0e197e4142b4849d09398a31063b5537eec9\"><code>35cf0e1</code></a></td><td><code>Allow system python 3.8</code></td></tr></table>\n",
    "created_at": "2020-08-01T12:40:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430620",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/35cf0e197e4142b4849d09398a31063b5537eec9"><code>35cf0e1</code></a></td><td><code>Allow system python 3.8</code></td></tr></table>




---

archive/issue_comments_430621.json:
```json
{
    "body": "Changed commit from **[`35cf0e1`](https://github.com/sagemath/sagetrac-mirror/commit/35cf0e197e4142b4849d09398a31063b5537eec9)** to **[`f939f28`](https://github.com/sagemath/sagetrac-mirror/commit/f939f28b40da12dfc5b31f531dac380f5ef20343)**",
    "created_at": "2020-08-02T19:27:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430621",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`35cf0e1`](https://github.com/sagemath/sagetrac-mirror/commit/35cf0e197e4142b4849d09398a31063b5537eec9)** to **[`f939f28`](https://github.com/sagemath/sagetrac-mirror/commit/f939f28b40da12dfc5b31f531dac380f5ef20343)**



---

archive/issue_comments_430622.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/10d46f49c3520ed5f9b78efb9215add71048764d\"><code>10d46f4</code></a></td><td><code>Merge branch 'develop' of git://git.sagemath.org/sage into t/27754/public/python3.8</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f939f28b40da12dfc5b31f531dac380f5ef20343\"><code>f939f28</code></a></td><td><code>Fix one more SyntaxWarning: 'is' with a literal. Did you mean '=='?, not caught by doctests</code></td></tr></table>\n",
    "created_at": "2020-08-02T19:27:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430622",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/10d46f49c3520ed5f9b78efb9215add71048764d"><code>10d46f4</code></a></td><td><code>Merge branch 'develop' of git://git.sagemath.org/sage into t/27754/public/python3.8</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f939f28b40da12dfc5b31f531dac380f5ef20343"><code>f939f28</code></a></td><td><code>Fix one more SyntaxWarning: 'is' with a literal. Did you mean '=='?, not caught by doctests</code></td></tr></table>




---

archive/issue_comments_430623.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nSetting to needs review for wider testing. Needs testing especially with system python<3.8, also with optional packages",
    "created_at": "2020-08-02T19:31:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430623",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:6" align="right">comment:6</div>

Setting to needs review for wider testing. Needs testing especially with system python<3.8, also with optional packages



---

archive/issue_events_380743.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2020-08-02T19:31:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380743"
}
```



---

archive/issue_comments_430624.json:
```json
{
    "body": "Changed commit from **[`f939f28`](https://github.com/sagemath/sagetrac-mirror/commit/f939f28b40da12dfc5b31f531dac380f5ef20343)** to **[`c6002e8`](https://github.com/sagemath/sagetrac-mirror/commit/c6002e8181f8b4bf2b9a4f2262a60aa354c16e4f)**",
    "created_at": "2020-08-03T10:12:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430624",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f939f28`](https://github.com/sagemath/sagetrac-mirror/commit/f939f28b40da12dfc5b31f531dac380f5ef20343)** to **[`c6002e8`](https://github.com/sagemath/sagetrac-mirror/commit/c6002e8181f8b4bf2b9a4f2262a60aa354c16e4f)**



---

archive/issue_comments_430625.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c4769bf150479ce66baac5f0f4d2a76aa7fa0a65\"><code>c4769bf</code></a></td><td><code>Add pynac patch to fix deprecation warnings on unpickling with Python 3.8</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ecc6f4591e6bebd8ce9b7505df6186aeacb6812c\"><code>ecc6f45</code></a></td><td><code>Add patch</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c6002e8181f8b4bf2b9a4f2262a60aa354c16e4f\"><code>c6002e8</code></a></td><td><code>Merge branch 'u/arojas/fix_deprecation_warnings_when_unpickling_pynac_objects_with_python_3_8' of git://trac.sagemath.org/sage into t/27754/public/python3.8</code></td></tr></table>\n",
    "created_at": "2020-08-03T10:12:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430625",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c4769bf150479ce66baac5f0f4d2a76aa7fa0a65"><code>c4769bf</code></a></td><td><code>Add pynac patch to fix deprecation warnings on unpickling with Python 3.8</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ecc6f4591e6bebd8ce9b7505df6186aeacb6812c"><code>ecc6f45</code></a></td><td><code>Add patch</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c6002e8181f8b4bf2b9a4f2262a60aa354c16e4f"><code>c6002e8</code></a></td><td><code>Merge branch 'u/arojas/fix_deprecation_warnings_when_unpickling_pynac_objects_with_python_3_8' of git://trac.sagemath.org/sage into t/27754/public/python3.8</code></td></tr></table>




---

archive/issue_comments_430626.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nTests run at https://github.com/mkoeppe/sage/actions/runs/193151775",
    "created_at": "2020-08-03T10:13:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430626",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">comment:8</div>

Tests run at https://github.com/mkoeppe/sage/actions/runs/193151775



---

archive/issue_comments_430627.json:
```json
{
    "body": "Changed commit from **[`c6002e8`](https://github.com/sagemath/sagetrac-mirror/commit/c6002e8181f8b4bf2b9a4f2262a60aa354c16e4f)** to **[`57c2d1c`](https://github.com/sagemath/sagetrac-mirror/commit/57c2d1c89515fe0716d04159bcdbe3fc398e1180)**",
    "created_at": "2020-08-04T17:32:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430627",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c6002e8`](https://github.com/sagemath/sagetrac-mirror/commit/c6002e8181f8b4bf2b9a4f2262a60aa354c16e4f)** to **[`57c2d1c`](https://github.com/sagemath/sagetrac-mirror/commit/57c2d1c89515fe0716d04159bcdbe3fc398e1180)**



---

archive/issue_comments_430628.json:
```json
{
    "body": "<div id=\"comment:0\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/57c2d1c89515fe0716d04159bcdbe3fc398e1180\"><code>57c2d1c</code></a></td><td><code>tox.ini, .github/workflows/tox.yml: Add gentoo-python3.7</code></td></tr></table>\n",
    "created_at": "2020-08-04T17:32:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430628",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:0"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/57c2d1c89515fe0716d04159bcdbe3fc398e1180"><code>57c2d1c</code></a></td><td><code>tox.ini, .github/workflows/tox.yml: Add gentoo-python3.7</code></td></tr></table>




---

archive/issue_comments_430629.json:
```json
{
    "body": "<div id=\"comment:161\" align=\"right\">comment:161</div>\n\nReplying to [@mkoeppe](#comment:158):\n> Tests run at https://github.com/mkoeppe/sage/actions/runs/193151775\n\nWhat's the outcome of this? I see many failed jobs but I can't see any logs.",
    "created_at": "2020-08-07T09:20:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430629",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:161" align="right">comment:161</div>

Replying to [@mkoeppe](#comment:158):
> Tests run at https://github.com/mkoeppe/sage/actions/runs/193151775

What's the outcome of this? I see many failed jobs but I can't see any logs.



---

archive/issue_comments_430630.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nLooks like GH Action was having trouble. I have started another run at https://github.com/mkoeppe/sage/actions/runs/199465086",
    "created_at": "2020-08-07T17:00:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430630",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2" align="right">comment:2</div>

Looks like GH Action was having trouble. I have started another run at https://github.com/mkoeppe/sage/actions/runs/199465086



---

archive/issue_comments_430631.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nClean on `ubuntu-trusty-standard` (with python3 from SPKG, https://github.com/mkoeppe/sage/runs/962936559), except for\n\n```\nsage -t --random-seed=0 src/sage/doctest/test.py  # Timed out\n```\n\nClean on `centos-7-standard` (with python3 from SPKG, https://github.com/mkoeppe/sage/runs/962936782), except for\n\n```\nsage -t --random-seed=0 src/sage/interfaces/sagespawn.pyx\nFile \"src/sage/interfaces/sagespawn.pyx\", line 96, in sage.interfaces.sagespawn.SageSpawn.__repr__\nFailed example:\n    while s.isalive():  # Wait until the process finishes\n        sleep(0.1)\nExpected nothing\nGot:\n    doctest:warning\n    DeprecationWarning: an integer is required (got type sage.rings.real_mpfr.RealLiteral).  Implicit conversion to integers using __int__ is deprecated, and may be removed in a future version of Python.\n```\n\nClean on `gentoo-standard` (using `/usr/bin/python3.8`, https://github.com/mkoeppe/sage/runs/962936791) except for:\n\n```\nsage -t --random-seed=0 src/sage/schemes/elliptic_curves/ell_modular_symbols.py  # Timed out\n```\nClean on `gentoo-standard-python3.7` (using `/usr/bin/python3.7`) except for:\n\n```\nsage -t --random-seed=0 src/sage/categories/finite_enumerated_sets.py\nFile \"src/sage/categories/finite_enumerated_sets.py\", line 290, in sage.categories.finite_enumerated_sets.FiniteEnumeratedSets.ParentMethods._list_from_iterator\nFailed example:\n    list(C)\nExpected:\n    hello!\n    hello!\n    ...\n    [1, 2, 3]\nGot:\n    hello!\n    hello!\n    [1, 2, 3]\n```\n\nLots of doctest failures because of `LC_ALL: cannot change locale` messages (#30053) on `linuxmint-17-minimal` (https://github.com/mkoeppe/sage/runs/962936711) and `-standard`\n\nUnfortunately most builds failed again because of unrelated technical problems on GH Actions",
    "created_at": "2020-08-10T02:08:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430631",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:3" align="right">comment:3</div>

Clean on `ubuntu-trusty-standard` (with python3 from SPKG, https://github.com/mkoeppe/sage/runs/962936559), except for

```
sage -t --random-seed=0 src/sage/doctest/test.py  # Timed out
```

Clean on `centos-7-standard` (with python3 from SPKG, https://github.com/mkoeppe/sage/runs/962936782), except for

```
sage -t --random-seed=0 src/sage/interfaces/sagespawn.pyx
File "src/sage/interfaces/sagespawn.pyx", line 96, in sage.interfaces.sagespawn.SageSpawn.__repr__
Failed example:
    while s.isalive():  # Wait until the process finishes
        sleep(0.1)
Expected nothing
Got:
    doctest:warning
    DeprecationWarning: an integer is required (got type sage.rings.real_mpfr.RealLiteral).  Implicit conversion to integers using __int__ is deprecated, and may be removed in a future version of Python.
```

Clean on `gentoo-standard` (using `/usr/bin/python3.8`, https://github.com/mkoeppe/sage/runs/962936791) except for:

```
sage -t --random-seed=0 src/sage/schemes/elliptic_curves/ell_modular_symbols.py  # Timed out
```
Clean on `gentoo-standard-python3.7` (using `/usr/bin/python3.7`) except for:

```
sage -t --random-seed=0 src/sage/categories/finite_enumerated_sets.py
File "src/sage/categories/finite_enumerated_sets.py", line 290, in sage.categories.finite_enumerated_sets.FiniteEnumeratedSets.ParentMethods._list_from_iterator
Failed example:
    list(C)
Expected:
    hello!
    hello!
    ...
    [1, 2, 3]
Got:
    hello!
    hello!
    [1, 2, 3]
```

Lots of doctest failures because of `LC_ALL: cannot change locale` messages (#30053) on `linuxmint-17-minimal` (https://github.com/mkoeppe/sage/runs/962936711) and `-standard`

Unfortunately most builds failed again because of unrelated technical problems on GH Actions



---

archive/issue_comments_430632.json:
```json
{
    "body": "Reviewer: **https://github.com/mkoeppe/sage/actions/runs/199465086, https://github.com/mkoeppe/sage/runs/959545895**",
    "created_at": "2020-08-10T02:21:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430632",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **https://github.com/mkoeppe/sage/actions/runs/199465086, https://github.com/mkoeppe/sage/runs/959545895**



---

archive/issue_comments_430633.json:
```json
{
    "body": "Changed reviewer from **https://github.com/mkoeppe/sage/actions/runs/199465086, https://github.com/mkoeppe/sage/runs/959545895** to **https://github.com/mkoeppe/sage/actions/runs/199465086, https://github.com/mkoeppe/sage/actions/runs/199465096**",
    "created_at": "2020-08-10T02:22:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430633",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **https://github.com/mkoeppe/sage/actions/runs/199465086, https://github.com/mkoeppe/sage/runs/959545895** to **https://github.com/mkoeppe/sage/actions/runs/199465086, https://github.com/mkoeppe/sage/actions/runs/199465096**



---

archive/issue_comments_430634.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a5f870b44974e9379f9a8080f4ee504275d540d3\"><code>a5f870b</code></a></td><td><code>Convert sleep() argument to float</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/625dc9dd07018c55b51251fb1aada7a4079611ad\"><code>625dc9d</code></a></td><td><code>Make test pass with python 3.7</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/389f1b2d7f5fe78ed232bbfb50d95ca5bee47d1e\"><code>389f1b2</code></a></td><td><code>Merge branch 'public/python3.8' of git://trac.sagemath.org/sage into t/27754/public/python3.8</code></td></tr></table>\n",
    "created_at": "2020-08-10T06:22:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430634",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a5f870b44974e9379f9a8080f4ee504275d540d3"><code>a5f870b</code></a></td><td><code>Convert sleep() argument to float</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/625dc9dd07018c55b51251fb1aada7a4079611ad"><code>625dc9d</code></a></td><td><code>Make test pass with python 3.7</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/389f1b2d7f5fe78ed232bbfb50d95ca5bee47d1e"><code>389f1b2</code></a></td><td><code>Merge branch 'public/python3.8' of git://trac.sagemath.org/sage into t/27754/public/python3.8</code></td></tr></table>




---

archive/issue_comments_430635.json:
```json
{
    "body": "Changed commit from **[`57c2d1c`](https://github.com/sagemath/sagetrac-mirror/commit/57c2d1c89515fe0716d04159bcdbe3fc398e1180)** to **[`389f1b2`](https://github.com/sagemath/sagetrac-mirror/commit/389f1b2d7f5fe78ed232bbfb50d95ca5bee47d1e)**",
    "created_at": "2020-08-10T06:22:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430635",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`57c2d1c`](https://github.com/sagemath/sagetrac-mirror/commit/57c2d1c89515fe0716d04159bcdbe3fc398e1180)** to **[`389f1b2`](https://github.com/sagemath/sagetrac-mirror/commit/389f1b2d7f5fe78ed232bbfb50d95ca5bee47d1e)**



---

archive/issue_comments_430636.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fa2ad16159d452089a235796291a13f49d8d0477\"><code>fa2ad16</code></a></td><td><code>Merge tag '9.2.beta8' into t/27754/public/python3.8</code></td></tr></table>\n",
    "created_at": "2020-08-12T22:55:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430636",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fa2ad16159d452089a235796291a13f49d8d0477"><code>fa2ad16</code></a></td><td><code>Merge tag '9.2.beta8' into t/27754/public/python3.8</code></td></tr></table>




---

archive/issue_comments_430637.json:
```json
{
    "body": "Changed commit from **[`389f1b2`](https://github.com/sagemath/sagetrac-mirror/commit/389f1b2d7f5fe78ed232bbfb50d95ca5bee47d1e)** to **[`fa2ad16`](https://github.com/sagemath/sagetrac-mirror/commit/fa2ad16159d452089a235796291a13f49d8d0477)**",
    "created_at": "2020-08-12T22:55:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430637",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`389f1b2`](https://github.com/sagemath/sagetrac-mirror/commit/389f1b2d7f5fe78ed232bbfb50d95ca5bee47d1e)** to **[`fa2ad16`](https://github.com/sagemath/sagetrac-mirror/commit/fa2ad16159d452089a235796291a13f49d8d0477)**



---

archive/issue_comments_430638.json:
```json
{
    "body": "Changed reviewer from **https://github.com/mkoeppe/sage/actions/runs/199465086, https://github.com/mkoeppe/sage/actions/runs/199465096** to **github.com/mkoeppe/sage/actions/runs/206442118**",
    "created_at": "2020-08-13T02:24:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430638",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **https://github.com/mkoeppe/sage/actions/runs/199465086, https://github.com/mkoeppe/sage/actions/runs/199465096** to **github.com/mkoeppe/sage/actions/runs/206442118**



---

archive/issue_comments_430639.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\n`debian-jessie-minimal`, `debian-stretch-standard`, `centos-7-standard` (with python3 from SPKG) clean\n\n`ubuntu-bionic-standard`, `debian-buster-standard`, `linuxmint-19.3-standard`, `fedora-30-standard`, `fedora-31-standard`, `gentoo-python3.7-standard` (with `/usr/bin/python3.7`) clean\n\n`gentoo-standard` (with `/usr/bin/python3.8`) clean\n\n`ubuntu-eoan-standard` (with `/usr/bin/python3.7`, https://github.com/mkoeppe/sage/runs/978617270) clean except for\n\n```\nsage -t --random-seed=0 src/sage/libs/eclib/interface.py  # 2 doctests failed\nsage -t --random-seed=0 src/sage/schemes/cyclic_covers/charpoly_frobenius.py  # 1 doctest failed\n```\n(seem unrelated to this ticket (mwrank; #28951?))\n\n`debian-bullseye-standard` (with `/usr/bin/python3.7`) clean except for doctest errors because of newer flint or arb from the system\n\n`linuxmint-17-standard` .... lots of doctest failures because of \"setlocale\" messages\n\n`fedora-27-standard` (with `/usr/bin/python3.6`):\n\n```\nsage -t --random-seed=0 src/sage/lfunctions/sympow.py  # 3 doctests failed\nsage -t --random-seed=0 src/sage/schemes/elliptic_curves/ell_rational_field.py  # 2 doctests failed\n```\n(seems unrelated)\n\n`fedora-29-standard` (with `/usr/bin/python3.7`): likewise\n\n`fedora-28-standard` (with `/usr/bin/python3.6`) additionally:\n\n```\nsage -t --random-seed=0 src/sage/rings/polynomial/groebner_fan.py  # 3 doctests failed\n```\n(seems unrelated)\n\n`conda-forge-standard` (with `/opt/conda/bin/python3.7`):\n\n```\nsage -t --random-seed=0 src/doc/en/constructions/algebraic_geometry.rst  # 1 doctest failed\nsage -t --random-seed=0 src/doc/en/developer/coding_in_other.rst  # 1 doctest failed\nsage -t --random-seed=0 src/sage/misc/cython.py  # 3 doctests failed\nsage -t --random-seed=0 src/sage/modules/fg_pid/fgp_module.py  # 3 doctests failed\nsage -t --random-seed=0 src/sage/modules/free_module_morphism.py  # 3 doctests failed\nsage -t --random-seed=0 src/sage/rings/complex_arb.pyx  # 6 doctests failed\nsage -t --random-seed=0 src/sage/parallel/map_reduce.py  # Timed out\nsage -t --random-seed=0 src/sage/rings/real_arb.pyx  # 2 doctests failed\nsage -t --random-seed=0 src/sage/schemes/hyperelliptic_curves/monsky_washnitzer.py  # Killed due to abort\n```\n\n`conda-forge-minimal` (https://github.com/mkoeppe/sage/runs/978620286): \n\n```\n  [python3-3.8.5]   ImportError: The required _crypt module was not built as part of CPython\n  [python3-3.8.5]   crypt module failed to import\n  [python3-3.8.5]   ModuleNotFoundError: No module named 'zlib'\n  [python3-3.8.5]   zlib module failed to import\n  [python3-3.8.5]   ModuleNotFoundError: No module named '_sqlite3'\n  [python3-3.8.5]   sqlite3 module failed to import\n  [python3-3.8.5]   Error: One or more modules failed to import.\n```\n(but we had similar errors also before the update, on this platform)\n\n\n`ubuntu-focal-standard` (https://github.com/mkoeppe/sage/runs/978617297)\n\n```\nhecking whether SageMath should install SPKG python3...\nchecking whether any of sqlite libpng bzip2 xz libffi is installed as or will be installed as SPKG... no\nchecking for python3 >= 3.6, < 3.9 with modules sqlite3, ctypes, math, hashlib, crypt, readline, socket, zlib, distutils.core... \nchecking ... whether /usr/bin/python3.8 is good... no, the version is in the supported range, and the modules can be imported, but distutils cannot build a C extension\nchecking ... whether /usr/bin/python3 is good... no, the version is in the supported range, and the modules can be imported, but distutils cannot build a C extension\nchecking ... whether /bin/python3.8 is good... no, the version is in the supported range, and the modules can be imported, but distutils cannot build a C extension\nchecking ... whether /bin/python3 is good... no, the version is in the supported range, and the modules can be imported, but distutils cannot build a C extension\n\nconfigure: no suitable system package found for SPKG python3\n```\nlikewise on `debian-sid-standard` (https://github.com/mkoeppe/sage/runs/978620025)",
    "created_at": "2020-08-13T22:40:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430639",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:9" align="right">comment:9</div>

`debian-jessie-minimal`, `debian-stretch-standard`, `centos-7-standard` (with python3 from SPKG) clean

`ubuntu-bionic-standard`, `debian-buster-standard`, `linuxmint-19.3-standard`, `fedora-30-standard`, `fedora-31-standard`, `gentoo-python3.7-standard` (with `/usr/bin/python3.7`) clean

`gentoo-standard` (with `/usr/bin/python3.8`) clean

`ubuntu-eoan-standard` (with `/usr/bin/python3.7`, https://github.com/mkoeppe/sage/runs/978617270) clean except for

```
sage -t --random-seed=0 src/sage/libs/eclib/interface.py  # 2 doctests failed
sage -t --random-seed=0 src/sage/schemes/cyclic_covers/charpoly_frobenius.py  # 1 doctest failed
```
(seem unrelated to this ticket (mwrank; #28951?))

`debian-bullseye-standard` (with `/usr/bin/python3.7`) clean except for doctest errors because of newer flint or arb from the system

`linuxmint-17-standard` .... lots of doctest failures because of "setlocale" messages

`fedora-27-standard` (with `/usr/bin/python3.6`):

```
sage -t --random-seed=0 src/sage/lfunctions/sympow.py  # 3 doctests failed
sage -t --random-seed=0 src/sage/schemes/elliptic_curves/ell_rational_field.py  # 2 doctests failed
```
(seems unrelated)

`fedora-29-standard` (with `/usr/bin/python3.7`): likewise

`fedora-28-standard` (with `/usr/bin/python3.6`) additionally:

```
sage -t --random-seed=0 src/sage/rings/polynomial/groebner_fan.py  # 3 doctests failed
```
(seems unrelated)

`conda-forge-standard` (with `/opt/conda/bin/python3.7`):

```
sage -t --random-seed=0 src/doc/en/constructions/algebraic_geometry.rst  # 1 doctest failed
sage -t --random-seed=0 src/doc/en/developer/coding_in_other.rst  # 1 doctest failed
sage -t --random-seed=0 src/sage/misc/cython.py  # 3 doctests failed
sage -t --random-seed=0 src/sage/modules/fg_pid/fgp_module.py  # 3 doctests failed
sage -t --random-seed=0 src/sage/modules/free_module_morphism.py  # 3 doctests failed
sage -t --random-seed=0 src/sage/rings/complex_arb.pyx  # 6 doctests failed
sage -t --random-seed=0 src/sage/parallel/map_reduce.py  # Timed out
sage -t --random-seed=0 src/sage/rings/real_arb.pyx  # 2 doctests failed
sage -t --random-seed=0 src/sage/schemes/hyperelliptic_curves/monsky_washnitzer.py  # Killed due to abort
```

`conda-forge-minimal` (https://github.com/mkoeppe/sage/runs/978620286): 

```
  [python3-3.8.5]   ImportError: The required _crypt module was not built as part of CPython
  [python3-3.8.5]   crypt module failed to import
  [python3-3.8.5]   ModuleNotFoundError: No module named 'zlib'
  [python3-3.8.5]   zlib module failed to import
  [python3-3.8.5]   ModuleNotFoundError: No module named '_sqlite3'
  [python3-3.8.5]   sqlite3 module failed to import
  [python3-3.8.5]   Error: One or more modules failed to import.
```
(but we had similar errors also before the update, on this platform)


`ubuntu-focal-standard` (https://github.com/mkoeppe/sage/runs/978617297)

```
hecking whether SageMath should install SPKG python3...
checking whether any of sqlite libpng bzip2 xz libffi is installed as or will be installed as SPKG... no
checking for python3 >= 3.6, < 3.9 with modules sqlite3, ctypes, math, hashlib, crypt, readline, socket, zlib, distutils.core... 
checking ... whether /usr/bin/python3.8 is good... no, the version is in the supported range, and the modules can be imported, but distutils cannot build a C extension
checking ... whether /usr/bin/python3 is good... no, the version is in the supported range, and the modules can be imported, but distutils cannot build a C extension
checking ... whether /bin/python3.8 is good... no, the version is in the supported range, and the modules can be imported, but distutils cannot build a C extension
checking ... whether /bin/python3 is good... no, the version is in the supported range, and the modules can be imported, but distutils cannot build a C extension

configure: no suitable system package found for SPKG python3
```
likewise on `debian-sid-standard` (https://github.com/mkoeppe/sage/runs/978620025)



---

archive/issue_comments_430640.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\n`homebrew-macos-minimal` (using python3 SPKG): Clean except for various timeouts\n\n```\nsage -t --random-seed=0 src/sage/dynamics/arithmetic_dynamics/projective_ds.py  # Timed out\nsage -t --random-seed=0 src/sage/interfaces/gap.py  # 1 doctest failed\nsage -t --random-seed=0 src/sage/manifolds/differentiable/metric.py  # Timed out\nsage -t --random-seed=0 src/sage/manifolds/differentiable/tensorfield.py  # Timed out\nsage -t --random-seed=0 src/sage/plot/graphics.py  # Timed out\nsage -t --random-seed=0 src/sage/plot/plot.py  # Timed out\nsage -t --random-seed=0 src/sage/plot/plot3d/base.pyx  # Timed out\nsage -t --random-seed=0 src/sage/plot/plot3d/implicit_plot3d.py  # Timed out\nsage -t --random-seed=0 src/sage/plot/plot3d/parametric_plot3d.py  # Timed out\nsage -t --random-seed=0 src/sage/plot/plot3d/plot3d.py  # Timed out\nsage -t --random-seed=0 src/sage/plot/plot3d/shapes.pyx  # Timed out\nsage -t --random-seed=0 src/sage/plot/plot3d/shapes2.py  # Timed out\nsage -t --random-seed=0 src/sage/rings/function_field/function_field.py  # Timed out\nsage -t --random-seed=0 src/sage/schemes/elliptic_curves/ell_number_field.py  # Timed out\nsage -t --random-seed=0 src/sage/schemes/elliptic_curves/gp_simon.py  \n```\n\n`homebrew-macos-python3_xcode-standard` (using `/usr/bin/python3`) -- build times out during docbuild --- perhaps the same problem as reported on sage-release\n\n\n`conda-forge-macos-minimal` (https://github.com/mkoeppe/sage/runs/978617180):\n\n```\n  [python3-3.8.5]   checking build system type... x86_64-apple-darwin19.6.0\n  [python3-3.8.5]   checking host system type... x86_64-apple-darwin13.4.0\n  [python3-3.8.5]   checking for python3.8... no\n  [python3-3.8.5]   checking for python3... python3\n  [python3-3.8.5]   configure: error: Cross compiling required --host=HOST-TUPLE and --build=ARCH\n  [python3-3.8.5]   configure: WARNING: unrecognized options: --disable-toolbox-glue\n  [python3-3.8.5]   checking build system type... x86_64-apple-darwin19.6.0\n  [python3-3.8.5]   checking host system type... x86_64-apple-darwin13.4.0\n  [python3-3.8.5]   checking for python3.8... no\n  [python3-3.8.5]   checking for python3... python3\n  [python3-3.8.5]   configure: error: Cross compiling required --host=HOST-TUPLE and --build=ARCH\n```\n???? But this platform also failed before the update",
    "created_at": "2020-08-13T22:46:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430640",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:0" align="right">comment:0</div>

`homebrew-macos-minimal` (using python3 SPKG): Clean except for various timeouts

```
sage -t --random-seed=0 src/sage/dynamics/arithmetic_dynamics/projective_ds.py  # Timed out
sage -t --random-seed=0 src/sage/interfaces/gap.py  # 1 doctest failed
sage -t --random-seed=0 src/sage/manifolds/differentiable/metric.py  # Timed out
sage -t --random-seed=0 src/sage/manifolds/differentiable/tensorfield.py  # Timed out
sage -t --random-seed=0 src/sage/plot/graphics.py  # Timed out
sage -t --random-seed=0 src/sage/plot/plot.py  # Timed out
sage -t --random-seed=0 src/sage/plot/plot3d/base.pyx  # Timed out
sage -t --random-seed=0 src/sage/plot/plot3d/implicit_plot3d.py  # Timed out
sage -t --random-seed=0 src/sage/plot/plot3d/parametric_plot3d.py  # Timed out
sage -t --random-seed=0 src/sage/plot/plot3d/plot3d.py  # Timed out
sage -t --random-seed=0 src/sage/plot/plot3d/shapes.pyx  # Timed out
sage -t --random-seed=0 src/sage/plot/plot3d/shapes2.py  # Timed out
sage -t --random-seed=0 src/sage/rings/function_field/function_field.py  # Timed out
sage -t --random-seed=0 src/sage/schemes/elliptic_curves/ell_number_field.py  # Timed out
sage -t --random-seed=0 src/sage/schemes/elliptic_curves/gp_simon.py  
```

`homebrew-macos-python3_xcode-standard` (using `/usr/bin/python3`) -- build times out during docbuild --- perhaps the same problem as reported on sage-release


`conda-forge-macos-minimal` (https://github.com/mkoeppe/sage/runs/978617180):

```
  [python3-3.8.5]   checking build system type... x86_64-apple-darwin19.6.0
  [python3-3.8.5]   checking host system type... x86_64-apple-darwin13.4.0
  [python3-3.8.5]   checking for python3.8... no
  [python3-3.8.5]   checking for python3... python3
  [python3-3.8.5]   configure: error: Cross compiling required --host=HOST-TUPLE and --build=ARCH
  [python3-3.8.5]   configure: WARNING: unrecognized options: --disable-toolbox-glue
  [python3-3.8.5]   checking build system type... x86_64-apple-darwin19.6.0
  [python3-3.8.5]   checking host system type... x86_64-apple-darwin13.4.0
  [python3-3.8.5]   checking for python3.8... no
  [python3-3.8.5]   checking for python3... python3
  [python3-3.8.5]   configure: error: Cross compiling required --host=HOST-TUPLE and --build=ARCH
```
???? But this platform also failed before the update



---

archive/issue_comments_430641.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nLooks like we have a good chance of getting this ready for 9.2!",
    "created_at": "2020-08-13T22:47:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430641",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:1" align="right">comment:1</div>

Looks like we have a good chance of getting this ready for 9.2!



---

archive/issue_events_380744.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-13T22:47:06Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380744"
}
```



---

archive/issue_events_380745.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-13T22:47:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380745"
}
```



---

archive/issue_comments_430642.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\n(deleted)",
    "created_at": "2020-08-13T22:56:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430642",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2" align="right">comment:2</div>

(deleted)



---

archive/issue_comments_430643.json:
```json
{
    "body": "Changed commit from **[`fa2ad16`](https://github.com/sagemath/sagetrac-mirror/commit/fa2ad16159d452089a235796291a13f49d8d0477)** to **[`89dc8c9`](https://github.com/sagemath/sagetrac-mirror/commit/89dc8c92ebd9f10c7d41e6b72e6d271e05fc1119)**",
    "created_at": "2020-08-13T23:21:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430643",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fa2ad16`](https://github.com/sagemath/sagetrac-mirror/commit/fa2ad16159d452089a235796291a13f49d8d0477)** to **[`89dc8c9`](https://github.com/sagemath/sagetrac-mirror/commit/89dc8c92ebd9f10c7d41e6b72e6d271e05fc1119)**



---

archive/issue_comments_430644.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bccf5c12b17c845e2d1298e89d1b2219f13542b5\"><code>bccf5c1</code></a></td><td><code>Merge branch 't/30127/cygwin_minimal__pip_20_1_1_fails_to_install' into t/27754/public/python3.8</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bc6500497c0966906f22a96eba2d02fbdaae5068\"><code>bc65004</code></a></td><td><code>tox.ini, tox.yml: Add ubuntu-groovy, fedora-33</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8eb9cae07a48f9f8396b8ac4c21f454984abcc53\"><code>8eb9cae</code></a></td><td><code>Merge branch 't/30339/tox_ini__update_for_latest_ubuntu__fedora_versions' into t/27754/public/python3.8</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d5f2ae187958f21204d492b70cc3f3d11973658\"><code>8d5f2ae</code></a></td><td><code>tox.ini, build/pkgs/python3/distros/: Switch to python 3.8</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cf25b83a55394d07912ebff8aa1b71a1924d3a88\"><code>cf25b83</code></a></td><td><code>Move code for tagging/pushing docker images into tox.ini</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/51c6cde1c97ec8760f4a030f0f5fac3472100f28\"><code>51c6cde</code></a></td><td><code>fixup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/231b81298cc8d0cbf10dceef08a825126f171959\"><code>231b812</code></a></td><td><code>.github-workflows/tox-*.yml: Update similarly</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/385571ec7bddf73ade2608ac5ee6136be30f248a\"><code>385571e</code></a></td><td><code>Merge branch 't/30144/tox_ini___tox_yml__move_code_for_tagging_pushing_docker_images_into_tox_ini' into t/27754/public/python3.8</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/701b4ceec489024aa76617a276cf7a9cec4adeb3\"><code>701b4ce</code></a></td><td><code>build/make/Makefile.in: Add + before recursive make invocations</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/89dc8c92ebd9f10c7d41e6b72e6d271e05fc1119\"><code>89dc8c9</code></a></td><td><code>Merge branch 't/30345/build_make_makefile_in__filter_out___j__from_sub_make_invocations_to_avoid_excessive_parallel_load' into t/27754/public/python3.8</code></td></tr></table>\n",
    "created_at": "2020-08-13T23:21:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430644",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bccf5c12b17c845e2d1298e89d1b2219f13542b5"><code>bccf5c1</code></a></td><td><code>Merge branch 't/30127/cygwin_minimal__pip_20_1_1_fails_to_install' into t/27754/public/python3.8</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bc6500497c0966906f22a96eba2d02fbdaae5068"><code>bc65004</code></a></td><td><code>tox.ini, tox.yml: Add ubuntu-groovy, fedora-33</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8eb9cae07a48f9f8396b8ac4c21f454984abcc53"><code>8eb9cae</code></a></td><td><code>Merge branch 't/30339/tox_ini__update_for_latest_ubuntu__fedora_versions' into t/27754/public/python3.8</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d5f2ae187958f21204d492b70cc3f3d11973658"><code>8d5f2ae</code></a></td><td><code>tox.ini, build/pkgs/python3/distros/: Switch to python 3.8</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cf25b83a55394d07912ebff8aa1b71a1924d3a88"><code>cf25b83</code></a></td><td><code>Move code for tagging/pushing docker images into tox.ini</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/51c6cde1c97ec8760f4a030f0f5fac3472100f28"><code>51c6cde</code></a></td><td><code>fixup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/231b81298cc8d0cbf10dceef08a825126f171959"><code>231b812</code></a></td><td><code>.github-workflows/tox-*.yml: Update similarly</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/385571ec7bddf73ade2608ac5ee6136be30f248a"><code>385571e</code></a></td><td><code>Merge branch 't/30144/tox_ini___tox_yml__move_code_for_tagging_pushing_docker_images_into_tox_ini' into t/27754/public/python3.8</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/701b4ceec489024aa76617a276cf7a9cec4adeb3"><code>701b4ce</code></a></td><td><code>build/make/Makefile.in: Add + before recursive make invocations</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/89dc8c92ebd9f10c7d41e6b72e6d271e05fc1119"><code>89dc8c9</code></a></td><td><code>Merge branch 't/30345/build_make_makefile_in__filter_out___j__from_sub_make_invocations_to_avoid_excessive_parallel_load' into t/27754/public/python3.8</code></td></tr></table>




---

archive/issue_comments_430645.json:
```json
{
    "body": "Changed dependencies from **#28197, #29042, #29861, #30162, #30225** to **#28197, #29042, #29861, #30162, #30225, #30127, #30144, #30345**",
    "created_at": "2020-08-13T23:22:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430645",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#28197, #29042, #29861, #30162, #30225** to **#28197, #29042, #29861, #30162, #30225, #30127, #30144, #30345**



---

archive/issue_comments_430646.json:
```json
{
    "body": "Changed reviewer from **github.com/mkoeppe/sage/actions/runs/206442118** to **github.com/mkoeppe/sage/actions/runs/206442118, github.com/mkoeppe/sage/actions/runs/207801205, github.com/mkoeppe/sage/actions/runs/207801208, github.com/mkoeppe/sage/actions/runs/207801210**",
    "created_at": "2020-08-13T23:26:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430646",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **github.com/mkoeppe/sage/actions/runs/206442118** to **github.com/mkoeppe/sage/actions/runs/206442118, github.com/mkoeppe/sage/actions/runs/207801205, github.com/mkoeppe/sage/actions/runs/207801208, github.com/mkoeppe/sage/actions/runs/207801210**



---

archive/issue_comments_430647.json:
```json
{
    "body": "Changed reviewer from **github.com/mkoeppe/sage/actions/runs/206442118, github.com/mkoeppe/sage/actions/runs/207801205, github.com/mkoeppe/sage/actions/runs/207801208, github.com/mkoeppe/sage/actions/runs/207801210** to **github.com/mkoeppe/sage/actions/runs/207801205, github.com/mkoeppe/sage/actions/runs/207801208, github.com/mkoeppe/sage/actions/runs/207801210**",
    "created_at": "2020-08-14T02:29:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430647",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **github.com/mkoeppe/sage/actions/runs/206442118, github.com/mkoeppe/sage/actions/runs/207801205, github.com/mkoeppe/sage/actions/runs/207801208, github.com/mkoeppe/sage/actions/runs/207801210** to **github.com/mkoeppe/sage/actions/runs/207801205, github.com/mkoeppe/sage/actions/runs/207801208, github.com/mkoeppe/sage/actions/runs/207801210**



---

archive/issue_events_380746.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-14T05:00:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380746"
}
```



---

archive/issue_events_380747.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-14T05:00:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380747"
}
```



---

archive/issue_comments_430648.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\n`ubuntu-focal-standard` now accepts system python 3.8, clean doctests.\n\n\n\nBut:\n\n`debian-bullseye-standard` (https://github.com/mkoeppe/sage/runs/982720084), now using `/usr/bin/python3.8` (3.8.5), fails to build `matplotlib`:\n\n```\n  x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-z,relro -g -fwrapv -O2 -Wl,-rpath-link,/sage/local/lib -L/sage/local/lib -Wl,-rpath,/sage/local/lib -g -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 build/temp.linux-x86_64-3.8/src/qhull_wrap.o build/temp.linux-x86_64-3.8/extern/libqhull/geom.o build/temp.linux-x86_64-3.8/extern/libqhull/geom2.o build/temp.linux-x86_64-3.8/extern/libqhull/global.o build/temp.linux-x86_64-3.8/extern/libqhull/io.o build/temp.linux-x86_64-3.8/extern/libqhull/libqhull.o build/temp.linux-x86_64-3.8/extern/libqhull/mem.o build/temp.linux-x86_64-3.8/extern/libqhull/merge.o build/temp.linux-x86_64-3.8/extern/libqhull/poly.o build/temp.linux-x86_64-3.8/extern/libqhull/poly2.o build/temp.linux-x86_64-3.8/extern/libqhull/qset.o build/temp.linux-x86_64-3.8/extern/libqhull/random.o build/temp.linux-x86_64-3.8/extern/libqhull/rboxlib.o build/temp.linux-x86_64-3.8/extern/libqhull/stat.o build/temp.linux-x86_64-3.8/extern/libqhull/user.o build/temp.linux-x86_64-3.8/extern/libqhull/usermem.o build/temp.linux-x86_64-3.8/extern/libqhull/userprintf.o build/temp.linux-x86_64-3.8/extern/libqhull/userprintf_rbox.o -lm -o build/lib.linux-x86_64-3.8/matplotlib/_qhull.cpython-38-x86_64-linux-gnu.so\n  lto1: fatal error: bytecode stream in file \u2018build/temp.linux-x86_64-3.8/src/qhull_wrap.o\u2019 generated with GCC compiler older than 10.0\n  compilation terminated.\n  lto-wrapper: fatal error: x86_64-linux-gnu-gcc returned 1 exit status\n  compilation terminated.\n  /usr/bin/ld: error: lto-wrapper failed\n  collect2: error: ld returned 1 exit status\n```\nLikewise on `debian-sid-standard` and `ubuntu-groovy-standard`",
    "created_at": "2020-08-14T12:11:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430648",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">comment:8</div>

`ubuntu-focal-standard` now accepts system python 3.8, clean doctests.



But:

`debian-bullseye-standard` (https://github.com/mkoeppe/sage/runs/982720084), now using `/usr/bin/python3.8` (3.8.5), fails to build `matplotlib`:

```
  x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-z,relro -g -fwrapv -O2 -Wl,-rpath-link,/sage/local/lib -L/sage/local/lib -Wl,-rpath,/sage/local/lib -g -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 build/temp.linux-x86_64-3.8/src/qhull_wrap.o build/temp.linux-x86_64-3.8/extern/libqhull/geom.o build/temp.linux-x86_64-3.8/extern/libqhull/geom2.o build/temp.linux-x86_64-3.8/extern/libqhull/global.o build/temp.linux-x86_64-3.8/extern/libqhull/io.o build/temp.linux-x86_64-3.8/extern/libqhull/libqhull.o build/temp.linux-x86_64-3.8/extern/libqhull/mem.o build/temp.linux-x86_64-3.8/extern/libqhull/merge.o build/temp.linux-x86_64-3.8/extern/libqhull/poly.o build/temp.linux-x86_64-3.8/extern/libqhull/poly2.o build/temp.linux-x86_64-3.8/extern/libqhull/qset.o build/temp.linux-x86_64-3.8/extern/libqhull/random.o build/temp.linux-x86_64-3.8/extern/libqhull/rboxlib.o build/temp.linux-x86_64-3.8/extern/libqhull/stat.o build/temp.linux-x86_64-3.8/extern/libqhull/user.o build/temp.linux-x86_64-3.8/extern/libqhull/usermem.o build/temp.linux-x86_64-3.8/extern/libqhull/userprintf.o build/temp.linux-x86_64-3.8/extern/libqhull/userprintf_rbox.o -lm -o build/lib.linux-x86_64-3.8/matplotlib/_qhull.cpython-38-x86_64-linux-gnu.so
  lto1: fatal error: bytecode stream in file ‘build/temp.linux-x86_64-3.8/src/qhull_wrap.o’ generated with GCC compiler older than 10.0
  compilation terminated.
  lto-wrapper: fatal error: x86_64-linux-gnu-gcc returned 1 exit status
  compilation terminated.
  /usr/bin/ld: error: lto-wrapper failed
  collect2: error: ld returned 1 exit status
```
Likewise on `debian-sid-standard` and `ubuntu-groovy-standard`



---

archive/issue_comments_430649.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nGetting rid of `-flto` would work around this problem. Not sure where it is coming from",
    "created_at": "2020-08-14T12:37:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430649",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:9" align="right">comment:9</div>

Getting rid of `-flto` would work around this problem. Not sure where it is coming from



---

archive/issue_comments_430650.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\n(As expected, upgrading matplotlib to latest (3.3.1, #30358) does not solve this problem.)",
    "created_at": "2020-08-14T21:05:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430650",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:0" align="right">comment:0</div>

(As expected, upgrading matplotlib to latest (3.3.1, #30358) does not solve this problem.)



---

archive/issue_comments_430651.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nI haven't experienced anything like that in Gentoo. But looking at build log for matplotlib 3.3.0 suggests reviving an idea: using an external `qhull` install for matplotlib.",
    "created_at": "2020-08-15T00:47:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430651",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:1" align="right">comment:1</div>

I haven't experienced anything like that in Gentoo. But looking at build log for matplotlib 3.3.0 suggests reviving an idea: using an external `qhull` install for matplotlib.



---

archive/issue_comments_430652.json:
```json
{
    "body": "<div id=\"comment:182\" align=\"right\">comment:182</div>\n\nReplying to [@mkoeppe](#comment:179):\n> Getting rid of `-flto` would work around this problem. Not sure where it is coming from\n\nThe flag is coming directly from matplotlib's `setup.py`, I'll just disable it",
    "created_at": "2020-08-15T00:51:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430652",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:182" align="right">comment:182</div>

Replying to [@mkoeppe](#comment:179):
> Getting rid of `-flto` would work around this problem. Not sure where it is coming from

The flag is coming directly from matplotlib's `setup.py`, I'll just disable it



---

archive/issue_comments_430653.json:
```json
{
    "body": "Changed dependencies from **#28197, #29042, #29861, #30162, #30225, #30127, #30144, #30345** to **#28197, #29042, #29861, #30162, #30225, #30127, #30144, #30345, #30365**",
    "created_at": "2020-08-15T01:04:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430653",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#28197, #29042, #29861, #30162, #30225, #30127, #30144, #30345** to **#28197, #29042, #29861, #30162, #30225, #30127, #30144, #30345, #30365**



---

archive/issue_comments_430654.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2d16e5dfdd928959c84e989d3d1af8b06fa048d9\"><code>2d16e5d</code></a></td><td><code>build/pkgs/matplotlib/make-setup-config.py: Disable LTO</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4daa290fef4356faaf56eefa4e58b948e2f8db84\"><code>4daa290</code></a></td><td><code>Merge branch 't/30365/disable_lto_in_matplotlib_build' into t/27754/public/python3.8</code></td></tr></table>\n",
    "created_at": "2020-08-15T01:05:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430654",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2d16e5dfdd928959c84e989d3d1af8b06fa048d9"><code>2d16e5d</code></a></td><td><code>build/pkgs/matplotlib/make-setup-config.py: Disable LTO</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4daa290fef4356faaf56eefa4e58b948e2f8db84"><code>4daa290</code></a></td><td><code>Merge branch 't/30365/disable_lto_in_matplotlib_build' into t/27754/public/python3.8</code></td></tr></table>




---

archive/issue_comments_430655.json:
```json
{
    "body": "Changed commit from **[`89dc8c9`](https://github.com/sagemath/sagetrac-mirror/commit/89dc8c92ebd9f10c7d41e6b72e6d271e05fc1119)** to **[`4daa290`](https://github.com/sagemath/sagetrac-mirror/commit/4daa290fef4356faaf56eefa4e58b948e2f8db84)**",
    "created_at": "2020-08-15T01:05:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430655",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`89dc8c9`](https://github.com/sagemath/sagetrac-mirror/commit/89dc8c92ebd9f10c7d41e6b72e6d271e05fc1119)** to **[`4daa290`](https://github.com/sagemath/sagetrac-mirror/commit/4daa290fef4356faaf56eefa4e58b948e2f8db84)**



---

archive/issue_comments_430656.json:
```json
{
    "body": "<div id=\"comment:185\" align=\"right\">comment:185</div>\n\nReplying to [@kiwifb](#comment:181):\n> I haven't experienced anything like that in Gentoo. But looking at build log for matplotlib 3.3.0 suggests reviving an idea: using an external `qhull` install for matplotlib.\n\nI would support this in general, but not for 9.2; and as discussed in #30176, we would need to make cmake standard.",
    "created_at": "2020-08-15T01:07:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430656",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:185" align="right">comment:185</div>

Replying to [@kiwifb](#comment:181):
> I haven't experienced anything like that in Gentoo. But looking at build log for matplotlib 3.3.0 suggests reviving an idea: using an external `qhull` install for matplotlib.

I would support this in general, but not for 9.2; and as discussed in #30176, we would need to make cmake standard.



---

archive/issue_comments_430657.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI think this ticket is now ready for review.",
    "created_at": "2020-08-15T01:08:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430657",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6" align="right">comment:6</div>

I think this ticket is now ready for review.



---

archive/issue_comments_430658.json:
```json
{
    "body": "Changed reviewer from **github.com/mkoeppe/sage/actions/runs/207801205, github.com/mkoeppe/sage/actions/runs/207801208, github.com/mkoeppe/sage/actions/runs/207801210** to **Matthias Koeppe, github.com/mkoeppe/sage/actions/runs/207801205, github.com/mkoeppe/sage/actions/runs/207801208, github.com/mkoeppe/sage/actions/runs/207801210, ...**",
    "created_at": "2020-08-15T01:08:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430658",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **github.com/mkoeppe/sage/actions/runs/207801205, github.com/mkoeppe/sage/actions/runs/207801208, github.com/mkoeppe/sage/actions/runs/207801210** to **Matthias Koeppe, github.com/mkoeppe/sage/actions/runs/207801205, github.com/mkoeppe/sage/actions/runs/207801208, github.com/mkoeppe/sage/actions/runs/207801210, ...**



---

archive/issue_comments_430659.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,3 +9,7 @@\n - #25680 - Python 3.7.3\n - #30210 - Python 3.7.8\n - #30184 - Python 3.9.x\n+\n+See also:\n+- #30384 Adopt the \u201ctime window-based\u201d policy for support of Python versions from NEP 29\n+\n``````\n",
    "created_at": "2020-08-17T18:45:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430659",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,3 +9,7 @@
 - #25680 - Python 3.7.3
 - #30210 - Python 3.7.8
 - #30184 - Python 3.9.x
+
+See also:
+- #30384 Adopt the “time window-based” policy for support of Python versions from NEP 29
+
``````




---

archive/issue_comments_430660.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nNow is a good time to tests things on a bigger scale.",
    "created_at": "2020-08-18T23:04:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430660",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:8" align="right">comment:8</div>

Now is a good time to tests things on a bigger scale.



---

archive/issue_comments_430661.json:
```json
{
    "body": "Changed reviewer from **Matthias Koeppe, github.com/mkoeppe/sage/actions/runs/207801205, github.com/mkoeppe/sage/actions/runs/207801208, github.com/mkoeppe/sage/actions/runs/207801210, ...** to **Matthias Koeppe, Fran\u00e7ois Bissey**",
    "created_at": "2020-08-18T23:04:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430661",
    "user": "https://github.com/kiwifb"
}
```

Changed reviewer from **Matthias Koeppe, github.com/mkoeppe/sage/actions/runs/207801205, github.com/mkoeppe/sage/actions/runs/207801208, github.com/mkoeppe/sage/actions/runs/207801210, ...** to **Matthias Koeppe, François Bissey**



---

archive/issue_events_380748.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2020-08-18T23:04:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380748"
}
```



---

archive/issue_events_380749.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2020-08-18T23:04:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380749"
}
```



---

archive/issue_comments_430662.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThanks",
    "created_at": "2020-08-19T00:02:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430662",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:9" align="right">comment:9</div>

Thanks



---

archive/issue_comments_430663.json:
```json
{
    "body": "<div id=\"comment:0\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/46c559c0b052e37d87c050fee879150318ba0463\"><code>46c559c</code></a></td><td><code>Merge tag '9.2.beta9' into t/27754/public/python3.8</code></td></tr></table>\n",
    "created_at": "2020-08-19T01:59:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430663",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:0"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/46c559c0b052e37d87c050fee879150318ba0463"><code>46c559c</code></a></td><td><code>Merge tag '9.2.beta9' into t/27754/public/python3.8</code></td></tr></table>




---

archive/issue_events_380750.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2020-08-19T01:59:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380750"
}
```



---

archive/issue_events_380751.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2020-08-19T01:59:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380751"
}
```



---

archive/issue_comments_430664.json:
```json
{
    "body": "Changed commit from **[`4daa290`](https://github.com/sagemath/sagetrac-mirror/commit/4daa290fef4356faaf56eefa4e58b948e2f8db84)** to **[`46c559c`](https://github.com/sagemath/sagetrac-mirror/commit/46c559c0b052e37d87c050fee879150318ba0463)**",
    "created_at": "2020-08-19T01:59:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430664",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4daa290`](https://github.com/sagemath/sagetrac-mirror/commit/4daa290fef4356faaf56eefa4e58b948e2f8db84)** to **[`46c559c`](https://github.com/sagemath/sagetrac-mirror/commit/46c559c0b052e37d87c050fee879150318ba0463)**



---

archive/issue_events_380752.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-19T02:00:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380752"
}
```



---

archive/issue_events_380753.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-19T02:00:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380753"
}
```



---

archive/issue_events_380754.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-19T22:18:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380754"
}
```



---

archive/issue_events_380755.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-19T22:18:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380755"
}
```



---

archive/issue_comments_430665.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\n\n```\n    STDOUT: CONFLICT (content): Merge conflict in src/sage/graphs/generic_graph.py\n```",
    "created_at": "2020-08-19T22:18:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430665",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:2" align="right">comment:2</div>


```
    STDOUT: CONFLICT (content): Merge conflict in src/sage/graphs/generic_graph.py
```



---

archive/issue_comments_430666.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f45221bd93d0c0341d46c64d7079da7530d80dd8\"><code>f45221b</code></a></td><td><code>trac #30140: remove deprecated method ste_planar_positions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a625ed34796120b6d8bc7397c4a9ef4314649332\"><code>a625ed3</code></a></td><td><code>Merge branch 'public/graphs/30140_remove_set_plananr_positions' of git://trac.sagemath.org/sage into t/27754/public/python3.8</code></td></tr></table>\n",
    "created_at": "2020-08-19T23:10:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430666",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f45221bd93d0c0341d46c64d7079da7530d80dd8"><code>f45221b</code></a></td><td><code>trac #30140: remove deprecated method ste_planar_positions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a625ed34796120b6d8bc7397c4a9ef4314649332"><code>a625ed3</code></a></td><td><code>Merge branch 'public/graphs/30140_remove_set_plananr_positions' of git://trac.sagemath.org/sage into t/27754/public/python3.8</code></td></tr></table>




---

archive/issue_comments_430667.json:
```json
{
    "body": "Changed commit from **[`46c559c`](https://github.com/sagemath/sagetrac-mirror/commit/46c559c0b052e37d87c050fee879150318ba0463)** to **[`a625ed3`](https://github.com/sagemath/sagetrac-mirror/commit/a625ed34796120b6d8bc7397c4a9ef4314649332)**",
    "created_at": "2020-08-19T23:10:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430667",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`46c559c`](https://github.com/sagemath/sagetrac-mirror/commit/46c559c0b052e37d87c050fee879150318ba0463)** to **[`a625ed3`](https://github.com/sagemath/sagetrac-mirror/commit/a625ed34796120b6d8bc7397c4a9ef4314649332)**



---

archive/issue_comments_430668.json:
```json
{
    "body": "Changed commit from **[`a625ed3`](https://github.com/sagemath/sagetrac-mirror/commit/a625ed34796120b6d8bc7397c4a9ef4314649332)** to **[`53b569d`](https://github.com/sagemath/sagetrac-mirror/commit/53b569d68ddca39a0c5b33ab59ce77dd651da21a)**",
    "created_at": "2020-08-19T23:24:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430668",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a625ed3`](https://github.com/sagemath/sagetrac-mirror/commit/a625ed34796120b6d8bc7397c4a9ef4314649332)** to **[`53b569d`](https://github.com/sagemath/sagetrac-mirror/commit/53b569d68ddca39a0c5b33ab59ce77dd651da21a)**



---

archive/issue_comments_430669.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3db87ad1fd15fb50b6e44267cc5c37759376bba0\"><code>3db87ad</code></a></td><td><code>build/pkgs/maxima: Update to 5.44.0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bcf3c98839dfdfa37a9863e6f1c70f20997bb4ea\"><code>bcf3c98</code></a></td><td><code>Remove old patches</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/07aa2f93345d2cecee75e074dc9bbcb22074129c\"><code>07aa2f9</code></a></td><td><code>build/pkgs/maxima/spkg-install.in: New workaround for makeinfo trouble</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/046634d7429f9c82a47b011dd986bbb665759a13\"><code>046634d</code></a></td><td><code>sage.interfaces.maxima_abstract.MaximaAbstract._command_runner: Skip all comment lines, rather than counting lines to skip</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d1ad8d7a9482bbbb3b7c0a6b919744e954f396cf\"><code>d1ad8d7</code></a></td><td><code>sage.interfaces.maxima_abstract.MaximaAbstract.completions: Remove '-impl' functions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2ea3e73fa4ae3afeb318833850463fd8caea55b8\"><code>2ea3e73</code></a></td><td><code>Merge branch 'u/mkoeppe/upgrade_maxima_to_5_44_0' of trac.sagemath.org:sage into HEAD</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8f83f9643a24963b4abf01d174c74158d2092408\"><code>8f83f96</code></a></td><td><code>#30063 : Maxima gamma_greek is now called gamma_incomplete_lower</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/21e2feaa1188735241e988836a7d21bec258c741\"><code>21e2fea</code></a></td><td><code>#30063 : mark Maxima's integration regression as known bug.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d6e0952447e576f0ad9e7641584e79cd31c7e172\"><code>d6e0952</code></a></td><td><code>Trac #30063: Upgrade Maxima to 5.44.0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/53b569d68ddca39a0c5b33ab59ce77dd651da21a\"><code>53b569d</code></a></td><td><code>Merge remote-tracking branch 'vbraun/develop' into t/27754/public/python3.8</code></td></tr></table>\n",
    "created_at": "2020-08-19T23:24:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430669",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3db87ad1fd15fb50b6e44267cc5c37759376bba0"><code>3db87ad</code></a></td><td><code>build/pkgs/maxima: Update to 5.44.0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bcf3c98839dfdfa37a9863e6f1c70f20997bb4ea"><code>bcf3c98</code></a></td><td><code>Remove old patches</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/07aa2f93345d2cecee75e074dc9bbcb22074129c"><code>07aa2f9</code></a></td><td><code>build/pkgs/maxima/spkg-install.in: New workaround for makeinfo trouble</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/046634d7429f9c82a47b011dd986bbb665759a13"><code>046634d</code></a></td><td><code>sage.interfaces.maxima_abstract.MaximaAbstract._command_runner: Skip all comment lines, rather than counting lines to skip</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d1ad8d7a9482bbbb3b7c0a6b919744e954f396cf"><code>d1ad8d7</code></a></td><td><code>sage.interfaces.maxima_abstract.MaximaAbstract.completions: Remove '-impl' functions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2ea3e73fa4ae3afeb318833850463fd8caea55b8"><code>2ea3e73</code></a></td><td><code>Merge branch 'u/mkoeppe/upgrade_maxima_to_5_44_0' of trac.sagemath.org:sage into HEAD</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8f83f9643a24963b4abf01d174c74158d2092408"><code>8f83f96</code></a></td><td><code>#30063 : Maxima gamma_greek is now called gamma_incomplete_lower</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/21e2feaa1188735241e988836a7d21bec258c741"><code>21e2fea</code></a></td><td><code>#30063 : mark Maxima's integration regression as known bug.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d6e0952447e576f0ad9e7641584e79cd31c7e172"><code>d6e0952</code></a></td><td><code>Trac #30063: Upgrade Maxima to 5.44.0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/53b569d68ddca39a0c5b33ab59ce77dd651da21a"><code>53b569d</code></a></td><td><code>Merge remote-tracking branch 'vbraun/develop' into t/27754/public/python3.8</code></td></tr></table>




---

archive/issue_comments_430670.json:
```json
{
    "body": "Changed dependencies from **#28197, #29042, #29861, #30162, #30225, #30127, #30144, #30345, #30365** to **#28197, #29042, #29861, #30162, #30225, #30127, #30144, #30345, #30365, #30140**",
    "created_at": "2020-08-19T23:25:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430670",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#28197, #29042, #29861, #30162, #30225, #30127, #30144, #30345, #30365** to **#28197, #29042, #29861, #30162, #30225, #30127, #30144, #30345, #30365, #30140**



---

archive/issue_events_380756.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-19T23:25:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380756"
}
```



---

archive/issue_events_380757.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-19T23:25:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380757"
}
```



---

archive/issue_comments_430671.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI'm getting various failures on 32-bit apparently due to different iterator order:\n\n```\n**********************************************************************\nFile \"src/sage/combinat/rigged_configurations/tensor_product_kr_tableaux.py\", line 333, in sage.combinat.rigged_configurations.tensor_product_kr_tableaux.TensorProductOfKirillovReshetikhinTableaux.__iter__\nFailed example:\n    next(g)\nExpected:\n    [[2], [4]] (X) [[1]]\nGot:\n    [[1], [2]] (X) [[1]]\n**********************************************************************\n1 item had failures:\n   1 of   5 in sage.combinat.rigged_configurations.tensor_product_kr_tableaux.TensorProductOfKirillovReshetikhinTableaux.__iter__\n    [95 tests, 1 failure, 21.93 s]\n**********************************************************************\nFile \"src/sage/geometry/cone.py\", line 4059, in sage.geometry.cone.?.semigroup_generators\nFailed example:\n    halfplane.semigroup_generators()\nExpected:\n    (N(0, 1), N(1, 0), N(-1, 0))\nGot:\n    (N(-1, 0), N(1, 0), N(0, 1))\n**********************************************************************\n1 item had failures:\n   1 of  23 in sage.geometry.cone.?.semigroup_generators\n    [1241 tests, 1 failure, 18.70 s]\n**********************************************************************\nFile \"src/sage/geometry/fan_isomorphism.py\", line 124, in sage.geometry.fan_isomorphism.fan_isomorphism_generator\nFailed example:\n    tuple(fan_isomorphism_generator(fan1, fan2))\nExpected:\n    (\n    [18  1 -5]  [ 6 -3  7]\n    [ 4  0 -1]  [ 1 -1  2]\n    [ 5  0 -1], [ 2 -1  2]\n    )\nGot:\n    (\n    [ 6 -3  7]  [18  1 -5]\n    [ 1 -1  2]  [ 4  0 -1]\n    [ 2 -1  2], [ 5  0 -1]\n    )\n**********************************************************************\nFile \"src/sage/geometry/fan_isomorphism.py\", line 130, in sage.geometry.fan_isomorphism.fan_isomorphism_generator\nFailed example:\n    tuple(fan_isomorphism_generator(fan2, fan1))\nExpected:\n    (\n    [ 0 -1  1]  [ 0 -1  1]\n    [ 1 -7  2]  [ 2 -2 -5]\n    [ 0 -5  4], [ 1  0 -3]\n    )\nGot:\n    (\n    [ 0 -1  1]  [ 0 -1  1]\n    [ 2 -2 -5]  [ 1 -7  2]\n    [ 1  0 -3], [ 0 -5  4]\n    )\n**********************************************************************\n1 item had failures:\n   2 of  21 in sage.geometry.fan_isomorphism.fan_isomorphism_generator\n    [65 tests, 2 failures, 1.07 s]\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/library.py\", line 2639, in sage.geometry.polyhedron.library.Polytopes.generalized_permutahedron\nFailed example:\n    sorted(perm_a2_reg.vertices())\nExpected:\n    [A vertex at (-1, 0),\n     A vertex at (-1/2, -0.866025403784439?),\n     A vertex at (-1/2, 0.866025403784439?),\n     A vertex at (1/2, -0.866025403784439?),\n     A vertex at (1/2, 0.866025403784439?),\n     A vertex at (1.000000000000000?, 0.?e-18)]\nGot:\n    [A vertex at (-1.000000000000000?, 0.?e-18),\n     A vertex at (-1/2, -0.866025403784439?),\n     A vertex at (-1/2, 0.866025403784439?),\n     A vertex at (1/2, -0.866025403784439?),\n     A vertex at (1/2, 0.866025403784439?),\n     A vertex at (1, 0)]\n**********************************************************************\n1 item had failures:\n   1 of  21 in sage.geometry.polyhedron.library.Polytopes.generalized_permutahedron\n    [305 tests, 1 failure, 97.96 s]\n**********************************************************************\nFile \"src/sage/geometry/triangulation/point_configuration.py\", line 1401, in sage.geometry.triangulation.point_configuration.PointConfiguration.circuits_support\nFailed example:\n    list( p.circuits_support() )\nExpected:\n    [(0, 3, 4), (0, 1, 2), (1, 2, 3, 4)]\nGot:\n    [(0, 1, 2), (0, 3, 4), (1, 2, 3, 4)]\n**********************************************************************\nFile \"src/sage/geometry/triangulation/point_configuration.py\", line 1471, in sage.geometry.triangulation.point_configuration.PointConfiguration.circuits\nFailed example:\n    p.circuits()\nExpected:\n    (((0,), (1, 2), (3, 4)), ((0,), (3, 4), (1, 2)), ((1, 2), (0,), (3, 4)))\nGot:\n    (((0,), (3, 4), (1, 2)), ((0,), (1, 2), (3, 4)), ((1, 2), (0,), (3, 4)))\n**********************************************************************\n2 items had failures:\n   1 of   6 in sage.geometry.triangulation.point_configuration.PointConfiguration.circuits\n   1 of   3 in sage.geometry.triangulation.point_configuration.PointConfiguration.circuits_support\n    [214 tests, 2 failures, 19.74 s]\n**********************************************************************\nFile \"src/sage/graphs/graph.py\", line 7342, in sage.graphs.graph.Graph.cliques_containing_vertex\nFailed example:\n    sorted(d[(0, 1)])\nExpected:\n    [[(0, 1), (0, 0)], [(0, 1), (0, 2)], [(0, 1), (1, 1)]]\nGot:\n    [[(0, 0), (0, 1)], [(0, 2), (0, 1)], [(1, 1), (0, 1)]]\n**********************************************************************\n1 item had failures:\n   1 of  15 in sage.graphs.graph.Graph.cliques_containing_vertex\n    [1190 tests, 1 failure, 20.84 s]\n**********************************************************************\nFile \"src/sage/homology/homology_vector_space_with_basis.py\", line 113, in sage.homology.homology_vector_space_with_basis.HomologyVectorSpaceWithBasis\nFailed example:\n    x.cup_product(x)\nExpected:\n    0\nGot:\n    h^{2,0}\n**********************************************************************\nFile \"src/sage/homology/homology_vector_space_with_basis.py\", line 115, in sage.homology.homology_vector_space_with_basis.HomologyVectorSpaceWithBasis\nFailed example:\n    x.cup_product(y)\nExpected:\n    h^{2,0}\nGot:\n    0\n**********************************************************************\n1 item had failures:\n   2 of  45 in sage.homology.homology_vector_space_with_basis.HomologyVectorSpaceWithBasis\n    [194 tests, 2 failures, 16.93 s]\nR[write to console]: Warning messages:\nR[write to console]: 1: \nR[write to console]: In sage10 + sage6 :\nR[write to console]: \n \nR[write to console]:  longer object length is not a multiple of shorter object length\nR[write to console]: 2: \nR[write to console]: In sqrt(sage10) :\nR[write to console]:  NaNs produced\nR[write to console]: 3: \nR[write to console]: In sqrt(sage4) :\nR[write to console]:  NaNs produced\n**********************************************************************\nFile \"src/sage/matroids/graphic_matroid.py\", line 1659, in sage.matroids.graphic_matroid.GraphicMatroid.graphic_coextensions\nFailed example:\n    for N1 in I:\n        N1.graph().edges(sort=True)\nExpected:\n    [(0, 1, 0), (0, 3, 1), (0, 4, 'a'), (1, 2, 2), (2, 3, 3)]\n    [(0, 1, 0), (0, 3, 1), (1, 4, 2), (2, 3, 3), (2, 4, 'a')]\nGot:\n    [(0, 1, 0), (0, 3, 1), (0, 4, 'a'), (1, 2, 2), (2, 3, 3)]\n    [(0, 3, 1), (0, 4, 0), (1, 2, 2), (1, 4, 'a'), (2, 3, 3)]\n**********************************************************************\n1 item had failures:\n   1 of  27 in sage.matroids.graphic_matroid.GraphicMatroid.graphic_coextensions\n    [358 tests, 1 failure, 0.75 s]\n**********************************************************************\nFile \"src/sage/modular/modform_hecketriangle/hecke_triangle_groups.py\", line 1099, in sage.modular.modform_hecketriangle.hecke_triangle_groups.?.class_representatives\nFailed example:\n    R\nExpected:\n    [[V(2)*V(3)], [V(1)*V(2)]]\nGot:\n    [[V(1)*V(2)], [V(2)*V(3)]]\n**********************************************************************\nFile \"src/sage/modular/modform_hecketriangle/hecke_triangle_groups.py\", line 1101, in sage.modular.modform_hecketriangle.hecke_triangle_groups.?.class_representatives\nFailed example:\n    [v.continued_fraction()[1] for v in R]\nExpected:\n    [(1, 2, 2), (3,)]\nGot:\n    [(3,), (1, 2, 2)]\n**********************************************************************\nFile \"src/sage/modular/modform_hecketriangle/hecke_triangle_groups.py\", line 1318, in sage.modular.modform_hecketriangle.hecke_triangle_groups.?.reduced_elements\nFailed example:\n    R\nExpected:\n    [\n    [ 5*lam     -3]  [ 5*lam     -7]  [4*lam    -3]  [3*lam    -1]\n    [     7 -2*lam], [     3 -2*lam], [    3  -lam], [    1     0]\n    ]\nGot:\n    [\n    [3*lam    -1]  [ 5*lam     -3]  [ 5*lam     -7]  [4*lam    -3]\n    [    1     0], [     7 -2*lam], [     3 -2*lam], [    3  -lam]\n    ]\n**********************************************************************\nFile \"src/sage/modular/modform_hecketriangle/hecke_triangle_groups.py\", line 1323, in sage.modular.modform_hecketriangle.hecke_triangle_groups.?.reduced_elements\nFailed example:\n    [v.continued_fraction() for v in R]\nExpected:\n    [((), (1, 2, 2)), ((), (2, 2, 1)), ((), (2, 1, 2)), ((), (3,))]\nGot:\n    [((), (3,)), ((), (1, 2, 2)), ((), (2, 2, 1)), ((), (2, 1, 2))]\n**********************************************************************\nFile \"src/sage/modular/modform_hecketriangle/hecke_triangle_groups.py\", line 1350, in sage.modular.modform_hecketriangle.hecke_triangle_groups.?.simple_elements\nFailed example:\n    G.simple_elements(D=14)\nExpected:\n    [\n    [2*lam     1]  [  lam     1]  [2*lam     3]  [  lam     3]\n    [    3   lam], [    3 2*lam], [    1   lam], [    1 2*lam]\n    ]\nGot:\n    [\n    [2*lam     3]  [  lam     3]  [2*lam     1]  [  lam     1]\n    [    1   lam], [    1 2*lam], [    3   lam], [    3 2*lam]\n    ]\n**********************************************************************\nFile \"src/sage/modular/modform_hecketriangle/hecke_triangle_groups.py\", line 1387, in sage.modular.modform_hecketriangle.hecke_triangle_groups.?.rational_period_functions\nFailed example:\n    G.rational_period_functions(k=-4, D=14)\nExpected:\n    [-z^4 + 1, 16*z^4 - 16, -16*z^4 + 16]\nGot:\n    [-z^4 + 1, -16*z^4 + 16, 16*z^4 - 16]\n**********************************************************************\n4 items had failures:\n   2 of  27 in sage.modular.modform_hecketriangle.hecke_triangle_groups.?.class_representatives\n   1 of   7 in sage.modular.modform_hecketriangle.hecke_triangle_groups.?.rational_period_functions\n   2 of   9 in sage.modular.modform_hecketriangle.hecke_triangle_groups.?.reduced_elements\n   1 of   5 in sage.modular.modform_hecketriangle.hecke_triangle_groups.?.simple_elements\n    [228 tests, 6 failures, 4.90 s]\n**********************************************************************\nFile \"src/sage/modular/modform_hecketriangle/readme.py\", line 549, in sage.modular.modform_hecketriangle.readme\nFailed example:\n    G.class_representatives(9*G.lam() + 5)\nExpected:\n    [S*T^(-2)*S*T^(-1)*S, T*S*T^2]\nGot:\n    [T*S*T^2, S*T^(-2)*S*T^(-1)*S]\n**********************************************************************\n1 item had failures:\n   1 of 383 in sage.modular.modform_hecketriangle.readme\n    [382 tests, 1 failure, 19.56 s]\n**********************************************************************\nFile \"src/sage/monoids/trace_monoid.py\", line 959, in sage.monoids.trace_monoid.TraceMonoid._repr_\nFailed example:\n    M.<a,b,c,d> = TraceMonoid(I=I); M\nExpected:\n    Trace monoid on 4 generators ([a], [b], [c], [d])\n     with independence relation {{a, d}, {b, c}}\nGot:\n    Trace monoid on 4 generators ([a], [b], [c], [d]) with independence relation {{b, c}, {d, a}}\n**********************************************************************\nFile \"src/sage/monoids/trace_monoid.py\", line 976, in sage.monoids.trace_monoid.TraceMonoid._latex_\nFailed example:\n    M.<a,b,c,d> = TraceMonoid(I=I); latex(M)\nExpected:\n    \\langle a, b, c, d \\mid ad=da,bc=cb \\rangle\nGot:\n    \\langle a, b, c, d \\mid bc=cb,da=ad \\rangle\n**********************************************************************\n2 items had failures:\n   1 of   4 in sage.monoids.trace_monoid.TraceMonoid._latex_\n   1 of   4 in sage.monoids.trace_monoid.TraceMonoid._repr_\n    [186 tests, 2 failures, 4.63 s]\n**********************************************************************\nFile \"src/sage/rings/polynomial/multi_polynomial_ideal.py\", line 4166, in sage.rings.polynomial.multi_polynomial_ideal.NCPolynomialIdeal.groebner_basis\nFailed example:\n    f\nExpected:\n    1/2*y^2*z^7 - 1/4*y*z^8 + 2*x*z^5 + 95*z^6 + 1/2*y^5 - 1/4*y^4*z + x^2*y^2 + 3/2*x^2*y*z + 95*x*y*z^2\nGot:\n    1/2*y^2*z^7 - 1/4*y*z^8 + 95*x*z^5 + 2*z^6 + 1/2*y^5 - 1/4*y^4*z + x^2*y^2 + 189/2*x^2*y*z + 2*x*y*z^2\n**********************************************************************\nFile \"src/sage/rings/polynomial/multi_polynomial_ideal.py\", line 4168, in sage.rings.polynomial.multi_polynomial_ideal.NCPolynomialIdeal.groebner_basis\nFailed example:\n    f.lift(I.gens())\nExpected:\n    [2*x + 95*z, 1/2*y^2 - 1/4*y*z, 0]\nGot:\n    [95*x + 2*z, 1/2*y^2 - 1/4*y*z, 0]\n**********************************************************************\nFile \"src/sage/rings/polynomial/multi_polynomial_ideal.py\", line 4170, in sage.rings.polynomial.multi_polynomial_ideal.NCPolynomialIdeal.groebner_basis\nFailed example:\n    l = f.lift(J.gens()); l\nExpected:\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -1/2*y^2 + 1/4*y*z, 1/2*y^2*z^2 - 1/4*y*z^3 + 2*x + 95*z]\nGot:\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -1/2*y^2 + 1/4*y*z, 1/2*y^2*z^2 - 1/4*y*z^3 + 95*x + 2*z]\n**********************************************************************\n1 item had failures:\n   3 of 111 in sage.rings.polynomial.multi_polynomial_ideal.NCPolynomialIdeal.groebner_basis\n    [917 tests, 3 failures, 10.04 s]\n----------------------------------------------------------------------\nsage -t --long --random-seed=0 src/sage/combinat/rigged_configurations/tensor_product_kr_tableaux.py  # 1 doctest failed\nsage -t --long --random-seed=0 src/sage/geometry/cone.py  # 1 doctest failed\nsage -t --long --random-seed=0 src/sage/geometry/fan_isomorphism.py  # 2 doctests failed\nsage -t --long --random-seed=0 src/sage/geometry/polyhedron/library.py  # 1 doctest failed\nsage -t --long --random-seed=0 src/sage/geometry/triangulation/point_configuration.py  # 2 doctests failed\nsage -t --long --random-seed=0 src/sage/graphs/graph.py  # 1 doctest failed\nsage -t --long --random-seed=0 src/sage/homology/homology_vector_space_with_basis.py  # 2 doctests failed\nsage -t --long --random-seed=0 src/sage/matroids/graphic_matroid.py  # 1 doctest failed\nsage -t --long --random-seed=0 src/sage/modular/modform_hecketriangle/hecke_triangle_groups.py  # 6 doctests failed\nsage -t --long --random-seed=0 src/sage/modular/modform_hecketriangle/readme.py  # 1 doctest failed\nsage -t --long --random-seed=0 src/sage/monoids/trace_monoid.py  # 2 doctests failed\nsage -t --long --random-seed=0 src/sage/rings/polynomial/multi_polynomial_ideal.py  # 3 doctests failed\n----------------------------------------------------------------------\n```",
    "created_at": "2020-08-23T16:27:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430671",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:6" align="right">comment:6</div>

I'm getting various failures on 32-bit apparently due to different iterator order:

```
**********************************************************************
File "src/sage/combinat/rigged_configurations/tensor_product_kr_tableaux.py", line 333, in sage.combinat.rigged_configurations.tensor_product_kr_tableaux.TensorProductOfKirillovReshetikhinTableaux.__iter__
Failed example:
    next(g)
Expected:
    [[2], [4]] (X) [[1]]
Got:
    [[1], [2]] (X) [[1]]
**********************************************************************
1 item had failures:
   1 of   5 in sage.combinat.rigged_configurations.tensor_product_kr_tableaux.TensorProductOfKirillovReshetikhinTableaux.__iter__
    [95 tests, 1 failure, 21.93 s]
**********************************************************************
File "src/sage/geometry/cone.py", line 4059, in sage.geometry.cone.?.semigroup_generators
Failed example:
    halfplane.semigroup_generators()
Expected:
    (N(0, 1), N(1, 0), N(-1, 0))
Got:
    (N(-1, 0), N(1, 0), N(0, 1))
**********************************************************************
1 item had failures:
   1 of  23 in sage.geometry.cone.?.semigroup_generators
    [1241 tests, 1 failure, 18.70 s]
**********************************************************************
File "src/sage/geometry/fan_isomorphism.py", line 124, in sage.geometry.fan_isomorphism.fan_isomorphism_generator
Failed example:
    tuple(fan_isomorphism_generator(fan1, fan2))
Expected:
    (
    [18  1 -5]  [ 6 -3  7]
    [ 4  0 -1]  [ 1 -1  2]
    [ 5  0 -1], [ 2 -1  2]
    )
Got:
    (
    [ 6 -3  7]  [18  1 -5]
    [ 1 -1  2]  [ 4  0 -1]
    [ 2 -1  2], [ 5  0 -1]
    )
**********************************************************************
File "src/sage/geometry/fan_isomorphism.py", line 130, in sage.geometry.fan_isomorphism.fan_isomorphism_generator
Failed example:
    tuple(fan_isomorphism_generator(fan2, fan1))
Expected:
    (
    [ 0 -1  1]  [ 0 -1  1]
    [ 1 -7  2]  [ 2 -2 -5]
    [ 0 -5  4], [ 1  0 -3]
    )
Got:
    (
    [ 0 -1  1]  [ 0 -1  1]
    [ 2 -2 -5]  [ 1 -7  2]
    [ 1  0 -3], [ 0 -5  4]
    )
**********************************************************************
1 item had failures:
   2 of  21 in sage.geometry.fan_isomorphism.fan_isomorphism_generator
    [65 tests, 2 failures, 1.07 s]
**********************************************************************
File "src/sage/geometry/polyhedron/library.py", line 2639, in sage.geometry.polyhedron.library.Polytopes.generalized_permutahedron
Failed example:
    sorted(perm_a2_reg.vertices())
Expected:
    [A vertex at (-1, 0),
     A vertex at (-1/2, -0.866025403784439?),
     A vertex at (-1/2, 0.866025403784439?),
     A vertex at (1/2, -0.866025403784439?),
     A vertex at (1/2, 0.866025403784439?),
     A vertex at (1.000000000000000?, 0.?e-18)]
Got:
    [A vertex at (-1.000000000000000?, 0.?e-18),
     A vertex at (-1/2, -0.866025403784439?),
     A vertex at (-1/2, 0.866025403784439?),
     A vertex at (1/2, -0.866025403784439?),
     A vertex at (1/2, 0.866025403784439?),
     A vertex at (1, 0)]
**********************************************************************
1 item had failures:
   1 of  21 in sage.geometry.polyhedron.library.Polytopes.generalized_permutahedron
    [305 tests, 1 failure, 97.96 s]
**********************************************************************
File "src/sage/geometry/triangulation/point_configuration.py", line 1401, in sage.geometry.triangulation.point_configuration.PointConfiguration.circuits_support
Failed example:
    list( p.circuits_support() )
Expected:
    [(0, 3, 4), (0, 1, 2), (1, 2, 3, 4)]
Got:
    [(0, 1, 2), (0, 3, 4), (1, 2, 3, 4)]
**********************************************************************
File "src/sage/geometry/triangulation/point_configuration.py", line 1471, in sage.geometry.triangulation.point_configuration.PointConfiguration.circuits
Failed example:
    p.circuits()
Expected:
    (((0,), (1, 2), (3, 4)), ((0,), (3, 4), (1, 2)), ((1, 2), (0,), (3, 4)))
Got:
    (((0,), (3, 4), (1, 2)), ((0,), (1, 2), (3, 4)), ((1, 2), (0,), (3, 4)))
**********************************************************************
2 items had failures:
   1 of   6 in sage.geometry.triangulation.point_configuration.PointConfiguration.circuits
   1 of   3 in sage.geometry.triangulation.point_configuration.PointConfiguration.circuits_support
    [214 tests, 2 failures, 19.74 s]
**********************************************************************
File "src/sage/graphs/graph.py", line 7342, in sage.graphs.graph.Graph.cliques_containing_vertex
Failed example:
    sorted(d[(0, 1)])
Expected:
    [[(0, 1), (0, 0)], [(0, 1), (0, 2)], [(0, 1), (1, 1)]]
Got:
    [[(0, 0), (0, 1)], [(0, 2), (0, 1)], [(1, 1), (0, 1)]]
**********************************************************************
1 item had failures:
   1 of  15 in sage.graphs.graph.Graph.cliques_containing_vertex
    [1190 tests, 1 failure, 20.84 s]
**********************************************************************
File "src/sage/homology/homology_vector_space_with_basis.py", line 113, in sage.homology.homology_vector_space_with_basis.HomologyVectorSpaceWithBasis
Failed example:
    x.cup_product(x)
Expected:
    0
Got:
    h^{2,0}
**********************************************************************
File "src/sage/homology/homology_vector_space_with_basis.py", line 115, in sage.homology.homology_vector_space_with_basis.HomologyVectorSpaceWithBasis
Failed example:
    x.cup_product(y)
Expected:
    h^{2,0}
Got:
    0
**********************************************************************
1 item had failures:
   2 of  45 in sage.homology.homology_vector_space_with_basis.HomologyVectorSpaceWithBasis
    [194 tests, 2 failures, 16.93 s]
R[write to console]: Warning messages:
R[write to console]: 1: 
R[write to console]: In sage10 + sage6 :
R[write to console]: 
 
R[write to console]:  longer object length is not a multiple of shorter object length
R[write to console]: 2: 
R[write to console]: In sqrt(sage10) :
R[write to console]:  NaNs produced
R[write to console]: 3: 
R[write to console]: In sqrt(sage4) :
R[write to console]:  NaNs produced
**********************************************************************
File "src/sage/matroids/graphic_matroid.py", line 1659, in sage.matroids.graphic_matroid.GraphicMatroid.graphic_coextensions
Failed example:
    for N1 in I:
        N1.graph().edges(sort=True)
Expected:
    [(0, 1, 0), (0, 3, 1), (0, 4, 'a'), (1, 2, 2), (2, 3, 3)]
    [(0, 1, 0), (0, 3, 1), (1, 4, 2), (2, 3, 3), (2, 4, 'a')]
Got:
    [(0, 1, 0), (0, 3, 1), (0, 4, 'a'), (1, 2, 2), (2, 3, 3)]
    [(0, 3, 1), (0, 4, 0), (1, 2, 2), (1, 4, 'a'), (2, 3, 3)]
**********************************************************************
1 item had failures:
   1 of  27 in sage.matroids.graphic_matroid.GraphicMatroid.graphic_coextensions
    [358 tests, 1 failure, 0.75 s]
**********************************************************************
File "src/sage/modular/modform_hecketriangle/hecke_triangle_groups.py", line 1099, in sage.modular.modform_hecketriangle.hecke_triangle_groups.?.class_representatives
Failed example:
    R
Expected:
    [[V(2)*V(3)], [V(1)*V(2)]]
Got:
    [[V(1)*V(2)], [V(2)*V(3)]]
**********************************************************************
File "src/sage/modular/modform_hecketriangle/hecke_triangle_groups.py", line 1101, in sage.modular.modform_hecketriangle.hecke_triangle_groups.?.class_representatives
Failed example:
    [v.continued_fraction()[1] for v in R]
Expected:
    [(1, 2, 2), (3,)]
Got:
    [(3,), (1, 2, 2)]
**********************************************************************
File "src/sage/modular/modform_hecketriangle/hecke_triangle_groups.py", line 1318, in sage.modular.modform_hecketriangle.hecke_triangle_groups.?.reduced_elements
Failed example:
    R
Expected:
    [
    [ 5*lam     -3]  [ 5*lam     -7]  [4*lam    -3]  [3*lam    -1]
    [     7 -2*lam], [     3 -2*lam], [    3  -lam], [    1     0]
    ]
Got:
    [
    [3*lam    -1]  [ 5*lam     -3]  [ 5*lam     -7]  [4*lam    -3]
    [    1     0], [     7 -2*lam], [     3 -2*lam], [    3  -lam]
    ]
**********************************************************************
File "src/sage/modular/modform_hecketriangle/hecke_triangle_groups.py", line 1323, in sage.modular.modform_hecketriangle.hecke_triangle_groups.?.reduced_elements
Failed example:
    [v.continued_fraction() for v in R]
Expected:
    [((), (1, 2, 2)), ((), (2, 2, 1)), ((), (2, 1, 2)), ((), (3,))]
Got:
    [((), (3,)), ((), (1, 2, 2)), ((), (2, 2, 1)), ((), (2, 1, 2))]
**********************************************************************
File "src/sage/modular/modform_hecketriangle/hecke_triangle_groups.py", line 1350, in sage.modular.modform_hecketriangle.hecke_triangle_groups.?.simple_elements
Failed example:
    G.simple_elements(D=14)
Expected:
    [
    [2*lam     1]  [  lam     1]  [2*lam     3]  [  lam     3]
    [    3   lam], [    3 2*lam], [    1   lam], [    1 2*lam]
    ]
Got:
    [
    [2*lam     3]  [  lam     3]  [2*lam     1]  [  lam     1]
    [    1   lam], [    1 2*lam], [    3   lam], [    3 2*lam]
    ]
**********************************************************************
File "src/sage/modular/modform_hecketriangle/hecke_triangle_groups.py", line 1387, in sage.modular.modform_hecketriangle.hecke_triangle_groups.?.rational_period_functions
Failed example:
    G.rational_period_functions(k=-4, D=14)
Expected:
    [-z^4 + 1, 16*z^4 - 16, -16*z^4 + 16]
Got:
    [-z^4 + 1, -16*z^4 + 16, 16*z^4 - 16]
**********************************************************************
4 items had failures:
   2 of  27 in sage.modular.modform_hecketriangle.hecke_triangle_groups.?.class_representatives
   1 of   7 in sage.modular.modform_hecketriangle.hecke_triangle_groups.?.rational_period_functions
   2 of   9 in sage.modular.modform_hecketriangle.hecke_triangle_groups.?.reduced_elements
   1 of   5 in sage.modular.modform_hecketriangle.hecke_triangle_groups.?.simple_elements
    [228 tests, 6 failures, 4.90 s]
**********************************************************************
File "src/sage/modular/modform_hecketriangle/readme.py", line 549, in sage.modular.modform_hecketriangle.readme
Failed example:
    G.class_representatives(9*G.lam() + 5)
Expected:
    [S*T^(-2)*S*T^(-1)*S, T*S*T^2]
Got:
    [T*S*T^2, S*T^(-2)*S*T^(-1)*S]
**********************************************************************
1 item had failures:
   1 of 383 in sage.modular.modform_hecketriangle.readme
    [382 tests, 1 failure, 19.56 s]
**********************************************************************
File "src/sage/monoids/trace_monoid.py", line 959, in sage.monoids.trace_monoid.TraceMonoid._repr_
Failed example:
    M.<a,b,c,d> = TraceMonoid(I=I); M
Expected:
    Trace monoid on 4 generators ([a], [b], [c], [d])
     with independence relation {{a, d}, {b, c}}
Got:
    Trace monoid on 4 generators ([a], [b], [c], [d]) with independence relation {{b, c}, {d, a}}
**********************************************************************
File "src/sage/monoids/trace_monoid.py", line 976, in sage.monoids.trace_monoid.TraceMonoid._latex_
Failed example:
    M.<a,b,c,d> = TraceMonoid(I=I); latex(M)
Expected:
    \langle a, b, c, d \mid ad=da,bc=cb \rangle
Got:
    \langle a, b, c, d \mid bc=cb,da=ad \rangle
**********************************************************************
2 items had failures:
   1 of   4 in sage.monoids.trace_monoid.TraceMonoid._latex_
   1 of   4 in sage.monoids.trace_monoid.TraceMonoid._repr_
    [186 tests, 2 failures, 4.63 s]
**********************************************************************
File "src/sage/rings/polynomial/multi_polynomial_ideal.py", line 4166, in sage.rings.polynomial.multi_polynomial_ideal.NCPolynomialIdeal.groebner_basis
Failed example:
    f
Expected:
    1/2*y^2*z^7 - 1/4*y*z^8 + 2*x*z^5 + 95*z^6 + 1/2*y^5 - 1/4*y^4*z + x^2*y^2 + 3/2*x^2*y*z + 95*x*y*z^2
Got:
    1/2*y^2*z^7 - 1/4*y*z^8 + 95*x*z^5 + 2*z^6 + 1/2*y^5 - 1/4*y^4*z + x^2*y^2 + 189/2*x^2*y*z + 2*x*y*z^2
**********************************************************************
File "src/sage/rings/polynomial/multi_polynomial_ideal.py", line 4168, in sage.rings.polynomial.multi_polynomial_ideal.NCPolynomialIdeal.groebner_basis
Failed example:
    f.lift(I.gens())
Expected:
    [2*x + 95*z, 1/2*y^2 - 1/4*y*z, 0]
Got:
    [95*x + 2*z, 1/2*y^2 - 1/4*y*z, 0]
**********************************************************************
File "src/sage/rings/polynomial/multi_polynomial_ideal.py", line 4170, in sage.rings.polynomial.multi_polynomial_ideal.NCPolynomialIdeal.groebner_basis
Failed example:
    l = f.lift(J.gens()); l
Expected:
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -1/2*y^2 + 1/4*y*z, 1/2*y^2*z^2 - 1/4*y*z^3 + 2*x + 95*z]
Got:
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -1/2*y^2 + 1/4*y*z, 1/2*y^2*z^2 - 1/4*y*z^3 + 95*x + 2*z]
**********************************************************************
1 item had failures:
   3 of 111 in sage.rings.polynomial.multi_polynomial_ideal.NCPolynomialIdeal.groebner_basis
    [917 tests, 3 failures, 10.04 s]
----------------------------------------------------------------------
sage -t --long --random-seed=0 src/sage/combinat/rigged_configurations/tensor_product_kr_tableaux.py  # 1 doctest failed
sage -t --long --random-seed=0 src/sage/geometry/cone.py  # 1 doctest failed
sage -t --long --random-seed=0 src/sage/geometry/fan_isomorphism.py  # 2 doctests failed
sage -t --long --random-seed=0 src/sage/geometry/polyhedron/library.py  # 1 doctest failed
sage -t --long --random-seed=0 src/sage/geometry/triangulation/point_configuration.py  # 2 doctests failed
sage -t --long --random-seed=0 src/sage/graphs/graph.py  # 1 doctest failed
sage -t --long --random-seed=0 src/sage/homology/homology_vector_space_with_basis.py  # 2 doctests failed
sage -t --long --random-seed=0 src/sage/matroids/graphic_matroid.py  # 1 doctest failed
sage -t --long --random-seed=0 src/sage/modular/modform_hecketriangle/hecke_triangle_groups.py  # 6 doctests failed
sage -t --long --random-seed=0 src/sage/modular/modform_hecketriangle/readme.py  # 1 doctest failed
sage -t --long --random-seed=0 src/sage/monoids/trace_monoid.py  # 2 doctests failed
sage -t --long --random-seed=0 src/sage/rings/polynomial/multi_polynomial_ideal.py  # 3 doctests failed
----------------------------------------------------------------------
```



---

archive/issue_events_380758.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-23T16:27:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380758"
}
```



---

archive/issue_events_380759.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-23T16:27:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380759"
}
```



---

archive/issue_comments_430672.json:
```json
{
    "body": "Changed commit from **[`53b569d`](https://github.com/sagemath/sagetrac-mirror/commit/53b569d68ddca39a0c5b33ab59ce77dd651da21a)** to **[`42bfb1f`](https://github.com/sagemath/sagetrac-mirror/commit/42bfb1f7a85fdad131bd9b278105641952a54bfb)**",
    "created_at": "2020-08-24T15:37:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430672",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`53b569d`](https://github.com/sagemath/sagetrac-mirror/commit/53b569d68ddca39a0c5b33ab59ce77dd651da21a)** to **[`42bfb1f`](https://github.com/sagemath/sagetrac-mirror/commit/42bfb1f7a85fdad131bd9b278105641952a54bfb)**



---

archive/issue_comments_430673.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/42bfb1f7a85fdad131bd9b278105641952a54bfb\"><code>42bfb1f</code></a></td><td><code>Merge tag '9.2.beta10' into t/27754/public/python3.8</code></td></tr></table>\n",
    "created_at": "2020-08-24T15:37:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430673",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/42bfb1f7a85fdad131bd9b278105641952a54bfb"><code>42bfb1f</code></a></td><td><code>Merge tag '9.2.beta10' into t/27754/public/python3.8</code></td></tr></table>




---

archive/issue_comments_430674.json:
```json
{
    "body": "Changed commit from **[`42bfb1f`](https://github.com/sagemath/sagetrac-mirror/commit/42bfb1f7a85fdad131bd9b278105641952a54bfb)** to **[`d167e08`](https://github.com/sagemath/sagetrac-mirror/commit/d167e08bb10a7c0b36be21edeffd75e8b222d89b)**",
    "created_at": "2020-08-24T16:51:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430674",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`42bfb1f`](https://github.com/sagemath/sagetrac-mirror/commit/42bfb1f7a85fdad131bd9b278105641952a54bfb)** to **[`d167e08`](https://github.com/sagemath/sagetrac-mirror/commit/d167e08bb10a7c0b36be21edeffd75e8b222d89b)**



---

archive/issue_comments_430675.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d167e08bb10a7c0b36be21edeffd75e8b222d89b\"><code>d167e08</code></a></td><td><code>Make doctests more flexible for Python 3.8 on 32bit</code></td></tr></table>\n",
    "created_at": "2020-08-24T16:51:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430675",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d167e08bb10a7c0b36be21edeffd75e8b222d89b"><code>d167e08</code></a></td><td><code>Make doctests more flexible for Python 3.8 on 32bit</code></td></tr></table>




---

archive/issue_events_380760.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-24T16:52:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380760"
}
```



---

archive/issue_events_380761.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-24T16:52:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380761"
}
```



---

archive/issue_comments_430676.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nThis fixes all failures except for the following two:\n\n```\nsage -t --random-seed=0 src/sage/homology/homology_vector_space_with_basis.py  # 2 doctests failed\nsage -t --random-seed=0 src/sage/modular/modform_hecketriangle/hecke_triangle_groups.py  # 1 doctest failed\n```\nHelp with these would be welcome",
    "created_at": "2020-08-25T01:21:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430676",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:0" align="right">comment:0</div>

This fixes all failures except for the following two:

```
sage -t --random-seed=0 src/sage/homology/homology_vector_space_with_basis.py  # 2 doctests failed
sage -t --random-seed=0 src/sage/modular/modform_hecketriangle/hecke_triangle_groups.py  # 1 doctest failed
```
Help with these would be welcome



---

archive/issue_comments_430677.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThere must be some way for me to run a 32-bit machine via Docker so I can look into these, but I can't figure out how.",
    "created_at": "2020-08-25T03:33:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430677",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:1" align="right">comment:1</div>

There must be some way for me to run a 32-bit machine via Docker so I can look into these, but I can't figure out how.



---

archive/issue_comments_430678.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nYes, for example `EXTRA_CONFIGURE_ARGS=\"--without-system-suitesparse\" tox -e docker-ubuntu-eoan-i386-standard-python3_spkg`",
    "created_at": "2020-08-25T03:57:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430678",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2" align="right">comment:2</div>

Yes, for example `EXTRA_CONFIGURE_ARGS="--without-system-suitesparse" tox -e docker-ubuntu-eoan-i386-standard-python3_spkg`



---

archive/issue_comments_430679.json:
```json
{
    "body": "<div id=\"comment:203\" align=\"right\">comment:203</div>\n\nReplying to [@mkoeppe](#comment:202):\n> Yes, for example `EXTRA_CONFIGURE_ARGS=\"--without-system-suitesparse\" tox -e docker-ubuntu-eoan-i386-standard-python3_spkg`\n\nWell, that didn't work for me (with `EXTRA_CONFIGURE_ARGS=\"--with-system-suitesparse=no\"`): the build failed for `cypari` and `giac`. But I used VirtualBox to install a 32-bit Debian machine, and I see the doctest failures. I actually haven't looked at the hecke_triangle_groups.py failure \u2014 not my area of expertise \u2014 but I understand what's happening with the homology failure. There are some unsorted pieces of data lying around, and when they get converted to lists or tuples, how they get converted affects the answer. Both answers (32-bit and 64-bit) are mathematically correct, it's just that you get a different choice of bases in the two cases.\n\nI propose changing to a case where the sorting won't affect the answer.",
    "created_at": "2020-08-26T03:32:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430679",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:203" align="right">comment:203</div>

Replying to [@mkoeppe](#comment:202):
> Yes, for example `EXTRA_CONFIGURE_ARGS="--without-system-suitesparse" tox -e docker-ubuntu-eoan-i386-standard-python3_spkg`

Well, that didn't work for me (with `EXTRA_CONFIGURE_ARGS="--with-system-suitesparse=no"`): the build failed for `cypari` and `giac`. But I used VirtualBox to install a 32-bit Debian machine, and I see the doctest failures. I actually haven't looked at the hecke_triangle_groups.py failure — not my area of expertise — but I understand what's happening with the homology failure. There are some unsorted pieces of data lying around, and when they get converted to lists or tuples, how they get converted affects the answer. Both answers (32-bit and 64-bit) are mathematically correct, it's just that you get a different choice of bases in the two cases.

I propose changing to a case where the sorting won't affect the answer.



---

archive/issue_comments_430680.json:
```json
{
    "body": "Changed commit from **[`d167e08`](https://github.com/sagemath/sagetrac-mirror/commit/d167e08bb10a7c0b36be21edeffd75e8b222d89b)** to **[`d85c4ba`](https://github.com/sagemath/sagetrac-mirror/commit/d85c4ba66d5bf4b03e4f480da0ca8d49ade49fb2)**",
    "created_at": "2020-08-26T03:48:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430680",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d167e08`](https://github.com/sagemath/sagetrac-mirror/commit/d167e08bb10a7c0b36be21edeffd75e8b222d89b)** to **[`d85c4ba`](https://github.com/sagemath/sagetrac-mirror/commit/d85c4ba66d5bf4b03e4f480da0ca8d49ade49fb2)**



---

archive/issue_comments_430681.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d85c4ba66d5bf4b03e4f480da0ca8d49ade49fb2\"><code>d85c4ba</code></a></td><td><code>trac 27754: homology doctest fix</code></td></tr></table>\n",
    "created_at": "2020-08-26T03:48:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430681",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d85c4ba66d5bf4b03e4f480da0ca8d49ade49fb2"><code>d85c4ba</code></a></td><td><code>trac 27754: homology doctest fix</code></td></tr></table>




---

archive/issue_comments_430682.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nFor the hecke_triangle_groups.py problem, this seems to fix it, but I don't know the mathematics of what's going on, nor have I looked at the code:\n\n```diff\ndiff --git a/src/sage/modular/modform_hecketriangle/hecke_triangle_groups.py b/src/sage/modular/modform_hecketriangle/hecke_triangle_groups.py\nindex 47ba82eb8e..cb336f64c4 100644\n--- a/src/sage/modular/modform_hecketriangle/hecke_triangle_groups.py\n+++ b/src/sage/modular/modform_hecketriangle/hecke_triangle_groups.py\n@@ -1096,7 +1096,7 @@ class HeckeTriangleGroup(FinitelyGeneratedMatrixGroup_generic,\n             [[U], [U^(-1)]]\n \n             sage: R = G.class_representatives(14)\n-            sage: R\n+            sage: sorted(R)\n             [[V(2)*V(3)], [V(1)*V(2)]]\n             sage: sorted(v.continued_fraction()[1] for v in R)\n             [(1, 2, 2), (3,)]\n```",
    "created_at": "2020-08-26T03:49:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430682",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:5" align="right">comment:5</div>

For the hecke_triangle_groups.py problem, this seems to fix it, but I don't know the mathematics of what's going on, nor have I looked at the code:

```diff
diff --git a/src/sage/modular/modform_hecketriangle/hecke_triangle_groups.py b/src/sage/modular/modform_hecketriangle/hecke_triangle_groups.py
index 47ba82eb8e..cb336f64c4 100644
--- a/src/sage/modular/modform_hecketriangle/hecke_triangle_groups.py
+++ b/src/sage/modular/modform_hecketriangle/hecke_triangle_groups.py
@@ -1096,7 +1096,7 @@ class HeckeTriangleGroup(FinitelyGeneratedMatrixGroup_generic,
             [[U], [U^(-1)]]
 
             sage: R = G.class_representatives(14)
-            sage: R
+            sage: sorted(R)
             [[V(2)*V(3)], [V(1)*V(2)]]
             sage: sorted(v.continued_fraction()[1] for v in R)
             [(1, 2, 2), (3,)]
```



---

archive/issue_comments_430683.json:
```json
{
    "body": "<div id=\"comment:206\" align=\"right\">comment:206</div>\n\nReplying to [@jhpalmieri](#comment:205):\n> For the hecke_triangle_groups.py problem, this seems to fix it, but I don't know the mathematics of what's going on, nor have I looked at the code:\n\n[docs](https://doc.sagemath.org/html/en/reference/modfrm_hecketriangle/sage/modular/modform_hecketriangle/hecke_triangle_groups.html) say that it's a list of representatives, with no  meaning attached to the order, so your fix is OK.",
    "created_at": "2020-08-26T10:14:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430683",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:206" align="right">comment:206</div>

Replying to [@jhpalmieri](#comment:205):
> For the hecke_triangle_groups.py problem, this seems to fix it, but I don't know the mathematics of what's going on, nor have I looked at the code:

[docs](https://doc.sagemath.org/html/en/reference/modfrm_hecketriangle/sage/modular/modform_hecketriangle/hecke_triangle_groups.html) say that it's a list of representatives, with no  meaning attached to the order, so your fix is OK.



---

archive/issue_comments_430684.json:
```json
{
    "body": "<div id=\"comment:207\" align=\"right\">comment:207</div>\n\nReplying to [@dimpase](#comment:206):\n> Replying to [@jhpalmieri](#comment:205):\n> > For the hecke_triangle_groups.py problem, this seems to fix it, but I don't know the mathematics of what's going on, nor have I looked at the code:\n\n> \n> [docs](https://doc.sagemath.org/html/en/reference/modfrm_hecketriangle/sage/modular/modform_hecketriangle/hecke_triangle_groups.html) say that it's a list of representatives, with no  meaning attached to the order, so your fix is OK.\n\nI'll push a branch after I do a bit more testing, unless someone beats me to it. (One question is how the elements in the list R are sorted. I can't tell after looking at the code for a few minutes. But this does seem to work.)",
    "created_at": "2020-08-26T17:52:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430684",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:207" align="right">comment:207</div>

Replying to [@dimpase](#comment:206):
> Replying to [@jhpalmieri](#comment:205):
> > For the hecke_triangle_groups.py problem, this seems to fix it, but I don't know the mathematics of what's going on, nor have I looked at the code:

> 
> [docs](https://doc.sagemath.org/html/en/reference/modfrm_hecketriangle/sage/modular/modform_hecketriangle/hecke_triangle_groups.html) say that it's a list of representatives, with no  meaning attached to the order, so your fix is OK.

I'll push a branch after I do a bit more testing, unless someone beats me to it. (One question is how the elements in the list R are sorted. I can't tell after looking at the code for a few minutes. But this does seem to work.)



---

archive/issue_comments_430685.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b9d451c7740613f38194cba3c4bd6f428cdc19e5\"><code>b9d451c</code></a></td><td><code>trac 27754: 32-bit Python 3.8 doctest fix in hecke_triangle_groups.py</code></td></tr></table>\n",
    "created_at": "2020-08-26T23:46:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430685",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b9d451c7740613f38194cba3c4bd6f428cdc19e5"><code>b9d451c</code></a></td><td><code>trac 27754: 32-bit Python 3.8 doctest fix in hecke_triangle_groups.py</code></td></tr></table>




---

archive/issue_comments_430686.json:
```json
{
    "body": "Changed commit from **[`d85c4ba`](https://github.com/sagemath/sagetrac-mirror/commit/d85c4ba66d5bf4b03e4f480da0ca8d49ade49fb2)** to **[`b9d451c`](https://github.com/sagemath/sagetrac-mirror/commit/b9d451c7740613f38194cba3c4bd6f428cdc19e5)**",
    "created_at": "2020-08-26T23:46:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430686",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d85c4ba`](https://github.com/sagemath/sagetrac-mirror/commit/d85c4ba66d5bf4b03e4f480da0ca8d49ade49fb2)** to **[`b9d451c`](https://github.com/sagemath/sagetrac-mirror/commit/b9d451c7740613f38194cba3c4bd6f428cdc19e5)**



---

archive/issue_comments_430687.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nOkay, this works for me on OS X with the system Python and Sage's Python 3.8, and the same on a virtual Debian 32-bit machine.",
    "created_at": "2020-08-26T23:47:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430687",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:9" align="right">comment:9</div>

Okay, this works for me on OS X with the system Python and Sage's Python 3.8, and the same on a virtual Debian 32-bit machine.



---

archive/issue_comments_430688.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nGreat!",
    "created_at": "2020-08-27T01:27:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430688",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:0" align="right">comment:0</div>

Great!



---

archive/issue_events_380762.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-27T01:27:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380762"
}
```



---

archive/issue_events_380763.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-27T01:27:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380763"
}
```



---

archive/issue_comments_430689.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nMerge conflict",
    "created_at": "2020-08-30T21:22:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430689",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:1" align="right">comment:1</div>

Merge conflict



---

archive/issue_events_380764.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-30T21:22:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380764"
}
```



---

archive/issue_events_380765.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-30T21:22:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380765"
}
```



---

archive/issue_comments_430690.json:
```json
{
    "body": "Changed commit from **[`b9d451c`](https://github.com/sagemath/sagetrac-mirror/commit/b9d451c7740613f38194cba3c4bd6f428cdc19e5)** to **[`a9b6965`](https://github.com/sagemath/sagetrac-mirror/commit/a9b69650667022f4a46b59ac90994254389931c1)**",
    "created_at": "2020-08-30T21:31:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430690",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b9d451c`](https://github.com/sagemath/sagetrac-mirror/commit/b9d451c7740613f38194cba3c4bd6f428cdc19e5)** to **[`a9b6965`](https://github.com/sagemath/sagetrac-mirror/commit/a9b69650667022f4a46b59ac90994254389931c1)**



---

archive/issue_comments_430691.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/488bba4768c034c741fa7e929168d354a5a86306\"><code>488bba4</code></a></td><td><code>on macOS set OMP_NUM_THREADS to 1 for docbuild and tests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b11a706e1267b385099d8691b4468efd974f94d\"><code>4b11a70</code></a></td><td><code>use the correct import location, not six.*</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a9b69650667022f4a46b59ac90994254389931c1\"><code>a9b6965</code></a></td><td><code>Merge commit '4b11a706e1267b385099d8691b4468efd974f94d' of git://trac.sagemath.org/sage into t/27754/public/python3.8</code></td></tr></table>\n",
    "created_at": "2020-08-30T21:31:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430691",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/488bba4768c034c741fa7e929168d354a5a86306"><code>488bba4</code></a></td><td><code>on macOS set OMP_NUM_THREADS to 1 for docbuild and tests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b11a706e1267b385099d8691b4468efd974f94d"><code>4b11a70</code></a></td><td><code>use the correct import location, not six.*</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a9b69650667022f4a46b59ac90994254389931c1"><code>a9b6965</code></a></td><td><code>Merge commit '4b11a706e1267b385099d8691b4468efd974f94d' of git://trac.sagemath.org/sage into t/27754/public/python3.8</code></td></tr></table>




---

archive/issue_events_380766.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-30T21:31:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380766"
}
```



---

archive/issue_events_380767.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-30T21:31:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380767"
}
```



---

archive/issue_comments_430692.json:
```json
{
    "body": "Changed dependencies from **#28197, #29042, #29861, #30162, #30225, #30127, #30144, #30345, #30365, #30140** to **#28197, #29042, #29861, #30162, #30225, #30127, #30144, #30345, #30365, #30140, #30351**",
    "created_at": "2020-08-30T21:33:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430692",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#28197, #29042, #29861, #30162, #30225, #30127, #30144, #30345, #30365, #30140** to **#28197, #29042, #29861, #30162, #30225, #30127, #30144, #30345, #30365, #30140, #30351**



---

archive/issue_comments_430693.json:
```json
{
    "body": "Changed commit from **[`a9b6965`](https://github.com/sagemath/sagetrac-mirror/commit/a9b69650667022f4a46b59ac90994254389931c1)** to **[`f1cda12`](https://github.com/sagemath/sagetrac-mirror/commit/f1cda120e6c715ec6bdd6d8bb776b3b0aa921794)**",
    "created_at": "2020-08-30T22:37:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430693",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a9b6965`](https://github.com/sagemath/sagetrac-mirror/commit/a9b69650667022f4a46b59ac90994254389931c1)** to **[`f1cda12`](https://github.com/sagemath/sagetrac-mirror/commit/f1cda120e6c715ec6bdd6d8bb776b3b0aa921794)**



---

archive/issue_events_380768.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2020-08-30T22:37:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380768"
}
```



---

archive/issue_events_380769.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2020-08-30T22:37:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380769"
}
```



---

archive/issue_comments_430694.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f1cda120e6c715ec6bdd6d8bb776b3b0aa921794\"><code>f1cda12</code></a></td><td><code>Fixup merge</code></td></tr></table>\n",
    "created_at": "2020-08-30T22:37:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430694",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f1cda120e6c715ec6bdd6d8bb776b3b0aa921794"><code>f1cda12</code></a></td><td><code>Fixup merge</code></td></tr></table>




---

archive/issue_events_380770.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-30T22:38:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380770"
}
```



---

archive/issue_events_380771.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-30T22:38:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380771"
}
```



---

archive/issue_events_380772.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-03T02:51:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380772"
}
```



---

archive/issue_events_380773.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-03T02:51:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "label": "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p: 1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380773"
}
```



---

archive/issue_comments_430695.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nFWIW, worked for MeToo(TM) :\n\nRebuilding `2.9.beta11`+#27754 on Debian sesting running on core i7 + 16 GB RAM gives results identical to those obtained on the same machine without #27754 (see [sage-release](https://groups.google.com/d/msg/sage-release/IiGznoPMATI/fjEYi0IaCQAJ)). And `$sSAGE_LOCAL\\bin\\python*` are symlinks to `\\usr\\bin\\`...",
    "created_at": "2020-09-04T09:15:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430695",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:8" align="right">comment:8</div>

FWIW, worked for MeToo(TM) :

Rebuilding `2.9.beta11`+#27754 on Debian sesting running on core i7 + 16 GB RAM gives results identical to those obtained on the same machine without #27754 (see [sage-release](https://groups.google.com/d/msg/sage-release/IiGznoPMATI/fjEYi0IaCQAJ)). And `$sSAGE_LOCAL\bin\python*` are symlinks to `\usr\bin\`...



---

archive/issue_comments_430696.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nit even works on Rasberry Pi 4 (armv7l).",
    "created_at": "2020-09-04T09:26:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430696",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:9" align="right">comment:9</div>

it even works on Rasberry Pi 4 (armv7l).



---

archive/issue_events_380774.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-09-06T21:52:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380774"
}
```



---

archive/issue_events_380775.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "d96db5467d3f722f3f71c8b9fb0241a0c953057d",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-09-06T21:52:04Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27754#event-380775"
}
```



---

archive/issue_comments_430697.json:
```json
{
    "body": "Changed branch from **[public/python3.8](https://github.com/sagemath/sagetrac-mirror/tree/public/python3.8)** to **[`f1cda12`](https://github.com/sagemath/sagetrac-mirror/commit/f1cda120e6c715ec6bdd6d8bb776b3b0aa921794)**",
    "created_at": "2020-09-06T21:52:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430697",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/python3.8](https://github.com/sagemath/sagetrac-mirror/tree/public/python3.8)** to **[`f1cda12`](https://github.com/sagemath/sagetrac-mirror/commit/f1cda120e6c715ec6bdd6d8bb776b3b0aa921794)**



---

archive/issue_comments_430698.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nWonderful to have this in Sage 9.2.\n\nNext episode:\n\n- #30184: Support Python 3.9\n\n(Python 3.9.rc2 is expected on 2020-09-14\nand Python 3.9 final on 2020-10-05.)",
    "created_at": "2020-09-11T00:48:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430698",
    "user": "https://github.com/slel"
}
```

<div id="comment:1" align="right">comment:1</div>

Wonderful to have this in Sage 9.2.

Next episode:

- #30184: Support Python 3.9

(Python 3.9.rc2 is expected on 2020-09-14
and Python 3.9 final on 2020-10-05.)



---

archive/issue_comments_430699.json:
```json
{
    "body": "Changed commit from **[`f1cda12`](https://github.com/sagemath/sagetrac-mirror/commit/f1cda120e6c715ec6bdd6d8bb776b3b0aa921794)** to none",
    "created_at": "2020-09-11T00:48:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27754#issuecomment-430699",
    "user": "https://github.com/slel"
}
```

Changed commit from **[`f1cda12`](https://github.com/sagemath/sagetrac-mirror/commit/f1cda120e6c715ec6bdd6d8bb776b3b0aa921794)** to none
