# Issue 27926: Preserve backend for polytopal constructions

archive/issues_027689.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nCurrently constructions of new polyhedra in `Polyhedron_base` do not preserve the backend:\n\n```\nsage: Polyhedron(vertices=[[0]], backend='field').pyramid().backend()\n'ppl'\n```\n\nThis ticket fixes this.\n\nThis respects the users intentions, who might have chosen a specific backend for a good reason. Also, once #25097 is merged, this is needed to have the constructions work for polyhedra over number fields.\n\nMore precisely the constructions are:\n\n- `minkowski_sum` (taken care of by `@coerce_binop` and constructing from `self.parent().element_class`)\n- `minkowski_difference` (taken care of by `@coerce_binop` and constructing from `self.parent().element_class`)\n- `translation`,\n- `product`,\n- `join`,\n- `subdirect_sum`,\n- `direct_sum`,\n- `dilation`,\n- `convex_hull` (taken care of by `@coerce_binop` and constructing from `self.parent().element_class`),\n- `intersection` (taken care of by `@coerce_binop` and constructing from `self.parent().element_class`),\n- `truncation`,\n- `face_truncation`,\n- `stack`,\n- `lawrence_extension`,\n- `lawrence_polytope`,\n- `polar` (fixed already, #25081),\n- `pyramid`,\n- `bipyramid`,\n- `prism`,\n- `face_split`,\n- `affine_hull`.\n\nCC:  @jplab @videlec\n\nComponent: **geometry**\n\nKeywords: **polytopes, backend, normaliz**\n\nAuthor: **Jonathan Kliem**\n\nBranch: **[`a3a96bc`](https://github.com/sagemath/sagetrac-mirror/commit/a3a96bc413727816c16705c4f03400429ee36445)**\n\nReviewer: **Vincent Delecroix**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/27926_\n\n",
    "closed_at": "2019-06-27T20:13:18Z",
    "created_at": "2019-06-04T12:42:08Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20geometry",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.9",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Preserve backend for polytopal constructions",
    "type": "issue",
    "updated_at": "2019-08-30T13:59:27Z",
    "url": "https://github.com/sagemath/sage/issues/27926",
    "user": "https://github.com/kliem"
}
```
<div id="comment:0"></div>

Currently constructions of new polyhedra in `Polyhedron_base` do not preserve the backend:

```
sage: Polyhedron(vertices=[[0]], backend='field').pyramid().backend()
'ppl'
```

This ticket fixes this.

This respects the users intentions, who might have chosen a specific backend for a good reason. Also, once #25097 is merged, this is needed to have the constructions work for polyhedra over number fields.

More precisely the constructions are:

- `minkowski_sum` (taken care of by `@coerce_binop` and constructing from `self.parent().element_class`)
- `minkowski_difference` (taken care of by `@coerce_binop` and constructing from `self.parent().element_class`)
- `translation`,
- `product`,
- `join`,
- `subdirect_sum`,
- `direct_sum`,
- `dilation`,
- `convex_hull` (taken care of by `@coerce_binop` and constructing from `self.parent().element_class`),
- `intersection` (taken care of by `@coerce_binop` and constructing from `self.parent().element_class`),
- `truncation`,
- `face_truncation`,
- `stack`,
- `lawrence_extension`,
- `lawrence_polytope`,
- `polar` (fixed already, #25081),
- `pyramid`,
- `bipyramid`,
- `prism`,
- `face_split`,
- `affine_hull`.

CC:  @jplab @videlec

Component: **geometry**

Keywords: **polytopes, backend, normaliz**

Author: **Jonathan Kliem**

Branch: **[`a3a96bc`](https://github.com/sagemath/sagetrac-mirror/commit/a3a96bc413727816c16705c4f03400429ee36445)**

Reviewer: **Vincent Delecroix**

_Issue created by migration from https://trac.sagemath.org/ticket/27926_





---

archive/issue_events_379959.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-06-04T12:42:08Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27926#event-379959"
}
```



---

archive/issue_events_379960.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-06-04T12:42:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20geometry",
    "label_color": "0000ff",
    "label_name": "c: geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27926#event-379960"
}
```



---

archive/issue_events_379961.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-06-04T12:42:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27926#event-379961"
}
```



---

archive/issue_events_379962.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-06-04T12:42:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27926#event-379962"
}
```



---

archive/issue_comments_433841.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,22 +11,22 @@\n \n More precisely the constructions are:\n \n-- `minkowski_sum` (seems to respect backend already)\n-- `minkowski_difference` (seems to respect backend already)\n+- `minkowski_sum` (taken care of by `@coerce_binop` and constructing from `self.parent().element_class`)\n+- `minkowski_difference` (taken care of by `@coerce_binop` and constructing from `self.parent().element_class`)\n - `translation`,\n - `product`,\n - `join`,\n - `subdirect_sum`,\n - `direct_sum`,\n - `dilation`,\n-- `convex_hull` (seems to respect backend already),\n-- `intersection` (seems to respect backend),\n+- `convex_hull` (taken care of by `@coerce_binop` and constructing from `self.parent().element_class`),\n+- `intersection` (taken care of by `@coerce_binop` and constructing from `self.parent().element_class`),\n - `truncation`,\n - `face_truncation`,\n - `stack`,\n - `lawrence_extension`,\n - `lawrence_polytope`,\n-- `polar` (respects backend, but in a different way),\n+- `polar` (fixed already, #25081),\n - `pyramid`,\n - `bipyramid`,\n - `prism`,\n``````\n",
    "created_at": "2019-06-04T20:44:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27926#issuecomment-433841",
    "user": "https://github.com/kliem"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,22 +11,22 @@
 
 More precisely the constructions are:
 
-- `minkowski_sum` (seems to respect backend already)
-- `minkowski_difference` (seems to respect backend already)
+- `minkowski_sum` (taken care of by `@coerce_binop` and constructing from `self.parent().element_class`)
+- `minkowski_difference` (taken care of by `@coerce_binop` and constructing from `self.parent().element_class`)
 - `translation`,
 - `product`,
 - `join`,
 - `subdirect_sum`,
 - `direct_sum`,
 - `dilation`,
-- `convex_hull` (seems to respect backend already),
-- `intersection` (seems to respect backend),
+- `convex_hull` (taken care of by `@coerce_binop` and constructing from `self.parent().element_class`),
+- `intersection` (taken care of by `@coerce_binop` and constructing from `self.parent().element_class`),
 - `truncation`,
 - `face_truncation`,
 - `stack`,
 - `lawrence_extension`,
 - `lawrence_polytope`,
-- `polar` (respects backend, but in a different way),
+- `polar` (fixed already, #25081),
 - `pyramid`,
 - `bipyramid`,
 - `prism`,
``````




---

archive/issue_comments_433842.json:
```json
{
    "body": "Branch: **[public/27926](https://github.com/sagemath/sagetrac-mirror/tree/public/27926)**",
    "created_at": "2019-06-04T20:59:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27926#issuecomment-433842",
    "user": "https://github.com/kliem"
}
```

Branch: **[public/27926](https://github.com/sagemath/sagetrac-mirror/tree/public/27926)**



---

archive/issue_comments_433843.json:
```json
{
    "body": "Commit: **[`716fb69`](https://github.com/sagemath/sagetrac-mirror/commit/716fb6975472331688cc108b524b80bebaef2360)**",
    "created_at": "2019-06-04T20:59:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27926#issuecomment-433843",
    "user": "https://github.com/kliem"
}
```

Commit: **[`716fb69`](https://github.com/sagemath/sagetrac-mirror/commit/716fb6975472331688cc108b524b80bebaef2360)**



---

archive/issue_events_379963.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-06-04T20:59:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27926#event-379963"
}
```



---

archive/issue_comments_433844.json:
```json
{
    "body": "Changed commit from **[`716fb69`](https://github.com/sagemath/sagetrac-mirror/commit/716fb6975472331688cc108b524b80bebaef2360)** to **[`1635e50`](https://github.com/sagemath/sagetrac-mirror/commit/1635e50536aac0360a0cf40b7a99e95dbbba42a9)**",
    "created_at": "2019-06-04T21:01:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27926#issuecomment-433844",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`716fb69`](https://github.com/sagemath/sagetrac-mirror/commit/716fb6975472331688cc108b524b80bebaef2360)** to **[`1635e50`](https://github.com/sagemath/sagetrac-mirror/commit/1635e50536aac0360a0cf40b7a99e95dbbba42a9)**



---

archive/issue_comments_433845.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1635e50536aac0360a0cf40b7a99e95dbbba42a9\"><code>1635e50</code></a></td><td><code>preserve backend for polytopal constructions</code></td></tr></table>\n",
    "created_at": "2019-06-04T21:01:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27926#issuecomment-433845",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1635e50536aac0360a0cf40b7a99e95dbbba42a9"><code>1635e50</code></a></td><td><code>preserve backend for polytopal constructions</code></td></tr></table>




---

archive/issue_comments_433846.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThis is not likely to be a good idea\n\n```\n+        return Polyhedron(vertices=new_vertices, rays=new_rays, lines=new_lines, base_ring=new_ring, backend=self.backend())\n```\nBackends do not support all base rings. For example if you have a polytope with backend PPL and then translate with `sqrt(2)` that would not work.",
    "created_at": "2019-06-05T06:53:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27926#issuecomment-433846",
    "user": "https://github.com/videlec"
}
```

<div id="comment:4" align="right">comment:4</div>

This is not likely to be a good idea

```
+        return Polyhedron(vertices=new_vertices, rays=new_rays, lines=new_lines, base_ring=new_ring, backend=self.backend())
```
Backends do not support all base rings. For example if you have a polytope with backend PPL and then translate with `sqrt(2)` that would not work.



---

archive/issue_events_379964.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-06-05T06:53:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27926#event-379964"
}
```



---

archive/issue_events_379965.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-06-05T06:53:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27926#event-379965"
}
```



---

archive/issue_comments_433847.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nYou should add `backend=self.backend()` only if the base ring is identical.",
    "created_at": "2019-06-05T06:54:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27926#issuecomment-433847",
    "user": "https://github.com/videlec"
}
```

<div id="comment:5" align="right">comment:5</div>

You should add `backend=self.backend()` only if the base ring is identical.



---

archive/issue_comments_433848.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI missed this instance. I'll fix it like the other methods.\nThere is a new function `test_backend` that tests if a combination of `backend` and `base_ring` will work.\n\nReplying to [@videlec](#comment%3A5):\n> You should add `backend=self.backend()` only if the base ring is identical.",
    "created_at": "2019-06-05T07:48:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27926#issuecomment-433848",
    "user": "https://github.com/kliem"
}
```

<div id="comment:6" align="right">comment:6</div>

I missed this instance. I'll fix it like the other methods.
There is a new function `test_backend` that tests if a combination of `backend` and `base_ring` will work.

Replying to [@videlec](#comment%3A5):
> You should add `backend=self.backend()` only if the base ring is identical.



---

archive/issue_comments_433849.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/937891c8395e5905f2d2c5a074f79ffd0ff3e60e\"><code>937891c</code></a></td><td><code>added backend check in translation</code></td></tr></table>\n",
    "created_at": "2019-06-05T09:39:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27926#issuecomment-433849",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/937891c8395e5905f2d2c5a074f79ffd0ff3e60e"><code>937891c</code></a></td><td><code>added backend check in translation</code></td></tr></table>




---

archive/issue_comments_433850.json:
```json
{
    "body": "Changed commit from **[`1635e50`](https://github.com/sagemath/sagetrac-mirror/commit/1635e50536aac0360a0cf40b7a99e95dbbba42a9)** to **[`937891c`](https://github.com/sagemath/sagetrac-mirror/commit/937891c8395e5905f2d2c5a074f79ffd0ff3e60e)**",
    "created_at": "2019-06-05T09:39:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27926#issuecomment-433850",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1635e50`](https://github.com/sagemath/sagetrac-mirror/commit/1635e50536aac0360a0cf40b7a99e95dbbba42a9)** to **[`937891c`](https://github.com/sagemath/sagetrac-mirror/commit/937891c8395e5905f2d2c5a074f79ffd0ff3e60e)**



---

archive/issue_events_379966.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-06-05T09:39:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27926#event-379966"
}
```



---

archive/issue_events_379967.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-06-05T09:39:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27926#event-379967"
}
```



---

archive/issue_events_379968.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-06-06T09:01:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27926#event-379968"
}
```



---

archive/issue_events_379969.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-06-06T09:01:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27926#event-379969"
}
```



---

archive/issue_comments_433851.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\n`test_backend` is a terrible name. This function does not test the backend. It would better be `does_backend_handle_base_ring`.\n\nThe result of `test_backend` must be cached (with the decorator `@cached_function`).\n\nIf the `new_ring` is actually the same as before, you should avoid going through `does_backend_handle_base_ring`.",
    "created_at": "2019-06-06T09:01:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27926#issuecomment-433851",
    "user": "https://github.com/videlec"
}
```

<div id="comment:9" align="right">comment:9</div>

`test_backend` is a terrible name. This function does not test the backend. It would better be `does_backend_handle_base_ring`.

The result of `test_backend` must be cached (with the decorator `@cached_function`).

If the `new_ring` is actually the same as before, you should avoid going through `does_backend_handle_base_ring`.



---

archive/issue_comments_433852.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI am not sure this is the right approach. The same code is copied in each single function. I think what is done with matrices is more sensible and the information about the backend is actually stored into the parents\n\n```\nsage: M1 = MatrixSpace(ZZ, 3, implementation='gap')\nsage: M1\nFull MatrixSpace of 3 by 3 dense matrices over Integer Ring (using Matrix_gap)\nsage: M2 = MatrixSpace(ZZ, 3, implementation='generic')\nsage: M2\nFull MatrixSpace of 3 by 3 dense matrices over Integer Ring (using Matrix_generic_dense)\n```\nThe rules about promotions such as\n\n```\nsage: parent(M1.an_element() * M2.an_element())\nFull MatrixSpace of 3 by 3 dense matrices over Integer Ring\n```\nare handled by the parents and this is what it should be done for polyhedra as well.",
    "created_at": "2019-06-06T09:04:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27926#issuecomment-433852",
    "user": "https://github.com/videlec"
}
```

<div id="comment:10" align="right">comment:10</div>

I am not sure this is the right approach. The same code is copied in each single function. I think what is done with matrices is more sensible and the information about the backend is actually stored into the parents

```
sage: M1 = MatrixSpace(ZZ, 3, implementation='gap')
sage: M1
Full MatrixSpace of 3 by 3 dense matrices over Integer Ring (using Matrix_gap)
sage: M2 = MatrixSpace(ZZ, 3, implementation='generic')
sage: M2
Full MatrixSpace of 3 by 3 dense matrices over Integer Ring (using Matrix_generic_dense)
```
The rules about promotions such as

```
sage: parent(M1.an_element() * M2.an_element())
Full MatrixSpace of 3 by 3 dense matrices over Integer Ring
```
are handled by the parents and this is what it should be done for polyhedra as well.



---

archive/issue_comments_433853.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI guess I should work with `Polyhedra_base.base_extend`.\n\nEither I introduce a new option for `backend`, such as `keep` or a change the default behavior to attempt to keep the backend, if possible.\n\nWhat do you think?\n\nI find the default behavior to be strange at the moment. I have a Polyhedron, change the base ring and all the sudden I use a different backend, even though the old one would have worked.\n\nReplying to [@videlec](#comment%3A10):\n> I am not sure this is the right approach. The same code is copied in each single function. I think what is done with matrices is more sensible and the information about the backend is actually stored into the parents\n> \n> ```\n> sage: M1 = MatrixSpace(ZZ, 3, implementation='gap')\n> sage: M1\n> Full MatrixSpace of 3 by 3 dense matrices over Integer Ring (using Matrix_gap)\n> sage: M2 = MatrixSpace(ZZ, 3, implementation='generic')\n> sage: M2\n> Full MatrixSpace of 3 by 3 dense matrices over Integer Ring (using Matrix_generic_dense)\n> ```\n> The rules about promotions such as\n> \n> ```\n> sage: parent(M1.an_element() * M2.an_element())\n> Full MatrixSpace of 3 by 3 dense matrices over Integer Ring\n> ```\n> are handled by the parents and this is what it should be done for polyhedra as well.",
    "created_at": "2019-06-06T11:14:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27926#issuecomment-433853",
    "user": "https://github.com/kliem"
}
```

<div id="comment:11" align="right">comment:11</div>

I guess I should work with `Polyhedra_base.base_extend`.

Either I introduce a new option for `backend`, such as `keep` or a change the default behavior to attempt to keep the backend, if possible.

What do you think?

I find the default behavior to be strange at the moment. I have a Polyhedron, change the base ring and all the sudden I use a different backend, even though the old one would have worked.

Replying to [@videlec](#comment%3A10):
> I am not sure this is the right approach. The same code is copied in each single function. I think what is done with matrices is more sensible and the information about the backend is actually stored into the parents
> 
> ```
> sage: M1 = MatrixSpace(ZZ, 3, implementation='gap')
> sage: M1
> Full MatrixSpace of 3 by 3 dense matrices over Integer Ring (using Matrix_gap)
> sage: M2 = MatrixSpace(ZZ, 3, implementation='generic')
> sage: M2
> Full MatrixSpace of 3 by 3 dense matrices over Integer Ring (using Matrix_generic_dense)
> ```
> The rules about promotions such as
> 
> ```
> sage: parent(M1.an_element() * M2.an_element())
> Full MatrixSpace of 3 by 3 dense matrices over Integer Ring
> ```
> are handled by the parents and this is what it should be done for polyhedra as well.



---

archive/issue_comments_433854.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nThere is no discussion about the fact that the current behavior is wrong. I tried to argue that your initial solution was not optimal. Namely, the parents already carry the backend information (`Polyhedra_QQ_ppl`, `Polyhedra_ZZ_ppl`, ...). Anytime a new polyhedra is constructed inside a method, the new parent should be chosen via a query to the parent.\n\nModifying `Polyhedra_base.base_extend` is a good idea. If the new `base_ring` supports the current backend, it should be kept.\n\nThough at this point, I don't quite understand the difference between `base_extend` and `change_ring`... that would better be clarified.\n\nReplying to [@kliem](#comment%3A11):\n> I guess I should work with `Polyhedra_base.base_extend`.\n> \n> Either I introduce a new option for `backend`, such as `keep` or a change the default behavior to attempt to keep the backend, if possible.\n> \n> What do you think?\n> \n> I find the default behavior to be strange at the moment. I have a Polyhedron, change the base ring and all the sudden I use a different backend, even though the old one would have worked.\n> \n> Replying to [@videlec](#comment%3A10):\n> > I am not sure this is the right approach. The same code is copied in each single function. I think what is done with matrices is more sensible and the information about the backend is actually stored into the parents\n> > \n> > ```\n> > sage: M1 = MatrixSpace(ZZ, 3, implementation='gap')\n> > sage: M1\n> > Full MatrixSpace of 3 by 3 dense matrices over Integer Ring (using Matrix_gap)\n> > sage: M2 = MatrixSpace(ZZ, 3, implementation='generic')\n> > sage: M2\n> > Full MatrixSpace of 3 by 3 dense matrices over Integer Ring (using Matrix_generic_dense)\n> > ```\n> > The rules about promotions such as\n> > \n> > ```\n> > sage: parent(M1.an_element() * M2.an_element())\n> > Full MatrixSpace of 3 by 3 dense matrices over Integer Ring\n> > ```\n> > are handled by the parents and this is what it should be done for polyhedra as well.",
    "created_at": "2019-06-06T11:44:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27926#issuecomment-433854",
    "user": "https://github.com/videlec"
}
```

<div id="comment:12" align="right">comment:12</div>

There is no discussion about the fact that the current behavior is wrong. I tried to argue that your initial solution was not optimal. Namely, the parents already carry the backend information (`Polyhedra_QQ_ppl`, `Polyhedra_ZZ_ppl`, ...). Anytime a new polyhedra is constructed inside a method, the new parent should be chosen via a query to the parent.

Modifying `Polyhedra_base.base_extend` is a good idea. If the new `base_ring` supports the current backend, it should be kept.

Though at this point, I don't quite understand the difference between `base_extend` and `change_ring`... that would better be clarified.

Replying to [@kliem](#comment%3A11):
> I guess I should work with `Polyhedra_base.base_extend`.
> 
> Either I introduce a new option for `backend`, such as `keep` or a change the default behavior to attempt to keep the backend, if possible.
> 
> What do you think?
> 
> I find the default behavior to be strange at the moment. I have a Polyhedron, change the base ring and all the sudden I use a different backend, even though the old one would have worked.
> 
> Replying to [@videlec](#comment%3A10):
> > I am not sure this is the right approach. The same code is copied in each single function. I think what is done with matrices is more sensible and the information about the backend is actually stored into the parents
> > 
> > ```
> > sage: M1 = MatrixSpace(ZZ, 3, implementation='gap')
> > sage: M1
> > Full MatrixSpace of 3 by 3 dense matrices over Integer Ring (using Matrix_gap)
> > sage: M2 = MatrixSpace(ZZ, 3, implementation='generic')
> > sage: M2
> > Full MatrixSpace of 3 by 3 dense matrices over Integer Ring (using Matrix_generic_dense)
> > ```
> > The rules about promotions such as
> > 
> > ```
> > sage: parent(M1.an_element() * M2.an_element())
> > Full MatrixSpace of 3 by 3 dense matrices over Integer Ring
> > ```
> > are handled by the parents and this is what it should be done for polyhedra as well.



---

archive/issue_comments_433855.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI believe `change_ring` was created after `base_extend` as `base_extend` doesn't allow the ring to become smaller. Either way `base_extend` should just call `change_ring` with the coerced ring (and `change_ring` should return `self` if possible).\n\nOk. I will now proceed as follows:\n\n1. Let `change_ring` call `base_extend`. (Btw. the error checking with regard to inexact rings in `Polyhedron_base.change_ring` really should be left to parent as well.)\n\n2. Create a new parent only if needed.\n\n3. Change default behavior of `None` in `change_ring` to leave `backend` if possible.\n\n4. Simplify all the methods to obtain a parent with `base_extend` and then initialize from that parent.\n\nReplying to [@videlec](#comment%3A12):\n> There is no discussion about the fact that the current behavior is wrong. I tried to argue that your initial solution was not optimal. Namely, the parents already carry the backend information (`Polyhedra_QQ_ppl`, `Polyhedra_ZZ_ppl`, ...). Anytime a new polyhedra is constructed inside a method, the new parent should be chosen via a query to the parent.\n> \n> Modifying `Polyhedra_base.base_extend` is a good idea. If the new `base_ring` supports the current backend, it should be kept.\n> \n> Though at this point, I don't quite understand the difference between `base_extend` and `change_ring`... that would better be clarified.\n> \n> Replying to [@kliem](#comment%3A11):\n> > I guess I should work with `Polyhedra_base.base_extend`.\n> > \n> > Either I introduce a new option for `backend`, such as `keep` or a change the default behavior to attempt to keep the backend, if possible.\n> > \n> > What do you think?\n> > \n> > I find the default behavior to be strange at the moment. I have a Polyhedron, change the base ring and all the sudden I use a different backend, even though the old one would have worked.\n> > \n> > Replying to [@videlec](#comment%3A10):\n> > > I am not sure this is the right approach. The same code is copied in each single function. I think what is done with matrices is more sensible and the information about the backend is actually stored into the parents\n> > > \n> > > ```\n> > > sage: M1 = MatrixSpace(ZZ, 3, implementation='gap')\n> > > sage: M1\n> > > Full MatrixSpace of 3 by 3 dense matrices over Integer Ring (using Matrix_gap)\n> > > sage: M2 = MatrixSpace(ZZ, 3, implementation='generic')\n> > > sage: M2\n> > > Full MatrixSpace of 3 by 3 dense matrices over Integer Ring (using Matrix_generic_dense)\n> > > ```\n> > > The rules about promotions such as\n> > > \n> > > ```\n> > > sage: parent(M1.an_element() * M2.an_element())\n> > > Full MatrixSpace of 3 by 3 dense matrices over Integer Ring\n> > > ```\n> > > are handled by the parents and this is what it should be done for polyhedra as well.",
    "created_at": "2019-06-06T12:13:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27926#issuecomment-433855",
    "user": "https://github.com/kliem"
}
```

<div id="comment:13" align="right">comment:13</div>

I believe `change_ring` was created after `base_extend` as `base_extend` doesn't allow the ring to become smaller. Either way `base_extend` should just call `change_ring` with the coerced ring (and `change_ring` should return `self` if possible).

Ok. I will now proceed as follows:

1. Let `change_ring` call `base_extend`. (Btw. the error checking with regard to inexact rings in `Polyhedron_base.change_ring` really should be left to parent as well.)

2. Create a new parent only if needed.

3. Change default behavior of `None` in `change_ring` to leave `backend` if possible.

4. Simplify all the methods to obtain a parent with `base_extend` and then initialize from that parent.

Replying to [@videlec](#comment%3A12):
> There is no discussion about the fact that the current behavior is wrong. I tried to argue that your initial solution was not optimal. Namely, the parents already carry the backend information (`Polyhedra_QQ_ppl`, `Polyhedra_ZZ_ppl`, ...). Anytime a new polyhedra is constructed inside a method, the new parent should be chosen via a query to the parent.
> 
> Modifying `Polyhedra_base.base_extend` is a good idea. If the new `base_ring` supports the current backend, it should be kept.
> 
> Though at this point, I don't quite understand the difference between `base_extend` and `change_ring`... that would better be clarified.
> 
> Replying to [@kliem](#comment%3A11):
> > I guess I should work with `Polyhedra_base.base_extend`.
> > 
> > Either I introduce a new option for `backend`, such as `keep` or a change the default behavior to attempt to keep the backend, if possible.
> > 
> > What do you think?
> > 
> > I find the default behavior to be strange at the moment. I have a Polyhedron, change the base ring and all the sudden I use a different backend, even though the old one would have worked.
> > 
> > Replying to [@videlec](#comment%3A10):
> > > I am not sure this is the right approach. The same code is copied in each single function. I think what is done with matrices is more sensible and the information about the backend is actually stored into the parents
> > > 
> > > ```
> > > sage: M1 = MatrixSpace(ZZ, 3, implementation='gap')
> > > sage: M1
> > > Full MatrixSpace of 3 by 3 dense matrices over Integer Ring (using Matrix_gap)
> > > sage: M2 = MatrixSpace(ZZ, 3, implementation='generic')
> > > sage: M2
> > > Full MatrixSpace of 3 by 3 dense matrices over Integer Ring (using Matrix_generic_dense)
> > > ```
> > > The rules about promotions such as
> > > 
> > > ```
> > > sage: parent(M1.an_element() * M2.an_element())
> > > Full MatrixSpace of 3 by 3 dense matrices over Integer Ring
> > > ```
> > > are handled by the parents and this is what it should be done for polyhedra as well.



---

archive/issue_comments_433856.json:
```json
{
    "body": "Changed commit from **[`937891c`](https://github.com/sagemath/sagetrac-mirror/commit/937891c8395e5905f2d2c5a074f79ffd0ff3e60e)** to **[`cbffe28`](https://github.com/sagemath/sagetrac-mirror/commit/cbffe2867da538199933d49d4549cf03e3931ce4)**",
    "created_at": "2019-06-06T14:41:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27926#issuecomment-433856",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`937891c`](https://github.com/sagemath/sagetrac-mirror/commit/937891c8395e5905f2d2c5a074f79ffd0ff3e60e)** to **[`cbffe28`](https://github.com/sagemath/sagetrac-mirror/commit/cbffe2867da538199933d49d4549cf03e3931ce4)**



---

archive/issue_comments_433857.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cbffe2867da538199933d49d4549cf03e3931ce4\"><code>cbffe28</code></a></td><td><code>moved changes of ring and backend to parent</code></td></tr></table>\n",
    "created_at": "2019-06-06T14:41:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27926#issuecomment-433857",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cbffe2867da538199933d49d4549cf03e3931ce4"><code>cbffe28</code></a></td><td><code>moved changes of ring and backend to parent</code></td></tr></table>




---

archive/issue_comments_433858.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/970c142283df9b60fc57309b3b142bb782c4bcc6\"><code>970c142</code></a></td><td><code>fixed inconsistent parenthesis</code></td></tr></table>\n",
    "created_at": "2019-06-06T14:51:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27926#issuecomment-433858",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/970c142283df9b60fc57309b3b142bb782c4bcc6"><code>970c142</code></a></td><td><code>fixed inconsistent parenthesis</code></td></tr></table>




---

archive/issue_comments_433859.json:
```json
{
    "body": "Changed commit from **[`cbffe28`](https://github.com/sagemath/sagetrac-mirror/commit/cbffe2867da538199933d49d4549cf03e3931ce4)** to **[`970c142`](https://github.com/sagemath/sagetrac-mirror/commit/970c142283df9b60fc57309b3b142bb782c4bcc6)**",
    "created_at": "2019-06-06T14:51:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27926#issuecomment-433859",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cbffe28`](https://github.com/sagemath/sagetrac-mirror/commit/cbffe2867da538199933d49d4549cf03e3931ce4)** to **[`970c142`](https://github.com/sagemath/sagetrac-mirror/commit/970c142283df9b60fc57309b3b142bb782c4bcc6)**



---

archive/issue_events_379970.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-06-06T14:52:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27926#event-379970"
}
```



---

archive/issue_events_379971.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-06-06T14:52:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27926#event-379971"
}
```



---

archive/issue_comments_433860.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nI think the logic in `change_ring` would better be simplified to\n\n```\n        if ambient_dim is None:\n            ambient_dim = self.ambient_dim()\n\n        if base_ring == self.base_ring() and \\\n           ambient_dim == self.ambient_dim() and \\\n           backend is None or backend == self.backend():\n                return self\n\n        # if not specified, try the same backend\n        if backend is None and does_backend_handle_base_ring(base_ring, self.backend()):\n            return Polyhedra(base_ring, ambient_dim, backend=self.backend())\n\n        return Polyhedra(base_ring, ambient_dim, backend=backend)\n```\n\nAlso, you should add more examples to `change_ring`. In particular when something has changed with respect to older versions such as\n\n```\nsage: Polyhedra(QQ, 3, backend='cdd').change_ring(RDF).backend()\n'cdd'\n```",
    "created_at": "2019-06-07T05:25:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27926#issuecomment-433860",
    "user": "https://github.com/videlec"
}
```

<div id="comment:17" align="right">comment:17</div>

I think the logic in `change_ring` would better be simplified to

```
        if ambient_dim is None:
            ambient_dim = self.ambient_dim()

        if base_ring == self.base_ring() and \
           ambient_dim == self.ambient_dim() and \
           backend is None or backend == self.backend():
                return self

        # if not specified, try the same backend
        if backend is None and does_backend_handle_base_ring(base_ring, self.backend()):
            return Polyhedra(base_ring, ambient_dim, backend=self.backend())

        return Polyhedra(base_ring, ambient_dim, backend=backend)
```

Also, you should add more examples to `change_ring`. In particular when something has changed with respect to older versions such as

```
sage: Polyhedra(QQ, 3, backend='cdd').change_ring(RDF).backend()
'cdd'
```



---

archive/issue_events_379972.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-06-07T05:25:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27926#event-379972"
}
```



---

archive/issue_events_379973.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-06-07T05:25:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27926#event-379973"
}
```



---

archive/issue_comments_433861.json:
```json
{
    "body": "Reviewer: **Vincent Delecroix**",
    "created_at": "2019-06-07T05:25:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27926#issuecomment-433861",
    "user": "https://github.com/videlec"
}
```

Reviewer: **Vincent Delecroix**



---

archive/issue_comments_433862.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@videlec](#comment%3A12):\n> Though at this point, I don't quite understand the difference between `base_extend` and `change_ring`... that would better be clarified.\n\n`base_extend` is a calque from the same function for example for matrices, that creates a new parent with an extended ring and coerces `self` into this new parent and returns it.\n\nAs Jonathan said, this can only go in one direction and was not really adapted to polyhedra objects. This led to introduce `change_ring` to have all the flexibility possible (and perhaps a more intuitive name than `base_extend`) and because you can't really change ring without caring about the backend, `change_backend` and `change_ring` are bound to have fuzzy differences and may even call eachother (hopefully in only 1 direction!).\n\nSo yes, it is subtle and I am all in favor of rationalizing `base_extend`, `change_ring` and `change_backend` (which is not all there yet).",
    "created_at": "2019-06-07T07:14:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27926#issuecomment-433862",
    "user": "https://github.com/jplab"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@videlec](#comment%3A12):
> Though at this point, I don't quite understand the difference between `base_extend` and `change_ring`... that would better be clarified.

`base_extend` is a calque from the same function for example for matrices, that creates a new parent with an extended ring and coerces `self` into this new parent and returns it.

As Jonathan said, this can only go in one direction and was not really adapted to polyhedra objects. This led to introduce `change_ring` to have all the flexibility possible (and perhaps a more intuitive name than `base_extend`) and because you can't really change ring without caring about the backend, `change_backend` and `change_ring` are bound to have fuzzy differences and may even call eachother (hopefully in only 1 direction!).

So yes, it is subtle and I am all in favor of rationalizing `base_extend`, `change_ring` and `change_backend` (which is not all there yet).



---

archive/issue_comments_433863.json:
```json
{
    "body": "Changed commit from **[`970c142`](https://github.com/sagemath/sagetrac-mirror/commit/970c142283df9b60fc57309b3b142bb782c4bcc6)** to **[`a3a96bc`](https://github.com/sagemath/sagetrac-mirror/commit/a3a96bc413727816c16705c4f03400429ee36445)**",
    "created_at": "2019-06-07T13:35:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27926#issuecomment-433863",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`970c142`](https://github.com/sagemath/sagetrac-mirror/commit/970c142283df9b60fc57309b3b142bb782c4bcc6)** to **[`a3a96bc`](https://github.com/sagemath/sagetrac-mirror/commit/a3a96bc413727816c16705c4f03400429ee36445)**



---

archive/issue_comments_433864.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a3a96bc413727816c16705c4f03400429ee36445\"><code>a3a96bc</code></a></td><td><code>small changes</code></td></tr></table>\n",
    "created_at": "2019-06-07T13:35:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27926#issuecomment-433864",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a3a96bc413727816c16705c4f03400429ee36445"><code>a3a96bc</code></a></td><td><code>small changes</code></td></tr></table>




---

archive/issue_events_379974.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-06-07T13:36:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27926#event-379974"
}
```



---

archive/issue_events_379975.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-06-07T13:36:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27926#event-379975"
}
```



---

archive/issue_events_379976.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-06-08T12:14:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27926#event-379976"
}
```



---

archive/issue_events_379977.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-06-08T12:14:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27926#event-379977"
}
```



---

archive/issue_events_379978.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-06-27T20:13:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27926#event-379978"
}
```



---

archive/issue_events_379979.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "e61730b229796be7796a251b9c58bcc9442c5322",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-06-27T20:13:18Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27926#event-379979"
}
```



---

archive/issue_comments_433865.json:
```json
{
    "body": "Changed branch from **[public/27926](https://github.com/sagemath/sagetrac-mirror/tree/public/27926)** to **[`a3a96bc`](https://github.com/sagemath/sagetrac-mirror/commit/a3a96bc413727816c16705c4f03400429ee36445)**",
    "created_at": "2019-06-27T20:13:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27926#issuecomment-433865",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/27926](https://github.com/sagemath/sagetrac-mirror/tree/public/27926)** to **[`a3a96bc`](https://github.com/sagemath/sagetrac-mirror/commit/a3a96bc413727816c16705c4f03400429ee36445)**



---

archive/issue_events_379980.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-07-03T11:34:48Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27926#event-379980"
}
```



---

archive/issue_events_379981.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-07-03T11:34:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27926#event-379981"
}
```



---

archive/issue_comments_433866.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nNot in Sage 8.8.  Let's please to try keep tickets' milestones related to the release in which we actually intend to include them, and in particular the release in which they were *actually* included, especially when closing tickets.",
    "created_at": "2019-07-03T11:34:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27926#issuecomment-433866",
    "user": "https://github.com/embray"
}
```

<div id="comment:23" align="right">comment:23</div>

Not in Sage 8.8.  Let's please to try keep tickets' milestones related to the release in which we actually intend to include them, and in particular the release in which they were *actually* included, especially when closing tickets.



---

archive/issue_comments_433867.json:
```json
{
    "body": "Changed commit from **[`a3a96bc`](https://github.com/sagemath/sagetrac-mirror/commit/a3a96bc413727816c16705c4f03400429ee36445)** to none",
    "created_at": "2019-08-30T13:59:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27926#issuecomment-433867",
    "user": "https://github.com/jplab"
}
```

Changed commit from **[`a3a96bc`](https://github.com/sagemath/sagetrac-mirror/commit/a3a96bc413727816c16705c4f03400429ee36445)** to none



---

archive/issue_comments_433868.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nBarycentric subdivision was forgotten... :-(",
    "created_at": "2019-08-30T13:59:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27926#issuecomment-433868",
    "user": "https://github.com/jplab"
}
```

<div id="comment:24" align="right">comment:24</div>

Barycentric subdivision was forgotten... :-(
