# Issue 27954: Integral curves over finite fields: closed points

archive/issues_027717.json:
```json
{
    "body": "This is a subticket of #27873.\n\nClosed points are added to integral curves over finite fields.\n\n**Branch/Commit:** [558a97164876c753274b32392380dcfc891eeb79](https://github.com/sagemath/sagetrac-mirror/commit/558a97164876c753274b32392380dcfc891eeb79)\n\n**Reviewer:** Travis Scrimshaw\n\n**Author:** Kwankyu Lee\n\nIssue created by migration from https://trac.sagemath.org/ticket/27954\n\n",
    "closed_at": "2020-01-31T23:49:49Z",
    "created_at": "2019-06-08T22:57:09Z",
    "labels": [
        "component: algebraic geometry",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.1",
    "title": "Integral curves over finite fields: closed points",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/27954",
    "user": "https://github.com/kwankyu"
}
```
This is a subticket of #27873.

Closed points are added to integral curves over finite fields.

**Branch/Commit:** [558a97164876c753274b32392380dcfc891eeb79](https://github.com/sagemath/sagetrac-mirror/commit/558a97164876c753274b32392380dcfc891eeb79)

**Reviewer:** Travis Scrimshaw

**Author:** Kwankyu Lee

Issue created by migration from https://trac.sagemath.org/ticket/27954





---

archive/issue_comments_437374.json:
```json
{
    "body": "**Author:** Kwankyu Lee",
    "created_at": "2019-06-08T22:58:35Z",
    "issue": "https://github.com/sagemath/sage/issues/27954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27954#issuecomment-437374",
    "user": "https://github.com/kwankyu"
}
```

**Author:** Kwankyu Lee



---

archive/issue_comments_437375.json:
```json
{
    "body": "**Branch:** [u/klee/27954](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/27954)",
    "created_at": "2019-06-08T22:58:35Z",
    "issue": "https://github.com/sagemath/sage/issues/27954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27954#issuecomment-437375",
    "user": "https://github.com/kwankyu"
}
```

**Branch:** [u/klee/27954](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/27954)



---

archive/issue_comments_437376.json:
```json
{
    "body": "**Commit:** [eb1fe155d248901401246cdfa75f098844524ee1](https://github.com/sagemath/sagetrac-mirror/commit/eb1fe155d248901401246cdfa75f098844524ee1)",
    "created_at": "2019-06-08T22:59:07Z",
    "issue": "https://github.com/sagemath/sage/issues/27954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27954#issuecomment-437376",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Commit:** [eb1fe155d248901401246cdfa75f098844524ee1](https://github.com/sagemath/sagetrac-mirror/commit/eb1fe155d248901401246cdfa75f098844524ee1)



---

archive/issue_comments_437377.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/05e005300847eb5a15c8959a427ff7aa400689ba\">05e0053</a></td><td><code>Add integral curves with function field attached</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eb1fe155d248901401246cdfa75f098844524ee1\">eb1fe15</a></td><td><code>Add closed points</code></td></tr></table>\n",
    "created_at": "2019-06-08T22:59:07Z",
    "issue": "https://github.com/sagemath/sage/issues/27954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27954#issuecomment-437377",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/05e005300847eb5a15c8959a427ff7aa400689ba">05e0053</a></td><td><code>Add integral curves with function field attached</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eb1fe155d248901401246cdfa75f098844524ee1">eb1fe15</a></td><td><code>Add closed points</code></td></tr></table>




---

archive/issue_comments_437378.json:
```json
{
    "body": "**Dependencies:** #27953",
    "created_at": "2019-06-08T23:00:16Z",
    "issue": "https://github.com/sagemath/sage/issues/27954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27954#issuecomment-437378",
    "user": "https://github.com/kwankyu"
}
```

**Dependencies:** #27953



---

archive/issue_events_246682.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2019-06-10T06:58:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27954",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27954#event-246682"
}
```



---

archive/issue_comments_437379.json:
```json
{
    "body": "<a id='comment:5'></a>\nTickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).",
    "created_at": "2019-06-14T14:50:27Z",
    "issue": "https://github.com/sagemath/sage/issues/27954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27954#issuecomment-437379",
    "user": "https://github.com/embray"
}
```

<a id='comment:5'></a>
Tickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).



---

archive/issue_events_246683.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:50:27Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27954",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27954#event-246683"
}
```



---

archive/issue_events_246684.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:50:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27954",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27954#event-246684"
}
```



---

archive/issue_events_246685.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2019-06-25T07:20:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27954",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27954#event-246685"
}
```



---

archive/issue_events_246686.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2019-06-25T07:20:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27954",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27954#event-246686"
}
```



---

archive/issue_comments_437380.json:
```json
{
    "body": "<a id='comment:7'></a>\nTicket retargeted after milestone closed",
    "created_at": "2019-12-30T14:48:17Z",
    "issue": "https://github.com/sagemath/sage/issues/27954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27954#issuecomment-437380",
    "user": "https://github.com/embray"
}
```

<a id='comment:7'></a>
Ticket retargeted after milestone closed



---

archive/issue_events_246687.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27954",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27954#event-246687"
}
```



---

archive/issue_events_246688.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27954",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27954#event-246688"
}
```



---

archive/issue_comments_437381.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/53b17a59b6d121e95c5a7bd641a879a7e4b5d52a\">53b17a5</a></td><td><code>Add closed points to integral curves</code></td></tr></table>\n",
    "created_at": "2020-01-13T06:14:52Z",
    "issue": "https://github.com/sagemath/sage/issues/27954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27954#issuecomment-437381",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/53b17a59b6d121e95c5a7bd641a879a7e4b5d52a">53b17a5</a></td><td><code>Add closed points to integral curves</code></td></tr></table>




---

archive/issue_comments_437382.json:
```json
{
    "body": "**Changing commit** from \"[eb1fe155d248901401246cdfa75f098844524ee1](https://github.com/sagemath/sagetrac-mirror/commit/eb1fe155d248901401246cdfa75f098844524ee1)\" to \"[53b17a59b6d121e95c5a7bd641a879a7e4b5d52a](https://github.com/sagemath/sagetrac-mirror/commit/53b17a59b6d121e95c5a7bd641a879a7e4b5d52a)\".",
    "created_at": "2020-01-13T06:14:52Z",
    "issue": "https://github.com/sagemath/sage/issues/27954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27954#issuecomment-437382",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[eb1fe155d248901401246cdfa75f098844524ee1](https://github.com/sagemath/sagetrac-mirror/commit/eb1fe155d248901401246cdfa75f098844524ee1)" to "[53b17a59b6d121e95c5a7bd641a879a7e4b5d52a](https://github.com/sagemath/sagetrac-mirror/commit/53b17a59b6d121e95c5a7bd641a879a7e4b5d52a)".



---

archive/issue_comments_437383.json:
```json
{
    "body": "**Changing dependencies** from \"#27953\" to \"\".",
    "created_at": "2020-01-13T06:17:07Z",
    "issue": "https://github.com/sagemath/sage/issues/27954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27954#issuecomment-437383",
    "user": "https://github.com/kwankyu"
}
```

**Changing dependencies** from "#27953" to "".



---

archive/issue_events_246689.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2020-01-13T06:17:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27954",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27954#event-246689"
}
```



---

archive/issue_events_246690.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2020-01-13T06:17:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27954",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27954#event-246690"
}
```



---

archive/issue_comments_437384.json:
```json
{
    "body": "<a id='comment:10'></a>\nInstead of using `__eq__`, what about using `_richcmp_`? Otherwise you will have to implement a `__ne__` method I believe.\n\nI also have some recollection that Python3 will be better in terms of locality of variables, but maybe that is not true. To be safe (and make it easier to understand), I would change:\n\n```diff\n         if i is None:\n-           for i in range(P.ngens()):\n-               if not P.gen(i) in ideal:\n+           for j in range(P.ngens()):\n+               if not P.gen(j) in ideal:\n+                   i = j\n                    break\n```\n\nBeyond these minor things, looks good.",
    "created_at": "2020-01-28T00:26:48Z",
    "issue": "https://github.com/sagemath/sage/issues/27954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27954#issuecomment-437384",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'></a>
Instead of using `__eq__`, what about using `_richcmp_`? Otherwise you will have to implement a `__ne__` method I believe.

I also have some recollection that Python3 will be better in terms of locality of variables, but maybe that is not true. To be safe (and make it easier to understand), I would change:

```diff
         if i is None:
-           for i in range(P.ngens()):
-               if not P.gen(i) in ideal:
+           for j in range(P.ngens()):
+               if not P.gen(j) in ideal:
+                   i = j
                    break
```

Beyond these minor things, looks good.



---

archive/issue_comments_437385.json:
```json
{
    "body": "<a id='comment:11'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fbd4d48641d4e0876a6ea5eebfebee8d41aeb95a\">fbd4d48</a></td><td><code>Merge branch 'develop'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/558a97164876c753274b32392380dcfc891eeb79\">558a971</a></td><td><code>Fixes for reviewer comments</code></td></tr></table>\n",
    "created_at": "2020-01-28T03:39:59Z",
    "issue": "https://github.com/sagemath/sage/issues/27954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27954#issuecomment-437385",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fbd4d48641d4e0876a6ea5eebfebee8d41aeb95a">fbd4d48</a></td><td><code>Merge branch 'develop'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/558a97164876c753274b32392380dcfc891eeb79">558a971</a></td><td><code>Fixes for reviewer comments</code></td></tr></table>




---

archive/issue_comments_437386.json:
```json
{
    "body": "**Changing commit** from \"[53b17a59b6d121e95c5a7bd641a879a7e4b5d52a](https://github.com/sagemath/sagetrac-mirror/commit/53b17a59b6d121e95c5a7bd641a879a7e4b5d52a)\" to \"[558a97164876c753274b32392380dcfc891eeb79](https://github.com/sagemath/sagetrac-mirror/commit/558a97164876c753274b32392380dcfc891eeb79)\".",
    "created_at": "2020-01-28T03:39:59Z",
    "issue": "https://github.com/sagemath/sage/issues/27954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27954#issuecomment-437386",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[53b17a59b6d121e95c5a7bd641a879a7e4b5d52a](https://github.com/sagemath/sagetrac-mirror/commit/53b17a59b6d121e95c5a7bd641a879a7e4b5d52a)" to "[558a97164876c753274b32392380dcfc891eeb79](https://github.com/sagemath/sagetrac-mirror/commit/558a97164876c753274b32392380dcfc891eeb79)".



---

archive/issue_comments_437387.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [tscrim](#comment%3A10):\n> Instead of using `__eq__`, what about using `_richcmp_`? Otherwise you will have to implement a `__ne__` method I believe.\n\n\nRight. I wonder how I forgot this. Done.\n\n> I also have some recollection that Python3 will be better in terms of locality of variables, but maybe that is not true. To be safe (and make it easier to understand), I would change:\n> \n> ```diff\n>          if i is None:\n> -           for i in range(P.ngens()):\n> -               if not P.gen(i) in ideal:\n> +           for j in range(P.ngens()):\n> +               if not P.gen(j) in ideal:\n> +                   i = j\n>                     break\n> ```\n\n\nGood tip. Done.\n \n> Beyond these minor things, looks good.\n\n\nThank you, Travis, for your attention. Let me know when you come to Korea :-)",
    "created_at": "2020-01-28T03:51:51Z",
    "issue": "https://github.com/sagemath/sage/issues/27954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27954#issuecomment-437387",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:12'></a>
Replying to [tscrim](#comment%3A10):
> Instead of using `__eq__`, what about using `_richcmp_`? Otherwise you will have to implement a `__ne__` method I believe.


Right. I wonder how I forgot this. Done.

> I also have some recollection that Python3 will be better in terms of locality of variables, but maybe that is not true. To be safe (and make it easier to understand), I would change:
> 
> ```diff
>          if i is None:
> -           for i in range(P.ngens()):
> -               if not P.gen(i) in ideal:
> +           for j in range(P.ngens()):
> +               if not P.gen(j) in ideal:
> +                   i = j
>                     break
> ```


Good tip. Done.
 
> Beyond these minor things, looks good.


Thank you, Travis, for your attention. Let me know when you come to Korea :-)



---

archive/issue_comments_437388.json:
```json
{
    "body": "**Reviewer:** Travis Scrimshaw",
    "created_at": "2020-01-28T15:54:31Z",
    "issue": "https://github.com/sagemath/sage/issues/27954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27954#issuecomment-437388",
    "user": "https://github.com/tscrim"
}
```

**Reviewer:** Travis Scrimshaw



---

archive/issue_comments_437389.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [klee](#comment%3A12):\n> Replying to [tscrim](#comment%3A10):\n> > Instead of using `__eq__`, what about using `_richcmp_`? Otherwise you will have to implement a `__ne__` method I believe.\n\n> \n> Right. I wonder how I forgot this. Done.\n\n\nI have also done this before (and spent quite some time debugging because this can lead to very subtle errors).\n\n> Thank you, Travis, for your attention.\n\n\nNo problem. Thank you for the changes.\n\n> Let me know when you come to Korea :-)  \n\n\nWill do. Unfortunately I might not make it in 2020, but maybe January to February, 2021.",
    "created_at": "2020-01-28T15:54:31Z",
    "issue": "https://github.com/sagemath/sage/issues/27954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27954#issuecomment-437389",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:13'></a>
Replying to [klee](#comment%3A12):
> Replying to [tscrim](#comment%3A10):
> > Instead of using `__eq__`, what about using `_richcmp_`? Otherwise you will have to implement a `__ne__` method I believe.

> 
> Right. I wonder how I forgot this. Done.


I have also done this before (and spent quite some time debugging because this can lead to very subtle errors).

> Thank you, Travis, for your attention.


No problem. Thank you for the changes.

> Let me know when you come to Korea :-)  


Will do. Unfortunately I might not make it in 2020, but maybe January to February, 2021.



---

archive/issue_events_246691.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2020-01-28T15:54:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27954",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27954#event-246691"
}
```



---

archive/issue_events_246692.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2020-01-28T15:54:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27954",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27954#event-246692"
}
```



---

archive/issue_comments_437390.json:
```json
{
    "body": "**Changing branch** from \"[u/klee/27954](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/27954)\" to \"[558a97164876c753274b32392380dcfc891eeb79](https://github.com/sagemath/sagetrac-mirror/commit/558a97164876c753274b32392380dcfc891eeb79)\".",
    "created_at": "2020-01-31T23:49:49Z",
    "issue": "https://github.com/sagemath/sage/issues/27954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27954#issuecomment-437390",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/klee/27954](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/27954)" to "[558a97164876c753274b32392380dcfc891eeb79](https://github.com/sagemath/sagetrac-mirror/commit/558a97164876c753274b32392380dcfc891eeb79)".



---

archive/issue_events_246693.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-01-31T23:49:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27954",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27954#event-246693"
}
```



---

archive/issue_events_246694.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "6f626864aa427e6742f0685f85ec1651227a7898",
    "created_at": "2020-01-31T23:49:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27954",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27954#event-246694"
}
```
