# Issue 27584: Characteristic Classes - MixedAlgebra

archive/issues_027347.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nThis project is my master thesis. I want to implement a computation of characteristic classes of vector bundles out of their curvature matrices. The algorithm is based on [this](https://www.math.uni-potsdam.de/fileadmin/user_upload/Prof-Geometrie/Dokumente/Lehre/Lehrmaterialien/charakteristisch.pdf) short script.\n\nIn this first step, the graded algebra of \"mixed\" differential forms of a manifold will be introduced so one can use the matrix framework of sage in the following steps.\n\nA demo notebook is provided at https://github.com/DeRhamSource/MixedFormNotebook\n\nCC:  @egourgoulhon @tscrim\n\nComponent: **geometry**\n\nKeywords: **characteristic classes**\n\nAuthor: **Michael Jung**\n\nBranch/Commit: **[`cdfaf6d`](https://github.com/sagemath/sagetrac-mirror/commit/cdfaf6d16322ef4c7d014680ebf025f272f62eb6)**\n\nReviewer: **Eric Gourgoulhon, Travis Scrimshaw**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/27584_\n\n",
    "closed_at": "2019-04-18T19:56:42Z",
    "created_at": "2019-03-31T22:17:48Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20geometry",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/c%3A%20manifolds"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Characteristic Classes - MixedAlgebra",
    "type": "issue",
    "updated_at": "2019-04-18T19:56:42Z",
    "url": "https://github.com/sagemath/sage/issues/27584",
    "user": "https://github.com/DeRhamSource"
}
```
<div id="comment:0"></div>

This project is my master thesis. I want to implement a computation of characteristic classes of vector bundles out of their curvature matrices. The algorithm is based on [this](https://www.math.uni-potsdam.de/fileadmin/user_upload/Prof-Geometrie/Dokumente/Lehre/Lehrmaterialien/charakteristisch.pdf) short script.

In this first step, the graded algebra of "mixed" differential forms of a manifold will be introduced so one can use the matrix framework of sage in the following steps.

A demo notebook is provided at https://github.com/DeRhamSource/MixedFormNotebook

CC:  @egourgoulhon @tscrim

Component: **geometry**

Keywords: **characteristic classes**

Author: **Michael Jung**

Branch/Commit: **[`cdfaf6d`](https://github.com/sagemath/sagetrac-mirror/commit/cdfaf6d16322ef4c7d014680ebf025f272f62eb6)**

Reviewer: **Eric Gourgoulhon, Travis Scrimshaw**

_Issue created by migration from https://trac.sagemath.org/ticket/27584_





---

archive/issue_events_375754.json:
```json
{
    "actor": "https://github.com/DeRhamSource",
    "created_at": "2019-03-31T22:17:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27584#event-375754"
}
```



---

archive/issue_events_375755.json:
```json
{
    "actor": "https://github.com/DeRhamSource",
    "created_at": "2019-03-31T22:17:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27584#event-375755"
}
```



---

archive/issue_comments_427337.json:
```json
{
    "body": "Changed keywords from none to **characteristic classes**",
    "created_at": "2019-03-31T22:35:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427337",
    "user": "https://github.com/DeRhamSource"
}
```

Changed keywords from none to **characteristic classes**



---

archive/issue_events_375756.json:
```json
{
    "actor": "https://github.com/DeRhamSource",
    "created_at": "2019-03-31T22:35:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20manifolds",
    "label_color": "0000ff",
    "label_name": "c: manifolds",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27584#event-375756"
}
```



---

archive/issue_comments_427338.json:
```json
{
    "body": "Author: **Michael Jung**",
    "created_at": "2019-03-31T22:35:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427338",
    "user": "https://github.com/DeRhamSource"
}
```

Author: **Michael Jung**



---

archive/issue_events_375757.json:
```json
{
    "actor": "https://github.com/DeRhamSource",
    "created_at": "2019-03-31T22:35:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27584#event-375757"
}
```



---

archive/issue_comments_427339.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n+This project is my master thesis. I want to implement a computation of characteristic classes of vector bundles out of their curvature matrices. The algorithm is based on [this](https://www.math.uni-potsdam.de/fileadmin/user_upload/Prof-Geometrie/Dokumente/Lehre/Lehrmaterialien/charakteristisch.pdf) short script.\n \n+In a first step, the graded algebra of \"mixed\" differential forms of a manifold will be introduced so one can use the matrix framework of sage in the following steps.\n``````\n",
    "created_at": "2019-03-31T22:35:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427339",
    "user": "https://github.com/DeRhamSource"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
+This project is my master thesis. I want to implement a computation of characteristic classes of vector bundles out of their curvature matrices. The algorithm is based on [this](https://www.math.uni-potsdam.de/fileadmin/user_upload/Prof-Geometrie/Dokumente/Lehre/Lehrmaterialien/charakteristisch.pdf) short script.
 
+In a first step, the graded algebra of "mixed" differential forms of a manifold will be introduced so one can use the matrix framework of sage in the following steps.
``````




---

archive/issue_events_375758.json:
```json
{
    "actor": "https://github.com/DeRhamSource",
    "created_at": "2019-03-31T22:35:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20geometry",
    "label_color": "0000ff",
    "label_name": "c: geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27584#event-375758"
}
```



---

archive/issue_events_375759.json:
```json
{
    "actor": "https://github.com/DeRhamSource",
    "created_at": "2019-03-31T22:37:43Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "title_is": "Characteristic Classes - MixedAlgebra",
    "title_was": "Characteristic Classes",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27584#event-375759"
}
```



---

archive/issue_comments_427340.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n This project is my master thesis. I want to implement a computation of characteristic classes of vector bundles out of their curvature matrices. The algorithm is based on [this](https://www.math.uni-potsdam.de/fileadmin/user_upload/Prof-Geometrie/Dokumente/Lehre/Lehrmaterialien/charakteristisch.pdf) short script.\n \n-In a first step, the graded algebra of \"mixed\" differential forms of a manifold will be introduced so one can use the matrix framework of sage in the following steps.\n+In this first step, the graded algebra of \"mixed\" differential forms of a manifold will be introduced so one can use the matrix framework of sage in the following steps.\n``````\n",
    "created_at": "2019-03-31T22:37:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427340",
    "user": "https://github.com/DeRhamSource"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 This project is my master thesis. I want to implement a computation of characteristic classes of vector bundles out of their curvature matrices. The algorithm is based on [this](https://www.math.uni-potsdam.de/fileadmin/user_upload/Prof-Geometrie/Dokumente/Lehre/Lehrmaterialien/charakteristisch.pdf) short script.
 
-In a first step, the graded algebra of "mixed" differential forms of a manifold will be introduced so one can use the matrix framework of sage in the following steps.
+In this first step, the graded algebra of "mixed" differential forms of a manifold will be introduced so one can use the matrix framework of sage in the following steps.
``````




---

archive/issue_comments_427341.json:
```json
{
    "body": "Branch: **[u/DeRhamSource/char_class_algebra](https://github.com/sagemath/sagetrac-mirror/tree/u/DeRhamSource/char_class_algebra)**",
    "created_at": "2019-04-03T10:30:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427341",
    "user": "https://github.com/DeRhamSource"
}
```

Branch: **[u/DeRhamSource/char_class_algebra](https://github.com/sagemath/sagetrac-mirror/tree/u/DeRhamSource/char_class_algebra)**



---

archive/issue_comments_427342.json:
```json
{
    "body": "Changed branch from **[u/DeRhamSource/char_class_algebra](https://github.com/sagemath/sagetrac-mirror/tree/u/DeRhamSource/char_class_algebra)** to **[u/gh-DeRhamSource/char_class_algebra](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-DeRhamSource/char_class_algebra)**",
    "created_at": "2019-04-03T10:40:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427342",
    "user": "https://github.com/DeRhamSource"
}
```

Changed branch from **[u/DeRhamSource/char_class_algebra](https://github.com/sagemath/sagetrac-mirror/tree/u/DeRhamSource/char_class_algebra)** to **[u/gh-DeRhamSource/char_class_algebra](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-DeRhamSource/char_class_algebra)**



---

archive/issue_comments_427343.json:
```json
{
    "body": "Changed branch from **[u/gh-DeRhamSource/char_class_algebra](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-DeRhamSource/char_class_algebra)** to none",
    "created_at": "2019-04-03T11:27:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427343",
    "user": "https://github.com/DeRhamSource"
}
```

Changed branch from **[u/gh-DeRhamSource/char_class_algebra](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-DeRhamSource/char_class_algebra)** to none



---

archive/issue_comments_427344.json:
```json
{
    "body": "Branch: **[u/gh-DeRhamSource/characteristic_classes___mixedalgebra](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-DeRhamSource/characteristic_classes___mixedalgebra)**",
    "created_at": "2019-04-03T11:29:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427344",
    "user": "https://github.com/DeRhamSource"
}
```

Branch: **[u/gh-DeRhamSource/characteristic_classes___mixedalgebra](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-DeRhamSource/characteristic_classes___mixedalgebra)**



---

archive/issue_comments_427345.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/49f21e50d792f4000c0b0b6cf64c93fd5eaf2da2\"><code>49f21e5</code></a></td><td><code>Initial version (without doctests)</code></td></tr></table>\n",
    "created_at": "2019-04-03T11:37:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427345",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/49f21e50d792f4000c0b0b6cf64c93fd5eaf2da2"><code>49f21e5</code></a></td><td><code>Initial version (without doctests)</code></td></tr></table>




---

archive/issue_comments_427346.json:
```json
{
    "body": "Commit: **[`49f21e5`](https://github.com/sagemath/sagetrac-mirror/commit/49f21e50d792f4000c0b0b6cf64c93fd5eaf2da2)**",
    "created_at": "2019-04-03T11:37:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427346",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`49f21e5`](https://github.com/sagemath/sagetrac-mirror/commit/49f21e50d792f4000c0b0b6cf64c93fd5eaf2da2)**



---

archive/issue_comments_427347.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nHere is the answer to the question raised in https://groups.google.com/d/msg/sage-devel/hwsQWuLN0nc/1_8LjLL4AgAJ, namely when `a` is a differential form (from previously existing `DiffForm` class) and `A` is a mixed form (as introduced in this ticket), why do we get\n\n```\nsage: a.__mul__(A)\nMixed differential form A/\\a on the 2-dimensional differentiable manifold M\n```\nI think this results from a clash between (i) the operator `__mul__` being used to denote the wedge product for mixed differential forms and (ii) the operator `__mul__` being used to denote tensor product for differential forms. Indeed `a.__mul__(A)`  calls the method `__mul__` implemented in line 2169 of `src/sage/manifolds/differentiable/tensorfield.py`, which is devoted to the tensor product (the differential form `a` being considered as a tensor field of type (0,p), where p=degree(a)). As you can see in line 2269, if `A` does not belong to the class `TensorField`, one assumes that `A` is a scalar field (the only possible case until this ticket) and the code return `A*a`, i.e. `A.wedge(a)`. \n\nA possible solution could be to change the lines 2269-2271 of `tensorfield.py` to\n\n```\nif isinstance(other, MixedForm):\n    return other.parent()(self)._mul_(other)\nelif not isinstance(other, TensorField):\n    # Multiplication by a scalar field or a number\n    return other * self\n```\nA better way would be to redefine `__mul__` in `DiffForm`, falling back to the tensor field version if `other` is not a mixed form.",
    "created_at": "2019-04-03T12:41:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427347",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:8" align="right">comment:8</div>

Here is the answer to the question raised in https://groups.google.com/d/msg/sage-devel/hwsQWuLN0nc/1_8LjLL4AgAJ, namely when `a` is a differential form (from previously existing `DiffForm` class) and `A` is a mixed form (as introduced in this ticket), why do we get

```
sage: a.__mul__(A)
Mixed differential form A/\a on the 2-dimensional differentiable manifold M
```
I think this results from a clash between (i) the operator `__mul__` being used to denote the wedge product for mixed differential forms and (ii) the operator `__mul__` being used to denote tensor product for differential forms. Indeed `a.__mul__(A)`  calls the method `__mul__` implemented in line 2169 of `src/sage/manifolds/differentiable/tensorfield.py`, which is devoted to the tensor product (the differential form `a` being considered as a tensor field of type (0,p), where p=degree(a)). As you can see in line 2269, if `A` does not belong to the class `TensorField`, one assumes that `A` is a scalar field (the only possible case until this ticket) and the code return `A*a`, i.e. `A.wedge(a)`. 

A possible solution could be to change the lines 2269-2271 of `tensorfield.py` to

```
if isinstance(other, MixedForm):
    return other.parent()(self)._mul_(other)
elif not isinstance(other, TensorField):
    # Multiplication by a scalar field or a number
    return other * self
```
A better way would be to redefine `__mul__` in `DiffForm`, falling back to the tensor field version if `other` is not a mixed form.



---

archive/issue_comments_427348.json:
```json
{
    "body": "Changed commit from **[`49f21e5`](https://github.com/sagemath/sagetrac-mirror/commit/49f21e50d792f4000c0b0b6cf64c93fd5eaf2da2)** to **[`4ba165d`](https://github.com/sagemath/sagetrac-mirror/commit/4ba165d85dff93b5cbad4fb7af3b403e2e968077)**",
    "created_at": "2019-04-03T14:18:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427348",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`49f21e5`](https://github.com/sagemath/sagetrac-mirror/commit/49f21e50d792f4000c0b0b6cf64c93fd5eaf2da2)** to **[`4ba165d`](https://github.com/sagemath/sagetrac-mirror/commit/4ba165d85dff93b5cbad4fb7af3b403e2e968077)**



---

archive/issue_comments_427349.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4ba165d85dff93b5cbad4fb7af3b403e2e968077\"><code>4ba165d</code></a></td><td><code>Sage Compatibility</code></td></tr></table>\n",
    "created_at": "2019-04-03T14:18:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427349",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4ba165d85dff93b5cbad4fb7af3b403e2e968077"><code>4ba165d</code></a></td><td><code>Sage Compatibility</code></td></tr></table>




---

archive/issue_comments_427350.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nYour code looks nice, as well as the demo notebook! \n\nJust a remark at this stage: you should not put any Jupyter notebook in the ticket's git branch. Indeed, when the ticket gets a positive review, the branch is merged into Sage's main branch, which must contain only source code (it is already very large just with sources). It is of course a good idea to share notebooks during the development process, but you should put them to a public repository (e.g. GitHub) and simply add a link to them in some comment on the ticket.",
    "created_at": "2019-04-04T14:03:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427350",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:10" align="right">comment:10</div>

Your code looks nice, as well as the demo notebook! 

Just a remark at this stage: you should not put any Jupyter notebook in the ticket's git branch. Indeed, when the ticket gets a positive review, the branch is merged into Sage's main branch, which must contain only source code (it is already very large just with sources). It is of course a good idea to share notebooks during the development process, but you should put them to a public repository (e.g. GitHub) and simply add a link to them in some comment on the ticket.



---

archive/issue_comments_427351.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nThe other thing you could do is add the notebook file as an attachment (but note that you cannot delete it afterwards).",
    "created_at": "2019-04-04T14:21:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427351",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:11" align="right">comment:11</div>

The other thing you could do is add the notebook file as an attachment (but note that you cannot delete it afterwards).



---

archive/issue_comments_427352.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nOh I'm sorry, I didn't realize that. How can I delete this file from the ticket?\n\nIn the next step, I will translate the notebook to english and add Doctests to the main files. Then, I guess, it's ready for review.",
    "created_at": "2019-04-04T14:24:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427352",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:12" align="right">comment:12</div>

Oh I'm sorry, I didn't realize that. How can I delete this file from the ticket?

In the next step, I will translate the notebook to english and add Doctests to the main files. Then, I guess, it's ready for review.



---

archive/issue_comments_427353.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@DeRhamSource](#comment%3A12):\n> Oh I'm sorry, I didn't realize that. How can I delete this file from the ticket?\n> \n\nSince the file is not very large, I guess it suffices to run\n\n```\ngit rm scripts/MixedAlgebra.ipynb\n```\nbefore your next commit. \nOtherwise (i.e. for a large file), I would have recommended to delete the branch and to start a brand new one. \n> In the next step, I will translate the notebook to english and add Doctests to the main files. Then, I guess, it's ready for review.\n\nOK very good!",
    "created_at": "2019-04-04T14:57:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427353",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@DeRhamSource](#comment%3A12):
> Oh I'm sorry, I didn't realize that. How can I delete this file from the ticket?
> 

Since the file is not very large, I guess it suffices to run

```
git rm scripts/MixedAlgebra.ipynb
```
before your next commit. 
Otherwise (i.e. for a large file), I would have recommended to delete the branch and to start a brand new one. 
> In the next step, I will translate the notebook to english and add Doctests to the main files. Then, I guess, it's ready for review.

OK very good!



---

archive/issue_comments_427354.json:
```json
{
    "body": "Changed commit from **[`4ba165d`](https://github.com/sagemath/sagetrac-mirror/commit/4ba165d85dff93b5cbad4fb7af3b403e2e968077)** to **[`3ca14f2`](https://github.com/sagemath/sagetrac-mirror/commit/3ca14f2de40c60ec79036c03931dc5b30729cee6)**",
    "created_at": "2019-04-04T15:05:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427354",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4ba165d`](https://github.com/sagemath/sagetrac-mirror/commit/4ba165d85dff93b5cbad4fb7af3b403e2e968077)** to **[`3ca14f2`](https://github.com/sagemath/sagetrac-mirror/commit/3ca14f2de40c60ec79036c03931dc5b30729cee6)**



---

archive/issue_comments_427355.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3ca14f2de40c60ec79036c03931dc5b30729cee6\"><code>3ca14f2</code></a></td><td><code>Notebook removed + Minor Changes</code></td></tr></table>\n",
    "created_at": "2019-04-04T15:05:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427355",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3ca14f2de40c60ec79036c03931dc5b30729cee6"><code>3ca14f2</code></a></td><td><code>Notebook removed + Minor Changes</code></td></tr></table>




---

archive/issue_comments_427356.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n This project is my master thesis. I want to implement a computation of characteristic classes of vector bundles out of their curvature matrices. The algorithm is based on [this](https://www.math.uni-potsdam.de/fileadmin/user_upload/Prof-Geometrie/Dokumente/Lehre/Lehrmaterialien/charakteristisch.pdf) short script.\n \n In this first step, the graded algebra of \"mixed\" differential forms of a manifold will be introduced so one can use the matrix framework of sage in the following steps.\n+\n+A demo notebook is provided at https://github.com/DeRhamSource/MixedFormNotebook\n``````\n",
    "created_at": "2019-04-05T15:11:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427356",
    "user": "https://github.com/DeRhamSource"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 This project is my master thesis. I want to implement a computation of characteristic classes of vector bundles out of their curvature matrices. The algorithm is based on [this](https://www.math.uni-potsdam.de/fileadmin/user_upload/Prof-Geometrie/Dokumente/Lehre/Lehrmaterialien/charakteristisch.pdf) short script.
 
 In this first step, the graded algebra of "mixed" differential forms of a manifold will be introduced so one can use the matrix framework of sage in the following steps.
+
+A demo notebook is provided at https://github.com/DeRhamSource/MixedFormNotebook
``````




---

archive/issue_comments_427357.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c13bd1dde3a4c5c881c73d734a2b46285ed42074\"><code>c13bd1d</code></a></td><td><code>Some doctest examples added</code></td></tr></table>\n",
    "created_at": "2019-04-05T15:15:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427357",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c13bd1dde3a4c5c881c73d734a2b46285ed42074"><code>c13bd1d</code></a></td><td><code>Some doctest examples added</code></td></tr></table>




---

archive/issue_comments_427358.json:
```json
{
    "body": "Changed commit from **[`3ca14f2`](https://github.com/sagemath/sagetrac-mirror/commit/3ca14f2de40c60ec79036c03931dc5b30729cee6)** to **[`c13bd1d`](https://github.com/sagemath/sagetrac-mirror/commit/c13bd1dde3a4c5c881c73d734a2b46285ed42074)**",
    "created_at": "2019-04-05T15:15:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427358",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3ca14f2`](https://github.com/sagemath/sagetrac-mirror/commit/3ca14f2de40c60ec79036c03931dc5b30729cee6)** to **[`c13bd1d`](https://github.com/sagemath/sagetrac-mirror/commit/c13bd1dde3a4c5c881c73d734a2b46285ed42074)**



---

archive/issue_comments_427359.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nI added a link to my public github repo for the demo notebook in the description.",
    "created_at": "2019-04-05T15:20:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427359",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:17" align="right">comment:17</div>

I added a link to my public github repo for the demo notebook in the description.



---

archive/issue_comments_427360.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eea8b18ed4e00f01a1f67bd2694200c9a2919006\"><code>eea8b18</code></a></td><td><code>Added some doctests + minor changes</code></td></tr></table>\n",
    "created_at": "2019-04-06T16:36:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427360",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eea8b18ed4e00f01a1f67bd2694200c9a2919006"><code>eea8b18</code></a></td><td><code>Added some doctests + minor changes</code></td></tr></table>




---

archive/issue_comments_427361.json:
```json
{
    "body": "Changed commit from **[`c13bd1d`](https://github.com/sagemath/sagetrac-mirror/commit/c13bd1dde3a4c5c881c73d734a2b46285ed42074)** to **[`eea8b18`](https://github.com/sagemath/sagetrac-mirror/commit/eea8b18ed4e00f01a1f67bd2694200c9a2919006)**",
    "created_at": "2019-04-06T16:36:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427361",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c13bd1d`](https://github.com/sagemath/sagetrac-mirror/commit/c13bd1dde3a4c5c881c73d734a2b46285ed42074)** to **[`eea8b18`](https://github.com/sagemath/sagetrac-mirror/commit/eea8b18ed4e00f01a1f67bd2694200c9a2919006)**



---

archive/issue_comments_427362.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nThere is now a full doctest implemented in mixed_form_algebra.py. However, I've encountered another problem while coding the doctest of mixed_form.py. Namely an issue with coercions from the symbolic ring:\n\n```\nsage: M = Manifold(2, 'M')\nsage: X.<x,y> = M.chart()\nsage: A = M.mixed_form_algebra()\nsage: A._element_constructor_(x).disp(X.frame())\n[x] + [0] + [0]\nsage: A(x).disp(X.frame())\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n<ipython-input-84-7bd889258762> in <module>()\n----> 1 A(x).disp(X.frame())\n\nAttributeError: 'NoneType' object has no attribute 'disp'\n```\n\nHow is that possible? Shouldn't A(.) invoke the method A._element_constructor_?",
    "created_at": "2019-04-06T16:44:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427362",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:19" align="right">comment:19</div>

There is now a full doctest implemented in mixed_form_algebra.py. However, I've encountered another problem while coding the doctest of mixed_form.py. Namely an issue with coercions from the symbolic ring:

```
sage: M = Manifold(2, 'M')
sage: X.<x,y> = M.chart()
sage: A = M.mixed_form_algebra()
sage: A._element_constructor_(x).disp(X.frame())
[x] + [0] + [0]
sage: A(x).disp(X.frame())
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
<ipython-input-84-7bd889258762> in <module>()
----> 1 A(x).disp(X.frame())

AttributeError: 'NoneType' object has no attribute 'disp'
```

How is that possible? Shouldn't A(.) invoke the method A._element_constructor_?



---

archive/issue_comments_427363.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nIt does, but only after checking for a coercion. So my guess is something is going strange with the coercion. Posting the full traceback would be useful.\n\nA few unrelated comments:\n\n`isinstance(comp, (int, Integer))` -> `comp in ZZ` because it also catches cases like `2/1` (which is in `QQ`).\n\nA few of your example blocks should be `TESTS::` and `EXAMPLES::` when followed immediately by doctests, which should also be indentent 1 level.",
    "created_at": "2019-04-06T22:56:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427363",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:20" align="right">comment:20</div>

It does, but only after checking for a coercion. So my guess is something is going strange with the coercion. Posting the full traceback would be useful.

A few unrelated comments:

`isinstance(comp, (int, Integer))` -> `comp in ZZ` because it also catches cases like `2/1` (which is in `QQ`).

A few of your example blocks should be `TESTS::` and `EXAMPLES::` when followed immediately by doctests, which should also be indentent 1 level.



---

archive/issue_comments_427364.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nThanks! :)\n\nThe snippet `isinstance(comp, (int, Integer))` is adapted from `diff_form_module.py`. Should I apply your suggestion in that file as well for this branch, then?\n\nMore feedback and suggestions are very welcome! :)\n\nUnfortunately, there is no error message or traceback:\n\n```\nsage: M = Manifold(2, 'M')\nsage: X.<x,y> = M.chart()\nsage: A = M.mixed_form_algebra()\nsage: A(x)\n```\n\nThe coercion is already known:\n\n```\nsage: M.mixed_form_algebra().has_coerce_map_from(SR)\nTrue\n```\n\nSo, I have really no idea why it won't work. But for scalar fields, it does:\n\n```\nsage: f = M.scalar_field_algebra()(x); f\nScalar field on the 2-dimensional differentiable manifold M\n```",
    "created_at": "2019-04-06T23:31:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427364",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:21" align="right">comment:21</div>

Thanks! :)

The snippet `isinstance(comp, (int, Integer))` is adapted from `diff_form_module.py`. Should I apply your suggestion in that file as well for this branch, then?

More feedback and suggestions are very welcome! :)

Unfortunately, there is no error message or traceback:

```
sage: M = Manifold(2, 'M')
sage: X.<x,y> = M.chart()
sage: A = M.mixed_form_algebra()
sage: A(x)
```

The coercion is already known:

```
sage: M.mixed_form_algebra().has_coerce_map_from(SR)
True
```

So, I have really no idea why it won't work. But for scalar fields, it does:

```
sage: f = M.scalar_field_algebra()(x); f
Scalar field on the 2-dimensional differentiable manifold M
```



---

archive/issue_comments_427365.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nHmm...so the output of `A(x)` really is `None`...that is very strange. What does `coercion_model.explain(x, A)` result in?",
    "created_at": "2019-04-06T23:44:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427365",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:22" align="right">comment:22</div>

Hmm...so the output of `A(x)` really is `None`...that is very strange. What does `coercion_model.explain(x, A)` result in?



---

archive/issue_comments_427366.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\n\n```\nsage: M = Manifold(2, 'M')\nsage: X.<x,y> = M.chart()\nsage: A = M.mixed_form_algebra()\nsage: coercion_model.explain(x, A)\nCoercion on left operand via\n    Generic morphism:\n      From: Symbolic Ring\n      To:   Graded algebra Omega^*(M) of mixed differential forms on the 2-dimensional differentiable manifold M\nArithmetic performed after coercions.\nResult lives in Graded algebra Omega^*(M) of mixed differential forms on the 2-dimensional differentiable manifold M\n```",
    "created_at": "2019-04-06T23:50:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427366",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:23" align="right">comment:23</div>


```
sage: M = Manifold(2, 'M')
sage: X.<x,y> = M.chart()
sage: A = M.mixed_form_algebra()
sage: coercion_model.explain(x, A)
Coercion on left operand via
    Generic morphism:
      From: Symbolic Ring
      To:   Graded algebra Omega^*(M) of mixed differential forms on the 2-dimensional differentiable manifold M
Arithmetic performed after coercions.
Result lives in Graded algebra Omega^*(M) of mixed differential forms on the 2-dimensional differentiable manifold M
```



---

archive/issue_comments_427367.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nWhat is the result of\n\n```\nsage: phi = A.coerce_map_from_(SR)\nsage: phi\nsage: type(phi)\nsage: phi(x)\n```",
    "created_at": "2019-04-07T00:27:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427367",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:24" align="right">comment:24</div>

What is the result of

```
sage: phi = A.coerce_map_from_(SR)
sage: phi
sage: type(phi)
sage: phi(x)
```



---

archive/issue_comments_427368.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\n\n```\nsage: M = Manifold(2, 'M')\nsage: X.<x,y> = M.chart()\nsage: A = M.mixed_form_algebra()\nsage: phi = A.coerce_map_from(SR)\nsage: phi\nGeneric morphism:\n  From: Symbolic Ring\n  To:   Graded algebra Omega^*(M) of mixed differential forms on the 2-dimensional differentiable manifold M\nsage: type(phi)\n<type 'sage.categories.morphism.SetMorphism'>\nsage: phi(x)\nsage: type(phi(x))\n<type 'NoneType'>\n```",
    "created_at": "2019-04-07T07:34:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427368",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:25" align="right">comment:25</div>


```
sage: M = Manifold(2, 'M')
sage: X.<x,y> = M.chart()
sage: A = M.mixed_form_algebra()
sage: phi = A.coerce_map_from(SR)
sage: phi
Generic morphism:
  From: Symbolic Ring
  To:   Graded algebra Omega^*(M) of mixed differential forms on the 2-dimensional differentiable manifold M
sage: type(phi)
<type 'sage.categories.morphism.SetMorphism'>
sage: phi(x)
sage: type(phi(x))
<type 'NoneType'>
```



---

archive/issue_comments_427369.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nThat was what I was expecting. Basically what is happening is when it goes through the coercion framework, the result is `None`. So you need to look into that coercion morphism and what function it is calling and why that is not returning the proper object.",
    "created_at": "2019-04-07T07:37:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427369",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:26" align="right">comment:26</div>

That was what I was expecting. Basically what is happening is when it goes through the coercion framework, the result is `None`. So you need to look into that coercion morphism and what function it is calling and why that is not returning the proper object.



---

archive/issue_comments_427370.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nI'm sorry: How do I manage that?",
    "created_at": "2019-04-07T08:40:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427370",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:27" align="right">comment:27</div>

I'm sorry: How do I manage that?



---

archive/issue_comments_427371.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nYou will have to explore the properties of the morphism, such as `phi._function`, and maybe also add a `print()` statement or two for debugging in the `_element_constructor_` to see what is happening.",
    "created_at": "2019-04-07T13:33:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427371",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:28" align="right">comment:28</div>

You will have to explore the properties of the morphism, such as `phi._function`, and maybe also add a `print()` statement or two for debugging in the `_element_constructor_` to see what is happening.



---

archive/issue_comments_427372.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nI think the issue arises because `SR` is the base ring of the algebra `A`:\n\n```\nsage: A.base_ring()\nSymbolic Ring\n```\nIf I am correct, in such a case, the coercion `SR` --> `A` is implemented via the algebra operation `x * A.one()`, not via `_element_constructor_`. In the present case, `x * A.one()` fails:\n\n```\nsage: x * A.one()\n...\nRuntimeError: BUG in map, returned None x <type 'sage.categories.morphism.SetMorphism'> Generic morphism:\n  From: Symbolic Ring\n  To:   Graded algebra Omega^*(M) of mixed differential forms on the 2-dimensional differentiable manifold M\n```\nTo make it work, you should implement the method `_lmul_` in class `MixedForm` and add the line \n\n```\n    if other is SR:\n        return True\n```\nin `MixedFormAlgebra._coerce_map_from_`. At least, this is what is done for the algebras of scalar fields: see line 512 of `src/sage/manifolds/scalarfield_algebra.py` and the definition of `_lmul_` in line 2449 of `src/sage/manifolds/scalarfield.py`.",
    "created_at": "2019-04-07T17:18:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427372",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:29" align="right">comment:29</div>

I think the issue arises because `SR` is the base ring of the algebra `A`:

```
sage: A.base_ring()
Symbolic Ring
```
If I am correct, in such a case, the coercion `SR` --> `A` is implemented via the algebra operation `x * A.one()`, not via `_element_constructor_`. In the present case, `x * A.one()` fails:

```
sage: x * A.one()
...
RuntimeError: BUG in map, returned None x <type 'sage.categories.morphism.SetMorphism'> Generic morphism:
  From: Symbolic Ring
  To:   Graded algebra Omega^*(M) of mixed differential forms on the 2-dimensional differentiable manifold M
```
To make it work, you should implement the method `_lmul_` in class `MixedForm` and add the line 

```
    if other is SR:
        return True
```
in `MixedFormAlgebra._coerce_map_from_`. At least, this is what is done for the algebras of scalar fields: see line 512 of `src/sage/manifolds/scalarfield_algebra.py` and the definition of `_lmul_` in line 2449 of `src/sage/manifolds/scalarfield.py`.



---

archive/issue_comments_427373.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nYes, perfect. That solved the problem. Thanks! :)",
    "created_at": "2019-04-07T18:19:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427373",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:30" align="right">comment:30</div>

Yes, perfect. That solved the problem. Thanks! :)



---

archive/issue_comments_427374.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@egourgoulhon](#comment%3A29):\n> To make it work, you should implement the method `_lmul_` in class `MixedForm` and add the line \n> \n> ```\n>     if other is SR:\n>         return True\n> ```\n> in `MixedFormAlgebra._coerce_map_from_`. At least, this is what is done for the algebras of scalar fields: see line 512 of `src/sage/manifolds/scalarfield_algebra.py` and the definition of `_lmul_` in line 2449 of `src/sage/manifolds/scalarfield.py`.\n\nI am a little worried about this. What about `_rmul_`? This also makes the dependence too strong on the base ring being `SR`. Can we use `if other is self.base_ring()` or something like that?",
    "created_at": "2019-04-08T12:21:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427374",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@egourgoulhon](#comment%3A29):
> To make it work, you should implement the method `_lmul_` in class `MixedForm` and add the line 
> 
> ```
>     if other is SR:
>         return True
> ```
> in `MixedFormAlgebra._coerce_map_from_`. At least, this is what is done for the algebras of scalar fields: see line 512 of `src/sage/manifolds/scalarfield_algebra.py` and the definition of `_lmul_` in line 2449 of `src/sage/manifolds/scalarfield.py`.

I am a little worried about this. What about `_rmul_`? This also makes the dependence too strong on the base ring being `SR`. Can we use `if other is self.base_ring()` or something like that?



---

archive/issue_comments_427375.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@tscrim](#comment%3A31):\n> \n> I am a little worried about this. What about `_rmul_`? \n>\n>\n\nI am puzzled now about the scalar field algebra implementation. Why do we have `_lmul_` and not `_rmul_`? Indeed, `__rmul__` is the standard Python operator for reflected operands and `__lmul__` does not exist in Python. What's exactly the role of `_lmul_` in Sage? I guess it is there for noncommutative base rings but I could not find a good place in the documentation explaining this... \nIn the present case, both for scalar field and mixed form algebras, we are dealing with a base ring that is commutative (since it is a field), so shouldn't we have only `_rmul_`?",
    "created_at": "2019-04-08T12:56:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427375",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@tscrim](#comment%3A31):
> 
> I am a little worried about this. What about `_rmul_`? 
>
>

I am puzzled now about the scalar field algebra implementation. Why do we have `_lmul_` and not `_rmul_`? Indeed, `__rmul__` is the standard Python operator for reflected operands and `__lmul__` does not exist in Python. What's exactly the role of `_lmul_` in Sage? I guess it is there for noncommutative base rings but I could not find a good place in the documentation explaining this... 
In the present case, both for scalar field and mixed form algebras, we are dealing with a base ring that is commutative (since it is a field), so shouldn't we have only `_rmul_`?



---

archive/issue_comments_427376.json:
```json
{
    "body": "<div id=\"comment:33\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0d772ae29e7971ab8f5549eb5e647dde66b2ba9d\"><code>0d772ae</code></a></td><td><code>Full Doctest added</code></td></tr></table>\n",
    "created_at": "2019-04-08T14:54:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427376",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:33"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0d772ae29e7971ab8f5549eb5e647dde66b2ba9d"><code>0d772ae</code></a></td><td><code>Full Doctest added</code></td></tr></table>




---

archive/issue_comments_427377.json:
```json
{
    "body": "Changed commit from **[`eea8b18`](https://github.com/sagemath/sagetrac-mirror/commit/eea8b18ed4e00f01a1f67bd2694200c9a2919006)** to **[`0d772ae`](https://github.com/sagemath/sagetrac-mirror/commit/0d772ae29e7971ab8f5549eb5e647dde66b2ba9d)**",
    "created_at": "2019-04-08T14:54:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427377",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`eea8b18`](https://github.com/sagemath/sagetrac-mirror/commit/eea8b18ed4e00f01a1f67bd2694200c9a2919006)** to **[`0d772ae`](https://github.com/sagemath/sagetrac-mirror/commit/0d772ae29e7971ab8f5549eb5e647dde66b2ba9d)**



---

archive/issue_events_375760.json:
```json
{
    "actor": "https://github.com/DeRhamSource",
    "created_at": "2019-04-08T14:59:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27584#event-375760"
}
```



---

archive/issue_comments_427378.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@egourgoulhon](#comment%3A29):\n> To make it work, you should implement the method `_lmul_` in class `MixedForm` and add the line \n> \n> ```\n>     if other is SR:\n>         return True\n> ```\n> in `MixedFormAlgebra._coerce_map_from_`. At least, this is what is done for the algebras of scalar fields: see line 512 of `src/sage/manifolds/scalarfield_algebra.py` and the definition of `_lmul_` in line 2449 of `src/sage/manifolds/scalarfield.py`.\n\nI managed the coercion detection via\n\n```\n        if self._domain.scalar_field_algebra().has_coerce_map_from(S):\n            return True\n```\n\nDoes that also eliminate your doubts concerning the strong dependencies on SR, Travis?",
    "created_at": "2019-04-08T15:23:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427378",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@egourgoulhon](#comment%3A29):
> To make it work, you should implement the method `_lmul_` in class `MixedForm` and add the line 
> 
> ```
>     if other is SR:
>         return True
> ```
> in `MixedFormAlgebra._coerce_map_from_`. At least, this is what is done for the algebras of scalar fields: see line 512 of `src/sage/manifolds/scalarfield_algebra.py` and the definition of `_lmul_` in line 2449 of `src/sage/manifolds/scalarfield.py`.

I managed the coercion detection via

```
        if self._domain.scalar_field_algebra().has_coerce_map_from(S):
            return True
```

Does that also eliminate your doubts concerning the strong dependencies on SR, Travis?



---

archive/issue_comments_427379.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@egourgoulhon](#comment%3A32):\n> Replying to [@tscrim](#comment%3A31):\n> > \n> > I am a little worried about this. What about `_rmul_`? \n> >\n> >\n> \n> I am puzzled now about the scalar field algebra implementation. Why do we have `_lmul_` and not `_rmul_`? Indeed, `__rmul__` is the standard Python operator for reflected operands and `__lmul__` does not exist in Python. What's exactly the role of `_lmul_` in Sage? I guess it is there for noncommutative base rings but I could not find a good place in the documentation explaining this... \n> In the present case, both for scalar field and mixed form algebras, we are dealing with a base ring that is commutative (since it is a field), so shouldn't we have only `_rmul_`?\n\nI see in line 2394 of `src/sage/structure/element.pyx` that `_rmul_` falls back to `_lmul_`, which is not implemented at the `ModuleElement` level (actually returns `None`). This leaves the impression that when implementing a new module element class over a commutative ring, one shall actually implement `_lmul_` and not `_rmul_`...  Accordingly, my understanding at the moment is that in Sage, we have \n- `_mul_(self, other)` when `self` and `other` have the same parent\n- `_lmul_(self, other)` when `self` and `other` have distinct parents\n- `_rmul_(self, other)` is inherited from  `ModuleElement` (if not redefined) and falls back to `_lmul_`\n\nTravis, do you confirm?",
    "created_at": "2019-04-08T15:23:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427379",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@egourgoulhon](#comment%3A32):
> Replying to [@tscrim](#comment%3A31):
> > 
> > I am a little worried about this. What about `_rmul_`? 
> >
> >
> 
> I am puzzled now about the scalar field algebra implementation. Why do we have `_lmul_` and not `_rmul_`? Indeed, `__rmul__` is the standard Python operator for reflected operands and `__lmul__` does not exist in Python. What's exactly the role of `_lmul_` in Sage? I guess it is there for noncommutative base rings but I could not find a good place in the documentation explaining this... 
> In the present case, both for scalar field and mixed form algebras, we are dealing with a base ring that is commutative (since it is a field), so shouldn't we have only `_rmul_`?

I see in line 2394 of `src/sage/structure/element.pyx` that `_rmul_` falls back to `_lmul_`, which is not implemented at the `ModuleElement` level (actually returns `None`). This leaves the impression that when implementing a new module element class over a commutative ring, one shall actually implement `_lmul_` and not `_rmul_`...  Accordingly, my understanding at the moment is that in Sage, we have 
- `_mul_(self, other)` when `self` and `other` have the same parent
- `_lmul_(self, other)` when `self` and `other` have distinct parents
- `_rmul_(self, other)` is inherited from  `ModuleElement` (if not redefined) and falls back to `_lmul_`

Travis, do you confirm?



---

archive/issue_comments_427380.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nReplying to [@egourgoulhon](#comment%3A36):\n> Replying to [@egourgoulhon](#comment%3A32):\n> > Replying to [@tscrim](#comment%3A31):\n> > > \n> > > I am a little worried about this. What about `_rmul_`? \n> > >\n> > >\n> > \n> > I am puzzled now about the scalar field algebra implementation. Why do we have `_lmul_` and not `_rmul_`? Indeed, `__rmul__` is the standard Python operator for reflected operands and `__lmul__` does not exist in Python. What's exactly the role of `_lmul_` in Sage? I guess it is there for noncommutative base rings but I could not find a good place in the documentation explaining this... \n> > In the present case, both for scalar field and mixed form algebras, we are dealing with a base ring that is commutative (since it is a field), so shouldn't we have only `_rmul_`?\n> \n> \n> I see in line 2394 of `src/sage/structure/element.pyx` that `_rmul_` falls back to `_lmul_`, which is not implemented at the `ModuleElement` level (actually returns `None`). This leaves the impression that when implementing a new module element class over a commutative ring, one shall actually implement `_lmul_` and not `_rmul_`...  Accordingly, my understanding at the moment is that in Sage, we have \n> - `_mul_(self, other)` when `self` and `other` have the same parent\n> - `_lmul_(self, other)` when `self` and `other` have distinct parents\n> - `_rmul_(self, other)` is inherited from  `ModuleElement` (if not redefined) and falls back to `_lmul_`\n> \n> Travis, do you confirm?\n\nAh, right, I forgot that generic `_rmul_` was implemented in `ModuleElement`.\n\nSo Sage's `_rmul_` should not be confused with Python's `__rmul__`.\n\nPython's `__rmul__` is for when `self` knows how to multiply with `other` when `self` is on the right, but `other` does not. For instance, it handles `5 * self` because we cannot override the `int` type (which means the \"standard `int.__mul__`\" fails), but `self` knows what to do.\n\nSage's `_rmul_` and `_lmul_` play the same role, just on different sides. They are there to implement actions of `other` on `self` on the right or left, and thus are used by the coercion framework (in particular, they check if coercions can be applied).",
    "created_at": "2019-04-08T22:25:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427380",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:37" align="right">comment:37</div>

Replying to [@egourgoulhon](#comment%3A36):
> Replying to [@egourgoulhon](#comment%3A32):
> > Replying to [@tscrim](#comment%3A31):
> > > 
> > > I am a little worried about this. What about `_rmul_`? 
> > >
> > >
> > 
> > I am puzzled now about the scalar field algebra implementation. Why do we have `_lmul_` and not `_rmul_`? Indeed, `__rmul__` is the standard Python operator for reflected operands and `__lmul__` does not exist in Python. What's exactly the role of `_lmul_` in Sage? I guess it is there for noncommutative base rings but I could not find a good place in the documentation explaining this... 
> > In the present case, both for scalar field and mixed form algebras, we are dealing with a base ring that is commutative (since it is a field), so shouldn't we have only `_rmul_`?
> 
> 
> I see in line 2394 of `src/sage/structure/element.pyx` that `_rmul_` falls back to `_lmul_`, which is not implemented at the `ModuleElement` level (actually returns `None`). This leaves the impression that when implementing a new module element class over a commutative ring, one shall actually implement `_lmul_` and not `_rmul_`...  Accordingly, my understanding at the moment is that in Sage, we have 
> - `_mul_(self, other)` when `self` and `other` have the same parent
> - `_lmul_(self, other)` when `self` and `other` have distinct parents
> - `_rmul_(self, other)` is inherited from  `ModuleElement` (if not redefined) and falls back to `_lmul_`
> 
> Travis, do you confirm?

Ah, right, I forgot that generic `_rmul_` was implemented in `ModuleElement`.

So Sage's `_rmul_` should not be confused with Python's `__rmul__`.

Python's `__rmul__` is for when `self` knows how to multiply with `other` when `self` is on the right, but `other` does not. For instance, it handles `5 * self` because we cannot override the `int` type (which means the "standard `int.__mul__`" fails), but `self` knows what to do.

Sage's `_rmul_` and `_lmul_` play the same role, just on different sides. They are there to implement actions of `other` on `self` on the right or left, and thus are used by the coercion framework (in particular, they check if coercions can be applied).



---

archive/issue_comments_427381.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nReplying to [@DeRhamSource](#comment%3A35):\n> Replying to [@egourgoulhon](#comment%3A29):\n> > To make it work, you should implement the method `_lmul_` in class `MixedForm` and add the line \n> > \n> > ```\n> >     if other is SR:\n> >         return True\n> > ```\n> > in `MixedFormAlgebra._coerce_map_from_`. At least, this is what is done for the algebras of scalar fields: see line 512 of `src/sage/manifolds/scalarfield_algebra.py` and the definition of `_lmul_` in line 2449 of `src/sage/manifolds/scalarfield.py`.\n> \n> \n> I managed the coercion detection via\n> \n> ```\n>         if self._domain.scalar_field_algebra().has_coerce_map_from(S):\n>             return True\n> ```\n> \n> Does that also eliminate your doubts concerning the strong dependencies on SR, Travis?\n\nYes, I think that is better. Generally, I do not think it is a good idea to hardcode a ring unless you really only want to work with that ring (and my understanding is that this could be made more flexible in the future).",
    "created_at": "2019-04-08T22:27:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427381",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:38" align="right">comment:38</div>

Replying to [@DeRhamSource](#comment%3A35):
> Replying to [@egourgoulhon](#comment%3A29):
> > To make it work, you should implement the method `_lmul_` in class `MixedForm` and add the line 
> > 
> > ```
> >     if other is SR:
> >         return True
> > ```
> > in `MixedFormAlgebra._coerce_map_from_`. At least, this is what is done for the algebras of scalar fields: see line 512 of `src/sage/manifolds/scalarfield_algebra.py` and the definition of `_lmul_` in line 2449 of `src/sage/manifolds/scalarfield.py`.
> 
> 
> I managed the coercion detection via
> 
> ```
>         if self._domain.scalar_field_algebra().has_coerce_map_from(S):
>             return True
> ```
> 
> Does that also eliminate your doubts concerning the strong dependencies on SR, Travis?

Yes, I think that is better. Generally, I do not think it is a good idea to hardcode a ring unless you really only want to work with that ring (and my understanding is that this could be made more flexible in the future).



---

archive/issue_comments_427382.json:
```json
{
    "body": "Changed branch from **[u/gh-DeRhamSource/characteristic_classes___mixedalgebra](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-DeRhamSource/characteristic_classes___mixedalgebra)** to **[public/manifolds/mixed_differential_forms](https://github.com/sagemath/sagetrac-mirror/tree/public/manifolds/mixed_differential_forms)**",
    "created_at": "2019-04-09T22:32:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427382",
    "user": "https://github.com/egourgoulhon"
}
```

Changed branch from **[u/gh-DeRhamSource/characteristic_classes___mixedalgebra](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-DeRhamSource/characteristic_classes___mixedalgebra)** to **[public/manifolds/mixed_differential_forms](https://github.com/sagemath/sagetrac-mirror/tree/public/manifolds/mixed_differential_forms)**



---

archive/issue_comments_427383.json:
```json
{
    "body": "Changed commit from **[`0d772ae`](https://github.com/sagemath/sagetrac-mirror/commit/0d772ae29e7971ab8f5549eb5e647dde66b2ba9d)** to **[`506ef37`](https://github.com/sagemath/sagetrac-mirror/commit/506ef37791cdd89b1b2fa9b8009827197205c17e)**",
    "created_at": "2019-04-09T22:32:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427383",
    "user": "https://github.com/egourgoulhon"
}
```

Changed commit from **[`0d772ae`](https://github.com/sagemath/sagetrac-mirror/commit/0d772ae29e7971ab8f5549eb5e647dde66b2ba9d)** to **[`506ef37`](https://github.com/sagemath/sagetrac-mirror/commit/506ef37791cdd89b1b2fa9b8009827197205c17e)**



---

archive/issue_comments_427384.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nThere was a merge conflict with Sage 8.8.beta1 in the file `src/sage/manifolds/differentiable/manifold.py`. This was due to #27581 (initialization of the components of a tensor field while declaring it), which changed that file. The conflict is solved in the attached branch (since I am the author of #27581, it was probably easier that I solved this conflict, hence the new branch).\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/506ef37791cdd89b1b2fa9b8009827197205c17e\"><code>506ef37</code></a></td><td><code>Merge branch 'u/gh-DeRhamSource/characteristic_classes___mixedalgebra' of git://trac.sagemath.org/sage into Sage 8.8.beta1</code></td></tr></table>\n",
    "created_at": "2019-04-09T22:32:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427384",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:39" align="right">comment:39</div>

There was a merge conflict with Sage 8.8.beta1 in the file `src/sage/manifolds/differentiable/manifold.py`. This was due to #27581 (initialization of the components of a tensor field while declaring it), which changed that file. The conflict is solved in the attached branch (since I am the author of #27581, it was probably easier that I solved this conflict, hence the new branch).

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/506ef37791cdd89b1b2fa9b8009827197205c17e"><code>506ef37</code></a></td><td><code>Merge branch 'u/gh-DeRhamSource/characteristic_classes___mixedalgebra' of git://trac.sagemath.org/sage into Sage 8.8.beta1</code></td></tr></table>




---

archive/issue_comments_427385.json:
```json
{
    "body": "Reviewer: **Eric Gourgoulhon, Travis Scrimshaw**",
    "created_at": "2019-04-10T06:18:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427385",
    "user": "https://github.com/egourgoulhon"
}
```

Reviewer: **Eric Gourgoulhon, Travis Scrimshaw**



---

archive/issue_comments_427386.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nIf you click on the patchbot button (marked \"8.8.beta1\") located at the right of the ticket title, you will access to the [patchbot reports](https://patchbot.sagemath.org/ticket/27584/). One of them is useless, due to some patchbot issue (the one marked \"BuildFailed\"). The most relevant one is from the patchbot \"zancara\". It indicates \"TestFailed\", but if you click either on \"log\" or \"shortlog\", you'll see that the failure occurs in a source file that has not been touched by this ticket: `src/sage/tests/books/computational-mathematics-with-sagemath/graphique_doctest.py`. So this is more an issue on the patchbot size. The only relevant issue is the *pyflakes* error marked by a red cross in the plugin list at the right of the summary of zancara's report: if you click on \"diff\", you get \n\n```\nsrc/sage/manifolds/differentiable/mixed_form_algebra.py:31: \n'sage.rings.integer.Integer' imported but unused\n```\nCan you please correct this?\nNote that you shall update your Sage version to 8.8.beta1. If this is not done already, it suffices to pull the new ticket branch and run \n`MAKE=\"make -j8\" make`.",
    "created_at": "2019-04-10T06:18:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427386",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:40" align="right">comment:40</div>

If you click on the patchbot button (marked "8.8.beta1") located at the right of the ticket title, you will access to the [patchbot reports](https://patchbot.sagemath.org/ticket/27584/). One of them is useless, due to some patchbot issue (the one marked "BuildFailed"). The most relevant one is from the patchbot "zancara". It indicates "TestFailed", but if you click either on "log" or "shortlog", you'll see that the failure occurs in a source file that has not been touched by this ticket: `src/sage/tests/books/computational-mathematics-with-sagemath/graphique_doctest.py`. So this is more an issue on the patchbot size. The only relevant issue is the *pyflakes* error marked by a red cross in the plugin list at the right of the summary of zancara's report: if you click on "diff", you get 

```
src/sage/manifolds/differentiable/mixed_form_algebra.py:31: 
'sage.rings.integer.Integer' imported but unused
```
Can you please correct this?
Note that you shall update your Sage version to 8.8.beta1. If this is not done already, it suffices to pull the new ticket branch and run 
`MAKE="make -j8" make`.



---

archive/issue_comments_427387.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nRegarding the documentation: you have added doctests in the Python sources but the documentation is not generated since there is no entry to it in the sources of the reference manual. You shall modify/add files in `src/doc/en/reference/manifolds`, for instance in a way similar to what is done for differential forms, i.e. create a file `mixed_diff_form.rst` and add a pointer to it in `diff_manifold.rst`. To generate the documentation in a fast way, i.e. without having Sage process the whole reference manual, run\n\n```\nsage -docbuild reference/manifolds html\n```",
    "created_at": "2019-04-10T06:30:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427387",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:41" align="right">comment:41</div>

Regarding the documentation: you have added doctests in the Python sources but the documentation is not generated since there is no entry to it in the sources of the reference manual. You shall modify/add files in `src/doc/en/reference/manifolds`, for instance in a way similar to what is done for differential forms, i.e. create a file `mixed_diff_form.rst` and add a pointer to it in `diff_manifold.rst`. To generate the documentation in a fast way, i.e. without having Sage process the whole reference manual, run

```
sage -docbuild reference/manifolds html
```



---

archive/issue_comments_427388.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nSide remark: the bug that you've reported in https://groups.google.com/d/msg/sage-devel/EfLYpAxl_jU/ShlCS9L4BgAJ is fixed in Sage 8.8.beta1 (since #25576 has been merged in it).",
    "created_at": "2019-04-10T08:13:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427388",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:42" align="right">comment:42</div>

Side remark: the bug that you've reported in https://groups.google.com/d/msg/sage-devel/EfLYpAxl_jU/ShlCS9L4BgAJ is fixed in Sage 8.8.beta1 (since #25576 has been merged in it).



---

archive/issue_comments_427389.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nReplying to [@egourgoulhon](#comment%3A41):\n> Regarding the documentation: you have added doctests in the Python sources but the documentation is not generated since there is no entry to it in the sources of the reference manual. You shall modify/add files in `src/doc/en/reference/manifolds`, for instance in a way similar to what is done for differential forms, i.e. create a file `mixed_diff_form.rst` and add a pointer to it in `diff_manifold.rst`. To generate the documentation in a fast way, i.e. without having Sage process the whole reference manual, run\n> \n> ```\n> sage -docbuild reference/manifolds html\n> ```\n\nUnfortunately, I get some errors:\n\n\n```\n[manifolds] /home/michi/GitProjects/sage/src/sage_setup/docbuild/ext/sage_autodoc.py:1170: RemovedInSphinx20Warning: formatargspec() is now deprecated.  Please use sphinx.util.inspect.Signature instead.\n[manifolds]   return formatargspec(initmeth, *argspec)\n[manifolds] /home/michi/GitProjects/sage/src/sage_setup/docbuild/ext/sage_autodoc.py:1406: RemovedInSphinx20Warning: formatargspec() is now deprecated.  Please use sphinx.util.inspect.Signature instead.\n[manifolds]   args = formatargspec(self.object, *argspec)\n[manifolds] /home/michi/GitProjects/sage/src/sage_setup/docbuild/ext/sage_autodoc.py:1072: RemovedInSphinx20Warning: formatargspec() is now deprecated.  Please use sphinx.util.inspect.Signature instead.\n[manifolds]   args = formatargspec(self.object, *argspec)\n...\nOSError: /home/michi/GitProjects/sage/src/doc/en/reference/manifolds/index.rst:4: WARNING: undefined label: tensors-on-free-modules (if the link has no caption the label must precede a section header)\n```\n\nHowever, what comes next?",
    "created_at": "2019-04-10T13:16:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427389",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:43" align="right">comment:43</div>

Replying to [@egourgoulhon](#comment%3A41):
> Regarding the documentation: you have added doctests in the Python sources but the documentation is not generated since there is no entry to it in the sources of the reference manual. You shall modify/add files in `src/doc/en/reference/manifolds`, for instance in a way similar to what is done for differential forms, i.e. create a file `mixed_diff_form.rst` and add a pointer to it in `diff_manifold.rst`. To generate the documentation in a fast way, i.e. without having Sage process the whole reference manual, run
> 
> ```
> sage -docbuild reference/manifolds html
> ```

Unfortunately, I get some errors:


```
[manifolds] /home/michi/GitProjects/sage/src/sage_setup/docbuild/ext/sage_autodoc.py:1170: RemovedInSphinx20Warning: formatargspec() is now deprecated.  Please use sphinx.util.inspect.Signature instead.
[manifolds]   return formatargspec(initmeth, *argspec)
[manifolds] /home/michi/GitProjects/sage/src/sage_setup/docbuild/ext/sage_autodoc.py:1406: RemovedInSphinx20Warning: formatargspec() is now deprecated.  Please use sphinx.util.inspect.Signature instead.
[manifolds]   args = formatargspec(self.object, *argspec)
[manifolds] /home/michi/GitProjects/sage/src/sage_setup/docbuild/ext/sage_autodoc.py:1072: RemovedInSphinx20Warning: formatargspec() is now deprecated.  Please use sphinx.util.inspect.Signature instead.
[manifolds]   args = formatargspec(self.object, *argspec)
...
OSError: /home/michi/GitProjects/sage/src/doc/en/reference/manifolds/index.rst:4: WARNING: undefined label: tensors-on-free-modules (if the link has no caption the label must precede a section header)
```

However, what comes next?



---

archive/issue_comments_427390.json:
```json
{
    "body": "Changed commit from **[`506ef37`](https://github.com/sagemath/sagetrac-mirror/commit/506ef37791cdd89b1b2fa9b8009827197205c17e)** to **[`970ccce`](https://github.com/sagemath/sagetrac-mirror/commit/970ccce6b788861b77e8cb9b6502f74bd369ab1d)**",
    "created_at": "2019-04-10T13:35:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427390",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`506ef37`](https://github.com/sagemath/sagetrac-mirror/commit/506ef37791cdd89b1b2fa9b8009827197205c17e)** to **[`970ccce`](https://github.com/sagemath/sagetrac-mirror/commit/970ccce6b788861b77e8cb9b6502f74bd369ab1d)**



---

archive/issue_comments_427391.json:
```json
{
    "body": "<div id=\"comment:44\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/970ccce6b788861b77e8cb9b6502f74bd369ab1d\"><code>970ccce</code></a></td><td><code>Minor fixes</code></td></tr></table>\n",
    "created_at": "2019-04-10T13:35:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427391",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:44"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/970ccce6b788861b77e8cb9b6502f74bd369ab1d"><code>970ccce</code></a></td><td><code>Minor fixes</code></td></tr></table>




---

archive/issue_comments_427392.json:
```json
{
    "body": "Changed commit from **[`970ccce`](https://github.com/sagemath/sagetrac-mirror/commit/970ccce6b788861b77e8cb9b6502f74bd369ab1d)** to **[`9516d69`](https://github.com/sagemath/sagetrac-mirror/commit/9516d69ee612b353ff4e4a60f5b02c14601ff61b)**",
    "created_at": "2019-04-10T13:38:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427392",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`970ccce`](https://github.com/sagemath/sagetrac-mirror/commit/970ccce6b788861b77e8cb9b6502f74bd369ab1d)** to **[`9516d69`](https://github.com/sagemath/sagetrac-mirror/commit/9516d69ee612b353ff4e4a60f5b02c14601ff61b)**



---

archive/issue_comments_427393.json:
```json
{
    "body": "<div id=\"comment:45\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9516d69ee612b353ff4e4a60f5b02c14601ff61b\"><code>9516d69</code></a></td><td><code>Sorry!</code></td></tr></table>\n",
    "created_at": "2019-04-10T13:38:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427393",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:45"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9516d69ee612b353ff4e4a60f5b02c14601ff61b"><code>9516d69</code></a></td><td><code>Sorry!</code></td></tr></table>




---

archive/issue_comments_427394.json:
```json
{
    "body": "Changed commit from **[`9516d69`](https://github.com/sagemath/sagetrac-mirror/commit/9516d69ee612b353ff4e4a60f5b02c14601ff61b)** to **[`3a731b6`](https://github.com/sagemath/sagetrac-mirror/commit/3a731b678258d93c13d1ba3190afcb8def3a69a6)**",
    "created_at": "2019-04-10T13:57:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427394",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9516d69`](https://github.com/sagemath/sagetrac-mirror/commit/9516d69ee612b353ff4e4a60f5b02c14601ff61b)** to **[`3a731b6`](https://github.com/sagemath/sagetrac-mirror/commit/3a731b678258d93c13d1ba3190afcb8def3a69a6)**



---

archive/issue_comments_427395.json:
```json
{
    "body": "<div id=\"comment:46\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a731b678258d93c13d1ba3190afcb8def3a69a6\"><code>3a731b6</code></a></td><td><code>Damn! :D</code></td></tr></table>\n",
    "created_at": "2019-04-10T13:57:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427395",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:46"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a731b678258d93c13d1ba3190afcb8def3a69a6"><code>3a731b6</code></a></td><td><code>Damn! :D</code></td></tr></table>




---

archive/issue_comments_427396.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nSome debugging will be needed (if you haven't fixed them already). Also you should rebase this (and force push) to have more professional commit messages. `;)`",
    "created_at": "2019-04-12T08:38:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427396",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:47" align="right">comment:47</div>

Some debugging will be needed (if you haven't fixed them already). Also you should rebase this (and force push) to have more professional commit messages. `;)`



---

archive/issue_comments_427397.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nWhat should be debugged? I mean, the error above does not seem to have to do something with my implementation. Or does it?\n\nLong story short: There is no error occuring anymore regarding the mixed algebra while building the doc.",
    "created_at": "2019-04-12T09:31:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427397",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:48" align="right">comment:48</div>

What should be debugged? I mean, the error above does not seem to have to do something with my implementation. Or does it?

Long story short: There is no error occuring anymore regarding the mixed algebra while building the doc.



---

archive/issue_comments_427398.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nReplying to [@DeRhamSource](#comment%3A48):\n> What should be debugged? I mean, the error above does not seem to have to do something with my implementation. Or does it?\n> \n> Long story short: There is no error occuring anymore regarding the mixed algebra while building the doc. \n\nYes but some parts of the documentation require some debugging: \n\n- a formula is not displayed because `.. MATH:` should be `.. MATH::` in line 45 of `mixed_form.py`\n- in line 60 of the same file, there is an extra backquote around `comp`\n- at the top of `mixed_form.py` you may want to replace `\\Phi` by `\\varphi` to be consistent with the rest of the text, as well as with `mixed_form_algebra.py`",
    "created_at": "2019-04-12T11:42:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427398",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:49" align="right">comment:49</div>

Replying to [@DeRhamSource](#comment%3A48):
> What should be debugged? I mean, the error above does not seem to have to do something with my implementation. Or does it?
> 
> Long story short: There is no error occuring anymore regarding the mixed algebra while building the doc. 

Yes but some parts of the documentation require some debugging: 

- a formula is not displayed because `.. MATH:` should be `.. MATH::` in line 45 of `mixed_form.py`
- in line 60 of the same file, there is an extra backquote around `comp`
- at the top of `mixed_form.py` you may want to replace `\Phi` by `\varphi` to be consistent with the rest of the text, as well as with `mixed_form_algebra.py`



---

archive/issue_comments_427399.json:
```json
{
    "body": "<div id=\"comment:50\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/177cfff96044aa16d00a95ffcc7798f63cf29ec3\"><code>177cfff</code></a></td><td><code>Minor fixes</code></td></tr></table>\n",
    "created_at": "2019-04-12T12:34:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427399",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:50"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/177cfff96044aa16d00a95ffcc7798f63cf29ec3"><code>177cfff</code></a></td><td><code>Minor fixes</code></td></tr></table>




---

archive/issue_comments_427400.json:
```json
{
    "body": "Changed commit from **[`3a731b6`](https://github.com/sagemath/sagetrac-mirror/commit/3a731b678258d93c13d1ba3190afcb8def3a69a6)** to **[`177cfff`](https://github.com/sagemath/sagetrac-mirror/commit/177cfff96044aa16d00a95ffcc7798f63cf29ec3)**",
    "created_at": "2019-04-12T12:34:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427400",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3a731b6`](https://github.com/sagemath/sagetrac-mirror/commit/3a731b678258d93c13d1ba3190afcb8def3a69a6)** to **[`177cfff`](https://github.com/sagemath/sagetrac-mirror/commit/177cfff96044aa16d00a95ffcc7798f63cf29ec3)**



---

archive/issue_comments_427401.json:
```json
{
    "body": "Changed commit from **[`177cfff`](https://github.com/sagemath/sagetrac-mirror/commit/177cfff96044aa16d00a95ffcc7798f63cf29ec3)** to **[`4d9967a`](https://github.com/sagemath/sagetrac-mirror/commit/4d9967aa4640d600131d17c57d4683c8568bbcc5)**",
    "created_at": "2019-04-12T12:43:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427401",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`177cfff`](https://github.com/sagemath/sagetrac-mirror/commit/177cfff96044aa16d00a95ffcc7798f63cf29ec3)** to **[`4d9967a`](https://github.com/sagemath/sagetrac-mirror/commit/4d9967aa4640d600131d17c57d4683c8568bbcc5)**



---

archive/issue_comments_427402.json:
```json
{
    "body": "<div id=\"comment:51\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/38b36ed35de082ba60965313919880cc3a6c419a\"><code>38b36ed</code></a></td><td><code>Minor fixes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4d9967aa4640d600131d17c57d4683c8568bbcc5\"><code>4d9967a</code></a></td><td><code>Minor doc fixes</code></td></tr></table>\n",
    "created_at": "2019-04-12T12:43:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427402",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:51"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/38b36ed35de082ba60965313919880cc3a6c419a"><code>38b36ed</code></a></td><td><code>Minor fixes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4d9967aa4640d600131d17c57d4683c8568bbcc5"><code>4d9967a</code></a></td><td><code>Minor doc fixes</code></td></tr></table>




---

archive/issue_comments_427403.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nMy apologies for these confusing commits. I'm quite new to it.\n\nHowever, I fixed the aforementioned issues.",
    "created_at": "2019-04-12T12:48:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427403",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:52" align="right">comment:52</div>

My apologies for these confusing commits. I'm quite new to it.

However, I fixed the aforementioned issues.



---

archive/issue_comments_427404.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nI have a couple more comments, most of them are fairly minor:\n\nIn `_richcmp_`:\n\n```\n        from sage.structure.richcmp import richcmp\n\n        # Compare all elements separately:\n        for j in range(0, self._max_deg + 1):\n```\nmove the import statement to the top-level (this is for speed reasons) and make `range(0, foo)` -> `range(foo)`.\n\nMake `_mul_ = wedge` and maybe combine or reduce the doctests.\n\n<code>degree $k$ along \\`\\varphi\\`</code> replace `&` with <code>\\`</code>.\n\nInstead of using `self.__class__`, I have been told it is better to use `type(self)`.\n\nInstead of `\\`, my understanding is it is better to use `()` as that is guaranteed to generate an error if misused (as opposed to possibly a strange bug). For example\n\n```diff\n-                error_msg = \"input must be a \" \\\n-                            \"differential form of degree {}\".format(deg)\n+                error_msg = (\"input must be a \"\n+                             \"differential form of degree {}\".format(deg))\n```\n\nTypo: `datailed` -> `detailed`\n\nI don't think you need the `self._populate_coercion_lists_()`.",
    "created_at": "2019-04-12T23:37:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427404",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:53" align="right">comment:53</div>

I have a couple more comments, most of them are fairly minor:

In `_richcmp_`:

```
        from sage.structure.richcmp import richcmp

        # Compare all elements separately:
        for j in range(0, self._max_deg + 1):
```
move the import statement to the top-level (this is for speed reasons) and make `range(0, foo)` -> `range(foo)`.

Make `_mul_ = wedge` and maybe combine or reduce the doctests.

<code>degree $k$ along \`\varphi\`</code> replace `&` with <code>\`</code>.

Instead of using `self.__class__`, I have been told it is better to use `type(self)`.

Instead of `\`, my understanding is it is better to use `()` as that is guaranteed to generate an error if misused (as opposed to possibly a strange bug). For example

```diff
-                error_msg = "input must be a " \
-                            "differential form of degree {}".format(deg)
+                error_msg = ("input must be a "
+                             "differential form of degree {}".format(deg))
```

Typo: `datailed` -> `detailed`

I don't think you need the `self._populate_coercion_lists_()`.



---

archive/issue_comments_427405.json:
```json
{
    "body": "Changed commit from **[`4d9967a`](https://github.com/sagemath/sagetrac-mirror/commit/4d9967aa4640d600131d17c57d4683c8568bbcc5)** to **[`cebde90`](https://github.com/sagemath/sagetrac-mirror/commit/cebde90d71134ea8c83ab3e96028cf123a4b7ad3)**",
    "created_at": "2019-04-13T09:11:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427405",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4d9967a`](https://github.com/sagemath/sagetrac-mirror/commit/4d9967aa4640d600131d17c57d4683c8568bbcc5)** to **[`cebde90`](https://github.com/sagemath/sagetrac-mirror/commit/cebde90d71134ea8c83ab3e96028cf123a4b7ad3)**



---

archive/issue_comments_427406.json:
```json
{
    "body": "<div id=\"comment:54\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cebde90d71134ea8c83ab3e96028cf123a4b7ad3\"><code>cebde90</code></a></td><td><code>Typos and Minor Issues Fixed</code></td></tr></table>\n",
    "created_at": "2019-04-13T09:11:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427406",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:54"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cebde90d71134ea8c83ab3e96028cf123a4b7ad3"><code>cebde90</code></a></td><td><code>Typos and Minor Issues Fixed</code></td></tr></table>




---

archive/issue_comments_427407.json:
```json
{
    "body": "Changed commit from **[`cebde90`](https://github.com/sagemath/sagetrac-mirror/commit/cebde90d71134ea8c83ab3e96028cf123a4b7ad3)** to **[`b78c7a9`](https://github.com/sagemath/sagetrac-mirror/commit/b78c7a9f8a928250b60278eb510d4f041d540849)**",
    "created_at": "2019-04-13T09:17:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427407",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cebde90`](https://github.com/sagemath/sagetrac-mirror/commit/cebde90d71134ea8c83ab3e96028cf123a4b7ad3)** to **[`b78c7a9`](https://github.com/sagemath/sagetrac-mirror/commit/b78c7a9f8a928250b60278eb510d4f041d540849)**



---

archive/issue_comments_427408.json:
```json
{
    "body": "<div id=\"comment:55\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b78c7a9f8a928250b60278eb510d4f041d540849\"><code>b78c7a9</code></a></td><td><code>Whitespace Correction</code></td></tr></table>\n",
    "created_at": "2019-04-13T09:17:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427408",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:55"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b78c7a9f8a928250b60278eb510d4f041d540849"><code>b78c7a9</code></a></td><td><code>Whitespace Correction</code></td></tr></table>




---

archive/issue_comments_427409.json:
```json
{
    "body": "Changed commit from **[`b78c7a9`](https://github.com/sagemath/sagetrac-mirror/commit/b78c7a9f8a928250b60278eb510d4f041d540849)** to **[`407505d`](https://github.com/sagemath/sagetrac-mirror/commit/407505d3827641a010caf3fcd11bed4df88b78b3)**",
    "created_at": "2019-04-13T10:21:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427409",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b78c7a9`](https://github.com/sagemath/sagetrac-mirror/commit/b78c7a9f8a928250b60278eb510d4f041d540849)** to **[`407505d`](https://github.com/sagemath/sagetrac-mirror/commit/407505d3827641a010caf3fcd11bed4df88b78b3)**



---

archive/issue_comments_427410.json:
```json
{
    "body": "<div id=\"comment:56\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/407505d3827641a010caf3fcd11bed4df88b78b3\"><code>407505d</code></a></td><td><code>Components from scratch</code></td></tr></table>\n",
    "created_at": "2019-04-13T10:21:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427410",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:56"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/407505d3827641a010caf3fcd11bed4df88b78b3"><code>407505d</code></a></td><td><code>Components from scratch</code></td></tr></table>




---

archive/issue_comments_427411.json:
```json
{
    "body": "<div id=\"comment:57\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f03d4a0f22df2c6abcb41f3afa5b74bd392f3cf1\"><code>f03d4a0</code></a></td><td><code>Minor: Whitespace + Comment</code></td></tr></table>\n",
    "created_at": "2019-04-13T10:33:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427411",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:57"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f03d4a0f22df2c6abcb41f3afa5b74bd392f3cf1"><code>f03d4a0</code></a></td><td><code>Minor: Whitespace + Comment</code></td></tr></table>




---

archive/issue_comments_427412.json:
```json
{
    "body": "Changed commit from **[`407505d`](https://github.com/sagemath/sagetrac-mirror/commit/407505d3827641a010caf3fcd11bed4df88b78b3)** to **[`f03d4a0`](https://github.com/sagemath/sagetrac-mirror/commit/f03d4a0f22df2c6abcb41f3afa5b74bd392f3cf1)**",
    "created_at": "2019-04-13T10:33:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427412",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`407505d`](https://github.com/sagemath/sagetrac-mirror/commit/407505d3827641a010caf3fcd11bed4df88b78b3)** to **[`f03d4a0`](https://github.com/sagemath/sagetrac-mirror/commit/f03d4a0f22df2c6abcb41f3afa5b74bd392f3cf1)**



---

archive/issue_comments_427413.json:
```json
{
    "body": "Changed commit from **[`f03d4a0`](https://github.com/sagemath/sagetrac-mirror/commit/f03d4a0f22df2c6abcb41f3afa5b74bd392f3cf1)** to **[`b4a9219`](https://github.com/sagemath/sagetrac-mirror/commit/b4a92196526d32e171c896e59e90a90d46865d6e)**",
    "created_at": "2019-04-13T11:45:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427413",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f03d4a0`](https://github.com/sagemath/sagetrac-mirror/commit/f03d4a0f22df2c6abcb41f3afa5b74bd392f3cf1)** to **[`b4a9219`](https://github.com/sagemath/sagetrac-mirror/commit/b4a92196526d32e171c896e59e90a90d46865d6e)**



---

archive/issue_comments_427414.json:
```json
{
    "body": "<div id=\"comment:58\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b4a92196526d32e171c896e59e90a90d46865d6e\"><code>b4a9219</code></a></td><td><code>Error Message obsolete</code></td></tr></table>\n",
    "created_at": "2019-04-13T11:45:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427414",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:58"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b4a92196526d32e171c896e59e90a90d46865d6e"><code>b4a9219</code></a></td><td><code>Error Message obsolete</code></td></tr></table>




---

archive/issue_comments_427415.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nThanks for your patience so far. Again, I changed a lot. Please check.\n\nHowever, I noticed another error message that should not occur:\n\n```\nsage: M = Manifold(2, 'M')\nsage: X.<x,y> = M.chart()\nsage: f = M.scalar_field(x, name='f')\nsage: f in M.diff_form_module(1)\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n<ipython-input-38-9654b754d2bc> in <module>()\n      2 X = M.chart(names=('x', 'y',)); (x, y,) = X._first_ngens(2)\n      3 f = M.scalar_field(x, name='f')\n----> 4 f in M.diff_form_module(Integer(1))\n\n/home/michi/GitProjects/sage/local/lib/python2.7/site-packages/sage/structure/parent.pyx in sage.structure.parent.Parent.__contains__ (build/cythonized/sage/structure/parent.c:9885)()\n   1090             return True\n   1091         try:\n-> 1092             x2 = self(x)\n   1093             EQ = (x2 == x)\n   1094             if EQ is True:\n\n/home/michi/GitProjects/sage/local/lib/python2.7/site-packages/sage/structure/parent.pyx in sage.structure.parent.Parent.__call__ (build/cythonized/sage/structure/parent.c:9219)()\n    898         if mor is not None:\n    899             if no_extra_args:\n--> 900                 return mor._call_(x)\n    901             else:\n    902                 return mor._call_with_args(x, args, kwds)\n\n/home/michi/GitProjects/sage/local/lib/python2.7/site-packages/sage/structure/coerce_maps.pyx in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (build/cythonized/sage/structure/coerce_maps.c:4551)()\n    160                 print(type(C), C)\n    161                 print(type(C._element_constructor), C._element_constructor)\n--> 162             raise\n    163 \n    164     cpdef Element _call_with_args(self, x, args=(), kwds={}):\n\n/home/michi/GitProjects/sage/local/lib/python2.7/site-packages/sage/structure/coerce_maps.pyx in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (build/cythonized/sage/structure/coerce_maps.c:4443)()\n    155         cdef Parent C = self._codomain\n    156         try:\n--> 157             return C._element_constructor(x)\n    158         except Exception:\n    159             if print_warnings:\n\n/home/michi/GitProjects/sage/local/lib/python2.7/site-packages/sage/manifolds/differentiable/diff_form_module.pyc in _element_constructor_(self, comp, frame, name, latex_name)\n    818         resu = self.element_class(self._fmodule, self._degree, name=name,\n    819                                   latex_name=latex_name)\n--> 820         if comp != []:\n    821             resu.set_comp(frame)[:] = comp\n    822         return resu\n\n/home/michi/GitProjects/sage/local/lib/python2.7/site-packages/sage/manifolds/scalarfield.pyc in __ne__(self, other)\n   1285 \n   1286         \"\"\"\n-> 1287         return not (self == other)\n   1288 \n   1289     ####### End of required methods for an algebra element (beside arithmetic) #######\n\n/home/michi/GitProjects/sage/local/lib/python2.7/site-packages/sage/manifolds/scalarfield.pyc in __eq__(self, other)\n   1244                 return False\n   1245             try:\n-> 1246                 other = self.parent()(other)  # conversion to a scalar field\n   1247             except TypeError:\n   1248                 return False\n\n/home/michi/GitProjects/sage/local/lib/python2.7/site-packages/sage/structure/parent.pyx in sage.structure.parent.Parent.__call__ (build/cythonized/sage/structure/parent.c:9219)()\n    898         if mor is not None:\n    899             if no_extra_args:\n--> 900                 return mor._call_(x)\n    901             else:\n    902                 return mor._call_with_args(x, args, kwds)\n\n/home/michi/GitProjects/sage/local/lib/python2.7/site-packages/sage/structure/coerce_maps.pyx in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (build/cythonized/sage/structure/coerce_maps.c:4551)()\n    160                 print(type(C), C)\n    161                 print(type(C._element_constructor), C._element_constructor)\n--> 162             raise\n    163 \n    164     cpdef Element _call_with_args(self, x, args=(), kwds={}):\n\n/home/michi/GitProjects/sage/local/lib/python2.7/site-packages/sage/structure/coerce_maps.pyx in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (build/cythonized/sage/structure/coerce_maps.c:4443)()\n    155         cdef Parent C = self._codomain\n    156         try:\n--> 157             return C._element_constructor(x)\n    158         except Exception:\n    159             if print_warnings:\n\n/home/michi/GitProjects/sage/local/lib/python2.7/site-packages/sage/manifolds/scalarfield_algebra.pyc in _element_constructor_(self, coord_expression, chart, name, latex_name)\n    470                                       coord_expression=coord_expression,\n    471                                       name=name, latex_name=latex_name,\n--> 472                                       chart=chart)\n    473         return resu\n    474 \n\n/home/michi/GitProjects/sage/local/lib/python2.7/site-packages/sage/manifolds/differentiable/scalarfield.pyc in __init__(self, parent, coord_expression, chart, name, latex_name)\n    630         \"\"\"\n    631         ScalarField.__init__(self, parent, coord_expression=coord_expression,\n--> 632                              chart=chart, name=name, latex_name=latex_name)\n    633         self._tensor_type = (0,0)\n    634 \n\n/home/michi/GitProjects/sage/local/lib/python2.7/site-packages/sage/manifolds/scalarfield.pyc in __init__(self, parent, coord_expression, chart, name, latex_name)\n   1101                         self._express[ch] = ch.function(coord_expression)\n   1102                 else:\n-> 1103                     self._express[chart] = chart.function(coord_expression)\n   1104         self._init_derived()   # initialization of derived quantities\n   1105 \n\n/home/michi/GitProjects/sage/local/lib/python2.7/site-packages/sage/manifolds/chart.pyc in function(self, expression, calc_method, expansion_symbol, order)\n   1087         return parent.element_class(parent, expression, calc_method=calc_method,\n   1088                                     expansion_symbol=expansion_symbol,\n-> 1089                                     order=order)\n   1090 \n   1091     def zero_function(self):\n\n/home/michi/GitProjects/sage/local/lib/python2.7/site-packages/sage/manifolds/chart_func.pyc in __init__(self, parent, expression, calc_method, expansion_symbol, order)\n    360                 calc_method = self._calc_method._current\n    361             self._express[calc_method] = self._calc_method._tranf[calc_method](\n--> 362                                                                     expression)\n    363         # Derived quantities:\n    364         self._der = None  # list of partial derivatives (to be set by diff()\n\n/home/michi/GitProjects/sage/local/lib/python2.7/site-packages/sage/manifolds/calculus_method.pyc in _Sympy_to_SR(expression)\n    106         # If SR cannot transform a sympy expression this is because it is a\n    107         # sympy abstract function\n--> 108         a = expression._sage_()\n    109         # As all sage objects have a ._sage_ operator, they have to be\n    110         # catched\n\nAttributeError: 'list' object has no attribute '_sage_'\n```",
    "created_at": "2019-04-13T11:51:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427415",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:59" align="right">comment:59</div>

Thanks for your patience so far. Again, I changed a lot. Please check.

However, I noticed another error message that should not occur:

```
sage: M = Manifold(2, 'M')
sage: X.<x,y> = M.chart()
sage: f = M.scalar_field(x, name='f')
sage: f in M.diff_form_module(1)
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
<ipython-input-38-9654b754d2bc> in <module>()
      2 X = M.chart(names=('x', 'y',)); (x, y,) = X._first_ngens(2)
      3 f = M.scalar_field(x, name='f')
----> 4 f in M.diff_form_module(Integer(1))

/home/michi/GitProjects/sage/local/lib/python2.7/site-packages/sage/structure/parent.pyx in sage.structure.parent.Parent.__contains__ (build/cythonized/sage/structure/parent.c:9885)()
   1090             return True
   1091         try:
-> 1092             x2 = self(x)
   1093             EQ = (x2 == x)
   1094             if EQ is True:

/home/michi/GitProjects/sage/local/lib/python2.7/site-packages/sage/structure/parent.pyx in sage.structure.parent.Parent.__call__ (build/cythonized/sage/structure/parent.c:9219)()
    898         if mor is not None:
    899             if no_extra_args:
--> 900                 return mor._call_(x)
    901             else:
    902                 return mor._call_with_args(x, args, kwds)

/home/michi/GitProjects/sage/local/lib/python2.7/site-packages/sage/structure/coerce_maps.pyx in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (build/cythonized/sage/structure/coerce_maps.c:4551)()
    160                 print(type(C), C)
    161                 print(type(C._element_constructor), C._element_constructor)
--> 162             raise
    163 
    164     cpdef Element _call_with_args(self, x, args=(), kwds={}):

/home/michi/GitProjects/sage/local/lib/python2.7/site-packages/sage/structure/coerce_maps.pyx in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (build/cythonized/sage/structure/coerce_maps.c:4443)()
    155         cdef Parent C = self._codomain
    156         try:
--> 157             return C._element_constructor(x)
    158         except Exception:
    159             if print_warnings:

/home/michi/GitProjects/sage/local/lib/python2.7/site-packages/sage/manifolds/differentiable/diff_form_module.pyc in _element_constructor_(self, comp, frame, name, latex_name)
    818         resu = self.element_class(self._fmodule, self._degree, name=name,
    819                                   latex_name=latex_name)
--> 820         if comp != []:
    821             resu.set_comp(frame)[:] = comp
    822         return resu

/home/michi/GitProjects/sage/local/lib/python2.7/site-packages/sage/manifolds/scalarfield.pyc in __ne__(self, other)
   1285 
   1286         """
-> 1287         return not (self == other)
   1288 
   1289     ####### End of required methods for an algebra element (beside arithmetic) #######

/home/michi/GitProjects/sage/local/lib/python2.7/site-packages/sage/manifolds/scalarfield.pyc in __eq__(self, other)
   1244                 return False
   1245             try:
-> 1246                 other = self.parent()(other)  # conversion to a scalar field
   1247             except TypeError:
   1248                 return False

/home/michi/GitProjects/sage/local/lib/python2.7/site-packages/sage/structure/parent.pyx in sage.structure.parent.Parent.__call__ (build/cythonized/sage/structure/parent.c:9219)()
    898         if mor is not None:
    899             if no_extra_args:
--> 900                 return mor._call_(x)
    901             else:
    902                 return mor._call_with_args(x, args, kwds)

/home/michi/GitProjects/sage/local/lib/python2.7/site-packages/sage/structure/coerce_maps.pyx in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (build/cythonized/sage/structure/coerce_maps.c:4551)()
    160                 print(type(C), C)
    161                 print(type(C._element_constructor), C._element_constructor)
--> 162             raise
    163 
    164     cpdef Element _call_with_args(self, x, args=(), kwds={}):

/home/michi/GitProjects/sage/local/lib/python2.7/site-packages/sage/structure/coerce_maps.pyx in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (build/cythonized/sage/structure/coerce_maps.c:4443)()
    155         cdef Parent C = self._codomain
    156         try:
--> 157             return C._element_constructor(x)
    158         except Exception:
    159             if print_warnings:

/home/michi/GitProjects/sage/local/lib/python2.7/site-packages/sage/manifolds/scalarfield_algebra.pyc in _element_constructor_(self, coord_expression, chart, name, latex_name)
    470                                       coord_expression=coord_expression,
    471                                       name=name, latex_name=latex_name,
--> 472                                       chart=chart)
    473         return resu
    474 

/home/michi/GitProjects/sage/local/lib/python2.7/site-packages/sage/manifolds/differentiable/scalarfield.pyc in __init__(self, parent, coord_expression, chart, name, latex_name)
    630         """
    631         ScalarField.__init__(self, parent, coord_expression=coord_expression,
--> 632                              chart=chart, name=name, latex_name=latex_name)
    633         self._tensor_type = (0,0)
    634 

/home/michi/GitProjects/sage/local/lib/python2.7/site-packages/sage/manifolds/scalarfield.pyc in __init__(self, parent, coord_expression, chart, name, latex_name)
   1101                         self._express[ch] = ch.function(coord_expression)
   1102                 else:
-> 1103                     self._express[chart] = chart.function(coord_expression)
   1104         self._init_derived()   # initialization of derived quantities
   1105 

/home/michi/GitProjects/sage/local/lib/python2.7/site-packages/sage/manifolds/chart.pyc in function(self, expression, calc_method, expansion_symbol, order)
   1087         return parent.element_class(parent, expression, calc_method=calc_method,
   1088                                     expansion_symbol=expansion_symbol,
-> 1089                                     order=order)
   1090 
   1091     def zero_function(self):

/home/michi/GitProjects/sage/local/lib/python2.7/site-packages/sage/manifolds/chart_func.pyc in __init__(self, parent, expression, calc_method, expansion_symbol, order)
    360                 calc_method = self._calc_method._current
    361             self._express[calc_method] = self._calc_method._tranf[calc_method](
--> 362                                                                     expression)
    363         # Derived quantities:
    364         self._der = None  # list of partial derivatives (to be set by diff()

/home/michi/GitProjects/sage/local/lib/python2.7/site-packages/sage/manifolds/calculus_method.pyc in _Sympy_to_SR(expression)
    106         # If SR cannot transform a sympy expression this is because it is a
    107         # sympy abstract function
--> 108         a = expression._sage_()
    109         # As all sage objects have a ._sage_ operator, they have to be
    110         # catched

AttributeError: 'list' object has no attribute '_sage_'
```



---

archive/issue_comments_427416.json:
```json
{
    "body": "Changed commit from **[`b4a9219`](https://github.com/sagemath/sagetrac-mirror/commit/b4a92196526d32e171c896e59e90a90d46865d6e)** to **[`8036fb0`](https://github.com/sagemath/sagetrac-mirror/commit/8036fb0b38fb4add88e5c54b1c1d071074fbc9b8)**",
    "created_at": "2019-04-13T17:16:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427416",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b4a9219`](https://github.com/sagemath/sagetrac-mirror/commit/b4a92196526d32e171c896e59e90a90d46865d6e)** to **[`8036fb0`](https://github.com/sagemath/sagetrac-mirror/commit/8036fb0b38fb4add88e5c54b1c1d071074fbc9b8)**



---

archive/issue_comments_427417.json:
```json
{
    "body": "<div id=\"comment:60\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8036fb0b38fb4add88e5c54b1c1d071074fbc9b8\"><code>8036fb0</code></a></td><td><code>Components from scratch - Fixes</code></td></tr></table>\n",
    "created_at": "2019-04-13T17:16:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427417",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:60"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8036fb0b38fb4add88e5c54b1c1d071074fbc9b8"><code>8036fb0</code></a></td><td><code>Components from scratch - Fixes</code></td></tr></table>




---

archive/issue_comments_427418.json:
```json
{
    "body": "<div id=\"comment:61\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d1c88cb09a31613dd921d2bef7c71cfbfd27ed6\"><code>6d1c88c</code></a></td><td><code>Tiny doc typos fixed</code></td></tr></table>\n",
    "created_at": "2019-04-13T21:49:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427418",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:61"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d1c88cb09a31613dd921d2bef7c71cfbfd27ed6"><code>6d1c88c</code></a></td><td><code>Tiny doc typos fixed</code></td></tr></table>




---

archive/issue_comments_427419.json:
```json
{
    "body": "Changed commit from **[`8036fb0`](https://github.com/sagemath/sagetrac-mirror/commit/8036fb0b38fb4add88e5c54b1c1d071074fbc9b8)** to **[`6d1c88c`](https://github.com/sagemath/sagetrac-mirror/commit/6d1c88cb09a31613dd921d2bef7c71cfbfd27ed6)**",
    "created_at": "2019-04-13T21:49:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427419",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8036fb0`](https://github.com/sagemath/sagetrac-mirror/commit/8036fb0b38fb4add88e5c54b1c1d071074fbc9b8)** to **[`6d1c88c`](https://github.com/sagemath/sagetrac-mirror/commit/6d1c88cb09a31613dd921d2bef7c71cfbfd27ed6)**



---

archive/issue_comments_427420.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nDoes that second to last commit fix the issue in [comment:59](#comment%3A59)?",
    "created_at": "2019-04-14T00:28:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427420",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:62" align="right">comment:62</div>

Does that second to last commit fix the issue in [comment:59](#comment%3A59)?



---

archive/issue_comments_427421.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nReplying to [@tscrim](#comment%3A62):\n> Does that second to last commit fix the issue in [comment:59](#comment%3A59)?\n\nNo. But now, I guess this has nothing to do with the mixed algebra. I already reported it in [sage-devel](https://groups.google.com/d/msg/sage-devel/wcIRe8UjuPo/mMRe-OR4CwAJ).",
    "created_at": "2019-04-14T08:04:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427421",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:63" align="right">comment:63</div>

Replying to [@tscrim](#comment%3A62):
> Does that second to last commit fix the issue in [comment:59](#comment%3A59)?

No. But now, I guess this has nothing to do with the mixed algebra. I already reported it in [sage-devel](https://groups.google.com/d/msg/sage-devel/wcIRe8UjuPo/mMRe-OR4CwAJ).



---

archive/issue_comments_427422.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nReplying to [@DeRhamSource](#comment%3A63):\n> Replying to [@tscrim](#comment%3A62):\n> > Does that second to last commit fix the issue in [comment:59](#comment%3A59)?\n> \n> \n> No. But now, I guess this has nothing to do with the mixed algebra. I already reported it in [sage-devel](https://groups.google.com/d/msg/sage-devel/wcIRe8UjuPo/mMRe-OR4CwAJ).\n\nI confirm the error. I've opened #27658 for it.",
    "created_at": "2019-04-14T09:06:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427422",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:64" align="right">comment:64</div>

Replying to [@DeRhamSource](#comment%3A63):
> Replying to [@tscrim](#comment%3A62):
> > Does that second to last commit fix the issue in [comment:59](#comment%3A59)?
> 
> 
> No. But now, I guess this has nothing to do with the mixed algebra. I already reported it in [sage-devel](https://groups.google.com/d/msg/sage-devel/wcIRe8UjuPo/mMRe-OR4CwAJ).

I confirm the error. I've opened #27658 for it.



---

archive/issue_comments_427423.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nReplying to [@egourgoulhon](#comment%3A64):\n> Replying to [@DeRhamSource](#comment%3A63):\n> > Replying to [@tscrim](#comment%3A62):\n> > > Does that second to last commit fix the issue in [comment:59](#comment%3A59)?\n> > \n> > \n> > No. But now, I guess this has nothing to do with the mixed algebra. I already reported it in [sage-devel](https://groups.google.com/d/msg/sage-devel/wcIRe8UjuPo/mMRe-OR4CwAJ).\n> \n> \n> I confirm the error. I've opened #27658 for it.\n\nWhile this is definitely a bug, you can get rid of it by replacing\n\n```\nf in M.diff_form_module(n)\n```\nby\n\n```\nf.domain() is M and f.degree() == n\n```\nfor any integer `n`. Moreover the second form is must faster.",
    "created_at": "2019-04-14T09:14:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427423",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:65" align="right">comment:65</div>

Replying to [@egourgoulhon](#comment%3A64):
> Replying to [@DeRhamSource](#comment%3A63):
> > Replying to [@tscrim](#comment%3A62):
> > > Does that second to last commit fix the issue in [comment:59](#comment%3A59)?
> > 
> > 
> > No. But now, I guess this has nothing to do with the mixed algebra. I already reported it in [sage-devel](https://groups.google.com/d/msg/sage-devel/wcIRe8UjuPo/mMRe-OR4CwAJ).
> 
> 
> I confirm the error. I've opened #27658 for it.

While this is definitely a bug, you can get rid of it by replacing

```
f in M.diff_form_module(n)
```
by

```
f.domain() is M and f.degree() == n
```
for any integer `n`. Moreover the second form is must faster.



---

archive/issue_comments_427424.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nFortunately, this issue is not directly relevant for my code anymore (since the error message was deleted). I've encountered the problem while debugging. :)",
    "created_at": "2019-04-14T09:29:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427424",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:66" align="right">comment:66</div>

Fortunately, this issue is not directly relevant for my code anymore (since the error message was deleted). I've encountered the problem while debugging. :)



---

archive/issue_comments_427425.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nReplying to [@DeRhamSource](#comment%3A66):\n> Fortunately, this issue is not directly relevant for my code anymore (since the error message was deleted). I've encountered the problem while debugging. :)\n\nGood!",
    "created_at": "2019-04-14T09:48:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427425",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:67" align="right">comment:67</div>

Replying to [@DeRhamSource](#comment%3A66):
> Fortunately, this issue is not directly relevant for my code anymore (since the error message was deleted). I've encountered the problem while debugging. :)

Good!



---

archive/issue_comments_427426.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nPatchbot says no. :(\n\nThough, there is no obvious error. So, what's the matter?\n\nAny further suggestions?",
    "created_at": "2019-04-16T09:11:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427426",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:68" align="right">comment:68</div>

Patchbot says no. :(

Though, there is no obvious error. So, what's the matter?

Any further suggestions?



---

archive/issue_comments_427427.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nThat error from the patchbot looks unrelated, so I would treat the patchbot as coming back green.\n\nSorry, one more nitpick for readability:\n\n```diff\n-            return self._domain.is_subset(\n-                S._domain) and self._ambient_domain.is_subset(S._ambient_domain)\n+            return (self._domain.is_subset(S._domain)\n+                    and self._ambient_domain.is_subset(S._ambient_domain))\n```\n\nEric, any other comments?",
    "created_at": "2019-04-16T12:55:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427427",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:69" align="right">comment:69</div>

That error from the patchbot looks unrelated, so I would treat the patchbot as coming back green.

Sorry, one more nitpick for readability:

```diff
-            return self._domain.is_subset(
-                S._domain) and self._ambient_domain.is_subset(S._ambient_domain)
+            return (self._domain.is_subset(S._domain)
+                    and self._ambient_domain.is_subset(S._ambient_domain))
```

Eric, any other comments?



---

archive/issue_comments_427428.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\nReplying to [@tscrim](#comment%3A69):\n> \n> Eric, any other comments?\n\nYes, there is a doctest error with Python3-built Sage: \n\n```\nsage -t --long --warn-long 48.2 src/sage/manifolds/differentiable/mixed_form.py\n**********************************************************************\nFile \"src/sage/manifolds/differentiable/mixed_form.py\", line 479, in sage.manifolds.differentiable.mixed_form.MixedForm.set_name\nFailed example:\n    F.set_name(name='fancy', latex_name='\\eta'); F\nExpected:\n    Mixed differential form fancy on the 4-dimensional differentiable\n     manifold M\nGot:\n    doctest:warning\n    ...\n    DeprecationWarning: invalid escape sequence \\e\n    Mixed differential form fancy on the 4-dimensional differentiable manifold M\n**********************************************************************\n```\nYou should replace `'\\eta'` by `r'\\eta'`. \n\nApart from this, everything is OK for me.",
    "created_at": "2019-04-16T14:58:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427428",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:70" align="right">comment:70</div>

Replying to [@tscrim](#comment%3A69):
> 
> Eric, any other comments?

Yes, there is a doctest error with Python3-built Sage: 

```
sage -t --long --warn-long 48.2 src/sage/manifolds/differentiable/mixed_form.py
**********************************************************************
File "src/sage/manifolds/differentiable/mixed_form.py", line 479, in sage.manifolds.differentiable.mixed_form.MixedForm.set_name
Failed example:
    F.set_name(name='fancy', latex_name='\eta'); F
Expected:
    Mixed differential form fancy on the 4-dimensional differentiable
     manifold M
Got:
    doctest:warning
    ...
    DeprecationWarning: invalid escape sequence \e
    Mixed differential form fancy on the 4-dimensional differentiable manifold M
**********************************************************************
```
You should replace `'\eta'` by `r'\eta'`. 

Apart from this, everything is OK for me.



---

archive/issue_comments_427429.json:
```json
{
    "body": "Changed commit from **[`6d1c88c`](https://github.com/sagemath/sagetrac-mirror/commit/6d1c88cb09a31613dd921d2bef7c71cfbfd27ed6)** to **[`cdfaf6d`](https://github.com/sagemath/sagetrac-mirror/commit/cdfaf6d16322ef4c7d014680ebf025f272f62eb6)**",
    "created_at": "2019-04-17T08:27:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427429",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6d1c88c`](https://github.com/sagemath/sagetrac-mirror/commit/6d1c88cb09a31613dd921d2bef7c71cfbfd27ed6)** to **[`cdfaf6d`](https://github.com/sagemath/sagetrac-mirror/commit/cdfaf6d16322ef4c7d014680ebf025f272f62eb6)**



---

archive/issue_comments_427430.json:
```json
{
    "body": "<div id=\"comment:71\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cdfaf6d16322ef4c7d014680ebf025f272f62eb6\"><code>cdfaf6d</code></a></td><td><code>Doctest fix + Readability</code></td></tr></table>\n",
    "created_at": "2019-04-17T08:27:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427430",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:71"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cdfaf6d16322ef4c7d014680ebf025f272f62eb6"><code>cdfaf6d</code></a></td><td><code>Doctest fix + Readability</code></td></tr></table>




---

archive/issue_comments_427431.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nAnything else? :)\n\nOtherwise I'd start programming the next part - namely characteristic classes.",
    "created_at": "2019-04-17T08:30:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427431",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:72" align="right">comment:72</div>

Anything else? :)

Otherwise I'd start programming the next part - namely characteristic classes.



---

archive/issue_comments_427432.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nReplying to [@DeRhamSource](#comment%3A72):\n> Anything else? :)\n> \n> Otherwise I'd start programming the next part - namely characteristic classes.\n\nThanks for the update and your work on this. I am OK for the positive review. Travis, do you agree?",
    "created_at": "2019-04-17T09:13:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427432",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:73" align="right">comment:73</div>

Replying to [@DeRhamSource](#comment%3A72):
> Anything else? :)
> 
> Otherwise I'd start programming the next part - namely characteristic classes.

Thanks for the update and your work on this. I am OK for the positive review. Travis, do you agree?



---

archive/issue_events_375761.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2019-04-17T10:31:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27584#event-375761"
}
```



---

archive/issue_events_375762.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2019-04-17T10:31:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27584#event-375762"
}
```



---

archive/issue_comments_427433.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nI concur.",
    "created_at": "2019-04-17T10:31:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427433",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:74" align="right">comment:74</div>

I concur.



---

archive/issue_comments_427434.json:
```json
{
    "body": "Changed branch from **[public/manifolds/mixed_differential_forms](https://github.com/sagemath/sagetrac-mirror/tree/public/manifolds/mixed_differential_forms)** to **[`cdfaf6d`](https://github.com/sagemath/sagetrac-mirror/commit/cdfaf6d16322ef4c7d014680ebf025f272f62eb6)**",
    "created_at": "2019-04-18T19:56:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27584#issuecomment-427434",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/manifolds/mixed_differential_forms](https://github.com/sagemath/sagetrac-mirror/tree/public/manifolds/mixed_differential_forms)** to **[`cdfaf6d`](https://github.com/sagemath/sagetrac-mirror/commit/cdfaf6d16322ef4c7d014680ebf025f272f62eb6)**



---

archive/issue_events_375763.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-04-18T19:56:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27584#event-375763"
}
```



---

archive/issue_events_375764.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "0267e84d799c7415a4f9595ae81bb56f7a75fcaf",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-04-18T19:56:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27584",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27584#event-375764"
}
```
