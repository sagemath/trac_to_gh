# Issue 27306: Since 8.7.beta3, giacpy_sage fails some groebner bases-related testdocs.

archive/issues_027069.json:
```json
{
    "body": "\n```\n**********************************************************************\nFile \"src/sage/libs/giac.py\", line 187, in sage.libs.giac.?\nFailed example:\n    B.is_groebner() # optional - giacpy_sage\nExpected:\n    True\nGot:\n    False\n**********************************************************************\nFile \"src/sage/libs/giac.py\", line 197, in sage.libs.giac.?\nFailed example:\n    B.is_groebner()                                             # optional - giacpy_sage\nExpected:\n    True\nGot:\n    False\n**********************************************************************\nFile \"src/sage/libs/giac.py\", line 199, in sage.libs.giac.?\nFailed example:\n    B.ideal() == I.elimination_ideal([P.gen(0), P.gen(2)])      # optional - giacpy_sage\nExpected:\n    True\nGot:\n    False\n**********************************************************************\n```\n\nReported [here](https://groups.google.com/d/msg/sage-release/0QvdNonpGEg/SfQHQ6ejAQAJ), no further details (I'm out of my zone of competence).\n\n* New upstream giacpy_sage tarball to put in upstream:\n[http://webusers.imj-prg.fr/~frederic.han/xcas/giacpy/sage/giacpy_sage-0.6.7.tar.gz](http://webusers.imj-prg.fr/~frederic.han/xcas/giacpy/sage/giacpy_sage-0.6.7.tar.gz)\n\n\nCC:  @frederichan-IMJPRG parisse @slel\n\nKeywords: giacpy_sage, groebner bases, upgrade\n\nUpstream: Fixed upstream, but not in a stable release.\n\nReviewer: Travis Scrimshaw, Jeroen Demeyer\n\nAuthor: Frederic Han\n\nBranch: 0c7c09c57bf058449cfa1b3a6e6bdc7f2c2cf66e\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/27306\n\n",
    "closed_at": "2019-02-23T23:14:57Z",
    "created_at": "2019-02-17T11:07:02Z",
    "labels": [
        "component: interfaces: optional",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.7",
    "title": "Since 8.7.beta3, giacpy_sage fails some groebner bases-related testdocs.",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27306",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

```
**********************************************************************
File "src/sage/libs/giac.py", line 187, in sage.libs.giac.?
Failed example:
    B.is_groebner() # optional - giacpy_sage
Expected:
    True
Got:
    False
**********************************************************************
File "src/sage/libs/giac.py", line 197, in sage.libs.giac.?
Failed example:
    B.is_groebner()                                             # optional - giacpy_sage
Expected:
    True
Got:
    False
**********************************************************************
File "src/sage/libs/giac.py", line 199, in sage.libs.giac.?
Failed example:
    B.ideal() == I.elimination_ideal([P.gen(0), P.gen(2)])      # optional - giacpy_sage
Expected:
    True
Got:
    False
**********************************************************************
```

Reported [here](https://groups.google.com/d/msg/sage-release/0QvdNonpGEg/SfQHQ6ejAQAJ), no further details (I'm out of my zone of competence).

* New upstream giacpy_sage tarball to put in upstream:
[http://webusers.imj-prg.fr/~frederic.han/xcas/giacpy/sage/giacpy_sage-0.6.7.tar.gz](http://webusers.imj-prg.fr/~frederic.han/xcas/giacpy/sage/giacpy_sage-0.6.7.tar.gz)


CC:  @frederichan-IMJPRG parisse @slel

Keywords: giacpy_sage, groebner bases, upgrade

Upstream: Fixed upstream, but not in a stable release.

Reviewer: Travis Scrimshaw, Jeroen Demeyer

Author: Frederic Han

Branch: 0c7c09c57bf058449cfa1b3a6e6bdc7f2c2cf66e

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/27306





---

archive/issue_comments_526173.json:
```json
{
    "body": "Changing keywords from \"\" to \"giacpy_sage, groebner bases\".",
    "created_at": "2019-02-17T11:12:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27306#issuecomment-526173",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changing keywords from "" to "giacpy_sage, groebner bases".



---

archive/issue_comments_526174.json:
```json
{
    "body": "<a id='comment:3'></a>\nI suspect that it is not related to giacpy_sage. The output of the giac library has changed with this new version of giac (terms of index 40 and 24 of the sequence) :\n\n```\nsage: from sage.libs.giac import groebner_basis as gb_giac # optional - giacpy_sage\n....: P = PolynomialRing(GF(previous_prime(2**31)), 6, 'x') # optional - giacpy_sage\n....: I = sage.rings.ideal.Cyclic(P) # optional - giacpy_sage\n....: B=gb_giac(I.gens());B # optional - giacpy_sage\n....: B.is_groebner()  # Now is false\n....: P.inject_variables()\n....: old24=x2*x3^2*x5^3 - 477218588*x3^3*x5^3 - 477218590*x1*x2*x4*x5^3 - 1073741823*x2^2*x4*x5^3 - 1193\n....: 04651*x1*x3*x4*x5^3 + 119304641*x2*x3*x4*x5^3 + 357913939*x3^2*x4*x5^3 - 715827881*x1*x4^2*x5^3 - 1\n....: 073741823*x2*x4^2*x5^3 - 954437183*x3*x4^2*x5^3 - 477218588*x4^3*x5^3 - 835132526*x1*x2*x5^4 - 2386\n....: 09293*x2^2*x5^4 - 357913943*x1*x3*x5^4 - 1073741820*x2*x3*x5^4 + 715827882*x3^2*x5^4 + 357913945*x1\n....: *x4*x5^4 - 954437173*x2*x4*x5^4 + 238609295*x3*x4*x5^4 - x1*x5^5 - 954437174*x2*x5^5 + 715827881*x3\n....: *x5^5 - 835132526*x4*x5^5 + 835132529*x5^6 + 835132529\n....: old40=x1*x2*x3 + x2*x3^2 + 1073741821*x1*x2*x4 + 1073741822*x2^2*x4 + x1*x3*x4 + 1073741823*x2*x3*x\n....: 4 + 2*x3^2*x4 + 1073741822*x2*x4^2 + x3*x4^2 + x1*x2*x5 + x2^2*x5 - 1073741823*x1*x3*x5 - x2*x3*x5 \n....: - x3^2*x5 - x1*x4*x5 + 1073741823*x2*x4*x5 + x3*x4*x5 + x2*x5^2 - x3*x5^2\n....: \n/home/fred-dev/sage/develop/sage.develop/local/lib/python2.7/site-packages/sage/libs/giac.py:125: DeprecationWarning: the module sage.matrix.matrix is deprecated\nSee http://trac.sagemath.org/24096 for details.\n  with GiacSettingsDefaultContext():\n// Giac share root-directory:/home/fred-dev/sage/develop/sage.develop/local/share/giac/\n// Giac share root-directory:/home/fred-dev/sage/develop/sage.develop/local/share/giac/\nHelp file /home/fred-dev/sage/develop/sage.develop/local/share/giac/doc/fr/aide_cas not found\nAdded 0 synonyms\n// Groebner basis computation time 0.006197 Memory 0.230032M\nPolynomial Sequence with 45 Polynomials in 6 Variables\nFalse\nDefining x0, x1, x2, x3, x4, x5\nsage: B[40]-old40\n-2*x1*x3*x5\nsage: B[24]-old24\n-2*x2^2*x4*x5^3 - 2*x2*x4^2*x5^3\nsage: C=[ j for j in B]\nsage: C[40]=old40\nsage: C[24]=old24\nsage: from sage.rings.polynomial.multi_polynomial_sequence import PolynomialSequence\nsage: PolynomialSequence(C,P)\nPolynomial Sequence with 45 Polynomials in 6 Variables\nsage: PolynomialSequence(C,P).is_groebner()\nTrue\n```\nI will report this on xcas forum",
    "created_at": "2019-02-17T20:07:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27306#issuecomment-526174",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:3'></a>
I suspect that it is not related to giacpy_sage. The output of the giac library has changed with this new version of giac (terms of index 40 and 24 of the sequence) :

```
sage: from sage.libs.giac import groebner_basis as gb_giac # optional - giacpy_sage
....: P = PolynomialRing(GF(previous_prime(2**31)), 6, 'x') # optional - giacpy_sage
....: I = sage.rings.ideal.Cyclic(P) # optional - giacpy_sage
....: B=gb_giac(I.gens());B # optional - giacpy_sage
....: B.is_groebner()  # Now is false
....: P.inject_variables()
....: old24=x2*x3^2*x5^3 - 477218588*x3^3*x5^3 - 477218590*x1*x2*x4*x5^3 - 1073741823*x2^2*x4*x5^3 - 1193
....: 04651*x1*x3*x4*x5^3 + 119304641*x2*x3*x4*x5^3 + 357913939*x3^2*x4*x5^3 - 715827881*x1*x4^2*x5^3 - 1
....: 073741823*x2*x4^2*x5^3 - 954437183*x3*x4^2*x5^3 - 477218588*x4^3*x5^3 - 835132526*x1*x2*x5^4 - 2386
....: 09293*x2^2*x5^4 - 357913943*x1*x3*x5^4 - 1073741820*x2*x3*x5^4 + 715827882*x3^2*x5^4 + 357913945*x1
....: *x4*x5^4 - 954437173*x2*x4*x5^4 + 238609295*x3*x4*x5^4 - x1*x5^5 - 954437174*x2*x5^5 + 715827881*x3
....: *x5^5 - 835132526*x4*x5^5 + 835132529*x5^6 + 835132529
....: old40=x1*x2*x3 + x2*x3^2 + 1073741821*x1*x2*x4 + 1073741822*x2^2*x4 + x1*x3*x4 + 1073741823*x2*x3*x
....: 4 + 2*x3^2*x4 + 1073741822*x2*x4^2 + x3*x4^2 + x1*x2*x5 + x2^2*x5 - 1073741823*x1*x3*x5 - x2*x3*x5 
....: - x3^2*x5 - x1*x4*x5 + 1073741823*x2*x4*x5 + x3*x4*x5 + x2*x5^2 - x3*x5^2
....: 
/home/fred-dev/sage/develop/sage.develop/local/lib/python2.7/site-packages/sage/libs/giac.py:125: DeprecationWarning: the module sage.matrix.matrix is deprecated
See http://trac.sagemath.org/24096 for details.
  with GiacSettingsDefaultContext():
// Giac share root-directory:/home/fred-dev/sage/develop/sage.develop/local/share/giac/
// Giac share root-directory:/home/fred-dev/sage/develop/sage.develop/local/share/giac/
Help file /home/fred-dev/sage/develop/sage.develop/local/share/giac/doc/fr/aide_cas not found
Added 0 synonyms
// Groebner basis computation time 0.006197 Memory 0.230032M
Polynomial Sequence with 45 Polynomials in 6 Variables
False
Defining x0, x1, x2, x3, x4, x5
sage: B[40]-old40
-2*x1*x3*x5
sage: B[24]-old24
-2*x2^2*x4*x5^3 - 2*x2*x4^2*x5^3
sage: C=[ j for j in B]
sage: C[40]=old40
sage: C[24]=old24
sage: from sage.rings.polynomial.multi_polynomial_sequence import PolynomialSequence
sage: PolynomialSequence(C,P)
Polynomial Sequence with 45 Polynomials in 6 Variables
sage: PolynomialSequence(C,P).is_groebner()
True
```
I will report this on xcas forum



---

archive/issue_comments_526175.json:
```json
{
    "body": "Changing priority from major to blocker.",
    "created_at": "2019-02-19T12:55:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27306#issuecomment-526175",
    "user": "https://github.com/jdemeyer"
}
```

Changing priority from major to blocker.



---

archive/issue_comments_526176.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,30 @@\n+\n+```\n+**********************************************************************\n+File \"src/sage/libs/giac.py\", line 187, in sage.libs.giac.?\n+Failed example:\n+    B.is_groebner() # optional - giacpy_sage\n+Expected:\n+    True\n+Got:\n+    False\n+**********************************************************************\n+File \"src/sage/libs/giac.py\", line 197, in sage.libs.giac.?\n+Failed example:\n+    B.is_groebner()                                             # optional - giacpy_sage\n+Expected:\n+    True\n+Got:\n+    False\n+**********************************************************************\n+File \"src/sage/libs/giac.py\", line 199, in sage.libs.giac.?\n+Failed example:\n+    B.ideal() == I.elimination_ideal([P.gen(0), P.gen(2)])      # optional - giacpy_sage\n+Expected:\n+    True\n+Got:\n+    False\n+**********************************************************************\n+```\n+\n Reported [here](https://groups.google.com/d/msg/sage-release/0QvdNonpGEg/SfQHQ6ejAQAJ), no further details (I'm out of my zone of competence).\n``````\n",
    "created_at": "2019-02-19T12:56:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27306#issuecomment-526176",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,30 @@
+
+```
+**********************************************************************
+File "src/sage/libs/giac.py", line 187, in sage.libs.giac.?
+Failed example:
+    B.is_groebner() # optional - giacpy_sage
+Expected:
+    True
+Got:
+    False
+**********************************************************************
+File "src/sage/libs/giac.py", line 197, in sage.libs.giac.?
+Failed example:
+    B.is_groebner()                                             # optional - giacpy_sage
+Expected:
+    True
+Got:
+    False
+**********************************************************************
+File "src/sage/libs/giac.py", line 199, in sage.libs.giac.?
+Failed example:
+    B.ideal() == I.elimination_ideal([P.gen(0), P.gen(2)])      # optional - giacpy_sage
+Expected:
+    True
+Got:
+    False
+**********************************************************************
+```
+
 Reported [here](https://groups.google.com/d/msg/sage-release/0QvdNonpGEg/SfQHQ6ejAQAJ), no further details (I'm out of my zone of competence).
``````




---

archive/issue_comments_526177.json:
```json
{
    "body": "<a id='comment:6'></a>\nSo I have asked there:\nhttps://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=3&t=2278\nit is an overflow problem for primes between 2^30 and 2^31.\n\nthere is a fix of the giac library here \nhttps://dev.geogebra.org/trac/changeset/66972/\n\nso we can either patch giac package or put a limitation to 2^30 instead of 2^31 in the function groebner_basis of\n\nsrc/sage/libs/giac.py\n\nwhat do you prefer?",
    "created_at": "2019-02-19T13:17:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27306#issuecomment-526177",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:6'></a>
So I have asked there:
https://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=3&t=2278
it is an overflow problem for primes between 2^30 and 2^31.

there is a fix of the giac library here 
https://dev.geogebra.org/trac/changeset/66972/

so we can either patch giac package or put a limitation to 2^30 instead of 2^31 in the function groebner_basis of

src/sage/libs/giac.py

what do you prefer?



---

archive/issue_comments_526178.json:
```json
{
    "body": "Changing upstream from \"N/A\" to \"Fixed upstream, but not in a stable release.\"",
    "created_at": "2019-02-19T14:01:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27306#issuecomment-526178",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changing upstream from "N/A" to "Fixed upstream, but not in a stable release."



---

archive/issue_comments_526179.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [frederichan](#comment%3A6):\n> So I have asked there:\n> https://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=3&t=2278\n> it is an overflow problem for primes between 2^30 and 2^31.\n> \n> there is a fix of the giac library here \n> https://dev.geogebra.org/trac/changeset/66972/\n> \n> so we can either patch giac package or put a limitation to 2^30 instead of 2^31 in the function groebner_basis of\n> \n> src/sage/libs/giac.py\n> \n> what do you prefer?\n\n\nSince I do not speak C++ fluently, I do not really understand the \"fix\", which seems to specify the type of the constant 2 : does this change the result of the comparison to \"env\" ?\n\nIf I understand correctly Bernard Parisse's answer, he plans to fix it someday in the upstream source (but no promises...).\n\nSo, in either case, we should be reminded of re-examining the situation (and possibly removing \"our\" fix) when the relevant part of (upstream) giac changes. In other words, we need a wake-up call...\n\nChanging \"our\" giac.py sounds simpler (no patch of the upstream source), but will stay applied even when this limitation to integers `<2**30` will cease to be relevant.\n\nOTOH, if/when Bernard changes his source, a patch to the upstream source (more complicated) will no longer apply cleanly ... and we'll get our wake-up call.\n\nHence my ultimate preference for this solution.\n\nI also update the ticket to `frederichan`'s informal \"report upstream\" and the informal answer.",
    "created_at": "2019-02-19T14:01:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27306#issuecomment-526179",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:7'></a>
Replying to [frederichan](#comment%3A6):
> So I have asked there:
> https://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=3&t=2278
> it is an overflow problem for primes between 2^30 and 2^31.
> 
> there is a fix of the giac library here 
> https://dev.geogebra.org/trac/changeset/66972/
> 
> so we can either patch giac package or put a limitation to 2^30 instead of 2^31 in the function groebner_basis of
> 
> src/sage/libs/giac.py
> 
> what do you prefer?


Since I do not speak C++ fluently, I do not really understand the "fix", which seems to specify the type of the constant 2 : does this change the result of the comparison to "env" ?

If I understand correctly Bernard Parisse's answer, he plans to fix it someday in the upstream source (but no promises...).

So, in either case, we should be reminded of re-examining the situation (and possibly removing "our" fix) when the relevant part of (upstream) giac changes. In other words, we need a wake-up call...

Changing "our" giac.py sounds simpler (no patch of the upstream source), but will stay applied even when this limitation to integers `<2**30` will cease to be relevant.

OTOH, if/when Bernard changes his source, a patch to the upstream source (more complicated) will no longer apply cleanly ... and we'll get our wake-up call.

Hence my ultimate preference for this solution.

I also update the ticket to `frederichan`'s informal "report upstream" and the informal answer.



---

archive/issue_comments_526180.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [charpent](#comment%3A7):\n> Since I do not speak C++ fluently, I do not really understand the \"fix\", which seems to specify the type of the constant 2 : does this change the result of the comparison to \"env\" ?\n\n\nYes. If `a` and `b` are of type `int`, then a comparison like `a * 2 > b` can give wrong results if `2 * a` overflows (as `int` value). By changing this to `a * 2LL > b`, comparisons are done using `long long` which won't overflow (assuming that the type `long long` is large enough).\n\nFor the record, this check could also be rewritten as `a > b / 2` but I don't know what is optimized best by the compiler.\n\n> If I understand correctly Bernard Parisse's answer, he plans to fix it someday in the upstream source (but no promises...).\n\n\nIsn't the patch he posted a fix to the upstream source?",
    "created_at": "2019-02-19T14:19:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27306#issuecomment-526180",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>
Replying to [charpent](#comment%3A7):
> Since I do not speak C++ fluently, I do not really understand the "fix", which seems to specify the type of the constant 2 : does this change the result of the comparison to "env" ?


Yes. If `a` and `b` are of type `int`, then a comparison like `a * 2 > b` can give wrong results if `2 * a` overflows (as `int` value). By changing this to `a * 2LL > b`, comparisons are done using `long long` which won't overflow (assuming that the type `long long` is large enough).

For the record, this check could also be rewritten as `a > b / 2` but I don't know what is optimized best by the compiler.

> If I understand correctly Bernard Parisse's answer, he plans to fix it someday in the upstream source (but no promises...).


Isn't the patch he posted a fix to the upstream source?



---

archive/issue_comments_526181.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [jdemeyer](#comment%3A8):\n> Replying to [charpent](#comment%3A7):\n> > Since I do not speak C++ fluently, I do not really understand the \"fix\", which seems to specify the type of the constant 2 : does this change the result of the comparison to \"env\" ?\n\n> \n> Yes. If `a` and `b` are of type `int`, then a comparison like `a * 2 > b` can give wrong results if `2 * a` overflows (as `int` value). By changing this to `a * 2LL > b`, comparisons are done using `long long` which won't overflow (assuming that the type `long long` is large enough).\n\n\nThanks a lot ! Now, I understand why I did not understand... ;-]\n\n> \n> For the record, this check could also be rewritten as `a > b / 2` but I don't know what is optimized best by the compiler.\n> \n> > If I understand correctly Bernard Parisse's answer, he plans to fix it someday in the upstream source (but no promises...).\n\n> \n> Isn't the patch he posted a fix to the upstream source?\n\n\nThe patch is somewhere in `geogebra` source tree. As far as I know, that's not `giac`'s primary source tree.\n\nFurthermore, his answer alludes to a forthcoming validation of (which ?) computation on Groebner bases and (grandiose) plans of using them to compute something called `cyclic10`. All these things are related in his discourse, so I thought he was alluding to (larger) changes in giac's handling of Groebner bases.",
    "created_at": "2019-02-19T14:36:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27306#issuecomment-526181",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:9'></a>
Replying to [jdemeyer](#comment%3A8):
> Replying to [charpent](#comment%3A7):
> > Since I do not speak C++ fluently, I do not really understand the "fix", which seems to specify the type of the constant 2 : does this change the result of the comparison to "env" ?

> 
> Yes. If `a` and `b` are of type `int`, then a comparison like `a * 2 > b` can give wrong results if `2 * a` overflows (as `int` value). By changing this to `a * 2LL > b`, comparisons are done using `long long` which won't overflow (assuming that the type `long long` is large enough).


Thanks a lot ! Now, I understand why I did not understand... ;-]

> 
> For the record, this check could also be rewritten as `a > b / 2` but I don't know what is optimized best by the compiler.
> 
> > If I understand correctly Bernard Parisse's answer, he plans to fix it someday in the upstream source (but no promises...).

> 
> Isn't the patch he posted a fix to the upstream source?


The patch is somewhere in `geogebra` source tree. As far as I know, that's not `giac`'s primary source tree.

Furthermore, his answer alludes to a forthcoming validation of (which ?) computation on Groebner bases and (grandiose) plans of using them to compute something called `cyclic10`. All these things are related in his discourse, so I thought he was alluding to (larger) changes in giac's handling of Groebner bases.



---

archive/issue_comments_526182.json:
```json
{
    "body": "<a id='comment:10'></a>\nYes. In short, I have made some changes in Groebner basis computations to improve speed for multiples CPU architectures. They are not yet fully tested, therefore I did not update the stable source tarball, but the unstable tarball on my site is up to date with the overflow fix. I have also committed the overflow fix to geogebra SVN tree.",
    "created_at": "2019-02-19T15:13:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27306#issuecomment-526182",
    "user": "https://trac.sagemath.org/admin/accounts/users/parisse"
}
```

<a id='comment:10'></a>
Yes. In short, I have made some changes in Groebner basis computations to improve speed for multiples CPU architectures. They are not yet fully tested, therefore I did not update the stable source tarball, but the unstable tarball on my site is up to date with the overflow fix. I have also committed the overflow fix to geogebra SVN tree.



---

archive/issue_comments_526183.json:
```json
{
    "body": "<a id='comment:11'></a>\nstarting a branch.\n\n---\nNew commits:\n|                                                                                                                                          |                                                                                                                                    |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------|\n|[c2b56da](https://git.sagemath.org/sage.git/commit?id=c2b56da7d93c615c1f9ebac7207a1f952fd33c06)|`Fix giac gbasis overflow pb with big primes; remove sunos patch because it is already in upstream source. clean offsets in patches`|",
    "created_at": "2019-02-20T11:24:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27306#issuecomment-526183",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:11'></a>
starting a branch.

---
New commits:
|                                                                                                                                          |                                                                                                                                    |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------|
|[c2b56da](https://git.sagemath.org/sage.git/commit?id=c2b56da7d93c615c1f9ebac7207a1f952fd33c06)|`Fix giac gbasis overflow pb with big primes; remove sunos patch because it is already in upstream source. clean offsets in patches`|



---

archive/issue_comments_526184.json:
```json
{
    "body": "Changing commit from \"\" to \"c2b56da7d93c615c1f9ebac7207a1f952fd33c06\"",
    "created_at": "2019-02-20T11:24:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27306#issuecomment-526184",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

Changing commit from "" to "c2b56da7d93c615c1f9ebac7207a1f952fd33c06"



---

archive/issue_comments_526185.json:
```json
{
    "body": "Changing branch from \"\" to \"public/giac-trac27306\"",
    "created_at": "2019-02-20T11:24:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27306#issuecomment-526185",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

Changing branch from "" to "public/giac-trac27306"



---

archive/issue_comments_526186.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -28,3 +28,7 @@\n ```\n \n Reported [here](https://groups.google.com/d/msg/sage-release/0QvdNonpGEg/SfQHQ6ejAQAJ), no further details (I'm out of my zone of competence).\n+\n+* New upstream giacpy_sage tarball to put in upstream:\n+[http://webusers.imj-prg.fr/~frederic.han/xcas/giacpy/sage/giacpy_sage-0.6.7.tar.gz](http://webusers.imj-prg.fr/~frederic.han/xcas/giacpy/sage/giacpy_sage-0.6.7.tar.gz)\n+\n``````\n",
    "created_at": "2019-02-20T12:56:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27306#issuecomment-526186",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -28,3 +28,7 @@
 ```
 
 Reported [here](https://groups.google.com/d/msg/sage-release/0QvdNonpGEg/SfQHQ6ejAQAJ), no further details (I'm out of my zone of competence).
+
+* New upstream giacpy_sage tarball to put in upstream:
+[http://webusers.imj-prg.fr/~frederic.han/xcas/giacpy/sage/giacpy_sage-0.6.7.tar.gz](http://webusers.imj-prg.fr/~frederic.han/xcas/giacpy/sage/giacpy_sage-0.6.7.tar.gz)
+
``````




---

archive/issue_comments_526187.json:
```json
{
    "body": "<a id='comment:12'></a>\nAlso this bug is not giacpy_sage related, there is a doctest in giacpy_sage that needs to be upgraded due to a the upgrade of giac. \nSo I have made a new upstream version of giacpy_sage with this doctest fix and I have also added some new keywords supported by this new giac version.",
    "created_at": "2019-02-20T12:56:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27306#issuecomment-526187",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:12'></a>
Also this bug is not giacpy_sage related, there is a doctest in giacpy_sage that needs to be upgraded due to a the upgrade of giac. 
So I have made a new upstream version of giacpy_sage with this doctest fix and I have also added some new keywords supported by this new giac version.



---

archive/issue_comments_526188.json:
```json
{
    "body": "Changing commit from \"c2b56da7d93c615c1f9ebac7207a1f952fd33c06\" to \"719c662f6fbbda8e283c93a0e85e3aa3e3b7978c\"",
    "created_at": "2019-02-20T13:01:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27306#issuecomment-526188",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c2b56da7d93c615c1f9ebac7207a1f952fd33c06" to "719c662f6fbbda8e283c93a0e85e3aa3e3b7978c"



---

archive/issue_comments_526189.json:
```json
{
    "body": "<a id='comment:13'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------|\n|[719c662](https://git.sagemath.org/sage.git/commit/?id=719c662f6fbbda8e283c93a0e85e3aa3e3b7978c)|`update giacpy_sage to 0.6.7; update giac keywords to 1.5.x and fix 1 change of output in doctest`|",
    "created_at": "2019-02-20T13:01:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27306#issuecomment-526189",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------|
|[719c662](https://git.sagemath.org/sage.git/commit/?id=719c662f6fbbda8e283c93a0e85e3aa3e3b7978c)|`update giacpy_sage to 0.6.7; update giac keywords to 1.5.x and fix 1 change of output in doctest`|



---

archive/issue_comments_526190.json:
```json
{
    "body": "<a id='comment:14'></a>\nthe small patch to the giac library looks to fix the problem for me (linux fedora amd64)",
    "created_at": "2019-02-20T13:21:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27306#issuecomment-526190",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:14'></a>
the small patch to the giac library looks to fix the problem for me (linux fedora amd64)



---

archive/issue_comments_526191.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-02-20T13:21:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27306#issuecomment-526191",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_526192.json:
```json
{
    "body": "<a id='comment:15'></a>\nI believe our convention is anytime there is patches to put a `.p0` to indicate that. Otherwise I think this is good, but would like a test on another OS (mine is Linux Ubuntu Intel i7), preferably OSX (but I am probably being overly paranoid).",
    "created_at": "2019-02-20T23:46:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27306#issuecomment-526192",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:15'></a>
I believe our convention is anytime there is patches to put a `.p0` to indicate that. Otherwise I think this is good, but would like a test on another OS (mine is Linux Ubuntu Intel i7), preferably OSX (but I am probably being overly paranoid).



---

archive/issue_comments_526193.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-02-21T06:36:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27306#issuecomment-526193",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_526194.json:
```json
{
    "body": "<a id='comment:16'></a>\nDon't forget Author name.",
    "created_at": "2019-02-21T06:36:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27306#issuecomment-526194",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'></a>
Don't forget Author name.



---

archive/issue_comments_526195.json:
```json
{
    "body": "Changing author from \"\" to \"Frederic Han\"",
    "created_at": "2019-02-21T06:43:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27306#issuecomment-526195",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

Changing author from "" to "Frederic Han"



---

archive/issue_comments_526196.json:
```json
{
    "body": "<a id='comment:18'></a>\nWhy are you removing `build/pkgs/giac/patches/sunos_abs.patch`? Apart from that and the version number issue, this is good for me.",
    "created_at": "2019-02-21T09:43:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27306#issuecomment-526196",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:18'></a>
Why are you removing `build/pkgs/giac/patches/sunos_abs.patch`? Apart from that and the version number issue, this is good for me.



---

archive/issue_comments_526197.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw, Jeroen Demeyer\"",
    "created_at": "2019-02-21T09:44:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27306#issuecomment-526197",
    "user": "https://github.com/jdemeyer"
}
```

Changing reviewer from "" to "Travis Scrimshaw, Jeroen Demeyer"



---

archive/issue_comments_526198.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [jdemeyer](#comment%3A18):\n> Why are you removing `build/pkgs/giac/patches/sunos_abs.patch`? Apart from that and the version number issue, this is good for me.\n\nbecause I saw on line 24 in rpn.h:\n\n```\n#undef _ABS // for SunOS\n```\nso it looks included upstream.",
    "created_at": "2019-02-21T11:14:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27306#issuecomment-526198",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:20'></a>
Replying to [jdemeyer](#comment%3A18):
> Why are you removing `build/pkgs/giac/patches/sunos_abs.patch`? Apart from that and the version number issue, this is good for me.

because I saw on line 24 in rpn.h:

```
#undef _ABS // for SunOS
```
so it looks included upstream.



---

archive/issue_comments_526199.json:
```json
{
    "body": "Changing commit from \"719c662f6fbbda8e283c93a0e85e3aa3e3b7978c\" to \"0c7c09c57bf058449cfa1b3a6e6bdc7f2c2cf66e\"",
    "created_at": "2019-02-21T11:16:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27306#issuecomment-526199",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "719c662f6fbbda8e283c93a0e85e3aa3e3b7978c" to "0c7c09c57bf058449cfa1b3a6e6bdc7f2c2cf66e"



---

archive/issue_comments_526200.json:
```json
{
    "body": "<a id='comment:21'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|\n|[0c7c09c](https://git.sagemath.org/sage.git/commit/?id=0c7c09c57bf058449cfa1b3a6e6bdc7f2c2cf66e)|`bump giac package name to 1.5.0.37.p0`|",
    "created_at": "2019-02-21T11:16:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27306#issuecomment-526200",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                       |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|
|[0c7c09c](https://git.sagemath.org/sage.git/commit/?id=0c7c09c57bf058449cfa1b3a6e6bdc7f2c2cf66e)|`bump giac package name to 1.5.0.37.p0`|



---

archive/issue_comments_526201.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [frederichan](#comment%3A20):\n> Replying to [jdemeyer](#comment%3A18):\n> > Why are you removing `build/pkgs/giac/patches/sunos_abs.patch`? Apart from that and the version number issue, this is good for me.\n\n> because I saw on line 24 in rpn.h:\n> {{{\n> #undef _ABS // for SunOS\n> }}}\n> so it looks included upstream.\n\n\nRight, that makes sense.",
    "created_at": "2019-02-21T11:18:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27306#issuecomment-526201",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:22'></a>
Replying to [frederichan](#comment%3A20):
> Replying to [jdemeyer](#comment%3A18):
> > Why are you removing `build/pkgs/giac/patches/sunos_abs.patch`? Apart from that and the version number issue, this is good for me.

> because I saw on line 24 in rpn.h:
> {{{
> #undef _ABS // for SunOS
> }}}
> so it looks included upstream.


Right, that makes sense.



---

archive/issue_comments_526202.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-02-21T11:19:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27306#issuecomment-526202",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_526203.json:
```json
{
    "body": "<a id='comment:24'></a>\nLet's send this off to the buildbots now.",
    "created_at": "2019-02-22T04:48:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27306#issuecomment-526203",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:24'></a>
Let's send this off to the buildbots now.



---

archive/issue_comments_526204.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-02-22T04:48:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27306#issuecomment-526204",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_526205.json:
```json
{
    "body": "Changing branch from \"public/giac-trac27306\" to \"0c7c09c57bf058449cfa1b3a6e6bdc7f2c2cf66e\"",
    "created_at": "2019-02-23T23:14:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27306#issuecomment-526205",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/giac-trac27306" to "0c7c09c57bf058449cfa1b3a6e6bdc7f2c2cf66e"



---

archive/issue_comments_526206.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-02-23T23:14:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27306#issuecomment-526206",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_067785.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-02-23T23:14:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27306",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27306#event-67785"
}
```



---

archive/issue_comments_526207.json:
```json
{
    "body": "<a id='comment:26'></a>\nAdding keyword \"upgrade\" to indicate the need to upload the tarball to the\nmaster download mirror, so it gets mirrored on our download mirror network.",
    "created_at": "2019-02-25T09:32:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27306#issuecomment-526207",
    "user": "https://github.com/slel"
}
```

<a id='comment:26'></a>
Adding keyword "upgrade" to indicate the need to upload the tarball to the
master download mirror, so it gets mirrored on our download mirror network.



---

archive/issue_comments_526208.json:
```json
{
    "body": "Changing commit from \"0c7c09c57bf058449cfa1b3a6e6bdc7f2c2cf66e\" to \"\"",
    "created_at": "2019-02-25T09:32:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27306#issuecomment-526208",
    "user": "https://github.com/slel"
}
```

Changing commit from "0c7c09c57bf058449cfa1b3a6e6bdc7f2c2cf66e" to ""



---

archive/issue_comments_526209.json:
```json
{
    "body": "Changing keywords from \"giacpy_sage, groebner bases\" to \"giacpy_sage, groebner bases, upgrade\".",
    "created_at": "2019-02-25T09:32:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27306",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27306#issuecomment-526209",
    "user": "https://github.com/slel"
}
```

Changing keywords from "giacpy_sage, groebner bases" to "giacpy_sage, groebner bases, upgrade".
