# Issue 27881: allow creation of PermutationGroupElement with 0 in domain

archive/issues_027644.json:
```json
{
    "assignees": [],
    "body": "Permutation group acting on a domain with 0 and creating its individual elements (moving 0) is working as expected\n\n```\nsage: g = graphs.PetersenGraph()\nsage: a = p.automorphism_group()\nsage: a.domain()\n{0, 1, 2, 3, 4, 5, 6, 7, 8, 9}\nsage: a(\"(0,1,2,3,8,5)(4,6,7)\")\n(0,1,2,3,8,5)(4,6,7)\n```\n\nThe default constructor `PermutationGroupElement` constructs permutations on `{1, ..., n}` for compatibility with `Permutation`. The following raises an error as expected\n\n```\nsage: PermutationGroupElement(\"(0,2)\")\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-1-fa3d3058e13a> in <module>()\n----> 1 PermutationGroupElement(\"(0,2)\")\n\n/opt/sage/local/lib/python3.7/site-packages/sage/groups/perm_gps/constructor.py in PermutationGroupElement(g, parent, check)\n     47             raise ValueError(\"Invalid permutation vector: %s\" % g)\n     48         degree = max([1] + [max(cycle+(1,)) for cycle in v])\n---> 49         v = from_cycles(degree, v)\n     50 \n     51         if parent is None:\n\n/opt/sage/local/lib/python3.7/site-packages/sage/combinat/permutation.py in from_cycles(n, cycles, parent)\n   7045     # Only positive elements\n   7046     if int(flattened_and_sorted[0]) < 1:\n-> 7047         raise ValueError(\"All elements should be strictly positive \"\n   7048                          \"integers, and I just found a non-positive one.\")\n   7049 \n\nValueError: All elements should be strictly positive integers, and I just found a non-positive one.\n```\n\nTo create a permutation on a domain different from `{1, ..., n}` one should use one of\n\n```\nsage: S = SymmetricGroup([0,1,2])\nsage: S(\"(0,2)\")\n(0,2)\nsage: PermutationGroupElement(\"(0,2)\", S)\n(0,2)\n```\n\n---\nIt is hard to figure out what the code of the original \"bug\" report reproduced below is supposed to show.\n\n\none can create PermutationGroup_generic_with_category acting on a domain with 0, but creating its individual elements (moving 0) is broken.\n\n```\nsage: p=graphs.PetersenGraph()\nsage: a=p.automorphism_group(); a\nPermutation Group with generators [(3,7)(4,5)(8,9), (2,6)(3,8)(4,5)(7,9), (1,4,5)(2,3,8,6,9,7), (0,1)(2,4,6,5)(3,9,8,7)]\nsage: a.domain()\n{0, 1, 2, 3, 4, 5, 6, 7, 8, 9}\nsage: map(type, a.gens())\n[<type 'sage.groups.perm_gps.permgroup_element.PermutationGroupElement'>,\n <type 'sage.groups.perm_gps.permgroup_element.PermutationGroupElement'>,\n <type 'sage.groups.perm_gps.permgroup_element.PermutationGroupElement'>,\n <type 'sage.groups.perm_gps.permgroup_element.PermutationGroupElement'>]\nsage: PermutationGroupElement(\"(0,2)\")\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-15-fa3d3058e13a> in <module>()\n----> 1 PermutationGroupElement(\"(0,2)\")\n\n/home/dimpase/Sage/sagetrac-mirror/local/lib/python2.7/site-packages/sage/groups/perm_gps/permgroup_element.pyx in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.__init__ (build/cythonized/sage/groups/perm_gps/permgroup_element.c:5852)()\n    502 \n    503         degree = max([1] + [max(cycle+(1,)) for cycle in v])\n--> 504         v = from_cycles(degree, v)\n    505 \n    506         self.__gap = 'PermList({})'.format(list(v)) # Make sure it is a list\n\n/home/dimpase/Sage/sagetrac-mirror/local/lib/python2.7/site-packages/sage/combinat/permutation.pyc in from_cycles(n, cycles, parent)\n   7041     # Only positive elements\n   7042     if int(flattened_and_sorted[0]) < 1:\n-> 7043         raise ValueError(\"All elements should be strictly positive \"\n   7044                          \"integers, and I just found a non-positive one.\")\n   7045 \n\nValueError: All elements should be strictly positive integers, and I just found a non-positive one.\n}}\n\nCC:  @dcoudert stumpc5\n\nReviewer: **Dima Pasechnik**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/27881_\n\n",
    "closed_at": "2019-10-29T10:45:08Z",
    "created_at": "2019-05-28T08:59:32Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/component%3A%20group%20theory",
        "https://github.com/sagemath/sage/labels/invalid"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "allow creation of PermutationGroupElement with 0 in domain",
    "type": "issue",
    "updated_at": "2019-10-29T10:45:08Z",
    "url": "https://github.com/sagemath/sage/issues/27881",
    "user": "https://github.com/dimpase"
}
```
Permutation group acting on a domain with 0 and creating its individual elements (moving 0) is working as expected

```
sage: g = graphs.PetersenGraph()
sage: a = p.automorphism_group()
sage: a.domain()
{0, 1, 2, 3, 4, 5, 6, 7, 8, 9}
sage: a("(0,1,2,3,8,5)(4,6,7)")
(0,1,2,3,8,5)(4,6,7)
```

The default constructor `PermutationGroupElement` constructs permutations on `{1, ..., n}` for compatibility with `Permutation`. The following raises an error as expected

```
sage: PermutationGroupElement("(0,2)")
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-1-fa3d3058e13a> in <module>()
----> 1 PermutationGroupElement("(0,2)")

/opt/sage/local/lib/python3.7/site-packages/sage/groups/perm_gps/constructor.py in PermutationGroupElement(g, parent, check)
     47             raise ValueError("Invalid permutation vector: %s" % g)
     48         degree = max([1] + [max(cycle+(1,)) for cycle in v])
---> 49         v = from_cycles(degree, v)
     50 
     51         if parent is None:

/opt/sage/local/lib/python3.7/site-packages/sage/combinat/permutation.py in from_cycles(n, cycles, parent)
   7045     # Only positive elements
   7046     if int(flattened_and_sorted[0]) < 1:
-> 7047         raise ValueError("All elements should be strictly positive "
   7048                          "integers, and I just found a non-positive one.")
   7049 

ValueError: All elements should be strictly positive integers, and I just found a non-positive one.
```

To create a permutation on a domain different from `{1, ..., n}` one should use one of

```
sage: S = SymmetricGroup([0,1,2])
sage: S("(0,2)")
(0,2)
sage: PermutationGroupElement("(0,2)", S)
(0,2)
```

---
It is hard to figure out what the code of the original "bug" report reproduced below is supposed to show.


one can create PermutationGroup_generic_with_category acting on a domain with 0, but creating its individual elements (moving 0) is broken.

```
sage: p=graphs.PetersenGraph()
sage: a=p.automorphism_group(); a
Permutation Group with generators [(3,7)(4,5)(8,9), (2,6)(3,8)(4,5)(7,9), (1,4,5)(2,3,8,6,9,7), (0,1)(2,4,6,5)(3,9,8,7)]
sage: a.domain()
{0, 1, 2, 3, 4, 5, 6, 7, 8, 9}
sage: map(type, a.gens())
[<type 'sage.groups.perm_gps.permgroup_element.PermutationGroupElement'>,
 <type 'sage.groups.perm_gps.permgroup_element.PermutationGroupElement'>,
 <type 'sage.groups.perm_gps.permgroup_element.PermutationGroupElement'>,
 <type 'sage.groups.perm_gps.permgroup_element.PermutationGroupElement'>]
sage: PermutationGroupElement("(0,2)")
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-15-fa3d3058e13a> in <module>()
----> 1 PermutationGroupElement("(0,2)")

/home/dimpase/Sage/sagetrac-mirror/local/lib/python2.7/site-packages/sage/groups/perm_gps/permgroup_element.pyx in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.__init__ (build/cythonized/sage/groups/perm_gps/permgroup_element.c:5852)()
    502 
    503         degree = max([1] + [max(cycle+(1,)) for cycle in v])
--> 504         v = from_cycles(degree, v)
    505 
    506         self.__gap = 'PermList({})'.format(list(v)) # Make sure it is a list

/home/dimpase/Sage/sagetrac-mirror/local/lib/python2.7/site-packages/sage/combinat/permutation.pyc in from_cycles(n, cycles, parent)
   7041     # Only positive elements
   7042     if int(flattened_and_sorted[0]) < 1:
-> 7043         raise ValueError("All elements should be strictly positive "
   7044                          "integers, and I just found a non-positive one.")
   7045 

ValueError: All elements should be strictly positive integers, and I just found a non-positive one.
}}

CC:  @dcoudert stumpc5

Reviewer: **Dima Pasechnik**

_Issue created by migration from https://trac.sagemath.org/ticket/27881_





---

archive/issue_events_351335.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-05-28T08:59:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27881",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27881#event-351335"
}
```



---

archive/issue_events_351336.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-05-28T08:59:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27881",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20group%20theory",
    "label_color": "0000ff",
    "label_name": "component: group theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27881#event-351336"
}
```



---

archive/issue_events_351337.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-05-28T08:59:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27881",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27881#event-351337"
}
```



---

archive/issue_comments_436177.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nAs the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).",
    "created_at": "2019-06-14T14:55:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27881#issuecomment-436177",
    "user": "https://github.com/embray"
}
```

<a id='comment:1'>Comment 1:</a>
As the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).



---

archive/issue_events_351338.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:55:02Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27881",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27881#event-351338"
}
```



---

archive/issue_comments_436178.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,38 +1,49 @@\n one can create `PermutationGroup_generic_with_category` acting on a domain with 0, but creating its individual elements (moving 0) is broken.\n \n ```\n-sage: p=graphs.PetersenGraph()\n-sage: a=p.automorphism_group(); a\n-Permutation Group with generators [(3,7)(4,5)(8,9), (2,6)(3,8)(4,5)(7,9), (1,4,5)(2,3,8,6,9,7), (0,1)(2,4,6,5)(3,9,8,7)]\n+sage: g = graphs.PetersenGraph()\n+sage: a = p.automorphism_group()\n sage: a.domain()\n {0, 1, 2, 3, 4, 5, 6, 7, 8, 9}\n-sage: map(type, a.gens())\n-[<type 'sage.groups.perm_gps.permgroup_element.PermutationGroupElement'>,\n- <type 'sage.groups.perm_gps.permgroup_element.PermutationGroupElement'>,\n- <type 'sage.groups.perm_gps.permgroup_element.PermutationGroupElement'>,\n- <type 'sage.groups.perm_gps.permgroup_element.PermutationGroupElement'>]\n-sage: PermutationGroupElement(\"(0,2)\")\n----------------------------------------------------------------------------\n-ValueError                                Traceback (most recent call last)\n-<ipython-input-15-fa3d3058e13a> in <module>()\n-----> 1 PermutationGroupElement(\"(0,2)\")\n+sage: a(\"(0,2)\")\n+Traceback (most recent call last)\n+<ipython-input-12-e4675ef65d9d> in <module>()\n+----> 1 a(\"(0,2)\")\n \n-/home/dimpase/Sage/sagetrac-mirror/local/lib/python2.7/site-packages/sage/groups/perm_gps/permgroup_element.pyx in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.__init__ (build/cythonized/sage/groups/perm_gps/permgroup_element.c:5852)()\n-    502 \n-    503         degree = max([1] + [max(cycle+(1,)) for cycle in v])\n---> 504         v = from_cycles(degree, v)\n-    505 \n-    506         self.__gap = 'PermList({})'.format(list(v)) # Make sure it is a list\n+/opt/sage/local/lib/python3.7/site-packages/sage/structure/parent.pyx in sage.structure.parent.Parent.__call__ (build/cythonized/sage/structure/parent.c:9218)()\n+    898         if mor is not None:\n+    899             if no_extra_args:\n+--> 900                 return mor._call_(x)\n+    901             else:\n+    902                 return mor._call_with_args(x, args, kwds)\n \n-/home/dimpase/Sage/sagetrac-mirror/local/lib/python2.7/site-packages/sage/combinat/permutation.pyc in from_cycles(n, cycles, parent)\n-   7041     # Only positive elements\n-   7042     if int(flattened_and_sorted[0]) < 1:\n--> 7043         raise ValueError(\"All elements should be strictly positive \"\n-   7044                          \"integers, and I just found a non-positive one.\")\n-   7045 \n+/opt/sage/local/lib/python3.7/site-packages/sage/structure/coerce_maps.pyx in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (build/cythonized/sage/structure/coerce_maps.c:4556)()\n+    159                 print(type(C), C)\n+    160                 print(type(C._element_constructor), C._element_constructor)\n+--> 161             raise\n+    162 \n+    163     cpdef Element _call_with_args(self, x, args=(), kwds={}):\n \n-ValueError: All elements should be strictly positive integers, and I just found a non-positive one.\n+/opt/sage/local/lib/python3.7/site-packages/sage/structure/coerce_maps.pyx in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (build/cythonized/sage/structure/coerce_maps.c:4448)()\n+    154         cdef Parent C = self._codomain\n+    155         try:\n+--> 156             return C._element_constructor(x)\n+    157         except Exception:\n+    158             if print_warnings:\n+\n+/opt/sage/local/lib/python3.7/site-packages/sage/groups/perm_gps/permgroup.py in _element_constructor_(self, x, check)\n+    794                 return self.element_class(x.cycle_tuples(), self, check=False)\n+    795 \n+--> 796         return self.element_class(x, self, check=check)\n+    797 \n+    798     def _coerce_map_from_(self, G):\n+\n+/opt/sage/local/lib/python3.7/site-packages/sage/groups/perm_gps/permgroup_element.pyx in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.__init__ (build/cythonized/sage/groups/perm_gps/permgroup_element.c:6897)()\n+    554                 gap = 'PermList([{}])'.format(','.join('%d' % (self.perm[i]+1) for i in range(self.n)))\n+    555                 if not P.parent().eval(gap) in P:\n+--> 556                     raise TypeError('permutation %s not in %s' % (g, parent))\n+    557 \n+    558     cpdef _set_identity(self):\n+\n+TypeError: permutation (0,2) not in Permutation Group with generators [(3,7)(4,5)(8,9), (1,4,5)(2,3,8,6,9,7), (0,1,2,3,8,5)(4,6,7)]\n ```\n-\n-\n-\n``````\n",
    "created_at": "2019-10-28T03:48:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27881#issuecomment-436178",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,38 +1,49 @@
 one can create `PermutationGroup_generic_with_category` acting on a domain with 0, but creating its individual elements (moving 0) is broken.
 
 ```
-sage: p=graphs.PetersenGraph()
-sage: a=p.automorphism_group(); a
-Permutation Group with generators [(3,7)(4,5)(8,9), (2,6)(3,8)(4,5)(7,9), (1,4,5)(2,3,8,6,9,7), (0,1)(2,4,6,5)(3,9,8,7)]
+sage: g = graphs.PetersenGraph()
+sage: a = p.automorphism_group()
 sage: a.domain()
 {0, 1, 2, 3, 4, 5, 6, 7, 8, 9}
-sage: map(type, a.gens())
-[<type 'sage.groups.perm_gps.permgroup_element.PermutationGroupElement'>,
- <type 'sage.groups.perm_gps.permgroup_element.PermutationGroupElement'>,
- <type 'sage.groups.perm_gps.permgroup_element.PermutationGroupElement'>,
- <type 'sage.groups.perm_gps.permgroup_element.PermutationGroupElement'>]
-sage: PermutationGroupElement("(0,2)")
----------------------------------------------------------------------------
-ValueError                                Traceback (most recent call last)
-<ipython-input-15-fa3d3058e13a> in <module>()
-----> 1 PermutationGroupElement("(0,2)")
+sage: a("(0,2)")
+Traceback (most recent call last)
+<ipython-input-12-e4675ef65d9d> in <module>()
+----> 1 a("(0,2)")
 
-/home/dimpase/Sage/sagetrac-mirror/local/lib/python2.7/site-packages/sage/groups/perm_gps/permgroup_element.pyx in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.__init__ (build/cythonized/sage/groups/perm_gps/permgroup_element.c:5852)()
-    502 
-    503         degree = max([1] + [max(cycle+(1,)) for cycle in v])
---> 504         v = from_cycles(degree, v)
-    505 
-    506         self.__gap = 'PermList({})'.format(list(v)) # Make sure it is a list
+/opt/sage/local/lib/python3.7/site-packages/sage/structure/parent.pyx in sage.structure.parent.Parent.__call__ (build/cythonized/sage/structure/parent.c:9218)()
+    898         if mor is not None:
+    899             if no_extra_args:
+--> 900                 return mor._call_(x)
+    901             else:
+    902                 return mor._call_with_args(x, args, kwds)
 
-/home/dimpase/Sage/sagetrac-mirror/local/lib/python2.7/site-packages/sage/combinat/permutation.pyc in from_cycles(n, cycles, parent)
-   7041     # Only positive elements
-   7042     if int(flattened_and_sorted[0]) < 1:
--> 7043         raise ValueError("All elements should be strictly positive "
-   7044                          "integers, and I just found a non-positive one.")
-   7045 
+/opt/sage/local/lib/python3.7/site-packages/sage/structure/coerce_maps.pyx in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (build/cythonized/sage/structure/coerce_maps.c:4556)()
+    159                 print(type(C), C)
+    160                 print(type(C._element_constructor), C._element_constructor)
+--> 161             raise
+    162 
+    163     cpdef Element _call_with_args(self, x, args=(), kwds={}):
 
-ValueError: All elements should be strictly positive integers, and I just found a non-positive one.
+/opt/sage/local/lib/python3.7/site-packages/sage/structure/coerce_maps.pyx in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (build/cythonized/sage/structure/coerce_maps.c:4448)()
+    154         cdef Parent C = self._codomain
+    155         try:
+--> 156             return C._element_constructor(x)
+    157         except Exception:
+    158             if print_warnings:
+
+/opt/sage/local/lib/python3.7/site-packages/sage/groups/perm_gps/permgroup.py in _element_constructor_(self, x, check)
+    794                 return self.element_class(x.cycle_tuples(), self, check=False)
+    795 
+--> 796         return self.element_class(x, self, check=check)
+    797 
+    798     def _coerce_map_from_(self, G):
+
+/opt/sage/local/lib/python3.7/site-packages/sage/groups/perm_gps/permgroup_element.pyx in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.__init__ (build/cythonized/sage/groups/perm_gps/permgroup_element.c:6897)()
+    554                 gap = 'PermList([{}])'.format(','.join('%d' % (self.perm[i]+1) for i in range(self.n)))
+    555                 if not P.parent().eval(gap) in P:
+--> 556                     raise TypeError('permutation %s not in %s' % (g, parent))
+    557 
+    558     cpdef _set_identity(self):
+
+TypeError: permutation (0,2) not in Permutation Group with generators [(3,7)(4,5)(8,9), (1,4,5)(2,3,8,6,9,7), (0,1,2,3,8,5)(4,6,7)]
 ```
-
-
-
``````




---

archive/issue_comments_436179.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,49 +1,10 @@\n-one can create `PermutationGroup_generic_with_category` acting on a domain with 0, but creating its individual elements (moving 0) is broken.\n+Permutation group acting on a domain with 0 and creating its individual elements (moving 0) is working as expected\n \n ```\n sage: g = graphs.PetersenGraph()\n sage: a = p.automorphism_group()\n sage: a.domain()\n {0, 1, 2, 3, 4, 5, 6, 7, 8, 9}\n-sage: a(\"(0,2)\")\n-Traceback (most recent call last)\n-<ipython-input-12-e4675ef65d9d> in <module>()\n-----> 1 a(\"(0,2)\")\n-\n-/opt/sage/local/lib/python3.7/site-packages/sage/structure/parent.pyx in sage.structure.parent.Parent.__call__ (build/cythonized/sage/structure/parent.c:9218)()\n-    898         if mor is not None:\n-    899             if no_extra_args:\n---> 900                 return mor._call_(x)\n-    901             else:\n-    902                 return mor._call_with_args(x, args, kwds)\n-\n-/opt/sage/local/lib/python3.7/site-packages/sage/structure/coerce_maps.pyx in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (build/cythonized/sage/structure/coerce_maps.c:4556)()\n-    159                 print(type(C), C)\n-    160                 print(type(C._element_constructor), C._element_constructor)\n---> 161             raise\n-    162 \n-    163     cpdef Element _call_with_args(self, x, args=(), kwds={}):\n-\n-/opt/sage/local/lib/python3.7/site-packages/sage/structure/coerce_maps.pyx in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (build/cythonized/sage/structure/coerce_maps.c:4448)()\n-    154         cdef Parent C = self._codomain\n-    155         try:\n---> 156             return C._element_constructor(x)\n-    157         except Exception:\n-    158             if print_warnings:\n-\n-/opt/sage/local/lib/python3.7/site-packages/sage/groups/perm_gps/permgroup.py in _element_constructor_(self, x, check)\n-    794                 return self.element_class(x.cycle_tuples(), self, check=False)\n-    795 \n---> 796         return self.element_class(x, self, check=check)\n-    797 \n-    798     def _coerce_map_from_(self, G):\n-\n-/opt/sage/local/lib/python3.7/site-packages/sage/groups/perm_gps/permgroup_element.pyx in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.__init__ (build/cythonized/sage/groups/perm_gps/permgroup_element.c:6897)()\n-    554                 gap = 'PermList([{}])'.format(','.join('%d' % (self.perm[i]+1) for i in range(self.n)))\n-    555                 if not P.parent().eval(gap) in P:\n---> 556                     raise TypeError('permutation %s not in %s' % (g, parent))\n-    557 \n-    558     cpdef _set_identity(self):\n-\n-TypeError: permutation (0,2) not in Permutation Group with generators [(3,7)(4,5)(8,9), (1,4,5)(2,3,8,6,9,7), (0,1,2,3,8,5)(4,6,7)]\n+sage: a(\"(0,1,2,3,8,5)(4,6,7)\")\n+(0,1,2,3,8,5)(4,6,7)\n ```\n``````\n",
    "created_at": "2019-10-28T03:49:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27881#issuecomment-436179",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,49 +1,10 @@
-one can create `PermutationGroup_generic_with_category` acting on a domain with 0, but creating its individual elements (moving 0) is broken.
+Permutation group acting on a domain with 0 and creating its individual elements (moving 0) is working as expected
 
 ```
 sage: g = graphs.PetersenGraph()
 sage: a = p.automorphism_group()
 sage: a.domain()
 {0, 1, 2, 3, 4, 5, 6, 7, 8, 9}
-sage: a("(0,2)")
-Traceback (most recent call last)
-<ipython-input-12-e4675ef65d9d> in <module>()
-----> 1 a("(0,2)")
-
-/opt/sage/local/lib/python3.7/site-packages/sage/structure/parent.pyx in sage.structure.parent.Parent.__call__ (build/cythonized/sage/structure/parent.c:9218)()
-    898         if mor is not None:
-    899             if no_extra_args:
---> 900                 return mor._call_(x)
-    901             else:
-    902                 return mor._call_with_args(x, args, kwds)
-
-/opt/sage/local/lib/python3.7/site-packages/sage/structure/coerce_maps.pyx in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (build/cythonized/sage/structure/coerce_maps.c:4556)()
-    159                 print(type(C), C)
-    160                 print(type(C._element_constructor), C._element_constructor)
---> 161             raise
-    162 
-    163     cpdef Element _call_with_args(self, x, args=(), kwds={}):
-
-/opt/sage/local/lib/python3.7/site-packages/sage/structure/coerce_maps.pyx in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (build/cythonized/sage/structure/coerce_maps.c:4448)()
-    154         cdef Parent C = self._codomain
-    155         try:
---> 156             return C._element_constructor(x)
-    157         except Exception:
-    158             if print_warnings:
-
-/opt/sage/local/lib/python3.7/site-packages/sage/groups/perm_gps/permgroup.py in _element_constructor_(self, x, check)
-    794                 return self.element_class(x.cycle_tuples(), self, check=False)
-    795 
---> 796         return self.element_class(x, self, check=check)
-    797 
-    798     def _coerce_map_from_(self, G):
-
-/opt/sage/local/lib/python3.7/site-packages/sage/groups/perm_gps/permgroup_element.pyx in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.__init__ (build/cythonized/sage/groups/perm_gps/permgroup_element.c:6897)()
-    554                 gap = 'PermList([{}])'.format(','.join('%d' % (self.perm[i]+1) for i in range(self.n)))
-    555                 if not P.parent().eval(gap) in P:
---> 556                     raise TypeError('permutation %s not in %s' % (g, parent))
-    557 
-    558     cpdef _set_identity(self):
-
-TypeError: permutation (0,2) not in Permutation Group with generators [(3,7)(4,5)(8,9), (1,4,5)(2,3,8,6,9,7), (0,1,2,3,8,5)(4,6,7)]
+sage: a("(0,1,2,3,8,5)(4,6,7)")
+(0,1,2,3,8,5)(4,6,7)
 ```
``````




---

archive/issue_events_351339.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-10-28T03:49:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27881",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27881#event-351339"
}
```



---

archive/issue_comments_436180.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nThe message is",
    "created_at": "2019-10-28T03:49:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27881#issuecomment-436180",
    "user": "https://github.com/videlec"
}
```

<a id='comment:3'>Comment 3:</a>
The message is



---

archive/issue_comments_436181.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\none should not edit away the error reports!",
    "created_at": "2019-10-28T06:23:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27881#issuecomment-436181",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:4'>Comment 4:</a>
one should not edit away the error reports!



---

archive/issue_comments_436182.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nIt was not a meaningful error report. The command `PermutationGroupElement(\"(0,2)\")` is not working (as expected). And it has nothing to do with the computation of automorphism group of graphs.",
    "created_at": "2019-10-28T12:23:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27881#issuecomment-436182",
    "user": "https://github.com/videlec"
}
```

<a id='comment:5'>Comment 5:</a>
It was not a meaningful error report. The command `PermutationGroupElement("(0,2)")` is not working (as expected). And it has nothing to do with the computation of automorphism group of graphs.



---

archive/issue_comments_436183.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nthere was some code, meaningful or not, that used to produce errors.\n\nare these errors fixed?",
    "created_at": "2019-10-28T12:28:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27881#issuecomment-436183",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:6'>Comment 6:</a>
there was some code, meaningful or not, that used to produce errors.

are these errors fixed?



---

archive/issue_comments_436184.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nIndeed `PermutationGroupElement(\"(0,2)\")` produced and still produce an error. What do you mean by fixed? The error is intended.",
    "created_at": "2019-10-28T12:32:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27881#issuecomment-436184",
    "user": "https://github.com/videlec"
}
```

<a id='comment:7'>Comment 7:</a>
Indeed `PermutationGroupElement("(0,2)")` produced and still produce an error. What do you mean by fixed? The error is intended.



---

archive/issue_comments_436185.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,3 +8,43 @@\n sage: a(\"(0,1,2,3,8,5)(4,6,7)\")\n (0,1,2,3,8,5)(4,6,7)\n ```\n+\n+---\n+It is hard to figure out what the code of the original \"bug\" report reproduced below is supposed to show.\n+\n+\n+one can create PermutationGroup_generic_with_category acting on a domain with 0, but creating its individual elements (moving 0) is broken.\n+\n+```\n+sage: p=graphs.PetersenGraph()\n+sage: a=p.automorphism_group(); a\n+Permutation Group with generators [(3,7)(4,5)(8,9), (2,6)(3,8)(4,5)(7,9), (1,4,5)(2,3,8,6,9,7), (0,1)(2,4,6,5)(3,9,8,7)]\n+sage: a.domain()\n+{0, 1, 2, 3, 4, 5, 6, 7, 8, 9}\n+sage: map(type, a.gens())\n+[<type 'sage.groups.perm_gps.permgroup_element.PermutationGroupElement'>,\n+ <type 'sage.groups.perm_gps.permgroup_element.PermutationGroupElement'>,\n+ <type 'sage.groups.perm_gps.permgroup_element.PermutationGroupElement'>,\n+ <type 'sage.groups.perm_gps.permgroup_element.PermutationGroupElement'>]\n+sage: PermutationGroupElement(\"(0,2)\")\n+---------------------------------------------------------------------------\n+ValueError                                Traceback (most recent call last)\n+<ipython-input-15-fa3d3058e13a> in <module>()\n+----> 1 PermutationGroupElement(\"(0,2)\")\n+\n+/home/dimpase/Sage/sagetrac-mirror/local/lib/python2.7/site-packages/sage/groups/perm_gps/permgroup_element.pyx in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.__init__ (build/cythonized/sage/groups/perm_gps/permgroup_element.c:5852)()\n+    502 \n+    503         degree = max([1] + [max(cycle+(1,)) for cycle in v])\n+--> 504         v = from_cycles(degree, v)\n+    505 \n+    506         self.__gap = 'PermList({})'.format(list(v)) # Make sure it is a list\n+\n+/home/dimpase/Sage/sagetrac-mirror/local/lib/python2.7/site-packages/sage/combinat/permutation.pyc in from_cycles(n, cycles, parent)\n+   7041     # Only positive elements\n+   7042     if int(flattened_and_sorted[0]) < 1:\n+-> 7043         raise ValueError(\"All elements should be strictly positive \"\n+   7044                          \"integers, and I just found a non-positive one.\")\n+   7045 \n+\n+ValueError: All elements should be strictly positive integers, and I just found a non-positive one.\n+}}\n``````\n",
    "created_at": "2019-10-28T12:38:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27881#issuecomment-436185",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,3 +8,43 @@
 sage: a("(0,1,2,3,8,5)(4,6,7)")
 (0,1,2,3,8,5)(4,6,7)
 ```
+
+---
+It is hard to figure out what the code of the original "bug" report reproduced below is supposed to show.
+
+
+one can create PermutationGroup_generic_with_category acting on a domain with 0, but creating its individual elements (moving 0) is broken.
+
+```
+sage: p=graphs.PetersenGraph()
+sage: a=p.automorphism_group(); a
+Permutation Group with generators [(3,7)(4,5)(8,9), (2,6)(3,8)(4,5)(7,9), (1,4,5)(2,3,8,6,9,7), (0,1)(2,4,6,5)(3,9,8,7)]
+sage: a.domain()
+{0, 1, 2, 3, 4, 5, 6, 7, 8, 9}
+sage: map(type, a.gens())
+[<type 'sage.groups.perm_gps.permgroup_element.PermutationGroupElement'>,
+ <type 'sage.groups.perm_gps.permgroup_element.PermutationGroupElement'>,
+ <type 'sage.groups.perm_gps.permgroup_element.PermutationGroupElement'>,
+ <type 'sage.groups.perm_gps.permgroup_element.PermutationGroupElement'>]
+sage: PermutationGroupElement("(0,2)")
+---------------------------------------------------------------------------
+ValueError                                Traceback (most recent call last)
+<ipython-input-15-fa3d3058e13a> in <module>()
+----> 1 PermutationGroupElement("(0,2)")
+
+/home/dimpase/Sage/sagetrac-mirror/local/lib/python2.7/site-packages/sage/groups/perm_gps/permgroup_element.pyx in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.__init__ (build/cythonized/sage/groups/perm_gps/permgroup_element.c:5852)()
+    502 
+    503         degree = max([1] + [max(cycle+(1,)) for cycle in v])
+--> 504         v = from_cycles(degree, v)
+    505 
+    506         self.__gap = 'PermList({})'.format(list(v)) # Make sure it is a list
+
+/home/dimpase/Sage/sagetrac-mirror/local/lib/python2.7/site-packages/sage/combinat/permutation.pyc in from_cycles(n, cycles, parent)
+   7041     # Only positive elements
+   7042     if int(flattened_and_sorted[0]) < 1:
+-> 7043         raise ValueError("All elements should be strictly positive "
+   7044                          "integers, and I just found a non-positive one.")
+   7045 
+
+ValueError: All elements should be strictly positive integers, and I just found a non-positive one.
+}}
``````




---

archive/issue_comments_436186.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,6 +7,32 @@\n {0, 1, 2, 3, 4, 5, 6, 7, 8, 9}\n sage: a(\"(0,1,2,3,8,5)(4,6,7)\")\n (0,1,2,3,8,5)(4,6,7)\n+```\n+\n+The default constructor `PermutationGroupElement` constructs permutations on `{1, ..., n}` for compatibility with `Permutation`. The following raises an error as expected\n+\n+```\n+sage: PermutationGroupElement(\"(0,2)\")\n+---------------------------------------------------------------------------\n+ValueError                                Traceback (most recent call last)\n+<ipython-input-1-fa3d3058e13a> in <module>()\n+----> 1 PermutationGroupElement(\"(0,2)\")\n+\n+/opt/sage/local/lib/python3.7/site-packages/sage/groups/perm_gps/constructor.py in PermutationGroupElement(g, parent, check)\n+     47             raise ValueError(\"Invalid permutation vector: %s\" % g)\n+     48         degree = max([1] + [max(cycle+(1,)) for cycle in v])\n+---> 49         v = from_cycles(degree, v)\n+     50 \n+     51         if parent is None:\n+\n+/opt/sage/local/lib/python3.7/site-packages/sage/combinat/permutation.py in from_cycles(n, cycles, parent)\n+   7045     # Only positive elements\n+   7046     if int(flattened_and_sorted[0]) < 1:\n+-> 7047         raise ValueError(\"All elements should be strictly positive \"\n+   7048                          \"integers, and I just found a non-positive one.\")\n+   7049 \n+\n+ValueError: All elements should be strictly positive integers, and I just found a non-positive one.\n ```\n \n ---\n``````\n",
    "created_at": "2019-10-28T12:39:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27881#issuecomment-436186",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,6 +7,32 @@
 {0, 1, 2, 3, 4, 5, 6, 7, 8, 9}
 sage: a("(0,1,2,3,8,5)(4,6,7)")
 (0,1,2,3,8,5)(4,6,7)
+```
+
+The default constructor `PermutationGroupElement` constructs permutations on `{1, ..., n}` for compatibility with `Permutation`. The following raises an error as expected
+
+```
+sage: PermutationGroupElement("(0,2)")
+---------------------------------------------------------------------------
+ValueError                                Traceback (most recent call last)
+<ipython-input-1-fa3d3058e13a> in <module>()
+----> 1 PermutationGroupElement("(0,2)")
+
+/opt/sage/local/lib/python3.7/site-packages/sage/groups/perm_gps/constructor.py in PermutationGroupElement(g, parent, check)
+     47             raise ValueError("Invalid permutation vector: %s" % g)
+     48         degree = max([1] + [max(cycle+(1,)) for cycle in v])
+---> 49         v = from_cycles(degree, v)
+     50 
+     51         if parent is None:
+
+/opt/sage/local/lib/python3.7/site-packages/sage/combinat/permutation.py in from_cycles(n, cycles, parent)
+   7045     # Only positive elements
+   7046     if int(flattened_and_sorted[0]) < 1:
+-> 7047         raise ValueError("All elements should be strictly positive "
+   7048                          "integers, and I just found a non-positive one.")
+   7049 
+
+ValueError: All elements should be strictly positive integers, and I just found a non-positive one.
 ```
 
 ---
``````




---

archive/issue_comments_436187.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -33,6 +33,16 @@\n    7049 \n \n ValueError: All elements should be strictly positive integers, and I just found a non-positive one.\n+```\n+\n+To create a permutation on a domain different from `{1, ..., n}` one should use one of\n+\n+```\n+sage: S = SymmetricGroup([0,1,2])\n+sage: S(\"(0,2)\")\n+(0,2)\n+sage: PermutationGroupElement(\"(0,2)\", S)\n+(0,2)\n ```\n \n ---\n``````\n",
    "created_at": "2019-10-28T12:41:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27881#issuecomment-436187",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -33,6 +33,16 @@
    7049 
 
 ValueError: All elements should be strictly positive integers, and I just found a non-positive one.
+```
+
+To create a permutation on a domain different from `{1, ..., n}` one should use one of
+
+```
+sage: S = SymmetricGroup([0,1,2])
+sage: S("(0,2)")
+(0,2)
+sage: PermutationGroupElement("(0,2)", S)
+(0,2)
 ```
 
 ---
``````




---

archive/issue_events_351340.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-10-28T17:01:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27881",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27881#event-351340"
}
```



---

archive/issue_events_351341.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-10-28T17:01:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27881",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27881#event-351341"
}
```



---

archive/issue_comments_436188.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nOK, thanks. Sorry for noise - indeed it was not a bug.",
    "created_at": "2019-10-28T17:01:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27881#issuecomment-436188",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:11'>Comment 11:</a>
OK, thanks. Sorry for noise - indeed it was not a bug.



---

archive/issue_comments_436189.json:
```json
{
    "body": "Reviewer: **Dima Pasechnik**",
    "created_at": "2019-10-28T17:01:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27881#issuecomment-436189",
    "user": "https://github.com/dimpase"
}
```

Reviewer: **Dima Pasechnik**



---

archive/issue_events_351342.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-10-29T10:45:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27881",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27881#event-351342"
}
```



---

archive/issue_events_351343.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-10-29T10:45:08Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27881",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27881#event-351343"
}
```
