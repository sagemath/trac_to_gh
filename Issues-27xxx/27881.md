# Issue 27881: allow creation of PermutationGroupElement with 0 in domain

archive/issues_027644.json:
```json
{
    "body": "Permutation group acting on a domain with 0 and creating its individual elements (moving 0) is working as expected\n\n```\nsage: g = graphs.PetersenGraph()\nsage: a = p.automorphism_group()\nsage: a.domain()\n{0, 1, 2, 3, 4, 5, 6, 7, 8, 9}\nsage: a(\"(0,1,2,3,8,5)(4,6,7)\")\n(0,1,2,3,8,5)(4,6,7)\n```\n\nThe default constructor `PermutationGroupElement` constructs permutations on `{1, ..., n}` for compatibility with `Permutation`. The following raises an error as expected\n\n```\nsage: PermutationGroupElement(\"(0,2)\")\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-1-fa3d3058e13a> in <module>()\n----> 1 PermutationGroupElement(\"(0,2)\")\n\n/opt/sage/local/lib/python3.7/site-packages/sage/groups/perm_gps/constructor.py in PermutationGroupElement(g, parent, check)\n     47             raise ValueError(\"Invalid permutation vector: %s\" % g)\n     48         degree = max([1] + [max(cycle+(1,)) for cycle in v])\n---> 49         v = from_cycles(degree, v)\n     50 \n     51         if parent is None:\n\n/opt/sage/local/lib/python3.7/site-packages/sage/combinat/permutation.py in from_cycles(n, cycles, parent)\n   7045     # Only positive elements\n   7046     if int(flattened_and_sorted[0]) < 1:\n-> 7047         raise ValueError(\"All elements should be strictly positive \"\n   7048                          \"integers, and I just found a non-positive one.\")\n   7049 \n\nValueError: All elements should be strictly positive integers, and I just found a non-positive one.\n```\n\nTo create a permutation on a domain different from `{1, ..., n}` one should use one of\n\n```\nsage: S = SymmetricGroup([0,1,2])\nsage: S(\"(0,2)\")\n(0,2)\nsage: PermutationGroupElement(\"(0,2)\", S)\n(0,2)\n```\n\n---\nIt is hard to figure out what the code of the original \"bug\" report reproduced below is supposed to show.\n\n\none can create PermutationGroup_generic_with_category acting on a domain with 0, but creating its individual elements (moving 0) is broken.\n\n```\nsage: p=graphs.PetersenGraph()\nsage: a=p.automorphism_group(); a\nPermutation Group with generators [(3,7)(4,5)(8,9), (2,6)(3,8)(4,5)(7,9), (1,4,5)(2,3,8,6,9,7), (0,1)(2,4,6,5)(3,9,8,7)]\nsage: a.domain()\n{0, 1, 2, 3, 4, 5, 6, 7, 8, 9}\nsage: map(type, a.gens())\n[<type 'sage.groups.perm_gps.permgroup_element.PermutationGroupElement'>,\n <type 'sage.groups.perm_gps.permgroup_element.PermutationGroupElement'>,\n <type 'sage.groups.perm_gps.permgroup_element.PermutationGroupElement'>,\n <type 'sage.groups.perm_gps.permgroup_element.PermutationGroupElement'>]\nsage: PermutationGroupElement(\"(0,2)\")\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-15-fa3d3058e13a> in <module>()\n----> 1 PermutationGroupElement(\"(0,2)\")\n\n/home/dimpase/Sage/sagetrac-mirror/local/lib/python2.7/site-packages/sage/groups/perm_gps/permgroup_element.pyx in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.__init__ (build/cythonized/sage/groups/perm_gps/permgroup_element.c:5852)()\n    502 \n    503         degree = max([1] + [max(cycle+(1,)) for cycle in v])\n--> 504         v = from_cycles(degree, v)\n    505 \n    506         self.__gap = 'PermList({})'.format(list(v)) # Make sure it is a list\n\n/home/dimpase/Sage/sagetrac-mirror/local/lib/python2.7/site-packages/sage/combinat/permutation.pyc in from_cycles(n, cycles, parent)\n   7041     # Only positive elements\n   7042     if int(flattened_and_sorted[0]) < 1:\n-> 7043         raise ValueError(\"All elements should be strictly positive \"\n   7044                          \"integers, and I just found a non-positive one.\")\n   7045 \n\nValueError: All elements should be strictly positive integers, and I just found a non-positive one.\n}}\n\nCC:  @dcoudert stumpc5\n\nReviewer: Dima Pasechnik\n\nResolution: invalid\n\nIssue created by migration from https://trac.sagemath.org/ticket/27881\n\n",
    "closed_at": "2019-10-29T10:45:08Z",
    "created_at": "2019-05-28T08:59:32Z",
    "labels": [
        "component: group theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "allow creation of PermutationGroupElement with 0 in domain",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27881",
    "user": "https://github.com/dimpase"
}
```
Permutation group acting on a domain with 0 and creating its individual elements (moving 0) is working as expected

```
sage: g = graphs.PetersenGraph()
sage: a = p.automorphism_group()
sage: a.domain()
{0, 1, 2, 3, 4, 5, 6, 7, 8, 9}
sage: a("(0,1,2,3,8,5)(4,6,7)")
(0,1,2,3,8,5)(4,6,7)
```

The default constructor `PermutationGroupElement` constructs permutations on `{1, ..., n}` for compatibility with `Permutation`. The following raises an error as expected

```
sage: PermutationGroupElement("(0,2)")
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-1-fa3d3058e13a> in <module>()
----> 1 PermutationGroupElement("(0,2)")

/opt/sage/local/lib/python3.7/site-packages/sage/groups/perm_gps/constructor.py in PermutationGroupElement(g, parent, check)
     47             raise ValueError("Invalid permutation vector: %s" % g)
     48         degree = max([1] + [max(cycle+(1,)) for cycle in v])
---> 49         v = from_cycles(degree, v)
     50 
     51         if parent is None:

/opt/sage/local/lib/python3.7/site-packages/sage/combinat/permutation.py in from_cycles(n, cycles, parent)
   7045     # Only positive elements
   7046     if int(flattened_and_sorted[0]) < 1:
-> 7047         raise ValueError("All elements should be strictly positive "
   7048                          "integers, and I just found a non-positive one.")
   7049 

ValueError: All elements should be strictly positive integers, and I just found a non-positive one.
```

To create a permutation on a domain different from `{1, ..., n}` one should use one of

```
sage: S = SymmetricGroup([0,1,2])
sage: S("(0,2)")
(0,2)
sage: PermutationGroupElement("(0,2)", S)
(0,2)
```

---
It is hard to figure out what the code of the original "bug" report reproduced below is supposed to show.


one can create PermutationGroup_generic_with_category acting on a domain with 0, but creating its individual elements (moving 0) is broken.

```
sage: p=graphs.PetersenGraph()
sage: a=p.automorphism_group(); a
Permutation Group with generators [(3,7)(4,5)(8,9), (2,6)(3,8)(4,5)(7,9), (1,4,5)(2,3,8,6,9,7), (0,1)(2,4,6,5)(3,9,8,7)]
sage: a.domain()
{0, 1, 2, 3, 4, 5, 6, 7, 8, 9}
sage: map(type, a.gens())
[<type 'sage.groups.perm_gps.permgroup_element.PermutationGroupElement'>,
 <type 'sage.groups.perm_gps.permgroup_element.PermutationGroupElement'>,
 <type 'sage.groups.perm_gps.permgroup_element.PermutationGroupElement'>,
 <type 'sage.groups.perm_gps.permgroup_element.PermutationGroupElement'>]
sage: PermutationGroupElement("(0,2)")
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-15-fa3d3058e13a> in <module>()
----> 1 PermutationGroupElement("(0,2)")

/home/dimpase/Sage/sagetrac-mirror/local/lib/python2.7/site-packages/sage/groups/perm_gps/permgroup_element.pyx in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.__init__ (build/cythonized/sage/groups/perm_gps/permgroup_element.c:5852)()
    502 
    503         degree = max([1] + [max(cycle+(1,)) for cycle in v])
--> 504         v = from_cycles(degree, v)
    505 
    506         self.__gap = 'PermList({})'.format(list(v)) # Make sure it is a list

/home/dimpase/Sage/sagetrac-mirror/local/lib/python2.7/site-packages/sage/combinat/permutation.pyc in from_cycles(n, cycles, parent)
   7041     # Only positive elements
   7042     if int(flattened_and_sorted[0]) < 1:
-> 7043         raise ValueError("All elements should be strictly positive "
   7044                          "integers, and I just found a non-positive one.")
   7045 

ValueError: All elements should be strictly positive integers, and I just found a non-positive one.
}}

CC:  @dcoudert stumpc5

Reviewer: Dima Pasechnik

Resolution: invalid

Issue created by migration from https://trac.sagemath.org/ticket/27881





---

archive/issue_comments_389921.json:
```json
{
    "body": "<a id='comment:1'></a>As the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).",
    "created_at": "2019-06-14T14:55:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27881#issuecomment-389921",
    "user": "https://github.com/embray"
}
```

<a id='comment:1'></a>As the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).



---

archive/issue_events_069129.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-10-28T03:49:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27881",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27881#event-69129"
}
```



---

archive/issue_comments_389922.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-10-28T03:49:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27881#issuecomment-389922",
    "user": "https://github.com/videlec"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_389923.json:
```json
{
    "body": "<a id='comment:3'></a>The message is",
    "created_at": "2019-10-28T03:49:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27881#issuecomment-389923",
    "user": "https://github.com/videlec"
}
```

<a id='comment:3'></a>The message is



---

archive/issue_comments_389924.json:
```json
{
    "body": "<a id='comment:4'></a>one should not edit away the error reports!",
    "created_at": "2019-10-28T06:23:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27881#issuecomment-389924",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:4'></a>one should not edit away the error reports!



---

archive/issue_comments_389925.json:
```json
{
    "body": "<a id='comment:5'></a>It was not a meaningful error report. The command `PermutationGroupElement(\"(0,2)\")` is not working (as expected). And it has nothing to do with the computation of automorphism group of graphs.",
    "created_at": "2019-10-28T12:23:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27881#issuecomment-389925",
    "user": "https://github.com/videlec"
}
```

<a id='comment:5'></a>It was not a meaningful error report. The command `PermutationGroupElement("(0,2)")` is not working (as expected). And it has nothing to do with the computation of automorphism group of graphs.



---

archive/issue_comments_389926.json:
```json
{
    "body": "<a id='comment:6'></a>there was some code, meaningful or not, that used to produce errors.\n\nare these errors fixed?",
    "created_at": "2019-10-28T12:28:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27881#issuecomment-389926",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:6'></a>there was some code, meaningful or not, that used to produce errors.

are these errors fixed?



---

archive/issue_comments_389927.json:
```json
{
    "body": "<a id='comment:7'></a>Indeed `PermutationGroupElement(\"(0,2)\")` produced and still produce an error. What do you mean by fixed? The error is intended.",
    "created_at": "2019-10-28T12:32:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27881#issuecomment-389927",
    "user": "https://github.com/videlec"
}
```

<a id='comment:7'></a>Indeed `PermutationGroupElement("(0,2)")` produced and still produce an error. What do you mean by fixed? The error is intended.



---

archive/issue_comments_389928.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-10-28T17:01:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27881#issuecomment-389928",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_389929.json:
```json
{
    "body": "<a id='comment:11'></a>OK, thanks. Sorry for noise - indeed it was not a bug.",
    "created_at": "2019-10-28T17:01:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27881#issuecomment-389929",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:11'></a>OK, thanks. Sorry for noise - indeed it was not a bug.



---

archive/issue_events_069130.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-10-29T10:45:08Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27881",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27881#event-69130"
}
```



---

archive/issue_comments_389930.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2019-10-29T10:45:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27881",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27881#issuecomment-389930",
    "user": "https://github.com/fchapoton"
}
```

Resolution: invalid
