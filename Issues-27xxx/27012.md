# Issue 27012: Add construction method to function fields

archive/issues_026775.json:
```json
{
    "body": "This ticket enhances the function field code to add a construction functor and support the `construction` method:\n\n```\nsage: K.<x> = FunctionField(QQ)\nsage: K.construction()\n(FunctionField\n Fraction Field of Univariate Polynomial Ring in x over Rational Field)\n\nsage: from sage.rings.function_field.function_field import FunctionFieldFunctor\nsage: R.<x> = QQ[]\nsage: FunctionFieldFunctor()(Frac(R))\nRational function field in x over Rational Field\n```\n\nKeywords: function field\n\nAuthor: Brent Baccala\n\nBranch: public/27012\n\nStatus: needs_work\n\nCommit: 62a80275e753308a38da35e2fbc73f2e97dadb26\n\nIssue created by migration from https://trac.sagemath.org/ticket/27012\n\n",
    "created_at": "2019-01-04T05:09:22Z",
    "labels": [
        "component: algebra",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-pending",
    "title": "Add construction method to function fields",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27012",
    "user": "https://github.com/BrentBaccala"
}
```
This ticket enhances the function field code to add a construction functor and support the `construction` method:

```
sage: K.<x> = FunctionField(QQ)
sage: K.construction()
(FunctionField
 Fraction Field of Univariate Polynomial Ring in x over Rational Field)

sage: from sage.rings.function_field.function_field import FunctionFieldFunctor
sage: R.<x> = QQ[]
sage: FunctionFieldFunctor()(Frac(R))
Rational function field in x over Rational Field
```

Keywords: function field

Author: Brent Baccala

Branch: public/27012

Status: needs_work

Commit: 62a80275e753308a38da35e2fbc73f2e97dadb26

Issue created by migration from https://trac.sagemath.org/ticket/27012





---

archive/issue_comments_400964.json:
```json
{
    "body": "<a id='comment:1'></a>New commits:",
    "created_at": "2019-01-04T05:12:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27012#issuecomment-400964",
    "user": "https://github.com/BrentBaccala"
}
```

<a id='comment:1'></a>New commits:



---

archive/issue_comments_400965.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-01-04T05:27:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27012#issuecomment-400965",
    "user": "https://github.com/BrentBaccala"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_400966.json:
```json
{
    "body": "<a id='comment:2'></a>Don't think this needs 22892 as a dependency; it seems to commit fine with `8.5` as a base.",
    "created_at": "2019-01-04T05:27:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27012#issuecomment-400966",
    "user": "https://github.com/BrentBaccala"
}
```

<a id='comment:2'></a>Don't think this needs 22892 as a dependency; it seems to commit fine with `8.5` as a base.



---

archive/issue_comments_400967.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-This ticket enhances the new function field code (Trac #22982) to add a construction functor and support the `construction` method:\n+This ticket enhances the function field code to add a construction functor and support the `construction` method:\n \n ```\n sage: K.<x> = FunctionField(QQ)\n``````\n",
    "created_at": "2019-01-04T16:29:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27012#issuecomment-400967",
    "user": "https://github.com/BrentBaccala"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-This ticket enhances the new function field code (Trac #22982) to add a construction functor and support the `construction` method:
+This ticket enhances the function field code to add a construction functor and support the `construction` method:
 
 ```
 sage: K.<x> = FunctionField(QQ)
``````




---

archive/issue_comments_400968.json:
```json
{
    "body": "<a id='comment:4'></a>I'm not sure where `FunctionFieldFunctor` should go.  Right now, it's in `function_field.py` in the `src/sage/rings/function_field` directory.\n\nPerhaps we should add a new file in that directory called `functors.py`?  There's going to be at least one more `ConstructionFunctor` in the function field code, for constructing spaces of differentials.",
    "created_at": "2019-01-04T18:24:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27012#issuecomment-400968",
    "user": "https://github.com/BrentBaccala"
}
```

<a id='comment:4'></a>I'm not sure where `FunctionFieldFunctor` should go.  Right now, it's in `function_field.py` in the `src/sage/rings/function_field` directory.

Perhaps we should add a new file in that directory called `functors.py`?  There's going to be at least one more `ConstructionFunctor` in the function field code, for constructing spaces of differentials.



---

archive/issue_comments_400969.json:
```json
{
    "body": "<a id='comment:5'></a>While your patch looks sensible to me, that's not how things currently work for number fields. Instead, number fields are constructed directly from their base field by an `AlgebraicConstructionFunctor`. Can you explain why you are deviating from that model? (This may be a stupid question, I basically don't know anything about function fields.) And if your approach is better, should we use it from number fields too?\n\nAlso, you may want to add a couple of example of new coercions discovered thanks to the new construction, if there are any.",
    "created_at": "2019-01-07T13:28:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27012#issuecomment-400969",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:5'></a>While your patch looks sensible to me, that's not how things currently work for number fields. Instead, number fields are constructed directly from their base field by an `AlgebraicConstructionFunctor`. Can you explain why you are deviating from that model? (This may be a stupid question, I basically don't know anything about function fields.) And if your approach is better, should we use it from number fields too?

Also, you may want to add a couple of example of new coercions discovered thanks to the new construction, if there are any.



---

archive/issue_comments_400970.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [comment:5 mmezzarobba]:\n> While your patch looks sensible to me, that's not how things currently work for number fields. Instead, number fields are constructed directly from their base field by an `AlgebraicConstructionFunctor`. Can you explain why you are deviating from that model? (This may be a stupid question, I basically don't know anything about function fields.) And if your approach is better, should we use it from number fields too?\n\n\nI don't know if it's any better this way.\n\n> Also, you may want to add a couple of example of new coercions discovered thanks to the new construction, if there are any.\n\n\nWell, the coercions I wanted it to discover, it couldn't, so I ended up coding them by hand (Trac #26993).  I created this ticket because I didn't want to just throw this code away, but I don't know if it does anything useful.",
    "created_at": "2019-01-09T04:57:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27012#issuecomment-400970",
    "user": "https://github.com/BrentBaccala"
}
```

<a id='comment:6'></a>Replying to [comment:5 mmezzarobba]:
> While your patch looks sensible to me, that's not how things currently work for number fields. Instead, number fields are constructed directly from their base field by an `AlgebraicConstructionFunctor`. Can you explain why you are deviating from that model? (This may be a stupid question, I basically don't know anything about function fields.) And if your approach is better, should we use it from number fields too?


I don't know if it's any better this way.

> Also, you may want to add a couple of example of new coercions discovered thanks to the new construction, if there are any.


Well, the coercions I wanted it to discover, it couldn't, so I ended up coding them by hand (Trac #26993).  I created this ticket because I didn't want to just throw this code away, but I don't know if it does anything useful.



---

archive/issue_events_067046.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-01-15T18:15:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27012",
    "milestone": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27012#event-67046"
}
```



---

archive/issue_comments_400971.json:
```json
{
    "body": "<a id='comment:7'></a>Retarging tickets optimistically to the next milestone.  If you are responsible for this ticket (either its reporter or owner) and don't believe you are likely to complete this ticket before the next release (8.7) please retarget this ticket's milestone to sage-pending or sage-wishlist.",
    "created_at": "2019-01-15T18:15:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27012#issuecomment-400971",
    "user": "https://github.com/embray"
}
```

<a id='comment:7'></a>Retarging tickets optimistically to the next milestone.  If you are responsible for this ticket (either its reporter or owner) and don't believe you are likely to complete this ticket before the next release (8.7) please retarget this ticket's milestone to sage-pending or sage-wishlist.



---

archive/issue_events_067047.json:
```json
{
    "actor": "https://github.com/BrentBaccala",
    "created_at": "2019-01-17T21:36:32Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27012",
    "milestone": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27012#event-67047"
}
```



---

archive/issue_events_067048.json:
```json
{
    "actor": "https://github.com/BrentBaccala",
    "created_at": "2019-01-17T21:36:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27012",
    "milestone": "sage-pending",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27012#event-67048"
}
```



---

archive/issue_comments_400972.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-01-17T21:36:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27012#issuecomment-400972",
    "user": "https://github.com/BrentBaccala"
}
```

Changing status from needs_review to needs_work.
