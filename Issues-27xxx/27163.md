# Issue 27163: R has no graphics abilities on Debian buster

archive/issues_026926.json:
```json
{
    "assignees": [],
    "body": "Seen in 8.7.beta1, but probably from 8.6 (i. e. the switch to using th library):\n\n```\n> capabilities()\n       jpeg         png        tiff       tcltk         X11        aqua \n      FALSE       FALSE       FALSE        TRUE       FALSE       FALSE \n   http/ftp     sockets      libxml        fifo      cledit       iconv \n       TRUE        TRUE        TRUE        TRUE        TRUE        TRUE \n        NLS     profmem       cairo         ICU long.double     libcurl \n       TRUE       FALSE       FALSE        TRUE        TRUE        TRUE \n```\n\nSimilarly, one can't install the R package \"Cairo\". This entails the loss of creating graphics files from R, which is exceedingly annoying...\n\nOne of the strengths of R being its graphical abilities, losing them is, IMNSHO, a critical problem.\n\nCC:  @timokau @dimpase @embray @slel\n\nComponent: **packages: standard**\n\nReviewer: **Emmanuel Charpentier**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/27163_\n\n",
    "closed_at": "2019-02-26T13:58:00Z",
    "created_at": "2019-01-29T09:54:11Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/invalid"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "R has no graphics abilities on Debian buster",
    "type": "issue",
    "updated_at": "2019-02-26T13:58:00Z",
    "url": "https://github.com/sagemath/sage/issues/27163",
    "user": "https://github.com/EmmanuelCharpentier"
}
```
Seen in 8.7.beta1, but probably from 8.6 (i. e. the switch to using th library):

```
> capabilities()
       jpeg         png        tiff       tcltk         X11        aqua 
      FALSE       FALSE       FALSE        TRUE       FALSE       FALSE 
   http/ftp     sockets      libxml        fifo      cledit       iconv 
       TRUE        TRUE        TRUE        TRUE        TRUE        TRUE 
        NLS     profmem       cairo         ICU long.double     libcurl 
       TRUE       FALSE       FALSE        TRUE        TRUE        TRUE 
```

Similarly, one can't install the R package "Cairo". This entails the loss of creating graphics files from R, which is exceedingly annoying...

One of the strengths of R being its graphical abilities, losing them is, IMNSHO, a critical problem.

CC:  @timokau @dimpase @embray @slel

Component: **packages: standard**

Reviewer: **Emmanuel Charpentier**

_Issue created by migration from https://trac.sagemath.org/ticket/27163_





---

archive/issue_events_370284.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2019-01-29T09:54:11Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27163#event-370284"
}
```



---

archive/issue_events_370285.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2019-01-29T09:54:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "0000b0",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27163#event-370285"
}
```



---

archive/issue_events_370286.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2019-01-29T09:54:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
    "label_color": "ff7700",
    "label_name": "p: critical / 2",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27163#event-370286"
}
```



---

archive/issue_events_370287.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2019-01-29T09:54:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27163#event-370287"
}
```



---

archive/issue_comments_419145.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nWhat exactly is meant by `can't install the R package \"Cairo\"`?",
    "created_at": "2019-01-29T10:04:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27163#issuecomment-419145",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:1" align="right">comment:1</div>

What exactly is meant by `can't install the R package "Cairo"`?



---

archive/issue_comments_419146.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nLook for yourself :\n\n```\ncharpent@p-202-021:~$ sage -R\n\nR version 3.4.4 (2018-03-15) -- \"Someone to Lean On\"\n\n[ Snip... ]\n\n[Sauvegarde de la session pr\u00e9c\u00e9dente restaur\u00e9e]\n\n> install.packages(\"Cairo\")\n--- SVP s\u00e9lectionner un miroir CRAN pour cette session ---\n\n[ re-Snip... ]\n\nSelection: 32\nessai de l'URL 'https://cran.univ-paris1.fr/src/contrib/Cairo_1.5-9.tar.gz'\nContent type 'application/x-gzip' length 86982 bytes (84 KB)\n==================================================\ndownloaded 84 KB\n\n* installing *source* package \u2018Cairo\u2019 ...\n** package \u2018Cairo\u2019 correctement d\u00e9compress\u00e9 et sommes MD5 v\u00e9rifi\u00e9es\nchecking for gcc... gcc\nchecking whether the C compiler works... yes\nchecking for C compiler default output file name... a.out\nchecking for suffix of executables... \nchecking whether we are cross compiling... no\nchecking for suffix of object files... o\nchecking whether we are using the GNU C compiler... yes\nchecking whether gcc accepts -g... yes\nchecking for gcc option to accept ISO C89... none needed\nchecking how to run the C preprocessor... gcc -E\nchecking for grep that handles long lines and -e... /bin/grep\nchecking for egrep... /bin/grep -E\nchecking for ANSI C header files... yes\nchecking for sys/wait.h that is POSIX.1 compatible... yes\nchecking for sys/types.h... yes\nchecking for sys/stat.h... yes\nchecking for stdlib.h... yes\nchecking for string.h... yes\nchecking for memory.h... yes\nchecking for strings.h... yes\nchecking for inttypes.h... yes\nchecking for stdint.h... yes\nchecking for unistd.h... yes\nchecking for string.h... (cached) yes\nchecking sys/time.h usability... yes\nchecking sys/time.h presence... yes\nchecking for sys/time.h... yes\nchecking for unistd.h... (cached) yes\nchecking for an ANSI C-conforming const... yes\nchecking for pkg-config... /usr/local/sage-8/local/bin/pkg-config\nchecking whether pkg-config knows about cairo... yes\nchecking for configurable backends... cairo cairo-ft cairo-pdf cairo-png cairo-ps cairo-xlib cairo-xlib-xrender\nconfigure: CAIRO_CFLAGS=-I/usr/local/sage-8/local/include -I/usr/local/sage-8/local/include/freetype2 -I/usr/local/sage-8/local/include -I/usr/local/sage-8/local/include/libpng16 -I/usr/include/cairo -I/usr/include/glib-2.0 -I/usr/lib/x86_64-linux-gnu/glib-2.0/include -I/usr/include/pixman-1 -I/usr/include/uuid\nchecking if R was compiled with the RConn patch... no\nchecking cairo.h usability... yes\nchecking cairo.h presence... yes\nchecking for cairo.h... yes\nchecking for PNG support in Cairo... yes\nchecking for ATS font support in Cairo... no\nconfigure: CAIRO_LIBS=-L/usr/local/sage-8/local/lib -lfreetype -lz -lpng16 -lz -lcairo -lXext -lXrender -lX11\nchecking for library containing deflate... no\nchecking whether Cairo programs can be compiled... configure: error: Cannot compile a simple Cairo program. See config.log for details.\nERROR: configuration failed for package \u2018Cairo\u2019\n* removing \u2018/usr/local/sage-8/local/lib/R/library/Cairo\u2019\n\nLes packages source t\u00e9l\u00e9charg\u00e9s sont dans\n\t\u2018/tmp/RtmphJPGGK/downloaded_packages\u2019\nWarning messages:\n1: In doTryCatch(return(expr), name, parentenv, handler) :\n  impossible de charger l'objet partag\u00e9 '/usr/local/sage-8/local/lib/R//modules//R_X11.so':\n  /usr/lib/x86_64-linux-gnu/libcairo.so.2: undefined symbol: FT_Done_MM_Var\n2: In install.packages(\"Cairo\") :\n  l'installation du package \u2018Cairo\u2019 a eu un statut de sortie non nul\n> \n```\n\nNote that R tries to use the system's cairo libraries...",
    "created_at": "2019-01-29T10:21:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27163#issuecomment-419146",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:2" align="right">comment:2</div>

Look for yourself :

```
charpent@p-202-021:~$ sage -R

R version 3.4.4 (2018-03-15) -- "Someone to Lean On"

[ Snip... ]

[Sauvegarde de la session précédente restaurée]

> install.packages("Cairo")
--- SVP sélectionner un miroir CRAN pour cette session ---

[ re-Snip... ]

Selection: 32
essai de l'URL 'https://cran.univ-paris1.fr/src/contrib/Cairo_1.5-9.tar.gz'
Content type 'application/x-gzip' length 86982 bytes (84 KB)
==================================================
downloaded 84 KB

* installing *source* package ‘Cairo’ ...
** package ‘Cairo’ correctement décompressé et sommes MD5 vérifiées
checking for gcc... gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking how to run the C preprocessor... gcc -E
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for ANSI C header files... yes
checking for sys/wait.h that is POSIX.1 compatible... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking for string.h... (cached) yes
checking sys/time.h usability... yes
checking sys/time.h presence... yes
checking for sys/time.h... yes
checking for unistd.h... (cached) yes
checking for an ANSI C-conforming const... yes
checking for pkg-config... /usr/local/sage-8/local/bin/pkg-config
checking whether pkg-config knows about cairo... yes
checking for configurable backends... cairo cairo-ft cairo-pdf cairo-png cairo-ps cairo-xlib cairo-xlib-xrender
configure: CAIRO_CFLAGS=-I/usr/local/sage-8/local/include -I/usr/local/sage-8/local/include/freetype2 -I/usr/local/sage-8/local/include -I/usr/local/sage-8/local/include/libpng16 -I/usr/include/cairo -I/usr/include/glib-2.0 -I/usr/lib/x86_64-linux-gnu/glib-2.0/include -I/usr/include/pixman-1 -I/usr/include/uuid
checking if R was compiled with the RConn patch... no
checking cairo.h usability... yes
checking cairo.h presence... yes
checking for cairo.h... yes
checking for PNG support in Cairo... yes
checking for ATS font support in Cairo... no
configure: CAIRO_LIBS=-L/usr/local/sage-8/local/lib -lfreetype -lz -lpng16 -lz -lcairo -lXext -lXrender -lX11
checking for library containing deflate... no
checking whether Cairo programs can be compiled... configure: error: Cannot compile a simple Cairo program. See config.log for details.
ERROR: configuration failed for package ‘Cairo’
* removing ‘/usr/local/sage-8/local/lib/R/library/Cairo’

Les packages source téléchargés sont dans
	‘/tmp/RtmphJPGGK/downloaded_packages’
Warning messages:
1: In doTryCatch(return(expr), name, parentenv, handler) :
  impossible de charger l'objet partagé '/usr/local/sage-8/local/lib/R//modules//R_X11.so':
  /usr/lib/x86_64-linux-gnu/libcairo.so.2: undefined symbol: FT_Done_MM_Var
2: In install.packages("Cairo") :
  l'installation du package ‘Cairo’ a eu un statut de sortie non nul
> 
```

Note that R tries to use the system's cairo libraries...



---

archive/issue_comments_419147.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nIt all works for me on a Debian stretch system after `apt install libcairo-dev`.\n(without it, Sage's R cannot even find `cairo.h` header).",
    "created_at": "2019-01-29T10:38:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27163#issuecomment-419147",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:3" align="right">comment:3</div>

It all works for me on a Debian stretch system after `apt install libcairo-dev`.
(without it, Sage's R cannot even find `cairo.h` header).



---

archive/issue_events_370288.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-01-29T10:38:27Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27163#event-370288"
}
```



---

archive/issue_events_370289.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-01-29T10:38:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27163#event-370289"
}
```



---

archive/issue_comments_419148.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThere is of course no telling in general whether your cairo installation is compatible with Sage's R, I guess this problem was always there, it's just that you finally hit this incompatibility.",
    "created_at": "2019-01-29T10:40:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27163#issuecomment-419148",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:4" align="right">comment:4</div>

There is of course no telling in general whether your cairo installation is compatible with Sage's R, I guess this problem was always there, it's just that you finally hit this incompatibility.



---

archive/issue_comments_419149.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI am inclined to close this as worksforme. I think the best way to proceed is to add capability to use system R installation, via adding appropriate `spkg-configure.m4` to `build/pkgs/r`.",
    "created_at": "2019-01-29T10:42:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27163#issuecomment-419149",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:5" align="right">comment:5</div>

I am inclined to close this as worksforme. I think the best way to proceed is to add capability to use system R installation, via adding appropriate `spkg-configure.m4` to `build/pkgs/r`.



---

archive/issue_comments_419150.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@dimpase](#comment%3A5):\n> I am inclined to close this as worksforme. I think the best way to proceed is to add capability to use system R installation, via adding appropriate `spkg-configure.m4` to `build/pkgs/r`.\n\nI disagree :\n\n* I had trouble getting R graphics capabilities when I started using Sage's R, about 5 years ago (?). After installatin of the relevant (system) libraries, I didn't have this problem.\n\n* The problem isn't specifi to Cairo : ***ALL*** graphics capabilities are missing...\n\n* in my system :\n\n```\ncharpent@p-202-021:~$ apt-get install -s libcairo-dev\nNOTE: Ceci n'est qu'une simulation\u00a0!\n      apt-get a besoin des privil\u00e8ges du superutilisateur\n      pour pouvoir vraiment fonctionner.\n      Veuillez aussi noter que le verrouillage est d\u00e9sactiv\u00e9,\n      et la situation n'est donc pas forc\u00e9ment repr\u00e9sentative\n      de la r\u00e9alit\u00e9\u00a0!\nLecture des listes de paquets... Fait\nConstruction de l'arbre des d\u00e9pendances       \nLecture des informations d'\u00e9tat... Fait\nNote\u00a0: s\u00e9lection de \u00ab\u00a0libcairo2-dev\u00a0\u00bb au lieu de \u00ab\u00a0libcairo-dev\u00a0\u00bb\nlibcairo2-dev est d\u00e9j\u00e0 la version la plus r\u00e9cente (1.16.0-2).\n0 mis \u00e0 jour, 0 nouvellement install\u00e9s, 0 \u00e0 enlever et 0 non mis \u00e0 jour.\n```\n\nSomething *else* has changed... Maybe because I'm running `buster` (i. e. `testing`) rather than `stretch` (i. e. `stable`) ?\n\nISTR that Erik Madison Bray once had a proposal to use system's R as the Sage R interpreter. I'd be interested in knowing more...",
    "created_at": "2019-01-29T10:49:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27163#issuecomment-419150",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@dimpase](#comment%3A5):
> I am inclined to close this as worksforme. I think the best way to proceed is to add capability to use system R installation, via adding appropriate `spkg-configure.m4` to `build/pkgs/r`.

I disagree :

* I had trouble getting R graphics capabilities when I started using Sage's R, about 5 years ago (?). After installatin of the relevant (system) libraries, I didn't have this problem.

* The problem isn't specifi to Cairo : ***ALL*** graphics capabilities are missing...

* in my system :

```
charpent@p-202-021:~$ apt-get install -s libcairo-dev
NOTE: Ceci n'est qu'une simulation !
      apt-get a besoin des privilèges du superutilisateur
      pour pouvoir vraiment fonctionner.
      Veuillez aussi noter que le verrouillage est désactivé,
      et la situation n'est donc pas forcément représentative
      de la réalité !
Lecture des listes de paquets... Fait
Construction de l'arbre des dépendances       
Lecture des informations d'état... Fait
Note : sélection de « libcairo2-dev » au lieu de « libcairo-dev »
libcairo2-dev est déjà la version la plus récente (1.16.0-2).
0 mis à jour, 0 nouvellement installés, 0 à enlever et 0 non mis à jour.
```

Something *else* has changed... Maybe because I'm running `buster` (i. e. `testing`) rather than `stretch` (i. e. `stable`) ?

ISTR that Erik Madison Bray once had a proposal to use system's R as the Sage R interpreter. I'd be interested in knowing more...



---

archive/issue_comments_419151.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nzhe ne kompran pa your error messages :-)\n\nNaturally all bets are off for a testing distro. You might try installing system's R ans check whether you get Cairo there.",
    "created_at": "2019-01-29T11:09:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27163#issuecomment-419151",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:7" align="right">comment:7</div>

zhe ne kompran pa your error messages :-)

Naturally all bets are off for a testing distro. You might try installing system's R ans check whether you get Cairo there.



---

archive/issue_comments_419152.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@dimpase](#comment%3A7):\n> zhe ne kompran pa your error messages :-)\n\nMy systems has fr_FR.UTF8 locale...\n\n> Naturally all bets are off for a testing distro.\n\nI am aware of very few people running `stable` on a desktop. `testing` is usually the right compromise.\n\n(Of course, on a server, `stable` is probably *de rigueur* ;-).\n\nAnd since `testing` is the next `stable` (trnsition underway), I don't think that detecting a problem on it is irrelevant to Sage...\n\n> You might try installing system's R\n\nDone since about 21 years (R is my professional bread and butter, replacing SAS), and religiously maintained (following Debian's packaging).\n\n> ans check whether you get Cairo there.\n\nI do :\n\n```\ncharpent@p-202-021:~$ R\n\nR version 3.5.2 (2018-12-20) -- \"Eggshell Igloo\"\nCopyright (C) 2018 The R Foundation for Statistical Computing\nPlatform: x86_64-pc-linux-gnu (64-bit)\n\nR est un logiciel libre livr\u00e9 sans AUCUNE GARANTIE.\nVous pouvez le redistribuer sous certaines conditions.\nTapez 'license()' ou 'licence()' pour plus de d\u00e9tails.\n\nR est un projet collaboratif avec de nombreux contributeurs.\nTapez 'contributors()' pour plus d'information et\n'citation()' pour la fa\u00e7on de le citer dans les publications.\n\nTapez 'demo()' pour des d\u00e9monstrations, 'help()' pour l'aide\nen ligne ou 'help.start()' pour obtenir l'aide au format HTML.\nTapez 'q()' pour quitter R.\n\n[Sauvegarde de la session pr\u00e9c\u00e9dente restaur\u00e9e]\n\n> \"Cairo\" %in% row.names(installed.packages())\n[1] TRUE\n> \n```\n\nI'm maintaining Sage's R installation because :\n\n* I want to be able to \"lighten up\" my setup someday and getting rid of system's R installation (about 500 packages, ising about 1.7 Gb for its library).\n\n* And also to keep it up-to-date for Sage users who need it occasionally without having to maintain a system installation. \n\nBTW : the \"Cairo\" issue blocks a couple of R packages that depend on it. And the lack of **any** graphical ability is much more preoccupying...",
    "created_at": "2019-01-29T11:30:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27163#issuecomment-419152",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@dimpase](#comment%3A7):
> zhe ne kompran pa your error messages :-)

My systems has fr_FR.UTF8 locale...

> Naturally all bets are off for a testing distro.

I am aware of very few people running `stable` on a desktop. `testing` is usually the right compromise.

(Of course, on a server, `stable` is probably *de rigueur* ;-).

And since `testing` is the next `stable` (trnsition underway), I don't think that detecting a problem on it is irrelevant to Sage...

> You might try installing system's R

Done since about 21 years (R is my professional bread and butter, replacing SAS), and religiously maintained (following Debian's packaging).

> ans check whether you get Cairo there.

I do :

```
charpent@p-202-021:~$ R

R version 3.5.2 (2018-12-20) -- "Eggshell Igloo"
Copyright (C) 2018 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu (64-bit)

R est un logiciel libre livré sans AUCUNE GARANTIE.
Vous pouvez le redistribuer sous certaines conditions.
Tapez 'license()' ou 'licence()' pour plus de détails.

R est un projet collaboratif avec de nombreux contributeurs.
Tapez 'contributors()' pour plus d'information et
'citation()' pour la façon de le citer dans les publications.

Tapez 'demo()' pour des démonstrations, 'help()' pour l'aide
en ligne ou 'help.start()' pour obtenir l'aide au format HTML.
Tapez 'q()' pour quitter R.

[Sauvegarde de la session précédente restaurée]

> "Cairo" %in% row.names(installed.packages())
[1] TRUE
> 
```

I'm maintaining Sage's R installation because :

* I want to be able to "lighten up" my setup someday and getting rid of system's R installation (about 500 packages, ising about 1.7 Gb for its library).

* And also to keep it up-to-date for Sage users who need it occasionally without having to maintain a system installation. 

BTW : the "Cairo" issue blocks a couple of R packages that depend on it. And the lack of **any** graphical ability is much more preoccupying...



---

archive/issue_comments_419153.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI stand by my statement that this *needs* fixing.",
    "created_at": "2019-01-29T11:33:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27163#issuecomment-419153",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:9" align="right">comment:9</div>

I stand by my statement that this *needs* fixing.



---

archive/issue_events_370290.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2019-01-29T11:33:29Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27163#event-370290"
}
```



---

archive/issue_events_370291.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2019-01-29T11:33:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27163#event-370291"
}
```



---

archive/issue_events_370292.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2019-01-29T11:33:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27163#event-370292"
}
```



---

archive/issue_events_370293.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-01-29T11:35:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27163#event-370293"
}
```



---

archive/issue_comments_419154.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nSo a quick solution would be  to upgrade Sage's R to 3.5.2 and pray that such an upgrade won't break things on, say, debian stable (which I am running in a container on a ChromeOS laptop, not on a server :-))",
    "created_at": "2019-01-29T11:35:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27163#issuecomment-419154",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:10" align="right">comment:10</div>

So a quick solution would be  to upgrade Sage's R to 3.5.2 and pray that such an upgrade won't break things on, say, debian stable (which I am running in a container on a ChromeOS laptop, not on a server :-))



---

archive/issue_comments_419155.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI'm pretty sure this has nothing to do with my recent change in the `R` interface. `sage -R` doesn't actually have much (if anything) to do with sage. It just starts the version of R that sage uses. That wasn't touched by my changes.\n\nIf you're sure the issue is new and was introduced by some sage update, maybe try `git-bisect`.",
    "created_at": "2019-01-29T11:58:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27163#issuecomment-419155",
    "user": "https://github.com/timokau"
}
```

<div id="comment:11" align="right">comment:11</div>

I'm pretty sure this has nothing to do with my recent change in the `R` interface. `sage -R` doesn't actually have much (if anything) to do with sage. It just starts the version of R that sage uses. That wasn't touched by my changes.

If you're sure the issue is new and was introduced by some sage update, maybe try `git-bisect`.



---

archive/issue_comments_419156.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\n#25674 will fix it - this is libraries incompatibility, nothing to do with rpy2.",
    "created_at": "2019-01-29T12:40:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27163#issuecomment-419156",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:12" align="right">comment:12</div>

#25674 will fix it - this is libraries incompatibility, nothing to do with rpy2.



---

archive/issue_comments_419157.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nPlease review #25674 - I checked that installing Cairo still works on Debian stretch, please check whether this fixes graphics problems on Debian buster.",
    "created_at": "2019-01-29T12:48:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27163#issuecomment-419157",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:13" align="right">comment:13</div>

Please review #25674 - I checked that installing Cairo still works on Debian stretch, please check whether this fixes graphics problems on Debian buster.



---

archive/issue_comments_419158.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@dimpase](#comment%3A13):\n> Please review #25674 - I checked that installing Cairo still works on Debian stretch,\n\nDid you chheck that you had graphics `capabilities()` ?\n\n> please check whether this fixes graphics problems on Debian buster.\n\nUnderway...",
    "created_at": "2019-01-29T13:02:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27163#issuecomment-419158",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@dimpase](#comment%3A13):
> Please review #25674 - I checked that installing Cairo still works on Debian stretch,

Did you chheck that you had graphics `capabilities()` ?

> please check whether this fixes graphics problems on Debian buster.

Underway...



---

archive/issue_comments_419159.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nI get, after installing Cairo,\n\n```\n> capabilities()\n       jpeg         png        tiff       tcltk         X11        aqua \n      FALSE        TRUE       FALSE       FALSE        TRUE       FALSE \n   http/ftp     sockets      libxml        fifo      cledit       iconv \n       TRUE        TRUE        TRUE        TRUE        TRUE        TRUE \n        NLS     profmem       cairo         ICU long.double     libcurl \n       TRUE       FALSE        TRUE       FALSE        TRUE        TRUE \n```\nIt looks good enough to me.",
    "created_at": "2019-01-29T13:35:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27163#issuecomment-419159",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:15" align="right">comment:15</div>

I get, after installing Cairo,

```
> capabilities()
       jpeg         png        tiff       tcltk         X11        aqua 
      FALSE        TRUE       FALSE       FALSE        TRUE       FALSE 
   http/ftp     sockets      libxml        fifo      cledit       iconv 
       TRUE        TRUE        TRUE        TRUE        TRUE        TRUE 
        NLS     profmem       cairo         ICU long.double     libcurl 
       TRUE       FALSE        TRUE       FALSE        TRUE        TRUE 
```
It looks good enough to me.



---

archive/issue_comments_419160.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@dimpase](#comment%3A15):\n> I get, after installing Cairo,\n> \n> ```\n> > capabilities()\n>        jpeg         png        tiff       tcltk         X11        aqua \n>       FALSE        TRUE       FALSE       FALSE        TRUE       FALSE \n>    http/ftp     sockets      libxml        fifo      cledit       iconv \n>        TRUE        TRUE        TRUE        TRUE        TRUE        TRUE \n>         NLS     profmem       cairo         ICU long.double     libcurl \n>        TRUE       FALSE        TRUE       FALSE        TRUE        TRUE \n> ```\n> It looks good enough to me.\n\n`png()` is essential and here, ditto for `cairo()` ; `tiff()` is sometimes necessary to fulfill (exceedingly) retro desiderata of some medical journals' instructions to authors, and `jpeg()` is handy for some HTML tools who dislike `png()` for some unreasonable reason.\n\nSo, yes, that's good enough, *if* I can get that under `buster`.\n\nBuild still underway on another `buster` machine (merging develop and #25674).",
    "created_at": "2019-01-29T13:46:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27163#issuecomment-419160",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@dimpase](#comment%3A15):
> I get, after installing Cairo,
> 
> ```
> > capabilities()
>        jpeg         png        tiff       tcltk         X11        aqua 
>       FALSE        TRUE       FALSE       FALSE        TRUE       FALSE 
>    http/ftp     sockets      libxml        fifo      cledit       iconv 
>        TRUE        TRUE        TRUE        TRUE        TRUE        TRUE 
>         NLS     profmem       cairo         ICU long.double     libcurl 
>        TRUE       FALSE        TRUE       FALSE        TRUE        TRUE 
> ```
> It looks good enough to me.

`png()` is essential and here, ditto for `cairo()` ; `tiff()` is sometimes necessary to fulfill (exceedingly) retro desiderata of some medical journals' instructions to authors, and `jpeg()` is handy for some HTML tools who dislike `png()` for some unreasonable reason.

So, yes, that's good enough, *if* I can get that under `buster`.

Build still underway on another `buster` machine (merging develop and #25674).



---

archive/issue_comments_419161.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@dimpase](#comment%3A15):\n> I get, after installing Cairo,\n> \n> ```\n> > capabilities()\n>        jpeg         png        tiff       tcltk         X11        aqua \n>       FALSE        TRUE       FALSE       FALSE        TRUE       FALSE \n>    http/ftp     sockets      libxml        fifo      cledit       iconv \n>        TRUE        TRUE        TRUE        TRUE        TRUE        TRUE \n>         NLS     profmem       cairo         ICU long.double     libcurl \n>        TRUE       FALSE        TRUE       FALSE        TRUE        TRUE \n> ```\n> It looks good enough to me.\n\nNo such luck on buster. After getting #25674 and merging `develop`, I get :\n\n```\ncharpent@zen-book-flip:/usr/local/sage-8$ sage -R\n\nR version 3.5.2 (2018-12-20) -- \"Eggshell Igloo\"\nCopyright (C) 2018 The R Foundation for Statistical Computing\nPlatform: x86_64-pc-linux-gnu (64-bit)\n\nR est un logiciel libre livr\u00e9 sans AUCUNE GARANTIE.\nVous pouvez le redistribuer sous certaines conditions.\nTapez 'license()' ou 'licence()' pour plus de d\u00e9tails.\n\nR est un projet collaboratif avec de nombreux contributeurs.\nTapez 'contributors()' pour plus d'information et\n'citation()' pour la fa\u00e7on de le citer dans les publications.\n\nTapez 'demo()' pour des d\u00e9monstrations, 'help()' pour l'aide\nen ligne ou 'help.start()' pour obtenir l'aide au format HTML.\nTapez 'q()' pour quitter R.\n\n> capabilities()\n       jpeg         png        tiff       tcltk         X11        aqua \n      FALSE       FALSE       FALSE        TRUE       FALSE       FALSE \n   http/ftp     sockets      libxml        fifo      cledit       iconv \n       TRUE        TRUE        TRUE        TRUE        TRUE        TRUE \n        NLS     profmem       cairo         ICU long.double     libcurl \n       TRUE       FALSE       FALSE        TRUE        TRUE        TRUE \nWarning message:\nIn doTryCatch(return(expr), name, parentenv, handler) :\n  impossible de charger l'objet partag\u00e9 '/usr/local/sage-8/local/lib/R//modules//R_X11.so':\n  /usr/lib/x86_64-linux-gnu/libcairo.so.2: undefined symbol: FT_Done_MM_Var\n> \n```\n\nFor comparison, on the same machine, nut using system's R:\n\n```\ncharpent@zen-book-flip:/usr/local/sage-8$ R\n\nR version 3.5.2 (2018-12-20) -- \"Eggshell Igloo\"\nCopyright (C) 2018 The R Foundation for Statistical Computing\nPlatform: x86_64-pc-linux-gnu (64-bit)\n\nR est un logiciel libre livr\u00e9 sans AUCUNE GARANTIE.\nVous pouvez le redistribuer sous certaines conditions.\nTapez 'license()' ou 'licence()' pour plus de d\u00e9tails.\n\nR est un projet collaboratif avec de nombreux contributeurs.\nTapez 'contributors()' pour plus d'information et\n'citation()' pour la fa\u00e7on de le citer dans les publications.\n\nTapez 'demo()' pour des d\u00e9monstrations, 'help()' pour l'aide\nen ligne ou 'help.start()' pour obtenir l'aide au format HTML.\nTapez 'q()' pour quitter R.\n\n> capabilities()\n       jpeg         png        tiff       tcltk         X11        aqua \n       TRUE        TRUE        TRUE        TRUE        TRUE       FALSE \n   http/ftp     sockets      libxml        fifo      cledit       iconv \n       TRUE        TRUE        TRUE        TRUE        TRUE        TRUE \n        NLS     profmem       cairo         ICU long.double     libcurl \n       TRUE        TRUE        TRUE        TRUE        TRUE        TRUE \n> \n```\n\nTherefore, I think that this is a distinct issue.",
    "created_at": "2019-01-29T13:53:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27163#issuecomment-419161",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@dimpase](#comment%3A15):
> I get, after installing Cairo,
> 
> ```
> > capabilities()
>        jpeg         png        tiff       tcltk         X11        aqua 
>       FALSE        TRUE       FALSE       FALSE        TRUE       FALSE 
>    http/ftp     sockets      libxml        fifo      cledit       iconv 
>        TRUE        TRUE        TRUE        TRUE        TRUE        TRUE 
>         NLS     profmem       cairo         ICU long.double     libcurl 
>        TRUE       FALSE        TRUE       FALSE        TRUE        TRUE 
> ```
> It looks good enough to me.

No such luck on buster. After getting #25674 and merging `develop`, I get :

```
charpent@zen-book-flip:/usr/local/sage-8$ sage -R

R version 3.5.2 (2018-12-20) -- "Eggshell Igloo"
Copyright (C) 2018 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu (64-bit)

R est un logiciel libre livré sans AUCUNE GARANTIE.
Vous pouvez le redistribuer sous certaines conditions.
Tapez 'license()' ou 'licence()' pour plus de détails.

R est un projet collaboratif avec de nombreux contributeurs.
Tapez 'contributors()' pour plus d'information et
'citation()' pour la façon de le citer dans les publications.

Tapez 'demo()' pour des démonstrations, 'help()' pour l'aide
en ligne ou 'help.start()' pour obtenir l'aide au format HTML.
Tapez 'q()' pour quitter R.

> capabilities()
       jpeg         png        tiff       tcltk         X11        aqua 
      FALSE       FALSE       FALSE        TRUE       FALSE       FALSE 
   http/ftp     sockets      libxml        fifo      cledit       iconv 
       TRUE        TRUE        TRUE        TRUE        TRUE        TRUE 
        NLS     profmem       cairo         ICU long.double     libcurl 
       TRUE       FALSE       FALSE        TRUE        TRUE        TRUE 
Warning message:
In doTryCatch(return(expr), name, parentenv, handler) :
  impossible de charger l'objet partagé '/usr/local/sage-8/local/lib/R//modules//R_X11.so':
  /usr/lib/x86_64-linux-gnu/libcairo.so.2: undefined symbol: FT_Done_MM_Var
> 
```

For comparison, on the same machine, nut using system's R:

```
charpent@zen-book-flip:/usr/local/sage-8$ R

R version 3.5.2 (2018-12-20) -- "Eggshell Igloo"
Copyright (C) 2018 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu (64-bit)

R est un logiciel libre livré sans AUCUNE GARANTIE.
Vous pouvez le redistribuer sous certaines conditions.
Tapez 'license()' ou 'licence()' pour plus de détails.

R est un projet collaboratif avec de nombreux contributeurs.
Tapez 'contributors()' pour plus d'information et
'citation()' pour la façon de le citer dans les publications.

Tapez 'demo()' pour des démonstrations, 'help()' pour l'aide
en ligne ou 'help.start()' pour obtenir l'aide au format HTML.
Tapez 'q()' pour quitter R.

> capabilities()
       jpeg         png        tiff       tcltk         X11        aqua 
       TRUE        TRUE        TRUE        TRUE        TRUE       FALSE 
   http/ftp     sockets      libxml        fifo      cledit       iconv 
       TRUE        TRUE        TRUE        TRUE        TRUE        TRUE 
        NLS     profmem       cairo         ICU long.double     libcurl 
       TRUE        TRUE        TRUE        TRUE        TRUE        TRUE 
> 
```

Therefore, I think that this is a distinct issue.



---

archive/issue_comments_419162.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nHave you tried reinstalling Cairo into Sage's R?",
    "created_at": "2019-01-29T13:57:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27163#issuecomment-419162",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:18" align="right">comment:18</div>

Have you tried reinstalling Cairo into Sage's R?



---

archive/issue_comments_419163.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@dimpase](#comment%3A18):\n> Have you tried reinstalling Cairo into Sage's R?\n\nNo such bloody luck:\n\n```\n> install.packages(\"Cairo\")\n--- SVP s\u00e9lectionner un miroir CRAN pour cette session ---\nSecure CRAN mirrors \n\n 1: 0-Cloud [https]                   2: Algeria [https]                \n 3: Australia (Canberra) [https]      4: Australia (Melbourne 1) [https]\n 5: Australia (Melbourne 2) [https]   6: Australia (Perth) [https]      \n 7: Austria [https]                   8: Belgium (Ghent) [https]        \n 9: Brazil (PR) [https]              10: Brazil (RJ) [https]            \n11: Brazil (SP 1) [https]            12: Brazil (SP 2) [https]          \n13: Bulgaria [https]                 14: Chile 1 [https]                \n15: Chile 2 [https]                  16: China (Hong Kong) [https]      \n17: China (Guangzhou) [https]        18: China (Lanzhou) [https]        \n19: China (Shanghai 1) [https]       20: China (Shanghai 2) [https]     \n21: Colombia (Cali) [https]          22: Czech Republic [https]         \n23: Denmark [https]                  24: East Asia [https]              \n25: Ecuador (Cuenca) [https]         26: Ecuador (Quito) [https]        \n27: Estonia [https]                  28: France (Lyon 1) [https]        \n29: France (Lyon 2) [https]          30: France (Marseille) [https]     \n31: France (Montpellier) [https]     32: France (Paris 2) [https]       \n33: Germany (Erlangen) [https]       34: Germany (G\u00f6ttingen) [https]    \n35: Germany (M\u00fcnster) [https]        36: Greece [https]                 \n37: Iceland [https]                  38: India [https]                  \n39: Indonesia (Jakarta) [https]      40: Ireland [https]                \n41: Italy (Padua) [https]            42: Japan (Tokyo) [https]          \n43: Japan (Yonezawa) [https]         44: Korea (Busan) [https]          \n45: Korea (Gyeongsan-si) [https]     46: Korea (Seoul 1) [https]        \n47: Korea (Ulsan) [https]            48: Malaysia [https]               \n49: Mexico (Mexico City) [https]     50: Norway [https]                 \n51: Philippines [https]              52: Serbia [https]                 \n53: Spain (A Coru\u00f1a) [https]         54: Spain (Madrid) [https]         \n55: Sweden [https]                   56: Switzerland [https]            \n57: Turkey (Denizli) [https]         58: Turkey (Mersin) [https]        \n59: UK (Bristol) [https]             60: UK (London 1) [https]          \n61: USA (CA 1) [https]               62: USA (IA) [https]               \n63: USA (KS) [https]                 64: USA (MI 1) [https]             \n65: USA (OR) [https]                 66: USA (TN) [https]               \n67: USA (TX 1) [https]               68: Uruguay [https]                \n69: (other mirrors)                  \n\nSelection: 32\nessai de l'URL 'https://cran.univ-paris1.fr/src/contrib/Cairo_1.5-9.tar.gz'\nContent type 'application/x-gzip' length 86982 bytes (84 KB)\n==================================================\ndownloaded 84 KB\n\n* installing *source* package \u2018Cairo\u2019 ...\n** package \u2018Cairo\u2019 correctement d\u00e9compress\u00e9 et sommes MD5 v\u00e9rifi\u00e9es\nchecking for gcc... gcc\nchecking whether the C compiler works... yes\nchecking for C compiler default output file name... a.out\nchecking for suffix of executables... \nchecking whether we are cross compiling... no\nchecking for suffix of object files... o\nchecking whether we are using the GNU C compiler... yes\nchecking whether gcc accepts -g... yes\nchecking for gcc option to accept ISO C89... none needed\nchecking how to run the C preprocessor... gcc -E\nchecking for grep that handles long lines and -e... /bin/grep\nchecking for egrep... /bin/grep -E\nchecking for ANSI C header files... yes\nchecking for sys/wait.h that is POSIX.1 compatible... yes\nchecking for sys/types.h... yes\nchecking for sys/stat.h... yes\nchecking for stdlib.h... yes\nchecking for string.h... yes\nchecking for memory.h... yes\nchecking for strings.h... yes\nchecking for inttypes.h... yes\nchecking for stdint.h... yes\nchecking for unistd.h... yes\nchecking for string.h... (cached) yes\nchecking sys/time.h usability... yes\nchecking sys/time.h presence... yes\nchecking for sys/time.h... yes\nchecking for unistd.h... (cached) yes\nchecking for an ANSI C-conforming const... yes\nchecking for pkg-config... /usr/local/sage-8/local/bin/pkg-config\nchecking whether pkg-config knows about cairo... yes\nchecking for configurable backends... cairo cairo-ft cairo-pdf cairo-png cairo-ps cairo-xlib cairo-xlib-xrender\nconfigure: CAIRO_CFLAGS=-I/usr/local/sage-8/local/include -I/usr/local/sage-8/local/include/freetype2 -I/usr/local/sage-8/local/include -I/usr/local/sage-8/local/include/libpng16 -I/usr/include/cairo -I/usr/include/glib-2.0 -I/usr/lib/x86_64-linux-gnu/glib-2.0/include -I/usr/include/pixman-1 -I/usr/include/uuid\nchecking if R was compiled with the RConn patch... no\nchecking cairo.h usability... yes\nchecking cairo.h presence... yes\nchecking for cairo.h... yes\nchecking for PNG support in Cairo... yes\nchecking for ATS font support in Cairo... no\nconfigure: CAIRO_LIBS=-L/usr/local/sage-8/local/lib -lfreetype -lz -lpng16 -lz -lcairo -lXext -lXrender -lX11\nchecking for library containing deflate... no\nchecking whether Cairo programs can be compiled... configure: error: Cannot compile a simple Cairo program. See config.log for details.\nERROR: configuration failed for package \u2018Cairo\u2019\n* removing \u2018/usr/local/sage-8/local/lib/R/library/Cairo\u2019\n\nLes packages source t\u00e9l\u00e9charg\u00e9s sont dans\n\t\u2018/tmp/Rtmp5RTdn4/downloaded_packages\u2019\nWarning message:\nIn install.packages(\"Cairo\") :\n  l'installation du package \u2018Cairo\u2019 a eu un statut de sortie non nul\n> \n```\n\nSame as before...",
    "created_at": "2019-01-29T14:16:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27163#issuecomment-419163",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@dimpase](#comment%3A18):
> Have you tried reinstalling Cairo into Sage's R?

No such bloody luck:

```
> install.packages("Cairo")
--- SVP sélectionner un miroir CRAN pour cette session ---
Secure CRAN mirrors 

 1: 0-Cloud [https]                   2: Algeria [https]                
 3: Australia (Canberra) [https]      4: Australia (Melbourne 1) [https]
 5: Australia (Melbourne 2) [https]   6: Australia (Perth) [https]      
 7: Austria [https]                   8: Belgium (Ghent) [https]        
 9: Brazil (PR) [https]              10: Brazil (RJ) [https]            
11: Brazil (SP 1) [https]            12: Brazil (SP 2) [https]          
13: Bulgaria [https]                 14: Chile 1 [https]                
15: Chile 2 [https]                  16: China (Hong Kong) [https]      
17: China (Guangzhou) [https]        18: China (Lanzhou) [https]        
19: China (Shanghai 1) [https]       20: China (Shanghai 2) [https]     
21: Colombia (Cali) [https]          22: Czech Republic [https]         
23: Denmark [https]                  24: East Asia [https]              
25: Ecuador (Cuenca) [https]         26: Ecuador (Quito) [https]        
27: Estonia [https]                  28: France (Lyon 1) [https]        
29: France (Lyon 2) [https]          30: France (Marseille) [https]     
31: France (Montpellier) [https]     32: France (Paris 2) [https]       
33: Germany (Erlangen) [https]       34: Germany (Göttingen) [https]    
35: Germany (Münster) [https]        36: Greece [https]                 
37: Iceland [https]                  38: India [https]                  
39: Indonesia (Jakarta) [https]      40: Ireland [https]                
41: Italy (Padua) [https]            42: Japan (Tokyo) [https]          
43: Japan (Yonezawa) [https]         44: Korea (Busan) [https]          
45: Korea (Gyeongsan-si) [https]     46: Korea (Seoul 1) [https]        
47: Korea (Ulsan) [https]            48: Malaysia [https]               
49: Mexico (Mexico City) [https]     50: Norway [https]                 
51: Philippines [https]              52: Serbia [https]                 
53: Spain (A Coruña) [https]         54: Spain (Madrid) [https]         
55: Sweden [https]                   56: Switzerland [https]            
57: Turkey (Denizli) [https]         58: Turkey (Mersin) [https]        
59: UK (Bristol) [https]             60: UK (London 1) [https]          
61: USA (CA 1) [https]               62: USA (IA) [https]               
63: USA (KS) [https]                 64: USA (MI 1) [https]             
65: USA (OR) [https]                 66: USA (TN) [https]               
67: USA (TX 1) [https]               68: Uruguay [https]                
69: (other mirrors)                  

Selection: 32
essai de l'URL 'https://cran.univ-paris1.fr/src/contrib/Cairo_1.5-9.tar.gz'
Content type 'application/x-gzip' length 86982 bytes (84 KB)
==================================================
downloaded 84 KB

* installing *source* package ‘Cairo’ ...
** package ‘Cairo’ correctement décompressé et sommes MD5 vérifiées
checking for gcc... gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking how to run the C preprocessor... gcc -E
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for ANSI C header files... yes
checking for sys/wait.h that is POSIX.1 compatible... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking for string.h... (cached) yes
checking sys/time.h usability... yes
checking sys/time.h presence... yes
checking for sys/time.h... yes
checking for unistd.h... (cached) yes
checking for an ANSI C-conforming const... yes
checking for pkg-config... /usr/local/sage-8/local/bin/pkg-config
checking whether pkg-config knows about cairo... yes
checking for configurable backends... cairo cairo-ft cairo-pdf cairo-png cairo-ps cairo-xlib cairo-xlib-xrender
configure: CAIRO_CFLAGS=-I/usr/local/sage-8/local/include -I/usr/local/sage-8/local/include/freetype2 -I/usr/local/sage-8/local/include -I/usr/local/sage-8/local/include/libpng16 -I/usr/include/cairo -I/usr/include/glib-2.0 -I/usr/lib/x86_64-linux-gnu/glib-2.0/include -I/usr/include/pixman-1 -I/usr/include/uuid
checking if R was compiled with the RConn patch... no
checking cairo.h usability... yes
checking cairo.h presence... yes
checking for cairo.h... yes
checking for PNG support in Cairo... yes
checking for ATS font support in Cairo... no
configure: CAIRO_LIBS=-L/usr/local/sage-8/local/lib -lfreetype -lz -lpng16 -lz -lcairo -lXext -lXrender -lX11
checking for library containing deflate... no
checking whether Cairo programs can be compiled... configure: error: Cannot compile a simple Cairo program. See config.log for details.
ERROR: configuration failed for package ‘Cairo’
* removing ‘/usr/local/sage-8/local/lib/R/library/Cairo’

Les packages source téléchargés sont dans
	‘/tmp/Rtmp5RTdn4/downloaded_packages’
Warning message:
In install.packages("Cairo") :
  l'installation du package ‘Cairo’ a eu un statut de sortie non nul
> 
```

Same as before...



---

archive/issue_comments_419164.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-Seen in 8.7.beta1, but probably from 8.6 (i. e. the switch to using th library):\n+On a Debian `buster` machine, seen in 8.7.beta1, but probably from 8.6 (i. e. the switch to using th library):\n \n ```\n > capabilities()\n@@ -12,4 +12,6 @@\n \n Similarly, one can't install the R package \"Cairo\". This entails the loss of creating graphics files from R, which is exceedingly annoying...\n \n+It should be noted that the problem **cannot** be reproduced on a Debian `stretch` machine.\n+\n One of the strengths of R being its graphical abilities, losing them is, IMNSHO, a critical problem.\n``````\n",
    "created_at": "2019-01-29T14:23:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27163#issuecomment-419164",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-Seen in 8.7.beta1, but probably from 8.6 (i. e. the switch to using th library):
+On a Debian `buster` machine, seen in 8.7.beta1, but probably from 8.6 (i. e. the switch to using th library):
 
 ```
 > capabilities()
@@ -12,4 +12,6 @@
 
 Similarly, one can't install the R package "Cairo". This entails the loss of creating graphics files from R, which is exceedingly annoying...
 
+It should be noted that the problem **cannot** be reproduced on a Debian `stretch` machine.
+
 One of the strengths of R being its graphical abilities, losing them is, IMNSHO, a critical problem.
``````




---

archive/issue_events_370294.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2019-01-29T14:23:20Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "title_is": "Since switching to the \"library\" implementation, R lost its graphics abilities on some systems",
    "title_was": "Since switching to the \"library\" implementation, R lost its graphics abilities.",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27163#event-370294"
}
```



---

archive/issue_events_370295.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-01-29T14:32:53Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "title_is": "R has no graphics abilities on Debian buster",
    "title_was": "Since switching to the \"library\" implementation, R lost its graphics abilities on some systems",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27163#event-370295"
}
```



---

archive/issue_comments_419165.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\n\n```\nchecking whether Cairo programs can be compiled... configure: error: Cannot compile a simple Cairo program. See config.log for details.\nERROR: configuration failed for package \u2018Cairo\u2019\n```\nand what's in this config.log?",
    "created_at": "2019-01-29T14:32:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27163#issuecomment-419165",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:21" align="right">comment:21</div>


```
checking whether Cairo programs can be compiled... configure: error: Cannot compile a simple Cairo program. See config.log for details.
ERROR: configuration failed for package ‘Cairo’
```
and what's in this config.log?



---

archive/issue_comments_419166.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-On a Debian `buster` machine, seen in 8.7.beta1, but probably from 8.6 (i. e. the switch to using th library):\n+Seen in 8.7.beta1, but probably from 8.6 (i. e. the switch to using th library):\n \n ```\n > capabilities()\n@@ -12,6 +12,4 @@\n \n Similarly, one can't install the R package \"Cairo\". This entails the loss of creating graphics files from R, which is exceedingly annoying...\n \n-It should be noted that the problem **cannot** be reproduced on a Debian `stretch` machine.\n-\n One of the strengths of R being its graphical abilities, losing them is, IMNSHO, a critical problem.\n``````\n",
    "created_at": "2019-01-29T14:32:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27163#issuecomment-419166",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-On a Debian `buster` machine, seen in 8.7.beta1, but probably from 8.6 (i. e. the switch to using th library):
+Seen in 8.7.beta1, but probably from 8.6 (i. e. the switch to using th library):
 
 ```
 > capabilities()
@@ -12,6 +12,4 @@
 
 Similarly, one can't install the R package "Cairo". This entails the loss of creating graphics files from R, which is exceedingly annoying...
 
-It should be noted that the problem **cannot** be reproduced on a Debian `stretch` machine.
-
 One of the strengths of R being its graphical abilities, losing them is, IMNSHO, a critical problem.
``````




---

archive/issue_comments_419167.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@dimpase](#comment%3A21):\n> \n> ```\n> checking whether Cairo programs can be compiled... configure: error: Cannot compile a simple Cairo program. See config.log for details.\n> ERROR: configuration failed for package \u2018Cairo\u2019\n> ```\n> and what's in this config.log?\n\nThis is deleted by R's mechanism :-(. I do not know how to keep the intermediate files).\n\nBut I think that the problem exists *before* Cairo attempts : I should get png(), tiff() and jpeg() at the very minimum...",
    "created_at": "2019-01-29T15:16:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27163#issuecomment-419167",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@dimpase](#comment%3A21):
> 
> ```
> checking whether Cairo programs can be compiled... configure: error: Cannot compile a simple Cairo program. See config.log for details.
> ERROR: configuration failed for package ‘Cairo’
> ```
> and what's in this config.log?

This is deleted by R's mechanism :-(. I do not know how to keep the intermediate files).

But I think that the problem exists *before* Cairo attempts : I should get png(), tiff() and jpeg() at the very minimum...



---

archive/issue_comments_419168.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@EmmanuelCharpentier](#comment%3A22):\n> Replying to [@dimpase](#comment%3A21):\n> > \n> > ```\n> > checking whether Cairo programs can be compiled... configure: error: Cannot compile a simple Cairo program. See config.log for details.\n> > ERROR: configuration failed for package \u2018Cairo\u2019\n> > ```\n> > and what's in this config.log?\n\n> \n> This is deleted by R's mechanism :-(. I do not know how to keep the intermediate files).\n> \n> But I think that the problem exists *before* Cairo attempts : I should get png(), tiff() and jpeg() at the very minimum... **without** cairo !",
    "created_at": "2019-01-29T15:17:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27163#issuecomment-419168",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@EmmanuelCharpentier](#comment%3A22):
> Replying to [@dimpase](#comment%3A21):
> > 
> > ```
> > checking whether Cairo programs can be compiled... configure: error: Cannot compile a simple Cairo program. See config.log for details.
> > ERROR: configuration failed for package ‘Cairo’
> > ```
> > and what's in this config.log?

> 
> This is deleted by R's mechanism :-(. I do not know how to keep the intermediate files).
> 
> But I think that the problem exists *before* Cairo attempts : I should get png(), tiff() and jpeg() at the very minimum... **without** cairo !



---

archive/issue_comments_419169.json:
```json
{
    "body": "Configuration log of an attempt to manually install Cairo",
    "created_at": "2019-01-29T15:20:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27163#issuecomment-419169",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Configuration log of an attempt to manually install Cairo



---

archive/issue_comments_419170.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nAttachment: **[config.log](https://github.com/sagemath/sage/files/ticket27163/config.log)**\n\nReplying to [@dimpase](#comment%3A21):\n> \n> ```\n> checking whether Cairo programs can be compiled... configure: error: Cannot compile a simple Cairo program. See config.log for details.\n> ERROR: configuration failed for package \u2018Cairo\u2019\n> ```\n> and what's in this config.log?\n\nFound how to do that : you have to manually download the tarball, untar it and `R CMD INSTAZLL Cairo`.\n\nSee attachment (pretty uninformative...).",
    "created_at": "2019-01-29T15:22:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27163#issuecomment-419170",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:24" align="right">comment:24</div>

Attachment: **[config.log](https://github.com/sagemath/sage/files/ticket27163/config.log)**

Replying to [@dimpase](#comment%3A21):
> 
> ```
> checking whether Cairo programs can be compiled... configure: error: Cannot compile a simple Cairo program. See config.log for details.
> ERROR: configuration failed for package ‘Cairo’
> ```
> and what's in this config.log?

Found how to do that : you have to manually download the tarball, untar it and `R CMD INSTAZLL Cairo`.

See attachment (pretty uninformative...).



---

archive/issue_comments_419171.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nI'm not exactly sure what you expect here.\n\nAs with Python, what capabilities get build when you configure and build R is going to depend heavily on what system packages you have installed (and most likely their -devel counterparts), and whether or not the versions of those packages are supported for building whatever feature you care about.  I don't think Sage includes SPKGs for all the potential dependencies for something like R (e.g. Cairo).\n\nI don't think this has anything to do either way with the use of rpy2 to access the R interpreter.",
    "created_at": "2019-01-29T16:41:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27163#issuecomment-419171",
    "user": "https://github.com/embray"
}
```

<div id="comment:25" align="right">comment:25</div>

I'm not exactly sure what you expect here.

As with Python, what capabilities get build when you configure and build R is going to depend heavily on what system packages you have installed (and most likely their -devel counterparts), and whether or not the versions of those packages are supported for building whatever feature you care about.  I don't think Sage includes SPKGs for all the potential dependencies for something like R (e.g. Cairo).

I don't think this has anything to do either way with the use of rpy2 to access the R interpreter.



---

archive/issue_comments_419172.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@dimpase](#comment%3A5):\n> I am inclined to close this as worksforme. I think the best way to proceed is to add capability to use system R installation, via adding appropriate `spkg-configure.m4` to `build/pkgs/r`.\n\n+1\n\nOne thing this will probably have to do (which I don't think any of our other `spkg-configure.m4` files do *yet*, though it's certainly a possibility I've considered) is output a file containing the results of its findings; for example, the path to the system R.  This would need to be output to a file that can be read by the Sage sources, or possibly even just a variable added to the existing `src/bin/sage-env-config.in`.\n\n(Though I also think, in the spirit of #27040, there should be some kind of `src/sage/env_config.py.in` which results in a `src/sage/env_config.py` which is imported by `sage.env` to add additional package data that can be used by sagelib without first having to source some environment variables.)",
    "created_at": "2019-01-29T16:42:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27163#issuecomment-419172",
    "user": "https://github.com/embray"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@dimpase](#comment%3A5):
> I am inclined to close this as worksforme. I think the best way to proceed is to add capability to use system R installation, via adding appropriate `spkg-configure.m4` to `build/pkgs/r`.

+1

One thing this will probably have to do (which I don't think any of our other `spkg-configure.m4` files do *yet*, though it's certainly a possibility I've considered) is output a file containing the results of its findings; for example, the path to the system R.  This would need to be output to a file that can be read by the Sage sources, or possibly even just a variable added to the existing `src/bin/sage-env-config.in`.

(Though I also think, in the spirit of #27040, there should be some kind of `src/sage/env_config.py.in` which results in a `src/sage/env_config.py` which is imported by `sage.env` to add additional package data that can be used by sagelib without first having to source some environment variables.)



---

archive/issue_comments_419173.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nSomewhere around line 350 of the log you will a compiler/linker call, and the code it is called on. And the error `libcairo.so.2: undefined symbol: FT_Done_MM_Var` - same as in the comment 2 above.\n\nThe reason is that libfreetype shipped with Sage is older (2.8) than the one on your system (2.9), and it does not even have `FT_Done_MM_Var`, whereas cairo expects it to be available.\nSo the wrong library is pulled in, resulting in this error.\nFor instance, upgrading freetype to version 2.9.1 should fix this, at least on buster.\nWhether such an upgrade will break cairo on older systems, is a question I don't know the answer to.\n\nIt could also be an R or Cairo bug, I don't know.\n\nFor sure this has absolutely nothing to do with rpy2.",
    "created_at": "2019-01-29T16:45:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27163#issuecomment-419173",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:27" align="right">comment:27</div>

Somewhere around line 350 of the log you will a compiler/linker call, and the code it is called on. And the error `libcairo.so.2: undefined symbol: FT_Done_MM_Var` - same as in the comment 2 above.

The reason is that libfreetype shipped with Sage is older (2.8) than the one on your system (2.9), and it does not even have `FT_Done_MM_Var`, whereas cairo expects it to be available.
So the wrong library is pulled in, resulting in this error.
For instance, upgrading freetype to version 2.9.1 should fix this, at least on buster.
Whether such an upgrade will break cairo on older systems, is a question I don't know the answer to.

It could also be an R or Cairo bug, I don't know.

For sure this has absolutely nothing to do with rpy2.



---

archive/issue_comments_419174.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nlibfreetype is another one that should be high priority to get an `spkg-configure.m4`.  This is not the first time I've encountered an incompatibility with it over that exact same symbol, though I forget the rest of the context.",
    "created_at": "2019-01-29T16:49:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27163#issuecomment-419174",
    "user": "https://github.com/embray"
}
```

<div id="comment:28" align="right">comment:28</div>

libfreetype is another one that should be high priority to get an `spkg-configure.m4`.  This is not the first time I've encountered an incompatibility with it over that exact same symbol, though I forget the rest of the context.



---

archive/issue_comments_419175.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nI'd also say the freetype upgrade should include `spkg-configure.m4` to pull in the system library if one is available - this would preclude this sort of mess we see here, that comes from duplicate libs being pulled from different places...\n\nSee #27168 for a followup.",
    "created_at": "2019-01-29T16:54:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27163#issuecomment-419175",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:29" align="right">comment:29</div>

I'd also say the freetype upgrade should include `spkg-configure.m4` to pull in the system library if one is available - this would preclude this sort of mess we see here, that comes from duplicate libs being pulled from different places...

See #27168 for a followup.



---

archive/issue_comments_419176.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@embray](#comment%3A28):\n> libfreetype is another one that should be high priority to get an `spkg-configure.m4`.  This is not the first time I've encountered an incompatibility with it over that exact same symbol, though I forget the rest of the context.\n\nI've beaten you to opening #27168 :-)",
    "created_at": "2019-01-29T16:55:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27163#issuecomment-419176",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@embray](#comment%3A28):
> libfreetype is another one that should be high priority to get an `spkg-configure.m4`.  This is not the first time I've encountered an incompatibility with it over that exact same symbol, though I forget the rest of the context.

I've beaten you to opening #27168 :-)



---

archive/issue_comments_419177.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nMeanwhile I opened #27169 to upgrade to freetype 2.9.1. Will post a branch soon.",
    "created_at": "2019-01-29T17:01:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27163#issuecomment-419177",
    "user": "https://github.com/slel"
}
```

<div id="comment:31" align="right">comment:31</div>

Meanwhile I opened #27169 to upgrade to freetype 2.9.1. Will post a branch soon.



---

archive/issue_comments_419178.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nNote that #27040 was initially opened as \"R 3.4.2 has no graphics capabilities\"\nand its summary was later changed to \"Upgrade freetype to 2.8.1\".",
    "created_at": "2019-01-30T00:03:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27163#issuecomment-419178",
    "user": "https://github.com/slel"
}
```

<div id="comment:32" align="right">comment:32</div>

Note that #27040 was initially opened as "R 3.4.2 has no graphics capabilities"
and its summary was later changed to "Upgrade freetype to 2.8.1".



---

archive/issue_comments_419179.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nPlease check if upgrading to freetype 2.9.1 (#27169) fixes the problem described here.",
    "created_at": "2019-01-30T00:31:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27163#issuecomment-419179",
    "user": "https://github.com/slel"
}
```

<div id="comment:33" align="right">comment:33</div>

Please check if upgrading to freetype 2.9.1 (#27169) fixes the problem described here.



---

archive/issue_events_370296.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2019-01-30T14:32:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27163#event-370296"
}
```



---

archive/issue_events_370297.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2019-01-30T14:32:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27163#event-370297"
}
```



---

archive/issue_comments_419180.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\n#27169 fixes this with either R 3.4.4 (current now) or R 3.5.2 (as prepared in #25674). This can be considered as a duplicate of #27169.\n\n==>`positive_review` with a `invalid/duplicate/wontfix` milestone.",
    "created_at": "2019-01-30T14:32:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27163#issuecomment-419180",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:34" align="right">comment:34</div>

#27169 fixes this with either R 3.4.4 (current now) or R 3.5.2 (as prepared in #25674). This can be considered as a duplicate of #27169.

==>`positive_review` with a `invalid/duplicate/wontfix` milestone.



---

archive/issue_comments_419181.json:
```json
{
    "body": "Reviewer: **Emmanuel Charpentier**",
    "created_at": "2019-01-30T14:32:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27163#issuecomment-419181",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Reviewer: **Emmanuel Charpentier**



---

archive/issue_events_370298.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-26T13:58:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27163#event-370298"
}
```



---

archive/issue_events_370299.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-26T13:58:00Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27163#event-370299"
}
```



---

archive/issue_comments_419182.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nPresuming these are all correctly reviewed as either duplicate, invalid, or wontfix.",
    "created_at": "2019-02-26T13:58:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27163#issuecomment-419182",
    "user": "https://github.com/embray"
}
```

<div id="comment:36" align="right">comment:36</div>

Presuming these are all correctly reviewed as either duplicate, invalid, or wontfix.
