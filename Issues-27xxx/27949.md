# Issue 27949: Pull out subfield() method from subfields() method.

archive/issues_027712.json:
```json
{
    "body": "It is currently clumsy to create a subfield of a finite field using subfields() method.\n\n```\nsage: k = GF(2^21)\nsage: k.subfields(3)\n[(Finite Field in z3 of size 2^3, Ring morphism:\n    From: Finite Field in z3 of size 2^3\n    To:   Finite Field in z21 of size 2^21\n    Defn: z3 |--> z21^20 + z21^19 + z21^17 + z21^15 + z21^11 + z21^9 + z21^8 + z21^6 + z21^2)]\nsage: K, _ = k.subfields(3)[0]\nsage: K\nFinite Field in z3 of size 2^3\n```\n\nWith the patch of this ticket, we have subfield() method such that\n\n```\nsage: k = GF(2^21)\nsage: k.subfield(3)\nFinite Field in z3 of size 2^3\nsage: K = _\nsage: k.coerce_map_from(K)\nRing morphism:\n  From: Finite Field in z3 of size 2^3\n  To:   Finite Field in z21 of size 2^21\n  Defn: z3 |--> z21^20 + z21^19 + z21^17 + z21^15 + z21^11 + z21^9 + z21^8 + z21^6 + z21^2\n```\n\nReviewer: Travis Scrimshaw\n\nAuthor: Kwankyu Lee\n\nBranch: bd8ba100ef581c7a71a93a8e986db42721a3fb43\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/27949\n\n",
    "closed_at": "2019-10-06T23:06:58Z",
    "created_at": "2019-06-08T13:01:13Z",
    "labels": [
        "component: finite rings",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.0",
    "title": "Pull out subfield() method from subfields() method.",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27949",
    "user": "https://github.com/kwankyu"
}
```
It is currently clumsy to create a subfield of a finite field using subfields() method.

```
sage: k = GF(2^21)
sage: k.subfields(3)
[(Finite Field in z3 of size 2^3, Ring morphism:
    From: Finite Field in z3 of size 2^3
    To:   Finite Field in z21 of size 2^21
    Defn: z3 |--> z21^20 + z21^19 + z21^17 + z21^15 + z21^11 + z21^9 + z21^8 + z21^6 + z21^2)]
sage: K, _ = k.subfields(3)[0]
sage: K
Finite Field in z3 of size 2^3
```

With the patch of this ticket, we have subfield() method such that

```
sage: k = GF(2^21)
sage: k.subfield(3)
Finite Field in z3 of size 2^3
sage: K = _
sage: k.coerce_map_from(K)
Ring morphism:
  From: Finite Field in z3 of size 2^3
  To:   Finite Field in z21 of size 2^21
  Defn: z3 |--> z21^20 + z21^19 + z21^17 + z21^15 + z21^11 + z21^9 + z21^8 + z21^6 + z21^2
```

Reviewer: Travis Scrimshaw

Author: Kwankyu Lee

Branch: bd8ba100ef581c7a71a93a8e986db42721a3fb43

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/27949





---

archive/issue_comments_390812.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-06-08T13:05:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27949#issuecomment-390812",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_390813.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-06-08T13:07:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27949#issuecomment-390813",
    "user": "https://github.com/kwankyu"
}
```

Changing status from new to needs_review.



---

archive/issue_events_069262.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-07-03T11:37:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27949",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27949#event-69262"
}
```



---

archive/issue_comments_390814.json:
```json
{
    "body": "<a id='comment:4'></a>Moving tickets from the Sage 8.8 milestone that have been actively worked on in the last six months to the next release milestone (optimistically).",
    "created_at": "2019-07-03T11:37:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27949#issuecomment-390814",
    "user": "https://github.com/embray"
}
```

<a id='comment:4'></a>Moving tickets from the Sage 8.8 milestone that have been actively worked on in the last six months to the next release milestone (optimistically).



---

archive/issue_comments_390815.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-04T00:58:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27949#issuecomment-390815",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_390816.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-09-16T07:11:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27949#issuecomment-390816",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_390817.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-09-18T01:26:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27949#issuecomment-390817",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_390818.json:
```json
{
    "body": "<a id='comment:7'></a>LGTM.",
    "created_at": "2019-09-18T01:26:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27949#issuecomment-390818",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'></a>LGTM.



---

archive/issue_comments_390819.json:
```json
{
    "body": "<a id='comment:8'></a>Sorry, I just noticed something:\n\n```\nreturn [self.subfields(m, name=name[m])[0] for m in divisors]\n```\nCouldn't this use your new `subfield()` method?",
    "created_at": "2019-09-18T01:28:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27949#issuecomment-390819",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>Sorry, I just noticed something:

```
return [self.subfields(m, name=name[m])[0] for m in divisors]
```
Couldn't this use your new `subfield()` method?



---

archive/issue_comments_390820.json:
```json
{
    "body": "Changing status from positive_review to needs_info.",
    "created_at": "2019-09-18T01:28:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27949#issuecomment-390820",
    "user": "https://github.com/tscrim"
}
```

Changing status from positive_review to needs_info.



---

archive/issue_comments_390821.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [comment:8 tscrim]:\n> Sorry, I just noticed something:\n> \n> ```\n> return [self.subfields(m, name=name[m])[0] for m in divisors]\n> ```\n> Couldn't this use your new `subfield()` method?\n\n\nThen it would look like\n\n```\n-        return [self.subfields(m, name=name[m])[0] for m in divisors]\n+\n+        pairs = []\n+        for m in divisors:\n+            K =  self.subfield(m, name=name[m])\n+            pairs.append( (K, self.coerce_map_from(K)) )\n+        return pairs\n```\n\nIt is somewhat duplicating the code above. Is this better?",
    "created_at": "2019-09-18T01:58:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27949#issuecomment-390821",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:9'></a>Replying to [comment:8 tscrim]:
> Sorry, I just noticed something:
> 
> ```
> return [self.subfields(m, name=name[m])[0] for m in divisors]
> ```
> Couldn't this use your new `subfield()` method?


Then it would look like

```
-        return [self.subfields(m, name=name[m])[0] for m in divisors]
+
+        pairs = []
+        for m in divisors:
+            K =  self.subfield(m, name=name[m])
+            pairs.append( (K, self.coerce_map_from(K)) )
+        return pairs
```

It is somewhat duplicating the code above. Is this better?



---

archive/issue_comments_390822.json:
```json
{
    "body": "<a id='comment:10'></a>Replying to [comment:9 klee]:\n> Replying to [comment:8 tscrim]:\n> > Sorry, I just noticed something:\n> > \n> > ```\n> > return [self.subfields(m, name=name[m])[0] for m in divisors]\n> > ```\n> > Couldn't this use your new `subfield()` method?\n\n> \n> Then it would look like\n> \n> ```\n> -        return [self.subfields(m, name=name[m])[0] for m in divisors]\n> +\n> +        pairs = []\n> +        for m in divisors:\n> +            K =  self.subfield(m, name=name[m])\n> +            pairs.append( (K, self.coerce_map_from(K)) )\n> +        return pairs\n> ```\n> \n> It is somewhat duplicating the code above. Is this better?\n\n\nMaybe. It seems less wasteful in terms of object creation and it is not too much code duplication. Plus, the current version almost seems to to go against the new method; although I guess not exactly from what you're saying.",
    "created_at": "2019-09-18T02:07:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27949#issuecomment-390822",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'></a>Replying to [comment:9 klee]:
> Replying to [comment:8 tscrim]:
> > Sorry, I just noticed something:
> > 
> > ```
> > return [self.subfields(m, name=name[m])[0] for m in divisors]
> > ```
> > Couldn't this use your new `subfield()` method?

> 
> Then it would look like
> 
> ```
> -        return [self.subfields(m, name=name[m])[0] for m in divisors]
> +
> +        pairs = []
> +        for m in divisors:
> +            K =  self.subfield(m, name=name[m])
> +            pairs.append( (K, self.coerce_map_from(K)) )
> +        return pairs
> ```
> 
> It is somewhat duplicating the code above. Is this better?


Maybe. It seems less wasteful in terms of object creation and it is not too much code duplication. Plus, the current version almost seems to to go against the new method; although I guess not exactly from what you're saying.



---

archive/issue_comments_390823.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-09-18T02:15:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27949#issuecomment-390823",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_390824.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2019-09-18T02:15:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27949#issuecomment-390824",
    "user": "https://github.com/kwankyu"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_390825.json:
```json
{
    "body": "<a id='comment:13'></a>Thank you.",
    "created_at": "2019-09-18T02:34:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27949#issuecomment-390825",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:13'></a>Thank you.



---

archive/issue_comments_390826.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-09-18T02:34:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27949#issuecomment-390826",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_390827.json:
```json
{
    "body": "<a id='comment:14'></a>My pleasure. Thank you!",
    "created_at": "2019-09-18T02:35:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27949#issuecomment-390827",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:14'></a>My pleasure. Thank you!



---

archive/issue_comments_390828.json:
```json
{
    "body": "<a id='comment:15'></a>moving milestone to 9.0 (after release of 8.9)",
    "created_at": "2019-09-30T08:12:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27949#issuecomment-390828",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:15'></a>moving milestone to 9.0 (after release of 8.9)



---

archive/issue_events_069263.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-09-30T08:12:27Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27949",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27949#event-69263"
}
```



---

archive/issue_events_069264.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-09-30T08:12:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27949",
    "milestone": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27949#event-69264"
}
```



---

archive/issue_comments_390829.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-10-06T23:06:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27949#issuecomment-390829",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_069265.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-10-06T23:06:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27949",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27949#event-69265"
}
```



---

archive/issue_comments_390830.json:
```json
{
    "body": "<a id='comment:17'></a>Follow-up: #30171",
    "created_at": "2020-07-18T20:10:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27949#issuecomment-390830",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>Follow-up: #30171
