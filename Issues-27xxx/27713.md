# Issue 27713: Patch pynac to build properly with Cygwin's system GMP

archive/issues_027476.json:
```json
{
    "assignees": [],
    "body": "There are some bits in plain GMP not present for some reason in MPIR such that Cygwin gets some configure-time flags set differently than the defaults on Linux.  Cygwin's system package for GMP is configured with these different defaults, leading to a build failure in pynac that I don't get on other platforms.\n\nSee the upstream PR for more details: https://github.com/pynac/pynac/pull/342\n\nKeywords: **gmp pynac**\n\nBranch: **[5816c4b](https://github.com/sagemath/sagetrac-mirror/commit/5816c4b75a1a1ed823b7eb20ba5b3de48237032c)**\n\nUpstream: **Fixed upstream, but not in a stable release.**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Erik Bray**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/27713_\n\n",
    "closed_at": "2019-04-29T12:36:12Z",
    "created_at": "2019-04-23T10:51:19Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20porting%3A%20cygwin",
        "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Patch pynac to build properly with Cygwin's system GMP",
    "type": "issue",
    "updated_at": "2019-06-19T10:43:53Z",
    "url": "https://github.com/sagemath/sage/issues/27713",
    "user": "https://github.com/embray"
}
```
There are some bits in plain GMP not present for some reason in MPIR such that Cygwin gets some configure-time flags set differently than the defaults on Linux.  Cygwin's system package for GMP is configured with these different defaults, leading to a build failure in pynac that I don't get on other platforms.

See the upstream PR for more details: https://github.com/pynac/pynac/pull/342

Keywords: **gmp pynac**

Branch: **[5816c4b](https://github.com/sagemath/sagetrac-mirror/commit/5816c4b75a1a1ed823b7eb20ba5b3de48237032c)**

Upstream: **Fixed upstream, but not in a stable release.**

Reviewer: **Travis Scrimshaw**

Author: **Erik Bray**

_Issue created by migration from https://trac.sagemath.org/ticket/27713_





---

archive/issue_events_362024.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-04-23T10:51:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27713",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27713#event-362024"
}
```



---

archive/issue_events_362025.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-04-23T10:51:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27713",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20porting%3A%20cygwin",
    "label_color": "000080",
    "label_name": "component: porting: cygwin",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27713#event-362025"
}
```



---

archive/issue_events_362026.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-04-23T10:51:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27713",
    "label": "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27713#event-362026"
}
```



---

archive/issue_events_362027.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-04-23T10:51:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27713",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27713#event-362027"
}
```



---

archive/issue_comments_432509.json:
```json
{
    "body": "Author: **Erik Bray**",
    "created_at": "2019-04-23T10:52:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27713#issuecomment-432509",
    "user": "https://github.com/embray"
}
```

Author: **Erik Bray**



---

archive/issue_events_362028.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-04-23T10:52:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27713",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27713#event-362028"
}
```



---

archive/issue_comments_432510.json:
```json
{
    "body": "Branch: **[u/embray/cygwin/build/ticket-27713](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/cygwin/build/ticket-27713)**",
    "created_at": "2019-04-23T10:52:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27713#issuecomment-432510",
    "user": "https://github.com/embray"
}
```

Branch: **[u/embray/cygwin/build/ticket-27713](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/cygwin/build/ticket-27713)**



---

archive/issue_comments_432511.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5816c4b75a1a1ed823b7eb20ba5b3de48237032c\">5816c4b</a></td><td><code>Trac #27713: Include patch to pynac to fix build issue when using Cygwin's system GMP</code></td></tr></table>\n",
    "created_at": "2019-04-23T10:53:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27713#issuecomment-432511",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2" align="right">Comment 2</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5816c4b75a1a1ed823b7eb20ba5b3de48237032c">5816c4b</a></td><td><code>Trac #27713: Include patch to pynac to fix build issue when using Cygwin's system GMP</code></td></tr></table>




---

archive/issue_comments_432512.json:
```json
{
    "body": "Commit: **[5816c4b](https://github.com/sagemath/sagetrac-mirror/commit/5816c4b75a1a1ed823b7eb20ba5b3de48237032c)**",
    "created_at": "2019-04-23T10:53:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27713#issuecomment-432512",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[5816c4b](https://github.com/sagemath/sagetrac-mirror/commit/5816c4b75a1a1ed823b7eb20ba5b3de48237032c)**



---

archive/issue_comments_432513.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nTo add, this started of course since #27212.  Not sure why I didn't catch the problem before since I have recollection of testing this on Cygwin, but maybe I just never rebuilt everything (including pynac?) from scratch for some reason.",
    "created_at": "2019-04-23T10:54:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27713#issuecomment-432513",
    "user": "https://github.com/embray"
}
```

<div id="comment:3" align="right">Comment 3</div>

To add, this started of course since #27212.  Not sure why I didn't catch the problem before since I have recollection of testing this on Cygwin, but maybe I just never rebuilt everything (including pynac?) from scratch for some reason.



---

archive/issue_comments_432514.json:
```json
{
    "body": "Changed upstream from **Reported upstream. No feedback yet.** to **Fixed upstream, but not in a stable release.**",
    "created_at": "2019-04-23T14:30:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27713#issuecomment-432514",
    "user": "https://github.com/embray"
}
```

Changed upstream from **Reported upstream. No feedback yet.** to **Fixed upstream, but not in a stable release.**



---

archive/issue_comments_432515.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nFixed upstream.  rws confirms there will be a new pynac release in a few weeks, so we can possibly wait on that as well.",
    "created_at": "2019-04-23T14:30:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27713#issuecomment-432515",
    "user": "https://github.com/embray"
}
```

<div id="comment:4" align="right">Comment 4</div>

Fixed upstream.  rws confirms there will be a new pynac release in a few weeks, so we can possibly wait on that as well.



---

archive/issue_comments_432516.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2019-04-25T02:27:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27713#issuecomment-432516",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_events_362029.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2019-04-25T02:27:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27713",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27713#event-362029"
}
```



---

archive/issue_events_362030.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2019-04-25T02:27:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27713",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27713#event-362030"
}
```



---

archive/issue_comments_432517.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nI think we can add this patch now (in part to get some extra testing through Sage beta releases) and then remove it when we upgrade Pynac (if that does get into the next stable Sage release).",
    "created_at": "2019-04-25T02:27:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27713#issuecomment-432517",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:5" align="right">Comment 5</div>

I think we can add this patch now (in part to get some extra testing through Sage beta releases) and then remove it when we upgrade Pynac (if that does get into the next stable Sage release).



---

archive/issue_comments_432518.json:
```json
{
    "body": "Changed branch from **[u/embray/cygwin/build/ticket-27713](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/cygwin/build/ticket-27713)** to **[5816c4b](https://github.com/sagemath/sagetrac-mirror/commit/5816c4b75a1a1ed823b7eb20ba5b3de48237032c)**",
    "created_at": "2019-04-29T12:36:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27713#issuecomment-432518",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/embray/cygwin/build/ticket-27713](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/cygwin/build/ticket-27713)** to **[5816c4b](https://github.com/sagemath/sagetrac-mirror/commit/5816c4b75a1a1ed823b7eb20ba5b3de48237032c)**



---

archive/issue_events_362031.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-04-29T12:36:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27713",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27713#event-362031"
}
```



---

archive/issue_events_362032.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "5dd94d1ceb6d8ff77e4656265f02e51580d2228a",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-04-29T12:36:12Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27713",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27713#event-362032"
}
```



---

archive/issue_comments_432519.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nthe update with the patch in has been released, see #28016",
    "created_at": "2019-06-19T10:43:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27713#issuecomment-432519",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:7" align="right">Comment 7</div>

the update with the patch in has been released, see #28016



---

archive/issue_comments_432520.json:
```json
{
    "body": "Changed commit from **[5816c4b](https://github.com/sagemath/sagetrac-mirror/commit/5816c4b75a1a1ed823b7eb20ba5b3de48237032c)** to none",
    "created_at": "2019-06-19T10:43:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27713#issuecomment-432520",
    "user": "https://github.com/dimpase"
}
```

Changed commit from **[5816c4b](https://github.com/sagemath/sagetrac-mirror/commit/5816c4b75a1a1ed823b7eb20ba5b3de48237032c)** to none
