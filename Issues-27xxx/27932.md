# Issue 27932: Three.js: Support vector field plots

archive/issues_027695.json:
```json
{
    "body": "This enhancement allows plotting of 3D vector fields. This is done by replacing the translated line segments of the field with 3D arrows at half the thickness of the lines. Since there is currently no way to turn off the arrow heads on the vector field, it is assumed they will be present.\n\n\nCC:  @egourgoulhon\n\nKeywords: threejs\n\nBranch/Commit: 057bba515498ac8bf525d90014e7376f5243121c\n\nReviewer: Eric Gourgoulhon\n\nAuthor: Paul Masson\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/27932\n\n",
    "closed_at": "2019-06-27T20:13:15Z",
    "created_at": "2019-06-05T00:40:02Z",
    "labels": [
        "component: graphics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.9",
    "title": "Three.js: Support vector field plots",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27932",
    "user": "https://github.com/paulmasson"
}
```
This enhancement allows plotting of 3D vector fields. This is done by replacing the translated line segments of the field with 3D arrows at half the thickness of the lines. Since there is currently no way to turn off the arrow heads on the vector field, it is assumed they will be present.


CC:  @egourgoulhon

Keywords: threejs

Branch/Commit: 057bba515498ac8bf525d90014e7376f5243121c

Reviewer: Eric Gourgoulhon

Author: Paul Masson

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/27932





---

archive/issue_comments_416230.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-06-05T00:43:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27932#issuecomment-416230",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416231.json:
```json
{
    "body": "<a id='comment:3'></a>In the process of adding this enhancement, I discovered that `line3d` has an option `arrow_head` for adding such to line segments that is not currently supported by the Three.js viewer. Since I'll assume most people will use `arrow3d` to achieve the same effect, I don't plan to support that attribute unless necessary.",
    "created_at": "2019-06-05T00:46:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27932#issuecomment-416231",
    "user": "https://github.com/paulmasson"
}
```

<a id='comment:3'></a>In the process of adding this enhancement, I discovered that `line3d` has an option `arrow_head` for adding such to line segments that is not currently supported by the Three.js viewer. Since I'll assume most people will use `arrow3d` to achieve the same effect, I don't plan to support that attribute unless necessary.



---

archive/issue_comments_416232.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-06-05T01:02:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27932#issuecomment-416232",
    "user": "https://github.com/paulmasson"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_416233.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,5 @@\n-This enhancement allows plot of 3D vector fields. This is done by replacing the translated line segments of the field with 3D arrows at half the thickness of the lines. Since there is currently no way to turn off the arrow heads on the vector field, it is assumed they will be present.\n+This enhancement allows plotting of 3D vector fields. This is done by replacing the translated line segments of the field with 3D arrows at half the thickness of the lines. Since there is currently no way to turn off the arrow heads on the vector field, it is assumed they will be present.\n+\n \n Author: Paul Masson\n \n```\n",
    "created_at": "2019-06-05T01:02:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27932#issuecomment-416233",
    "user": "https://github.com/paulmasson"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,5 @@
-This enhancement allows plot of 3D vector fields. This is done by replacing the translated line segments of the field with 3D arrows at half the thickness of the lines. Since there is currently no way to turn off the arrow heads on the vector field, it is assumed they will be present.
+This enhancement allows plotting of 3D vector fields. This is done by replacing the translated line segments of the field with 3D arrows at half the thickness of the lines. Since there is currently no way to turn off the arrow heads on the vector field, it is assumed they will be present.
+
 
 Author: Paul Masson
 
```




---

archive/issue_comments_416234.json:
```json
{
    "body": "<a id='comment:6'></a>Thanks for this improvement! The following example from the *Plotting 3D fields* section of the reference manual:\n\n```\nx,y,z = var('x y z')\ng = plot_vector_field3d((x*cos(z),-y*cos(z),sin(z)), (x,0,pi), (y,0,pi), \n                        (z,0,pi))\nshow(g, viewer='threejs')\n```\nworks but\n\n```\nx,y,z = var('x y z')\nplot_vector_field3d((x*cos(z),-y*cos(z),sin(z)), (x,0,pi), (y,0,pi), (z,0,pi), \n                    viewer='threejs')\n```\nresults in a Jmol plot, as if the option `viewer='threejs'` was not taken into account...",
    "created_at": "2019-06-14T14:58:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27932#issuecomment-416234",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:6'></a>Thanks for this improvement! The following example from the *Plotting 3D fields* section of the reference manual:

```
x,y,z = var('x y z')
g = plot_vector_field3d((x*cos(z),-y*cos(z),sin(z)), (x,0,pi), (y,0,pi), 
                        (z,0,pi))
show(g, viewer='threejs')
```
works but

```
x,y,z = var('x y z')
plot_vector_field3d((x*cos(z),-y*cos(z),sin(z)), (x,0,pi), (y,0,pi), (z,0,pi), 
                    viewer='threejs')
```
results in a Jmol plot, as if the option `viewer='threejs'` was not taken into account...



---

archive/issue_comments_416235.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-06-14T14:58:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27932#issuecomment-416235",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_416236.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-06-18T21:55:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27932#issuecomment-416236",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_416237.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-06-18T21:57:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27932#issuecomment-416237",
    "user": "https://github.com/paulmasson"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_416238.json:
```json
{
    "body": "<a id='comment:8'></a>Those pesky extra keywords...",
    "created_at": "2019-06-18T21:57:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27932#issuecomment-416238",
    "user": "https://github.com/paulmasson"
}
```

<a id='comment:8'></a>Those pesky extra keywords...



---

archive/issue_comments_416239.json:
```json
{
    "body": "<a id='comment:9'></a>Thanks!",
    "created_at": "2019-06-20T09:44:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27932#issuecomment-416239",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:9'></a>Thanks!



---

archive/issue_comments_416240.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-06-20T09:44:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27932#issuecomment-416240",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_416241.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-06-27T20:13:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27932#issuecomment-416241",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_069215.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-06-27T20:13:15Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27932",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27932#event-69215"
}
```



---

archive/issue_comments_416242.json:
```json
{
    "body": "<a id='comment:12'></a>Not in Sage 8.8.  Let's please to try keep tickets' milestones related to the release in which we actually intend to include them, and in particular the release in which they were *actually* included, especially when closing tickets.",
    "created_at": "2019-07-03T11:34:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27932#issuecomment-416242",
    "user": "https://github.com/embray"
}
```

<a id='comment:12'></a>Not in Sage 8.8.  Let's please to try keep tickets' milestones related to the release in which we actually intend to include them, and in particular the release in which they were *actually* included, especially when closing tickets.



---

archive/issue_events_069216.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-07-03T11:34:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27932",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27932#event-69216"
}
```
