# Issue 27205: Don't ignore "pkg-config --libs-only-other" when building sagelib; and fix linbox.pc

archive/issues_026968.json:
```json
{
    "body": "When sage uses pkgconfig to determine compile flags, for example in `src/module_list.py` and `src/sage/env.py` it only extracts the \"libraries\" but not the \"libs\" field from pkg-config. In the case of fflas-ffpack this field (as well as cflags) contains `-fopenmp`. So sage builds but does not link with this flag which leads to missing symbols on Ubuntu:\n\n```\nImportError: /<<PKGBUILDDIR>>/debian/build/usr/lib/python2.7/dist-packages/sage/matrix/matrix_modn_sparse.so: undefined symbol: GOMP_loop_ull_runtime_start\n```\n\nThis was mentioned in https://bugs.debian.org/919573 .\n\nTo reproduce:\n\n```\n  tox -e docker-debian-bullseye-standard\n```\nThe resulting sage crashes on startup with the above error.\n\nApplying the Debian patch reveals another Sage bug:\n\n```\n$ pkg-config --libs linbox\n-L/sage/local/lib -llinbox @LINBOXSAGE_LIBS@ -lntl -lmpfr -liml -lflint -fopenmp -lblas -llapack -lgivaro -lgmp -lgmpxx\n```\nThis is linbox upstream issue https://github.com/linbox-team/linbox/pull/170\n\nThis ticket fixes both.\n\n\n**CC:**  @kiwifb @ClementPernet @antonio-rojas @dimpase @mkoeppe @isuruf @vbraun\n\n**Branch:** [d678f78a41dc5f75c7166678c79e1640b5941b26](https://github.com/sagemath/sagetrac-mirror/commit/d678f78a41dc5f75c7166678c79e1640b5941b26)\n\n**Reviewer:** Dima Pasechnik\n\n**Author:** Tobias Hansen, Matthias Koeppe\n\nIssue created by migration from https://trac.sagemath.org/ticket/27205\n\n",
    "closed_at": "2020-04-23T22:33:30Z",
    "created_at": "2019-02-02T13:31:29Z",
    "labels": [
        "component: build",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.1",
    "title": "Don't ignore \"pkg-config --libs-only-other\" when building sagelib; and fix linbox.pc",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/27205",
    "user": "https://github.com/tobihan"
}
```
When sage uses pkgconfig to determine compile flags, for example in `src/module_list.py` and `src/sage/env.py` it only extracts the "libraries" but not the "libs" field from pkg-config. In the case of fflas-ffpack this field (as well as cflags) contains `-fopenmp`. So sage builds but does not link with this flag which leads to missing symbols on Ubuntu:

```
ImportError: /<<PKGBUILDDIR>>/debian/build/usr/lib/python2.7/dist-packages/sage/matrix/matrix_modn_sparse.so: undefined symbol: GOMP_loop_ull_runtime_start
```

This was mentioned in https://bugs.debian.org/919573 .

To reproduce:

```
  tox -e docker-debian-bullseye-standard
```
The resulting sage crashes on startup with the above error.

Applying the Debian patch reveals another Sage bug:

```
$ pkg-config --libs linbox
-L/sage/local/lib -llinbox @LINBOXSAGE_LIBS@ -lntl -lmpfr -liml -lflint -fopenmp -lblas -llapack -lgivaro -lgmp -lgmpxx
```
This is linbox upstream issue https://github.com/linbox-team/linbox/pull/170

This ticket fixes both.


**CC:**  @kiwifb @ClementPernet @antonio-rojas @dimpase @mkoeppe @isuruf @vbraun

**Branch:** [d678f78a41dc5f75c7166678c79e1640b5941b26](https://github.com/sagemath/sagetrac-mirror/commit/d678f78a41dc5f75c7166678c79e1640b5941b26)

**Reviewer:** Dima Pasechnik

**Author:** Tobias Hansen, Matthias Koeppe

Issue created by migration from https://trac.sagemath.org/ticket/27205





---

archive/issue_comments_422644.json:
```json
{
    "body": "<a id='comment:1'></a>\nI think we are either misusing `pkgconfig` or there is something wrong with `pkgconfig` upstream.",
    "created_at": "2019-02-03T11:46:15Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422644",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:1'></a>
I think we are either misusing `pkgconfig` or there is something wrong with `pkgconfig` upstream.



---

archive/issue_comments_422645.json:
```json
{
    "body": "<a id='comment:2'></a>\n`pkg-config --libs` or `pkgconfig.libs(pkg)` in Python gives the LDFLAGS required for the package. According to the manpage of pkg-config this splits into `pkg-config --libs-only-l`, `pkg-config --libs-only-L` and `pkg-config --libs-only-other`. \n\nWhat sage does is to get `pkg-config --libs-only-l`, `pkg-config --libs-only-L` by means of `pkgconfig.parse(pkg)['libraries']` and `pkgconfig.parse(pkg)['library_dirs']`, missing the content of `pkg-config --libs-only-other`.",
    "created_at": "2019-02-03T12:05:02Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422645",
    "user": "https://github.com/tobihan"
}
```

<a id='comment:2'></a>
`pkg-config --libs` or `pkgconfig.libs(pkg)` in Python gives the LDFLAGS required for the package. According to the manpage of pkg-config this splits into `pkg-config --libs-only-l`, `pkg-config --libs-only-L` and `pkg-config --libs-only-other`. 

What sage does is to get `pkg-config --libs-only-l`, `pkg-config --libs-only-L` by means of `pkgconfig.parse(pkg)['libraries']` and `pkgconfig.parse(pkg)['library_dirs']`, missing the content of `pkg-config --libs-only-other`.



---

archive/issue_comments_422646.json:
```json
{
    "body": "<a id='comment:3'></a>\nThere is `extra_link_args` to specify the remaining LDFLAGS in distutils extensions.",
    "created_at": "2019-02-05T15:10:57Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422646",
    "user": "https://github.com/tobihan"
}
```

<a id='comment:3'></a>
There is `extra_link_args` to specify the remaining LDFLAGS in distutils extensions.



---

archive/issue_comments_422647.json:
```json
{
    "body": "<a id='comment:4'></a>\nI created this patch which takes care of the extra flags only for linbox and fflas-ffpack for now:\n\nhttps://salsa.debian.org/science-team/sagemath/blob/master/debian/patches/u1-pkgconfig-extra-link-flags.patch\n\nTo apply it here, should I do the same for all modules that use pkgconfig in env.py and module_list.py?",
    "created_at": "2019-02-06T10:56:27Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422647",
    "user": "https://github.com/tobihan"
}
```

<a id='comment:4'></a>
I created this patch which takes care of the extra flags only for linbox and fflas-ffpack for now:

https://salsa.debian.org/science-team/sagemath/blob/master/debian/patches/u1-pkgconfig-extra-link-flags.patch

To apply it here, should I do the same for all modules that use pkgconfig in env.py and module_list.py?



---

archive/issue_comments_422648.json:
```json
{
    "body": "<a id='comment:6'></a>\nClearly an oversight on my part when I last updated that pkg-config bit. I didn't know about `--libs-only-other` and thought we would get something like `-fopenmp` from `cflags`. I see `pkgconfig` (the python binding) had a few new releases since I last updated it, but nothing that would help.\n\nI think we should make a feature request for upstream `pkgconfig` so we can simplify the stuff in your patch. Did you make one? \n\nFor the case at hand here in Gentoo I don't have any problems with linking. I am guessing this is because `libgomp` is in the `NEEDED` list of `libfflas`. I am more concerned that `-fopenmp` in not in `CFLAGS` where it could have an impact on section of headers being used. At linking it only bring the openmp runtime (libgomp when using gcc) which feels a little bit too late and is only interesting if you have a direct use of openmp symbol or indirect but unresolved ones (which is not the case for me here).",
    "created_at": "2019-02-06T22:03:18Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422648",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:6'></a>
Clearly an oversight on my part when I last updated that pkg-config bit. I didn't know about `--libs-only-other` and thought we would get something like `-fopenmp` from `cflags`. I see `pkgconfig` (the python binding) had a few new releases since I last updated it, but nothing that would help.

I think we should make a feature request for upstream `pkgconfig` so we can simplify the stuff in your patch. Did you make one? 

For the case at hand here in Gentoo I don't have any problems with linking. I am guessing this is because `libgomp` is in the `NEEDED` list of `libfflas`. I am more concerned that `-fopenmp` in not in `CFLAGS` where it could have an impact on section of headers being used. At linking it only bring the openmp runtime (libgomp when using gcc) which feels a little bit too late and is only interesting if you have a direct use of openmp symbol or indirect but unresolved ones (which is not the case for me here).



---

archive/issue_comments_422649.json:
```json
{
    "body": "<a id='comment:7'></a>\nI have opened https://github.com/matze/pkgconfig/issues/38 for upstream pkgconfig to help deal with this issue. Of course in the meantime the debian patch is OK.",
    "created_at": "2019-02-06T22:35:12Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422649",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:7'></a>
I have opened https://github.com/matze/pkgconfig/issues/38 for upstream pkgconfig to help deal with this issue. Of course in the meantime the debian patch is OK.



---

archive/issue_comments_422650.json:
```json
{
    "body": "<a id='comment:8'></a>\nThanks. On Debian `-fopenmp` *is* in the cflags of linbox and fflas-ffpack. That's precisely why this was discovered: If you build with this flag you also need to link with it. The build failed on Ubuntu with a missing symbol from libgomp. For some reason that I don't know the build didn't fail on Debian.",
    "created_at": "2019-02-07T00:14:08Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422650",
    "user": "https://github.com/tobihan"
}
```

<a id='comment:8'></a>
Thanks. On Debian `-fopenmp` *is* in the cflags of linbox and fflas-ffpack. That's precisely why this was discovered: If you build with this flag you also need to link with it. The build failed on Ubuntu with a missing symbol from libgomp. For some reason that I don't know the build didn't fail on Debian.



---

archive/issue_comments_422651.json:
```json
{
    "body": "<a id='comment:9'></a>\nWell, I have been giving this some thoughts and I have come to the conclusion that you cannot have that problem unless either `libfflas.so` or `libffpack.so` is underlinked relative to `libgomp`. linbox, while it does have a openmp configure option, doesn't link to the openmp runtime as far as I can see. So the trouble come from fflas-ffpack.",
    "created_at": "2019-02-07T00:21:45Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422651",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:9'></a>
Well, I have been giving this some thoughts and I have come to the conclusion that you cannot have that problem unless either `libfflas.so` or `libffpack.so` is underlinked relative to `libgomp`. linbox, while it does have a openmp configure option, doesn't link to the openmp runtime as far as I can see. So the trouble come from fflas-ffpack.



---

archive/issue_comments_422652.json:
```json
{
    "body": "<a id='comment:10'></a>\nAfter closer inspection it could also happen if you use openblas compiled with openmp and it is underlinked. I guess that's another possibility, and in that case adding fflas-ffpack's flag to fix it, is just accidental.",
    "created_at": "2019-02-07T00:29:38Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422652",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:10'></a>
After closer inspection it could also happen if you use openblas compiled with openmp and it is underlinked. I guess that's another possibility, and in that case adding fflas-ffpack's flag to fix it, is just accidental.



---

archive/issue_comments_422653.json:
```json
{
    "body": "<a id='comment:12'></a>\nTicket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)",
    "created_at": "2019-03-25T10:56:15Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422653",
    "user": "https://github.com/embray"
}
```

<a id='comment:12'></a>
Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)



---

archive/issue_events_240212.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "milestone": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27205#event-240212"
}
```



---

archive/issue_events_240213.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27205#event-240213"
}
```



---

archive/issue_events_240214.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:54:19Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27205#event-240214"
}
```



---

archive/issue_comments_422654.json:
```json
{
    "body": "<a id='comment:13'></a>\nAs the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).",
    "created_at": "2019-06-14T14:54:19Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422654",
    "user": "https://github.com/embray"
}
```

<a id='comment:13'></a>
As the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).



---

archive/issue_comments_422655.json:
```json
{
    "body": "<a id='comment:14'></a>\nI have also been seeing problems like this on Cygwin lately, though I'm not sure where it began.\n\nI've been compiling fflas-ffpack with `FFLAS_FFPACK_CONFIGURE=--disable-openmp`.",
    "created_at": "2019-11-13T13:33:46Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422655",
    "user": "https://github.com/embray"
}
```

<a id='comment:14'></a>
I have also been seeing problems like this on Cygwin lately, though I'm not sure where it began.

I've been compiling fflas-ffpack with `FFLAS_FFPACK_CONFIGURE=--disable-openmp`.



---

archive/issue_events_240215.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T07:21:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27205#event-240215"
}
```



---

archive/issue_comments_422656.json:
```json
{
    "body": "<a id='comment:16'></a>\nI think this is showing up in https://github.com/mkoeppe/sage/runs/581024689?check_suite_focus=true too",
    "created_at": "2020-04-14T07:21:10Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422656",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'></a>
I think this is showing up in https://github.com/mkoeppe/sage/runs/581024689?check_suite_focus=true too



---

archive/issue_events_240216.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-15T14:40:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "label": "blocker",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27205#event-240216"
}
```



---

archive/issue_comments_422657.json:
```json
{
    "body": "<a id='comment:18'></a>\nthis seems to be related to OpenMP:\n\n```\n2020-04-12T20:04:09.1360983Z   [dochtml]   ImportError: /sage/local/lib/python3.7/site-packages/sage/matrix/matrix_modn_sparse.cpython-37m-x86_64-linux-gnu.so: undefined symbol: GOMP_loop_ull_maybe_nonmonotonic_runtime_next\n```",
    "created_at": "2020-04-15T17:10:45Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422657",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:18'></a>
this seems to be related to OpenMP:

```
2020-04-12T20:04:09.1360983Z   [dochtml]   ImportError: /sage/local/lib/python3.7/site-packages/sage/matrix/matrix_modn_sparse.cpython-37m-x86_64-linux-gnu.so: undefined symbol: GOMP_loop_ull_maybe_nonmonotonic_runtime_next
```



---

archive/issue_comments_422658.json:
```json
{
    "body": "<a id='comment:20'></a>\nLooks like fflas-ffpack have openmp pragmas on their header files. Sage should detect whether `__FFLASFFPACK_USE_OPENMP` is defined in `spkg-configure.m4` and add `-fopenmp` to `extra_link_args` until the `pkgconfig` issue is fixed",
    "created_at": "2020-04-15T22:06:30Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422658",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:20'></a>
Looks like fflas-ffpack have openmp pragmas on their header files. Sage should detect whether `__FFLASFFPACK_USE_OPENMP` is defined in `spkg-configure.m4` and add `-fopenmp` to `extra_link_args` until the `pkgconfig` issue is fixed



---

archive/issue_events_240217.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-17T00:31:46Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "rename": {
        "from": "Sage ignores libs from pkgconfig",
        "to": "Sage ignores libs from pkgconfig; also linbox.pc broken by a Sage patch"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27205#event-240217"
}
```



---

archive/issue_comments_422659.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -5,3 +5,19 @@\n ```\n \n This was mentioned in https://bugs.debian.org/919573 .\n+\n+To reproduce:\n+\n+```\n+  tox -e docker-debian-bullseye-standard\n+```\n+The resulting sage crashes on startup with the above error.\n+\n+Applying the Debian patch reveals another Sage bug:\n+\n+```\n+$ pkg-config --libs linbox\n+-L/sage/local/lib -llinbox @LINBOXSAGE_LIBS@ -lntl -lmpfr -liml -lflint -fopenmp -lblas -llapack -lgivaro -lgmp -lgmpxx\n+```\n+\n+\n``````\n",
    "created_at": "2020-04-17T00:31:46Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422659",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -5,3 +5,19 @@
 ```
 
 This was mentioned in https://bugs.debian.org/919573 .
+
+To reproduce:
+
+```
+  tox -e docker-debian-bullseye-standard
+```
+The resulting sage crashes on startup with the above error.
+
+Applying the Debian patch reveals another Sage bug:
+
+```
+$ pkg-config --libs linbox
+-L/sage/local/lib -llinbox @LINBOXSAGE_LIBS@ -lntl -lmpfr -liml -lflint -fopenmp -lblas -llapack -lgivaro -lgmp -lgmpxx
+```
+
+
``````




---

archive/issue_comments_422660.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -19,5 +19,5 @@\n $ pkg-config --libs linbox\n -L/sage/local/lib -llinbox @LINBOXSAGE_LIBS@ -lntl -lmpfr -liml -lflint -fopenmp -lblas -llapack -lgivaro -lgmp -lgmpxx\n ```\n+This is linbox upstream issue https://github.com/linbox-team/linbox/pull/170\n \n-\n``````\n",
    "created_at": "2020-04-17T01:11:20Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422660",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -19,5 +19,5 @@
 $ pkg-config --libs linbox
 -L/sage/local/lib -llinbox @LINBOXSAGE_LIBS@ -lntl -lmpfr -liml -lflint -fopenmp -lblas -llapack -lgivaro -lgmp -lgmpxx
 ```
+This is linbox upstream issue https://github.com/linbox-team/linbox/pull/170
 
-
``````




---

archive/issue_comments_422661.json:
```json
{
    "body": "**Branch:** [u/mkoeppe/sage_ignores_libs_from_pkgconfig__also_linbox_pc_broken_by_a_sage_patch](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage_ignores_libs_from_pkgconfig__also_linbox_pc_broken_by_a_sage_patch)",
    "created_at": "2020-04-17T01:16:58Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422661",
    "user": "https://github.com/mkoeppe"
}
```

**Branch:** [u/mkoeppe/sage_ignores_libs_from_pkgconfig__also_linbox_pc_broken_by_a_sage_patch](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage_ignores_libs_from_pkgconfig__also_linbox_pc_broken_by_a_sage_patch)



---

archive/issue_comments_422662.json:
```json
{
    "body": "**Commit:** [257f0572b74fa06f8dc05cfe00db582e785fdd5c](https://github.com/sagemath/sagetrac-mirror/commit/257f0572b74fa06f8dc05cfe00db582e785fdd5c)",
    "created_at": "2020-04-17T01:21:21Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422662",
    "user": "https://github.com/mkoeppe"
}
```

**Commit:** [257f0572b74fa06f8dc05cfe00db582e785fdd5c](https://github.com/sagemath/sagetrac-mirror/commit/257f0572b74fa06f8dc05cfe00db582e785fdd5c)



---

archive/issue_events_240218.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-17T01:21:21Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "rename": {
        "from": "Sage ignores libs from pkgconfig; also linbox.pc broken by a Sage patch",
        "to": "Pass \"pkg-config --libs-only-other\" and fix linbox.pc"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27205#event-240218"
}
```



---

archive/issue_comments_422663.json:
```json
{
    "body": "<a id='comment:24'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f5ccfc84215acfb8d190e247b52b4d5fa5e8ba59\">f5ccfc8</a></td><td><code>Also use LDFLAGS from pkg-config that are not -l or -L</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/257f0572b74fa06f8dc05cfe00db582e785fdd5c\">257f057</a></td><td><code>Add linbox patch</code></td></tr></table>\n",
    "created_at": "2020-04-17T01:21:21Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422663",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:24'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f5ccfc84215acfb8d190e247b52b4d5fa5e8ba59">f5ccfc8</a></td><td><code>Also use LDFLAGS from pkg-config that are not -l or -L</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/257f0572b74fa06f8dc05cfe00db582e785fdd5c">257f057</a></td><td><code>Add linbox patch</code></td></tr></table>




---

archive/issue_comments_422664.json:
```json
{
    "body": "**Author:** Tobias Hansen, Matthias Koeppe",
    "created_at": "2020-04-17T01:21:21Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422664",
    "user": "https://github.com/mkoeppe"
}
```

**Author:** Tobias Hansen, Matthias Koeppe



---

archive/issue_events_240219.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-17T01:22:19Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "rename": {
        "from": "Pass \"pkg-config --libs-only-other\" and fix linbox.pc",
        "to": "Don't ignore \"pkg-config --libs-only-other\" when building sagelib; and fix linbox.pc"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27205#event-240219"
}
```



---

archive/issue_comments_422665.json:
```json
{
    "body": "<a id='comment:26'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/79a6577366bade22b96acddf4d2ec58772dad385\">79a6577</a></td><td><code>backport patch</code></td></tr></table>\n",
    "created_at": "2020-04-17T03:05:02Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422665",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/79a6577366bade22b96acddf4d2ec58772dad385">79a6577</a></td><td><code>backport patch</code></td></tr></table>




---

archive/issue_comments_422666.json:
```json
{
    "body": "**Changing commit** from \"[257f0572b74fa06f8dc05cfe00db582e785fdd5c](https://github.com/sagemath/sagetrac-mirror/commit/257f0572b74fa06f8dc05cfe00db582e785fdd5c)\" to \"[79a6577366bade22b96acddf4d2ec58772dad385](https://github.com/sagemath/sagetrac-mirror/commit/79a6577366bade22b96acddf4d2ec58772dad385)\".",
    "created_at": "2020-04-17T03:05:02Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422666",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[257f0572b74fa06f8dc05cfe00db582e785fdd5c](https://github.com/sagemath/sagetrac-mirror/commit/257f0572b74fa06f8dc05cfe00db582e785fdd5c)" to "[79a6577366bade22b96acddf4d2ec58772dad385](https://github.com/sagemath/sagetrac-mirror/commit/79a6577366bade22b96acddf4d2ec58772dad385)".



---

archive/issue_comments_422667.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -21,3 +21,5 @@\n ```\n This is linbox upstream issue https://github.com/linbox-team/linbox/pull/170\n \n+This ticket fixes both.\n+\n``````\n",
    "created_at": "2020-04-17T04:32:16Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422667",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -21,3 +21,5 @@
 ```
 This is linbox upstream issue https://github.com/linbox-team/linbox/pull/170
 
+This ticket fixes both.
+
``````




---

archive/issue_comments_422668.json:
```json
{
    "body": "<a id='comment:27'></a>\nFixes the problem on `debian-bullseye-standard`.",
    "created_at": "2020-04-17T04:32:16Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422668",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>
Fixes the problem on `debian-bullseye-standard`.



---

archive/issue_events_240220.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-17T04:32:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27205#event-240220"
}
```



---

archive/issue_comments_422669.json:
```json
{
    "body": "<a id='comment:28'></a>\ngood catch. needs testing.\n\nby the way, is there a ticket to make gh action testing doable from CLI?",
    "created_at": "2020-04-17T08:28:17Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422669",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:28'></a>
good catch. needs testing.

by the way, is there a ticket to make gh action testing doable from CLI?



---

archive/issue_comments_422670.json:
```json
{
    "body": "<a id='comment:29'></a>\nTests running at https://github.com/mkoeppe/sage/actions/runs/80516747",
    "created_at": "2020-04-17T15:59:18Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422670",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:29'></a>
Tests running at https://github.com/mkoeppe/sage/actions/runs/80516747



---

archive/issue_comments_422671.json:
```json
{
    "body": "<a id='comment:30'></a>\nReplying to [@dimpase](#comment%3A28):\n> by the way, is there a ticket to make gh action testing doable from CLI?\n\nNo ticket; but from a comment in #29087:\n`gh pr create -f -d` would be a command line interface to trigger the GH actions run. \u200bhttps://cli.github.com/manual/gh_pr_create",
    "created_at": "2020-04-17T16:03:03Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422671",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:30'></a>
Replying to [@dimpase](#comment%3A28):
> by the way, is there a ticket to make gh action testing doable from CLI?

No ticket; but from a comment in #29087:
`gh pr create -f -d` would be a command line interface to trigger the GH actions run. â€‹https://cli.github.com/manual/gh_pr_create



---

archive/issue_comments_422672.json:
```json
{
    "body": "<a id='comment:31'></a>\nThe tests are ready; needs review",
    "created_at": "2020-04-18T04:14:12Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422672",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:31'></a>
The tests are ready; needs review



---

archive/issue_comments_422673.json:
```json
{
    "body": "<a id='comment:32'></a>\nLet's get this into 9.1 please...",
    "created_at": "2020-04-18T16:05:30Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422673",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:32'></a>
Let's get this into 9.1 please...



---

archive/issue_comments_422674.json:
```json
{
    "body": "<a id='comment:33'></a>\nlgtm, thanks.",
    "created_at": "2020-04-18T16:16:51Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422674",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:33'></a>
lgtm, thanks.



---

archive/issue_comments_422675.json:
```json
{
    "body": "**Reviewer:** Dima Pasechnik",
    "created_at": "2020-04-18T16:16:51Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422675",
    "user": "https://github.com/dimpase"
}
```

**Reviewer:** Dima Pasechnik



---

archive/issue_events_240221.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-04-18T16:16:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27205#event-240221"
}
```



---

archive/issue_events_240222.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-04-18T16:16:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27205#event-240222"
}
```



---

archive/issue_comments_422676.json:
```json
{
    "body": "<a id='comment:34'></a>\nThanks!",
    "created_at": "2020-04-18T18:03:51Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422676",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:34'></a>
Thanks!



---

archive/issue_events_240223.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-04-20T22:22:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27205#event-240223"
}
```



---

archive/issue_events_240224.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-04-20T22:22:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27205#event-240224"
}
```



---

archive/issue_comments_422677.json:
```json
{
    "body": "<a id='comment:35'></a>\nSee patchbot:\n\n```\n[sagelib-9.1.rc0] g++: error: LINBOXSAGE_LIBS@: No such file or directory\n```",
    "created_at": "2020-04-20T22:22:38Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422677",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:35'></a>
See patchbot:

```
[sagelib-9.1.rc0] g++: error: LINBOXSAGE_LIBS@: No such file or directory
```



---

archive/issue_comments_422678.json:
```json
{
    "body": "<a id='comment:36'></a>\nShould have bumped the patch level",
    "created_at": "2020-04-20T22:54:52Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422678",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:36'></a>
Should have bumped the patch level



---

archive/issue_comments_422679.json:
```json
{
    "body": "<a id='comment:37'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d678f78a41dc5f75c7166678c79e1640b5941b26\">d678f78</a></td><td><code>build/pkgs/linbox/package-version.txt: Bump up the patchlevel so that incremental builds of sagelib do not fail</code></td></tr></table>\n",
    "created_at": "2020-04-20T22:56:17Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422679",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:37'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d678f78a41dc5f75c7166678c79e1640b5941b26">d678f78</a></td><td><code>build/pkgs/linbox/package-version.txt: Bump up the patchlevel so that incremental builds of sagelib do not fail</code></td></tr></table>




---

archive/issue_comments_422680.json:
```json
{
    "body": "**Changing commit** from \"[79a6577366bade22b96acddf4d2ec58772dad385](https://github.com/sagemath/sagetrac-mirror/commit/79a6577366bade22b96acddf4d2ec58772dad385)\" to \"[d678f78a41dc5f75c7166678c79e1640b5941b26](https://github.com/sagemath/sagetrac-mirror/commit/d678f78a41dc5f75c7166678c79e1640b5941b26)\".",
    "created_at": "2020-04-20T22:56:17Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422680",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[79a6577366bade22b96acddf4d2ec58772dad385](https://github.com/sagemath/sagetrac-mirror/commit/79a6577366bade22b96acddf4d2ec58772dad385)" to "[d678f78a41dc5f75c7166678c79e1640b5941b26](https://github.com/sagemath/sagetrac-mirror/commit/d678f78a41dc5f75c7166678c79e1640b5941b26)".



---

archive/issue_events_240225.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-20T22:56:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27205#event-240225"
}
```



---

archive/issue_events_240226.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-20T22:56:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27205#event-240226"
}
```



---

archive/issue_events_240227.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-04-23T22:33:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27205#event-240227"
}
```



---

archive/issue_events_240228.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "e40cbb5e55cc7a1bcd0e8627c1f226a2c5f7cd84",
    "created_at": "2020-04-23T22:33:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27205#event-240228"
}
```



---

archive/issue_comments_422681.json:
```json
{
    "body": "**Changing branch** from \"[u/mkoeppe/sage_ignores_libs_from_pkgconfig__also_linbox_pc_broken_by_a_sage_patch](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage_ignores_libs_from_pkgconfig__also_linbox_pc_broken_by_a_sage_patch)\" to \"[d678f78a41dc5f75c7166678c79e1640b5941b26](https://github.com/sagemath/sagetrac-mirror/commit/d678f78a41dc5f75c7166678c79e1640b5941b26)\".",
    "created_at": "2020-04-23T22:33:30Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422681",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/mkoeppe/sage_ignores_libs_from_pkgconfig__also_linbox_pc_broken_by_a_sage_patch](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage_ignores_libs_from_pkgconfig__also_linbox_pc_broken_by_a_sage_patch)" to "[d678f78a41dc5f75c7166678c79e1640b5941b26](https://github.com/sagemath/sagetrac-mirror/commit/d678f78a41dc5f75c7166678c79e1640b5941b26)".



---

archive/issue_comments_422682.json:
```json
{
    "body": "<a id='comment:40'></a>\nDoes this ticket fix the following error when building the documentation?\n\n```\n [dochtml] installing. Log file: logs/dochtml.log\n  [dochtml] error installing, exit status 1. End of log file:\n  [dochtml]   Traceback (most recent call last):\n  [dochtml]     File \"/sage/local/lib/python3.7/runpy.py\", line 183, in _run_module_as_main\n  [dochtml]       mod_name, mod_spec, code = _get_module_details(mod_name, _Error)\n  [dochtml]     File \"/sage/local/lib/python3.7/runpy.py\", line 142, in _get_module_details\n  [dochtml]       return _get_module_details(pkg_main_name, error)\n  [dochtml]     File \"/sage/local/lib/python3.7/runpy.py\", line 109, in _get_module_details\n  [dochtml]       __import__(pkg_name)\n  [dochtml]     File \"/sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 59, in <module>\n  [dochtml]       import sage.all\n  [dochtml]     File \"/sage/local/lib/python3.7/site-packages/sage/all.py\", line 132, in <module>\n  [dochtml]       from sage.matrix.all     import *\n  [dochtml]     File \"/sage/local/lib/python3.7/site-packages/sage/matrix/__init__.py\", line 2, in <module>\n  [dochtml]       import sage.matrix.args\n  [dochtml]     File \"sage/matrix/args.pyx\", line 23, in init sage.matrix.args (build/cythonized/sage/matrix/args.c:21217)\n  [dochtml]     File \"/sage/local/lib/python3.7/site-packages/sage/matrix/matrix_space.py\", line 46, in <module>\n  [dochtml]       from . import matrix_modn_sparse\n  [dochtml]   ImportError: /sage/local/lib/python3.7/site-packages/sage/matrix/matrix_modn_sparse.cpython-37m-x86_64-linux-gnu.so: undefined symbol: GOMP_loop_ull_maybe_nonmonotonic_runtime_next\n  [dochtml] Full log file: logs/dochtml.log\n```\n\nE.g. on ubuntu-focal or debian bullseye: [https://github.com/mkoeppe/sage/runs/610674634](https://github.com/mkoeppe/sage/runs/610674634)\n\nThis is a new bug that appears to have been introduced in 9.1.rc1.",
    "created_at": "2020-04-24T05:09:02Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422682",
    "user": "https://github.com/kliem"
}
```

<a id='comment:40'></a>
Does this ticket fix the following error when building the documentation?

```
 [dochtml] installing. Log file: logs/dochtml.log
  [dochtml] error installing, exit status 1. End of log file:
  [dochtml]   Traceback (most recent call last):
  [dochtml]     File "/sage/local/lib/python3.7/runpy.py", line 183, in _run_module_as_main
  [dochtml]       mod_name, mod_spec, code = _get_module_details(mod_name, _Error)
  [dochtml]     File "/sage/local/lib/python3.7/runpy.py", line 142, in _get_module_details
  [dochtml]       return _get_module_details(pkg_main_name, error)
  [dochtml]     File "/sage/local/lib/python3.7/runpy.py", line 109, in _get_module_details
  [dochtml]       __import__(pkg_name)
  [dochtml]     File "/sage/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 59, in <module>
  [dochtml]       import sage.all
  [dochtml]     File "/sage/local/lib/python3.7/site-packages/sage/all.py", line 132, in <module>
  [dochtml]       from sage.matrix.all     import *
  [dochtml]     File "/sage/local/lib/python3.7/site-packages/sage/matrix/__init__.py", line 2, in <module>
  [dochtml]       import sage.matrix.args
  [dochtml]     File "sage/matrix/args.pyx", line 23, in init sage.matrix.args (build/cythonized/sage/matrix/args.c:21217)
  [dochtml]     File "/sage/local/lib/python3.7/site-packages/sage/matrix/matrix_space.py", line 46, in <module>
  [dochtml]       from . import matrix_modn_sparse
  [dochtml]   ImportError: /sage/local/lib/python3.7/site-packages/sage/matrix/matrix_modn_sparse.cpython-37m-x86_64-linux-gnu.so: undefined symbol: GOMP_loop_ull_maybe_nonmonotonic_runtime_next
  [dochtml] Full log file: logs/dochtml.log
```

E.g. on ubuntu-focal or debian bullseye: [https://github.com/mkoeppe/sage/runs/610674634](https://github.com/mkoeppe/sage/runs/610674634)

This is a new bug that appears to have been introduced in 9.1.rc1.



---

archive/issue_comments_422683.json:
```json
{
    "body": "**Changing commit** from \"[d678f78a41dc5f75c7166678c79e1640b5941b26](https://github.com/sagemath/sagetrac-mirror/commit/d678f78a41dc5f75c7166678c79e1640b5941b26)\" to \"\".",
    "created_at": "2020-04-24T05:09:02Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422683",
    "user": "https://github.com/kliem"
}
```

**Changing commit** from "[d678f78a41dc5f75c7166678c79e1640b5941b26](https://github.com/sagemath/sagetrac-mirror/commit/d678f78a41dc5f75c7166678c79e1640b5941b26)" to "".



---

archive/issue_comments_422684.json:
```json
{
    "body": "<a id='comment:41'></a>\nYes, this ticket fixes this bug.",
    "created_at": "2020-04-24T14:09:43Z",
    "issue": "https://github.com/sagemath/sage/issues/27205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27205#issuecomment-422684",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:41'></a>
Yes, this ticket fixes this bug.
