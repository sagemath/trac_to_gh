# Issue 27763: Perl packages for polymake

archive/issues_027526.json:
```json
{
    "body": "To simplify installation of polymake, we add some required CPAN packages. \n\nIncluding recursive dependencies, these are 103 packages, a total of 7.5 MB of source archives, which we pack up as the source tar ball of the new spkg `perl_cpan_polymake_prereq`.\nThe source tar ball (attached) also contains a copy of the self-contained `cpanm` Perl script, which is used for installing the packages.\nIf `SAGE_CHECK=no`, only about 35 packages are installed. The rest of the dependencies are for testing.\n\nUsing an `spkg-configure.m4`, it is downloaded and installed only if the Perl packages are not already present on the system.\n\nThe `spkg-install` installs the packages via the package dependencies mechanism. If some of the packages are already installed in some version on the system, we do not install a newer version.\n\nTo try out:\n\n```\n   wget -P upstream https://trac.sagemath.org/raw-attachment/ticket/27763/perl_cpan_polymake_prereq-2019-05-19.tar.gz\n```\n\n\nSee also the sage-devel post about compilation: https://groups.google.com/forum/#!topic/sage-devel/ukJgMweHszU\n\n\nCC:  @dimpase @jplab lorenz@math.tu-berlin.de kastner@math.tu-berlin.de paffenholz@mathematik.tu-darmstadt.de\n\nAuthor: Matthias Koeppe\n\nBranch: u/mkoeppe/perl_packages_for_polymake\n\nStatus: needs_work\n\nDependencies: #29582\n\nCommit: 225dea925c37e385e74b8403d4ee294a3ca4e689\n\nIssue created by migration from https://trac.sagemath.org/ticket/27763\n\n",
    "created_at": "2019-05-03T09:47:53Z",
    "labels": [
        "component: packages: optional"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Perl packages for polymake",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27763",
    "user": "https://github.com/mkoeppe"
}
```
To simplify installation of polymake, we add some required CPAN packages. 

Including recursive dependencies, these are 103 packages, a total of 7.5 MB of source archives, which we pack up as the source tar ball of the new spkg `perl_cpan_polymake_prereq`.
The source tar ball (attached) also contains a copy of the self-contained `cpanm` Perl script, which is used for installing the packages.
If `SAGE_CHECK=no`, only about 35 packages are installed. The rest of the dependencies are for testing.

Using an `spkg-configure.m4`, it is downloaded and installed only if the Perl packages are not already present on the system.

The `spkg-install` installs the packages via the package dependencies mechanism. If some of the packages are already installed in some version on the system, we do not install a newer version.

To try out:

```
   wget -P upstream https://trac.sagemath.org/raw-attachment/ticket/27763/perl_cpan_polymake_prereq-2019-05-19.tar.gz
```


See also the sage-devel post about compilation: https://groups.google.com/forum/#!topic/sage-devel/ukJgMweHszU


CC:  @dimpase @jplab lorenz@math.tu-berlin.de kastner@math.tu-berlin.de paffenholz@mathematik.tu-darmstadt.de

Author: Matthias Koeppe

Branch: u/mkoeppe/perl_packages_for_polymake

Status: needs_work

Dependencies: #29582

Commit: 225dea925c37e385e74b8403d4ee294a3ca4e689

Issue created by migration from https://trac.sagemath.org/ticket/27763





---

archive/issue_comments_536550.json:
```json
{
    "body": "<a id='comment:2'></a>I'd suggest to have appropriate `spkg-configure.m4`, to avoid installing extra...\n\nBy the way, could you provide  `spkg-configure.m4` for `perl_term_readline_gnu`, and other already present as packages `polymake` deps (perl or not)?",
    "created_at": "2019-05-07T11:10:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536550",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:2'></a>I'd suggest to have appropriate `spkg-configure.m4`, to avoid installing extra...

By the way, could you provide  `spkg-configure.m4` for `perl_term_readline_gnu`, and other already present as packages `polymake` deps (perl or not)?



---

archive/issue_comments_536551.json:
```json
{
    "body": "<a id='comment:3'></a>Do you have a suggestion how to install these CPAN packages if they are not available?\nThere seems to be a large number of dependencies that each of the listed packages pulls in -- but probably many are \"standard\" on any system that has perl installed.",
    "created_at": "2019-05-07T11:13:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536551",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>Do you have a suggestion how to install these CPAN packages if they are not available?
There seems to be a large number of dependencies that each of the listed packages pulls in -- but probably many are "standard" on any system that has perl installed.



---

archive/issue_comments_536552.json:
```json
{
    "body": "<a id='comment:4'></a>I don't know much about perl. Does it have anything analogous to Python's pip, which allows direct installation from the net (from CPAN, I guess) ?",
    "created_at": "2019-05-07T11:26:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536552",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:4'></a>I don't know much about perl. Does it have anything analogous to Python's pip, which allows direct installation from the net (from CPAN, I guess) ?



---

archive/issue_comments_536553.json:
```json
{
    "body": "<a id='comment:5'></a>Yes, the `cpan` program does the equivalent of `pip`.",
    "created_at": "2019-05-07T11:30:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536553",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>Yes, the `cpan` program does the equivalent of `pip`.



---

archive/issue_comments_536554.json:
```json
{
    "body": "<a id='comment:6'></a>I tried something like `perl -MCPAN -e 'install XML::Writer'` but it seems to want to install stuff into `/usr/local` rather than `$SAGE_LOCAL`.\nDo you know how to set all this up properly?",
    "created_at": "2019-05-07T11:33:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536554",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:6'></a>I tried something like `perl -MCPAN -e 'install XML::Writer'` but it seems to want to install stuff into `/usr/local` rather than `$SAGE_LOCAL`.
Do you know how to set all this up properly?



---

archive/issue_comments_536555.json:
```json
{
    "body": "<a id='comment:7'></a>I have only used  `cpan -i`, which asks whether to install system wide or in the user's home directory.\nHere's some info: https://stackoverflow.com/questions/540640/how-can-i-install-a-cpan-module-into-a-local-directory\n\nI used something like this for `perl_term_readline_gnu`, but this is not going through cpan.",
    "created_at": "2019-05-07T11:56:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536555",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>I have only used  `cpan -i`, which asks whether to install system wide or in the user's home directory.
Here's some info: https://stackoverflow.com/questions/540640/how-can-i-install-a-cpan-module-into-a-local-directory

I used something like this for `perl_term_readline_gnu`, but this is not going through cpan.



---

archive/issue_comments_536556.json:
```json
{
    "body": "<a id='comment:8'></a>I don't know, it seems one needs to setup some `local::lib` magic, otherwise I keep getting errors trying to to install into `/usr/local`.\n\n`local::lib` is a Perl module that apparently allows one to use non-standard directories for module installation, it might not be in by default (e.g. it's not in Gentoo, one needs to install it).\n\nAnyhow - for checking in autoconf which perl modules are installed, one can use [AX_PROG_PERL_MODULES](https://www.gnu.org/software/autoconf-archive/ax_prog_perl_modules.html)",
    "created_at": "2019-05-07T12:59:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536556",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:8'></a>I don't know, it seems one needs to setup some `local::lib` magic, otherwise I keep getting errors trying to to install into `/usr/local`.

`local::lib` is a Perl module that apparently allows one to use non-standard directories for module installation, it might not be in by default (e.g. it's not in Gentoo, one needs to install it).

Anyhow - for checking in autoconf which perl modules are installed, one can use [AX_PROG_PERL_MODULES](https://www.gnu.org/software/autoconf-archive/ax_prog_perl_modules.html)



---

archive/issue_comments_536557.json:
```json
{
    "body": "<a id='comment:9'></a>I also had to install `File::Slurp` perl module. Fortunately on Gentoo there seems to be an (almost?) 1-to-1 correspondence between perl packages named `X::Y` and Gentoo packages named `X-Y`.\n\nI also see\n\n```\nFile \"src/sage/interfaces/polymake.py\", line 884, in sage.interfaces.polymake.Polymake._eval_line\nFailed example:\n    c                                 # optional - polymake\nExpected:\n    cube of dimension 15\nGot:\n    1\n    print ref(@SAGE590);\n    print reftype(@SAGE590);\n**********************************************************************\nFile \"src/sage/interfaces/polymake.py\", line 886, in sage.interfaces.polymake.Polymake._eval_line\nFailed example:\n    c.N_VERTICES                      # optional - polymake\nExpected:\n    32768\nGot:\n    Member function 'N_VERTICES' of  object\n```",
    "created_at": "2019-05-07T16:10:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536557",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:9'></a>I also had to install `File::Slurp` perl module. Fortunately on Gentoo there seems to be an (almost?) 1-to-1 correspondence between perl packages named `X::Y` and Gentoo packages named `X-Y`.

I also see

```
File "src/sage/interfaces/polymake.py", line 884, in sage.interfaces.polymake.Polymake._eval_line
Failed example:
    c                                 # optional - polymake
Expected:
    cube of dimension 15
Got:
    1
    print ref(@SAGE590);
    print reftype(@SAGE590);
**********************************************************************
File "src/sage/interfaces/polymake.py", line 886, in sage.interfaces.polymake.Polymake._eval_line
Failed example:
    c.N_VERTICES                      # optional - polymake
Expected:
    32768
Got:
    Member function 'N_VERTICES' of  object
```



---

archive/issue_comments_536558.json:
```json
{
    "body": "<a id='comment:10'></a>Replying to [comment:9 dimpase]:\n> I also had to install `File::Slurp` perl module.\n\n\nYes, this is already mentioned in `polymake/SPKG.txt`\n\n>  Fortunately on Gentoo there seems to be an (almost?) 1-to-1 correspondence between perl packages named `X::Y` and Gentoo packages named `X-Y`.\n\n> \n> I also see\n> \n> ```\n> File \"src/sage/interfaces/polymake.py\", line 884, in sage.interfaces.polymake.Polymake._eval_line\n> Failed example:\n>     c                                 # optional - polymake\n> Expected:\n>     cube of dimension 15\n> Got:\n>     1\n>     print ref(@SAGE590);\n>     print reftype(@SAGE590);\n> **********************************************************************\n> File \"src/sage/interfaces/polymake.py\", line 886, in sage.interfaces.polymake.Polymake._eval_line\n> Failed example:\n>     c.N_VERTICES                      # optional - polymake\n> Expected:\n>     32768\n> Got:\n>     Member function 'N_VERTICES' of  object\n> ```\n\nWith which version of polymake is this? The 3.4 upgrade ticket has fixes for something like this.",
    "created_at": "2019-05-07T16:14:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536558",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>Replying to [comment:9 dimpase]:
> I also had to install `File::Slurp` perl module.


Yes, this is already mentioned in `polymake/SPKG.txt`

>  Fortunately on Gentoo there seems to be an (almost?) 1-to-1 correspondence between perl packages named `X::Y` and Gentoo packages named `X-Y`.

> 
> I also see
> 
> ```
> File "src/sage/interfaces/polymake.py", line 884, in sage.interfaces.polymake.Polymake._eval_line
> Failed example:
>     c                                 # optional - polymake
> Expected:
>     cube of dimension 15
> Got:
>     1
>     print ref(@SAGE590);
>     print reftype(@SAGE590);
> **********************************************************************
> File "src/sage/interfaces/polymake.py", line 886, in sage.interfaces.polymake.Polymake._eval_line
> Failed example:
>     c.N_VERTICES                      # optional - polymake
> Expected:
>     32768
> Got:
>     Member function 'N_VERTICES' of  object
> ```

With which version of polymake is this? The 3.4 upgrade ticket has fixes for something like this.



---

archive/issue_comments_536559.json:
```json
{
    "body": "<a id='comment:11'></a>If I do\n\n```\n--- a/src/sage/interfaces/polymake.py\n+++ b/src/sage/interfaces/polymake.py\n@@ -874,10 +874,6 @@ class Polymake(ExtraTabCompletion, Expect):\n         sometimes it hangs, and therefore we remove it from the tests, for now::\n \n             sage: c = polymake.cube(15)             # optional - polymake\n-            sage: polymake.eval('print {}->F_VECTOR;'.format(c.name()), timeout=1) # optional - polymake # not tested\n-            Traceback (most recent call last):\n-            ...\n-            RuntimeError: Polymake fails to respond timely\n \n         We verify that after the timeout, polymake is still able to give answers::\n \n```\nthen the tests pass, so the timeout thing seems to be doing more harm than good.",
    "created_at": "2019-05-07T16:17:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536559",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:11'></a>If I do

```
--- a/src/sage/interfaces/polymake.py
+++ b/src/sage/interfaces/polymake.py
@@ -874,10 +874,6 @@ class Polymake(ExtraTabCompletion, Expect):
         sometimes it hangs, and therefore we remove it from the tests, for now::
 
             sage: c = polymake.cube(15)             # optional - polymake
-            sage: polymake.eval('print {}->F_VECTOR;'.format(c.name()), timeout=1) # optional - polymake # not tested
-            Traceback (most recent call last):
-            ...
-            RuntimeError: Polymake fails to respond timely
 
         We verify that after the timeout, polymake is still able to give answers::
 
```
then the tests pass, so the timeout thing seems to be doing more harm than good.



---

archive/issue_comments_536560.json:
```json
{
    "body": "<a id='comment:12'></a>I am testing this branch, so 3.4.",
    "created_at": "2019-05-07T16:18:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536560",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:12'></a>I am testing this branch, so 3.4.



---

archive/issue_comments_536561.json:
```json
{
    "body": "<a id='comment:13'></a>oops, sorry, wrong ticket. This is meant to be about polymake update to 3.4",
    "created_at": "2019-05-07T16:21:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536561",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:13'></a>oops, sorry, wrong ticket. This is meant to be about polymake update to 3.4



---

archive/issue_comments_536562.json:
```json
{
    "body": "<a id='comment:14'></a>yes, #24905.",
    "created_at": "2019-05-07T16:22:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536562",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>yes, #24905.



---

archive/issue_comments_536563.json:
```json
{
    "body": "<a id='comment:15'></a>Please see #27795 for using system's perm package `Term::ReadLine::Gnu`",
    "created_at": "2019-05-07T18:42:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536563",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:15'></a>Please see #27795 for using system's perm package `Term::ReadLine::Gnu`



---

archive/issue_comments_536564.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#24905, #27795\"",
    "created_at": "2019-05-10T13:16:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536564",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#24905, #27795"



---

archive/issue_comments_536565.json:
```json
{
    "body": "<a id='comment:17'></a>How about adding checks for all the needed perl packages in the style of #27795 to polymake itself?\nActually, it would be easier (per package), as `Term::ReadLine::Gnu` is non-standard in the sense one cannot just `use` it.\n\nAs usual, they pay a usability price by not using autotools :-)",
    "created_at": "2019-05-11T10:48:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536565",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:17'></a>How about adding checks for all the needed perl packages in the style of #27795 to polymake itself?
Actually, it would be easier (per package), as `Term::ReadLine::Gnu` is non-standard in the sense one cannot just `use` it.

As usual, they pay a usability price by not using autotools :-)



---

archive/issue_comments_536566.json:
```json
{
    "body": "<a id='comment:18'></a>Replying to [comment:17 dimpase]:\n> How about adding checks for all the needed perl packages in the style of #27795 to polymake itself?\n\n\npolymake itself does check for the packages needed at build time in its configure script.\nThe MongoDB package is checked at run time of polymake for the optional polyDB feature.",
    "created_at": "2019-05-11T11:36:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536566",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'></a>Replying to [comment:17 dimpase]:
> How about adding checks for all the needed perl packages in the style of #27795 to polymake itself?


polymake itself does check for the packages needed at build time in its configure script.
The MongoDB package is checked at run time of polymake for the optional polyDB feature.



---

archive/issue_comments_536567.json:
```json
{
    "body": "<a id='comment:19'></a>The challenge in this ticket is to make the installation of missing Perl packages not depend on internet access.\nHere's a possible approach.\n\nFirst install `App::cpanminus`. \nThen \n\n```\ncpanm --local-lib-contained $PERL_LOCAL_LIB_ROOT --exclude-vendor --save-dists $PARTIAL_CPAN_MIRROR XML::Writer XML::LibXML XML::LibXSLT File::Slurp Term::ReadLine::Gnu JSON SVG MongoDB\n```\nwill (1) download and install these prerequisites in $PERL_LOCAL_LIB_ROOT,\n(2) save the source packages in a directory tree $PARTIAL_CPAN_MIRROR.\n\nThese are 58 packages, a total of 5 MB of source archives, which we can pack up as the source tar ball of the new spkg `perl_cpan_polymake_prereq`. \n\nThen figure out how to install with plain `cpan` (not `cpanm`, which is not available out of the box on macOS) using this local partial CPAN mirror.",
    "created_at": "2019-05-11T11:57:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536567",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:19'></a>The challenge in this ticket is to make the installation of missing Perl packages not depend on internet access.
Here's a possible approach.

First install `App::cpanminus`. 
Then 

```
cpanm --local-lib-contained $PERL_LOCAL_LIB_ROOT --exclude-vendor --save-dists $PARTIAL_CPAN_MIRROR XML::Writer XML::LibXML XML::LibXSLT File::Slurp Term::ReadLine::Gnu JSON SVG MongoDB
```
will (1) download and install these prerequisites in $PERL_LOCAL_LIB_ROOT,
(2) save the source packages in a directory tree $PARTIAL_CPAN_MIRROR.

These are 58 packages, a total of 5 MB of source archives, which we can pack up as the source tar ball of the new spkg `perl_cpan_polymake_prereq`. 

Then figure out how to install with plain `cpan` (not `cpanm`, which is not available out of the box on macOS) using this local partial CPAN mirror.



---

archive/issue_comments_536568.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/perl_packages_for_polymake\"",
    "created_at": "2019-05-11T13:16:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536568",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/perl_packages_for_polymake"



---

archive/issue_comments_536569.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-11T13:16:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536569",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_536570.json:
```json
{
    "body": "Changing commit from \"\" to \"31b52237791b68a1d5e7231d0b1a66bffc75fb73\"",
    "created_at": "2019-05-11T13:16:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536570",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "31b52237791b68a1d5e7231d0b1a66bffc75fb73"



---

archive/issue_comments_536571.json:
```json
{
    "body": "Changing commit from \"31b52237791b68a1d5e7231d0b1a66bffc75fb73\" to \"749c447ad7a5ebc266b9d27a8ff59014b771b0b8\"",
    "created_at": "2019-05-13T20:38:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536571",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "31b52237791b68a1d5e7231d0b1a66bffc75fb73" to "749c447ad7a5ebc266b9d27a8ff59014b771b0b8"



---

archive/issue_comments_536572.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-13T20:38:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536572",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_536573.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-05-13T20:43:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536573",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_536574.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,9 @@\n To simplify installation of polymake, we add some required CPAN packages. \n \n+Including recursive dependencies, these are 58 packages, a total of 5 MB of source archives, which we pack up as the source tar ball of the new spkg `perl_cpan_polymake_prereq`.\n+The source tar ball also contains a copy of the self-contained `cpanm` Perl script, which is used for installing the packages.\n+\n+Using an `spkg-configure.m4`, it is downloaded and installed only if the Perl packages are not already present on the system.\n+\n+The `spkg-install` installs the packages via the package dependencies mechanism. If some of the packages are already installed in some version on the system, we do not install a newer version.\n+\n``````\n",
    "created_at": "2019-05-13T20:43:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536574",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,9 @@
 To simplify installation of polymake, we add some required CPAN packages. 
 
+Including recursive dependencies, these are 58 packages, a total of 5 MB of source archives, which we pack up as the source tar ball of the new spkg `perl_cpan_polymake_prereq`.
+The source tar ball also contains a copy of the self-contained `cpanm` Perl script, which is used for installing the packages.
+
+Using an `spkg-configure.m4`, it is downloaded and installed only if the Perl packages are not already present on the system.
+
+The `spkg-install` installs the packages via the package dependencies mechanism. If some of the packages are already installed in some version on the system, we do not install a newer version.
+
``````




---

archive/issue_comments_536575.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2019-05-13T20:43:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536575",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_536576.json:
```json
{
    "body": "Changing dependencies from \"#24905, #27795\" to \"\"",
    "created_at": "2019-05-13T20:43:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536576",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#24905, #27795" to ""



---

archive/issue_comments_536577.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-13T21:50:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536577",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_536578.json:
```json
{
    "body": "Changing commit from \"749c447ad7a5ebc266b9d27a8ff59014b771b0b8\" to \"aecb94acc7eaeab284616da3eb4aa43b63041091\"",
    "created_at": "2019-05-13T21:50:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536578",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "749c447ad7a5ebc266b9d27a8ff59014b771b0b8" to "aecb94acc7eaeab284616da3eb4aa43b63041091"



---

archive/issue_comments_536579.json:
```json
{
    "body": "Attachment [perl_cpan_polymake_prereq-2019-05-13.tar.gz](tarball://root/attachments/some-uuid/ticket27763/perl_cpan_polymake_prereq-2019-05-13.tar.gz) by @mkoeppe created at 2019-05-13 21:51:24",
    "created_at": "2019-05-13T21:51:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536579",
    "user": "https://github.com/mkoeppe"
}
```

Attachment [perl_cpan_polymake_prereq-2019-05-13.tar.gz](tarball://root/attachments/some-uuid/ticket27763/perl_cpan_polymake_prereq-2019-05-13.tar.gz) by @mkoeppe created at 2019-05-13 21:51:24



---

archive/issue_comments_536580.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,7 @@\n To simplify installation of polymake, we add some required CPAN packages. \n \n Including recursive dependencies, these are 58 packages, a total of 5 MB of source archives, which we pack up as the source tar ball of the new spkg `perl_cpan_polymake_prereq`.\n-The source tar ball also contains a copy of the self-contained `cpanm` Perl script, which is used for installing the packages.\n+The source tar ball (attached) also contains a copy of the self-contained `cpanm` Perl script, which is used for installing the packages.\n \n Using an `spkg-configure.m4`, it is downloaded and installed only if the Perl packages are not already present on the system.\n \n``````\n",
    "created_at": "2019-05-13T21:51:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536580",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,7 @@
 To simplify installation of polymake, we add some required CPAN packages. 
 
 Including recursive dependencies, these are 58 packages, a total of 5 MB of source archives, which we pack up as the source tar ball of the new spkg `perl_cpan_polymake_prereq`.
-The source tar ball also contains a copy of the self-contained `cpanm` Perl script, which is used for installing the packages.
+The source tar ball (attached) also contains a copy of the self-contained `cpanm` Perl script, which is used for installing the packages.
 
 Using an `spkg-configure.m4`, it is downloaded and installed only if the Perl packages are not already present on the system.
 
``````




---

archive/issue_comments_536581.json:
```json
{
    "body": "Attachment [polymake-3.4.log](tarball://root/attachments/some-uuid/ticket27763/polymake-3.4.log) by @jplab created at 2019-05-14 14:56:13\n\nCurious install log -> perl_term_readline_gnu",
    "created_at": "2019-05-14T14:56:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536581",
    "user": "https://github.com/jplab"
}
```

Attachment [polymake-3.4.log](tarball://root/attachments/some-uuid/ticket27763/polymake-3.4.log) by @jplab created at 2019-05-14 14:56:13

Curious install log -> perl_term_readline_gnu



---

archive/issue_comments_536582.json:
```json
{
    "body": "<a id='comment:27'></a>After I did install successfully polymake, the interface was broken (compile error of some sort). And tab completion did not work. Then I saw that `perm_term_readline_gnu` experimental package was not installed (although it seems like the configure step of the installation detected the local package but seemed like it can not use the local package).\n\nDoes that make sense? Unfortunately, I can not offer more traceback, I reached the end of my terminal buffer.\n\nIf needed, I could try to proceed similarly on a twin computer to see if I can reproduce this.",
    "created_at": "2019-05-14T14:59:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536582",
    "user": "https://github.com/jplab"
}
```

<a id='comment:27'></a>After I did install successfully polymake, the interface was broken (compile error of some sort). And tab completion did not work. Then I saw that `perm_term_readline_gnu` experimental package was not installed (although it seems like the configure step of the installation detected the local package but seemed like it can not use the local package).

Does that make sense? Unfortunately, I can not offer more traceback, I reached the end of my terminal buffer.

If needed, I could try to proceed similarly on a twin computer to see if I can reproduce this.



---

archive/issue_comments_536583.json:
```json
{
    "body": "<a id='comment:28'></a>By `local package` you mean `system package`, right?\n\nCan you uninstall Sage's `perm_term_readline_gnu` and then in terminal run\n\n```\nperl -e \"use Term::ReadLine; Term::ReadLine->get_all_function_names\" \n```\n- there should be no output if `perm_term_readline_gnu` is installed, and an error message otherwise.",
    "created_at": "2019-05-14T15:54:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536583",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:28'></a>By `local package` you mean `system package`, right?

Can you uninstall Sage's `perm_term_readline_gnu` and then in terminal run

```
perl -e "use Term::ReadLine; Term::ReadLine->get_all_function_names" 
```
- there should be no output if `perm_term_readline_gnu` is installed, and an error message otherwise.



---

archive/issue_comments_536584.json:
```json
{
    "body": "<a id='comment:29'></a>Also, run ./configure and see whether you have\n\n```\n    perl_term_readline_gnu-1.35 will not be installed (configure check)\n```\nin the output",
    "created_at": "2019-05-14T15:56:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536584",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:29'></a>Also, run ./configure and see whether you have

```
    perl_term_readline_gnu-1.35 will not be installed (configure check)
```
in the output



---

archive/issue_comments_536585.json:
```json
{
    "body": "<a id='comment:30'></a>I think it's possible that the system's `Term::ReadLine::Gnu` becomes unusable in the sage environment if sage installs its own libreadline. If for some reason we install our own libreadline, then we should probably also install `Term::ReadLine::Gnu`.",
    "created_at": "2019-05-14T21:51:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536585",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:30'></a>I think it's possible that the system's `Term::ReadLine::Gnu` becomes unusable in the sage environment if sage installs its own libreadline. If for some reason we install our own libreadline, then we should probably also install `Term::ReadLine::Gnu`.



---

archive/issue_comments_536586.json:
```json
{
    "body": "<a id='comment:31'></a>Or we could just revert #27795.",
    "created_at": "2019-05-14T21:54:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536586",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:31'></a>Or we could just revert #27795.



---

archive/issue_comments_536587.json:
```json
{
    "body": "<a id='comment:32'></a>when I wrote #27795 I was under impression that perl is isolated from sage's \"vendored madness\" libraries, as it is an independent executable, just like, say, bash.\n\nif the problem is indeed as you described then the right way forward is to get #27277 reviewed and merged.then readline wont get built if it is available.",
    "created_at": "2019-05-15T06:40:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536587",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:32'></a>when I wrote #27795 I was under impression that perl is isolated from sage's "vendored madness" libraries, as it is an independent executable, just like, say, bash.

if the problem is indeed as you described then the right way forward is to get #27277 reviewed and merged.then readline wont get built if it is available.



---

archive/issue_comments_536588.json:
```json
{
    "body": "<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-15T09:16:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536588",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_536589.json:
```json
{
    "body": "Changing commit from \"aecb94acc7eaeab284616da3eb4aa43b63041091\" to \"10189db608570332744cdc2c51ba6c471af1d00b\"",
    "created_at": "2019-05-15T09:16:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536589",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "aecb94acc7eaeab284616da3eb4aa43b63041091" to "10189db608570332744cdc2c51ba6c471af1d00b"



---

archive/issue_comments_536590.json:
```json
{
    "body": "<a id='comment:34'></a>Adding #27803 dependency to prevent merge conflict.",
    "created_at": "2019-05-15T09:16:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536590",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:34'></a>Adding #27803 dependency to prevent merge conflict.



---

archive/issue_comments_536591.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#27803\"",
    "created_at": "2019-05-15T09:16:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536591",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#27803"



---

archive/issue_comments_536592.json:
```json
{
    "body": "<a id='comment:35'></a>Replying to [comment:32 dimpase]:\n> when I wrote #27795 I was under impression that perl is isolated from sage's \"vendored madness\" libraries, as it is an independent executable, just like, say, bash.\n\n\nYes, the Perl executable is fine, but the myriad of CPAN packages link to lots of libraries.\n\n> if the problem is indeed as you described then the right way forward is to get #27277 reviewed and merged.then readline wont get built if it is available.\n\n\nOK.",
    "created_at": "2019-05-15T09:21:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536592",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:35'></a>Replying to [comment:32 dimpase]:
> when I wrote #27795 I was under impression that perl is isolated from sage's "vendored madness" libraries, as it is an independent executable, just like, say, bash.


Yes, the Perl executable is fine, but the myriad of CPAN packages link to lots of libraries.

> if the problem is indeed as you described then the right way forward is to get #27277 reviewed and merged.then readline wont get built if it is available.


OK.



---

archive/issue_comments_536593.json:
```json
{
    "body": "<a id='comment:36'></a>Replying to [comment:35 mkoeppe]:\n> Replying to [comment:32 dimpase]:\n> > when I wrote #27795 I was under impression that perl is isolated from sage's \"vendored madness\" libraries, as it is an independent executable, just like, say, bash.\n\n> \n> Yes, the Perl executable is fine, but the myriad of CPAN packages link to lots of libraries.\n\n\nyes, I understand this, but I imagine the only conflicts of this sort are possible if you run polymake as a python extension, that loads a wrong dll at runtime.\n\nAs I don't know how the polymake interface works, I can't tell whether this is the case.\n\nIn any case, could you explain where these *.so parts of perl packages may be found, so that I can look at them with ldd/otool ?",
    "created_at": "2019-05-15T09:29:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536593",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:36'></a>Replying to [comment:35 mkoeppe]:
> Replying to [comment:32 dimpase]:
> > when I wrote #27795 I was under impression that perl is isolated from sage's "vendored madness" libraries, as it is an independent executable, just like, say, bash.

> 
> Yes, the Perl executable is fine, but the myriad of CPAN packages link to lots of libraries.


yes, I understand this, but I imagine the only conflicts of this sort are possible if you run polymake as a python extension, that loads a wrong dll at runtime.

As I don't know how the polymake interface works, I can't tell whether this is the case.

In any case, could you explain where these *.so parts of perl packages may be found, so that I can look at them with ldd/otool ?



---

archive/issue_comments_536594.json:
```json
{
    "body": "<a id='comment:37'></a>If there is indeed a possible problem like this, build/pkgs/perl_term_readline_gnu/spkg-configure.m4 needs to be modified to include a check for readline.\n\nI would actually be more worried about a potential conflict between an incompatible readline library, say, on OSX, and the one built by Sage (or provided by Homebrew/MacPorts)...",
    "created_at": "2019-05-15T09:57:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536594",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:37'></a>If there is indeed a possible problem like this, build/pkgs/perl_term_readline_gnu/spkg-configure.m4 needs to be modified to include a check for readline.

I would actually be more worried about a potential conflict between an incompatible readline library, say, on OSX, and the one built by Sage (or provided by Homebrew/MacPorts)...



---

archive/issue_comments_536595.json:
```json
{
    "body": "<a id='comment:38'></a>Replying to [comment:29 dimpase]:\n> Also, run ./configure and see whether you have\n> \n> ```\n>     perl_term_readline_gnu-1.35 will not be installed (configure check)\n> ```\n> in the output\n\n\nYes, I met `system package`.\n\nOk, so here is the outcome.\n\nI ran the command \n\n`perl -e \"use Term::ReadLine; Term::ReadLine->get_all_function_names\"`\n\nbefore uninstalling `perl_term_readline_gnu`: No output.\n\nAfter uninstalling (inside of sage shell using the `sage-spkg-uninstall` command) I still get no output.\n\nThings now seems to work flawlessly using the interface though.\n\nRunning `./configure`, I do check the `(configure check)`.\n\nOk, so now it seems to catch the system `Term ReadLine`. I believe I know how it happened: I did install the perl libraries using `cpan -i XML::Writer XML::LibXML XML::LibXSLT File::Slurp JSON SVG` as the `sage -info polymake` suggested, but then, the installation of the polymake package was not preceeded by a rerun of `./configure` to catch the libraries that are now meanwhile to be found in my PATH? Somehow Sage still relied on its own `perl_term_readline_gnu` although the system one was found so it did not install the dependency. Weird.\n\nIf I run it on a clean computer, without the spkg `perl_term_readline_gnu` (and without any installation of the required perl libraries) I do get the error message (that now looks quite familiar to the one I was getting in Sage originally).\n\nOk, so in the end, I do not think there is an issue: I'll test it on fresh untouched debian machines to have a clean feedback.",
    "created_at": "2019-05-16T08:19:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536595",
    "user": "https://github.com/jplab"
}
```

<a id='comment:38'></a>Replying to [comment:29 dimpase]:
> Also, run ./configure and see whether you have
> 
> ```
>     perl_term_readline_gnu-1.35 will not be installed (configure check)
> ```
> in the output


Yes, I met `system package`.

Ok, so here is the outcome.

I ran the command 

`perl -e "use Term::ReadLine; Term::ReadLine->get_all_function_names"`

before uninstalling `perl_term_readline_gnu`: No output.

After uninstalling (inside of sage shell using the `sage-spkg-uninstall` command) I still get no output.

Things now seems to work flawlessly using the interface though.

Running `./configure`, I do check the `(configure check)`.

Ok, so now it seems to catch the system `Term ReadLine`. I believe I know how it happened: I did install the perl libraries using `cpan -i XML::Writer XML::LibXML XML::LibXSLT File::Slurp JSON SVG` as the `sage -info polymake` suggested, but then, the installation of the polymake package was not preceeded by a rerun of `./configure` to catch the libraries that are now meanwhile to be found in my PATH? Somehow Sage still relied on its own `perl_term_readline_gnu` although the system one was found so it did not install the dependency. Weird.

If I run it on a clean computer, without the spkg `perl_term_readline_gnu` (and without any installation of the required perl libraries) I do get the error message (that now looks quite familiar to the one I was getting in Sage originally).

Ok, so in the end, I do not think there is an issue: I'll test it on fresh untouched debian machines to have a clean feedback.



---

archive/issue_comments_536596.json:
```json
{
    "body": "<a id='comment:39'></a>Isn't the presence of `local::lib` module a pre-req for all these package installations to function?",
    "created_at": "2019-05-16T08:52:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536596",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:39'></a>Isn't the presence of `local::lib` module a pre-req for all these package installations to function?



---

archive/issue_comments_536597.json:
```json
{
    "body": "<a id='comment:40'></a>Replying to [comment:38 jipilab]:\n> Replying to [comment:29 dimpase]:\n> > Also, run ./configure and see whether you have\n> > \n> > ```\n> >     perl_term_readline_gnu-1.35 will not be installed (configure check)\n> > ```\n> > in the output\n\n> \n> Yes, I met `system package`.\n> \n> Ok, so here is the outcome.\n> \n> I ran the command \n> \n> `perl -e \"use Term::ReadLine; Term::ReadLine->get_all_function_names\"`\n> \n> before uninstalling `perl_term_readline_gnu`: No output.\n> \n> After uninstalling (inside of sage shell using the `sage-spkg-uninstall` command) I still get no output.\n> \n> Things now seems to work flawlessly using the interface though.\n> \n> Running `./configure`, I do check the `(configure check)`.\n> \n> Ok, so now it seems to catch the system `Term ReadLine`. I believe I know how it happened: I did install the perl libraries using `cpan -i XML::Writer XML::LibXML XML::LibXSLT File::Slurp JSON SVG` as the `sage -info polymake` suggested, but then, the installation of the polymake package was not preceeded by a rerun of `./configure` to catch the libraries that are now meanwhile to be found in my PATH? Somehow Sage still relied on its own `perl_term_readline_gnu` although the system one was found so it did not install the dependency. Weird.\n\n\nwell, this is by (somewhat unfortunate) design. Once you updated ./configure by installing/updating a `spkg-configure.m4` file in build/pkgs/foo/\nand you have foo installed in Sage and as a system package, the only way to switch from Sage-installed to system foo is to manually uninstall Sage's foo, and then re-run configure (othewise configure would check, and succeed in this, for Sage's foo first).\n\nThe main reason for that that some people do not want to retire the old `sage -f foo` as a way to install/update a package, see e.g. #27373...",
    "created_at": "2019-05-16T09:11:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536597",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:40'></a>Replying to [comment:38 jipilab]:
> Replying to [comment:29 dimpase]:
> > Also, run ./configure and see whether you have
> > 
> > ```
> >     perl_term_readline_gnu-1.35 will not be installed (configure check)
> > ```
> > in the output

> 
> Yes, I met `system package`.
> 
> Ok, so here is the outcome.
> 
> I ran the command 
> 
> `perl -e "use Term::ReadLine; Term::ReadLine->get_all_function_names"`
> 
> before uninstalling `perl_term_readline_gnu`: No output.
> 
> After uninstalling (inside of sage shell using the `sage-spkg-uninstall` command) I still get no output.
> 
> Things now seems to work flawlessly using the interface though.
> 
> Running `./configure`, I do check the `(configure check)`.
> 
> Ok, so now it seems to catch the system `Term ReadLine`. I believe I know how it happened: I did install the perl libraries using `cpan -i XML::Writer XML::LibXML XML::LibXSLT File::Slurp JSON SVG` as the `sage -info polymake` suggested, but then, the installation of the polymake package was not preceeded by a rerun of `./configure` to catch the libraries that are now meanwhile to be found in my PATH? Somehow Sage still relied on its own `perl_term_readline_gnu` although the system one was found so it did not install the dependency. Weird.


well, this is by (somewhat unfortunate) design. Once you updated ./configure by installing/updating a `spkg-configure.m4` file in build/pkgs/foo/
and you have foo installed in Sage and as a system package, the only way to switch from Sage-installed to system foo is to manually uninstall Sage's foo, and then re-run configure (othewise configure would check, and succeed in this, for Sage's foo first).

The main reason for that that some people do not want to retire the old `sage -f foo` as a way to install/update a package, see e.g. #27373...



---

archive/issue_comments_536598.json:
```json
{
    "body": "<a id='comment:41'></a>> well, this is by (somewhat unfortunate) design. Once you updated ./configure by installing/updating a `spkg-configure.m4` file in build/pkgs/foo/\n> and you have foo installed in Sage and as a system package, the only way to switch from Sage-installed to system foo is to manually uninstall Sage's foo, and then re-run configure (othewise configure would check, and succeed in this, for Sage's foo first).\n> \n> The main reason for that that some people do not want to retire the old `sage -f foo` as a way to install/update a package, see e.g. #27373...\n> \n\nOh I see now. Got it! Good to know.",
    "created_at": "2019-05-16T09:48:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536598",
    "user": "https://github.com/jplab"
}
```

<a id='comment:41'></a>> well, this is by (somewhat unfortunate) design. Once you updated ./configure by installing/updating a `spkg-configure.m4` file in build/pkgs/foo/
> and you have foo installed in Sage and as a system package, the only way to switch from Sage-installed to system foo is to manually uninstall Sage's foo, and then re-run configure (othewise configure would check, and succeed in this, for Sage's foo first).
> 
> The main reason for that that some people do not want to retire the old `sage -f foo` as a way to install/update a package, see e.g. #27373...
> 

Oh I see now. Got it! Good to know.



---

archive/issue_comments_536599.json:
```json
{
    "body": "<a id='comment:42'></a>Replying to [comment:39 dimpase]:\n> Isn't the presence of `local::lib` module a pre-req for all these package installations to function?\n\n\nFor installing the modules, yes. But the `cpanm` script is fatpacked with all its prerequisite libraries, including `local::lib`.\n\nFor using the modules, no. We just modify the environment variable `PERL5LIB`.",
    "created_at": "2019-05-16T13:44:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536599",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:42'></a>Replying to [comment:39 dimpase]:
> Isn't the presence of `local::lib` module a pre-req for all these package installations to function?


For installing the modules, yes. But the `cpanm` script is fatpacked with all its prerequisite libraries, including `local::lib`.

For using the modules, no. We just modify the environment variable `PERL5LIB`.



---

archive/issue_comments_536600.json:
```json
{
    "body": "<a id='comment:43'></a>surely, `local::lib` is an installation tool, but can you install it into system wide perl without root access?",
    "created_at": "2019-05-16T14:16:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536600",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:43'></a>surely, `local::lib` is an installation tool, but can you install it into system wide perl without root access?



---

archive/issue_comments_536601.json:
```json
{
    "body": "<a id='comment:44'></a>Replying to [comment:43 dimpase]:\n> surely, `local::lib` is an installation tool, but can you install it into system wide perl without root access?\n\n\nA user would install local::lib into their local library by \"bootstrapping\" https://metacpan.org/pod/local::lib#The-bootstrapping-technique\n\nBut this is not relevant for us.",
    "created_at": "2019-05-16T14:30:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536601",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:44'></a>Replying to [comment:43 dimpase]:
> surely, `local::lib` is an installation tool, but can you install it into system wide perl without root access?


A user would install local::lib into their local library by "bootstrapping" https://metacpan.org/pod/local::lib#The-bootstrapping-technique

But this is not relevant for us.



---

archive/issue_comments_536602.json:
```json
{
    "body": "<a id='comment:45'></a>I don't see how the `local::lib` thing is not relevant - one either has to say that it is a pre-req, or do that bootstrapping here.",
    "created_at": "2019-05-16T16:21:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536602",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:45'></a>I don't see how the `local::lib` thing is not relevant - one either has to say that it is a pre-req, or do that bootstrapping here.



---

archive/issue_comments_536603.json:
```json
{
    "body": "Attachment [perl_cpan_polymake_prereq-2019-05-13.log](tarball://root/attachments/some-uuid/ticket27763/perl_cpan_polymake_prereq-2019-05-13.log) by @sophiasage created at 2019-05-16 17:11:43\n\nfailed install of cpan perl packages on mac",
    "created_at": "2019-05-16T17:11:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536603",
    "user": "https://github.com/sophiasage"
}
```

Attachment [perl_cpan_polymake_prereq-2019-05-13.log](tarball://root/attachments/some-uuid/ticket27763/perl_cpan_polymake_prereq-2019-05-13.log) by @sophiasage created at 2019-05-16 17:11:43

failed install of cpan perl packages on mac



---

archive/issue_comments_536604.json:
```json
{
    "body": "<a id='comment:46'></a>I have attached a log of the failed installation of the cpan perl packages after doing the following steps:\n\n- pulled the branch on this ticket\n- downloaded the tarball from this ticket and placed it in upstream folder \n- typed `make build`\n- typed `./sage -i polymake`\n\nShould I have followed a different procedure to test the installation on mac os mojave?",
    "created_at": "2019-05-16T17:16:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536604",
    "user": "https://github.com/sophiasage"
}
```

<a id='comment:46'></a>I have attached a log of the failed installation of the cpan perl packages after doing the following steps:

- pulled the branch on this ticket
- downloaded the tarball from this ticket and placed it in upstream folder 
- typed `make build`
- typed `./sage -i polymake`

Should I have followed a different procedure to test the installation on mac os mojave?



---

archive/issue_comments_536605.json:
```json
{
    "body": "<a id='comment:47'></a>Replying to [comment:45 dimpase]:\n> I don't see how the `local::lib` thing is not relevant - one either has to say that it is a pre-req, or do that bootstrapping here. \n\nIt's already solved on this ticket by shipping the self contained cpanm script. \nIt is not needed as a prerequisite.",
    "created_at": "2019-05-17T04:11:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536605",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:47'></a>Replying to [comment:45 dimpase]:
> I don't see how the `local::lib` thing is not relevant - one either has to say that it is a pre-req, or do that bootstrapping here. 

It's already solved on this ticket by shipping the self contained cpanm script. 
It is not needed as a prerequisite.



---

archive/issue_comments_536606.json:
```json
{
    "body": "<a id='comment:48'></a>Attachment [perl_packages.log](tarball://root/attachments/some-uuid/ticket27763/perl_packages.log) by @sophiasage created at 2019-05-17 08:24:31\n\nThe file `perl_packages.log` describes a similar failure on debian stretch when getting to MongoDB.",
    "created_at": "2019-05-17T08:24:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536606",
    "user": "https://github.com/sophiasage"
}
```

<a id='comment:48'></a>Attachment [perl_packages.log](tarball://root/attachments/some-uuid/ticket27763/perl_packages.log) by @sophiasage created at 2019-05-17 08:24:31

The file `perl_packages.log` describes a similar failure on debian stretch when getting to MongoDB.



---

archive/issue_comments_536607.json:
```json
{
    "body": "Attachment [perl_package_debian.log](tarball://root/attachments/some-uuid/ticket27763/perl_package_debian.log) by @jplab created at 2019-05-17 09:26:11\n\nFailure on debian stretch",
    "created_at": "2019-05-17T09:26:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536607",
    "user": "https://github.com/jplab"
}
```

Attachment [perl_package_debian.log](tarball://root/attachments/some-uuid/ticket27763/perl_package_debian.log) by @jplab created at 2019-05-17 09:26:11

Failure on debian stretch



---

archive/issue_comments_536608.json:
```json
{
    "body": "<a id='comment:49'></a>It seems that there are still some dependencies missing.",
    "created_at": "2019-05-17T09:28:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536608",
    "user": "https://github.com/jplab"
}
```

<a id='comment:49'></a>It seems that there are still some dependencies missing.



---

archive/issue_comments_536609.json:
```json
{
    "body": "<a id='comment:50'></a>Replying to [comment:46 gh-sophiasage]:\n> I have attached a log of the failed installation of the cpan perl packages after doing the following steps:\n> \n> - pulled the branch on this ticket\n> - downloaded the tarball from this ticket and placed it in upstream folder \n> - typed `make build`\n> - typed `./sage -i polymake`\n> \n> Should I have followed a different procedure to test the installation on mac os mojave? \n\n\nThanks for testing! This is the correct procedure. \n\nThe relevant failure from your test on Mac is this one:\n\n```\n225\tBuilding and testing Type-Tiny-1.004004 ... ! Installing Types::Standard failed. See /Users/sophiaelia/.cpanm/work/1558026103.94179/build.log for details. Retry with --force to force install it.\n226\tFAIL\n```\nI have seen something similar on Mac as well. Could you send the build log mentioned above?",
    "created_at": "2019-05-17T11:19:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536609",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:50'></a>Replying to [comment:46 gh-sophiasage]:
> I have attached a log of the failed installation of the cpan perl packages after doing the following steps:
> 
> - pulled the branch on this ticket
> - downloaded the tarball from this ticket and placed it in upstream folder 
> - typed `make build`
> - typed `./sage -i polymake`
> 
> Should I have followed a different procedure to test the installation on mac os mojave? 


Thanks for testing! This is the correct procedure. 

The relevant failure from your test on Mac is this one:

```
225	Building and testing Type-Tiny-1.004004 ... ! Installing Types::Standard failed. See /Users/sophiaelia/.cpanm/work/1558026103.94179/build.log for details. Retry with --force to force install it.
226	FAIL
```
I have seen something similar on Mac as well. Could you send the build log mentioned above?



---

archive/issue_comments_536610.json:
```json
{
    "body": "<a id='comment:51'></a>Replying to [comment:49 jipilab]:\n> It seems that there are still some dependencies missing.\n\n\nThe relevant failure on the Debian installs is this one:\n\n```\n40\tConfiguring MongoDB-v2.0.3 ... ! Finding BSON::XS (0.006000) on mirror file:///home/jplabbe/sage/local/var/tmp/sage/build/perl_cpan_polymake_prereq-2019-05-13/src/sagepan failed.\n41\t! Couldn't find module or a distribution BSON::XS (0.006000)\n```",
    "created_at": "2019-05-17T11:21:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536610",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:51'></a>Replying to [comment:49 jipilab]:
> It seems that there are still some dependencies missing.


The relevant failure on the Debian installs is this one:

```
40	Configuring MongoDB-v2.0.3 ... ! Finding BSON::XS (0.006000) on mirror file:///home/jplabbe/sage/local/var/tmp/sage/build/perl_cpan_polymake_prereq-2019-05-13/src/sagepan failed.
41	! Couldn't find module or a distribution BSON::XS (0.006000)
```



---

archive/issue_comments_536611.json:
```json
{
    "body": "Attachment [build.log](tarball://root/attachments/some-uuid/ticket27763/build.log) by @sophiasage created at 2019-05-17 11:35:41\n\nbuild.log file from failed installation of cpan perl packages on mac",
    "created_at": "2019-05-17T11:35:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536611",
    "user": "https://github.com/sophiasage"
}
```

Attachment [build.log](tarball://root/attachments/some-uuid/ticket27763/build.log) by @sophiasage created at 2019-05-17 11:35:41

build.log file from failed installation of cpan perl packages on mac



---

archive/issue_comments_536612.json:
```json
{
    "body": "<a id='comment:52'></a>Thank you!\nThe problem on macOS seems to come from a well known problem with `Module::Runtime`. https://www.perlmonks.org/?node_id=1083777",
    "created_at": "2019-05-17T11:58:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536612",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:52'></a>Thank you!
The problem on macOS seems to come from a well known problem with `Module::Runtime`. https://www.perlmonks.org/?node_id=1083777



---

archive/issue_comments_536613.json:
```json
{
    "body": "<a id='comment:53'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-17T18:01:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536613",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:53'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_536614.json:
```json
{
    "body": "Changing commit from \"10189db608570332744cdc2c51ba6c471af1d00b\" to \"d34f2a22d782d8110e5207c6a2d7134ea15243f5\"",
    "created_at": "2019-05-17T18:01:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536614",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "10189db608570332744cdc2c51ba6c471af1d00b" to "d34f2a22d782d8110e5207c6a2d7134ea15243f5"



---

archive/issue_comments_536615.json:
```json
{
    "body": "<a id='comment:54'></a>I have made a more robust version of the `spkg-src` script, which (hopefully!) makes sure to pack up all dependencies (instead of picking some up from the local installation) and also addresses the `Module::Runtime` version problem on macOS.\n\nTo test, first get rid of the Perl library installation in $SAGE_LOCAL and then reinstall the packages:\n\n```\n  rm -rf local/lib/perl5\n  ./sage -f  perl_cpan_polymake_prereq perl_term_readline_gnu\n```",
    "created_at": "2019-05-17T18:02:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536615",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:54'></a>I have made a more robust version of the `spkg-src` script, which (hopefully!) makes sure to pack up all dependencies (instead of picking some up from the local installation) and also addresses the `Module::Runtime` version problem on macOS.

To test, first get rid of the Perl library installation in $SAGE_LOCAL and then reinstall the packages:

```
  rm -rf local/lib/perl5
  ./sage -f  perl_cpan_polymake_prereq perl_term_readline_gnu
```



---

archive/issue_comments_536616.json:
```json
{
    "body": "Attachment [perl_cpan_polymake_prereq-2019-05-17.tar.gz](tarball://root/attachments/some-uuid/ticket27763/perl_cpan_polymake_prereq-2019-05-17.tar.gz) by @mkoeppe created at 2019-05-17 18:03:16",
    "created_at": "2019-05-17T18:03:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536616",
    "user": "https://github.com/mkoeppe"
}
```

Attachment [perl_cpan_polymake_prereq-2019-05-17.tar.gz](tarball://root/attachments/some-uuid/ticket27763/perl_cpan_polymake_prereq-2019-05-17.tar.gz) by @mkoeppe created at 2019-05-17 18:03:16



---

archive/issue_comments_536617.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n To simplify installation of polymake, we add some required CPAN packages. \n \n-Including recursive dependencies, these are 58 packages, a total of 5 MB of source archives, which we pack up as the source tar ball of the new spkg `perl_cpan_polymake_prereq`.\n+Including recursive dependencies, these are 58 packages, a total of 7 MB of source archives, which we pack up as the source tar ball of the new spkg `perl_cpan_polymake_prereq`.\n The source tar ball (attached) also contains a copy of the self-contained `cpanm` Perl script, which is used for installing the packages.\n \n Using an `spkg-configure.m4`, it is downloaded and installed only if the Perl packages are not already present on the system.\n``````\n",
    "created_at": "2019-05-17T18:04:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536617",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 To simplify installation of polymake, we add some required CPAN packages. 
 
-Including recursive dependencies, these are 58 packages, a total of 5 MB of source archives, which we pack up as the source tar ball of the new spkg `perl_cpan_polymake_prereq`.
+Including recursive dependencies, these are 58 packages, a total of 7 MB of source archives, which we pack up as the source tar ball of the new spkg `perl_cpan_polymake_prereq`.
 The source tar ball (attached) also contains a copy of the self-contained `cpanm` Perl script, which is used for installing the packages.
 
 Using an `spkg-configure.m4`, it is downloaded and installed only if the Perl packages are not already present on the system.
``````




---

archive/issue_comments_536618.json:
```json
{
    "body": "<a id='comment:56'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-17T18:53:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536618",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:56'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_536619.json:
```json
{
    "body": "Changing commit from \"d34f2a22d782d8110e5207c6a2d7134ea15243f5\" to \"18d109a05a23e923867fba9e81e7bef46d689701\"",
    "created_at": "2019-05-17T18:53:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536619",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d34f2a22d782d8110e5207c6a2d7134ea15243f5" to "18d109a05a23e923867fba9e81e7bef46d689701"



---

archive/issue_comments_536620.json:
```json
{
    "body": "<a id='comment:57'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-19T11:11:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536620",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:57'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_536621.json:
```json
{
    "body": "Changing commit from \"18d109a05a23e923867fba9e81e7bef46d689701\" to \"06fdaf2f2cd23407f1f67128000444b492b1c8c2\"",
    "created_at": "2019-05-19T11:11:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536621",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "18d109a05a23e923867fba9e81e7bef46d689701" to "06fdaf2f2cd23407f1f67128000444b492b1c8c2"



---

archive/issue_comments_536622.json:
```json
{
    "body": "Changing commit from \"06fdaf2f2cd23407f1f67128000444b492b1c8c2\" to \"4363e80e2c19b227109e70a1e3e901b9f62b3d5b\"",
    "created_at": "2019-05-19T21:02:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536622",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "06fdaf2f2cd23407f1f67128000444b492b1c8c2" to "4363e80e2c19b227109e70a1e3e901b9f62b3d5b"



---

archive/issue_comments_536623.json:
```json
{
    "body": "<a id='comment:58'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-19T21:02:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536623",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:58'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_536624.json:
```json
{
    "body": "Attachment [perl_cpan_polymake_prereq-2019-05-19.tar.gz](tarball://root/attachments/some-uuid/ticket27763/perl_cpan_polymake_prereq-2019-05-19.tar.gz) by @mkoeppe created at 2019-05-19 21:08:34",
    "created_at": "2019-05-19T21:08:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536624",
    "user": "https://github.com/mkoeppe"
}
```

Attachment [perl_cpan_polymake_prereq-2019-05-19.tar.gz](tarball://root/attachments/some-uuid/ticket27763/perl_cpan_polymake_prereq-2019-05-19.tar.gz) by @mkoeppe created at 2019-05-19 21:08:34



---

archive/issue_comments_536625.json:
```json
{
    "body": "Changing commit from \"4363e80e2c19b227109e70a1e3e901b9f62b3d5b\" to \"188fcb70d5b256421dcb4cefec937982e6cb59e5\"",
    "created_at": "2019-05-19T21:24:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536625",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4363e80e2c19b227109e70a1e3e901b9f62b3d5b" to "188fcb70d5b256421dcb4cefec937982e6cb59e5"



---

archive/issue_comments_536626.json:
```json
{
    "body": "<a id='comment:59'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-19T21:24:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536626",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:59'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_536627.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n To simplify installation of polymake, we add some required CPAN packages. \n \n-Including recursive dependencies, these are 58 packages, a total of 7 MB of source archives, which we pack up as the source tar ball of the new spkg `perl_cpan_polymake_prereq`.\n+Including recursive dependencies, these are 103 packages, a total of 7.5 MB of source archives, which we pack up as the source tar ball of the new spkg `perl_cpan_polymake_prereq`.\n The source tar ball (attached) also contains a copy of the self-contained `cpanm` Perl script, which is used for installing the packages.\n \n Using an `spkg-configure.m4`, it is downloaded and installed only if the Perl packages are not already present on the system.\n``````\n",
    "created_at": "2019-05-19T21:42:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536627",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 To simplify installation of polymake, we add some required CPAN packages. 
 
-Including recursive dependencies, these are 58 packages, a total of 7 MB of source archives, which we pack up as the source tar ball of the new spkg `perl_cpan_polymake_prereq`.
+Including recursive dependencies, these are 103 packages, a total of 7.5 MB of source archives, which we pack up as the source tar ball of the new spkg `perl_cpan_polymake_prereq`.
 The source tar ball (attached) also contains a copy of the self-contained `cpanm` Perl script, which is used for installing the packages.
 
 Using an `spkg-configure.m4`, it is downloaded and installed only if the Perl packages are not already present on the system.
``````




---

archive/issue_comments_536628.json:
```json
{
    "body": "<a id='comment:61'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-19T22:25:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536628",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:61'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_536629.json:
```json
{
    "body": "Changing commit from \"188fcb70d5b256421dcb4cefec937982e6cb59e5\" to \"3f5e3a2ce1df175860b708632c9fbccf45df0f00\"",
    "created_at": "2019-05-19T22:25:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536629",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "188fcb70d5b256421dcb4cefec937982e6cb59e5" to "3f5e3a2ce1df175860b708632c9fbccf45df0f00"



---

archive/issue_comments_536630.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,6 +2,7 @@\n \n Including recursive dependencies, these are 103 packages, a total of 7.5 MB of source archives, which we pack up as the source tar ball of the new spkg `perl_cpan_polymake_prereq`.\n The source tar ball (attached) also contains a copy of the self-contained `cpanm` Perl script, which is used for installing the packages.\n+If `SAGE_CHECK=no`, only about 35 packages are installed. The rest of the dependencies are for testing.\n \n Using an `spkg-configure.m4`, it is downloaded and installed only if the Perl packages are not already present on the system.\n \n``````\n",
    "created_at": "2019-05-19T23:04:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536630",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,6 +2,7 @@
 
 Including recursive dependencies, these are 103 packages, a total of 7.5 MB of source archives, which we pack up as the source tar ball of the new spkg `perl_cpan_polymake_prereq`.
 The source tar ball (attached) also contains a copy of the self-contained `cpanm` Perl script, which is used for installing the packages.
+If `SAGE_CHECK=no`, only about 35 packages are installed. The rest of the dependencies are for testing.
 
 Using an `spkg-configure.m4`, it is downloaded and installed only if the Perl packages are not already present on the system.
 
``````




---

archive/issue_comments_536631.json:
```json
{
    "body": "<a id='comment:62'></a>Ready for another round of testing. Works for me on macOS Mojave and on a CentOS Linux release 7.6.1810 with almost no Perl stuff installed.",
    "created_at": "2019-05-19T23:04:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536631",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:62'></a>Ready for another round of testing. Works for me on macOS Mojave and on a CentOS Linux release 7.6.1810 with almost no Perl stuff installed.



---

archive/issue_comments_536632.json:
```json
{
    "body": "failed installation of polymake on mac",
    "created_at": "2019-05-21T12:26:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536632",
    "user": "https://github.com/sophiasage"
}
```

failed installation of polymake on mac



---

archive/issue_comments_536633.json:
```json
{
    "body": "<a id='comment:63'></a>Attachment [polymake-3.4.2.log](tarball://root/attachments/some-uuid/ticket27763/polymake-3.4.2.log) by @sophiasage created at 2019-05-21 12:35:19\n\nI have attached a log of a failed installation of polymake on macOS Mojave after pulling this ticket and doing the following steps.\n\n- pulled the branch on this ticket\n- downloaded the tarball perl_cpan_polymake_prereq-2019-05-19.tar.gz and put it in the upstream folder\n- in upstream folder typed `rm perl_cpan_polymake_prereq_2019_05_13.tar.gz`\n- in my sage directory typed `make build`\n- typed `./sage -f perl_term_readline_gnu`\n- typed `./sage -i polymake`\n\nperl_cpan_polymake_prereq-2019-05-19 installed successfully.",
    "created_at": "2019-05-21T12:35:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536633",
    "user": "https://github.com/sophiasage"
}
```

<a id='comment:63'></a>Attachment [polymake-3.4.2.log](tarball://root/attachments/some-uuid/ticket27763/polymake-3.4.2.log) by @sophiasage created at 2019-05-21 12:35:19

I have attached a log of a failed installation of polymake on macOS Mojave after pulling this ticket and doing the following steps.

- pulled the branch on this ticket
- downloaded the tarball perl_cpan_polymake_prereq-2019-05-19.tar.gz and put it in the upstream folder
- in upstream folder typed `rm perl_cpan_polymake_prereq_2019_05_13.tar.gz`
- in my sage directory typed `make build`
- typed `./sage -f perl_term_readline_gnu`
- typed `./sage -i polymake`

perl_cpan_polymake_prereq-2019-05-19 installed successfully.



---

archive/issue_comments_536634.json:
```json
{
    "body": "<a id='comment:64'></a>Replying to [comment:63 gh-sophiasage]:\n> I have attached a log of a failed installation of polymake on macOS Mojave after pulling this ticket and doing the following steps.\n> \n> - pulled the branch on this ticket\n> - downloaded the tarball perl_cpan_polymake_prereq-2019-05-19.tar.gz and put it in the upstream folder\n> - in upstream folder typed `rm perl_cpan_polymake_prereq_2019_05_13.tar.gz`\n\n\nwhy would you download the file, and then delete it? A typo?\n\n>   - in my sage directory typed `make build`\n>   - typed `./sage -f perl_term_readline_gnu`\n>   - typed `./sage -i polymake`\n \n> \n> perl_cpan_polymake_prereq-2019-05-19 installed successfully.\n\n\nI wonder why you have C++14 in your CXXFLAGS.\nDo you by any chance have CXXFLAGS environment variable set to something non-empty?\n\n>",
    "created_at": "2019-05-21T12:53:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536634",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:64'></a>Replying to [comment:63 gh-sophiasage]:
> I have attached a log of a failed installation of polymake on macOS Mojave after pulling this ticket and doing the following steps.
> 
> - pulled the branch on this ticket
> - downloaded the tarball perl_cpan_polymake_prereq-2019-05-19.tar.gz and put it in the upstream folder
> - in upstream folder typed `rm perl_cpan_polymake_prereq_2019_05_13.tar.gz`


why would you download the file, and then delete it? A typo?

>   - in my sage directory typed `make build`
>   - typed `./sage -f perl_term_readline_gnu`
>   - typed `./sage -i polymake`
 
> 
> perl_cpan_polymake_prereq-2019-05-19 installed successfully.


I wonder why you have C++14 in your CXXFLAGS.
Do you by any chance have CXXFLAGS environment variable set to something non-empty?

>



---

archive/issue_comments_536635.json:
```json
{
    "body": "<a id='comment:65'></a>Try deleting the installed polymake headers in local/include first.\nLooks like they are taking precedence in the compilation - this looks like a bug in the polymake build scripts",
    "created_at": "2019-05-21T13:15:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536635",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:65'></a>Try deleting the installed polymake headers in local/include first.
Looks like they are taking precedence in the compilation - this looks like a bug in the polymake build scripts



---

archive/issue_comments_536636.json:
```json
{
    "body": "<a id='comment:66'></a>Replying to [comment:64 dimpase]:\n> Replying to [comment:63 gh-sophiasage]:\n> > I have attached a log of a failed installation of polymake on macOS Mojave after pulling this ticket and doing the following steps.\n> > \n> > - pulled the branch on this ticket\n> > - downloaded the tarball perl_cpan_polymake_prereq-2019-05-19.tar.gz and put it in the upstream folder\n> > - in upstream folder typed `rm perl_cpan_polymake_prereq_2019_05_13.tar.gz`\n\n> \n> why would you download the file, and then delete it? A typo?\n\n\nOld version deleted",
    "created_at": "2019-05-21T13:17:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536636",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:66'></a>Replying to [comment:64 dimpase]:
> Replying to [comment:63 gh-sophiasage]:
> > I have attached a log of a failed installation of polymake on macOS Mojave after pulling this ticket and doing the following steps.
> > 
> > - pulled the branch on this ticket
> > - downloaded the tarball perl_cpan_polymake_prereq-2019-05-19.tar.gz and put it in the upstream folder
> > - in upstream folder typed `rm perl_cpan_polymake_prereq_2019_05_13.tar.gz`

> 
> why would you download the file, and then delete it? A typo?


Old version deleted



---

archive/issue_comments_536637.json:
```json
{
    "body": "<a id='comment:67'></a>Replying to [comment:65 mkoeppe]:\n> Try deleting the installed polymake headers in local/include first.\n> Looks like they are taking precedence in the compilation - this looks like a bug in the polymake build scripts\n\nIt worked!!",
    "created_at": "2019-05-21T15:29:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536637",
    "user": "https://github.com/sophiasage"
}
```

<a id='comment:67'></a>Replying to [comment:65 mkoeppe]:
> Try deleting the installed polymake headers in local/include first.
> Looks like they are taking precedence in the compilation - this looks like a bug in the polymake build scripts

It worked!!



---

archive/issue_comments_536638.json:
```json
{
    "body": "<a id='comment:68'></a>Thanks for testing!\nI have updated the install scripts to take care of uninstallation in #27855.",
    "created_at": "2019-05-21T17:44:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536638",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:68'></a>Thanks for testing!
I have updated the install scripts to take care of uninstallation in #27855.



---

archive/issue_comments_536639.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,3 +8,10 @@\n \n The `spkg-install` installs the packages via the package dependencies mechanism. If some of the packages are already installed in some version on the system, we do not install a newer version.\n \n+To try out:\n+\n+```\n+   wget -P upstream https://trac.sagemath.org/raw-attachment/ticket/27763/perl_cpan_polymake_prereq-2019-05-19.tar.gz\n+```\n+\n+\n``````\n",
    "created_at": "2019-05-23T03:05:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536639",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,3 +8,10 @@
 
 The `spkg-install` installs the packages via the package dependencies mechanism. If some of the packages are already installed in some version on the system, we do not install a newer version.
 
+To try out:
+
+```
+   wget -P upstream https://trac.sagemath.org/raw-attachment/ticket/27763/perl_cpan_polymake_prereq-2019-05-19.tar.gz
+```
+
+
``````




---

archive/issue_comments_536640.json:
```json
{
    "body": "<a id='comment:70'></a>Any takers for the review of this ticket?",
    "created_at": "2019-05-30T00:56:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536640",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:70'></a>Any takers for the review of this ticket?



---

archive/issue_comments_536641.json:
```json
{
    "body": "<a id='comment:71'></a>I am on vacation until 4 June, can\u2019t possibly do it before.",
    "created_at": "2019-05-30T06:32:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536641",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:71'></a>I am on vacation until 4 June, cant possibly do it before.



---

archive/issue_comments_536642.json:
```json
{
    "body": "<a id='comment:72'></a>Perhaps `Term::ReadKey` should be added as well.",
    "created_at": "2019-06-03T18:46:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536642",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:72'></a>Perhaps `Term::ReadKey` should be added as well.



---

archive/issue_events_068838.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-07-03T11:37:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27763#event-68838"
}
```



---

archive/issue_comments_536643.json:
```json
{
    "body": "<a id='comment:73'></a>Moving tickets from the Sage 8.8 milestone that have been actively worked on in the last six months to the next release milestone (optimistically).",
    "created_at": "2019-07-03T11:37:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536643",
    "user": "https://github.com/embray"
}
```

<a id='comment:73'></a>Moving tickets from the Sage 8.8 milestone that have been actively worked on in the last six months to the next release milestone (optimistically).



---

archive/issue_comments_536644.json:
```json
{
    "body": "<a id='comment:74'></a>Replying to [comment:70 mkoeppe]:\n> Any takers for the review of this ticket?\n\n\nWe'll resume our Friday morning's sage session soon. We'll be able to test it on a few virgin machines to test the robustness of installation...",
    "created_at": "2019-09-03T18:53:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536644",
    "user": "https://github.com/jplab"
}
```

<a id='comment:74'></a>Replying to [comment:70 mkoeppe]:
> Any takers for the review of this ticket?


We'll resume our Friday morning's sage session soon. We'll be able to test it on a few virgin machines to test the robustness of installation...



---

archive/issue_comments_536645.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -15,3 +15,5 @@\n ```\n \n \n+See also the sage-devel post about compilation: https://groups.google.com/forum/#!topic/sage-devel/ukJgMweHszU\n+\n``````\n",
    "created_at": "2019-11-01T17:27:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536645",
    "user": "https://github.com/jplab"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -15,3 +15,5 @@
 ```
 
 
+See also the sage-devel post about compilation: https://groups.google.com/forum/#!topic/sage-devel/ukJgMweHszU
+
``````




---

archive/issue_comments_536646.json:
```json
{
    "body": "<a id='comment:76'></a>First, I'm getting a merge conflict with the latest version of Sage.\n\nSecond, the build is failing for me with OS X 10.14.6. The log file (with some boring lines snipped):\n\n```\nFound local metadata for perl_cpan_polymake_prereq-2019-05-19\nUsing cached file /Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-9.0.beta3/upstream/perl_cpan_polymake_prereq-2019-05-19.tar.gz\nperl_cpan_polymake_prereq-2019-05-19\n====================================================\nSetting up build directory for perl_cpan_polymake_prereq-2019-05-19\nFinished extraction\nNo patch files found in ../patches\n****************************************************\nHost system:\nDarwin jpalmieri138.local 18.7.0 Darwin Kernel Version 18.7.0: Tue Aug 20 16:57:14 PDT 2019; root:xnu-4903.271.2~2/RELEASE_X86_64 x86_64\n****************************************************\nC compiler: gcc\nC compiler version:\nConfigured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/4.2.1\nApple clang version 11.0.0 (clang-1100.0.33.12)\nTarget: x86_64-apple-darwin18.7.0\nThread model: posix\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\n****************************************************\nPackage 'perl_cpan_polymake_prereq' is currently not installed\nNo legacy uninstaller found for 'perl_cpan_polymake_prereq'; nothing to do\ncpanm (App::cpanminus) 1.7044 on perl 5.018004 built for darwin-thread-multi-2level\nWork directory is /Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-9.0.beta3/local/var/tmp/sage/build/perl_cpan_polymake_prereq-2019-05-19/src/cpanm_home/work/1572630684.99164\nYou have make /usr/bin/make\nYou have LWP 6.05\nYou have /usr/bin/tar: bsdtar 2.8.3 - libarchive 2.8.3\nYou have /usr/bin/unzip\nEntering /Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-9.0.beta3/local/var/tmp/sage/build/perl_cpan_polymake_prereq-2019-05-19/stage1\nRunning Makefile.PL\n--> Working on .\nConfiguring /Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-9.0.beta3/local/var/tmp/sage/build/perl_cpan_polymake_prereq-2019-05-19/stage1 ... Warning: prerequisite Moose 2.2 not found. We have 2.1202.\nWriting Makefile for PolymakeStage1\nWriting MYMETA.yml and MYMETA.json\nChecking dependencies from MYMETA.json ...\nChecking if you have ExtUtils::MakeMaker 0 ... Yes (6.66)\nChecking if you have Moose 2.2 ... No (2.1202 < 2.2)\nSearching Moose on mirror file:///Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-9.0.beta3/local/var/tmp/sage/build/perl_cpan_polymake_prereq-2019-05-19/src/sagepan ...\nDownloading index file file:///Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-9.0.beta3/local/var/tmp/sage/build/perl_cpan_polymake_prereq-2019-05-19/src/sagepan/modules/02packages.details.txt.gz ...\nUncompressing index file...\nUnpacking Moose-2.2011.tar.gz\nOK\n==> Found dependencies: Moose\n--> Working on Moose\nFetching file:///Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-9.0.beta3/local/var/tmp/sage/build/perl_cpan_polymake_prereq-2019-05-19/src/sagepan/authors/id/E/ET/ETHER/Moose-2.2011.tar.gz ... OK\nx Moose-2.2011/\nx Moose-2.2011/author/\n...\n  [snip]\n...\nx Moose-2.2011/author/doc-generator\nx Moose-2.2011/author/extract-inline-tests\nx Moose-2.2011/author/find-dupe-test-numbers\nEntering Moose-2.2011\nChecking configure dependencies from META.json\nChecking if you have ExtUtils::MakeMaker 6.58 ... Yes (6.66)\nChecking if you have Dist::CheckConflicts 0.02 ... Yes (0.10)\nRunning Makefile.PL\nConfiguring Moose-2.2011 ... HASCOMPILERJXuX/TESTGBHw.c:2:10: fatal error: 'EXTERN.h' file not found\n#include \"EXTERN.h\"\n         ^~~~~~~~~~\n1 error generated.\nCouldn't execute gcc  -g -pipe -fno-common -DPERL_DARWIN -fno-strict-aliasing -fstack-protector -Os \"-I/System/Library/Perl/5.18/darwin-thread-multi-2level/CORE\"   -c HASCOMPILERJXuX/TESTGBHw.c -o HASCOMPILERJXuX/TESTGBHw.o: Inappropriate ioctl for device at Makefile.PL line 12.\nThis distribution requires a working compiler at Makefile.PL line 12.\n! Configure failed for Moose-2.2011. See /Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-9.0.beta3/local/var/tmp/sage/build/perl_cpan_polymake_prereq-2019-05-19/src/cpanm_home/work/1572630684.99164/build.log for details.\n! Installing the dependencies failed: Installed version (2.1202) of Moose is not in range '2.2'\n! Bailing out the installation for PolymakeStage1-0.\nN/A\n\nreal\t0m0.905s\nuser\t0m0.561s\nsys\t0m0.291s\n************************************************************************\nError installing package perl_cpan_polymake_prereq-2019-05-19\n************************************************************************\n```",
    "created_at": "2019-11-01T17:58:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536646",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:76'></a>First, I'm getting a merge conflict with the latest version of Sage.

Second, the build is failing for me with OS X 10.14.6. The log file (with some boring lines snipped):

```
Found local metadata for perl_cpan_polymake_prereq-2019-05-19
Using cached file /Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-9.0.beta3/upstream/perl_cpan_polymake_prereq-2019-05-19.tar.gz
perl_cpan_polymake_prereq-2019-05-19
====================================================
Setting up build directory for perl_cpan_polymake_prereq-2019-05-19
Finished extraction
No patch files found in ../patches
****************************************************
Host system:
Darwin jpalmieri138.local 18.7.0 Darwin Kernel Version 18.7.0: Tue Aug 20 16:57:14 PDT 2019; root:xnu-4903.271.2~2/RELEASE_X86_64 x86_64
****************************************************
C compiler: gcc
C compiler version:
Configured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/4.2.1
Apple clang version 11.0.0 (clang-1100.0.33.12)
Target: x86_64-apple-darwin18.7.0
Thread model: posix
InstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin
****************************************************
Package 'perl_cpan_polymake_prereq' is currently not installed
No legacy uninstaller found for 'perl_cpan_polymake_prereq'; nothing to do
cpanm (App::cpanminus) 1.7044 on perl 5.018004 built for darwin-thread-multi-2level
Work directory is /Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-9.0.beta3/local/var/tmp/sage/build/perl_cpan_polymake_prereq-2019-05-19/src/cpanm_home/work/1572630684.99164
You have make /usr/bin/make
You have LWP 6.05
You have /usr/bin/tar: bsdtar 2.8.3 - libarchive 2.8.3
You have /usr/bin/unzip
Entering /Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-9.0.beta3/local/var/tmp/sage/build/perl_cpan_polymake_prereq-2019-05-19/stage1
Running Makefile.PL
--> Working on .
Configuring /Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-9.0.beta3/local/var/tmp/sage/build/perl_cpan_polymake_prereq-2019-05-19/stage1 ... Warning: prerequisite Moose 2.2 not found. We have 2.1202.
Writing Makefile for PolymakeStage1
Writing MYMETA.yml and MYMETA.json
Checking dependencies from MYMETA.json ...
Checking if you have ExtUtils::MakeMaker 0 ... Yes (6.66)
Checking if you have Moose 2.2 ... No (2.1202 < 2.2)
Searching Moose on mirror file:///Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-9.0.beta3/local/var/tmp/sage/build/perl_cpan_polymake_prereq-2019-05-19/src/sagepan ...
Downloading index file file:///Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-9.0.beta3/local/var/tmp/sage/build/perl_cpan_polymake_prereq-2019-05-19/src/sagepan/modules/02packages.details.txt.gz ...
Uncompressing index file...
Unpacking Moose-2.2011.tar.gz
OK
==> Found dependencies: Moose
--> Working on Moose
Fetching file:///Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-9.0.beta3/local/var/tmp/sage/build/perl_cpan_polymake_prereq-2019-05-19/src/sagepan/authors/id/E/ET/ETHER/Moose-2.2011.tar.gz ... OK
x Moose-2.2011/
x Moose-2.2011/author/
...
  [snip]
...
x Moose-2.2011/author/doc-generator
x Moose-2.2011/author/extract-inline-tests
x Moose-2.2011/author/find-dupe-test-numbers
Entering Moose-2.2011
Checking configure dependencies from META.json
Checking if you have ExtUtils::MakeMaker 6.58 ... Yes (6.66)
Checking if you have Dist::CheckConflicts 0.02 ... Yes (0.10)
Running Makefile.PL
Configuring Moose-2.2011 ... HASCOMPILERJXuX/TESTGBHw.c:2:10: fatal error: 'EXTERN.h' file not found
#include "EXTERN.h"
         ^~~~~~~~~~
1 error generated.
Couldn't execute gcc  -g -pipe -fno-common -DPERL_DARWIN -fno-strict-aliasing -fstack-protector -Os "-I/System/Library/Perl/5.18/darwin-thread-multi-2level/CORE"   -c HASCOMPILERJXuX/TESTGBHw.c -o HASCOMPILERJXuX/TESTGBHw.o: Inappropriate ioctl for device at Makefile.PL line 12.
This distribution requires a working compiler at Makefile.PL line 12.
! Configure failed for Moose-2.2011. See /Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-9.0.beta3/local/var/tmp/sage/build/perl_cpan_polymake_prereq-2019-05-19/src/cpanm_home/work/1572630684.99164/build.log for details.
! Installing the dependencies failed: Installed version (2.1202) of Moose is not in range '2.2'
! Bailing out the installation for PolymakeStage1-0.
N/A

real	0m0.905s
user	0m0.561s
sys	0m0.291s
************************************************************************
Error installing package perl_cpan_polymake_prereq-2019-05-19
************************************************************************
```



---

archive/issue_comments_536647.json:
```json
{
    "body": "<a id='comment:77'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-11-18T15:27:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536647",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:77'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_536648.json:
```json
{
    "body": "Changing commit from \"3f5e3a2ce1df175860b708632c9fbccf45df0f00\" to \"cce6cbd221634fc36df0661fd69d4f7401c5d5d7\"",
    "created_at": "2019-11-18T15:27:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536648",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "3f5e3a2ce1df175860b708632c9fbccf45df0f00" to "cce6cbd221634fc36df0661fd69d4f7401c5d5d7"



---

archive/issue_events_068839.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-11-18T15:31:00Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27763#event-68839"
}
```



---

archive/issue_events_068840.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-11-18T15:31:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "milestone": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27763#event-68840"
}
```



---

archive/issue_comments_536649.json:
```json
{
    "body": "<a id='comment:79'></a>Replying to [comment:76 jhpalmieri]:\n> the build is failing for me with OS X 10.14.6. \n> \n> ```\n> Configuring Moose-2.2011 ... HASCOMPILERJXuX/TESTGBHw.c:2:10: fatal error: 'EXTERN.h' file not found\n> #include \"EXTERN.h\"\n>          ^~~~~~~~~~\n> 1 error generated.\n> ```\n\n\nFrom `sage -info polymake`:\n\n```\nOn Mac OS X, to build Term::Readline::Gnu, on macOS 10.14 (Mojave), one\nneeds to do the following:\n\n sudo installer -pkg /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg -target /\n\nor a \"fatal error: 'EXTERN.h' file not found\" will be signalled.\n```",
    "created_at": "2019-11-19T01:48:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536649",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:79'></a>Replying to [comment:76 jhpalmieri]:
> the build is failing for me with OS X 10.14.6. 
> 
> ```
> Configuring Moose-2.2011 ... HASCOMPILERJXuX/TESTGBHw.c:2:10: fatal error: 'EXTERN.h' file not found
> #include "EXTERN.h"
>          ^~~~~~~~~~
> 1 error generated.
> ```


From `sage -info polymake`:

```
On Mac OS X, to build Term::Readline::Gnu, on macOS 10.14 (Mojave), one
needs to do the following:

 sudo installer -pkg /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg -target /

or a "fatal error: 'EXTERN.h' file not found" will be signalled.
```



---

archive/issue_comments_536650.json:
```json
{
    "body": "<a id='comment:80'></a>I think that you shouldn't have the build fail; you should instead test for the headers and provide a helpful error message if they're not present. I doubt that most users will know to use `sage -info polymake`.\n\nAlso, the error message is out-of-date: the current version of OS X is 10.15, and there is no directory `Packages` in `/Library/Developer/CommandLineTools/`.",
    "created_at": "2019-11-19T03:50:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536650",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:80'></a>I think that you shouldn't have the build fail; you should instead test for the headers and provide a helpful error message if they're not present. I doubt that most users will know to use `sage -info polymake`.

Also, the error message is out-of-date: the current version of OS X is 10.15, and there is no directory `Packages` in `/Library/Developer/CommandLineTools/`.



---

archive/issue_comments_536651.json:
```json
{
    "body": "<a id='comment:81'></a>Yes, I agree, this needs a better solution.",
    "created_at": "2019-11-19T04:02:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536651",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:81'></a>Yes, I agree, this needs a better solution.



---

archive/issue_comments_536652.json:
```json
{
    "body": "<a id='comment:82'></a>Some references for the EXTERN.h problem on macOS Mojave and newer:\n- MAC Perl `EXTERN.H` Make Issues\n  https://www.perlmonks.org/?node_id=1224716\n\n- json - `Fatal error: 'EXTERN.h' file not found` while installing Perl modules - Stack Overflow\n  https://stackoverflow.com/questions/52682304/fatal-error-extern-h-file-not-found-while-installing-perl-modules\n\n- Bug #127028 for `ExtUtils-MakeMaker`: Unable to build on OSX Mojave\n  https://rt.cpan.org/Public/Bug/Display.html?id=127028\n\n-  gist:a322f420b1ad92fec70d88144885fa49\n  https://gist.github.com/skaji/a322f420b1ad92fec70d88144885fa49",
    "created_at": "2019-11-22T18:24:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536652",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:82'></a>Some references for the EXTERN.h problem on macOS Mojave and newer:
- MAC Perl `EXTERN.H` Make Issues
  https://www.perlmonks.org/?node_id=1224716

- json - `Fatal error: 'EXTERN.h' file not found` while installing Perl modules - Stack Overflow
  https://stackoverflow.com/questions/52682304/fatal-error-extern-h-file-not-found-while-installing-perl-modules

- Bug #127028 for `ExtUtils-MakeMaker`: Unable to build on OSX Mojave
  https://rt.cpan.org/Public/Bug/Display.html?id=127028

-  gist:a322f420b1ad92fec70d88144885fa49
  https://gist.github.com/skaji/a322f420b1ad92fec70d88144885fa49



---

archive/issue_events_068841.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2020-01-06T14:10:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "milestone": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27763#event-68841"
}
```



---

archive/issue_events_068842.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2020-01-06T14:10:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27763#event-68842"
}
```



---

archive/issue_comments_536653.json:
```json
{
    "body": "<a id='comment:83'></a>Ticket retargeted after milestone closed",
    "created_at": "2020-01-06T14:10:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536653",
    "user": "https://github.com/embray"
}
```

<a id='comment:83'></a>Ticket retargeted after milestone closed



---

archive/issue_comments_536654.json:
```json
{
    "body": "<a id='comment:84'></a>After a clean installation of 9.1.beta2, running `sage -i polymake` finishes with success and installs both\n\n- perl_cpan_polymake_prereq...............2019-05-19 (2019-05-19)\n- perl_term_readline_gnu..................1.35 (1.35)\n\nNow, trying out polymake in sage essentially does not work...\n\n- Tab completion on `polymake.` does not work (which is an improvement, before it used to kill sage)\n- If I type `c = polytopes.cube(backend='polymake')` it simply never finishes. Thought I can kill it succesfully with ctrl+c.\n\nStarting sage anew and trying:\n- `p = Polyhedron(vertices= [[0],[1]],backend='polymake')` also simply never gives back the prompt.\n\nWithout starting sage anew, if I simply repeat the previous operation, I get directly:\n\n```\nTraceback (most recent call last):\nTypeError: argument should be integer or bytes-like object, not 'str'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n...\n\n/home/jplabbe/sage/local/lib/python3.7/site-packages/sage/interfaces/interface.py in __init__(self, parent, value, is_name, name)\n    718                 self._name = parent._create(value, name=name)\n    719             except (TypeError, RuntimeError, ValueError) as x:\n--> 720                 raise TypeError(x)\n    721 \n    722     def _latex_(self):\n\nTypeError: error evaluating \"@SAGE1=(\"Rational\");\":\nargument should be integer or bytes-like object, not 'str'\n```\n\n\n...\n\n*That said*, I have to mention that I do not have jupymake installed which is an optional package:\n\njupymake................................0.9 (not_installed)\n\nI wanted to try a simple \"sage -i polymake\" from a virgin install to see how it would perform...\n\nMy os is debian-buster. As far as the installation goes, it seems that polymake runs fine under `sage -polymake`...",
    "created_at": "2020-02-04T15:57:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536654",
    "user": "https://github.com/jplab"
}
```

<a id='comment:84'></a>After a clean installation of 9.1.beta2, running `sage -i polymake` finishes with success and installs both

- perl_cpan_polymake_prereq...............2019-05-19 (2019-05-19)
- perl_term_readline_gnu..................1.35 (1.35)

Now, trying out polymake in sage essentially does not work...

- Tab completion on `polymake.` does not work (which is an improvement, before it used to kill sage)
- If I type `c = polytopes.cube(backend='polymake')` it simply never finishes. Thought I can kill it succesfully with ctrl+c.

Starting sage anew and trying:
- `p = Polyhedron(vertices= [[0],[1]],backend='polymake')` also simply never gives back the prompt.

Without starting sage anew, if I simply repeat the previous operation, I get directly:

```
Traceback (most recent call last):
TypeError: argument should be integer or bytes-like object, not 'str'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
...

/home/jplabbe/sage/local/lib/python3.7/site-packages/sage/interfaces/interface.py in __init__(self, parent, value, is_name, name)
    718                 self._name = parent._create(value, name=name)
    719             except (TypeError, RuntimeError, ValueError) as x:
--> 720                 raise TypeError(x)
    721 
    722     def _latex_(self):

TypeError: error evaluating "@SAGE1=("Rational");":
argument should be integer or bytes-like object, not 'str'
```


...

*That said*, I have to mention that I do not have jupymake installed which is an optional package:

jupymake................................0.9 (not_installed)

I wanted to try a simple "sage -i polymake" from a virgin install to see how it would perform...

My os is debian-buster. As far as the installation goes, it seems that polymake runs fine under `sage -polymake`...



---

archive/issue_comments_536655.json:
```json
{
    "body": "<a id='comment:85'></a>On another debian-buster I get an error in the installation. Relevant log attached.",
    "created_at": "2020-02-04T16:07:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536655",
    "user": "https://github.com/jplab"
}
```

<a id='comment:85'></a>On another debian-buster I get an error in the installation. Relevant log attached.



---

archive/issue_comments_536656.json:
```json
{
    "body": "polymake installation failing on debian-buster",
    "created_at": "2020-02-04T16:09:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536656",
    "user": "https://github.com/jplab"
}
```

polymake installation failing on debian-buster



---

archive/issue_comments_536657.json:
```json
{
    "body": "<a id='comment:86'></a>Attachment [polymake-3.4.3.log](tarball://root/attachments/some-uuid/ticket27763/polymake-3.4.3.log) by @jplab created at 2020-02-04 16:13:47\n\nReplying to [comment:85 jipilab]:\n> On another debian-buster I get an error in the installation. Relevant log attached.\n\n\nTurns out the same failure happens on current develop. So it's not related to this ticket necessarily. (This machine is from the department, we just got a new os update, so we are less aware of the default installations)",
    "created_at": "2020-02-04T16:13:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536657",
    "user": "https://github.com/jplab"
}
```

<a id='comment:86'></a>Attachment [polymake-3.4.3.log](tarball://root/attachments/some-uuid/ticket27763/polymake-3.4.3.log) by @jplab created at 2020-02-04 16:13:47

Replying to [comment:85 jipilab]:
> On another debian-buster I get an error in the installation. Relevant log attached.


Turns out the same failure happens on current develop. So it's not related to this ticket necessarily. (This machine is from the department, we just got a new os update, so we are less aware of the default installations)



---

archive/issue_comments_536658.json:
```json
{
    "body": "Changing commit from \"cce6cbd221634fc36df0661fd69d4f7401c5d5d7\" to \"b74fc93c12be28adac7afcad571464b063b3e509\"",
    "created_at": "2020-03-17T00:25:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536658",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "cce6cbd221634fc36df0661fd69d4f7401c5d5d7" to "b74fc93c12be28adac7afcad571464b063b3e509"



---

archive/issue_comments_536659.json:
```json
{
    "body": "<a id='comment:87'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2020-03-17T00:25:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536659",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:87'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_536660.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-03-17T00:25:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536660",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_536661.json:
```json
{
    "body": "Changing dependencies from \"#27803\" to \"\"",
    "created_at": "2020-03-17T00:25:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536661",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#27803" to ""



---

archive/issue_comments_536662.json:
```json
{
    "body": "<a id='comment:89'></a>Let me know when this is good to be tested: turns out, I might have more time now for testing(!)...",
    "created_at": "2020-03-17T09:31:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536662",
    "user": "https://github.com/jplab"
}
```

<a id='comment:89'></a>Let me know when this is good to be tested: turns out, I might have more time now for testing(!)...



---

archive/issue_events_068843.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T06:38:06Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27763#event-68843"
}
```



---

archive/issue_events_068844.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T06:38:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27763#event-68844"
}
```



---

archive/issue_comments_536663.json:
```json
{
    "body": "<a id='comment:90'></a>pushing these forward to 9.2",
    "created_at": "2020-04-14T06:38:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536663",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:90'></a>pushing these forward to 9.2



---

archive/issue_comments_536664.json:
```json
{
    "body": "Changing commit from \"b74fc93c12be28adac7afcad571464b063b3e509\" to \"e78723863936a485d354c53f38e1c73d57ae713f\"",
    "created_at": "2020-04-25T20:56:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536664",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b74fc93c12be28adac7afcad571464b063b3e509" to "e78723863936a485d354c53f38e1c73d57ae713f"



---

archive/issue_comments_536665.json:
```json
{
    "body": "<a id='comment:91'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-25T20:56:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536665",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:91'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_536666.json:
```json
{
    "body": "Changing commit from \"e78723863936a485d354c53f38e1c73d57ae713f\" to \"20b8ffe35d1a326c0ba808cf1b150e207159d22f\"",
    "created_at": "2020-04-25T21:49:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536666",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e78723863936a485d354c53f38e1c73d57ae713f" to "20b8ffe35d1a326c0ba808cf1b150e207159d22f"



---

archive/issue_comments_536667.json:
```json
{
    "body": "<a id='comment:92'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-25T21:49:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536667",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:92'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_536668.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#29582\"",
    "created_at": "2020-04-25T21:49:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536668",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#29582"



---

archive/issue_comments_536669.json:
```json
{
    "body": "<a id='comment:94'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-25T22:51:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536669",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:94'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_536670.json:
```json
{
    "body": "Changing commit from \"20b8ffe35d1a326c0ba808cf1b150e207159d22f\" to \"225dea925c37e385e74b8403d4ee294a3ca4e689\"",
    "created_at": "2020-04-25T22:51:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536670",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "20b8ffe35d1a326c0ba808cf1b150e207159d22f" to "225dea925c37e385e74b8403d4ee294a3ca4e689"



---

archive/issue_comments_536671.json:
```json
{
    "body": "<a id='comment:95'></a>NOT ready for new tests.",
    "created_at": "2020-04-25T22:52:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536671",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:95'></a>NOT ready for new tests.



---

archive/issue_comments_536672.json:
```json
{
    "body": "<a id='comment:96'></a>Replying to [comment:95 mkoeppe]:\n> NOT ready for new tests.\n\n\nOk, just I'll wait until you change the flag to needs review and then I could run some installation tests.",
    "created_at": "2020-05-11T14:25:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536672",
    "user": "https://github.com/jplab"
}
```

<a id='comment:96'></a>Replying to [comment:95 mkoeppe]:
> NOT ready for new tests.


Ok, just I'll wait until you change the flag to needs review and then I could run some installation tests.



---

archive/issue_events_068845.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27763#event-68845"
}
```



---

archive/issue_events_068846.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27763#event-68846"
}
```



---

archive/issue_comments_536673.json:
```json
{
    "body": "<a id='comment:98'></a>Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-24T02:04:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536673",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:98'></a>Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_068847.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-24T02:04:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27763#event-68847"
}
```



---

archive/issue_events_068848.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-24T02:04:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27763#event-68848"
}
```



---

archive/issue_comments_536674.json:
```json
{
    "body": "<a id='comment:99'></a>Setting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27763#issuecomment-536674",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:99'></a>Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_events_068849.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27763#event-68849"
}
```



---

archive/issue_events_068850.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27763#event-68850"
}
```



---

archive/issue_events_068851.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27763#event-68851"
}
```



---

archive/issue_events_068852.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27763#event-68852"
}
```



---

archive/issue_events_068853.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27763#event-68853"
}
```



---

archive/issue_events_068854.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27763#event-68854"
}
```



---

archive/issue_events_068855.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27763#event-68855"
}
```



---

archive/issue_events_068856.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27763",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27763#event-68856"
}
```
