# Issue 27763: Perl packages for polymake

archive/issues_027526.json:
```json
{
    "assignees": [],
    "body": "To simplify installation of polymake, we add some required CPAN packages. \n\nIncluding recursive dependencies, these are 103 packages, a total of 7.5 MB of source archives, which we pack up as the source tar ball of the new spkg `perl_cpan_polymake_prereq`.\nThe source tar ball (attached) also contains a copy of the self-contained `cpanm` Perl script, which is used for installing the packages.\nIf `SAGE_CHECK=no`, only about 35 packages are installed. The rest of the dependencies are for testing.\n\nUsing an `spkg-configure.m4`, it is downloaded and installed only if the Perl packages are not already present on the system.\n\nThe `spkg-install` installs the packages via the package dependencies mechanism. If some of the packages are already installed in some version on the system, we do not install a newer version.\n\nTo try out:\n\n```\n   wget -P upstream https://trac.sagemath.org/raw-attachment/ticket/27763/perl_cpan_polymake_prereq-2019-05-19.tar.gz\n```\n\n\nSee also the sage-devel post about compilation: https://groups.google.com/forum/#!topic/sage-devel/ukJgMweHszU\n\n\nDepends on #29582\n\nCC:  @dimpase @jplab lorenz@math.tu-berlin.de kastner@math.tu-berlin.de paffenholz@mathematik.tu-darmstadt.de\n\nBranch/Commit: **[u/mkoeppe/perl_packages_for_polymake](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/perl_packages_for_polymake) @ [225dea9](https://github.com/sagemath/sagetrac-mirror/commit/225dea925c37e385e74b8403d4ee294a3ca4e689)**\n\nAuthor: **Matthias Koeppe**\n\nComponent: **packages: optional**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/27763_\n\n",
    "created_at": "2019-05-03T09:47:53Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20optional",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.9",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Perl packages for polymake",
    "type": "issue",
    "updated_at": "2023-01-07T21:39:40Z",
    "url": "https://github.com/sagemath/sage/issues/27763",
    "user": "https://github.com/mkoeppe"
}
```
To simplify installation of polymake, we add some required CPAN packages. 

Including recursive dependencies, these are 103 packages, a total of 7.5 MB of source archives, which we pack up as the source tar ball of the new spkg `perl_cpan_polymake_prereq`.
The source tar ball (attached) also contains a copy of the self-contained `cpanm` Perl script, which is used for installing the packages.
If `SAGE_CHECK=no`, only about 35 packages are installed. The rest of the dependencies are for testing.

Using an `spkg-configure.m4`, it is downloaded and installed only if the Perl packages are not already present on the system.

The `spkg-install` installs the packages via the package dependencies mechanism. If some of the packages are already installed in some version on the system, we do not install a newer version.

To try out:

```
   wget -P upstream https://trac.sagemath.org/raw-attachment/ticket/27763/perl_cpan_polymake_prereq-2019-05-19.tar.gz
```


See also the sage-devel post about compilation: https://groups.google.com/forum/#!topic/sage-devel/ukJgMweHszU


Depends on #29582

CC:  @dimpase @jplab lorenz@math.tu-berlin.de kastner@math.tu-berlin.de paffenholz@mathematik.tu-darmstadt.de

Branch/Commit: **[u/mkoeppe/perl_packages_for_polymake](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/perl_packages_for_polymake) @ [225dea9](https://github.com/sagemath/sagetrac-mirror/commit/225dea925c37e385e74b8403d4ee294a3ca4e689)**

Author: **Matthias Koeppe**

Component: **packages: optional**

_Issue created by migration from https://trac.sagemath.org/ticket/27763_





---

archive/issue_events_380877.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2019-05-03T09:47:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27763#event-380877"
}
```



---

archive/issue_events_380878.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2019-05-03T09:47:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20optional",
    "label_color": "000080",
    "label_name": "c: packages: optional",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27763#event-380878"
}
```



---

archive/issue_events_380879.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2019-05-03T09:47:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27763#event-380879"
}
```



---

archive/issue_events_380880.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2019-05-03T09:47:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27763#event-380880"
}
```



---

archive/issue_comments_430825.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI'd suggest to have appropriate `spkg-configure.m4`, to avoid installing extra...\n\nBy the way, could you provide  `spkg-configure.m4` for `perl_term_readline_gnu`, and other already present as packages `polymake` deps (perl or not)?",
    "created_at": "2019-05-07T11:10:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430825",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:2" align="right">comment:2</div>

I'd suggest to have appropriate `spkg-configure.m4`, to avoid installing extra...

By the way, could you provide  `spkg-configure.m4` for `perl_term_readline_gnu`, and other already present as packages `polymake` deps (perl or not)?



---

archive/issue_comments_430826.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nDo you have a suggestion how to install these CPAN packages if they are not available?\nThere seems to be a large number of dependencies that each of the listed packages pulls in -- but probably many are \"standard\" on any system that has perl installed.",
    "created_at": "2019-05-07T11:13:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430826",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:3" align="right">comment:3</div>

Do you have a suggestion how to install these CPAN packages if they are not available?
There seems to be a large number of dependencies that each of the listed packages pulls in -- but probably many are "standard" on any system that has perl installed.



---

archive/issue_comments_430827.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI don't know much about perl. Does it have anything analogous to Python's pip, which allows direct installation from the net (from CPAN, I guess) ?",
    "created_at": "2019-05-07T11:26:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430827",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:4" align="right">comment:4</div>

I don't know much about perl. Does it have anything analogous to Python's pip, which allows direct installation from the net (from CPAN, I guess) ?



---

archive/issue_comments_430828.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nYes, the `cpan` program does the equivalent of `pip`.",
    "created_at": "2019-05-07T11:30:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430828",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:5" align="right">comment:5</div>

Yes, the `cpan` program does the equivalent of `pip`.



---

archive/issue_comments_430829.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI tried something like `perl -MCPAN -e 'install XML::Writer'` but it seems to want to install stuff into `/usr/local` rather than `$SAGE_LOCAL`.\nDo you know how to set all this up properly?",
    "created_at": "2019-05-07T11:33:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430829",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:6" align="right">comment:6</div>

I tried something like `perl -MCPAN -e 'install XML::Writer'` but it seems to want to install stuff into `/usr/local` rather than `$SAGE_LOCAL`.
Do you know how to set all this up properly?



---

archive/issue_comments_430830.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI have only used  `cpan -i`, which asks whether to install system wide or in the user's home directory.\nHere's some info: https://stackoverflow.com/questions/540640/how-can-i-install-a-cpan-module-into-a-local-directory\n\nI used something like this for `perl_term_readline_gnu`, but this is not going through cpan.",
    "created_at": "2019-05-07T11:56:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430830",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

I have only used  `cpan -i`, which asks whether to install system wide or in the user's home directory.
Here's some info: https://stackoverflow.com/questions/540640/how-can-i-install-a-cpan-module-into-a-local-directory

I used something like this for `perl_term_readline_gnu`, but this is not going through cpan.



---

archive/issue_comments_430831.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI don't know, it seems one needs to setup some `local::lib` magic, otherwise I keep getting errors trying to to install into `/usr/local`.\n\n`local::lib` is a Perl module that apparently allows one to use non-standard directories for module installation, it might not be in by default (e.g. it's not in Gentoo, one needs to install it).\n\nAnyhow - for checking in autoconf which perl modules are installed, one can use [AX_PROG_PERL_MODULES](https://www.gnu.org/software/autoconf-archive/ax_prog_perl_modules.html)",
    "created_at": "2019-05-07T12:59:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430831",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:8" align="right">comment:8</div>

I don't know, it seems one needs to setup some `local::lib` magic, otherwise I keep getting errors trying to to install into `/usr/local`.

`local::lib` is a Perl module that apparently allows one to use non-standard directories for module installation, it might not be in by default (e.g. it's not in Gentoo, one needs to install it).

Anyhow - for checking in autoconf which perl modules are installed, one can use [AX_PROG_PERL_MODULES](https://www.gnu.org/software/autoconf-archive/ax_prog_perl_modules.html)



---

archive/issue_comments_430832.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI also had to install `File::Slurp` perl module. Fortunately on Gentoo there seems to be an (almost?) 1-to-1 correspondence between perl packages named `X::Y` and Gentoo packages named `X-Y`.\n\nI also see\n\n```\nFile \"src/sage/interfaces/polymake.py\", line 884, in sage.interfaces.polymake.Polymake._eval_line\nFailed example:\n    c                                 # optional - polymake\nExpected:\n    cube of dimension 15\nGot:\n    1\n    print ref(@SAGE590);\n    print reftype(@SAGE590);\n**********************************************************************\nFile \"src/sage/interfaces/polymake.py\", line 886, in sage.interfaces.polymake.Polymake._eval_line\nFailed example:\n    c.N_VERTICES                      # optional - polymake\nExpected:\n    32768\nGot:\n    Member function 'N_VERTICES' of  object\n```",
    "created_at": "2019-05-07T16:10:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430832",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:9" align="right">comment:9</div>

I also had to install `File::Slurp` perl module. Fortunately on Gentoo there seems to be an (almost?) 1-to-1 correspondence between perl packages named `X::Y` and Gentoo packages named `X-Y`.

I also see

```
File "src/sage/interfaces/polymake.py", line 884, in sage.interfaces.polymake.Polymake._eval_line
Failed example:
    c                                 # optional - polymake
Expected:
    cube of dimension 15
Got:
    1
    print ref(@SAGE590);
    print reftype(@SAGE590);
**********************************************************************
File "src/sage/interfaces/polymake.py", line 886, in sage.interfaces.polymake.Polymake._eval_line
Failed example:
    c.N_VERTICES                      # optional - polymake
Expected:
    32768
Got:
    Member function 'N_VERTICES' of  object
```



---

archive/issue_comments_430833.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@dimpase](#comment:9):\n> I also had to install `File::Slurp` perl module.\n\nYes, this is already mentioned in `polymake/SPKG.txt`\n\n>  Fortunately on Gentoo there seems to be an (almost?) 1-to-1 correspondence between perl packages named `X::Y` and Gentoo packages named `X-Y`.\n> \n> I also see\n> \n> ```\n> File \"src/sage/interfaces/polymake.py\", line 884, in sage.interfaces.polymake.Polymake._eval_line\n> Failed example:\n>     c                                 # optional - polymake\n> Expected:\n>     cube of dimension 15\n> Got:\n>     1\n>     print ref(@SAGE590);\n>     print reftype(@SAGE590);\n> **********************************************************************\n> File \"src/sage/interfaces/polymake.py\", line 886, in sage.interfaces.polymake.Polymake._eval_line\n> Failed example:\n>     c.N_VERTICES                      # optional - polymake\n> Expected:\n>     32768\n> Got:\n>     Member function 'N_VERTICES' of  object\n> ```\n\nWith which version of polymake is this? The 3.4 upgrade ticket has fixes for something like this.",
    "created_at": "2019-05-07T16:14:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430833",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@dimpase](#comment:9):
> I also had to install `File::Slurp` perl module.

Yes, this is already mentioned in `polymake/SPKG.txt`

>  Fortunately on Gentoo there seems to be an (almost?) 1-to-1 correspondence between perl packages named `X::Y` and Gentoo packages named `X-Y`.
> 
> I also see
> 
> ```
> File "src/sage/interfaces/polymake.py", line 884, in sage.interfaces.polymake.Polymake._eval_line
> Failed example:
>     c                                 # optional - polymake
> Expected:
>     cube of dimension 15
> Got:
>     1
>     print ref(@SAGE590);
>     print reftype(@SAGE590);
> **********************************************************************
> File "src/sage/interfaces/polymake.py", line 886, in sage.interfaces.polymake.Polymake._eval_line
> Failed example:
>     c.N_VERTICES                      # optional - polymake
> Expected:
>     32768
> Got:
>     Member function 'N_VERTICES' of  object
> ```

With which version of polymake is this? The 3.4 upgrade ticket has fixes for something like this.



---

archive/issue_comments_430834.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nIf I do\n\n```\n--- a/src/sage/interfaces/polymake.py\n+++ b/src/sage/interfaces/polymake.py\n@@ -874,10 +874,6 @@ class Polymake(ExtraTabCompletion, Expect):\n         sometimes it hangs, and therefore we remove it from the tests, for now::\n \n             sage: c = polymake.cube(15)             # optional - polymake\n-            sage: polymake.eval('print {}->F_VECTOR;'.format(c.name()), timeout=1) # optional - polymake # not tested\n-            Traceback (most recent call last):\n-            ...\n-            RuntimeError: Polymake fails to respond timely\n \n         We verify that after the timeout, polymake is still able to give answers::\n \n```\nthen the tests pass, so the timeout thing seems to be doing more harm than good.",
    "created_at": "2019-05-07T16:17:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430834",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:11" align="right">comment:11</div>

If I do

```
--- a/src/sage/interfaces/polymake.py
+++ b/src/sage/interfaces/polymake.py
@@ -874,10 +874,6 @@ class Polymake(ExtraTabCompletion, Expect):
         sometimes it hangs, and therefore we remove it from the tests, for now::
 
             sage: c = polymake.cube(15)             # optional - polymake
-            sage: polymake.eval('print {}->F_VECTOR;'.format(c.name()), timeout=1) # optional - polymake # not tested
-            Traceback (most recent call last):
-            ...
-            RuntimeError: Polymake fails to respond timely
 
         We verify that after the timeout, polymake is still able to give answers::
 
```
then the tests pass, so the timeout thing seems to be doing more harm than good.



---

archive/issue_comments_430835.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI am testing this branch, so 3.4.",
    "created_at": "2019-05-07T16:18:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430835",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:12" align="right">comment:12</div>

I am testing this branch, so 3.4.



---

archive/issue_comments_430836.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\noops, sorry, wrong ticket. This is meant to be about polymake update to 3.4",
    "created_at": "2019-05-07T16:21:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430836",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:13" align="right">comment:13</div>

oops, sorry, wrong ticket. This is meant to be about polymake update to 3.4



---

archive/issue_comments_430837.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nyes, #24905.",
    "created_at": "2019-05-07T16:22:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430837",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:14" align="right">comment:14</div>

yes, #24905.



---

archive/issue_comments_430838.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nPlease see #27795 for using system's perm package `Term::ReadLine::Gnu`",
    "created_at": "2019-05-07T18:42:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430838",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:15" align="right">comment:15</div>

Please see #27795 for using system's perm package `Term::ReadLine::Gnu`



---

archive/issue_comments_430839.json:
```json
{
    "body": "Dependencies: **#24905, #27795**",
    "created_at": "2019-05-10T13:16:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430839",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#24905, #27795**



---

archive/issue_comments_430840.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nHow about adding checks for all the needed perl packages in the style of #27795 to polymake itself?\nActually, it would be easier (per package), as `Term::ReadLine::Gnu` is non-standard in the sense one cannot just `use` it.\n\nAs usual, they pay a usability price by not using autotools :-)",
    "created_at": "2019-05-11T10:48:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430840",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:17" align="right">comment:17</div>

How about adding checks for all the needed perl packages in the style of #27795 to polymake itself?
Actually, it would be easier (per package), as `Term::ReadLine::Gnu` is non-standard in the sense one cannot just `use` it.

As usual, they pay a usability price by not using autotools :-)



---

archive/issue_comments_430841.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@dimpase](#comment:17):\n> How about adding checks for all the needed perl packages in the style of #27795 to polymake itself?\n\npolymake itself does check for the packages needed at build time in its configure script.\nThe MongoDB package is checked at run time of polymake for the optional polyDB feature.",
    "created_at": "2019-05-11T11:36:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430841",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@dimpase](#comment:17):
> How about adding checks for all the needed perl packages in the style of #27795 to polymake itself?

polymake itself does check for the packages needed at build time in its configure script.
The MongoDB package is checked at run time of polymake for the optional polyDB feature.



---

archive/issue_comments_430842.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nThe challenge in this ticket is to make the installation of missing Perl packages not depend on internet access.\nHere's a possible approach.\n\nFirst install `App::cpanminus`. \nThen \n\n```\ncpanm --local-lib-contained $PERL_LOCAL_LIB_ROOT --exclude-vendor --save-dists $PARTIAL_CPAN_MIRROR XML::Writer XML::LibXML XML::LibXSLT File::Slurp Term::ReadLine::Gnu JSON SVG MongoDB\n```\nwill (1) download and install these prerequisites in $PERL_LOCAL_LIB_ROOT,\n(2) save the source packages in a directory tree $PARTIAL_CPAN_MIRROR.\n\nThese are 58 packages, a total of 5 MB of source archives, which we can pack up as the source tar ball of the new spkg `perl_cpan_polymake_prereq`. \n\nThen figure out how to install with plain `cpan` (not `cpanm`, which is not available out of the box on macOS) using this local partial CPAN mirror.",
    "created_at": "2019-05-11T11:57:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430842",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:19" align="right">comment:19</div>

The challenge in this ticket is to make the installation of missing Perl packages not depend on internet access.
Here's a possible approach.

First install `App::cpanminus`. 
Then 

```
cpanm --local-lib-contained $PERL_LOCAL_LIB_ROOT --exclude-vendor --save-dists $PARTIAL_CPAN_MIRROR XML::Writer XML::LibXML XML::LibXSLT File::Slurp Term::ReadLine::Gnu JSON SVG MongoDB
```
will (1) download and install these prerequisites in $PERL_LOCAL_LIB_ROOT,
(2) save the source packages in a directory tree $PARTIAL_CPAN_MIRROR.

These are 58 packages, a total of 5 MB of source archives, which we can pack up as the source tar ball of the new spkg `perl_cpan_polymake_prereq`. 

Then figure out how to install with plain `cpan` (not `cpanm`, which is not available out of the box on macOS) using this local partial CPAN mirror.



---

archive/issue_comments_430843.json:
```json
{
    "body": "Branch: **[u/mkoeppe/perl_packages_for_polymake](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/perl_packages_for_polymake)**",
    "created_at": "2019-05-11T13:16:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430843",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/perl_packages_for_polymake](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/perl_packages_for_polymake)**



---

archive/issue_comments_430844.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/31b52237791b68a1d5e7231d0b1a66bffc75fb73\">31b5223</a></td><td><code>Add perl_cpan_polymake_prereq as a polymake dependency</code></td></tr></table>\n",
    "created_at": "2019-05-11T13:16:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430844",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/31b52237791b68a1d5e7231d0b1a66bffc75fb73">31b5223</a></td><td><code>Add perl_cpan_polymake_prereq as a polymake dependency</code></td></tr></table>




---

archive/issue_comments_430845.json:
```json
{
    "body": "Commit: **[31b5223](https://github.com/sagemath/sagetrac-mirror/commit/31b52237791b68a1d5e7231d0b1a66bffc75fb73)**",
    "created_at": "2019-05-11T13:16:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430845",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[31b5223](https://github.com/sagemath/sagetrac-mirror/commit/31b52237791b68a1d5e7231d0b1a66bffc75fb73)**



---

archive/issue_comments_430846.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/476c148131651be925d10b87e0a84437e65207d6\">476c148</a></td><td><code>Install CPAN modules with cpanm</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7611f432e9b983d20f40d7252e62552a7d980548\">7611f43</a></td><td><code>Use cpanm --skip-satisfied</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/749c447ad7a5ebc266b9d27a8ff59014b771b0b8\">749c447</a></td><td><code>List dependencies in Makefile.PL</code></td></tr></table>\n",
    "created_at": "2019-05-13T20:38:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430846",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/476c148131651be925d10b87e0a84437e65207d6">476c148</a></td><td><code>Install CPAN modules with cpanm</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7611f432e9b983d20f40d7252e62552a7d980548">7611f43</a></td><td><code>Use cpanm --skip-satisfied</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/749c447ad7a5ebc266b9d27a8ff59014b771b0b8">749c447</a></td><td><code>List dependencies in Makefile.PL</code></td></tr></table>




---

archive/issue_comments_430847.json:
```json
{
    "body": "Changed commit from **[31b5223](https://github.com/sagemath/sagetrac-mirror/commit/31b52237791b68a1d5e7231d0b1a66bffc75fb73)** to **[749c447](https://github.com/sagemath/sagetrac-mirror/commit/749c447ad7a5ebc266b9d27a8ff59014b771b0b8)**",
    "created_at": "2019-05-13T20:38:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430847",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[31b5223](https://github.com/sagemath/sagetrac-mirror/commit/31b52237791b68a1d5e7231d0b1a66bffc75fb73)** to **[749c447](https://github.com/sagemath/sagetrac-mirror/commit/749c447ad7a5ebc266b9d27a8ff59014b771b0b8)**



---

archive/issue_comments_430848.json:
```json
{
    "body": "Changed dependencies from **#24905, #27795** to none",
    "created_at": "2019-05-13T20:43:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430848",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#24905, #27795** to none



---

archive/issue_events_380881.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2019-05-13T20:43:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27763#event-380881"
}
```



---

archive/issue_comments_430849.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,9 @@\n To simplify installation of polymake, we add some required CPAN packages. \n \n+Including recursive dependencies, these are 58 packages, a total of 5 MB of source archives, which we pack up as the source tar ball of the new spkg `perl_cpan_polymake_prereq`.\n+The source tar ball also contains a copy of the self-contained `cpanm` Perl script, which is used for installing the packages.\n+\n+Using an `spkg-configure.m4`, it is downloaded and installed only if the Perl packages are not already present on the system.\n+\n+The `spkg-install` installs the packages via the package dependencies mechanism. If some of the packages are already installed in some version on the system, we do not install a newer version.\n+\n``````\n",
    "created_at": "2019-05-13T20:43:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430849",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,9 @@
 To simplify installation of polymake, we add some required CPAN packages. 
 
+Including recursive dependencies, these are 58 packages, a total of 5 MB of source archives, which we pack up as the source tar ball of the new spkg `perl_cpan_polymake_prereq`.
+The source tar ball also contains a copy of the self-contained `cpanm` Perl script, which is used for installing the packages.
+
+Using an `spkg-configure.m4`, it is downloaded and installed only if the Perl packages are not already present on the system.
+
+The `spkg-install` installs the packages via the package dependencies mechanism. If some of the packages are already installed in some version on the system, we do not install a newer version.
+
``````




---

archive/issue_comments_430850.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2019-05-13T20:43:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430850",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_comments_430851.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aecb94acc7eaeab284616da3eb4aa43b63041091\">aecb94a</a></td><td><code>perl_cpan_polymake_prereq/spkg-src: Actually compress the tarball</code></td></tr></table>\n",
    "created_at": "2019-05-13T21:50:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430851",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aecb94acc7eaeab284616da3eb4aa43b63041091">aecb94a</a></td><td><code>perl_cpan_polymake_prereq/spkg-src: Actually compress the tarball</code></td></tr></table>




---

archive/issue_comments_430852.json:
```json
{
    "body": "Changed commit from **[749c447](https://github.com/sagemath/sagetrac-mirror/commit/749c447ad7a5ebc266b9d27a8ff59014b771b0b8)** to **[aecb94a](https://github.com/sagemath/sagetrac-mirror/commit/aecb94acc7eaeab284616da3eb4aa43b63041091)**",
    "created_at": "2019-05-13T21:50:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430852",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[749c447](https://github.com/sagemath/sagetrac-mirror/commit/749c447ad7a5ebc266b9d27a8ff59014b771b0b8)** to **[aecb94a](https://github.com/sagemath/sagetrac-mirror/commit/aecb94acc7eaeab284616da3eb4aa43b63041091)**



---

archive/issue_comments_430853.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nAttachment: **[perl_cpan_polymake_prereq-2019-05-13.tar.gz](https://github.com/sagemath/sage/files/ticket27763/perl_cpan_polymake_prereq-2019-05-13.tar.gz)**",
    "created_at": "2019-05-13T21:51:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430853",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:25" align="right">comment:25</div>

Attachment: **[perl_cpan_polymake_prereq-2019-05-13.tar.gz](https://github.com/sagemath/sage/files/ticket27763/perl_cpan_polymake_prereq-2019-05-13.tar.gz)**



---

archive/issue_comments_430854.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,7 @@\n To simplify installation of polymake, we add some required CPAN packages. \n \n Including recursive dependencies, these are 58 packages, a total of 5 MB of source archives, which we pack up as the source tar ball of the new spkg `perl_cpan_polymake_prereq`.\n-The source tar ball also contains a copy of the self-contained `cpanm` Perl script, which is used for installing the packages.\n+The source tar ball (attached) also contains a copy of the self-contained `cpanm` Perl script, which is used for installing the packages.\n \n Using an `spkg-configure.m4`, it is downloaded and installed only if the Perl packages are not already present on the system.\n \n``````\n",
    "created_at": "2019-05-13T21:51:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430854",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,7 @@
 To simplify installation of polymake, we add some required CPAN packages. 
 
 Including recursive dependencies, these are 58 packages, a total of 5 MB of source archives, which we pack up as the source tar ball of the new spkg `perl_cpan_polymake_prereq`.
-The source tar ball also contains a copy of the self-contained `cpanm` Perl script, which is used for installing the packages.
+The source tar ball (attached) also contains a copy of the self-contained `cpanm` Perl script, which is used for installing the packages.
 
 Using an `spkg-configure.m4`, it is downloaded and installed only if the Perl packages are not already present on the system.
 
``````




---

archive/issue_comments_430855.json:
```json
{
    "body": "Attachment: **[polymake-3.4.log](https://github.com/sagemath/sage/files/ticket27763/polymake-3.4.log)**\n\nCurious install log -> perl_term_readline_gnu",
    "created_at": "2019-05-14T14:56:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430855",
    "user": "https://github.com/jplab"
}
```

Attachment: **[polymake-3.4.log](https://github.com/sagemath/sage/files/ticket27763/polymake-3.4.log)**

Curious install log -> perl_term_readline_gnu



---

archive/issue_comments_430856.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nAfter I did install successfully polymake, the interface was broken (compile error of some sort). And tab completion did not work. Then I saw that `perm_term_readline_gnu` experimental package was not installed (although it seems like the configure step of the installation detected the local package but seemed like it can not use the local package).\n\nDoes that make sense? Unfortunately, I can not offer more traceback, I reached the end of my terminal buffer.\n\nIf needed, I could try to proceed similarly on a twin computer to see if I can reproduce this.",
    "created_at": "2019-05-14T14:59:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430856",
    "user": "https://github.com/jplab"
}
```

<div id="comment:27" align="right">comment:27</div>

After I did install successfully polymake, the interface was broken (compile error of some sort). And tab completion did not work. Then I saw that `perm_term_readline_gnu` experimental package was not installed (although it seems like the configure step of the installation detected the local package but seemed like it can not use the local package).

Does that make sense? Unfortunately, I can not offer more traceback, I reached the end of my terminal buffer.

If needed, I could try to proceed similarly on a twin computer to see if I can reproduce this.



---

archive/issue_comments_430857.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nBy `local package` you mean `system package`, right?\n\nCan you uninstall Sage's `perm_term_readline_gnu` and then in terminal run\n\n```\nperl -e \"use Term::ReadLine; Term::ReadLine->get_all_function_names\" \n```\n- there should be no output if `perm_term_readline_gnu` is installed, and an error message otherwise.",
    "created_at": "2019-05-14T15:54:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430857",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:28" align="right">comment:28</div>

By `local package` you mean `system package`, right?

Can you uninstall Sage's `perm_term_readline_gnu` and then in terminal run

```
perl -e "use Term::ReadLine; Term::ReadLine->get_all_function_names" 
```
- there should be no output if `perm_term_readline_gnu` is installed, and an error message otherwise.



---

archive/issue_comments_430858.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nAlso, run ./configure and see whether you have\n\n```\n    perl_term_readline_gnu-1.35 will not be installed (configure check)\n```\nin the output",
    "created_at": "2019-05-14T15:56:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430858",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:29" align="right">comment:29</div>

Also, run ./configure and see whether you have

```
    perl_term_readline_gnu-1.35 will not be installed (configure check)
```
in the output



---

archive/issue_comments_430859.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nI think it's possible that the system's `Term::ReadLine::Gnu` becomes unusable in the sage environment if sage installs its own libreadline. If for some reason we install our own libreadline, then we should probably also install `Term::ReadLine::Gnu`.",
    "created_at": "2019-05-14T21:51:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430859",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:30" align="right">comment:30</div>

I think it's possible that the system's `Term::ReadLine::Gnu` becomes unusable in the sage environment if sage installs its own libreadline. If for some reason we install our own libreadline, then we should probably also install `Term::ReadLine::Gnu`.



---

archive/issue_comments_430860.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nOr we could just revert #27795.",
    "created_at": "2019-05-14T21:54:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430860",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:31" align="right">comment:31</div>

Or we could just revert #27795.



---

archive/issue_comments_430861.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nwhen I wrote #27795 I was under impression that perl is isolated from sage's \"vendored madness\" libraries, as it is an independent executable, just like, say, bash.\n\nif the problem is indeed as you described then the right way forward is to get #27277 reviewed and merged.then readline wont get built if it is available.",
    "created_at": "2019-05-15T06:40:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430861",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:32" align="right">comment:32</div>

when I wrote #27795 I was under impression that perl is isolated from sage's "vendored madness" libraries, as it is an independent executable, just like, say, bash.

if the problem is indeed as you described then the right way forward is to get #27277 reviewed and merged.then readline wont get built if it is available.



---

archive/issue_comments_430862.json:
```json
{
    "body": "<div id=\"comment:33\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/59161415289ce3256a260a8d798df7d95071658a\">5916141</a></td><td><code>Fix polymake lrslib detection</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/857af801ad3e9bddc2672c50e8a985ea200188ea\">857af80</a></td><td><code>polymake: add dependency ppl</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/10189db608570332744cdc2c51ba6c471af1d00b\">10189db</a></td><td><code>Merge branch 't/27803/public/27803-polymake-lrslib-detection' into t/27763/perl_packages_for_polymake</code></td></tr></table>\n",
    "created_at": "2019-05-15T09:16:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430862",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:33"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/59161415289ce3256a260a8d798df7d95071658a">5916141</a></td><td><code>Fix polymake lrslib detection</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/857af801ad3e9bddc2672c50e8a985ea200188ea">857af80</a></td><td><code>polymake: add dependency ppl</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/10189db608570332744cdc2c51ba6c471af1d00b">10189db</a></td><td><code>Merge branch 't/27803/public/27803-polymake-lrslib-detection' into t/27763/perl_packages_for_polymake</code></td></tr></table>




---

archive/issue_comments_430863.json:
```json
{
    "body": "Changed commit from **[aecb94a](https://github.com/sagemath/sagetrac-mirror/commit/aecb94acc7eaeab284616da3eb4aa43b63041091)** to **[10189db](https://github.com/sagemath/sagetrac-mirror/commit/10189db608570332744cdc2c51ba6c471af1d00b)**",
    "created_at": "2019-05-15T09:16:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430863",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[aecb94a](https://github.com/sagemath/sagetrac-mirror/commit/aecb94acc7eaeab284616da3eb4aa43b63041091)** to **[10189db](https://github.com/sagemath/sagetrac-mirror/commit/10189db608570332744cdc2c51ba6c471af1d00b)**



---

archive/issue_comments_430864.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nAdding #27803 dependency to prevent merge conflict.",
    "created_at": "2019-05-15T09:16:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430864",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:34" align="right">comment:34</div>

Adding #27803 dependency to prevent merge conflict.



---

archive/issue_comments_430865.json:
```json
{
    "body": "Dependencies: **#27803**",
    "created_at": "2019-05-15T09:16:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430865",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#27803**



---

archive/issue_comments_430866.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@dimpase](#comment:32):\n> when I wrote #27795 I was under impression that perl is isolated from sage's \"vendored madness\" libraries, as it is an independent executable, just like, say, bash.\n\nYes, the Perl executable is fine, but the myriad of CPAN packages link to lots of libraries.\n\n> if the problem is indeed as you described then the right way forward is to get #27277 reviewed and merged.then readline wont get built if it is available.\n\nOK.",
    "created_at": "2019-05-15T09:21:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430866",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@dimpase](#comment:32):
> when I wrote #27795 I was under impression that perl is isolated from sage's "vendored madness" libraries, as it is an independent executable, just like, say, bash.

Yes, the Perl executable is fine, but the myriad of CPAN packages link to lots of libraries.

> if the problem is indeed as you described then the right way forward is to get #27277 reviewed and merged.then readline wont get built if it is available.

OK.



---

archive/issue_comments_430867.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@mkoeppe](#comment:35):\n> Replying to [@dimpase](#comment:32):\n> > when I wrote #27795 I was under impression that perl is isolated from sage's \"vendored madness\" libraries, as it is an independent executable, just like, say, bash.\n\n> \n> Yes, the Perl executable is fine, but the myriad of CPAN packages link to lots of libraries.\n\nyes, I understand this, but I imagine the only conflicts of this sort are possible if you run polymake as a python extension, that loads a wrong dll at runtime.\n\nAs I don't know how the polymake interface works, I can't tell whether this is the case.\n\nIn any case, could you explain where these *.so parts of perl packages may be found, so that I can look at them with ldd/otool ?",
    "created_at": "2019-05-15T09:29:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430867",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@mkoeppe](#comment:35):
> Replying to [@dimpase](#comment:32):
> > when I wrote #27795 I was under impression that perl is isolated from sage's "vendored madness" libraries, as it is an independent executable, just like, say, bash.

> 
> Yes, the Perl executable is fine, but the myriad of CPAN packages link to lots of libraries.

yes, I understand this, but I imagine the only conflicts of this sort are possible if you run polymake as a python extension, that loads a wrong dll at runtime.

As I don't know how the polymake interface works, I can't tell whether this is the case.

In any case, could you explain where these *.so parts of perl packages may be found, so that I can look at them with ldd/otool ?



---

archive/issue_comments_430868.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nIf there is indeed a possible problem like this, build/pkgs/perl_term_readline_gnu/spkg-configure.m4 needs to be modified to include a check for readline.\n\nI would actually be more worried about a potential conflict between an incompatible readline library, say, on OSX, and the one built by Sage (or provided by Homebrew/MacPorts)...",
    "created_at": "2019-05-15T09:57:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430868",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:37" align="right">comment:37</div>

If there is indeed a possible problem like this, build/pkgs/perl_term_readline_gnu/spkg-configure.m4 needs to be modified to include a check for readline.

I would actually be more worried about a potential conflict between an incompatible readline library, say, on OSX, and the one built by Sage (or provided by Homebrew/MacPorts)...



---

archive/issue_comments_430869.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nReplying to [@dimpase](#comment:29):\n> Also, run ./configure and see whether you have\n> \n> ```\n>     perl_term_readline_gnu-1.35 will not be installed (configure check)\n> ```\n> in the output\n\nYes, I met `system package`.\n\nOk, so here is the outcome.\n\nI ran the command \n\n`perl -e \"use Term::ReadLine; Term::ReadLine->get_all_function_names\"`\n\nbefore uninstalling `perl_term_readline_gnu`: No output.\n\nAfter uninstalling (inside of sage shell using the `sage-spkg-uninstall` command) I still get no output.\n\nThings now seems to work flawlessly using the interface though.\n\nRunning `./configure`, I do check the `(configure check)`.\n\nOk, so now it seems to catch the system `Term ReadLine`. I believe I know how it happened: I did install the perl libraries using `cpan -i XML::Writer XML::LibXML XML::LibXSLT File::Slurp JSON SVG` as the `sage -info polymake` suggested, but then, the installation of the polymake package was not preceeded by a rerun of `./configure` to catch the libraries that are now meanwhile to be found in my PATH? Somehow Sage still relied on its own `perl_term_readline_gnu` although the system one was found so it did not install the dependency. Weird.\n\nIf I run it on a clean computer, without the spkg `perl_term_readline_gnu` (and without any installation of the required perl libraries) I do get the error message (that now looks quite familiar to the one I was getting in Sage originally).\n\nOk, so in the end, I do not think there is an issue: I'll test it on fresh untouched debian machines to have a clean feedback.",
    "created_at": "2019-05-16T08:19:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430869",
    "user": "https://github.com/jplab"
}
```

<div id="comment:38" align="right">comment:38</div>

Replying to [@dimpase](#comment:29):
> Also, run ./configure and see whether you have
> 
> ```
>     perl_term_readline_gnu-1.35 will not be installed (configure check)
> ```
> in the output

Yes, I met `system package`.

Ok, so here is the outcome.

I ran the command 

`perl -e "use Term::ReadLine; Term::ReadLine->get_all_function_names"`

before uninstalling `perl_term_readline_gnu`: No output.

After uninstalling (inside of sage shell using the `sage-spkg-uninstall` command) I still get no output.

Things now seems to work flawlessly using the interface though.

Running `./configure`, I do check the `(configure check)`.

Ok, so now it seems to catch the system `Term ReadLine`. I believe I know how it happened: I did install the perl libraries using `cpan -i XML::Writer XML::LibXML XML::LibXSLT File::Slurp JSON SVG` as the `sage -info polymake` suggested, but then, the installation of the polymake package was not preceeded by a rerun of `./configure` to catch the libraries that are now meanwhile to be found in my PATH? Somehow Sage still relied on its own `perl_term_readline_gnu` although the system one was found so it did not install the dependency. Weird.

If I run it on a clean computer, without the spkg `perl_term_readline_gnu` (and without any installation of the required perl libraries) I do get the error message (that now looks quite familiar to the one I was getting in Sage originally).

Ok, so in the end, I do not think there is an issue: I'll test it on fresh untouched debian machines to have a clean feedback.



---

archive/issue_comments_430870.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nIsn't the presence of `local::lib` module a pre-req for all these package installations to function?",
    "created_at": "2019-05-16T08:52:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430870",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:39" align="right">comment:39</div>

Isn't the presence of `local::lib` module a pre-req for all these package installations to function?



---

archive/issue_comments_430871.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nReplying to [@jplab](#comment:38):\n> Replying to [@dimpase](#comment:29):\n> > Also, run ./configure and see whether you have\n> > \n> > ```\n> >     perl_term_readline_gnu-1.35 will not be installed (configure check)\n> > ```\n> > in the output\n\n> \n> Yes, I met `system package`.\n> \n> Ok, so here is the outcome.\n> \n> I ran the command \n> \n> `perl -e \"use Term::ReadLine; Term::ReadLine->get_all_function_names\"`\n> \n> before uninstalling `perl_term_readline_gnu`: No output.\n> \n> After uninstalling (inside of sage shell using the `sage-spkg-uninstall` command) I still get no output.\n> \n> Things now seems to work flawlessly using the interface though.\n> \n> Running `./configure`, I do check the `(configure check)`.\n> \n> Ok, so now it seems to catch the system `Term ReadLine`. I believe I know how it happened: I did install the perl libraries using `cpan -i XML::Writer XML::LibXML XML::LibXSLT File::Slurp JSON SVG` as the `sage -info polymake` suggested, but then, the installation of the polymake package was not preceeded by a rerun of `./configure` to catch the libraries that are now meanwhile to be found in my PATH? Somehow Sage still relied on its own `perl_term_readline_gnu` although the system one was found so it did not install the dependency. Weird.\n\nwell, this is by (somewhat unfortunate) design. Once you updated ./configure by installing/updating a `spkg-configure.m4` file in build/pkgs/foo/\nand you have foo installed in Sage and as a system package, the only way to switch from Sage-installed to system foo is to manually uninstall Sage's foo, and then re-run configure (othewise configure would check, and succeed in this, for Sage's foo first).\n\nThe main reason for that that some people do not want to retire the old `sage -f foo` as a way to install/update a package, see e.g. #27373...",
    "created_at": "2019-05-16T09:11:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430871",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:40" align="right">comment:40</div>

Replying to [@jplab](#comment:38):
> Replying to [@dimpase](#comment:29):
> > Also, run ./configure and see whether you have
> > 
> > ```
> >     perl_term_readline_gnu-1.35 will not be installed (configure check)
> > ```
> > in the output

> 
> Yes, I met `system package`.
> 
> Ok, so here is the outcome.
> 
> I ran the command 
> 
> `perl -e "use Term::ReadLine; Term::ReadLine->get_all_function_names"`
> 
> before uninstalling `perl_term_readline_gnu`: No output.
> 
> After uninstalling (inside of sage shell using the `sage-spkg-uninstall` command) I still get no output.
> 
> Things now seems to work flawlessly using the interface though.
> 
> Running `./configure`, I do check the `(configure check)`.
> 
> Ok, so now it seems to catch the system `Term ReadLine`. I believe I know how it happened: I did install the perl libraries using `cpan -i XML::Writer XML::LibXML XML::LibXSLT File::Slurp JSON SVG` as the `sage -info polymake` suggested, but then, the installation of the polymake package was not preceeded by a rerun of `./configure` to catch the libraries that are now meanwhile to be found in my PATH? Somehow Sage still relied on its own `perl_term_readline_gnu` although the system one was found so it did not install the dependency. Weird.

well, this is by (somewhat unfortunate) design. Once you updated ./configure by installing/updating a `spkg-configure.m4` file in build/pkgs/foo/
and you have foo installed in Sage and as a system package, the only way to switch from Sage-installed to system foo is to manually uninstall Sage's foo, and then re-run configure (othewise configure would check, and succeed in this, for Sage's foo first).

The main reason for that that some people do not want to retire the old `sage -f foo` as a way to install/update a package, see e.g. #27373...



---

archive/issue_comments_430872.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\n> well, this is by (somewhat unfortunate) design. Once you updated ./configure by installing/updating a `spkg-configure.m4` file in build/pkgs/foo/\n> and you have foo installed in Sage and as a system package, the only way to switch from Sage-installed to system foo is to manually uninstall Sage's foo, and then re-run configure (othewise configure would check, and succeed in this, for Sage's foo first).\n> \n> The main reason for that that some people do not want to retire the old `sage -f foo` as a way to install/update a package, see e.g. #27373...\n> \n\nOh I see now. Got it! Good to know.",
    "created_at": "2019-05-16T09:48:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430872",
    "user": "https://github.com/jplab"
}
```

<div id="comment:41" align="right">comment:41</div>

> well, this is by (somewhat unfortunate) design. Once you updated ./configure by installing/updating a `spkg-configure.m4` file in build/pkgs/foo/
> and you have foo installed in Sage and as a system package, the only way to switch from Sage-installed to system foo is to manually uninstall Sage's foo, and then re-run configure (othewise configure would check, and succeed in this, for Sage's foo first).
> 
> The main reason for that that some people do not want to retire the old `sage -f foo` as a way to install/update a package, see e.g. #27373...
> 

Oh I see now. Got it! Good to know.



---

archive/issue_comments_430873.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nReplying to [@dimpase](#comment:39):\n> Isn't the presence of `local::lib` module a pre-req for all these package installations to function?\n\nFor installing the modules, yes. But the `cpanm` script is fatpacked with all its prerequisite libraries, including `local::lib`.\n\nFor using the modules, no. We just modify the environment variable `PERL5LIB`.",
    "created_at": "2019-05-16T13:44:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430873",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:42" align="right">comment:42</div>

Replying to [@dimpase](#comment:39):
> Isn't the presence of `local::lib` module a pre-req for all these package installations to function?

For installing the modules, yes. But the `cpanm` script is fatpacked with all its prerequisite libraries, including `local::lib`.

For using the modules, no. We just modify the environment variable `PERL5LIB`.



---

archive/issue_comments_430874.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nsurely, `local::lib` is an installation tool, but can you install it into system wide perl without root access?",
    "created_at": "2019-05-16T14:16:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430874",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:43" align="right">comment:43</div>

surely, `local::lib` is an installation tool, but can you install it into system wide perl without root access?



---

archive/issue_comments_430875.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nReplying to [@dimpase](#comment:43):\n> surely, `local::lib` is an installation tool, but can you install it into system wide perl without root access?\n\nA user would install local::lib into their local library by \"bootstrapping\" https://metacpan.org/pod/local::lib#The-bootstrapping-technique\n\nBut this is not relevant for us.",
    "created_at": "2019-05-16T14:30:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430875",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:44" align="right">comment:44</div>

Replying to [@dimpase](#comment:43):
> surely, `local::lib` is an installation tool, but can you install it into system wide perl without root access?

A user would install local::lib into their local library by "bootstrapping" https://metacpan.org/pod/local::lib#The-bootstrapping-technique

But this is not relevant for us.



---

archive/issue_comments_430876.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nI don't see how the `local::lib` thing is not relevant - one either has to say that it is a pre-req, or do that bootstrapping here.",
    "created_at": "2019-05-16T16:21:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430876",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:45" align="right">comment:45</div>

I don't see how the `local::lib` thing is not relevant - one either has to say that it is a pre-req, or do that bootstrapping here.



---

archive/issue_comments_430877.json:
```json
{
    "body": "failed install of cpan perl packages on mac",
    "created_at": "2019-05-16T17:11:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430877",
    "user": "https://github.com/sophiasage"
}
```

failed install of cpan perl packages on mac



---

archive/issue_comments_430878.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nAttachment: **[perl_cpan_polymake_prereq-2019-05-13.log](https://github.com/sagemath/sage/files/ticket27763/perl_cpan_polymake_prereq-2019-05-13.log)**\n\nI have attached a log of the failed installation of the cpan perl packages after doing the following steps:\n\n- pulled the branch on this ticket\n- downloaded the tarball from this ticket and placed it in upstream folder \n- typed `make build`\n- typed `./sage -i polymake`\n\nShould I have followed a different procedure to test the installation on mac os mojave?",
    "created_at": "2019-05-16T17:16:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430878",
    "user": "https://github.com/sophiasage"
}
```

<div id="comment:46" align="right">comment:46</div>

Attachment: **[perl_cpan_polymake_prereq-2019-05-13.log](https://github.com/sagemath/sage/files/ticket27763/perl_cpan_polymake_prereq-2019-05-13.log)**

I have attached a log of the failed installation of the cpan perl packages after doing the following steps:

- pulled the branch on this ticket
- downloaded the tarball from this ticket and placed it in upstream folder 
- typed `make build`
- typed `./sage -i polymake`

Should I have followed a different procedure to test the installation on mac os mojave?



---

archive/issue_comments_430879.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nReplying to [@dimpase](#comment:45):\n> I don't see how the `local::lib` thing is not relevant - one either has to say that it is a pre-req, or do that bootstrapping here. \n\nIt's already solved on this ticket by shipping the self contained cpanm script. \nIt is not needed as a prerequisite.",
    "created_at": "2019-05-17T04:11:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430879",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:47" align="right">comment:47</div>

Replying to [@dimpase](#comment:45):
> I don't see how the `local::lib` thing is not relevant - one either has to say that it is a pre-req, or do that bootstrapping here. 

It's already solved on this ticket by shipping the self contained cpanm script. 
It is not needed as a prerequisite.



---

archive/issue_comments_430880.json:
```json
{
    "body": "Attachment: **[perl_packages.log](https://github.com/sagemath/sage/files/ticket27763/perl_packages.log)**",
    "created_at": "2019-05-17T08:22:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430880",
    "user": "https://github.com/sophiasage"
}
```

Attachment: **[perl_packages.log](https://github.com/sagemath/sage/files/ticket27763/perl_packages.log)**



---

archive/issue_comments_430881.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nThe file `perl_packages.log` describes a similar failure on debian stretch when getting to MongoDB.",
    "created_at": "2019-05-17T08:24:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430881",
    "user": "https://github.com/sophiasage"
}
```

<div id="comment:48" align="right">comment:48</div>

The file `perl_packages.log` describes a similar failure on debian stretch when getting to MongoDB.



---

archive/issue_comments_430882.json:
```json
{
    "body": "Attachment: **[perl_package_debian.log](https://github.com/sagemath/sage/files/ticket27763/perl_package_debian.log)**\n\nFailure on debian stretch",
    "created_at": "2019-05-17T09:26:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430882",
    "user": "https://github.com/jplab"
}
```

Attachment: **[perl_package_debian.log](https://github.com/sagemath/sage/files/ticket27763/perl_package_debian.log)**

Failure on debian stretch



---

archive/issue_comments_430883.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nIt seems that there are still some dependencies missing.",
    "created_at": "2019-05-17T09:28:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430883",
    "user": "https://github.com/jplab"
}
```

<div id="comment:49" align="right">comment:49</div>

It seems that there are still some dependencies missing.



---

archive/issue_comments_430884.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nReplying to [@sophiasage](#comment:46):\n> I have attached a log of the failed installation of the cpan perl packages after doing the following steps:\n> \n> - pulled the branch on this ticket\n> - downloaded the tarball from this ticket and placed it in upstream folder \n> - typed `make build`\n> - typed `./sage -i polymake`\n> \n> Should I have followed a different procedure to test the installation on mac os mojave? \n\nThanks for testing! This is the correct procedure. \n\nThe relevant failure from your test on Mac is this one:\n\n```\n225\tBuilding and testing Type-Tiny-1.004004 ... ! Installing Types::Standard failed. See /Users/sophiaelia/.cpanm/work/1558026103.94179/build.log for details. Retry with --force to force install it.\n226\tFAIL\n```\nI have seen something similar on Mac as well. Could you send the build log mentioned above?",
    "created_at": "2019-05-17T11:19:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430884",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:50" align="right">comment:50</div>

Replying to [@sophiasage](#comment:46):
> I have attached a log of the failed installation of the cpan perl packages after doing the following steps:
> 
> - pulled the branch on this ticket
> - downloaded the tarball from this ticket and placed it in upstream folder 
> - typed `make build`
> - typed `./sage -i polymake`
> 
> Should I have followed a different procedure to test the installation on mac os mojave? 

Thanks for testing! This is the correct procedure. 

The relevant failure from your test on Mac is this one:

```
225	Building and testing Type-Tiny-1.004004 ... ! Installing Types::Standard failed. See /Users/sophiaelia/.cpanm/work/1558026103.94179/build.log for details. Retry with --force to force install it.
226	FAIL
```
I have seen something similar on Mac as well. Could you send the build log mentioned above?



---

archive/issue_comments_430885.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nReplying to [@jplab](#comment:49):\n> It seems that there are still some dependencies missing.\n\nThe relevant failure on the Debian installs is this one:\n\n```\n40\tConfiguring MongoDB-v2.0.3 ... ! Finding BSON::XS (0.006000) on mirror file:///home/jplabbe/sage/local/var/tmp/sage/build/perl_cpan_polymake_prereq-2019-05-13/src/sagepan failed.\n41\t! Couldn't find module or a distribution BSON::XS (0.006000)\n```",
    "created_at": "2019-05-17T11:21:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430885",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:51" align="right">comment:51</div>

Replying to [@jplab](#comment:49):
> It seems that there are still some dependencies missing.

The relevant failure on the Debian installs is this one:

```
40	Configuring MongoDB-v2.0.3 ... ! Finding BSON::XS (0.006000) on mirror file:///home/jplabbe/sage/local/var/tmp/sage/build/perl_cpan_polymake_prereq-2019-05-13/src/sagepan failed.
41	! Couldn't find module or a distribution BSON::XS (0.006000)
```



---

archive/issue_comments_430886.json:
```json
{
    "body": "Attachment: **[build.log](https://github.com/sagemath/sage/files/ticket27763/build.log)**\n\nbuild.log file from failed installation of cpan perl packages on mac",
    "created_at": "2019-05-17T11:35:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430886",
    "user": "https://github.com/sophiasage"
}
```

Attachment: **[build.log](https://github.com/sagemath/sage/files/ticket27763/build.log)**

build.log file from failed installation of cpan perl packages on mac



---

archive/issue_comments_430887.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nThank you!\nThe problem on macOS seems to come from a well known problem with `Module::Runtime`. https://www.perlmonks.org/?node_id=1083777",
    "created_at": "2019-05-17T11:58:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430887",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:52" align="right">comment:52</div>

Thank you!
The problem on macOS seems to come from a well known problem with `Module::Runtime`. https://www.perlmonks.org/?node_id=1083777



---

archive/issue_comments_430888.json:
```json
{
    "body": "<div id=\"comment:53\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e6a8da072c2c50c5c2af0d57d74f55fef712d96f\">e6a8da0</a></td><td><code>perl_cpan_polymake_prereq: Make spkg-src more robust</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/00a09d50c116615490126277cc6f2c4bd63c35c7\">00a09d5</a></td><td><code>Regenerate src package with new script</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d34f2a22d782d8110e5207c6a2d7134ea15243f5\">d34f2a2</a></td><td><code>perl_cpan_polymake_prereq: Install prereqs in two stages, fixup LD environment variable for Moose</code></td></tr></table>\n",
    "created_at": "2019-05-17T18:01:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430888",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:53"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e6a8da072c2c50c5c2af0d57d74f55fef712d96f">e6a8da0</a></td><td><code>perl_cpan_polymake_prereq: Make spkg-src more robust</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/00a09d50c116615490126277cc6f2c4bd63c35c7">00a09d5</a></td><td><code>Regenerate src package with new script</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d34f2a22d782d8110e5207c6a2d7134ea15243f5">d34f2a2</a></td><td><code>perl_cpan_polymake_prereq: Install prereqs in two stages, fixup LD environment variable for Moose</code></td></tr></table>




---

archive/issue_comments_430889.json:
```json
{
    "body": "Changed commit from **[10189db](https://github.com/sagemath/sagetrac-mirror/commit/10189db608570332744cdc2c51ba6c471af1d00b)** to **[d34f2a2](https://github.com/sagemath/sagetrac-mirror/commit/d34f2a22d782d8110e5207c6a2d7134ea15243f5)**",
    "created_at": "2019-05-17T18:01:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430889",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[10189db](https://github.com/sagemath/sagetrac-mirror/commit/10189db608570332744cdc2c51ba6c471af1d00b)** to **[d34f2a2](https://github.com/sagemath/sagetrac-mirror/commit/d34f2a22d782d8110e5207c6a2d7134ea15243f5)**



---

archive/issue_comments_430890.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nI have made a more robust version of the `spkg-src` script, which (hopefully!) makes sure to pack up all dependencies (instead of picking some up from the local installation) and also addresses the `Module::Runtime` version problem on macOS.\n\nTo test, first get rid of the Perl library installation in $SAGE_LOCAL and then reinstall the packages:\n\n```\n  rm -rf local/lib/perl5\n  ./sage -f  perl_cpan_polymake_prereq perl_term_readline_gnu\n```",
    "created_at": "2019-05-17T18:02:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430890",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:54" align="right">comment:54</div>

I have made a more robust version of the `spkg-src` script, which (hopefully!) makes sure to pack up all dependencies (instead of picking some up from the local installation) and also addresses the `Module::Runtime` version problem on macOS.

To test, first get rid of the Perl library installation in $SAGE_LOCAL and then reinstall the packages:

```
  rm -rf local/lib/perl5
  ./sage -f  perl_cpan_polymake_prereq perl_term_readline_gnu
```



---

archive/issue_comments_430891.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nAttachment: **[perl_cpan_polymake_prereq-2019-05-17.tar.gz](https://github.com/sagemath/sage/files/ticket27763/perl_cpan_polymake_prereq-2019-05-17.tar.gz)**",
    "created_at": "2019-05-17T18:04:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430891",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:55" align="right">comment:55</div>

Attachment: **[perl_cpan_polymake_prereq-2019-05-17.tar.gz](https://github.com/sagemath/sage/files/ticket27763/perl_cpan_polymake_prereq-2019-05-17.tar.gz)**



---

archive/issue_comments_430892.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n To simplify installation of polymake, we add some required CPAN packages. \n \n-Including recursive dependencies, these are 58 packages, a total of 5 MB of source archives, which we pack up as the source tar ball of the new spkg `perl_cpan_polymake_prereq`.\n+Including recursive dependencies, these are 58 packages, a total of 7 MB of source archives, which we pack up as the source tar ball of the new spkg `perl_cpan_polymake_prereq`.\n The source tar ball (attached) also contains a copy of the self-contained `cpanm` Perl script, which is used for installing the packages.\n \n Using an `spkg-configure.m4`, it is downloaded and installed only if the Perl packages are not already present on the system.\n``````\n",
    "created_at": "2019-05-17T18:04:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430892",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 To simplify installation of polymake, we add some required CPAN packages. 
 
-Including recursive dependencies, these are 58 packages, a total of 5 MB of source archives, which we pack up as the source tar ball of the new spkg `perl_cpan_polymake_prereq`.
+Including recursive dependencies, these are 58 packages, a total of 7 MB of source archives, which we pack up as the source tar ball of the new spkg `perl_cpan_polymake_prereq`.
 The source tar ball (attached) also contains a copy of the self-contained `cpanm` Perl script, which is used for installing the packages.
 
 Using an `spkg-configure.m4`, it is downloaded and installed only if the Perl packages are not already present on the system.
``````




---

archive/issue_comments_430893.json:
```json
{
    "body": "Changed commit from **[d34f2a2](https://github.com/sagemath/sagetrac-mirror/commit/d34f2a22d782d8110e5207c6a2d7134ea15243f5)** to **[18d109a](https://github.com/sagemath/sagetrac-mirror/commit/18d109a05a23e923867fba9e81e7bef46d689701)**",
    "created_at": "2019-05-17T18:53:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430893",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d34f2a2](https://github.com/sagemath/sagetrac-mirror/commit/d34f2a22d782d8110e5207c6a2d7134ea15243f5)** to **[18d109a](https://github.com/sagemath/sagetrac-mirror/commit/18d109a05a23e923867fba9e81e7bef46d689701)**



---

archive/issue_comments_430894.json:
```json
{
    "body": "<div id=\"comment:56\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/18d109a05a23e923867fba9e81e7bef46d689701\">18d109a</a></td><td><code>Add build/pkgs/perl_cpan_polymake_prereq/stage1/Makefile.PL</code></td></tr></table>\n",
    "created_at": "2019-05-17T18:53:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430894",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:56"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/18d109a05a23e923867fba9e81e7bef46d689701">18d109a</a></td><td><code>Add build/pkgs/perl_cpan_polymake_prereq/stage1/Makefile.PL</code></td></tr></table>




---

archive/issue_comments_430895.json:
```json
{
    "body": "<div id=\"comment:57\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/06fdaf2f2cd23407f1f67128000444b492b1c8c2\">06fdaf2</a></td><td><code>perl_cpan_polymake_prereq: Clean up spkg-src, spkg-install</code></td></tr></table>\n",
    "created_at": "2019-05-19T11:11:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430895",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:57"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/06fdaf2f2cd23407f1f67128000444b492b1c8c2">06fdaf2</a></td><td><code>perl_cpan_polymake_prereq: Clean up spkg-src, spkg-install</code></td></tr></table>




---

archive/issue_comments_430896.json:
```json
{
    "body": "Changed commit from **[18d109a](https://github.com/sagemath/sagetrac-mirror/commit/18d109a05a23e923867fba9e81e7bef46d689701)** to **[06fdaf2](https://github.com/sagemath/sagetrac-mirror/commit/06fdaf2f2cd23407f1f67128000444b492b1c8c2)**",
    "created_at": "2019-05-19T11:11:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430896",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[18d109a](https://github.com/sagemath/sagetrac-mirror/commit/18d109a05a23e923867fba9e81e7bef46d689701)** to **[06fdaf2](https://github.com/sagemath/sagetrac-mirror/commit/06fdaf2f2cd23407f1f67128000444b492b1c8c2)**



---

archive/issue_comments_430897.json:
```json
{
    "body": "Changed commit from **[06fdaf2](https://github.com/sagemath/sagetrac-mirror/commit/06fdaf2f2cd23407f1f67128000444b492b1c8c2)** to **[4363e80](https://github.com/sagemath/sagetrac-mirror/commit/4363e80e2c19b227109e70a1e3e901b9f62b3d5b)**",
    "created_at": "2019-05-19T21:02:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430897",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[06fdaf2](https://github.com/sagemath/sagetrac-mirror/commit/06fdaf2f2cd23407f1f67128000444b492b1c8c2)** to **[4363e80](https://github.com/sagemath/sagetrac-mirror/commit/4363e80e2c19b227109e70a1e3e901b9f62b3d5b)**



---

archive/issue_comments_430898.json:
```json
{
    "body": "<div id=\"comment:58\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4363e80e2c19b227109e70a1e3e901b9f62b3d5b\">4363e80</a></td><td><code>Add missing cpan packages</code></td></tr></table>\n",
    "created_at": "2019-05-19T21:02:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430898",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:58"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4363e80e2c19b227109e70a1e3e901b9f62b3d5b">4363e80</a></td><td><code>Add missing cpan packages</code></td></tr></table>




---

archive/issue_comments_430899.json:
```json
{
    "body": "Changed commit from **[4363e80](https://github.com/sagemath/sagetrac-mirror/commit/4363e80e2c19b227109e70a1e3e901b9f62b3d5b)** to **[188fcb7](https://github.com/sagemath/sagetrac-mirror/commit/188fcb70d5b256421dcb4cefec937982e6cb59e5)**",
    "created_at": "2019-05-19T21:24:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430899",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4363e80](https://github.com/sagemath/sagetrac-mirror/commit/4363e80e2c19b227109e70a1e3e901b9f62b3d5b)** to **[188fcb7](https://github.com/sagemath/sagetrac-mirror/commit/188fcb70d5b256421dcb4cefec937982e6cb59e5)**



---

archive/issue_comments_430900.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nAttachment: **[perl_cpan_polymake_prereq-2019-05-19.tar.gz](https://github.com/sagemath/sage/files/ticket27763/perl_cpan_polymake_prereq-2019-05-19.tar.gz)**\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/188fcb70d5b256421dcb4cefec937982e6cb59e5\">188fcb7</a></td><td><code>Update polymake SPKG.txt</code></td></tr></table>\n",
    "created_at": "2019-05-19T21:24:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430900",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:59" align="right">comment:59</div>

Attachment: **[perl_cpan_polymake_prereq-2019-05-19.tar.gz](https://github.com/sagemath/sage/files/ticket27763/perl_cpan_polymake_prereq-2019-05-19.tar.gz)**

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/188fcb70d5b256421dcb4cefec937982e6cb59e5">188fcb7</a></td><td><code>Update polymake SPKG.txt</code></td></tr></table>




---

archive/issue_comments_430901.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n To simplify installation of polymake, we add some required CPAN packages. \n \n-Including recursive dependencies, these are 58 packages, a total of 7 MB of source archives, which we pack up as the source tar ball of the new spkg `perl_cpan_polymake_prereq`.\n+Including recursive dependencies, these are 103 packages, a total of 7.5 MB of source archives, which we pack up as the source tar ball of the new spkg `perl_cpan_polymake_prereq`.\n The source tar ball (attached) also contains a copy of the self-contained `cpanm` Perl script, which is used for installing the packages.\n \n Using an `spkg-configure.m4`, it is downloaded and installed only if the Perl packages are not already present on the system.\n``````\n",
    "created_at": "2019-05-19T21:42:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430901",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 To simplify installation of polymake, we add some required CPAN packages. 
 
-Including recursive dependencies, these are 58 packages, a total of 7 MB of source archives, which we pack up as the source tar ball of the new spkg `perl_cpan_polymake_prereq`.
+Including recursive dependencies, these are 103 packages, a total of 7.5 MB of source archives, which we pack up as the source tar ball of the new spkg `perl_cpan_polymake_prereq`.
 The source tar ball (attached) also contains a copy of the self-contained `cpanm` Perl script, which is used for installing the packages.
 
 Using an `spkg-configure.m4`, it is downloaded and installed only if the Perl packages are not already present on the system.
``````




---

archive/issue_comments_430902.json:
```json
{
    "body": "<div id=\"comment:61\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3f5e3a2ce1df175860b708632c9fbccf45df0f00\">3f5e3a2</a></td><td><code>Disable perl package tests unless SAGE_CHECK=yes</code></td></tr></table>\n",
    "created_at": "2019-05-19T22:25:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430902",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:61"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3f5e3a2ce1df175860b708632c9fbccf45df0f00">3f5e3a2</a></td><td><code>Disable perl package tests unless SAGE_CHECK=yes</code></td></tr></table>




---

archive/issue_comments_430903.json:
```json
{
    "body": "Changed commit from **[188fcb7](https://github.com/sagemath/sagetrac-mirror/commit/188fcb70d5b256421dcb4cefec937982e6cb59e5)** to **[3f5e3a2](https://github.com/sagemath/sagetrac-mirror/commit/3f5e3a2ce1df175860b708632c9fbccf45df0f00)**",
    "created_at": "2019-05-19T22:25:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430903",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[188fcb7](https://github.com/sagemath/sagetrac-mirror/commit/188fcb70d5b256421dcb4cefec937982e6cb59e5)** to **[3f5e3a2](https://github.com/sagemath/sagetrac-mirror/commit/3f5e3a2ce1df175860b708632c9fbccf45df0f00)**



---

archive/issue_comments_430904.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nReady for another round of testing. Works for me on macOS Mojave and on a CentOS Linux release 7.6.1810 with almost no Perl stuff installed.",
    "created_at": "2019-05-19T23:04:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430904",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:62" align="right">comment:62</div>

Ready for another round of testing. Works for me on macOS Mojave and on a CentOS Linux release 7.6.1810 with almost no Perl stuff installed.



---

archive/issue_comments_430905.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,6 +2,7 @@\n \n Including recursive dependencies, these are 103 packages, a total of 7.5 MB of source archives, which we pack up as the source tar ball of the new spkg `perl_cpan_polymake_prereq`.\n The source tar ball (attached) also contains a copy of the self-contained `cpanm` Perl script, which is used for installing the packages.\n+If `SAGE_CHECK=no`, only about 35 packages are installed. The rest of the dependencies are for testing.\n \n Using an `spkg-configure.m4`, it is downloaded and installed only if the Perl packages are not already present on the system.\n \n``````\n",
    "created_at": "2019-05-19T23:04:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430905",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,6 +2,7 @@
 
 Including recursive dependencies, these are 103 packages, a total of 7.5 MB of source archives, which we pack up as the source tar ball of the new spkg `perl_cpan_polymake_prereq`.
 The source tar ball (attached) also contains a copy of the self-contained `cpanm` Perl script, which is used for installing the packages.
+If `SAGE_CHECK=no`, only about 35 packages are installed. The rest of the dependencies are for testing.
 
 Using an `spkg-configure.m4`, it is downloaded and installed only if the Perl packages are not already present on the system.
 
``````




---

archive/issue_comments_430906.json:
```json
{
    "body": "Attachment: **[polymake-3.4.2.log](https://github.com/sagemath/sage/files/ticket27763/polymake-3.4.2.log)**\n\nfailed installation of polymake on mac",
    "created_at": "2019-05-21T12:26:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430906",
    "user": "https://github.com/sophiasage"
}
```

Attachment: **[polymake-3.4.2.log](https://github.com/sagemath/sage/files/ticket27763/polymake-3.4.2.log)**

failed installation of polymake on mac



---

archive/issue_comments_430907.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nI have attached a log of a failed installation of polymake on macOS Mojave after pulling this ticket and doing the following steps.\n\n- pulled the branch on this ticket\n- downloaded the tarball perl_cpan_polymake_prereq-2019-05-19.tar.gz and put it in the upstream folder\n- in upstream folder typed `rm perl_cpan_polymake_prereq_2019_05_13.tar.gz`\n- in my sage directory typed `make build`\n- typed `./sage -f perl_term_readline_gnu`\n- typed `./sage -i polymake`\n\nperl_cpan_polymake_prereq-2019-05-19 installed successfully.",
    "created_at": "2019-05-21T12:35:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430907",
    "user": "https://github.com/sophiasage"
}
```

<div id="comment:63" align="right">comment:63</div>

I have attached a log of a failed installation of polymake on macOS Mojave after pulling this ticket and doing the following steps.

- pulled the branch on this ticket
- downloaded the tarball perl_cpan_polymake_prereq-2019-05-19.tar.gz and put it in the upstream folder
- in upstream folder typed `rm perl_cpan_polymake_prereq_2019_05_13.tar.gz`
- in my sage directory typed `make build`
- typed `./sage -f perl_term_readline_gnu`
- typed `./sage -i polymake`

perl_cpan_polymake_prereq-2019-05-19 installed successfully.



---

archive/issue_comments_430908.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nReplying to [@sophiasage](#comment:63):\n> I have attached a log of a failed installation of polymake on macOS Mojave after pulling this ticket and doing the following steps.\n> \n> - pulled the branch on this ticket\n> - downloaded the tarball perl_cpan_polymake_prereq-2019-05-19.tar.gz and put it in the upstream folder\n> - in upstream folder typed `rm perl_cpan_polymake_prereq_2019_05_13.tar.gz`\n\nwhy would you download the file, and then delete it? A typo?\n\n> - in my sage directory typed `make build`\n> - typed `./sage -f perl_term_readline_gnu`\n> - typed `./sage -i polymake`\n> \n> perl_cpan_polymake_prereq-2019-05-19 installed successfully.\n\nI wonder why you have C++14 in your CXXFLAGS.\nDo you by any chance have CXXFLAGS environment variable set to something non-empty?\n\n>",
    "created_at": "2019-05-21T12:53:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430908",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:64" align="right">comment:64</div>

Replying to [@sophiasage](#comment:63):
> I have attached a log of a failed installation of polymake on macOS Mojave after pulling this ticket and doing the following steps.
> 
> - pulled the branch on this ticket
> - downloaded the tarball perl_cpan_polymake_prereq-2019-05-19.tar.gz and put it in the upstream folder
> - in upstream folder typed `rm perl_cpan_polymake_prereq_2019_05_13.tar.gz`

why would you download the file, and then delete it? A typo?

> - in my sage directory typed `make build`
> - typed `./sage -f perl_term_readline_gnu`
> - typed `./sage -i polymake`
> 
> perl_cpan_polymake_prereq-2019-05-19 installed successfully.

I wonder why you have C++14 in your CXXFLAGS.
Do you by any chance have CXXFLAGS environment variable set to something non-empty?

>



---

archive/issue_comments_430909.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nTry deleting the installed polymake headers in local/include first.\nLooks like they are taking precedence in the compilation - this looks like a bug in the polymake build scripts",
    "created_at": "2019-05-21T13:15:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430909",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:65" align="right">comment:65</div>

Try deleting the installed polymake headers in local/include first.
Looks like they are taking precedence in the compilation - this looks like a bug in the polymake build scripts



---

archive/issue_comments_430910.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nReplying to [@dimpase](#comment:64):\n> Replying to [@sophiasage](#comment:63):\n> > I have attached a log of a failed installation of polymake on macOS Mojave after pulling this ticket and doing the following steps.\n> > \n> > - pulled the branch on this ticket\n> > - downloaded the tarball perl_cpan_polymake_prereq-2019-05-19.tar.gz and put it in the upstream folder\n> > - in upstream folder typed `rm perl_cpan_polymake_prereq_2019_05_13.tar.gz`\n\n> \n> why would you download the file, and then delete it? A typo?\n\nOld version deleted",
    "created_at": "2019-05-21T13:17:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430910",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:66" align="right">comment:66</div>

Replying to [@dimpase](#comment:64):
> Replying to [@sophiasage](#comment:63):
> > I have attached a log of a failed installation of polymake on macOS Mojave after pulling this ticket and doing the following steps.
> > 
> > - pulled the branch on this ticket
> > - downloaded the tarball perl_cpan_polymake_prereq-2019-05-19.tar.gz and put it in the upstream folder
> > - in upstream folder typed `rm perl_cpan_polymake_prereq_2019_05_13.tar.gz`

> 
> why would you download the file, and then delete it? A typo?

Old version deleted



---

archive/issue_comments_430911.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nReplying to [@mkoeppe](#comment:65):\n> Try deleting the installed polymake headers in local/include first.\n> Looks like they are taking precedence in the compilation - this looks like a bug in the polymake build scripts\n\nIt worked!!",
    "created_at": "2019-05-21T15:29:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430911",
    "user": "https://github.com/sophiasage"
}
```

<div id="comment:67" align="right">comment:67</div>

Replying to [@mkoeppe](#comment:65):
> Try deleting the installed polymake headers in local/include first.
> Looks like they are taking precedence in the compilation - this looks like a bug in the polymake build scripts

It worked!!



---

archive/issue_comments_430912.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nThanks for testing!\nI have updated the install scripts to take care of uninstallation in #27855.",
    "created_at": "2019-05-21T17:44:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430912",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:68" align="right">comment:68</div>

Thanks for testing!
I have updated the install scripts to take care of uninstallation in #27855.



---

archive/issue_comments_430913.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,3 +8,10 @@\n \n The `spkg-install` installs the packages via the package dependencies mechanism. If some of the packages are already installed in some version on the system, we do not install a newer version.\n \n+To try out:\n+\n+```\n+   wget -P upstream https://trac.sagemath.org/raw-attachment/ticket/27763/perl_cpan_polymake_prereq-2019-05-19.tar.gz\n+```\n+\n+\n``````\n",
    "created_at": "2019-05-23T03:05:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430913",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,3 +8,10 @@
 
 The `spkg-install` installs the packages via the package dependencies mechanism. If some of the packages are already installed in some version on the system, we do not install a newer version.
 
+To try out:
+
+```
+   wget -P upstream https://trac.sagemath.org/raw-attachment/ticket/27763/perl_cpan_polymake_prereq-2019-05-19.tar.gz
+```
+
+
``````




---

archive/issue_comments_430914.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\nAny takers for the review of this ticket?",
    "created_at": "2019-05-30T00:56:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430914",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:70" align="right">comment:70</div>

Any takers for the review of this ticket?



---

archive/issue_comments_430915.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nI am on vacation until 4 June, can\u2019t possibly do it before.",
    "created_at": "2019-05-30T06:32:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430915",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:71" align="right">comment:71</div>

I am on vacation until 4 June, can’t possibly do it before.



---

archive/issue_comments_430916.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nPerhaps `Term::ReadKey` should be added as well.",
    "created_at": "2019-06-03T18:46:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430916",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:72" align="right">comment:72</div>

Perhaps `Term::ReadKey` should be added as well.



---

archive/issue_comments_430917.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nMoving tickets from the Sage 8.8 milestone that have been actively worked on in the last six months to the next release milestone (optimistically).",
    "created_at": "2019-07-03T11:37:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430917",
    "user": "https://github.com/embray"
}
```

<div id="comment:73" align="right">comment:73</div>

Moving tickets from the Sage 8.8 milestone that have been actively worked on in the last six months to the next release milestone (optimistically).



---

archive/issue_events_380882.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-07-03T11:37:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27763#event-380882"
}
```



---

archive/issue_events_380883.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-07-03T11:37:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27763#event-380883"
}
```



---

archive/issue_comments_430918.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nReplying to [@mkoeppe](#comment:70):\n> Any takers for the review of this ticket?\n\nWe'll resume our Friday morning's sage session soon. We'll be able to test it on a few virgin machines to test the robustness of installation...",
    "created_at": "2019-09-03T18:53:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430918",
    "user": "https://github.com/jplab"
}
```

<div id="comment:74" align="right">comment:74</div>

Replying to [@mkoeppe](#comment:70):
> Any takers for the review of this ticket?

We'll resume our Friday morning's sage session soon. We'll be able to test it on a few virgin machines to test the robustness of installation...



---

archive/issue_comments_430919.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -15,3 +15,5 @@\n ```\n \n \n+See also the sage-devel post about compilation: https://groups.google.com/forum/#!topic/sage-devel/ukJgMweHszU\n+\n``````\n",
    "created_at": "2019-11-01T17:27:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430919",
    "user": "https://github.com/jplab"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -15,3 +15,5 @@
 ```
 
 
+See also the sage-devel post about compilation: https://groups.google.com/forum/#!topic/sage-devel/ukJgMweHszU
+
``````




---

archive/issue_comments_430920.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nFirst, I'm getting a merge conflict with the latest version of Sage.\n\nSecond, the build is failing for me with OS X 10.14.6. The log file (with some boring lines snipped):\n\n```\nFound local metadata for perl_cpan_polymake_prereq-2019-05-19\nUsing cached file /Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-9.0.beta3/upstream/perl_cpan_polymake_prereq-2019-05-19.tar.gz\nperl_cpan_polymake_prereq-2019-05-19\n====================================================\nSetting up build directory for perl_cpan_polymake_prereq-2019-05-19\nFinished extraction\nNo patch files found in ../patches\n****************************************************\nHost system:\nDarwin jpalmieri138.local 18.7.0 Darwin Kernel Version 18.7.0: Tue Aug 20 16:57:14 PDT 2019; root:xnu-4903.271.2~2/RELEASE_X86_64 x86_64\n****************************************************\nC compiler: gcc\nC compiler version:\nConfigured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/4.2.1\nApple clang version 11.0.0 (clang-1100.0.33.12)\nTarget: x86_64-apple-darwin18.7.0\nThread model: posix\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\n****************************************************\nPackage 'perl_cpan_polymake_prereq' is currently not installed\nNo legacy uninstaller found for 'perl_cpan_polymake_prereq'; nothing to do\ncpanm (App::cpanminus) 1.7044 on perl 5.018004 built for darwin-thread-multi-2level\nWork directory is /Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-9.0.beta3/local/var/tmp/sage/build/perl_cpan_polymake_prereq-2019-05-19/src/cpanm_home/work/1572630684.99164\nYou have make /usr/bin/make\nYou have LWP 6.05\nYou have /usr/bin/tar: bsdtar 2.8.3 - libarchive 2.8.3\nYou have /usr/bin/unzip\nEntering /Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-9.0.beta3/local/var/tmp/sage/build/perl_cpan_polymake_prereq-2019-05-19/stage1\nRunning Makefile.PL\n--> Working on .\nConfiguring /Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-9.0.beta3/local/var/tmp/sage/build/perl_cpan_polymake_prereq-2019-05-19/stage1 ... Warning: prerequisite Moose 2.2 not found. We have 2.1202.\nWriting Makefile for PolymakeStage1\nWriting MYMETA.yml and MYMETA.json\nChecking dependencies from MYMETA.json ...\nChecking if you have ExtUtils::MakeMaker 0 ... Yes (6.66)\nChecking if you have Moose 2.2 ... No (2.1202 < 2.2)\nSearching Moose on mirror file:///Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-9.0.beta3/local/var/tmp/sage/build/perl_cpan_polymake_prereq-2019-05-19/src/sagepan ...\nDownloading index file file:///Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-9.0.beta3/local/var/tmp/sage/build/perl_cpan_polymake_prereq-2019-05-19/src/sagepan/modules/02packages.details.txt.gz ...\nUncompressing index file...\nUnpacking Moose-2.2011.tar.gz\nOK\n==> Found dependencies: Moose\n--> Working on Moose\nFetching file:///Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-9.0.beta3/local/var/tmp/sage/build/perl_cpan_polymake_prereq-2019-05-19/src/sagepan/authors/id/E/ET/ETHER/Moose-2.2011.tar.gz ... OK\nx Moose-2.2011/\nx Moose-2.2011/author/\n...\n  [snip]\n...\nx Moose-2.2011/author/doc-generator\nx Moose-2.2011/author/extract-inline-tests\nx Moose-2.2011/author/find-dupe-test-numbers\nEntering Moose-2.2011\nChecking configure dependencies from META.json\nChecking if you have ExtUtils::MakeMaker 6.58 ... Yes (6.66)\nChecking if you have Dist::CheckConflicts 0.02 ... Yes (0.10)\nRunning Makefile.PL\nConfiguring Moose-2.2011 ... HASCOMPILERJXuX/TESTGBHw.c:2:10: fatal error: 'EXTERN.h' file not found\n#include \"EXTERN.h\"\n         ^~~~~~~~~~\n1 error generated.\nCouldn't execute gcc  -g -pipe -fno-common -DPERL_DARWIN -fno-strict-aliasing -fstack-protector -Os \"-I/System/Library/Perl/5.18/darwin-thread-multi-2level/CORE\"   -c HASCOMPILERJXuX/TESTGBHw.c -o HASCOMPILERJXuX/TESTGBHw.o: Inappropriate ioctl for device at Makefile.PL line 12.\nThis distribution requires a working compiler at Makefile.PL line 12.\n! Configure failed for Moose-2.2011. See /Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-9.0.beta3/local/var/tmp/sage/build/perl_cpan_polymake_prereq-2019-05-19/src/cpanm_home/work/1572630684.99164/build.log for details.\n! Installing the dependencies failed: Installed version (2.1202) of Moose is not in range '2.2'\n! Bailing out the installation for PolymakeStage1-0.\nN/A\n\nreal\t0m0.905s\nuser\t0m0.561s\nsys\t0m0.291s\n************************************************************************\nError installing package perl_cpan_polymake_prereq-2019-05-19\n************************************************************************\n```",
    "created_at": "2019-11-01T17:58:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430920",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:76" align="right">comment:76</div>

First, I'm getting a merge conflict with the latest version of Sage.

Second, the build is failing for me with OS X 10.14.6. The log file (with some boring lines snipped):

```
Found local metadata for perl_cpan_polymake_prereq-2019-05-19
Using cached file /Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-9.0.beta3/upstream/perl_cpan_polymake_prereq-2019-05-19.tar.gz
perl_cpan_polymake_prereq-2019-05-19
====================================================
Setting up build directory for perl_cpan_polymake_prereq-2019-05-19
Finished extraction
No patch files found in ../patches
****************************************************
Host system:
Darwin jpalmieri138.local 18.7.0 Darwin Kernel Version 18.7.0: Tue Aug 20 16:57:14 PDT 2019; root:xnu-4903.271.2~2/RELEASE_X86_64 x86_64
****************************************************
C compiler: gcc
C compiler version:
Configured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/4.2.1
Apple clang version 11.0.0 (clang-1100.0.33.12)
Target: x86_64-apple-darwin18.7.0
Thread model: posix
InstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin
****************************************************
Package 'perl_cpan_polymake_prereq' is currently not installed
No legacy uninstaller found for 'perl_cpan_polymake_prereq'; nothing to do
cpanm (App::cpanminus) 1.7044 on perl 5.018004 built for darwin-thread-multi-2level
Work directory is /Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-9.0.beta3/local/var/tmp/sage/build/perl_cpan_polymake_prereq-2019-05-19/src/cpanm_home/work/1572630684.99164
You have make /usr/bin/make
You have LWP 6.05
You have /usr/bin/tar: bsdtar 2.8.3 - libarchive 2.8.3
You have /usr/bin/unzip
Entering /Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-9.0.beta3/local/var/tmp/sage/build/perl_cpan_polymake_prereq-2019-05-19/stage1
Running Makefile.PL
--> Working on .
Configuring /Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-9.0.beta3/local/var/tmp/sage/build/perl_cpan_polymake_prereq-2019-05-19/stage1 ... Warning: prerequisite Moose 2.2 not found. We have 2.1202.
Writing Makefile for PolymakeStage1
Writing MYMETA.yml and MYMETA.json
Checking dependencies from MYMETA.json ...
Checking if you have ExtUtils::MakeMaker 0 ... Yes (6.66)
Checking if you have Moose 2.2 ... No (2.1202 < 2.2)
Searching Moose on mirror file:///Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-9.0.beta3/local/var/tmp/sage/build/perl_cpan_polymake_prereq-2019-05-19/src/sagepan ...
Downloading index file file:///Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-9.0.beta3/local/var/tmp/sage/build/perl_cpan_polymake_prereq-2019-05-19/src/sagepan/modules/02packages.details.txt.gz ...
Uncompressing index file...
Unpacking Moose-2.2011.tar.gz
OK
==> Found dependencies: Moose
--> Working on Moose
Fetching file:///Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-9.0.beta3/local/var/tmp/sage/build/perl_cpan_polymake_prereq-2019-05-19/src/sagepan/authors/id/E/ET/ETHER/Moose-2.2011.tar.gz ... OK
x Moose-2.2011/
x Moose-2.2011/author/
...
  [snip]
...
x Moose-2.2011/author/doc-generator
x Moose-2.2011/author/extract-inline-tests
x Moose-2.2011/author/find-dupe-test-numbers
Entering Moose-2.2011
Checking configure dependencies from META.json
Checking if you have ExtUtils::MakeMaker 6.58 ... Yes (6.66)
Checking if you have Dist::CheckConflicts 0.02 ... Yes (0.10)
Running Makefile.PL
Configuring Moose-2.2011 ... HASCOMPILERJXuX/TESTGBHw.c:2:10: fatal error: 'EXTERN.h' file not found
#include "EXTERN.h"
         ^~~~~~~~~~
1 error generated.
Couldn't execute gcc  -g -pipe -fno-common -DPERL_DARWIN -fno-strict-aliasing -fstack-protector -Os "-I/System/Library/Perl/5.18/darwin-thread-multi-2level/CORE"   -c HASCOMPILERJXuX/TESTGBHw.c -o HASCOMPILERJXuX/TESTGBHw.o: Inappropriate ioctl for device at Makefile.PL line 12.
This distribution requires a working compiler at Makefile.PL line 12.
! Configure failed for Moose-2.2011. See /Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-9.0.beta3/local/var/tmp/sage/build/perl_cpan_polymake_prereq-2019-05-19/src/cpanm_home/work/1572630684.99164/build.log for details.
! Installing the dependencies failed: Installed version (2.1202) of Moose is not in range '2.2'
! Bailing out the installation for PolymakeStage1-0.
N/A

real	0m0.905s
user	0m0.561s
sys	0m0.291s
************************************************************************
Error installing package perl_cpan_polymake_prereq-2019-05-19
************************************************************************
```



---

archive/issue_comments_430921.json:
```json
{
    "body": "<div id=\"comment:77\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cce6cbd221634fc36df0661fd69d4f7401c5d5d7\">cce6cbd</a></td><td><code>Merge tag '9.0.beta6' into t/27763/perl_packages_for_polymake</code></td></tr></table>\n",
    "created_at": "2019-11-18T15:27:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430921",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:77"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cce6cbd221634fc36df0661fd69d4f7401c5d5d7">cce6cbd</a></td><td><code>Merge tag '9.0.beta6' into t/27763/perl_packages_for_polymake</code></td></tr></table>




---

archive/issue_comments_430922.json:
```json
{
    "body": "Changed commit from **[3f5e3a2](https://github.com/sagemath/sagetrac-mirror/commit/3f5e3a2ce1df175860b708632c9fbccf45df0f00)** to **[cce6cbd](https://github.com/sagemath/sagetrac-mirror/commit/cce6cbd221634fc36df0661fd69d4f7401c5d5d7)**",
    "created_at": "2019-11-18T15:27:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430922",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3f5e3a2](https://github.com/sagemath/sagetrac-mirror/commit/3f5e3a2ce1df175860b708632c9fbccf45df0f00)** to **[cce6cbd](https://github.com/sagemath/sagetrac-mirror/commit/cce6cbd221634fc36df0661fd69d4f7401c5d5d7)**



---

archive/issue_events_380884.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-11-18T15:31:00Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27763#event-380884"
}
```



---

archive/issue_events_380885.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-11-18T15:31:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "milestone_number": null,
    "milestone_title": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27763#event-380885"
}
```



---

archive/issue_comments_430923.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">comment:79</div>\n\nReplying to [@jhpalmieri](#comment:76):\n> the build is failing for me with OS X 10.14.6. \n> \n> ```\n> Configuring Moose-2.2011 ... HASCOMPILERJXuX/TESTGBHw.c:2:10: fatal error: 'EXTERN.h' file not found\n> #include \"EXTERN.h\"\n>          ^~~~~~~~~~\n> 1 error generated.\n> ```\n\nFrom `sage -info polymake`:\n\n```\nOn Mac OS X, to build Term::Readline::Gnu, on macOS 10.14 (Mojave), one\nneeds to do the following:\n\n sudo installer -pkg /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg -target /\n\nor a \"fatal error: 'EXTERN.h' file not found\" will be signalled.\n```",
    "created_at": "2019-11-19T01:48:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430923",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:79" align="right">comment:79</div>

Replying to [@jhpalmieri](#comment:76):
> the build is failing for me with OS X 10.14.6. 
> 
> ```
> Configuring Moose-2.2011 ... HASCOMPILERJXuX/TESTGBHw.c:2:10: fatal error: 'EXTERN.h' file not found
> #include "EXTERN.h"
>          ^~~~~~~~~~
> 1 error generated.
> ```

From `sage -info polymake`:

```
On Mac OS X, to build Term::Readline::Gnu, on macOS 10.14 (Mojave), one
needs to do the following:

 sudo installer -pkg /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg -target /

or a "fatal error: 'EXTERN.h' file not found" will be signalled.
```



---

archive/issue_comments_430924.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">comment:80</div>\n\nI think that you shouldn't have the build fail; you should instead test for the headers and provide a helpful error message if they're not present. I doubt that most users will know to use `sage -info polymake`.\n\nAlso, the error message is out-of-date: the current version of OS X is 10.15, and there is no directory `Packages` in `/Library/Developer/CommandLineTools/`.",
    "created_at": "2019-11-19T03:50:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430924",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:80" align="right">comment:80</div>

I think that you shouldn't have the build fail; you should instead test for the headers and provide a helpful error message if they're not present. I doubt that most users will know to use `sage -info polymake`.

Also, the error message is out-of-date: the current version of OS X is 10.15, and there is no directory `Packages` in `/Library/Developer/CommandLineTools/`.



---

archive/issue_comments_430925.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nYes, I agree, this needs a better solution.",
    "created_at": "2019-11-19T04:02:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430925",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:81" align="right">comment:81</div>

Yes, I agree, this needs a better solution.



---

archive/issue_comments_430926.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">comment:82</div>\n\nSome references for the EXTERN.h problem on macOS Mojave and newer:\n- MAC Perl `EXTERN.H` Make Issues\n  https://www.perlmonks.org/?node_id=1224716\n\n- json - `Fatal error: 'EXTERN.h' file not found` while installing Perl modules - Stack Overflow\n  https://stackoverflow.com/questions/52682304/fatal-error-extern-h-file-not-found-while-installing-perl-modules\n\n- Bug #127028 for `ExtUtils-MakeMaker`: Unable to build on OSX Mojave\n  https://rt.cpan.org/Public/Bug/Display.html?id=127028\n\n-  gist:a322f420b1ad92fec70d88144885fa49\n  https://gist.github.com/skaji/a322f420b1ad92fec70d88144885fa49",
    "created_at": "2019-11-22T18:24:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430926",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:82" align="right">comment:82</div>

Some references for the EXTERN.h problem on macOS Mojave and newer:
- MAC Perl `EXTERN.H` Make Issues
  https://www.perlmonks.org/?node_id=1224716

- json - `Fatal error: 'EXTERN.h' file not found` while installing Perl modules - Stack Overflow
  https://stackoverflow.com/questions/52682304/fatal-error-extern-h-file-not-found-while-installing-perl-modules

- Bug #127028 for `ExtUtils-MakeMaker`: Unable to build on OSX Mojave
  https://rt.cpan.org/Public/Bug/Display.html?id=127028

-  gist:a322f420b1ad92fec70d88144885fa49
  https://gist.github.com/skaji/a322f420b1ad92fec70d88144885fa49



---

archive/issue_events_380886.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2020-01-06T14:10:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "milestone_number": null,
    "milestone_title": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27763#event-380886"
}
```



---

archive/issue_events_380887.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2020-01-06T14:10:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27763#event-380887"
}
```



---

archive/issue_comments_430927.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">comment:83</div>\n\nTicket retargeted after milestone closed",
    "created_at": "2020-01-06T14:10:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430927",
    "user": "https://github.com/embray"
}
```

<div id="comment:83" align="right">comment:83</div>

Ticket retargeted after milestone closed



---

archive/issue_comments_430928.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">comment:84</div>\n\nAfter a clean installation of 9.1.beta2, running `sage -i polymake` finishes with success and installs both\n\n- perl_cpan_polymake_prereq...............2019-05-19 (2019-05-19)\n- perl_term_readline_gnu..................1.35 (1.35)\n\nNow, trying out polymake in sage essentially does not work...\n\n- Tab completion on `polymake.` does not work (which is an improvement, before it used to kill sage)\n- If I type `c = polytopes.cube(backend='polymake')` it simply never finishes. Thought I can kill it succesfully with ctrl+c.\n\nStarting sage anew and trying:\n- `p = Polyhedron(vertices= [[0],[1]],backend='polymake')` also simply never gives back the prompt.\n\nWithout starting sage anew, if I simply repeat the previous operation, I get directly:\n\n```\nTraceback (most recent call last):\nTypeError: argument should be integer or bytes-like object, not 'str'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n...\n\n/home/jplabbe/sage/local/lib/python3.7/site-packages/sage/interfaces/interface.py in __init__(self, parent, value, is_name, name)\n    718                 self._name = parent._create(value, name=name)\n    719             except (TypeError, RuntimeError, ValueError) as x:\n--> 720                 raise TypeError(x)\n    721 \n    722     def _latex_(self):\n\nTypeError: error evaluating \"@SAGE1=(\"Rational\");\":\nargument should be integer or bytes-like object, not 'str'\n```\n\n\n...\n\n*That said*, I have to mention that I do not have jupymake installed which is an optional package:\n\njupymake................................0.9 (not_installed)\n\nI wanted to try a simple \"sage -i polymake\" from a virgin install to see how it would perform...\n\nMy os is debian-buster. As far as the installation goes, it seems that polymake runs fine under `sage -polymake`...",
    "created_at": "2020-02-04T15:57:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430928",
    "user": "https://github.com/jplab"
}
```

<div id="comment:84" align="right">comment:84</div>

After a clean installation of 9.1.beta2, running `sage -i polymake` finishes with success and installs both

- perl_cpan_polymake_prereq...............2019-05-19 (2019-05-19)
- perl_term_readline_gnu..................1.35 (1.35)

Now, trying out polymake in sage essentially does not work...

- Tab completion on `polymake.` does not work (which is an improvement, before it used to kill sage)
- If I type `c = polytopes.cube(backend='polymake')` it simply never finishes. Thought I can kill it succesfully with ctrl+c.

Starting sage anew and trying:
- `p = Polyhedron(vertices= [[0],[1]],backend='polymake')` also simply never gives back the prompt.

Without starting sage anew, if I simply repeat the previous operation, I get directly:

```
Traceback (most recent call last):
TypeError: argument should be integer or bytes-like object, not 'str'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
...

/home/jplabbe/sage/local/lib/python3.7/site-packages/sage/interfaces/interface.py in __init__(self, parent, value, is_name, name)
    718                 self._name = parent._create(value, name=name)
    719             except (TypeError, RuntimeError, ValueError) as x:
--> 720                 raise TypeError(x)
    721 
    722     def _latex_(self):

TypeError: error evaluating "@SAGE1=("Rational");":
argument should be integer or bytes-like object, not 'str'
```


...

*That said*, I have to mention that I do not have jupymake installed which is an optional package:

jupymake................................0.9 (not_installed)

I wanted to try a simple "sage -i polymake" from a virgin install to see how it would perform...

My os is debian-buster. As far as the installation goes, it seems that polymake runs fine under `sage -polymake`...



---

archive/issue_comments_430929.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">comment:85</div>\n\nOn another debian-buster I get an error in the installation. Relevant log attached.",
    "created_at": "2020-02-04T16:07:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430929",
    "user": "https://github.com/jplab"
}
```

<div id="comment:85" align="right">comment:85</div>

On another debian-buster I get an error in the installation. Relevant log attached.



---

archive/issue_comments_430930.json:
```json
{
    "body": "Attachment: **[polymake-3.4.3.log](https://github.com/sagemath/sage/files/ticket27763/polymake-3.4.3.log)**\n\npolymake installation failing on debian-buster",
    "created_at": "2020-02-04T16:09:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430930",
    "user": "https://github.com/jplab"
}
```

Attachment: **[polymake-3.4.3.log](https://github.com/sagemath/sage/files/ticket27763/polymake-3.4.3.log)**

polymake installation failing on debian-buster



---

archive/issue_comments_430931.json:
```json
{
    "body": "<div id=\"comment:86\" align=\"right\">comment:86</div>\n\nReplying to [@jplab](#comment:85):\n> On another debian-buster I get an error in the installation. Relevant log attached.\n\nTurns out the same failure happens on current develop. So it's not related to this ticket necessarily. (This machine is from the department, we just got a new os update, so we are less aware of the default installations)",
    "created_at": "2020-02-04T16:13:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430931",
    "user": "https://github.com/jplab"
}
```

<div id="comment:86" align="right">comment:86</div>

Replying to [@jplab](#comment:85):
> On another debian-buster I get an error in the installation. Relevant log attached.

Turns out the same failure happens on current develop. So it's not related to this ticket necessarily. (This machine is from the department, we just got a new os update, so we are less aware of the default installations)



---

archive/issue_comments_430932.json:
```json
{
    "body": "<div id=\"comment:87\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/64fe021cd91d4a09b5cf86de65e1ada08cb657b8\">64fe021</a></td><td><code>perl_cpan_polymake_prereq/spkg-src: Actually compress the tarball</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dfa2c3da2ba73517ae88ea51c1e3b6b99917e492\">dfa2c3d</a></td><td><code>polymake: add dependency ppl</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c1c3fd3e92c8104c1326949aa7daac8bbaddcc18\">c1c3fd3</a></td><td><code>perl_cpan_polymake_prereq: Make spkg-src more robust</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ddec16fc4d0da9ad7b64e597c6e40ef5d40cd2d8\">ddec16f</a></td><td><code>Regenerate src package with new script</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/98450c81c0d8d828c8e0eb9a04a1fe98f34c2c60\">98450c8</a></td><td><code>perl_cpan_polymake_prereq: Install prereqs in two stages, fixup LD environment variable for Moose</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/99c11935048faa92c1b1bd3f1be07c9b04d895e0\">99c1193</a></td><td><code>Add build/pkgs/perl_cpan_polymake_prereq/stage1/Makefile.PL</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/118ee1fd6b442b2ec71337aa12462a48f7356d7c\">118ee1f</a></td><td><code>perl_cpan_polymake_prereq: Clean up spkg-src, spkg-install</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/08fcc2552b4c0c1b59c3b0d7a7d29da301a4627f\">08fcc25</a></td><td><code>Add missing cpan packages</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/954e55b8976db4fd5ba5ab1b8f1df24d9b5d487c\">954e55b</a></td><td><code>Update polymake SPKG.txt</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b74fc93c12be28adac7afcad571464b063b3e509\">b74fc93</a></td><td><code>Disable perl package tests unless SAGE_CHECK=yes</code></td></tr></table>\n",
    "created_at": "2020-03-17T00:25:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430932",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:87"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/64fe021cd91d4a09b5cf86de65e1ada08cb657b8">64fe021</a></td><td><code>perl_cpan_polymake_prereq/spkg-src: Actually compress the tarball</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dfa2c3da2ba73517ae88ea51c1e3b6b99917e492">dfa2c3d</a></td><td><code>polymake: add dependency ppl</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c1c3fd3e92c8104c1326949aa7daac8bbaddcc18">c1c3fd3</a></td><td><code>perl_cpan_polymake_prereq: Make spkg-src more robust</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ddec16fc4d0da9ad7b64e597c6e40ef5d40cd2d8">ddec16f</a></td><td><code>Regenerate src package with new script</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/98450c81c0d8d828c8e0eb9a04a1fe98f34c2c60">98450c8</a></td><td><code>perl_cpan_polymake_prereq: Install prereqs in two stages, fixup LD environment variable for Moose</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/99c11935048faa92c1b1bd3f1be07c9b04d895e0">99c1193</a></td><td><code>Add build/pkgs/perl_cpan_polymake_prereq/stage1/Makefile.PL</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/118ee1fd6b442b2ec71337aa12462a48f7356d7c">118ee1f</a></td><td><code>perl_cpan_polymake_prereq: Clean up spkg-src, spkg-install</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/08fcc2552b4c0c1b59c3b0d7a7d29da301a4627f">08fcc25</a></td><td><code>Add missing cpan packages</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/954e55b8976db4fd5ba5ab1b8f1df24d9b5d487c">954e55b</a></td><td><code>Update polymake SPKG.txt</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b74fc93c12be28adac7afcad571464b063b3e509">b74fc93</a></td><td><code>Disable perl package tests unless SAGE_CHECK=yes</code></td></tr></table>




---

archive/issue_comments_430933.json:
```json
{
    "body": "Changed commit from **[cce6cbd](https://github.com/sagemath/sagetrac-mirror/commit/cce6cbd221634fc36df0661fd69d4f7401c5d5d7)** to **[b74fc93](https://github.com/sagemath/sagetrac-mirror/commit/b74fc93c12be28adac7afcad571464b063b3e509)**",
    "created_at": "2020-03-17T00:25:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430933",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[cce6cbd](https://github.com/sagemath/sagetrac-mirror/commit/cce6cbd221634fc36df0661fd69d4f7401c5d5d7)** to **[b74fc93](https://github.com/sagemath/sagetrac-mirror/commit/b74fc93c12be28adac7afcad571464b063b3e509)**



---

archive/issue_comments_430934.json:
```json
{
    "body": "Changed dependencies from **#27803** to none",
    "created_at": "2020-03-17T00:25:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430934",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#27803** to none



---

archive/issue_events_380888.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-17T00:25:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27763#event-380888"
}
```



---

archive/issue_events_380889.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-17T00:25:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27763#event-380889"
}
```



---

archive/issue_comments_430935.json:
```json
{
    "body": "<div id=\"comment:89\" align=\"right\">comment:89</div>\n\nLet me know when this is good to be tested: turns out, I might have more time now for testing(!)...",
    "created_at": "2020-03-17T09:31:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430935",
    "user": "https://github.com/jplab"
}
```

<div id="comment:89" align="right">comment:89</div>

Let me know when this is good to be tested: turns out, I might have more time now for testing(!)...



---

archive/issue_events_380890.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T06:38:06Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27763#event-380890"
}
```



---

archive/issue_events_380891.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T06:38:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27763#event-380891"
}
```



---

archive/issue_comments_430936.json:
```json
{
    "body": "<div id=\"comment:90\" align=\"right\">comment:90</div>\n\npushing these forward to 9.2",
    "created_at": "2020-04-14T06:38:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430936",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:90" align="right">comment:90</div>

pushing these forward to 9.2



---

archive/issue_comments_430937.json:
```json
{
    "body": "Changed commit from **[b74fc93](https://github.com/sagemath/sagetrac-mirror/commit/b74fc93c12be28adac7afcad571464b063b3e509)** to **[e787238](https://github.com/sagemath/sagetrac-mirror/commit/e78723863936a485d354c53f38e1c73d57ae713f)**",
    "created_at": "2020-04-25T20:56:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430937",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b74fc93](https://github.com/sagemath/sagetrac-mirror/commit/b74fc93c12be28adac7afcad571464b063b3e509)** to **[e787238](https://github.com/sagemath/sagetrac-mirror/commit/e78723863936a485d354c53f38e1c73d57ae713f)**



---

archive/issue_comments_430938.json:
```json
{
    "body": "<div id=\"comment:91\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e78723863936a485d354c53f38e1c73d57ae713f\">e787238</a></td><td><code>Merge tag '9.1.rc1' into t/27763/perl_packages_for_polymake</code></td></tr></table>\n",
    "created_at": "2020-04-25T20:56:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430938",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:91"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e78723863936a485d354c53f38e1c73d57ae713f">e787238</a></td><td><code>Merge tag '9.1.rc1' into t/27763/perl_packages_for_polymake</code></td></tr></table>




---

archive/issue_comments_430939.json:
```json
{
    "body": "Changed commit from **[e787238](https://github.com/sagemath/sagetrac-mirror/commit/e78723863936a485d354c53f38e1c73d57ae713f)** to **[20b8ffe](https://github.com/sagemath/sagetrac-mirror/commit/20b8ffe35d1a326c0ba808cf1b150e207159d22f)**",
    "created_at": "2020-04-25T21:49:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430939",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e787238](https://github.com/sagemath/sagetrac-mirror/commit/e78723863936a485d354c53f38e1c73d57ae713f)** to **[20b8ffe](https://github.com/sagemath/sagetrac-mirror/commit/20b8ffe35d1a326c0ba808cf1b150e207159d22f)**



---

archive/issue_comments_430940.json:
```json
{
    "body": "<div id=\"comment:92\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8c65337c68eb4d86698de31b16951d07eaccc617\">8c65337</a></td><td><code>polymake SPKG.txt: Remove outdated info regarding macOS headers</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/20b8ffe35d1a326c0ba808cf1b150e207159d22f\">20b8ffe</a></td><td><code>Merge branch 't/29582/polymake_spkg_txt__remove_outdated_info_regarding_macos_headers' into t/27763/perl_packages_for_polymake</code></td></tr></table>\n",
    "created_at": "2020-04-25T21:49:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430940",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:92"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8c65337c68eb4d86698de31b16951d07eaccc617">8c65337</a></td><td><code>polymake SPKG.txt: Remove outdated info regarding macOS headers</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/20b8ffe35d1a326c0ba808cf1b150e207159d22f">20b8ffe</a></td><td><code>Merge branch 't/29582/polymake_spkg_txt__remove_outdated_info_regarding_macos_headers' into t/27763/perl_packages_for_polymake</code></td></tr></table>




---

archive/issue_comments_430941.json:
```json
{
    "body": "Dependencies: **#29582**",
    "created_at": "2020-04-25T21:49:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430941",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#29582**



---

archive/issue_comments_430942.json:
```json
{
    "body": "Changed commit from **[20b8ffe](https://github.com/sagemath/sagetrac-mirror/commit/20b8ffe35d1a326c0ba808cf1b150e207159d22f)** to **[225dea9](https://github.com/sagemath/sagetrac-mirror/commit/225dea925c37e385e74b8403d4ee294a3ca4e689)**",
    "created_at": "2020-04-25T22:51:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430942",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[20b8ffe](https://github.com/sagemath/sagetrac-mirror/commit/20b8ffe35d1a326c0ba808cf1b150e207159d22f)** to **[225dea9](https://github.com/sagemath/sagetrac-mirror/commit/225dea925c37e385e74b8403d4ee294a3ca4e689)**



---

archive/issue_comments_430943.json:
```json
{
    "body": "<div id=\"comment:94\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/225dea925c37e385e74b8403d4ee294a3ca4e689\">225dea9</a></td><td><code>Merge tag '9.1.rc2' into t/27763/perl_packages_for_polymake</code></td></tr></table>\n",
    "created_at": "2020-04-25T22:51:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430943",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:94"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/225dea925c37e385e74b8403d4ee294a3ca4e689">225dea9</a></td><td><code>Merge tag '9.1.rc2' into t/27763/perl_packages_for_polymake</code></td></tr></table>




---

archive/issue_comments_430944.json:
```json
{
    "body": "<div id=\"comment:95\" align=\"right\">comment:95</div>\n\nNOT ready for new tests.",
    "created_at": "2020-04-25T22:52:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430944",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:95" align="right">comment:95</div>

NOT ready for new tests.



---

archive/issue_comments_430945.json:
```json
{
    "body": "<div id=\"comment:96\" align=\"right\">comment:96</div>\n\nReplying to [@mkoeppe](#comment:95):\n> NOT ready for new tests.\n\nOk, just I'll wait until you change the flag to needs review and then I could run some installation tests.",
    "created_at": "2020-05-11T14:25:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430945",
    "user": "https://github.com/jplab"
}
```

<div id="comment:96" align="right">comment:96</div>

Replying to [@mkoeppe](#comment:95):
> NOT ready for new tests.

Ok, just I'll wait until you change the flag to needs review and then I could run some installation tests.



---

archive/issue_events_380892.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27763#event-380892"
}
```



---

archive/issue_events_380893.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27763#event-380893"
}
```



---

archive/issue_events_380894.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-24T02:04:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27763#event-380894"
}
```



---

archive/issue_events_380895.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-24T02:04:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27763#event-380895"
}
```



---

archive/issue_comments_430946.json:
```json
{
    "body": "<div id=\"comment:98\" align=\"right\">comment:98</div>\n\nSage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-24T02:04:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430946",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:98" align="right">comment:98</div>

Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_380896.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27763#event-380896"
}
```



---

archive/issue_events_380897.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27763#event-380897"
}
```



---

archive/issue_comments_430947.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">comment:99</div>\n\nSetting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27763#issuecomment-430947",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:99" align="right">comment:99</div>

Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_events_380898.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27763#event-380898"
}
```



---

archive/issue_events_380899.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27763#event-380899"
}
```



---

archive/issue_events_380900.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27763#event-380900"
}
```



---

archive/issue_events_380901.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27763#event-380901"
}
```



---

archive/issue_events_380902.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27763#event-380902"
}
```



---

archive/issue_events_380903.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27763#event-380903"
}
```



---

archive/issue_events_380904.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2023-01-07T21:39:40Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27763#event-380904"
}
```



---

archive/issue_events_380905.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2023-01-07T21:39:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27763",
    "milestone_number": null,
    "milestone_title": "sage-9.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27763#event-380905"
}
```
