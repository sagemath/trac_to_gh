# Issue 27420: Simplify ideal generators in function field code

archive/issues_027420.json:
```json
{
    "body": "Keywords: function fields\n\nIdeals of orders are often presented using more generators than needed.  For example, this snippet is taken directly from a test case in sage/src/function_fields/ideal.py:\n\n```\nsage: K.<x> = FunctionField(QQ); R.<y> = K[]                                                                          \nsage: L.<y> = K.extension(y^2 - x^3 - 1)                                                                              \nsage: O = L.equation_order()                                                                                          \nsage: O.ideal(x^2 + 1)                                                                                                \nIdeal (x^2 + 1, (x^2 + 1)*y) of Order in Function field in y defined by y^2 - x^3 - 1                                 \n```\n\nThe presentation is obviously non-optimal, since the ideal was created with a single generator, but printed with two!\n\nIssue created by migration from https://trac.sagemath.org/ticket/27657\n\n",
    "closed_at": "2019-05-17T11:45:20Z",
    "created_at": "2019-04-14T00:14:03Z",
    "labels": [
        "component: algebra",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.8",
    "title": "Simplify ideal generators in function field code",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27420",
    "user": "https://github.com/BrentBaccala"
}
```
Keywords: function fields

Ideals of orders are often presented using more generators than needed.  For example, this snippet is taken directly from a test case in sage/src/function_fields/ideal.py:

```
sage: K.<x> = FunctionField(QQ); R.<y> = K[]                                                                          
sage: L.<y> = K.extension(y^2 - x^3 - 1)                                                                              
sage: O = L.equation_order()                                                                                          
sage: O.ideal(x^2 + 1)                                                                                                
Ideal (x^2 + 1, (x^2 + 1)*y) of Order in Function field in y defined by y^2 - x^3 - 1                                 
```

The presentation is obviously non-optimal, since the ideal was created with a single generator, but printed with two!

Issue created by migration from https://trac.sagemath.org/ticket/27657





---

archive/issue_comments_386192.json:
```json
{
    "body": "This ticket is a lot harder than I had realized.  Implementing an algorithm to test these ideals for principality is not trivial.  The proposed code is an improvement, but doesn't always find a single generator for a principal ideal.  At least it finds them in some cases, like the one in the ticket description:\n\n```\nsage: K.<x> = FunctionField(QQ); R.<y> = K[]\nsage: L.<y> = K.extension(y^2 - x^3 - 1)\nsage: O = L.equation_order()\nsage: O.ideal(x^2 + 1)\nIdeal (x^2 + 1) of Order in Function field in y defined by y^2 - x^3 - 1\n```\n\n---\nLast 10 new commits:",
    "created_at": "2019-05-06T15:09:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27420#issuecomment-386192",
    "user": "https://github.com/BrentBaccala"
}
```

This ticket is a lot harder than I had realized.  Implementing an algorithm to test these ideals for principality is not trivial.  The proposed code is an improvement, but doesn't always find a single generator for a principal ideal.  At least it finds them in some cases, like the one in the ticket description:

```
sage: K.<x> = FunctionField(QQ); R.<y> = K[]
sage: L.<y> = K.extension(y^2 - x^3 - 1)
sage: O = L.equation_order()
sage: O.ideal(x^2 + 1)
Ideal (x^2 + 1) of Order in Function field in y defined by y^2 - x^3 - 1
```

---
Last 10 new commits:



---

archive/issue_comments_386193.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-05-06T15:09:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27420#issuecomment-386193",
    "user": "https://github.com/BrentBaccala"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_386194.json:
```json
{
    "body": "A few little tweaks:\n\n```diff\n-        ALGORITHM::\n+        ALGORITHM:\n \n-            At most two generators are required to generate ideals\n-            in Dedekind domains.\n+        At most two generators are required to generate ideals in\n+        Dedekind domains.\n \n-            Lemma 4.7.9, algorithm 4.7.10, and exercise 4.29 of [Coh1993]_\n-            tell us that for an integral ideal $I$ in a number field,\n-            if we pick $a$ such that $\\gcd(N(I), N(a)/N(I)) = 1$, then\n-            $a$ and $N(I)$ generate the ideal.  $N()$ is the norm, and\n-            this result (presumably) generalizes to function fields.\n+        Lemma 4.7.9, Algorithm 4.7.10, and Exercise 4.29 of [Coh1993]_\n+        tell us that for an integral ideal `I` in a number field, if\n+        we pick `a` such that `\\gcd(N(I), N(a)/N(I)) = 1`, then `a`\n+        and `N(I)` generate the ideal.  `N()` is the norm, and this\n+        result (presumably) generalizes to function fields.\n \n-            After computing $N(I)$, we search exhaustively to find $a$.\n+        After computing `N(I)`, we search exhaustively to find `a`.\n```\nAs `ALGORITHM` is not a standard Sphinx directive (cf. `.. TODO::`), so it should not be indented. Also, we prefer backticks over dollar signs.\n\nOnce this is done, you can set a positive review on my behalf.",
    "created_at": "2019-05-13T00:28:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27420#issuecomment-386194",
    "user": "https://github.com/tscrim"
}
```

A few little tweaks:

```diff
-        ALGORITHM::
+        ALGORITHM:
 
-            At most two generators are required to generate ideals
-            in Dedekind domains.
+        At most two generators are required to generate ideals in
+        Dedekind domains.
 
-            Lemma 4.7.9, algorithm 4.7.10, and exercise 4.29 of [Coh1993]_
-            tell us that for an integral ideal $I$ in a number field,
-            if we pick $a$ such that $\gcd(N(I), N(a)/N(I)) = 1$, then
-            $a$ and $N(I)$ generate the ideal.  $N()$ is the norm, and
-            this result (presumably) generalizes to function fields.
+        Lemma 4.7.9, Algorithm 4.7.10, and Exercise 4.29 of [Coh1993]_
+        tell us that for an integral ideal `I` in a number field, if
+        we pick `a` such that `\gcd(N(I), N(a)/N(I)) = 1`, then `a`
+        and `N(I)` generate the ideal.  `N()` is the norm, and this
+        result (presumably) generalizes to function fields.
 
-            After computing $N(I)$, we search exhaustively to find $a$.
+        After computing `N(I)`, we search exhaustively to find `a`.
```
As `ALGORITHM` is not a standard Sphinx directive (cf. `.. TODO::`), so it should not be indented. Also, we prefer backticks over dollar signs.

Once this is done, you can set a positive review on my behalf.



---

archive/issue_comments_386195.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-13T15:47:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27420#issuecomment-386195",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_386196.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-05-13T15:52:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27420#issuecomment-386196",
    "user": "https://github.com/BrentBaccala"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_386197.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-05-17T11:45:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27420#issuecomment-386197",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_068633.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-05-17T11:45:20Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27420",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27420#event-68633"
}
```
