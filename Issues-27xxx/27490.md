# Issue 27490: Simplistic multiprocessing.Pool replacement for parallel docbuild on older Cygwin

archive/issues_027253.json:
```json
{
    "assignees": [],
    "body": "For Cygwin versions less than 3.0.0 (and only Cygwin) this replaces the use of `multiprocessing.Pool` in the `sage_setup.docbuild.build_many` function, with a na\u00efve but \"good enough\" (it works in general) parallel process pool that does not rely on starting processes from threads.\n\nThis is needed for #27214, because the specific combination of using `MAP_NORESERVE` `mmap`s and forking processes from a thread can result in a bug in Cygwin (fixed in 3.0.0) which causes unhandled segfaults to occur in any code that is run during the docbuild which uses libgap.\n\nSo this is really only needed so that the docs can continue to be built on systems (including my primary development environment, as well as the buildbot) that do not yet have Cygwin >= 3.0.0 once #27214 is applied.\n\nCC:  @jdemeyer\n\nBranch: **[`fe0e3ea`](https://github.com/sagemath/sagetrac-mirror/commit/fe0e3ea1a8d85d41047f9308db48912f1bdcffcd)**\n\nReviewer: **Jeroen Demeyer**\n\nAuthor: **Erik Bray**\n\nComponent: **porting: Cygwin**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/27490_\n\n",
    "closed_at": "2019-03-19T21:26:13Z",
    "created_at": "2019-03-15T10:49:36Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20porting%3A%20cygwin",
        "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Simplistic multiprocessing.Pool replacement for parallel docbuild on older Cygwin",
    "type": "issue",
    "updated_at": "2019-03-19T21:28:27Z",
    "url": "https://github.com/sagemath/sage/issues/27490",
    "user": "https://github.com/embray"
}
```
For Cygwin versions less than 3.0.0 (and only Cygwin) this replaces the use of `multiprocessing.Pool` in the `sage_setup.docbuild.build_many` function, with a naÃ¯ve but "good enough" (it works in general) parallel process pool that does not rely on starting processes from threads.

This is needed for #27214, because the specific combination of using `MAP_NORESERVE` `mmap`s and forking processes from a thread can result in a bug in Cygwin (fixed in 3.0.0) which causes unhandled segfaults to occur in any code that is run during the docbuild which uses libgap.

So this is really only needed so that the docs can continue to be built on systems (including my primary development environment, as well as the buildbot) that do not yet have Cygwin >= 3.0.0 once #27214 is applied.

CC:  @jdemeyer

Branch: **[`fe0e3ea`](https://github.com/sagemath/sagetrac-mirror/commit/fe0e3ea1a8d85d41047f9308db48912f1bdcffcd)**

Reviewer: **Jeroen Demeyer**

Author: **Erik Bray**

Component: **porting: Cygwin**

_Issue created by migration from https://trac.sagemath.org/ticket/27490_





---

archive/issue_events_379338.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-15T10:49:36Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27490#event-379338"
}
```



---

archive/issue_events_379339.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-15T10:49:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20porting%3A%20cygwin",
    "label_color": "000080",
    "label_name": "c: porting: cygwin",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27490#event-379339"
}
```



---

archive/issue_events_379340.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-15T10:49:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "label": "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p: 1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27490#event-379340"
}
```



---

archive/issue_events_379341.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-15T10:49:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27490#event-379341"
}
```



---

archive/issue_comments_425453.json:
```json
{
    "body": "Branch: **[u/embray/ticket-27490](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/ticket-27490)**",
    "created_at": "2019-03-15T11:08:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425453",
    "user": "https://github.com/embray"
}
```

Branch: **[u/embray/ticket-27490](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/ticket-27490)**



---

archive/issue_events_379342.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-15T11:08:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27490#event-379342"
}
```



---

archive/issue_comments_425454.json:
```json
{
    "body": "Author: **Erik Bray**",
    "created_at": "2019-03-15T11:08:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425454",
    "user": "https://github.com/embray"
}
```

Author: **Erik Bray**



---

archive/issue_comments_425455.json:
```json
{
    "body": "Commit: **[`f9aabb7`](https://github.com/sagemath/sagetrac-mirror/commit/f9aabb755ce4cb89a6dd926bd26a08611cfaf389)**",
    "created_at": "2019-03-15T11:08:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425455",
    "user": "https://github.com/embray"
}
```

Commit: **[`f9aabb7`](https://github.com/sagemath/sagetrac-mirror/commit/f9aabb755ce4cb89a6dd926bd26a08611cfaf389)**



---

archive/issue_comments_425456.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nJeroen, you will likely have thoughts about this.  Keep in mind, it's not meant to be at all robust--just a quick workaround so I don't have to spend too much more time on it.  But if you have any thoughts on straightforward improvements to this I'm all for it.\n\nObviously a better workaround, if it were possible, would be to use the much talked-about idea for generalizing the parallel processing loop from the Sage doctester. But since we don't have that yet this will do for now.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f9aabb755ce4cb89a6dd926bd26a08611cfaf389\"><code>f9aabb7</code></a></td><td><code>Trac #27490: Simplistic multiprocessing.Pool replacement for parallel docbuild on older Cygwin</code></td></tr></table>\n",
    "created_at": "2019-03-15T11:08:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425456",
    "user": "https://github.com/embray"
}
```

<div id="comment:1" align="right">comment:1</div>

Jeroen, you will likely have thoughts about this.  Keep in mind, it's not meant to be at all robust--just a quick workaround so I don't have to spend too much more time on it.  But if you have any thoughts on straightforward improvements to this I'm all for it.

Obviously a better workaround, if it were possible, would be to use the much talked-about idea for generalizing the parallel processing loop from the Sage doctester. But since we don't have that yet this will do for now.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f9aabb755ce4cb89a6dd926bd26a08611cfaf389"><code>f9aabb7</code></a></td><td><code>Trac #27490: Simplistic multiprocessing.Pool replacement for parallel docbuild on older Cygwin</code></td></tr></table>




---

archive/issue_comments_425457.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI'm just wondering why you even bother with parallel docbuilding in the first place. The obvious solution is just using a single process.",
    "created_at": "2019-03-15T13:13:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425457",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:2" align="right">comment:2</div>

I'm just wondering why you even bother with parallel docbuilding in the first place. The obvious solution is just using a single process.



---

archive/issue_comments_425458.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nAlso, in general I don't like code of the form\n\n```\nif A_is_not_broken:\n    A()\nelse:\n    B()\n```\nIf `B` works well enough to replace `A`, then why don't we just use `B` unconditionally?\n\nThis is especially relevant when `A` involves `multiprocessing.Pool` which has other issues (that's why I didn't use it in the doctester).\n\nSo I would like to know if there is a good reason to not use your \"simplistic multiprocessing.Pool replacement\" on all systems.",
    "created_at": "2019-03-15T13:33:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425458",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:3" align="right">comment:3</div>

Also, in general I don't like code of the form

```
if A_is_not_broken:
    A()
else:
    B()
```
If `B` works well enough to replace `A`, then why don't we just use `B` unconditionally?

This is especially relevant when `A` involves `multiprocessing.Pool` which has other issues (that's why I didn't use it in the doctester).

So I would like to know if there is a good reason to not use your "simplistic multiprocessing.Pool replacement" on all systems.



---

archive/issue_events_379343.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-03-15T13:59:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27490#event-379343"
}
```



---

archive/issue_events_379344.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-03-15T13:59:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27490#event-379344"
}
```



---

archive/issue_comments_425459.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nSome comments on the code:\n\n1. This should use `os.wait()` instead of `time.sleep(5)`. Unless I'm missing something, this should be robust.\n\n2. A few comments would be helpful.\n\n3. `not any(filter(None, workers))` is not an easy condition to understand. I would write it as `all(w is None for w in workers)`.\n\n4. I don't think that there is a need to gracefully shutdown the workers in the `finally` block. A hard kill `os.kill(w.pid, signal.SIGKILL)` may be better because it guarantees to kill the process (cysignals catches `SIGTERM` which does `sys.exit()` but that might not actually kill the process in a sufficiently messed up state). For extra safety, maybe call `is_alive()` before killing the process.\n\nIn general, I like it. It's simple but the use case is sufficiently simple that we don't need anything more complicated. And it says a lot about `multiprocess.Pool` that this might actually work better than `multiprocessing.Pool`.",
    "created_at": "2019-03-15T13:59:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425459",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:4" align="right">comment:4</div>

Some comments on the code:

1. This should use `os.wait()` instead of `time.sleep(5)`. Unless I'm missing something, this should be robust.

2. A few comments would be helpful.

3. `not any(filter(None, workers))` is not an easy condition to understand. I would write it as `all(w is None for w in workers)`.

4. I don't think that there is a need to gracefully shutdown the workers in the `finally` block. A hard kill `os.kill(w.pid, signal.SIGKILL)` may be better because it guarantees to kill the process (cysignals catches `SIGTERM` which does `sys.exit()` but that might not actually kill the process in a sufficiently messed up state). For extra safety, maybe call `is_alive()` before killing the process.

In general, I like it. It's simple but the use case is sufficiently simple that we don't need anything more complicated. And it says a lot about `multiprocess.Pool` that this might actually work better than `multiprocessing.Pool`.



---

archive/issue_comments_425460.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nThanks for having a look.\n\nReplying to [@jdemeyer](#comment:4):\n> Some comments on the code:\n> \n> 1. This should use `os.wait()` instead of `time.sleep(5)`. Unless I'm missing something, this should be robust.\n\nYes, that should be much better.\n\n> 2. A few comments would be helpful.\n\n+1\n\n> 3. `not any(filter(None, workers))` is not an easy condition to understand. I would write it as `all(w is None for w in workers)`.\n\nI thought it was pretty straightforward, but I guess the `not any` is a little confusing.\n\n> 4. I don't think that there is a need to gracefully shutdown the workers in the `finally` block. A hard kill `os.kill(w.pid, signal.SIGKILL)` may be better because it guarantees to kill the process (cysignals catches `SIGTERM` which does `sys.exit()` but that might not actually kill the process in a sufficiently messed up state). For extra safety, maybe call `is_alive()` before killing the process.\n\nI think there is: Or at least to try to SIGTERM first. Reason being this block can be reached if one process exits in error, while other processes are still working perfectly fine.  You want to gracefully shut them down and ensure that their atexit handlers run, clean up temp files, etc.\n\n> In general, I like it. It's simple but the use case is sufficiently simple that we don't need anything more complicated. And it says a lot about `multiprocess.Pool` that this might actually work better than `multiprocessing.Pool`.\n\nI don't know that it says a lot. I don't think it actually works \"better\" on the whole, just in this one case. Keep in mind also that `multiprocessing.Pool` implements a lot of generic functionality (e.g. multiple simultaneous `map_async` jobs) that simply aren't needed for this simpler use case.\n\nOne downside to this approach is that there is no data returned from the child processes to the parent. So for example an exception raised in a worker cannot be re-raised from the parent.  Instead I just raise a generic `RuntimeError` if the process exited with an error code.  I simulated this case in testing and you can still see the worker's exception and traceback printed to stderr, so that was good-enough for my purposes.",
    "created_at": "2019-03-15T14:52:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425460",
    "user": "https://github.com/embray"
}
```

<div id="comment:5" align="right">comment:5</div>

Thanks for having a look.

Replying to [@jdemeyer](#comment:4):
> Some comments on the code:
> 
> 1. This should use `os.wait()` instead of `time.sleep(5)`. Unless I'm missing something, this should be robust.

Yes, that should be much better.

> 2. A few comments would be helpful.

+1

> 3. `not any(filter(None, workers))` is not an easy condition to understand. I would write it as `all(w is None for w in workers)`.

I thought it was pretty straightforward, but I guess the `not any` is a little confusing.

> 4. I don't think that there is a need to gracefully shutdown the workers in the `finally` block. A hard kill `os.kill(w.pid, signal.SIGKILL)` may be better because it guarantees to kill the process (cysignals catches `SIGTERM` which does `sys.exit()` but that might not actually kill the process in a sufficiently messed up state). For extra safety, maybe call `is_alive()` before killing the process.

I think there is: Or at least to try to SIGTERM first. Reason being this block can be reached if one process exits in error, while other processes are still working perfectly fine.  You want to gracefully shut them down and ensure that their atexit handlers run, clean up temp files, etc.

> In general, I like it. It's simple but the use case is sufficiently simple that we don't need anything more complicated. And it says a lot about `multiprocess.Pool` that this might actually work better than `multiprocessing.Pool`.

I don't know that it says a lot. I don't think it actually works "better" on the whole, just in this one case. Keep in mind also that `multiprocessing.Pool` implements a lot of generic functionality (e.g. multiple simultaneous `map_async` jobs) that simply aren't needed for this simpler use case.

One downside to this approach is that there is no data returned from the child processes to the parent. So for example an exception raised in a worker cannot be re-raised from the parent.  Instead I just raise a generic `RuntimeError` if the process exited with an error code.  I simulated this case in testing and you can still see the worker's exception and traceback printed to stderr, so that was good-enough for my purposes.



---

archive/issue_comments_425461.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@jdemeyer](#comment:3):\n> Also, in general I don't like code of the form\n> \n> ```\n> if A_is_not_broken:\n>     A()\n> else:\n>     B()\n> ```\n> If `B` works well enough to replace `A`, then why don't we just use `B` unconditionally?\n> \n> This is especially relevant when `A` involves `multiprocessing.Pool` which has other issues (that's why I didn't use it in the doctester).\n> \n> So I would like to know if there is a good reason to not use your \"simplistic multiprocessing.Pool replacement\" on all systems.\n\nPartly for the reason I mentioned at the end of my previous comment, and partly just because I need this *now* and although I'm convinced it's robust-enough for my use it's still not well-tested.\n\nHow about for now we special-case this, and then for the next release make it a priority to finally get at least an initial version of the doctest forker code released and replace it with that?",
    "created_at": "2019-03-15T14:56:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425461",
    "user": "https://github.com/embray"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@jdemeyer](#comment:3):
> Also, in general I don't like code of the form
> 
> ```
> if A_is_not_broken:
>     A()
> else:
>     B()
> ```
> If `B` works well enough to replace `A`, then why don't we just use `B` unconditionally?
> 
> This is especially relevant when `A` involves `multiprocessing.Pool` which has other issues (that's why I didn't use it in the doctester).
> 
> So I would like to know if there is a good reason to not use your "simplistic multiprocessing.Pool replacement" on all systems.

Partly for the reason I mentioned at the end of my previous comment, and partly just because I need this *now* and although I'm convinced it's robust-enough for my use it's still not well-tested.

How about for now we special-case this, and then for the next release make it a priority to finally get at least an initial version of the doctest forker code released and replace it with that?



---

archive/issue_comments_425462.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@jdemeyer](#comment:2):\n> I'm just wondering why you even bother with parallel docbuilding in the first place. The obvious solution is just using a single process.\n\nAt first I did just replace this with just plain `map(target, args)` but I wasn't satisfied: It was slow (obviously) and made memory usage even worse than it already is, over time.  It still seems better, if not kind of brushing other problems under the rug, to build each sub-doc in its own process that can easily be cleaned up when it's done.\n\nThe parallel version only took about 20 minutes to get working.",
    "created_at": "2019-03-15T15:00:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425462",
    "user": "https://github.com/embray"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@jdemeyer](#comment:2):
> I'm just wondering why you even bother with parallel docbuilding in the first place. The obvious solution is just using a single process.

At first I did just replace this with just plain `map(target, args)` but I wasn't satisfied: It was slow (obviously) and made memory usage even worse than it already is, over time.  It still seems better, if not kind of brushing other problems under the rug, to build each sub-doc in its own process that can easily be cleaned up when it's done.

The parallel version only took about 20 minutes to get working.



---

archive/issue_comments_425463.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/219e9c41e43036bed5d2a3f54d4684ee33aef06a\"><code>219e9c4</code></a></td><td><code>A little bit of import cleanup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/88771dfbe0d6b90cf5574065d312d1e0a7f005af\"><code>88771df</code></a></td><td><code>Trac #27490: Address some review comments and other cleanup:</code></td></tr></table>\n",
    "created_at": "2019-03-15T15:24:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425463",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/219e9c41e43036bed5d2a3f54d4684ee33aef06a"><code>219e9c4</code></a></td><td><code>A little bit of import cleanup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/88771dfbe0d6b90cf5574065d312d1e0a7f005af"><code>88771df</code></a></td><td><code>Trac #27490: Address some review comments and other cleanup:</code></td></tr></table>




---

archive/issue_comments_425464.json:
```json
{
    "body": "Changed commit from **[`f9aabb7`](https://github.com/sagemath/sagetrac-mirror/commit/f9aabb755ce4cb89a6dd926bd26a08611cfaf389)** to **[`88771df`](https://github.com/sagemath/sagetrac-mirror/commit/88771dfbe0d6b90cf5574065d312d1e0a7f005af)**",
    "created_at": "2019-03-15T15:24:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425464",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f9aabb7`](https://github.com/sagemath/sagetrac-mirror/commit/f9aabb755ce4cb89a6dd926bd26a08611cfaf389)** to **[`88771df`](https://github.com/sagemath/sagetrac-mirror/commit/88771dfbe0d6b90cf5574065d312d1e0a7f005af)**



---

archive/issue_events_379345.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-15T15:26:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27490#event-379345"
}
```



---

archive/issue_events_379346.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-15T15:26:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27490#event-379346"
}
```



---

archive/issue_comments_425465.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI addressed most of your comments, but I still have the big `if/else`.  Since that `sage_setup.docbuild.__init__` module is already quite large, perhaps I could move that code to a utility module at least.\n\nI'd still be open to just using it on all platforms, but I'm wary, given that this isn't battle-tested.",
    "created_at": "2019-03-15T15:26:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425465",
    "user": "https://github.com/embray"
}
```

<div id="comment:9" align="right">comment:9</div>

I addressed most of your comments, but I still have the big `if/else`.  Since that `sage_setup.docbuild.__init__` module is already quite large, perhaps I could move that code to a utility module at least.

I'd still be open to just using it on all platforms, but I'm wary, given that this isn't battle-tested.



---

archive/issue_comments_425466.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@embray](#comment:9):\n> I'd still be open to just using it on all platforms, but I'm wary, given that this isn't battle-tested.\n\nI see your point.",
    "created_at": "2019-03-15T15:55:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425466",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@embray](#comment:9):
> I'd still be open to just using it on all platforms, but I'm wary, given that this isn't battle-tested.

I see your point.



---

archive/issue_events_379347.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-03-15T16:01:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27490#event-379347"
}
```



---

archive/issue_events_379348.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-03-15T16:01:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27490#event-379348"
}
```



---

archive/issue_comments_425467.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer**",
    "created_at": "2019-03-15T16:01:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425467",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer**



---

archive/issue_comments_425468.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI'm willing to give this the benefit of the doubt. You'll probably be the only user of this code anyway.\n\nI'm sure that there is room for improvement (I still don't like the `finally` block for example), but we can defer that to the point that we decide to use this code for all systems.",
    "created_at": "2019-03-15T16:01:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425468",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:11" align="right">comment:11</div>

I'm willing to give this the benefit of the doubt. You'll probably be the only user of this code anyway.

I'm sure that there is room for improvement (I still don't like the `finally` block for example), but we can defer that to the point that we decide to use this code for all systems.



---

archive/issue_events_379349.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-15T16:05:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27490#event-379349"
}
```



---

archive/issue_events_379350.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-15T16:05:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27490#event-379350"
}
```



---

archive/issue_comments_425469.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nThanks.  However, I need to double back now since my last change broke something.  It's not starting new processes up after previous ones finish.",
    "created_at": "2019-03-15T16:05:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425469",
    "user": "https://github.com/embray"
}
```

<div id="comment:12" align="right">comment:12</div>

Thanks.  However, I need to double back now since my last change broke something.  It's not starting new processes up after previous ones finish.



---

archive/issue_comments_425470.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nThis sort-of makes sense: It turns out of you `os.wait()` a process run by `multiprocessing.Process()` it breaks, because it wants to `os.waitpid()` on itself so it can get its return code.  So wait()-ing that process manually means it never finds out that it itself finished (and it doesn't check for the correct error code that would indicate as much) so it always just returns `None` for its exitcode.  This is a bit buggy but understandable.",
    "created_at": "2019-03-15T16:55:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425470",
    "user": "https://github.com/embray"
}
```

<div id="comment:13" align="right">comment:13</div>

This sort-of makes sense: It turns out of you `os.wait()` a process run by `multiprocessing.Process()` it breaks, because it wants to `os.waitpid()` on itself so it can get its return code.  So wait()-ing that process manually means it never finds out that it itself finished (and it doesn't check for the correct error code that would indicate as much) so it always just returns `None` for its exitcode.  This is a bit buggy but understandable.



---

archive/issue_comments_425471.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI see. In the doctester, we solve this by checking for the `SIGCHLD` signal instead of `os.wait()`. Now I know why.",
    "created_at": "2019-03-15T17:01:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425471",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:14" align="right">comment:14</div>

I see. In the doctester, we solve this by checking for the `SIGCHLD` signal instead of `os.wait()`. Now I know why.



---

archive/issue_comments_425472.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nI thought of doing that as a solution, but then you start involving signal handling and basically reimplementing parts of the doctester.  I have another solution that's a bit ugly but simpler.\n\nIt would be nice if there were a sort of `multiprocessing.wait()` that could wait for any one `multiprocessing.Process` to finish (or maybe one out of a specific list thereof).  Since multiprocessing already tracks its child processes this could be done.  Maybe I'll propose it...",
    "created_at": "2019-03-15T17:12:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425472",
    "user": "https://github.com/embray"
}
```

<div id="comment:15" align="right">comment:15</div>

I thought of doing that as a solution, but then you start involving signal handling and basically reimplementing parts of the doctester.  I have another solution that's a bit ugly but simpler.

It would be nice if there were a sort of `multiprocessing.wait()` that could wait for any one `multiprocessing.Process` to finish (or maybe one out of a specific list thereof).  Since multiprocessing already tracks its child processes this could be done.  Maybe I'll propose it...



---

archive/issue_comments_425473.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1e5b1f56b37e1fb9abdc75c5e3540fc137c5024c\"><code>1e5b1f5</code></a></td><td><code>Trac #27490: Further fixes in use of os.wait()</code></td></tr></table>\n",
    "created_at": "2019-03-15T17:39:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425473",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1e5b1f56b37e1fb9abdc75c5e3540fc137c5024c"><code>1e5b1f5</code></a></td><td><code>Trac #27490: Further fixes in use of os.wait()</code></td></tr></table>




---

archive/issue_comments_425474.json:
```json
{
    "body": "Changed commit from **[`88771df`](https://github.com/sagemath/sagetrac-mirror/commit/88771dfbe0d6b90cf5574065d312d1e0a7f005af)** to **[`1e5b1f5`](https://github.com/sagemath/sagetrac-mirror/commit/1e5b1f56b37e1fb9abdc75c5e3540fc137c5024c)**",
    "created_at": "2019-03-15T17:39:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425474",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`88771df`](https://github.com/sagemath/sagetrac-mirror/commit/88771dfbe0d6b90cf5574065d312d1e0a7f005af)** to **[`1e5b1f5`](https://github.com/sagemath/sagetrac-mirror/commit/1e5b1f56b37e1fb9abdc75c5e3540fc137c5024c)**



---

archive/issue_comments_425475.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nOne can see how quickly more complex this *can* become.",
    "created_at": "2019-03-15T17:40:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425475",
    "user": "https://github.com/embray"
}
```

<div id="comment:17" align="right">comment:17</div>

One can see how quickly more complex this *can* become.



---

archive/issue_events_379351.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-15T17:40:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27490#event-379351"
}
```



---

archive/issue_events_379352.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-15T17:40:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27490#event-379352"
}
```



---

archive/issue_events_379353.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-15T17:58:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27490#event-379353"
}
```



---

archive/issue_events_379354.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-15T17:58:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27490#event-379354"
}
```



---

archive/issue_comments_425476.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nSetting back to positive review since Jeroen was okay with (or at least resigned to) the current approach.  I've tested the updated code several times with different numbers of processes and am satisfied with it for now.",
    "created_at": "2019-03-15T17:58:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425476",
    "user": "https://github.com/embray"
}
```

<div id="comment:18" align="right">comment:18</div>

Setting back to positive review since Jeroen was okay with (or at least resigned to) the current approach.  I've tested the updated code several times with different numbers of processes and am satisfied with it for now.



---

archive/issue_comments_425477.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nCan we move that abomination at least into a separate file",
    "created_at": "2019-03-15T18:00:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425477",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:19" align="right">comment:19</div>

Can we move that abomination at least into a separate file



---

archive/issue_events_379355.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-03-16T14:42:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27490#event-379355"
}
```



---

archive/issue_events_379356.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-03-16T14:42:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27490#event-379356"
}
```



---

archive/issue_events_379357.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-18T11:00:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27490#event-379357"
}
```



---

archive/issue_events_379358.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-18T11:00:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27490#event-379358"
}
```



---

archive/issue_comments_425478.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nWhich \"abomination\"?  I'm not necessarily going to do anything at your behest if you put it in such negative terms.",
    "created_at": "2019-03-18T11:00:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425478",
    "user": "https://github.com/embray"
}
```

<div id="comment:21" align="right">comment:21</div>

Which "abomination"?  I'm not necessarily going to do anything at your behest if you put it in such negative terms.



---

archive/issue_comments_425479.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\n(Which is not not say I necessarily think this is pretty as-is but it's still not even clear exactly what you're asking to move).",
    "created_at": "2019-03-18T11:32:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425479",
    "user": "https://github.com/embray"
}
```

<div id="comment:22" align="right">comment:22</div>

(Which is not not say I necessarily think this is pretty as-is but it's still not even clear exactly what you're asking to move).



---

archive/issue_comments_425480.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nIm asking you to move the parallel implementation of multiprocessing into a separate file, ideally with a small doctstring explaining what is going on here.",
    "created_at": "2019-03-18T16:28:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425480",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:23" align="right">comment:23</div>

Im asking you to move the parallel implementation of multiprocessing into a separate file, ideally with a small doctstring explaining what is going on here.



---

archive/issue_comments_425481.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nBut both versions? Just the one I added?",
    "created_at": "2019-03-19T08:51:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425481",
    "user": "https://github.com/embray"
}
```

<div id="comment:24" align="right">comment:24</div>

But both versions? Just the one I added?



---

archive/issue_comments_425482.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nAt least for now just the one you added in the else branch. Thanks.",
    "created_at": "2019-03-19T09:24:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425482",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:25" align="right">comment:25</div>

At least for now just the one you added in the else branch. Thanks.



---

archive/issue_comments_425483.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nOkay, I'll do that.",
    "created_at": "2019-03-19T10:22:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425483",
    "user": "https://github.com/embray"
}
```

<div id="comment:26" align="right">comment:26</div>

Okay, I'll do that.



---

archive/issue_comments_425484.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/78f89387636bbbe9b2b315e6ed801f3b4908b249\"><code>78f8938</code></a></td><td><code>Trac #27490: Moved the alternate build_many implementation into a</code></td></tr></table>\n",
    "created_at": "2019-03-19T11:12:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425484",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/78f89387636bbbe9b2b315e6ed801f3b4908b249"><code>78f8938</code></a></td><td><code>Trac #27490: Moved the alternate build_many implementation into a</code></td></tr></table>




---

archive/issue_comments_425485.json:
```json
{
    "body": "Changed commit from **[`1e5b1f5`](https://github.com/sagemath/sagetrac-mirror/commit/1e5b1f56b37e1fb9abdc75c5e3540fc137c5024c)** to **[`78f8938`](https://github.com/sagemath/sagetrac-mirror/commit/78f89387636bbbe9b2b315e6ed801f3b4908b249)**",
    "created_at": "2019-03-19T11:12:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425485",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1e5b1f5`](https://github.com/sagemath/sagetrac-mirror/commit/1e5b1f56b37e1fb9abdc75c5e3540fc137c5024c)** to **[`78f8938`](https://github.com/sagemath/sagetrac-mirror/commit/78f89387636bbbe9b2b315e6ed801f3b4908b249)**



---

archive/issue_comments_425486.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a35e4d05c1ee547d25a30c51c57cdfdf5a9aa7a\"><code>3a35e4d</code></a></td><td><code>fixup</code></td></tr></table>\n",
    "created_at": "2019-03-19T11:31:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425486",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a35e4d05c1ee547d25a30c51c57cdfdf5a9aa7a"><code>3a35e4d</code></a></td><td><code>fixup</code></td></tr></table>




---

archive/issue_comments_425487.json:
```json
{
    "body": "Changed commit from **[`78f8938`](https://github.com/sagemath/sagetrac-mirror/commit/78f89387636bbbe9b2b315e6ed801f3b4908b249)** to **[`3a35e4d`](https://github.com/sagemath/sagetrac-mirror/commit/3a35e4d05c1ee547d25a30c51c57cdfdf5a9aa7a)**",
    "created_at": "2019-03-19T11:31:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425487",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`78f8938`](https://github.com/sagemath/sagetrac-mirror/commit/78f89387636bbbe9b2b315e6ed801f3b4908b249)** to **[`3a35e4d`](https://github.com/sagemath/sagetrac-mirror/commit/3a35e4d05c1ee547d25a30c51c57cdfdf5a9aa7a)**



---

archive/issue_comments_425488.json:
```json
{
    "body": "Changed commit from **[`3a35e4d`](https://github.com/sagemath/sagetrac-mirror/commit/3a35e4d05c1ee547d25a30c51c57cdfdf5a9aa7a)** to **[`fe0e3ea`](https://github.com/sagemath/sagetrac-mirror/commit/fe0e3ea1a8d85d41047f9308db48912f1bdcffcd)**",
    "created_at": "2019-03-19T11:31:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425488",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3a35e4d`](https://github.com/sagemath/sagetrac-mirror/commit/3a35e4d05c1ee547d25a30c51c57cdfdf5a9aa7a)** to **[`fe0e3ea`](https://github.com/sagemath/sagetrac-mirror/commit/fe0e3ea1a8d85d41047f9308db48912f1bdcffcd)**



---

archive/issue_comments_425489.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fe0e3ea1a8d85d41047f9308db48912f1bdcffcd\"><code>fe0e3ea</code></a></td><td><code>Trac #27490: Moved the alternate build_many implementation into a</code></td></tr></table>\n",
    "created_at": "2019-03-19T11:31:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425489",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fe0e3ea1a8d85d41047f9308db48912f1bdcffcd"><code>fe0e3ea</code></a></td><td><code>Trac #27490: Moved the alternate build_many implementation into a</code></td></tr></table>




---

archive/issue_comments_425490.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\n(Just removed an unused import.)",
    "created_at": "2019-03-19T11:32:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425490",
    "user": "https://github.com/embray"
}
```

<div id="comment:30" align="right">comment:30</div>

(Just removed an unused import.)



---

archive/issue_events_379359.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-19T11:32:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27490#event-379359"
}
```



---

archive/issue_events_379360.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-19T11:32:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27490#event-379360"
}
```



---

archive/issue_events_379361.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-03-19T14:27:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27490#event-379361"
}
```



---

archive/issue_events_379362.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-03-19T14:27:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27490#event-379362"
}
```



---

archive/issue_comments_425491.json:
```json
{
    "body": "Changed branch from **[u/embray/ticket-27490](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/ticket-27490)** to **[`fe0e3ea`](https://github.com/sagemath/sagetrac-mirror/commit/fe0e3ea1a8d85d41047f9308db48912f1bdcffcd)**",
    "created_at": "2019-03-19T21:26:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425491",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/embray/ticket-27490](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/ticket-27490)** to **[`fe0e3ea`](https://github.com/sagemath/sagetrac-mirror/commit/fe0e3ea1a8d85d41047f9308db48912f1bdcffcd)**



---

archive/issue_events_379363.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-03-19T21:26:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27490#event-379363"
}
```



---

archive/issue_events_379364.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "593f669d66799704a9223630a5274d50eeeb93d2",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-03-19T21:26:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27490#event-379364"
}
```



---

archive/issue_comments_425492.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nFollowup at #27514",
    "created_at": "2019-03-19T21:28:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425492",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:33" align="right">comment:33</div>

Followup at #27514



---

archive/issue_comments_425493.json:
```json
{
    "body": "Changed commit from **[`fe0e3ea`](https://github.com/sagemath/sagetrac-mirror/commit/fe0e3ea1a8d85d41047f9308db48912f1bdcffcd)** to none",
    "created_at": "2019-03-19T21:28:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27490",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27490#issuecomment-425493",
    "user": "https://github.com/vbraun"
}
```

Changed commit from **[`fe0e3ea`](https://github.com/sagemath/sagetrac-mirror/commit/fe0e3ea1a8d85d41047f9308db48912f1bdcffcd)** to none
