# Issue 27000: Upgrade NumPy to 1.16.1

archive/issues_026763.json:
```json
{
    "body": "NumPy 1.16.0 was released on 2019-01-14, and NumPy 1.16.1 on 2019-02-01.\n\n- **Tarball**: https://files.pythonhosted.org/packages/2b/26/07472b0de91851b6656cbc86e2f0d5d3a3128e7580f23295ef58b6862d6c/numpy-1.16.1.zip\n\nFrom the [release announcement for NumPy 1.16.0](https://mail.python.org/pipermail/numpy-discussion/2019-January/079130.html):\n\n> This is the last NumPy release to support Python 2.7 and will be\n> maintained as a long term release with bug fixes until 2020.  This release\n> has seen a lot of refactoring and features many bug fixes, improved code\n> organization, and better cross platform compatibility. Not all of these\n> improvements will be visible to users, but they should help make\n> maintenance easier going forward. Highlights are\n\n>\n>    - Experimental support for overriding numpy functions in downstream projects.\n>    - The matmul function is now a ufunc and can be overridden using\n>    `__array_ufunc__`.\n>    - Improved support for the ARM, POWER, and SPARC architectures.\n>    - Improved support for AIX and PyPy.\n>    - Improved interoperation with ctypes.\n>    - Improved support for PEP 3118.\n\n\nFrom the [Release announcement for NumPy 1.16.1](https://mail.python.org/pipermail/numpy-discussion/2019-January/079157.html):\n\n> This release fixes bugs reported against the 1.16.0 release, and\n> also backports several enhancements from master that seem appropriate for a\n> release series that is the last to support Python 2.7. [...]\n\n>\n> If you are installing using pip, you may encounter a problem with older\n> installed versions of NumPy that pip did not delete becoming mixed with the\n> current version, resulting in an `ImportError`. That problem is\n> particularly common on Debian derived distributions due to a modified pip.\n> The fix is to make sure all previous NumPy versions installed by pip have\n> been removed. See [NumPy issue 12736](https://github.com/numpy/numpy/issues/12736)\n> for discussion of the issue. Note that previously this problem resulted in\n> an `AttributeError`.\n\n\nBoth release announcements indicate:\n\n> The wheels on PyPI are linked with OpenBLAS v0.3.4+, which should\n> fix the known threading issues found in previous OpenBLAS versions.\n> Downstream developers building this release should use Cython >= 0.29.2\n> and, if linking OpenBLAS, OpenBLAS > v0.3.4.\n\n\nSo this depends on the upgrade to OpenBLAS 0.3.5 (from 0.3.3) in #27020,\nand on the upgrade to Cython 0.29.2 in #27058.\n\nDebian developers warn us that NumPy 1.16 in Debian leads to\nsome deprecation warnings:\n\n```\nDeprecationWarning: np.asscalar(a) is deprecated since NumPy v1.16, use a.item() instead\n```\nThese are fixed by adding a patch to matplotlib in #26288.\n\n\nCC:  @antonio-rojas @kiwifb @slel @tobihan tmonteil\n\nKeywords: upgrade, numpy\n\nBranch/Commit: 0f3dab964e4da4926cc1cb371b3b2272663301aa\n\nReviewer: Dima Pasechnik\n\nAuthor: Jeroen Demeyer\n\nDependencies: #27223\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/27000\n\n",
    "closed_at": "2019-02-13T20:56:35Z",
    "created_at": "2019-01-02T14:47:56Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.7",
    "title": "Upgrade NumPy to 1.16.1",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27000",
    "user": "https://github.com/tobihan"
}
```
NumPy 1.16.0 was released on 2019-01-14, and NumPy 1.16.1 on 2019-02-01.

- **Tarball**: https://files.pythonhosted.org/packages/2b/26/07472b0de91851b6656cbc86e2f0d5d3a3128e7580f23295ef58b6862d6c/numpy-1.16.1.zip

From the [release announcement for NumPy 1.16.0](https://mail.python.org/pipermail/numpy-discussion/2019-January/079130.html):

> This is the last NumPy release to support Python 2.7 and will be
> maintained as a long term release with bug fixes until 2020.  This release
> has seen a lot of refactoring and features many bug fixes, improved code
> organization, and better cross platform compatibility. Not all of these
> improvements will be visible to users, but they should help make
> maintenance easier going forward. Highlights are

>
>    - Experimental support for overriding numpy functions in downstream projects.
>    - The matmul function is now a ufunc and can be overridden using
>    `__array_ufunc__`.
>    - Improved support for the ARM, POWER, and SPARC architectures.
>    - Improved support for AIX and PyPy.
>    - Improved interoperation with ctypes.
>    - Improved support for PEP 3118.


From the [Release announcement for NumPy 1.16.1](https://mail.python.org/pipermail/numpy-discussion/2019-January/079157.html):

> This release fixes bugs reported against the 1.16.0 release, and
> also backports several enhancements from master that seem appropriate for a
> release series that is the last to support Python 2.7. [...]

>
> If you are installing using pip, you may encounter a problem with older
> installed versions of NumPy that pip did not delete becoming mixed with the
> current version, resulting in an `ImportError`. That problem is
> particularly common on Debian derived distributions due to a modified pip.
> The fix is to make sure all previous NumPy versions installed by pip have
> been removed. See [NumPy issue 12736](https://github.com/numpy/numpy/issues/12736)
> for discussion of the issue. Note that previously this problem resulted in
> an `AttributeError`.


Both release announcements indicate:

> The wheels on PyPI are linked with OpenBLAS v0.3.4+, which should
> fix the known threading issues found in previous OpenBLAS versions.
> Downstream developers building this release should use Cython >= 0.29.2
> and, if linking OpenBLAS, OpenBLAS > v0.3.4.


So this depends on the upgrade to OpenBLAS 0.3.5 (from 0.3.3) in #27020,
and on the upgrade to Cython 0.29.2 in #27058.

Debian developers warn us that NumPy 1.16 in Debian leads to
some deprecation warnings:

```
DeprecationWarning: np.asscalar(a) is deprecated since NumPy v1.16, use a.item() instead
```
These are fixed by adding a patch to matplotlib in #26288.


CC:  @antonio-rojas @kiwifb @slel @tobihan tmonteil

Keywords: upgrade, numpy

Branch/Commit: 0f3dab964e4da4926cc1cb371b3b2272663301aa

Reviewer: Dima Pasechnik

Author: Jeroen Demeyer

Dependencies: #27223

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/27000





---

archive/issue_comments_400812.json:
```json
{
    "body": "Changing keywords from \"\" to \"upgrade, numpy\".",
    "created_at": "2019-01-08T14:34:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400812",
    "user": "https://github.com/slel"
}
```

Changing keywords from "" to "upgrade, numpy".



---

archive/issue_comments_400813.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,13 @@\n In Debian we have NumPy 1.16.0rc1 which leads to some deprecation warnings:\n \n+```\n DeprecationWarning: np.asscalar(a) is deprecated since NumPy v1.16, use a.item() instead\n+```\n \n-It would be nice if sagemath could update the package soon after the 1.16 release.\n+It would be nice if SageMath could update the package soon after the NumPy 1.16 release.\n+\n+Link:\n+- [NumPy 1.16.rc2 release announcement](http://numpy-discussion.10968.n7.nabble.com/NumPy-1-16-0rc2-released-td46599.html) (with link to downloads of wheels and source)\n \n Comment: 1\n \n``````\n",
    "created_at": "2019-01-08T14:34:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400813",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,13 @@
 In Debian we have NumPy 1.16.0rc1 which leads to some deprecation warnings:
 
+```
 DeprecationWarning: np.asscalar(a) is deprecated since NumPy v1.16, use a.item() instead
+```
 
-It would be nice if sagemath could update the package soon after the 1.16 release.
+It would be nice if SageMath could update the package soon after the NumPy 1.16 release.
+
+Link:
+- [NumPy 1.16.rc2 release announcement](http://numpy-discussion.10968.n7.nabble.com/NumPy-1-16-0rc2-released-td46599.html) (with link to downloads of wheels and source)
 
 Comment: 1
 
``````




---

archive/issue_comments_400814.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,14 @@\n+In Debian we have NumPy 1.16.0rc1 which leads to some deprecation warnings:\n \n+```\n+DeprecationWarning: np.asscalar(a) is deprecated since NumPy v1.16, use a.item() instead\n+```\n+\n+It would be nice if SageMath could update the package soon after the NumPy 1.16 release.\n+\n+\n+- [NumPy 1.16.0rc2 release announcement](http://numpy-discussion.10968.n7.nabble.com/NumPy-1-16-0rc2-released-td46599.html) (with link to downloads of wheels and source)\n+- **Tarball** for NumPy 1.16.0rc2: https://files.pythonhosted.org/packages/23/4c/0a3abafb4933c0f736797060c025c3d592a5083715136a079d2adb79c730/numpy-1.16.0rc2.zip\n \n Comment: 1\n \n``````\n",
    "created_at": "2019-01-08T14:36:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400814",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,14 @@
+In Debian we have NumPy 1.16.0rc1 which leads to some deprecation warnings:
 
+```
+DeprecationWarning: np.asscalar(a) is deprecated since NumPy v1.16, use a.item() instead
+```
+
+It would be nice if SageMath could update the package soon after the NumPy 1.16 release.
+
+
+- [NumPy 1.16.0rc2 release announcement](http://numpy-discussion.10968.n7.nabble.com/NumPy-1-16-0rc2-released-td46599.html) (with link to downloads of wheels and source)
+- **Tarball** for NumPy 1.16.0rc2: https://files.pythonhosted.org/packages/23/4c/0a3abafb4933c0f736797060c025c3d592a5083715136a079d2adb79c730/numpy-1.16.0rc2.zip
 
 Comment: 1
 
``````




---

archive/issue_comments_400815.json:
```json
{
    "body": "<a id='comment:5'></a>It seems most, if not all of these `DeprecationWarning`s are actually coming via matplotlib.  I don't even see any explict `np.asscalar()` calls in the Sage sources.",
    "created_at": "2019-01-09T14:53:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400815",
    "user": "https://github.com/embray"
}
```

<a id='comment:5'></a>It seems most, if not all of these `DeprecationWarning`s are actually coming via matplotlib.  I don't even see any explict `np.asscalar()` calls in the Sage sources.



---

archive/issue_comments_400816.json:
```json
{
    "body": "<a id='comment:6'></a>Upstream fix to matplotlib: https://github.com/matplotlib/matplotlib/pull/12478",
    "created_at": "2019-01-09T15:00:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400816",
    "user": "https://github.com/embray"
}
```

<a id='comment:6'></a>Upstream fix to matplotlib: https://github.com/matplotlib/matplotlib/pull/12478



---

archive/issue_comments_400817.json:
```json
{
    "body": "<a id='comment:7'></a>I'm getting this on Arch after updating to 1.16.0\n\n```\nsage -t /usr/lib/python2.7/site-packages/sage/misc/inline_fortran.py\n**********************************************************************\nFile \"/usr/lib/python2.7/site-packages/sage/misc/inline_fortran.py\", line 134, in sage.misc.inline_fortran._import_module_from_path._import_module_from_path_impl\nFailed example:\n    fortran(code, globals())\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/lib/python2.7/site-packages/sage/doctest/forker.py\", line 671, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1086, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.misc.inline_fortran._import_module_from_path._import_module_from_path_impl[1]>\", line 1, in <module>\n        fortran(code, globals())\n      File \"sage/misc/lazy_import.pyx\", line 354, in sage.misc.lazy_import.LazyImport.__call__ (build/cythonized/sage/misc/lazy_import.c:3684)\n        return self.get_object()(*args, **kwds)\n      File \"/usr/lib/python2.7/site-packages/sage/misc/inline_fortran.py\", line 96, in __call__\n        return self.eval(*args, **kwds)\n      File \"/usr/lib/python2.7/site-packages/sage/misc/inline_fortran.py\", line 191, in eval\n        with open(log) as fobj:\n    IOError: [Errno 2] No such file or directory: 'fortran_module.log'\n**********************************************************************\n```",
    "created_at": "2019-01-14T17:08:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400817",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:7'></a>I'm getting this on Arch after updating to 1.16.0

```
sage -t /usr/lib/python2.7/site-packages/sage/misc/inline_fortran.py
**********************************************************************
File "/usr/lib/python2.7/site-packages/sage/misc/inline_fortran.py", line 134, in sage.misc.inline_fortran._import_module_from_path._import_module_from_path_impl
Failed example:
    fortran(code, globals())
Exception raised:
    Traceback (most recent call last):
      File "/usr/lib/python2.7/site-packages/sage/doctest/forker.py", line 671, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/lib/python2.7/site-packages/sage/doctest/forker.py", line 1086, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.misc.inline_fortran._import_module_from_path._import_module_from_path_impl[1]>", line 1, in <module>
        fortran(code, globals())
      File "sage/misc/lazy_import.pyx", line 354, in sage.misc.lazy_import.LazyImport.__call__ (build/cythonized/sage/misc/lazy_import.c:3684)
        return self.get_object()(*args, **kwds)
      File "/usr/lib/python2.7/site-packages/sage/misc/inline_fortran.py", line 96, in __call__
        return self.eval(*args, **kwds)
      File "/usr/lib/python2.7/site-packages/sage/misc/inline_fortran.py", line 191, in eval
        with open(log) as fobj:
    IOError: [Errno 2] No such file or directory: 'fortran_module.log'
**********************************************************************
```



---

archive/issue_comments_400818.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,46 @@\n+Numpy 1.16.0 was released on 2019-01-14.\n+\n+- [Release announcement](https://mail.python.org/pipermail/numpy-discussion/2019-January/079130.html)\n+- Tarball: https://files.pythonhosted.org/packages/04/b6/d7faa70a3e3eac39f943cc6a6a64ce378259677de516bd899dd9eb8f9b32/numpy-1.16.0.zip\n+\n+From the release announcement:\n+\n+> On behalf of the NumPy team I'm pleased to announce the release of NumPy\n+> 1.16.0. This is the last NumPy release to support Python 2.7 and will be\n+> maintained as a long term release with bug fixes until 2020.  This release\n+> has seen a lot of refactoring and features many bug fixes, improved code\n+> organization, and better cross platform compatibility. Not all of these\n+> improvements will be visible to users, but they should help make\n+> maintenance easier going forward. Highlights are\n+\n+>\n+>    - Experimental support for overriding numpy functions in downstream projects.\n+>    - The matmul function is now a ufunc and can be overridden using\n+>    __array_ufunc__.\n+>    - Improved support for the ARM, POWER, and SPARC architectures.\n+>    - Improved support for AIX and PyPy.\n+>    - Improved interoperation with ctypes.\n+>    - Improved support for PEP 3118.\n+ \n+>\n+> The supported Python versions are 2.7 and 3.5-3.7, support for 3.4 has been\n+> dropped. The wheels on PyPI are linked with OpenBLAS v0.3.4+,  which should\n+> fix the known threading issues found in previous OpenBLAS versions.\n+> Downstream developers building this release should use Cython >= 0.29.2\n+> and, if linking OpenBLAS, OpenBLAS > v0.3.4.\n+\n+\n+So this depends on the upgrade to OpenBlas 0.3.5 (from 0.3.3) in #27020,\n+and on the upgrade to Cython 0.29.2 in #27058.\n+\n+Debian developers warn us that NumPy 1.16.0rc1 in Debian leads to\n+some deprecation warnings:\n+\n+```\n+DeprecationWarning: np.asscalar(a) is deprecated since NumPy v1.16, use a.item() instead\n+```\n+\n+It would be nice if SageMath could update the package soon after the NumPy 1.16 release.\n \n \n Comment: 1\n``````\n",
    "created_at": "2019-01-15T01:04:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400818",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,46 @@
+Numpy 1.16.0 was released on 2019-01-14.
+
+- [Release announcement](https://mail.python.org/pipermail/numpy-discussion/2019-January/079130.html)
+- Tarball: https://files.pythonhosted.org/packages/04/b6/d7faa70a3e3eac39f943cc6a6a64ce378259677de516bd899dd9eb8f9b32/numpy-1.16.0.zip
+
+From the release announcement:
+
+> On behalf of the NumPy team I'm pleased to announce the release of NumPy
+> 1.16.0. This is the last NumPy release to support Python 2.7 and will be
+> maintained as a long term release with bug fixes until 2020.  This release
+> has seen a lot of refactoring and features many bug fixes, improved code
+> organization, and better cross platform compatibility. Not all of these
+> improvements will be visible to users, but they should help make
+> maintenance easier going forward. Highlights are
+
+>
+>    - Experimental support for overriding numpy functions in downstream projects.
+>    - The matmul function is now a ufunc and can be overridden using
+>    __array_ufunc__.
+>    - Improved support for the ARM, POWER, and SPARC architectures.
+>    - Improved support for AIX and PyPy.
+>    - Improved interoperation with ctypes.
+>    - Improved support for PEP 3118.
+ 
+>
+> The supported Python versions are 2.7 and 3.5-3.7, support for 3.4 has been
+> dropped. The wheels on PyPI are linked with OpenBLAS v0.3.4+,  which should
+> fix the known threading issues found in previous OpenBLAS versions.
+> Downstream developers building this release should use Cython >= 0.29.2
+> and, if linking OpenBLAS, OpenBLAS > v0.3.4.
+
+
+So this depends on the upgrade to OpenBlas 0.3.5 (from 0.3.3) in #27020,
+and on the upgrade to Cython 0.29.2 in #27058.
+
+Debian developers warn us that NumPy 1.16.0rc1 in Debian leads to
+some deprecation warnings:
+
+```
+DeprecationWarning: np.asscalar(a) is deprecated since NumPy v1.16, use a.item() instead
+```
+
+It would be nice if SageMath could update the package soon after the NumPy 1.16 release.
 
 
 Comment: 1
``````




---

archive/issue_comments_400819.json:
```json
{
    "body": "Changing type from defect to enhancement.",
    "created_at": "2019-01-15T01:04:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400819",
    "user": "https://github.com/slel"
}
```

Changing type from defect to enhancement.



---

archive/issue_comments_400820.json:
```json
{
    "body": "<a id='comment:8'></a>Editing ticket description now that NumPy 1.16.0 is released.\n\nThe release announcement for NumPy 1.16.0 warns:\n\n> Downstream developers building this release should use Cython >= 0.29.2\n> and, if linking OpenBLAS, OpenBLAS > v0.3.4.\n\n\nSo this depends on the upgrade to OpenBLAS 0.3.5 (from 0.3.3) in #27020,\nand on the upgrade to Cython 0.29.2 in #27058.",
    "created_at": "2019-01-15T01:04:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400820",
    "user": "https://github.com/slel"
}
```

<a id='comment:8'></a>Editing ticket description now that NumPy 1.16.0 is released.

The release announcement for NumPy 1.16.0 warns:

> Downstream developers building this release should use Cython >= 0.29.2
> and, if linking OpenBLAS, OpenBLAS > v0.3.4.


So this depends on the upgrade to OpenBLAS 0.3.5 (from 0.3.3) in #27020,
and on the upgrade to Cython 0.29.2 in #27058.



---

archive/issue_comments_400821.json:
```json
{
    "body": "<a id='comment:9'></a>I also get some problems with inline_fortran on Numpy 1.16 (this has been affecting the Debian port).  Haven't looked into it yet.",
    "created_at": "2019-01-15T14:12:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400821",
    "user": "https://github.com/embray"
}
```

<a id='comment:9'></a>I also get some problems with inline_fortran on Numpy 1.16 (this has been affecting the Debian port).  Haven't looked into it yet.



---

archive/issue_comments_400822.json:
```json
{
    "body": "<a id='comment:10'></a>The inline_fortran problem appears to be caused by a backwards-incompatibility introduced by https://github.com/numpy/numpy/pull/11937\n\nThis interface previously was [documented](https://docs.scipy.org/doc/numpy/f2py/usage.html#python-module-f2py2e) as calling f2py through a shell, which meant it was possible to pass constructs like shell redirections in the `extra_args` argument.  So that PR should have passed `shell=True` to `subprocess.check_output` in order to keep that functionality, but it did not (that, or formally deprecate it and also allow a way to capture standard I/O).",
    "created_at": "2019-01-15T14:42:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400822",
    "user": "https://github.com/embray"
}
```

<a id='comment:10'></a>The inline_fortran problem appears to be caused by a backwards-incompatibility introduced by https://github.com/numpy/numpy/pull/11937

This interface previously was [documented](https://docs.scipy.org/doc/numpy/f2py/usage.html#python-module-f2py2e) as calling f2py through a shell, which meant it was possible to pass constructs like shell redirections in the `extra_args` argument.  So that PR should have passed `shell=True` to `subprocess.check_output` in order to keep that functionality, but it did not (that, or formally deprecate it and also allow a way to capture standard I/O).



---

archive/issue_comments_400823.json:
```json
{
    "body": "<a id='comment:11'></a>#27061 offers a fix to the problem with `sage.misc.inline_fortran`.",
    "created_at": "2019-01-15T15:36:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400823",
    "user": "https://github.com/embray"
}
```

<a id='comment:11'></a>#27061 offers a fix to the problem with `sage.misc.inline_fortran`.



---

archive/issue_comments_400824.json:
```json
{
    "body": "<a id='comment:12'></a>Retarging tickets optimistically to the next milestone.  If you are responsible for this ticket (either its reporter or owner) and don't believe you are likely to complete this ticket before the next release (8.7) please retarget this ticket's milestone to sage-pending or sage-wishlist.",
    "created_at": "2019-01-15T18:15:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400824",
    "user": "https://github.com/embray"
}
```

<a id='comment:12'></a>Retarging tickets optimistically to the next milestone.  If you are responsible for this ticket (either its reporter or owner) and don't believe you are likely to complete this ticket before the next release (8.7) please retarget this ticket's milestone to sage-pending or sage-wishlist.



---

archive/issue_events_067001.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-01-15T18:15:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "milestone": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27000#event-67001"
}
```



---

archive/issue_comments_400825.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,47 @@\n+Numpy 1.16.0 was released on 2019-01-14.\n \n+- [Release announcement](https://mail.python.org/pipermail/numpy-discussion/2019-January/079130.html)\n+- Tarball: https://files.pythonhosted.org/packages/04/b6/d7faa70a3e3eac39f943cc6a6a64ce378259677de516bd899dd9eb8f9b32/numpy-1.16.0.zip\n+\n+From the release announcement:\n+\n+> On behalf of the NumPy team I'm pleased to announce the release of NumPy\n+> 1.16.0. This is the last NumPy release to support Python 2.7 and will be\n+> maintained as a long term release with bug fixes until 2020.  This release\n+> has seen a lot of refactoring and features many bug fixes, improved code\n+> organization, and better cross platform compatibility. Not all of these\n+> improvements will be visible to users, but they should help make\n+> maintenance easier going forward. Highlights are\n+\n+>\n+>    - Experimental support for overriding numpy functions in downstream projects.\n+>    - The matmul function is now a ufunc and can be overridden using\n+>    __array_ufunc__.\n+>    - Improved support for the ARM, POWER, and SPARC architectures.\n+>    - Improved support for AIX and PyPy.\n+>    - Improved interoperation with ctypes.\n+>    - Improved support for PEP 3118.\n+ \n+>\n+> The supported Python versions are 2.7 and 3.5-3.7, support for 3.4 has been\n+> dropped. The wheels on PyPI are linked with OpenBLAS v0.3.4+,  which should\n+> fix the known threading issues found in previous OpenBLAS versions.\n+> Downstream developers building this release should use Cython >= 0.29.2\n+> and, if linking OpenBLAS, OpenBLAS > v0.3.4.\n+\n+\n+So this depends on the upgrade to OpenBlas 0.3.5 (from 0.3.3) in #27020,\n+and on the upgrade to Cython 0.29.2 in #27058.\n+\n+Debian developers warn us that NumPy 1.16.0rc1 in Debian leads to\n+some deprecation warnings:\n+\n+```\n+DeprecationWarning: np.asscalar(a) is deprecated since NumPy v1.16, use a.item() instead\n+```\n+These are fixed by adding a patch to matplotlib in #26288\n+\n+It would be nice if SageMath could update the package soon after the NumPy 1.16 release.\n \n Comment: 1\n \n``````\n",
    "created_at": "2019-01-28T12:16:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400825",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,47 @@
+Numpy 1.16.0 was released on 2019-01-14.
 
+- [Release announcement](https://mail.python.org/pipermail/numpy-discussion/2019-January/079130.html)
+- Tarball: https://files.pythonhosted.org/packages/04/b6/d7faa70a3e3eac39f943cc6a6a64ce378259677de516bd899dd9eb8f9b32/numpy-1.16.0.zip
+
+From the release announcement:
+
+> On behalf of the NumPy team I'm pleased to announce the release of NumPy
+> 1.16.0. This is the last NumPy release to support Python 2.7 and will be
+> maintained as a long term release with bug fixes until 2020.  This release
+> has seen a lot of refactoring and features many bug fixes, improved code
+> organization, and better cross platform compatibility. Not all of these
+> improvements will be visible to users, but they should help make
+> maintenance easier going forward. Highlights are
+
+>
+>    - Experimental support for overriding numpy functions in downstream projects.
+>    - The matmul function is now a ufunc and can be overridden using
+>    __array_ufunc__.
+>    - Improved support for the ARM, POWER, and SPARC architectures.
+>    - Improved support for AIX and PyPy.
+>    - Improved interoperation with ctypes.
+>    - Improved support for PEP 3118.
+ 
+>
+> The supported Python versions are 2.7 and 3.5-3.7, support for 3.4 has been
+> dropped. The wheels on PyPI are linked with OpenBLAS v0.3.4+,  which should
+> fix the known threading issues found in previous OpenBLAS versions.
+> Downstream developers building this release should use Cython >= 0.29.2
+> and, if linking OpenBLAS, OpenBLAS > v0.3.4.
+
+
+So this depends on the upgrade to OpenBlas 0.3.5 (from 0.3.3) in #27020,
+and on the upgrade to Cython 0.29.2 in #27058.
+
+Debian developers warn us that NumPy 1.16.0rc1 in Debian leads to
+some deprecation warnings:
+
+```
+DeprecationWarning: np.asscalar(a) is deprecated since NumPy v1.16, use a.item() instead
+```
+These are fixed by adding a patch to matplotlib in #26288
+
+It would be nice if SageMath could update the package soon after the NumPy 1.16 release.
 
 Comment: 1
 
``````




---

archive/issue_comments_400826.json:
```json
{
    "body": "<a id='comment:14'></a>Is there a branch to test this?",
    "created_at": "2019-01-28T12:47:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400826",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:14'></a>Is there a branch to test this?



---

archive/issue_comments_400827.json:
```json
{
    "body": "<a id='comment:16'></a>Is it compatible with scipy 1.2? It was released earlier, and given that scipy logs are full of `Using deprecated Numpy API` warnings, it seems that the real blocker to this would be a new scipy version.\n\n---\nNew commits:",
    "created_at": "2019-01-28T12:56:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400827",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:16'></a>Is it compatible with scipy 1.2? It was released earlier, and given that scipy logs are full of `Using deprecated Numpy API` warnings, it seems that the real blocker to this would be a new scipy version.

---
New commits:



---

archive/issue_comments_400828.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-01-28T16:03:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400828",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_400829.json:
```json
{
    "body": "<a id='comment:18'></a>Replying to [comment:16 dimpase]:\n> Is it compatible with scipy 1.2? It was released earlier, and given that scipy logs are full of `Using deprecated Numpy API` warnings, it seems that the real blocker to this would be a new scipy version.\n\n\nThere is a long discussion about that in https://github.com/cython/cython/issues/2498",
    "created_at": "2019-01-28T16:36:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400829",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:18'></a>Replying to [comment:16 dimpase]:
> Is it compatible with scipy 1.2? It was released earlier, and given that scipy logs are full of `Using deprecated Numpy API` warnings, it seems that the real blocker to this would be a new scipy version.


There is a long discussion about that in https://github.com/cython/cython/issues/2498



---

archive/issue_comments_400830.json:
```json
{
    "body": "<a id='comment:19'></a>anything stops us from going forward with this upgrade? it all seems to work, after matplotlib fix.",
    "created_at": "2019-01-28T17:45:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400830",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:19'></a>anything stops us from going forward with this upgrade? it all seems to work, after matplotlib fix.



---

archive/issue_comments_400831.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-01-28T17:48:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400831",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_400832.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-01-28T17:56:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400832",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_400833.json:
```json
{
    "body": "<a id='comment:21'></a>LGTM",
    "created_at": "2019-01-28T17:56:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400833",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:21'></a>LGTM



---

archive/issue_comments_400834.json:
```json
{
    "body": "<a id='comment:22'></a>Seems to conflict with matplotlib on OSX:\n\n```\nIgnoring indexes: https://pypi.org/simple\nCreated temporary directory: /private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-ephem-wheel-cache-kl7Hms\nCreated temporary directory: /private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-tracker-Za__6B\nCreated requirements tracker '/private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-tracker-Za__6B'\nCreated temporary directory: /private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-install-DJEDBz\nProcessing /Users/buildslave-sage/slave/sage_git/build/local/var/tmp/sage/build/matplotlib-2.2.3.p0/src\n  Created temporary directory: /private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-build-46rwMp\n  Added file:///Users/buildslave-sage/slave/sage_git/build/local/var/tmp/sage/build/matplotlib-2.2.3.p0/src to build tracker '/private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-tracker-Za__6B'\n  Running setup.py (path:/private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-build-46rwMp/setup.py) egg_info for package from file:///Users/buildslave-sage/slave/sage_git/build/local/var/tmp/sage/build/matplotlib-2.2.3.p0/src\n    Running command python setup.py egg_info\n    ============================================================================\n    Edit setup.cfg to change the build options\n    BUILDING MATPLOTLIB\n                matplotlib: yes [2.2.3]\n                    python: yes [2.7.15 (default, Jan 27 2019, 04:12:55)  [GCC\n                            4.2.1 Compatible Apple LLVM 10.0.0\n                            (clang-1000.11.45.5)]]\n                  platform: yes [darwin]\n    REQUIRED DEPENDENCIES AND EXTENSIONS\n    Traceback (most recent call last):\n      File \"<string>\", line 1, in <module>\n      File \"/private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-build-46rwMp/setup.py\", line 172, in <module>\n        result = package.check()\n      File \"setupext.py\", line 963, in check\n        import numpy\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/numpy/__init__.py\", line 142, in <module>\n        from . import core\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/numpy/core/__init__.py\", line 59, in <module>\n        from . import numeric\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/numpy/core/numeric.py\", line 3093, in <module>\n        from . import fromnumeric\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/numpy/core/fromnumeric.py\", line 17, in <module>\n        from . import _methods\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/numpy/core/_methods.py\", line 158, in <module>\n        _NDARRAY_ARRAY_FUNCTION = mu.ndarray.__array_function__\n    AttributeError: type object 'numpy.ndarray' has no attribute '__array_function__'\nCleaning up...\n  Removing source in /private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-build-46rwMp\nRemoved file:///Users/buildslave-sage/slave/sage_git/build/local/var/tmp/sage/build/matplotlib-2.2.3.p0/src from build tracker '/private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-tracker-Za__6B'\nRemoved build tracker '/private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-tracker-Za__6B'\nCommand \"python setup.py egg_info\" failed with error code 1 in /private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-build-46rwMp/\nException information:\nTraceback (most recent call last):\n  File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pip/_internal/cli/base_command.py\", line 143, in main\n    status = self.run(options, args)\n  File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pip/_internal/commands/install.py\", line 318, in run\n    resolver.resolve(requirement_set)\n  File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pip/_internal/resolve.py\", line 102, in resolve\n    self._resolve_one(requirement_set, req)\n  File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pip/_internal/resolve.py\", line 256, in _resolve_one\n    abstract_dist = self._get_abstract_dist_for(req_to_install)\n  File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pip/_internal/resolve.py\", line 209, in _get_abstract_dist_for\n    self.require_hashes\n  File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pip/_internal/operations/prepare.py\", line 298, in prepare_linked_requirement\n    abstract_dist.prep_for_dist(finder, self.build_isolation)\n  File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pip/_internal/operations/prepare.py\", line 126, in prep_for_dist\n    self.req.run_egg_info()\n  File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pip/_internal/req/req_install.py\", line 473, in run_egg_info\n    command_desc='python setup.py egg_info')\n  File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pip/_internal/utils/misc.py\", line 705, in call_subprocess\n    % (command_desc, proc.returncode, cwd))\nInstallationError: Command \"python setup.py egg_info\" failed with error code 1 in /private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-build-46rwMp/\nError: installing with pip2 failed\n********************************************************************************\nError installing matplotlib-2.2.3.p0\n********************************************************************************\nreal\t0m6.450s\nuser\t0m2.680s\nsys\t0m3.147s\n************************************************************************\nError installing package matplotlib-2.2.3.p0\n************************************************************************\n```",
    "created_at": "2019-02-02T14:59:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400834",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:22'></a>Seems to conflict with matplotlib on OSX:

```
Ignoring indexes: https://pypi.org/simple
Created temporary directory: /private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-ephem-wheel-cache-kl7Hms
Created temporary directory: /private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-tracker-Za__6B
Created requirements tracker '/private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-tracker-Za__6B'
Created temporary directory: /private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-install-DJEDBz
Processing /Users/buildslave-sage/slave/sage_git/build/local/var/tmp/sage/build/matplotlib-2.2.3.p0/src
  Created temporary directory: /private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-build-46rwMp
  Added file:///Users/buildslave-sage/slave/sage_git/build/local/var/tmp/sage/build/matplotlib-2.2.3.p0/src to build tracker '/private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-tracker-Za__6B'
  Running setup.py (path:/private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-build-46rwMp/setup.py) egg_info for package from file:///Users/buildslave-sage/slave/sage_git/build/local/var/tmp/sage/build/matplotlib-2.2.3.p0/src
    Running command python setup.py egg_info
    ============================================================================
    Edit setup.cfg to change the build options
    BUILDING MATPLOTLIB
                matplotlib: yes [2.2.3]
                    python: yes [2.7.15 (default, Jan 27 2019, 04:12:55)  [GCC
                            4.2.1 Compatible Apple LLVM 10.0.0
                            (clang-1000.11.45.5)]]
                  platform: yes [darwin]
    REQUIRED DEPENDENCIES AND EXTENSIONS
    Traceback (most recent call last):
      File "<string>", line 1, in <module>
      File "/private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-build-46rwMp/setup.py", line 172, in <module>
        result = package.check()
      File "setupext.py", line 963, in check
        import numpy
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/numpy/__init__.py", line 142, in <module>
        from . import core
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/numpy/core/__init__.py", line 59, in <module>
        from . import numeric
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/numpy/core/numeric.py", line 3093, in <module>
        from . import fromnumeric
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/numpy/core/fromnumeric.py", line 17, in <module>
        from . import _methods
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/numpy/core/_methods.py", line 158, in <module>
        _NDARRAY_ARRAY_FUNCTION = mu.ndarray.__array_function__
    AttributeError: type object 'numpy.ndarray' has no attribute '__array_function__'
Cleaning up...
  Removing source in /private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-build-46rwMp
Removed file:///Users/buildslave-sage/slave/sage_git/build/local/var/tmp/sage/build/matplotlib-2.2.3.p0/src from build tracker '/private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-tracker-Za__6B'
Removed build tracker '/private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-tracker-Za__6B'
Command "python setup.py egg_info" failed with error code 1 in /private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-build-46rwMp/
Exception information:
Traceback (most recent call last):
  File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pip/_internal/cli/base_command.py", line 143, in main
    status = self.run(options, args)
  File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pip/_internal/commands/install.py", line 318, in run
    resolver.resolve(requirement_set)
  File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pip/_internal/resolve.py", line 102, in resolve
    self._resolve_one(requirement_set, req)
  File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pip/_internal/resolve.py", line 256, in _resolve_one
    abstract_dist = self._get_abstract_dist_for(req_to_install)
  File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pip/_internal/resolve.py", line 209, in _get_abstract_dist_for
    self.require_hashes
  File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pip/_internal/operations/prepare.py", line 298, in prepare_linked_requirement
    abstract_dist.prep_for_dist(finder, self.build_isolation)
  File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pip/_internal/operations/prepare.py", line 126, in prep_for_dist
    self.req.run_egg_info()
  File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pip/_internal/req/req_install.py", line 473, in run_egg_info
    command_desc='python setup.py egg_info')
  File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pip/_internal/utils/misc.py", line 705, in call_subprocess
    % (command_desc, proc.returncode, cwd))
InstallationError: Command "python setup.py egg_info" failed with error code 1 in /private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-build-46rwMp/
Error: installing with pip2 failed
********************************************************************************
Error installing matplotlib-2.2.3.p0
********************************************************************************
real	0m6.450s
user	0m2.680s
sys	0m3.147s
************************************************************************
Error installing package matplotlib-2.2.3.p0
************************************************************************
```



---

archive/issue_comments_400835.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2019-02-02T14:59:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400835",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_400836.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-02-04T08:42:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400836",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_400837.json:
```json
{
    "body": "<a id='comment:25'></a>1.16.1 is out, no test failures (on Arch)",
    "created_at": "2019-02-04T11:48:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400837",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:25'></a>1.16.1 is out, no test failures (on Arch)



---

archive/issue_comments_400838.json:
```json
{
    "body": "<a id='comment:26'></a>What OSX version do you get that error on?",
    "created_at": "2019-02-04T11:53:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400838",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:26'></a>What OSX version do you get that error on?



---

archive/issue_comments_400839.json:
```json
{
    "body": "<a id='comment:27'></a>latest (mojave)",
    "created_at": "2019-02-04T19:10:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400839",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:27'></a>latest (mojave)



---

archive/issue_comments_400840.json:
```json
{
    "body": "<a id='comment:28'></a>\n```\nAttributeError: type object 'numpy.ndarray' has no attribute '__array_function__'\nCleaning up...\n```\nseems to tell one that the error was during the build of numpy.\nBring on da log!",
    "created_at": "2019-02-04T19:33:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400840",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:28'></a>
```
AttributeError: type object 'numpy.ndarray' has no attribute '__array_function__'
Cleaning up...
```
seems to tell one that the error was during the build of numpy.
Bring on da log!



---

archive/issue_comments_400841.json:
```json
{
    "body": "<a id='comment:29'></a>The scipy build fails similarly:\n\n```\nInstalling scipy-1.2.0\nTraceback (most recent call last):\n  File \"setup.py\", line 492, in <module>\n    setup_package()\n  File \"setup.py\", line 424, in setup_package\n    import numpy\n  File \"/Users/jdemeyer/sage/local/lib/python2.7/site-packages/numpy/__init__.py\", line 142, in <module>\n    from . import core\n  File \"/Users/jdemeyer/sage/local/lib/python2.7/site-packages/numpy/core/__init__.py\", line 59, in <module>\n    from . import numeric\n  File \"/Users/jdemeyer/sage/local/lib/python2.7/site-packages/numpy/core/numeric.py\", line 3093, in <module>\n    from . import fromnumeric\n  File \"/Users/jdemeyer/sage/local/lib/python2.7/site-packages/numpy/core/fromnumeric.py\", line 17, in <module>\n    from . import _methods\n  File \"/Users/jdemeyer/sage/local/lib/python2.7/site-packages/numpy/core/_methods.py\", line 158, in <module>\n    _NDARRAY_ARRAY_FUNCTION = mu.ndarray.__array_function__\nAttributeError: type object 'numpy.ndarray' has no attribute '__array_function__'\nError: could not determine package name\n********************************************************************************\n```",
    "created_at": "2019-02-06T10:47:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400841",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:29'></a>The scipy build fails similarly:

```
Installing scipy-1.2.0
Traceback (most recent call last):
  File "setup.py", line 492, in <module>
    setup_package()
  File "setup.py", line 424, in setup_package
    import numpy
  File "/Users/jdemeyer/sage/local/lib/python2.7/site-packages/numpy/__init__.py", line 142, in <module>
    from . import core
  File "/Users/jdemeyer/sage/local/lib/python2.7/site-packages/numpy/core/__init__.py", line 59, in <module>
    from . import numeric
  File "/Users/jdemeyer/sage/local/lib/python2.7/site-packages/numpy/core/numeric.py", line 3093, in <module>
    from . import fromnumeric
  File "/Users/jdemeyer/sage/local/lib/python2.7/site-packages/numpy/core/fromnumeric.py", line 17, in <module>
    from . import _methods
  File "/Users/jdemeyer/sage/local/lib/python2.7/site-packages/numpy/core/_methods.py", line 158, in <module>
    _NDARRAY_ARRAY_FUNCTION = mu.ndarray.__array_function__
AttributeError: type object 'numpy.ndarray' has no attribute '__array_function__'
Error: could not determine package name
********************************************************************************
```



---

archive/issue_comments_400842.json:
```json
{
    "body": "<a id='comment:30'></a>this seems to be an NumPy/pip (?) problem: https://github.com/numpy/numpy/issues/12736",
    "created_at": "2019-02-06T10:54:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400842",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:30'></a>this seems to be an NumPy/pip (?) problem: https://github.com/numpy/numpy/issues/12736



---

archive/issue_comments_400843.json:
```json
{
    "body": "<a id='comment:31'></a>We should upgrade to 1.16.1, where this bug is apparently fixed\nby https://github.com/numpy/numpy/pull/12891\n\nhttps://github.com/numpy/numpy/releases/tag/v1.16.1",
    "created_at": "2019-02-06T11:01:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400843",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:31'></a>We should upgrade to 1.16.1, where this bug is apparently fixed
by https://github.com/numpy/numpy/pull/12891

https://github.com/numpy/numpy/releases/tag/v1.16.1



---

archive/issue_comments_400844.json:
```json
{
    "body": "<a id='comment:33'></a>Replying to [comment:31 dimpase]:\n> We should upgrade to 1.16.1, where this bug is apparently fixed\n> by https://github.com/numpy/numpy/pull/12891\n\n\nThere is nothing \"fixed\". The only thing that changed is a better error message. Apparently we're not properly deleting old versions of numpy.",
    "created_at": "2019-02-08T08:49:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400844",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:33'></a>Replying to [comment:31 dimpase]:
> We should upgrade to 1.16.1, where this bug is apparently fixed
> by https://github.com/numpy/numpy/pull/12891


There is nothing "fixed". The only thing that changed is a better error message. Apparently we're not properly deleting old versions of numpy.



---

archive/issue_comments_400845.json:
```json
{
    "body": "<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-02-08T08:56:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400845",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_400846.json:
```json
{
    "body": "<a id='comment:36'></a>Adding a `spkg-legacy-uninstall` script should fix things.",
    "created_at": "2019-02-08T08:57:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400846",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:36'></a>Adding a `spkg-legacy-uninstall` script should fix things.



---

archive/issue_comments_400847.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-02-08T08:58:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400847",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_400848.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,47 @@\n+Numpy 1.16.0 was released on 2019-01-14.\n \n+- [Release announcement](https://mail.python.org/pipermail/numpy-discussion/2019-January/079130.html)\n+- Tarball: https://files.pythonhosted.org/packages/2b/26/07472b0de91851b6656cbc86e2f0d5d3a3128e7580f23295ef58b6862d6c/numpy-1.16.1.zip\n+\n+From the release announcement:\n+\n+> On behalf of the NumPy team I'm pleased to announce the release of NumPy\n+> 1.16.0. This is the last NumPy release to support Python 2.7 and will be\n+> maintained as a long term release with bug fixes until 2020.  This release\n+> has seen a lot of refactoring and features many bug fixes, improved code\n+> organization, and better cross platform compatibility. Not all of these\n+> improvements will be visible to users, but they should help make\n+> maintenance easier going forward. Highlights are\n+\n+>\n+>    - Experimental support for overriding numpy functions in downstream projects.\n+>    - The matmul function is now a ufunc and can be overridden using\n+>    __array_ufunc__.\n+>    - Improved support for the ARM, POWER, and SPARC architectures.\n+>    - Improved support for AIX and PyPy.\n+>    - Improved interoperation with ctypes.\n+>    - Improved support for PEP 3118.\n+ \n+>\n+> The supported Python versions are 2.7 and 3.5-3.7, support for 3.4 has been\n+> dropped. The wheels on PyPI are linked with OpenBLAS v0.3.4+,  which should\n+> fix the known threading issues found in previous OpenBLAS versions.\n+> Downstream developers building this release should use Cython >= 0.29.2\n+> and, if linking OpenBLAS, OpenBLAS > v0.3.4.\n+\n+\n+So this depends on the upgrade to OpenBlas 0.3.5 (from 0.3.3) in #27020,\n+and on the upgrade to Cython 0.29.2 in #27058.\n+\n+Debian developers warn us that NumPy 1.16 in Debian leads to\n+some deprecation warnings:\n+\n+```\n+DeprecationWarning: np.asscalar(a) is deprecated since NumPy v1.16, use a.item() instead\n+```\n+These are fixed by adding a patch to matplotlib in #26288\n+\n+It would be nice if SageMath could update the package soon after the NumPy 1.16 release.\n \n Comment: 1\n \n``````\n",
    "created_at": "2019-02-08T08:59:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400848",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,47 @@
+Numpy 1.16.0 was released on 2019-01-14.
 
+- [Release announcement](https://mail.python.org/pipermail/numpy-discussion/2019-January/079130.html)
+- Tarball: https://files.pythonhosted.org/packages/2b/26/07472b0de91851b6656cbc86e2f0d5d3a3128e7580f23295ef58b6862d6c/numpy-1.16.1.zip
+
+From the release announcement:
+
+> On behalf of the NumPy team I'm pleased to announce the release of NumPy
+> 1.16.0. This is the last NumPy release to support Python 2.7 and will be
+> maintained as a long term release with bug fixes until 2020.  This release
+> has seen a lot of refactoring and features many bug fixes, improved code
+> organization, and better cross platform compatibility. Not all of these
+> improvements will be visible to users, but they should help make
+> maintenance easier going forward. Highlights are
+
+>
+>    - Experimental support for overriding numpy functions in downstream projects.
+>    - The matmul function is now a ufunc and can be overridden using
+>    __array_ufunc__.
+>    - Improved support for the ARM, POWER, and SPARC architectures.
+>    - Improved support for AIX and PyPy.
+>    - Improved interoperation with ctypes.
+>    - Improved support for PEP 3118.
+ 
+>
+> The supported Python versions are 2.7 and 3.5-3.7, support for 3.4 has been
+> dropped. The wheels on PyPI are linked with OpenBLAS v0.3.4+,  which should
+> fix the known threading issues found in previous OpenBLAS versions.
+> Downstream developers building this release should use Cython >= 0.29.2
+> and, if linking OpenBLAS, OpenBLAS > v0.3.4.
+
+
+So this depends on the upgrade to OpenBlas 0.3.5 (from 0.3.3) in #27020,
+and on the upgrade to Cython 0.29.2 in #27058.
+
+Debian developers warn us that NumPy 1.16 in Debian leads to
+some deprecation warnings:
+
+```
+DeprecationWarning: np.asscalar(a) is deprecated since NumPy v1.16, use a.item() instead
+```
+These are fixed by adding a patch to matplotlib in #26288
+
+It would be nice if SageMath could update the package soon after the NumPy 1.16 release.
 
 Comment: 1
 
``````




---

archive/issue_comments_400849.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,61 @@\n+NumPy 1.16.0 was released on 2019-01-14, and NumPy 1.16.1 on 2019-02-01.\n+\n+- **Tarball**: https://files.pythonhosted.org/packages/2b/26/07472b0de91851b6656cbc86e2f0d5d3a3128e7580f23295ef58b6862d6c/numpy-1.16.1.zip\n+\n+From the [release announcement for NumPy 1.16.0](https://mail.python.org/pipermail/numpy-discussion/2019-January/079130.html):\n+\n+> This is the last NumPy release to support Python 2.7 and will be\n+> maintained as a long term release with bug fixes until 2020.  This release\n+> has seen a lot of refactoring and features many bug fixes, improved code\n+> organization, and better cross platform compatibility. Not all of these\n+> improvements will be visible to users, but they should help make\n+> maintenance easier going forward. Highlights are\n+\n+>\n+>    - Experimental support for overriding numpy functions in downstream projects.\n+>    - The matmul function is now a ufunc and can be overridden using\n+>    `__array_ufunc__`.\n+>    - Improved support for the ARM, POWER, and SPARC architectures.\n+>    - Improved support for AIX and PyPy.\n+>    - Improved interoperation with ctypes.\n+>    - Improved support for PEP 3118.\n+\n+\n+From the [Release announcement for NumPy 1.16.1](https://mail.python.org/pipermail/numpy-discussion/2019-January/079157.html):\n+\n+> This release fixes bugs reported against the 1.16.0 release, and\n+> also backports several enhancements from master that seem appropriate for a\n+> release series that is the last to support Python 2.7. [...]\n+\n+>\n+> If you are installing using pip, you may encounter a problem with older\n+> installed versions of NumPy that pip did not delete becoming mixed with the\n+> current version, resulting in an `ImportError`. That problem is\n+> particularly common on Debian derived distributions due to a modified pip.\n+> The fix is to make sure all previous NumPy versions installed by pip have\n+> been removed. See [NumPy issue 12736](https://github.com/numpy/numpy/issues/12736)\n+> for discussion of the issue. Note that previously this problem resulted in\n+> an `AttributeError`.\n+\n+\n+Both release announcements indicate:\n+\n+> The wheels on PyPI are linked with OpenBLAS v0.3.4+, which should\n+> fix the known threading issues found in previous OpenBLAS versions.\n+> Downstream developers building this release should use Cython >= 0.29.2\n+> and, if linking OpenBLAS, OpenBLAS > v0.3.4.\n+\n+\n+So this depends on the upgrade to OpenBLAS 0.3.5 (from 0.3.3) in #27020,\n+and on the upgrade to Cython 0.29.2 in #27058.\n+\n+Debian developers warn us that NumPy 1.16 in Debian leads to\n+some deprecation warnings:\n+\n+```\n+DeprecationWarning: np.asscalar(a) is deprecated since NumPy v1.16, use a.item() instead\n+```\n+These are fixed by adding a patch to matplotlib in #26288.\n \n \n Comment: 1\n``````\n",
    "created_at": "2019-02-08T10:32:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400849",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,61 @@
+NumPy 1.16.0 was released on 2019-01-14, and NumPy 1.16.1 on 2019-02-01.
+
+- **Tarball**: https://files.pythonhosted.org/packages/2b/26/07472b0de91851b6656cbc86e2f0d5d3a3128e7580f23295ef58b6862d6c/numpy-1.16.1.zip
+
+From the [release announcement for NumPy 1.16.0](https://mail.python.org/pipermail/numpy-discussion/2019-January/079130.html):
+
+> This is the last NumPy release to support Python 2.7 and will be
+> maintained as a long term release with bug fixes until 2020.  This release
+> has seen a lot of refactoring and features many bug fixes, improved code
+> organization, and better cross platform compatibility. Not all of these
+> improvements will be visible to users, but they should help make
+> maintenance easier going forward. Highlights are
+
+>
+>    - Experimental support for overriding numpy functions in downstream projects.
+>    - The matmul function is now a ufunc and can be overridden using
+>    `__array_ufunc__`.
+>    - Improved support for the ARM, POWER, and SPARC architectures.
+>    - Improved support for AIX and PyPy.
+>    - Improved interoperation with ctypes.
+>    - Improved support for PEP 3118.
+
+
+From the [Release announcement for NumPy 1.16.1](https://mail.python.org/pipermail/numpy-discussion/2019-January/079157.html):
+
+> This release fixes bugs reported against the 1.16.0 release, and
+> also backports several enhancements from master that seem appropriate for a
+> release series that is the last to support Python 2.7. [...]
+
+>
+> If you are installing using pip, you may encounter a problem with older
+> installed versions of NumPy that pip did not delete becoming mixed with the
+> current version, resulting in an `ImportError`. That problem is
+> particularly common on Debian derived distributions due to a modified pip.
+> The fix is to make sure all previous NumPy versions installed by pip have
+> been removed. See [NumPy issue 12736](https://github.com/numpy/numpy/issues/12736)
+> for discussion of the issue. Note that previously this problem resulted in
+> an `AttributeError`.
+
+
+Both release announcements indicate:
+
+> The wheels on PyPI are linked with OpenBLAS v0.3.4+, which should
+> fix the known threading issues found in previous OpenBLAS versions.
+> Downstream developers building this release should use Cython >= 0.29.2
+> and, if linking OpenBLAS, OpenBLAS > v0.3.4.
+
+
+So this depends on the upgrade to OpenBLAS 0.3.5 (from 0.3.3) in #27020,
+and on the upgrade to Cython 0.29.2 in #27058.
+
+Debian developers warn us that NumPy 1.16 in Debian leads to
+some deprecation warnings:
+
+```
+DeprecationWarning: np.asscalar(a) is deprecated since NumPy v1.16, use a.item() instead
+```
+These are fixed by adding a patch to matplotlib in #26288.
 
 
 Comment: 1
``````




---

archive/issue_comments_400850.json:
```json
{
    "body": "<a id='comment:40'></a>OK, looks good.",
    "created_at": "2019-02-11T00:56:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400850",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:40'></a>OK, looks good.



---

archive/issue_comments_400851.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-02-11T00:56:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400851",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_067002.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-02-13T20:56:35Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27000#event-67002"
}
```



---

archive/issue_comments_400852.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-02-13T20:56:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27000#issuecomment-400852",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
