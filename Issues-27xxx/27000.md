# Issue 27000: Upgrade NumPy to 1.16.1

archive/issues_026763.json:
```json
{
    "assignees": [],
    "body": "NumPy 1.16.0 was released on 2019-01-14, and NumPy 1.16.1 on 2019-02-01.\n\n- **Tarball**: https://files.pythonhosted.org/packages/2b/26/07472b0de91851b6656cbc86e2f0d5d3a3128e7580f23295ef58b6862d6c/numpy-1.16.1.zip\n\nFrom the [release announcement for NumPy 1.16.0](https://mail.python.org/pipermail/numpy-discussion/2019-January/079130.html):\n\n> This is the last NumPy release to support Python 2.7 and will be\n> maintained as a long term release with bug fixes until 2020.  This release\n> has seen a lot of refactoring and features many bug fixes, improved code\n> organization, and better cross platform compatibility. Not all of these\n> improvements will be visible to users, but they should help make\n> maintenance easier going forward. Highlights are\n\n>\n>- Experimental support for overriding numpy functions in downstream projects.\n>- The matmul function is now a ufunc and can be overridden using\n>    `__array_ufunc__`.\n>- Improved support for the ARM, POWER, and SPARC architectures.\n>- Improved support for AIX and PyPy.\n>- Improved interoperation with ctypes.\n>- Improved support for PEP 3118.\n\nFrom the [Release announcement for NumPy 1.16.1](https://mail.python.org/pipermail/numpy-discussion/2019-January/079157.html):\n\n> This release fixes bugs reported against the 1.16.0 release, and\n> also backports several enhancements from master that seem appropriate for a\n> release series that is the last to support Python 2.7. [...]\n\n>\n> If you are installing using pip, you may encounter a problem with older\n> installed versions of NumPy that pip did not delete becoming mixed with the\n> current version, resulting in an `ImportError`. That problem is\n> particularly common on Debian derived distributions due to a modified pip.\n> The fix is to make sure all previous NumPy versions installed by pip have\n> been removed. See [NumPy issue 12736](https://github.com/numpy/numpy/issues/12736)\n> for discussion of the issue. Note that previously this problem resulted in\n> an `AttributeError`.\n\nBoth release announcements indicate:\n\n> The wheels on PyPI are linked with OpenBLAS v0.3.4+, which should\n> fix the known threading issues found in previous OpenBLAS versions.\n> Downstream developers building this release should use Cython >= 0.29.2\n> and, if linking OpenBLAS, OpenBLAS > v0.3.4.\n\nSo this depends on the upgrade to OpenBLAS 0.3.5 (from 0.3.3) in #27020,\nand on the upgrade to Cython 0.29.2 in #27058.\n\nDebian developers warn us that NumPy 1.16 in Debian leads to\nsome deprecation warnings:\n\n```\nDeprecationWarning: np.asscalar(a) is deprecated since NumPy v1.16, use a.item() instead\n```\nThese are fixed by adding a patch to matplotlib in #26288.\n\n\nDepends on #27223\n\nCC:  @antonio-rojas @kiwifb @slel @tobihan @sagetrac-tmonteil\n\nKeywords: **upgrade, numpy**\n\nBranch/Commit: **[0f3dab9](https://github.com/sagemath/sagetrac-mirror/commit/0f3dab964e4da4926cc1cb371b3b2272663301aa)**\n\nReviewer: **Dima Pasechnik**\n\nAuthor: **Jeroen Demeyer**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/27000_\n\n",
    "closed_at": "2019-02-13T20:56:35Z",
    "created_at": "2019-01-02T14:47:56Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade NumPy to 1.16.1",
    "type": "issue",
    "updated_at": "2019-02-13T20:56:35Z",
    "url": "https://github.com/sagemath/sage/issues/27000",
    "user": "https://github.com/tobihan"
}
```
NumPy 1.16.0 was released on 2019-01-14, and NumPy 1.16.1 on 2019-02-01.

- **Tarball**: https://files.pythonhosted.org/packages/2b/26/07472b0de91851b6656cbc86e2f0d5d3a3128e7580f23295ef58b6862d6c/numpy-1.16.1.zip

From the [release announcement for NumPy 1.16.0](https://mail.python.org/pipermail/numpy-discussion/2019-January/079130.html):

> This is the last NumPy release to support Python 2.7 and will be
> maintained as a long term release with bug fixes until 2020.  This release
> has seen a lot of refactoring and features many bug fixes, improved code
> organization, and better cross platform compatibility. Not all of these
> improvements will be visible to users, but they should help make
> maintenance easier going forward. Highlights are

>
>- Experimental support for overriding numpy functions in downstream projects.
>- The matmul function is now a ufunc and can be overridden using
>    `__array_ufunc__`.
>- Improved support for the ARM, POWER, and SPARC architectures.
>- Improved support for AIX and PyPy.
>- Improved interoperation with ctypes.
>- Improved support for PEP 3118.

From the [Release announcement for NumPy 1.16.1](https://mail.python.org/pipermail/numpy-discussion/2019-January/079157.html):

> This release fixes bugs reported against the 1.16.0 release, and
> also backports several enhancements from master that seem appropriate for a
> release series that is the last to support Python 2.7. [...]

>
> If you are installing using pip, you may encounter a problem with older
> installed versions of NumPy that pip did not delete becoming mixed with the
> current version, resulting in an `ImportError`. That problem is
> particularly common on Debian derived distributions due to a modified pip.
> The fix is to make sure all previous NumPy versions installed by pip have
> been removed. See [NumPy issue 12736](https://github.com/numpy/numpy/issues/12736)
> for discussion of the issue. Note that previously this problem resulted in
> an `AttributeError`.

Both release announcements indicate:

> The wheels on PyPI are linked with OpenBLAS v0.3.4+, which should
> fix the known threading issues found in previous OpenBLAS versions.
> Downstream developers building this release should use Cython >= 0.29.2
> and, if linking OpenBLAS, OpenBLAS > v0.3.4.

So this depends on the upgrade to OpenBLAS 0.3.5 (from 0.3.3) in #27020,
and on the upgrade to Cython 0.29.2 in #27058.

Debian developers warn us that NumPy 1.16 in Debian leads to
some deprecation warnings:

```
DeprecationWarning: np.asscalar(a) is deprecated since NumPy v1.16, use a.item() instead
```
These are fixed by adding a patch to matplotlib in #26288.


Depends on #27223

CC:  @antonio-rojas @kiwifb @slel @tobihan @sagetrac-tmonteil

Keywords: **upgrade, numpy**

Branch/Commit: **[0f3dab9](https://github.com/sagemath/sagetrac-mirror/commit/0f3dab964e4da4926cc1cb371b3b2272663301aa)**

Reviewer: **Dima Pasechnik**

Author: **Jeroen Demeyer**

_Issue created by migration from https://trac.sagemath.org/ticket/27000_





---

archive/issue_events_352872.json:
```json
{
    "actor": "https://github.com/tobihan",
    "created_at": "2019-01-02T14:47:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "milestone_number": null,
    "milestone_title": "sage-8.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27000#event-352872"
}
```



---

archive/issue_events_352873.json:
```json
{
    "actor": "https://github.com/tobihan",
    "created_at": "2019-01-02T14:47:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "component: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27000#event-352873"
}
```



---

archive/issue_events_352874.json:
```json
{
    "actor": "https://github.com/tobihan",
    "created_at": "2019-01-02T14:47:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27000#event-352874"
}
```



---

archive/issue_events_352875.json:
```json
{
    "actor": "https://github.com/tobihan",
    "created_at": "2019-01-02T14:47:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27000#event-352875"
}
```



---

archive/issue_comments_419174.json:
```json
{
    "body": "Changed keywords from none to **upgrade, numpy**",
    "created_at": "2019-01-08T14:34:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419174",
    "user": "https://github.com/slel"
}
```

Changed keywords from none to **upgrade, numpy**



---

archive/issue_comments_419175.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,10 @@\n In Debian we have NumPy 1.16.0rc1 which leads to some deprecation warnings:\n \n+```\n DeprecationWarning: np.asscalar(a) is deprecated since NumPy v1.16, use a.item() instead\n+```\n \n-It would be nice if sagemath could update the package soon after the 1.16 release.\n+It would be nice if SageMath could update the package soon after the NumPy 1.16 release.\n+\n+Link:\n+- [NumPy 1.16.rc2 release announcement](http://numpy-discussion.10968.n7.nabble.com/NumPy-1-16-0rc2-released-td46599.html) (with link to downloads of wheels and source)\n``````\n",
    "created_at": "2019-01-08T14:34:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419175",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,10 @@
 In Debian we have NumPy 1.16.0rc1 which leads to some deprecation warnings:
 
+```
 DeprecationWarning: np.asscalar(a) is deprecated since NumPy v1.16, use a.item() instead
+```
 
-It would be nice if sagemath could update the package soon after the 1.16 release.
+It would be nice if SageMath could update the package soon after the NumPy 1.16 release.
+
+Link:
+- [NumPy 1.16.rc2 release announcement](http://numpy-discussion.10968.n7.nabble.com/NumPy-1-16-0rc2-released-td46599.html) (with link to downloads of wheels and source)
``````




---

archive/issue_comments_419176.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,5 +6,6 @@\n \n It would be nice if SageMath could update the package soon after the NumPy 1.16 release.\n \n-Link:\n-- [NumPy 1.16.rc2 release announcement](http://numpy-discussion.10968.n7.nabble.com/NumPy-1-16-0rc2-released-td46599.html) (with link to downloads of wheels and source)\n+\n+- [NumPy 1.16.0rc2 release announcement](http://numpy-discussion.10968.n7.nabble.com/NumPy-1-16-0rc2-released-td46599.html) (with link to downloads of wheels and source)\n+- **Tarball** for NumPy 1.16.0rc2: https://files.pythonhosted.org/packages/23/4c/0a3abafb4933c0f736797060c025c3d592a5083715136a079d2adb79c730/numpy-1.16.0rc2.zip\n``````\n",
    "created_at": "2019-01-08T14:36:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419176",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,5 +6,6 @@
 
 It would be nice if SageMath could update the package soon after the NumPy 1.16 release.
 
-Link:
-- [NumPy 1.16.rc2 release announcement](http://numpy-discussion.10968.n7.nabble.com/NumPy-1-16-0rc2-released-td46599.html) (with link to downloads of wheels and source)
+
+- [NumPy 1.16.0rc2 release announcement](http://numpy-discussion.10968.n7.nabble.com/NumPy-1-16-0rc2-released-td46599.html) (with link to downloads of wheels and source)
+- **Tarball** for NumPy 1.16.0rc2: https://files.pythonhosted.org/packages/23/4c/0a3abafb4933c0f736797060c025c3d592a5083715136a079d2adb79c730/numpy-1.16.0rc2.zip
``````




---

archive/issue_comments_419177.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nIt seems most, if not all of these `DeprecationWarning`s are actually coming via matplotlib.  I don't even see any explict `np.asscalar()` calls in the Sage sources.",
    "created_at": "2019-01-09T14:53:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419177",
    "user": "https://github.com/embray"
}
```

<div id="comment:5" align="right">Comment 5</div>

It seems most, if not all of these `DeprecationWarning`s are actually coming via matplotlib.  I don't even see any explict `np.asscalar()` calls in the Sage sources.



---

archive/issue_comments_419178.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nUpstream fix to matplotlib: https://github.com/matplotlib/matplotlib/pull/12478",
    "created_at": "2019-01-09T15:00:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419178",
    "user": "https://github.com/embray"
}
```

<div id="comment:6" align="right">Comment 6</div>

Upstream fix to matplotlib: https://github.com/matplotlib/matplotlib/pull/12478



---

archive/issue_comments_419179.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nI'm getting this on Arch after updating to 1.16.0\n\n```\nsage -t /usr/lib/python2.7/site-packages/sage/misc/inline_fortran.py\n**********************************************************************\nFile \"/usr/lib/python2.7/site-packages/sage/misc/inline_fortran.py\", line 134, in sage.misc.inline_fortran._import_module_from_path._import_module_from_path_impl\nFailed example:\n    fortran(code, globals())\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/lib/python2.7/site-packages/sage/doctest/forker.py\", line 671, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1086, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.misc.inline_fortran._import_module_from_path._import_module_from_path_impl[1]>\", line 1, in <module>\n        fortran(code, globals())\n      File \"sage/misc/lazy_import.pyx\", line 354, in sage.misc.lazy_import.LazyImport.__call__ (build/cythonized/sage/misc/lazy_import.c:3684)\n        return self.get_object()(*args, **kwds)\n      File \"/usr/lib/python2.7/site-packages/sage/misc/inline_fortran.py\", line 96, in __call__\n        return self.eval(*args, **kwds)\n      File \"/usr/lib/python2.7/site-packages/sage/misc/inline_fortran.py\", line 191, in eval\n        with open(log) as fobj:\n    IOError: [Errno 2] No such file or directory: 'fortran_module.log'\n**********************************************************************\n```",
    "created_at": "2019-01-14T17:08:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419179",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:7" align="right">Comment 7</div>

I'm getting this on Arch after updating to 1.16.0

```
sage -t /usr/lib/python2.7/site-packages/sage/misc/inline_fortran.py
**********************************************************************
File "/usr/lib/python2.7/site-packages/sage/misc/inline_fortran.py", line 134, in sage.misc.inline_fortran._import_module_from_path._import_module_from_path_impl
Failed example:
    fortran(code, globals())
Exception raised:
    Traceback (most recent call last):
      File "/usr/lib/python2.7/site-packages/sage/doctest/forker.py", line 671, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/lib/python2.7/site-packages/sage/doctest/forker.py", line 1086, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.misc.inline_fortran._import_module_from_path._import_module_from_path_impl[1]>", line 1, in <module>
        fortran(code, globals())
      File "sage/misc/lazy_import.pyx", line 354, in sage.misc.lazy_import.LazyImport.__call__ (build/cythonized/sage/misc/lazy_import.c:3684)
        return self.get_object()(*args, **kwds)
      File "/usr/lib/python2.7/site-packages/sage/misc/inline_fortran.py", line 96, in __call__
        return self.eval(*args, **kwds)
      File "/usr/lib/python2.7/site-packages/sage/misc/inline_fortran.py", line 191, in eval
        with open(log) as fobj:
    IOError: [Errno 2] No such file or directory: 'fortran_module.log'
**********************************************************************
```



---

archive/issue_comments_419180.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,38 @@\n-In Debian we have NumPy 1.16.0rc1 which leads to some deprecation warnings:\n+Numpy 1.16.0 was released on 2019-01-14.\n+\n+- [Release announcement](https://mail.python.org/pipermail/numpy-discussion/2019-January/079130.html)\n+- Tarball: https://files.pythonhosted.org/packages/04/b6/d7faa70a3e3eac39f943cc6a6a64ce378259677de516bd899dd9eb8f9b32/numpy-1.16.0.zip\n+\n+From the release announcement:\n+\n+> On behalf of the NumPy team I'm pleased to announce the release of NumPy\n+> 1.16.0. This is the last NumPy release to support Python 2.7 and will be\n+> maintained as a long term release with bug fixes until 2020.  This release\n+> has seen a lot of refactoring and features many bug fixes, improved code\n+> organization, and better cross platform compatibility. Not all of these\n+> improvements will be visible to users, but they should help make\n+> maintenance easier going forward. Highlights are\n+\n+>\n+>- Experimental support for overriding numpy functions in downstream projects.\n+>- The matmul function is now a ufunc and can be overridden using\n+>    __array_ufunc__.\n+>- Improved support for the ARM, POWER, and SPARC architectures.\n+>- Improved support for AIX and PyPy.\n+>- Improved interoperation with ctypes.\n+>- Improved support for PEP 3118.\n+>\n+> The supported Python versions are 2.7 and 3.5-3.7, support for 3.4 has been\n+>dropped. The wheels on PyPI are linked with OpenBLAS v0.3.4+,  which should\n+> fix the known threading issues found in previous OpenBLAS versions.\n+> Downstream developers building this release should use Cython >= 0.29.2\n+> and, if linking OpenBLAS, OpenBLAS > v0.3.4.\n+\n+So this depends on the upgrade to OpenBlas 0.3.5 (from 0.3.3) in #27020,\n+and on the upgrade to Cython 0.29.2 in #27058.\n+\n+Debian developers warn us that NumPy 1.16.0rc1 in Debian leads to\n+some deprecation warnings:\n \n ```\n DeprecationWarning: np.asscalar(a) is deprecated since NumPy v1.16, use a.item() instead\n@@ -6,6 +40,3 @@\n \n It would be nice if SageMath could update the package soon after the NumPy 1.16 release.\n \n-\n-- [NumPy 1.16.0rc2 release announcement](http://numpy-discussion.10968.n7.nabble.com/NumPy-1-16-0rc2-released-td46599.html) (with link to downloads of wheels and source)\n-- **Tarball** for NumPy 1.16.0rc2: https://files.pythonhosted.org/packages/23/4c/0a3abafb4933c0f736797060c025c3d592a5083715136a079d2adb79c730/numpy-1.16.0rc2.zip\n``````\n",
    "created_at": "2019-01-15T01:04:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419180",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,38 @@
-In Debian we have NumPy 1.16.0rc1 which leads to some deprecation warnings:
+Numpy 1.16.0 was released on 2019-01-14.
+
+- [Release announcement](https://mail.python.org/pipermail/numpy-discussion/2019-January/079130.html)
+- Tarball: https://files.pythonhosted.org/packages/04/b6/d7faa70a3e3eac39f943cc6a6a64ce378259677de516bd899dd9eb8f9b32/numpy-1.16.0.zip
+
+From the release announcement:
+
+> On behalf of the NumPy team I'm pleased to announce the release of NumPy
+> 1.16.0. This is the last NumPy release to support Python 2.7 and will be
+> maintained as a long term release with bug fixes until 2020.  This release
+> has seen a lot of refactoring and features many bug fixes, improved code
+> organization, and better cross platform compatibility. Not all of these
+> improvements will be visible to users, but they should help make
+> maintenance easier going forward. Highlights are
+
+>
+>- Experimental support for overriding numpy functions in downstream projects.
+>- The matmul function is now a ufunc and can be overridden using
+>    __array_ufunc__.
+>- Improved support for the ARM, POWER, and SPARC architectures.
+>- Improved support for AIX and PyPy.
+>- Improved interoperation with ctypes.
+>- Improved support for PEP 3118.
+>
+> The supported Python versions are 2.7 and 3.5-3.7, support for 3.4 has been
+>dropped. The wheels on PyPI are linked with OpenBLAS v0.3.4+,  which should
+> fix the known threading issues found in previous OpenBLAS versions.
+> Downstream developers building this release should use Cython >= 0.29.2
+> and, if linking OpenBLAS, OpenBLAS > v0.3.4.
+
+So this depends on the upgrade to OpenBlas 0.3.5 (from 0.3.3) in #27020,
+and on the upgrade to Cython 0.29.2 in #27058.
+
+Debian developers warn us that NumPy 1.16.0rc1 in Debian leads to
+some deprecation warnings:
 
 ```
 DeprecationWarning: np.asscalar(a) is deprecated since NumPy v1.16, use a.item() instead
@@ -6,6 +40,3 @@
 
 It would be nice if SageMath could update the package soon after the NumPy 1.16 release.
 
-
-- [NumPy 1.16.0rc2 release announcement](http://numpy-discussion.10968.n7.nabble.com/NumPy-1-16-0rc2-released-td46599.html) (with link to downloads of wheels and source)
-- **Tarball** for NumPy 1.16.0rc2: https://files.pythonhosted.org/packages/23/4c/0a3abafb4933c0f736797060c025c3d592a5083715136a079d2adb79c730/numpy-1.16.0rc2.zip
``````




---

archive/issue_comments_419181.json:
```json
{
    "body": "Dependencies: **#27020, #27058**",
    "created_at": "2019-01-15T01:04:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419181",
    "user": "https://github.com/slel"
}
```

Dependencies: **#27020, #27058**



---

archive/issue_events_352876.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2019-01-15T01:04:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27000#event-352876"
}
```



---

archive/issue_events_352877.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2019-01-15T01:04:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27000#event-352877"
}
```



---

archive/issue_comments_419182.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nEditing ticket description now that NumPy 1.16.0 is released.\n\nThe release announcement for NumPy 1.16.0 warns:\n\n> Downstream developers building this release should use Cython >= 0.29.2\n> and, if linking OpenBLAS, OpenBLAS > v0.3.4.\n\nSo this depends on the upgrade to OpenBLAS 0.3.5 (from 0.3.3) in #27020,\nand on the upgrade to Cython 0.29.2 in #27058.",
    "created_at": "2019-01-15T01:04:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419182",
    "user": "https://github.com/slel"
}
```

<div id="comment:8" align="right">Comment 8</div>

Editing ticket description now that NumPy 1.16.0 is released.

The release announcement for NumPy 1.16.0 warns:

> Downstream developers building this release should use Cython >= 0.29.2
> and, if linking OpenBLAS, OpenBLAS > v0.3.4.

So this depends on the upgrade to OpenBLAS 0.3.5 (from 0.3.3) in #27020,
and on the upgrade to Cython 0.29.2 in #27058.



---

archive/issue_comments_419183.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nI also get some problems with inline_fortran on Numpy 1.16 (this has been affecting the Debian port).  Haven't looked into it yet.",
    "created_at": "2019-01-15T14:12:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419183",
    "user": "https://github.com/embray"
}
```

<div id="comment:9" align="right">Comment 9</div>

I also get some problems with inline_fortran on Numpy 1.16 (this has been affecting the Debian port).  Haven't looked into it yet.



---

archive/issue_comments_419184.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nThe inline_fortran problem appears to be caused by a backwards-incompatibility introduced by https://github.com/numpy/numpy/pull/11937\n\nThis interface previously was [documented](https://docs.scipy.org/doc/numpy/f2py/usage.html#python-module-f2py2e) as calling f2py through a shell, which meant it was possible to pass constructs like shell redirections in the `extra_args` argument.  So that PR should have passed `shell=True` to `subprocess.check_output` in order to keep that functionality, but it did not (that, or formally deprecate it and also allow a way to capture standard I/O).",
    "created_at": "2019-01-15T14:42:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419184",
    "user": "https://github.com/embray"
}
```

<div id="comment:10" align="right">Comment 10</div>

The inline_fortran problem appears to be caused by a backwards-incompatibility introduced by https://github.com/numpy/numpy/pull/11937

This interface previously was [documented](https://docs.scipy.org/doc/numpy/f2py/usage.html#python-module-f2py2e) as calling f2py through a shell, which meant it was possible to pass constructs like shell redirections in the `extra_args` argument.  So that PR should have passed `shell=True` to `subprocess.check_output` in order to keep that functionality, but it did not (that, or formally deprecate it and also allow a way to capture standard I/O).



---

archive/issue_comments_419185.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\n#27061 offers a fix to the problem with `sage.misc.inline_fortran`.",
    "created_at": "2019-01-15T15:36:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419185",
    "user": "https://github.com/embray"
}
```

<div id="comment:11" align="right">Comment 11</div>

#27061 offers a fix to the problem with `sage.misc.inline_fortran`.



---

archive/issue_comments_419186.json:
```json
{
    "body": "Changed dependencies from **#27020, #27058** to **#27020, #27058, #27061**",
    "created_at": "2019-01-15T15:36:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419186",
    "user": "https://github.com/embray"
}
```

Changed dependencies from **#27020, #27058** to **#27020, #27058, #27061**



---

archive/issue_comments_419187.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nRetarging tickets optimistically to the next milestone.  If you are responsible for this ticket (either its reporter or owner) and don't believe you are likely to complete this ticket before the next release (8.7) please retarget this ticket's milestone to sage-pending or sage-wishlist.",
    "created_at": "2019-01-15T18:15:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419187",
    "user": "https://github.com/embray"
}
```

<div id="comment:12" align="right">Comment 12</div>

Retarging tickets optimistically to the next milestone.  If you are responsible for this ticket (either its reporter or owner) and don't believe you are likely to complete this ticket before the next release (8.7) please retarget this ticket's milestone to sage-pending or sage-wishlist.



---

archive/issue_events_352878.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-01-15T18:15:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "milestone_number": null,
    "milestone_title": "sage-8.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27000#event-352878"
}
```



---

archive/issue_events_352879.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-01-15T18:15:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27000#event-352879"
}
```



---

archive/issue_comments_419188.json:
```json
{
    "body": "Changed dependencies from **#27020, #27058, #27061** to **#26288**",
    "created_at": "2019-01-28T12:16:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419188",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#27020, #27058, #27061** to **#26288**



---

archive/issue_comments_419189.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -37,6 +37,6 @@\n ```\n DeprecationWarning: np.asscalar(a) is deprecated since NumPy v1.16, use a.item() instead\n ```\n+These are fixed by adding a patch to matplotlib in #26288\n \n It would be nice if SageMath could update the package soon after the NumPy 1.16 release.\n-\n``````\n",
    "created_at": "2019-01-28T12:16:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419189",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -37,6 +37,6 @@
 ```
 DeprecationWarning: np.asscalar(a) is deprecated since NumPy v1.16, use a.item() instead
 ```
+These are fixed by adding a patch to matplotlib in #26288
 
 It would be nice if SageMath could update the package soon after the NumPy 1.16 release.
-
``````




---

archive/issue_comments_419190.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nIs there a branch to test this?",
    "created_at": "2019-01-28T12:47:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419190",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:14" align="right">Comment 14</div>

Is there a branch to test this?



---

archive/issue_comments_419191.json:
```json
{
    "body": "Branch: **[u/jdemeyer/upgrade_numpy_to_1_16](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_numpy_to_1_16)**",
    "created_at": "2019-01-28T12:47:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419191",
    "user": "https://github.com/jdemeyer"
}
```

Branch: **[u/jdemeyer/upgrade_numpy_to_1_16](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_numpy_to_1_16)**



---

archive/issue_comments_419192.json:
```json
{
    "body": "Commit: **[4fe5680](https://github.com/sagemath/sagetrac-mirror/commit/4fe5680ceb4c30673f9a8c52aa9c7a6b5487f842)**",
    "created_at": "2019-01-28T12:56:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419192",
    "user": "https://github.com/dimpase"
}
```

Commit: **[4fe5680](https://github.com/sagemath/sagetrac-mirror/commit/4fe5680ceb4c30673f9a8c52aa9c7a6b5487f842)**



---

archive/issue_comments_419193.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nIs it compatible with scipy 1.2? It was released earlier, and given that scipy logs are full of `Using deprecated Numpy API` warnings, it seems that the real blocker to this would be a new scipy version.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c009e77af9cd98b353704f1d648482bf632ab1c8\">c009e77</a></td><td><code>update matplotlib to version 2.2.3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7794b098d90117eeeb07b9765bdb5985dada9134\">7794b09</a></td><td><code>Avoid numpy.isscalar()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4fe5680ceb4c30673f9a8c52aa9c7a6b5487f842\">4fe5680</a></td><td><code>NumPy 1.16.0</code></td></tr></table>\n",
    "created_at": "2019-01-28T12:56:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419193",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:16" align="right">Comment 16</div>

Is it compatible with scipy 1.2? It was released earlier, and given that scipy logs are full of `Using deprecated Numpy API` warnings, it seems that the real blocker to this would be a new scipy version.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c009e77af9cd98b353704f1d648482bf632ab1c8">c009e77</a></td><td><code>update matplotlib to version 2.2.3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7794b098d90117eeeb07b9765bdb5985dada9134">7794b09</a></td><td><code>Avoid numpy.isscalar()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4fe5680ceb4c30673f9a8c52aa9c7a6b5487f842">4fe5680</a></td><td><code>NumPy 1.16.0</code></td></tr></table>




---

archive/issue_comments_419194.json:
```json
{
    "body": "Changed commit from **[4fe5680](https://github.com/sagemath/sagetrac-mirror/commit/4fe5680ceb4c30673f9a8c52aa9c7a6b5487f842)** to **[07ecaa9](https://github.com/sagemath/sagetrac-mirror/commit/07ecaa914488197f485976b484fb0e61b97b32b1)**",
    "created_at": "2019-01-28T16:03:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419194",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4fe5680](https://github.com/sagemath/sagetrac-mirror/commit/4fe5680ceb4c30673f9a8c52aa9c7a6b5487f842)** to **[07ecaa9](https://github.com/sagemath/sagetrac-mirror/commit/07ecaa914488197f485976b484fb0e61b97b32b1)**



---

archive/issue_comments_419195.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c892da7dc21c63b3e5ee788fec7b10e8d1373820\">c892da7</a></td><td><code>Avoid numpy.asscalar()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/07ecaa914488197f485976b484fb0e61b97b32b1\">07ecaa9</a></td><td><code>NumPy 1.16.0</code></td></tr></table>\n",
    "created_at": "2019-01-28T16:03:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419195",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17" align="right">Comment 17</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c892da7dc21c63b3e5ee788fec7b10e8d1373820">c892da7</a></td><td><code>Avoid numpy.asscalar()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/07ecaa914488197f485976b484fb0e61b97b32b1">07ecaa9</a></td><td><code>NumPy 1.16.0</code></td></tr></table>




---

archive/issue_comments_419196.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nReplying to [@dimpase](#comment%3A16):\n> Is it compatible with scipy 1.2? It was released earlier, and given that scipy logs are full of `Using deprecated Numpy API` warnings, it seems that the real blocker to this would be a new scipy version.\n\nThere is a long discussion about that in https://github.com/cython/cython/issues/2498",
    "created_at": "2019-01-28T16:36:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419196",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:18" align="right">Comment 18</div>

Replying to [@dimpase](#comment%3A16):
> Is it compatible with scipy 1.2? It was released earlier, and given that scipy logs are full of `Using deprecated Numpy API` warnings, it seems that the real blocker to this would be a new scipy version.

There is a long discussion about that in https://github.com/cython/cython/issues/2498



---

archive/issue_comments_419197.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nanything stops us from going forward with this upgrade? it all seems to work, after matplotlib fix.",
    "created_at": "2019-01-28T17:45:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419197",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:19" align="right">Comment 19</div>

anything stops us from going forward with this upgrade? it all seems to work, after matplotlib fix.



---

archive/issue_comments_419198.json:
```json
{
    "body": "Author: **Jeroen Demeyer**",
    "created_at": "2019-01-28T17:48:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419198",
    "user": "https://github.com/jdemeyer"
}
```

Author: **Jeroen Demeyer**



---

archive/issue_events_352880.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-01-28T17:48:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27000#event-352880"
}
```



---

archive/issue_events_352881.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-01-28T17:56:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27000#event-352881"
}
```



---

archive/issue_events_352882.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-01-28T17:56:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27000#event-352882"
}
```



---

archive/issue_comments_419199.json:
```json
{
    "body": "Reviewer: **Dima Pasechnik**",
    "created_at": "2019-01-28T17:56:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419199",
    "user": "https://github.com/dimpase"
}
```

Reviewer: **Dima Pasechnik**



---

archive/issue_comments_419200.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nLGTM",
    "created_at": "2019-01-28T17:56:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419200",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:21" align="right">Comment 21</div>

LGTM



---

archive/issue_comments_419201.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nSeems to conflict with matplotlib on OSX:\n\n```\nIgnoring indexes: https://pypi.org/simple\nCreated temporary directory: /private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-ephem-wheel-cache-kl7Hms\nCreated temporary directory: /private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-tracker-Za__6B\nCreated requirements tracker '/private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-tracker-Za__6B'\nCreated temporary directory: /private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-install-DJEDBz\nProcessing /Users/buildslave-sage/slave/sage_git/build/local/var/tmp/sage/build/matplotlib-2.2.3.p0/src\n  Created temporary directory: /private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-build-46rwMp\n  Added file:///Users/buildslave-sage/slave/sage_git/build/local/var/tmp/sage/build/matplotlib-2.2.3.p0/src to build tracker '/private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-tracker-Za__6B'\n  Running setup.py (path:/private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-build-46rwMp/setup.py) egg_info for package from file:///Users/buildslave-sage/slave/sage_git/build/local/var/tmp/sage/build/matplotlib-2.2.3.p0/src\n    Running command python setup.py egg_info\n    ============================================================================\n    Edit setup.cfg to change the build options\n    BUILDING MATPLOTLIB\n                matplotlib: yes [2.2.3]\n                    python: yes [2.7.15 (default, Jan 27 2019, 04:12:55)  [GCC\n                            4.2.1 Compatible Apple LLVM 10.0.0\n                            (clang-1000.11.45.5)]]\n                  platform: yes [darwin]\n    REQUIRED DEPENDENCIES AND EXTENSIONS\n    Traceback (most recent call last):\n      File \"<string>\", line 1, in <module>\n      File \"/private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-build-46rwMp/setup.py\", line 172, in <module>\n        result = package.check()\n      File \"setupext.py\", line 963, in check\n        import numpy\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/numpy/__init__.py\", line 142, in <module>\n        from . import core\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/numpy/core/__init__.py\", line 59, in <module>\n        from . import numeric\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/numpy/core/numeric.py\", line 3093, in <module>\n        from . import fromnumeric\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/numpy/core/fromnumeric.py\", line 17, in <module>\n        from . import _methods\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/numpy/core/_methods.py\", line 158, in <module>\n        _NDARRAY_ARRAY_FUNCTION = mu.ndarray.__array_function__\n    AttributeError: type object 'numpy.ndarray' has no attribute '__array_function__'\nCleaning up...\n  Removing source in /private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-build-46rwMp\nRemoved file:///Users/buildslave-sage/slave/sage_git/build/local/var/tmp/sage/build/matplotlib-2.2.3.p0/src from build tracker '/private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-tracker-Za__6B'\nRemoved build tracker '/private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-tracker-Za__6B'\nCommand \"python setup.py egg_info\" failed with error code 1 in /private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-build-46rwMp/\nException information:\nTraceback (most recent call last):\n  File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pip/_internal/cli/base_command.py\", line 143, in main\n    status = self.run(options, args)\n  File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pip/_internal/commands/install.py\", line 318, in run\n    resolver.resolve(requirement_set)\n  File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pip/_internal/resolve.py\", line 102, in resolve\n    self._resolve_one(requirement_set, req)\n  File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pip/_internal/resolve.py\", line 256, in _resolve_one\n    abstract_dist = self._get_abstract_dist_for(req_to_install)\n  File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pip/_internal/resolve.py\", line 209, in _get_abstract_dist_for\n    self.require_hashes\n  File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pip/_internal/operations/prepare.py\", line 298, in prepare_linked_requirement\n    abstract_dist.prep_for_dist(finder, self.build_isolation)\n  File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pip/_internal/operations/prepare.py\", line 126, in prep_for_dist\n    self.req.run_egg_info()\n  File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pip/_internal/req/req_install.py\", line 473, in run_egg_info\n    command_desc='python setup.py egg_info')\n  File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pip/_internal/utils/misc.py\", line 705, in call_subprocess\n    % (command_desc, proc.returncode, cwd))\nInstallationError: Command \"python setup.py egg_info\" failed with error code 1 in /private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-build-46rwMp/\nError: installing with pip2 failed\n********************************************************************************\nError installing matplotlib-2.2.3.p0\n********************************************************************************\nreal\t0m6.450s\nuser\t0m2.680s\nsys\t0m3.147s\n************************************************************************\nError installing package matplotlib-2.2.3.p0\n************************************************************************\n```",
    "created_at": "2019-02-02T14:59:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419201",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:22" align="right">Comment 22</div>

Seems to conflict with matplotlib on OSX:

```
Ignoring indexes: https://pypi.org/simple
Created temporary directory: /private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-ephem-wheel-cache-kl7Hms
Created temporary directory: /private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-tracker-Za__6B
Created requirements tracker '/private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-tracker-Za__6B'
Created temporary directory: /private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-install-DJEDBz
Processing /Users/buildslave-sage/slave/sage_git/build/local/var/tmp/sage/build/matplotlib-2.2.3.p0/src
  Created temporary directory: /private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-build-46rwMp
  Added file:///Users/buildslave-sage/slave/sage_git/build/local/var/tmp/sage/build/matplotlib-2.2.3.p0/src to build tracker '/private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-tracker-Za__6B'
  Running setup.py (path:/private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-build-46rwMp/setup.py) egg_info for package from file:///Users/buildslave-sage/slave/sage_git/build/local/var/tmp/sage/build/matplotlib-2.2.3.p0/src
    Running command python setup.py egg_info
    ============================================================================
    Edit setup.cfg to change the build options
    BUILDING MATPLOTLIB
                matplotlib: yes [2.2.3]
                    python: yes [2.7.15 (default, Jan 27 2019, 04:12:55)  [GCC
                            4.2.1 Compatible Apple LLVM 10.0.0
                            (clang-1000.11.45.5)]]
                  platform: yes [darwin]
    REQUIRED DEPENDENCIES AND EXTENSIONS
    Traceback (most recent call last):
      File "<string>", line 1, in <module>
      File "/private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-build-46rwMp/setup.py", line 172, in <module>
        result = package.check()
      File "setupext.py", line 963, in check
        import numpy
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/numpy/__init__.py", line 142, in <module>
        from . import core
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/numpy/core/__init__.py", line 59, in <module>
        from . import numeric
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/numpy/core/numeric.py", line 3093, in <module>
        from . import fromnumeric
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/numpy/core/fromnumeric.py", line 17, in <module>
        from . import _methods
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/numpy/core/_methods.py", line 158, in <module>
        _NDARRAY_ARRAY_FUNCTION = mu.ndarray.__array_function__
    AttributeError: type object 'numpy.ndarray' has no attribute '__array_function__'
Cleaning up...
  Removing source in /private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-build-46rwMp
Removed file:///Users/buildslave-sage/slave/sage_git/build/local/var/tmp/sage/build/matplotlib-2.2.3.p0/src from build tracker '/private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-tracker-Za__6B'
Removed build tracker '/private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-tracker-Za__6B'
Command "python setup.py egg_info" failed with error code 1 in /private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-build-46rwMp/
Exception information:
Traceback (most recent call last):
  File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pip/_internal/cli/base_command.py", line 143, in main
    status = self.run(options, args)
  File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pip/_internal/commands/install.py", line 318, in run
    resolver.resolve(requirement_set)
  File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pip/_internal/resolve.py", line 102, in resolve
    self._resolve_one(requirement_set, req)
  File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pip/_internal/resolve.py", line 256, in _resolve_one
    abstract_dist = self._get_abstract_dist_for(req_to_install)
  File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pip/_internal/resolve.py", line 209, in _get_abstract_dist_for
    self.require_hashes
  File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pip/_internal/operations/prepare.py", line 298, in prepare_linked_requirement
    abstract_dist.prep_for_dist(finder, self.build_isolation)
  File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pip/_internal/operations/prepare.py", line 126, in prep_for_dist
    self.req.run_egg_info()
  File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pip/_internal/req/req_install.py", line 473, in run_egg_info
    command_desc='python setup.py egg_info')
  File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/pip/_internal/utils/misc.py", line 705, in call_subprocess
    % (command_desc, proc.returncode, cwd))
InstallationError: Command "python setup.py egg_info" failed with error code 1 in /private/var/folders/hd/9pzxdk253fjbnwfcnj5bfmwc0000gs/T/pip-req-build-46rwMp/
Error: installing with pip2 failed
********************************************************************************
Error installing matplotlib-2.2.3.p0
********************************************************************************
real	0m6.450s
user	0m2.680s
sys	0m3.147s
************************************************************************
Error installing package matplotlib-2.2.3.p0
************************************************************************
```



---

archive/issue_events_352883.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-02-02T14:59:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27000#event-352883"
}
```



---

archive/issue_events_352884.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-02-02T14:59:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27000#event-352884"
}
```



---

archive/issue_comments_419202.json:
```json
{
    "body": "Changed dependencies from **#26288** to none",
    "created_at": "2019-02-04T08:35:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419202",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#26288** to none



---

archive/issue_comments_419203.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/14bf0f940c3844e511931727a50d9bd7b3327a91\">14bf0f9</a></td><td><code>NumPy 1.16.0</code></td></tr></table>\n",
    "created_at": "2019-02-04T08:42:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419203",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24" align="right">Comment 24</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/14bf0f940c3844e511931727a50d9bd7b3327a91">14bf0f9</a></td><td><code>NumPy 1.16.0</code></td></tr></table>




---

archive/issue_comments_419204.json:
```json
{
    "body": "Changed commit from **[07ecaa9](https://github.com/sagemath/sagetrac-mirror/commit/07ecaa914488197f485976b484fb0e61b97b32b1)** to **[14bf0f9](https://github.com/sagemath/sagetrac-mirror/commit/14bf0f940c3844e511931727a50d9bd7b3327a91)**",
    "created_at": "2019-02-04T08:42:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419204",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[07ecaa9](https://github.com/sagemath/sagetrac-mirror/commit/07ecaa914488197f485976b484fb0e61b97b32b1)** to **[14bf0f9](https://github.com/sagemath/sagetrac-mirror/commit/14bf0f940c3844e511931727a50d9bd7b3327a91)**



---

archive/issue_comments_419205.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\n1.16.1 is out, no test failures (on Arch)",
    "created_at": "2019-02-04T11:48:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419205",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:25" align="right">Comment 25</div>

1.16.1 is out, no test failures (on Arch)



---

archive/issue_comments_419206.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nWhat OSX version do you get that error on?",
    "created_at": "2019-02-04T11:53:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419206",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:26" align="right">Comment 26</div>

What OSX version do you get that error on?



---

archive/issue_comments_419207.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nlatest (mojave)",
    "created_at": "2019-02-04T19:10:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419207",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:27" align="right">Comment 27</div>

latest (mojave)



---

archive/issue_comments_419208.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\n\n```\nAttributeError: type object 'numpy.ndarray' has no attribute '__array_function__'\nCleaning up...\n```\nseems to tell one that the error was during the build of numpy.\nBring on da log!",
    "created_at": "2019-02-04T19:33:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419208",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:28" align="right">Comment 28</div>


```
AttributeError: type object 'numpy.ndarray' has no attribute '__array_function__'
Cleaning up...
```
seems to tell one that the error was during the build of numpy.
Bring on da log!



---

archive/issue_comments_419209.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nThe scipy build fails similarly:\n\n```\nInstalling scipy-1.2.0\nTraceback (most recent call last):\n  File \"setup.py\", line 492, in <module>\n    setup_package()\n  File \"setup.py\", line 424, in setup_package\n    import numpy\n  File \"/Users/jdemeyer/sage/local/lib/python2.7/site-packages/numpy/__init__.py\", line 142, in <module>\n    from . import core\n  File \"/Users/jdemeyer/sage/local/lib/python2.7/site-packages/numpy/core/__init__.py\", line 59, in <module>\n    from . import numeric\n  File \"/Users/jdemeyer/sage/local/lib/python2.7/site-packages/numpy/core/numeric.py\", line 3093, in <module>\n    from . import fromnumeric\n  File \"/Users/jdemeyer/sage/local/lib/python2.7/site-packages/numpy/core/fromnumeric.py\", line 17, in <module>\n    from . import _methods\n  File \"/Users/jdemeyer/sage/local/lib/python2.7/site-packages/numpy/core/_methods.py\", line 158, in <module>\n    _NDARRAY_ARRAY_FUNCTION = mu.ndarray.__array_function__\nAttributeError: type object 'numpy.ndarray' has no attribute '__array_function__'\nError: could not determine package name\n********************************************************************************\n```",
    "created_at": "2019-02-06T10:47:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419209",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:29" align="right">Comment 29</div>

The scipy build fails similarly:

```
Installing scipy-1.2.0
Traceback (most recent call last):
  File "setup.py", line 492, in <module>
    setup_package()
  File "setup.py", line 424, in setup_package
    import numpy
  File "/Users/jdemeyer/sage/local/lib/python2.7/site-packages/numpy/__init__.py", line 142, in <module>
    from . import core
  File "/Users/jdemeyer/sage/local/lib/python2.7/site-packages/numpy/core/__init__.py", line 59, in <module>
    from . import numeric
  File "/Users/jdemeyer/sage/local/lib/python2.7/site-packages/numpy/core/numeric.py", line 3093, in <module>
    from . import fromnumeric
  File "/Users/jdemeyer/sage/local/lib/python2.7/site-packages/numpy/core/fromnumeric.py", line 17, in <module>
    from . import _methods
  File "/Users/jdemeyer/sage/local/lib/python2.7/site-packages/numpy/core/_methods.py", line 158, in <module>
    _NDARRAY_ARRAY_FUNCTION = mu.ndarray.__array_function__
AttributeError: type object 'numpy.ndarray' has no attribute '__array_function__'
Error: could not determine package name
********************************************************************************
```



---

archive/issue_comments_419210.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nthis seems to be an NumPy/pip (?) problem: https://github.com/numpy/numpy/issues/12736",
    "created_at": "2019-02-06T10:54:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419210",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:30" align="right">Comment 30</div>

this seems to be an NumPy/pip (?) problem: https://github.com/numpy/numpy/issues/12736



---

archive/issue_comments_419211.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nWe should upgrade to 1.16.1, where this bug is apparently fixed\nby https://github.com/numpy/numpy/pull/12891\n\nhttps://github.com/numpy/numpy/releases/tag/v1.16.1",
    "created_at": "2019-02-06T11:01:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419211",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:31" align="right">Comment 31</div>

We should upgrade to 1.16.1, where this bug is apparently fixed
by https://github.com/numpy/numpy/pull/12891

https://github.com/numpy/numpy/releases/tag/v1.16.1



---

archive/issue_events_352885.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-02-08T08:48:38Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "title_is": "Upgrade NumPy to 1.16.1",
    "title_was": "Upgrade NumPy to 1.16",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27000#event-352885"
}
```



---

archive/issue_comments_419212.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nReplying to [@dimpase](#comment%3A31):\n> We should upgrade to 1.16.1, where this bug is apparently fixed\n> by https://github.com/numpy/numpy/pull/12891\n\nThere is nothing \"fixed\". The only thing that changed is a better error message. Apparently we're not properly deleting old versions of numpy.",
    "created_at": "2019-02-08T08:49:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419212",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:33" align="right">Comment 33</div>

Replying to [@dimpase](#comment%3A31):
> We should upgrade to 1.16.1, where this bug is apparently fixed
> by https://github.com/numpy/numpy/pull/12891

There is nothing "fixed". The only thing that changed is a better error message. Apparently we're not properly deleting old versions of numpy.



---

archive/issue_comments_419213.json:
```json
{
    "body": "Dependencies: **#27223**",
    "created_at": "2019-02-08T08:54:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419213",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#27223**



---

archive/issue_comments_419214.json:
```json
{
    "body": "Changed commit from **[14bf0f9](https://github.com/sagemath/sagetrac-mirror/commit/14bf0f940c3844e511931727a50d9bd7b3327a91)** to **[0f3dab9](https://github.com/sagemath/sagetrac-mirror/commit/0f3dab964e4da4926cc1cb371b3b2272663301aa)**",
    "created_at": "2019-02-08T08:56:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419214",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[14bf0f9](https://github.com/sagemath/sagetrac-mirror/commit/14bf0f940c3844e511931727a50d9bd7b3327a91)** to **[0f3dab9](https://github.com/sagemath/sagetrac-mirror/commit/0f3dab964e4da4926cc1cb371b3b2272663301aa)**



---

archive/issue_comments_419215.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0cf4613f76fbdfe902f053b05b5a378e4b209299\">0cf4613</a></td><td><code>Fix legacy uninstall</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0f3dab964e4da4926cc1cb371b3b2272663301aa\">0f3dab9</a></td><td><code>NumPy 1.16.1</code></td></tr></table>\n",
    "created_at": "2019-02-08T08:56:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419215",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:35" align="right">Comment 35</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0cf4613f76fbdfe902f053b05b5a378e4b209299">0cf4613</a></td><td><code>Fix legacy uninstall</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0f3dab964e4da4926cc1cb371b3b2272663301aa">0f3dab9</a></td><td><code>NumPy 1.16.1</code></td></tr></table>




---

archive/issue_comments_419216.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">Comment 36</div>\n\nAdding a `spkg-legacy-uninstall` script should fix things.",
    "created_at": "2019-02-08T08:57:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419216",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:36" align="right">Comment 36</div>

Adding a `spkg-legacy-uninstall` script should fix things.



---

archive/issue_events_352886.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-02-08T08:58:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27000#event-352886"
}
```



---

archive/issue_events_352887.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-02-08T08:58:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27000#event-352887"
}
```



---

archive/issue_comments_419217.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,7 @@\n Numpy 1.16.0 was released on 2019-01-14.\n \n - [Release announcement](https://mail.python.org/pipermail/numpy-discussion/2019-January/079130.html)\n-- Tarball: https://files.pythonhosted.org/packages/04/b6/d7faa70a3e3eac39f943cc6a6a64ce378259677de516bd899dd9eb8f9b32/numpy-1.16.0.zip\n+- Tarball: https://files.pythonhosted.org/packages/2b/26/07472b0de91851b6656cbc86e2f0d5d3a3128e7580f23295ef58b6862d6c/numpy-1.16.1.zip\n \n From the release announcement:\n \n@@ -31,7 +31,7 @@\n So this depends on the upgrade to OpenBlas 0.3.5 (from 0.3.3) in #27020,\n and on the upgrade to Cython 0.29.2 in #27058.\n \n-Debian developers warn us that NumPy 1.16.0rc1 in Debian leads to\n+Debian developers warn us that NumPy 1.16 in Debian leads to\n some deprecation warnings:\n \n ```\n``````\n",
    "created_at": "2019-02-08T08:59:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419217",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,7 @@
 Numpy 1.16.0 was released on 2019-01-14.
 
 - [Release announcement](https://mail.python.org/pipermail/numpy-discussion/2019-January/079130.html)
-- Tarball: https://files.pythonhosted.org/packages/04/b6/d7faa70a3e3eac39f943cc6a6a64ce378259677de516bd899dd9eb8f9b32/numpy-1.16.0.zip
+- Tarball: https://files.pythonhosted.org/packages/2b/26/07472b0de91851b6656cbc86e2f0d5d3a3128e7580f23295ef58b6862d6c/numpy-1.16.1.zip
 
 From the release announcement:
 
@@ -31,7 +31,7 @@
 So this depends on the upgrade to OpenBlas 0.3.5 (from 0.3.3) in #27020,
 and on the upgrade to Cython 0.29.2 in #27058.
 
-Debian developers warn us that NumPy 1.16.0rc1 in Debian leads to
+Debian developers warn us that NumPy 1.16 in Debian leads to
 some deprecation warnings:
 
 ```
``````




---

archive/issue_comments_419218.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,12 +1,10 @@\n-Numpy 1.16.0 was released on 2019-01-14.\n+NumPy 1.16.0 was released on 2019-01-14, and NumPy 1.16.1 on 2019-02-01.\n \n-- [Release announcement](https://mail.python.org/pipermail/numpy-discussion/2019-January/079130.html)\n-- Tarball: https://files.pythonhosted.org/packages/2b/26/07472b0de91851b6656cbc86e2f0d5d3a3128e7580f23295ef58b6862d6c/numpy-1.16.1.zip\n+- **Tarball**: https://files.pythonhosted.org/packages/2b/26/07472b0de91851b6656cbc86e2f0d5d3a3128e7580f23295ef58b6862d6c/numpy-1.16.1.zip\n \n-From the release announcement:\n+From the [release announcement for NumPy 1.16.0](https://mail.python.org/pipermail/numpy-discussion/2019-January/079130.html):\n \n-> On behalf of the NumPy team I'm pleased to announce the release of NumPy\n-> 1.16.0. This is the last NumPy release to support Python 2.7 and will be\n+> This is the last NumPy release to support Python 2.7 and will be\n > maintained as a long term release with bug fixes until 2020.  This release\n > has seen a lot of refactoring and features many bug fixes, improved code\n > organization, and better cross platform compatibility. Not all of these\n@@ -16,19 +14,36 @@\n >\n >- Experimental support for overriding numpy functions in downstream projects.\n >- The matmul function is now a ufunc and can be overridden using\n->    __array_ufunc__.\n+>    `__array_ufunc__`.\n >- Improved support for the ARM, POWER, and SPARC architectures.\n >- Improved support for AIX and PyPy.\n >- Improved interoperation with ctypes.\n >- Improved support for PEP 3118.\n+\n+From the [Release announcement for NumPy 1.16.1](https://mail.python.org/pipermail/numpy-discussion/2019-January/079157.html):\n+\n+> This release fixes bugs reported against the 1.16.0 release, and\n+> also backports several enhancements from master that seem appropriate for a\n+> release series that is the last to support Python 2.7. [...]\n+\n >\n-> The supported Python versions are 2.7 and 3.5-3.7, support for 3.4 has been\n->dropped. The wheels on PyPI are linked with OpenBLAS v0.3.4+,  which should\n+> If you are installing using pip, you may encounter a problem with older\n+> installed versions of NumPy that pip did not delete becoming mixed with the\n+> current version, resulting in an `ImportError`. That problem is\n+> particularly common on Debian derived distributions due to a modified pip.\n+> The fix is to make sure all previous NumPy versions installed by pip have\n+> been removed. See [NumPy issue 12736](https://github.com/numpy/numpy/issues/12736)\n+> for discussion of the issue. Note that previously this problem resulted in\n+> an `AttributeError`.\n+\n+Both release announcements indicate:\n+\n+> The wheels on PyPI are linked with OpenBLAS v0.3.4+, which should\n > fix the known threading issues found in previous OpenBLAS versions.\n > Downstream developers building this release should use Cython >= 0.29.2\n > and, if linking OpenBLAS, OpenBLAS > v0.3.4.\n \n-So this depends on the upgrade to OpenBlas 0.3.5 (from 0.3.3) in #27020,\n+So this depends on the upgrade to OpenBLAS 0.3.5 (from 0.3.3) in #27020,\n and on the upgrade to Cython 0.29.2 in #27058.\n \n Debian developers warn us that NumPy 1.16 in Debian leads to\n@@ -37,6 +52,5 @@\n ```\n DeprecationWarning: np.asscalar(a) is deprecated since NumPy v1.16, use a.item() instead\n ```\n-These are fixed by adding a patch to matplotlib in #26288\n+These are fixed by adding a patch to matplotlib in #26288.\n \n-It would be nice if SageMath could update the package soon after the NumPy 1.16 release.\n``````\n",
    "created_at": "2019-02-08T10:32:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419218",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,12 +1,10 @@
-Numpy 1.16.0 was released on 2019-01-14.
+NumPy 1.16.0 was released on 2019-01-14, and NumPy 1.16.1 on 2019-02-01.
 
-- [Release announcement](https://mail.python.org/pipermail/numpy-discussion/2019-January/079130.html)
-- Tarball: https://files.pythonhosted.org/packages/2b/26/07472b0de91851b6656cbc86e2f0d5d3a3128e7580f23295ef58b6862d6c/numpy-1.16.1.zip
+- **Tarball**: https://files.pythonhosted.org/packages/2b/26/07472b0de91851b6656cbc86e2f0d5d3a3128e7580f23295ef58b6862d6c/numpy-1.16.1.zip
 
-From the release announcement:
+From the [release announcement for NumPy 1.16.0](https://mail.python.org/pipermail/numpy-discussion/2019-January/079130.html):
 
-> On behalf of the NumPy team I'm pleased to announce the release of NumPy
-> 1.16.0. This is the last NumPy release to support Python 2.7 and will be
+> This is the last NumPy release to support Python 2.7 and will be
 > maintained as a long term release with bug fixes until 2020.  This release
 > has seen a lot of refactoring and features many bug fixes, improved code
 > organization, and better cross platform compatibility. Not all of these
@@ -16,19 +14,36 @@
 >
 >- Experimental support for overriding numpy functions in downstream projects.
 >- The matmul function is now a ufunc and can be overridden using
->    __array_ufunc__.
+>    `__array_ufunc__`.
 >- Improved support for the ARM, POWER, and SPARC architectures.
 >- Improved support for AIX and PyPy.
 >- Improved interoperation with ctypes.
 >- Improved support for PEP 3118.
+
+From the [Release announcement for NumPy 1.16.1](https://mail.python.org/pipermail/numpy-discussion/2019-January/079157.html):
+
+> This release fixes bugs reported against the 1.16.0 release, and
+> also backports several enhancements from master that seem appropriate for a
+> release series that is the last to support Python 2.7. [...]
+
 >
-> The supported Python versions are 2.7 and 3.5-3.7, support for 3.4 has been
->dropped. The wheels on PyPI are linked with OpenBLAS v0.3.4+,  which should
+> If you are installing using pip, you may encounter a problem with older
+> installed versions of NumPy that pip did not delete becoming mixed with the
+> current version, resulting in an `ImportError`. That problem is
+> particularly common on Debian derived distributions due to a modified pip.
+> The fix is to make sure all previous NumPy versions installed by pip have
+> been removed. See [NumPy issue 12736](https://github.com/numpy/numpy/issues/12736)
+> for discussion of the issue. Note that previously this problem resulted in
+> an `AttributeError`.
+
+Both release announcements indicate:
+
+> The wheels on PyPI are linked with OpenBLAS v0.3.4+, which should
 > fix the known threading issues found in previous OpenBLAS versions.
 > Downstream developers building this release should use Cython >= 0.29.2
 > and, if linking OpenBLAS, OpenBLAS > v0.3.4.
 
-So this depends on the upgrade to OpenBlas 0.3.5 (from 0.3.3) in #27020,
+So this depends on the upgrade to OpenBLAS 0.3.5 (from 0.3.3) in #27020,
 and on the upgrade to Cython 0.29.2 in #27058.
 
 Debian developers warn us that NumPy 1.16 in Debian leads to
@@ -37,6 +52,5 @@
 ```
 DeprecationWarning: np.asscalar(a) is deprecated since NumPy v1.16, use a.item() instead
 ```
-These are fixed by adding a patch to matplotlib in #26288
+These are fixed by adding a patch to matplotlib in #26288.
 
-It would be nice if SageMath could update the package soon after the NumPy 1.16 release.
``````




---

archive/issue_comments_419219.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">Comment 40</div>\n\nOK, looks good.",
    "created_at": "2019-02-11T00:56:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419219",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:40" align="right">Comment 40</div>

OK, looks good.



---

archive/issue_events_352888.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-02-11T00:56:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27000#event-352888"
}
```



---

archive/issue_events_352889.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-02-11T00:56:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27000#event-352889"
}
```



---

archive/issue_events_352890.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-02-13T20:56:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27000#event-352890"
}
```



---

archive/issue_events_352891.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "63f8a3c641c054f46fca58d8ab0784a56190b47c",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-02-13T20:56:35Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27000#event-352891"
}
```



---

archive/issue_comments_419220.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/upgrade_numpy_to_1_16](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_numpy_to_1_16)** to **[0f3dab9](https://github.com/sagemath/sagetrac-mirror/commit/0f3dab964e4da4926cc1cb371b3b2272663301aa)**",
    "created_at": "2019-02-13T20:56:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27000",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27000#issuecomment-419220",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/upgrade_numpy_to_1_16](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_numpy_to_1_16)** to **[0f3dab9](https://github.com/sagemath/sagetrac-mirror/commit/0f3dab964e4da4926cc1cb371b3b2272663301aa)**
