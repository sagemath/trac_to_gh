# Issue 27397: upgrade to twisted 19.7.0

archive/issues_027160.json:
```json
{
    "assignees": [],
    "body": "This could help to run sagenb with python3\n\nhttps://files.pythonhosted.org/packages/61/31/3855dcacd1d3b2e60c0b4ccc8e727b8cd497bd7087d327d81a9f0cbb580c/Twisted-19.7.0.tar.bz2\n\nCC:  @embray @jdemeyer @kiwifb\n\nKeywords: **upgrade, twisted**\n\nBranch/Commit: **[u/chapoton/27397](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/27397) @ [`ee5d6b6`](https://github.com/sagemath/sagetrac-mirror/commit/ee5d6b683e8bfe352bc0fc82e072da6bb5c66b99)**\n\nReviewer: **Fran\u00e7ois Bissey**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton**\n\nComponent: **packages: standard**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/27397_\n\n",
    "closed_at": "2020-03-18T08:20:09Z",
    "created_at": "2019-03-02T11:40:03Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/invalid"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "upgrade to twisted 19.7.0",
    "type": "issue",
    "updated_at": "2020-03-18T08:20:09Z",
    "url": "https://github.com/sagemath/sage/issues/27397",
    "user": "https://github.com/fchapoton"
}
```
This could help to run sagenb with python3

https://files.pythonhosted.org/packages/61/31/3855dcacd1d3b2e60c0b4ccc8e727b8cd497bd7087d327d81a9f0cbb580c/Twisted-19.7.0.tar.bz2

CC:  @embray @jdemeyer @kiwifb

Keywords: **upgrade, twisted**

Branch/Commit: **[u/chapoton/27397](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/27397) @ [`ee5d6b6`](https://github.com/sagemath/sagetrac-mirror/commit/ee5d6b683e8bfe352bc0fc82e072da6bb5c66b99)**

Reviewer: **François Bissey**

Author: **Frédéric Chapoton**

Component: **packages: standard**

_Issue created by migration from https://trac.sagemath.org/ticket/27397_





---

archive/issue_events_378209.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-03-02T11:40:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27397#event-378209"
}
```



---

archive/issue_events_378210.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-03-02T11:40:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27397#event-378210"
}
```



---

archive/issue_events_378211.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-03-02T11:40:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27397#event-378211"
}
```



---

archive/issue_comments_423739.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n This could help to tun sagenb with python3\n+\n+https://files.pythonhosted.org/packages/5d/0e/a72d85a55761c2c3ff1cb968143a2fd5f360220779ed90e0fadf4106d4f2/Twisted-18.9.0.tar.bz2\n``````\n",
    "created_at": "2019-03-02T11:40:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27397#issuecomment-423739",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 This could help to tun sagenb with python3
+
+https://files.pythonhosted.org/packages/5d/0e/a72d85a55761c2c3ff1cb968143a2fd5f360220779ed90e0fadf4106d4f2/Twisted-18.9.0.tar.bz2
``````




---

archive/issue_comments_423740.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/258cf1b95cf6bf6447e1f0eb9a5acb43560e6ce7\"><code>258cf1b</code></a></td><td><code>upgrade twisted to 18.9.0</code></td></tr></table>\n",
    "created_at": "2019-03-02T11:44:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27397#issuecomment-423740",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/258cf1b95cf6bf6447e1f0eb9a5acb43560e6ce7"><code>258cf1b</code></a></td><td><code>upgrade twisted to 18.9.0</code></td></tr></table>




---

archive/issue_comments_423741.json:
```json
{
    "body": "Author: **Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2019-03-02T11:44:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27397#issuecomment-423741",
    "user": "https://github.com/fchapoton"
}
```

Author: **Frédéric Chapoton**



---

archive/issue_comments_423742.json:
```json
{
    "body": "Branch: **[u/chapoton/27397](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/27397)**",
    "created_at": "2019-03-02T11:44:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27397#issuecomment-423742",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[u/chapoton/27397](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/27397)**



---

archive/issue_events_378212.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-03-02T11:44:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27397#event-378212"
}
```



---

archive/issue_comments_423743.json:
```json
{
    "body": "Commit: **[`258cf1b`](https://github.com/sagemath/sagetrac-mirror/commit/258cf1b95cf6bf6447e1f0eb9a5acb43560e6ce7)**",
    "created_at": "2019-03-02T11:44:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27397#issuecomment-423743",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[`258cf1b`](https://github.com/sagemath/sagetrac-mirror/commit/258cf1b95cf6bf6447e1f0eb9a5acb43560e6ce7)**



---

archive/issue_comments_423744.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-This could help to tun sagenb with python3\n+This could help to run sagenb with python3\n \n https://files.pythonhosted.org/packages/5d/0e/a72d85a55761c2c3ff1cb968143a2fd5f360220779ed90e0fadf4106d4f2/Twisted-18.9.0.tar.bz2\n``````\n",
    "created_at": "2019-03-02T11:44:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27397#issuecomment-423744",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-This could help to tun sagenb with python3
+This could help to run sagenb with python3
 
 https://files.pythonhosted.org/packages/5d/0e/a72d85a55761c2c3ff1cb968143a2fd5f360220779ed90e0fadf4106d4f2/Twisted-18.9.0.tar.bz2
``````




---

archive/issue_comments_423745.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nStrangely, this does not seem to install all files (on a python3-built sage)\n\nFor example, twisted.mail.relaymanager is not installed...\n\nHelp! What is happening?",
    "created_at": "2019-03-02T12:16:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27397#issuecomment-423745",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:4" align="right">comment:4</div>

Strangely, this does not seem to install all files (on a python3-built sage)

For example, twisted.mail.relaymanager is not installed...

Help! What is happening?



---

archive/issue_comments_423746.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nActually the gentoo ebuild seems to have a similar behavior, python2.7 has way more file installed than python3.6. It appears to be the default, not sure if that's bad yet.",
    "created_at": "2019-03-02T22:07:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27397#issuecomment-423746",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:5" align="right">comment:5</div>

Actually the gentoo ebuild seems to have a similar behavior, python2.7 has way more file installed than python3.6. It appears to be the default, not sure if that's bad yet.



---

archive/issue_comments_423747.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nCould this be related to different levels of compatibility of twisted with respect to different versions of py3 (3.3, 3.4, 3.5, 3.6, etc)\n\nBecause it seems that `twisted.mail.smtp` gets installed with the branch here, whereas it was not with our current version of twisted.",
    "created_at": "2019-03-03T08:09:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27397#issuecomment-423747",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:6" align="right">comment:6</div>

Could this be related to different levels of compatibility of twisted with respect to different versions of py3 (3.3, 3.4, 3.5, 3.6, etc)

Because it seems that `twisted.mail.smtp` gets installed with the branch here, whereas it was not with our current version of twisted.



---

archive/issue_comments_423748.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nNote: the same lack of installed files happens when twisted is installed on top of the system (ubuntu 18.10) python3.",
    "created_at": "2019-03-03T15:29:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27397#issuecomment-423748",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:7" align="right">comment:7</div>

Note: the same lack of installed files happens when twisted is installed on top of the system (ubuntu 18.10) python3.



---

archive/issue_comments_423749.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThe [Twisted home page](https://twistedmatrix.com/trac/) makes very moderate claims to Python 3 support:\n\n> Twisted runs on Python 2 and an ever growing subset also works with Python 3.",
    "created_at": "2019-03-04T23:30:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27397#issuecomment-423749",
    "user": "https://github.com/slel"
}
```

<div id="comment:8" align="right">comment:8</div>

The [Twisted home page](https://twistedmatrix.com/trac/) makes very moderate claims to Python 3 support:

> Twisted runs on Python 2 and an ever growing subset also works with Python 3.



---

archive/issue_comments_423750.json:
```json
{
    "body": "Changed keywords from **upgrade** to **upgrade, twisted**",
    "created_at": "2019-03-04T23:30:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27397#issuecomment-423750",
    "user": "https://github.com/slel"
}
```

Changed keywords from **upgrade** to **upgrade, twisted**



---

archive/issue_events_378213.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2019-03-04T23:30:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27397#event-378213"
}
```



---

archive/issue_comments_423751.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThat said, the [news item for Twisted 18.9.0](https://github.com/twisted/twisted/blob/trunk/NEWS.rst) mentions\n\n> Python 3.7 is now supported",
    "created_at": "2019-03-04T23:34:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27397#issuecomment-423751",
    "user": "https://github.com/slel"
}
```

<div id="comment:9" align="right">comment:9</div>

That said, the [news item for Twisted 18.9.0](https://github.com/twisted/twisted/blob/trunk/NEWS.rst) mentions

> Python 3.7 is now supported



---

archive/issue_comments_423752.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nThe [pull request about Python 3.7 support](https://github.com/twisted/twisted/pull/1071/files) still says:\n\n> Python 2.7 (full functionality) or 3.4/3.5/3.6/3.7 (subset of functionality)",
    "created_at": "2019-03-05T04:02:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27397#issuecomment-423752",
    "user": "https://github.com/slel"
}
```

<div id="comment:10" align="right">comment:10</div>

The [pull request about Python 3.7 support](https://github.com/twisted/twisted/pull/1071/files) still says:

> Python 2.7 (full functionality) or 3.4/3.5/3.6/3.7 (subset of functionality)



---

archive/issue_comments_423753.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nThere is a list of \"non ported modules\" here:\n\nhttps://github.com/twisted/twisted/blob/trunk/src/twisted/python/_setup.py\n\nand this controls what is installed on python3.\n\nWe need relaymanager and all its depencies...",
    "created_at": "2019-03-05T07:49:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27397#issuecomment-423753",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:11" align="right">comment:11</div>

There is a list of "non ported modules" here:

https://github.com/twisted/twisted/blob/trunk/src/twisted/python/_setup.py

and this controls what is installed on python3.

We need relaymanager and all its depencies...



---

archive/issue_comments_423754.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nIs this just for sagenb?  I'd suggest not supporting it on Python 3 at all (I know you've done a lot of work towards getting that working anyways but I'm not sure it's worth all the trouble since it's being deprecated anyways).\n\nAt the very least, maybe it can be missing some functionality (with appropriate warnings given).",
    "created_at": "2019-03-05T15:23:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27397#issuecomment-423754",
    "user": "https://github.com/embray"
}
```

<div id="comment:12" align="right">comment:12</div>

Is this just for sagenb?  I'd suggest not supporting it on Python 3 at all (I know you've done a lot of work towards getting that working anyways but I'm not sure it's worth all the trouble since it's being deprecated anyways).

At the very least, maybe it can be missing some functionality (with appropriate warnings given).



---

archive/issue_comments_423755.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nyes, this is just for sagenb. It currently fails to start because of these 2 missing modules of twisted.mail.  I remember that a brute force removal of these imports allow the notebook to start, but it looked ugly for some reason.\n\nI will not push hard for this ticket, but maybe we were almost there.. Sigh..",
    "created_at": "2019-03-05T15:25:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27397#issuecomment-423755",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:13" align="right">comment:13</div>

yes, this is just for sagenb. It currently fails to start because of these 2 missing modules of twisted.mail.  I remember that a brute force removal of these imports allow the notebook to start, but it looked ugly for some reason.

I will not push hard for this ticket, but maybe we were almost there.. Sigh..



---

archive/issue_comments_423756.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI guess you could do something like\n\n```\ntry:\n    import twisted.mail\n    HAVE_TWISTED_MAIL = True\nexcept ImportError:\n    HAVE_TWISTED_MAIL = False\n    if <twisted version <= whatever>:\n        # This is an actual error since an older Twisted version should have this\n        raise\n```\n\nand later\n\n```\nif HAVE_TWISTED_MAIL:\n    <do the thing>\nelse:\n    warnings.warn(\"<this functionality is no longer supported, sagenb is deprecated, blah blah blah>\")\n```\n\nI haven't looked at the relevant code though so I don't know how straightforward that would be in practice.",
    "created_at": "2019-03-05T15:45:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27397#issuecomment-423756",
    "user": "https://github.com/embray"
}
```

<div id="comment:14" align="right">comment:14</div>

I guess you could do something like

```
try:
    import twisted.mail
    HAVE_TWISTED_MAIL = True
except ImportError:
    HAVE_TWISTED_MAIL = False
    if <twisted version <= whatever>:
        # This is an actual error since an older Twisted version should have this
        raise
```

and later

```
if HAVE_TWISTED_MAIL:
    <do the thing>
else:
    warnings.warn("<this functionality is no longer supported, sagenb is deprecated, blah blah blah>")
```

I haven't looked at the relevant code though so I don't know how straightforward that would be in practice.



---

archive/issue_events_378214.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27397#event-378214"
}
```



---

archive/issue_events_378215.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27397#event-378215"
}
```



---

archive/issue_comments_423757.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nTicket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)",
    "created_at": "2019-03-25T10:56:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27397#issuecomment-423757",
    "user": "https://github.com/embray"
}
```

<div id="comment:15" align="right">comment:15</div>

Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)



---

archive/issue_events_378216.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-04-28T08:05:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27397#event-378216"
}
```



---

archive/issue_events_378217.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-04-28T08:05:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27397#event-378217"
}
```



---

archive/issue_events_378218.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:50:27Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27397#event-378218"
}
```



---

archive/issue_events_378219.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:50:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27397#event-378219"
}
```



---

archive/issue_comments_423758.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nTickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).",
    "created_at": "2019-06-14T14:50:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27397#issuecomment-423758",
    "user": "https://github.com/embray"
}
```

<div id="comment:17" align="right">comment:17</div>

Tickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).



---

archive/issue_events_378220.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-11-02T17:24:06Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "title_is": "upgrade to twisted 19.7.0",
    "title_was": "upgrade to twisted 18.9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27397#event-378220"
}
```



---

archive/issue_comments_423759.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,4 @@\n This could help to run sagenb with python3\n \n-https://files.pythonhosted.org/packages/5d/0e/a72d85a55761c2c3ff1cb968143a2fd5f360220779ed90e0fadf4106d4f2/Twisted-18.9.0.tar.bz2\n+https://github.com/twisted/twisted/archive/twisted-19.7.0.tar.gz\n+\n``````\n",
    "created_at": "2019-11-02T17:24:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27397#issuecomment-423759",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,4 @@
 This could help to run sagenb with python3
 
-https://files.pythonhosted.org/packages/5d/0e/a72d85a55761c2c3ff1cb968143a2fd5f360220779ed90e0fadf4106d4f2/Twisted-18.9.0.tar.bz2
+https://github.com/twisted/twisted/archive/twisted-19.7.0.tar.gz
+
``````




---

archive/issue_comments_423760.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nIs there any volunteer to try this and sagenb with sage running python 3 ?",
    "created_at": "2019-11-02T17:24:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27397#issuecomment-423760",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:18" align="right">comment:18</div>

Is there any volunteer to try this and sagenb with sage running python 3 ?



---

archive/issue_events_378221.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-11-02T17:24:06Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27397#event-378221"
}
```



---

archive/issue_events_378222.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-11-02T17:24:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "milestone_number": null,
    "milestone_title": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27397#event-378222"
}
```



---

archive/issue_events_378223.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-11-02T17:24:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27397#event-378223"
}
```



---

archive/issue_events_378224.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-11-02T17:24:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27397#event-378224"
}
```



---

archive/issue_comments_423761.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,3 @@\n This could help to run sagenb with python3\n \n-https://github.com/twisted/twisted/archive/twisted-19.7.0.tar.gz\n-\n+https://files.pythonhosted.org/packages/61/31/3855dcacd1d3b2e60c0b4ccc8e727b8cd497bd7087d327d81a9f0cbb580c/Twisted-19.7.0.tar.bz2\n``````\n",
    "created_at": "2019-11-02T17:29:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27397#issuecomment-423761",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,3 @@
 This could help to run sagenb with python3
 
-https://github.com/twisted/twisted/archive/twisted-19.7.0.tar.gz
-
+https://files.pythonhosted.org/packages/61/31/3855dcacd1d3b2e60c0b4ccc8e727b8cd497bd7087d327d81a9f0cbb580c/Twisted-19.7.0.tar.bz2
``````




---

archive/issue_comments_423762.json:
```json
{
    "body": "Changed commit from **[`258cf1b`](https://github.com/sagemath/sagetrac-mirror/commit/258cf1b95cf6bf6447e1f0eb9a5acb43560e6ce7)** to **[`ee5d6b6`](https://github.com/sagemath/sagetrac-mirror/commit/ee5d6b683e8bfe352bc0fc82e072da6bb5c66b99)**",
    "created_at": "2019-11-02T17:31:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27397#issuecomment-423762",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`258cf1b`](https://github.com/sagemath/sagetrac-mirror/commit/258cf1b95cf6bf6447e1f0eb9a5acb43560e6ce7)** to **[`ee5d6b6`](https://github.com/sagemath/sagetrac-mirror/commit/ee5d6b683e8bfe352bc0fc82e072da6bb5c66b99)**



---

archive/issue_comments_423763.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ee5d6b683e8bfe352bc0fc82e072da6bb5c66b99\"><code>ee5d6b6</code></a></td><td><code>upgrade twisted to 19.7.0</code></td></tr></table>\n",
    "created_at": "2019-11-02T17:31:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27397#issuecomment-423763",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ee5d6b683e8bfe352bc0fc82e072da6bb5c66b99"><code>ee5d6b6</code></a></td><td><code>upgrade twisted to 19.7.0</code></td></tr></table>




---

archive/issue_comments_423764.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nI had to do\n\n```\nsage -pip install --upgrade incremental\n```\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ee5d6b683e8bfe352bc0fc82e072da6bb5c66b99\"><code>ee5d6b6</code></a></td><td><code>upgrade twisted to 19.7.0</code></td></tr></table>\n",
    "created_at": "2019-11-02T17:41:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27397#issuecomment-423764",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:21" align="right">comment:21</div>

I had to do

```
sage -pip install --upgrade incremental
```

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ee5d6b683e8bfe352bc0fc82e072da6bb5c66b99"><code>ee5d6b6</code></a></td><td><code>upgrade twisted to 19.7.0</code></td></tr></table>




---

archive/issue_comments_423765.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nand then\n\n```\nsage -pip install constantly\n```\nBut sagenb still fails as before. So no real hope to make it work under py3.",
    "created_at": "2019-11-02T17:47:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27397#issuecomment-423765",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:22" align="right">comment:22</div>

and then

```
sage -pip install constantly
```
But sagenb still fails as before. So no real hope to make it work under py3.



---

archive/issue_comments_423766.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nTicket retargeted after milestone closed",
    "created_at": "2020-01-06T14:10:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27397#issuecomment-423766",
    "user": "https://github.com/embray"
}
```

<div id="comment:23" align="right">comment:23</div>

Ticket retargeted after milestone closed



---

archive/issue_events_378225.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2020-01-06T14:10:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "milestone_number": null,
    "milestone_title": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27397#event-378225"
}
```



---

archive/issue_events_378226.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2020-01-06T14:10:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27397#event-378226"
}
```



---

archive/issue_comments_423767.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\ngiven #29320, I propose to close this one as invalid",
    "created_at": "2020-03-18T07:59:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27397#issuecomment-423767",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:24" align="right">comment:24</div>

given #29320, I propose to close this one as invalid



---

archive/issue_events_378227.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-03-18T07:59:26Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27397#event-378227"
}
```



---

archive/issue_events_378228.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-03-18T07:59:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27397#event-378228"
}
```



---

archive/issue_events_378229.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-03-18T07:59:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "c6c6c6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27397#event-378229"
}
```



---

archive/issue_events_378230.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-03-18T07:59:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27397#event-378230"
}
```



---

archive/issue_events_378231.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-03-18T07:59:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27397#event-378231"
}
```



---

archive/issue_events_378232.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2020-03-18T08:01:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27397#event-378232"
}
```



---

archive/issue_events_378233.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2020-03-18T08:01:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27397#event-378233"
}
```



---

archive/issue_comments_423768.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nWith pleasure.",
    "created_at": "2020-03-18T08:01:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27397#issuecomment-423768",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:25" align="right">comment:25</div>

With pleasure.



---

archive/issue_comments_423769.json:
```json
{
    "body": "Reviewer: **Fran\u00e7ois Bissey**",
    "created_at": "2020-03-18T08:01:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27397#issuecomment-423769",
    "user": "https://github.com/kiwifb"
}
```

Reviewer: **François Bissey**



---

archive/issue_events_378234.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-03-18T08:20:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27397#event-378234"
}
```



---

archive/issue_events_378235.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-03-18T08:20:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27397",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27397#event-378235"
}
```
