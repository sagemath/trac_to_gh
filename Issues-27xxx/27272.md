# Issue 27272: spkg-configure.m4 for iml

archive/issues_027035.json:
```json
{
    "assignees": [],
    "body": "iml only works with MP_LIBRARY provided in SAGE_LOCAL, at least this is the case on Debian 9.\n\nthey have a very old autoconf macro to detect GMP, which it particular won't work for libgmp in some arch-specfic location such as /usr/lib64/.\n \nThis breaks #27212. It works with GMP provided by the system if I just remove the call to their macro, re-run their bootstrap, repackage tarball. \n\n```\n--- a/configure.ac\n+++ b/configure.ac\n@@ -68,13 +68,6 @@ AC_CHECK_FUNCS(calloc floor)\n \n IML_VERBOSE_MODE\n IML_DEFAULT_PATH\n-IML_CHECK_GMP(,,[AC_MSG_ERROR(\n-GMP not found! \n-GMP version 3.1.1 or greater is required for this library to compile. \n-Please make sure GMP is installed and specify the header and libraries \n-location with the options --with-gmp-include=<path> and --with-gmp-lib=<path>\n-respectively when running configure.\n-)])\n \n IML_CHECK_CBLAS(,,[AC_MSG_WARN(\n CBLAS not found!\n```\n\nWhile we are at it, it makes sense to update iml to the latest version 1.0.5 (we are at 1.0.4).\n\nIt should also get spkg-configure.m4\n\ntarball: http://www.cs.uwaterloo.ca/~astorjoh/iml-1.0.5.tar.bz2\n\n\nCC:  @embray @orlitzky @mkoeppe @isuruf\n\nKeywords: **spkg-configure, freebsd**\n\nBranch/Commit: **[5a34c90](https://github.com/sagemath/sagetrac-mirror/commit/5a34c90e99e7f2a5ac437b46965987d57852368e)**\n\nReviewer: **Isuru Fernando**\n\nAuthor: **Dima Pasechnik**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/27272_\n\n",
    "closed_at": "2020-04-16T22:33:35Z",
    "created_at": "2019-02-13T14:06:34Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20build%3A%20configure",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "spkg-configure.m4 for iml",
    "type": "issue",
    "updated_at": "2020-04-16T22:33:35Z",
    "url": "https://github.com/sagemath/sage/issues/27272",
    "user": "https://github.com/dimpase"
}
```
iml only works with MP_LIBRARY provided in SAGE_LOCAL, at least this is the case on Debian 9.

they have a very old autoconf macro to detect GMP, which it particular won't work for libgmp in some arch-specfic location such as /usr/lib64/.
 
This breaks #27212. It works with GMP provided by the system if I just remove the call to their macro, re-run their bootstrap, repackage tarball. 

```
--- a/configure.ac
+++ b/configure.ac
@@ -68,13 +68,6 @@ AC_CHECK_FUNCS(calloc floor)
 
 IML_VERBOSE_MODE
 IML_DEFAULT_PATH
-IML_CHECK_GMP(,,[AC_MSG_ERROR(
-GMP not found! 
-GMP version 3.1.1 or greater is required for this library to compile. 
-Please make sure GMP is installed and specify the header and libraries 
-location with the options --with-gmp-include=<path> and --with-gmp-lib=<path>
-respectively when running configure.
-)])
 
 IML_CHECK_CBLAS(,,[AC_MSG_WARN(
 CBLAS not found!
```

While we are at it, it makes sense to update iml to the latest version 1.0.5 (we are at 1.0.4).

It should also get spkg-configure.m4

tarball: http://www.cs.uwaterloo.ca/~astorjoh/iml-1.0.5.tar.bz2


CC:  @embray @orlitzky @mkoeppe @isuruf

Keywords: **spkg-configure, freebsd**

Branch/Commit: **[5a34c90](https://github.com/sagemath/sagetrac-mirror/commit/5a34c90e99e7f2a5ac437b46965987d57852368e)**

Reviewer: **Isuru Fernando**

Author: **Dima Pasechnik**

_Issue created by migration from https://trac.sagemath.org/ticket/27272_





---

archive/issue_events_356580.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-02-13T14:06:34Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27272#event-356580"
}
```



---

archive/issue_events_356581.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-02-13T14:06:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "component: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27272#event-356581"
}
```



---

archive/issue_events_356582.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-02-13T14:06:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27272#event-356582"
}
```



---

archive/issue_events_356583.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-02-13T14:06:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27272#event-356583"
}
```



---

archive/issue_comments_424458.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -25,3 +25,5 @@\n \n While we are at it, it makes sense to update iml to the latest version 1.0.5 (we are at 1.0.4).\n \n+It should also get spkg-configure.m4\n+\n``````\n",
    "created_at": "2019-02-13T17:24:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424458",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -25,3 +25,5 @@
 
 While we are at it, it makes sense to update iml to the latest version 1.0.5 (we are at 1.0.4).
 
+It should also get spkg-configure.m4
+
``````




---

archive/issue_comments_424459.json:
```json
{
    "body": "Changed keywords from **** to **spkg-configure**",
    "created_at": "2019-02-13T17:24:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424459",
    "user": "https://github.com/dimpase"
}
```

Changed keywords from **** to **spkg-configure**



---

archive/issue_comments_424460.json:
```json
{
    "body": "Author: **Dima Pasechnik**",
    "created_at": "2019-02-13T20:33:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424460",
    "user": "https://github.com/dimpase"
}
```

Author: **Dima Pasechnik**



---

archive/issue_comments_424461.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nThe easiest fix would be to skip the iml's testing for MP_LIBRARY if we use the one from the system.\n\nBut how does one test for this? Is there a variable (provided by #27212) in the environment that can be tested?",
    "created_at": "2019-02-13T20:56:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424461",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:3" align="right">Comment 3</div>

The easiest fix would be to skip the iml's testing for MP_LIBRARY if we use the one from the system.

But how does one test for this? Is there a variable (provided by #27212) in the environment that can be tested?



---

archive/issue_comments_424462.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -27,3 +27,5 @@\n \n It should also get spkg-configure.m4\n \n+tarball: http://www.cs.uwaterloo.ca/~astorjoh/iml-1.0.5.tar.bz2\n+\n``````\n",
    "created_at": "2019-02-13T21:14:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424462",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -27,3 +27,5 @@
 
 It should also get spkg-configure.m4
 
+tarball: http://www.cs.uwaterloo.ca/~astorjoh/iml-1.0.5.tar.bz2
+
``````




---

archive/issue_comments_424463.json:
```json
{
    "body": "Branch: **[u/dimpase/packages/iml_105](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/iml_105)**",
    "created_at": "2019-02-14T15:40:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424463",
    "user": "https://github.com/dimpase"
}
```

Branch: **[u/dimpase/packages/iml_105](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/iml_105)**



---

archive/issue_comments_424464.json:
```json
{
    "body": "Commit: **[12cd746](https://github.com/sagemath/sagetrac-mirror/commit/12cd74682b6fc7de5a1f16403613c938affbf4dd)**",
    "created_at": "2019-02-14T15:40:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424464",
    "user": "https://github.com/dimpase"
}
```

Commit: **[12cd746](https://github.com/sagemath/sagetrac-mirror/commit/12cd74682b6fc7de5a1f16403613c938affbf4dd)**



---

archive/issue_comments_424465.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nthe patch I generate to conditionally disable checks for GMP is kind of big, as it's the result of autoreconf running... \n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/356621a31567d2d1f5fe5bcf6eacbd31f979ace0\">356621a</a></td><td><code>correctly setup sagelib dependencies-trac #27254</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/da291d87ddadbeba84d40d4effc89f60c5374e08\">da291d8</a></td><td><code>spkg-configure for GMP</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f7698ad35ffbf07db2cc56e7b99ae330adc18c67\">f7698ad</a></td><td><code>Move all the --with-mp logic into the spkg-configure.m4 for MPIR so that it</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/27b469252871005abd57fe3bc9d8bbf4e451a7f1\">27b4692</a></td><td><code>Replace various --with-gmp=$SAGE_LOCAL flags in spkg-installs with a</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/566bd21f96880e8c9c88fa87eb2858231f30c443\">566bd21</a></td><td><code>Reworked this a bit more</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a4ab4688e74f8166fec19643b16eff5f3b844fdb\">a4ab468</a></td><td><code>fix typo</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b979d7b8d93ce6da2967317766735de7a7a0c6a4\">b979d7b</a></td><td><code>added a bit more explanation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1e48b301165b7756b203e5a2935fb91375b1da7b\">1e48b30</a></td><td><code>correct logic for SAGE_GMP_PREFIX etc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/12cd74682b6fc7de5a1f16403613c938affbf4dd\">12cd746</a></td><td><code>iml 1.0.5 + autoconf/gmp fixes</code></td></tr></table>\n",
    "created_at": "2019-02-14T15:40:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424465",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:5" align="right">Comment 5</div>

the patch I generate to conditionally disable checks for GMP is kind of big, as it's the result of autoreconf running... 

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/356621a31567d2d1f5fe5bcf6eacbd31f979ace0">356621a</a></td><td><code>correctly setup sagelib dependencies-trac #27254</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/da291d87ddadbeba84d40d4effc89f60c5374e08">da291d8</a></td><td><code>spkg-configure for GMP</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f7698ad35ffbf07db2cc56e7b99ae330adc18c67">f7698ad</a></td><td><code>Move all the --with-mp logic into the spkg-configure.m4 for MPIR so that it</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/27b469252871005abd57fe3bc9d8bbf4e451a7f1">27b4692</a></td><td><code>Replace various --with-gmp=$SAGE_LOCAL flags in spkg-installs with a</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/566bd21f96880e8c9c88fa87eb2858231f30c443">566bd21</a></td><td><code>Reworked this a bit more</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a4ab4688e74f8166fec19643b16eff5f3b844fdb">a4ab468</a></td><td><code>fix typo</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b979d7b8d93ce6da2967317766735de7a7a0c6a4">b979d7b</a></td><td><code>added a bit more explanation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1e48b301165b7756b203e5a2935fb91375b1da7b">1e48b30</a></td><td><code>correct logic for SAGE_GMP_PREFIX etc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/12cd74682b6fc7de5a1f16403613c938affbf4dd">12cd746</a></td><td><code>iml 1.0.5 + autoconf/gmp fixes</code></td></tr></table>




---

archive/issue_events_356584.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-02-14T15:40:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27272#event-356584"
}
```



---

archive/issue_comments_424466.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nspkg-configure.m4 has to wait until BLAS/LAPACK is sorted out",
    "created_at": "2019-02-14T15:43:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424466",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:6" align="right">Comment 6</div>

spkg-configure.m4 has to wait until BLAS/LAPACK is sorted out



---

archive/issue_events_356585.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-02-14T17:30:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27272#event-356585"
}
```



---

archive/issue_events_356586.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-02-14T17:30:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27272#event-356586"
}
```



---

archive/issue_comments_424467.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nerrors in linbox - one package that uses iml\n\n```\nsage -t --long --warn-long 84.1 src/sage/matrix/matrix_integer_dense.pyx  # 1 doctest failed\nsage -t --long --warn-long 84.1 src/sage/matrix/matrix_modn_sparse.pyx  # 1 doctest failed\nsage -t --long --warn-long 84.1 src/sage/matrix/matrix_integer_sparse.pyx  # 1 doctest failed\n```",
    "created_at": "2019-02-14T17:30:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424467",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:7" align="right">Comment 7</div>

errors in linbox - one package that uses iml

```
sage -t --long --warn-long 84.1 src/sage/matrix/matrix_integer_dense.pyx  # 1 doctest failed
sage -t --long --warn-long 84.1 src/sage/matrix/matrix_modn_sparse.pyx  # 1 doctest failed
sage -t --long --warn-long 84.1 src/sage/matrix/matrix_integer_sparse.pyx  # 1 doctest failed
```



---

archive/issue_comments_424468.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nthis is the patch to be applied to the original imp directory, before\n`./bootstrap && autoreconf -ivf`:\n\n```diff\ndiff --git a/configure.ac b/configure.ac\nindex 2a1d666..d362f31 100644\n--- a/configure.ac\n+++ b/configure.ac\n@@ -68,6 +68,7 @@ AC_CHECK_FUNCS(calloc floor)\n \n IML_VERBOSE_MODE\n IML_DEFAULT_PATH\n+AS_IF([test \"x$SAGE_GMP_PREFIX\" = \"x$SAGE_LOCAL\"], [\n IML_CHECK_GMP(,,[AC_MSG_ERROR(\n GMP not found! \n GMP version 3.1.1 or greater is required for this library to compile. \n@@ -75,6 +76,7 @@ Please make sure GMP is installed and specify the header and libraries\n location with the options --with-gmp-include=<path> and --with-gmp-lib=<path>\n respectively when running configure.\n )])\n+])\n \n IML_CHECK_CBLAS(,,[AC_MSG_WARN(\n CBLAS not found!\n```",
    "created_at": "2019-02-14T18:24:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424468",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:8" align="right">Comment 8</div>

this is the patch to be applied to the original imp directory, before
`./bootstrap && autoreconf -ivf`:

```diff
diff --git a/configure.ac b/configure.ac
index 2a1d666..d362f31 100644
--- a/configure.ac
+++ b/configure.ac
@@ -68,6 +68,7 @@ AC_CHECK_FUNCS(calloc floor)
 
 IML_VERBOSE_MODE
 IML_DEFAULT_PATH
+AS_IF([test "x$SAGE_GMP_PREFIX" = "x$SAGE_LOCAL"], [
 IML_CHECK_GMP(,,[AC_MSG_ERROR(
 GMP not found! 
 GMP version 3.1.1 or greater is required for this library to compile. 
@@ -75,6 +76,7 @@ Please make sure GMP is installed and specify the header and libraries
 location with the options --with-gmp-include=<path> and --with-gmp-lib=<path>
 respectively when running configure.
 )])
+])
 
 IML_CHECK_CBLAS(,,[AC_MSG_WARN(
 CBLAS not found!
```



---

archive/issue_comments_424469.json:
```json
{
    "body": "1.0.4 log - configure is run twice (sic!)",
    "created_at": "2019-02-14T23:59:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424469",
    "user": "https://github.com/dimpase"
}
```

1.0.4 log - configure is run twice (sic!)



---

archive/issue_comments_424470.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nAttachment: **[iml-1.0.4p1.p2.log](https://github.com/sagemath/sage/files/ticket27272/iml-1.0.4p1.p2.log)**\n\nsee attachment for failed attempt to go back to the current Sage IML and doing the same patch there - configure is run twice, and the 2nd time it's invoked by make, with wrong parameters, leading to a failure in case of system GMP.",
    "created_at": "2019-02-15T00:03:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424470",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:9" align="right">Comment 9</div>

Attachment: **[iml-1.0.4p1.p2.log](https://github.com/sagemath/sage/files/ticket27272/iml-1.0.4p1.p2.log)**

see attachment for failed attempt to go back to the current Sage IML and doing the same patch there - configure is run twice, and the 2nd time it's invoked by make, with wrong parameters, leading to a failure in case of system GMP.



---

archive/issue_comments_424471.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nPruned output of `make -d`:\n\n```\nUpdating makefiles....\n Considering target file 'Makefile'.\n   Considering target file 'Makefile.in'.\n     Considering target file 'aclocal.m4'.\n      Prerequisite 'config/libtool.m4' is newer than target 'aclocal.m4'.\n      Prerequisite 'config/ltoptions.m4' is newer than target 'aclocal.m4'.\n      Prerequisite 'config/ltsugar.m4' is newer than target 'aclocal.m4'.\n      Prerequisite 'config/ltversion.m4' is newer than target 'aclocal.m4'.\n      Prerequisite 'config/lt~obsolete.m4' is newer than target 'aclocal.m4'.\n     Must remake target 'aclocal.m4'.\nCDPATH=\"${ZSH_VERSION+.}:\" && cd . && /bin/bash /home/marc/tmp/iml-1.0.4p1/missing aclocal-1.16 -I config\n     Successfully remade target file 'aclocal.m4'.\n    Prerequisite 'aclocal.m4' is newer than target 'Makefile.in'.\n   Must remake target 'Makefile.in'.\n cd . && /bin/bash /home/marc/tmp/iml-1.0.4p1/missing automake-1.16 --gnu\n   Successfully remade target file 'Makefile.in'.\n   Considering target file 'config.status'.\n     Considering target file 'configure'.\n      Prerequisite 'aclocal.m4' is newer than target 'configure'.\n     Must remake target 'configure'.\nCDPATH=\"${ZSH_VERSION+.}:\" && cd . && /bin/bash /home/marc/tmp/iml-1.0.4p1/missing autoconf\n    Prerequisite 'configure' is newer than target 'config.status'.\n   Must remake target 'config.status'.\n/bin/bash ./config.status --recheck\nrunning CONFIG_SHELL=/bin/bash /bin/bash ./configure --no-create --no-recursion\n```",
    "created_at": "2019-02-15T08:54:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424471",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:10" align="right">Comment 10</div>

Pruned output of `make -d`:

```
Updating makefiles....
 Considering target file 'Makefile'.
   Considering target file 'Makefile.in'.
     Considering target file 'aclocal.m4'.
      Prerequisite 'config/libtool.m4' is newer than target 'aclocal.m4'.
      Prerequisite 'config/ltoptions.m4' is newer than target 'aclocal.m4'.
      Prerequisite 'config/ltsugar.m4' is newer than target 'aclocal.m4'.
      Prerequisite 'config/ltversion.m4' is newer than target 'aclocal.m4'.
      Prerequisite 'config/lt~obsolete.m4' is newer than target 'aclocal.m4'.
     Must remake target 'aclocal.m4'.
CDPATH="${ZSH_VERSION+.}:" && cd . && /bin/bash /home/marc/tmp/iml-1.0.4p1/missing aclocal-1.16 -I config
     Successfully remade target file 'aclocal.m4'.
    Prerequisite 'aclocal.m4' is newer than target 'Makefile.in'.
   Must remake target 'Makefile.in'.
 cd . && /bin/bash /home/marc/tmp/iml-1.0.4p1/missing automake-1.16 --gnu
   Successfully remade target file 'Makefile.in'.
   Considering target file 'config.status'.
     Considering target file 'configure'.
      Prerequisite 'aclocal.m4' is newer than target 'configure'.
     Must remake target 'configure'.
CDPATH="${ZSH_VERSION+.}:" && cd . && /bin/bash /home/marc/tmp/iml-1.0.4p1/missing autoconf
    Prerequisite 'configure' is newer than target 'config.status'.
   Must remake target 'config.status'.
/bin/bash ./config.status --recheck
running CONFIG_SHELL=/bin/bash /bin/bash ./configure --no-create --no-recursion
```



---

archive/issue_comments_424472.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nSo this has to do with timestamps being wrong. I have success with applying the patch in comment 8, followed by autoreconf -ivf, and packaging the result. Such a tarball does not trigger the 2nd run of configure.",
    "created_at": "2019-02-15T14:25:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424472",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:11" align="right">Comment 11</div>

So this has to do with timestamps being wrong. I have success with applying the patch in comment 8, followed by autoreconf -ivf, and packaging the result. Such a tarball does not trigger the 2nd run of configure.



---

archive/issue_comments_424473.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nI'm sort of confused by this patch.  Why are we patching even the INSTALL instructions?  Many of the files being patched here are also generated files that probably don't need to be patched so much, as they have nothing to do with the change you made to configure.ac.   Perhaps I can take a look at this more later tomorrow or something.",
    "created_at": "2019-02-18T17:44:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424473",
    "user": "https://github.com/embray"
}
```

<div id="comment:12" align="right">Comment 12</div>

I'm sort of confused by this patch.  Why are we patching even the INSTALL instructions?  Many of the files being patched here are also generated files that probably don't need to be patched so much, as they have nothing to do with the change you made to configure.ac.   Perhaps I can take a look at this more later tomorrow or something.



---

archive/issue_comments_424474.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nSo the problem I'm having with iml, at least on Debian, is simply the fact that for blas and for GMP it has some kind of overwrought non-standard macros for detecting them, that run into the same kinds of problems that led me to declare in the first place that I did *not* want to provide some mechanism to search for the exact path to the GMP shared object (as opposed to just trying `-lgmp` and seeing if it works as `AC_CHECK_LIB` and the like do).\n\nInstead, iml's autoconf macros (see e.g. `config/gmp-check.m4` in the iml source) really wants to check the full path for the header files and libraries, and check that those files exist at some specific path.  To do this it has a list of default prefixes it checks in (`/usr` and `/usr/local`), which in the Sage `spkg-install` we also prepend `$SAGE_LOCAL` to with `--with-default=$SAGE_LOCAL`.\n\nHowever, on Debian and Ubuntu which use a multiarch layout this fails: The default settings will not find the GMP headers and shared object under `/usr/include/x86_64-linux-gnu` and `/usr/lib/x86_64-linux-gnu` (for example) to use the system lib.\n\nI was able to get iml to build in Sage with the system GMP by configuring it like:\n\n```\n./configure --with-gmp-include=/usr/include/$(gcc -print-multiarch) \\\n            --with-gmp-lib=/usr/lib/$(gcc -print-multiarch) \\\n            --with-cblas=\"$(pkg-config --libs cblas)\" \\\n            --with-cblas-includes=\"$(pkg-config --cflags cblas)\"\n```\n\n(for BLAS just using pkg-config works fine).\n\nSo I think the best thing to do, while annoying, is to simply pass the correct `--with-gmp-include` and `--with-gmp-lib` flags for the platform we're building on.  Which kind of stinks because in principle those could take any possible value.  In practice, however, for most systems it will be in one of just a few places, and I have some more generic code elsewhere I can integrate here that will work for most platforms.\n\nIn other words, we need some custom code here that works similarly to what iml's `configure.ac` is doing, but checks in a wider range of locations, including multi-arch directories where they exist, then pass the correct values for these flags.",
    "created_at": "2019-02-18T18:16:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424474",
    "user": "https://github.com/embray"
}
```

<div id="comment:13" align="right">Comment 13</div>

So the problem I'm having with iml, at least on Debian, is simply the fact that for blas and for GMP it has some kind of overwrought non-standard macros for detecting them, that run into the same kinds of problems that led me to declare in the first place that I did *not* want to provide some mechanism to search for the exact path to the GMP shared object (as opposed to just trying `-lgmp` and seeing if it works as `AC_CHECK_LIB` and the like do).

Instead, iml's autoconf macros (see e.g. `config/gmp-check.m4` in the iml source) really wants to check the full path for the header files and libraries, and check that those files exist at some specific path.  To do this it has a list of default prefixes it checks in (`/usr` and `/usr/local`), which in the Sage `spkg-install` we also prepend `$SAGE_LOCAL` to with `--with-default=$SAGE_LOCAL`.

However, on Debian and Ubuntu which use a multiarch layout this fails: The default settings will not find the GMP headers and shared object under `/usr/include/x86_64-linux-gnu` and `/usr/lib/x86_64-linux-gnu` (for example) to use the system lib.

I was able to get iml to build in Sage with the system GMP by configuring it like:

```
./configure --with-gmp-include=/usr/include/$(gcc -print-multiarch) \
            --with-gmp-lib=/usr/lib/$(gcc -print-multiarch) \
            --with-cblas="$(pkg-config --libs cblas)" \
            --with-cblas-includes="$(pkg-config --cflags cblas)"
```

(for BLAS just using pkg-config works fine).

So I think the best thing to do, while annoying, is to simply pass the correct `--with-gmp-include` and `--with-gmp-lib` flags for the platform we're building on.  Which kind of stinks because in principle those could take any possible value.  In practice, however, for most systems it will be in one of just a few places, and I have some more generic code elsewhere I can integrate here that will work for most platforms.

In other words, we need some custom code here that works similarly to what iml's `configure.ac` is doing, but checks in a wider range of locations, including multi-arch directories where they exist, then pass the correct values for these flags.



---

archive/issue_comments_424475.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nReplying to [@embray](#comment%3A12):\n> I'm sort of confused by this patch.  Why are we patching even the INSTALL instructions?  Many of the files being patched here are also generated files that probably don't need to be patched so much, as they have nothing to do with the change you made to configure.ac.   Perhaps I can take a look at this more later tomorrow or something.\n\nthis is what happens if you run autoreconf after editing configure.ac\n(perhaps using the matching autoconf version would lead to a smaller patch...)",
    "created_at": "2019-02-18T21:16:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424475",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:14" align="right">Comment 14</div>

Replying to [@embray](#comment%3A12):
> I'm sort of confused by this patch.  Why are we patching even the INSTALL instructions?  Many of the files being patched here are also generated files that probably don't need to be patched so much, as they have nothing to do with the change you made to configure.ac.   Perhaps I can take a look at this more later tomorrow or something.

this is what happens if you run autoreconf after editing configure.ac
(perhaps using the matching autoconf version would lead to a smaller patch...)



---

archive/issue_comments_424476.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nEven the install instructions though?\n\nIn any case, I don't think anything needs to be patched here.  IML already has a mechanism for pointing to the correct GMP.  It's just a bit needlessly cumbersome, since there's no reason it *needs* to have the exact paths to the headers in order to just find that there is a `gmp.h` on the standard include paths (as something like `AC_CHECK_HEADERS` does).\n\nSo now we have the additional burden, at least when building iml against a system GMP, of grubbing around for the right system include path in the correct order, make sure `gmp.h` is in one of them, and return that path.  I think we can do this easily enough.  It's just an extra hassle.\n\nIf I'm reading the implementation of `IML_CHECK_GMP` correctly we only need to do this for the header too, since it literally reads `test -r \"${GMP_HEADER}/gmp.h\"` (where `GMP_HEADER` is something like `/usr/include`).",
    "created_at": "2019-02-19T15:48:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424476",
    "user": "https://github.com/embray"
}
```

<div id="comment:15" align="right">Comment 15</div>

Even the install instructions though?

In any case, I don't think anything needs to be patched here.  IML already has a mechanism for pointing to the correct GMP.  It's just a bit needlessly cumbersome, since there's no reason it *needs* to have the exact paths to the headers in order to just find that there is a `gmp.h` on the standard include paths (as something like `AC_CHECK_HEADERS` does).

So now we have the additional burden, at least when building iml against a system GMP, of grubbing around for the right system include path in the correct order, make sure `gmp.h` is in one of them, and return that path.  I think we can do this easily enough.  It's just an extra hassle.

If I'm reading the implementation of `IML_CHECK_GMP` correctly we only need to do this for the header too, since it literally reads `test -r "${GMP_HEADER}/gmp.h"` (where `GMP_HEADER` is something like `/usr/include`).



---

archive/issue_comments_424477.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nCompiling a one-liner with `#include <gmp.h>` using `gcc -M` ought to produce the right include path. Not sure about clang.",
    "created_at": "2019-02-19T16:21:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424477",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:16" align="right">Comment 16</div>

Compiling a one-liner with `#include <gmp.h>` using `gcc -M` ought to produce the right include path. Not sure about clang.



---

archive/issue_comments_424478.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nI found a macro that does essentially this.  It should work for clang as well: http://git.savannah.gnu.org/gitweb/?p=autoconf-archive.git;a=blob_plain;f=m4/ax_absolute_header.m4\n\nI just experimented with it and it looks like it gets the job done.  I'm going to try it with iml now.",
    "created_at": "2019-02-19T16:27:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424478",
    "user": "https://github.com/embray"
}
```

<div id="comment:17" align="right">Comment 17</div>

I found a macro that does essentially this.  It should work for clang as well: http://git.savannah.gnu.org/gitweb/?p=autoconf-archive.git;a=blob_plain;f=m4/ax_absolute_header.m4

I just experimented with it and it looks like it gets the job done.  I'm going to try it with iml now.



---

archive/issue_comments_424479.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nReplying to [@embray](#comment%3A15):\n> Even the install instructions though?\n> \n\nyep, it's one from autotools, and apparently it evolved...\n\n> In any case, I don't think anything needs to be patched here.  IML already has a mechanism for pointing to the correct GMP.  It's just a bit needlessly cumbersome, since there's no reason it *needs* to have the exact paths to the headers in order to just find that there is a `gmp.h` on the standard include paths (as something like `AC_CHECK_HEADERS` does).\n> \n> So now we have the additional burden, at least when building iml against a system GMP, of grubbing around for the right system include path in the correct order, make sure `gmp.h` is in one of them, and return that path.  I think we can do this easily enough.  It's just an extra hassle.\n> \n> If I'm reading the implementation of `IML_CHECK_GMP` correctly we only need to do this for the header too, since it literally reads `test -r \"${GMP_HEADER}/gmp.h\"` (where `GMP_HEADER` is something like `/usr/include`).\n\nI don't think that `IML_CHECK_GMP` will work if the compiler does not have `/usr/local/include` in its list of default paths, or the linker does not know about libs in `/usr/local/lib` without being supplied with the `-L` pointing there---something that might be the case on *BSD (and our favourite, OSX :-))\n\nIt might be easier just to replace it by something that works in all cases.",
    "created_at": "2019-02-19T21:14:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424479",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:18" align="right">Comment 18</div>

Replying to [@embray](#comment%3A15):
> Even the install instructions though?
> 

yep, it's one from autotools, and apparently it evolved...

> In any case, I don't think anything needs to be patched here.  IML already has a mechanism for pointing to the correct GMP.  It's just a bit needlessly cumbersome, since there's no reason it *needs* to have the exact paths to the headers in order to just find that there is a `gmp.h` on the standard include paths (as something like `AC_CHECK_HEADERS` does).
> 
> So now we have the additional burden, at least when building iml against a system GMP, of grubbing around for the right system include path in the correct order, make sure `gmp.h` is in one of them, and return that path.  I think we can do this easily enough.  It's just an extra hassle.
> 
> If I'm reading the implementation of `IML_CHECK_GMP` correctly we only need to do this for the header too, since it literally reads `test -r "${GMP_HEADER}/gmp.h"` (where `GMP_HEADER` is something like `/usr/include`).

I don't think that `IML_CHECK_GMP` will work if the compiler does not have `/usr/local/include` in its list of default paths, or the linker does not know about libs in `/usr/local/lib` without being supplied with the `-L` pointing there---something that might be the case on *BSD (and our favourite, OSX :-))

It might be easier just to replace it by something that works in all cases.



---

archive/issue_comments_424480.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nI made this work (I think) as part of #27212.",
    "created_at": "2019-02-20T16:12:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424480",
    "user": "https://github.com/embray"
}
```

<div id="comment:19" align="right">Comment 19</div>

I made this work (I think) as part of #27212.



---

archive/issue_comments_424481.json:
```json
{
    "body": "Dependencies: **#27212**",
    "created_at": "2019-02-20T16:12:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424481",
    "user": "https://github.com/embray"
}
```

Dependencies: **#27212**



---

archive/issue_comments_424482.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nTo be clear what I meant, on FreeBSD, where GMP lives in `/usr/local`,  to make IML's configure to pass GMP checks, I need to do\n\n```\nCC=\"cc -I/usr/local/include\" ./configure \n```\nas without setting `CC` this way  it fails with\n\n```\nDefault checking path = /usr /usr/local\nchecking for GMP >= 3.1.1... not found\nconfigure: error: GMP not found!\nGMP version 3.1.1 or greater is required for this library to compile.\nPlease make sure GMP is installed and specify the header and libraries\nlocation with the options --with-gmp-include=<path> and --with-gmp-lib=<path>\nrespectively when running configure.\n```\nNote that specifying `--with-gmp-include=/usr/local/include --with-gmp-lib=/usr/local/lib ` without setting `CC` as above fails just the same.\n\nThe reason is as I said: /usr/local/include is not in the default cc's path:\n\n```\n$ cat t.c\n#include <gmp.h>\n$ cc -c t.c                      # fails\nt.c:1:10: fatal error: 'gmp.h' file not found\n#include <gmp.h>\n         ^~~~~~~\n1 error generated.\n$ cc -I/usr/local/include -c t.c # OK\n```",
    "created_at": "2019-02-20T20:30:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424482",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:20" align="right">Comment 20</div>

To be clear what I meant, on FreeBSD, where GMP lives in `/usr/local`,  to make IML's configure to pass GMP checks, I need to do

```
CC="cc -I/usr/local/include" ./configure 
```
as without setting `CC` this way  it fails with

```
Default checking path = /usr /usr/local
checking for GMP >= 3.1.1... not found
configure: error: GMP not found!
GMP version 3.1.1 or greater is required for this library to compile.
Please make sure GMP is installed and specify the header and libraries
location with the options --with-gmp-include=<path> and --with-gmp-lib=<path>
respectively when running configure.
```
Note that specifying `--with-gmp-include=/usr/local/include --with-gmp-lib=/usr/local/lib ` without setting `CC` as above fails just the same.

The reason is as I said: /usr/local/include is not in the default cc's path:

```
$ cat t.c
#include <gmp.h>
$ cc -c t.c                      # fails
t.c:1:10: fatal error: 'gmp.h' file not found
#include <gmp.h>
         ^~~~~~~
1 error generated.
$ cc -I/usr/local/include -c t.c # OK
```



---

archive/issue_comments_424483.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nUp to this point you never said anything about FreeBSD on this ticket, only Debian 9.  That seems like a totally unrelated issue.\n\nThere does seem to be an annoyance in IML's configure that it just assumes `/usr/local/include` is on the compiler's default include path.  ISTM that could be resolved by passing it in `CFLAGS` and not overriding `CC` but I'm not sure.\n\nIn any case, that does not seem to be the issue you're describing in the ticket description.",
    "created_at": "2019-02-21T10:42:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424483",
    "user": "https://github.com/embray"
}
```

<div id="comment:21" align="right">Comment 21</div>

Up to this point you never said anything about FreeBSD on this ticket, only Debian 9.  That seems like a totally unrelated issue.

There does seem to be an annoyance in IML's configure that it just assumes `/usr/local/include` is on the compiler's default include path.  ISTM that could be resolved by passing it in `CFLAGS` and not overriding `CC` but I'm not sure.

In any case, that does not seem to be the issue you're describing in the ticket description.



---

archive/issue_comments_424484.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nIt is related to how exactly IML_CHECK_GMP is broken, but I am fine with dealing with this on another ticket.",
    "created_at": "2019-02-21T11:09:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424484",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:22" align="right">Comment 22</div>

It is related to how exactly IML_CHECK_GMP is broken, but I am fine with dealing with this on another ticket.



---

archive/issue_comments_424485.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nI agree that, as implemented, it's not good.\n\nWhy does GMP live in /usr/local though?",
    "created_at": "2019-02-21T11:20:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424485",
    "user": "https://github.com/embray"
}
```

<div id="comment:23" align="right">Comment 23</div>

I agree that, as implemented, it's not good.

Why does GMP live in /usr/local though?



---

archive/issue_comments_424486.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nthat's a typical *BSD (and Solaris) thing, they keep extra packages in various places out of the main tree, see e.g. https://unix.stackexchange.com/questions/332764/role-of-the-usr-local-directory-in-freebsd",
    "created_at": "2019-02-21T19:32:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424486",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:24" align="right">Comment 24</div>

that's a typical *BSD (and Solaris) thing, they keep extra packages in various places out of the main tree, see e.g. https://unix.stackexchange.com/questions/332764/role-of-the-usr-local-directory-in-freebsd



---

archive/issue_comments_424487.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nOK, let's keep this on the wishlist. Ideally it's got to be fixed upstream.",
    "created_at": "2019-02-22T08:01:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424487",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:25" align="right">Comment 25</div>

OK, let's keep this on the wishlist. Ideally it's got to be fixed upstream.



---

archive/issue_comments_424488.json:
```json
{
    "body": "Changed commit from **[12cd746](https://github.com/sagemath/sagetrac-mirror/commit/12cd74682b6fc7de5a1f16403613c938affbf4dd)** to none",
    "created_at": "2019-02-22T08:01:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424488",
    "user": "https://github.com/dimpase"
}
```

Changed commit from **[12cd746](https://github.com/sagemath/sagetrac-mirror/commit/12cd74682b6fc7de5a1f16403613c938affbf4dd)** to none



---

archive/issue_events_356587.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-02-22T08:01:40Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27272#event-356587"
}
```



---

archive/issue_events_356588.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-02-22T08:01:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27272#event-356588"
}
```



---

archive/issue_comments_424489.json:
```json
{
    "body": "Changed branch from **[u/dimpase/packages/iml_105](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/iml_105)** to none",
    "created_at": "2019-02-22T08:01:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424489",
    "user": "https://github.com/dimpase"
}
```

Changed branch from **[u/dimpase/packages/iml_105](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/iml_105)** to none



---

archive/issue_comments_424490.json:
```json
{
    "body": "Changed keywords from **spkg-configure** to **spkg-configure, freebsd**",
    "created_at": "2019-02-22T08:01:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424490",
    "user": "https://github.com/dimpase"
}
```

Changed keywords from **spkg-configure** to **spkg-configure, freebsd**



---

archive/issue_comments_424491.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nIn this case I'm still fine with applying a patch, but all it needs is a simple and generic patch to not just *assume* that `/usr/include` and `/usr/local/include` must be on the compiler's default include path.",
    "created_at": "2019-02-22T13:29:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424491",
    "user": "https://github.com/embray"
}
```

<div id="comment:26" align="right">Comment 26</div>

In this case I'm still fine with applying a patch, but all it needs is a simple and generic patch to not just *assume* that `/usr/include` and `/usr/local/include` must be on the compiler's default include path.



---

archive/issue_comments_424492.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n iml only works with MP_LIBRARY provided in SAGE_LOCAL, at least this is the case on Debian 9.\n \n-they have a very only autoconf macro to detect GMP, which it particular won't work for libgmp in some arch-specfic location such as /usr/lib64/.\n+they have a very old autoconf macro to detect GMP, which it particular won't work for libgmp in some arch-specfic location such as /usr/lib64/.\n  \n This breaks #27212. It works with GMP provided by the system if I just remove the call to their macro, re-run their bootstrap, repackage tarball. \n \n``````\n",
    "created_at": "2019-02-28T17:00:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424492",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 iml only works with MP_LIBRARY provided in SAGE_LOCAL, at least this is the case on Debian 9.
 
-they have a very only autoconf macro to detect GMP, which it particular won't work for libgmp in some arch-specfic location such as /usr/lib64/.
+they have a very old autoconf macro to detect GMP, which it particular won't work for libgmp in some arch-specfic location such as /usr/lib64/.
  
 This breaks #27212. It works with GMP provided by the system if I just remove the call to their macro, re-run their bootstrap, repackage tarball. 
 
``````




---

archive/issue_comments_424493.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nI talked to upstream, and they would be happy to get patches for that GMP business.",
    "created_at": "2020-03-04T00:27:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424493",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:28" align="right">Comment 28</div>

I talked to upstream, and they would be happy to get patches for that GMP business.



---

archive/issue_events_356589.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-04-11T00:39:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27272#event-356589"
}
```



---

archive/issue_events_356590.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-04-11T00:39:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27272#event-356590"
}
```



---

archive/issue_comments_424494.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nhere is a simple spkg-configure, working on Debian buster (which has iml 1.0.4).\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4928cb956340a581d78f025acdcc97489db14ee8\">4928cb9</a></td><td><code>spkg-configure for iml</code></td></tr></table>\n",
    "created_at": "2020-04-11T00:39:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424494",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:29" align="right">Comment 29</div>

here is a simple spkg-configure, working on Debian buster (which has iml 1.0.4).

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4928cb956340a581d78f025acdcc97489db14ee8">4928cb9</a></td><td><code>spkg-configure for iml</code></td></tr></table>




---

archive/issue_comments_424495.json:
```json
{
    "body": "Branch: **[u/dimpase/packages/imlconfig](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/imlconfig)**",
    "created_at": "2020-04-11T00:39:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424495",
    "user": "https://github.com/dimpase"
}
```

Branch: **[u/dimpase/packages/imlconfig](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/imlconfig)**



---

archive/issue_comments_424496.json:
```json
{
    "body": "Changed dependencies from **#27212** to none",
    "created_at": "2020-04-11T00:39:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424496",
    "user": "https://github.com/dimpase"
}
```

Changed dependencies from **#27212** to none



---

archive/issue_comments_424497.json:
```json
{
    "body": "Commit: **[4928cb9](https://github.com/sagemath/sagetrac-mirror/commit/4928cb956340a581d78f025acdcc97489db14ee8)**",
    "created_at": "2020-04-11T00:39:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424497",
    "user": "https://github.com/dimpase"
}
```

Commit: **[4928cb9](https://github.com/sagemath/sagetrac-mirror/commit/4928cb956340a581d78f025acdcc97489db14ee8)**



---

archive/issue_events_356591.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-04-11T00:44:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27272#event-356591"
}
```



---

archive/issue_events_356592.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-04-11T00:44:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27272#event-356592"
}
```



---

archive/issue_events_356593.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-04-11T00:44:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "component: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27272#event-356593"
}
```



---

archive/issue_events_356594.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-04-11T00:44:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20build%3A%20configure",
    "label_color": "000080",
    "label_name": "component: build: configure",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27272#event-356594"
}
```



---

archive/issue_events_356595.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-04-11T00:44:57Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "title_is": "spkg-configure.m4 for iml",
    "title_was": "fix GMP recognition in iml spkg (and update iml along the way)",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27272#event-356595"
}
```



---

archive/issue_comments_424498.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nWorks on Gentoo with `sci-libs/iml`. Is that `SAGE_IML_MINVER` doing anything?",
    "created_at": "2020-04-11T01:02:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424498",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:31" align="right">Comment 31</div>

Works on Gentoo with `sci-libs/iml`. Is that `SAGE_IML_MINVER` doing anything?



---

archive/issue_events_356596.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-11T01:16:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27272#event-356596"
}
```



---

archive/issue_events_356597.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-11T01:16:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27272#event-356597"
}
```



---

archive/issue_comments_424499.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nNeeds distros/",
    "created_at": "2020-04-11T01:16:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424499",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:32" align="right">Comment 32</div>

Needs distros/



---

archive/issue_comments_424500.json:
```json
{
    "body": "Changed commit from **[4928cb9](https://github.com/sagemath/sagetrac-mirror/commit/4928cb956340a581d78f025acdcc97489db14ee8)** to **[8177463](https://github.com/sagemath/sagetrac-mirror/commit/8177463213722cbfa4c2bda9d1679c424c2bb5c1)**",
    "created_at": "2020-04-11T13:54:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424500",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4928cb9](https://github.com/sagemath/sagetrac-mirror/commit/4928cb956340a581d78f025acdcc97489db14ee8)** to **[8177463](https://github.com/sagemath/sagetrac-mirror/commit/8177463213722cbfa4c2bda9d1679c424c2bb5c1)**



---

archive/issue_comments_424501.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8177463213722cbfa4c2bda9d1679c424c2bb5c1\">8177463</a></td><td><code>commented out MINVER, added install info for gentoo</code></td></tr></table>\n",
    "created_at": "2020-04-11T13:54:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424501",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:33" align="right">Comment 33</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8177463213722cbfa4c2bda9d1679c424c2bb5c1">8177463</a></td><td><code>commented out MINVER, added install info for gentoo</code></td></tr></table>




---

archive/issue_comments_424502.json:
```json
{
    "body": "Changed commit from **[8177463](https://github.com/sagemath/sagetrac-mirror/commit/8177463213722cbfa4c2bda9d1679c424c2bb5c1)** to **[5a34c90](https://github.com/sagemath/sagetrac-mirror/commit/5a34c90e99e7f2a5ac437b46965987d57852368e)**",
    "created_at": "2020-04-11T14:02:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424502",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[8177463](https://github.com/sagemath/sagetrac-mirror/commit/8177463213722cbfa4c2bda9d1679c424c2bb5c1)** to **[5a34c90](https://github.com/sagemath/sagetrac-mirror/commit/5a34c90e99e7f2a5ac437b46965987d57852368e)**



---

archive/issue_comments_424503.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5a34c90e99e7f2a5ac437b46965987d57852368e\">5a34c90</a></td><td><code>more distro info added</code></td></tr></table>\n",
    "created_at": "2020-04-11T14:02:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424503",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:34" align="right">Comment 34</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5a34c90e99e7f2a5ac437b46965987d57852368e">5a34c90</a></td><td><code>more distro info added</code></td></tr></table>




---

archive/issue_comments_424504.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nAddded the distro info I could find for iml. Note that both versions 1.0.4 and 1.0.5 appear to work with Sage just fine.",
    "created_at": "2020-04-11T14:05:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424504",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:35" align="right">Comment 35</div>

Addded the distro info I could find for iml. Note that both versions 1.0.4 and 1.0.5 appear to work with Sage just fine.



---

archive/issue_events_356598.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-04-11T14:05:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27272#event-356598"
}
```



---

archive/issue_events_356599.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-04-11T14:05:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27272#event-356599"
}
```



---

archive/issue_comments_424505.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">Comment 36</div>\n\nBy the way, are you getting email notifications from trac?\nI don't get any since a day or two.",
    "created_at": "2020-04-11T14:06:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424505",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:36" align="right">Comment 36</div>

By the way, are you getting email notifications from trac?
I don't get any since a day or two.



---

archive/issue_comments_424506.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">Comment 37</div>\n\nReplying to [@dimpase](#comment%3A36):\n> By the way, are you getting email notifications from trac?\n> I don't get any since a day or two.\n\nThis has been an ongoing problem with SendGrid for as long as I can remember. They claim to retry 4xx errors for 72 hours, but they don't -- at least not in the cases where I get a phone call because some email from them went missing, which is often. I've attempted to whitelist their IP space on our servers, but identifying new IPs requires us to first miss a message from that IP. Anyone whose mail administrator enjoys whack-a-mole less than I do is likely to have even more problems.",
    "created_at": "2020-04-11T14:26:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424506",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:37" align="right">Comment 37</div>

Replying to [@dimpase](#comment%3A36):
> By the way, are you getting email notifications from trac?
> I don't get any since a day or two.

This has been an ongoing problem with SendGrid for as long as I can remember. They claim to retry 4xx errors for 72 hours, but they don't -- at least not in the cases where I get a phone call because some email from them went missing, which is often. I've attempted to whitelist their IP space on our servers, but identifying new IPs requires us to first miss a message from that IP. Anyone whose mail administrator enjoys whack-a-mole less than I do is likely to have even more problems.



---

archive/issue_comments_424507.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">Comment 38</div>\n\nI now no longer use an gmail address for trac notifications, and it started to work.\nPerhaps gmail started dropping SendGrid emails for me, as a special service, arrrgh...",
    "created_at": "2020-04-11T14:35:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424507",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:38" align="right">Comment 38</div>

I now no longer use an gmail address for trac notifications, and it started to work.
Perhaps gmail started dropping SendGrid emails for me, as a special service, arrrgh...



---

archive/issue_comments_424508.json:
```json
{
    "body": "Reviewer: **Isuru Fernando**",
    "created_at": "2020-04-11T19:59:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424508",
    "user": "https://github.com/isuruf"
}
```

Reviewer: **Isuru Fernando**



---

archive/issue_events_356600.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2020-04-11T19:59:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27272#event-356600"
}
```



---

archive/issue_events_356601.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2020-04-11T19:59:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27272#event-356601"
}
```



---

archive/issue_comments_424509.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">Comment 40</div>\n\nSome of the SendGrid servers that  we *do* have whitelisted are on a bunch of blacklists, which may be why those messages went missing. If I hadn't given them an explicit pass, we would have rejected them too. Normally sending to gmail is pretty reliable, because if you can't send to gmail, you go out of business. But the downside is that when things go wrong at gmail you'll never find out why.",
    "created_at": "2020-04-11T21:30:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424509",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:40" align="right">Comment 40</div>

Some of the SendGrid servers that  we *do* have whitelisted are on a bunch of blacklists, which may be why those messages went missing. If I hadn't given them an explicit pass, we would have rejected them too. Normally sending to gmail is pretty reliable, because if you can't send to gmail, you go out of business. But the downside is that when things go wrong at gmail you'll never find out why.



---

archive/issue_comments_424510.json:
```json
{
    "body": "Changed branch from **[u/dimpase/packages/imlconfig](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/imlconfig)** to **[5a34c90](https://github.com/sagemath/sagetrac-mirror/commit/5a34c90e99e7f2a5ac437b46965987d57852368e)**",
    "created_at": "2020-04-16T22:33:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27272#issuecomment-424510",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/dimpase/packages/imlconfig](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/imlconfig)** to **[5a34c90](https://github.com/sagemath/sagetrac-mirror/commit/5a34c90e99e7f2a5ac437b46965987d57852368e)**



---

archive/issue_events_356602.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-04-16T22:33:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27272#event-356602"
}
```



---

archive/issue_events_356603.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "0af715d7d1ed96d7cec9edeb077de774ba526e7f",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-04-16T22:33:35Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27272",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27272#event-356603"
}
```
