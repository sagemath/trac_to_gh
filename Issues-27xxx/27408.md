# Issue 27408: Edge view for graphs

archive/issues_027171.json:
```json
{
    "assignees": [],
    "body": "This ticket implements an edge view for graphs, as discussed in #22349 and in [this message](https://groups.google.com/d/msg/sage-devel/uEHBKekJ_Cw/peoyx4PaBQAJ).\n\nAn edge view is a read-only iterable container of edges enabling operations like `for e in E` and `e in E`. In can be iterated multiple times. Checking membership is done in constant time. It avoids the construction of edge lists and so consumes little memory.\n\nCC:  @nthiery @sagetrac-tmonteil\n\nBranch/Commit: **[`3af5bba`](https://github.com/sagemath/sagetrac-mirror/commit/3af5bba498be7277c4c4eb087124c1aee35eb9fd)**\n\nReviewer: **Jeroen Demeyer, Vincent Delecroix, Fr\u00e9d\u00e9ric Chapoton**\n\nAuthor: **David Coudert**\n\nComponent: **graph theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/27408_\n\n",
    "closed_at": "2019-11-30T13:36:36Z",
    "created_at": "2019-03-03T16:59:46Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Edge view for graphs",
    "type": "issue",
    "updated_at": "2019-11-30T13:36:36Z",
    "url": "https://github.com/sagemath/sage/issues/27408",
    "user": "https://github.com/dcoudert"
}
```
This ticket implements an edge view for graphs, as discussed in #22349 and in [this message](https://groups.google.com/d/msg/sage-devel/uEHBKekJ_Cw/peoyx4PaBQAJ).

An edge view is a read-only iterable container of edges enabling operations like `for e in E` and `e in E`. In can be iterated multiple times. Checking membership is done in constant time. It avoids the construction of edge lists and so consumes little memory.

CC:  @nthiery @sagetrac-tmonteil

Branch/Commit: **[`3af5bba`](https://github.com/sagemath/sagetrac-mirror/commit/3af5bba498be7277c4c4eb087124c1aee35eb9fd)**

Reviewer: **Jeroen Demeyer, Vincent Delecroix, Frédéric Chapoton**

Author: **David Coudert**

Component: **graph theory**

_Issue created by migration from https://trac.sagemath.org/ticket/27408_





---

archive/issue_events_378338.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-03-03T16:59:46Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27408#event-378338"
}
```



---

archive/issue_events_378339.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-03-03T16:59:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "eeeeee",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27408#event-378339"
}
```



---

archive/issue_events_378340.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-03-03T16:59:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27408#event-378340"
}
```



---

archive/issue_events_378341.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-03-03T16:59:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27408#event-378341"
}
```



---

archive/issue_comments_423892.json:
```json
{
    "body": "Branch: **[public/27408_edgeview](https://github.com/sagemath/sagetrac-mirror/tree/public/27408_edgeview)**",
    "created_at": "2019-03-03T21:19:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423892",
    "user": "https://github.com/dcoudert"
}
```

Branch: **[public/27408_edgeview](https://github.com/sagemath/sagetrac-mirror/tree/public/27408_edgeview)**



---

archive/issue_comments_423893.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThis is a first draft of an `EdgeView`. I tried to combined the flexibility offered by the parameters of `.edges()` and `.edge_iterator()`. I have not tested it with Python3 yet, only with Python2 to understand the impact and what should be fixed.\n\nFeedback is more than welcome, for instance concerning:\n- Is the location OK or should we move it another file ?\n- Should it be in Cython ?\n- how to make `next(E)` ?\n- should we add the option to call `E[i]` to get the ith edge, even if it's slow ?\n \n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fc42aa0137dd50fac68100dd84167df05f9f3739\"><code>fc42aa0</code></a></td><td><code>trac #27408: first trial of edge view</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/79b426bc235a76cbf87aad906de449f81db214f9\"><code>79b426b</code></a></td><td><code>trac #27408: fix doctests in views.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0e4961bc7fdff131f6d28ea346bd6df7439ca0e2\"><code>0e4961b</code></a></td><td><code>trac #27408: fix issues in graph module</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/01579875c3b76eaf76421decbdc89c4fde53793a\"><code>0157987</code></a></td><td><code>trac #27408: fix issues in other modules</code></td></tr></table>\n",
    "created_at": "2019-03-03T21:19:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423893",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:1" align="right">comment:1</div>

This is a first draft of an `EdgeView`. I tried to combined the flexibility offered by the parameters of `.edges()` and `.edge_iterator()`. I have not tested it with Python3 yet, only with Python2 to understand the impact and what should be fixed.

Feedback is more than welcome, for instance concerning:
- Is the location OK or should we move it another file ?
- Should it be in Cython ?
- how to make `next(E)` ?
- should we add the option to call `E[i]` to get the ith edge, even if it's slow ?
 
---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fc42aa0137dd50fac68100dd84167df05f9f3739"><code>fc42aa0</code></a></td><td><code>trac #27408: first trial of edge view</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/79b426bc235a76cbf87aad906de449f81db214f9"><code>79b426b</code></a></td><td><code>trac #27408: fix doctests in views.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0e4961bc7fdff131f6d28ea346bd6df7439ca0e2"><code>0e4961b</code></a></td><td><code>trac #27408: fix issues in graph module</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/01579875c3b76eaf76421decbdc89c4fde53793a"><code>0157987</code></a></td><td><code>trac #27408: fix issues in other modules</code></td></tr></table>




---

archive/issue_events_378342.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-03-03T21:19:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27408#event-378342"
}
```



---

archive/issue_comments_423894.json:
```json
{
    "body": "Commit: **[`0157987`](https://github.com/sagemath/sagetrac-mirror/commit/01579875c3b76eaf76421decbdc89c4fde53793a)**",
    "created_at": "2019-03-03T21:19:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423894",
    "user": "https://github.com/dcoudert"
}
```

Commit: **[`0157987`](https://github.com/sagemath/sagetrac-mirror/commit/01579875c3b76eaf76421decbdc89c4fde53793a)**



---

archive/issue_comments_423895.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI think having this separate `views.py` file is perfect. Also, prototyping is much easier in Python and the Cython phase should be kept for a later ticket.\n\nIn Python there is a difference between an iterator (what you obtain with `iter(X)` and on which you can apply `next`) and an iterable (something on which `iter(X)` make sense). It is dangerous to have an object that is doing both (e.g. when `X` is an iterator `iter(X)` returns `X` itself). `EdgeView` is definitely an **iterable**. I would simply disallow `next(E)` similarly to\n\n```\nsage: next([0,1,2])\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-1-21b4c4a0c628> in <module>()\n----> 1 next([Integer(0),Integer(1),Integer(2)])\n\nTypeError: list object is not an iterator\n```",
    "created_at": "2019-03-03T21:51:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423895",
    "user": "https://github.com/videlec"
}
```

<div id="comment:2" align="right">comment:2</div>

I think having this separate `views.py` file is perfect. Also, prototyping is much easier in Python and the Cython phase should be kept for a later ticket.

In Python there is a difference between an iterator (what you obtain with `iter(X)` and on which you can apply `next`) and an iterable (something on which `iter(X)` make sense). It is dangerous to have an object that is doing both (e.g. when `X` is an iterator `iter(X)` returns `X` itself). `EdgeView` is definitely an **iterable**. I would simply disallow `next(E)` similarly to

```
sage: next([0,1,2])
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-1-21b4c4a0c628> in <module>()
----> 1 next([Integer(0),Integer(1),Integer(2)])

TypeError: list object is not an iterator
```



---

archive/issue_comments_423896.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nOK. We can still do `next(iter(E))` to get first edge if needed.\n\nWe can certainly also replace `edge_iterator` by the `EdgeView`, but this can induce a small slow down.\n\nI have also create a class `VertexView` currently raising `NotImplementedError`. I'm not sure if it's needed.",
    "created_at": "2019-03-03T22:37:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423896",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:3" align="right">comment:3</div>

OK. We can still do `next(iter(E))` to get first edge if needed.

We can certainly also replace `edge_iterator` by the `EdgeView`, but this can induce a small slow down.

I have also create a class `VertexView` currently raising `NotImplementedError`. I'm not sure if it's needed.



---

archive/issue_comments_423897.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@dcoudert](#comment:3):\n> OK. We can still do `next(iter(E))` to get first edge if needed.\n\nThe various combinatorial sets in sage implements `.first()` and `.last()`.\n\n```\nsage: Partitions(5).first()\n[5]\nsage: Partitions(5).last()\n[1, 1, 1, 1, 1]\n```\n\n> We can certainly also replace `edge_iterator` by the `EdgeView`, but this can induce a small slow down.\n\nTo avoid slowdown there are several possibilities:\n- cache the edge view of the whole graph\n- have a pool of edge views to avoid creating the objects\n \n> I have also create a class `VertexView` currently raising `NotImplementedError`. I'm not sure if it's needed.\n\nThen remove it for now. I think that there are enough troubles introducing this `EdgeView`.",
    "created_at": "2019-03-04T08:08:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423897",
    "user": "https://github.com/videlec"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@dcoudert](#comment:3):
> OK. We can still do `next(iter(E))` to get first edge if needed.

The various combinatorial sets in sage implements `.first()` and `.last()`.

```
sage: Partitions(5).first()
[5]
sage: Partitions(5).last()
[1, 1, 1, 1, 1]
```

> We can certainly also replace `edge_iterator` by the `EdgeView`, but this can induce a small slow down.

To avoid slowdown there are several possibilities:
- cache the edge view of the whole graph
- have a pool of edge views to avoid creating the objects
 
> I have also create a class `VertexView` currently raising `NotImplementedError`. I'm not sure if it's needed.

Then remove it for now. I think that there are enough troubles introducing this `EdgeView`.



---

archive/issue_comments_423898.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@videlec](#comment:4):\n> Replying to [@dcoudert](#comment:3):\n> > We can certainly also replace `edge_iterator` by the `EdgeView`, but this can induce a small slow down.\n\n> \n> To avoid slowdown there are several possibilities:\n> - cache the edge view of the whole graph\n\nActually, the above makes sense if you want the following to be fast\n\n```\nsage: (0,3) in G.edges()\n```\n(Am I right that `G.edges()` would return the view?)",
    "created_at": "2019-03-04T08:10:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423898",
    "user": "https://github.com/videlec"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@videlec](#comment:4):
> Replying to [@dcoudert](#comment:3):
> > We can certainly also replace `edge_iterator` by the `EdgeView`, but this can induce a small slow down.

> 
> To avoid slowdown there are several possibilities:
> - cache the edge view of the whole graph

Actually, the above makes sense if you want the following to be fast

```
sage: (0,3) in G.edges()
```
(Am I right that `G.edges()` would return the view?)



---

archive/issue_comments_423899.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\n> The various combinatorial sets in sage implements `.first()` and `.last()`.\n\n`.first()` is easy, but `.last()` requires to iterate over all edges.\n\nActually, in the current implementation, when `sort=True`, we store a sorted list of edges. So getting the last one becomes easy. But when `sort=False`, we have to iterate.\nFurthermore, as the view is updated as the graph, we cannot store first/last edge.\n\n> - cache the edge view of the whole graph\n\nI don't know how to do that...\n\n> (Am I right that `G.edges()` would return the view?)\n\nYes.",
    "created_at": "2019-03-04T08:34:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423899",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:6" align="right">comment:6</div>

> The various combinatorial sets in sage implements `.first()` and `.last()`.

`.first()` is easy, but `.last()` requires to iterate over all edges.

Actually, in the current implementation, when `sort=True`, we store a sorted list of edges. So getting the last one becomes easy. But when `sort=False`, we have to iterate.
Furthermore, as the view is updated as the graph, we cannot store first/last edge.

> - cache the edge view of the whole graph

I don't know how to do that...

> (Am I right that `G.edges()` would return the view?)

Yes.



---

archive/issue_comments_423900.json:
```json
{
    "body": "Changed commit from **[`0157987`](https://github.com/sagemath/sagetrac-mirror/commit/01579875c3b76eaf76421decbdc89c4fde53793a)** to **[`5cf8344`](https://github.com/sagemath/sagetrac-mirror/commit/5cf8344cd92ff982bae5644340644556b0788ab5)**",
    "created_at": "2019-03-04T10:20:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423900",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0157987`](https://github.com/sagemath/sagetrac-mirror/commit/01579875c3b76eaf76421decbdc89c4fde53793a)** to **[`5cf8344`](https://github.com/sagemath/sagetrac-mirror/commit/5cf8344cd92ff982bae5644340644556b0788ab5)**



---

archive/issue_comments_423901.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5cf8344cd92ff982bae5644340644556b0788ab5\"><code>5cf8344</code></a></td><td><code>trac #27408: various corrections</code></td></tr></table>\n",
    "created_at": "2019-03-04T10:20:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423901",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5cf8344cd92ff982bae5644340644556b0788ab5"><code>5cf8344</code></a></td><td><code>trac #27408: various corrections</code></td></tr></table>




---

archive/issue_comments_423902.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nWhy the attributes `graph`, `directed`, etc of `EdgeView` do not start with underscore? With this version they would appear in the tab-completion which is not desirable.\n\nThe `sorted` function does not need a list as input. Replace `sorted(list(edges), ...)` with `sorted(edges, ...)`.\n\nWhy do you store the `directed` attribute in `EdgeView`?\n\nWhat I mean by cache is that the graph class could have a `_edge_view` attribute which is initialized with `EdgeView(self)` in `Graph.__init__`. Even if edges are added to the graph the edge view is magically updated (though you need to remove the `directed` attribute). It might even make sense to have two versions: `_edge_view` and `_edge_view_unlabelled`.",
    "created_at": "2019-03-04T10:31:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423902",
    "user": "https://github.com/videlec"
}
```

<div id="comment:8" align="right">comment:8</div>

Why the attributes `graph`, `directed`, etc of `EdgeView` do not start with underscore? With this version they would appear in the tab-completion which is not desirable.

The `sorted` function does not need a list as input. Replace `sorted(list(edges), ...)` with `sorted(edges, ...)`.

Why do you store the `directed` attribute in `EdgeView`?

What I mean by cache is that the graph class could have a `_edge_view` attribute which is initialized with `EdgeView(self)` in `Graph.__init__`. Even if edges are added to the graph the edge view is magically updated (though you need to remove the `directed` attribute). It might even make sense to have two versions: `_edge_view` and `_edge_view_unlabelled`.



---

archive/issue_comments_423903.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nYou want this to be fast. I would certainly do this in Cython.",
    "created_at": "2019-03-04T10:42:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423903",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">comment:9</div>

You want this to be fast. I would certainly do this in Cython.



---

archive/issue_comments_423904.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI think it should be called `EdgesView` (plural): you're making a view of all edges, not one particular edge.",
    "created_at": "2019-03-04T10:43:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423904",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:10" align="right">comment:10</div>

I think it should be called `EdgesView` (plural): you're making a view of all edges, not one particular edge.



---

archive/issue_comments_423905.json:
```json
{
    "body": "Changed commit from **[`5cf8344`](https://github.com/sagemath/sagetrac-mirror/commit/5cf8344cd92ff982bae5644340644556b0788ab5)** to **[`b3f6f4b`](https://github.com/sagemath/sagetrac-mirror/commit/b3f6f4b5dae864c21afd0aadc8c416326a2a1003)**",
    "created_at": "2019-03-04T10:44:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423905",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5cf8344`](https://github.com/sagemath/sagetrac-mirror/commit/5cf8344cd92ff982bae5644340644556b0788ab5)** to **[`b3f6f4b`](https://github.com/sagemath/sagetrac-mirror/commit/b3f6f4b5dae864c21afd0aadc8c416326a2a1003)**



---

archive/issue_comments_423906.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b3f6f4b5dae864c21afd0aadc8c416326a2a1003\"><code>b3f6f4b</code></a></td><td><code>trac #27408: start internal variables with _</code></td></tr></table>\n",
    "created_at": "2019-03-04T10:44:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423906",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b3f6f4b5dae864c21afd0aadc8c416326a2a1003"><code>b3f6f4b</code></a></td><td><code>trac #27408: start internal variables with _</code></td></tr></table>




---

archive/issue_comments_423907.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nAgain for performance, this should be as low-level as possible so I would drop the inheritance from `SageObject`.",
    "created_at": "2019-03-04T10:45:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423907",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:12" align="right">comment:12</div>

Again for performance, this should be as low-level as possible so I would drop the inheritance from `SageObject`.



---

archive/issue_comments_423908.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@videlec](#comment:2):\n> the Cython phase should be kept for a later ticket.\n\nI disagree here. I would agree with you if we would be adding a completely new feature. But here, we are changing an existing feature (namely `edges()`). So we don't want this to become slower than before.",
    "created_at": "2019-03-04T10:48:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423908",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@videlec](#comment:2):
> the Cython phase should be kept for a later ticket.

I disagree here. I would agree with you if we would be adding a completely new feature. But here, we are changing an existing feature (namely `edges()`). So we don't want this to become slower than before.



---

archive/issue_comments_423909.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nWhat do you think of this proposal from #22349?\n\n1. Make the default `sort=None`. In this case, give a deprecation warning and try to sort but fail gracefully if the input is not sortable.\n\n2. If `sort=True` is given, always sort (raising an exception if the sorting failed)\n\n3. If `sort=False` is given, never sort.",
    "created_at": "2019-03-04T10:51:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423909",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:14" align="right">comment:14</div>

What do you think of this proposal from #22349?

1. Make the default `sort=None`. In this case, give a deprecation warning and try to sort but fail gracefully if the input is not sortable.

2. If `sort=True` is given, always sort (raising an exception if the sorting failed)

3. If `sort=False` is given, never sort.



---

archive/issue_events_378343.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-03-04T10:54:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27408#event-378343"
}
```



---

archive/issue_events_378344.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-03-04T10:54:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27408#event-378344"
}
```



---

archive/issue_comments_423910.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nI'm not going to insist on the cythonization, but I'd like to hear the opinion from others on this ticket.",
    "created_at": "2019-03-04T10:54:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423910",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:15" align="right">comment:15</div>

I'm not going to insist on the cythonization, but I'd like to hear the opinion from others on this ticket.



---

archive/issue_comments_423911.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@dcoudert](#comment:1):\n> - should we add the option to call `E[i]` to get the ith edge, even if it's slow ?\n\nI would say yes, since the old `edges()` had that functionality.",
    "created_at": "2019-03-04T10:56:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423911",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@dcoudert](#comment:1):
> - should we add the option to call `E[i]` to get the ith edge, even if it's slow ?

I would say yes, since the old `edges()` had that functionality.



---

archive/issue_comments_423912.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nI also suggest to keep the interface as simple as possible. For example, for the `vertices` argument, I would support only `None` and a `list` (and not: a single vertex).\n\nI also wouldn't do `True if labels else False`. Just write `labels` and assume that people don't give funny arguments for `labels`.\n\nTo check for a `key` function, use `key is not None` instead of `key`.",
    "created_at": "2019-03-04T11:01:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423912",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">comment:17</div>

I also suggest to keep the interface as simple as possible. For example, for the `vertices` argument, I would support only `None` and a `list` (and not: a single vertex).

I also wouldn't do `True if labels else False`. Just write `labels` and assume that people don't give funny arguments for `labels`.

To check for a `key` function, use `key is not None` instead of `key`.



---

archive/issue_comments_423913.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nIn various places, you are replacing calls to `edges()` by `edge_iterator()`.\n\nThat looks like a backwards change: isn't the eventual goal to deprecate `edge_iterator()` and replace it by `edges()`, similarly to how `itervalues()` was deprecated in favor of `values()` in Python?",
    "created_at": "2019-03-04T11:10:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423913",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:18" align="right">comment:18</div>

In various places, you are replacing calls to `edges()` by `edge_iterator()`.

That looks like a backwards change: isn't the eventual goal to deprecate `edge_iterator()` and replace it by `edges()`, similarly to how `itervalues()` was deprecated in favor of `values()` in Python?



---

archive/issue_comments_423914.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nCython allows you to use `yield from`, so you could implement `__iter__` as\n\n```python\n        if self._sort_edges:\n            yield from sorted(self, key=self._sort_edges_key)\n        elif self._graph._directed:\n            yield from self._graph._backend.iterator_out_edges(self._vertices, self._labels)\n            if self._ignore_direction:\n                yield from self._graph._backend.iterator_in_edges(self._vertices, self._labels)\n        else:\n            yield from self._graph._backend.iterator_edges(self._vertices, self._labels)\n```\nwhich I find easier to read and it's probably more efficient too.",
    "created_at": "2019-03-04T11:22:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423914",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:19" align="right">comment:19</div>

Cython allows you to use `yield from`, so you could implement `__iter__` as

```python
        if self._sort_edges:
            yield from sorted(self, key=self._sort_edges_key)
        elif self._graph._directed:
            yield from self._graph._backend.iterator_out_edges(self._vertices, self._labels)
            if self._ignore_direction:
                yield from self._graph._backend.iterator_in_edges(self._vertices, self._labels)
        else:
            yield from self._graph._backend.iterator_edges(self._vertices, self._labels)
```
which I find easier to read and it's probably more efficient too.



---

archive/issue_comments_423915.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nOverall, I think that this is a good change. I would like to see some more compatibility added with the old list return type for `edges()`, in particular implementing `__getitem__`. You could also consider `__add__` and `__mul__`.",
    "created_at": "2019-03-04T11:22:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423915",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:20" align="right">comment:20</div>

Overall, I think that this is a good change. I would like to see some more compatibility added with the old list return type for `edges()`, in particular implementing `__getitem__`. You could also consider `__add__` and `__mul__`.



---

archive/issue_comments_423916.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nSome quick answers (cannot work on it now):\n- networkx defines `EdgeView` and not `EdgesView` (see [here](https://github.com/networkx/networkx/blob/master/networkx/classes/reportviews.py)), but we can decide to use plural\n- change of `.edges()` to `.edge_iterator()`. I agree that it's not necessary. We can revert these changes. Also, I combined parameters of existing `.edges` and `.edge_iterator` methods  to be able to get a unique method with more options. We could certainly extend the tool to also do `.edges_incident()` and `.edge_boundary()`, but in another ticket.\n- I agree with the proposal for sort #comment:14, but we will have to check in many places if sorted is required or not.\n- `labels`. I have this bad habit that I'm trying to correct to write `labels=0`... that's why I offered some flexibility to users. But of course we can be strict.\n- `__add__` and `__mul__`. What could be a smart way to do that ? It's easy to return a list of edges, but a `EdgeView` ?\n- and of course switch to Cython.",
    "created_at": "2019-03-04T12:05:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423916",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:21" align="right">comment:21</div>

Some quick answers (cannot work on it now):
- networkx defines `EdgeView` and not `EdgesView` (see [here](https://github.com/networkx/networkx/blob/master/networkx/classes/reportviews.py)), but we can decide to use plural
- change of `.edges()` to `.edge_iterator()`. I agree that it's not necessary. We can revert these changes. Also, I combined parameters of existing `.edges` and `.edge_iterator` methods  to be able to get a unique method with more options. We could certainly extend the tool to also do `.edges_incident()` and `.edge_boundary()`, but in another ticket.
- I agree with the proposal for sort #comment:14, but we will have to check in many places if sorted is required or not.
- `labels`. I have this bad habit that I'm trying to correct to write `labels=0`... that's why I offered some flexibility to users. But of course we can be strict.
- `__add__` and `__mul__`. What could be a smart way to do that ? It's easy to return a list of edges, but a `EdgeView` ?
- and of course switch to Cython.



---

archive/issue_comments_423917.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@dcoudert](#comment:21):\n> - `labels`. I have this bad habit that I'm trying to correct to write `labels=0`... that's why I offered some flexibility to users.\n\nBut do you expect users to call `EdgeView` directly? I consider the `edges()` method the high-level interface, where you can be flexible. On the other hand, `EdgeView` should be as fast and simple as possible.",
    "created_at": "2019-03-04T12:44:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423917",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@dcoudert](#comment:21):
> - `labels`. I have this bad habit that I'm trying to correct to write `labels=0`... that's why I offered some flexibility to users.

But do you expect users to call `EdgeView` directly? I consider the `edges()` method the high-level interface, where you can be flexible. On the other hand, `EdgeView` should be as fast and simple as possible.



---

archive/issue_comments_423918.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@dcoudert](#comment:21):\n> - `__add__` and `__mul__`. What could be a smart way to do that ? It's easy to return a list of edges, but a `EdgeView` ?\n\nI wouldn't mind to return a list here. It's not very elegant, but it's good for backwards compatibility.",
    "created_at": "2019-03-05T12:46:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423918",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@dcoudert](#comment:21):
> - `__add__` and `__mul__`. What could be a smart way to do that ? It's easy to return a list of edges, but a `EdgeView` ?

I wouldn't mind to return a list here. It's not very elegant, but it's good for backwards compatibility.



---

archive/issue_comments_423919.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/367534f70e81daab2d36aa68eb0dad0f29efdad7\"><code>367534f</code></a></td><td><code>trac #27408: move to Cython file</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c68e5d147be78ac10598bdab73ec1b2d1b953149\"><code>c68e5d1</code></a></td><td><code>trac #27408: rename EdgesView and revert some edges/edge_iterator</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5f9cae862e30c338b6a7045c402e9218b589ed23\"><code>5f9cae8</code></a></td><td><code>trac #27408: use yield from in __iter__</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5ba0c3fa4b856e98aad4bbecf74c28db9e795973\"><code>5ba0c3f</code></a></td><td><code>trac #27408: add `__mul__`, `__rmul__`, `__getitem__`, __add__</code></td></tr></table>\n",
    "created_at": "2019-03-05T15:35:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423919",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/367534f70e81daab2d36aa68eb0dad0f29efdad7"><code>367534f</code></a></td><td><code>trac #27408: move to Cython file</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c68e5d147be78ac10598bdab73ec1b2d1b953149"><code>c68e5d1</code></a></td><td><code>trac #27408: rename EdgesView and revert some edges/edge_iterator</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5f9cae862e30c338b6a7045c402e9218b589ed23"><code>5f9cae8</code></a></td><td><code>trac #27408: use yield from in __iter__</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5ba0c3fa4b856e98aad4bbecf74c28db9e795973"><code>5ba0c3f</code></a></td><td><code>trac #27408: add `__mul__`, `__rmul__`, `__getitem__`, __add__</code></td></tr></table>




---

archive/issue_comments_423920.json:
```json
{
    "body": "Changed commit from **[`b3f6f4b`](https://github.com/sagemath/sagetrac-mirror/commit/b3f6f4b5dae864c21afd0aadc8c416326a2a1003)** to **[`5ba0c3f`](https://github.com/sagemath/sagetrac-mirror/commit/5ba0c3fa4b856e98aad4bbecf74c28db9e795973)**",
    "created_at": "2019-03-05T15:35:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423920",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b3f6f4b`](https://github.com/sagemath/sagetrac-mirror/commit/b3f6f4b5dae864c21afd0aadc8c416326a2a1003)** to **[`5ba0c3f`](https://github.com/sagemath/sagetrac-mirror/commit/5ba0c3fa4b856e98aad4bbecf74c28db9e795973)**



---

archive/issue_comments_423921.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nI have implemented some of our wishlist. It remains to deal with\n- labels\n- sort\n- sublist query like `G.edges()[:-2]`. What's the name ?\n- try to replace `.edge_iterator()`\n- make sure it works with Python 3",
    "created_at": "2019-03-05T15:38:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423921",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:25" align="right">comment:25</div>

I have implemented some of our wishlist. It remains to deal with
- labels
- sort
- sublist query like `G.edges()[:-2]`. What's the name ?
- try to replace `.edge_iterator()`
- make sure it works with Python 3



---

archive/issue_comments_423922.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@dcoudert](#comment:25):\n> I have implemented some of our wishlist. It remains to deal with\n> - labels\n> - sort\n> - sublist query like `G.edges()[:-2]`. What's the name ?\n\nThis is also `__getitem__`. The call `X.[a:b:c]` is transformed into `X.__getitem__(slice(a,b,c))`. You can do something as simple as\n\n```\ndef __getitem__(self, i):\n    if isinstance(i, slice):\n        return list(self).__getitem__(i)\n```\n(or possibly be a little bit smarter using `islice` from `itertools`).\n\n> - try to replace `.edge_iterator()`\n> - make sure it works with Python 3",
    "created_at": "2019-03-05T15:57:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423922",
    "user": "https://github.com/videlec"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@dcoudert](#comment:25):
> I have implemented some of our wishlist. It remains to deal with
> - labels
> - sort
> - sublist query like `G.edges()[:-2]`. What's the name ?

This is also `__getitem__`. The call `X.[a:b:c]` is transformed into `X.__getitem__(slice(a,b,c))`. You can do something as simple as

```
def __getitem__(self, i):
    if isinstance(i, slice):
        return list(self).__getitem__(i)
```
(or possibly be a little bit smarter using `islice` from `itertools`).

> - try to replace `.edge_iterator()`
> - make sure it works with Python 3



---

archive/issue_comments_423923.json:
```json
{
    "body": "Changed commit from **[`5ba0c3f`](https://github.com/sagemath/sagetrac-mirror/commit/5ba0c3fa4b856e98aad4bbecf74c28db9e795973)** to **[`d973659`](https://github.com/sagemath/sagetrac-mirror/commit/d9736595c4bac3224a0afb8394d25e1965c82e4a)**",
    "created_at": "2019-03-05T16:42:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423923",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5ba0c3f`](https://github.com/sagemath/sagetrac-mirror/commit/5ba0c3fa4b856e98aad4bbecf74c28db9e795973)** to **[`d973659`](https://github.com/sagemath/sagetrac-mirror/commit/d9736595c4bac3224a0afb8394d25e1965c82e4a)**



---

archive/issue_comments_423924.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d9736595c4bac3224a0afb8394d25e1965c82e4a\"><code>d973659</code></a></td><td><code>trac #27408: better getitem and various fix</code></td></tr></table>\n",
    "created_at": "2019-03-05T16:42:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423924",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d9736595c4bac3224a0afb8394d25e1965c82e4a"><code>d973659</code></a></td><td><code>trac #27408: better getitem and various fix</code></td></tr></table>




---

archive/issue_comments_423925.json:
```json
{
    "body": "Changed commit from **[`d973659`](https://github.com/sagemath/sagetrac-mirror/commit/d9736595c4bac3224a0afb8394d25e1965c82e4a)** to **[`711be0b`](https://github.com/sagemath/sagetrac-mirror/commit/711be0b9788a32164f83dadb287ec5c8333b0f0f)**",
    "created_at": "2019-03-05T17:55:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423925",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d973659`](https://github.com/sagemath/sagetrac-mirror/commit/d9736595c4bac3224a0afb8394d25e1965c82e4a)** to **[`711be0b`](https://github.com/sagemath/sagetrac-mirror/commit/711be0b9788a32164f83dadb287ec5c8333b0f0f)**



---

archive/issue_comments_423926.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/711be0b9788a32164f83dadb287ec5c8333b0f0f\"><code>711be0b</code></a></td><td><code>trac #27408: set default sort to None by default and add deprecation warning</code></td></tr></table>\n",
    "created_at": "2019-03-05T17:55:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423926",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/711be0b9788a32164f83dadb287ec5c8333b0f0f"><code>711be0b</code></a></td><td><code>trac #27408: set default sort to None by default and add deprecation warning</code></td></tr></table>




---

archive/issue_comments_423927.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\n- for slice queries, I have not use `islice` as it returns an iterator. The compatibility with current behavior is list. We can change that in the future\n- I implemented the proposal of Jeroen for sorting. Well, the \"fail gracefully\" is not clear to me.\n\nit remains to\n- try to replace `.edge_iterator()` -- I tried and it breaks too many things. Could be done in another ticket, replacing calls be `.edges` and adding a deprecation warning to `.vertex_iterator`\n- make sure it works with Python 3\n- certainly try to speed up the beast",
    "created_at": "2019-03-05T18:01:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423927",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:29" align="right">comment:29</div>

- for slice queries, I have not use `islice` as it returns an iterator. The compatibility with current behavior is list. We can change that in the future
- I implemented the proposal of Jeroen for sorting. Well, the "fail gracefully" is not clear to me.

it remains to
- try to replace `.edge_iterator()` -- I tried and it breaks too many things. Could be done in another ticket, replacing calls be `.edges` and adding a deprecation warning to `.vertex_iterator`
- make sure it works with Python 3
- certainly try to speed up the beast



---

archive/issue_comments_423928.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nSince you know how many edges there are it is easy to implement `E[-3]` without creating the list (though I have no idea whether it has any proper use case).\n\nConcerning slices, I never suggested to **return** islice but to **use it**. More explicitely\n\n```\nif isinstance(i, slice):\n    return list(islice(self, i.start, i.stop, i.end)))\n```\nThe above avoids creating the list of all edges (at least when `b` is positive which can always be done since you know the length). You will notice the difference if you do `E[:10]` on a huge graph.",
    "created_at": "2019-03-05T18:11:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423928",
    "user": "https://github.com/videlec"
}
```

<div id="comment:30" align="right">comment:30</div>

Since you know how many edges there are it is easy to implement `E[-3]` without creating the list (though I have no idea whether it has any proper use case).

Concerning slices, I never suggested to **return** islice but to **use it**. More explicitely

```
if isinstance(i, slice):
    return list(islice(self, i.start, i.stop, i.end)))
```
The above avoids creating the list of all edges (at least when `b` is positive which can always be done since you know the length). You will notice the difference if you do `E[:10]` on a huge graph.



---

archive/issue_comments_423929.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nI think that it would be good to replace *some* occurrences of `.edge_iterator` and identify what is the source of breakage.",
    "created_at": "2019-03-05T18:13:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423929",
    "user": "https://github.com/videlec"
}
```

<div id="comment:31" align="right">comment:31</div>

I think that it would be good to replace *some* occurrences of `.edge_iterator` and identify what is the source of breakage.



---

archive/issue_comments_423930.json:
```json
{
    "body": "Changed commit from **[`711be0b`](https://github.com/sagemath/sagetrac-mirror/commit/711be0b9788a32164f83dadb287ec5c8333b0f0f)** to **[`a1701f8`](https://github.com/sagemath/sagetrac-mirror/commit/a1701f80d0a80c7a94a7407b6952e23fa1025e76)**",
    "created_at": "2019-03-05T19:07:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423930",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`711be0b`](https://github.com/sagemath/sagetrac-mirror/commit/711be0b9788a32164f83dadb287ec5c8333b0f0f)** to **[`a1701f8`](https://github.com/sagemath/sagetrac-mirror/commit/a1701f80d0a80c7a94a7407b6952e23fa1025e76)**



---

archive/issue_comments_423931.json:
```json
{
    "body": "<div id=\"comment:32\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a1701f80d0a80c7a94a7407b6952e23fa1025e76\"><code>a1701f8</code></a></td><td><code>trac #27408: some care for Python 3</code></td></tr></table>\n",
    "created_at": "2019-03-05T19:07:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423931",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:32"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a1701f80d0a80c7a94a7407b6952e23fa1025e76"><code>a1701f8</code></a></td><td><code>trac #27408: some care for Python 3</code></td></tr></table>




---

archive/issue_comments_423932.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nI fixed various issues for Python3 to avoid introducing new issues.\n\n* We know the length **if and only if** `vertices = None`. Otherwise we have to count edges.\n  I tried using `islice` without success. Got `AttributeError: 'slice' object has no attribute 'end'`...\n\n* for `.edge_iterator`, we have many calls to `next(...)`. We have to change each of them and may be other stuff.",
    "created_at": "2019-03-05T19:11:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423932",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:33" align="right">comment:33</div>

I fixed various issues for Python3 to avoid introducing new issues.

* We know the length **if and only if** `vertices = None`. Otherwise we have to count edges.
  I tried using `islice` without success. Got `AttributeError: 'slice' object has no attribute 'end'`...

* for `.edge_iterator`, we have many calls to `next(...)`. We have to change each of them and may be other stuff.



---

archive/issue_comments_423933.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nReplying to [@dcoudert](#comment:33):\n> I fixed various issues for Python3 to avoid introducing new issues.\n> \n> * We know the length **if and only if** `vertices = None`. Otherwise we have to count edges.\n>   I tried using `islice` without success. Got `AttributeError: 'slice' object has no attribute 'end'`...\n\nSorry, the attributes are `start`, `stop`, `step`. When you know the length you can use the method `indices` of the slice to find out the (correctly bounded) `start`, `stop`, `step` as in\n\n```\nsage: slice(1, -1, 2).indices(23)\n(1, 22, 2)\n```\nSee https://docs.python.org/2/library/functions.html#slice",
    "created_at": "2019-03-05T19:48:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423933",
    "user": "https://github.com/videlec"
}
```

<div id="comment:34" align="right">comment:34</div>

Replying to [@dcoudert](#comment:33):
> I fixed various issues for Python3 to avoid introducing new issues.
> 
> * We know the length **if and only if** `vertices = None`. Otherwise we have to count edges.
>   I tried using `islice` without success. Got `AttributeError: 'slice' object has no attribute 'end'`...

Sorry, the attributes are `start`, `stop`, `step`. When you know the length you can use the method `indices` of the slice to find out the (correctly bounded) `start`, `stop`, `step` as in

```
sage: slice(1, -1, 2).indices(23)
(1, 22, 2)
```
See https://docs.python.org/2/library/functions.html#slice



---

archive/issue_comments_423934.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@videlec](#comment:26):\n> You can do something as simple as\n> \n> ```\n> def __getitem__(self, i):\n>     if isinstance(i, slice):\n>         return list(self).__getitem__(i)\n> ```\n\n...except that the line should be written as `return list(self)[i]`. There is almost never a need to call special methods like `__getitem__` directly (although one exception is `super()` calls).",
    "created_at": "2019-03-05T20:01:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423934",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@videlec](#comment:26):
> You can do something as simple as
> 
> ```
> def __getitem__(self, i):
>     if isinstance(i, slice):
>         return list(self).__getitem__(i)
> ```

...except that the line should be written as `return list(self)[i]`. There is almost never a need to call special methods like `__getitem__` directly (although one exception is `super()` calls).



---

archive/issue_comments_423935.json:
```json
{
    "body": "Changed commit from **[`a1701f8`](https://github.com/sagemath/sagetrac-mirror/commit/a1701f80d0a80c7a94a7407b6952e23fa1025e76)** to **[`8905309`](https://github.com/sagemath/sagetrac-mirror/commit/890530982e496ddd4b893eb616bfe8c1c8e888ab)**",
    "created_at": "2019-03-05T23:05:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423935",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a1701f8`](https://github.com/sagemath/sagetrac-mirror/commit/a1701f80d0a80c7a94a7407b6952e23fa1025e76)** to **[`8905309`](https://github.com/sagemath/sagetrac-mirror/commit/890530982e496ddd4b893eb616bfe8c1c8e888ab)**



---

archive/issue_comments_423936.json:
```json
{
    "body": "<div id=\"comment:36\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/890530982e496ddd4b893eb616bfe8c1c8e888ab\"><code>8905309</code></a></td><td><code>trac #27408: improve getitem</code></td></tr></table>\n",
    "created_at": "2019-03-05T23:05:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423936",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:36"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/890530982e496ddd4b893eb616bfe8c1c8e888ab"><code>8905309</code></a></td><td><code>trac #27408: improve getitem</code></td></tr></table>




---

archive/issue_comments_423937.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nAccording to the documentation of [islice](https://docs.python.org/3/library/itertools.html#itertools.islice), it needs non negative parameters. Thus I tried to combine use of islice and `list()[i]`.",
    "created_at": "2019-03-05T23:07:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423937",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:37" align="right">comment:37</div>

According to the documentation of [islice](https://docs.python.org/3/library/itertools.html#itertools.islice), it needs non negative parameters. Thus I tried to combine use of islice and `list()[i]`.



---

archive/issue_comments_423938.json:
```json
{
    "body": "<div id=\"comment:38\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e27645bffae04b1b04e39efe41a19e6ac85e5193\"><code>e27645b</code></a></td><td><code>trac #27408: it's .step, not .end</code></td></tr></table>\n",
    "created_at": "2019-03-06T07:57:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423938",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:38"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e27645bffae04b1b04e39efe41a19e6ac85e5193"><code>e27645b</code></a></td><td><code>trac #27408: it's .step, not .end</code></td></tr></table>




---

archive/issue_comments_423939.json:
```json
{
    "body": "Changed commit from **[`8905309`](https://github.com/sagemath/sagetrac-mirror/commit/890530982e496ddd4b893eb616bfe8c1c8e888ab)** to **[`e27645b`](https://github.com/sagemath/sagetrac-mirror/commit/e27645bffae04b1b04e39efe41a19e6ac85e5193)**",
    "created_at": "2019-03-06T07:57:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423939",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8905309`](https://github.com/sagemath/sagetrac-mirror/commit/890530982e496ddd4b893eb616bfe8c1c8e888ab)** to **[`e27645b`](https://github.com/sagemath/sagetrac-mirror/commit/e27645bffae04b1b04e39efe41a19e6ac85e5193)**



---

archive/issue_comments_423940.json:
```json
{
    "body": "<div id=\"comment:39\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d7bd05b4a60909cc1bf694dc8990fe3d9cae4c2\"><code>8d7bd05</code></a></td><td><code>trac #27408: better like that</code></td></tr></table>\n",
    "created_at": "2019-03-06T08:00:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423940",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:39"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d7bd05b4a60909cc1bf694dc8990fe3d9cae4c2"><code>8d7bd05</code></a></td><td><code>trac #27408: better like that</code></td></tr></table>




---

archive/issue_comments_423941.json:
```json
{
    "body": "Changed commit from **[`e27645b`](https://github.com/sagemath/sagetrac-mirror/commit/e27645bffae04b1b04e39efe41a19e6ac85e5193)** to **[`8d7bd05`](https://github.com/sagemath/sagetrac-mirror/commit/8d7bd05b4a60909cc1bf694dc8990fe3d9cae4c2)**",
    "created_at": "2019-03-06T08:00:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423941",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e27645b`](https://github.com/sagemath/sagetrac-mirror/commit/e27645bffae04b1b04e39efe41a19e6ac85e5193)** to **[`8d7bd05`](https://github.com/sagemath/sagetrac-mirror/commit/8d7bd05b4a60909cc1bf694dc8990fe3d9cae4c2)**



---

archive/issue_comments_423942.json:
```json
{
    "body": "<div id=\"comment:40\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/132284fc54db27855167d6643fa009340067f218\"><code>132284f</code></a></td><td><code>trac #27408: correction of len</code></td></tr></table>\n",
    "created_at": "2019-03-06T12:41:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423942",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:40"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/132284fc54db27855167d6643fa009340067f218"><code>132284f</code></a></td><td><code>trac #27408: correction of len</code></td></tr></table>




---

archive/issue_comments_423943.json:
```json
{
    "body": "Changed commit from **[`8d7bd05`](https://github.com/sagemath/sagetrac-mirror/commit/8d7bd05b4a60909cc1bf694dc8990fe3d9cae4c2)** to **[`132284f`](https://github.com/sagemath/sagetrac-mirror/commit/132284fc54db27855167d6643fa009340067f218)**",
    "created_at": "2019-03-06T12:41:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423943",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8d7bd05`](https://github.com/sagemath/sagetrac-mirror/commit/8d7bd05b4a60909cc1bf694dc8990fe3d9cae4c2)** to **[`132284f`](https://github.com/sagemath/sagetrac-mirror/commit/132284fc54db27855167d6643fa009340067f218)**



---

archive/issue_comments_423944.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nTo replace `.edge_iterator`, we must be able to call `next(...)` on `EdgesView`. Some algorithms use this functionality. The trivial solution is to use `it = iter(E)`, but there is certainly a smarter solution.",
    "created_at": "2019-03-06T12:47:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423944",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:41" align="right">comment:41</div>

To replace `.edge_iterator`, we must be able to call `next(...)` on `EdgesView`. Some algorithms use this functionality. The trivial solution is to use `it = iter(E)`, but there is certainly a smarter solution.



---

archive/issue_events_378345.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-03-09T18:36:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27408#event-378345"
}
```



---

archive/issue_events_378346.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-03-09T18:36:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27408#event-378346"
}
```



---

archive/issue_comments_423945.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nI read the sentence `the graph should not be updated while iterating through a view`. Note that the following behavior for sets\n\n```\nsage: s = set([1,2])\nsage: for i in s:\n....:     print(i)\n....:     s.add(3*i)\nTraceback (most recent call last):\n...\nRuntimeError: Set changed size during iteration\n```",
    "created_at": "2019-03-10T06:08:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423945",
    "user": "https://github.com/videlec"
}
```

<div id="comment:43" align="right">comment:43</div>

I read the sentence `the graph should not be updated while iterating through a view`. Note that the following behavior for sets

```
sage: s = set([1,2])
sage: for i in s:
....:     print(i)
....:     s.add(3*i)
Traceback (most recent call last):
...
RuntimeError: Set changed size during iteration
```



---

archive/issue_comments_423946.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\n`self.__mul__(n)` -> `self * n`",
    "created_at": "2019-03-10T06:14:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423946",
    "user": "https://github.com/videlec"
}
```

<div id="comment:44" align="right">comment:44</div>

`self.__mul__(n)` -> `self * n`



---

archive/issue_comments_423947.json:
```json
{
    "body": "<div id=\"comment:45\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/529419b7ea8fda1b3a5d44803aa8c50246a93990\"><code>529419b</code></a></td><td><code>trac #27408: Merged with 8.7.beta7</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bbbb824d1535e76d5ae28ff22f679c8991ddfdf2\"><code>bbbb824</code></a></td><td><code>trac #27408: fix __mul__</code></td></tr></table>\n",
    "created_at": "2019-03-10T09:37:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423947",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:45"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/529419b7ea8fda1b3a5d44803aa8c50246a93990"><code>529419b</code></a></td><td><code>trac #27408: Merged with 8.7.beta7</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bbbb824d1535e76d5ae28ff22f679c8991ddfdf2"><code>bbbb824</code></a></td><td><code>trac #27408: fix __mul__</code></td></tr></table>




---

archive/issue_comments_423948.json:
```json
{
    "body": "Changed commit from **[`132284f`](https://github.com/sagemath/sagetrac-mirror/commit/132284fc54db27855167d6643fa009340067f218)** to **[`bbbb824`](https://github.com/sagemath/sagetrac-mirror/commit/bbbb824d1535e76d5ae28ff22f679c8991ddfdf2)**",
    "created_at": "2019-03-10T09:37:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423948",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`132284f`](https://github.com/sagemath/sagetrac-mirror/commit/132284fc54db27855167d6643fa009340067f218)** to **[`bbbb824`](https://github.com/sagemath/sagetrac-mirror/commit/bbbb824d1535e76d5ae28ff22f679c8991ddfdf2)**



---

archive/issue_comments_423949.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nI fixed `__mul__`.\n\nFor sets, we also have this. \n\n```\nsage: s = set([1,2])\nsage: for i in s:\n....:     print(i)\n....:     s.add(i*3)\n....:     s.discard(i)\n....:     \n1\n2\n3\n6\n```",
    "created_at": "2019-03-10T09:43:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423949",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:46" align="right">comment:46</div>

I fixed `__mul__`.

For sets, we also have this. 

```
sage: s = set([1,2])
sage: for i in s:
....:     print(i)
....:     s.add(i*3)
....:     s.discard(i)
....:     
1
2
3
6
```



---

archive/issue_comments_423950.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nReplying to [@dcoudert](#comment:46):\n> I fixed `__mul__`.\n> \n> For sets, we also have this. \n> \n> ```\n> sage: s = set([1,2])\n> sage: for i in s:\n> ....:     print(i)\n> ....:     s.add(i*3)\n> ....:     s.discard(i)\n> ....:     \n> 1\n> 2\n> 3\n> 6\n> ```\n\nOuch.",
    "created_at": "2019-03-10T13:50:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423950",
    "user": "https://github.com/videlec"
}
```

<div id="comment:47" align="right">comment:47</div>

Replying to [@dcoudert](#comment:46):
> I fixed `__mul__`.
> 
> For sets, we also have this. 
> 
> ```
> sage: s = set([1,2])
> sage: for i in s:
> ....:     print(i)
> ....:     s.add(i*3)
> ....:     s.discard(i)
> ....:     
> 1
> 2
> 3
> 6
> ```

Ouch.



---

archive/issue_comments_423951.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\n`@`Nicolas: this ticket implements your proposal of an view for edges. Any comment / suggestion for improvements is more than welcome ;)",
    "created_at": "2019-03-11T16:10:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423951",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:48" align="right">comment:48</div>

`@`Nicolas: this ticket implements your proposal of an view for edges. Any comment / suggestion for improvements is more than welcome ;)



---

archive/issue_events_378347.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27408#event-378347"
}
```



---

archive/issue_events_378348.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27408#event-378348"
}
```



---

archive/issue_comments_423952.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nTicket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)",
    "created_at": "2019-03-25T10:56:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423952",
    "user": "https://github.com/embray"
}
```

<div id="comment:49" align="right">comment:49</div>

Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)



---

archive/issue_comments_423953.json:
```json
{
    "body": "Changed commit from **[`bbbb824`](https://github.com/sagemath/sagetrac-mirror/commit/bbbb824d1535e76d5ae28ff22f679c8991ddfdf2)** to **[`95322eb`](https://github.com/sagemath/sagetrac-mirror/commit/95322eb2ad828053b869bc077c07c07d0f2da1e8)**",
    "created_at": "2019-04-09T12:10:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423953",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`bbbb824`](https://github.com/sagemath/sagetrac-mirror/commit/bbbb824d1535e76d5ae28ff22f679c8991ddfdf2)** to **[`95322eb`](https://github.com/sagemath/sagetrac-mirror/commit/95322eb2ad828053b869bc077c07c07d0f2da1e8)**



---

archive/issue_comments_423954.json:
```json
{
    "body": "<div id=\"comment:50\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/95322eb2ad828053b869bc077c07c07d0f2da1e8\"><code>95322eb</code></a></td><td><code>trac #27408: fix merge conflict</code></td></tr></table>\n",
    "created_at": "2019-04-09T12:10:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423954",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:50"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/95322eb2ad828053b869bc077c07c07d0f2da1e8"><code>95322eb</code></a></td><td><code>trac #27408: fix merge conflict</code></td></tr></table>




---

archive/issue_comments_423955.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nrebase and fix merge conflict with 8.8.beta1",
    "created_at": "2019-04-09T12:12:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423955",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:51" align="right">comment:51</div>

rebase and fix merge conflict with 8.8.beta1



---

archive/issue_comments_423956.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\n[comment:17] hasn't been addressed. Was that intentional or did you just forget about it?",
    "created_at": "2019-04-09T13:54:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423956",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:52" align="right">comment:52</div>

[comment:17] hasn't been addressed. Was that intentional or did you just forget about it?



---

archive/issue_comments_423957.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nTo better explain what I meant with [comment:17]: I would try to keep the logic in `EdgesView.__init__` as simple as possible and move some of the argument handling (like replacing a single vertex by a 1-element list) to `GenericGraph.edges()`.",
    "created_at": "2019-04-09T13:56:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423957",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:53" align="right">comment:53</div>

To better explain what I meant with [comment:17]: I would try to keep the logic in `EdgesView.__init__` as simple as possible and move some of the argument handling (like replacing a single vertex by a 1-element list) to `GenericGraph.edges()`.



---

archive/issue_comments_423958.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nVarious comments about `views.pyx`:\n\n1. Instead of `class EdgesView():`, I suggest a Cython class `cdef class EdgesView:` (dropping the empty tuple since that looks strange to me). This requires explicitly declaring attributes but it will be faster. It also requires merging `__mul__` and `__rmul__`.\n\n2. `<int>i` is not correct (the correct cast is `<Py_ssize_t>`) and not needed (Cython should do the type conversion automatically): just replace `<int>i` by `i`.\n\n3. I personally dislike code of the form\n\n```\n            try:\n                yield from sorted(self, key=self._sort_edges_key)\n            except Exception as msg:\n                raise TypeError(\"the edges cannot be sorted due to \" + msg)\n```\njust keep the original exception, drop the `try`/`except`.\n\n4. The proper way to deal with unknown types in `__eq__`, `__add__` and friends is to `return NotImplemented`.\n\n5. In `__mul__`, drop the check for `n < 1`, leave that to `list`.\n\n6. It would be good to implement `__bool__` too (for checking non-emptyness).",
    "created_at": "2019-04-09T14:09:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423958",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:54" align="right">comment:54</div>

Various comments about `views.pyx`:

1. Instead of `class EdgesView():`, I suggest a Cython class `cdef class EdgesView:` (dropping the empty tuple since that looks strange to me). This requires explicitly declaring attributes but it will be faster. It also requires merging `__mul__` and `__rmul__`.

2. `<int>i` is not correct (the correct cast is `<Py_ssize_t>`) and not needed (Cython should do the type conversion automatically): just replace `<int>i` by `i`.

3. I personally dislike code of the form

```
            try:
                yield from sorted(self, key=self._sort_edges_key)
            except Exception as msg:
                raise TypeError("the edges cannot be sorted due to " + msg)
```
just keep the original exception, drop the `try`/`except`.

4. The proper way to deal with unknown types in `__eq__`, `__add__` and friends is to `return NotImplemented`.

5. In `__mul__`, drop the check for `n < 1`, leave that to `list`.

6. It would be good to implement `__bool__` too (for checking non-emptyness).



---

archive/issue_comments_423959.json:
```json
{
    "body": "<div id=\"comment:55\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0aa8c01e4ebea09d471565c7bca922df9dcd8afe\"><code>0aa8c01</code></a></td><td><code>trac #27408: avoid vertices=single vertex</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7287f14b26832c0958fe1a4d8024909724085d1a\"><code>7287f14</code></a></td><td><code>trac #27408: most reviewers comment #54</code></td></tr></table>\n",
    "created_at": "2019-04-09T14:44:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423959",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:55"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0aa8c01e4ebea09d471565c7bca922df9dcd8afe"><code>0aa8c01</code></a></td><td><code>trac #27408: avoid vertices=single vertex</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7287f14b26832c0958fe1a4d8024909724085d1a"><code>7287f14</code></a></td><td><code>trac #27408: most reviewers comment #54</code></td></tr></table>




---

archive/issue_comments_423960.json:
```json
{
    "body": "Changed commit from **[`95322eb`](https://github.com/sagemath/sagetrac-mirror/commit/95322eb2ad828053b869bc077c07c07d0f2da1e8)** to **[`7287f14`](https://github.com/sagemath/sagetrac-mirror/commit/7287f14b26832c0958fe1a4d8024909724085d1a)**",
    "created_at": "2019-04-09T14:44:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423960",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`95322eb`](https://github.com/sagemath/sagetrac-mirror/commit/95322eb2ad828053b869bc077c07c07d0f2da1e8)** to **[`7287f14`](https://github.com/sagemath/sagetrac-mirror/commit/7287f14b26832c0958fe1a4d8024909724085d1a)**



---

archive/issue_comments_423961.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nI have not (yet) done the change `cdef class EdgesView:` as I don't know how to properly define the types of the variables.\n\n- `_vertices` can be list, and then we have to handle empty list case instead of assigning `G`\n- `_vertex_set` is frozenset\n- `_labels` is boolean, but it prevents `None`\n- `_sort_edges` is a boolean\n- `_sort_edges_key` is a function. What's the appropriate type ?\n\nAlso, I did not get how to merge `__mul__` and `__rmul__`. Any pointer is welcome.",
    "created_at": "2019-04-09T15:05:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423961",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:56" align="right">comment:56</div>

I have not (yet) done the change `cdef class EdgesView:` as I don't know how to properly define the types of the variables.

- `_vertices` can be list, and then we have to handle empty list case instead of assigning `G`
- `_vertex_set` is frozenset
- `_labels` is boolean, but it prevents `None`
- `_sort_edges` is a boolean
- `_sort_edges_key` is a function. What's the appropriate type ?

Also, I did not get how to merge `__mul__` and `__rmul__`. Any pointer is welcome.



---

archive/issue_comments_423962.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nWith the info that you provided, it should be\n\n> - `_labels` is boolean, but it prevents `None`\n\nWhy should it be `None`? Isn't it just a boolean?",
    "created_at": "2019-04-09T15:33:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423962",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:57" align="right">comment:57</div>

With the info that you provided, it should be

> - `_labels` is boolean, but it prevents `None`

Why should it be `None`? Isn't it just a boolean?



---

archive/issue_comments_423963.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nReplying to [@dcoudert](#comment:56):\n> - `_vertices` can be list, and then we have to handle empty list case instead of assigning `G`\n\nOr you could use `_vertices = None` to represent that case.",
    "created_at": "2019-04-09T15:34:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423963",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:58" align="right">comment:58</div>

Replying to [@dcoudert](#comment:56):
> - `_vertices` can be list, and then we have to handle empty list case instead of assigning `G`

Or you could use `_vertices = None` to represent that case.



---

archive/issue_comments_423964.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nReplying to [@dcoudert](#comment:56):\n> Also, I did not get how to merge `__mul__` and `__rmul__`. Any pointer is welcome.\n\nhttps://cython.readthedocs.io/en/latest/src/userguide/special_methods.html#arithmetic-methods",
    "created_at": "2019-04-09T15:34:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423964",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:59" align="right">comment:59</div>

Replying to [@dcoudert](#comment:56):
> Also, I did not get how to merge `__mul__` and `__rmul__`. Any pointer is welcome.

https://cython.readthedocs.io/en/latest/src/userguide/special_methods.html#arithmetic-methods



---

archive/issue_comments_423965.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nReplying to [@jdemeyer](#comment:54):\n> Various comments about `views.pyx`:\n> \n> 1. Instead of `class EdgesView():`, I suggest a Cython class `cdef class EdgesView:` (dropping the empty tuple since that looks strange to me). This requires explicitly declaring attributes but it will be faster. \n\nWith the current implementation of `__eq__`, we must access the variables of `other`. The only solution I see is to declare the class in `views.pxd` and to explicitly declare the members, i.e., make all members public. Is that the only solution or there is a smarter solution ?",
    "created_at": "2019-04-10T08:20:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423965",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:60" align="right">comment:60</div>

Replying to [@jdemeyer](#comment:54):
> Various comments about `views.pyx`:
> 
> 1. Instead of `class EdgesView():`, I suggest a Cython class `cdef class EdgesView:` (dropping the empty tuple since that looks strange to me). This requires explicitly declaring attributes but it will be faster. 

With the current implementation of `__eq__`, we must access the variables of `other`. The only solution I see is to declare the class in `views.pxd` and to explicitly declare the members, i.e., make all members public. Is that the only solution or there is a smarter solution ?



---

archive/issue_comments_423966.json:
```json
{
    "body": "<div id=\"comment:61\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/38cdcedfa0401260abb147e02bd95e7b39aa1854\"><code>38cdced</code></a></td><td><code>trac #27408: cdef class EdgesView</code></td></tr></table>\n",
    "created_at": "2019-04-10T12:26:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423966",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:61"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/38cdcedfa0401260abb147e02bd95e7b39aa1854"><code>38cdced</code></a></td><td><code>trac #27408: cdef class EdgesView</code></td></tr></table>




---

archive/issue_comments_423967.json:
```json
{
    "body": "Changed commit from **[`7287f14`](https://github.com/sagemath/sagetrac-mirror/commit/7287f14b26832c0958fe1a4d8024909724085d1a)** to **[`38cdced`](https://github.com/sagemath/sagetrac-mirror/commit/38cdcedfa0401260abb147e02bd95e7b39aa1854)**",
    "created_at": "2019-04-10T12:26:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423967",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7287f14`](https://github.com/sagemath/sagetrac-mirror/commit/7287f14b26832c0958fe1a4d8024909724085d1a)** to **[`38cdced`](https://github.com/sagemath/sagetrac-mirror/commit/38cdcedfa0401260abb147e02bd95e7b39aa1854)**



---

archive/issue_comments_423968.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nUsing `readonly` on some class members allow to fix `__eq__`. This way, the required members are available in Python-space, but only for reading. [documentation](https://cython.readthedocs.io/en/latest/src/tutorial/cdef_classes.html)\n\nI think I have now implemented all comments/suggestions. I don't know what else we can do to speed up the code. Anyway, thank you for your help.",
    "created_at": "2019-04-10T12:32:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423968",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:62" align="right">comment:62</div>

Using `readonly` on some class members allow to fix `__eq__`. This way, the required members are available in Python-space, but only for reading. [documentation](https://cython.readthedocs.io/en/latest/src/tutorial/cdef_classes.html)

I think I have now implemented all comments/suggestions. I don't know what else we can do to speed up the code. Anyway, thank you for your help.



---

archive/issue_comments_423969.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nFirst of all, making the attributes `readonly` is a good idea anyway. There is no reason why they should only be accessible from Cython.\n\nSecond, the correct way to deal with `__eq__` (or really any other place where you do a type check for `EdgesView`) is to write code as follows:\n\n```\ndef __eq__(self, right):\n    if not isinstance(right, EdgesView):\n        return NotImplemented\n    other = <EdgesView>right\n```\nThis way, Cython knows that `other` is an instance of `EdgesView` and it will use optimized access to the `cdef` attributes. Otherwise, Cython accesses those attributes as Python attributes, which is must slower (and requires `readonly` or `public`).",
    "created_at": "2019-04-10T12:43:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423969",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:63" align="right">comment:63</div>

First of all, making the attributes `readonly` is a good idea anyway. There is no reason why they should only be accessible from Cython.

Second, the correct way to deal with `__eq__` (or really any other place where you do a type check for `EdgesView`) is to write code as follows:

```
def __eq__(self, right):
    if not isinstance(right, EdgesView):
        return NotImplemented
    other = <EdgesView>right
```
This way, Cython knows that `other` is an instance of `EdgesView` and it will use optimized access to the `cdef` attributes. Otherwise, Cython accesses those attributes as Python attributes, which is must slower (and requires `readonly` or `public`).



---

archive/issue_comments_423970.json:
```json
{
    "body": "<div id=\"comment:64\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2fa2823e1b36e066ebecd6b4265b48a0af2a263c\"><code>2fa2823</code></a></td><td><code>trac #27408: improve __eq__</code></td></tr></table>\n",
    "created_at": "2019-04-10T12:59:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423970",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:64"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2fa2823e1b36e066ebecd6b4265b48a0af2a263c"><code>2fa2823</code></a></td><td><code>trac #27408: improve __eq__</code></td></tr></table>




---

archive/issue_comments_423971.json:
```json
{
    "body": "Changed commit from **[`38cdced`](https://github.com/sagemath/sagetrac-mirror/commit/38cdcedfa0401260abb147e02bd95e7b39aa1854)** to **[`2fa2823`](https://github.com/sagemath/sagetrac-mirror/commit/2fa2823e1b36e066ebecd6b4265b48a0af2a263c)**",
    "created_at": "2019-04-10T12:59:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423971",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`38cdced`](https://github.com/sagemath/sagetrac-mirror/commit/38cdcedfa0401260abb147e02bd95e7b39aa1854)** to **[`2fa2823`](https://github.com/sagemath/sagetrac-mirror/commit/2fa2823e1b36e066ebecd6b4265b48a0af2a263c)**



---

archive/issue_comments_423972.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nI didn't know that. It's really tricky.",
    "created_at": "2019-04-10T13:00:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423972",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:65" align="right">comment:65</div>

I didn't know that. It's really tricky.



---

archive/issue_comments_423973.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nYes, Cython is 95% like Python but that 5% is what makes it tricky.",
    "created_at": "2019-04-10T13:10:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423973",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:66" align="right">comment:66</div>

Yes, Cython is 95% like Python but that 5% is what makes it tricky.



---

archive/issue_comments_423974.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nSome more comments:\n\n1. Moving the handling of `sort=None` to `GenericGraph` (in line with [comment:17])\n\n2. `self._sort_edges = False if sort is False else True` should be simply `self._sort_edges = sort` then (since `_sort_edges` is declared `bint`, Cython automatically does the conversion to `bool`)\n\n3. `self._graph = <GenericGraph_pyx>G` is very dangerous as no type check is done. Replace this by `self._graph = <GenericGraph_pyx?>G` which is the same, except that an exception is raised by Cython if `G` is not an instance of `GenericGraph_pyx`.\n\n4. Use `def __add__(left, right)` instead of `def __add__(self, other)` since using the name `self` here is potentially confusing. Same for `__mul__`.\n\n5. I have some doubts about `start, stop, step = i.start or 0, i.stop or sys_maxsize, i.step or 1` but I'll need to check precise `slice` behavior.",
    "created_at": "2019-04-10T13:11:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423974",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:67" align="right">comment:67</div>

Some more comments:

1. Moving the handling of `sort=None` to `GenericGraph` (in line with [comment:17])

2. `self._sort_edges = False if sort is False else True` should be simply `self._sort_edges = sort` then (since `_sort_edges` is declared `bint`, Cython automatically does the conversion to `bool`)

3. `self._graph = <GenericGraph_pyx>G` is very dangerous as no type check is done. Replace this by `self._graph = <GenericGraph_pyx?>G` which is the same, except that an exception is raised by Cython if `G` is not an instance of `GenericGraph_pyx`.

4. Use `def __add__(left, right)` instead of `def __add__(self, other)` since using the name `self` here is potentially confusing. Same for `__mul__`.

5. I have some doubts about `start, stop, step = i.start or 0, i.stop or sys_maxsize, i.step or 1` but I'll need to check precise `slice` behavior.



---

archive/issue_comments_423975.json:
```json
{
    "body": "<div id=\"comment:68\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/74219866a2d11f535d35c611930cb7c5a3f30197\"><code>7421986</code></a></td><td><code>trac #27408: further improvements</code></td></tr></table>\n",
    "created_at": "2019-04-10T13:39:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423975",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:68"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/74219866a2d11f535d35c611930cb7c5a3f30197"><code>7421986</code></a></td><td><code>trac #27408: further improvements</code></td></tr></table>




---

archive/issue_comments_423976.json:
```json
{
    "body": "Changed commit from **[`2fa2823`](https://github.com/sagemath/sagetrac-mirror/commit/2fa2823e1b36e066ebecd6b4265b48a0af2a263c)** to **[`7421986`](https://github.com/sagemath/sagetrac-mirror/commit/74219866a2d11f535d35c611930cb7c5a3f30197)**",
    "created_at": "2019-04-10T13:39:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423976",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2fa2823`](https://github.com/sagemath/sagetrac-mirror/commit/2fa2823e1b36e066ebecd6b4265b48a0af2a263c)** to **[`7421986`](https://github.com/sagemath/sagetrac-mirror/commit/74219866a2d11f535d35c611930cb7c5a3f30197)**



---

archive/issue_comments_423977.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nI treated 1-4.\n\nfor `slice`, I followed the suggestion at https://docs.python.org/3/library/itertools.html#itertools.islice, but I agree it's not so clear.",
    "created_at": "2019-04-10T13:43:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423977",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:69" align="right">comment:69</div>

I treated 1-4.

for `slice`, I followed the suggestion at https://docs.python.org/3/library/itertools.html#itertools.islice, but I agree it's not so clear.



---

archive/issue_comments_423978.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\nThis should `return NotImplemented`:\n\n```\n        if not isinstance(right, EdgesView):\n            raise TypeError('right is not a EdgesView')\n```",
    "created_at": "2019-04-10T14:16:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423978",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:70" align="right">comment:70</div>

This should `return NotImplemented`:

```
        if not isinstance(right, EdgesView):
            raise TypeError('right is not a EdgesView')
```



---

archive/issue_comments_423979.json:
```json
{
    "body": "<div id=\"comment:71\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4e8684663116fc45a1d402a22b1b44977c1a8db6\"><code>4e86846</code></a></td><td><code>trac #27408: return NotImplemented</code></td></tr></table>\n",
    "created_at": "2019-04-10T14:20:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423979",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:71"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4e8684663116fc45a1d402a22b1b44977c1a8db6"><code>4e86846</code></a></td><td><code>trac #27408: return NotImplemented</code></td></tr></table>




---

archive/issue_comments_423980.json:
```json
{
    "body": "Changed commit from **[`7421986`](https://github.com/sagemath/sagetrac-mirror/commit/74219866a2d11f535d35c611930cb7c5a3f30197)** to **[`4e86846`](https://github.com/sagemath/sagetrac-mirror/commit/4e8684663116fc45a1d402a22b1b44977c1a8db6)**",
    "created_at": "2019-04-10T14:20:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423980",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7421986`](https://github.com/sagemath/sagetrac-mirror/commit/74219866a2d11f535d35c611930cb7c5a3f30197)** to **[`4e86846`](https://github.com/sagemath/sagetrac-mirror/commit/4e8684663116fc45a1d402a22b1b44977c1a8db6)**



---

archive/issue_comments_423981.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nI don't quite like this code:\n\n```\n        if self._sort_edges is True:\n            self._sort_edges = False\n            yield from sorted(self, key=self._sort_edges_key)\n            self._sort_edges = True\n        elif self._sort_edges is None:\n            self._sort_edges = False\n            yield from sorted(self)\n            self._sort_edges = True\n```\nFirst of all, the condition should be `if self._sort_edges:`, dropping the `None` case. Second, mutating `_sort_edges` like this looks dangerous: what if the iteration is interrupted for example? Two alternatives:\n\nA. Create a new `EdgesView` with `sorted=False` and use that to iterate.\n\nB. Factor out the iteration-without-sorting to a separate method and call that from `__iter__`.",
    "created_at": "2019-04-10T14:30:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423981",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:72" align="right">comment:72</div>

I don't quite like this code:

```
        if self._sort_edges is True:
            self._sort_edges = False
            yield from sorted(self, key=self._sort_edges_key)
            self._sort_edges = True
        elif self._sort_edges is None:
            self._sort_edges = False
            yield from sorted(self)
            self._sort_edges = True
```
First of all, the condition should be `if self._sort_edges:`, dropping the `None` case. Second, mutating `_sort_edges` like this looks dangerous: what if the iteration is interrupted for example? Two alternatives:

A. Create a new `EdgesView` with `sorted=False` and use that to iterate.

B. Factor out the iteration-without-sorting to a separate method and call that from `__iter__`.



---

archive/issue_comments_423982.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nReplying to [@jdemeyer](#comment:70):\n> This should `return NotImplemented`:\n> \n> ```\n>         if not isinstance(right, EdgesView):\n>             raise TypeError('right is not a EdgesView')\n> ```\n\nActually, looking better at `__add__`, you're not really assuming anything about the types of `left` and `right`, only that they are iterable. So why not just drop the condition completely and allow any iterable for `left` and `right`? That would also solve the case `list` + `EdgesView` for example.",
    "created_at": "2019-04-10T14:32:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423982",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:73" align="right">comment:73</div>

Replying to [@jdemeyer](#comment:70):
> This should `return NotImplemented`:
> 
> ```
>         if not isinstance(right, EdgesView):
>             raise TypeError('right is not a EdgesView')
> ```

Actually, looking better at `__add__`, you're not really assuming anything about the types of `left` and `right`, only that they are iterable. So why not just drop the condition completely and allow any iterable for `left` and `right`? That would also solve the case `list` + `EdgesView` for example.



---

archive/issue_comments_423983.json:
```json
{
    "body": "Changed commit from **[`4e86846`](https://github.com/sagemath/sagetrac-mirror/commit/4e8684663116fc45a1d402a22b1b44977c1a8db6)** to **[`5044e46`](https://github.com/sagemath/sagetrac-mirror/commit/5044e460c8ab0841404a5e097b19d1811cc49593)**",
    "created_at": "2019-04-10T16:31:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423983",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4e86846`](https://github.com/sagemath/sagetrac-mirror/commit/4e8684663116fc45a1d402a22b1b44977c1a8db6)** to **[`5044e46`](https://github.com/sagemath/sagetrac-mirror/commit/5044e460c8ab0841404a5e097b19d1811cc49593)**



---

archive/issue_comments_423984.json:
```json
{
    "body": "<div id=\"comment:74\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/578315e5ed3210af5343a5333e5e1b1d970ae106\"><code>578315e</code></a></td><td><code>trac #27408: better iterator over edges</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5044e460c8ab0841404a5e097b19d1811cc49593\"><code>5044e46</code></a></td><td><code>trac #27408: more tests in __add__</code></td></tr></table>\n",
    "created_at": "2019-04-10T16:31:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423984",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:74"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/578315e5ed3210af5343a5333e5e1b1d970ae106"><code>578315e</code></a></td><td><code>trac #27408: better iterator over edges</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5044e460c8ab0841404a5e097b19d1811cc49593"><code>5044e46</code></a></td><td><code>trac #27408: more tests in __add__</code></td></tr></table>




---

archive/issue_comments_423985.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\n- for the iterator, I added a method to iterate unsorted edges. This is cleaner now.\n\n- for `__add__`, I tried to drop tests and got\n\n```\nFile \"src/sage/graphs/views.pyx\", line 628, in sage.graphs.views.EdgesView.__add__\nFailed example:\n    E + 'foo'\nExpected:\n    Traceback (most recent call last):\n    ...\n    TypeError: unsupported operand type(s) for +: 'sage.graphs.views.EdgesView' and 'str'\nGot:\n    [(0, 1, None),\n     (0, 2, None),\n     (1, 3, None),\n     (2, 3, None),\n     (2, 4, None),\n     (3, 4, None),\n     'f',\n     'o',\n     'o']\n```\n  So I added a test on `left`.",
    "created_at": "2019-04-10T16:33:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423985",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:75" align="right">comment:75</div>

- for the iterator, I added a method to iterate unsorted edges. This is cleaner now.

- for `__add__`, I tried to drop tests and got

```
File "src/sage/graphs/views.pyx", line 628, in sage.graphs.views.EdgesView.__add__
Failed example:
    E + 'foo'
Expected:
    Traceback (most recent call last):
    ...
    TypeError: unsupported operand type(s) for +: 'sage.graphs.views.EdgesView' and 'str'
Got:
    [(0, 1, None),
     (0, 2, None),
     (1, 3, None),
     (2, 3, None),
     (2, 4, None),
     (3, 4, None),
     'f',
     'o',
     'o']
```
  So I added a test on `left`.



---

archive/issue_comments_423986.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nThis is twice the same condition :-)\n\n```\nif not isinstance(right, EdgesView) or not isinstance(right, EdgesView):\n```",
    "created_at": "2019-04-12T12:14:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423986",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:76" align="right">comment:76</div>

This is twice the same condition :-)

```
if not isinstance(right, EdgesView) or not isinstance(right, EdgesView):
```



---

archive/issue_comments_423987.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nFor `__add__`, I really meant allowing `EdgesView` + `list`. Otherwise, `EdgesView` + `EdgesView` works but `EdgesView` + `EdgesView` + `EdgesView` does not. That would be strange. So, if you want to keep the condition, you should check for `isinstance(..., (list, EdgesView))`.\n\nFor the deprecation warning for the `sort` keyword to be meaningful, `sort=None` should be the default. You could also consider setting `sort=True` automatically whenever a `key` is given.",
    "created_at": "2019-04-12T12:35:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423987",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:77" align="right">comment:77</div>

For `__add__`, I really meant allowing `EdgesView` + `list`. Otherwise, `EdgesView` + `EdgesView` works but `EdgesView` + `EdgesView` + `EdgesView` does not. That would be strange. So, if you want to keep the condition, you should check for `isinstance(..., (list, EdgesView))`.

For the deprecation warning for the `sort` keyword to be meaningful, `sort=None` should be the default. You could also consider setting `sort=True` automatically whenever a `key` is given.



---

archive/issue_comments_423988.json:
```json
{
    "body": "<div id=\"comment:78\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/96d87bb88cf274a8526e61779b23461027a1b1fa\"><code>96d87bb</code></a></td><td><code>trac #27408: fix __add__</code></td></tr></table>\n",
    "created_at": "2019-04-12T12:53:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423988",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:78"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/96d87bb88cf274a8526e61779b23461027a1b1fa"><code>96d87bb</code></a></td><td><code>trac #27408: fix __add__</code></td></tr></table>




---

archive/issue_comments_423989.json:
```json
{
    "body": "Changed commit from **[`5044e46`](https://github.com/sagemath/sagetrac-mirror/commit/5044e460c8ab0841404a5e097b19d1811cc49593)** to **[`96d87bb`](https://github.com/sagemath/sagetrac-mirror/commit/96d87bb88cf274a8526e61779b23461027a1b1fa)**",
    "created_at": "2019-04-12T12:53:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423989",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5044e46`](https://github.com/sagemath/sagetrac-mirror/commit/5044e460c8ab0841404a5e097b19d1811cc49593)** to **[`96d87bb`](https://github.com/sagemath/sagetrac-mirror/commit/96d87bb88cf274a8526e61779b23461027a1b1fa)**



---

archive/issue_comments_423990.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">comment:79</div>\n\nReplying to [@jdemeyer](#comment:76):\n> This is twice the same condition :-)\n> \n> ```\n> if not isinstance(right, EdgesView) or not isinstance(right, EdgesView):\n> ```\n\nnot always easy to focus on something...\n  \nReplying to [@jdemeyer](#comment:77):\n> For `__add__`, I really meant allowing `EdgesView` + `list`. Otherwise, `EdgesView` + `EdgesView` works but `EdgesView` + `EdgesView` + `EdgesView` does not. That would be strange. So, if you want to keep the condition, you should check for `isinstance(..., (list, EdgesView))`.\n\n\nI changed to use `isinstance(..., (list, EdgesView))`, and added a doctest with the some a 3 `EdgesView`\n \n> For the deprecation warning for the `sort` keyword to be meaningful, `sort=None` should be the default. You could also consider setting `sort=True` automatically whenever a `key` is given.\n\nActually, I'm not so sure of what we should do. The current default is `True` and `None` has never been used here. So introducing `None` might not be a good idea. Consequently, adding a deprecation warning is this ticket might be confusing. It is certainly better to make a specific / clearly identified ticket for that. Do you agree ?",
    "created_at": "2019-04-12T12:58:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423990",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:79" align="right">comment:79</div>

Replying to [@jdemeyer](#comment:76):
> This is twice the same condition :-)
> 
> ```
> if not isinstance(right, EdgesView) or not isinstance(right, EdgesView):
> ```

not always easy to focus on something...
  
Replying to [@jdemeyer](#comment:77):
> For `__add__`, I really meant allowing `EdgesView` + `list`. Otherwise, `EdgesView` + `EdgesView` works but `EdgesView` + `EdgesView` + `EdgesView` does not. That would be strange. So, if you want to keep the condition, you should check for `isinstance(..., (list, EdgesView))`.


I changed to use `isinstance(..., (list, EdgesView))`, and added a doctest with the some a 3 `EdgesView`
 
> For the deprecation warning for the `sort` keyword to be meaningful, `sort=None` should be the default. You could also consider setting `sort=True` automatically whenever a `key` is given.

Actually, I'm not so sure of what we should do. The current default is `True` and `None` has never been used here. So introducing `None` might not be a good idea. Consequently, adding a deprecation warning is this ticket might be confusing. It is certainly better to make a specific / clearly identified ticket for that. Do you agree ?



---

archive/issue_comments_423991.json:
```json
{
    "body": "Changed commit from **[`96d87bb`](https://github.com/sagemath/sagetrac-mirror/commit/96d87bb88cf274a8526e61779b23461027a1b1fa)** to **[`4db22e2`](https://github.com/sagemath/sagetrac-mirror/commit/4db22e28da77e5f85898809ae435c734dc215073)**",
    "created_at": "2019-05-06T16:45:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423991",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`96d87bb`](https://github.com/sagemath/sagetrac-mirror/commit/96d87bb88cf274a8526e61779b23461027a1b1fa)** to **[`4db22e2`](https://github.com/sagemath/sagetrac-mirror/commit/4db22e28da77e5f85898809ae435c734dc215073)**



---

archive/issue_comments_423992.json:
```json
{
    "body": "<div id=\"comment:80\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/880261a90db4342aa30f153724ec9d51dfe81277\"><code>880261a</code></a></td><td><code>trac #27408: fix merge conflict with 8.8.beta4</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4db22e28da77e5f85898809ae435c734dc215073\"><code>4db22e2</code></a></td><td><code>trac #27408: fix a doctest in matroids/utilities.py</code></td></tr></table>\n",
    "created_at": "2019-05-06T16:45:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423992",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:80"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/880261a90db4342aa30f153724ec9d51dfe81277"><code>880261a</code></a></td><td><code>trac #27408: fix merge conflict with 8.8.beta4</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4db22e28da77e5f85898809ae435c734dc215073"><code>4db22e2</code></a></td><td><code>trac #27408: fix a doctest in matroids/utilities.py</code></td></tr></table>




---

archive/issue_comments_423993.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nin the doctest in `matroids/utilities.py`, I also changed `'a'` to `55` to avoid py2/py3 issues.",
    "created_at": "2019-05-06T16:47:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423993",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:81" align="right">comment:81</div>

in the doctest in `matroids/utilities.py`, I also changed `'a'` to `55` to avoid py2/py3 issues.



---

archive/issue_comments_423994.json:
```json
{
    "body": "Changed commit from **[`4db22e2`](https://github.com/sagemath/sagetrac-mirror/commit/4db22e28da77e5f85898809ae435c734dc215073)** to **[`9db083b`](https://github.com/sagemath/sagetrac-mirror/commit/9db083b7318d17379debd265dbb86f8b2699c48b)**",
    "created_at": "2019-06-12T07:45:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423994",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4db22e2`](https://github.com/sagemath/sagetrac-mirror/commit/4db22e28da77e5f85898809ae435c734dc215073)** to **[`9db083b`](https://github.com/sagemath/sagetrac-mirror/commit/9db083b7318d17379debd265dbb86f8b2699c48b)**



---

archive/issue_comments_423995.json:
```json
{
    "body": "<div id=\"comment:82\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9db083b7318d17379debd265dbb86f8b2699c48b\"><code>9db083b</code></a></td><td><code>trac #27408: fix merge conflict with 8.8.rc0</code></td></tr></table>\n",
    "created_at": "2019-06-12T07:45:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423995",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:82"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9db083b7318d17379debd265dbb86f8b2699c48b"><code>9db083b</code></a></td><td><code>trac #27408: fix merge conflict with 8.8.rc0</code></td></tr></table>




---

archive/issue_comments_423996.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">comment:83</div>\n\njust fixed a merge conflict with 8.8.rc0.",
    "created_at": "2019-06-12T07:46:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423996",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:83" align="right">comment:83</div>

just fixed a merge conflict with 8.8.rc0.



---

archive/issue_comments_423997.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">comment:84</div>\n\nMoving tickets from the Sage 8.8 milestone that have been actively worked on in the last six months to the next release milestone (optimistically).",
    "created_at": "2019-07-03T11:37:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423997",
    "user": "https://github.com/embray"
}
```

<div id="comment:84" align="right">comment:84</div>

Moving tickets from the Sage 8.8 milestone that have been actively worked on in the last six months to the next release milestone (optimistically).



---

archive/issue_events_378349.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-07-03T11:37:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27408#event-378349"
}
```



---

archive/issue_events_378350.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-07-03T11:37:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27408#event-378350"
}
```



---

archive/issue_comments_423998.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">comment:85</div>\n\n*(1) in python2, maybe we need `__nonzero__` as an alias for `__bool__` ?\n\n*(2) the implementation of `__bool__` does not look optimal.. maybe trying to iter would be better ?\n\n**EDIT**: point (1) is probably not needed, because this is a cython file.",
    "created_at": "2019-07-14T09:02:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423998",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:85" align="right">comment:85</div>

*(1) in python2, maybe we need `__nonzero__` as an alias for `__bool__` ?

*(2) the implementation of `__bool__` does not look optimal.. maybe trying to iter would be better ?

**EDIT**: point (1) is probably not needed, because this is a cython file.



---

archive/issue_comments_423999.json:
```json
{
    "body": "<div id=\"comment:86\" align=\"right\">comment:86</div>\n\nReplying to [@fchapoton](#comment:85):\n> * the implementation of `__bool__` does not look optimal.. maybe trying to iter would be better ?\n\nIndeed, if it has to go through `return sum(1 for _ in self)` it is rather suboptimal. You can use the funny\n\n```\n    for _ in self: return True\n    return False\n```",
    "created_at": "2019-07-14T09:07:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-423999",
    "user": "https://github.com/videlec"
}
```

<div id="comment:86" align="right">comment:86</div>

Replying to [@fchapoton](#comment:85):
> * the implementation of `__bool__` does not look optimal.. maybe trying to iter would be better ?

Indeed, if it has to go through `return sum(1 for _ in self)` it is rather suboptimal. You can use the funny

```
    for _ in self: return True
    return False
```



---

archive/issue_comments_424000.json:
```json
{
    "body": "Changed commit from **[`9db083b`](https://github.com/sagemath/sagetrac-mirror/commit/9db083b7318d17379debd265dbb86f8b2699c48b)** to **[`575420c`](https://github.com/sagemath/sagetrac-mirror/commit/575420c70b6e04e3c6df1505aa0e760b4802066b)**",
    "created_at": "2019-07-14T12:07:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-424000",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9db083b`](https://github.com/sagemath/sagetrac-mirror/commit/9db083b7318d17379debd265dbb86f8b2699c48b)** to **[`575420c`](https://github.com/sagemath/sagetrac-mirror/commit/575420c70b6e04e3c6df1505aa0e760b4802066b)**



---

archive/issue_comments_424001.json:
```json
{
    "body": "<div id=\"comment:87\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0eb29fdd7104e68dd47f6fd31bd740db4f51727d\"><code>0eb29fd</code></a></td><td><code>trac #27408: Merged with 8.9.beta2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/575420c70b6e04e3c6df1505aa0e760b4802066b\"><code>575420c</code></a></td><td><code>trac #27408: improve method __bool__</code></td></tr></table>\n",
    "created_at": "2019-07-14T12:07:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-424001",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:87"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0eb29fdd7104e68dd47f6fd31bd740db4f51727d"><code>0eb29fd</code></a></td><td><code>trac #27408: Merged with 8.9.beta2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/575420c70b6e04e3c6df1505aa0e760b4802066b"><code>575420c</code></a></td><td><code>trac #27408: improve method __bool__</code></td></tr></table>




---

archive/issue_comments_424002.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">comment:88</div>\n\nI did something more complex but certainly more efficient than `for _ in self:` to avoid the cost of extracting edge labels and to sort edges (when `_sort_edges is True`).\n\nLet me know if I should or not add `__nonzero__`.",
    "created_at": "2019-07-14T12:13:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-424002",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:88" align="right">comment:88</div>

I did something more complex but certainly more efficient than `for _ in self:` to avoid the cost of extracting edge labels and to sort edges (when `_sort_edges is True`).

Let me know if I should or not add `__nonzero__`.



---

archive/issue_comments_424003.json:
```json
{
    "body": "<div id=\"comment:89\" align=\"right\">comment:89</div>\n\n* in src/sage/graphs/connectivity.pyx, do we need to wrap with list?",
    "created_at": "2019-07-20T11:52:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-424003",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:89" align="right">comment:89</div>

* in src/sage/graphs/connectivity.pyx, do we need to wrap with list?



---

archive/issue_comments_424004.json:
```json
{
    "body": "<div id=\"comment:90\" align=\"right\">comment:90</div>\n\nThe graph is modified inside the loop, so yes we need to wrap with list.",
    "created_at": "2019-07-20T13:33:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-424004",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:90" align="right">comment:90</div>

The graph is modified inside the loop, so yes we need to wrap with list.



---

archive/issue_comments_424005.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">comment:91</div>\n\ndo you want to wait for another round of review by Jeroen ?\n\nif not, you can set to positive on my behalf",
    "created_at": "2019-07-20T14:32:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-424005",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:91" align="right">comment:91</div>

do you want to wait for another round of review by Jeroen ?

if not, you can set to positive on my behalf



---

archive/issue_comments_424006.json:
```json
{
    "body": "Changed commit from **[`575420c`](https://github.com/sagemath/sagetrac-mirror/commit/575420c70b6e04e3c6df1505aa0e760b4802066b)** to **[`4937d0b`](https://github.com/sagemath/sagetrac-mirror/commit/4937d0b9a9b469576eb36dc7a5ea721a6a169192)**",
    "created_at": "2019-07-21T23:54:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-424006",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`575420c`](https://github.com/sagemath/sagetrac-mirror/commit/575420c70b6e04e3c6df1505aa0e760b4802066b)** to **[`4937d0b`](https://github.com/sagemath/sagetrac-mirror/commit/4937d0b9a9b469576eb36dc7a5ea721a6a169192)**



---

archive/issue_comments_424007.json:
```json
{
    "body": "<div id=\"comment:92\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5cd8c5e35196b00f648029cb02297c677a5cd1e3\"><code>5cd8c5e</code></a></td><td><code>trac #27408: Merged with 8.9.beta3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4937d0b9a9b469576eb36dc7a5ea721a6a169192\"><code>4937d0b</code></a></td><td><code>trac #27408: fix small issue with graph_coloring.pyx</code></td></tr></table>\n",
    "created_at": "2019-07-21T23:54:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-424007",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:92"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5cd8c5e35196b00f648029cb02297c677a5cd1e3"><code>5cd8c5e</code></a></td><td><code>trac #27408: Merged with 8.9.beta3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4937d0b9a9b469576eb36dc7a5ea721a6a169192"><code>4937d0b</code></a></td><td><code>trac #27408: fix small issue with graph_coloring.pyx</code></td></tr></table>




---

archive/issue_comments_424008.json:
```json
{
    "body": "<div id=\"comment:93\" align=\"right\">comment:93</div>\n\nI had to fix a small issue induced by recent change in `graph_coloring.pyx`.",
    "created_at": "2019-07-21T23:55:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-424008",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:93" align="right">comment:93</div>

I had to fix a small issue induced by recent change in `graph_coloring.pyx`.



---

archive/issue_comments_424009.json:
```json
{
    "body": "<div id=\"comment:94\" align=\"right\">comment:94</div>\n\nLet's wait for the patchbot to see if everything is in order, but for me this patch is now good to go (and the html documentation displays well).",
    "created_at": "2019-07-22T00:13:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-424009",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:94" align="right">comment:94</div>

Let's wait for the patchbot to see if everything is in order, but for me this patch is now good to go (and the html documentation displays well).



---

archive/issue_comments_424010.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer, Vincent Delecroix, Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2019-07-22T00:13:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-424010",
    "user": "https://github.com/dcoudert"
}
```

Reviewer: **Jeroen Demeyer, Vincent Delecroix, Frédéric Chapoton**



---

archive/issue_comments_424011.json:
```json
{
    "body": "<div id=\"comment:95\" align=\"right\">comment:95</div>\n\nI let you guys decide if another round of review is necessary or not.\n\nAs this is a big change, shouldn't we add a specific note in the release changelog or in the documentation of the graph module ?\n(by the way, sage-8.8.txt is missing in the [Changelogs](https://www.sagemath.org/changelogs/index.html) page)",
    "created_at": "2019-07-31T14:56:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-424011",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:95" align="right">comment:95</div>

I let you guys decide if another round of review is necessary or not.

As this is a big change, shouldn't we add a specific note in the release changelog or in the documentation of the graph module ?
(by the way, sage-8.8.txt is missing in the [Changelogs](https://www.sagemath.org/changelogs/index.html) page)



---

archive/issue_comments_424012.json:
```json
{
    "body": "<div id=\"comment:96\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3af5bba498be7277c4c4eb087124c1aee35eb9fd\"><code>3af5bba</code></a></td><td><code>trac #27408: fix merge conflicts with 8.9.beta7</code></td></tr></table>\n",
    "created_at": "2019-08-20T16:03:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-424012",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:96"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3af5bba498be7277c4c4eb087124c1aee35eb9fd"><code>3af5bba</code></a></td><td><code>trac #27408: fix merge conflicts with 8.9.beta7</code></td></tr></table>




---

archive/issue_comments_424013.json:
```json
{
    "body": "Changed commit from **[`4937d0b`](https://github.com/sagemath/sagetrac-mirror/commit/4937d0b9a9b469576eb36dc7a5ea721a6a169192)** to **[`3af5bba`](https://github.com/sagemath/sagetrac-mirror/commit/3af5bba498be7277c4c4eb087124c1aee35eb9fd)**",
    "created_at": "2019-08-20T16:03:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-424013",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4937d0b`](https://github.com/sagemath/sagetrac-mirror/commit/4937d0b9a9b469576eb36dc7a5ea721a6a169192)** to **[`3af5bba`](https://github.com/sagemath/sagetrac-mirror/commit/3af5bba498be7277c4c4eb087124c1aee35eb9fd)**



---

archive/issue_comments_424014.json:
```json
{
    "body": "<div id=\"comment:97\" align=\"right\">comment:97</div>\n\nWhen reading [this thread](https://groups.google.com/forum/#!msg/sage-devel/rg4lXvJT8Rk/9_dfhoRjAQAJ) i was surprised not to be in cc of this ticket as it refers to an email of mine, now i realize that there is a confusion in names between Nicolas Thi\u00e9ry and Thierry Monteil (it is not the first time). I had some plans to implement that, but i am even happier that someone did the job, i will have a look to the branch.",
    "created_at": "2019-09-23T19:55:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-424014",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:97" align="right">comment:97</div>

When reading [this thread](https://groups.google.com/forum/#!msg/sage-devel/rg4lXvJT8Rk/9_dfhoRjAQAJ) i was surprised not to be in cc of this ticket as it refers to an email of mine, now i realize that there is a confusion in names between Nicolas Thiéry and Thierry Monteil (it is not the first time). I had some plans to implement that, but i am even happier that someone did the job, i will have a look to the branch.



---

archive/issue_comments_424015.json:
```json
{
    "body": "<div id=\"comment:98\" align=\"right\">comment:98</div>\n\nAny feedback is more than welcome, and if happy, you can set to positive. We will also have to work on vertices and neighbors views.",
    "created_at": "2019-09-24T07:25:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-424015",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:98" align="right">comment:98</div>

Any feedback is more than welcome, and if happy, you can set to positive. We will also have to work on vertices and neighbors views.



---

archive/issue_comments_424016.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">comment:99</div>\n\nIt would be good to have this feature inside 9.0.",
    "created_at": "2019-10-07T10:11:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-424016",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:99" align="right">comment:99</div>

It would be good to have this feature inside 9.0.



---

archive/issue_events_378351.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-10-07T10:11:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27408#event-378351"
}
```



---

archive/issue_events_378352.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-10-07T10:11:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "milestone_number": null,
    "milestone_title": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27408#event-378352"
}
```



---

archive/issue_comments_424017.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nok, let it be.\n\nVincent, si tu veux faire une objection, c'est le moment.",
    "created_at": "2019-11-29T20:33:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-424017",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:0" align="right">comment:0</div>

ok, let it be.

Vincent, si tu veux faire une objection, c'est le moment.



---

archive/issue_events_378353.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-11-29T20:33:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27408#event-378353"
}
```



---

archive/issue_events_378354.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-11-29T20:33:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27408#event-378354"
}
```



---

archive/issue_events_378355.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-11-30T13:36:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27408#event-378355"
}
```



---

archive/issue_events_378356.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "5975bab92e495a1e2532adf33f29240c16e02e86",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-11-30T13:36:36Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27408#event-378356"
}
```



---

archive/issue_comments_424018.json:
```json
{
    "body": "Changed branch from **[public/27408_edgeview](https://github.com/sagemath/sagetrac-mirror/tree/public/27408_edgeview)** to **[`3af5bba`](https://github.com/sagemath/sagetrac-mirror/commit/3af5bba498be7277c4c4eb087124c1aee35eb9fd)**",
    "created_at": "2019-11-30T13:36:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27408",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27408#issuecomment-424018",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/27408_edgeview](https://github.com/sagemath/sagetrac-mirror/tree/public/27408_edgeview)** to **[`3af5bba`](https://github.com/sagemath/sagetrac-mirror/commit/3af5bba498be7277c4c4eb087124c1aee35eb9fd)**
