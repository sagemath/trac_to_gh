# Issue 27652: parent of plethysm

archive/issues_027415.json:
```json
{
    "assignees": [],
    "body": "\n\nDepends on #34470\n\nCC:  @zabrocki\n\nKeywords: **conversion**\n\nBranch/Commit: **[`0dcc0aa`](https://github.com/sagemath/sagetrac-mirror/commit/0dcc0aa5532cb83322880e3dbc6b2a5019e3463f)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Martin Rubey**\n\nComponent: **combinatorics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/27652_\n\n",
    "closed_at": "2022-12-11T11:11:48Z",
    "created_at": "2019-04-12T05:38:52Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "parent of plethysm",
    "type": "issue",
    "updated_at": "2022-12-11T11:11:48Z",
    "url": "https://github.com/sagemath/sage/issues/27652",
    "user": "https://github.com/mantepse"
}
```


Depends on #34470

CC:  @zabrocki

Keywords: **conversion**

Branch/Commit: **[`0dcc0aa`](https://github.com/sagemath/sagetrac-mirror/commit/0dcc0aa5532cb83322880e3dbc6b2a5019e3463f)**

Reviewer: **Travis Scrimshaw**

Author: **Martin Rubey**

Component: **combinatorics**

_Issue created by migration from https://trac.sagemath.org/ticket/27652_





---

archive/issue_events_376518.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2019-04-12T05:38:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27652#event-376518"
}
```



---

archive/issue_events_376519.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2019-04-12T05:38:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27652#event-376519"
}
```



---

archive/issue_comments_428453.json:
```json
{
    "body": "Branch: **[u/mantepse/parent_of_plethysm](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/parent_of_plethysm)**",
    "created_at": "2019-04-12T05:41:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428453",
    "user": "https://github.com/mantepse"
}
```

Branch: **[u/mantepse/parent_of_plethysm](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/parent_of_plethysm)**



---

archive/issue_events_376520.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2019-04-12T08:26:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27652#event-376520"
}
```



---

archive/issue_comments_428454.json:
```json
{
    "body": "Commit: **[`9280ad9`](https://github.com/sagemath/sagetrac-mirror/commit/9280ad9c33c878b77bd607d77d2188896456f243)**",
    "created_at": "2019-04-12T08:26:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428454",
    "user": "https://github.com/mantepse"
}
```

Commit: **[`9280ad9`](https://github.com/sagemath/sagetrac-mirror/commit/9280ad9c33c878b77bd607d77d2188896456f243)**



---

archive/issue_events_376521.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2019-04-12T08:26:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27652#event-376521"
}
```



---

archive/issue_comments_428455.json:
```json
{
    "body": "Author: **Martin Rubey**",
    "created_at": "2019-04-12T08:26:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428455",
    "user": "https://github.com/mantepse"
}
```

Author: **Martin Rubey**



---

archive/issue_comments_428456.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9280ad9c33c878b77bd607d77d2188896456f243\"><code>9280ad9</code></a></td><td><code>make plethysm with tensor return result as element of second parent</code></td></tr></table>\n",
    "created_at": "2019-04-12T08:26:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428456",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9280ad9c33c878b77bd607d77d2188896456f243"><code>9280ad9</code></a></td><td><code>make plethysm with tensor return result as element of second parent</code></td></tr></table>




---

archive/issue_events_376522.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2019-04-12T08:26:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27652#event-376522"
}
```



---

archive/issue_comments_428457.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nCan you explain why you would do this?  It seems wrong to me.\n\n```\nsage: s[2,1](p[1]+1)\ns[1] + s[1, 1] + s[2] + s[2, 1]\nsage: s[2,1](tensor([p[1],p[1]]))\n1/3*p[1, 1, 1] # p[1, 1, 1] - 1/3*p[3] # p[3]\n```",
    "created_at": "2019-04-15T14:31:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428457",
    "user": "https://github.com/zabrocki"
}
```

<div id="comment:4" align="right">comment:4</div>

Can you explain why you would do this?  It seems wrong to me.

```
sage: s[2,1](p[1]+1)
s[1] + s[1, 1] + s[2] + s[2, 1]
sage: s[2,1](tensor([p[1],p[1]]))
1/3*p[1, 1, 1] # p[1, 1, 1] - 1/3*p[3] # p[3]
```



---

archive/issue_comments_428458.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI have two reasons:\n\n1.) the result of plethysm with a tensor is a tensor.\n\n2.) I have a class that inherits from `CombinatorialFreeModule_Tensor`.  Essentially, it is a parent for tensor products of symmetric functions, with some extra methods.  I want that plethysm with an element from this class works.  It almost does, except that the result is then a tensor product, and not an element from my class.\n\nTo elaborate on 2., here is my code.  (The `tensor_constructor` method works around another thing, which I think is a bug.)\n\n```\n\"\"\"\nsage: S = SymmetricFunctions(QQ)\nsage: S.inject_shorthands()\nsage: t = tensor([s[1,1], h[2]])\nsage: P = TwoPositions(S.s(), S.h())\nsage: x = P(t)\nsage: 2*x\nsage: h[2](x)\n\"\"\"\ndef from_ch_characters(t):\n    P = TwoPositions(*t.parent()._sets)\n    return P(t)\n\nclass TwoPositionsElement(CombinatorialFreeModule_Tensor.Element):\n    pass\n\n\nfrom sage.combinat.free_module import CombinatorialFreeModule_Tensor, CartesianProductWithFlattening\nclass TwoPositions(CombinatorialFreeModule_Tensor):\n    def __init__(self, *modules):\n        cat = HopfAlgebrasWithBasis(QQ).TensorProducts()\n        CombinatorialFreeModule_Tensor.__init__(self,\n                                                modules,\n                                                category = cat)\n\n    @cached_method\n    def tensor_constructor(self, modules):\n        assert(module in ModulesWithBasis(self.base_ring()) for module in modules)\n        # assert(tensor(modules) == self)\n        # a list l such that l[i] is True if modules[i] is readily a tensor product\n        is_tensor = [isinstance(module, CombinatorialFreeModule_Tensor) for module in modules]\n        # the tensor_constructor, on basis elements\n        result = self.monomial * CartesianProductWithFlattening(is_tensor) #.\n        # TODO: make this into an element of Hom( A x B, C ) when those will exist\n        for i in range(0, len(modules)):\n            result = modules[i]._module_morphism(result, position = i, codomain = self)\n        return result\n\n    def __repr__(self):\n        return \"TwoPositions in %s\"%(self._sets,)\n\n    Element = TwoPositionsElement\n```",
    "created_at": "2019-04-15T15:34:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428458",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:5" align="right">comment:5</div>

I have two reasons:

1.) the result of plethysm with a tensor is a tensor.

2.) I have a class that inherits from `CombinatorialFreeModule_Tensor`.  Essentially, it is a parent for tensor products of symmetric functions, with some extra methods.  I want that plethysm with an element from this class works.  It almost does, except that the result is then a tensor product, and not an element from my class.

To elaborate on 2., here is my code.  (The `tensor_constructor` method works around another thing, which I think is a bug.)

```
"""
sage: S = SymmetricFunctions(QQ)
sage: S.inject_shorthands()
sage: t = tensor([s[1,1], h[2]])
sage: P = TwoPositions(S.s(), S.h())
sage: x = P(t)
sage: 2*x
sage: h[2](x)
"""
def from_ch_characters(t):
    P = TwoPositions(*t.parent()._sets)
    return P(t)

class TwoPositionsElement(CombinatorialFreeModule_Tensor.Element):
    pass


from sage.combinat.free_module import CombinatorialFreeModule_Tensor, CartesianProductWithFlattening
class TwoPositions(CombinatorialFreeModule_Tensor):
    def __init__(self, *modules):
        cat = HopfAlgebrasWithBasis(QQ).TensorProducts()
        CombinatorialFreeModule_Tensor.__init__(self,
                                                modules,
                                                category = cat)

    @cached_method
    def tensor_constructor(self, modules):
        assert(module in ModulesWithBasis(self.base_ring()) for module in modules)
        # assert(tensor(modules) == self)
        # a list l such that l[i] is True if modules[i] is readily a tensor product
        is_tensor = [isinstance(module, CombinatorialFreeModule_Tensor) for module in modules]
        # the tensor_constructor, on basis elements
        result = self.monomial * CartesianProductWithFlattening(is_tensor) #.
        # TODO: make this into an element of Hom( A x B, C ) when those will exist
        for i in range(0, len(modules)):
            result = modules[i]._module_morphism(result, position = i, codomain = self)
        return result

    def __repr__(self):
        return "TwoPositions in %s"%(self._sets,)

    Element = TwoPositionsElement
```



---

archive/issue_comments_428459.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nA change like this may make yours work but at the expense of breaking other's code.\n\nThis change is not consistent with other uses of plethysm.  I don't think that your \"1.) the result of plethysm with a tensor is a tensor\" is a reason at all because the plethysm of a tensor is already a tensor.  What you are doing is proposing changing the output basis.  The choice of making the basis output of `f(g)` the basis that f is expressed in not arbitrary and should not be changed without fundamental reasons (\"it doesn't work with my code\" is not fundamental, find another way to make your code work, I am sure that there are a dozen ways of doing that without changing the behavoir of plethysm).\n\n> except that the result is then a tensor product, and not an element from my class.\n\nBut then you should cast the output into your class.",
    "created_at": "2019-04-15T15:53:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428459",
    "user": "https://github.com/zabrocki"
}
```

<div id="comment:6" align="right">comment:6</div>

A change like this may make yours work but at the expense of breaking other's code.

This change is not consistent with other uses of plethysm.  I don't think that your "1.) the result of plethysm with a tensor is a tensor" is a reason at all because the plethysm of a tensor is already a tensor.  What you are doing is proposing changing the output basis.  The choice of making the basis output of `f(g)` the basis that f is expressed in not arbitrary and should not be changed without fundamental reasons ("it doesn't work with my code" is not fundamental, find another way to make your code work, I am sure that there are a dozen ways of doing that without changing the behavoir of plethysm).

> except that the result is then a tensor product, and not an element from my class.

But then you should cast the output into your class.



---

archive/issue_comments_428460.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nOK, no problem, although I do not understand your reasons.\n\nPossibly I miscommunicated item 1: what I meant to say is that `f(g)` is more naturally an element of the parent of `g` than of the parent of `f`.  The basis `f` is expressed in cannot possibly be a basis for `g` or `f(g)`, except when `f` and `g` are both symmetric functions (in a single alphabet, so to say).\n\nIn other words, the change of basis `plethysm` currently does is much more drastic than what I am proposing.\n\nI agree that item 2 is not a good reason.  However, I do not know an easy workaround.  In particular, I do not know how to cast the output into my class, because `plethysm` is a method of symmetric functions, not of my class.",
    "created_at": "2019-04-15T16:41:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428460",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:7" align="right">comment:7</div>

OK, no problem, although I do not understand your reasons.

Possibly I miscommunicated item 1: what I meant to say is that `f(g)` is more naturally an element of the parent of `g` than of the parent of `f`.  The basis `f` is expressed in cannot possibly be a basis for `g` or `f(g)`, except when `f` and `g` are both symmetric functions (in a single alphabet, so to say).

In other words, the change of basis `plethysm` currently does is much more drastic than what I am proposing.

I agree that item 2 is not a good reason.  However, I do not know an easy workaround.  In particular, I do not know how to cast the output into my class, because `plethysm` is a method of symmetric functions, not of my class.



---

archive/issue_comments_428461.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nIn my example I showed you that the plethysm of a Schur basis element and a power basis element outputs something in the Schur basis.  That is the default behavior.\n\n> what I meant to say is that `f(g)` is more naturally an element of the parent of `g` than of the parent of `f`.\n\nMaybe sometimes, but not in my uses of plethysm.  I might be able to be convinced, but I would examples and even then I would hesitate to make a change like this because that is not what happens for `f(g)` currently and it is likely to break users' code.\n\n> In particular, I do not know how to cast the output into my class, because plethysm is a method of symmetric functions, not of my class.\n\nI think that what you are proposing is a way to `f(g)` when `g` is not a symmetric function or a tensor of symmetric functions, but instead an element of your new class.  That is, you are proposing adding another case into the computation of `f(g)` : if `g` is of new class then do yet a different computation.  I don't think that this requires you to change the default behavior of the computation of `f(g)` when `g` is a tensor of symmetric functions.",
    "created_at": "2019-04-15T17:00:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428461",
    "user": "https://github.com/zabrocki"
}
```

<div id="comment:8" align="right">comment:8</div>

In my example I showed you that the plethysm of a Schur basis element and a power basis element outputs something in the Schur basis.  That is the default behavior.

> what I meant to say is that `f(g)` is more naturally an element of the parent of `g` than of the parent of `f`.

Maybe sometimes, but not in my uses of plethysm.  I might be able to be convinced, but I would examples and even then I would hesitate to make a change like this because that is not what happens for `f(g)` currently and it is likely to break users' code.

> In particular, I do not know how to cast the output into my class, because plethysm is a method of symmetric functions, not of my class.

I think that what you are proposing is a way to `f(g)` when `g` is not a symmetric function or a tensor of symmetric functions, but instead an element of your new class.  That is, you are proposing adding another case into the computation of `f(g)` : if `g` is of new class then do yet a different computation.  I don't think that this requires you to change the default behavior of the computation of `f(g)` when `g` is a tensor of symmetric functions.



---

archive/issue_comments_428462.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\n> Maybe sometimes, but not in my uses of plethysm.\n\nI agree that other conventions may be more convenient for other uses.  Of course, I know nothing about your uses of plethysm.\n\nIn my computations, it happens frequently that the basis of the tensor product is chosen for a reason, and the basis of `f`  in `f(g)` is rather arbitrary.  But this is very likely only by coincidence.\n\n```\nsage: s[2](tensor([s(h[2]), s(m[2])]))\ns[2, 2] # s[2, 2] - s[2, 2] # s[3, 1] + s[2, 2] # s[4] + s[3, 1] # s[1, 1, 1, 1] - s[3, 1] # s[2, 1, 1] + s[3, 1] # s[2, 2] + s[4] # s[2, 2] - s[4] # s[3, 1] + s[4] # s[4]\nsage: s[2](tensor([(h[2]), (m[2])]))\nh[2, 2] # m[2, 2] + h[2, 2] # m[4] - h[3, 1] # m[4] + h[4] # m[4]\n```\n\nI guess that the only real reason I have to offer is that a basis for the symmetric functions cannot possibly be a basis for a tensor power of symmetric functions.  Since the result is in tensor space, I really have to choose a basis for the tensor space, and taking a power of the basis of `f` seems more arbitrary than taking the basis of `g`.\n\nConcerning the other question: no I do not want to add another case into the computation of `f(g)`, my class for `g` is simply a tensor product of symmetric functions with some more methods.  I guess it might be possible to define an action of symmetric functions on my class, but I don't know how to do that.  I wonder how generic plethysm really is (I think Borger and Wieland studied that).",
    "created_at": "2019-04-15T18:46:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428462",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:9" align="right">comment:9</div>

> Maybe sometimes, but not in my uses of plethysm.

I agree that other conventions may be more convenient for other uses.  Of course, I know nothing about your uses of plethysm.

In my computations, it happens frequently that the basis of the tensor product is chosen for a reason, and the basis of `f`  in `f(g)` is rather arbitrary.  But this is very likely only by coincidence.

```
sage: s[2](tensor([s(h[2]), s(m[2])]))
s[2, 2] # s[2, 2] - s[2, 2] # s[3, 1] + s[2, 2] # s[4] + s[3, 1] # s[1, 1, 1, 1] - s[3, 1] # s[2, 1, 1] + s[3, 1] # s[2, 2] + s[4] # s[2, 2] - s[4] # s[3, 1] + s[4] # s[4]
sage: s[2](tensor([(h[2]), (m[2])]))
h[2, 2] # m[2, 2] + h[2, 2] # m[4] - h[3, 1] # m[4] + h[4] # m[4]
```

I guess that the only real reason I have to offer is that a basis for the symmetric functions cannot possibly be a basis for a tensor power of symmetric functions.  Since the result is in tensor space, I really have to choose a basis for the tensor space, and taking a power of the basis of `f` seems more arbitrary than taking the basis of `g`.

Concerning the other question: no I do not want to add another case into the computation of `f(g)`, my class for `g` is simply a tensor product of symmetric functions with some more methods.  I guess it might be possible to define an action of symmetric functions on my class, but I don't know how to do that.  I wonder how generic plethysm really is (I think Borger and Wieland studied that).



---

archive/issue_events_376523.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-07-03T11:37:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27652#event-376523"
}
```



---

archive/issue_events_376524.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-07-03T11:37:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27652#event-376524"
}
```



---

archive/issue_comments_428463.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nMoving tickets from the Sage 8.8 milestone that have been actively worked on in the last six months to the next release milestone (optimistically).",
    "created_at": "2019-07-03T11:37:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428463",
    "user": "https://github.com/embray"
}
```

<div id="comment:10" align="right">comment:10</div>

Moving tickets from the Sage 8.8 milestone that have been actively worked on in the last six months to the next release milestone (optimistically).



---

archive/issue_comments_428464.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nTicket retargeted after milestone closed",
    "created_at": "2019-12-30T14:48:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428464",
    "user": "https://github.com/embray"
}
```

<div id="comment:11" align="right">comment:11</div>

Ticket retargeted after milestone closed



---

archive/issue_events_376525.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27652#event-376525"
}
```



---

archive/issue_events_376526.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27652#event-376526"
}
```



---

archive/issue_events_376527.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27652#event-376527"
}
```



---

archive/issue_events_376528.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27652#event-376528"
}
```



---

archive/issue_comments_428465.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nBatch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.",
    "created_at": "2020-04-14T19:41:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428465",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:12" align="right">comment:12</div>

Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.



---

archive/issue_events_376529.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27652#event-376529"
}
```



---

archive/issue_events_376530.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27652#event-376530"
}
```



---

archive/issue_comments_428466.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-15T22:07:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428466",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:14" align="right">comment:14</div>

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_376531.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-15T22:07:04Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27652#event-376531"
}
```



---

archive/issue_events_376532.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-15T22:07:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27652#event-376532"
}
```



---

archive/issue_comments_428467.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nSetting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428467",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:15" align="right">comment:15</div>

Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_events_376533.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27652#event-376533"
}
```



---

archive/issue_events_376534.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27652#event-376534"
}
```



---

archive/issue_events_376535.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:53:12Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27652#event-376535"
}
```



---

archive/issue_events_376536.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:53:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27652#event-376536"
}
```



---

archive/issue_comments_428468.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nStalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.",
    "created_at": "2021-12-18T19:53:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428468",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:16" align="right">comment:16</div>

Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.



---

archive/issue_events_376537.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T17:54:54Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27652#event-376537"
}
```



---

archive/issue_events_376538.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T17:54:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27652#event-376538"
}
```



---

archive/issue_events_376539.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27652#event-376539"
}
```



---

archive/issue_events_376540.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27652#event-376540"
}
```



---

archive/issue_comments_428469.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nI am coming back to this ticket, because the current behaviour still seems inconsistent to me.\n\n```\nsage: s = SymmetricFunctions(QQ).s()\nsage: p = SymmetricFunctions(QQ).p()\nsage: S = LazySymmetricFunctions(s)\nsage: P = LazySymmetricFunctions(p)\nsage: S(s[2,1])(P(p[1,1]))\n(1/3*p[1,1,1,1,1,1]-1/3*p[3,3])\nsage: s[2,1](p[1,1])\n2*s[2, 1, 1, 1, 1] + 3*s[2, 2, 1, 1] + s[2, 2, 2] + 3*s[3, 1, 1, 1] + 6*s[3, 2, 1] + s[3, 3] + 3*s[4, 1, 1] + 3*s[4, 2] + 2*s[5, 1]\n```",
    "created_at": "2022-09-19T19:28:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428469",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:19" align="right">comment:19</div>

I am coming back to this ticket, because the current behaviour still seems inconsistent to me.

```
sage: s = SymmetricFunctions(QQ).s()
sage: p = SymmetricFunctions(QQ).p()
sage: S = LazySymmetricFunctions(s)
sage: P = LazySymmetricFunctions(p)
sage: S(s[2,1])(P(p[1,1]))
(1/3*p[1,1,1,1,1,1]-1/3*p[3,3])
sage: s[2,1](p[1,1])
2*s[2, 1, 1, 1, 1] + 3*s[2, 2, 1, 1] + s[2, 2, 2] + 3*s[3, 1, 1, 1] + 6*s[3, 2, 1] + s[3, 3] + 3*s[4, 1, 1] + 3*s[4, 2] + 2*s[5, 1]
```



---

archive/issue_comments_428470.json:
```json
{
    "body": "Changed keywords from none to **conversion**",
    "created_at": "2022-09-19T19:29:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428470",
    "user": "https://github.com/mantepse"
}
```

Changed keywords from none to **conversion**



---

archive/issue_comments_428471.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nHi Martin, Can you explain your example?  Why would one prefer that the basis of `f(g)` should be expressed in the expression of `g` rather than the basis of `f`?\n\nA typical use for plethysm in symmetric functions would be to represent expressions like $s_\\lambda[X+1]$ or $s_\\lambda[(1-q)X]$ in which case you would want those expressions to be expanded in the Schur basis and not of that where your expression $X+1$ or $(1-q)X$ lies.  For example::\n\n```\nsage: SymmetricFunctions(QQ['q'].fraction_field()).inject_shorthands(verbose=False)\nsage: X = p[1]\nsage: q = s.base_ring().gen()\nsage: s[3,2](X+1)\ns[2] + s[2, 1] + s[2, 2] + s[3] + s[3, 1] + s[3, 2]\nsage: s[2,1]((1-q)*X)\n(q^2-q)*s[1, 1, 1] + (-q^3+2*q^2-2*q+1)*s[2, 1] + (q^2-q)*s[3]\n```\n\nI would agree that a case *could* be made that the parent should be chosen from the inner symmetric function rather than the outer.  The problem is that a lot of code is based on the opposite choice was made from the very beginning.",
    "created_at": "2022-09-20T02:00:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428471",
    "user": "https://github.com/zabrocki"
}
```

<div id="comment:21" align="right">comment:21</div>

Hi Martin, Can you explain your example?  Why would one prefer that the basis of `f(g)` should be expressed in the expression of `g` rather than the basis of `f`?

A typical use for plethysm in symmetric functions would be to represent expressions like $s_\lambda[X+1]$ or $s_\lambda[(1-q)X]$ in which case you would want those expressions to be expanded in the Schur basis and not of that where your expression $X+1$ or $(1-q)X$ lies.  For example::

```
sage: SymmetricFunctions(QQ['q'].fraction_field()).inject_shorthands(verbose=False)
sage: X = p[1]
sage: q = s.base_ring().gen()
sage: s[3,2](X+1)
s[2] + s[2, 1] + s[2, 2] + s[3] + s[3, 1] + s[3, 2]
sage: s[2,1]((1-q)*X)
(q^2-q)*s[1, 1, 1] + (-q^3+2*q^2-2*q+1)*s[2, 1] + (q^2-q)*s[3]
```

I would agree that a case *could* be made that the parent should be chosen from the inner symmetric function rather than the outer.  The problem is that a lot of code is based on the opposite choice was made from the very beginning.



---

archive/issue_comments_428472.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nOne reason why I think you should use the inner parent, in addition to the example in [comment:9](#comment:9), is that it is inconsistent with how polynomial evaluation is handled. Evaluation `ev_Y: R[X] -> S` is a morphism such that the rings `R <= S` (for fixed `Y <= S`). Likewise, as I understand your notes, plethysm is also a morphism of rings for a fixed set of \"inputs\". I think this is relevant since plethysm is like composition of symmetric functions. This is the motivation for our choice of the lazy symmetric functions.\n\nCan you give some examples where the current choice is necessary (outside of the implementation of `plethysm()`? I feel like this is a bug, as I would expect this to work:\n\n```\nsage: s = SymmetricFunctions(QQ).s()\nsage: q = ZZ['q'].fraction_field().gen()\nsage: p = SymmetricFunctions(q.parent()).p()\nsage: s[2,1]((1-q)*p[1])\nTypeError: cannot convert nonconstant polynomial\n```\nContrast this to what lazy symmetric functions does:\n\n```python\nsage: sq = SymmetricFunctions(q.parent()).s()\nsage: Sq = LazySymmetricFunctions(sq)\nsage: g = (1-q) * P(lambda n: p[1] if n == 1 else p.zero())\nsage: g  # We make it an inexact series to not call the symmetric functions code\n((-q+1)*p[1]) + O^7\nsage: S(s[2,1])(g)\n(((-q^3+3*q^2-3*q+1)/3)*p[1,1,1]+((q^3-1)/3)*p[3]) + O^7\nsage: Sq(S(s[2,1])(g))\n((q^2-q)*s[1,1,1]+(-q^3+2*q^2-2*q+1)*s[2,1]+(q^2-q)*s[3]) + O^7\n```",
    "created_at": "2022-09-20T05:35:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428472",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:22" align="right">comment:22</div>

One reason why I think you should use the inner parent, in addition to the example in [comment:9](#comment:9), is that it is inconsistent with how polynomial evaluation is handled. Evaluation `ev_Y: R[X] -> S` is a morphism such that the rings `R <= S` (for fixed `Y <= S`). Likewise, as I understand your notes, plethysm is also a morphism of rings for a fixed set of "inputs". I think this is relevant since plethysm is like composition of symmetric functions. This is the motivation for our choice of the lazy symmetric functions.

Can you give some examples where the current choice is necessary (outside of the implementation of `plethysm()`? I feel like this is a bug, as I would expect this to work:

```
sage: s = SymmetricFunctions(QQ).s()
sage: q = ZZ['q'].fraction_field().gen()
sage: p = SymmetricFunctions(q.parent()).p()
sage: s[2,1]((1-q)*p[1])
TypeError: cannot convert nonconstant polynomial
```
Contrast this to what lazy symmetric functions does:

```python
sage: sq = SymmetricFunctions(q.parent()).s()
sage: Sq = LazySymmetricFunctions(sq)
sage: g = (1-q) * P(lambda n: p[1] if n == 1 else p.zero())
sage: g  # We make it an inexact series to not call the symmetric functions code
((-q+1)*p[1]) + O^7
sage: S(s[2,1])(g)
(((-q^3+3*q^2-3*q+1)/3)*p[1,1,1]+((q^3-1)/3)*p[3]) + O^7
sage: Sq(S(s[2,1])(g))
((q^2-q)*s[1,1,1]+(-q^3+2*q^2-2*q+1)*s[2,1]+(q^2-q)*s[3]) + O^7
```



---

archive/issue_comments_428473.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nHi Mike!\n\nThank you for your rapid answer!\n\nMy example only shows that plethysm of `SymmetricFunctions` and `LazySymmetricFunctions` behaves differently.\n\nI just realised that this behaviour (using the outer parent) is actually very specific to symmetric functions:\n\n```\nsage: s = SymmetricFunctions(QQ).s()\nsage: Q.<t> = QQ[]\nsage: f = 1 + t + 2*t^2\nsage: f(s[1] + s[2] + s[1,1])\ns[] + s[1] + 3*s[1, 1] + 4*s[1, 1, 1] + 2*s[1, 1, 1, 1] + 3*s[2] + 8*s[2, 1] + 6*s[2, 1, 1] + 4*s[2, 2] + 4*s[3] + 6*s[3, 1] + 2*s[4]\n```\nThus, polynomials of symmetric functions yield symmetric functions.",
    "created_at": "2022-09-20T10:42:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428473",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:23" align="right">comment:23</div>

Hi Mike!

Thank you for your rapid answer!

My example only shows that plethysm of `SymmetricFunctions` and `LazySymmetricFunctions` behaves differently.

I just realised that this behaviour (using the outer parent) is actually very specific to symmetric functions:

```
sage: s = SymmetricFunctions(QQ).s()
sage: Q.<t> = QQ[]
sage: f = 1 + t + 2*t^2
sage: f(s[1] + s[2] + s[1,1])
s[] + s[1] + 3*s[1, 1] + 4*s[1, 1, 1] + 2*s[1, 1, 1, 1] + 3*s[2] + 8*s[2, 1] + 6*s[2, 1, 1] + 4*s[2, 2] + 4*s[3] + 6*s[3, 1] + 2*s[4]
```
Thus, polynomials of symmetric functions yield symmetric functions.



---

archive/issue_comments_428474.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nWhere you say \"plethysm is also a morphism of rings\" might get at the argument for me.  For instance, one can define the plethysm of a symmetric function and a quasi-symmetric function.  The result is a quasi-symmetric function (e.g. `f(G)` where `f` is symmetric and `G` is quasi-symmetric the result is quasi-symmetric).\n\nYou've convinced me.  Sorry for being a stickler (but this change will break my code in places).  Its just that up to this point the examples seemed like it was based on the choice and I couldn't see an example where that choice wasn't arbitrary.",
    "created_at": "2022-09-21T14:49:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428474",
    "user": "https://github.com/zabrocki"
}
```

<div id="comment:24" align="right">comment:24</div>

Where you say "plethysm is also a morphism of rings" might get at the argument for me.  For instance, one can define the plethysm of a symmetric function and a quasi-symmetric function.  The result is a quasi-symmetric function (e.g. `f(G)` where `f` is symmetric and `G` is quasi-symmetric the result is quasi-symmetric).

You've convinced me.  Sorry for being a stickler (but this change will break my code in places).  Its just that up to this point the examples seemed like it was based on the choice and I couldn't see an example where that choice wasn't arbitrary.



---

archive/issue_comments_428475.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nNo problem. It's a fair question as it does seem arbitrary on the face of it, and likewise to request not to break your code. Hopefully to fix it, it is as simple as wrapping the output of the plethysm with the outer basis (which would effectively be a no-op with the current code).\n\nMartin, for the code, do we know that the terms in the sum belong to `parent`? Or have some idea about the parent of the intermediate computations? It should be faster to do `P.linear_combination` and `P.sum` because these use the specific element class and avoid a number of transient elements.",
    "created_at": "2022-09-22T03:51:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428475",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:25" align="right">comment:25</div>

No problem. It's a fair question as it does seem arbitrary on the face of it, and likewise to request not to break your code. Hopefully to fix it, it is as simple as wrapping the output of the plethysm with the outer basis (which would effectively be a no-op with the current code).

Martin, for the code, do we know that the terms in the sum belong to `parent`? Or have some idea about the parent of the intermediate computations? It should be faster to do `P.linear_combination` and `P.sum` because these use the specific element class and avoid a number of transient elements.



---

archive/issue_comments_428476.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nGreat!\n\nConcerning the code: wouldn't it be better to do the easy change first, and speedup in another ticket?\n\nHm, I just wanted to show off that the lazy code would be much faster, but it isn't on my branch right now.  What happened?",
    "created_at": "2022-09-22T07:11:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428476",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:26" align="right">comment:26</div>

Great!

Concerning the code: wouldn't it be better to do the easy change first, and speedup in another ticket?

Hm, I just wanted to show off that the lazy code would be much faster, but it isn't on my branch right now.  What happened?



---

archive/issue_comments_428477.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [Martin Rubey](#comment:26):\n> Great!\n> \n> Concerning the code: wouldn't it be better to do the easy change first, and speedup in another ticket?\n\nYou are already changing the code there anyways. It is simple enough to do if you know which parent you are summing over.\n\n> Hm, I just wanted to show off that the lazy code would be much faster, but it isn't on my branch right now.  What happened?\n\nThe current branch here doesn't have the lazy series stuff (it is better that it doesn't IMO). You can create a new branch and merge the two together to test them simultaneously.",
    "created_at": "2022-09-22T07:16:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428477",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [Martin Rubey](#comment:26):
> Great!
> 
> Concerning the code: wouldn't it be better to do the easy change first, and speedup in another ticket?

You are already changing the code there anyways. It is simple enough to do if you know which parent you are summing over.

> Hm, I just wanted to show off that the lazy code would be much faster, but it isn't on my branch right now.  What happened?

The current branch here doesn't have the lazy series stuff (it is better that it doesn't IMO). You can create a new branch and merge the two together to test them simultaneously.



---

archive/issue_comments_428478.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nTravis, I tested it on *my* branch, not on this branch.\n\n```\nsage: N=5; f = sum(s(Partitions(n).random_element()) for n in range(N)); g = sum(s(Partitions(n).random_element()) for n in range(1, N)); f1 = L(f) + L(lambda n: 0) ; g1 = L(g) + L(lambda n: 0)\nsage: %time r = f(g)\nCPU times: user 705 ms, sys: 1 \u00b5s, total: 705 ms\nWall time: 705 ms\nsage: %time r1 = f1(g1).truncate(f.degree()*g.degree()+1)\nCPU times: user 1.09 s, sys: 1 \u00b5s, total: 1.09 s\nWall time: 1.09 s\n```",
    "created_at": "2022-09-22T07:26:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428478",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:28" align="right">comment:28</div>

Travis, I tested it on *my* branch, not on this branch.

```
sage: N=5; f = sum(s(Partitions(n).random_element()) for n in range(N)); g = sum(s(Partitions(n).random_element()) for n in range(1, N)); f1 = L(f) + L(lambda n: 0) ; g1 = L(g) + L(lambda n: 0)
sage: %time r = f(g)
CPU times: user 705 ms, sys: 1 µs, total: 705 ms
Wall time: 705 ms
sage: %time r1 = f1(g1).truncate(f.degree()*g.degree()+1)
CPU times: user 1.09 s, sys: 1 µs, total: 1.09 s
Wall time: 1.09 s
```



---

archive/issue_comments_428479.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nThe branch in this ticket is also your branch. So I thought that was what you were talking.\n\nHowever, I am not sure what has changed with the lazy plethysm speed. I don't think we changed anything with that...",
    "created_at": "2022-09-22T08:11:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428479",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:29" align="right">comment:29</div>

The branch in this ticket is also your branch. So I thought that was what you were talking.

However, I am not sure what has changed with the lazy plethysm speed. I don't think we changed anything with that...



---

archive/issue_comments_428480.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nCan we be sure that our plethysm was faster?",
    "created_at": "2022-09-22T09:28:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428480",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:30" align="right">comment:30</div>

Can we be sure that our plethysm was faster?



---

archive/issue_comments_428481.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nYou had an example of this in ticket:34383#comment5.",
    "created_at": "2022-09-22T10:59:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428481",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:31" align="right">comment:31</div>

You had an example of this in ticket:34383#comment5.



---

archive/issue_comments_428482.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nWow, great, thank you!\n\nApparently I misremembered, because there we only compute a single degree of the plethysm, not all of them.\n\nHowever, `%prun` shows something very strange, which might give us a hint for what we are doing wrong.\n\n```\nsage: N=5; f = sum(s(Partitions(n).random_element()) for n in range(N)); g = sum(s(Partitions(n).random_element()) for n in range(1, N)); f1 = L(f) + L(lambda n: 0) ; g1 = L(g) + L(lambda n: 0)\n\nsage: %prun r1 = f1(g1).truncate(f.degree()*g.degree()+1)\n         2373194 function calls (2371664 primitive calls) in 1.949 seconds\n\n   Ordered by: internal time\n\n   ncalls  tottime  percall  cumtime  percall filename:lineno(function)\n     1173    0.656    0.001    1.519    0.001 {sage.libs.symmetrica.symmetrica.t_POWSYM_SCHUR_symmetrica}\n    ...\n      719    0.138    0.000    1.893    0.003 {built-in method sage.data_structures.blas_dict.linear_combination}\n    ...\n     1124    0.002    0.000    0.015    0.000 partition.py:1060(stretch)\n    ...\n\nsage: %prun r = f(g)\n         1413296 function calls (1409790 primitive calls) in 1.182 seconds\n\n   Ordered by: internal time\n\n   ncalls  tottime  percall  cumtime  percall filename:lineno(function)\n      512    0.309    0.001    0.797    0.002 {sage.libs.symmetrica.symmetrica.t_POWSYM_SCHUR_symmetrica}\n    ...\n     26/4    0.091    0.004    1.182    0.295 {built-in method sage.data_structures.blas_dict.linear_combination}\n    ...\n      220    0.000    0.000    0.003    0.000 partition.py:1060(stretch)\n```\n\nFor some reason, `t_POWSYM_SCHUR_symmetrica` is called more than twice as often for our algorithm than for the one in `sfa.py`.  I don't see why this should be the case.  Same goes for `stretch`.",
    "created_at": "2022-09-22T11:39:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428482",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:32" align="right">comment:32</div>

Wow, great, thank you!

Apparently I misremembered, because there we only compute a single degree of the plethysm, not all of them.

However, `%prun` shows something very strange, which might give us a hint for what we are doing wrong.

```
sage: N=5; f = sum(s(Partitions(n).random_element()) for n in range(N)); g = sum(s(Partitions(n).random_element()) for n in range(1, N)); f1 = L(f) + L(lambda n: 0) ; g1 = L(g) + L(lambda n: 0)

sage: %prun r1 = f1(g1).truncate(f.degree()*g.degree()+1)
         2373194 function calls (2371664 primitive calls) in 1.949 seconds

   Ordered by: internal time

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     1173    0.656    0.001    1.519    0.001 {sage.libs.symmetrica.symmetrica.t_POWSYM_SCHUR_symmetrica}
    ...
      719    0.138    0.000    1.893    0.003 {built-in method sage.data_structures.blas_dict.linear_combination}
    ...
     1124    0.002    0.000    0.015    0.000 partition.py:1060(stretch)
    ...

sage: %prun r = f(g)
         1413296 function calls (1409790 primitive calls) in 1.182 seconds

   Ordered by: internal time

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
      512    0.309    0.001    0.797    0.002 {sage.libs.symmetrica.symmetrica.t_POWSYM_SCHUR_symmetrica}
    ...
     26/4    0.091    0.004    1.182    0.295 {built-in method sage.data_structures.blas_dict.linear_combination}
    ...
      220    0.000    0.000    0.003    0.000 partition.py:1060(stretch)
```

For some reason, `t_POWSYM_SCHUR_symmetrica` is called more than twice as often for our algorithm than for the one in `sfa.py`.  I don't see why this should be the case.  Same goes for `stretch`.



---

archive/issue_comments_428483.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nIndeed, that is interesting. I guess it depends on what things we want to actually compute.\n\nPerhaps we can move this to a new ticket, both to keep the scope of this ticket to symmetric functions, and to not spam other cc-ed people. `;)`.\n\nFor this ticket, I rebased it on #34470 (strictly speaking, it should be #34413) as there was a conflict. I made an optimization with how the sums are computed. I also fixed a few things with how scalars are handled, which arose from making the output be in the input parent (or the base ring for scalars; I don't see an easy way to deal with doing pushouts).\n\nUnfortunately I accidentally put my changes into the merge comment. `>_<` So it is hard to see the bulk of them commit-by-commit.\n\nAnyways, if the patchbot comes back again green and you are happy with my changes, then I think we are at a positive review.\n\n---\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa593b547bcc609b02209f355c6f4eb24b3a2e01\"><code>aa593b5</code></a></td><td><code>Merge branch 'u/mantepse/categories_of_lazy_series' of https://github.com/sagemath/sagetrac-mirror into u/tscrim/categories_lazy_series-34470</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/840539d33b8cefc94844f4790765564da8604cc6\"><code>840539d</code></a></td><td><code>More tests, more bugs fixed.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fbccb39ebef9bf107463c9955c8f254aa1dfe685\"><code>fbccb39</code></a></td><td><code>normalize degree in Stream_exact for correct equality</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b930f58d4fcece6371e14d2aba6fc53e653c24b1\"><code>b930f58</code></a></td><td><code>Merge branch 'u/mantepse/categories_of_lazy_series' of https://github.com/sagemath/sagetrac-mirror into u/tscrim/categories_lazy_series-34470</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b47407b38c76f7cc6f58777bf8d6cf5feb19d4f5\"><code>b47407b</code></a></td><td><code>Implementing `_floordiv_`, Stream._true_order to boolean, first fraction field, more tests, marking long tests.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e077b6655df290286c71404f4756babc97965f24\"><code>e077b66</code></a></td><td><code>Using dynamic classes for FPS gcd.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ddc04a1a02b26270a89be3a2a56a193d6d794b42\"><code>ddc04a1</code></a></td><td><code>Fixing last pyflakes things.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d95f9ba4c46a70d385e88058e03496127490649e\"><code>d95f9ba</code></a></td><td><code>Merge branch 'u/tscrim/categories_lazy_series-34470' of https://github.com/sagemath/sagetrac-mirror into u/tscrim/parent_plethysm-27652</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5b8a696cd07272c952bee10e1f1d4bc4546ba671\"><code>5b8a696</code></a></td><td><code>Merge branch 'u/mantepse/parent_of_plethysm' of https://github.com/sagemath/sagetrac-mirror into u/tscrim/parent_plethysm-27652</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c501119c1d2eea747247d9bcfee3f81e87625cbf\"><code>c501119</code></a></td><td><code>Making the result not depend on the input.</code></td></tr></table>\n",
    "created_at": "2022-09-22T14:40:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428483",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:33" align="right">comment:33</div>

Indeed, that is interesting. I guess it depends on what things we want to actually compute.

Perhaps we can move this to a new ticket, both to keep the scope of this ticket to symmetric functions, and to not spam other cc-ed people. `;)`.

For this ticket, I rebased it on #34470 (strictly speaking, it should be #34413) as there was a conflict. I made an optimization with how the sums are computed. I also fixed a few things with how scalars are handled, which arose from making the output be in the input parent (or the base ring for scalars; I don't see an easy way to deal with doing pushouts).

Unfortunately I accidentally put my changes into the merge comment. `>_<` So it is hard to see the bulk of them commit-by-commit.

Anyways, if the patchbot comes back again green and you are happy with my changes, then I think we are at a positive review.

---
Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa593b547bcc609b02209f355c6f4eb24b3a2e01"><code>aa593b5</code></a></td><td><code>Merge branch 'u/mantepse/categories_of_lazy_series' of https://github.com/sagemath/sagetrac-mirror into u/tscrim/categories_lazy_series-34470</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/840539d33b8cefc94844f4790765564da8604cc6"><code>840539d</code></a></td><td><code>More tests, more bugs fixed.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fbccb39ebef9bf107463c9955c8f254aa1dfe685"><code>fbccb39</code></a></td><td><code>normalize degree in Stream_exact for correct equality</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b930f58d4fcece6371e14d2aba6fc53e653c24b1"><code>b930f58</code></a></td><td><code>Merge branch 'u/mantepse/categories_of_lazy_series' of https://github.com/sagemath/sagetrac-mirror into u/tscrim/categories_lazy_series-34470</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b47407b38c76f7cc6f58777bf8d6cf5feb19d4f5"><code>b47407b</code></a></td><td><code>Implementing `_floordiv_`, Stream._true_order to boolean, first fraction field, more tests, marking long tests.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e077b6655df290286c71404f4756babc97965f24"><code>e077b66</code></a></td><td><code>Using dynamic classes for FPS gcd.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ddc04a1a02b26270a89be3a2a56a193d6d794b42"><code>ddc04a1</code></a></td><td><code>Fixing last pyflakes things.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d95f9ba4c46a70d385e88058e03496127490649e"><code>d95f9ba</code></a></td><td><code>Merge branch 'u/tscrim/categories_lazy_series-34470' of https://github.com/sagemath/sagetrac-mirror into u/tscrim/parent_plethysm-27652</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5b8a696cd07272c952bee10e1f1d4bc4546ba671"><code>5b8a696</code></a></td><td><code>Merge branch 'u/mantepse/parent_of_plethysm' of https://github.com/sagemath/sagetrac-mirror into u/tscrim/parent_plethysm-27652</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c501119c1d2eea747247d9bcfee3f81e87625cbf"><code>c501119</code></a></td><td><code>Making the result not depend on the input.</code></td></tr></table>




---

archive/issue_comments_428484.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2022-09-22T14:40:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428484",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_428485.json:
```json
{
    "body": "Changed branch from **[u/mantepse/parent_of_plethysm](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/parent_of_plethysm)** to **[u/tscrim/parent_plethysm-27652](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/parent_plethysm-27652)**",
    "created_at": "2022-09-22T14:40:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428485",
    "user": "https://github.com/tscrim"
}
```

Changed branch from **[u/mantepse/parent_of_plethysm](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/parent_of_plethysm)** to **[u/tscrim/parent_plethysm-27652](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/parent_plethysm-27652)**



---

archive/issue_comments_428486.json:
```json
{
    "body": "Dependencies: **#34470**",
    "created_at": "2022-09-22T14:40:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428486",
    "user": "https://github.com/tscrim"
}
```

Dependencies: **#34470**



---

archive/issue_comments_428487.json:
```json
{
    "body": "Changed commit from **[`9280ad9`](https://github.com/sagemath/sagetrac-mirror/commit/9280ad9c33c878b77bd607d77d2188896456f243)** to **[`c501119`](https://github.com/sagemath/sagetrac-mirror/commit/c501119c1d2eea747247d9bcfee3f81e87625cbf)**",
    "created_at": "2022-09-22T14:40:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428487",
    "user": "https://github.com/tscrim"
}
```

Changed commit from **[`9280ad9`](https://github.com/sagemath/sagetrac-mirror/commit/9280ad9c33c878b77bd607d77d2188896456f243)** to **[`c501119`](https://github.com/sagemath/sagetrac-mirror/commit/c501119c1d2eea747247d9bcfee3f81e87625cbf)**



---

archive/issue_comments_428488.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nI agree to moving the performance discussion to a different ticket.  I feel a bit uneasy with merging the lazy stuff into this ticket, but I guess it makes no difference.",
    "created_at": "2022-09-22T15:02:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428488",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:34" align="right">comment:34</div>

I agree to moving the performance discussion to a different ticket.  I feel a bit uneasy with merging the lazy stuff into this ticket, but I guess it makes no difference.



---

archive/issue_comments_428489.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nWe have to deal with the conflict somewhere, and better here because #34413 is already positively reviewed.",
    "created_at": "2022-09-22T15:04:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428489",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:35" align="right">comment:35</div>

We have to deal with the conflict somewhere, and better here because #34413 is already positively reviewed.



---

archive/issue_comments_428490.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nDo you understand these warnings?\n\n```\n========== deprecation_number ==========\ngit checkout patchbot/ticket_merged\n+            deprecation(32367, 'the method coefficients now only returns the non-zero coefficients. Use __getitem__ instead.')\n+        deprecation(32367, 'the method exponential is deprecated. Use exp instead.')\n+        deprecation(32367, \"the method compute_coefficients obsolete and has no effect.\")\nWrong deprecation number inserted on 3 non-empty lines\ndeprecation_number -- 0 seconds\n========== end deprecation_number ==========\n```",
    "created_at": "2022-09-23T10:02:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428490",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:36" align="right">comment:36</div>

Do you understand these warnings?

```
========== deprecation_number ==========
git checkout patchbot/ticket_merged
+            deprecation(32367, 'the method coefficients now only returns the non-zero coefficients. Use __getitem__ instead.')
+        deprecation(32367, 'the method exponential is deprecated. Use exp instead.')
+        deprecation(32367, "the method compute_coefficients obsolete and has no effect.")
Wrong deprecation number inserted on 3 non-empty lines
deprecation_number -- 0 seconds
========== end deprecation_number ==========
```



---

archive/issue_comments_428491.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nIt comes from the patchbot implementation being simple and not realizing it is coming from a dependency ticket. We can ignore it.",
    "created_at": "2022-09-23T10:17:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428491",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:37" align="right">comment:37</div>

It comes from the patchbot implementation being simple and not realizing it is coming from a dependency ticket. We can ignore it.



---

archive/issue_comments_428492.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nShould there be a doctest (and perhaps even specification) demonstrating that the parent is now the parent of the inner function?\n\nShould there maybe even be a warning?  I am somewhat afraid that some people may have private code like\n\n```\nsage: s = SymmetricFunctions(QQ).s()\nsage: p = SymmetricFunctions(QQ).p()\nsage: n = 5; f = p[2,2,1] + p[5]\nsage: s[2](f)[Partition([2*n])]\n3\n```\nwho might be not amused about not being warned.",
    "created_at": "2022-09-23T10:28:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428492",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:38" align="right">comment:38</div>

Should there be a doctest (and perhaps even specification) demonstrating that the parent is now the parent of the inner function?

Should there maybe even be a warning?  I am somewhat afraid that some people may have private code like

```
sage: s = SymmetricFunctions(QQ).s()
sage: p = SymmetricFunctions(QQ).p()
sage: n = 5; f = p[2,2,1] + p[5]
sage: s[2](f)[Partition([2*n])]
3
```
who might be not amused about not being warned.



---

archive/issue_comments_428493.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nIMO, this is a bug (such as composing with a tensor product), so no warning/deprecation is necessary. I agree with you that we should add a doctest and documentation indicating this behavior.",
    "created_at": "2022-09-23T10:34:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428493",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:39" align="right">comment:39</div>

IMO, this is a bug (such as composing with a tensor product), so no warning/deprecation is necessary. I agree with you that we should add a doctest and documentation indicating this behavior.



---

archive/issue_comments_428494.json:
```json
{
    "body": "<div id=\"comment:40\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bad6489f58748f042916bbf70bf0f763613a2f63\"><code>bad6489</code></a></td><td><code>Adding some doctests and documentation on the plethysm output.</code></td></tr></table>\n",
    "created_at": "2022-09-23T11:05:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428494",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:40"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bad6489f58748f042916bbf70bf0f763613a2f63"><code>bad6489</code></a></td><td><code>Adding some doctests and documentation on the plethysm output.</code></td></tr></table>




---

archive/issue_comments_428495.json:
```json
{
    "body": "Changed commit from **[`c501119`](https://github.com/sagemath/sagetrac-mirror/commit/c501119c1d2eea747247d9bcfee3f81e87625cbf)** to **[`bad6489`](https://github.com/sagemath/sagetrac-mirror/commit/bad6489f58748f042916bbf70bf0f763613a2f63)**",
    "created_at": "2022-09-23T11:05:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428495",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c501119`](https://github.com/sagemath/sagetrac-mirror/commit/c501119c1d2eea747247d9bcfee3f81e87625cbf)** to **[`bad6489`](https://github.com/sagemath/sagetrac-mirror/commit/bad6489f58748f042916bbf70bf0f763613a2f63)**



---

archive/issue_comments_428496.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nI've added it.",
    "created_at": "2022-09-23T11:06:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428496",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:41" align="right">comment:41</div>

I've added it.



---

archive/issue_comments_428497.json:
```json
{
    "body": "Changed branch from **[u/tscrim/parent_plethysm-27652](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/parent_plethysm-27652)** to **[u/mantepse/parent_plethysm-27652](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/parent_plethysm-27652)**",
    "created_at": "2022-09-30T12:08:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428497",
    "user": "https://github.com/mantepse"
}
```

Changed branch from **[u/tscrim/parent_plethysm-27652](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/parent_plethysm-27652)** to **[u/mantepse/parent_plethysm-27652](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/parent_plethysm-27652)**



---

archive/issue_comments_428498.json:
```json
{
    "body": "Changed commit from **[`bad6489`](https://github.com/sagemath/sagetrac-mirror/commit/bad6489f58748f042916bbf70bf0f763613a2f63)** to **[`0dcc0aa`](https://github.com/sagemath/sagetrac-mirror/commit/0dcc0aa5532cb83322880e3dbc6b2a5019e3463f)**",
    "created_at": "2022-11-25T08:04:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428498",
    "user": "https://github.com/mantepse"
}
```

Changed commit from **[`bad6489`](https://github.com/sagemath/sagetrac-mirror/commit/bad6489f58748f042916bbf70bf0f763613a2f63)** to **[`0dcc0aa`](https://github.com/sagemath/sagetrac-mirror/commit/0dcc0aa5532cb83322880e3dbc6b2a5019e3463f)**



---

archive/issue_comments_428499.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nping?\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0dcc0aa5532cb83322880e3dbc6b2a5019e3463f\"><code>0dcc0aa</code></a></td><td><code>Merge branch 'develop' of trac.sagemath.org:sage into t/27652/parent_plethysm-27652</code></td></tr></table>\n",
    "created_at": "2022-11-25T08:04:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428499",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:43" align="right">comment:43</div>

ping?

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0dcc0aa5532cb83322880e3dbc6b2a5019e3463f"><code>0dcc0aa</code></a></td><td><code>Merge branch 'develop' of trac.sagemath.org:sage into t/27652/parent_plethysm-27652</code></td></tr></table>




---

archive/issue_comments_428500.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nI'm happy. If you are with my added tests, then positive review.",
    "created_at": "2022-11-25T09:06:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428500",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:44" align="right">comment:44</div>

I'm happy. If you are with my added tests, then positive review.



---

archive/issue_events_376541.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-11-25T10:14:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27652#event-376541"
}
```



---

archive/issue_events_376542.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-11-25T10:14:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27652#event-376542"
}
```



---

archive/issue_comments_428501.json:
```json
{
    "body": "Changed branch from **[u/mantepse/parent_plethysm-27652](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/parent_plethysm-27652)** to **[`0dcc0aa`](https://github.com/sagemath/sagetrac-mirror/commit/0dcc0aa5532cb83322880e3dbc6b2a5019e3463f)**",
    "created_at": "2022-12-11T11:11:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27652#issuecomment-428501",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mantepse/parent_plethysm-27652](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/parent_plethysm-27652)** to **[`0dcc0aa`](https://github.com/sagemath/sagetrac-mirror/commit/0dcc0aa5532cb83322880e3dbc6b2a5019e3463f)**



---

archive/issue_events_376543.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-12-11T11:11:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27652#event-376543"
}
```



---

archive/issue_events_376544.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "7dfefc438ba16c7f4b83c5f2cb4fea53449d3f53",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-12-11T11:11:48Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27652",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27652#event-376544"
}
```
