# Issue 27288: Docker images for Sage missing make

archive/issues_027051.json:
```json
{
    "assignees": [],
    "body": "For some reason the official `sagemath/sagemath` images don't include `make`, which at a minimum is necessary for installing optional packages within the image (which should be considered essential functionality).\n\nCC:  @saraedum @JohnCremona @slel\n\nKeywords: **docker, optional packages**\n\nBranch/Commit: **[u/embray/docker/ticket-27288](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/docker/ticket-27288) @ [d4ac0b4](https://github.com/sagemath/sagetrac-mirror/commit/d4ac0b49daec7e92a6a9ae44a34cbeb752f40494)**\n\nAuthor: **Erik Bray**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/27288_\n\n",
    "created_at": "2019-02-15T10:18:18Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20docker",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Docker images for Sage missing make",
    "type": "issue",
    "updated_at": "2022-09-19T18:58:47Z",
    "url": "https://github.com/sagemath/sage/issues/27288",
    "user": "https://github.com/embray"
}
```
For some reason the official `sagemath/sagemath` images don't include `make`, which at a minimum is necessary for installing optional packages within the image (which should be considered essential functionality).

CC:  @saraedum @JohnCremona @slel

Keywords: **docker, optional packages**

Branch/Commit: **[u/embray/docker/ticket-27288](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/docker/ticket-27288) @ [d4ac0b4](https://github.com/sagemath/sagetrac-mirror/commit/d4ac0b49daec7e92a6a9ae44a34cbeb752f40494)**

Author: **Erik Bray**

_Issue created by migration from https://trac.sagemath.org/ticket/27288_





---

archive/issue_events_344134.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-15T10:18:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27288#event-344134"
}
```



---

archive/issue_events_344135.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-15T10:18:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20distribution",
    "label_color": "000080",
    "label_name": "component: distribution",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27288#event-344135"
}
```



---

archive/issue_events_344136.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-15T10:18:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27288#event-344136"
}
```



---

archive/issue_events_344137.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-15T10:18:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27288#event-344137"
}
```



---

archive/issue_comments_424691.json:
```json
{
    "body": "Author: **Erik Bray**",
    "created_at": "2019-02-15T10:23:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27288#issuecomment-424691",
    "user": "https://github.com/embray"
}
```

Author: **Erik Bray**



---

archive/issue_events_344138.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-15T10:23:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27288#event-344138"
}
```



---

archive/issue_comments_424692.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nI think this should do it.\n\nSome optional packages *might* require some additional system packages (e.g. some `-dev` packages), but most don't.  So those cases can be considered on a case-by-case basis.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4ac0b49daec7e92a6a9ae44a34cbeb752f40494\">d4ac0b4</a></td><td><code>Trac #27288: include 'make' in the runtime dependencies</code></td></tr></table>\n",
    "created_at": "2019-02-15T10:23:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27288#issuecomment-424692",
    "user": "https://github.com/embray"
}
```

<a id='comment:1'>Comment 1:</a>
I think this should do it.

Some optional packages *might* require some additional system packages (e.g. some `-dev` packages), but most don't.  So those cases can be considered on a case-by-case basis.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4ac0b49daec7e92a6a9ae44a34cbeb752f40494">d4ac0b4</a></td><td><code>Trac #27288: include 'make' in the runtime dependencies</code></td></tr></table>




---

archive/issue_comments_424693.json:
```json
{
    "body": "Branch: **[u/embray/docker/ticket-27288](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/docker/ticket-27288)**",
    "created_at": "2019-02-15T10:23:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27288#issuecomment-424693",
    "user": "https://github.com/embray"
}
```

Branch: **[u/embray/docker/ticket-27288](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/docker/ticket-27288)**



---

archive/issue_comments_424694.json:
```json
{
    "body": "Commit: **[d4ac0b4](https://github.com/sagemath/sagetrac-mirror/commit/d4ac0b49daec7e92a6a9ae44a34cbeb752f40494)**",
    "created_at": "2019-02-15T10:23:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27288#issuecomment-424694",
    "user": "https://github.com/embray"
}
```

Commit: **[d4ac0b4](https://github.com/sagemath/sagetrac-mirror/commit/d4ac0b49daec7e92a6a9ae44a34cbeb752f40494)**



---

archive/issue_comments_424695.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nI am not sure that this is going to fix it. As I recall, the docker image has been stripped of too much already.\n\nHave you already tried to test this?",
    "created_at": "2019-02-15T10:54:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27288#issuecomment-424695",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:2'>Comment 2:</a>
I am not sure that this is going to fix it. As I recall, the docker image has been stripped of too much already.

Have you already tried to test this?



---

archive/issue_events_344139.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2019-02-15T10:55:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27288#event-344139"
}
```



---

archive/issue_events_344140.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2019-02-15T10:55:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27288#event-344140"
}
```



---

archive/issue_events_344141.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-15T11:27:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27288#event-344141"
}
```



---

archive/issue_events_344142.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-15T11:27:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27288#event-344142"
}
```



---

archive/issue_comments_424696.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nApparently it's worse than that.  The `Makefile` and all the tools under `build/` are stripped out of the non-dev image as well.  Unfortunately these bits are necessary (and not so large size-wise) for installing optional packages.",
    "created_at": "2019-02-15T11:27:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27288#issuecomment-424696",
    "user": "https://github.com/embray"
}
```

<a id='comment:4'>Comment 4:</a>
Apparently it's worse than that.  The `Makefile` and all the tools under `build/` are stripped out of the non-dev image as well.  Unfortunately these bits are necessary (and not so large size-wise) for installing optional packages.



---

archive/issue_comments_424697.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nI made this work at some point for the Windows installer, so it's perfectly do-able, without adding too much additional stuff.",
    "created_at": "2019-02-15T11:27:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27288#issuecomment-424697",
    "user": "https://github.com/embray"
}
```

<a id='comment:5'>Comment 5:</a>
I made this work at some point for the Windows installer, so it's perfectly do-able, without adding too much additional stuff.



---

archive/issue_comments_424698.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nReplying to [@embray](#comment%3A4):\n> Apparently it's worse than that.  The `Makefile` and all the tools under `build/` are stripped out of the non-dev image as well.  Unfortunately these bits are necessary (and not so large size-wise) for installing optional packages.\n\nYes, this was completely on purpose. The docker image was meant to be absolutely minimal. We might want to think about a third flavour that supports spkg installs\u2026",
    "created_at": "2019-02-15T11:32:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27288#issuecomment-424698",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:6'>Comment 6:</a>
Replying to [@embray](#comment%3A4):
> Apparently it's worse than that.  The `Makefile` and all the tools under `build/` are stripped out of the non-dev image as well.  Unfortunately these bits are necessary (and not so large size-wise) for installing optional packages.

Yes, this was completely on purpose. The docker image was meant to be absolutely minimal. We might want to think about a third flavour that supports spkg installs…



---

archive/issue_comments_424699.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nReplying to [@saraedum](#comment%3A6):\n> Replying to [@embray](#comment%3A4):\n> > Apparently it's worse than that.  The `Makefile` and all the tools under `build/` are stripped out of the non-dev image as well.  Unfortunately these bits are necessary (and not so large size-wise) for installing optional packages.\n\n> \n> Yes, this was completely on purpose. The docker image was meant to be absolutely minimal. We might want to think about a third flavour that supports spkg installs\u2026\n\nYes please!  Without this I would lose all capability of putting notebooks on binder since I use various optional packages (including database_cremona_ellcurve but not only that).  In the case of that database all the install script does is to copy one file into SAGE_SHARE/cremona so I could fake it.",
    "created_at": "2019-02-15T14:56:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27288#issuecomment-424699",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:7'>Comment 7:</a>
Replying to [@saraedum](#comment%3A6):
> Replying to [@embray](#comment%3A4):
> > Apparently it's worse than that.  The `Makefile` and all the tools under `build/` are stripped out of the non-dev image as well.  Unfortunately these bits are necessary (and not so large size-wise) for installing optional packages.

> 
> Yes, this was completely on purpose. The docker image was meant to be absolutely minimal. We might want to think about a third flavour that supports spkg installs…

Yes please!  Without this I would lose all capability of putting notebooks on binder since I use various optional packages (including database_cremona_ellcurve but not only that).  In the case of that database all the install script does is to copy one file into SAGE_SHARE/cremona so I could fake it.



---

archive/issue_comments_424700.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nReplying to [@saraedum](#comment%3A6):\n> Replying to [@embray](#comment%3A4):\n> > Apparently it's worse than that.  The `Makefile` and all the tools under `build/` are stripped out of the non-dev image as well.  Unfortunately these bits are necessary (and not so large size-wise) for installing optional packages.\n\n> \n> Yes, this was completely on purpose. The docker image was meant to be absolutely minimal. We might want to think about a third flavour that supports spkg installs\u2026\n\nI understand this of course. A couple years ago I would have been making the same argument, and in fact I think I even did have discussions like this with Nicolas where he and I disagreed, when I was first putting together my version of the Docker image for Sage.\n\nIn retrospect, however, many many users in the Sage community consider being able to run `sage -i` to be essential functionality, and indeed there have been many cases where not being able to do so was a huge hurdle (b.c. for example they would be teaching some topic-specific workshop that requires some optional packages, and people using the Docker images would be screwed).\n\nIt sucks to have to include some of the build toolchain in the Docker images in order to support this, but I would consider it essential, especially for the main \"sagemath/sagemath\" images.",
    "created_at": "2019-02-20T13:48:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27288#issuecomment-424700",
    "user": "https://github.com/embray"
}
```

<a id='comment:8'>Comment 8:</a>
Replying to [@saraedum](#comment%3A6):
> Replying to [@embray](#comment%3A4):
> > Apparently it's worse than that.  The `Makefile` and all the tools under `build/` are stripped out of the non-dev image as well.  Unfortunately these bits are necessary (and not so large size-wise) for installing optional packages.

> 
> Yes, this was completely on purpose. The docker image was meant to be absolutely minimal. We might want to think about a third flavour that supports spkg installs…

I understand this of course. A couple years ago I would have been making the same argument, and in fact I think I even did have discussions like this with Nicolas where he and I disagreed, when I was first putting together my version of the Docker image for Sage.

In retrospect, however, many many users in the Sage community consider being able to run `sage -i` to be essential functionality, and indeed there have been many cases where not being able to do so was a huge hurdle (b.c. for example they would be teaching some topic-specific workshop that requires some optional packages, and people using the Docker images would be screwed).

It sucks to have to include some of the build toolchain in the Docker images in order to support this, but I would consider it essential, especially for the main "sagemath/sagemath" images.



---

archive/issue_comments_424701.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nMoving all my in-progress tickets to 8.8 milestone.",
    "created_at": "2019-03-25T10:43:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27288#issuecomment-424701",
    "user": "https://github.com/embray"
}
```

<a id='comment:9'>Comment 9:</a>
Moving all my in-progress tickets to 8.8 milestone.



---

archive/issue_events_344143.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:43:18Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27288#event-344143"
}
```



---

archive/issue_events_344144.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:43:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27288#event-344144"
}
```



---

archive/issue_comments_424702.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nSorry for the late reply. If people need more than `sage -pip`, then they should use `sage-dev`. If that's not clear from the documentation, we should fix that. Otherwise, where do you draw the line? Should every `sage -i` work? Then you need `sage-dev` or am I getting this wrong?",
    "created_at": "2019-04-05T19:55:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27288#issuecomment-424702",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:10'>Comment 10:</a>
Sorry for the late reply. If people need more than `sage -pip`, then they should use `sage-dev`. If that's not clear from the documentation, we should fix that. Otherwise, where do you draw the line? Should every `sage -i` work? Then you need `sage-dev` or am I getting this wrong?



---

archive/issue_comments_424703.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nPerhaps you could clarify the difference implied in `sage-dev`.\n\nE.g. for the Windows distribution I strip out almost all build artifacts that are unneeded at runtime.  But so that `sage -i` has *some* chance of succeeding I added back in files like `configure`, `Makefile`, and the entire `build/` directory.  This adds very little to the overall package size.\n\nIt also includes a few bare-minimum build dependencies.\n\nIt does *not* imply that all `sage -i` will work out-of-the-box, as some of those have build dependencies that are not a normal part of the distribution.  But in those cases at least *attempting* to build/install the package will work.\n\nOne thing I want to start having (which was always part of the motivation of #22509) is binary packages, at least for optional dependencies, so that `sage -i` can simply download them from the appropriate source mirror (if a binary tarball exists for the current platform), and unpack it into place.  Then no build crud is necessary.  That's a way's off though.  Adding support for this would be relatively easy to code, but we'd need the additional infrastructure to build binary tarballs for optional packages and upload them to the mirrors.",
    "created_at": "2019-04-08T16:17:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27288#issuecomment-424703",
    "user": "https://github.com/embray"
}
```

<a id='comment:11'>Comment 11:</a>
Perhaps you could clarify the difference implied in `sage-dev`.

E.g. for the Windows distribution I strip out almost all build artifacts that are unneeded at runtime.  But so that `sage -i` has *some* chance of succeeding I added back in files like `configure`, `Makefile`, and the entire `build/` directory.  This adds very little to the overall package size.

It also includes a few bare-minimum build dependencies.

It does *not* imply that all `sage -i` will work out-of-the-box, as some of those have build dependencies that are not a normal part of the distribution.  But in those cases at least *attempting* to build/install the package will work.

One thing I want to start having (which was always part of the motivation of #22509) is binary packages, at least for optional dependencies, so that `sage -i` can simply download them from the appropriate source mirror (if a binary tarball exists for the current platform), and unpack it into place.  Then no build crud is necessary.  That's a way's off though.  Adding support for this would be relatively easy to code, but we'd need the additional infrastructure to build binary tarballs for optional packages and upload them to the mirrors.



---

archive/issue_comments_424704.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nReplying to [@embray](#comment%3A11):\n> Perhaps you could clarify the difference implied in `sage-dev`.\n\nDo you mean that I should improve the documentation on the docker hub pages?\n\n> E.g. for the Windows distribution I strip out almost all build artifacts that are unneeded at runtime.  But so that `sage -i` has *some* chance of succeeding I added back in files like `configure`, `Makefile`, and the entire `build/` directory.  This adds very little to the overall package size.\n> \n> It also includes a few bare-minimum build dependencies.\n> \n> It does *not* imply that all `sage -i` will work out-of-the-box, as some of those have build dependencies that are not a normal part of the distribution.  But in those cases at least *attempting* to build/install the package will work.\n\nIf it's small I would not mind adding it too much of course.\n\n> One thing I want to start having (which was always part of the motivation of #22509) is binary packages, at least for optional dependencies, so that `sage -i` can simply download them from the appropriate source mirror (if a binary tarball exists for the current platform), and unpack it into place.  Then no build crud is necessary.  That's a way's off though.  Adding support for this would be relatively easy to code, but we'd need the additional infrastructure to build binary tarballs for optional packages and upload them to the mirrors. \n\nI see the point of this of course but it feels like [SageMath](../wiki/SageMath) would not only try to be Gentoo (allowing to build from source everywhere) but now also Conda (allowing installation of relocatable packages.) Or do you just want this for the docker images? I am not sure this is a good way forward as it means lots of maintenance & support to keep it working nicely. I think it would be much easier in the long run to just package things for conda and use that to phase out SPKGs eventually. You can still build conda recipes from source but most people will be happy to be able to just use binaries. The main missing bits here are some failing doctests and the missing cygwin build of conda but both could be fixed if someone focused on this for a while.\n\nMaybe this discussion should not be had here but on Zulip instead. Feel free to open a thread there if you want to discuss packaging further :)",
    "created_at": "2019-04-08T17:24:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27288#issuecomment-424704",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:12'>Comment 12:</a>
Replying to [@embray](#comment%3A11):
> Perhaps you could clarify the difference implied in `sage-dev`.

Do you mean that I should improve the documentation on the docker hub pages?

> E.g. for the Windows distribution I strip out almost all build artifacts that are unneeded at runtime.  But so that `sage -i` has *some* chance of succeeding I added back in files like `configure`, `Makefile`, and the entire `build/` directory.  This adds very little to the overall package size.
> 
> It also includes a few bare-minimum build dependencies.
> 
> It does *not* imply that all `sage -i` will work out-of-the-box, as some of those have build dependencies that are not a normal part of the distribution.  But in those cases at least *attempting* to build/install the package will work.

If it's small I would not mind adding it too much of course.

> One thing I want to start having (which was always part of the motivation of #22509) is binary packages, at least for optional dependencies, so that `sage -i` can simply download them from the appropriate source mirror (if a binary tarball exists for the current platform), and unpack it into place.  Then no build crud is necessary.  That's a way's off though.  Adding support for this would be relatively easy to code, but we'd need the additional infrastructure to build binary tarballs for optional packages and upload them to the mirrors. 

I see the point of this of course but it feels like [SageMath](../wiki/SageMath) would not only try to be Gentoo (allowing to build from source everywhere) but now also Conda (allowing installation of relocatable packages.) Or do you just want this for the docker images? I am not sure this is a good way forward as it means lots of maintenance & support to keep it working nicely. I think it would be much easier in the long run to just package things for conda and use that to phase out SPKGs eventually. You can still build conda recipes from source but most people will be happy to be able to just use binaries. The main missing bits here are some failing doctests and the missing cygwin build of conda but both could be fixed if someone focused on this for a while.

Maybe this discussion should not be had here but on Zulip instead. Feel free to open a thread there if you want to discuss packaging further :)



---

archive/issue_comments_424705.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nTickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).",
    "created_at": "2019-06-14T14:50:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27288#issuecomment-424705",
    "user": "https://github.com/embray"
}
```

<a id='comment:13'>Comment 13:</a>
Tickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).



---

archive/issue_events_344145.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:50:27Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27288#event-344145"
}
```



---

archive/issue_events_344146.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:50:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27288#event-344146"
}
```



---

archive/issue_comments_424706.json:
```json
{
    "body": "Changed keywords from **** to **docker, optional packages**",
    "created_at": "2019-09-16T00:00:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27288#issuecomment-424706",
    "user": "https://github.com/slel"
}
```

Changed keywords from **** to **docker, optional packages**



---

archive/issue_comments_424707.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nTicket retargeted after milestone closed",
    "created_at": "2019-12-30T14:48:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27288#issuecomment-424707",
    "user": "https://github.com/embray"
}
```

<a id='comment:15'>Comment 15:</a>
Ticket retargeted after milestone closed



---

archive/issue_events_344147.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27288#event-344147"
}
```



---

archive/issue_events_344148.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27288#event-344148"
}
```



---

archive/issue_comments_424708.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nSee also: #29124 - which collects lists of recommended system packages - which should probably be made available in Docker builds",
    "created_at": "2020-05-05T19:14:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27288#issuecomment-424708",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'>Comment 16:</a>
See also: #29124 - which collects lists of recommended system packages - which should probably be made available in Docker builds



---

archive/issue_comments_424709.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\n(which would also take care of #29153 - Docker images do not contain pandoc)",
    "created_at": "2020-05-05T19:15:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27288#issuecomment-424709",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'>Comment 17:</a>
(which would also take care of #29153 - Docker images do not contain pandoc)



---

archive/issue_events_344149.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-17T18:33:40Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27288#event-344149"
}
```



---

archive/issue_events_344150.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-17T18:33:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27288#event-344150"
}
```



---

archive/issue_events_344151.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27288#event-344151"
}
```



---

archive/issue_events_344152.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27288#event-344152"
}
```



---

archive/issue_comments_424710.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27288#issuecomment-424710",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'>Comment 20:</a>
Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_344153.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27288#event-344153"
}
```



---

archive/issue_events_344154.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27288#event-344154"
}
```



---

archive/issue_events_344155.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27288#event-344155"
}
```



---

archive/issue_events_344156.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27288#event-344156"
}
```



---

archive/issue_events_344157.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2021-12-09T00:04:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20distribution",
    "label_color": "000080",
    "label_name": "component: distribution",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27288#event-344157"
}
```



---

archive/issue_events_344158.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2021-12-09T00:04:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20docker",
    "label_color": "000080",
    "label_name": "component: docker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27288#event-344158"
}
```



---

archive/issue_events_344159.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-10T00:37:38Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27288#event-344159"
}
```



---

archive/issue_events_344160.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-10T00:37:38Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27288#event-344160"
}
```



---

archive/issue_events_344161.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:19:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27288#event-344161"
}
```



---

archive/issue_events_344162.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:19:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27288#event-344162"
}
```



---

archive/issue_events_344163.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27288#event-344163"
}
```



---

archive/issue_events_344164.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27288",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27288#event-344164"
}
```
