# Issue 27347: Lazy Laurent series

archive/issues_027110.json:
```json
{
    "body": "Introduce lazy Laurent series to Sage.\n\nA lazy Laurent series computes coefficients only when demanded or needed. In a sense, lazy Laurent series are Laurent series of infinite precision. \n\nA generating function example from the code:\n\n```\nGenerating functions are laurent series over the integer ring::\n\n    sage: from sage.rings.lazy_laurent_series_ring import LazyLaurentSeriesRing\n    sage: L = LazyLaurentSeriesRing(ZZ, 'z')\n\nThis defines the generating function of Fibonacci sequence::\n\n    sage: def coeff(s, i):\n    ....:     if i in [0, 1]:\n    ....:         return 1\n    ....:     else:\n    ....:         return s.coefficient(i - 1) + s.coefficient(i - 2)\n    ....:\n    sage: f = L.series(coeff, valuation=0); f\n    1 + z + 2*z^2 + 3*z^3 + 5*z^4 + 8*z^5 + 13*z^6 + ...\n\nThe 100th element of Fibonacci sequence can be obtained from the generating\nfunction::\n\n    sage: f.coefficient(100)\n    573147844013817084101 \n```\n\nLazy Laurent series is of course useful for other things. This will be used to implement infinite precision Laurent series expansion of algebraic functions in function fields, as a sequel to #27418.\n\nReviewer: Travis Scrimshaw\n\nAuthor: Kwankyu Lee\n\nBranch: 989f009a851c9dc91c8650d7e554138886951a3a\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/27347\n\n",
    "closed_at": "2019-04-15T17:47:48Z",
    "created_at": "2019-02-24T22:11:36Z",
    "labels": [
        "component: algebra",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.8",
    "title": "Lazy Laurent series",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27347",
    "user": "https://github.com/kwankyu"
}
```
Introduce lazy Laurent series to Sage.

A lazy Laurent series computes coefficients only when demanded or needed. In a sense, lazy Laurent series are Laurent series of infinite precision. 

A generating function example from the code:

```
Generating functions are laurent series over the integer ring::

    sage: from sage.rings.lazy_laurent_series_ring import LazyLaurentSeriesRing
    sage: L = LazyLaurentSeriesRing(ZZ, 'z')

This defines the generating function of Fibonacci sequence::

    sage: def coeff(s, i):
    ....:     if i in [0, 1]:
    ....:         return 1
    ....:     else:
    ....:         return s.coefficient(i - 1) + s.coefficient(i - 2)
    ....:
    sage: f = L.series(coeff, valuation=0); f
    1 + z + 2*z^2 + 3*z^3 + 5*z^4 + 8*z^5 + 13*z^6 + ...

The 100th element of Fibonacci sequence can be obtained from the generating
function::

    sage: f.coefficient(100)
    573147844013817084101 
```

Lazy Laurent series is of course useful for other things. This will be used to implement infinite precision Laurent series expansion of algebraic functions in function fields, as a sequel to #27418.

Reviewer: Travis Scrimshaw

Author: Kwankyu Lee

Branch: 989f009a851c9dc91c8650d7e554138886951a3a

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/27347





---

archive/issue_comments_520436.json:
```json
{
    "body": "Changing branch from \"\" to \"u/klee/27347\"",
    "created_at": "2019-02-24T22:12:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520436",
    "user": "https://github.com/kwankyu"
}
```

Changing branch from "" to "u/klee/27347"



---

archive/issue_comments_520437.json:
```json
{
    "body": "<a id='comment:2'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|\n|[5d24a34](https://github.com/sagemath/sagetrac-mirror/commit/5d24a347b3f5bd6273bf678958c94d18b273b28f)|`Introduce lazy laurent series`|",
    "created_at": "2019-02-24T22:14:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520437",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|
|[5d24a34](https://github.com/sagemath/sagetrac-mirror/commit/5d24a347b3f5bd6273bf678958c94d18b273b28f)|`Introduce lazy laurent series`|



---

archive/issue_comments_520438.json:
```json
{
    "body": "Changing commit from \"\" to \"5d24a347b3f5bd6273bf678958c94d18b273b28f\"",
    "created_at": "2019-02-24T22:14:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520438",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "5d24a347b3f5bd6273bf678958c94d18b273b28f"



---

archive/issue_comments_520439.json:
```json
{
    "body": "Changing author from \"\" to \"Kwankyu Lee\"",
    "created_at": "2019-02-24T22:16:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520439",
    "user": "https://github.com/kwankyu"
}
```

Changing author from "" to "Kwankyu Lee"



---

archive/issue_comments_520440.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-02-24T22:16:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520440",
    "user": "https://github.com/kwankyu"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_520441.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------|\n|[ace4282](https://github.com/sagemath/sagetrac-mirror/commit/ace42826cd8782e1aee3c596707b33f5102291d6)|`pyflakes fixes`|",
    "created_at": "2019-02-25T06:32:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520441",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------|
|[ace4282](https://github.com/sagemath/sagetrac-mirror/commit/ace42826cd8782e1aee3c596707b33f5102291d6)|`pyflakes fixes`|



---

archive/issue_comments_520442.json:
```json
{
    "body": "Changing commit from \"5d24a347b3f5bd6273bf678958c94d18b273b28f\" to \"ace42826cd8782e1aee3c596707b33f5102291d6\"",
    "created_at": "2019-02-25T06:32:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520442",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5d24a347b3f5bd6273bf678958c94d18b273b28f" to "ace42826cd8782e1aee3c596707b33f5102291d6"



---

archive/issue_comments_520443.json:
```json
{
    "body": "<a id='comment:5'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------|\n|[389798e](https://github.com/sagemath/sagetrac-mirror/commit/389798e1d7057545c7914f1456e32f9c47aff5be)|`Add series method`|",
    "created_at": "2019-02-25T08:34:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520443",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------|
|[389798e](https://github.com/sagemath/sagetrac-mirror/commit/389798e1d7057545c7914f1456e32f9c47aff5be)|`Add series method`|



---

archive/issue_comments_520444.json:
```json
{
    "body": "Changing commit from \"ace42826cd8782e1aee3c596707b33f5102291d6\" to \"389798e1d7057545c7914f1456e32f9c47aff5be\"",
    "created_at": "2019-02-25T08:34:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520444",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ace42826cd8782e1aee3c596707b33f5102291d6" to "389798e1d7057545c7914f1456e32f9c47aff5be"



---

archive/issue_comments_520445.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|\n|[43ba785](https://github.com/sagemath/sagetrac-mirror/commit/43ba7859f92d707e2f6f3cf93aafbc4f7f4b453a)|`Small fixes on docstrings`|",
    "created_at": "2019-02-25T19:15:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520445",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|
|[43ba785](https://github.com/sagemath/sagetrac-mirror/commit/43ba7859f92d707e2f6f3cf93aafbc4f7f4b453a)|`Small fixes on docstrings`|



---

archive/issue_comments_520446.json:
```json
{
    "body": "Changing commit from \"389798e1d7057545c7914f1456e32f9c47aff5be\" to \"43ba7859f92d707e2f6f3cf93aafbc4f7f4b453a\"",
    "created_at": "2019-02-25T19:15:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520446",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "389798e1d7057545c7914f1456e32f9c47aff5be" to "43ba7859f92d707e2f6f3cf93aafbc4f7f4b453a"



---

archive/issue_comments_520447.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,31 @@\n Introduce lazy laurent series to Sage.\n+\n+A lazy laurent series computes coefficients only when demanded or needed. In a sense, lazy laurent series are laurent series of infinite precision. \n+\n+A generating function example from the code:\n+\n+```\n+Generating functions are laurent series over the integer ring::\n+\n+    sage: from sage.rings.lazy_laurent_series_ring import LazyLaurentSeriesRing\n+    sage: L = LazyLaurentSeriesRing(ZZ, 'z')\n+\n+This defines the generating function of Fibonacci sequence::\n+\n+    sage: def coeff(s, i):\n+    ....:     if i in [0, 1]:\n+    ....:         return 1\n+    ....:     else:\n+    ....:         return s.coefficient(i - 1) + s.coefficient(i - 2)\n+    ....:\n+    sage: f = L.series(coeff, valuation=0); f\n+    1 + z + 2*z^2 + 3*z^3 + 5*z^4 + 8*z^5 + 13*z^6 + ...\n+\n+The 100th element of Fibonacci sequence can be obtained from the generating\n+function::\n+\n+    sage: f.coefficient(100)\n+    573147844013817084101 \n+```\n+\n+Lazy laurent series is of course useful for other things. This will be used to implement infinite precision laurent series expansion of algebraic functions in function fields, as a sequel to #27418.\n``````\n",
    "created_at": "2019-03-04T09:10:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520447",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,31 @@
 Introduce lazy laurent series to Sage.
+
+A lazy laurent series computes coefficients only when demanded or needed. In a sense, lazy laurent series are laurent series of infinite precision. 
+
+A generating function example from the code:
+
+```
+Generating functions are laurent series over the integer ring::
+
+    sage: from sage.rings.lazy_laurent_series_ring import LazyLaurentSeriesRing
+    sage: L = LazyLaurentSeriesRing(ZZ, 'z')
+
+This defines the generating function of Fibonacci sequence::
+
+    sage: def coeff(s, i):
+    ....:     if i in [0, 1]:
+    ....:         return 1
+    ....:     else:
+    ....:         return s.coefficient(i - 1) + s.coefficient(i - 2)
+    ....:
+    sage: f = L.series(coeff, valuation=0); f
+    1 + z + 2*z^2 + 3*z^3 + 5*z^4 + 8*z^5 + 13*z^6 + ...
+
+The 100th element of Fibonacci sequence can be obtained from the generating
+function::
+
+    sage: f.coefficient(100)
+    573147844013817084101 
+```
+
+Lazy laurent series is of course useful for other things. This will be used to implement infinite precision laurent series expansion of algebraic functions in function fields, as a sequel to #27418.
``````




---

archive/issue_comments_520448.json:
```json
{
    "body": "<a id='comment:8'></a>\nTicket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)",
    "created_at": "2019-03-25T10:56:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520448",
    "user": "https://github.com/embray"
}
```

<a id='comment:8'></a>
Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)



---

archive/issue_events_084885.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27347#event-84885"
}
```



---

archive/issue_comments_520449.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|\n|[e7ff999](https://github.com/sagemath/sagetrac-mirror/commit/e7ff9993551778c67c6a6168f0e26c5943f14925)|`Add lazy laurent series`|",
    "created_at": "2019-04-01T00:49:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520449",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|
|[e7ff999](https://github.com/sagemath/sagetrac-mirror/commit/e7ff9993551778c67c6a6168f0e26c5943f14925)|`Add lazy laurent series`|



---

archive/issue_comments_520450.json:
```json
{
    "body": "Changing commit from \"43ba7859f92d707e2f6f3cf93aafbc4f7f4b453a\" to \"e7ff9993551778c67c6a6168f0e26c5943f14925\"",
    "created_at": "2019-04-01T00:49:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520450",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "43ba7859f92d707e2f6f3cf93aafbc4f7f4b453a" to "e7ff9993551778c67c6a6168f0e26c5943f14925"



---

archive/issue_comments_520451.json:
```json
{
    "body": "Changing commit from \"e7ff9993551778c67c6a6168f0e26c5943f14925\" to \"15e1b1c671d61ef279f1c32a715ddd56a2fa7997\"",
    "created_at": "2019-04-04T10:57:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520451",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e7ff9993551778c67c6a6168f0e26c5943f14925" to "15e1b1c671d61ef279f1c32a715ddd56a2fa7997"



---

archive/issue_comments_520452.json:
```json
{
    "body": "<a id='comment:10'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|\n|[15e1b1c](https://github.com/sagemath/sagetrac-mirror/commit/15e1b1c671d61ef279f1c32a715ddd56a2fa7997)|`Add lazy laurent series`|",
    "created_at": "2019-04-04T10:57:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520452",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|
|[15e1b1c](https://github.com/sagemath/sagetrac-mirror/commit/15e1b1c671d61ef279f1c32a715ddd56a2fa7997)|`Add lazy laurent series`|



---

archive/issue_comments_520453.json:
```json
{
    "body": "Changing commit from \"15e1b1c671d61ef279f1c32a715ddd56a2fa7997\" to \"f70fca8e3303c51b98c3f9311da277fd954b1ebe\"",
    "created_at": "2019-04-04T20:05:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520453",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "15e1b1c671d61ef279f1c32a715ddd56a2fa7997" to "f70fca8e3303c51b98c3f9311da277fd954b1ebe"



---

archive/issue_comments_520454.json:
```json
{
    "body": "<a id='comment:11'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------|\n|[f70fca8](https://github.com/sagemath/sagetrac-mirror/commit/f70fca8e3303c51b98c3f9311da277fd954b1ebe)|`Add __bool__`|",
    "created_at": "2019-04-04T20:05:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520454",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |              |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------|
|[f70fca8](https://github.com/sagemath/sagetrac-mirror/commit/f70fca8e3303c51b98c3f9311da277fd954b1ebe)|`Add __bool__`|



---

archive/issue_comments_520455.json:
```json
{
    "body": "<a id='comment:12'></a>\nSome comments:\n\nIs there a reason why you do not use the `LazyPowerSeriesRing` for the main element (with a non-zero constant term until the whole series is zero) and then just store the valuation? This is how things are done for the Laurent polynomials. That way there is less duplication of code and improvements to one improve both.\n\nWhy do you override `__eq__` and not use the one provided by `Element` and the coercion framework? It is more flexible and allows you do implement comparisons (if you want) all in one function of `_richcmp_`.\n\nDo not have bare `except:` statements (see `coefficient`).\n\nDoes the elements pickle? I am a little worried that the addition of two power series will not pickling because of the little helper `add` function. You should add a `loads(dumps(foo))` test if it does work.\n\nTypo `laurent` -> `Laurent` (it is proper noun).\n\n`if len(s) == 0:` -> `if not s:`",
    "created_at": "2019-04-05T09:22:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520455",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:12'></a>
Some comments:

Is there a reason why you do not use the `LazyPowerSeriesRing` for the main element (with a non-zero constant term until the whole series is zero) and then just store the valuation? This is how things are done for the Laurent polynomials. That way there is less duplication of code and improvements to one improve both.

Why do you override `__eq__` and not use the one provided by `Element` and the coercion framework? It is more flexible and allows you do implement comparisons (if you want) all in one function of `_richcmp_`.

Do not have bare `except:` statements (see `coefficient`).

Does the elements pickle? I am a little worried that the addition of two power series will not pickling because of the little helper `add` function. You should add a `loads(dumps(foo))` test if it does work.

Typo `laurent` -> `Laurent` (it is proper noun).

`if len(s) == 0:` -> `if not s:`



---

archive/issue_comments_520456.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-04-05T23:01:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520456",
    "user": "https://github.com/kwankyu"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_520457.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [tscrim](#comment%3A12):\n> Is there a reason why you do not use the `LazyPowerSeriesRing` for the main element (with a non-zero constant term until the whole series is zero) and then just store the valuation? This is how things are done for the Laurent polynomials. That way there is less duplication of code and improvements to one improve both.\n\n\nI looked into the `LazyPowerSeriesRing` many years ago:\n\nhttps://groups.google.com/forum/#!searchin/sage-support/lazy$20power$20series%7Csort:date/sage-support/JZwDWKq3DtM/tyfxxdxPyXYJ\n\nI think I didn't like it in several ways :-) Still I don't understand this behavior:\n\n```\nsage: L.<t>=LazyPowerSeriesRing(QQ)\nsage: s=L([0,0,1,2])\nsage: s.coefficient(0)\n0\nsage: s.coefficient(1)\n0\nsage: s.coefficient(2)\n1\nsage: s.coefficient(3)\n2\nsage: s\nt^2 + 2*t^3 + O(x^4)\nsage: s.get_order()\n1\nsage: s.get_aorder()\n1\n```\n\nThe reason was that it was easy to implement lazy laurent series with an interface and behaviors that I prefer, while I could not understand well enough `LazyPowerSeriesRing`... \n\nI would reconsider basing lazy laurent series on `LazyPowerSeriesRing`, if you help me understand the strange behaviour above.",
    "created_at": "2019-04-05T23:01:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520457",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:13'></a>
Replying to [tscrim](#comment%3A12):
> Is there a reason why you do not use the `LazyPowerSeriesRing` for the main element (with a non-zero constant term until the whole series is zero) and then just store the valuation? This is how things are done for the Laurent polynomials. That way there is less duplication of code and improvements to one improve both.


I looked into the `LazyPowerSeriesRing` many years ago:

https://groups.google.com/forum/#!searchin/sage-support/lazy$20power$20series%7Csort:date/sage-support/JZwDWKq3DtM/tyfxxdxPyXYJ

I think I didn't like it in several ways :-) Still I don't understand this behavior:

```
sage: L.<t>=LazyPowerSeriesRing(QQ)
sage: s=L([0,0,1,2])
sage: s.coefficient(0)
0
sage: s.coefficient(1)
0
sage: s.coefficient(2)
1
sage: s.coefficient(3)
2
sage: s
t^2 + 2*t^3 + O(x^4)
sage: s.get_order()
1
sage: s.get_aorder()
1
```

The reason was that it was easy to implement lazy laurent series with an interface and behaviors that I prefer, while I could not understand well enough `LazyPowerSeriesRing`... 

I would reconsider basing lazy laurent series on `LazyPowerSeriesRing`, if you help me understand the strange behaviour above.



---

archive/issue_comments_520458.json:
```json
{
    "body": "<a id='comment:14'></a>\nSo here is what `refine_aorder` does. It first checks if `self.order` has been set, if it has, do not do anything. Then it goes through all of the `n` computed entries **if `self.aorder` is 0** and we have already computed at least one entry. Then find the first nonzero entry. If we have found one, set the order.\n\nThe problem is the bold part. After the first iteration when `n = 1`, the `self.aorder` gets set to `1`, then on the second run through, that block does not get run, which then means `self.aorder < n` and we set the order to be `1`.\n\n```\nsage: s.coefficient(1)\n0\nsage: s.aorder\n1\nsage: s.order\nUnknown series order\nsage: s.coefficient(2)\n1\nsage: s.aorder\n1\nsage: s.order\n1\n```\nIMO, this is a bug.",
    "created_at": "2019-04-05T23:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520458",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:14'></a>
So here is what `refine_aorder` does. It first checks if `self.order` has been set, if it has, do not do anything. Then it goes through all of the `n` computed entries **if `self.aorder` is 0** and we have already computed at least one entry. Then find the first nonzero entry. If we have found one, set the order.

The problem is the bold part. After the first iteration when `n = 1`, the `self.aorder` gets set to `1`, then on the second run through, that block does not get run, which then means `self.aorder < n` and we set the order to be `1`.

```
sage: s.coefficient(1)
0
sage: s.aorder
1
sage: s.order
Unknown series order
sage: s.coefficient(2)
1
sage: s.aorder
1
sage: s.order
1
```
IMO, this is a bug.



---

archive/issue_comments_520459.json:
```json
{
    "body": "<a id='comment:15'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|\n|[2f2c59c](https://github.com/sagemath/sagetrac-mirror/commit/2f2c59c8d7e1cf7c1cf0b6141d145b5624f0f0c3)|`Capitalize laurent as it is a proper noun`|\n|[146205a](https://github.com/sagemath/sagetrac-mirror/commit/146205a05162a9b96d96f3f3b2130eddf7e70abe)|`No bare except clause`|\n|[fb4d65d](https://github.com/sagemath/sagetrac-mirror/commit/fb4d65d9dfdb53a735ca33e7800ef79e4ea8ece4)|`Use _richcmp_ instead of primitive __eq__`|",
    "created_at": "2019-04-07T08:03:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520459",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|
|[2f2c59c](https://github.com/sagemath/sagetrac-mirror/commit/2f2c59c8d7e1cf7c1cf0b6141d145b5624f0f0c3)|`Capitalize laurent as it is a proper noun`|
|[146205a](https://github.com/sagemath/sagetrac-mirror/commit/146205a05162a9b96d96f3f3b2130eddf7e70abe)|`No bare except clause`|
|[fb4d65d](https://github.com/sagemath/sagetrac-mirror/commit/fb4d65d9dfdb53a735ca33e7800ef79e4ea8ece4)|`Use _richcmp_ instead of primitive __eq__`|



---

archive/issue_comments_520460.json:
```json
{
    "body": "Changing commit from \"f70fca8e3303c51b98c3f9311da277fd954b1ebe\" to \"fb4d65d9dfdb53a735ca33e7800ef79e4ea8ece4\"",
    "created_at": "2019-04-07T08:03:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520460",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f70fca8e3303c51b98c3f9311da277fd954b1ebe" to "fb4d65d9dfdb53a735ca33e7800ef79e4ea8ece4"



---

archive/issue_comments_520461.json:
```json
{
    "body": "Changing commit from \"fb4d65d9dfdb53a735ca33e7800ef79e4ea8ece4\" to \"41f3a4237cc0f574334a6e26e00f16d73d23972a\"",
    "created_at": "2019-04-07T08:48:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520461",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "fb4d65d9dfdb53a735ca33e7800ef79e4ea8ece4" to "41f3a4237cc0f574334a6e26e00f16d73d23972a"



---

archive/issue_comments_520462.json:
```json
{
    "body": "<a id='comment:16'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[41f3a42](https://github.com/sagemath/sagetrac-mirror/commit/41f3a4237cc0f574334a6e26e00f16d73d23972a)|`Lazy Laurent series is not picklable`|",
    "created_at": "2019-04-07T08:48:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520462",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
|[41f3a42](https://github.com/sagemath/sagetrac-mirror/commit/41f3a4237cc0f574334a6e26e00f16d73d23972a)|`Lazy Laurent series is not picklable`|



---

archive/issue_comments_520463.json:
```json
{
    "body": "<a id='comment:17'></a>\n> Why do you override `__eq__` and not use the one provided by `Element` and the coercion framework? It is more flexible and allows you do implement comparisons (if you want) all in one function of `_richcmp_`.\n\n\nOk. Fixed.\n \n> Do not have bare `except:` statements (see `coefficient`).\n\n\nFixed.\n\n> Does the elements pickle? I am a little worried that the addition of two power series will not pickling because of the little helper `add` function. You should add a `loads(dumps(foo))` test if it does work.\n\n\nNo. Your worry is real; lazy Laurent series is not picklable in general. This seems an inherent nature of my implementation...\n\nI added a test to show this. \n\n> Typo `laurent` -> `Laurent` (it is proper noun).\n\n\nRight. Fixed.\n\n> `if len(s) == 0:` -> `if not s:`\n\n\nDone. \n  \n---\nNew commits:\n|                                                                                                                                          |                                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[41f3a42](https://github.com/sagemath/sagetrac-mirror/commit/41f3a4237cc0f574334a6e26e00f16d73d23972a)|`Lazy Laurent series is not picklable`|",
    "created_at": "2019-04-07T08:53:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520463",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:17'></a>
> Why do you override `__eq__` and not use the one provided by `Element` and the coercion framework? It is more flexible and allows you do implement comparisons (if you want) all in one function of `_richcmp_`.


Ok. Fixed.
 
> Do not have bare `except:` statements (see `coefficient`).


Fixed.

> Does the elements pickle? I am a little worried that the addition of two power series will not pickling because of the little helper `add` function. You should add a `loads(dumps(foo))` test if it does work.


No. Your worry is real; lazy Laurent series is not picklable in general. This seems an inherent nature of my implementation...

I added a test to show this. 

> Typo `laurent` -> `Laurent` (it is proper noun).


Right. Fixed.

> `if len(s) == 0:` -> `if not s:`


Done. 
  
---
New commits:
|                                                                                                                                          |                                      |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
|[41f3a42](https://github.com/sagemath/sagetrac-mirror/commit/41f3a4237cc0f574334a6e26e00f16d73d23972a)|`Lazy Laurent series is not picklable`|



---

archive/issue_comments_520464.json:
```json
{
    "body": "<a id='comment:18'></a>\nReplying to [tscrim](#comment%3A12):\n> Some comments:\n> \n> Is there a reason why you do not use the `LazyPowerSeriesRing` for the main element (with a non-zero constant term until the whole series is zero) and then just store the valuation? This is how things are done for the Laurent polynomials. That way there is less duplication of code and improvements to one improve both.\n\n\nI thought about this. Now I think:\n\nLazy Laurent series is not just about Laurent series but also about how coefficients are computed lazily. A `LazyPowerSeriesRing` element gets its coefficients from a stream object, which essentially yields coefficients as required. On the other hand, lazy Laurent series `s` gets its coefficients from a python function that outputs n-th coefficient  for input `s` and `n`. This allows coefficients to be computed recursively. For example, it is very easy to define the Fibonacci series. \n\nSo it is impossible to base my lazy Laurent series code on `LazyPowerSeriesRing` without abandoning the essential feature of the implementation.\n\nFrankly, I would rather provide new lazy power series as a subclass of my lazy Laurent series. But this is of course highly biased opinion :-)\n\nYou may be reluctant to accept my implementation of lazy Laurent series into `sage.rings` as it then gets kind of standard status among different possible implementations of lazy Laurent series in Sage. Then I am willing to relocate it into `sage.rings.function_field`.",
    "created_at": "2019-04-07T09:40:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520464",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:18'></a>
Replying to [tscrim](#comment%3A12):
> Some comments:
> 
> Is there a reason why you do not use the `LazyPowerSeriesRing` for the main element (with a non-zero constant term until the whole series is zero) and then just store the valuation? This is how things are done for the Laurent polynomials. That way there is less duplication of code and improvements to one improve both.


I thought about this. Now I think:

Lazy Laurent series is not just about Laurent series but also about how coefficients are computed lazily. A `LazyPowerSeriesRing` element gets its coefficients from a stream object, which essentially yields coefficients as required. On the other hand, lazy Laurent series `s` gets its coefficients from a python function that outputs n-th coefficient  for input `s` and `n`. This allows coefficients to be computed recursively. For example, it is very easy to define the Fibonacci series. 

So it is impossible to base my lazy Laurent series code on `LazyPowerSeriesRing` without abandoning the essential feature of the implementation.

Frankly, I would rather provide new lazy power series as a subclass of my lazy Laurent series. But this is of course highly biased opinion :-)

You may be reluctant to accept my implementation of lazy Laurent series into `sage.rings` as it then gets kind of standard status among different possible implementations of lazy Laurent series in Sage. Then I am willing to relocate it into `sage.rings.function_field`.



---

archive/issue_comments_520465.json:
```json
{
    "body": "Changing commit from \"41f3a4237cc0f574334a6e26e00f16d73d23972a\" to \"b09cd84220dc5878d03db5d1ee1d721388457b4e\"",
    "created_at": "2019-04-07T10:04:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520465",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "41f3a4237cc0f574334a6e26e00f16d73d23972a" to "b09cd84220dc5878d03db5d1ee1d721388457b4e"



---

archive/issue_comments_520466.json:
```json
{
    "body": "<a id='comment:19'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------|\n|[b09cd84](https://github.com/sagemath/sagetrac-mirror/commit/b09cd84220dc5878d03db5d1ee1d721388457b4e)|`Fix pickling doctest`|",
    "created_at": "2019-04-07T10:04:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520466",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------|
|[b09cd84](https://github.com/sagemath/sagetrac-mirror/commit/b09cd84220dc5878d03db5d1ee1d721388457b4e)|`Fix pickling doctest`|



---

archive/issue_comments_520467.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [klee](#comment%3A18):\n> Replying to [tscrim](#comment%3A12):\n> > Some comments:\n> > \n> > Is there a reason why you do not use the `LazyPowerSeriesRing` for the main element (with a non-zero constant term until the whole series is zero) and then just store the valuation? This is how things are done for the Laurent polynomials. That way there is less duplication of code and improvements to one improve both.\n\n> \n> I thought about this. Now I think:\n> \n> Lazy Laurent series is not just about Laurent series but also about how coefficients are computed lazily. A `LazyPowerSeriesRing` element gets its coefficients from a stream object, which essentially yields coefficients as required. On the other hand, lazy Laurent series `s` gets its coefficients from a python function that outputs n-th coefficient  for input `s` and `n`. This allows coefficients to be computed recursively. For example, it is very easy to define the Fibonacci series. \n\n\nWell, I am fairly certain you could do this with an `RecursivelyEnumeratedSet` and a bit of know-how, but I agree that it is more complicated and less intuitive. I also agree that having general functions as input would probably be a good thing for `LazyPowerSeriesRing` to have, but I believe that was designed for more specific use for the `combinat/species` code.\n\nOne benefit I do see is that you do not need to explicitly know the valuation at creation-time. With my suggested implementation, it does need to be computed at element creation.\n\n> Frankly, I would rather provide new lazy power series as a subclass of my lazy Laurent series. But this is of course highly biased opinion :-)\n\n\nI don't have an opinion on this matter, but there are likely some considerations required to replace or extend the current implementation.\n\n> You may be reluctant to accept my implementation of lazy Laurent series into `sage.rings` as it then gets kind of standard status among different possible implementations of lazy Laurent series in Sage. Then I am willing to relocate it into `sage.rings.function_field`.\n\n\nThis I don't really care about. I just am a little unhappy with the large difference between the semantics (and syntax) between the two implementations. I guess that is a bit unavoidable here because this definitely is serving a purpose.\n\nHowever, I do think we should at least try to address the pickling issues. I believe this means you cannot use this in parallel implementations (IIRC this uses pickling to communicate between the processes). It also means you cannot (easily) store the data you compute. I think it is sufficient to separate out the `add` and similar operations into functions, but maybe they need to be small little helper class, such as\n\n```python\nclass LaurentSeriesOperator(object):\n    def __init__(self, lps, op):\n        self.lps = lps\n        self.op = op\n    def __call__(self, s, n):\n        return self.op(self.lps[n], s[n])\n    def __reduce__(self):\n        return (type(self), (self.lps, self.op), {})\n    def __eq__(self, other):\n        return (isinstance(other, LaurentSeriesOperator)\n                and self.lps == other.lps and self.op == other.op)\n```\nwhere `op` is, e.g., `operator.add`. This way you might be able to do something with comparisons in some semi-reasonable capacity too.",
    "created_at": "2019-04-07T13:58:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520467",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:20'></a>
Replying to [klee](#comment%3A18):
> Replying to [tscrim](#comment%3A12):
> > Some comments:
> > 
> > Is there a reason why you do not use the `LazyPowerSeriesRing` for the main element (with a non-zero constant term until the whole series is zero) and then just store the valuation? This is how things are done for the Laurent polynomials. That way there is less duplication of code and improvements to one improve both.

> 
> I thought about this. Now I think:
> 
> Lazy Laurent series is not just about Laurent series but also about how coefficients are computed lazily. A `LazyPowerSeriesRing` element gets its coefficients from a stream object, which essentially yields coefficients as required. On the other hand, lazy Laurent series `s` gets its coefficients from a python function that outputs n-th coefficient  for input `s` and `n`. This allows coefficients to be computed recursively. For example, it is very easy to define the Fibonacci series. 


Well, I am fairly certain you could do this with an `RecursivelyEnumeratedSet` and a bit of know-how, but I agree that it is more complicated and less intuitive. I also agree that having general functions as input would probably be a good thing for `LazyPowerSeriesRing` to have, but I believe that was designed for more specific use for the `combinat/species` code.

One benefit I do see is that you do not need to explicitly know the valuation at creation-time. With my suggested implementation, it does need to be computed at element creation.

> Frankly, I would rather provide new lazy power series as a subclass of my lazy Laurent series. But this is of course highly biased opinion :-)


I don't have an opinion on this matter, but there are likely some considerations required to replace or extend the current implementation.

> You may be reluctant to accept my implementation of lazy Laurent series into `sage.rings` as it then gets kind of standard status among different possible implementations of lazy Laurent series in Sage. Then I am willing to relocate it into `sage.rings.function_field`.


This I don't really care about. I just am a little unhappy with the large difference between the semantics (and syntax) between the two implementations. I guess that is a bit unavoidable here because this definitely is serving a purpose.

However, I do think we should at least try to address the pickling issues. I believe this means you cannot use this in parallel implementations (IIRC this uses pickling to communicate between the processes). It also means you cannot (easily) store the data you compute. I think it is sufficient to separate out the `add` and similar operations into functions, but maybe they need to be small little helper class, such as

```python
class LaurentSeriesOperator(object):
    def __init__(self, lps, op):
        self.lps = lps
        self.op = op
    def __call__(self, s, n):
        return self.op(self.lps[n], s[n])
    def __reduce__(self):
        return (type(self), (self.lps, self.op), {})
    def __eq__(self, other):
        return (isinstance(other, LaurentSeriesOperator)
                and self.lps == other.lps and self.op == other.op)
```
where `op` is, e.g., `operator.add`. This way you might be able to do something with comparisons in some semi-reasonable capacity too.



---

archive/issue_comments_520468.json:
```json
{
    "body": "<a id='comment:21'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------|\n|[89992b8](https://github.com/sagemath/sagetrac-mirror/commit/89992b806e2d534343bb57c2a6cec1d0fecd9394)|`Reimplement arithmetic operations for series to be picklable`|",
    "created_at": "2019-04-08T05:45:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520468",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                              |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------|
|[89992b8](https://github.com/sagemath/sagetrac-mirror/commit/89992b806e2d534343bb57c2a6cec1d0fecd9394)|`Reimplement arithmetic operations for series to be picklable`|



---

archive/issue_comments_520469.json:
```json
{
    "body": "Changing commit from \"b09cd84220dc5878d03db5d1ee1d721388457b4e\" to \"89992b806e2d534343bb57c2a6cec1d0fecd9394\"",
    "created_at": "2019-04-08T05:45:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520469",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b09cd84220dc5878d03db5d1ee1d721388457b4e" to "89992b806e2d534343bb57c2a6cec1d0fecd9394"



---

archive/issue_comments_520470.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [tscrim](#comment%3A20):\n> However, I do think we should at least try to address the pickling issues. I believe this means you cannot use this in parallel implementations (IIRC this uses pickling to communicate between the processes). It also means you cannot (easily) store the data you compute. I think it is sufficient to separate out the `add` and similar operations into functions, but maybe they need to be small little helper class, such as\n> \n> ```python\n> class LaurentSeriesOperator(object):\n>     def __init__(self, lps, op):\n>         self.lps = lps\n>         self.op = op\n>     def __call__(self, s, n):\n>         return self.op(self.lps[n], s[n])\n>     def __reduce__(self):\n>         return (type(self), (self.lps, self.op), {})\n>     def __eq__(self, other):\n>         return (isinstance(other, LaurentSeriesOperator)\n>                 and self.lps == other.lps and self.op == other.op)\n> ```\n> where `op` is, e.g., `operator.add`. This way you might be able to do something with comparisons in some semi-reasonable capacity too.\n\n\nUsing module-level classes to define operators is a good idea. Hinted by your template class, I could reimplement lazy Laurent series to be picklable. Great!",
    "created_at": "2019-04-08T05:51:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520470",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:22'></a>
Replying to [tscrim](#comment%3A20):
> However, I do think we should at least try to address the pickling issues. I believe this means you cannot use this in parallel implementations (IIRC this uses pickling to communicate between the processes). It also means you cannot (easily) store the data you compute. I think it is sufficient to separate out the `add` and similar operations into functions, but maybe they need to be small little helper class, such as
> 
> ```python
> class LaurentSeriesOperator(object):
>     def __init__(self, lps, op):
>         self.lps = lps
>         self.op = op
>     def __call__(self, s, n):
>         return self.op(self.lps[n], s[n])
>     def __reduce__(self):
>         return (type(self), (self.lps, self.op), {})
>     def __eq__(self, other):
>         return (isinstance(other, LaurentSeriesOperator)
>                 and self.lps == other.lps and self.op == other.op)
> ```
> where `op` is, e.g., `operator.add`. This way you might be able to do something with comparisons in some semi-reasonable capacity too.


Using module-level classes to define operators is a good idea. Hinted by your template class, I could reimplement lazy Laurent series to be picklable. Great!



---

archive/issue_comments_520471.json:
```json
{
    "body": "Changing commit from \"89992b806e2d534343bb57c2a6cec1d0fecd9394\" to \"989a3ac561bed35c9466a848e2a9ef441f94f560\"",
    "created_at": "2019-04-08T07:12:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520471",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "89992b806e2d534343bb57c2a6cec1d0fecd9394" to "989a3ac561bed35c9466a848e2a9ef441f94f560"



---

archive/issue_comments_520472.json:
```json
{
    "body": "<a id='comment:23'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|\n|[989a3ac](https://github.com/sagemath/sagetrac-mirror/commit/989a3ac561bed35c9466a848e2a9ef441f94f560)|`Comparison now works in semi-reasonable capacity`|",
    "created_at": "2019-04-08T07:12:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520472",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|
|[989a3ac](https://github.com/sagemath/sagetrac-mirror/commit/989a3ac561bed35c9466a848e2a9ef441f94f560)|`Comparison now works in semi-reasonable capacity`|



---

archive/issue_comments_520473.json:
```json
{
    "body": "Changing commit from \"989a3ac561bed35c9466a848e2a9ef441f94f560\" to \"e12fd5b6511f90ccb9b5b7bc59cb61e30d75cc93\"",
    "created_at": "2019-04-08T07:24:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520473",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "989a3ac561bed35c9466a848e2a9ef441f94f560" to "e12fd5b6511f90ccb9b5b7bc59cb61e30d75cc93"



---

archive/issue_comments_520474.json:
```json
{
    "body": "<a id='comment:24'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|\n|[ce4db37](https://github.com/sagemath/sagetrac-mirror/commit/ce4db37902834445be96110501cff1aba7e229f1)|`Now pass _test_pickling`|\n|[e12fd5b](https://github.com/sagemath/sagetrac-mirror/commit/e12fd5b6511f90ccb9b5b7bc59cb61e30d75cc93)|`Minor fixes in string formatting`|",
    "created_at": "2019-04-08T07:24:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520474",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|
|[ce4db37](https://github.com/sagemath/sagetrac-mirror/commit/ce4db37902834445be96110501cff1aba7e229f1)|`Now pass _test_pickling`|
|[e12fd5b](https://github.com/sagemath/sagetrac-mirror/commit/e12fd5b6511f90ccb9b5b7bc59cb61e30d75cc93)|`Minor fixes in string formatting`|



---

archive/issue_comments_520475.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n-Introduce lazy laurent series to Sage.\n+Introduce lazy Laurent series to Sage.\n \n-A lazy laurent series computes coefficients only when demanded or needed. In a sense, lazy laurent series are laurent series of infinite precision. \n+A lazy Laurent series computes coefficients only when demanded or needed. In a sense, lazy Laurent series are Laurent series of infinite precision. \n \n A generating function example from the code:\n \n@@ -28,4 +28,4 @@\n     573147844013817084101 \n ```\n \n-Lazy laurent series is of course useful for other things. This will be used to implement infinite precision laurent series expansion of algebraic functions in function fields, as a sequel to #27418.\n+Lazy Laurent series is of course useful for other things. This will be used to implement infinite precision Laurent series expansion of algebraic functions in function fields, as a sequel to #27418.\n``````\n",
    "created_at": "2019-04-08T07:26:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520475",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
-Introduce lazy laurent series to Sage.
+Introduce lazy Laurent series to Sage.
 
-A lazy laurent series computes coefficients only when demanded or needed. In a sense, lazy laurent series are laurent series of infinite precision. 
+A lazy Laurent series computes coefficients only when demanded or needed. In a sense, lazy Laurent series are Laurent series of infinite precision. 
 
 A generating function example from the code:
 
@@ -28,4 +28,4 @@
     573147844013817084101 
 ```
 
-Lazy laurent series is of course useful for other things. This will be used to implement infinite precision laurent series expansion of algebraic functions in function fields, as a sequel to #27418.
+Lazy Laurent series is of course useful for other things. This will be used to implement infinite precision Laurent series expansion of algebraic functions in function fields, as a sequel to #27418.
``````




---

archive/issue_events_084886.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "rename": {
        "from": "Lazy laurent series",
        "to": "Lazy Laurent series"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27347#event-84886"
}
```



---

archive/issue_comments_520476.json:
```json
{
    "body": "Changing commit from \"e12fd5b6511f90ccb9b5b7bc59cb61e30d75cc93\" to \"5214a3a020c8e268c62957990f3ef5351641bd3f\"",
    "created_at": "2019-04-08T09:06:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520476",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e12fd5b6511f90ccb9b5b7bc59cb61e30d75cc93" to "5214a3a020c8e268c62957990f3ef5351641bd3f"



---

archive/issue_comments_520477.json:
```json
{
    "body": "<a id='comment:27'></a>\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n|                                                                                                                                           |                                                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------|\n|[afeae09](https://github.com/sagemath/sagetrac-mirror/commit/afeae09cabf033abca6595239b9968e1d916c921)|`Merge branch 'function-fields-infinity-precision' into function-fields`|\n|[bf81509](https://github.com/sagemath/sagetrac-mirror/commit/bf815095d21e19af2ee7f2cda294eb09ef922f64)|`Merge branch 'lazy-power-series-trac27347' into function-fields`|\n|[e552770](https://github.com/sagemath/sagetrac-mirror/commit/e552770b1950c6e27eb1c679bba1104487165b20)|`fix`|\n|[6c5fc73](https://github.com/sagemath/sagetrac-mirror/commit/6c5fc73a72dc93835dba558796743ab630763943)|`Merge branch 'function-fields-infinity-precision' into function-fields`|\n|[f616d20](https://github.com/sagemath/sagetrac-mirror/commit/f616d206f03e01bbc10409e0091ba3bd9808443c)|`Merge branch 'lazy-power-series-trac27347' into function-fields-infinity-precision`|\n|[8d77ecc](https://github.com/sagemath/sagetrac-mirror/commit/8d77ecca200465722696f2e9f59d8f4096c1fd02)|`Merge branch 'function-fields-infinity-precision' into function-fields`|\n|[bbeebef](https://github.com/sagemath/sagetrac-mirror/commit/bbeebef9b41a3f859c0b7eab1d5248a978689595)|`Merge branch 'function-fields' into curves-irreducible`|\n|[64c9c6b](https://github.com/sagemath/sagetrac-mirror/commit/64c9c6bf2151d07781460fb553f820302dea3613)|`Add delta-invariant`|\n|[6142750](https://github.com/sagemath/sagetrac-mirror/commit/61427501c57756caeb525386ee58cfff192066e1)|`Add ag codes`|\n|[5214a3a](https://github.com/sagemath/sagetrac-mirror/commit/5214a3a020c8e268c62957990f3ef5351641bd3f)|`Add list operator and allow list input`|",
    "created_at": "2019-04-08T09:06:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520477",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>
Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
|                                                                                                                                           |                                                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------|
|[afeae09](https://github.com/sagemath/sagetrac-mirror/commit/afeae09cabf033abca6595239b9968e1d916c921)|`Merge branch 'function-fields-infinity-precision' into function-fields`|
|[bf81509](https://github.com/sagemath/sagetrac-mirror/commit/bf815095d21e19af2ee7f2cda294eb09ef922f64)|`Merge branch 'lazy-power-series-trac27347' into function-fields`|
|[e552770](https://github.com/sagemath/sagetrac-mirror/commit/e552770b1950c6e27eb1c679bba1104487165b20)|`fix`|
|[6c5fc73](https://github.com/sagemath/sagetrac-mirror/commit/6c5fc73a72dc93835dba558796743ab630763943)|`Merge branch 'function-fields-infinity-precision' into function-fields`|
|[f616d20](https://github.com/sagemath/sagetrac-mirror/commit/f616d206f03e01bbc10409e0091ba3bd9808443c)|`Merge branch 'lazy-power-series-trac27347' into function-fields-infinity-precision`|
|[8d77ecc](https://github.com/sagemath/sagetrac-mirror/commit/8d77ecca200465722696f2e9f59d8f4096c1fd02)|`Merge branch 'function-fields-infinity-precision' into function-fields`|
|[bbeebef](https://github.com/sagemath/sagetrac-mirror/commit/bbeebef9b41a3f859c0b7eab1d5248a978689595)|`Merge branch 'function-fields' into curves-irreducible`|
|[64c9c6b](https://github.com/sagemath/sagetrac-mirror/commit/64c9c6bf2151d07781460fb553f820302dea3613)|`Add delta-invariant`|
|[6142750](https://github.com/sagemath/sagetrac-mirror/commit/61427501c57756caeb525386ee58cfff192066e1)|`Add ag codes`|
|[5214a3a](https://github.com/sagemath/sagetrac-mirror/commit/5214a3a020c8e268c62957990f3ef5351641bd3f)|`Add list operator and allow list input`|



---

archive/issue_comments_520478.json:
```json
{
    "body": "<a id='comment:28'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|\n|[eac7047](https://github.com/sagemath/sagetrac-mirror/commit/eac7047c33c8fd1201e86493df34ef9cb805e893)|`Add list operator and allow list input`|",
    "created_at": "2019-04-08T09:09:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520478",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|
|[eac7047](https://github.com/sagemath/sagetrac-mirror/commit/eac7047c33c8fd1201e86493df34ef9cb805e893)|`Add list operator and allow list input`|



---

archive/issue_comments_520479.json:
```json
{
    "body": "Changing commit from \"5214a3a020c8e268c62957990f3ef5351641bd3f\" to \"eac7047c33c8fd1201e86493df34ef9cb805e893\"",
    "created_at": "2019-04-08T09:09:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520479",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5214a3a020c8e268c62957990f3ef5351641bd3f" to "eac7047c33c8fd1201e86493df34ef9cb805e893"



---

archive/issue_comments_520480.json:
```json
{
    "body": "<a id='comment:29'></a>\nOops. Pushed a wrong branch!",
    "created_at": "2019-04-08T09:10:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520480",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:29'></a>
Oops. Pushed a wrong branch!



---

archive/issue_comments_520481.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-04-08T09:21:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520481",
    "user": "https://github.com/kwankyu"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_520482.json:
```json
{
    "body": "<a id='comment:31'></a>\nThis is looking good.\n\nPast experience tells me you should also implement a `__ne__` at the base class. I also think you should include more ABCs to avoid the extra duplication with the `__eq__` methods. Similarly, why not use the `op` version for `+-*/` to avoid class duplication? You may also want a `__hash__` and incorporate that into the hash of the lazy Laurent series. With how many operator classes you have, it may also be worthwhile pulling that out to a separate file for better separations-of-concerns between files.",
    "created_at": "2019-04-08T12:46:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520482",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:31'></a>
This is looking good.

Past experience tells me you should also implement a `__ne__` at the base class. I also think you should include more ABCs to avoid the extra duplication with the `__eq__` methods. Similarly, why not use the `op` version for `+-*/` to avoid class duplication? You may also want a `__hash__` and incorporate that into the hash of the lazy Laurent series. With how many operator classes you have, it may also be worthwhile pulling that out to a separate file for better separations-of-concerns between files.



---

archive/issue_comments_520483.json:
```json
{
    "body": "Changing commit from \"eac7047c33c8fd1201e86493df34ef9cb805e893\" to \"f5b579285b0daf9bab2955dbb397174467fd3e47\"",
    "created_at": "2019-04-09T04:00:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520483",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "eac7047c33c8fd1201e86493df34ef9cb805e893" to "f5b579285b0daf9bab2955dbb397174467fd3e47"



---

archive/issue_comments_520484.json:
```json
{
    "body": "<a id='comment:32'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------|\n|[f5b5792](https://github.com/sagemath/sagetrac-mirror/commit/f5b579285b0daf9bab2955dbb397174467fd3e47)|`Add hash and fix other issues from reviewer comments`|",
    "created_at": "2019-04-09T04:00:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520484",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------|
|[f5b5792](https://github.com/sagemath/sagetrac-mirror/commit/f5b579285b0daf9bab2955dbb397174467fd3e47)|`Add hash and fix other issues from reviewer comments`|



---

archive/issue_comments_520485.json:
```json
{
    "body": "<a id='comment:33'></a>\nReplying to [tscrim](#comment%3A31):\n> This is looking good.\n> \n> Past experience tells me you should also implement a `__ne__` at the base class. \n\n\nDone.\n\n> I also think you should include more ABCs to avoid the extra duplication with the `__eq__` methods. \n\n\nOk.\n\n> Similarly, why not use the `op` version for `+-*/` to avoid class duplication? \n\n\nI don't get it. They cannot be treated uniformly. Look at the `__call__` method.\n\n> You may also want a `__hash__` and incorporate that into the hash of the lazy Laurent series. \n\n\nDone.\n\n> With how many operator classes you have, it may also be worthwhile pulling that out to a separate file for better separations-of-concerns between files.\n\n\nDone.",
    "created_at": "2019-04-09T04:04:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520485",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:33'></a>
Replying to [tscrim](#comment%3A31):
> This is looking good.
> 
> Past experience tells me you should also implement a `__ne__` at the base class. 


Done.

> I also think you should include more ABCs to avoid the extra duplication with the `__eq__` methods. 


Ok.

> Similarly, why not use the `op` version for `+-*/` to avoid class duplication? 


I don't get it. They cannot be treated uniformly. Look at the `__call__` method.

> You may also want a `__hash__` and incorporate that into the hash of the lazy Laurent series. 


Done.

> With how many operator classes you have, it may also be worthwhile pulling that out to a separate file for better separations-of-concerns between files.


Done.



---

archive/issue_comments_520486.json:
```json
{
    "body": "<a id='comment:34'></a>\nReplying to [klee](#comment%3A33):\n> Replying to [tscrim](#comment%3A31):\n> > Similarly, why not use the `op` version for `+-*/` to avoid class duplication? \n\n> \n> I don't get it. They cannot be treated uniformly. Look at the `__call__` method.\n\n\nYou can do what I suggested in[comment:20](#comment%3A20) for these classes:\n- `LazyLaurentSeriesOperator_add` (by passing `operator.add`)\n- `LazyLaurentSeriesOperator_sub` (by passing `operator.sub`)\nYou're right that multiplication must be treated separately. Although you could also do this for a scalar multiplication version of this (which will be faster than coercion and multiplication). For 2 cases, there is a less compelling reason to factor the common code out like this.\n\nThere is not really a benefit for doing this for unitary operations (as there is only 1 that could work this way).\n\nIn some ways it feels like we are reinventing the wheel here because we are effectively building an evaluation tree, and we already have something like this within `SR` (or sympy/pynac/etc.). However, I don't see a way around this by using `SR` (and we might have to work a little bit to avoid doing computations unnecessarily inside of there). So I think we have to keep doing things this way. Just an observation.",
    "created_at": "2019-04-09T05:55:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520486",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:34'></a>
Replying to [klee](#comment%3A33):
> Replying to [tscrim](#comment%3A31):
> > Similarly, why not use the `op` version for `+-*/` to avoid class duplication? 

> 
> I don't get it. They cannot be treated uniformly. Look at the `__call__` method.


You can do what I suggested in[comment:20](#comment%3A20) for these classes:
- `LazyLaurentSeriesOperator_add` (by passing `operator.add`)
- `LazyLaurentSeriesOperator_sub` (by passing `operator.sub`)
You're right that multiplication must be treated separately. Although you could also do this for a scalar multiplication version of this (which will be faster than coercion and multiplication). For 2 cases, there is a less compelling reason to factor the common code out like this.

There is not really a benefit for doing this for unitary operations (as there is only 1 that could work this way).

In some ways it feels like we are reinventing the wheel here because we are effectively building an evaluation tree, and we already have something like this within `SR` (or sympy/pynac/etc.). However, I don't see a way around this by using `SR` (and we might have to work a little bit to avoid doing computations unnecessarily inside of there). So I think we have to keep doing things this way. Just an observation.



---

archive/issue_comments_520487.json:
```json
{
    "body": "Changing commit from \"f5b579285b0daf9bab2955dbb397174467fd3e47\" to \"3bf2101b59d3d13aca9815fbe907ff7ad6c33cdb\"",
    "created_at": "2019-04-09T08:20:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520487",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f5b579285b0daf9bab2955dbb397174467fd3e47" to "3bf2101b59d3d13aca9815fbe907ff7ad6c33cdb"



---

archive/issue_comments_520488.json:
```json
{
    "body": "<a id='comment:35'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|\n|[3bf2101](https://github.com/sagemath/sagetrac-mirror/commit/3bf2101b59d3d13aca9815fbe907ff7ad6c33cdb)|`Add scalar multiplication operator`|",
    "created_at": "2019-04-09T08:20:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520488",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|
|[3bf2101](https://github.com/sagemath/sagetrac-mirror/commit/3bf2101b59d3d13aca9815fbe907ff7ad6c33cdb)|`Add scalar multiplication operator`|



---

archive/issue_comments_520489.json:
```json
{
    "body": "<a id='comment:36'></a>\nReplying to [tscrim](#comment%3A34):\n> Although you could also do this for a scalar multiplication version of this (which will be faster than coercion and multiplication). \n\n\nAdded scalar multiplication.\n\n> In some ways it feels like we are reinventing the wheel here because we are effectively building an evaluation tree, and we already have something like this within `SR` (or sympy/pynac/etc.). However, I don't see a way around this by using `SR` (and we might have to work a little bit to avoid doing computations unnecessarily inside of there). So I think we have to keep doing things this way. Just an observation.\n\n\nTrue. It is just inevitable that sometimes we make wheels for different needs :-)",
    "created_at": "2019-04-09T11:09:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520489",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:36'></a>
Replying to [tscrim](#comment%3A34):
> Although you could also do this for a scalar multiplication version of this (which will be faster than coercion and multiplication). 


Added scalar multiplication.

> In some ways it feels like we are reinventing the wheel here because we are effectively building an evaluation tree, and we already have something like this within `SR` (or sympy/pynac/etc.). However, I don't see a way around this by using `SR` (and we might have to work a little bit to avoid doing computations unnecessarily inside of there). So I think we have to keep doing things this way. Just an observation.


True. It is just inevitable that sometimes we make wheels for different needs :-)



---

archive/issue_comments_520490.json:
```json
{
    "body": "<a id='comment:37'></a>\nI find this quite wonderful!  It would be great if we could replace `LazyPowerSeries` with this.  One feature of `LazyPowerSeries` was that it allows recursive definitions \"guessing\" the correct initialisations, as for example in\n\n```\n            sage: L = LazyPowerSeriesRing(QQ)\n            sage: one = L(1)\n            sage: monom = L.gen()\n            sage: s = L()\n            sage: s._name = 's'\n            sage: s.define(one+monom*s*s)\n            sage: [s.coefficient(i) for i in range(6)]\n            [1, 1, 2, 5, 14, 42]\n```\nAlthough this is based on the original code by Ralf Hemmecke and myself, which in turn is based on code of Nicolas Thiery (I think), I am not sure anymore whether it is so important.  Of course, if we could have something similar, even better.",
    "created_at": "2019-04-09T11:24:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520490",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:37'></a>
I find this quite wonderful!  It would be great if we could replace `LazyPowerSeries` with this.  One feature of `LazyPowerSeries` was that it allows recursive definitions "guessing" the correct initialisations, as for example in

```
            sage: L = LazyPowerSeriesRing(QQ)
            sage: one = L(1)
            sage: monom = L.gen()
            sage: s = L()
            sage: s._name = 's'
            sage: s.define(one+monom*s*s)
            sage: [s.coefficient(i) for i in range(6)]
            [1, 1, 2, 5, 14, 42]
```
Although this is based on the original code by Ralf Hemmecke and myself, which in turn is based on code of Nicolas Thiery (I think), I am not sure anymore whether it is so important.  Of course, if we could have something similar, even better.



---

archive/issue_comments_520491.json:
```json
{
    "body": "<a id='comment:38'></a>\nOne question with respect to equality.  It seems to me that your implementation of `__eq__` is quite brittle.  It is clear that one cannot have proper equality, so it should be clearly stated what it can do and what it can't.\n\nApart from that, in the case of truncation, one could make it exact easily.",
    "created_at": "2019-04-09T11:26:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520491",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:38'></a>
One question with respect to equality.  It seems to me that your implementation of `__eq__` is quite brittle.  It is clear that one cannot have proper equality, so it should be clearly stated what it can do and what it can't.

Apart from that, in the case of truncation, one could make it exact easily.



---

archive/issue_comments_520492.json:
```json
{
    "body": "<a id='comment:39'></a>\nSome other comments on the code:\n\nFor `__bool__`, I think erroring out immediately when `self._constant is None` is not the way to go. I think you should check the computed coefficients in that case to see if any of them are non-zero. If they are all `0`, then you should error out. Also, a fast first check when `self._constant` is not `None` is to see if that constant is non-zero `0`.\n\nIn `_repr_`, I do not see how `self.valuation()` would normally raise a `ValueError`. That method does not raise one, nor does `self.coefficient()` (the only other method it calls).\n\nInstead of `self.parent()(1)`, which calls the coercion framework, you should use `self.parent().one()`.\n\nAre you sure you want `_div_` to be two separate operations and not one combined one? I feel like the latter would be faster (at least since it is implemented at the Python level).\n\nActually, you may want to make the operator file into a Cython file (since is forms the key computational part and it is in a separate file).\n\nI think the truncate should return an honest Laurent polynomial. Furthermore, I don't think there are coercions (or at least conversions) from the corresponding Laurent polynomial ring. This feels like a very natural to have. I don't want to go too far with ticket expansion, but this feels like something people will try soon after having this.",
    "created_at": "2019-04-09T14:40:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520492",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:39'></a>
Some other comments on the code:

For `__bool__`, I think erroring out immediately when `self._constant is None` is not the way to go. I think you should check the computed coefficients in that case to see if any of them are non-zero. If they are all `0`, then you should error out. Also, a fast first check when `self._constant` is not `None` is to see if that constant is non-zero `0`.

In `_repr_`, I do not see how `self.valuation()` would normally raise a `ValueError`. That method does not raise one, nor does `self.coefficient()` (the only other method it calls).

Instead of `self.parent()(1)`, which calls the coercion framework, you should use `self.parent().one()`.

Are you sure you want `_div_` to be two separate operations and not one combined one? I feel like the latter would be faster (at least since it is implemented at the Python level).

Actually, you may want to make the operator file into a Cython file (since is forms the key computational part and it is in a separate file).

I think the truncate should return an honest Laurent polynomial. Furthermore, I don't think there are coercions (or at least conversions) from the corresponding Laurent polynomial ring. This feels like a very natural to have. I don't want to go too far with ticket expansion, but this feels like something people will try soon after having this.



---

archive/issue_comments_520493.json:
```json
{
    "body": "Changing commit from \"3bf2101b59d3d13aca9815fbe907ff7ad6c33cdb\" to \"86ccdc42aab475d7ffb04e02eb210f58b79f04b6\"",
    "created_at": "2019-04-10T04:49:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520493",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "3bf2101b59d3d13aca9815fbe907ff7ad6c33cdb" to "86ccdc42aab475d7ffb04e02eb210f58b79f04b6"



---

archive/issue_comments_520494.json:
```json
{
    "body": "<a id='comment:40'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|\n|[4bf0f2f](https://github.com/sagemath/sagetrac-mirror/commit/4bf0f2f0a34d190ef2578050cb058b52dcea790c)|`Add coercion from Laurent polynomials`|\n|[86ccdc4](https://github.com/sagemath/sagetrac-mirror/commit/86ccdc42aab475d7ffb04e02eb210f58b79f04b6)|`Add polynomial method and coercions from Laurent polynomial ring`|",
    "created_at": "2019-04-10T04:49:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520494",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:40'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                       |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|
|[4bf0f2f](https://github.com/sagemath/sagetrac-mirror/commit/4bf0f2f0a34d190ef2578050cb058b52dcea790c)|`Add coercion from Laurent polynomials`|
|[86ccdc4](https://github.com/sagemath/sagetrac-mirror/commit/86ccdc42aab475d7ffb04e02eb210f58b79f04b6)|`Add polynomial method and coercions from Laurent polynomial ring`|



---

archive/issue_comments_520495.json:
```json
{
    "body": "<a id='comment:41'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|\n|[e028ed6](https://github.com/sagemath/sagetrac-mirror/commit/e028ed60fbfb7457a1302bc8ecef69300311a2da)|`A little change in truncate method`|",
    "created_at": "2019-04-10T04:54:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520495",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:41'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|
|[e028ed6](https://github.com/sagemath/sagetrac-mirror/commit/e028ed60fbfb7457a1302bc8ecef69300311a2da)|`A little change in truncate method`|



---

archive/issue_comments_520496.json:
```json
{
    "body": "Changing commit from \"86ccdc42aab475d7ffb04e02eb210f58b79f04b6\" to \"e028ed60fbfb7457a1302bc8ecef69300311a2da\"",
    "created_at": "2019-04-10T04:54:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520496",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "86ccdc42aab475d7ffb04e02eb210f58b79f04b6" to "e028ed60fbfb7457a1302bc8ecef69300311a2da"



---

archive/issue_comments_520497.json:
```json
{
    "body": "<a id='comment:42'></a>\nReplying to [tscrim](#comment%3A39):\n> For `__bool__`, I think erroring out immediately when `self._constant is None` is not the way to go. I think you should check the computed coefficients in that case to see if any of them are non-zero. If they are all `0`, then you should error out. \n\n\nGood idea. Done.\n\n> Also, a fast first check when `self._constant` is not `None` is to see if that constant is non-zero `0`.\n\n\nThis check is already there.\n\n> In `_repr_`, I do not see how `self.valuation()` would normally raise a `ValueError`. That method does not raise one, nor does `self.coefficient()` (the only other method it calls).\n\n\nRight. Fixed.\n\n\n> Instead of `self.parent()(1)`, which calls the coercion framework, you should use `self.parent().one()`.\n\n\nOk. Fixed.\n\n> Are you sure you want `_div_` to be two separate operations and not one combined one? I feel like the latter would be faster (at least since it is implemented at the Python level).\n\n\nI don't feel so. I don't see a way to implement series division such that 1 + 1 < 2 with a significant margin.\n\n> I think the truncate should return an honest Laurent polynomial. \n\n\nI don't agree. One might still want a truncated series  with laziness. For your cases, I added `polynomial` method to convert to an honest polynomial. \n\n>Furthermore, I don't think there are coercions (or at least conversions) from the corresponding Laurent polynomial ring. This feels like a very natural to have. I don't want to go too far with ticket expansion, but this feels like something people will try soon after having this.\n\n\nRight. I added coercions from (Laurent) polynomial rings.\n\n> Actually, you may want to make the operator file into a Cython file (since is forms the key computational part and it is in a separate file).\n\n\nHmm. I doubt if there would be significant speed boost, compensating increased build time (that I hate). Moreover I am not versed with Cython. So I don't want to do that, at least for this ticket. But if you do it, I would not object.",
    "created_at": "2019-04-10T05:14:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520497",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:42'></a>
Replying to [tscrim](#comment%3A39):
> For `__bool__`, I think erroring out immediately when `self._constant is None` is not the way to go. I think you should check the computed coefficients in that case to see if any of them are non-zero. If they are all `0`, then you should error out. 


Good idea. Done.

> Also, a fast first check when `self._constant` is not `None` is to see if that constant is non-zero `0`.


This check is already there.

> In `_repr_`, I do not see how `self.valuation()` would normally raise a `ValueError`. That method does not raise one, nor does `self.coefficient()` (the only other method it calls).


Right. Fixed.


> Instead of `self.parent()(1)`, which calls the coercion framework, you should use `self.parent().one()`.


Ok. Fixed.

> Are you sure you want `_div_` to be two separate operations and not one combined one? I feel like the latter would be faster (at least since it is implemented at the Python level).


I don't feel so. I don't see a way to implement series division such that 1 + 1 < 2 with a significant margin.

> I think the truncate should return an honest Laurent polynomial. 


I don't agree. One might still want a truncated series  with laziness. For your cases, I added `polynomial` method to convert to an honest polynomial. 

>Furthermore, I don't think there are coercions (or at least conversions) from the corresponding Laurent polynomial ring. This feels like a very natural to have. I don't want to go too far with ticket expansion, but this feels like something people will try soon after having this.


Right. I added coercions from (Laurent) polynomial rings.

> Actually, you may want to make the operator file into a Cython file (since is forms the key computational part and it is in a separate file).


Hmm. I doubt if there would be significant speed boost, compensating increased build time (that I hate). Moreover I am not versed with Cython. So I don't want to do that, at least for this ticket. But if you do it, I would not object.



---

archive/issue_comments_520498.json:
```json
{
    "body": "<a id='comment:43'></a>\nReplying to [mantepse](#comment%3A38):\n> One question with respect to equality.  It seems to me that your implementation of `__eq__` is quite brittle.  It is clear that one cannot have proper equality, so it should be clearly stated what it can do and what it can't.\n\n\nThe implementation gives an answer if possible without computing coefficients indefinitely. Otherwise raise an exception.\n\nI added a short explanation to the method. \n\n> Apart from that, in the case of truncation, one could make it exact easily.\n\n\nTruncation still gives a lazy series. I added `polynomial` method to convert to an exact polynomial.",
    "created_at": "2019-04-10T05:24:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520498",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:43'></a>
Replying to [mantepse](#comment%3A38):
> One question with respect to equality.  It seems to me that your implementation of `__eq__` is quite brittle.  It is clear that one cannot have proper equality, so it should be clearly stated what it can do and what it can't.


The implementation gives an answer if possible without computing coefficients indefinitely. Otherwise raise an exception.

I added a short explanation to the method. 

> Apart from that, in the case of truncation, one could make it exact easily.


Truncation still gives a lazy series. I added `polynomial` method to convert to an exact polynomial.



---

archive/issue_comments_520499.json:
```json
{
    "body": "<a id='comment:44'></a>\nReplying to [mantepse](#comment%3A37):\n> I find this quite wonderful!  It would be great if we could replace `LazyPowerSeries` with this.  One feature of `LazyPowerSeries` was that it allows recursive definitions \"guessing\" the correct initialisations, as for example in\n> \n> ```\n>             sage: L = LazyPowerSeriesRing(QQ)\n>             sage: one = L(1)\n>             sage: monom = L.gen()\n>             sage: s = L()\n>             sage: s._name = 's'\n>             sage: s.define(one+monom*s*s)\n>             sage: [s.coefficient(i) for i in range(6)]\n>             [1, 1, 2, 5, 14, 42]\n> ```\n> Although this is based on the original code by Ralf Hemmecke and myself, which in turn is based on code of Nicolas Thiery (I think), I am not sure anymore whether it is so important.  Of course, if we could have something similar, even better.\n\n\nRecursive definition is possible as a result of being lazy and being power series. Now you can do the same in the following way:\n\n```\nsage: from sage.rings.lazy_laurent_series_ring import LazyLaurentSeriesRing\nsage: L = LazyLaurentSeriesRing(ZZ, 'z')\nsage: \nsage: z = L.gen()\nsage: def f(s,n):\n....:     return (1 + z*s^2).coefficient(n)\n....: \nsage: L.series(f, valuation=0)\n1 + z + 2*z^2 + 5*z^3 + 14*z^4 + 42*z^5 + 132*z^6 + ...\n```",
    "created_at": "2019-04-10T05:31:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520499",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:44'></a>
Replying to [mantepse](#comment%3A37):
> I find this quite wonderful!  It would be great if we could replace `LazyPowerSeries` with this.  One feature of `LazyPowerSeries` was that it allows recursive definitions "guessing" the correct initialisations, as for example in
> 
> ```
>             sage: L = LazyPowerSeriesRing(QQ)
>             sage: one = L(1)
>             sage: monom = L.gen()
>             sage: s = L()
>             sage: s._name = 's'
>             sage: s.define(one+monom*s*s)
>             sage: [s.coefficient(i) for i in range(6)]
>             [1, 1, 2, 5, 14, 42]
> ```
> Although this is based on the original code by Ralf Hemmecke and myself, which in turn is based on code of Nicolas Thiery (I think), I am not sure anymore whether it is so important.  Of course, if we could have something similar, even better.


Recursive definition is possible as a result of being lazy and being power series. Now you can do the same in the following way:

```
sage: from sage.rings.lazy_laurent_series_ring import LazyLaurentSeriesRing
sage: L = LazyLaurentSeriesRing(ZZ, 'z')
sage: 
sage: z = L.gen()
sage: def f(s,n):
....:     return (1 + z*s^2).coefficient(n)
....: 
sage: L.series(f, valuation=0)
1 + z + 2*z^2 + 5*z^3 + 14*z^4 + 42*z^5 + 132*z^6 + ...
```



---

archive/issue_comments_520500.json:
```json
{
    "body": "<a id='comment:45'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|\n|[8f8adf2](https://github.com/sagemath/sagetrac-mirror/commit/8f8adf2ef2c0d209a63111e46354d8ead0e29cb0)|`Add __getitem__ special method to series`|",
    "created_at": "2019-04-10T05:38:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520500",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:45'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                          |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|
|[8f8adf2](https://github.com/sagemath/sagetrac-mirror/commit/8f8adf2ef2c0d209a63111e46354d8ead0e29cb0)|`Add __getitem__ special method to series`|



---

archive/issue_comments_520501.json:
```json
{
    "body": "Changing commit from \"e028ed60fbfb7457a1302bc8ecef69300311a2da\" to \"8f8adf2ef2c0d209a63111e46354d8ead0e29cb0\"",
    "created_at": "2019-04-10T05:38:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520501",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e028ed60fbfb7457a1302bc8ecef69300311a2da" to "8f8adf2ef2c0d209a63111e46354d8ead0e29cb0"



---

archive/issue_comments_520502.json:
```json
{
    "body": "<a id='comment:46'></a>\n> > Apart from that, in the case of truncation, one could make it exact easily.\n\n> \n> Truncation still gives a lazy series. I added `polynomial` method to convert to an exact polynomial.\n\n\nexcellent point! I missed that!",
    "created_at": "2019-04-10T05:56:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520502",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:46'></a>
> > Apart from that, in the case of truncation, one could make it exact easily.

> 
> Truncation still gives a lazy series. I added `polynomial` method to convert to an exact polynomial.


excellent point! I missed that!



---

archive/issue_comments_520503.json:
```json
{
    "body": "<a id='comment:47'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|\n|[b3a6792](https://github.com/sagemath/sagetrac-mirror/commit/b3a679216402c0db7d046c771012500ce1fd7595)|`Add division operator`|",
    "created_at": "2019-04-10T07:01:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520503",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:47'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                       |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|
|[b3a6792](https://github.com/sagemath/sagetrac-mirror/commit/b3a679216402c0db7d046c771012500ce1fd7595)|`Add division operator`|



---

archive/issue_comments_520504.json:
```json
{
    "body": "Changing commit from \"8f8adf2ef2c0d209a63111e46354d8ead0e29cb0\" to \"b3a679216402c0db7d046c771012500ce1fd7595\"",
    "created_at": "2019-04-10T07:01:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520504",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "8f8adf2ef2c0d209a63111e46354d8ead0e29cb0" to "b3a679216402c0db7d046c771012500ce1fd7595"



---

archive/issue_comments_520505.json:
```json
{
    "body": "<a id='comment:48'></a>\n> > Are you sure you want `_div_` to be two separate operations and not one combined one? I feel like the latter would be faster (at least since it is implemented at the Python level).\n\n> \n> I don't feel so. I don't see a way to implement series division such that 1 + 1 < 2 with a significant margin.\n\n\nYou are right. I was wrong!",
    "created_at": "2019-04-10T07:02:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520505",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:48'></a>
> > Are you sure you want `_div_` to be two separate operations and not one combined one? I feel like the latter would be faster (at least since it is implemented at the Python level).

> 
> I don't feel so. I don't see a way to implement series division such that 1 + 1 < 2 with a significant margin.


You are right. I was wrong!



---

archive/issue_comments_520506.json:
```json
{
    "body": "Changing commit from \"b3a679216402c0db7d046c771012500ce1fd7595\" to \"575022ce0595e70d4c285651061b2286c9e3cbf7\"",
    "created_at": "2019-04-10T07:04:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520506",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b3a679216402c0db7d046c771012500ce1fd7595" to "575022ce0595e70d4c285651061b2286c9e3cbf7"



---

archive/issue_comments_520507.json:
```json
{
    "body": "<a id='comment:49'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------|\n|[575022c](https://github.com/sagemath/sagetrac-mirror/commit/575022ce0595e70d4c285651061b2286c9e3cbf7)|`Typos`|",
    "created_at": "2019-04-10T07:04:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520507",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:49'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |       |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------|
|[575022c](https://github.com/sagemath/sagetrac-mirror/commit/575022ce0595e70d4c285651061b2286c9e3cbf7)|`Typos`|



---

archive/issue_comments_520508.json:
```json
{
    "body": "<a id='comment:50'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[c55925f](https://github.com/sagemath/sagetrac-mirror/commit/c55925faeae43fc25fb76542b13e59233f4403af)|`Added a recursive definition example`|",
    "created_at": "2019-04-10T07:13:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520508",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:50'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
|[c55925f](https://github.com/sagemath/sagetrac-mirror/commit/c55925faeae43fc25fb76542b13e59233f4403af)|`Added a recursive definition example`|



---

archive/issue_comments_520509.json:
```json
{
    "body": "Changing commit from \"575022ce0595e70d4c285651061b2286c9e3cbf7\" to \"c55925faeae43fc25fb76542b13e59233f4403af\"",
    "created_at": "2019-04-10T07:13:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520509",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "575022ce0595e70d4c285651061b2286c9e3cbf7" to "c55925faeae43fc25fb76542b13e59233f4403af"



---

archive/issue_comments_520510.json:
```json
{
    "body": "<a id='comment:51'></a>\nAre composition and reversion planned in a later ticket?\n\nI am really looking forward to this!  I hope very much we can rebase the species code on it.  Should `LazyPowerSeriesRing` be a subclass?",
    "created_at": "2019-04-11T05:46:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520510",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:51'></a>
Are composition and reversion planned in a later ticket?

I am really looking forward to this!  I hope very much we can rebase the species code on it.  Should `LazyPowerSeriesRing` be a subclass?



---

archive/issue_comments_520511.json:
```json
{
    "body": "<a id='comment:52'></a>\nReplying to [mantepse](#comment%3A51):\n> Are composition and reversion planned in a later ticket?\n\n\nNot by me. Anyone is invited to add them in a later ticket.\n\n> I hope very much we can rebase the species code on it.  Should `LazyPowerSeriesRing` be a subclass?\n\n\nYes, in a separate file alongside with lazy Laurent series.  It would be great. I don't have a plan to do it in any short time, simply because I don't need it now.",
    "created_at": "2019-04-11T07:33:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520511",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:52'></a>
Replying to [mantepse](#comment%3A51):
> Are composition and reversion planned in a later ticket?


Not by me. Anyone is invited to add them in a later ticket.

> I hope very much we can rebase the species code on it.  Should `LazyPowerSeriesRing` be a subclass?


Yes, in a separate file alongside with lazy Laurent series.  It would be great. I don't have a plan to do it in any short time, simply because I don't need it now.



---

archive/issue_comments_520512.json:
```json
{
    "body": "<a id='comment:53'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|\n|[410ca38](https://github.com/sagemath/sagetrac-mirror/commit/410ca3806500b2518485b74d0daaab1931e49ec8)|`Add prec and approximate_series method`|",
    "created_at": "2019-04-11T09:40:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520512",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:53'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|
|[410ca38](https://github.com/sagemath/sagetrac-mirror/commit/410ca3806500b2518485b74d0daaab1931e49ec8)|`Add prec and approximate_series method`|



---

archive/issue_comments_520513.json:
```json
{
    "body": "Changing commit from \"c55925faeae43fc25fb76542b13e59233f4403af\" to \"410ca3806500b2518485b74d0daaab1931e49ec8\"",
    "created_at": "2019-04-11T09:40:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520513",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c55925faeae43fc25fb76542b13e59233f4403af" to "410ca3806500b2518485b74d0daaab1931e49ec8"



---

archive/issue_comments_520514.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2019-04-13T09:18:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520514",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_520515.json:
```json
{
    "body": "<a id='comment:54'></a>\nLast little thing:\n\n`R(0)` -> `R.zero()` (as it is cached and `R` is always a `LazyLaurentSeriesRing`).\n\nOnce done you can set a positive review on my behalf.",
    "created_at": "2019-04-13T09:18:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520515",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:54'></a>
Last little thing:

`R(0)` -> `R.zero()` (as it is cached and `R` is always a `LazyLaurentSeriesRing`).

Once done you can set a positive review on my behalf.



---

archive/issue_comments_520516.json:
```json
{
    "body": "Changing commit from \"410ca3806500b2518485b74d0daaab1931e49ec8\" to \"989f009a851c9dc91c8650d7e554138886951a3a\"",
    "created_at": "2019-04-13T11:26:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520516",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "410ca3806500b2518485b74d0daaab1931e49ec8" to "989f009a851c9dc91c8650d7e554138886951a3a"



---

archive/issue_comments_520517.json:
```json
{
    "body": "<a id='comment:55'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------|\n|[989f009](https://github.com/sagemath/sagetrac-mirror/commit/989f009a851c9dc91c8650d7e554138886951a3a)|`Fix R(0)`|",
    "created_at": "2019-04-13T11:26:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520517",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:55'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |          |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------|
|[989f009](https://github.com/sagemath/sagetrac-mirror/commit/989f009a851c9dc91c8650d7e554138886951a3a)|`Fix R(0)`|



---

archive/issue_comments_520518.json:
```json
{
    "body": "<a id='comment:56'></a>\nThank you, Travis!",
    "created_at": "2019-04-13T11:28:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520518",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:56'></a>
Thank you, Travis!



---

archive/issue_comments_520519.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-04-13T11:28:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520519",
    "user": "https://github.com/kwankyu"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_520520.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-04-15T17:47:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520520",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_084887.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-04-15T17:47:48Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27347#event-84887"
}
```



---

archive/issue_comments_520521.json:
```json
{
    "body": "Changing branch from \"u/klee/27347\" to \"989f009a851c9dc91c8650d7e554138886951a3a\"",
    "created_at": "2019-04-15T17:47:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520521",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/klee/27347" to "989f009a851c9dc91c8650d7e554138886951a3a"



---

archive/issue_comments_520522.json:
```json
{
    "body": "<a id='comment:58'></a>\nNice work! Follow-up ticket at #27694 for allowing syntactic sugar\n\n```\nsage: L.<x> = LazyLaurentSeriesRing(ZZ)\n```",
    "created_at": "2019-04-17T17:09:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520522",
    "user": "https://github.com/slel"
}
```

<a id='comment:58'></a>
Nice work! Follow-up ticket at #27694 for allowing syntactic sugar

```
sage: L.<x> = LazyLaurentSeriesRing(ZZ)
```



---

archive/issue_comments_520523.json:
```json
{
    "body": "Changing commit from \"989f009a851c9dc91c8650d7e554138886951a3a\" to \"\"",
    "created_at": "2019-04-17T17:09:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27347#issuecomment-520523",
    "user": "https://github.com/slel"
}
```

Changing commit from "989f009a851c9dc91c8650d7e554138886951a3a" to ""
