# Issue 27347: Lazy Laurent series

archive/issues_027110.json:
```json
{
    "assignees": [],
    "body": "Introduce lazy Laurent series to Sage.\n\nA lazy Laurent series computes coefficients only when demanded or needed. In a sense, lazy Laurent series are Laurent series of infinite precision. \n\nA generating function example from the code:\n\n```\nGenerating functions are laurent series over the integer ring::\n\n    sage: from sage.rings.lazy_laurent_series_ring import LazyLaurentSeriesRing\n    sage: L = LazyLaurentSeriesRing(ZZ, 'z')\n\nThis defines the generating function of Fibonacci sequence::\n\n    sage: def coeff(s, i):\n    ....:     if i in [0, 1]:\n    ....:         return 1\n    ....:     else:\n    ....:         return s.coefficient(i - 1) + s.coefficient(i - 2)\n    ....:\n    sage: f = L.series(coeff, valuation=0); f\n    1 + z + 2*z^2 + 3*z^3 + 5*z^4 + 8*z^5 + 13*z^6 + ...\n\nThe 100th element of Fibonacci sequence can be obtained from the generating\nfunction::\n\n    sage: f.coefficient(100)\n    573147844013817084101 \n```\n\nLazy Laurent series is of course useful for other things. This will be used to implement infinite precision Laurent series expansion of algebraic functions in function fields, as a sequel to #27418.\n\nBranch: **[989f009](https://github.com/sagemath/sagetrac-mirror/commit/989f009a851c9dc91c8650d7e554138886951a3a)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Kwankyu Lee**\n\nComponent: **algebra**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/27347_\n\n",
    "closed_at": "2019-04-15T17:47:48Z",
    "created_at": "2019-02-24T22:11:36Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20algebra",
        "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Lazy Laurent series",
    "type": "issue",
    "updated_at": "2019-04-17T17:09:22Z",
    "url": "https://github.com/sagemath/sage/issues/27347",
    "user": "https://github.com/kwankyu"
}
```
Introduce lazy Laurent series to Sage.

A lazy Laurent series computes coefficients only when demanded or needed. In a sense, lazy Laurent series are Laurent series of infinite precision. 

A generating function example from the code:

```
Generating functions are laurent series over the integer ring::

    sage: from sage.rings.lazy_laurent_series_ring import LazyLaurentSeriesRing
    sage: L = LazyLaurentSeriesRing(ZZ, 'z')

This defines the generating function of Fibonacci sequence::

    sage: def coeff(s, i):
    ....:     if i in [0, 1]:
    ....:         return 1
    ....:     else:
    ....:         return s.coefficient(i - 1) + s.coefficient(i - 2)
    ....:
    sage: f = L.series(coeff, valuation=0); f
    1 + z + 2*z^2 + 3*z^3 + 5*z^4 + 8*z^5 + 13*z^6 + ...

The 100th element of Fibonacci sequence can be obtained from the generating
function::

    sage: f.coefficient(100)
    573147844013817084101 
```

Lazy Laurent series is of course useful for other things. This will be used to implement infinite precision Laurent series expansion of algebraic functions in function fields, as a sequel to #27418.

Branch: **[989f009](https://github.com/sagemath/sagetrac-mirror/commit/989f009a851c9dc91c8650d7e554138886951a3a)**

Reviewer: **Travis Scrimshaw**

Author: **Kwankyu Lee**

Component: **algebra**

_Issue created by migration from https://trac.sagemath.org/ticket/27347_





---

archive/issue_events_375670.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2019-02-24T22:11:36Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27347#event-375670"
}
```



---

archive/issue_events_375671.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2019-02-24T22:11:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebra",
    "label_color": "0000ff",
    "label_name": "c: algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27347#event-375671"
}
```



---

archive/issue_events_375672.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2019-02-24T22:11:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27347#event-375672"
}
```



---

archive/issue_events_375673.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2019-02-24T22:11:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27347#event-375673"
}
```



---

archive/issue_comments_422890.json:
```json
{
    "body": "Branch: **[u/klee/27347](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/27347)**",
    "created_at": "2019-02-24T22:12:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422890",
    "user": "https://github.com/kwankyu"
}
```

Branch: **[u/klee/27347](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/27347)**



---

archive/issue_comments_422891.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d24a347b3f5bd6273bf678958c94d18b273b28f\">5d24a34</a></td><td><code>Introduce lazy laurent series</code></td></tr></table>\n",
    "created_at": "2019-02-24T22:14:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422891",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d24a347b3f5bd6273bf678958c94d18b273b28f">5d24a34</a></td><td><code>Introduce lazy laurent series</code></td></tr></table>




---

archive/issue_comments_422892.json:
```json
{
    "body": "Commit: **[5d24a34](https://github.com/sagemath/sagetrac-mirror/commit/5d24a347b3f5bd6273bf678958c94d18b273b28f)**",
    "created_at": "2019-02-24T22:14:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422892",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[5d24a34](https://github.com/sagemath/sagetrac-mirror/commit/5d24a347b3f5bd6273bf678958c94d18b273b28f)**



---

archive/issue_comments_422893.json:
```json
{
    "body": "Author: **Kwankyu Lee**",
    "created_at": "2019-02-24T22:16:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422893",
    "user": "https://github.com/kwankyu"
}
```

Author: **Kwankyu Lee**



---

archive/issue_events_375674.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2019-02-24T22:16:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27347#event-375674"
}
```



---

archive/issue_comments_422894.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ace42826cd8782e1aee3c596707b33f5102291d6\">ace4282</a></td><td><code>pyflakes fixes</code></td></tr></table>\n",
    "created_at": "2019-02-25T06:32:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422894",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ace42826cd8782e1aee3c596707b33f5102291d6">ace4282</a></td><td><code>pyflakes fixes</code></td></tr></table>




---

archive/issue_comments_422895.json:
```json
{
    "body": "Changed commit from **[5d24a34](https://github.com/sagemath/sagetrac-mirror/commit/5d24a347b3f5bd6273bf678958c94d18b273b28f)** to **[ace4282](https://github.com/sagemath/sagetrac-mirror/commit/ace42826cd8782e1aee3c596707b33f5102291d6)**",
    "created_at": "2019-02-25T06:32:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422895",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5d24a34](https://github.com/sagemath/sagetrac-mirror/commit/5d24a347b3f5bd6273bf678958c94d18b273b28f)** to **[ace4282](https://github.com/sagemath/sagetrac-mirror/commit/ace42826cd8782e1aee3c596707b33f5102291d6)**



---

archive/issue_comments_422896.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/389798e1d7057545c7914f1456e32f9c47aff5be\">389798e</a></td><td><code>Add series method</code></td></tr></table>\n",
    "created_at": "2019-02-25T08:34:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422896",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/389798e1d7057545c7914f1456e32f9c47aff5be">389798e</a></td><td><code>Add series method</code></td></tr></table>




---

archive/issue_comments_422897.json:
```json
{
    "body": "Changed commit from **[ace4282](https://github.com/sagemath/sagetrac-mirror/commit/ace42826cd8782e1aee3c596707b33f5102291d6)** to **[389798e](https://github.com/sagemath/sagetrac-mirror/commit/389798e1d7057545c7914f1456e32f9c47aff5be)**",
    "created_at": "2019-02-25T08:34:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422897",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ace4282](https://github.com/sagemath/sagetrac-mirror/commit/ace42826cd8782e1aee3c596707b33f5102291d6)** to **[389798e](https://github.com/sagemath/sagetrac-mirror/commit/389798e1d7057545c7914f1456e32f9c47aff5be)**



---

archive/issue_comments_422898.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/43ba7859f92d707e2f6f3cf93aafbc4f7f4b453a\">43ba785</a></td><td><code>Small fixes on docstrings</code></td></tr></table>\n",
    "created_at": "2019-02-25T19:15:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422898",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/43ba7859f92d707e2f6f3cf93aafbc4f7f4b453a">43ba785</a></td><td><code>Small fixes on docstrings</code></td></tr></table>




---

archive/issue_comments_422899.json:
```json
{
    "body": "Changed commit from **[389798e](https://github.com/sagemath/sagetrac-mirror/commit/389798e1d7057545c7914f1456e32f9c47aff5be)** to **[43ba785](https://github.com/sagemath/sagetrac-mirror/commit/43ba7859f92d707e2f6f3cf93aafbc4f7f4b453a)**",
    "created_at": "2019-02-25T19:15:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422899",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[389798e](https://github.com/sagemath/sagetrac-mirror/commit/389798e1d7057545c7914f1456e32f9c47aff5be)** to **[43ba785](https://github.com/sagemath/sagetrac-mirror/commit/43ba7859f92d707e2f6f3cf93aafbc4f7f4b453a)**



---

archive/issue_comments_422900.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,31 @@\n Introduce lazy laurent series to Sage.\n+\n+A lazy laurent series computes coefficients only when demanded or needed. In a sense, lazy laurent series are laurent series of infinite precision. \n+\n+A generating function example from the code:\n+\n+```\n+Generating functions are laurent series over the integer ring::\n+\n+    sage: from sage.rings.lazy_laurent_series_ring import LazyLaurentSeriesRing\n+    sage: L = LazyLaurentSeriesRing(ZZ, 'z')\n+\n+This defines the generating function of Fibonacci sequence::\n+\n+    sage: def coeff(s, i):\n+    ....:     if i in [0, 1]:\n+    ....:         return 1\n+    ....:     else:\n+    ....:         return s.coefficient(i - 1) + s.coefficient(i - 2)\n+    ....:\n+    sage: f = L.series(coeff, valuation=0); f\n+    1 + z + 2*z^2 + 3*z^3 + 5*z^4 + 8*z^5 + 13*z^6 + ...\n+\n+The 100th element of Fibonacci sequence can be obtained from the generating\n+function::\n+\n+    sage: f.coefficient(100)\n+    573147844013817084101 \n+```\n+\n+Lazy laurent series is of course useful for other things. This will be used to implement infinite precision laurent series expansion of algebraic functions in function fields, as a sequel to #27418.\n``````\n",
    "created_at": "2019-03-04T09:10:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422900",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,31 @@
 Introduce lazy laurent series to Sage.
+
+A lazy laurent series computes coefficients only when demanded or needed. In a sense, lazy laurent series are laurent series of infinite precision. 
+
+A generating function example from the code:
+
+```
+Generating functions are laurent series over the integer ring::
+
+    sage: from sage.rings.lazy_laurent_series_ring import LazyLaurentSeriesRing
+    sage: L = LazyLaurentSeriesRing(ZZ, 'z')
+
+This defines the generating function of Fibonacci sequence::
+
+    sage: def coeff(s, i):
+    ....:     if i in [0, 1]:
+    ....:         return 1
+    ....:     else:
+    ....:         return s.coefficient(i - 1) + s.coefficient(i - 2)
+    ....:
+    sage: f = L.series(coeff, valuation=0); f
+    1 + z + 2*z^2 + 3*z^3 + 5*z^4 + 8*z^5 + 13*z^6 + ...
+
+The 100th element of Fibonacci sequence can be obtained from the generating
+function::
+
+    sage: f.coefficient(100)
+    573147844013817084101 
+```
+
+Lazy laurent series is of course useful for other things. This will be used to implement infinite precision laurent series expansion of algebraic functions in function fields, as a sequel to #27418.
``````




---

archive/issue_comments_422901.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nTicket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)",
    "created_at": "2019-03-25T10:56:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422901",
    "user": "https://github.com/embray"
}
```

<div id="comment:8" align="right">comment:8</div>

Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)



---

archive/issue_events_375675.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27347#event-375675"
}
```



---

archive/issue_events_375676.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27347#event-375676"
}
```



---

archive/issue_comments_422902.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e7ff9993551778c67c6a6168f0e26c5943f14925\">e7ff999</a></td><td><code>Add lazy laurent series</code></td></tr></table>\n",
    "created_at": "2019-04-01T00:49:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422902",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e7ff9993551778c67c6a6168f0e26c5943f14925">e7ff999</a></td><td><code>Add lazy laurent series</code></td></tr></table>




---

archive/issue_comments_422903.json:
```json
{
    "body": "Changed commit from **[43ba785](https://github.com/sagemath/sagetrac-mirror/commit/43ba7859f92d707e2f6f3cf93aafbc4f7f4b453a)** to **[e7ff999](https://github.com/sagemath/sagetrac-mirror/commit/e7ff9993551778c67c6a6168f0e26c5943f14925)**",
    "created_at": "2019-04-01T00:49:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422903",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[43ba785](https://github.com/sagemath/sagetrac-mirror/commit/43ba7859f92d707e2f6f3cf93aafbc4f7f4b453a)** to **[e7ff999](https://github.com/sagemath/sagetrac-mirror/commit/e7ff9993551778c67c6a6168f0e26c5943f14925)**



---

archive/issue_comments_422904.json:
```json
{
    "body": "Changed commit from **[e7ff999](https://github.com/sagemath/sagetrac-mirror/commit/e7ff9993551778c67c6a6168f0e26c5943f14925)** to **[15e1b1c](https://github.com/sagemath/sagetrac-mirror/commit/15e1b1c671d61ef279f1c32a715ddd56a2fa7997)**",
    "created_at": "2019-04-04T10:57:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422904",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e7ff999](https://github.com/sagemath/sagetrac-mirror/commit/e7ff9993551778c67c6a6168f0e26c5943f14925)** to **[15e1b1c](https://github.com/sagemath/sagetrac-mirror/commit/15e1b1c671d61ef279f1c32a715ddd56a2fa7997)**



---

archive/issue_comments_422905.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/15e1b1c671d61ef279f1c32a715ddd56a2fa7997\">15e1b1c</a></td><td><code>Add lazy laurent series</code></td></tr></table>\n",
    "created_at": "2019-04-04T10:57:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422905",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/15e1b1c671d61ef279f1c32a715ddd56a2fa7997">15e1b1c</a></td><td><code>Add lazy laurent series</code></td></tr></table>




---

archive/issue_comments_422906.json:
```json
{
    "body": "Changed commit from **[15e1b1c](https://github.com/sagemath/sagetrac-mirror/commit/15e1b1c671d61ef279f1c32a715ddd56a2fa7997)** to **[f70fca8](https://github.com/sagemath/sagetrac-mirror/commit/f70fca8e3303c51b98c3f9311da277fd954b1ebe)**",
    "created_at": "2019-04-04T20:05:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422906",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[15e1b1c](https://github.com/sagemath/sagetrac-mirror/commit/15e1b1c671d61ef279f1c32a715ddd56a2fa7997)** to **[f70fca8](https://github.com/sagemath/sagetrac-mirror/commit/f70fca8e3303c51b98c3f9311da277fd954b1ebe)**



---

archive/issue_comments_422907.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f70fca8e3303c51b98c3f9311da277fd954b1ebe\">f70fca8</a></td><td><code>Add __bool__</code></td></tr></table>\n",
    "created_at": "2019-04-04T20:05:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422907",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f70fca8e3303c51b98c3f9311da277fd954b1ebe">f70fca8</a></td><td><code>Add __bool__</code></td></tr></table>




---

archive/issue_comments_422908.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nSome comments:\n\nIs there a reason why you do not use the `LazyPowerSeriesRing` for the main element (with a non-zero constant term until the whole series is zero) and then just store the valuation? This is how things are done for the Laurent polynomials. That way there is less duplication of code and improvements to one improve both.\n\nWhy do you override `__eq__` and not use the one provided by `Element` and the coercion framework? It is more flexible and allows you do implement comparisons (if you want) all in one function of `_richcmp_`.\n\nDo not have bare `except:` statements (see `coefficient`).\n\nDoes the elements pickle? I am a little worried that the addition of two power series will not pickling because of the little helper `add` function. You should add a `loads(dumps(foo))` test if it does work.\n\nTypo `laurent` -> `Laurent` (it is proper noun).\n\n`if len(s) == 0:` -> `if not s:`",
    "created_at": "2019-04-05T09:22:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422908",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:12" align="right">comment:12</div>

Some comments:

Is there a reason why you do not use the `LazyPowerSeriesRing` for the main element (with a non-zero constant term until the whole series is zero) and then just store the valuation? This is how things are done for the Laurent polynomials. That way there is less duplication of code and improvements to one improve both.

Why do you override `__eq__` and not use the one provided by `Element` and the coercion framework? It is more flexible and allows you do implement comparisons (if you want) all in one function of `_richcmp_`.

Do not have bare `except:` statements (see `coefficient`).

Does the elements pickle? I am a little worried that the addition of two power series will not pickling because of the little helper `add` function. You should add a `loads(dumps(foo))` test if it does work.

Typo `laurent` -> `Laurent` (it is proper noun).

`if len(s) == 0:` -> `if not s:`



---

archive/issue_events_375677.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2019-04-05T23:01:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27347#event-375677"
}
```



---

archive/issue_events_375678.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2019-04-05T23:01:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27347#event-375678"
}
```



---

archive/issue_comments_422909.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@tscrim](#comment:12):\n> Is there a reason why you do not use the `LazyPowerSeriesRing` for the main element (with a non-zero constant term until the whole series is zero) and then just store the valuation? This is how things are done for the Laurent polynomials. That way there is less duplication of code and improvements to one improve both.\n\nI looked into the `LazyPowerSeriesRing` many years ago:\n\nhttps://groups.google.com/forum/#!searchin/sage-support/lazy$20power$20series%7Csort:date/sage-support/JZwDWKq3DtM/tyfxxdxPyXYJ\n\nI think I didn't like it in several ways :-) Still I don't understand this behavior:\n\n```\nsage: L.<t>=LazyPowerSeriesRing(QQ)\nsage: s=L([0,0,1,2])\nsage: s.coefficient(0)\n0\nsage: s.coefficient(1)\n0\nsage: s.coefficient(2)\n1\nsage: s.coefficient(3)\n2\nsage: s\nt^2 + 2*t^3 + O(x^4)\nsage: s.get_order()\n1\nsage: s.get_aorder()\n1\n```\n\nThe reason was that it was easy to implement lazy laurent series with an interface and behaviors that I prefer, while I could not understand well enough `LazyPowerSeriesRing`... \n\nI would reconsider basing lazy laurent series on `LazyPowerSeriesRing`, if you help me understand the strange behaviour above.",
    "created_at": "2019-04-05T23:01:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422909",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@tscrim](#comment:12):
> Is there a reason why you do not use the `LazyPowerSeriesRing` for the main element (with a non-zero constant term until the whole series is zero) and then just store the valuation? This is how things are done for the Laurent polynomials. That way there is less duplication of code and improvements to one improve both.

I looked into the `LazyPowerSeriesRing` many years ago:

https://groups.google.com/forum/#!searchin/sage-support/lazy$20power$20series%7Csort:date/sage-support/JZwDWKq3DtM/tyfxxdxPyXYJ

I think I didn't like it in several ways :-) Still I don't understand this behavior:

```
sage: L.<t>=LazyPowerSeriesRing(QQ)
sage: s=L([0,0,1,2])
sage: s.coefficient(0)
0
sage: s.coefficient(1)
0
sage: s.coefficient(2)
1
sage: s.coefficient(3)
2
sage: s
t^2 + 2*t^3 + O(x^4)
sage: s.get_order()
1
sage: s.get_aorder()
1
```

The reason was that it was easy to implement lazy laurent series with an interface and behaviors that I prefer, while I could not understand well enough `LazyPowerSeriesRing`... 

I would reconsider basing lazy laurent series on `LazyPowerSeriesRing`, if you help me understand the strange behaviour above.



---

archive/issue_comments_422910.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nSo here is what `refine_aorder` does. It first checks if `self.order` has been set, if it has, do not do anything. Then it goes through all of the `n` computed entries **if `self.aorder` is 0** and we have already computed at least one entry. Then find the first nonzero entry. If we have found one, set the order.\n\nThe problem is the bold part. After the first iteration when `n = 1`, the `self.aorder` gets set to `1`, then on the second run through, that block does not get run, which then means `self.aorder < n` and we set the order to be `1`.\n\n```\nsage: s.coefficient(1)\n0\nsage: s.aorder\n1\nsage: s.order\nUnknown series order\nsage: s.coefficient(2)\n1\nsage: s.aorder\n1\nsage: s.order\n1\n```\nIMO, this is a bug.",
    "created_at": "2019-04-05T23:44:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422910",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:14" align="right">comment:14</div>

So here is what `refine_aorder` does. It first checks if `self.order` has been set, if it has, do not do anything. Then it goes through all of the `n` computed entries **if `self.aorder` is 0** and we have already computed at least one entry. Then find the first nonzero entry. If we have found one, set the order.

The problem is the bold part. After the first iteration when `n = 1`, the `self.aorder` gets set to `1`, then on the second run through, that block does not get run, which then means `self.aorder < n` and we set the order to be `1`.

```
sage: s.coefficient(1)
0
sage: s.aorder
1
sage: s.order
Unknown series order
sage: s.coefficient(2)
1
sage: s.aorder
1
sage: s.order
1
```
IMO, this is a bug.



---

archive/issue_comments_422911.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2f2c59c8d7e1cf7c1cf0b6141d145b5624f0f0c3\">2f2c59c</a></td><td><code>Capitalize laurent as it is a proper noun</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/146205a05162a9b96d96f3f3b2130eddf7e70abe\">146205a</a></td><td><code>No bare except clause</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fb4d65d9dfdb53a735ca33e7800ef79e4ea8ece4\">fb4d65d</a></td><td><code>Use `_richcmp_` instead of primitive __eq__</code></td></tr></table>\n",
    "created_at": "2019-04-07T08:03:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422911",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2f2c59c8d7e1cf7c1cf0b6141d145b5624f0f0c3">2f2c59c</a></td><td><code>Capitalize laurent as it is a proper noun</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/146205a05162a9b96d96f3f3b2130eddf7e70abe">146205a</a></td><td><code>No bare except clause</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fb4d65d9dfdb53a735ca33e7800ef79e4ea8ece4">fb4d65d</a></td><td><code>Use `_richcmp_` instead of primitive __eq__</code></td></tr></table>




---

archive/issue_comments_422912.json:
```json
{
    "body": "Changed commit from **[f70fca8](https://github.com/sagemath/sagetrac-mirror/commit/f70fca8e3303c51b98c3f9311da277fd954b1ebe)** to **[fb4d65d](https://github.com/sagemath/sagetrac-mirror/commit/fb4d65d9dfdb53a735ca33e7800ef79e4ea8ece4)**",
    "created_at": "2019-04-07T08:03:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422912",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f70fca8](https://github.com/sagemath/sagetrac-mirror/commit/f70fca8e3303c51b98c3f9311da277fd954b1ebe)** to **[fb4d65d](https://github.com/sagemath/sagetrac-mirror/commit/fb4d65d9dfdb53a735ca33e7800ef79e4ea8ece4)**



---

archive/issue_comments_422913.json:
```json
{
    "body": "Changed commit from **[fb4d65d](https://github.com/sagemath/sagetrac-mirror/commit/fb4d65d9dfdb53a735ca33e7800ef79e4ea8ece4)** to **[41f3a42](https://github.com/sagemath/sagetrac-mirror/commit/41f3a4237cc0f574334a6e26e00f16d73d23972a)**",
    "created_at": "2019-04-07T08:48:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422913",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[fb4d65d](https://github.com/sagemath/sagetrac-mirror/commit/fb4d65d9dfdb53a735ca33e7800ef79e4ea8ece4)** to **[41f3a42](https://github.com/sagemath/sagetrac-mirror/commit/41f3a4237cc0f574334a6e26e00f16d73d23972a)**



---

archive/issue_comments_422914.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/41f3a4237cc0f574334a6e26e00f16d73d23972a\">41f3a42</a></td><td><code>Lazy Laurent series is not picklable</code></td></tr></table>\n",
    "created_at": "2019-04-07T08:48:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422914",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/41f3a4237cc0f574334a6e26e00f16d73d23972a">41f3a42</a></td><td><code>Lazy Laurent series is not picklable</code></td></tr></table>




---

archive/issue_comments_422915.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\n> Why do you override `__eq__` and not use the one provided by `Element` and the coercion framework? It is more flexible and allows you do implement comparisons (if you want) all in one function of `_richcmp_`.\n\nOk. Fixed.\n \n> Do not have bare `except:` statements (see `coefficient`).\n\nFixed.\n\n> Does the elements pickle? I am a little worried that the addition of two power series will not pickling because of the little helper `add` function. You should add a `loads(dumps(foo))` test if it does work.\n\nNo. Your worry is real; lazy Laurent series is not picklable in general. This seems an inherent nature of my implementation...\n\nI added a test to show this. \n\n> Typo `laurent` -> `Laurent` (it is proper noun).\n\nRight. Fixed.\n\n> `if len(s) == 0:` -> `if not s:`\n\nDone. \n  \n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/41f3a4237cc0f574334a6e26e00f16d73d23972a\">41f3a42</a></td><td><code>Lazy Laurent series is not picklable</code></td></tr></table>\n",
    "created_at": "2019-04-07T08:53:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422915",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:17" align="right">comment:17</div>

> Why do you override `__eq__` and not use the one provided by `Element` and the coercion framework? It is more flexible and allows you do implement comparisons (if you want) all in one function of `_richcmp_`.

Ok. Fixed.
 
> Do not have bare `except:` statements (see `coefficient`).

Fixed.

> Does the elements pickle? I am a little worried that the addition of two power series will not pickling because of the little helper `add` function. You should add a `loads(dumps(foo))` test if it does work.

No. Your worry is real; lazy Laurent series is not picklable in general. This seems an inherent nature of my implementation...

I added a test to show this. 

> Typo `laurent` -> `Laurent` (it is proper noun).

Right. Fixed.

> `if len(s) == 0:` -> `if not s:`

Done. 
  
---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/41f3a4237cc0f574334a6e26e00f16d73d23972a">41f3a42</a></td><td><code>Lazy Laurent series is not picklable</code></td></tr></table>




---

archive/issue_comments_422916.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@tscrim](#comment:12):\n> Some comments:\n> \n> Is there a reason why you do not use the `LazyPowerSeriesRing` for the main element (with a non-zero constant term until the whole series is zero) and then just store the valuation? This is how things are done for the Laurent polynomials. That way there is less duplication of code and improvements to one improve both.\n\nI thought about this. Now I think:\n\nLazy Laurent series is not just about Laurent series but also about how coefficients are computed lazily. A `LazyPowerSeriesRing` element gets its coefficients from a stream object, which essentially yields coefficients as required. On the other hand, lazy Laurent series `s` gets its coefficients from a python function that outputs n-th coefficient  for input `s` and `n`. This allows coefficients to be computed recursively. For example, it is very easy to define the Fibonacci series. \n\nSo it is impossible to base my lazy Laurent series code on `LazyPowerSeriesRing` without abandoning the essential feature of the implementation.\n\nFrankly, I would rather provide new lazy power series as a subclass of my lazy Laurent series. But this is of course highly biased opinion :-)\n\nYou may be reluctant to accept my implementation of lazy Laurent series into `sage.rings` as it then gets kind of standard status among different possible implementations of lazy Laurent series in Sage. Then I am willing to relocate it into `sage.rings.function_field`.",
    "created_at": "2019-04-07T09:40:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422916",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@tscrim](#comment:12):
> Some comments:
> 
> Is there a reason why you do not use the `LazyPowerSeriesRing` for the main element (with a non-zero constant term until the whole series is zero) and then just store the valuation? This is how things are done for the Laurent polynomials. That way there is less duplication of code and improvements to one improve both.

I thought about this. Now I think:

Lazy Laurent series is not just about Laurent series but also about how coefficients are computed lazily. A `LazyPowerSeriesRing` element gets its coefficients from a stream object, which essentially yields coefficients as required. On the other hand, lazy Laurent series `s` gets its coefficients from a python function that outputs n-th coefficient  for input `s` and `n`. This allows coefficients to be computed recursively. For example, it is very easy to define the Fibonacci series. 

So it is impossible to base my lazy Laurent series code on `LazyPowerSeriesRing` without abandoning the essential feature of the implementation.

Frankly, I would rather provide new lazy power series as a subclass of my lazy Laurent series. But this is of course highly biased opinion :-)

You may be reluctant to accept my implementation of lazy Laurent series into `sage.rings` as it then gets kind of standard status among different possible implementations of lazy Laurent series in Sage. Then I am willing to relocate it into `sage.rings.function_field`.



---

archive/issue_comments_422917.json:
```json
{
    "body": "Changed commit from **[41f3a42](https://github.com/sagemath/sagetrac-mirror/commit/41f3a4237cc0f574334a6e26e00f16d73d23972a)** to **[b09cd84](https://github.com/sagemath/sagetrac-mirror/commit/b09cd84220dc5878d03db5d1ee1d721388457b4e)**",
    "created_at": "2019-04-07T10:04:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422917",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[41f3a42](https://github.com/sagemath/sagetrac-mirror/commit/41f3a4237cc0f574334a6e26e00f16d73d23972a)** to **[b09cd84](https://github.com/sagemath/sagetrac-mirror/commit/b09cd84220dc5878d03db5d1ee1d721388457b4e)**



---

archive/issue_comments_422918.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b09cd84220dc5878d03db5d1ee1d721388457b4e\">b09cd84</a></td><td><code>Fix pickling doctest</code></td></tr></table>\n",
    "created_at": "2019-04-07T10:04:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422918",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b09cd84220dc5878d03db5d1ee1d721388457b4e">b09cd84</a></td><td><code>Fix pickling doctest</code></td></tr></table>




---

archive/issue_comments_422919.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@kwankyu](#comment:18):\n> Replying to [@tscrim](#comment:12):\n> > Some comments:\n> > \n> > Is there a reason why you do not use the `LazyPowerSeriesRing` for the main element (with a non-zero constant term until the whole series is zero) and then just store the valuation? This is how things are done for the Laurent polynomials. That way there is less duplication of code and improvements to one improve both.\n\n> \n> I thought about this. Now I think:\n> \n> Lazy Laurent series is not just about Laurent series but also about how coefficients are computed lazily. A `LazyPowerSeriesRing` element gets its coefficients from a stream object, which essentially yields coefficients as required. On the other hand, lazy Laurent series `s` gets its coefficients from a python function that outputs n-th coefficient  for input `s` and `n`. This allows coefficients to be computed recursively. For example, it is very easy to define the Fibonacci series. \n\nWell, I am fairly certain you could do this with an `RecursivelyEnumeratedSet` and a bit of know-how, but I agree that it is more complicated and less intuitive. I also agree that having general functions as input would probably be a good thing for `LazyPowerSeriesRing` to have, but I believe that was designed for more specific use for the `combinat/species` code.\n\nOne benefit I do see is that you do not need to explicitly know the valuation at creation-time. With my suggested implementation, it does need to be computed at element creation.\n\n> Frankly, I would rather provide new lazy power series as a subclass of my lazy Laurent series. But this is of course highly biased opinion :-)\n\nI don't have an opinion on this matter, but there are likely some considerations required to replace or extend the current implementation.\n\n> You may be reluctant to accept my implementation of lazy Laurent series into `sage.rings` as it then gets kind of standard status among different possible implementations of lazy Laurent series in Sage. Then I am willing to relocate it into `sage.rings.function_field`.\n\nThis I don't really care about. I just am a little unhappy with the large difference between the semantics (and syntax) between the two implementations. I guess that is a bit unavoidable here because this definitely is serving a purpose.\n\nHowever, I do think we should at least try to address the pickling issues. I believe this means you cannot use this in parallel implementations (IIRC this uses pickling to communicate between the processes). It also means you cannot (easily) store the data you compute. I think it is sufficient to separate out the `add` and similar operations into functions, but maybe they need to be small little helper class, such as\n\n```python\nclass LaurentSeriesOperator(object):\n    def __init__(self, lps, op):\n        self.lps = lps\n        self.op = op\n    def __call__(self, s, n):\n        return self.op(self.lps[n], s[n])\n    def __reduce__(self):\n        return (type(self), (self.lps, self.op), {})\n    def __eq__(self, other):\n        return (isinstance(other, LaurentSeriesOperator)\n                and self.lps == other.lps and self.op == other.op)\n```\nwhere `op` is, e.g., `operator.add`. This way you might be able to do something with comparisons in some semi-reasonable capacity too.",
    "created_at": "2019-04-07T13:58:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422919",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@kwankyu](#comment:18):
> Replying to [@tscrim](#comment:12):
> > Some comments:
> > 
> > Is there a reason why you do not use the `LazyPowerSeriesRing` for the main element (with a non-zero constant term until the whole series is zero) and then just store the valuation? This is how things are done for the Laurent polynomials. That way there is less duplication of code and improvements to one improve both.

> 
> I thought about this. Now I think:
> 
> Lazy Laurent series is not just about Laurent series but also about how coefficients are computed lazily. A `LazyPowerSeriesRing` element gets its coefficients from a stream object, which essentially yields coefficients as required. On the other hand, lazy Laurent series `s` gets its coefficients from a python function that outputs n-th coefficient  for input `s` and `n`. This allows coefficients to be computed recursively. For example, it is very easy to define the Fibonacci series. 

Well, I am fairly certain you could do this with an `RecursivelyEnumeratedSet` and a bit of know-how, but I agree that it is more complicated and less intuitive. I also agree that having general functions as input would probably be a good thing for `LazyPowerSeriesRing` to have, but I believe that was designed for more specific use for the `combinat/species` code.

One benefit I do see is that you do not need to explicitly know the valuation at creation-time. With my suggested implementation, it does need to be computed at element creation.

> Frankly, I would rather provide new lazy power series as a subclass of my lazy Laurent series. But this is of course highly biased opinion :-)

I don't have an opinion on this matter, but there are likely some considerations required to replace or extend the current implementation.

> You may be reluctant to accept my implementation of lazy Laurent series into `sage.rings` as it then gets kind of standard status among different possible implementations of lazy Laurent series in Sage. Then I am willing to relocate it into `sage.rings.function_field`.

This I don't really care about. I just am a little unhappy with the large difference between the semantics (and syntax) between the two implementations. I guess that is a bit unavoidable here because this definitely is serving a purpose.

However, I do think we should at least try to address the pickling issues. I believe this means you cannot use this in parallel implementations (IIRC this uses pickling to communicate between the processes). It also means you cannot (easily) store the data you compute. I think it is sufficient to separate out the `add` and similar operations into functions, but maybe they need to be small little helper class, such as

```python
class LaurentSeriesOperator(object):
    def __init__(self, lps, op):
        self.lps = lps
        self.op = op
    def __call__(self, s, n):
        return self.op(self.lps[n], s[n])
    def __reduce__(self):
        return (type(self), (self.lps, self.op), {})
    def __eq__(self, other):
        return (isinstance(other, LaurentSeriesOperator)
                and self.lps == other.lps and self.op == other.op)
```
where `op` is, e.g., `operator.add`. This way you might be able to do something with comparisons in some semi-reasonable capacity too.



---

archive/issue_comments_422920.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/89992b806e2d534343bb57c2a6cec1d0fecd9394\">89992b8</a></td><td><code>Reimplement arithmetic operations for series to be picklable</code></td></tr></table>\n",
    "created_at": "2019-04-08T05:45:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422920",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/89992b806e2d534343bb57c2a6cec1d0fecd9394">89992b8</a></td><td><code>Reimplement arithmetic operations for series to be picklable</code></td></tr></table>




---

archive/issue_comments_422921.json:
```json
{
    "body": "Changed commit from **[b09cd84](https://github.com/sagemath/sagetrac-mirror/commit/b09cd84220dc5878d03db5d1ee1d721388457b4e)** to **[89992b8](https://github.com/sagemath/sagetrac-mirror/commit/89992b806e2d534343bb57c2a6cec1d0fecd9394)**",
    "created_at": "2019-04-08T05:45:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422921",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b09cd84](https://github.com/sagemath/sagetrac-mirror/commit/b09cd84220dc5878d03db5d1ee1d721388457b4e)** to **[89992b8](https://github.com/sagemath/sagetrac-mirror/commit/89992b806e2d534343bb57c2a6cec1d0fecd9394)**



---

archive/issue_comments_422922.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@tscrim](#comment:20):\n> However, I do think we should at least try to address the pickling issues. I believe this means you cannot use this in parallel implementations (IIRC this uses pickling to communicate between the processes). It also means you cannot (easily) store the data you compute. I think it is sufficient to separate out the `add` and similar operations into functions, but maybe they need to be small little helper class, such as\n> \n> ```python\n> class LaurentSeriesOperator(object):\n>     def __init__(self, lps, op):\n>         self.lps = lps\n>         self.op = op\n>     def __call__(self, s, n):\n>         return self.op(self.lps[n], s[n])\n>     def __reduce__(self):\n>         return (type(self), (self.lps, self.op), {})\n>     def __eq__(self, other):\n>         return (isinstance(other, LaurentSeriesOperator)\n>                 and self.lps == other.lps and self.op == other.op)\n> ```\n> where `op` is, e.g., `operator.add`. This way you might be able to do something with comparisons in some semi-reasonable capacity too.\n\nUsing module-level classes to define operators is a good idea. Hinted by your template class, I could reimplement lazy Laurent series to be picklable. Great!",
    "created_at": "2019-04-08T05:51:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422922",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@tscrim](#comment:20):
> However, I do think we should at least try to address the pickling issues. I believe this means you cannot use this in parallel implementations (IIRC this uses pickling to communicate between the processes). It also means you cannot (easily) store the data you compute. I think it is sufficient to separate out the `add` and similar operations into functions, but maybe they need to be small little helper class, such as
> 
> ```python
> class LaurentSeriesOperator(object):
>     def __init__(self, lps, op):
>         self.lps = lps
>         self.op = op
>     def __call__(self, s, n):
>         return self.op(self.lps[n], s[n])
>     def __reduce__(self):
>         return (type(self), (self.lps, self.op), {})
>     def __eq__(self, other):
>         return (isinstance(other, LaurentSeriesOperator)
>                 and self.lps == other.lps and self.op == other.op)
> ```
> where `op` is, e.g., `operator.add`. This way you might be able to do something with comparisons in some semi-reasonable capacity too.

Using module-level classes to define operators is a good idea. Hinted by your template class, I could reimplement lazy Laurent series to be picklable. Great!



---

archive/issue_comments_422923.json:
```json
{
    "body": "Changed commit from **[89992b8](https://github.com/sagemath/sagetrac-mirror/commit/89992b806e2d534343bb57c2a6cec1d0fecd9394)** to **[989a3ac](https://github.com/sagemath/sagetrac-mirror/commit/989a3ac561bed35c9466a848e2a9ef441f94f560)**",
    "created_at": "2019-04-08T07:12:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422923",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[89992b8](https://github.com/sagemath/sagetrac-mirror/commit/89992b806e2d534343bb57c2a6cec1d0fecd9394)** to **[989a3ac](https://github.com/sagemath/sagetrac-mirror/commit/989a3ac561bed35c9466a848e2a9ef441f94f560)**



---

archive/issue_comments_422924.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/989a3ac561bed35c9466a848e2a9ef441f94f560\">989a3ac</a></td><td><code>Comparison now works in semi-reasonable capacity</code></td></tr></table>\n",
    "created_at": "2019-04-08T07:12:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422924",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/989a3ac561bed35c9466a848e2a9ef441f94f560">989a3ac</a></td><td><code>Comparison now works in semi-reasonable capacity</code></td></tr></table>




---

archive/issue_comments_422925.json:
```json
{
    "body": "Changed commit from **[989a3ac](https://github.com/sagemath/sagetrac-mirror/commit/989a3ac561bed35c9466a848e2a9ef441f94f560)** to **[e12fd5b](https://github.com/sagemath/sagetrac-mirror/commit/e12fd5b6511f90ccb9b5b7bc59cb61e30d75cc93)**",
    "created_at": "2019-04-08T07:24:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422925",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[989a3ac](https://github.com/sagemath/sagetrac-mirror/commit/989a3ac561bed35c9466a848e2a9ef441f94f560)** to **[e12fd5b](https://github.com/sagemath/sagetrac-mirror/commit/e12fd5b6511f90ccb9b5b7bc59cb61e30d75cc93)**



---

archive/issue_comments_422926.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ce4db37902834445be96110501cff1aba7e229f1\">ce4db37</a></td><td><code>Now pass _test_pickling</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e12fd5b6511f90ccb9b5b7bc59cb61e30d75cc93\">e12fd5b</a></td><td><code>Minor fixes in string formatting</code></td></tr></table>\n",
    "created_at": "2019-04-08T07:24:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422926",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ce4db37902834445be96110501cff1aba7e229f1">ce4db37</a></td><td><code>Now pass _test_pickling</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e12fd5b6511f90ccb9b5b7bc59cb61e30d75cc93">e12fd5b</a></td><td><code>Minor fixes in string formatting</code></td></tr></table>




---

archive/issue_comments_422927.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n-Introduce lazy laurent series to Sage.\n+Introduce lazy Laurent series to Sage.\n \n-A lazy laurent series computes coefficients only when demanded or needed. In a sense, lazy laurent series are laurent series of infinite precision. \n+A lazy Laurent series computes coefficients only when demanded or needed. In a sense, lazy Laurent series are Laurent series of infinite precision. \n \n A generating function example from the code:\n \n@@ -28,4 +28,4 @@\n     573147844013817084101 \n ```\n \n-Lazy laurent series is of course useful for other things. This will be used to implement infinite precision laurent series expansion of algebraic functions in function fields, as a sequel to #27418.\n+Lazy Laurent series is of course useful for other things. This will be used to implement infinite precision Laurent series expansion of algebraic functions in function fields, as a sequel to #27418.\n``````\n",
    "created_at": "2019-04-08T07:26:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422927",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
-Introduce lazy laurent series to Sage.
+Introduce lazy Laurent series to Sage.
 
-A lazy laurent series computes coefficients only when demanded or needed. In a sense, lazy laurent series are laurent series of infinite precision. 
+A lazy Laurent series computes coefficients only when demanded or needed. In a sense, lazy Laurent series are Laurent series of infinite precision. 
 
 A generating function example from the code:
 
@@ -28,4 +28,4 @@
     573147844013817084101 
 ```
 
-Lazy laurent series is of course useful for other things. This will be used to implement infinite precision laurent series expansion of algebraic functions in function fields, as a sequel to #27418.
+Lazy Laurent series is of course useful for other things. This will be used to implement infinite precision Laurent series expansion of algebraic functions in function fields, as a sequel to #27418.
``````




---

archive/issue_events_375679.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2019-04-08T07:30:44Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "title_is": "Lazy Laurent series",
    "title_was": "Lazy laurent series",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27347#event-375679"
}
```



---

archive/issue_comments_422928.json:
```json
{
    "body": "Changed commit from **[e12fd5b](https://github.com/sagemath/sagetrac-mirror/commit/e12fd5b6511f90ccb9b5b7bc59cb61e30d75cc93)** to **[5214a3a](https://github.com/sagemath/sagetrac-mirror/commit/5214a3a020c8e268c62957990f3ef5351641bd3f)**",
    "created_at": "2019-04-08T09:06:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422928",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e12fd5b](https://github.com/sagemath/sagetrac-mirror/commit/e12fd5b6511f90ccb9b5b7bc59cb61e30d75cc93)** to **[5214a3a](https://github.com/sagemath/sagetrac-mirror/commit/5214a3a020c8e268c62957990f3ef5351641bd3f)**



---

archive/issue_comments_422929.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/afeae09cabf033abca6595239b9968e1d916c921\">afeae09</a></td><td><code>Merge branch 'function-fields-infinity-precision' into function-fields</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bf815095d21e19af2ee7f2cda294eb09ef922f64\">bf81509</a></td><td><code>Merge branch 'lazy-power-series-trac27347' into function-fields</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e552770b1950c6e27eb1c679bba1104487165b20\">e552770</a></td><td><code>fix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c5fc73a72dc93835dba558796743ab630763943\">6c5fc73</a></td><td><code>Merge branch 'function-fields-infinity-precision' into function-fields</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f616d206f03e01bbc10409e0091ba3bd9808443c\">f616d20</a></td><td><code>Merge branch 'lazy-power-series-trac27347' into function-fields-infinity-precision</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d77ecca200465722696f2e9f59d8f4096c1fd02\">8d77ecc</a></td><td><code>Merge branch 'function-fields-infinity-precision' into function-fields</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bbeebef9b41a3f859c0b7eab1d5248a978689595\">bbeebef</a></td><td><code>Merge branch 'function-fields' into curves-irreducible</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/64c9c6bf2151d07781460fb553f820302dea3613\">64c9c6b</a></td><td><code>Add delta-invariant</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/61427501c57756caeb525386ee58cfff192066e1\">6142750</a></td><td><code>Add ag codes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5214a3a020c8e268c62957990f3ef5351641bd3f\">5214a3a</a></td><td><code>Add list operator and allow list input</code></td></tr></table>\n",
    "created_at": "2019-04-08T09:06:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422929",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/afeae09cabf033abca6595239b9968e1d916c921">afeae09</a></td><td><code>Merge branch 'function-fields-infinity-precision' into function-fields</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bf815095d21e19af2ee7f2cda294eb09ef922f64">bf81509</a></td><td><code>Merge branch 'lazy-power-series-trac27347' into function-fields</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e552770b1950c6e27eb1c679bba1104487165b20">e552770</a></td><td><code>fix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c5fc73a72dc93835dba558796743ab630763943">6c5fc73</a></td><td><code>Merge branch 'function-fields-infinity-precision' into function-fields</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f616d206f03e01bbc10409e0091ba3bd9808443c">f616d20</a></td><td><code>Merge branch 'lazy-power-series-trac27347' into function-fields-infinity-precision</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d77ecca200465722696f2e9f59d8f4096c1fd02">8d77ecc</a></td><td><code>Merge branch 'function-fields-infinity-precision' into function-fields</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bbeebef9b41a3f859c0b7eab1d5248a978689595">bbeebef</a></td><td><code>Merge branch 'function-fields' into curves-irreducible</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/64c9c6bf2151d07781460fb553f820302dea3613">64c9c6b</a></td><td><code>Add delta-invariant</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/61427501c57756caeb525386ee58cfff192066e1">6142750</a></td><td><code>Add ag codes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5214a3a020c8e268c62957990f3ef5351641bd3f">5214a3a</a></td><td><code>Add list operator and allow list input</code></td></tr></table>




---

archive/issue_comments_422930.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eac7047c33c8fd1201e86493df34ef9cb805e893\">eac7047</a></td><td><code>Add list operator and allow list input</code></td></tr></table>\n",
    "created_at": "2019-04-08T09:09:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422930",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eac7047c33c8fd1201e86493df34ef9cb805e893">eac7047</a></td><td><code>Add list operator and allow list input</code></td></tr></table>




---

archive/issue_comments_422931.json:
```json
{
    "body": "Changed commit from **[5214a3a](https://github.com/sagemath/sagetrac-mirror/commit/5214a3a020c8e268c62957990f3ef5351641bd3f)** to **[eac7047](https://github.com/sagemath/sagetrac-mirror/commit/eac7047c33c8fd1201e86493df34ef9cb805e893)**",
    "created_at": "2019-04-08T09:09:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422931",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5214a3a](https://github.com/sagemath/sagetrac-mirror/commit/5214a3a020c8e268c62957990f3ef5351641bd3f)** to **[eac7047](https://github.com/sagemath/sagetrac-mirror/commit/eac7047c33c8fd1201e86493df34ef9cb805e893)**



---

archive/issue_comments_422932.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nOops. Pushed a wrong branch!",
    "created_at": "2019-04-08T09:10:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422932",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:29" align="right">comment:29</div>

Oops. Pushed a wrong branch!



---

archive/issue_events_375680.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2019-04-08T09:21:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27347#event-375680"
}
```



---

archive/issue_events_375681.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2019-04-08T09:21:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27347#event-375681"
}
```



---

archive/issue_comments_422933.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nThis is looking good.\n\nPast experience tells me you should also implement a `__ne__` at the base class. I also think you should include more ABCs to avoid the extra duplication with the `__eq__` methods. Similarly, why not use the `op` version for `+-*/` to avoid class duplication? You may also want a `__hash__` and incorporate that into the hash of the lazy Laurent series. With how many operator classes you have, it may also be worthwhile pulling that out to a separate file for better separations-of-concerns between files.",
    "created_at": "2019-04-08T12:46:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422933",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:31" align="right">comment:31</div>

This is looking good.

Past experience tells me you should also implement a `__ne__` at the base class. I also think you should include more ABCs to avoid the extra duplication with the `__eq__` methods. Similarly, why not use the `op` version for `+-*/` to avoid class duplication? You may also want a `__hash__` and incorporate that into the hash of the lazy Laurent series. With how many operator classes you have, it may also be worthwhile pulling that out to a separate file for better separations-of-concerns between files.



---

archive/issue_comments_422934.json:
```json
{
    "body": "Changed commit from **[eac7047](https://github.com/sagemath/sagetrac-mirror/commit/eac7047c33c8fd1201e86493df34ef9cb805e893)** to **[f5b5792](https://github.com/sagemath/sagetrac-mirror/commit/f5b579285b0daf9bab2955dbb397174467fd3e47)**",
    "created_at": "2019-04-09T04:00:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422934",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[eac7047](https://github.com/sagemath/sagetrac-mirror/commit/eac7047c33c8fd1201e86493df34ef9cb805e893)** to **[f5b5792](https://github.com/sagemath/sagetrac-mirror/commit/f5b579285b0daf9bab2955dbb397174467fd3e47)**



---

archive/issue_comments_422935.json:
```json
{
    "body": "<div id=\"comment:32\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f5b579285b0daf9bab2955dbb397174467fd3e47\">f5b5792</a></td><td><code>Add hash and fix other issues from reviewer comments</code></td></tr></table>\n",
    "created_at": "2019-04-09T04:00:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422935",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:32"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f5b579285b0daf9bab2955dbb397174467fd3e47">f5b5792</a></td><td><code>Add hash and fix other issues from reviewer comments</code></td></tr></table>




---

archive/issue_comments_422936.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@tscrim](#comment:31):\n> This is looking good.\n> \n> Past experience tells me you should also implement a `__ne__` at the base class. \n\nDone.\n\n> I also think you should include more ABCs to avoid the extra duplication with the `__eq__` methods. \n\nOk.\n\n> Similarly, why not use the `op` version for `+-*/` to avoid class duplication? \n\nI don't get it. They cannot be treated uniformly. Look at the `__call__` method.\n\n> You may also want a `__hash__` and incorporate that into the hash of the lazy Laurent series. \n\nDone.\n\n> With how many operator classes you have, it may also be worthwhile pulling that out to a separate file for better separations-of-concerns between files.\n\nDone.",
    "created_at": "2019-04-09T04:04:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422936",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@tscrim](#comment:31):
> This is looking good.
> 
> Past experience tells me you should also implement a `__ne__` at the base class. 

Done.

> I also think you should include more ABCs to avoid the extra duplication with the `__eq__` methods. 

Ok.

> Similarly, why not use the `op` version for `+-*/` to avoid class duplication? 

I don't get it. They cannot be treated uniformly. Look at the `__call__` method.

> You may also want a `__hash__` and incorporate that into the hash of the lazy Laurent series. 

Done.

> With how many operator classes you have, it may also be worthwhile pulling that out to a separate file for better separations-of-concerns between files.

Done.



---

archive/issue_comments_422937.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nReplying to [@kwankyu](#comment:33):\n> Replying to [@tscrim](#comment:31):\n> > Similarly, why not use the `op` version for `+-*/` to avoid class duplication? \n\n> \n> I don't get it. They cannot be treated uniformly. Look at the `__call__` method.\n\nYou can do what I suggested in [comment:20](#comment:20) for these classes:\n- `LazyLaurentSeriesOperator_add` (by passing `operator.add`)\n- `LazyLaurentSeriesOperator_sub` (by passing `operator.sub`)\nYou're right that multiplication must be treated separately. Although you could also do this for a scalar multiplication version of this (which will be faster than coercion and multiplication). For 2 cases, there is a less compelling reason to factor the common code out like this.\n\nThere is not really a benefit for doing this for unitary operations (as there is only 1 that could work this way).\n\nIn some ways it feels like we are reinventing the wheel here because we are effectively building an evaluation tree, and we already have something like this within `SR` (or sympy/pynac/etc.). However, I don't see a way around this by using `SR` (and we might have to work a little bit to avoid doing computations unnecessarily inside of there). So I think we have to keep doing things this way. Just an observation.",
    "created_at": "2019-04-09T05:55:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422937",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:34" align="right">comment:34</div>

Replying to [@kwankyu](#comment:33):
> Replying to [@tscrim](#comment:31):
> > Similarly, why not use the `op` version for `+-*/` to avoid class duplication? 

> 
> I don't get it. They cannot be treated uniformly. Look at the `__call__` method.

You can do what I suggested in [comment:20](#comment:20) for these classes:
- `LazyLaurentSeriesOperator_add` (by passing `operator.add`)
- `LazyLaurentSeriesOperator_sub` (by passing `operator.sub`)
You're right that multiplication must be treated separately. Although you could also do this for a scalar multiplication version of this (which will be faster than coercion and multiplication). For 2 cases, there is a less compelling reason to factor the common code out like this.

There is not really a benefit for doing this for unitary operations (as there is only 1 that could work this way).

In some ways it feels like we are reinventing the wheel here because we are effectively building an evaluation tree, and we already have something like this within `SR` (or sympy/pynac/etc.). However, I don't see a way around this by using `SR` (and we might have to work a little bit to avoid doing computations unnecessarily inside of there). So I think we have to keep doing things this way. Just an observation.



---

archive/issue_comments_422938.json:
```json
{
    "body": "Changed commit from **[f5b5792](https://github.com/sagemath/sagetrac-mirror/commit/f5b579285b0daf9bab2955dbb397174467fd3e47)** to **[3bf2101](https://github.com/sagemath/sagetrac-mirror/commit/3bf2101b59d3d13aca9815fbe907ff7ad6c33cdb)**",
    "created_at": "2019-04-09T08:20:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422938",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f5b5792](https://github.com/sagemath/sagetrac-mirror/commit/f5b579285b0daf9bab2955dbb397174467fd3e47)** to **[3bf2101](https://github.com/sagemath/sagetrac-mirror/commit/3bf2101b59d3d13aca9815fbe907ff7ad6c33cdb)**



---

archive/issue_comments_422939.json:
```json
{
    "body": "<div id=\"comment:35\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3bf2101b59d3d13aca9815fbe907ff7ad6c33cdb\">3bf2101</a></td><td><code>Add scalar multiplication operator</code></td></tr></table>\n",
    "created_at": "2019-04-09T08:20:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422939",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:35"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3bf2101b59d3d13aca9815fbe907ff7ad6c33cdb">3bf2101</a></td><td><code>Add scalar multiplication operator</code></td></tr></table>




---

archive/issue_comments_422940.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@tscrim](#comment:34):\n> Although you could also do this for a scalar multiplication version of this (which will be faster than coercion and multiplication). \n\nAdded scalar multiplication.\n\n> In some ways it feels like we are reinventing the wheel here because we are effectively building an evaluation tree, and we already have something like this within `SR` (or sympy/pynac/etc.). However, I don't see a way around this by using `SR` (and we might have to work a little bit to avoid doing computations unnecessarily inside of there). So I think we have to keep doing things this way. Just an observation.\n\nTrue. It is just inevitable that sometimes we make wheels for different needs :-)",
    "created_at": "2019-04-09T11:09:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422940",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@tscrim](#comment:34):
> Although you could also do this for a scalar multiplication version of this (which will be faster than coercion and multiplication). 

Added scalar multiplication.

> In some ways it feels like we are reinventing the wheel here because we are effectively building an evaluation tree, and we already have something like this within `SR` (or sympy/pynac/etc.). However, I don't see a way around this by using `SR` (and we might have to work a little bit to avoid doing computations unnecessarily inside of there). So I think we have to keep doing things this way. Just an observation.

True. It is just inevitable that sometimes we make wheels for different needs :-)



---

archive/issue_comments_422941.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nI find this quite wonderful!  It would be great if we could replace `LazyPowerSeries` with this.  One feature of `LazyPowerSeries` was that it allows recursive definitions \"guessing\" the correct initialisations, as for example in\n\n```\n            sage: L = LazyPowerSeriesRing(QQ)\n            sage: one = L(1)\n            sage: monom = L.gen()\n            sage: s = L()\n            sage: s._name = 's'\n            sage: s.define(one+monom*s*s)\n            sage: [s.coefficient(i) for i in range(6)]\n            [1, 1, 2, 5, 14, 42]\n```\nAlthough this is based on the original code by Ralf Hemmecke and myself, which in turn is based on code of Nicolas Thiery (I think), I am not sure anymore whether it is so important.  Of course, if we could have something similar, even better.",
    "created_at": "2019-04-09T11:24:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422941",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:37" align="right">comment:37</div>

I find this quite wonderful!  It would be great if we could replace `LazyPowerSeries` with this.  One feature of `LazyPowerSeries` was that it allows recursive definitions "guessing" the correct initialisations, as for example in

```
            sage: L = LazyPowerSeriesRing(QQ)
            sage: one = L(1)
            sage: monom = L.gen()
            sage: s = L()
            sage: s._name = 's'
            sage: s.define(one+monom*s*s)
            sage: [s.coefficient(i) for i in range(6)]
            [1, 1, 2, 5, 14, 42]
```
Although this is based on the original code by Ralf Hemmecke and myself, which in turn is based on code of Nicolas Thiery (I think), I am not sure anymore whether it is so important.  Of course, if we could have something similar, even better.



---

archive/issue_comments_422942.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nOne question with respect to equality.  It seems to me that your implementation of `__eq__` is quite brittle.  It is clear that one cannot have proper equality, so it should be clearly stated what it can do and what it can't.\n\nApart from that, in the case of truncation, one could make it exact easily.",
    "created_at": "2019-04-09T11:26:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422942",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:38" align="right">comment:38</div>

One question with respect to equality.  It seems to me that your implementation of `__eq__` is quite brittle.  It is clear that one cannot have proper equality, so it should be clearly stated what it can do and what it can't.

Apart from that, in the case of truncation, one could make it exact easily.



---

archive/issue_comments_422943.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nSome other comments on the code:\n\nFor `__bool__`, I think erroring out immediately when `self._constant is None` is not the way to go. I think you should check the computed coefficients in that case to see if any of them are non-zero. If they are all `0`, then you should error out. Also, a fast first check when `self._constant` is not `None` is to see if that constant is non-zero `0`.\n\nIn `_repr_`, I do not see how `self.valuation()` would normally raise a `ValueError`. That method does not raise one, nor does `self.coefficient()` (the only other method it calls).\n\nInstead of `self.parent()(1)`, which calls the coercion framework, you should use `self.parent().one()`.\n\nAre you sure you want `_div_` to be two separate operations and not one combined one? I feel like the latter would be faster (at least since it is implemented at the Python level).\n\nActually, you may want to make the operator file into a Cython file (since is forms the key computational part and it is in a separate file).\n\nI think the truncate should return an honest Laurent polynomial. Furthermore, I don't think there are coercions (or at least conversions) from the corresponding Laurent polynomial ring. This feels like a very natural to have. I don't want to go too far with ticket expansion, but this feels like something people will try soon after having this.",
    "created_at": "2019-04-09T14:40:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422943",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:39" align="right">comment:39</div>

Some other comments on the code:

For `__bool__`, I think erroring out immediately when `self._constant is None` is not the way to go. I think you should check the computed coefficients in that case to see if any of them are non-zero. If they are all `0`, then you should error out. Also, a fast first check when `self._constant` is not `None` is to see if that constant is non-zero `0`.

In `_repr_`, I do not see how `self.valuation()` would normally raise a `ValueError`. That method does not raise one, nor does `self.coefficient()` (the only other method it calls).

Instead of `self.parent()(1)`, which calls the coercion framework, you should use `self.parent().one()`.

Are you sure you want `_div_` to be two separate operations and not one combined one? I feel like the latter would be faster (at least since it is implemented at the Python level).

Actually, you may want to make the operator file into a Cython file (since is forms the key computational part and it is in a separate file).

I think the truncate should return an honest Laurent polynomial. Furthermore, I don't think there are coercions (or at least conversions) from the corresponding Laurent polynomial ring. This feels like a very natural to have. I don't want to go too far with ticket expansion, but this feels like something people will try soon after having this.



---

archive/issue_comments_422944.json:
```json
{
    "body": "Changed commit from **[3bf2101](https://github.com/sagemath/sagetrac-mirror/commit/3bf2101b59d3d13aca9815fbe907ff7ad6c33cdb)** to **[86ccdc4](https://github.com/sagemath/sagetrac-mirror/commit/86ccdc42aab475d7ffb04e02eb210f58b79f04b6)**",
    "created_at": "2019-04-10T04:49:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422944",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3bf2101](https://github.com/sagemath/sagetrac-mirror/commit/3bf2101b59d3d13aca9815fbe907ff7ad6c33cdb)** to **[86ccdc4](https://github.com/sagemath/sagetrac-mirror/commit/86ccdc42aab475d7ffb04e02eb210f58b79f04b6)**



---

archive/issue_comments_422945.json:
```json
{
    "body": "<div id=\"comment:40\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4bf0f2f0a34d190ef2578050cb058b52dcea790c\">4bf0f2f</a></td><td><code>Add coercion from Laurent polynomials</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/86ccdc42aab475d7ffb04e02eb210f58b79f04b6\">86ccdc4</a></td><td><code>Add polynomial method and coercions from Laurent polynomial ring</code></td></tr></table>\n",
    "created_at": "2019-04-10T04:49:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422945",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:40"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4bf0f2f0a34d190ef2578050cb058b52dcea790c">4bf0f2f</a></td><td><code>Add coercion from Laurent polynomials</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/86ccdc42aab475d7ffb04e02eb210f58b79f04b6">86ccdc4</a></td><td><code>Add polynomial method and coercions from Laurent polynomial ring</code></td></tr></table>




---

archive/issue_comments_422946.json:
```json
{
    "body": "<div id=\"comment:41\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e028ed60fbfb7457a1302bc8ecef69300311a2da\">e028ed6</a></td><td><code>A little change in truncate method</code></td></tr></table>\n",
    "created_at": "2019-04-10T04:54:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422946",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:41"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e028ed60fbfb7457a1302bc8ecef69300311a2da">e028ed6</a></td><td><code>A little change in truncate method</code></td></tr></table>




---

archive/issue_comments_422947.json:
```json
{
    "body": "Changed commit from **[86ccdc4](https://github.com/sagemath/sagetrac-mirror/commit/86ccdc42aab475d7ffb04e02eb210f58b79f04b6)** to **[e028ed6](https://github.com/sagemath/sagetrac-mirror/commit/e028ed60fbfb7457a1302bc8ecef69300311a2da)**",
    "created_at": "2019-04-10T04:54:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422947",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[86ccdc4](https://github.com/sagemath/sagetrac-mirror/commit/86ccdc42aab475d7ffb04e02eb210f58b79f04b6)** to **[e028ed6](https://github.com/sagemath/sagetrac-mirror/commit/e028ed60fbfb7457a1302bc8ecef69300311a2da)**



---

archive/issue_comments_422948.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nReplying to [@tscrim](#comment:39):\n> For `__bool__`, I think erroring out immediately when `self._constant is None` is not the way to go. I think you should check the computed coefficients in that case to see if any of them are non-zero. If they are all `0`, then you should error out. \n\nGood idea. Done.\n\n> Also, a fast first check when `self._constant` is not `None` is to see if that constant is non-zero `0`.\n\nThis check is already there.\n\n> In `_repr_`, I do not see how `self.valuation()` would normally raise a `ValueError`. That method does not raise one, nor does `self.coefficient()` (the only other method it calls).\n\nRight. Fixed.\n\n\n> Instead of `self.parent()(1)`, which calls the coercion framework, you should use `self.parent().one()`.\n\nOk. Fixed.\n\n> Are you sure you want `_div_` to be two separate operations and not one combined one? I feel like the latter would be faster (at least since it is implemented at the Python level).\n\nI don't feel so. I don't see a way to implement series division such that 1 + 1 < 2 with a significant margin.\n\n> I think the truncate should return an honest Laurent polynomial. \n\nI don't agree. One might still want a truncated series  with laziness. For your cases, I added `polynomial` method to convert to an honest polynomial. \n\n>Furthermore, I don't think there are coercions (or at least conversions) from the corresponding Laurent polynomial ring. This feels like a very natural to have. I don't want to go too far with ticket expansion, but this feels like something people will try soon after having this.\n\nRight. I added coercions from (Laurent) polynomial rings.\n\n> Actually, you may want to make the operator file into a Cython file (since is forms the key computational part and it is in a separate file).\n\nHmm. I doubt if there would be significant speed boost, compensating increased build time (that I hate). Moreover I am not versed with Cython. So I don't want to do that, at least for this ticket. But if you do it, I would not object.",
    "created_at": "2019-04-10T05:14:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422948",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:42" align="right">comment:42</div>

Replying to [@tscrim](#comment:39):
> For `__bool__`, I think erroring out immediately when `self._constant is None` is not the way to go. I think you should check the computed coefficients in that case to see if any of them are non-zero. If they are all `0`, then you should error out. 

Good idea. Done.

> Also, a fast first check when `self._constant` is not `None` is to see if that constant is non-zero `0`.

This check is already there.

> In `_repr_`, I do not see how `self.valuation()` would normally raise a `ValueError`. That method does not raise one, nor does `self.coefficient()` (the only other method it calls).

Right. Fixed.


> Instead of `self.parent()(1)`, which calls the coercion framework, you should use `self.parent().one()`.

Ok. Fixed.

> Are you sure you want `_div_` to be two separate operations and not one combined one? I feel like the latter would be faster (at least since it is implemented at the Python level).

I don't feel so. I don't see a way to implement series division such that 1 + 1 < 2 with a significant margin.

> I think the truncate should return an honest Laurent polynomial. 

I don't agree. One might still want a truncated series  with laziness. For your cases, I added `polynomial` method to convert to an honest polynomial. 

>Furthermore, I don't think there are coercions (or at least conversions) from the corresponding Laurent polynomial ring. This feels like a very natural to have. I don't want to go too far with ticket expansion, but this feels like something people will try soon after having this.

Right. I added coercions from (Laurent) polynomial rings.

> Actually, you may want to make the operator file into a Cython file (since is forms the key computational part and it is in a separate file).

Hmm. I doubt if there would be significant speed boost, compensating increased build time (that I hate). Moreover I am not versed with Cython. So I don't want to do that, at least for this ticket. But if you do it, I would not object.



---

archive/issue_comments_422949.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nReplying to [@mantepse](#comment:38):\n> One question with respect to equality.  It seems to me that your implementation of `__eq__` is quite brittle.  It is clear that one cannot have proper equality, so it should be clearly stated what it can do and what it can't.\n\nThe implementation gives an answer if possible without computing coefficients indefinitely. Otherwise raise an exception.\n\nI added a short explanation to the method. \n\n> Apart from that, in the case of truncation, one could make it exact easily.\n\nTruncation still gives a lazy series. I added `polynomial` method to convert to an exact polynomial.",
    "created_at": "2019-04-10T05:24:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422949",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:43" align="right">comment:43</div>

Replying to [@mantepse](#comment:38):
> One question with respect to equality.  It seems to me that your implementation of `__eq__` is quite brittle.  It is clear that one cannot have proper equality, so it should be clearly stated what it can do and what it can't.

The implementation gives an answer if possible without computing coefficients indefinitely. Otherwise raise an exception.

I added a short explanation to the method. 

> Apart from that, in the case of truncation, one could make it exact easily.

Truncation still gives a lazy series. I added `polynomial` method to convert to an exact polynomial.



---

archive/issue_comments_422950.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nReplying to [@mantepse](#comment:37):\n> I find this quite wonderful!  It would be great if we could replace `LazyPowerSeries` with this.  One feature of `LazyPowerSeries` was that it allows recursive definitions \"guessing\" the correct initialisations, as for example in\n> \n> ```\n>             sage: L = LazyPowerSeriesRing(QQ)\n>             sage: one = L(1)\n>             sage: monom = L.gen()\n>             sage: s = L()\n>             sage: s._name = 's'\n>             sage: s.define(one+monom*s*s)\n>             sage: [s.coefficient(i) for i in range(6)]\n>             [1, 1, 2, 5, 14, 42]\n> ```\n> Although this is based on the original code by Ralf Hemmecke and myself, which in turn is based on code of Nicolas Thiery (I think), I am not sure anymore whether it is so important.  Of course, if we could have something similar, even better.\n\nRecursive definition is possible as a result of being lazy and being power series. Now you can do the same in the following way:\n\n```\nsage: from sage.rings.lazy_laurent_series_ring import LazyLaurentSeriesRing\nsage: L = LazyLaurentSeriesRing(ZZ, 'z')\nsage: \nsage: z = L.gen()\nsage: def f(s,n):\n....:     return (1 + z*s^2).coefficient(n)\n....: \nsage: L.series(f, valuation=0)\n1 + z + 2*z^2 + 5*z^3 + 14*z^4 + 42*z^5 + 132*z^6 + ...\n```",
    "created_at": "2019-04-10T05:31:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422950",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:44" align="right">comment:44</div>

Replying to [@mantepse](#comment:37):
> I find this quite wonderful!  It would be great if we could replace `LazyPowerSeries` with this.  One feature of `LazyPowerSeries` was that it allows recursive definitions "guessing" the correct initialisations, as for example in
> 
> ```
>             sage: L = LazyPowerSeriesRing(QQ)
>             sage: one = L(1)
>             sage: monom = L.gen()
>             sage: s = L()
>             sage: s._name = 's'
>             sage: s.define(one+monom*s*s)
>             sage: [s.coefficient(i) for i in range(6)]
>             [1, 1, 2, 5, 14, 42]
> ```
> Although this is based on the original code by Ralf Hemmecke and myself, which in turn is based on code of Nicolas Thiery (I think), I am not sure anymore whether it is so important.  Of course, if we could have something similar, even better.

Recursive definition is possible as a result of being lazy and being power series. Now you can do the same in the following way:

```
sage: from sage.rings.lazy_laurent_series_ring import LazyLaurentSeriesRing
sage: L = LazyLaurentSeriesRing(ZZ, 'z')
sage: 
sage: z = L.gen()
sage: def f(s,n):
....:     return (1 + z*s^2).coefficient(n)
....: 
sage: L.series(f, valuation=0)
1 + z + 2*z^2 + 5*z^3 + 14*z^4 + 42*z^5 + 132*z^6 + ...
```



---

archive/issue_comments_422951.json:
```json
{
    "body": "<div id=\"comment:45\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8f8adf2ef2c0d209a63111e46354d8ead0e29cb0\">8f8adf2</a></td><td><code>Add `__getitem__` special method to series</code></td></tr></table>\n",
    "created_at": "2019-04-10T05:38:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422951",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:45"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8f8adf2ef2c0d209a63111e46354d8ead0e29cb0">8f8adf2</a></td><td><code>Add `__getitem__` special method to series</code></td></tr></table>




---

archive/issue_comments_422952.json:
```json
{
    "body": "Changed commit from **[e028ed6](https://github.com/sagemath/sagetrac-mirror/commit/e028ed60fbfb7457a1302bc8ecef69300311a2da)** to **[8f8adf2](https://github.com/sagemath/sagetrac-mirror/commit/8f8adf2ef2c0d209a63111e46354d8ead0e29cb0)**",
    "created_at": "2019-04-10T05:38:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422952",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e028ed6](https://github.com/sagemath/sagetrac-mirror/commit/e028ed60fbfb7457a1302bc8ecef69300311a2da)** to **[8f8adf2](https://github.com/sagemath/sagetrac-mirror/commit/8f8adf2ef2c0d209a63111e46354d8ead0e29cb0)**



---

archive/issue_comments_422953.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\n> > Apart from that, in the case of truncation, one could make it exact easily.\n\n> \n> Truncation still gives a lazy series. I added `polynomial` method to convert to an exact polynomial.\n\nexcellent point! I missed that!",
    "created_at": "2019-04-10T05:56:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422953",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:46" align="right">comment:46</div>

> > Apart from that, in the case of truncation, one could make it exact easily.

> 
> Truncation still gives a lazy series. I added `polynomial` method to convert to an exact polynomial.

excellent point! I missed that!



---

archive/issue_comments_422954.json:
```json
{
    "body": "<div id=\"comment:47\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b3a679216402c0db7d046c771012500ce1fd7595\">b3a6792</a></td><td><code>Add division operator</code></td></tr></table>\n",
    "created_at": "2019-04-10T07:01:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422954",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:47"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b3a679216402c0db7d046c771012500ce1fd7595">b3a6792</a></td><td><code>Add division operator</code></td></tr></table>




---

archive/issue_comments_422955.json:
```json
{
    "body": "Changed commit from **[8f8adf2](https://github.com/sagemath/sagetrac-mirror/commit/8f8adf2ef2c0d209a63111e46354d8ead0e29cb0)** to **[b3a6792](https://github.com/sagemath/sagetrac-mirror/commit/b3a679216402c0db7d046c771012500ce1fd7595)**",
    "created_at": "2019-04-10T07:01:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422955",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[8f8adf2](https://github.com/sagemath/sagetrac-mirror/commit/8f8adf2ef2c0d209a63111e46354d8ead0e29cb0)** to **[b3a6792](https://github.com/sagemath/sagetrac-mirror/commit/b3a679216402c0db7d046c771012500ce1fd7595)**



---

archive/issue_comments_422956.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\n> > Are you sure you want `_div_` to be two separate operations and not one combined one? I feel like the latter would be faster (at least since it is implemented at the Python level).\n\n> \n> I don't feel so. I don't see a way to implement series division such that 1 + 1 < 2 with a significant margin.\n\nYou are right. I was wrong!",
    "created_at": "2019-04-10T07:02:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422956",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:48" align="right">comment:48</div>

> > Are you sure you want `_div_` to be two separate operations and not one combined one? I feel like the latter would be faster (at least since it is implemented at the Python level).

> 
> I don't feel so. I don't see a way to implement series division such that 1 + 1 < 2 with a significant margin.

You are right. I was wrong!



---

archive/issue_comments_422957.json:
```json
{
    "body": "Changed commit from **[b3a6792](https://github.com/sagemath/sagetrac-mirror/commit/b3a679216402c0db7d046c771012500ce1fd7595)** to **[575022c](https://github.com/sagemath/sagetrac-mirror/commit/575022ce0595e70d4c285651061b2286c9e3cbf7)**",
    "created_at": "2019-04-10T07:04:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422957",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b3a6792](https://github.com/sagemath/sagetrac-mirror/commit/b3a679216402c0db7d046c771012500ce1fd7595)** to **[575022c](https://github.com/sagemath/sagetrac-mirror/commit/575022ce0595e70d4c285651061b2286c9e3cbf7)**



---

archive/issue_comments_422958.json:
```json
{
    "body": "<div id=\"comment:49\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/575022ce0595e70d4c285651061b2286c9e3cbf7\">575022c</a></td><td><code>Typos</code></td></tr></table>\n",
    "created_at": "2019-04-10T07:04:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422958",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:49"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/575022ce0595e70d4c285651061b2286c9e3cbf7">575022c</a></td><td><code>Typos</code></td></tr></table>




---

archive/issue_comments_422959.json:
```json
{
    "body": "<div id=\"comment:50\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c55925faeae43fc25fb76542b13e59233f4403af\">c55925f</a></td><td><code>Added a recursive definition example</code></td></tr></table>\n",
    "created_at": "2019-04-10T07:13:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422959",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:50"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c55925faeae43fc25fb76542b13e59233f4403af">c55925f</a></td><td><code>Added a recursive definition example</code></td></tr></table>




---

archive/issue_comments_422960.json:
```json
{
    "body": "Changed commit from **[575022c](https://github.com/sagemath/sagetrac-mirror/commit/575022ce0595e70d4c285651061b2286c9e3cbf7)** to **[c55925f](https://github.com/sagemath/sagetrac-mirror/commit/c55925faeae43fc25fb76542b13e59233f4403af)**",
    "created_at": "2019-04-10T07:13:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422960",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[575022c](https://github.com/sagemath/sagetrac-mirror/commit/575022ce0595e70d4c285651061b2286c9e3cbf7)** to **[c55925f](https://github.com/sagemath/sagetrac-mirror/commit/c55925faeae43fc25fb76542b13e59233f4403af)**



---

archive/issue_comments_422961.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nAre composition and reversion planned in a later ticket?\n\nI am really looking forward to this!  I hope very much we can rebase the species code on it.  Should `LazyPowerSeriesRing` be a subclass?",
    "created_at": "2019-04-11T05:46:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422961",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:51" align="right">comment:51</div>

Are composition and reversion planned in a later ticket?

I am really looking forward to this!  I hope very much we can rebase the species code on it.  Should `LazyPowerSeriesRing` be a subclass?



---

archive/issue_comments_422962.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nReplying to [@mantepse](#comment:51):\n> Are composition and reversion planned in a later ticket?\n\nNot by me. Anyone is invited to add them in a later ticket.\n\n> I hope very much we can rebase the species code on it.  Should `LazyPowerSeriesRing` be a subclass?\n\nYes, in a separate file alongside with lazy Laurent series.  It would be great. I don't have a plan to do it in any short time, simply because I don't need it now.",
    "created_at": "2019-04-11T07:33:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422962",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:52" align="right">comment:52</div>

Replying to [@mantepse](#comment:51):
> Are composition and reversion planned in a later ticket?

Not by me. Anyone is invited to add them in a later ticket.

> I hope very much we can rebase the species code on it.  Should `LazyPowerSeriesRing` be a subclass?

Yes, in a separate file alongside with lazy Laurent series.  It would be great. I don't have a plan to do it in any short time, simply because I don't need it now.



---

archive/issue_comments_422963.json:
```json
{
    "body": "<div id=\"comment:53\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/410ca3806500b2518485b74d0daaab1931e49ec8\">410ca38</a></td><td><code>Add prec and approximate_series method</code></td></tr></table>\n",
    "created_at": "2019-04-11T09:40:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422963",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:53"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/410ca3806500b2518485b74d0daaab1931e49ec8">410ca38</a></td><td><code>Add prec and approximate_series method</code></td></tr></table>




---

archive/issue_comments_422964.json:
```json
{
    "body": "Changed commit from **[c55925f](https://github.com/sagemath/sagetrac-mirror/commit/c55925faeae43fc25fb76542b13e59233f4403af)** to **[410ca38](https://github.com/sagemath/sagetrac-mirror/commit/410ca3806500b2518485b74d0daaab1931e49ec8)**",
    "created_at": "2019-04-11T09:40:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422964",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c55925f](https://github.com/sagemath/sagetrac-mirror/commit/c55925faeae43fc25fb76542b13e59233f4403af)** to **[410ca38](https://github.com/sagemath/sagetrac-mirror/commit/410ca3806500b2518485b74d0daaab1931e49ec8)**



---

archive/issue_comments_422965.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2019-04-13T09:18:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422965",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_422966.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nLast little thing:\n\n`R(0)` -> `R.zero()` (as it is cached and `R` is always a `LazyLaurentSeriesRing`).\n\nOnce done you can set a positive review on my behalf.",
    "created_at": "2019-04-13T09:18:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422966",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:54" align="right">comment:54</div>

Last little thing:

`R(0)` -> `R.zero()` (as it is cached and `R` is always a `LazyLaurentSeriesRing`).

Once done you can set a positive review on my behalf.



---

archive/issue_comments_422967.json:
```json
{
    "body": "Changed commit from **[410ca38](https://github.com/sagemath/sagetrac-mirror/commit/410ca3806500b2518485b74d0daaab1931e49ec8)** to **[989f009](https://github.com/sagemath/sagetrac-mirror/commit/989f009a851c9dc91c8650d7e554138886951a3a)**",
    "created_at": "2019-04-13T11:26:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422967",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[410ca38](https://github.com/sagemath/sagetrac-mirror/commit/410ca3806500b2518485b74d0daaab1931e49ec8)** to **[989f009](https://github.com/sagemath/sagetrac-mirror/commit/989f009a851c9dc91c8650d7e554138886951a3a)**



---

archive/issue_comments_422968.json:
```json
{
    "body": "<div id=\"comment:55\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/989f009a851c9dc91c8650d7e554138886951a3a\">989f009</a></td><td><code>Fix R(0)</code></td></tr></table>\n",
    "created_at": "2019-04-13T11:26:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422968",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:55"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/989f009a851c9dc91c8650d7e554138886951a3a">989f009</a></td><td><code>Fix R(0)</code></td></tr></table>




---

archive/issue_comments_422969.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nThank you, Travis!",
    "created_at": "2019-04-13T11:28:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422969",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:56" align="right">comment:56</div>

Thank you, Travis!



---

archive/issue_events_375682.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2019-04-13T11:28:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27347#event-375682"
}
```



---

archive/issue_events_375683.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2019-04-13T11:28:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27347#event-375683"
}
```



---

archive/issue_events_375684.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-04-15T17:47:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27347#event-375684"
}
```



---

archive/issue_events_375685.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "df234fcf50d93c9842095cc1ab1f1fbd72c54793",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-04-15T17:47:48Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27347#event-375685"
}
```



---

archive/issue_comments_422970.json:
```json
{
    "body": "Changed branch from **[u/klee/27347](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/27347)** to **[989f009](https://github.com/sagemath/sagetrac-mirror/commit/989f009a851c9dc91c8650d7e554138886951a3a)**",
    "created_at": "2019-04-15T17:47:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422970",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/klee/27347](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/27347)** to **[989f009](https://github.com/sagemath/sagetrac-mirror/commit/989f009a851c9dc91c8650d7e554138886951a3a)**



---

archive/issue_comments_422971.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nNice work! Follow-up ticket at #27694 for allowing syntactic sugar\n\n```\nsage: L.<x> = LazyLaurentSeriesRing(ZZ)\n```",
    "created_at": "2019-04-17T17:09:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422971",
    "user": "https://github.com/slel"
}
```

<div id="comment:58" align="right">comment:58</div>

Nice work! Follow-up ticket at #27694 for allowing syntactic sugar

```
sage: L.<x> = LazyLaurentSeriesRing(ZZ)
```



---

archive/issue_comments_422972.json:
```json
{
    "body": "Changed commit from **[989f009](https://github.com/sagemath/sagetrac-mirror/commit/989f009a851c9dc91c8650d7e554138886951a3a)** to none",
    "created_at": "2019-04-17T17:09:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27347",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27347#issuecomment-422972",
    "user": "https://github.com/slel"
}
```

Changed commit from **[989f009](https://github.com/sagemath/sagetrac-mirror/commit/989f009a851c9dc91c8650d7e554138886951a3a)** to none
