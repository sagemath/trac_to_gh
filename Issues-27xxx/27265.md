# Issue 27265: spkg-configure.m4 for NTL

archive/issues_027028.json:
```json
{
    "assignees": [],
    "body": "implemented a direct version check using `AC_RUN_IFELSE`.\nThe rest is standard, as in #27212, basically.\n\nto be merged as a part of #27822\n\nDepends on #27212\nDepends on #27641\nDepends on #27751\nDepends on #27259\n\nCC:  @embray @kiwifb @jdemeyer\n\nComponent: **build: configure**\n\nKeywords: **spkg-configure ntl**\n\nAuthor: **Dima Pasechnik, Erik Bray**\n\nBranch/Commit: **[public/packages/ntlconf](https://github.com/sagemath/sagetrac-mirror/tree/public/packages/ntlconf) @ [`892143a`](https://github.com/sagemath/sagetrac-mirror/commit/892143a2d89591044dc20a3c87ecccaffdd46dd7)**\n\nReviewer: **Erik Bray, Dima Pasechnik**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/27265_\n\n",
    "closed_at": "2019-07-15T15:49:25Z",
    "created_at": "2019-02-12T16:19:49Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build%3A%20configure",
        "https://github.com/sagemath/sage/labels/duplicate",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "spkg-configure.m4 for NTL",
    "type": "issue",
    "updated_at": "2019-07-15T15:49:25Z",
    "url": "https://github.com/sagemath/sage/issues/27265",
    "user": "https://github.com/dimpase"
}
```
implemented a direct version check using `AC_RUN_IFELSE`.
The rest is standard, as in #27212, basically.

to be merged as a part of #27822

Depends on #27212
Depends on #27641
Depends on #27751
Depends on #27259

CC:  @embray @kiwifb @jdemeyer

Component: **build: configure**

Keywords: **spkg-configure ntl**

Author: **Dima Pasechnik, Erik Bray**

Branch/Commit: **[public/packages/ntlconf](https://github.com/sagemath/sagetrac-mirror/tree/public/packages/ntlconf) @ [`892143a`](https://github.com/sagemath/sagetrac-mirror/commit/892143a2d89591044dc20a3c87ecccaffdd46dd7)**

Reviewer: **Erik Bray, Dima Pasechnik**

_Issue created by migration from https://trac.sagemath.org/ticket/27265_





---

archive/issue_events_371673.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-02-12T16:19:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371673"
}
```



---

archive/issue_events_371674.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-02-12T16:19:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "0000b0",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371674"
}
```



---

archive/issue_events_371675.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-02-12T16:19:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371675"
}
```



---

archive/issue_events_371676.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-02-12T16:19:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371676"
}
```



---

archive/issue_comments_421188.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,9 @@\n+one can basically borrow NTL recognition, `LB_CHECK_NTL`, from\n+http://web.mit.edu/sage/export/linbox-1.1.6~rc0/m4/ntl-check.m4\n \n+```\n+SAGE_SPKG_CONFIGURE([ntl], [\n+    LB_CHECK_NTL(10.3, [sage_spkg_install_ntl=no], [sage_spkg_install_ntl=yes])\n+    ])\n+```\n+--- not sure what's the latest version of it.\n``````\n",
    "created_at": "2019-02-23T23:24:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421188",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,9 @@
+one can basically borrow NTL recognition, `LB_CHECK_NTL`, from
+http://web.mit.edu/sage/export/linbox-1.1.6~rc0/m4/ntl-check.m4
 
+```
+SAGE_SPKG_CONFIGURE([ntl], [
+    LB_CHECK_NTL(10.3, [sage_spkg_install_ntl=no], [sage_spkg_install_ntl=yes])
+    ])
+```
+--- not sure what's the latest version of it.
``````




---

archive/issue_comments_421189.json:
```json
{
    "body": "Dependencies: **#27212**",
    "created_at": "2019-02-23T23:25:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421189",
    "user": "https://github.com/dimpase"
}
```

Dependencies: **#27212**



---

archive/issue_comments_421190.json:
```json
{
    "body": "Changed dependencies from **#27212** to **#27212, #27238**",
    "created_at": "2019-02-26T17:40:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421190",
    "user": "https://github.com/dimpase"
}
```

Changed dependencies from **#27212** to **#27212, #27238**



---

archive/issue_comments_421191.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nhere we might want to check that NTL is built with gf2x. However, it appears that it's only question of better performance, not an exta API, if it gf2x is linked.",
    "created_at": "2019-03-20T17:27:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421191",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:4" align="right">comment:4</div>

here we might want to check that NTL is built with gf2x. However, it appears that it's only question of better performance, not an exta API, if it gf2x is linked.



---

archive/issue_comments_421192.json:
```json
{
    "body": "Branch: **[u/dimpase/packages/ntlconf](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/ntlconf)**",
    "created_at": "2019-03-20T22:57:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421192",
    "user": "https://github.com/dimpase"
}
```

Branch: **[u/dimpase/packages/ntlconf](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/ntlconf)**



---

archive/issue_comments_421193.json:
```json
{
    "body": "Commit: **[`af9ab90`](https://github.com/sagemath/sagetrac-mirror/commit/af9ab9027f999907cc420d1ddc79950d2b8064e1)**",
    "created_at": "2019-03-20T22:57:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421193",
    "user": "https://github.com/dimpase"
}
```

Commit: **[`af9ab90`](https://github.com/sagemath/sagetrac-mirror/commit/af9ab9027f999907cc420d1ddc79950d2b8064e1)**



---

archive/issue_events_371677.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-03-20T22:57:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371677"
}
```



---

archive/issue_comments_421194.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b80bf726f85843031b461348944c78a39dae453e\"><code>b80bf72</code></a></td><td><code>Reworked this a bit more</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0ca3f5676d759bc658708f7f0986ceec569f3d51\"><code>0ca3f56</code></a></td><td><code>fix typo</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/06798ca585f1187bd8511a1ca530581028aab99e\"><code>06798ca</code></a></td><td><code>added a bit more explanation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b592d77c204865c293ef473abb7a70ecbaf9e17b\"><code>b592d77</code></a></td><td><code>correct logic for SAGE_GMP_PREFIX etc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5057680b1ff2829d1ed0558ef4042472c03c63ae\"><code>5057680</code></a></td><td><code>add the AX_ABSOLUTE_HEADER macro</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/101537b93c3343a3e7a8554d8e82d8da36be5691\"><code>101537b</code></a></td><td><code>iml in particular is very picky about being given an absolute path to the</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/862ca6af87ac256bf726b0bd7ef7439e2d9b0080\"><code>862ca6a</code></a></td><td><code>Merge remote-tracking branch 'trac/develop' into HEAD</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/03dc987c6d475279b0008fa8f5ba37a0045bb75e\"><code>03dc987</code></a></td><td><code>Merged trac #27215 in</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c9873ae45cd846adaf3490c9e2fe57dc87333b3a\"><code>c9873ae</code></a></td><td><code>Merge remote-tracking branch 'trac/develop' into mpf</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/af9ab9027f999907cc420d1ddc79950d2b8064e1\"><code>af9ab90</code></a></td><td><code>deal with --with-ntl, proper version check</code></td></tr></table>\n",
    "created_at": "2019-03-20T22:57:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421194",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:5"></div>

Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b80bf726f85843031b461348944c78a39dae453e"><code>b80bf72</code></a></td><td><code>Reworked this a bit more</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0ca3f5676d759bc658708f7f0986ceec569f3d51"><code>0ca3f56</code></a></td><td><code>fix typo</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/06798ca585f1187bd8511a1ca530581028aab99e"><code>06798ca</code></a></td><td><code>added a bit more explanation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b592d77c204865c293ef473abb7a70ecbaf9e17b"><code>b592d77</code></a></td><td><code>correct logic for SAGE_GMP_PREFIX etc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5057680b1ff2829d1ed0558ef4042472c03c63ae"><code>5057680</code></a></td><td><code>add the AX_ABSOLUTE_HEADER macro</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/101537b93c3343a3e7a8554d8e82d8da36be5691"><code>101537b</code></a></td><td><code>iml in particular is very picky about being given an absolute path to the</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/862ca6af87ac256bf726b0bd7ef7439e2d9b0080"><code>862ca6a</code></a></td><td><code>Merge remote-tracking branch 'trac/develop' into HEAD</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/03dc987c6d475279b0008fa8f5ba37a0045bb75e"><code>03dc987</code></a></td><td><code>Merged trac #27215 in</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c9873ae45cd846adaf3490c9e2fe57dc87333b3a"><code>c9873ae</code></a></td><td><code>Merge remote-tracking branch 'trac/develop' into mpf</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/af9ab9027f999907cc420d1ddc79950d2b8064e1"><code>af9ab90</code></a></td><td><code>deal with --with-ntl, proper version check</code></td></tr></table>




---

archive/issue_comments_421195.json:
```json
{
    "body": "Author: **Dima Pasechnik**",
    "created_at": "2019-03-20T22:57:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421195",
    "user": "https://github.com/dimpase"
}
```

Author: **Dima Pasechnik**



---

archive/issue_comments_421196.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,9 +1,2 @@\n-one can basically borrow NTL recognition, `LB_CHECK_NTL`, from\n-http://web.mit.edu/sage/export/linbox-1.1.6~rc0/m4/ntl-check.m4\n-\n-```\n-SAGE_SPKG_CONFIGURE([ntl], [\n-    LB_CHECK_NTL(10.3, [sage_spkg_install_ntl=no], [sage_spkg_install_ntl=yes])\n-    ])\n-```\n---- not sure what's the latest version of it.\n+implemented a direct version check using `AC_RUN_IFELSE`.\n+The rest is standard, as in #27212, basically.\n``````\n",
    "created_at": "2019-03-20T22:57:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421196",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,9 +1,2 @@
-one can basically borrow NTL recognition, `LB_CHECK_NTL`, from
-http://web.mit.edu/sage/export/linbox-1.1.6~rc0/m4/ntl-check.m4
-
-```
-SAGE_SPKG_CONFIGURE([ntl], [
-    LB_CHECK_NTL(10.3, [sage_spkg_install_ntl=no], [sage_spkg_install_ntl=yes])
-    ])
-```
---- not sure what's the latest version of it.
+implemented a direct version check using `AC_RUN_IFELSE`.
+The rest is standard, as in #27212, basically.
``````




---

archive/issue_comments_421197.json:
```json
{
    "body": "Changed dependencies from **#27212, #27238** to **#27212**",
    "created_at": "2019-03-21T12:03:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421197",
    "user": "https://github.com/dimpase"
}
```

Changed dependencies from **#27212, #27238** to **#27212**



---

archive/issue_comments_421198.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nnesting of `AC_...` tests is wrong.",
    "created_at": "2019-03-21T14:22:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421198",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:7" align="right">comment:7</div>

nesting of `AC_...` tests is wrong.



---

archive/issue_comments_421199.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nTicket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)",
    "created_at": "2019-03-25T10:56:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421199",
    "user": "https://github.com/embray"
}
```

<div id="comment:8" align="right">comment:8</div>

Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)



---

archive/issue_events_371678.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371678"
}
```



---

archive/issue_events_371679.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371679"
}
```



---

archive/issue_comments_421200.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nalso needs\n\n```diff\n+++ b/build/pkgs/flint/spkg-install\n@@ -17,7 +17,7 @@ echo \"Configuring FLINT.\"\n     --disable-static \\\n     --prefix=\"$SAGE_LOCAL\" \\\n     $SAGE_CONFIGURE_GMP \\\n-    $SAGE_CONFIGURE_NTL \\\n+    --with-ntl=\"$SAGE_NTL_PREFIX\" \\\n     $SAGE_CONFIGURE_MPFR \\\n     $FLINT_CONFIGURE || sdh_die \"Error: Failed to configure FLINT.\"\n```\nas completely omitting `--with-ntl` results in no NTL linked into flint.",
    "created_at": "2019-04-06T00:11:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421200",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:9" align="right">comment:9</div>

also needs

```diff
+++ b/build/pkgs/flint/spkg-install
@@ -17,7 +17,7 @@ echo "Configuring FLINT."
     --disable-static \
     --prefix="$SAGE_LOCAL" \
     $SAGE_CONFIGURE_GMP \
-    $SAGE_CONFIGURE_NTL \
+    --with-ntl="$SAGE_NTL_PREFIX" \
     $SAGE_CONFIGURE_MPFR \
     $FLINT_CONFIGURE || sdh_die "Error: Failed to configure FLINT."
```
as completely omitting `--with-ntl` results in no NTL linked into flint.



---

archive/issue_comments_421201.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/299e367746ee7fb9927596329ace50661a348b4e\"><code>299e367</code></a></td><td><code>Replace various --with-gmp=$SAGE_LOCAL flags in spkg-installs with a</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/058d5150d33c5fa042c8a0d75be294491d343c3e\"><code>058d515</code></a></td><td><code>Reworked this a bit more</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7beadaa98da47f5f1fad300c1a1e8ba38588422e\"><code>7beadaa</code></a></td><td><code>fix typo</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b9308743cb797c73651a30ae15a20292eae16654\"><code>b930874</code></a></td><td><code>added a bit more explanation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d2b496cf7b11ddc51b5f30850fd1af5b4bea579\"><code>6d2b496</code></a></td><td><code>correct logic for SAGE_GMP_PREFIX etc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/43be5464120b654febec9984711c6846105d3572\"><code>43be546</code></a></td><td><code>add the AX_ABSOLUTE_HEADER macro</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e343418b1bf4fe9dece46e5fd6dcb3804985ad86\"><code>e343418</code></a></td><td><code>iml in particular is very picky about being given an absolute path to the</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e735b4bd95072234d72385ee78634b9000f7e420\"><code>e735b4b</code></a></td><td><code>configure version bump</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cefb350c171d9dc3f96ac0eb06f21e0b93ef546a\"><code>cefb350</code></a></td><td><code>deal with --with-ntl, proper version check</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4378cbfd543cd10f2716a2c918b2c01ee265bbe\"><code>d4378cb</code></a></td><td><code>flint needs --with-ntl= always</code></td></tr></table>\n",
    "created_at": "2019-04-18T10:33:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421201",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/299e367746ee7fb9927596329ace50661a348b4e"><code>299e367</code></a></td><td><code>Replace various --with-gmp=$SAGE_LOCAL flags in spkg-installs with a</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/058d5150d33c5fa042c8a0d75be294491d343c3e"><code>058d515</code></a></td><td><code>Reworked this a bit more</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7beadaa98da47f5f1fad300c1a1e8ba38588422e"><code>7beadaa</code></a></td><td><code>fix typo</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b9308743cb797c73651a30ae15a20292eae16654"><code>b930874</code></a></td><td><code>added a bit more explanation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d2b496cf7b11ddc51b5f30850fd1af5b4bea579"><code>6d2b496</code></a></td><td><code>correct logic for SAGE_GMP_PREFIX etc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/43be5464120b654febec9984711c6846105d3572"><code>43be546</code></a></td><td><code>add the AX_ABSOLUTE_HEADER macro</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e343418b1bf4fe9dece46e5fd6dcb3804985ad86"><code>e343418</code></a></td><td><code>iml in particular is very picky about being given an absolute path to the</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e735b4bd95072234d72385ee78634b9000f7e420"><code>e735b4b</code></a></td><td><code>configure version bump</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cefb350c171d9dc3f96ac0eb06f21e0b93ef546a"><code>cefb350</code></a></td><td><code>deal with --with-ntl, proper version check</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4378cbfd543cd10f2716a2c918b2c01ee265bbe"><code>d4378cb</code></a></td><td><code>flint needs --with-ntl= always</code></td></tr></table>




---

archive/issue_comments_421202.json:
```json
{
    "body": "Changed commit from **[`af9ab90`](https://github.com/sagemath/sagetrac-mirror/commit/af9ab9027f999907cc420d1ddc79950d2b8064e1)** to **[`d4378cb`](https://github.com/sagemath/sagetrac-mirror/commit/d4378cbfd543cd10f2716a2c918b2c01ee265bbe)**",
    "created_at": "2019-04-18T10:33:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421202",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`af9ab90`](https://github.com/sagemath/sagetrac-mirror/commit/af9ab9027f999907cc420d1ddc79950d2b8064e1)** to **[`d4378cb`](https://github.com/sagemath/sagetrac-mirror/commit/d4378cbfd543cd10f2716a2c918b2c01ee265bbe)**



---

archive/issue_comments_421203.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nrebased over the latest #27212 and fixed [comment:9](#comment%3A9) issue.",
    "created_at": "2019-04-18T10:34:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421203",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:11" align="right">comment:11</div>

rebased over the latest #27212 and fixed [comment:9](#comment%3A9) issue.



---

archive/issue_comments_421204.json:
```json
{
    "body": "Changed commit from **[`d4378cb`](https://github.com/sagemath/sagetrac-mirror/commit/d4378cbfd543cd10f2716a2c918b2c01ee265bbe)** to **[`8fe9503`](https://github.com/sagemath/sagetrac-mirror/commit/8fe9503a580b506aec1abc0de2fafaf0d2c5501d)**",
    "created_at": "2019-04-18T21:34:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421204",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d4378cb`](https://github.com/sagemath/sagetrac-mirror/commit/d4378cbfd543cd10f2716a2c918b2c01ee265bbe)** to **[`8fe9503`](https://github.com/sagemath/sagetrac-mirror/commit/8fe9503a580b506aec1abc0de2fafaf0d2c5501d)**



---

archive/issue_comments_421205.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8fe9503a580b506aec1abc0de2fafaf0d2c5501d\"><code>8fe9503</code></a></td><td><code>check for deps of ntl</code></td></tr></table>\n",
    "created_at": "2019-04-18T21:34:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421205",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8fe9503a580b506aec1abc0de2fafaf0d2c5501d"><code>8fe9503</code></a></td><td><code>check for deps of ntl</code></td></tr></table>




---

archive/issue_comments_421206.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nThis is ready for review now. Note that often external NTL packages are built without `gf2x`, but `gf2x` is merely an optimisation. \n\nPerhaps, to be completely on the safe side, `spkg-configure` should check whether `gf2x` is in, and if it is, only use system's NTL if `gf2x` will come from the system, too.\n(But I  don't know how to check whether `gf2x` is used in NTL, at least not in an OS-independent way).",
    "created_at": "2019-04-19T07:30:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421206",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:13" align="right">comment:13</div>

This is ready for review now. Note that often external NTL packages are built without `gf2x`, but `gf2x` is merely an optimisation. 

Perhaps, to be completely on the safe side, `spkg-configure` should check whether `gf2x` is in, and if it is, only use system's NTL if `gf2x` will come from the system, too.
(But I  don't know how to check whether `gf2x` is used in NTL, at least not in an OS-independent way).



---

archive/issue_comments_421207.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nMinor remark (it all looks ok) why keep `--with-ntl=\"$SAGE_NTL_PREFIX\"` instead of using `$SAGE_CONFIGURE_NTL` like everywhere else in `flint`?",
    "created_at": "2019-04-19T07:37:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421207",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:15" align="right">comment:15</div>

Minor remark (it all looks ok) why keep `--with-ntl="$SAGE_NTL_PREFIX"` instead of using `$SAGE_CONFIGURE_NTL` like everywhere else in `flint`?



---

archive/issue_comments_421208.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@kiwifb](#comment%3A15):\n> Minor remark (it all looks ok) why keep `--with-ntl=\"$SAGE_NTL_PREFIX\"` instead of using `$SAGE_CONFIGURE_NTL` like everywhere else in `flint`?\n\nBecause `$SAGE_CONFIGURE_NTL` is empty if NTL comes from the system, but `flint` must have `--with-ntl` to build NTL interface.",
    "created_at": "2019-04-19T08:21:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421208",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@kiwifb](#comment%3A15):
> Minor remark (it all looks ok) why keep `--with-ntl="$SAGE_NTL_PREFIX"` instead of using `$SAGE_CONFIGURE_NTL` like everywhere else in `flint`?

Because `$SAGE_CONFIGURE_NTL` is empty if NTL comes from the system, but `flint` must have `--with-ntl` to build NTL interface.



---

archive/issue_comments_421209.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@dimpase](#comment%3A16):\n> Replying to [@kiwifb](#comment%3A15):\n> > Minor remark (it all looks ok) why keep `--with-ntl=\"$SAGE_NTL_PREFIX\"` instead of using `$SAGE_CONFIGURE_NTL` like everywhere else in `flint`?\n\n> \n> Because `$SAGE_CONFIGURE_NTL` is empty if NTL comes from the system, but `flint` must have `--with-ntl` to build NTL interface.\n\nThank you for your answer. Once we get some bots reports I think we can move to a positive review.",
    "created_at": "2019-04-19T08:57:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421209",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@dimpase](#comment%3A16):
> Replying to [@kiwifb](#comment%3A15):
> > Minor remark (it all looks ok) why keep `--with-ntl="$SAGE_NTL_PREFIX"` instead of using `$SAGE_CONFIGURE_NTL` like everywhere else in `flint`?

> 
> Because `$SAGE_CONFIGURE_NTL` is empty if NTL comes from the system, but `flint` must have `--with-ntl` to build NTL interface.

Thank you for your answer. Once we get some bots reports I think we can move to a positive review.



---

archive/issue_comments_421210.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nbots will need need a configure tarball. I'll add it.",
    "created_at": "2019-04-19T09:40:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421210",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:18" align="right">comment:18</div>

bots will need need a configure tarball. I'll add it.



---

archive/issue_comments_421211.json:
```json
{
    "body": "Attachment: **[configure-318.tar.gz](https://github.com/sagemath/sage/files/ticket27265/configure-318.tar.gz)**\n\nupdated configure spkg",
    "created_at": "2019-04-19T09:58:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421211",
    "user": "https://github.com/dimpase"
}
```

Attachment: **[configure-318.tar.gz](https://github.com/sagemath/sage/files/ticket27265/configure-318.tar.gz)**

updated configure spkg



---

archive/issue_comments_421212.json:
```json
{
    "body": "Changed commit from **[`8fe9503`](https://github.com/sagemath/sagetrac-mirror/commit/8fe9503a580b506aec1abc0de2fafaf0d2c5501d)** to **[`8473c7f`](https://github.com/sagemath/sagetrac-mirror/commit/8473c7f9bbb37ab337bd32e2756106664c42c56b)**",
    "created_at": "2019-04-19T10:09:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421212",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8fe9503`](https://github.com/sagemath/sagetrac-mirror/commit/8fe9503a580b506aec1abc0de2fafaf0d2c5501d)** to **[`8473c7f`](https://github.com/sagemath/sagetrac-mirror/commit/8473c7f9bbb37ab337bd32e2756106664c42c56b)**



---

archive/issue_comments_421213.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8473c7f9bbb37ab337bd32e2756106664c42c56b\"><code>8473c7f</code></a></td><td><code>bumped up configure spkg</code></td></tr></table>\n",
    "created_at": "2019-04-19T10:09:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421213",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8473c7f9bbb37ab337bd32e2756106664c42c56b"><code>8473c7f</code></a></td><td><code>bumped up configure spkg</code></td></tr></table>




---

archive/issue_comments_421214.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\narrgh, and why is this cannot be merged?",
    "created_at": "2019-04-19T10:14:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421214",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:20" align="right">comment:20</div>

arrgh, and why is this cannot be merged?



---

archive/issue_comments_421215.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1d165a819894dfb3151fe7a66ad3dbb0872e6408\"><code>1d165a8</code></a></td><td><code>deal with --with-ntl, proper version check</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5817a99550e7a8329d26b07ccb5015a7f08870aa\"><code>5817a99</code></a></td><td><code>flint needs --with-ntl= always</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6979e438fcb022afa30f04f6521e2b8367f0c098\"><code>6979e43</code></a></td><td><code>check for deps of ntl</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bc2f2778cb064293278d89f2c6ec7e3faddb0c75\"><code>bc2f277</code></a></td><td><code>bumped up configure spkg</code></td></tr></table>\n",
    "created_at": "2019-04-19T10:32:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421215",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1d165a819894dfb3151fe7a66ad3dbb0872e6408"><code>1d165a8</code></a></td><td><code>deal with --with-ntl, proper version check</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5817a99550e7a8329d26b07ccb5015a7f08870aa"><code>5817a99</code></a></td><td><code>flint needs --with-ntl= always</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6979e438fcb022afa30f04f6521e2b8367f0c098"><code>6979e43</code></a></td><td><code>check for deps of ntl</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bc2f2778cb064293278d89f2c6ec7e3faddb0c75"><code>bc2f277</code></a></td><td><code>bumped up configure spkg</code></td></tr></table>




---

archive/issue_comments_421216.json:
```json
{
    "body": "Changed commit from **[`8473c7f`](https://github.com/sagemath/sagetrac-mirror/commit/8473c7f9bbb37ab337bd32e2756106664c42c56b)** to **[`bc2f277`](https://github.com/sagemath/sagetrac-mirror/commit/bc2f2778cb064293278d89f2c6ec7e3faddb0c75)**",
    "created_at": "2019-04-19T10:32:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421216",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8473c7f`](https://github.com/sagemath/sagetrac-mirror/commit/8473c7f9bbb37ab337bd32e2756106664c42c56b)** to **[`bc2f277`](https://github.com/sagemath/sagetrac-mirror/commit/bc2f2778cb064293278d89f2c6ec7e3faddb0c75)**



---

archive/issue_comments_421217.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,4 @@\n implemented a direct version check using `AC_RUN_IFELSE`.\n The rest is standard, as in #27212, basically.\n+\n+configure tarball: http://users.ox.ac.uk/~coml0531/sage/configure-317.tar.gz\n``````\n",
    "created_at": "2019-04-19T10:33:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421217",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,4 @@
 implemented a direct version check using `AC_RUN_IFELSE`.
 The rest is standard, as in #27212, basically.
+
+configure tarball: http://users.ox.ac.uk/~coml0531/sage/configure-317.tar.gz
``````




---

archive/issue_comments_421218.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nas noted on #27751, build/pkgs/barvinok/spkg-install has missing then(s) in if(s)",
    "created_at": "2019-04-30T13:43:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421218",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:23" align="right">comment:23</div>

as noted on #27751, build/pkgs/barvinok/spkg-install has missing then(s) in if(s)



---

archive/issue_events_371680.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-04-30T13:43:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371680"
}
```



---

archive/issue_events_371681.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-04-30T13:43:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371681"
}
```



---

archive/issue_comments_421219.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e758967c3ec4d129a15b18c6b63da277241f7968\"><code>e758967</code></a></td><td><code>adding missing then in if</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1c7c182b61a85e9c00b659c7eccb96041f1b4d64\"><code>1c7c182</code></a></td><td><code>Merge branch 'barvinokfix1' into ntlconf</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1353705a47090fe937e34696f8bfb2f0f48ebdc4\"><code>1353705</code></a></td><td><code>another missing then</code></td></tr></table>\n",
    "created_at": "2019-04-30T13:47:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421219",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e758967c3ec4d129a15b18c6b63da277241f7968"><code>e758967</code></a></td><td><code>adding missing then in if</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1c7c182b61a85e9c00b659c7eccb96041f1b4d64"><code>1c7c182</code></a></td><td><code>Merge branch 'barvinokfix1' into ntlconf</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1353705a47090fe937e34696f8bfb2f0f48ebdc4"><code>1353705</code></a></td><td><code>another missing then</code></td></tr></table>




---

archive/issue_comments_421220.json:
```json
{
    "body": "Changed commit from **[`bc2f277`](https://github.com/sagemath/sagetrac-mirror/commit/bc2f2778cb064293278d89f2c6ec7e3faddb0c75)** to **[`1353705`](https://github.com/sagemath/sagetrac-mirror/commit/1353705a47090fe937e34696f8bfb2f0f48ebdc4)**",
    "created_at": "2019-04-30T13:47:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421220",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`bc2f277`](https://github.com/sagemath/sagetrac-mirror/commit/bc2f2778cb064293278d89f2c6ec7e3faddb0c75)** to **[`1353705`](https://github.com/sagemath/sagetrac-mirror/commit/1353705a47090fe937e34696f8bfb2f0f48ebdc4)**



---

archive/issue_comments_421221.json:
```json
{
    "body": "Changed dependencies from **#27212** to **#27212, #27751**",
    "created_at": "2019-04-30T13:49:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421221",
    "user": "https://github.com/dimpase"
}
```

Changed dependencies from **#27212** to **#27212, #27751**



---

archive/issue_events_371682.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-04-30T13:49:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371682"
}
```



---

archive/issue_events_371683.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-04-30T13:49:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371683"
}
```



---

archive/issue_comments_421222.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nthis is a followup to #27212, and related to `barvinok`, please review...",
    "created_at": "2019-04-30T14:02:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421222",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:26" align="right">comment:26</div>

this is a followup to #27212, and related to `barvinok`, please review...



---

archive/issue_comments_421223.json:
```json
{
    "body": "Changed keywords from none to **spkg-configure ntl**",
    "created_at": "2019-05-10T14:43:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421223",
    "user": "https://github.com/embray"
}
```

Changed keywords from none to **spkg-configure ntl**



---

archive/issue_events_371684.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-05-10T14:43:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build%3A%20configure",
    "label_color": "0000b0",
    "label_name": "c: build: configure",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371684"
}
```



---

archive/issue_events_371685.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-05-10T14:43:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "0000b0",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371685"
}
```



---

archive/issue_comments_421224.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nTrying to get this to work now.  I rebased it on current develop and reworked it similarly to #27259.  I also have it check if we are installing the gf2x SPKG or not (we really need a utility macro for dependency handling).\n\nBut I get this:\n\n```\nconfigure: === checking whether to install the ntl SPKG ===\nchecking installing gmp/mpir? ... no\nchecking installing gf2x? ... no\nchecking NTL/ZZ.h usability... yes\nchecking NTL/ZZ.h presence... yes\nchecking for NTL/ZZ.h... yes\n```\n\nbut then nothing.  I don't see any output related to the `AC_LINK_IFELSE` and `AC_RUN_IFELSE` commands.  I guess one of them is failing (I will check config.log next).\n\nI guess these macros just don't have any default output?  If not, we should add some.",
    "created_at": "2019-05-10T15:09:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421224",
    "user": "https://github.com/embray"
}
```

<div id="comment:28" align="right">comment:28</div>

Trying to get this to work now.  I rebased it on current develop and reworked it similarly to #27259.  I also have it check if we are installing the gf2x SPKG or not (we really need a utility macro for dependency handling).

But I get this:

```
configure: === checking whether to install the ntl SPKG ===
checking installing gmp/mpir? ... no
checking installing gf2x? ... no
checking NTL/ZZ.h usability... yes
checking NTL/ZZ.h presence... yes
checking for NTL/ZZ.h... yes
```

but then nothing.  I don't see any output related to the `AC_LINK_IFELSE` and `AC_RUN_IFELSE` commands.  I guess one of them is failing (I will check config.log next).

I guess these macros just don't have any default output?  If not, we should add some.



---

archive/issue_comments_421225.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\ngf2x is not compulsory for NTL. It works without it, too. So just don't do it.",
    "created_at": "2019-05-10T15:23:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421225",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:29" align="right">comment:29</div>

gf2x is not compulsory for NTL. It works without it, too. So just don't do it.



---

archive/issue_comments_421226.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nIn fact, it's why it's not possible to check whether gf2x is used with NTL in any \"normal\" way, (one does not want to run ldd on the library, right?)",
    "created_at": "2019-05-10T15:28:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421226",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:30" align="right">comment:30</div>

In fact, it's why it's not possible to check whether gf2x is used with NTL in any "normal" way, (one does not want to run ldd on the library, right?)



---

archive/issue_comments_421227.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nI see the problem; I messed up the NTL version check stuff you did.\n\nI don't even know what gf2x is so I'll take your word for it and remove that part.",
    "created_at": "2019-05-10T15:30:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421227",
    "user": "https://github.com/embray"
}
```

<div id="comment:31" align="right">comment:31</div>

I see the problem; I messed up the NTL version check stuff you did.

I don't even know what gf2x is so I'll take your word for it and remove that part.



---

archive/issue_comments_421228.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\ngf2x does fast arithmetic for finite fields of even order. So without it NTL is a bit slower on these very special problems, that's all.",
    "created_at": "2019-05-10T15:34:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421228",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:32" align="right">comment:32</div>

gf2x does fast arithmetic for finite fields of even order. So without it NTL is a bit slower on these very special problems, that's all.



---

archive/issue_comments_421229.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nOut of curiosity, where did you come up with 3.10 as the minimum version of NTL?  The version in Sage is 11.3.2, and the system package I have has 10.5.0.",
    "created_at": "2019-05-10T15:48:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421229",
    "user": "https://github.com/embray"
}
```

<div id="comment:33" align="right">comment:33</div>

Out of curiosity, where did you come up with 3.10 as the minimum version of NTL?  The version in Sage is 11.3.2, and the system package I have has 10.5.0.



---

archive/issue_comments_421230.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nFedora 26 has NTL 10.3 (I guess you didn't mean 3.10...).",
    "created_at": "2019-05-10T16:03:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421230",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:34" align="right">comment:34</div>

Fedora 26 has NTL 10.3 (I guess you didn't mean 3.10...).



---

archive/issue_comments_421231.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nRebased and incorporated #27641.  Also fixed the version check, which didn't have correct logic.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d9bbdd48eb4a73bcc913c2f3d2ac5eecd15adf52\"><code>d9bbdd4</code></a></td><td><code>Add support for unconditional pre- and post-check actions in spkg-configure.m4</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a3605187face93bd02a16089ce1121a7348ed2a3\"><code>a360518</code></a></td><td><code>Refactor the mpir/spkg-configure.m4 (and to a lesser extent the one for gmp) to use the new pre and post arguments to SAGE_SPKG_CONFIGURE</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d09da57f377d1274c7434e368d99a8fd482c4d7b\"><code>d09da57</code></a></td><td><code>deal with --with-ntl, proper version check</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2ebf5b367c62def637fdc2955a80134a56439e0b\"><code>2ebf5b3</code></a></td><td><code>flint needs --with-ntl= always</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bc10f2e9e50fc8c7141e14e330e6cc65ab689e1b\"><code>bc10f2e</code></a></td><td><code>check for deps of ntl</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f16e43ebd7576dd6f848ac211cb033619d6263fd\"><code>f16e43e</code></a></td><td><code>Clean up ntl/spkg-configure.m4</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/58cb21f84dd66e5c2cf9b61da334afeb8f560e9e\"><code>58cb21f</code></a></td><td><code>cleanup tabs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a900fc0b4e61490ccd8a7d95b24d0cc95a1b619\"><code>3a900fc</code></a></td><td><code>Remove unnecessary check for gf2x</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/27f7e5859d2fed6b946170662874895e44561282\"><code>27f7e58</code></a></td><td><code>Fix NTL version check logic.</code></td></tr></table>\n",
    "created_at": "2019-05-10T17:26:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421231",
    "user": "https://github.com/embray"
}
```

<div id="comment:35" align="right">comment:35</div>

Rebased and incorporated #27641.  Also fixed the version check, which didn't have correct logic.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d9bbdd48eb4a73bcc913c2f3d2ac5eecd15adf52"><code>d9bbdd4</code></a></td><td><code>Add support for unconditional pre- and post-check actions in spkg-configure.m4</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a3605187face93bd02a16089ce1121a7348ed2a3"><code>a360518</code></a></td><td><code>Refactor the mpir/spkg-configure.m4 (and to a lesser extent the one for gmp) to use the new pre and post arguments to SAGE_SPKG_CONFIGURE</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d09da57f377d1274c7434e368d99a8fd482c4d7b"><code>d09da57</code></a></td><td><code>deal with --with-ntl, proper version check</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2ebf5b367c62def637fdc2955a80134a56439e0b"><code>2ebf5b3</code></a></td><td><code>flint needs --with-ntl= always</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bc10f2e9e50fc8c7141e14e330e6cc65ab689e1b"><code>bc10f2e</code></a></td><td><code>check for deps of ntl</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f16e43ebd7576dd6f848ac211cb033619d6263fd"><code>f16e43e</code></a></td><td><code>Clean up ntl/spkg-configure.m4</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/58cb21f84dd66e5c2cf9b61da334afeb8f560e9e"><code>58cb21f</code></a></td><td><code>cleanup tabs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a900fc0b4e61490ccd8a7d95b24d0cc95a1b619"><code>3a900fc</code></a></td><td><code>Remove unnecessary check for gf2x</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/27f7e5859d2fed6b946170662874895e44561282"><code>27f7e58</code></a></td><td><code>Fix NTL version check logic.</code></td></tr></table>




---

archive/issue_comments_421232.json:
```json
{
    "body": "Changed dependencies from **#27212, #27751** to **#27212, #27641, #27751**",
    "created_at": "2019-05-10T17:26:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421232",
    "user": "https://github.com/embray"
}
```

Changed dependencies from **#27212, #27751** to **#27212, #27641, #27751**



---

archive/issue_comments_421233.json:
```json
{
    "body": "Changed branch from **[u/dimpase/packages/ntlconf](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/ntlconf)** to **[public/packages/ntlconf](https://github.com/sagemath/sagetrac-mirror/tree/public/packages/ntlconf)**",
    "created_at": "2019-05-10T17:26:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421233",
    "user": "https://github.com/embray"
}
```

Changed branch from **[u/dimpase/packages/ntlconf](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/ntlconf)** to **[public/packages/ntlconf](https://github.com/sagemath/sagetrac-mirror/tree/public/packages/ntlconf)**



---

archive/issue_comments_421234.json:
```json
{
    "body": "Changed commit from **[`1353705`](https://github.com/sagemath/sagetrac-mirror/commit/1353705a47090fe937e34696f8bfb2f0f48ebdc4)** to **[`27f7e58`](https://github.com/sagemath/sagetrac-mirror/commit/27f7e5859d2fed6b946170662874895e44561282)**",
    "created_at": "2019-05-10T17:26:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421234",
    "user": "https://github.com/embray"
}
```

Changed commit from **[`1353705`](https://github.com/sagemath/sagetrac-mirror/commit/1353705a47090fe937e34696f8bfb2f0f48ebdc4)** to **[`27f7e58`](https://github.com/sagemath/sagetrac-mirror/commit/27f7e5859d2fed6b946170662874895e44561282)**



---

archive/issue_comments_421235.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nRight, you had 10.3.  I guess I was having a dyslexic moment.  I'll fix that.",
    "created_at": "2019-05-10T17:27:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421235",
    "user": "https://github.com/embray"
}
```

<div id="comment:36" align="right">comment:36</div>

Right, you had 10.3.  I guess I was having a dyslexic moment.  I'll fix that.



---

archive/issue_comments_421236.json:
```json
{
    "body": "<div id=\"comment:37\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2f2d3e1a2606b57ae813b6d28d8c99952fef9bfd\"><code>2f2d3e1</code></a></td><td><code>Accidentally swapped major/minor versions for minimum NTL version</code></td></tr></table>\n",
    "created_at": "2019-05-10T17:27:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421236",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:37"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2f2d3e1a2606b57ae813b6d28d8c99952fef9bfd"><code>2f2d3e1</code></a></td><td><code>Accidentally swapped major/minor versions for minimum NTL version</code></td></tr></table>




---

archive/issue_comments_421237.json:
```json
{
    "body": "Changed commit from **[`27f7e58`](https://github.com/sagemath/sagetrac-mirror/commit/27f7e5859d2fed6b946170662874895e44561282)** to **[`2f2d3e1`](https://github.com/sagemath/sagetrac-mirror/commit/2f2d3e1a2606b57ae813b6d28d8c99952fef9bfd)**",
    "created_at": "2019-05-10T17:27:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421237",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`27f7e58`](https://github.com/sagemath/sagetrac-mirror/commit/27f7e5859d2fed6b946170662874895e44561282)** to **[`2f2d3e1`](https://github.com/sagemath/sagetrac-mirror/commit/2f2d3e1a2606b57ae813b6d28d8c99952fef9bfd)**



---

archive/issue_comments_421238.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nThis builds for me, again on the Ubuntu 18.04 machine I'm using, with NTL 10.5.",
    "created_at": "2019-05-10T17:29:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421238",
    "user": "https://github.com/embray"
}
```

<div id="comment:38" align="right">comment:38</div>

This builds for me, again on the Ubuntu 18.04 machine I'm using, with NTL 10.5.



---

archive/issue_comments_421239.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nI am wondering why one needs these m4_push/popdefs...",
    "created_at": "2019-05-10T17:42:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421239",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:39" align="right">comment:39</div>

I am wondering why one needs these m4_push/popdefs...



---

archive/issue_comments_421240.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nOK, this works. I've merged mpfr+mpc+ntl in the branch `u/dimpase/build/mpfr-mpc-ntl`\n(which is not automatic) and tested it, as well.",
    "created_at": "2019-05-11T21:58:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421240",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:40" align="right">comment:40</div>

OK, this works. I've merged mpfr+mpc+ntl in the branch `u/dimpase/build/mpfr-mpc-ntl`
(which is not automatic) and tested it, as well.



---

archive/issue_comments_421241.json:
```json
{
    "body": "Reviewer: **Erik Bray, Dima Pasechnik**",
    "created_at": "2019-05-11T21:58:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421241",
    "user": "https://github.com/dimpase"
}
```

Reviewer: **Erik Bray, Dima Pasechnik**



---

archive/issue_comments_421242.json:
```json
{
    "body": "Changed author from **Dima Pasechnik** to **Dima Pasechnik, Erik Bray**",
    "created_at": "2019-05-11T21:58:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421242",
    "user": "https://github.com/dimpase"
}
```

Changed author from **Dima Pasechnik** to **Dima Pasechnik, Erik Bray**



---

archive/issue_events_371686.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-05-11T21:58:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371686"
}
```



---

archive/issue_events_371687.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-05-11T21:58:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371687"
}
```



---

archive/issue_comments_421243.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nShould we go ahead and set that as the branch for *this* ticket, or create a new one just for updating the configure version?",
    "created_at": "2019-05-13T13:15:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421243",
    "user": "https://github.com/embray"
}
```

<div id="comment:41" align="right">comment:41</div>

Should we go ahead and set that as the branch for *this* ticket, or create a new one just for updating the configure version?



---

archive/issue_comments_421244.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nReplying to [@dimpase](#comment%3A39):\n> I am wondering why one needs these m4_push/popdefs... \n\nI think it's not strictly necessary I'm just trying to avoid unnecessary cluttering of the macro namespace.",
    "created_at": "2019-05-13T13:15:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421244",
    "user": "https://github.com/embray"
}
```

<div id="comment:42" align="right">comment:42</div>

Replying to [@dimpase](#comment%3A39):
> I am wondering why one needs these m4_push/popdefs... 

I think it's not strictly necessary I'm just trying to avoid unnecessary cluttering of the macro namespace.



---

archive/issue_comments_421245.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nwell, we need to sort out the unfortunate merging of #27642, which seems to lead to merge conflicts here. (and for mpfr+mpc alone, too). Only after this is done, we can proceed here, I think.",
    "created_at": "2019-05-13T13:20:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421245",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:43" align="right">comment:43</div>

well, we need to sort out the unfortunate merging of #27642, which seems to lead to merge conflicts here. (and for mpfr+mpc alone, too). Only after this is done, we can proceed here, I think.



---

archive/issue_comments_421246.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nI'm still surprised it would lead to merge conflicts, much less any that are non-trivial.  I'll have a look...",
    "created_at": "2019-05-13T14:32:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421246",
    "user": "https://github.com/embray"
}
```

<div id="comment:44" align="right">comment:44</div>

I'm still surprised it would lead to merge conflicts, much less any that are non-trivial.  I'll have a look...



---

archive/issue_comments_421247.json:
```json
{
    "body": "Changed commit from **[`2f2d3e1`](https://github.com/sagemath/sagetrac-mirror/commit/2f2d3e1a2606b57ae813b6d28d8c99952fef9bfd)** to **[`d16db1c`](https://github.com/sagemath/sagetrac-mirror/commit/d16db1cc2671fa816d40a84436268dfb5d36f003)**",
    "created_at": "2019-05-13T14:38:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421247",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2f2d3e1`](https://github.com/sagemath/sagetrac-mirror/commit/2f2d3e1a2606b57ae813b6d28d8c99952fef9bfd)** to **[`d16db1c`](https://github.com/sagemath/sagetrac-mirror/commit/d16db1cc2671fa816d40a84436268dfb5d36f003)**



---

archive/issue_comments_421248.json:
```json
{
    "body": "<div id=\"comment:45\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d16db1cc2671fa816d40a84436268dfb5d36f003\"><code>d16db1c</code></a></td><td><code>Trac #27265: Add spkg-configure.m4 for ntl</code></td></tr></table>\n",
    "created_at": "2019-05-13T14:38:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421248",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:45"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d16db1cc2671fa816d40a84436268dfb5d36f003"><code>d16db1c</code></a></td><td><code>Trac #27265: Add spkg-configure.m4 for ntl</code></td></tr></table>




---

archive/issue_events_371688.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2019-05-13T14:38:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371688"
}
```



---

archive/issue_events_371689.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2019-05-13T14:38:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371689"
}
```



---

archive/issue_comments_421249.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nRebased on 8.8.beta5 and squashed some commits.",
    "created_at": "2019-05-13T14:39:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421249",
    "user": "https://github.com/embray"
}
```

<div id="comment:46" align="right">comment:46</div>

Rebased on 8.8.beta5 and squashed some commits.



---

archive/issue_comments_421250.json:
```json
{
    "body": "Changed dependencies from **#27212, #27641, #27751** to **#27212, #27641, #27751, #27259**",
    "created_at": "2019-05-13T14:50:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421250",
    "user": "https://github.com/embray"
}
```

Changed dependencies from **#27212, #27641, #27751** to **#27212, #27641, #27751, #27259**



---

archive/issue_comments_421251.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nThis has sort of necessary (but trivial) conflicts with #27259 so I will base it on top of that ticket's branch.",
    "created_at": "2019-05-13T14:50:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421251",
    "user": "https://github.com/embray"
}
```

<div id="comment:47" align="right">comment:47</div>

This has sort of necessary (but trivial) conflicts with #27259 so I will base it on top of that ticket's branch.



---

archive/issue_events_371690.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-05-13T14:50:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371690"
}
```



---

archive/issue_events_371691.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-05-13T14:50:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371691"
}
```



---

archive/issue_comments_421252.json:
```json
{
    "body": "Changed commit from **[`d16db1c`](https://github.com/sagemath/sagetrac-mirror/commit/d16db1cc2671fa816d40a84436268dfb5d36f003)** to **[`974c483`](https://github.com/sagemath/sagetrac-mirror/commit/974c4831f775088bfd43f4efd5e5c453fcd44175)**",
    "created_at": "2019-05-13T14:53:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421252",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d16db1c`](https://github.com/sagemath/sagetrac-mirror/commit/d16db1cc2671fa816d40a84436268dfb5d36f003)** to **[`974c483`](https://github.com/sagemath/sagetrac-mirror/commit/974c4831f775088bfd43f4efd5e5c453fcd44175)**



---

archive/issue_comments_421253.json:
```json
{
    "body": "<div id=\"comment:48\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d5e5e3d8d68cd8feb06881a15ad925b3dbb05126\"><code>d5e5e3d</code></a></td><td><code>spkg-configure for mpfr, adjustments for its dependees</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0329fd951a75cdf6f35c4681615b3aa914897bcf\"><code>0329fd9</code></a></td><td><code>Add one missing SAGE_CONFIGURE_MPFR, for building gcc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d15ead5ddb7403adf6511781f7fb295bcad7bd7b\"><code>d15ead5</code></a></td><td><code>Trac #27259: spkg-configure for mpc, adjustments for its dependents</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/974c4831f775088bfd43f4efd5e5c453fcd44175\"><code>974c483</code></a></td><td><code>Trac #27265: Add spkg-configure.m4 for ntl</code></td></tr></table>\n",
    "created_at": "2019-05-13T14:53:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421253",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:48"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d5e5e3d8d68cd8feb06881a15ad925b3dbb05126"><code>d5e5e3d</code></a></td><td><code>spkg-configure for mpfr, adjustments for its dependees</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0329fd951a75cdf6f35c4681615b3aa914897bcf"><code>0329fd9</code></a></td><td><code>Add one missing SAGE_CONFIGURE_MPFR, for building gcc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d15ead5ddb7403adf6511781f7fb295bcad7bd7b"><code>d15ead5</code></a></td><td><code>Trac #27259: spkg-configure for mpc, adjustments for its dependents</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/974c4831f775088bfd43f4efd5e5c453fcd44175"><code>974c483</code></a></td><td><code>Trac #27265: Add spkg-configure.m4 for ntl</code></td></tr></table>




---

archive/issue_events_371692.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-05-13T14:53:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371692"
}
```



---

archive/issue_events_371693.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-05-13T14:53:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371693"
}
```



---

archive/issue_comments_421254.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nThis ticket should probably not be merged by itself.  Instead please merge #27822 which incorporates this one.",
    "created_at": "2019-05-13T15:31:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421254",
    "user": "https://github.com/embray"
}
```

<div id="comment:50" align="right">comment:50</div>

This ticket should probably not be merged by itself.  Instead please merge #27822 which incorporates this one.



---

archive/issue_events_371694.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-05-13T15:49:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371694"
}
```



---

archive/issue_events_371695.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-05-13T15:49:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371695"
}
```



---

archive/issue_comments_421255.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nlgtm",
    "created_at": "2019-05-13T15:49:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421255",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:51" align="right">comment:51</div>

lgtm



---

archive/issue_comments_421256.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nYou for some reason skipped \t2ebf5b367c62def637fdc2955a80134a56439e0b - which is crucial for building Flint right with external NTL, see [comment:9](#comment%3A9)",
    "created_at": "2019-05-13T16:48:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421256",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:52" align="right">comment:52</div>

You for some reason skipped 	2ebf5b367c62def637fdc2955a80134a56439e0b - which is crucial for building Flint right with external NTL, see [comment:9](#comment%3A9)



---

archive/issue_events_371696.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-05-13T16:48:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371696"
}
```



---

archive/issue_events_371697.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-05-13T16:48:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371697"
}
```



---

archive/issue_comments_421257.json:
```json
{
    "body": "Changed commit from **[`974c483`](https://github.com/sagemath/sagetrac-mirror/commit/974c4831f775088bfd43f4efd5e5c453fcd44175)** to **[`e025f88`](https://github.com/sagemath/sagetrac-mirror/commit/e025f888872035a04bcdbd047409c0e99a92dd14)**",
    "created_at": "2019-05-13T16:54:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421257",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`974c483`](https://github.com/sagemath/sagetrac-mirror/commit/974c4831f775088bfd43f4efd5e5c453fcd44175)** to **[`e025f88`](https://github.com/sagemath/sagetrac-mirror/commit/e025f888872035a04bcdbd047409c0e99a92dd14)**



---

archive/issue_comments_421258.json:
```json
{
    "body": "<div id=\"comment:53\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e025f888872035a04bcdbd047409c0e99a92dd14\"><code>e025f88</code></a></td><td><code>flint needs --with-ntl= always</code></td></tr></table>\n",
    "created_at": "2019-05-13T16:54:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421258",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:53"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e025f888872035a04bcdbd047409c0e99a92dd14"><code>e025f88</code></a></td><td><code>flint needs --with-ntl= always</code></td></tr></table>




---

archive/issue_events_371698.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-05-13T16:56:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371698"
}
```



---

archive/issue_events_371699.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-05-13T16:56:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371699"
}
```



---

archive/issue_comments_421259.json:
```json
{
    "body": "Changed commit from **[`e025f88`](https://github.com/sagemath/sagetrac-mirror/commit/e025f888872035a04bcdbd047409c0e99a92dd14)** to **[`deaa7e0`](https://github.com/sagemath/sagetrac-mirror/commit/deaa7e0c9efb9df512c7d4f58a87df5759a3fbb2)**",
    "created_at": "2019-05-13T21:12:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421259",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e025f88`](https://github.com/sagemath/sagetrac-mirror/commit/e025f888872035a04bcdbd047409c0e99a92dd14)** to **[`deaa7e0`](https://github.com/sagemath/sagetrac-mirror/commit/deaa7e0c9efb9df512c7d4f58a87df5759a3fbb2)**



---

archive/issue_events_371700.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2019-05-13T21:12:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371700"
}
```



---

archive/issue_events_371701.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2019-05-13T21:12:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371701"
}
```



---

archive/issue_comments_421260.json:
```json
{
    "body": "<div id=\"comment:55\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c40427a92cd3a64793e9753b0df2b438b3f3e90c\"><code>c40427a</code></a></td><td><code>correct use of AC_LINK_IFELSE</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/deaa7e0c9efb9df512c7d4f58a87df5759a3fbb2\"><code>deaa7e0</code></a></td><td><code>Merge branch 'public/packages/ntlconf' of trac.sagemath.org:sage into wip</code></td></tr></table>\n",
    "created_at": "2019-05-13T21:12:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421260",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:55"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c40427a92cd3a64793e9753b0df2b438b3f3e90c"><code>c40427a</code></a></td><td><code>correct use of AC_LINK_IFELSE</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/deaa7e0c9efb9df512c7d4f58a87df5759a3fbb2"><code>deaa7e0</code></a></td><td><code>Merge branch 'public/packages/ntlconf' of trac.sagemath.org:sage into wip</code></td></tr></table>




---

archive/issue_comments_421261.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nCaught a bug - the tests were sometimes passing due to more libs in LIBS, it seems.\nNow it should be OK. Please review.",
    "created_at": "2019-05-13T21:14:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421261",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:56" align="right">comment:56</div>

Caught a bug - the tests were sometimes passing due to more libs in LIBS, it seems.
Now it should be OK. Please review.



---

archive/issue_comments_421262.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nAre you saying flint's configure actually breaks if you *don't* pass a `--with-ntl` option, even if it's empty?\n\nI had removed that while squashing because it looked like a mistake to me.",
    "created_at": "2019-05-14T06:51:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421262",
    "user": "https://github.com/embray"
}
```

<div id="comment:57" align="right">comment:57</div>

Are you saying flint's configure actually breaks if you *don't* pass a `--with-ntl` option, even if it's empty?

I had removed that while squashing because it looked like a mistake to me.



---

archive/issue_comments_421263.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nAlso please avoid adding unnecessary merge commits. I'll just rebase this again...",
    "created_at": "2019-05-14T06:56:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421263",
    "user": "https://github.com/embray"
}
```

<div id="comment:58" align="right">comment:58</div>

Also please avoid adding unnecessary merge commits. I'll just rebase this again...



---

archive/issue_comments_421264.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nI see. It doesn't even enable the NTL interface if you don't pass `--with-ntl`. Also if you use `--with-ntl` without an argument it assumes you want `/usr/local` which is also not so good. It might be mostly harmless but I want to double-check because that could be confusing. \n\nThere are several things that are not so good about flint's hand-written configure script. I've offered to redo it with autoconf but Bill Hart complained that he didn't want to have to learn autoconf. And while I can completely understand the sentiment I think the fact is it would be better and much simpler if it did use autoconf. There's nothing much fancy it needs to do...",
    "created_at": "2019-05-14T07:07:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421264",
    "user": "https://github.com/embray"
}
```

<div id="comment:59" align="right">comment:59</div>

I see. It doesn't even enable the NTL interface if you don't pass `--with-ntl`. Also if you use `--with-ntl` without an argument it assumes you want `/usr/local` which is also not so good. It might be mostly harmless but I want to double-check because that could be confusing. 

There are several things that are not so good about flint's hand-written configure script. I've offered to redo it with autoconf but Bill Hart complained that he didn't want to have to learn autoconf. And while I can completely understand the sentiment I think the fact is it would be better and much simpler if it did use autoconf. There's nothing much fancy it needs to do...



---

archive/issue_comments_421265.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nReplying to [@embray](#comment%3A57):\n> Are you saying flint's configure actually breaks if you *don't* pass a `--with-ntl` option, even if it's empty?\n\nyes, it won\u2019t link ntl unless \u2018\u2014with-ntl\u2019 is present.\n\n> \n> I had removed that while squashing because it looked like a mistake to me. \n\nthe joys of dealing dealings with hand-written configure scripts.",
    "created_at": "2019-05-14T07:11:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421265",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:60" align="right">comment:60</div>

Replying to [@embray](#comment%3A57):
> Are you saying flint's configure actually breaks if you *don't* pass a `--with-ntl` option, even if it's empty?

yes, it won’t link ntl unless ‘—with-ntl’ is present.

> 
> I had removed that while squashing because it looked like a mistake to me. 

the joys of dealing dealings with hand-written configure scripts.



---

archive/issue_comments_421266.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nReplying to [@embray](#comment%3A59):\n> There are several things that are not so good about flint's hand-written configure script. I've offered to redo it with autoconf but Bill Hart complained that he didn't want to have to learn autoconf. And while I can completely understand the sentiment I think the fact is it would be better and much simpler if it did use autoconf. There's nothing much fancy it needs to do... \n\nWelcome! You are not the first one to offer. The worst thing about it, is that it infects \"descendant\" projects such as `arb`. `arb`'s configure script is just a tweaked version of the `flint` script.",
    "created_at": "2019-05-14T07:28:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421266",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:61" align="right">comment:61</div>

Replying to [@embray](#comment%3A59):
> There are several things that are not so good about flint's hand-written configure script. I've offered to redo it with autoconf but Bill Hart complained that he didn't want to have to learn autoconf. And while I can completely understand the sentiment I think the fact is it would be better and much simpler if it did use autoconf. There's nothing much fancy it needs to do... 

Welcome! You are not the first one to offer. The worst thing about it, is that it infects "descendant" projects such as `arb`. `arb`'s configure script is just a tweaked version of the `flint` script.



---

archive/issue_comments_421267.json:
```json
{
    "body": "<div id=\"comment:62\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/17af3bad767bfe0ccc5f63750da5e82ad3533d3e\"><code>17af3ba</code></a></td><td><code>flint needs --with-ntl= always</code></td></tr></table>\n",
    "created_at": "2019-05-14T09:49:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421267",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:62"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/17af3bad767bfe0ccc5f63750da5e82ad3533d3e"><code>17af3ba</code></a></td><td><code>flint needs --with-ntl= always</code></td></tr></table>




---

archive/issue_comments_421268.json:
```json
{
    "body": "Changed commit from **[`deaa7e0`](https://github.com/sagemath/sagetrac-mirror/commit/deaa7e0c9efb9df512c7d4f58a87df5759a3fbb2)** to **[`17af3ba`](https://github.com/sagemath/sagetrac-mirror/commit/17af3bad767bfe0ccc5f63750da5e82ad3533d3e)**",
    "created_at": "2019-05-14T09:49:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421268",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`deaa7e0`](https://github.com/sagemath/sagetrac-mirror/commit/deaa7e0c9efb9df512c7d4f58a87df5759a3fbb2)** to **[`17af3ba`](https://github.com/sagemath/sagetrac-mirror/commit/17af3bad767bfe0ccc5f63750da5e82ad3533d3e)**



---

archive/issue_comments_421269.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nrebased/squashed to remove the last merge commit.",
    "created_at": "2019-05-14T09:50:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421269",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:63" align="right">comment:63</div>

rebased/squashed to remove the last merge commit.



---

archive/issue_comments_421270.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nIs it OK now? Also, could you please update #27822 in this respect?",
    "created_at": "2019-05-14T12:26:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421270",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:64" align="right">comment:64</div>

Is it OK now? Also, could you please update #27822 in this respect?



---

archive/issue_comments_421271.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nYes, I think this is ok now.  I'm still a little perturbed by the situation with flint but I think this will do for now.  I'll rebase #27822.",
    "created_at": "2019-05-17T11:50:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421271",
    "user": "https://github.com/embray"
}
```

<div id="comment:65" align="right">comment:65</div>

Yes, I think this is ok now.  I'm still a little perturbed by the situation with flint but I think this will do for now.  I'll rebase #27822.



---

archive/issue_events_371702.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-05-17T11:50:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371702"
}
```



---

archive/issue_events_371703.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-05-17T11:50:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371703"
}
```



---

archive/issue_comments_421272.json:
```json
{
    "body": "Changed commit from **[`17af3ba`](https://github.com/sagemath/sagetrac-mirror/commit/17af3bad767bfe0ccc5f63750da5e82ad3533d3e)** to **[`74b1451`](https://github.com/sagemath/sagetrac-mirror/commit/74b1451ee15263868c44386b03f272ea6da966ae)**",
    "created_at": "2019-05-17T11:56:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421272",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`17af3ba`](https://github.com/sagemath/sagetrac-mirror/commit/17af3bad767bfe0ccc5f63750da5e82ad3533d3e)** to **[`74b1451`](https://github.com/sagemath/sagetrac-mirror/commit/74b1451ee15263868c44386b03f272ea6da966ae)**



---

archive/issue_events_371704.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2019-05-17T11:56:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371704"
}
```



---

archive/issue_events_371705.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2019-05-17T11:56:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371705"
}
```



---

archive/issue_comments_421273.json:
```json
{
    "body": "<div id=\"comment:67\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a3605187face93bd02a16089ce1121a7348ed2a3\"><code>a360518</code></a></td><td><code>Refactor the mpir/spkg-configure.m4 (and to a lesser extent the one for gmp) to use the new pre and post arguments to SAGE_SPKG_CONFIGURE</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d09da57f377d1274c7434e368d99a8fd482c4d7b\"><code>d09da57</code></a></td><td><code>deal with --with-ntl, proper version check</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2ebf5b367c62def637fdc2955a80134a56439e0b\"><code>2ebf5b3</code></a></td><td><code>flint needs --with-ntl= always</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bc10f2e9e50fc8c7141e14e330e6cc65ab689e1b\"><code>bc10f2e</code></a></td><td><code>check for deps of ntl</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f16e43ebd7576dd6f848ac211cb033619d6263fd\"><code>f16e43e</code></a></td><td><code>Clean up ntl/spkg-configure.m4</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/58cb21f84dd66e5c2cf9b61da334afeb8f560e9e\"><code>58cb21f</code></a></td><td><code>cleanup tabs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a900fc0b4e61490ccd8a7d95b24d0cc95a1b619\"><code>3a900fc</code></a></td><td><code>Remove unnecessary check for gf2x</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/27f7e5859d2fed6b946170662874895e44561282\"><code>27f7e58</code></a></td><td><code>Fix NTL version check logic.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d98a05ef7a0200320fc983a0f8ced4a6cc40e3a8\"><code>d98a05e</code></a></td><td><code>correct use of AC_LINK_IFELSE</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/74b1451ee15263868c44386b03f272ea6da966ae\"><code>74b1451</code></a></td><td><code>flint needs --with-ntl= always</code></td></tr></table>\n",
    "created_at": "2019-05-17T11:56:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421273",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:67"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a3605187face93bd02a16089ce1121a7348ed2a3"><code>a360518</code></a></td><td><code>Refactor the mpir/spkg-configure.m4 (and to a lesser extent the one for gmp) to use the new pre and post arguments to SAGE_SPKG_CONFIGURE</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d09da57f377d1274c7434e368d99a8fd482c4d7b"><code>d09da57</code></a></td><td><code>deal with --with-ntl, proper version check</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2ebf5b367c62def637fdc2955a80134a56439e0b"><code>2ebf5b3</code></a></td><td><code>flint needs --with-ntl= always</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bc10f2e9e50fc8c7141e14e330e6cc65ab689e1b"><code>bc10f2e</code></a></td><td><code>check for deps of ntl</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f16e43ebd7576dd6f848ac211cb033619d6263fd"><code>f16e43e</code></a></td><td><code>Clean up ntl/spkg-configure.m4</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/58cb21f84dd66e5c2cf9b61da334afeb8f560e9e"><code>58cb21f</code></a></td><td><code>cleanup tabs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a900fc0b4e61490ccd8a7d95b24d0cc95a1b619"><code>3a900fc</code></a></td><td><code>Remove unnecessary check for gf2x</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/27f7e5859d2fed6b946170662874895e44561282"><code>27f7e58</code></a></td><td><code>Fix NTL version check logic.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d98a05ef7a0200320fc983a0f8ced4a6cc40e3a8"><code>d98a05e</code></a></td><td><code>correct use of AC_LINK_IFELSE</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/74b1451ee15263868c44386b03f272ea6da966ae"><code>74b1451</code></a></td><td><code>flint needs --with-ntl= always</code></td></tr></table>




---

archive/issue_comments_421274.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nOops, rebased an older version of the branch.",
    "created_at": "2019-05-17T11:57:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421274",
    "user": "https://github.com/embray"
}
```

<div id="comment:68" align="right">comment:68</div>

Oops, rebased an older version of the branch.



---

archive/issue_comments_421275.json:
```json
{
    "body": "Changed commit from **[`74b1451`](https://github.com/sagemath/sagetrac-mirror/commit/74b1451ee15263868c44386b03f272ea6da966ae)** to **[`4b3caa7`](https://github.com/sagemath/sagetrac-mirror/commit/4b3caa7b35b0f0effb442feb18e4cc2c574cbb8e)**",
    "created_at": "2019-05-17T11:58:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421275",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`74b1451`](https://github.com/sagemath/sagetrac-mirror/commit/74b1451ee15263868c44386b03f272ea6da966ae)** to **[`4b3caa7`](https://github.com/sagemath/sagetrac-mirror/commit/4b3caa7b35b0f0effb442feb18e4cc2c574cbb8e)**



---

archive/issue_comments_421276.json:
```json
{
    "body": "<div id=\"comment:69\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d5e5e3d8d68cd8feb06881a15ad925b3dbb05126\"><code>d5e5e3d</code></a></td><td><code>spkg-configure for mpfr, adjustments for its dependees</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0329fd951a75cdf6f35c4681615b3aa914897bcf\"><code>0329fd9</code></a></td><td><code>Add one missing SAGE_CONFIGURE_MPFR, for building gcc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d15ead5ddb7403adf6511781f7fb295bcad7bd7b\"><code>d15ead5</code></a></td><td><code>Trac #27259: spkg-configure for mpc, adjustments for its dependents</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/974c4831f775088bfd43f4efd5e5c453fcd44175\"><code>974c483</code></a></td><td><code>Trac #27265: Add spkg-configure.m4 for ntl</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/96a7d77efaa1ff34ae1546ad57722ba773d08dee\"><code>96a7d77</code></a></td><td><code>correct use of AC_LINK_IFELSE</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b3caa7b35b0f0effb442feb18e4cc2c574cbb8e\"><code>4b3caa7</code></a></td><td><code>flint needs --with-ntl= always</code></td></tr></table>\n",
    "created_at": "2019-05-17T11:58:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421276",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:69"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d5e5e3d8d68cd8feb06881a15ad925b3dbb05126"><code>d5e5e3d</code></a></td><td><code>spkg-configure for mpfr, adjustments for its dependees</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0329fd951a75cdf6f35c4681615b3aa914897bcf"><code>0329fd9</code></a></td><td><code>Add one missing SAGE_CONFIGURE_MPFR, for building gcc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d15ead5ddb7403adf6511781f7fb295bcad7bd7b"><code>d15ead5</code></a></td><td><code>Trac #27259: spkg-configure for mpc, adjustments for its dependents</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/974c4831f775088bfd43f4efd5e5c453fcd44175"><code>974c483</code></a></td><td><code>Trac #27265: Add spkg-configure.m4 for ntl</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/96a7d77efaa1ff34ae1546ad57722ba773d08dee"><code>96a7d77</code></a></td><td><code>correct use of AC_LINK_IFELSE</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b3caa7b35b0f0effb442feb18e4cc2c574cbb8e"><code>4b3caa7</code></a></td><td><code>flint needs --with-ntl= always</code></td></tr></table>




---

archive/issue_events_371706.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-05-17T11:58:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371706"
}
```



---

archive/issue_events_371707.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-05-17T11:58:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371707"
}
```



---

archive/issue_comments_421277.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,2 @@\n implemented a direct version check using `AC_RUN_IFELSE`.\n The rest is standard, as in #27212, basically.\n-\n-configure tarball: http://users.ox.ac.uk/~coml0531/sage/configure-317.tar.gz\n``````\n",
    "created_at": "2019-05-17T12:01:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421277",
    "user": "https://github.com/embray"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,2 @@
 implemented a direct version check using `AC_RUN_IFELSE`.
 The rest is standard, as in #27212, basically.
-
-configure tarball: http://users.ox.ac.uk/~coml0531/sage/configure-317.tar.gz
``````




---

archive/issue_comments_421278.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nMissing quotes here:\n\n```diff\n--- a/build/pkgs/ntl/spkg-configure.m4\n+++ b/build/pkgs/ntl/spkg-configure.m4\n@@ -19,7 +19,7 @@ SAGE_SPKG_CONFIGURE([ntl], [\n         AC_LINK_IFELSE([\n             AC_LANG_PROGRAM([[#include <NTL/ZZ.h>]],\n                             [[NTL::ZZ a;]]\n-            )], [LIBS=$LIBS -lntl]\n+            )], [LIBS=\"$LIBS -lntl\"]\n                 [AC_MSG_RESULT([yes])], [\n             AC_MSG_RESULT([no]); sage_spkg_install_ntl=yes\n         ])\n```\n\nso it works if LIBS was empty, but breaks if it's already not...",
    "created_at": "2019-05-18T18:27:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421278",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:72" align="right">comment:72</div>

Missing quotes here:

```diff
--- a/build/pkgs/ntl/spkg-configure.m4
+++ b/build/pkgs/ntl/spkg-configure.m4
@@ -19,7 +19,7 @@ SAGE_SPKG_CONFIGURE([ntl], [
         AC_LINK_IFELSE([
             AC_LANG_PROGRAM([[#include <NTL/ZZ.h>]],
                             [[NTL::ZZ a;]]
-            )], [LIBS=$LIBS -lntl]
+            )], [LIBS="$LIBS -lntl"]
                 [AC_MSG_RESULT([yes])], [
             AC_MSG_RESULT([no]); sage_spkg_install_ntl=yes
         ])
```

so it works if LIBS was empty, but breaks if it's already not...



---

archive/issue_comments_421279.json:
```json
{
    "body": "<div id=\"comment:73\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/892143a2d89591044dc20a3c87ecccaffdd46dd7\"><code>892143a</code></a></td><td><code>add missing quotes</code></td></tr></table>\n",
    "created_at": "2019-05-18T18:36:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421279",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:73"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/892143a2d89591044dc20a3c87ecccaffdd46dd7"><code>892143a</code></a></td><td><code>add missing quotes</code></td></tr></table>




---

archive/issue_events_371708.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2019-05-18T18:36:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371708"
}
```



---

archive/issue_events_371709.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2019-05-18T18:36:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371709"
}
```



---

archive/issue_comments_421280.json:
```json
{
    "body": "Changed commit from **[`4b3caa7`](https://github.com/sagemath/sagetrac-mirror/commit/4b3caa7b35b0f0effb442feb18e4cc2c574cbb8e)** to **[`892143a`](https://github.com/sagemath/sagetrac-mirror/commit/892143a2d89591044dc20a3c87ecccaffdd46dd7)**",
    "created_at": "2019-05-18T18:36:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421280",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4b3caa7`](https://github.com/sagemath/sagetrac-mirror/commit/4b3caa7b35b0f0effb442feb18e4cc2c574cbb8e)** to **[`892143a`](https://github.com/sagemath/sagetrac-mirror/commit/892143a2d89591044dc20a3c87ecccaffdd46dd7)**



---

archive/issue_events_371710.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-05-18T18:37:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371710"
}
```



---

archive/issue_events_371711.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-05-18T18:37:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371711"
}
```



---

archive/issue_comments_421281.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nstumble upon this while trying this with more spkg-configs merged.",
    "created_at": "2019-05-18T18:37:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421281",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:74" align="right">comment:74</div>

stumble upon this while trying this with more spkg-configs merged.



---

archive/issue_events_371712.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-05-20T18:29:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371712"
}
```



---

archive/issue_events_371713.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-05-20T18:29:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371713"
}
```



---

archive/issue_comments_421282.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nPlease only set this ticket to positive review after you have personally verified that a clean sage build works",
    "created_at": "2019-05-20T18:29:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421282",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:75" align="right">comment:75</div>

Please only set this ticket to positive review after you have personally verified that a clean sage build works



---

archive/issue_comments_421283.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nwhat makes you think I did not do this?",
    "created_at": "2019-05-20T18:41:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421283",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:76" align="right">comment:76</div>

what makes you think I did not do this?



---

archive/issue_comments_421284.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nA clean build worked great, it's a \"dirty\" build that revealed the problem of [comment:72](#comment%3A72)",
    "created_at": "2019-05-20T18:45:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421284",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:77" align="right">comment:77</div>

A clean build worked great, it's a "dirty" build that revealed the problem of [comment:72](#comment%3A72)



---

archive/issue_events_371714.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-05-20T23:35:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371714"
}
```



---

archive/issue_events_371715.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-05-20T23:35:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371715"
}
```



---

archive/issue_comments_421285.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,4 @@\n implemented a direct version check using `AC_RUN_IFELSE`.\n The rest is standard, as in #27212, basically.\n+\n+to be merged as a part of #27822\n``````\n",
    "created_at": "2019-05-20T23:35:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421285",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,4 @@
 implemented a direct version check using `AC_RUN_IFELSE`.
 The rest is standard, as in #27212, basically.
+
+to be merged as a part of #27822
``````




---

archive/issue_events_371716.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-05-20T23:35:00Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371716"
}
```



---

archive/issue_comments_421286.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">comment:79</div>\n\nwith clang on OSX, I just saw a failure to recognise NTL, due to c++ in the test called without `-std=gnu++11`.\n\nAdding `AC_REQUIRE([SAGE_SPKG_CONFIGURE_GCC])` just above `AC_REQUIRE([SAGE_SPKG_CONFIGURE_GMP])` in NTL's spkg-configure.m4 fixes this.\n\nBut this seems to be a not very consistent way to do thing, as `SAGE_SPKG_CONFIGURE_GCC` ought to be called before the any other library tests. Do we have a way to force this?",
    "created_at": "2019-06-11T12:53:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421286",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:79" align="right">comment:79</div>

with clang on OSX, I just saw a failure to recognise NTL, due to c++ in the test called without `-std=gnu++11`.

Adding `AC_REQUIRE([SAGE_SPKG_CONFIGURE_GCC])` just above `AC_REQUIRE([SAGE_SPKG_CONFIGURE_GMP])` in NTL's spkg-configure.m4 fixes this.

But this seems to be a not very consistent way to do thing, as `SAGE_SPKG_CONFIGURE_GCC` ought to be called before the any other library tests. Do we have a way to force this?



---

archive/issue_comments_421287.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">comment:80</div>\n\nIt might work to just manually call `AC_REQUIRE([SAGE_SPKG_CONFIGURE_GCC])` right at the beginning of `SAGE_SPKG_COLLECT`.",
    "created_at": "2019-06-11T14:41:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421287",
    "user": "https://github.com/embray"
}
```

<div id="comment:80" align="right">comment:80</div>

It might work to just manually call `AC_REQUIRE([SAGE_SPKG_CONFIGURE_GCC])` right at the beginning of `SAGE_SPKG_COLLECT`.



---

archive/issue_comments_421288.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nReplying to [@embray](#comment%3A80):\n> It might work to just manually call `AC_REQUIRE([SAGE_SPKG_CONFIGURE_GCC])` right at the beginning of `SAGE_SPKG_COLLECT`.\n\nhmm, no, this does not work, as at this moment `SAGE_SPKG_CONFIGURE_GCC` is not defined.\n\nI am thinking of putting it into `SAGE_SPKG_CONFIGURE`, but this means it's a recursive call, so the only way I can think of would be avoid the recursion:\nto define essentially a copy of \n`SAGE_SPKG_CONFIGURE`, without this call, and then define `SAGE_SPKG_CONFIGURE_GCC` using this copy. After  this  `AC_REQUIRE(...)` would not involve a recursion.",
    "created_at": "2019-06-12T23:26:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421288",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:81" align="right">comment:81</div>

Replying to [@embray](#comment%3A80):
> It might work to just manually call `AC_REQUIRE([SAGE_SPKG_CONFIGURE_GCC])` right at the beginning of `SAGE_SPKG_COLLECT`.

hmm, no, this does not work, as at this moment `SAGE_SPKG_CONFIGURE_GCC` is not defined.

I am thinking of putting it into `SAGE_SPKG_CONFIGURE`, but this means it's a recursive call, so the only way I can think of would be avoid the recursion:
to define essentially a copy of 
`SAGE_SPKG_CONFIGURE`, without this call, and then define `SAGE_SPKG_CONFIGURE_GCC` using this copy. After  this  `AC_REQUIRE(...)` would not involve a recursion.



---

archive/issue_comments_421289.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">comment:82</div>\n\nReplying to [@dimpase](#comment%3A81):\n> Replying to [@embray](#comment%3A80):\n> > It might work to just manually call `AC_REQUIRE([SAGE_SPKG_CONFIGURE_GCC])` right at the beginning of `SAGE_SPKG_COLLECT`.\n\n> \n> hmm, no, this does not work, as at this moment `SAGE_SPKG_CONFIGURE_GCC` is not defined.\n> \n> I am thinking of putting it into `SAGE_SPKG_CONFIGURE`, but this means it's a recursive call, so the only way I can think of would be avoid the recursion:\n> to define essentially a copy of \n> `SAGE_SPKG_CONFIGURE`, without this call, and then define `SAGE_SPKG_CONFIGURE_GCC` using this copy. After  this  `AC_REQUIRE(...)` would not involve a recursion.\n\nI have opened #28005 to deal with this.",
    "created_at": "2019-06-17T15:40:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27265#issuecomment-421289",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:82" align="right">comment:82</div>

Replying to [@dimpase](#comment%3A81):
> Replying to [@embray](#comment%3A80):
> > It might work to just manually call `AC_REQUIRE([SAGE_SPKG_CONFIGURE_GCC])` right at the beginning of `SAGE_SPKG_COLLECT`.

> 
> hmm, no, this does not work, as at this moment `SAGE_SPKG_CONFIGURE_GCC` is not defined.
> 
> I am thinking of putting it into `SAGE_SPKG_CONFIGURE`, but this means it's a recursive call, so the only way I can think of would be avoid the recursion:
> to define essentially a copy of 
> `SAGE_SPKG_CONFIGURE`, without this call, and then define `SAGE_SPKG_CONFIGURE_GCC` using this copy. After  this  `AC_REQUIRE(...)` would not involve a recursion.

I have opened #28005 to deal with this.



---

archive/issue_events_371717.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-07-15T15:49:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371717"
}
```



---

archive/issue_events_371718.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-07-15T15:49:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/duplicate",
    "label_color": "c6c6c6",
    "label_name": "duplicate",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371718"
}
```



---

archive/issue_events_371719.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-07-15T15:49:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371719"
}
```



---

archive/issue_events_371720.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-07-15T15:49:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27265",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27265#event-371720"
}
```
