# Issue 27734: Fractional chromatic number

archive/issues_027497.json:
```json
{
    "body": "Add methods to Graph in sage/graphs/graph.py for computing the fractional chromatic and clique numbers via a linear program. The code is essentially the same as that for `fractional_chromatic_index`, e.g. the default solver is PPL for exact rational computation.\n\nAssignee: @ed359\n\nCC:  @tscrim\n\nBranch/Commit: a3fe1e0d572dcc79fa3ef9e9515361b2a9130a07\n\nReviewer: David Coudert, Travis Scrimshaw\n\nAuthor: Ewan Davies\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/27734\n\n",
    "closed_at": "2020-08-23T16:28:15Z",
    "created_at": "2019-04-27T02:21:43Z",
    "labels": [
        "component: graph theory",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Fractional chromatic number",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27734",
    "user": "https://github.com/ed359"
}
```
Add methods to Graph in sage/graphs/graph.py for computing the fractional chromatic and clique numbers via a linear program. The code is essentially the same as that for `fractional_chromatic_index`, e.g. the default solver is PPL for exact rational computation.

Assignee: @ed359

CC:  @tscrim

Branch/Commit: a3fe1e0d572dcc79fa3ef9e9515361b2a9130a07

Reviewer: David Coudert, Travis Scrimshaw

Author: Ewan Davies

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/27734





---

archive/issue_comments_412775.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-05-03T18:54:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27734#issuecomment-412775",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_412776.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to graph theory.",
    "created_at": "2019-05-03T19:00:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27734#issuecomment-412776",
    "user": "https://github.com/ed359"
}
```

Changing component from PLEASE CHANGE to graph theory.



---

archive/issue_comments_412777.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2019-05-03T19:00:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27734#issuecomment-412777",
    "user": "https://github.com/ed359"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_412778.json:
```json
{
    "body": "Changing priority from major to minor.",
    "created_at": "2019-05-03T19:00:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27734#issuecomment-412778",
    "user": "https://github.com/ed359"
}
```

Changing priority from major to minor.



---

archive/issue_comments_412779.json:
```json
{
    "body": "Set assignee to @ed359.",
    "created_at": "2019-05-03T19:00:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27734#issuecomment-412779",
    "user": "https://github.com/ed359"
}
```

Set assignee to @ed359.



---

archive/issue_comments_412780.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-\n+Add methods to Graph in sage/graphs/graph.py for computing the fractional chromatic and clique numbers via a linear program. The code is essentially the same as that for `fractional_clique_number`, e.g. the default solver is PPL for exact rational computation.\n \n Comment: 1\n \n``````\n",
    "created_at": "2019-05-03T19:00:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27734#issuecomment-412780",
    "user": "https://github.com/ed359"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-
+Add methods to Graph in sage/graphs/graph.py for computing the fractional chromatic and clique numbers via a linear program. The code is essentially the same as that for `fractional_clique_number`, e.g. the default solver is PPL for exact rational computation.
 
 Comment: 1
 
``````




---

archive/issue_comments_412781.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-05-03T21:57:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27734#issuecomment-412781",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_412782.json:
```json
{
    "body": "<a id='comment:5'></a>I have several comments here:\n- method `fractional_chromatic_number` could be in file `graph_coloring.py`\n\n- The LP formulation using independent sets is elegant, but can be used on small graphs only. For instance, a 5x5 grid has already 55447 independent sets... You could add a \"compact\" formulation that could be used on larger graphs.\n\n- You can also add simple optimization like partition into connected components.\n\n- `optimim` -> `optimum`",
    "created_at": "2019-05-04T08:52:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27734#issuecomment-412782",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:5'></a>I have several comments here:
- method `fractional_chromatic_number` could be in file `graph_coloring.py`

- The LP formulation using independent sets is elegant, but can be used on small graphs only. For instance, a 5x5 grid has already 55447 independent sets... You could add a "compact" formulation that could be used on larger graphs.

- You can also add simple optimization like partition into connected components.

- `optimim` -> `optimum`



---

archive/issue_comments_412783.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [comment:5 dcoudert]:\n> I have several comments here:\n> - method `fractional_chromatic_number` could be in file `graph_coloring.py`\n \n>\n\nSure, should I move `fractional_chromatic_index` too? And what about `fractional_clique_number`? One does not usually arrive at the definition of fractional clique number via coloring, but they're dual LPs so very related!\n\n\n> - The LP formulation using independent sets is elegant, but can be used on small graphs only. For instance, a 5x5 grid has already 55447 independent sets... You could add a \"compact\" formulation that could be used on larger graphs.\n \n>\n\nI don't know of a fancy algorithm for fractional chromatic number that would be asymptotically better than the LP. I forgot an optimisation which makes the LP smaller by using _maximal_ independent sets for the variables, and it could save some time and memory to index the LP variables by ints rather than frozensets. \nI don't know how to get around a call to `IndependentSets` of some kind though.\n\n> - You can also add simple optimization like partition into connected components.\n\n\nThis sounds useful, I'll investigate.\n\n> \n> - `optimim` -> `optimum`",
    "created_at": "2019-05-08T00:42:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27734#issuecomment-412783",
    "user": "https://github.com/ed359"
}
```

<a id='comment:6'></a>Replying to [comment:5 dcoudert]:
> I have several comments here:
> - method `fractional_chromatic_number` could be in file `graph_coloring.py`
 
>

Sure, should I move `fractional_chromatic_index` too? And what about `fractional_clique_number`? One does not usually arrive at the definition of fractional clique number via coloring, but they're dual LPs so very related!


> - The LP formulation using independent sets is elegant, but can be used on small graphs only. For instance, a 5x5 grid has already 55447 independent sets... You could add a "compact" formulation that could be used on larger graphs.
 
>

I don't know of a fancy algorithm for fractional chromatic number that would be asymptotically better than the LP. I forgot an optimisation which makes the LP smaller by using _maximal_ independent sets for the variables, and it could save some time and memory to index the LP variables by ints rather than frozensets. 
I don't know how to get around a call to `IndependentSets` of some kind though.

> - You can also add simple optimization like partition into connected components.


This sounds useful, I'll investigate.

> 
> - `optimim` -> `optimum`



---

archive/issue_comments_412784.json:
```json
{
    "body": "<a id='comment:7'></a>> Sure, should I move `fractional_chromatic_index` too? And what about `fractional_clique_number`? One does not usually arrive at the definition of fractional clique number via coloring, but they're dual LPs so very related!\n\n\nYes, move them all.\n\n> > - The LP formulation using independent sets is elegant, but can be used on small graphs only. For instance, a 5x5 grid has already 55447 independent sets... You could add a \"compact\" formulation that could be used on larger graphs.\n \n> >\n> \n> I don't know of a fancy algorithm for fractional chromatic number that would be asymptotically better than the LP.\n\n\nI tried another formulation with `n^2` binary variables and `O(n^2)` fractional variables but it's effectively way slower.\n\nYou could add a note saying that the number of independent sets and the time to generate them can be huge.\n\n> I forgot an optimisation which makes the LP smaller by using _maximal_ independent sets for the variables, \n\nOK\n\n> and it could save some time and memory to index the LP variables by ints rather than frozensets.\n> I don't know how to get around a call to `IndependentSets` of some kind though.\n\n\nAt least, you can do:\n\n```\n        Is = [frozenset(I) for I in IndependentSets(G, maximal=True)]\n```\n`IndependentSets` is an iterator, so your code generates twice each set. Furthermore, when you check `v in I`, it is way faster when `I` is a set and not a list.\n\n\n\nDon't forget to check trivial cases like bipartite graphs.",
    "created_at": "2019-05-08T10:31:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27734#issuecomment-412784",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:7'></a>> Sure, should I move `fractional_chromatic_index` too? And what about `fractional_clique_number`? One does not usually arrive at the definition of fractional clique number via coloring, but they're dual LPs so very related!


Yes, move them all.

> > - The LP formulation using independent sets is elegant, but can be used on small graphs only. For instance, a 5x5 grid has already 55447 independent sets... You could add a "compact" formulation that could be used on larger graphs.
 
> >
> 
> I don't know of a fancy algorithm for fractional chromatic number that would be asymptotically better than the LP.


I tried another formulation with `n^2` binary variables and `O(n^2)` fractional variables but it's effectively way slower.

You could add a note saying that the number of independent sets and the time to generate them can be huge.

> I forgot an optimisation which makes the LP smaller by using _maximal_ independent sets for the variables, 

OK

> and it could save some time and memory to index the LP variables by ints rather than frozensets.
> I don't know how to get around a call to `IndependentSets` of some kind though.


At least, you can do:

```
        Is = [frozenset(I) for I in IndependentSets(G, maximal=True)]
```
`IndependentSets` is an iterator, so your code generates twice each set. Furthermore, when you check `v in I`, it is way faster when `I` is a set and not a list.



Don't forget to check trivial cases like bipartite graphs.



---

archive/issue_comments_412785.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-05-09T02:27:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27734#issuecomment-412785",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_412786.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-09T03:02:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27734#issuecomment-412786",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_412787.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-05-09T04:11:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27734#issuecomment-412787",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_412788.json:
```json
{
    "body": "<a id='comment:11'></a>New commits:",
    "created_at": "2019-05-09T04:15:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27734#issuecomment-412788",
    "user": "https://github.com/ed359"
}
```

<a id='comment:11'></a>New commits:



---

archive/issue_comments_412789.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-\n+Add methods to Graph in sage/graphs/graph.py for computing the fractional chromatic and clique numbers via a linear program. The code is essentially the same as that for `fractional_chromatic_index`, e.g. the default solver is PPL for exact rational computation.\n \n Comment: 1\n \n``````\n",
    "created_at": "2019-05-09T04:15:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27734#issuecomment-412789",
    "user": "https://github.com/ed359"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-
+Add methods to Graph in sage/graphs/graph.py for computing the fractional chromatic and clique numbers via a linear program. The code is essentially the same as that for `fractional_chromatic_index`, e.g. the default solver is PPL for exact rational computation.
 
 Comment: 1
 
``````




---

archive/issue_comments_412790.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-05-09T04:41:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27734#issuecomment-412790",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_412791.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-09T05:34:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27734#issuecomment-412791",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_412792.json:
```json
{
    "body": "<a id='comment:14'></a>Replying to [comment:7 dcoudert]:\n\nI've added the optimisations we discussed. Apologies for (a) the pointless git noise on this ticket, and (b) the following silly issue. \n\nI can't see how to move a class method to another file. In `generic_graph.py` lines 23426-23443 it appears that one can simply write `from sage.module import method` inside the class definition to make `method` appear on the class, e.g.\n\n```python\nclass Foo:\n    from sage.module import method\n\nf = Foo()\nf.method() # works!\n```\n\nbut any variation of this I have tried leads to sage crashing on start with an `ImportError`. The traceback is sufficiently cryptic that I can't diagnose the problem. \n\nFor now I just add a one-line method the usual `def method():` way to the `sage.graphs.Graph` class that imports and calls the method defined in `sage.graphs.graph_coloring.py` that I want, but there should be a better way!",
    "created_at": "2019-05-09T05:47:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27734#issuecomment-412792",
    "user": "https://github.com/ed359"
}
```

<a id='comment:14'></a>Replying to [comment:7 dcoudert]:

I've added the optimisations we discussed. Apologies for (a) the pointless git noise on this ticket, and (b) the following silly issue. 

I can't see how to move a class method to another file. In `generic_graph.py` lines 23426-23443 it appears that one can simply write `from sage.module import method` inside the class definition to make `method` appear on the class, e.g.

```python
class Foo:
    from sage.module import method

f = Foo()
f.method() # works!
```

but any variation of this I have tried leads to sage crashing on start with an `ImportError`. The traceback is sufficiently cryptic that I can't diagnose the problem. 

For now I just add a one-line method the usual `def method():` way to the `sage.graphs.Graph` class that imports and calls the method defined in `sage.graphs.graph_coloring.py` that I want, but there should be a better way!



---

archive/issue_comments_412793.json:
```json
{
    "body": "<a id='comment:15'></a>This should work. It avoids circular imports. As the branch is in `public/`, you can modify it. \n\n---\nNew commits:",
    "created_at": "2019-05-09T06:57:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27734#issuecomment-412793",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:15'></a>This should work. It avoids circular imports. As the branch is in `public/`, you can modify it. 

---
New commits:



---

archive/issue_comments_412794.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-12T21:57:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27734#issuecomment-412794",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_412795.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-05-12T21:58:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27734#issuecomment-412795",
    "user": "https://github.com/ed359"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_412796.json:
```json
{
    "body": "<a id='comment:18'></a>Some quick comments:\n- In all input blocks, the alignement of the 2nd line is only 2 spaces more than the first line, not 4.\n\n```diff\n-    - ``solver`` -- (default: ``\"PPL\"``); specify a Linear Program (LP)\n-        solver to be used. If set to ``None``, the default one is used. For\n+    - ``solver`` -- (default: ``\"PPL\"``); specify a Linear Program (LP)\n+      solver to be used. If set to ``None``, the default one is used. For\n```\n\n- I don't know the number of needed spaces for `.. NOTE::` inside the `INPUT` block. Have you tried building the documentation ? does it looks good ? I cannot check by myself (unable to build the doc yet. I will try to fix that)\n\n- I'm not convinced by `only_maximal`. Why not `maximal_only` or simply `maximal`?\nFurthermore, if it is proven that you can use maximal independent sets only, then why do we need this parameter ? Of course if not proven it's a different story.\n\n- in documentation, you can use ``G`` instead of `G`.\n\n- we need double ```` for True, False and None, so ```True``` not ``True``\n\n- It's a very good idea to introduce ``@`doc_index(\"Coloring\")`.",
    "created_at": "2019-05-13T15:23:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27734#issuecomment-412796",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:18'></a>Some quick comments:
- In all input blocks, the alignement of the 2nd line is only 2 spaces more than the first line, not 4.

```diff
-    - ``solver`` -- (default: ``"PPL"``); specify a Linear Program (LP)
-        solver to be used. If set to ``None``, the default one is used. For
+    - ``solver`` -- (default: ``"PPL"``); specify a Linear Program (LP)
+      solver to be used. If set to ``None``, the default one is used. For
```

- I don't know the number of needed spaces for `.. NOTE::` inside the `INPUT` block. Have you tried building the documentation ? does it looks good ? I cannot check by myself (unable to build the doc yet. I will try to fix that)

- I'm not convinced by `only_maximal`. Why not `maximal_only` or simply `maximal`?
Furthermore, if it is proven that you can use maximal independent sets only, then why do we need this parameter ? Of course if not proven it's a different story.

- in documentation, you can use ``G`` instead of `G`.

- we need double ```` for True, False and None, so ```True``` not ``True``

- It's a very good idea to introduce ``@`doc_index("Coloring")`.



---

archive/issue_comments_412797.json:
```json
{
    "body": "<a id='comment:19'></a>Strangely, I can't find a reference for the maximal thing, but here's a proof in pythonic pseudocode (since I can't see how to write math in a ticket):\n\n  Let `Is` be the set of all independent sets of `G`, and `MIs` be the subset of `Is` consisting of maximal independent sets.\n  \n  If `w` is a nonnegative weight function on independent sets that is feasible in the LP, we have for all vertices `u` of the graph, `sum(w[I] for I in Is if u in I) >= 1`. \n  \n  Suppose that there exists `J in Is` with `w[J] > 0` and a vertex `v` such that `J + [v] in Is`. Then form `x` from `w` by `x[J] = 0`, `x[J + [v]] = w[J] + w[J+[v]]`, and `x[I] = w[I]` for all other `I`. Then `x` is also feasible as moving weight to a larger independent set can only increase the sum of weights over `I in Is if u in I` and the objective values for `w` and `x` are the same by construction. By repeatedly applying this trick we obtain a weight function supported only on `MIs`.\n\nThere's a tradeoff though: if you consider all independent sets then it's valid to use the LP with equality constraints, but it is invalid to impose equality constraints *and* to drop variables corresponding to non-maximal independent sets (the LP can become infeasible).\n\nSomeone with better knowledge of the inner workings of LP solvers could make a call as to which is preferable. My understanding is that for some algorithms each inequality constraint is replaced by an additional variable and an equality constraint. But having two variables for each maximal independent set should still be cheaper than having a single variable for each independent set. I guess benchmarks are warranted, but I don't have the time.",
    "created_at": "2019-05-13T17:39:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27734#issuecomment-412797",
    "user": "https://github.com/ed359"
}
```

<a id='comment:19'></a>Strangely, I can't find a reference for the maximal thing, but here's a proof in pythonic pseudocode (since I can't see how to write math in a ticket):

  Let `Is` be the set of all independent sets of `G`, and `MIs` be the subset of `Is` consisting of maximal independent sets.
  
  If `w` is a nonnegative weight function on independent sets that is feasible in the LP, we have for all vertices `u` of the graph, `sum(w[I] for I in Is if u in I) >= 1`. 
  
  Suppose that there exists `J in Is` with `w[J] > 0` and a vertex `v` such that `J + [v] in Is`. Then form `x` from `w` by `x[J] = 0`, `x[J + [v]] = w[J] + w[J+[v]]`, and `x[I] = w[I]` for all other `I`. Then `x` is also feasible as moving weight to a larger independent set can only increase the sum of weights over `I in Is if u in I` and the objective values for `w` and `x` are the same by construction. By repeatedly applying this trick we obtain a weight function supported only on `MIs`.

There's a tradeoff though: if you consider all independent sets then it's valid to use the LP with equality constraints, but it is invalid to impose equality constraints *and* to drop variables corresponding to non-maximal independent sets (the LP can become infeasible).

Someone with better knowledge of the inner workings of LP solvers could make a call as to which is preferable. My understanding is that for some algorithms each inequality constraint is replaced by an additional variable and an equality constraint. But having two variables for each maximal independent set should still be cheaper than having a single variable for each independent set. I guess benchmarks are warranted, but I don't have the time.



---

archive/issue_comments_412798.json:
```json
{
    "body": "<a id='comment:20'></a>Check Section 2.1 of [1]. Not a formal proof, but give complementary arguments.\n\n\n\n[1] I. Caragiannis, Afonso Ferreira, C. Kaklamanis, St\u00e9phane P\u00e9rennes, Herv\u00e9 Rivano. Fractional Path Coloring in Bounded Degree Trees with Applications\nAlgorithmica, Springer Verlag, 2010, 58 (2), pp.516-540. \u27e810.1007/s00453-009-9278-3\u27e9\nhttps://hal.archives-ouvertes.fr/hal-00371052",
    "created_at": "2019-05-14T08:44:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27734#issuecomment-412798",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:20'></a>Check Section 2.1 of [1]. Not a formal proof, but give complementary arguments.



[1] I. Caragiannis, Afonso Ferreira, C. Kaklamanis, Stéphane Pérennes, Hervé Rivano. Fractional Path Coloring in Bounded Degree Trees with Applications
Algorithmica, Springer Verlag, 2010, 58 (2), pp.516-540. ⟨10.1007/s00453-009-9278-3⟩
https://hal.archives-ouvertes.fr/hal-00371052



---

archive/issue_events_068759.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2020-08-09T22:57:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27734",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27734#event-68759"
}
```



---

archive/issue_comments_412799.json:
```json
{
    "body": "<a id='comment:21'></a>I have rebuild the branch over sage 9.2.beta7 and fix various compilation, doctests and doc build issues.\n\n---\nNew commits:",
    "created_at": "2020-08-09T22:57:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27734#issuecomment-412799",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:21'></a>I have rebuild the branch over sage 9.2.beta7 and fix various compilation, doctests and doc build issues.

---
New commits:



---

archive/issue_comments_412800.json:
```json
{
    "body": "<a id='comment:23'></a>Issues reported by the patchbots seems uncorrelated and I cannot reproduce them.",
    "created_at": "2020-08-10T12:25:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27734#issuecomment-412800",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:23'></a>Issues reported by the patchbots seems uncorrelated and I cannot reproduce them.



---

archive/issue_comments_412801.json:
```json
{
    "body": "<a id='comment:24'></a>For me this patch is now good to go, but I would appreciate an external opinion. Thanks.",
    "created_at": "2020-08-18T12:01:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27734#issuecomment-412801",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:24'></a>For me this patch is now good to go, but I would appreciate an external opinion. Thanks.



---

archive/issue_comments_412802.json:
```json
{
    "body": "<a id='comment:25'></a>It is fine, but if I wanted to nitpick about the doc: The `INPUT:` bullet point should not end with a period/full-stop (except for those really long ones). Also a missing period here:\n\n```diff\n     matchings in the following relaxed way\n \n     .. MATH::\n \n-        \\forall e \\in E(G), \\sum_{e \\in M_i} \\alpha_i \\geq 1\n+        \\forall e \\in E(G), \\sum_{e \\in M_i} \\alpha_i \\geq 1.\n \n     For more information, see the :wikipedia:`Fractional_coloring`.\n```",
    "created_at": "2020-08-18T23:29:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27734#issuecomment-412802",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:25'></a>It is fine, but if I wanted to nitpick about the doc: The `INPUT:` bullet point should not end with a period/full-stop (except for those really long ones). Also a missing period here:

```diff
     matchings in the following relaxed way
 
     .. MATH::
 
-        \forall e \in E(G), \sum_{e \in M_i} \alpha_i \geq 1
+        \forall e \in E(G), \sum_{e \in M_i} \alpha_i \geq 1.
 
     For more information, see the :wikipedia:`Fractional_coloring`.
```



---

archive/issue_comments_412803.json:
```json
{
    "body": "<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-19T12:56:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27734#issuecomment-412803",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_412804.json:
```json
{
    "body": "<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-19T13:18:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27734#issuecomment-412804",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_412805.json:
```json
{
    "body": "<a id='comment:28'></a>I did required changes and\n- removed parameter `only_maximal`. It is correct to consider only maximal independent sets and very costly to consider all independent sets. I added the only reference I know with an explanation of the correctness.\n- use decomposition into biconnected components instead of simply connected components. It's faster this way.",
    "created_at": "2020-08-19T13:21:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27734#issuecomment-412805",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:28'></a>I did required changes and
- removed parameter `only_maximal`. It is correct to consider only maximal independent sets and very costly to consider all independent sets. I added the only reference I know with an explanation of the correctness.
- use decomposition into biconnected components instead of simply connected components. It's faster this way.



---

archive/issue_comments_412806.json:
```json
{
    "body": "<a id='comment:29'></a>Your changes LGTM. If the rest is reviewed, then this is a positive review.",
    "created_at": "2020-08-19T23:04:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27734#issuecomment-412806",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:29'></a>Your changes LGTM. If the rest is reviewed, then this is a positive review.



---

archive/issue_comments_412807.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-08-20T07:25:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27734#issuecomment-412807",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_412808.json:
```json
{
    "body": "<a id='comment:30'></a>Thank you.",
    "created_at": "2020-08-20T07:25:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27734#issuecomment-412808",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:30'></a>Thank you.



---

archive/issue_comments_412809.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-08-23T16:28:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27734#issuecomment-412809",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_068760.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-23T16:28:15Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27734",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27734#event-68760"
}
```
