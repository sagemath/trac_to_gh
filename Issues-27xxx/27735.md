# Issue 27735: Support matrix input in @interact

archive/issues_027498.json:
```json
{
    "body": "This should create a grid widget in the Jupyter notebook (it already works this way in the Sage notebook):\n\n```\n@interact\ndef f(A = matrix([[1,1],[-1,1]])):\n    print(A)\n    print(type(A))\n```\n\nCC:  @slel @williamstein zerline\n\nKeywords: interact, grid widget, jupyter\n\nReviewer: Vincent Klein\n\nAuthor: Jeroen Demeyer\n\nBranch: 335f0a764f4c19cc75af112bf4388e09baac46d2\n\nCommit: 335f0a764f4c19cc75af112bf4388e09baac46d2\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/27735\n\n",
    "closed_at": "2019-05-06T11:56:19Z",
    "created_at": "2019-04-27T07:22:50Z",
    "labels": [
        "component: notebook",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.8",
    "title": "Support matrix input in @interact",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27735",
    "user": "https://github.com/jdemeyer"
}
```
This should create a grid widget in the Jupyter notebook (it already works this way in the Sage notebook):

```
@interact
def f(A = matrix([[1,1],[-1,1]])):
    print(A)
    print(type(A))
```

CC:  @slel @williamstein zerline

Keywords: interact, grid widget, jupyter

Reviewer: Vincent Klein

Author: Jeroen Demeyer

Branch: 335f0a764f4c19cc75af112bf4388e09baac46d2

Commit: 335f0a764f4c19cc75af112bf4388e09baac46d2

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/27735





---

archive/issue_comments_387275.json:
```json
{
    "body": "<a id='comment:1'></a>I feel like this *used* to work, at least in sagenb ... interesting.  It does work [in Sage cell](https://sagecell.sagemath.org/?z=eJxzyMwrSS1KTC7h5UpJTVNI03BUsFXITSwpyqzQiI421DGM1YnWBVGxmppWvFwKQFBQBNSj4aiJzCupLEgFCmkCAJITFfI=&lang=sage&interacts=eJyLjgUAARUAuQ==).\n\n---\n\nFor anyone coming to this - see [this sage-support discussion](https://groups.google.com/d/topic/sage-support/UmTrw7ynt9U/discussion) for an example of background.",
    "created_at": "2019-04-27T18:49:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27735#issuecomment-387275",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:1'></a>I feel like this *used* to work, at least in sagenb ... interesting.  It does work [in Sage cell](https://sagecell.sagemath.org/?z=eJxzyMwrSS1KTC7h5UpJTVNI03BUsFXITSwpyqzQiI421DGM1YnWBVGxmppWvFwKQFBQBNSj4aiJzCupLEgFCmkCAJITFfI=&lang=sage&interacts=eJyLjgUAARUAuQ==).

---

For anyone coming to this - see [this sage-support discussion](https://groups.google.com/d/topic/sage-support/UmTrw7ynt9U/discussion) for an example of background.



---

archive/issue_comments_387276.json:
```json
{
    "body": "<a id='comment:3'></a>Replying to [comment:1 kcrisman]:\n> I feel like this *used* to work, at least in sagenb ...\n\n\nI should have mentioned: this is about Jupyter.",
    "created_at": "2019-04-27T19:18:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27735#issuecomment-387276",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:3'></a>Replying to [comment:1 kcrisman]:
> I feel like this *used* to work, at least in sagenb ...


I should have mentioned: this is about Jupyter.



---

archive/issue_comments_387277.json:
```json
{
    "body": "<a id='comment:5'></a>This is why we really need to get the interact documentation OUT of (or copied elsewhere) the sagenb docs.  Nobody even knows how t use interact any more.  Do you think it might fit in one of the files you modified here?\n\n---\nNew commits:",
    "created_at": "2019-04-27T22:42:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27735#issuecomment-387277",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:5'></a>This is why we really need to get the interact documentation OUT of (or copied elsewhere) the sagenb docs.  Nobody even knows how t use interact any more.  Do you think it might fit in one of the files you modified here?

---
New commits:



---

archive/issue_comments_387278.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-04-29T12:14:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27735#issuecomment-387278",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_387279.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-04-29T12:17:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27735#issuecomment-387279",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_387280.json:
```json
{
    "body": "<a id='comment:8'></a>See #27747 for docs.",
    "created_at": "2019-04-29T12:49:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27735#issuecomment-387280",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>See #27747 for docs.



---

archive/issue_comments_387281.json:
```json
{
    "body": "<a id='comment:9'></a>Currently using the widget may generate `SyntaxError` when you modifiy an input field.\nLet's say you have value `1` in one of your input fields and you want to input `-23` instead, you get one syntax error when delelting `1` on a second when you type `-`.\n\n```\n  File \"<string>\", line 1\n    -\n    ^\nSyntaxError: unexpected EOF while parsing\n```\n\nMaybe there is a way of filtering these cases or evaluating the input only after the focus leave the input field instead of evaluating after each modification/keystroke.",
    "created_at": "2019-04-30T08:41:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27735#issuecomment-387281",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:9'></a>Currently using the widget may generate `SyntaxError` when you modifiy an input field.
Let's say you have value `1` in one of your input fields and you want to input `-23` instead, you get one syntax error when delelting `1` on a second when you type `-`.

```
  File "<string>", line 1
    -
    ^
SyntaxError: unexpected EOF while parsing
```

Maybe there is a way of filtering these cases or evaluating the input only after the focus leave the input field instead of evaluating after each modification/keystroke.



---

archive/issue_comments_387282.json:
```json
{
    "body": "<a id='comment:10'></a>Vincent, you may be right but that's certainly outside the scope of this ticket.",
    "created_at": "2019-04-30T09:34:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27735#issuecomment-387282",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>Vincent, you may be right but that's certainly outside the scope of this ticket.



---

archive/issue_comments_387283.json:
```json
{
    "body": "<a id='comment:11'></a>I would not say \"certainly\" the ticket description say \n> This should work as expected ...\n\nand one can expect not generating `SyntaxError` when modifying an input field value as it is the reason of using interact.",
    "created_at": "2019-04-30T09:47:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27735#issuecomment-387283",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:11'></a>I would not say "certainly" the ticket description say 
> This should work as expected ...

and one can expect not generating `SyntaxError` when modifying an input field value as it is the reason of using interact.



---

archive/issue_comments_387284.json:
```json
{
    "body": "<a id='comment:12'></a>But that's an issue with interacts in general, not specific with `matrix`.",
    "created_at": "2019-04-30T09:51:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27735#issuecomment-387284",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>But that's an issue with interacts in general, not specific with `matrix`.



---

archive/issue_comments_387285.json:
```json
{
    "body": "<a id='comment:13'></a>I wanted just to make sure that you are aware of that behaviour, and indeed this ticket fix a defect as it is.",
    "created_at": "2019-04-30T09:51:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27735#issuecomment-387285",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:13'></a>I wanted just to make sure that you are aware of that behaviour, and indeed this ticket fix a defect as it is.



---

archive/issue_comments_387286.json:
```json
{
    "body": "<a id='comment:15'></a>Replying to [comment:12 jdemeyer]:\n> But that's an issue with interacts in general, not specific with `matrix`.\n\n\nOk",
    "created_at": "2019-04-30T09:52:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27735#issuecomment-387286",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:15'></a>Replying to [comment:12 jdemeyer]:
> But that's an issue with interacts in general, not specific with `matrix`.


Ok



---

archive/issue_comments_387287.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-04-30T10:03:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27735#issuecomment-387287",
    "user": "https://github.com/vinklein"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_387288.json:
```json
{
    "body": "<a id='comment:17'></a>The python3 patchbot plugin says \"from .widgets_sagenb import input_grid\" is incompatible with python3 which isn't true.\n\nLooks good to me.",
    "created_at": "2019-04-30T10:03:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27735#issuecomment-387288",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:17'></a>The python3 patchbot plugin says "from .widgets_sagenb import input_grid" is incompatible with python3 which isn't true.

Looks good to me.



---

archive/issue_comments_387289.json:
```json
{
    "body": "Changing status from positive_review to needs_info.",
    "created_at": "2019-04-30T11:45:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27735#issuecomment-387289",
    "user": "https://github.com/kcrisman"
}
```

Changing status from positive_review to needs_info.



---

archive/issue_comments_387290.json:
```json
{
    "body": "<a id='comment:18'></a>> > But that's an issue with interacts in general, not specific with `matrix`.\n\n> \n> Ok\n\n\nOn the Sage cell server, there is a \"submit\" button with matrices, which is why it isn't an issue.  In sagenb there is no submit button, but this focus issue does not arise; until one presses enter, one can modify an input entry to heart's content. So I would indeed call this a bug.  \n\nThe question is whether it is unique to this new matrix input functionality in Jupyter (in which case it should be fixed here), or whether all Jupyter input grids etc. suffer from this (in which case a new ticket is needed, and it's yet another place where sagenb still is better than Jupyter).  What happens with `input_grid` currently in Jupyter?",
    "created_at": "2019-04-30T11:45:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27735#issuecomment-387290",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:18'></a>> > But that's an issue with interacts in general, not specific with `matrix`.

> 
> Ok


On the Sage cell server, there is a "submit" button with matrices, which is why it isn't an issue.  In sagenb there is no submit button, but this focus issue does not arise; until one presses enter, one can modify an input entry to heart's content. So I would indeed call this a bug.  

The question is whether it is unique to this new matrix input functionality in Jupyter (in which case it should be fixed here), or whether all Jupyter input grids etc. suffer from this (in which case a new ticket is needed, and it's yet another place where sagenb still is better than Jupyter).  What happens with `input_grid` currently in Jupyter?



---

archive/issue_comments_387291.json:
```json
{
    "body": "<a id='comment:19'></a>Please open a new ticket for that.",
    "created_at": "2019-04-30T11:58:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27735#issuecomment-387291",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:19'></a>Please open a new ticket for that.



---

archive/issue_comments_387292.json:
```json
{
    "body": "Changing status from needs_info to positive_review.",
    "created_at": "2019-04-30T11:58:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27735#issuecomment-387292",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_info to positive_review.



---

archive/issue_comments_387293.json:
```json
{
    "body": "<a id='comment:20'></a>> Please open a new ticket for that.\n\n\nSince I haven't observed it, I don't know if it is limited to `input_grid` or not, and I don't have time to fire up a Jupyter right now and do testing.  `@`vklein, since you originally observed this, can you test what does/doesn't work in Jupyter and open a new ticket?  Thank you!",
    "created_at": "2019-04-30T12:57:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27735#issuecomment-387293",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:20'></a>> Please open a new ticket for that.


Since I haven't observed it, I don't know if it is limited to `input_grid` or not, and I don't have time to fire up a Jupyter right now and do testing.  `@`vklein, since you originally observed this, can you test what does/doesn't work in Jupyter and open a new ticket?  Thank you!



---

archive/issue_comments_387294.json:
```json
{
    "body": "<a id='comment:21'></a>It's a general \"problem\" (arguable, since one could call it a feature) with all interacts that have some kind of textual input which is evaluated.",
    "created_at": "2019-04-30T13:02:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27735#issuecomment-387294",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:21'></a>It's a general "problem" (arguable, since one could call it a feature) with all interacts that have some kind of textual input which is evaluated.



---

archive/issue_comments_387295.json:
```json
{
    "body": "<a id='comment:22'></a>On Jupyter only, then?  See #27752.",
    "created_at": "2019-04-30T13:10:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27735#issuecomment-387295",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:22'></a>On Jupyter only, then?  See #27752.



---

archive/issue_comments_387296.json:
```json
{
    "body": "Changing keywords from \"\" to \"interact, grid widget, jupyter\".",
    "created_at": "2019-05-05T21:40:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27735#issuecomment-387296",
    "user": "https://github.com/slel"
}
```

Changing keywords from "" to "interact, grid widget, jupyter".



---

archive/issue_comments_387297.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-05-06T11:56:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27735",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27735#issuecomment-387297",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_068761.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-05-06T11:56:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27735",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27735#event-68761"
}
```
