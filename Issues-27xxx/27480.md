# Issue 27480: Page Rank algorithm implementation for Graphs

archive/issues_027243.json:
```json
{
    "assignees": [
        "https://github.com/rajat1433"
    ],
    "body": "Page Rank computes the ranking of the nodes of the graph based on the structure of the incoming links. It is a useful metrics in graphs and can be quite useful. (https://towardsdatascience.com/graphs-and-paths-pagerank-54f180a1aa0a)\n\nBelow is a link to a thesis on this algorithm \nhttp://www.sagemath.org/files/thesis/augeri-thesis-2008.pdf\n\nIt would be good to have its implementation in the Sage's graph module.\n\nCC:  @dcoudert\n\nKeywords: **pagerank**\n\nBranch: **[`07a884b`](https://github.com/sagemath/sagetrac-mirror/commit/07a884b8ce9f1557b9ac1d2c98fa72aa0eea1e1e)**\n\nReviewer: **David Coudert**\n\nAuthor: **Rajat Mittal**\n\nComponent: **graph theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/27480_\n\n",
    "closed_at": "2019-04-15T17:48:04Z",
    "created_at": "2019-03-13T20:34:56Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Page Rank algorithm implementation for Graphs",
    "type": "issue",
    "updated_at": "2019-05-11T19:00:35Z",
    "url": "https://github.com/sagemath/sage/issues/27480",
    "user": "https://github.com/rajat1433"
}
```
Page Rank computes the ranking of the nodes of the graph based on the structure of the incoming links. It is a useful metrics in graphs and can be quite useful. (https://towardsdatascience.com/graphs-and-paths-pagerank-54f180a1aa0a)

Below is a link to a thesis on this algorithm 
http://www.sagemath.org/files/thesis/augeri-thesis-2008.pdf

It would be good to have its implementation in the Sage's graph module.

CC:  @dcoudert

Keywords: **pagerank**

Branch: **[`07a884b`](https://github.com/sagemath/sagetrac-mirror/commit/07a884b8ce9f1557b9ac1d2c98fa72aa0eea1e1e)**

Reviewer: **David Coudert**

Author: **Rajat Mittal**

Component: **graph theory**

_Issue created by migration from https://trac.sagemath.org/ticket/27480_





---

archive/issue_events_379223.json:
```json
{
    "actor": "https://github.com/rajat1433",
    "created_at": "2019-03-13T20:34:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27480#event-379223"
}
```



---

archive/issue_events_379224.json:
```json
{
    "actor": "https://github.com/rajat1433",
    "created_at": "2019-03-13T20:34:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "eeeeee",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27480#event-379224"
}
```



---

archive/issue_events_379225.json:
```json
{
    "actor": "https://github.com/rajat1433",
    "created_at": "2019-03-13T20:34:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27480#event-379225"
}
```



---

archive/issue_events_379226.json:
```json
{
    "actor": "https://github.com/rajat1433",
    "created_at": "2019-03-13T20:34:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27480#event-379226"
}
```



---

archive/issue_events_379227.json:
```json
{
    "actor": "https://github.com/rajat1433",
    "created_at": "2019-03-13T20:35:38Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "subject": "https://github.com/rajat1433",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27480#event-379227"
}
```



---

archive/issue_comments_425198.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI have a brief idea about it(used it in my college project) and can implement it in Sage modules.",
    "created_at": "2019-03-13T20:37:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425198",
    "user": "https://github.com/rajat1433"
}
```

<div id="comment:2" align="right">comment:2</div>

I have a brief idea about it(used it in my college project) and can implement it in Sage modules.



---

archive/issue_comments_425199.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI just found that networkx library already has Page Rank algorithm implemented in Python. Should I implement it in Sage freshly or should I make a function to use networkx implementation ? \nOr maybe we can write a faster cython implemetation of it.\nNeed some suggetsions!",
    "created_at": "2019-03-14T08:40:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425199",
    "user": "https://github.com/rajat1433"
}
```

<div id="comment:3" align="right">comment:3</div>

I just found that networkx library already has Page Rank algorithm implemented in Python. Should I implement it in Sage freshly or should I make a function to use networkx implementation ? 
Or maybe we can write a faster cython implemetation of it.
Need some suggetsions!



---

archive/issue_comments_425200.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nnetworkx has several methods to compute Page rank: a pure Python, one using numpy, another using scipy, etc.\n\nThe optional package `igraph` also has an implementation of pagerank (see\n[igraph documentation for pagerank](https://igraph.org/python/doc/igraph.Graph-class.html#pagerank)\n(to install igraph, do `sage -i igraph` and `sage -i python_igraph`).\n\nThe best thing to do is to create a method including a parameter `algorithm`, and that will call the different algorithms. So `algorithm` could be `None``, `'networkx'`, `'numpy'`, `'scipy'`, `'igraph'`.",
    "created_at": "2019-03-14T15:46:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425200",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:4" align="right">comment:4</div>

networkx has several methods to compute Page rank: a pure Python, one using numpy, another using scipy, etc.

The optional package `igraph` also has an implementation of pagerank (see
[igraph documentation for pagerank](https://igraph.org/python/doc/igraph.Graph-class.html#pagerank)
(to install igraph, do `sage -i igraph` and `sage -i python_igraph`).

The best thing to do is to create a method including a parameter `algorithm`, and that will call the different algorithms. So `algorithm` could be `None``, `'networkx'`, `'numpy'`, `'scipy'`, `'igraph'`.



---

archive/issue_comments_425201.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nWhen it is None, should an implementation in sage  be used? And if so should I do an implementation \nin python or cython?",
    "created_at": "2019-03-14T17:21:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425201",
    "user": "https://github.com/rajat1433"
}
```

<div id="comment:5" align="right">comment:5</div>

When it is None, should an implementation in sage  be used? And if so should I do an implementation 
in python or cython?



---

archive/issue_comments_425202.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nWhen it's `None`, the method should choose the best available implementation. And the best implementation could depend on the size or density of the (di)graph. For instance, for very large graphs, methods based on matrix multiplication might not be appropriate (memory consumption), while such methods might be very efficient for small graphs. Some measurements are needed to decide.\n\nBefore deciding if a new implementation is needed, we must know if what we can easily get is  fast enough or not.",
    "created_at": "2019-03-14T17:54:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425202",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:6" align="right">comment:6</div>

When it's `None`, the method should choose the best available implementation. And the best implementation could depend on the size or density of the (di)graph. For instance, for very large graphs, methods based on matrix multiplication might not be appropriate (memory consumption), while such methods might be very efficient for small graphs. Some measurements are needed to decide.

Before deciding if a new implementation is needed, we must know if what we can easily get is  fast enough or not.



---

archive/issue_comments_425203.json:
```json
{
    "body": "Branch: **[u/gh-rajat1433/27480_page_rank](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-rajat1433/27480_page_rank)**",
    "created_at": "2019-03-15T08:41:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425203",
    "user": "https://github.com/rajat1433"
}
```

Branch: **[u/gh-rajat1433/27480_page_rank](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-rajat1433/27480_page_rank)**



---

archive/issue_comments_425204.json:
```json
{
    "body": "Dependencies: **#27496**",
    "created_at": "2019-03-15T16:36:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425204",
    "user": "https://github.com/rajat1433"
}
```

Dependencies: **#27496**



---

archive/issue_comments_425205.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI have installed igraph in my sage module. But however its pagerank algorithm is not able to work. It keeps on throwing a segmentation error. I use igraph_graph to convert sage graph into igraph. All other algorithms of igraph works fine. Following error message I get:\n\n```\nCython backtrace\n----------------\n\n29\t../sysdeps/unix/sysv/linux/waitpid.c: No such file or directory.\nTraceback (most recent call last):\n  File \"<string>\", line 56, in <module>\n  File \"/usr/lib/python3/dist-packages/Cython/Debugger/libcython.py\", line 689, in invoke\n    for arg in string_to_argv(args):\nTypeError: argument 1 must be str, not bytes\nSaved trace to /home/rajat/.sage/crash_logs/crash_yLpPiW.log\n------------------------------------------------------------------------\nUnhandled SIGSEGV: A segmentation fault occurred.\nThis probably occurred because a *compiled* module has a bug\nin it and is not properly wrapped with sig_on(), sig_off().\nPython will now terminate.\n\n```\n\n\nRegarding networkx,numpy and scipy, I have tested them on their runtime. Numpy does it by matrix multiplication and solving for eigenvalues, networkx has pure python implementation and scipy does matrix multiplication iteratively.\n\nFollowing are the runtimes I got:\n\n\n```\nsage: G=nx.gnp_random_graph(40,0.01,directed=True)\nsage: %timeit nx.pagerank_numpy(G)\n1000 loops, best of 3: 883 \u00b5s per loop\nsage: %timeit nx.pagerank_scipy(G)\n1000 loops, best of 3: 1.7 ms per loop\nsage: %timeit nx.pagerank(G)\n1000 loops, best of 3: 1.7 ms per loop\n\nsage: G=nx.gnp_random_graph(60,0.01,directed=True)\nsage: %timeit nx.pagerank(G)\n100 loops, best of 3: 2.87 ms per loop\nsage: %timeit nx.pagerank_scipy(G)\n1000 loops, best of 3: 1.87 ms per loop\nsage: %timeit nx.pagerank_numpy(G)\n1000 loops, best of 3: 1.58 ms per loop\n\nsage: G=nx.gnp_random_graph(70,0.01,directed=True)\nsage: %timeit nx.pagerank(G)\n100 loops, best of 3: 3.66 ms per loop\nsage: %timeit nx.pagerank_numpy(G)\n100 loops, best of 3: 2.22 ms per loop\nsage: %timeit nx.pagerank_scipy(G)\n100 loops, best of 3: 1.99 ms per loop\n\nsage: G=nx.gnp_random_graph(80,0.01,directed=True)\nsage: %timeit nx.pagerank(G)\n100 loops, best of 3: 4.66 ms per loop\nsage: %timeit nx.pagerank_scipy(G)\n1000 loops, best of 3: 1.93 ms per loop\nsage: %timeit nx.pagerank_numpy(G)\n100 loops, best of 3: 3.3 ms per loop\n\nsage: G=nx.gnp_random_graph(100,0.01,directed=True)\nsage: %timeit nx.pagerank(G)\n100 loops, best of 3: 7.07 ms per loop\nsage: %timeit nx.pagerank_scipy(G)\n100 loops, best of 3: 2.29 ms per loop\nsage: %timeit nx.pagerank_numpy(G)\n100 loops, best of 3: 4.63 ms per loop\n\nsage: G=nx.gnp_random_graph(400,0.01,directed=True)\nsage: %timeit nx.pagerank_numpy(G)\n10 loops, best of 3: 175 ms per loop\nsage: %timeit nx.pagerank_scipy(G)\n100 loops, best of 3: 3.9 ms per loop\nsage: %timeit nx.pagerank(G)\n10 loops, best of 3: 53.2 ms per loop\n\nsage: G=nx.gnp_random_graph(4000,0.01,directed=True)\nsage: %timeit nx.pagerank(G)\n1 loop, best of 3: 1.81 s per loop\nsage: %timeit nx.pagerank_scipy(G)\n1 loop, best of 3: 206 ms per loop\nsage: %timeit nx.pagerank_numpy(G)\n1 loop, best of 3: 1min 1s per loop\n\n```\n\n\nAs per my analysis upto around 60 vertices numpy is fast but scipy is fastest after that.",
    "created_at": "2019-03-16T04:02:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425205",
    "user": "https://github.com/rajat1433"
}
```

<div id="comment:9" align="right">comment:9</div>

I have installed igraph in my sage module. But however its pagerank algorithm is not able to work. It keeps on throwing a segmentation error. I use igraph_graph to convert sage graph into igraph. All other algorithms of igraph works fine. Following error message I get:

```
Cython backtrace
----------------

29	../sysdeps/unix/sysv/linux/waitpid.c: No such file or directory.
Traceback (most recent call last):
  File "<string>", line 56, in <module>
  File "/usr/lib/python3/dist-packages/Cython/Debugger/libcython.py", line 689, in invoke
    for arg in string_to_argv(args):
TypeError: argument 1 must be str, not bytes
Saved trace to /home/rajat/.sage/crash_logs/crash_yLpPiW.log
------------------------------------------------------------------------
Unhandled SIGSEGV: A segmentation fault occurred.
This probably occurred because a *compiled* module has a bug
in it and is not properly wrapped with sig_on(), sig_off().
Python will now terminate.

```


Regarding networkx,numpy and scipy, I have tested them on their runtime. Numpy does it by matrix multiplication and solving for eigenvalues, networkx has pure python implementation and scipy does matrix multiplication iteratively.

Following are the runtimes I got:


```
sage: G=nx.gnp_random_graph(40,0.01,directed=True)
sage: %timeit nx.pagerank_numpy(G)
1000 loops, best of 3: 883 µs per loop
sage: %timeit nx.pagerank_scipy(G)
1000 loops, best of 3: 1.7 ms per loop
sage: %timeit nx.pagerank(G)
1000 loops, best of 3: 1.7 ms per loop

sage: G=nx.gnp_random_graph(60,0.01,directed=True)
sage: %timeit nx.pagerank(G)
100 loops, best of 3: 2.87 ms per loop
sage: %timeit nx.pagerank_scipy(G)
1000 loops, best of 3: 1.87 ms per loop
sage: %timeit nx.pagerank_numpy(G)
1000 loops, best of 3: 1.58 ms per loop

sage: G=nx.gnp_random_graph(70,0.01,directed=True)
sage: %timeit nx.pagerank(G)
100 loops, best of 3: 3.66 ms per loop
sage: %timeit nx.pagerank_numpy(G)
100 loops, best of 3: 2.22 ms per loop
sage: %timeit nx.pagerank_scipy(G)
100 loops, best of 3: 1.99 ms per loop

sage: G=nx.gnp_random_graph(80,0.01,directed=True)
sage: %timeit nx.pagerank(G)
100 loops, best of 3: 4.66 ms per loop
sage: %timeit nx.pagerank_scipy(G)
1000 loops, best of 3: 1.93 ms per loop
sage: %timeit nx.pagerank_numpy(G)
100 loops, best of 3: 3.3 ms per loop

sage: G=nx.gnp_random_graph(100,0.01,directed=True)
sage: %timeit nx.pagerank(G)
100 loops, best of 3: 7.07 ms per loop
sage: %timeit nx.pagerank_scipy(G)
100 loops, best of 3: 2.29 ms per loop
sage: %timeit nx.pagerank_numpy(G)
100 loops, best of 3: 4.63 ms per loop

sage: G=nx.gnp_random_graph(400,0.01,directed=True)
sage: %timeit nx.pagerank_numpy(G)
10 loops, best of 3: 175 ms per loop
sage: %timeit nx.pagerank_scipy(G)
100 loops, best of 3: 3.9 ms per loop
sage: %timeit nx.pagerank(G)
10 loops, best of 3: 53.2 ms per loop

sage: G=nx.gnp_random_graph(4000,0.01,directed=True)
sage: %timeit nx.pagerank(G)
1 loop, best of 3: 1.81 s per loop
sage: %timeit nx.pagerank_scipy(G)
1 loop, best of 3: 206 ms per loop
sage: %timeit nx.pagerank_numpy(G)
1 loop, best of 3: 1min 1s per loop

```


As per my analysis upto around 60 vertices numpy is fast but scipy is fastest after that.



---

archive/issue_comments_425206.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI don't know what's the problem with igraph. I have installed `igraph` and `python_igraph` on my OSX laptop and I can do \n\n```\nsage: G = graphs.RandomGNP(1000, .01)\nsage: I = G.igraph_graph()\nsage: %timeit I.pagerank()\n100 loops, best of 3: 1.92 ms per loop\n```\nTry recompiling sage (`make build` or `sage -b`). If not working, you can ask for help on [sage-devel](https://groups.google.com/forum/#!forum/sage-devel). Explain what you did to install igraph, that other algorithms of igraph are working fine for you, and what's the error message you get.",
    "created_at": "2019-03-16T08:18:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425206",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:10" align="right">comment:10</div>

I don't know what's the problem with igraph. I have installed `igraph` and `python_igraph` on my OSX laptop and I can do 

```
sage: G = graphs.RandomGNP(1000, .01)
sage: I = G.igraph_graph()
sage: %timeit I.pagerank()
100 loops, best of 3: 1.92 ms per loop
```
Try recompiling sage (`make build` or `sage -b`). If not working, you can ask for help on [sage-devel](https://groups.google.com/forum/#!forum/sage-devel). Explain what you did to install igraph, that other algorithms of igraph are working fine for you, and what's the error message you get.



---

archive/issue_comments_425207.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nNote that a random graph on 40 nodes with probability 0.01 has in average 8 edges... so your experiments are not very conclusive on small graphs. Nonetheless, `scipy` seems the most efficient version.",
    "created_at": "2019-03-16T08:19:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425207",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:11" align="right">comment:11</div>

Note that a random graph on 40 nodes with probability 0.01 has in average 8 edges... so your experiments are not very conclusive on small graphs. Nonetheless, `scipy` seems the most efficient version.



---

archive/issue_comments_425208.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nMore experiments with dense small graphs also suggest numpy to be best for small graphs\n\n```\nsage: G=nx.gnp_random_graph(40,0.5,directed=True)\nsage:  **%timeit nx.pagerank_numpy(G)\nThe slowest run took 86.64 times longer than the fastest. This could mean that an intermediate result is being cached.\n1 loop, best of 3: 2.32 ms per loop**\nsage: %timeit nx.pagerank_scipy(G)\nThe slowest run took 60.81 times longer than the fastest. This could mean that an intermediate result is being cached.\n100 loops, best of 3: 2.41 ms per loop\nsage: %timeit nx.pagerank(G)\n100 loops, best of 3: 12.5 ms per loop\n\n\nsage: G=nx.gnp_random_graph(60,0.5,directed=True)\nsage: %timeit nx.pagerank(G)\n10 loops, best of 3: 27 ms per loop\nsage: %timeit nx.pagerank_scipy(G)\n100 loops, best of 3: 3.47 ms per loop\nsage: **%timeit nx.pagerank_numpy(G)\n100 loops, best of 3: 3.13 ms per loop**\n\n```",
    "created_at": "2019-03-16T08:40:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425208",
    "user": "https://github.com/rajat1433"
}
```

<div id="comment:12" align="right">comment:12</div>

More experiments with dense small graphs also suggest numpy to be best for small graphs

```
sage: G=nx.gnp_random_graph(40,0.5,directed=True)
sage:  **%timeit nx.pagerank_numpy(G)
The slowest run took 86.64 times longer than the fastest. This could mean that an intermediate result is being cached.
1 loop, best of 3: 2.32 ms per loop**
sage: %timeit nx.pagerank_scipy(G)
The slowest run took 60.81 times longer than the fastest. This could mean that an intermediate result is being cached.
100 loops, best of 3: 2.41 ms per loop
sage: %timeit nx.pagerank(G)
100 loops, best of 3: 12.5 ms per loop


sage: G=nx.gnp_random_graph(60,0.5,directed=True)
sage: %timeit nx.pagerank(G)
10 loops, best of 3: 27 ms per loop
sage: %timeit nx.pagerank_scipy(G)
100 loops, best of 3: 3.47 ms per loop
sage: **%timeit nx.pagerank_numpy(G)
100 loops, best of 3: 3.13 ms per loop**

```



---

archive/issue_events_379228.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27480#event-379228"
}
```



---

archive/issue_events_379229.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27480#event-379229"
}
```



---

archive/issue_comments_425209.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nTicket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)",
    "created_at": "2019-03-25T10:56:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425209",
    "user": "https://github.com/embray"
}
```

<div id="comment:13" align="right">comment:13</div>

Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)



---

archive/issue_comments_425210.json:
```json
{
    "body": "Changed dependencies from **#27496** to **#27496, #27502**",
    "created_at": "2019-03-29T18:00:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425210",
    "user": "https://github.com/rajat1433"
}
```

Changed dependencies from **#27496** to **#27496, #27502**



---

archive/issue_comments_425211.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nPage rank for Ipython with weighted edges doesn't seem to be working:\nHowever there is a parameter called weights in Pagerank method of Igraph , I looked at its code and doc but it is not clear to me if it is using it.\n\nhttps://github.com/igraph/python-igraph/blob/master/src/graphobject.c\n\nhttps://igraph.org/python/doc/igraph.GraphBase-class.html#personalized_pagerank\n\n\n```\nsage: G = Graph(6)\nsage: I = G.igraph_graph()\nsage: I.add_edge(0,0,weight=40)\nigraph.Edge(<igraph.Graph object at 0x7f338814e148>, 0, {'weight': 40})\nsage: I.add_edge(1,2,weight=50)\nigraph.Edge(<igraph.Graph object at 0x7f338814e148>, 1, {'weight': 50})\nsage: I.add_edge(2,3,weight=60)\nigraph.Edge(<igraph.Graph object at 0x7f338814e148>, 2, {'weight': 60})\nsage: I.add_edge(0,3,weight=70)\nigraph.Edge(<igraph.Graph object at 0x7f338814e148>, 3, {'weight': 70})\nsage: I.add_edge(3,4,weight=80)\nigraph.Edge(<igraph.Graph object at 0x7f338814e148>, 4, {'weight': 80})\nsage: I.add_edge(4,5,weight=20)\nigraph.Edge(<igraph.Graph object at 0x7f338814e148>, 5, {'weight': 20})\nsage: I.pagerank(weights='weight')\n[0.1380494948975056,\n 0.11517272680482316,\n 0.19683228912731204,\n 0.237940473238224,\n 0.196832289127312,\n 0.11517272680482313]\nsage: I.pagerank()\n[0.1380494948975056,\n 0.11517272680482316,\n 0.19683228912731204,\n 0.237940473238224,\n 0.196832289127312,\n 0.11517272680482313]\n\n```",
    "created_at": "2019-03-31T10:00:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425211",
    "user": "https://github.com/rajat1433"
}
```

<div id="comment:15" align="right">comment:15</div>

Page rank for Ipython with weighted edges doesn't seem to be working:
However there is a parameter called weights in Pagerank method of Igraph , I looked at its code and doc but it is not clear to me if it is using it.

https://github.com/igraph/python-igraph/blob/master/src/graphobject.c

https://igraph.org/python/doc/igraph.GraphBase-class.html#personalized_pagerank


```
sage: G = Graph(6)
sage: I = G.igraph_graph()
sage: I.add_edge(0,0,weight=40)
igraph.Edge(<igraph.Graph object at 0x7f338814e148>, 0, {'weight': 40})
sage: I.add_edge(1,2,weight=50)
igraph.Edge(<igraph.Graph object at 0x7f338814e148>, 1, {'weight': 50})
sage: I.add_edge(2,3,weight=60)
igraph.Edge(<igraph.Graph object at 0x7f338814e148>, 2, {'weight': 60})
sage: I.add_edge(0,3,weight=70)
igraph.Edge(<igraph.Graph object at 0x7f338814e148>, 3, {'weight': 70})
sage: I.add_edge(3,4,weight=80)
igraph.Edge(<igraph.Graph object at 0x7f338814e148>, 4, {'weight': 80})
sage: I.add_edge(4,5,weight=20)
igraph.Edge(<igraph.Graph object at 0x7f338814e148>, 5, {'weight': 20})
sage: I.pagerank(weights='weight')
[0.1380494948975056,
 0.11517272680482316,
 0.19683228912731204,
 0.237940473238224,
 0.196832289127312,
 0.11517272680482313]
sage: I.pagerank()
[0.1380494948975056,
 0.11517272680482316,
 0.19683228912731204,
 0.237940473238224,
 0.196832289127312,
 0.11517272680482313]

```



---

archive/issue_comments_425212.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nFollowing experiments show igraph's results to be the best due to its c-language code.\n\n\n```\nsage: G = graphs.RandomGNP(40, 0.2)\nsage: n = G.networkx_graph()\nsage: %timeit nx.pagerank_numpy(n)\n1000 loops, best of 3: 1.06 ms per loop\nsage: %timeit nx.pagerank_scipy(n)\nThe slowest run took 37.63 times longer than the fastest. This could mean that an intermediate result is being cached.\n100 loops, best of 3: 2.31 ms per loop\nsage:  %timeit nx.pagerank(n)\n100 loops, best of 3: 11.3 ms per loop\nsage: i = G.igraph_graph()\nsage: %timeit i.pagerank()\n10000 loops, best of 3: **23.3 \u00b5s** per loop\n\n\nsage: G = graphs.RandomGNP(40, 0.8)\nsage: n = G.networkx_graph()\nsage: %timeit nx.pagerank_numpy(n)\n1000 loops, best of 3: 1.33 ms per loop\nsage: %timeit nx.pagerank_scipy(n)\n100 loops, best of 3: 2.16 ms per loop\nsage:  %timeit nx.pagerank(n)\n10 loops, best of 3: 20 ms per loop\nsage: i = G.igraph_graph()\nsage: %timeit i.pagerank()\n10000 loops, best of 3: **39.1 \u00b5s** per loop\n\n\nsage: G = graphs.RandomGNP(4000, 0.5)\nsage: n = G.networkx_graph()\nsage: i = G.igraph_graph()\nsage: %timeit i.pagerank()\n1 loop, best of 3: **1.03 s** per loop\nsage: n = G.networkx_graph()\nsage: %timeit nx.pagerank_numpy(n)\n1 loop, best of 3: 1min 9s per loop\nsage: %timeit nx.pagerank_scipy(n)\n1 loop, best of 3: 7.12 s per loop\nsage:  %timeit nx.pagerank(n)\n....: \n....: \nKilled\n\n```",
    "created_at": "2019-03-31T10:42:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425212",
    "user": "https://github.com/rajat1433"
}
```

<div id="comment:16" align="right">comment:16</div>

Following experiments show igraph's results to be the best due to its c-language code.


```
sage: G = graphs.RandomGNP(40, 0.2)
sage: n = G.networkx_graph()
sage: %timeit nx.pagerank_numpy(n)
1000 loops, best of 3: 1.06 ms per loop
sage: %timeit nx.pagerank_scipy(n)
The slowest run took 37.63 times longer than the fastest. This could mean that an intermediate result is being cached.
100 loops, best of 3: 2.31 ms per loop
sage:  %timeit nx.pagerank(n)
100 loops, best of 3: 11.3 ms per loop
sage: i = G.igraph_graph()
sage: %timeit i.pagerank()
10000 loops, best of 3: **23.3 µs** per loop


sage: G = graphs.RandomGNP(40, 0.8)
sage: n = G.networkx_graph()
sage: %timeit nx.pagerank_numpy(n)
1000 loops, best of 3: 1.33 ms per loop
sage: %timeit nx.pagerank_scipy(n)
100 loops, best of 3: 2.16 ms per loop
sage:  %timeit nx.pagerank(n)
10 loops, best of 3: 20 ms per loop
sage: i = G.igraph_graph()
sage: %timeit i.pagerank()
10000 loops, best of 3: **39.1 µs** per loop


sage: G = graphs.RandomGNP(4000, 0.5)
sage: n = G.networkx_graph()
sage: i = G.igraph_graph()
sage: %timeit i.pagerank()
1 loop, best of 3: **1.03 s** per loop
sage: n = G.networkx_graph()
sage: %timeit nx.pagerank_numpy(n)
1 loop, best of 3: 1min 9s per loop
sage: %timeit nx.pagerank_scipy(n)
1 loop, best of 3: 7.12 s per loop
sage:  %timeit nx.pagerank(n)
....: 
....: 
Killed

```



---

archive/issue_comments_425213.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nThe code of the pagerank algorithm is here https://github.com/igraph/igraph/blob/master/src/centrality.c",
    "created_at": "2019-03-31T10:44:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425213",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:17" align="right">comment:17</div>

The code of the pagerank algorithm is here https://github.com/igraph/igraph/blob/master/src/centrality.c



---

archive/issue_comments_425214.json:
```json
{
    "body": "Changed branch from **[u/gh-rajat1433/27480_page_rank](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-rajat1433/27480_page_rank)** to **[u/gh-rajat1433/27480_page_rank_implementation](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-rajat1433/27480_page_rank_implementation)**",
    "created_at": "2019-03-31T10:46:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425214",
    "user": "https://github.com/rajat1433"
}
```

Changed branch from **[u/gh-rajat1433/27480_page_rank](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-rajat1433/27480_page_rank)** to **[u/gh-rajat1433/27480_page_rank_implementation](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-rajat1433/27480_page_rank_implementation)**



---

archive/issue_comments_425215.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b2c82eca89e7ea2c88d2ce94f8904e12b969ccac\"><code>b2c82ec</code></a></td><td><code>Fixes cycle basis for multiedges</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1a68ce1d896929e27b7dbd2a99dee810bc318dda\"><code>1a68ce1</code></a></td><td><code>Add doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/142e50fa00bf1b76d4ec435278d3a9feec183b45\"><code>142e50f</code></a></td><td><code>Merge branch 'develop' of git://trac.sagemath.org/sage into develop</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8836f0d1196d85faa79e4a3c21a95c9cb52c9a5d\"><code>8836f0d</code></a></td><td><code>checkpoint1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a2f38d9b4263af5371ca013afc4e2547ff57f879\"><code>a2f38d9</code></a></td><td><code>merged</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8433c2a23cfcbe72bfba183e58abe0cda292057f\"><code>8433c2a</code></a></td><td><code>merged</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b57b73050f0e7eeafda728b404c1b5fa507ff49c\"><code>b57b730</code></a></td><td><code>pagerank method</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ecbb4a7c73b93b8ff4326e018cb58fea330fdb97\"><code>ecbb4a7</code></a></td><td><code>removed xtra lines</code></td></tr></table>\n",
    "created_at": "2019-03-31T10:48:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425215",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b2c82eca89e7ea2c88d2ce94f8904e12b969ccac"><code>b2c82ec</code></a></td><td><code>Fixes cycle basis for multiedges</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1a68ce1d896929e27b7dbd2a99dee810bc318dda"><code>1a68ce1</code></a></td><td><code>Add doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/142e50fa00bf1b76d4ec435278d3a9feec183b45"><code>142e50f</code></a></td><td><code>Merge branch 'develop' of git://trac.sagemath.org/sage into develop</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8836f0d1196d85faa79e4a3c21a95c9cb52c9a5d"><code>8836f0d</code></a></td><td><code>checkpoint1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a2f38d9b4263af5371ca013afc4e2547ff57f879"><code>a2f38d9</code></a></td><td><code>merged</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8433c2a23cfcbe72bfba183e58abe0cda292057f"><code>8433c2a</code></a></td><td><code>merged</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b57b73050f0e7eeafda728b404c1b5fa507ff49c"><code>b57b730</code></a></td><td><code>pagerank method</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ecbb4a7c73b93b8ff4326e018cb58fea330fdb97"><code>ecbb4a7</code></a></td><td><code>removed xtra lines</code></td></tr></table>




---

archive/issue_comments_425216.json:
```json
{
    "body": "Commit: **[`ecbb4a7`](https://github.com/sagemath/sagetrac-mirror/commit/ecbb4a7c73b93b8ff4326e018cb58fea330fdb97)**",
    "created_at": "2019-03-31T10:48:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425216",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`ecbb4a7`](https://github.com/sagemath/sagetrac-mirror/commit/ecbb4a7c73b93b8ff4326e018cb58fea330fdb97)**



---

archive/issue_comments_425217.json:
```json
{
    "body": "Changed branch from **[u/gh-rajat1433/27480_page_rank_implementation](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-rajat1433/27480_page_rank_implementation)** to **[u/gh-rajat1433/27480_page_rank_algo](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-rajat1433/27480_page_rank_algo)**",
    "created_at": "2019-03-31T10:54:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425217",
    "user": "https://github.com/rajat1433"
}
```

Changed branch from **[u/gh-rajat1433/27480_page_rank_implementation](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-rajat1433/27480_page_rank_implementation)** to **[u/gh-rajat1433/27480_page_rank_algo](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-rajat1433/27480_page_rank_algo)**



---

archive/issue_comments_425218.json:
```json
{
    "body": "Changed commit from **[`ecbb4a7`](https://github.com/sagemath/sagetrac-mirror/commit/ecbb4a7c73b93b8ff4326e018cb58fea330fdb97)** to none",
    "created_at": "2019-03-31T10:54:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425218",
    "user": "https://github.com/rajat1433"
}
```

Changed commit from **[`ecbb4a7`](https://github.com/sagemath/sagetrac-mirror/commit/ecbb4a7c73b93b8ff4326e018cb58fea330fdb97)** to none



---

archive/issue_comments_425219.json:
```json
{
    "body": "Commit: **[`142e50f`](https://github.com/sagemath/sagetrac-mirror/commit/142e50fa00bf1b76d4ec435278d3a9feec183b45)**",
    "created_at": "2019-03-31T10:56:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425219",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`142e50f`](https://github.com/sagemath/sagetrac-mirror/commit/142e50fa00bf1b76d4ec435278d3a9feec183b45)**



---

archive/issue_comments_425220.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b2c82eca89e7ea2c88d2ce94f8904e12b969ccac\"><code>b2c82ec</code></a></td><td><code>Fixes cycle basis for multiedges</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1a68ce1d896929e27b7dbd2a99dee810bc318dda\"><code>1a68ce1</code></a></td><td><code>Add doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/142e50fa00bf1b76d4ec435278d3a9feec183b45\"><code>142e50f</code></a></td><td><code>Merge branch 'develop' of git://trac.sagemath.org/sage into develop</code></td></tr></table>\n",
    "created_at": "2019-03-31T10:56:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425220",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b2c82eca89e7ea2c88d2ce94f8904e12b969ccac"><code>b2c82ec</code></a></td><td><code>Fixes cycle basis for multiedges</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1a68ce1d896929e27b7dbd2a99dee810bc318dda"><code>1a68ce1</code></a></td><td><code>Add doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/142e50fa00bf1b76d4ec435278d3a9feec183b45"><code>142e50f</code></a></td><td><code>Merge branch 'develop' of git://trac.sagemath.org/sage into develop</code></td></tr></table>




---

archive/issue_comments_425221.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/faafb7947fab662e4fef0f965e68e5b6d16d6062\"><code>faafb79</code></a></td><td><code>branch corrected</code></td></tr></table>\n",
    "created_at": "2019-03-31T11:11:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425221",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/faafb7947fab662e4fef0f965e68e5b6d16d6062"><code>faafb79</code></a></td><td><code>branch corrected</code></td></tr></table>




---

archive/issue_comments_425222.json:
```json
{
    "body": "Changed commit from **[`142e50f`](https://github.com/sagemath/sagetrac-mirror/commit/142e50fa00bf1b76d4ec435278d3a9feec183b45)** to **[`faafb79`](https://github.com/sagemath/sagetrac-mirror/commit/faafb7947fab662e4fef0f965e68e5b6d16d6062)**",
    "created_at": "2019-03-31T11:11:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425222",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`142e50f`](https://github.com/sagemath/sagetrac-mirror/commit/142e50fa00bf1b76d4ec435278d3a9feec183b45)** to **[`faafb79`](https://github.com/sagemath/sagetrac-mirror/commit/faafb7947fab662e4fef0f965e68e5b6d16d6062)**



---

archive/issue_comments_425223.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cdef2867ecae6aad616400562b2ee825181e603d\"><code>cdef286</code></a></td><td><code>fix small mistakes</code></td></tr></table>\n",
    "created_at": "2019-03-31T11:12:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425223",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cdef2867ecae6aad616400562b2ee825181e603d"><code>cdef286</code></a></td><td><code>fix small mistakes</code></td></tr></table>




---

archive/issue_comments_425224.json:
```json
{
    "body": "Changed commit from **[`faafb79`](https://github.com/sagemath/sagetrac-mirror/commit/faafb7947fab662e4fef0f965e68e5b6d16d6062)** to **[`cdef286`](https://github.com/sagemath/sagetrac-mirror/commit/cdef2867ecae6aad616400562b2ee825181e603d)**",
    "created_at": "2019-03-31T11:12:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425224",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`faafb79`](https://github.com/sagemath/sagetrac-mirror/commit/faafb7947fab662e4fef0f965e68e5b6d16d6062)** to **[`cdef286`](https://github.com/sagemath/sagetrac-mirror/commit/cdef2867ecae6aad616400562b2ee825181e603d)**



---

archive/issue_comments_425225.json:
```json
{
    "body": "Changed commit from **[`cdef286`](https://github.com/sagemath/sagetrac-mirror/commit/cdef2867ecae6aad616400562b2ee825181e603d)** to **[`b4e6b8c`](https://github.com/sagemath/sagetrac-mirror/commit/b4e6b8c4937cba885bfdf81c8f84d67a0de2be24)**",
    "created_at": "2019-03-31T11:16:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425225",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cdef286`](https://github.com/sagemath/sagetrac-mirror/commit/cdef2867ecae6aad616400562b2ee825181e603d)** to **[`b4e6b8c`](https://github.com/sagemath/sagetrac-mirror/commit/b4e6b8c4937cba885bfdf81c8f84d67a0de2be24)**



---

archive/issue_comments_425226.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b4e6b8c4937cba885bfdf81c8f84d67a0de2be24\"><code>b4e6b8c</code></a></td><td><code>removing spaces</code></td></tr></table>\n",
    "created_at": "2019-03-31T11:16:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425226",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b4e6b8c4937cba885bfdf81c8f84d67a0de2be24"><code>b4e6b8c</code></a></td><td><code>removing spaces</code></td></tr></table>




---

archive/issue_comments_425227.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nSorry for the mess. Its due to update in the sage version now its corrected :)",
    "created_at": "2019-03-31T11:17:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425227",
    "user": "https://github.com/rajat1433"
}
```

<div id="comment:25" align="right">comment:25</div>

Sorry for the mess. Its due to update in the sage version now its corrected :)



---

archive/issue_comments_425228.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nI think that this is an issue on igraph side that its not able to work for weighted graphs in python.\nhttps://lists.nongnu.org/archive/html/igraph-help/2008-08/msg00030.html\n\nStill I am seeing through how the code of igraph can be fixed to take weights in pagerank.\nElse we can use other libraries like scipy for weighted case.",
    "created_at": "2019-03-31T14:38:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425228",
    "user": "https://github.com/rajat1433"
}
```

<div id="comment:26" align="right">comment:26</div>

I think that this is an issue on igraph side that its not able to work for weighted graphs in python.
https://lists.nongnu.org/archive/html/igraph-help/2008-08/msg00030.html

Still I am seeing through how the code of igraph can be fixed to take weights in pagerank.
Else we can use other libraries like scipy for weighted case.



---

archive/issue_comments_425229.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nI think the problem is with the version or codebase of igraph which sage currently uses , maybe its not been updated.\n\nUsing sage:\n\n```\nsage: G = Graph(5)\nsage: I = G.igraph_graph()\nsage: I.add_edge(0,1,weight=50)\nigraph.Edge(<igraph.Graph object at 0x7fe144ca7a00>, 0, {'weight': 50})\nsage: I.add_edge(1,2,weight=70)\n....: \nigraph.Edge(<igraph.Graph object at 0x7fe144ca7a00>, 1, {'weight': 70})\nsage: I.add_edge(2,4,weight=35)\nigraph.Edge(<igraph.Graph object at 0x7fe144ca7a00>, 2, {'weight': 35})\nsage: \n....: \nsage: I.add_edge(3,4,weight=35)\nigraph.Edge(<igraph.Graph object at 0x7fe144ca7a00>, 3, {'weight': 35})\nsage: I.pagerank()\n[0.134527027027027,\n 0.24594594594594593,\n 0.23905405405405405,\n 0.134527027027027,\n 0.24594594594594593]\nsage: I.pagerank(weights='weight')\n[0.134527027027027,\n 0.24594594594594593,\n 0.23905405405405405,\n 0.134527027027027,\n 0.24594594594594593]\n\n```\n\nUsing python terminal\n\n```\n>>> I = Graph(5)\n>>> I\n<igraph.Graph object at 0x7f5bcd250528>\n>>> I.summary()\n'IGRAPH U--- 5 0 -- '\n>>> I.add_edge(0,1,weight=50)\n>>> I.add_edge(1,2,weight=70)\n>>> I.add_edge(2,4,weight=35)\n>>> I.add_edge(3,4,weight=35)\n>>> I.pagerank()\n[0.134527027027027, 0.24594594594594593, 0.23905405405405405, 0.134527027027027, 0.24594594594594593]\n>>> I.pagerank(weights='weight')\n[0.1326579757790889, 0.2898578139644863, 0.2595856492098718, 0.11586448311914739, 0.20203407792740563]\n```",
    "created_at": "2019-03-31T15:08:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425229",
    "user": "https://github.com/rajat1433"
}
```

<div id="comment:27" align="right">comment:27</div>

I think the problem is with the version or codebase of igraph which sage currently uses , maybe its not been updated.

Using sage:

```
sage: G = Graph(5)
sage: I = G.igraph_graph()
sage: I.add_edge(0,1,weight=50)
igraph.Edge(<igraph.Graph object at 0x7fe144ca7a00>, 0, {'weight': 50})
sage: I.add_edge(1,2,weight=70)
....: 
igraph.Edge(<igraph.Graph object at 0x7fe144ca7a00>, 1, {'weight': 70})
sage: I.add_edge(2,4,weight=35)
igraph.Edge(<igraph.Graph object at 0x7fe144ca7a00>, 2, {'weight': 35})
sage: 
....: 
sage: I.add_edge(3,4,weight=35)
igraph.Edge(<igraph.Graph object at 0x7fe144ca7a00>, 3, {'weight': 35})
sage: I.pagerank()
[0.134527027027027,
 0.24594594594594593,
 0.23905405405405405,
 0.134527027027027,
 0.24594594594594593]
sage: I.pagerank(weights='weight')
[0.134527027027027,
 0.24594594594594593,
 0.23905405405405405,
 0.134527027027027,
 0.24594594594594593]

```

Using python terminal

```
>>> I = Graph(5)
>>> I
<igraph.Graph object at 0x7f5bcd250528>
>>> I.summary()
'IGRAPH U--- 5 0 -- '
>>> I.add_edge(0,1,weight=50)
>>> I.add_edge(1,2,weight=70)
>>> I.add_edge(2,4,weight=35)
>>> I.add_edge(3,4,weight=35)
>>> I.pagerank()
[0.134527027027027, 0.24594594594594593, 0.23905405405405405, 0.134527027027027, 0.24594594594594593]
>>> I.pagerank(weights='weight')
[0.1326579757790889, 0.2898578139644863, 0.2595856492098718, 0.11586448311914739, 0.20203407792740563]
```



---

archive/issue_comments_425230.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nSage 8.8.beta0 has been released and it includes the 2 tickets marked as dependencies. So you can update you develop branch and rebuild this ticket using last beta.\n\nIf it is not possible to use weight with igraph, add a TODO block in the method to say that it should be done someday.",
    "created_at": "2019-03-31T17:05:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425230",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:28" align="right">comment:28</div>

Sage 8.8.beta0 has been released and it includes the 2 tickets marked as dependencies. So you can update you develop branch and rebuild this ticket using last beta.

If it is not possible to use weight with igraph, add a TODO block in the method to say that it should be done someday.



---

archive/issue_comments_425231.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nI have already updated to sage8.8 beta0 today only!\n\nPlease read comment 27, as I am able to use weight parameter of igraph in my python console but in sage its not working (don't know why this discrepancy is present).",
    "created_at": "2019-03-31T17:13:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425231",
    "user": "https://github.com/rajat1433"
}
```

<div id="comment:29" align="right">comment:29</div>

I have already updated to sage8.8 beta0 today only!

Please read comment 27, as I am able to use weight parameter of igraph in my python console but in sage its not working (don't know why this discrepancy is present).



---

archive/issue_comments_425232.json:
```json
{
    "body": "Changed dependencies from **#27496, #27502** to none",
    "created_at": "2019-03-31T17:14:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425232",
    "user": "https://github.com/rajat1433"
}
```

Changed dependencies from **#27496, #27502** to none



---

archive/issue_comments_425233.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nShould I open a new ticket mentioning this discrepancy of igraph package in sage?",
    "created_at": "2019-04-01T16:00:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425233",
    "user": "https://github.com/rajat1433"
}
```

<div id="comment:31" align="right">comment:31</div>

Should I open a new ticket mentioning this discrepancy of igraph package in sage?



---

archive/issue_comments_425234.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nI don't understand what's going on. Have you tried other methods using weights?",
    "created_at": "2019-04-01T21:19:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425234",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:32" align="right">comment:32</div>

I don't understand what's going on. Have you tried other methods using weights?



---

archive/issue_comments_425235.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nYes other algorithms like dijkstra are working fine with weights. I think its an old bug of igraph which is updated as can be seen by the results in my python shell however its not been updated in sage version of igraph.\n\nReference: https://lists.nongnu.org/archive/html/igraph-help/2008-08/msg00030.html",
    "created_at": "2019-04-02T04:09:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425235",
    "user": "https://github.com/rajat1433"
}
```

<div id="comment:33" align="right">comment:33</div>

Yes other algorithms like dijkstra are working fine with weights. I think its an old bug of igraph which is updated as can be seen by the results in my python shell however its not been updated in sage version of igraph.

Reference: https://lists.nongnu.org/archive/html/igraph-help/2008-08/msg00030.html



---

archive/issue_comments_425236.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nMay the version that has been updated in #27502 is not the same as the version you have on your computer ? upstream should update python_igraph to be at least Python3 compatible. It currently contains deprecated stuff, so don't pass python3 tests :(",
    "created_at": "2019-04-02T07:42:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425236",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:34" align="right">comment:34</div>

May the version that has been updated in #27502 is not the same as the version you have on your computer ? upstream should update python_igraph to be at least Python3 compatible. It currently contains deprecated stuff, so don't pass python3 tests :(



---

archive/issue_comments_425237.json:
```json
{
    "body": "Changed commit from **[`b4e6b8c`](https://github.com/sagemath/sagetrac-mirror/commit/b4e6b8c4937cba885bfdf81c8f84d67a0de2be24)** to **[`78b1f8b`](https://github.com/sagemath/sagetrac-mirror/commit/78b1f8b5e409ae8115667cccb34f3a5bb6fd78c4)**",
    "created_at": "2019-04-02T14:19:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425237",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b4e6b8c`](https://github.com/sagemath/sagetrac-mirror/commit/b4e6b8c4937cba885bfdf81c8f84d67a0de2be24)** to **[`78b1f8b`](https://github.com/sagemath/sagetrac-mirror/commit/78b1f8b5e409ae8115667cccb34f3a5bb6fd78c4)**



---

archive/issue_comments_425238.json:
```json
{
    "body": "<div id=\"comment:35\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/46051b4927ce6f9299672105ced04fddb8e4008e\"><code>46051b4</code></a></td><td><code>remove spaces</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/566f9798896cb2329a6e10be861e6004eb23deaa\"><code>566f979</code></a></td><td><code>indenting</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/78b1f8b5e409ae8115667cccb34f3a5bb6fd78c4\"><code>78b1f8b</code></a></td><td><code>improved code</code></td></tr></table>\n",
    "created_at": "2019-04-02T14:19:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425238",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:35"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/46051b4927ce6f9299672105ced04fddb8e4008e"><code>46051b4</code></a></td><td><code>remove spaces</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/566f9798896cb2329a6e10be861e6004eb23deaa"><code>566f979</code></a></td><td><code>indenting</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/78b1f8b5e409ae8115667cccb34f3a5bb6fd78c4"><code>78b1f8b</code></a></td><td><code>improved code</code></td></tr></table>




---

archive/issue_comments_425239.json:
```json
{
    "body": "Changed keywords from none to **pagerank**",
    "created_at": "2019-04-02T14:21:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425239",
    "user": "https://github.com/rajat1433"
}
```

Changed keywords from none to **pagerank**



---

archive/issue_events_379230.json:
```json
{
    "actor": "https://github.com/rajat1433",
    "created_at": "2019-04-02T14:21:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27480#event-379230"
}
```



---

archive/issue_comments_425240.json:
```json
{
    "body": "Author: **Rajat Mittal**",
    "created_at": "2019-04-02T14:21:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425240",
    "user": "https://github.com/rajat1433"
}
```

Author: **Rajat Mittal**



---

archive/issue_comments_425241.json:
```json
{
    "body": "Reviewer: **David Coudert**",
    "created_at": "2019-04-02T14:21:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425241",
    "user": "https://github.com/rajat1433"
}
```

Reviewer: **David Coudert**



---

archive/issue_comments_425242.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nI have used scipy in case of weighted graphs and igraph in case of unweighted as default case as per the results I got mentioned in the previous comments.",
    "created_at": "2019-04-02T14:22:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425242",
    "user": "https://github.com/rajat1433"
}
```

<div id="comment:37" align="right">comment:37</div>

I have used scipy in case of weighted graphs and igraph in case of unweighted as default case as per the results I got mentioned in the previous comments.



---

archive/issue_comments_425243.json:
```json
{
    "body": "Changed commit from **[`78b1f8b`](https://github.com/sagemath/sagetrac-mirror/commit/78b1f8b5e409ae8115667cccb34f3a5bb6fd78c4)** to **[`112cac9`](https://github.com/sagemath/sagetrac-mirror/commit/112cac944df1d70ab96cebb323add4bcdf4c539f)**",
    "created_at": "2019-04-02T16:37:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425243",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`78b1f8b`](https://github.com/sagemath/sagetrac-mirror/commit/78b1f8b5e409ae8115667cccb34f3a5bb6fd78c4)** to **[`112cac9`](https://github.com/sagemath/sagetrac-mirror/commit/112cac944df1d70ab96cebb323add4bcdf4c539f)**



---

archive/issue_comments_425244.json:
```json
{
    "body": "<div id=\"comment:38\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/112cac944df1d70ab96cebb323add4bcdf4c539f\"><code>112cac9</code></a></td><td><code>correct igraph example</code></td></tr></table>\n",
    "created_at": "2019-04-02T16:37:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425244",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:38"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/112cac944df1d70ab96cebb323add4bcdf4c539f"><code>112cac9</code></a></td><td><code>correct igraph example</code></td></tr></table>




---

archive/issue_comments_425245.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nReplying to [@rajat1433](#comment:37):\n> I have used scipy in case of weighted graphs and igraph in case of unweighted as default case as per the results I got mentioned in the previous comments.\n\n- Unfortunately, igraph is an optional package, so you can use it only if installed. See e.g. `clique_maximum` to know how to check if a package is installed.\n\n- Also, I suggest you start checking if default should be used, and then select most suitable default algorithm.\n\n- instead of `implementation`, you should use `algorithm`.\n\n- You should raise an error if the given name is unknown\n\n- the name of igraph is `igraph`, so don't use `Igraph`. In fact, you could do `algorithm = algorithm.lower()` to avoid errors.\n\n- `if self.order() == 0:` -> `if not self.order():`\n\n- this is not needed `import igraph`",
    "created_at": "2019-04-02T16:46:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425245",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:39" align="right">comment:39</div>

Replying to [@rajat1433](#comment:37):
> I have used scipy in case of weighted graphs and igraph in case of unweighted as default case as per the results I got mentioned in the previous comments.

- Unfortunately, igraph is an optional package, so you can use it only if installed. See e.g. `clique_maximum` to know how to check if a package is installed.

- Also, I suggest you start checking if default should be used, and then select most suitable default algorithm.

- instead of `implementation`, you should use `algorithm`.

- You should raise an error if the given name is unknown

- the name of igraph is `igraph`, so don't use `Igraph`. In fact, you could do `algorithm = algorithm.lower()` to avoid errors.

- `if self.order() == 0:` -> `if not self.order():`

- this is not needed `import igraph`



---

archive/issue_comments_425246.json:
```json
{
    "body": "<div id=\"comment:40\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e7ae5da2138792384eabeae9217b115106c372ff\"><code>e7ae5da</code></a></td><td><code>improved the code</code></td></tr></table>\n",
    "created_at": "2019-04-02T17:22:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425246",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:40"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e7ae5da2138792384eabeae9217b115106c372ff"><code>e7ae5da</code></a></td><td><code>improved the code</code></td></tr></table>




---

archive/issue_comments_425247.json:
```json
{
    "body": "Changed commit from **[`112cac9`](https://github.com/sagemath/sagetrac-mirror/commit/112cac944df1d70ab96cebb323add4bcdf4c539f)** to **[`e7ae5da`](https://github.com/sagemath/sagetrac-mirror/commit/e7ae5da2138792384eabeae9217b115106c372ff)**",
    "created_at": "2019-04-02T17:22:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425247",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`112cac9`](https://github.com/sagemath/sagetrac-mirror/commit/112cac944df1d70ab96cebb323add4bcdf4c539f)** to **[`e7ae5da`](https://github.com/sagemath/sagetrac-mirror/commit/e7ae5da2138792384eabeae9217b115106c372ff)**



---

archive/issue_comments_425248.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nAs per commment 9, 12 and 16 I think it will be a good idea to have threshold value of number of nodes in the graph as less than 60 nodes numpy implementation should be used as default and greater than that scipy implementation should be used. \nIf you have another idea on thresholding based on density or any other parameter I would like to know.",
    "created_at": "2019-04-02T17:29:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425248",
    "user": "https://github.com/rajat1433"
}
```

<div id="comment:41" align="right">comment:41</div>

As per commment 9, 12 and 16 I think it will be a good idea to have threshold value of number of nodes in the graph as less than 60 nodes numpy implementation should be used as default and greater than that scipy implementation should be used. 
If you have another idea on thresholding based on density or any other parameter I would like to know.



---

archive/issue_comments_425249.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nwhy 60? I though scipy was fast even for small graphs...",
    "created_at": "2019-04-02T21:30:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425249",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:42" align="right">comment:42</div>

why 60? I though scipy was fast even for small graphs...



---

archive/issue_comments_425250.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nDue to the following results I suggested 60. For small graphs time taken by numpy is lesser than that of scipy.\n\n\n```\nsage: G=nx.gnp_random_graph(40,0.01,directed=True)\nsage: %timeit nx.pagerank_numpy(G)\n1000 loops, best of 3: 883 \u00b5s per loop\nsage: %timeit nx.pagerank_scipy(G)\n1000 loops, best of 3: 1.7 ms per loop\nsage: %timeit nx.pagerank(G)\n1000 loops, best of 3: 1.7 ms per loop\n\nsage: G=nx.gnp_random_graph(60,0.01,directed=True)\nsage: %timeit nx.pagerank(G)\n100 loops, best of 3: 2.87 ms per loop\nsage: %timeit nx.pagerank_scipy(G)\n1000 loops, best of 3: 1.87 ms per loop\nsage: %timeit nx.pagerank_numpy(G)\n1000 loops, best of 3: 1.58 ms per loop\n\nsage: G=nx.gnp_random_graph(70,0.01,directed=True)\nsage: %timeit nx.pagerank(G)\n100 loops, best of 3: 3.66 ms per loop\nsage: %timeit nx.pagerank_numpy(G)\n100 loops, best of 3: 2.22 ms per loop\nsage: %timeit nx.pagerank_scipy(G)\n100 loops, best of 3: 1.99 ms per loop\n\nsage: G=nx.gnp_random_graph(80,0.01,directed=True)\nsage: %timeit nx.pagerank(G)\n100 loops, best of 3: 4.66 ms per loop\nsage: %timeit nx.pagerank_scipy(G)\n1000 loops, best of 3: 1.93 ms per loop\nsage: %timeit nx.pagerank_numpy(G)\n100 loops, best of 3: 3.3 ms per loop\n\nsage: G=nx.gnp_random_graph(100,0.01,directed=True)\nsage: %timeit nx.pagerank(G)\n100 loops, best of 3: 7.07 ms per loop\nsage: %timeit nx.pagerank_scipy(G)\n100 loops, best of 3: 2.29 ms per loop\nsage: %timeit nx.pagerank_numpy(G)\n100 loops, best of 3: 4.63 ms per loop\n\nsage: G=nx.gnp_random_graph(400,0.01,directed=True)\nsage: %timeit nx.pagerank_numpy(G)\n10 loops, best of 3: 175 ms per loop\nsage: %timeit nx.pagerank_scipy(G)\n100 loops, best of 3: 3.9 ms per loop\nsage: %timeit nx.pagerank(G)\n10 loops, best of 3: 53.2 ms per loop\n\nsage: G=nx.gnp_random_graph(4000,0.01,directed=True)\nsage: %timeit nx.pagerank(G)\n1 loop, best of 3: 1.81 s per loop\nsage: %timeit nx.pagerank_scipy(G)\n1 loop, best of 3: 206 ms per loop\nsage: %timeit nx.pagerank_numpy(G)\n1 loop, best of 3: 1min 1s per loop\n\nsage: G=nx.gnp_random_graph(40,0.5,directed=True)\nsage:  **%timeit nx.pagerank_numpy(G)\nThe slowest run took 86.64 times longer than the fastest. This could mean that an intermediate result is being cached.\n1 loop, best of 3: 2.32 ms per loop**\nsage: %timeit nx.pagerank_scipy(G)\nThe slowest run took 60.81 times longer than the fastest. This could mean that an intermediate result is being cached.\n100 loops, best of 3: 2.41 ms per loop\nsage: %timeit nx.pagerank(G)\n100 loops, best of 3: 12.5 ms per loop\n\n\nsage: G=nx.gnp_random_graph(60,0.5,directed=True)\nsage: %timeit nx.pagerank(G)\n10 loops, best of 3: 27 ms per loop\nsage: %timeit nx.pagerank_scipy(G)\n100 loops, best of 3: 3.47 ms per loop\nsage: **%timeit nx.pagerank_numpy(G)\n100 loops, best of 3: 3.13 ms per loop**\n\nsage: G = graphs.RandomGNP(40, 0.2)\nsage: n = G.networkx_graph()\nsage: %timeit nx.pagerank_numpy(n)\n1000 loops, best of 3: 1.06 ms per loop\nsage: %timeit nx.pagerank_scipy(n)\nThe slowest run took 37.63 times longer than the fastest. This could mean that an intermediate result is being cached.\n100 loops, best of 3: 2.31 ms per loop\nsage:  %timeit nx.pagerank(n)\n100 loops, best of 3: 11.3 ms per loop\nsage: i = G.igraph_graph()\nsage: %timeit i.pagerank()\n10000 loops, best of 3: **23.3 \u00b5s** per loop\n\n\nsage: G = graphs.RandomGNP(40, 0.8)\nsage: n = G.networkx_graph()\nsage: %timeit nx.pagerank_numpy(n)\n1000 loops, best of 3: 1.33 ms per loop\nsage: %timeit nx.pagerank_scipy(n)\n100 loops, best of 3: 2.16 ms per loop\nsage:  %timeit nx.pagerank(n)\n10 loops, best of 3: 20 ms per loop\nsage: i = G.igraph_graph()\nsage: %timeit i.pagerank()\n10000 loops, best of 3: **39.1 \u00b5s** per loop\n\n\nsage: G = graphs.RandomGNP(4000, 0.5)\nsage: n = G.networkx_graph()\nsage: i = G.igraph_graph()\nsage: %timeit i.pagerank()\n1 loop, best of 3: **1.03 s** per loop\nsage: n = G.networkx_graph()\nsage: %timeit nx.pagerank_numpy(n)\n1 loop, best of 3: 1min 9s per loop\nsage: %timeit nx.pagerank_scipy(n)\n1 loop, best of 3: 7.12 s per loop\n\n```",
    "created_at": "2019-04-03T03:46:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425250",
    "user": "https://github.com/rajat1433"
}
```

<div id="comment:43" align="right">comment:43</div>

Due to the following results I suggested 60. For small graphs time taken by numpy is lesser than that of scipy.


```
sage: G=nx.gnp_random_graph(40,0.01,directed=True)
sage: %timeit nx.pagerank_numpy(G)
1000 loops, best of 3: 883 µs per loop
sage: %timeit nx.pagerank_scipy(G)
1000 loops, best of 3: 1.7 ms per loop
sage: %timeit nx.pagerank(G)
1000 loops, best of 3: 1.7 ms per loop

sage: G=nx.gnp_random_graph(60,0.01,directed=True)
sage: %timeit nx.pagerank(G)
100 loops, best of 3: 2.87 ms per loop
sage: %timeit nx.pagerank_scipy(G)
1000 loops, best of 3: 1.87 ms per loop
sage: %timeit nx.pagerank_numpy(G)
1000 loops, best of 3: 1.58 ms per loop

sage: G=nx.gnp_random_graph(70,0.01,directed=True)
sage: %timeit nx.pagerank(G)
100 loops, best of 3: 3.66 ms per loop
sage: %timeit nx.pagerank_numpy(G)
100 loops, best of 3: 2.22 ms per loop
sage: %timeit nx.pagerank_scipy(G)
100 loops, best of 3: 1.99 ms per loop

sage: G=nx.gnp_random_graph(80,0.01,directed=True)
sage: %timeit nx.pagerank(G)
100 loops, best of 3: 4.66 ms per loop
sage: %timeit nx.pagerank_scipy(G)
1000 loops, best of 3: 1.93 ms per loop
sage: %timeit nx.pagerank_numpy(G)
100 loops, best of 3: 3.3 ms per loop

sage: G=nx.gnp_random_graph(100,0.01,directed=True)
sage: %timeit nx.pagerank(G)
100 loops, best of 3: 7.07 ms per loop
sage: %timeit nx.pagerank_scipy(G)
100 loops, best of 3: 2.29 ms per loop
sage: %timeit nx.pagerank_numpy(G)
100 loops, best of 3: 4.63 ms per loop

sage: G=nx.gnp_random_graph(400,0.01,directed=True)
sage: %timeit nx.pagerank_numpy(G)
10 loops, best of 3: 175 ms per loop
sage: %timeit nx.pagerank_scipy(G)
100 loops, best of 3: 3.9 ms per loop
sage: %timeit nx.pagerank(G)
10 loops, best of 3: 53.2 ms per loop

sage: G=nx.gnp_random_graph(4000,0.01,directed=True)
sage: %timeit nx.pagerank(G)
1 loop, best of 3: 1.81 s per loop
sage: %timeit nx.pagerank_scipy(G)
1 loop, best of 3: 206 ms per loop
sage: %timeit nx.pagerank_numpy(G)
1 loop, best of 3: 1min 1s per loop

sage: G=nx.gnp_random_graph(40,0.5,directed=True)
sage:  **%timeit nx.pagerank_numpy(G)
The slowest run took 86.64 times longer than the fastest. This could mean that an intermediate result is being cached.
1 loop, best of 3: 2.32 ms per loop**
sage: %timeit nx.pagerank_scipy(G)
The slowest run took 60.81 times longer than the fastest. This could mean that an intermediate result is being cached.
100 loops, best of 3: 2.41 ms per loop
sage: %timeit nx.pagerank(G)
100 loops, best of 3: 12.5 ms per loop


sage: G=nx.gnp_random_graph(60,0.5,directed=True)
sage: %timeit nx.pagerank(G)
10 loops, best of 3: 27 ms per loop
sage: %timeit nx.pagerank_scipy(G)
100 loops, best of 3: 3.47 ms per loop
sage: **%timeit nx.pagerank_numpy(G)
100 loops, best of 3: 3.13 ms per loop**

sage: G = graphs.RandomGNP(40, 0.2)
sage: n = G.networkx_graph()
sage: %timeit nx.pagerank_numpy(n)
1000 loops, best of 3: 1.06 ms per loop
sage: %timeit nx.pagerank_scipy(n)
The slowest run took 37.63 times longer than the fastest. This could mean that an intermediate result is being cached.
100 loops, best of 3: 2.31 ms per loop
sage:  %timeit nx.pagerank(n)
100 loops, best of 3: 11.3 ms per loop
sage: i = G.igraph_graph()
sage: %timeit i.pagerank()
10000 loops, best of 3: **23.3 µs** per loop


sage: G = graphs.RandomGNP(40, 0.8)
sage: n = G.networkx_graph()
sage: %timeit nx.pagerank_numpy(n)
1000 loops, best of 3: 1.33 ms per loop
sage: %timeit nx.pagerank_scipy(n)
100 loops, best of 3: 2.16 ms per loop
sage:  %timeit nx.pagerank(n)
10 loops, best of 3: 20 ms per loop
sage: i = G.igraph_graph()
sage: %timeit i.pagerank()
10000 loops, best of 3: **39.1 µs** per loop


sage: G = graphs.RandomGNP(4000, 0.5)
sage: n = G.networkx_graph()
sage: i = G.igraph_graph()
sage: %timeit i.pagerank()
1 loop, best of 3: **1.03 s** per loop
sage: n = G.networkx_graph()
sage: %timeit nx.pagerank_numpy(n)
1 loop, best of 3: 1min 9s per loop
sage: %timeit nx.pagerank_scipy(n)
1 loop, best of 3: 7.12 s per loop

```



---

archive/issue_comments_425251.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nOK.",
    "created_at": "2019-04-03T07:15:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425251",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:44" align="right">comment:44</div>

OK.



---

archive/issue_comments_425252.json:
```json
{
    "body": "Changed commit from **[`e7ae5da`](https://github.com/sagemath/sagetrac-mirror/commit/e7ae5da2138792384eabeae9217b115106c372ff)** to **[`7364a6b`](https://github.com/sagemath/sagetrac-mirror/commit/7364a6b00f70ae05ccc68c602e7797536c4d8a66)**",
    "created_at": "2019-04-03T08:31:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425252",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e7ae5da`](https://github.com/sagemath/sagetrac-mirror/commit/e7ae5da2138792384eabeae9217b115106c372ff)** to **[`7364a6b`](https://github.com/sagemath/sagetrac-mirror/commit/7364a6b00f70ae05ccc68c602e7797536c4d8a66)**



---

archive/issue_comments_425253.json:
```json
{
    "body": "<div id=\"comment:45\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5de6f2b5edd3c6aa16f97cd8ef5da1ace7205077\"><code>5de6f2b</code></a></td><td><code>improved the code</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7364a6b00f70ae05ccc68c602e7797536c4d8a66\"><code>7364a6b</code></a></td><td><code>reduced lines of code</code></td></tr></table>\n",
    "created_at": "2019-04-03T08:31:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425253",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:45"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5de6f2b5edd3c6aa16f97cd8ef5da1ace7205077"><code>5de6f2b</code></a></td><td><code>improved the code</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7364a6b00f70ae05ccc68c602e7797536c4d8a66"><code>7364a6b</code></a></td><td><code>reduced lines of code</code></td></tr></table>




---

archive/issue_comments_425254.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nI have added the default values and completed the code.",
    "created_at": "2019-04-03T08:33:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425254",
    "user": "https://github.com/rajat1433"
}
```

<div id="comment:46" align="right">comment:46</div>

I have added the default values and completed the code.



---

archive/issue_comments_425255.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\n- We usually use `vertex/vertices` and not `node/nodes`.\n\n- \n\n```diff\n-        Return the PageRank of the nodes in the graph.\n+        Return the PageRank of the vertices of ``self``.\n```\n\n- This text might be more informative.\n\n```diff\n-        PageRank calculates the ranking of nodes in the graph G based on the\n-        structure of the incoming links. It is popularly used to rank web\n-        pages.\n+        PageRank is a centrality measure first used to rank web pages.\n+        The PageRank algorithm outputs the probability distribution that\n+        a random walker in the graph visits a vertex.\n```\n\n- for the default case, the simpler version is:\n\n```\n+        if algorithm:\n+            algorithm = algorithm.lower()\n+        elif self.order <= 60:\n+            algorithm = 'numpy'\n+        else:\n+            algorithm = 'scipy'\n```\n\n- If the graph is not connected, you can certainly compute pagerank on each connected component. Before doing it, check how to do the normalization afterward. Indeed:\n\n```\nsage: import networkx\nsage: G = graphs.CycleGraph(4)\nsage: N = G.networkx_graph()\nsage: print(networkx.pagerank(N))\n{0: 0.25, 1: 0.25, 2: 0.25, 3: 0.25}\nsage: N = (G+G).networkx_graph()\nsage: print(networkx.pagerank(N))\n{0: 0.125, 1: 0.125, 2: 0.125, 3: 0.125, 4: 0.125, 5: 0.125, 6: 0.125, 7: 0.125}\nsage: H = graphs.CycleGraph(10)\nsage: N = H.networkx_graph()\nsage: print(networkx.pagerank(N))\n{0: 0.1, 1: 0.1, 2: 0.1, 3: 0.1, 4: 0.1, 5: 0.1, 6: 0.1, 7: 0.1, 8: 0.1, 9: 0.1}\nsage: N = (G+H).networkx_graph()\nsage: print(networkx.pagerank(N))\n{0: 0.07142857142857142, 1: 0.07142857142857142, 2: 0.07142857142857142, 3: 0.07142857142857142, 4: 0.07142857142857142, 5: 0.07142857142857142, 6: 0.07142857142857142, 7: 0.07142857142857142, 8: 0.07142857142857142, 9: 0.07142857142857142, 10: 0.07142857142857142, 11: 0.07142857142857142, 12: 0.07142857142857142, 13: 0.07142857142857142}\n```",
    "created_at": "2019-04-06T17:02:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425255",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:47" align="right">comment:47</div>

- We usually use `vertex/vertices` and not `node/nodes`.

- 

```diff
-        Return the PageRank of the nodes in the graph.
+        Return the PageRank of the vertices of ``self``.
```

- This text might be more informative.

```diff
-        PageRank calculates the ranking of nodes in the graph G based on the
-        structure of the incoming links. It is popularly used to rank web
-        pages.
+        PageRank is a centrality measure first used to rank web pages.
+        The PageRank algorithm outputs the probability distribution that
+        a random walker in the graph visits a vertex.
```

- for the default case, the simpler version is:

```
+        if algorithm:
+            algorithm = algorithm.lower()
+        elif self.order <= 60:
+            algorithm = 'numpy'
+        else:
+            algorithm = 'scipy'
```

- If the graph is not connected, you can certainly compute pagerank on each connected component. Before doing it, check how to do the normalization afterward. Indeed:

```
sage: import networkx
sage: G = graphs.CycleGraph(4)
sage: N = G.networkx_graph()
sage: print(networkx.pagerank(N))
{0: 0.25, 1: 0.25, 2: 0.25, 3: 0.25}
sage: N = (G+G).networkx_graph()
sage: print(networkx.pagerank(N))
{0: 0.125, 1: 0.125, 2: 0.125, 3: 0.125, 4: 0.125, 5: 0.125, 6: 0.125, 7: 0.125}
sage: H = graphs.CycleGraph(10)
sage: N = H.networkx_graph()
sage: print(networkx.pagerank(N))
{0: 0.1, 1: 0.1, 2: 0.1, 3: 0.1, 4: 0.1, 5: 0.1, 6: 0.1, 7: 0.1, 8: 0.1, 9: 0.1}
sage: N = (G+H).networkx_graph()
sage: print(networkx.pagerank(N))
{0: 0.07142857142857142, 1: 0.07142857142857142, 2: 0.07142857142857142, 3: 0.07142857142857142, 4: 0.07142857142857142, 5: 0.07142857142857142, 6: 0.07142857142857142, 7: 0.07142857142857142, 8: 0.07142857142857142, 9: 0.07142857142857142, 10: 0.07142857142857142, 11: 0.07142857142857142, 12: 0.07142857142857142, 13: 0.07142857142857142}
```



---

archive/issue_comments_425256.json:
```json
{
    "body": "Changed commit from **[`7364a6b`](https://github.com/sagemath/sagetrac-mirror/commit/7364a6b00f70ae05ccc68c602e7797536c4d8a66)** to **[`552a429`](https://github.com/sagemath/sagetrac-mirror/commit/552a429952c404796d612ae9daeca9cc53df60f2)**",
    "created_at": "2019-04-06T19:47:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425256",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7364a6b`](https://github.com/sagemath/sagetrac-mirror/commit/7364a6b00f70ae05ccc68c602e7797536c4d8a66)** to **[`552a429`](https://github.com/sagemath/sagetrac-mirror/commit/552a429952c404796d612ae9daeca9cc53df60f2)**



---

archive/issue_comments_425257.json:
```json
{
    "body": "<div id=\"comment:48\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/552a429952c404796d612ae9daeca9cc53df60f2\"><code>552a429</code></a></td><td><code>improved code</code></td></tr></table>\n",
    "created_at": "2019-04-06T19:47:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425257",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:48"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/552a429952c404796d612ae9daeca9cc53df60f2"><code>552a429</code></a></td><td><code>improved code</code></td></tr></table>




---

archive/issue_comments_425258.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\noptimizing the code for computing pagerank for connected components subgraph will work for undirected graphs as we can easily find the normalization factor but for digraphs the nodes can be dangling also in such a case we randomly connect that node to other nodes in our graph with some weight value of the edge. In such cases this optimization may not be desired.",
    "created_at": "2019-04-06T20:00:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425258",
    "user": "https://github.com/rajat1433"
}
```

<div id="comment:49" align="right">comment:49</div>

optimizing the code for computing pagerank for connected components subgraph will work for undirected graphs as we can easily find the normalization factor but for digraphs the nodes can be dangling also in such a case we randomly connect that node to other nodes in our graph with some weight value of the edge. In such cases this optimization may not be desired.



---

archive/issue_comments_425259.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nit can also be let for a future ticket",
    "created_at": "2019-04-06T20:14:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425259",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:50" align="right">comment:50</div>

it can also be let for a future ticket



---

archive/issue_comments_425260.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nFor undirected graphs, I can do the optimization in this ticket only. :)",
    "created_at": "2019-04-06T20:19:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425260",
    "user": "https://github.com/rajat1433"
}
```

<div id="comment:51" align="right">comment:51</div>

For undirected graphs, I can do the optimization in this ticket only. :)



---

archive/issue_comments_425261.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nEven for undirected graphs with personalization parameter set the optimization may not work as can be seen from example below:\n\n```\nsage: g = Graph([(1,2,3),(2,3,5),(3,5,8),(2,5,13),(2,4,25)])\nsage: personalization={}\nsage: personalization[1] = 8\nsage: personalization[2] = 16\nsage: personalization[3] = 24\nsage: personalization[4] = 36\nsage: personalization[5] = 25\nsage: g.pagerank(by_weight=True, personalization=personalization)\nsage: personalization2={}\nsage: personalization2[1] = 84\nsage: personalization2[2] = 42\nsage: personalization2[3] = 30\nsage: personalization2[4] = 70\nsage: f = Graph([(1,2,2),(2,3,15),(2,4,22)])\nsage: f.pagerank(by_weight=True,personalization=personalization2)\n{1: 0.07643670757326188,\n 2: 0.474528450109004,\n 3: 0.17504521830388875,\n 4: 0.27398962401384513}\nsage: q = g + f\nsage: personalization[0] = 8\nsage: personalization[1] = 16\nsage: personalization[2] = 24\nsage: personalization[3] = 36\nsage: personalization[4] = 25\nsage: personalization[5] = 84\nsage: personalization[6] = 42\nsage: personalization[7] = 30\nsage: personalization[8] = 70\nsage: q.pagerank(by_weight=True,personalization=personalization)\n{0: 0.010763853970772248,\n 1: 0.12955307566026533,\n 2: 0.04384414464203576,\n 3: 0.07596743980618663,\n 4: 0.0652489170000004,\n 5: 0.05156608491296348,\n 6: 0.3201286892373546,\n 7: 0.11808892042931564,\n 8: 0.18483887434110574}\n```\n\nSo I guess its best to keep the method as it is for now.",
    "created_at": "2019-04-07T09:02:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425261",
    "user": "https://github.com/rajat1433"
}
```

<div id="comment:52" align="right">comment:52</div>

Even for undirected graphs with personalization parameter set the optimization may not work as can be seen from example below:

```
sage: g = Graph([(1,2,3),(2,3,5),(3,5,8),(2,5,13),(2,4,25)])
sage: personalization={}
sage: personalization[1] = 8
sage: personalization[2] = 16
sage: personalization[3] = 24
sage: personalization[4] = 36
sage: personalization[5] = 25
sage: g.pagerank(by_weight=True, personalization=personalization)
sage: personalization2={}
sage: personalization2[1] = 84
sage: personalization2[2] = 42
sage: personalization2[3] = 30
sage: personalization2[4] = 70
sage: f = Graph([(1,2,2),(2,3,15),(2,4,22)])
sage: f.pagerank(by_weight=True,personalization=personalization2)
{1: 0.07643670757326188,
 2: 0.474528450109004,
 3: 0.17504521830388875,
 4: 0.27398962401384513}
sage: q = g + f
sage: personalization[0] = 8
sage: personalization[1] = 16
sage: personalization[2] = 24
sage: personalization[3] = 36
sage: personalization[4] = 25
sage: personalization[5] = 84
sage: personalization[6] = 42
sage: personalization[7] = 30
sage: personalization[8] = 70
sage: q.pagerank(by_weight=True,personalization=personalization)
{0: 0.010763853970772248,
 1: 0.12955307566026533,
 2: 0.04384414464203576,
 3: 0.07596743980618663,
 4: 0.0652489170000004,
 5: 0.05156608491296348,
 6: 0.3201286892373546,
 7: 0.11808892042931564,
 8: 0.18483887434110574}
```

So I guess its best to keep the method as it is for now.



---

archive/issue_comments_425262.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\n- no capital letter after `;`. So \n\n```diff\n-        - ``alpha`` -- float (default: ``0.85``); Damping parameter for\n+        - ``alpha`` -- float (default: ``0.85``); damping parameter for\n```\n\n- you should give slightly more details on what the parameters are. For instance, the PageRank value for vertices without in-neighbors is `1 - damping`. Furthermore, the `damping` factor (this term is better than parameter here) is the probability of resetting the random walk to a uniform distribution in each step.\n\n- As reported by the patchbot. Please check it\n\n```diff\n-        .. SEEALSO:\n+        .. SEEALSO::\n```\n\n- ...\n\n```diff\n-        elif self.order <= 60:\n+        elif self.order() <= 60:\n```\n\n- simplify code and avoid using `.vertices()` when not necessary (it sorts vertices)\n\n```diff\n-            if by_weight:\n-                I = self.igraph_graph(edge_attrs={'weight': [weight_function(e)\n-                                                  for e in self.edge_iterator()]})\n-                page_rank = I.pagerank(damping=alpha, weights='weight')\n-                return {v: page_rank[i] for i, v in enumerate(self.vertices())}\n-            else:\n-                I = self.igraph_graph()\n-                page_rank = I.pagerank(damping=alpha)\n-                return {v: page_rank[i] for i, v in enumerate(self.vertices())}\n+            if by_weight:\n+                I = self.igraph_graph(edge_attrs={'weight': [weight_function(e)\n+                                                  for e in self.edge_iterator()]})\n+            else:\n+                I = self.igraph_graph()\n+            page_rank = I.pagerank(damping=alpha, weights=weight)\n+            return {v: page_rank[i] for i, v in enumerate(self)}\n```\n\n- Don't start error message with a capital letter `raise NotImplementedError(\"Only 'NetworkX', 'Numpy', 'Scipy', and 'igraph' are supported\")`",
    "created_at": "2019-04-07T09:31:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425262",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:53" align="right">comment:53</div>

- no capital letter after `;`. So 

```diff
-        - ``alpha`` -- float (default: ``0.85``); Damping parameter for
+        - ``alpha`` -- float (default: ``0.85``); damping parameter for
```

- you should give slightly more details on what the parameters are. For instance, the PageRank value for vertices without in-neighbors is `1 - damping`. Furthermore, the `damping` factor (this term is better than parameter here) is the probability of resetting the random walk to a uniform distribution in each step.

- As reported by the patchbot. Please check it

```diff
-        .. SEEALSO:
+        .. SEEALSO::
```

- ...

```diff
-        elif self.order <= 60:
+        elif self.order() <= 60:
```

- simplify code and avoid using `.vertices()` when not necessary (it sorts vertices)

```diff
-            if by_weight:
-                I = self.igraph_graph(edge_attrs={'weight': [weight_function(e)
-                                                  for e in self.edge_iterator()]})
-                page_rank = I.pagerank(damping=alpha, weights='weight')
-                return {v: page_rank[i] for i, v in enumerate(self.vertices())}
-            else:
-                I = self.igraph_graph()
-                page_rank = I.pagerank(damping=alpha)
-                return {v: page_rank[i] for i, v in enumerate(self.vertices())}
+            if by_weight:
+                I = self.igraph_graph(edge_attrs={'weight': [weight_function(e)
+                                                  for e in self.edge_iterator()]})
+            else:
+                I = self.igraph_graph()
+            page_rank = I.pagerank(damping=alpha, weights=weight)
+            return {v: page_rank[i] for i, v in enumerate(self)}
```

- Don't start error message with a capital letter `raise NotImplementedError("Only 'NetworkX', 'Numpy', 'Scipy', and 'igraph' are supported")`



---

archive/issue_comments_425263.json:
```json
{
    "body": "Changed commit from **[`552a429`](https://github.com/sagemath/sagetrac-mirror/commit/552a429952c404796d612ae9daeca9cc53df60f2)** to **[`c32242e`](https://github.com/sagemath/sagetrac-mirror/commit/c32242e8e8fa04a0fef0518853fb23e5b6accc26)**",
    "created_at": "2019-04-07T10:17:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425263",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`552a429`](https://github.com/sagemath/sagetrac-mirror/commit/552a429952c404796d612ae9daeca9cc53df60f2)** to **[`c32242e`](https://github.com/sagemath/sagetrac-mirror/commit/c32242e8e8fa04a0fef0518853fb23e5b6accc26)**



---

archive/issue_comments_425264.json:
```json
{
    "body": "<div id=\"comment:54\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d5d74792e4074ea9f0ade1897eb4a901bd68710c\"><code>d5d7479</code></a></td><td><code>improved code and documented</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c32242e8e8fa04a0fef0518853fb23e5b6accc26\"><code>c32242e</code></a></td><td><code>improved</code></td></tr></table>\n",
    "created_at": "2019-04-07T10:17:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425264",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:54"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d5d74792e4074ea9f0ade1897eb4a901bd68710c"><code>d5d7479</code></a></td><td><code>improved code and documented</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c32242e8e8fa04a0fef0518853fb23e5b6accc26"><code>c32242e</code></a></td><td><code>improved</code></td></tr></table>




---

archive/issue_comments_425265.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nI have added more info on damping parameter alpha and improved the code as per review.",
    "created_at": "2019-04-07T10:18:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425265",
    "user": "https://github.com/rajat1433"
}
```

<div id="comment:55" align="right">comment:55</div>

I have added more info on damping parameter alpha and improved the code as per review.



---

archive/issue_comments_425266.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\non my system all tests pass! but why isn't patchbot reflecting the same here. I was just wondering about how much time it takes for patchbot to get invoked here?\n\n\n```\n$ ./sage -t src/sage/graphs/geneic_graph.py\nRunning doctests with ID 2019-04-07-20-11-50-05efbf4e.\nGit branch: u/gh-rajat1433/27480_page_rank_algo\nUsing --optional=dochtml,igraph,memlimit,mpir,python2,python_igraph,sage\nDoctesting 1 file.\nsage -t --warn-long 24.3 src/sage/graphs/generic_graph.py\n    [3391 tests, 26.98 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 28.0 seconds\n    cpu time: 19.8 seconds\n    cumulative wall time: 27.0 seconds\n\n```",
    "created_at": "2019-04-07T12:46:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425266",
    "user": "https://github.com/rajat1433"
}
```

<div id="comment:56" align="right">comment:56</div>

on my system all tests pass! but why isn't patchbot reflecting the same here. I was just wondering about how much time it takes for patchbot to get invoked here?


```
$ ./sage -t src/sage/graphs/geneic_graph.py
Running doctests with ID 2019-04-07-20-11-50-05efbf4e.
Git branch: u/gh-rajat1433/27480_page_rank_algo
Using --optional=dochtml,igraph,memlimit,mpir,python2,python_igraph,sage
Doctesting 1 file.
sage -t --warn-long 24.3 src/sage/graphs/generic_graph.py
    [3391 tests, 26.98 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 28.0 seconds
    cpu time: 19.8 seconds
    cumulative wall time: 27.0 seconds

```



---

archive/issue_comments_425267.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\n- please don't forget my previous #comment:47\n\n```diff\n-    :meth:`~GenericGraph.pagerank` | Return the PageRank of the nodes in the graph.\n+    :meth:`~GenericGraph.pagerank` | Return the PageRank of the vertices of ``self``.\n```\n\n```diff\n-        Return the PageRank of the vertices in the graph.\n+        Return the PageRank of the vertices of ``self``.\n```\n\n\nThe documentation requires further improvements. I know that the documentations of networkx/igraph are not very clear, but we can do better.\n\n\n- I don't understand what the `personalization` parameter is used for. We can at least clarify the text and be closer to what is explained in [networkx](https://networkx.github.io/documentation/stable/reference/algorithms/generated/networkx.algorithms.link_analysis.pagerank_alg.pagerank.html#networkx.algorithms.link_analysis.pagerank_alg.pagerank) \n\n```diff\n-        - ``personalization`` -- dict (default: ``None``); the \"personalization\n-          vector\" consisting of a dictionary with a key for every graph node\n-          and nonzero personalization value for each node.\n-          By default, a uniform distribution is used.\n+        - ``personalization`` -- dict (default: ``None``); a dictionary keyed by\n+          vertices associating to each vertex a value. The personalization can be\n+          specified for a subset of the vertices only, and the sum of the values\n+          must be nonzero. \n+          By default (``None``), a uniform distribution is used.\n```\n\n- if you understand what is `dangling`, please improve the description.\n\n- You should indicate the parameters that cannot be used with an algorithm or that can only be used with an algorithm.\n\n- may be it would be better to start the list of parameters with the algorithms ? Well, think about it.\n\n- the note `Note that ``'networkx'`` does not support multigraphs.` could be added directly with the in the line `- ``NetworkX`` -- `...\n\n\n- you could add a `TESTS` block with errors, specific cases, etc. For instance with `personalization={0: 1, 1: -1}`\n\nAlso, note that using a graph like a 4-cycle is interesting to illustrate the effect of the various parameters. Indeed, the pagerank of each vertex is 0.25.\n  Note that the example you have is also interesting as it shows that the result is slightly different from an algorithm to another.",
    "created_at": "2019-04-07T17:39:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425267",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:57" align="right">comment:57</div>

- please don't forget my previous #comment:47

```diff
-    :meth:`~GenericGraph.pagerank` | Return the PageRank of the nodes in the graph.
+    :meth:`~GenericGraph.pagerank` | Return the PageRank of the vertices of ``self``.
```

```diff
-        Return the PageRank of the vertices in the graph.
+        Return the PageRank of the vertices of ``self``.
```


The documentation requires further improvements. I know that the documentations of networkx/igraph are not very clear, but we can do better.


- I don't understand what the `personalization` parameter is used for. We can at least clarify the text and be closer to what is explained in [networkx](https://networkx.github.io/documentation/stable/reference/algorithms/generated/networkx.algorithms.link_analysis.pagerank_alg.pagerank.html#networkx.algorithms.link_analysis.pagerank_alg.pagerank) 

```diff
-        - ``personalization`` -- dict (default: ``None``); the "personalization
-          vector" consisting of a dictionary with a key for every graph node
-          and nonzero personalization value for each node.
-          By default, a uniform distribution is used.
+        - ``personalization`` -- dict (default: ``None``); a dictionary keyed by
+          vertices associating to each vertex a value. The personalization can be
+          specified for a subset of the vertices only, and the sum of the values
+          must be nonzero. 
+          By default (``None``), a uniform distribution is used.
```

- if you understand what is `dangling`, please improve the description.

- You should indicate the parameters that cannot be used with an algorithm or that can only be used with an algorithm.

- may be it would be better to start the list of parameters with the algorithms ? Well, think about it.

- the note `Note that ``'networkx'`` does not support multigraphs.` could be added directly with the in the line `- ``NetworkX`` -- `...


- you could add a `TESTS` block with errors, specific cases, etc. For instance with `personalization={0: 1, 1: -1}`

Also, note that using a graph like a 4-cycle is interesting to illustrate the effect of the various parameters. Indeed, the pagerank of each vertex is 0.25.
  Note that the example you have is also interesting as it shows that the result is slightly different from an algorithm to another.



---

archive/issue_comments_425268.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nand for the patchbot, I don't know when it is invoked. It depends on availability and so on the number of users who are kindly offering computing resource for that and spending time maintaining the system.",
    "created_at": "2019-04-07T17:41:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425268",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:58" align="right">comment:58</div>

and for the patchbot, I don't know when it is invoked. It depends on availability and so on the number of users who are kindly offering computing resource for that and spending time maintaining the system.



---

archive/issue_comments_425269.json:
```json
{
    "body": "<div id=\"comment:59\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e6dff8dafcf71c3e420a33586bb3af0f0613a52e\"><code>e6dff8d</code></a></td><td><code>improved code and doc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/03dd4451465f5c057ca24a19c2df5372c2874794\"><code>03dd445</code></a></td><td><code>merged</code></td></tr></table>\n",
    "created_at": "2019-04-08T13:17:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425269",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:59"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e6dff8dafcf71c3e420a33586bb3af0f0613a52e"><code>e6dff8d</code></a></td><td><code>improved code and doc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/03dd4451465f5c057ca24a19c2df5372c2874794"><code>03dd445</code></a></td><td><code>merged</code></td></tr></table>




---

archive/issue_comments_425270.json:
```json
{
    "body": "Changed commit from **[`c32242e`](https://github.com/sagemath/sagetrac-mirror/commit/c32242e8e8fa04a0fef0518853fb23e5b6accc26)** to **[`03dd445`](https://github.com/sagemath/sagetrac-mirror/commit/03dd4451465f5c057ca24a19c2df5372c2874794)**",
    "created_at": "2019-04-08T13:17:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425270",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c32242e`](https://github.com/sagemath/sagetrac-mirror/commit/c32242e8e8fa04a0fef0518853fb23e5b6accc26)** to **[`03dd445`](https://github.com/sagemath/sagetrac-mirror/commit/03dd4451465f5c057ca24a19c2df5372c2874794)**



---

archive/issue_comments_425271.json:
```json
{
    "body": "<div id=\"comment:60\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/06dbcc6483839e071908b6de17e76160b773f24e\"><code>06dbcc6</code></a></td><td><code>revert some changes</code></td></tr></table>\n",
    "created_at": "2019-04-08T13:22:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425271",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:60"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/06dbcc6483839e071908b6de17e76160b773f24e"><code>06dbcc6</code></a></td><td><code>revert some changes</code></td></tr></table>




---

archive/issue_comments_425272.json:
```json
{
    "body": "Changed commit from **[`03dd445`](https://github.com/sagemath/sagetrac-mirror/commit/03dd4451465f5c057ca24a19c2df5372c2874794)** to **[`06dbcc6`](https://github.com/sagemath/sagetrac-mirror/commit/06dbcc6483839e071908b6de17e76160b773f24e)**",
    "created_at": "2019-04-08T13:22:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425272",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`03dd445`](https://github.com/sagemath/sagetrac-mirror/commit/03dd4451465f5c057ca24a19c2df5372c2874794)** to **[`06dbcc6`](https://github.com/sagemath/sagetrac-mirror/commit/06dbcc6483839e071908b6de17e76160b773f24e)**



---

archive/issue_comments_425273.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nI have rebased my branch on 8.8 beta 1 and did the changes as mentioned in comment 57.",
    "created_at": "2019-04-08T13:29:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425273",
    "user": "https://github.com/rajat1433"
}
```

<div id="comment:61" align="right">comment:61</div>

I have rebased my branch on 8.8 beta 1 and did the changes as mentioned in comment 57.



---

archive/issue_comments_425274.json:
```json
{
    "body": "Changed commit from **[`06dbcc6`](https://github.com/sagemath/sagetrac-mirror/commit/06dbcc6483839e071908b6de17e76160b773f24e)** to **[`30d493d`](https://github.com/sagemath/sagetrac-mirror/commit/30d493def189d6d71796749ef9ed921c9e0f8a19)**",
    "created_at": "2019-04-08T16:23:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425274",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`06dbcc6`](https://github.com/sagemath/sagetrac-mirror/commit/06dbcc6483839e071908b6de17e76160b773f24e)** to **[`30d493d`](https://github.com/sagemath/sagetrac-mirror/commit/30d493def189d6d71796749ef9ed921c9e0f8a19)**



---

archive/issue_comments_425275.json:
```json
{
    "body": "<div id=\"comment:62\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/30d493def189d6d71796749ef9ed921c9e0f8a19\"><code>30d493d</code></a></td><td><code>remved unnecessary spaces</code></td></tr></table>\n",
    "created_at": "2019-04-08T16:23:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425275",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:62"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/30d493def189d6d71796749ef9ed921c9e0f8a19"><code>30d493d</code></a></td><td><code>remved unnecessary spaces</code></td></tr></table>




---

archive/issue_comments_425276.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nFurther improvements are certainly possible, but it's already good. Do at least this one (plurals)\n\n```diff\n-            Parameter ``alpha``, ``by_weight`` and ``weight_function`` is common\n-            for all algorithms but ``personalization`` and ``dangling``\n-            parameters are used only in ``NetworkX``, ``Numpy`` and ``Scipy``\n-            implementations.\n+            Parameters ``alpha``, ``by_weight`` and ``weight_function`` are common\n+            to all algorithms. Parameters ``personalization`` and ``dangling``\n+            are used only by algorithms ``NetworkX``, ``Numpy`` and ``Scipy``.\n```",
    "created_at": "2019-04-09T11:52:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425276",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:63" align="right">comment:63</div>

Further improvements are certainly possible, but it's already good. Do at least this one (plurals)

```diff
-            Parameter ``alpha``, ``by_weight`` and ``weight_function`` is common
-            for all algorithms but ``personalization`` and ``dangling``
-            parameters are used only in ``NetworkX``, ``Numpy`` and ``Scipy``
-            implementations.
+            Parameters ``alpha``, ``by_weight`` and ``weight_function`` are common
+            to all algorithms. Parameters ``personalization`` and ``dangling``
+            are used only by algorithms ``NetworkX``, ``Numpy`` and ``Scipy``.
```



---

archive/issue_comments_425277.json:
```json
{
    "body": "Changed commit from **[`30d493d`](https://github.com/sagemath/sagetrac-mirror/commit/30d493def189d6d71796749ef9ed921c9e0f8a19)** to **[`804fe60`](https://github.com/sagemath/sagetrac-mirror/commit/804fe603a582470952b017d444ee8bb02925482f)**",
    "created_at": "2019-04-09T13:46:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425277",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`30d493d`](https://github.com/sagemath/sagetrac-mirror/commit/30d493def189d6d71796749ef9ed921c9e0f8a19)** to **[`804fe60`](https://github.com/sagemath/sagetrac-mirror/commit/804fe603a582470952b017d444ee8bb02925482f)**



---

archive/issue_comments_425278.json:
```json
{
    "body": "<div id=\"comment:64\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/804fe603a582470952b017d444ee8bb02925482f\"><code>804fe60</code></a></td><td><code>improved note</code></td></tr></table>\n",
    "created_at": "2019-04-09T13:46:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425278",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:64"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/804fe603a582470952b017d444ee8bb02925482f"><code>804fe60</code></a></td><td><code>improved note</code></td></tr></table>




---

archive/issue_comments_425279.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nDone the changes!",
    "created_at": "2019-04-09T13:46:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425279",
    "user": "https://github.com/rajat1433"
}
```

<div id="comment:65" align="right">comment:65</div>

Done the changes!



---

archive/issue_comments_425280.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nLGTM.",
    "created_at": "2019-04-09T13:57:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425280",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:66" align="right">comment:66</div>

LGTM.



---

archive/issue_events_379231.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-04-09T13:57:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27480#event-379231"
}
```



---

archive/issue_events_379232.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-04-09T13:57:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27480#event-379232"
}
```



---

archive/issue_comments_425281.json:
```json
{
    "body": "Changed branch from **[u/gh-rajat1433/27480_page_rank_algo](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-rajat1433/27480_page_rank_algo)** to **[`804fe60`](https://github.com/sagemath/sagetrac-mirror/commit/804fe603a582470952b017d444ee8bb02925482f)**",
    "created_at": "2019-04-11T16:57:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425281",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/gh-rajat1433/27480_page_rank_algo](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-rajat1433/27480_page_rank_algo)** to **[`804fe60`](https://github.com/sagemath/sagetrac-mirror/commit/804fe603a582470952b017d444ee8bb02925482f)**



---

archive/issue_events_379233.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-04-11T16:57:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27480#event-379233"
}
```



---

archive/issue_events_379234.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-04-11T16:57:52Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27480#event-379234"
}
```



---

archive/issue_comments_425282.json:
```json
{
    "body": "Changed branch from **[`804fe60`](https://github.com/sagemath/sagetrac-mirror/commit/804fe603a582470952b017d444ee8bb02925482f)** to **[u/gh-rajat1433/27480_page_rank_algo](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-rajat1433/27480_page_rank_algo)**",
    "created_at": "2019-04-13T18:19:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425282",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[`804fe60`](https://github.com/sagemath/sagetrac-mirror/commit/804fe603a582470952b017d444ee8bb02925482f)** to **[u/gh-rajat1433/27480_page_rank_algo](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-rajat1433/27480_page_rank_algo)**



---

archive/issue_comments_425283.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\n\n```\n**********************************************************************\nFile \"src/sage/graphs/generic_graph.py\", line 9536, in sage.graphs.generic_graph.GenericGraph.?\nFailed example:\n    G.pagerank(alpha=0.50, algorithm=\"igraph\")\nException raised:\n    Traceback (most recent call last):\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 671, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1095, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.graphs.generic_graph.GenericGraph.?[2]>\", line 1, in <module>\n        G.pagerank(alpha=RealNumber('0.50'), algorithm=\"igraph\")\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/graphs/generic_graph.py\", line 9668, in pagerank\n        raise PackageNotFoundError(\"igraph\")\n    PackageNotFoundError: the package 'igraph' was not found. You can install it by running 'sage -i igraph' in a shell\n**********************************************************************\nFile \"src/sage/graphs/generic_graph.py\", line 9581, in sage.graphs.generic_graph.GenericGraph.?\nFailed example:\n    G.pagerank(algorithm=\"igraph\")\nException raised:\n    Traceback (most recent call last):\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 671, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1095, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.graphs.generic_graph.GenericGraph.?[10]>\", line 1, in <module>\n        G.pagerank(algorithm=\"igraph\")\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/graphs/generic_graph.py\", line 9668, in pagerank\n        raise PackageNotFoundError(\"igraph\")\n    PackageNotFoundError: the package 'igraph' was not found. You can install it by running 'sage -i igraph' in a shell\n**********************************************************************\n1 item had failures:\n   2 of 890 in sage.graphs.generic_graph.GenericGraph.?\n    [3393 tests, 2 failures, 36.96 s]\n**********************************************************************\n```",
    "created_at": "2019-04-13T18:19:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425283",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:68" align="right">comment:68</div>


```
**********************************************************************
File "src/sage/graphs/generic_graph.py", line 9536, in sage.graphs.generic_graph.GenericGraph.?
Failed example:
    G.pagerank(alpha=0.50, algorithm="igraph")
Exception raised:
    Traceback (most recent call last):
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 671, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1095, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.graphs.generic_graph.GenericGraph.?[2]>", line 1, in <module>
        G.pagerank(alpha=RealNumber('0.50'), algorithm="igraph")
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/graphs/generic_graph.py", line 9668, in pagerank
        raise PackageNotFoundError("igraph")
    PackageNotFoundError: the package 'igraph' was not found. You can install it by running 'sage -i igraph' in a shell
**********************************************************************
File "src/sage/graphs/generic_graph.py", line 9581, in sage.graphs.generic_graph.GenericGraph.?
Failed example:
    G.pagerank(algorithm="igraph")
Exception raised:
    Traceback (most recent call last):
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 671, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1095, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.graphs.generic_graph.GenericGraph.?[10]>", line 1, in <module>
        G.pagerank(algorithm="igraph")
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/graphs/generic_graph.py", line 9668, in pagerank
        raise PackageNotFoundError("igraph")
    PackageNotFoundError: the package 'igraph' was not found. You can install it by running 'sage -i igraph' in a shell
**********************************************************************
1 item had failures:
   2 of 890 in sage.graphs.generic_graph.GenericGraph.?
    [3393 tests, 2 failures, 36.96 s]
**********************************************************************
```



---

archive/issue_comments_425284.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\n`@`Rajat: add to each doctest with igraph `# optional - python_igraph`, like this\n\n```diff\n-            sage: G.pagerank(alpha=0.50, algorithm=\"igraph\")\n+            sage: G.pagerank(alpha=0.50, algorithm=\"igraph\")  # optional - python_igraph\n             {0: 0.25, 1: 0.25, 2: 0.24999999999999997, 3: 0.24999999999999997}\n```\nand\n\n```diff\n-            sage: G.pagerank(algorithm=\"igraph\")\n+            sage: G.pagerank(algorithm=\"igraph\")  # optional - python_igraph\n```\n\n`@`Volker: sorry for this.",
    "created_at": "2019-04-13T18:50:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425284",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:69" align="right">comment:69</div>

`@`Rajat: add to each doctest with igraph `# optional - python_igraph`, like this

```diff
-            sage: G.pagerank(alpha=0.50, algorithm="igraph")
+            sage: G.pagerank(alpha=0.50, algorithm="igraph")  # optional - python_igraph
             {0: 0.25, 1: 0.25, 2: 0.24999999999999997, 3: 0.24999999999999997}
```
and

```diff
-            sage: G.pagerank(algorithm="igraph")
+            sage: G.pagerank(algorithm="igraph")  # optional - python_igraph
```

`@`Volker: sorry for this.



---

archive/issue_comments_425285.json:
```json
{
    "body": "Changed commit from **[`804fe60`](https://github.com/sagemath/sagetrac-mirror/commit/804fe603a582470952b017d444ee8bb02925482f)** to **[`f10629a`](https://github.com/sagemath/sagetrac-mirror/commit/f10629a7b9f0efb844de21eaddaf01f8492e59d2)**",
    "created_at": "2019-04-13T19:05:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425285",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`804fe60`](https://github.com/sagemath/sagetrac-mirror/commit/804fe603a582470952b017d444ee8bb02925482f)** to **[`f10629a`](https://github.com/sagemath/sagetrac-mirror/commit/f10629a7b9f0efb844de21eaddaf01f8492e59d2)**



---

archive/issue_comments_425286.json:
```json
{
    "body": "<div id=\"comment:70\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f10629a7b9f0efb844de21eaddaf01f8492e59d2\"><code>f10629a</code></a></td><td><code>added optional igraph parameter</code></td></tr></table>\n",
    "created_at": "2019-04-13T19:05:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425286",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:70"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f10629a7b9f0efb844de21eaddaf01f8492e59d2"><code>f10629a</code></a></td><td><code>added optional igraph parameter</code></td></tr></table>




---

archive/issue_comments_425287.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nAdded the optional igraph thing.\nUnderstood the importance of it as it may fail tests on systems on which igraph is not installed..",
    "created_at": "2019-04-13T19:08:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425287",
    "user": "https://github.com/rajat1433"
}
```

<div id="comment:71" align="right">comment:71</div>

Added the optional igraph thing.
Understood the importance of it as it may fail tests on systems on which igraph is not installed..



---

archive/issue_events_379235.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-04-13T19:50:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27480#event-379235"
}
```



---

archive/issue_comments_425288.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\n\n```\n$ ./sage -t src/sage/graphs/generic_graph.py\nRunning doctests with ID 2019-04-14-09-52-00-5ed75243.\nGit branch: u/gh-rajat1433/27480_page_rank_algo\nUsing --optional=dochtml,igraph,memlimit,mpir,python2,python_igraph,sage\nDoctesting 1 file.\nsage -t --warn-long 24.3 src/sage/graphs/generic_graph.py\n    [3402 tests, 27.42 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 28.3 seconds\n    cpu time: 19.0 seconds\n    cumulative wall time: 27.4 seconds\n\n```\nOn my system all tests passes but patchbot has some failed examples don't know why...",
    "created_at": "2019-04-14T04:24:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425288",
    "user": "https://github.com/rajat1433"
}
```

<div id="comment:73" align="right">comment:73</div>


```
$ ./sage -t src/sage/graphs/generic_graph.py
Running doctests with ID 2019-04-14-09-52-00-5ed75243.
Git branch: u/gh-rajat1433/27480_page_rank_algo
Using --optional=dochtml,igraph,memlimit,mpir,python2,python_igraph,sage
Doctesting 1 file.
sage -t --warn-long 24.3 src/sage/graphs/generic_graph.py
    [3402 tests, 27.42 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 28.3 seconds
    cpu time: 19.0 seconds
    cumulative wall time: 27.4 seconds

```
On my system all tests passes but patchbot has some failed examples don't know why...



---

archive/issue_comments_425289.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nThis is numerical noise due to floating point arithmetic. See http://doc.sagemath.org/html/en/developer/coding_basics.html#special-markup-to-influence-doctests\n\nA solution is to add `# abs tol 1e-9` to all doctests.\n\n```diff\n-            sage: G.pagerank(algorithm=\"Numpy\")\n+            sage: G.pagerank(algorithm=\"Numpy\") # abs tol 1e-9\n```\n...\n\n```diff\n-            sage: G.pagerank()\n+            sage: G.pagerank() # abs tol 1e-9\n```\nalso for `igraph`\n\n```diff\n-            sage: G.pagerank(alpha=0.50, algorithm=\"igraph\")  # optional - python_igraph\n+            sage: G.pagerank(alpha=0.50, algorithm=\"igraph\") # optional - python_igraph # abs tol 1e-9\n```",
    "created_at": "2019-04-14T07:53:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425289",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:74" align="right">comment:74</div>

This is numerical noise due to floating point arithmetic. See http://doc.sagemath.org/html/en/developer/coding_basics.html#special-markup-to-influence-doctests

A solution is to add `# abs tol 1e-9` to all doctests.

```diff
-            sage: G.pagerank(algorithm="Numpy")
+            sage: G.pagerank(algorithm="Numpy") # abs tol 1e-9
```
...

```diff
-            sage: G.pagerank()
+            sage: G.pagerank() # abs tol 1e-9
```
also for `igraph`

```diff
-            sage: G.pagerank(alpha=0.50, algorithm="igraph")  # optional - python_igraph
+            sage: G.pagerank(alpha=0.50, algorithm="igraph") # optional - python_igraph # abs tol 1e-9
```



---

archive/issue_comments_425290.json:
```json
{
    "body": "<div id=\"comment:75\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/07a884b8ce9f1557b9ac1d2c98fa72aa0eea1e1e\"><code>07a884b</code></a></td><td><code>floating point flag included</code></td></tr></table>\n",
    "created_at": "2019-04-14T10:07:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425290",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:75"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/07a884b8ce9f1557b9ac1d2c98fa72aa0eea1e1e"><code>07a884b</code></a></td><td><code>floating point flag included</code></td></tr></table>




---

archive/issue_comments_425291.json:
```json
{
    "body": "Changed commit from **[`f10629a`](https://github.com/sagemath/sagetrac-mirror/commit/f10629a7b9f0efb844de21eaddaf01f8492e59d2)** to **[`07a884b`](https://github.com/sagemath/sagetrac-mirror/commit/07a884b8ce9f1557b9ac1d2c98fa72aa0eea1e1e)**",
    "created_at": "2019-04-14T10:07:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425291",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f10629a`](https://github.com/sagemath/sagetrac-mirror/commit/f10629a7b9f0efb844de21eaddaf01f8492e59d2)** to **[`07a884b`](https://github.com/sagemath/sagetrac-mirror/commit/07a884b8ce9f1557b9ac1d2c98fa72aa0eea1e1e)**



---

archive/issue_comments_425292.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nLGTM",
    "created_at": "2019-04-14T14:56:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425292",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:76" align="right">comment:76</div>

LGTM



---

archive/issue_events_379236.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-04-14T14:56:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27480#event-379236"
}
```



---

archive/issue_events_379237.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-04-14T14:56:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27480#event-379237"
}
```



---

archive/issue_comments_425293.json:
```json
{
    "body": "Changed branch from **[u/gh-rajat1433/27480_page_rank_algo](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-rajat1433/27480_page_rank_algo)** to **[`07a884b`](https://github.com/sagemath/sagetrac-mirror/commit/07a884b8ce9f1557b9ac1d2c98fa72aa0eea1e1e)**",
    "created_at": "2019-04-15T17:48:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425293",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/gh-rajat1433/27480_page_rank_algo](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-rajat1433/27480_page_rank_algo)** to **[`07a884b`](https://github.com/sagemath/sagetrac-mirror/commit/07a884b8ce9f1557b9ac1d2c98fa72aa0eea1e1e)**



---

archive/issue_events_379238.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-04-15T17:48:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27480#event-379238"
}
```



---

archive/issue_events_379239.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "eb59425a9a543d068815e05204814cbf3147227d",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-04-15T17:48:04Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27480#event-379239"
}
```



---

archive/issue_comments_425294.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">comment:78</div>\n\nThere is an issue with igraph on the arando patchbot with 8.8.b4 and 8.8.b5:\n\n```\n**********************************************************************\nFile \"src/sage/graphs/generic_graph.py\", line 9663, in sage.graphs.generic_graph.GenericGraph.?\nFailed example:\n    G.pagerank(alpha=0.50, algorithm=\"igraph\")  # optional - python_igraph\nExpected:\n    {0: 0.25, 1: 0.25, 2: 0.24999999999999997, 3: 0.24999999999999997}\nGot:\n    {0: 0.25, 1: 0.25, 2: 0.25, 3: 0.25}\n**********************************************************************\n1 item had failures:\n   1 of 860 in sage.graphs.generic_graph.GenericGraph.?\n    [3497 tests, 1 failure, 50.96 s]\n----------------------------------------------------------------------\nsage -t --long src/sage/graphs/generic_graph.py  # 1 doctest failed\n```",
    "created_at": "2019-05-11T16:19:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425294",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:78" align="right">comment:78</div>

There is an issue with igraph on the arando patchbot with 8.8.b4 and 8.8.b5:

```
**********************************************************************
File "src/sage/graphs/generic_graph.py", line 9663, in sage.graphs.generic_graph.GenericGraph.?
Failed example:
    G.pagerank(alpha=0.50, algorithm="igraph")  # optional - python_igraph
Expected:
    {0: 0.25, 1: 0.25, 2: 0.24999999999999997, 3: 0.24999999999999997}
Got:
    {0: 0.25, 1: 0.25, 2: 0.25, 3: 0.25}
**********************************************************************
1 item had failures:
   1 of 860 in sage.graphs.generic_graph.GenericGraph.?
    [3497 tests, 1 failure, 50.96 s]
----------------------------------------------------------------------
sage -t --long src/sage/graphs/generic_graph.py  # 1 doctest failed
```



---

archive/issue_comments_425295.json:
```json
{
    "body": "Changed commit from **[`07a884b`](https://github.com/sagemath/sagetrac-mirror/commit/07a884b8ce9f1557b9ac1d2c98fa72aa0eea1e1e)** to none",
    "created_at": "2019-05-11T16:19:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425295",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[`07a884b`](https://github.com/sagemath/sagetrac-mirror/commit/07a884b8ce9f1557b9ac1d2c98fa72aa0eea1e1e)** to none



---

archive/issue_comments_425296.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">comment:79</div>\n\nI think I forgot to add # abs tol 1e-9 to this test.\n\nThanks David for opening #27811 for fixing it \n\nReplying to [@fchapoton](#comment:78):\n> There is an issue with igraph on the arando patchbot with 8.8.b4 and 8.8.b5:\n> \n> ```\n> **********************************************************************\n> File \"src/sage/graphs/generic_graph.py\", line 9663, in sage.graphs.generic_graph.GenericGraph.?\n> Failed example:\n>     G.pagerank(alpha=0.50, algorithm=\"igraph\")  # optional - python_igraph\n> Expected:\n>     {0: 0.25, 1: 0.25, 2: 0.24999999999999997, 3: 0.24999999999999997}\n> Got:\n>     {0: 0.25, 1: 0.25, 2: 0.25, 3: 0.25}\n> **********************************************************************\n> 1 item had failures:\n>    1 of 860 in sage.graphs.generic_graph.GenericGraph.?\n>     [3497 tests, 1 failure, 50.96 s]\n> ----------------------------------------------------------------------\n> sage -t --long src/sage/graphs/generic_graph.py  # 1 doctest failed\n> ```",
    "created_at": "2019-05-11T19:00:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27480",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27480#issuecomment-425296",
    "user": "https://github.com/rajat1433"
}
```

<div id="comment:79" align="right">comment:79</div>

I think I forgot to add # abs tol 1e-9 to this test.

Thanks David for opening #27811 for fixing it 

Replying to [@fchapoton](#comment:78):
> There is an issue with igraph on the arando patchbot with 8.8.b4 and 8.8.b5:
> 
> ```
> **********************************************************************
> File "src/sage/graphs/generic_graph.py", line 9663, in sage.graphs.generic_graph.GenericGraph.?
> Failed example:
>     G.pagerank(alpha=0.50, algorithm="igraph")  # optional - python_igraph
> Expected:
>     {0: 0.25, 1: 0.25, 2: 0.24999999999999997, 3: 0.24999999999999997}
> Got:
>     {0: 0.25, 1: 0.25, 2: 0.25, 3: 0.25}
> **********************************************************************
> 1 item had failures:
>    1 of 860 in sage.graphs.generic_graph.GenericGraph.?
>     [3497 tests, 1 failure, 50.96 s]
> ----------------------------------------------------------------------
> sage -t --long src/sage/graphs/generic_graph.py  # 1 doctest failed
> ```
