# Issue 27230: Improve detection of library files in sage.env

archive/issues_026993.json:
```json
{
    "assignees": [],
    "body": "This is basically repackaging the existing code from `sage.env` that is used to set the `SINGULAR_SO` variable, but making it a bit more generic and flexible.\n\nThis will be useful as well for #26930 to get the correct libgap path.  It also tries to be a bit more flexible than the old code, so as to reduce the need for patching in some distros, though this does not guarantee to eliminate that need altogether.\n\nCC:  @dimpase @kiwifb\n\nBranch: **[`ab94f51`](https://github.com/sagemath/sagetrac-mirror/commit/ab94f51c0c45221d92969721be0a26dc832c1330)**\n\nReviewer: **Fran\u00e7ois Bissey, Dima Pasechnik**\n\nAuthor: **Erik Bray**\n\nComponent: **misc**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/27230_\n\n",
    "closed_at": "2019-02-10T12:55:42Z",
    "created_at": "2019-02-06T15:59:11Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Improve detection of library files in sage.env",
    "type": "issue",
    "updated_at": "2019-04-08T16:01:09Z",
    "url": "https://github.com/sagemath/sage/issues/27230",
    "user": "https://github.com/embray"
}
```
This is basically repackaging the existing code from `sage.env` that is used to set the `SINGULAR_SO` variable, but making it a bit more generic and flexible.

This will be useful as well for #26930 to get the correct libgap path.  It also tries to be a bit more flexible than the old code, so as to reduce the need for patching in some distros, though this does not guarantee to eliminate that need altogether.

CC:  @dimpase @kiwifb

Branch: **[`ab94f51`](https://github.com/sagemath/sagetrac-mirror/commit/ab94f51c0c45221d92969721be0a26dc832c1330)**

Reviewer: **Fran√ßois Bissey, Dima Pasechnik**

Author: **Erik Bray**

Component: **misc**

_Issue created by migration from https://trac.sagemath.org/ticket/27230_





---

archive/issue_events_374143.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-06T15:59:11Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-374143"
}
```



---

archive/issue_events_374144.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-06T15:59:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-374144"
}
```



---

archive/issue_events_374145.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-06T15:59:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-374145"
}
```



---

archive/issue_comments_420617.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nI have a branch for this, but the cloud hosting provider for the VM I was working in seems to be monkeying around with something and now my VM lacks working DNS...",
    "created_at": "2019-02-06T16:02:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420617",
    "user": "https://github.com/embray"
}
```

<div id="comment:1" align="right">comment:1</div>

I have a branch for this, but the cloud hosting provider for the VM I was working in seems to be monkeying around with something and now my VM lacks working DNS...



---

archive/issue_comments_420618.json:
```json
{
    "body": "Branch: **[u/embray/misc/sage-env-lib-filename](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/misc/sage-env-lib-filename)**",
    "created_at": "2019-02-06T16:03:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420618",
    "user": "https://github.com/embray"
}
```

Branch: **[u/embray/misc/sage-env-lib-filename](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/misc/sage-env-lib-filename)**



---

archive/issue_comments_420619.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nOh, it's working again....\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/32940a6e26556a1286e80ac7e48a28e342b7f138\"><code>32940a6</code></a></td><td><code>Remove deprecated stuff related to Cython</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d6581fd6136b5bbb539380365c22b8663a2ddfa9\"><code>d6581fd</code></a></td><td><code>Clean up sage.env</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/84eb61be734fd9632222f0d5309f1d032fa2cf2c\"><code>84eb61b</code></a></td><td><code>repackages the code for finding the libSingular.so as a somewhat</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b3c86d4ef8aab430172fbbba66bf70baa3f869ae\"><code>b3c86d4</code></a></td><td><code>rework _get_shared_lib_filename to cover more system-specific cases,</code></td></tr></table>\n",
    "created_at": "2019-02-06T16:03:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420619",
    "user": "https://github.com/embray"
}
```

<div id="comment:2" align="right">comment:2</div>

Oh, it's working again....

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/32940a6e26556a1286e80ac7e48a28e342b7f138"><code>32940a6</code></a></td><td><code>Remove deprecated stuff related to Cython</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d6581fd6136b5bbb539380365c22b8663a2ddfa9"><code>d6581fd</code></a></td><td><code>Clean up sage.env</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/84eb61be734fd9632222f0d5309f1d032fa2cf2c"><code>84eb61b</code></a></td><td><code>repackages the code for finding the libSingular.so as a somewhat</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b3c86d4ef8aab430172fbbba66bf70baa3f869ae"><code>b3c86d4</code></a></td><td><code>rework _get_shared_lib_filename to cover more system-specific cases,</code></td></tr></table>




---

archive/issue_events_374146.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-06T16:03:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-374146"
}
```



---

archive/issue_comments_420620.json:
```json
{
    "body": "Commit: **[`b3c86d4`](https://github.com/sagemath/sagetrac-mirror/commit/b3c86d4ef8aab430172fbbba66bf70baa3f869ae)**",
    "created_at": "2019-02-06T16:03:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420620",
    "user": "https://github.com/embray"
}
```

Commit: **[`b3c86d4`](https://github.com/sagemath/sagetrac-mirror/commit/b3c86d4ef8aab430172fbbba66bf70baa3f869ae)**



---

archive/issue_comments_420621.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThis is built on top of #27040, with which it would otherwise conflict.\n\nFor #26930 the idea then would be to add\n\n```\nLIBGAP_SO = _get_shared_lib_filename('gap')\n```",
    "created_at": "2019-02-06T16:04:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420621",
    "user": "https://github.com/embray"
}
```

<div id="comment:3" align="right">comment:3</div>

This is built on top of #27040, with which it would otherwise conflict.

For #26930 the idea then would be to add

```
LIBGAP_SO = _get_shared_lib_filename('gap')
```



---

archive/issue_comments_420622.json:
```json
{
    "body": "Dependencies: **#27040**",
    "created_at": "2019-02-06T16:04:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420622",
    "user": "https://github.com/embray"
}
```

Dependencies: **#27040**



---

archive/issue_comments_420623.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nmerge conflict, red branch...",
    "created_at": "2019-02-06T16:06:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420623",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:4" align="right">comment:4</div>

merge conflict, red branch...



---

archive/issue_comments_420624.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/51aa946c35472e69a828ef1dd6d16ab7161a249e\"><code>51aa946</code></a></td><td><code>repackages the code for finding the libSingular.so as a somewhat</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/34b27b2c8068805c2f24adaa45740a80839cecbc\"><code>34b27b2</code></a></td><td><code>rework _get_shared_lib_filename to cover more system-specific cases,</code></td></tr></table>\n",
    "created_at": "2019-02-06T16:06:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420624",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/51aa946c35472e69a828ef1dd6d16ab7161a249e"><code>51aa946</code></a></td><td><code>repackages the code for finding the libSingular.so as a somewhat</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/34b27b2c8068805c2f24adaa45740a80839cecbc"><code>34b27b2</code></a></td><td><code>rework _get_shared_lib_filename to cover more system-specific cases,</code></td></tr></table>




---

archive/issue_comments_420625.json:
```json
{
    "body": "Changed commit from **[`b3c86d4`](https://github.com/sagemath/sagetrac-mirror/commit/b3c86d4ef8aab430172fbbba66bf70baa3f869ae)** to **[`34b27b2`](https://github.com/sagemath/sagetrac-mirror/commit/34b27b2c8068805c2f24adaa45740a80839cecbc)**",
    "created_at": "2019-02-06T16:06:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420625",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b3c86d4`](https://github.com/sagemath/sagetrac-mirror/commit/b3c86d4ef8aab430172fbbba66bf70baa3f869ae)** to **[`34b27b2`](https://github.com/sagemath/sagetrac-mirror/commit/34b27b2c8068805c2f24adaa45740a80839cecbc)**



---

archive/issue_comments_420626.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nRebased on latest develop again.  It seems 8.7.beta2 was released since I was previously working on this yesterday, and already includes #27040.",
    "created_at": "2019-02-06T16:07:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420626",
    "user": "https://github.com/embray"
}
```

<div id="comment:6" align="right">comment:6</div>

Rebased on latest develop again.  It seems 8.7.beta2 was released since I was previously working on this yesterday, and already includes #27040.



---

archive/issue_events_374147.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-06T16:11:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-374147"
}
```



---

archive/issue_events_374148.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-06T16:11:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-374148"
}
```



---

archive/issue_comments_420627.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI just realized with my second commit the test could fail now on Debian.",
    "created_at": "2019-02-06T16:11:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420627",
    "user": "https://github.com/embray"
}
```

<div id="comment:7" align="right">comment:7</div>

I just realized with my second commit the test could fail now on Debian.



---

archive/issue_comments_420628.json:
```json
{
    "body": "Changed commit from **[`34b27b2`](https://github.com/sagemath/sagetrac-mirror/commit/34b27b2c8068805c2f24adaa45740a80839cecbc)** to **[`917a21b`](https://github.com/sagemath/sagetrac-mirror/commit/917a21ba4b07dc86ed855d57bfba5cde7a110f8e)**",
    "created_at": "2019-02-06T16:14:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420628",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`34b27b2`](https://github.com/sagemath/sagetrac-mirror/commit/34b27b2c8068805c2f24adaa45740a80839cecbc)** to **[`917a21b`](https://github.com/sagemath/sagetrac-mirror/commit/917a21ba4b07dc86ed855d57bfba5cde7a110f8e)**



---

archive/issue_comments_420629.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/917a21ba4b07dc86ed855d57bfba5cde7a110f8e\"><code>917a21b</code></a></td><td><code>fixed the test to be a little more flexible</code></td></tr></table>\n",
    "created_at": "2019-02-06T16:14:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420629",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/917a21ba4b07dc86ed855d57bfba5cde7a110f8e"><code>917a21b</code></a></td><td><code>fixed the test to be a little more flexible</code></td></tr></table>




---

archive/issue_events_374149.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-06T16:14:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-374149"
}
```



---

archive/issue_events_374150.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-06T16:14:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-374150"
}
```



---

archive/issue_comments_420630.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/917a21ba4b07dc86ed855d57bfba5cde7a110f8e\"><code>917a21b</code></a></td><td><code>fixed the test to be a little more flexible</code></td></tr></table>\n",
    "created_at": "2019-02-06T16:14:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420630",
    "user": "https://github.com/embray"
}
```

<div id="comment:9"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/917a21ba4b07dc86ed855d57bfba5cde7a110f8e"><code>917a21b</code></a></td><td><code>fixed the test to be a little more flexible</code></td></tr></table>




---

archive/issue_comments_420631.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nDoes this stuff really belong to `src/sage/env.py`? \nIMHO a better fit would be src/sage/libs/ - as this is really something to do with libs...",
    "created_at": "2019-02-06T18:34:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420631",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:10" align="right">comment:10</div>

Does this stuff really belong to `src/sage/env.py`? 
IMHO a better fit would be src/sage/libs/ - as this is really something to do with libs...



---

archive/issue_comments_420632.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\n`env.py` is a central repository of variables so it fits there. But I am open to discussion about splitting some of it in the future if there is a good rationale. But that will be in the future. \n\nNow this will remove a bit of patch in sage-on-gentoo in a nice generic way. The amount of patching of sage in sage-on-gentoo has gone down considerably.",
    "created_at": "2019-02-06T18:51:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420632",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:11" align="right">comment:11</div>

`env.py` is a central repository of variables so it fits there. But I am open to discussion about splitting some of it in the future if there is a good rationale. But that will be in the future. 

Now this will remove a bit of patch in sage-on-gentoo in a nice generic way. The amount of patching of sage in sage-on-gentoo has gone down considerably.



---

archive/issue_events_374151.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2019-02-06T19:57:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-374151"
}
```



---

archive/issue_events_374152.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2019-02-06T19:57:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-374152"
}
```



---

archive/issue_comments_420633.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nPatchbot has two failures unrelated to this ticket and it looks good to me. So I am giving this a positive review.",
    "created_at": "2019-02-06T19:57:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420633",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:12" align="right">comment:12</div>

Patchbot has two failures unrelated to this ticket and it looks good to me. So I am giving this a positive review.



---

archive/issue_comments_420634.json:
```json
{
    "body": "Reviewer: **Fran\u00e7ois Bissey**",
    "created_at": "2019-02-06T19:57:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420634",
    "user": "https://github.com/kiwifb"
}
```

Reviewer: **Fran√ßois Bissey**



---

archive/issue_comments_420635.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nOK, so please apply to your branch\n\n```\n--- a/src/sage/env.py\n+++ b/src/sage/env.py\n@@ -267,6 +267,10 @@ def _get_shared_lib_filename(libname, *additional_libnames):\n SINGULAR_SO = _get_shared_lib_filename('Singular', 'singular-Singular')\n var('SINGULAR_SO', SINGULAR_SO)\n \n+# locate libgap shared object\n+GAP_SO= _get_shared_lib_filename('gap','')\n+var('GAP_SO', GAP_SO)\n+\n # post process\n if ' ' in DOT_SAGE:\n     if UNAME[:6] == 'CYGWIN':\n```\nand then I'll use it on #26930",
    "created_at": "2019-02-06T19:58:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420635",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:13" align="right">comment:13</div>

OK, so please apply to your branch

```
--- a/src/sage/env.py
+++ b/src/sage/env.py
@@ -267,6 +267,10 @@ def _get_shared_lib_filename(libname, *additional_libnames):
 SINGULAR_SO = _get_shared_lib_filename('Singular', 'singular-Singular')
 var('SINGULAR_SO', SINGULAR_SO)
 
+# locate libgap shared object
+GAP_SO= _get_shared_lib_filename('gap','')
+var('GAP_SO', GAP_SO)
+
 # post process
 if ' ' in DOT_SAGE:
     if UNAME[:6] == 'CYGWIN':
```
and then I'll use it on #26930



---

archive/issue_events_374153.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-02-06T19:58:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-374153"
}
```



---

archive/issue_events_374154.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-02-06T19:58:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-374154"
}
```



---

archive/issue_comments_420636.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI just added the stuff I asked for in comment 13 to the branch of #26930, so no worried about it, positive review.",
    "created_at": "2019-02-07T01:43:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420636",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:14" align="right">comment:14</div>

I just added the stuff I asked for in comment 13 to the branch of #26930, so no worried about it, positive review.



---

archive/issue_events_374155.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-02-07T01:43:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-374155"
}
```



---

archive/issue_events_374156.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-02-07T01:43:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-374156"
}
```



---

archive/issue_comments_420637.json:
```json
{
    "body": "Changed reviewer from **Fran\u00e7ois Bissey** to **Fran\u00e7ois Bissey, Dima Pasechnik**",
    "created_at": "2019-02-07T01:43:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420637",
    "user": "https://github.com/dimpase"
}
```

Changed reviewer from **Fran√ßois Bissey** to **Fran√ßois Bissey, Dima Pasechnik**



---

archive/issue_events_374157.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-02-07T08:09:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-374157"
}
```



---

archive/issue_events_374158.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-02-07T08:09:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-374158"
}
```



---

archive/issue_comments_420638.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\n`pyflakes` reports:\n\n```\nsrc/sage/env.py:37: redefinition of unused 'sys' from line 32\nsrc/sage/env.py:235: undefined name 'libdir'\nsrc/sage/env.py:235: undefined name 'libdir'\n```\nThe latter is a genuine bug as far as I can see.",
    "created_at": "2019-02-07T08:09:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420638",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:15" align="right">comment:15</div>

`pyflakes` reports:

```
src/sage/env.py:37: redefinition of unused 'sys' from line 32
src/sage/env.py:235: undefined name 'libdir'
src/sage/env.py:235: undefined name 'libdir'
```
The latter is a genuine bug as far as I can see.



---

archive/issue_comments_420639.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nJust a minor thing, but I find this remark more confusing than helping and suggest to remove it:\n\n```\n(technically this is superfluous but clearer when made explicit)\n```",
    "created_at": "2019-02-07T08:11:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420639",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:16" align="right">comment:16</div>

Just a minor thing, but I find this remark more confusing than helping and suggest to remove it:

```
(technically this is superfluous but clearer when made explicit)
```



---

archive/issue_comments_420640.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@jdemeyer](#comment:15):\n> `pyflakes` reports:\n> \n> ```\n> src/sage/env.py:37: redefinition of unused 'sys' from line 32\n> src/sage/env.py:235: undefined name 'libdir'\n> src/sage/env.py:235: undefined name 'libdir'\n> ```\n> The latter is a genuine bug as far as I can see.\n\nI am guessing Erik meant `libname` from the context.",
    "created_at": "2019-02-07T08:15:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420640",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@jdemeyer](#comment:15):
> `pyflakes` reports:
> 
> ```
> src/sage/env.py:37: redefinition of unused 'sys' from line 32
> src/sage/env.py:235: undefined name 'libdir'
> src/sage/env.py:235: undefined name 'libdir'
> ```
> The latter is a genuine bug as far as I can see.

I am guessing Erik meant `libname` from the context.



---

archive/issue_comments_420641.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nAnother detail: why this signature\n\n```\ndef _get_shared_lib_filename(libname, *additional_libnames)\n```\nwhen all the arguments play the same role?\n\nWouldn't it be clearer to write it as\n\n```\ndef _get_shared_lib_filename(*libnames)\n```",
    "created_at": "2019-02-07T08:48:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420641",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:18" align="right">comment:18</div>

Another detail: why this signature

```
def _get_shared_lib_filename(libname, *additional_libnames)
```
when all the arguments play the same role?

Wouldn't it be clearer to write it as

```
def _get_shared_lib_filename(*libnames)
```



---

archive/issue_comments_420642.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@jdemeyer](#comment:18):\n> Another detail: why this signature\n> \n> ```\n> def _get_shared_lib_filename(libname, *additional_libnames)\n> ```\n> when all the arguments play the same role?\n> \n> Wouldn't it be clearer to write it as\n> \n> ```\n> def _get_shared_lib_filename(*libnames)\n> ```\n\nI pinged back and forth on that, but ultimately did it that way so that it would require at least one argument.  I suppose it could allow zero arguments and then just return None but why bother?",
    "created_at": "2019-02-07T18:00:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420642",
    "user": "https://github.com/embray"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@jdemeyer](#comment:18):
> Another detail: why this signature
> 
> ```
> def _get_shared_lib_filename(libname, *additional_libnames)
> ```
> when all the arguments play the same role?
> 
> Wouldn't it be clearer to write it as
> 
> ```
> def _get_shared_lib_filename(*libnames)
> ```

I pinged back and forth on that, but ultimately did it that way so that it would require at least one argument.  I suppose it could allow zero arguments and then just return None but why bother?



---

archive/issue_comments_420643.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11a8a892a1cfabd51b9a1d9734603edcda0ff40c\"><code>11a8a89</code></a></td><td><code>trac #26822: pep8 in centrality_betweenness and centrality_closeness</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7f780bb11f0089744b954ceefd7813cbcf6fa85d\"><code>7f780bb</code></a></td><td><code>trac #26822: fix doctest error in centrality_closeness</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0bb77cd52464d509df2888188376c60a6fdf1938\"><code>0bb77cd</code></a></td><td><code>Updated [SageMath](../wiki/SageMath) version to 8.7.beta2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5001b21da8f75091b8cf7eba087f84cbc3a0c885\"><code>5001b21</code></a></td><td><code>repackages the code for finding the libSingular.so as a somewhat</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/db8a725c69fbced1273c0ff5ea6c603de8ed983f\"><code>db8a725</code></a></td><td><code>rework _get_shared_lib_filename to cover more system-specific cases,</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d137bc4f18cb77b0e67c3cb7beab8ea2a7f5efb2\"><code>d137bc4</code></a></td><td><code>fixed the test to be a little more flexible</code></td></tr></table>\n",
    "created_at": "2019-02-07T18:06:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420643",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11a8a892a1cfabd51b9a1d9734603edcda0ff40c"><code>11a8a89</code></a></td><td><code>trac #26822: pep8 in centrality_betweenness and centrality_closeness</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7f780bb11f0089744b954ceefd7813cbcf6fa85d"><code>7f780bb</code></a></td><td><code>trac #26822: fix doctest error in centrality_closeness</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0bb77cd52464d509df2888188376c60a6fdf1938"><code>0bb77cd</code></a></td><td><code>Updated [SageMath](../wiki/SageMath) version to 8.7.beta2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5001b21da8f75091b8cf7eba087f84cbc3a0c885"><code>5001b21</code></a></td><td><code>repackages the code for finding the libSingular.so as a somewhat</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/db8a725c69fbced1273c0ff5ea6c603de8ed983f"><code>db8a725</code></a></td><td><code>rework _get_shared_lib_filename to cover more system-specific cases,</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d137bc4f18cb77b0e67c3cb7beab8ea2a7f5efb2"><code>d137bc4</code></a></td><td><code>fixed the test to be a little more flexible</code></td></tr></table>




---

archive/issue_comments_420644.json:
```json
{
    "body": "Changed commit from **[`917a21b`](https://github.com/sagemath/sagetrac-mirror/commit/917a21ba4b07dc86ed855d57bfba5cde7a110f8e)** to **[`d137bc4`](https://github.com/sagemath/sagetrac-mirror/commit/d137bc4f18cb77b0e67c3cb7beab8ea2a7f5efb2)**",
    "created_at": "2019-02-07T18:06:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420644",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`917a21b`](https://github.com/sagemath/sagetrac-mirror/commit/917a21ba4b07dc86ed855d57bfba5cde7a110f8e)** to **[`d137bc4`](https://github.com/sagemath/sagetrac-mirror/commit/d137bc4f18cb77b0e67c3cb7beab8ea2a7f5efb2)**



---

archive/issue_comments_420645.json:
```json
{
    "body": "Changed commit from **[`d137bc4`](https://github.com/sagemath/sagetrac-mirror/commit/d137bc4f18cb77b0e67c3cb7beab8ea2a7f5efb2)** to **[`cc2a024`](https://github.com/sagemath/sagetrac-mirror/commit/cc2a024b7474a6a5e5cb3b11f0797a22d395672a)**",
    "created_at": "2019-02-07T18:07:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420645",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d137bc4`](https://github.com/sagemath/sagetrac-mirror/commit/d137bc4f18cb77b0e67c3cb7beab8ea2a7f5efb2)** to **[`cc2a024`](https://github.com/sagemath/sagetrac-mirror/commit/cc2a024b7474a6a5e5cb3b11f0797a22d395672a)**



---

archive/issue_comments_420646.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/05f3dd95c27ca8f8f31ca04ee3ef5c12931b231e\"><code>05f3dd9</code></a></td><td><code>rework _get_shared_lib_filename to cover more system-specific cases,</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cc2a024b7474a6a5e5cb3b11f0797a22d395672a\"><code>cc2a024</code></a></td><td><code>fixed the test to be a little more flexible</code></td></tr></table>\n",
    "created_at": "2019-02-07T18:07:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420646",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/05f3dd95c27ca8f8f31ca04ee3ef5c12931b231e"><code>05f3dd9</code></a></td><td><code>rework _get_shared_lib_filename to cover more system-specific cases,</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cc2a024b7474a6a5e5cb3b11f0797a22d395672a"><code>cc2a024</code></a></td><td><code>fixed the test to be a little more flexible</code></td></tr></table>




---

archive/issue_events_374159.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-07T18:10:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-374159"
}
```



---

archive/issue_events_374160.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-07T18:10:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-374160"
}
```



---

archive/issue_comments_420647.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nAddressed [comment:16](#comment:16) and obvious bugs from [comment:15](#comment:15) (in the latter case, it previously worked on Cygwin but I did not test on Cygwin after the refactoring I did; I'm confident now that it's right-enough).\n\nHappy to shuffle things around to different locations as well, though keep in mind everything in `sage.env` should work easily with minimal, if any, imports from other sub-packages in Sage (at least anything that does anything less trivial that define a few pure-Python classes and functions).\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11a8a892a1cfabd51b9a1d9734603edcda0ff40c\"><code>11a8a89</code></a></td><td><code>trac #26822: pep8 in centrality_betweenness and centrality_closeness</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7f780bb11f0089744b954ceefd7813cbcf6fa85d\"><code>7f780bb</code></a></td><td><code>trac #26822: fix doctest error in centrality_closeness</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0bb77cd52464d509df2888188376c60a6fdf1938\"><code>0bb77cd</code></a></td><td><code>Updated [SageMath](../wiki/SageMath) version to 8.7.beta2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5001b21da8f75091b8cf7eba087f84cbc3a0c885\"><code>5001b21</code></a></td><td><code>repackages the code for finding the libSingular.so as a somewhat</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/05f3dd95c27ca8f8f31ca04ee3ef5c12931b231e\"><code>05f3dd9</code></a></td><td><code>rework _get_shared_lib_filename to cover more system-specific cases,</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cc2a024b7474a6a5e5cb3b11f0797a22d395672a\"><code>cc2a024</code></a></td><td><code>fixed the test to be a little more flexible</code></td></tr></table>\n",
    "created_at": "2019-02-07T18:10:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420647",
    "user": "https://github.com/embray"
}
```

<div id="comment:22" align="right">comment:22</div>

Addressed [comment:16](#comment:16) and obvious bugs from [comment:15](#comment:15) (in the latter case, it previously worked on Cygwin but I did not test on Cygwin after the refactoring I did; I'm confident now that it's right-enough).

Happy to shuffle things around to different locations as well, though keep in mind everything in `sage.env` should work easily with minimal, if any, imports from other sub-packages in Sage (at least anything that does anything less trivial that define a few pure-Python classes and functions).

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11a8a892a1cfabd51b9a1d9734603edcda0ff40c"><code>11a8a89</code></a></td><td><code>trac #26822: pep8 in centrality_betweenness and centrality_closeness</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7f780bb11f0089744b954ceefd7813cbcf6fa85d"><code>7f780bb</code></a></td><td><code>trac #26822: fix doctest error in centrality_closeness</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0bb77cd52464d509df2888188376c60a6fdf1938"><code>0bb77cd</code></a></td><td><code>Updated [SageMath](../wiki/SageMath) version to 8.7.beta2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5001b21da8f75091b8cf7eba087f84cbc3a0c885"><code>5001b21</code></a></td><td><code>repackages the code for finding the libSingular.so as a somewhat</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/05f3dd95c27ca8f8f31ca04ee3ef5c12931b231e"><code>05f3dd9</code></a></td><td><code>rework _get_shared_lib_filename to cover more system-specific cases,</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cc2a024b7474a6a5e5cb3b11f0797a22d395672a"><code>cc2a024</code></a></td><td><code>fixed the test to be a little more flexible</code></td></tr></table>




---

archive/issue_comments_420648.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nan import is missing, it seems:\n\n```\n[sagelib-8.7.beta2] && sage-python23 -u setup.py --no-user-cfg build install\n[sagelib-8.7.beta2] ************************************************************************\n[sagelib-8.7.beta2] Traceback (most recent call last):\n[sagelib-8.7.beta2]   File \"setup.py\", line 61, in <module>\n[sagelib-8.7.beta2]     import sage.env\n[sagelib-8.7.beta2]   File \"/mnt/opt/Sage/sage-dev/src/sage/env.py\", line 264, in <module>\n[sagelib-8.7.beta2]     SINGULAR_SO = _get_shared_lib_filename('Singular', 'singular-Singular')\n[sagelib-8.7.beta2]   File \"/mnt/opt/Sage/sage-dev/src/sage/env.py\", line 247, in _get_shared_lib_filename\n[sagelib-8.7.beta2]     libdirs = [sysconfig.get_config_var('LIBDIR')]\n[sagelib-8.7.beta2] NameError: global name 'sysconfig' is not defined\n[sagelib-8.7.beta2] ************************************************************************\n[sagelib-8.7.beta2] Error building the Sage library\n```",
    "created_at": "2019-02-08T12:08:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420648",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:23" align="right">comment:23</div>

an import is missing, it seems:

```
[sagelib-8.7.beta2] && sage-python23 -u setup.py --no-user-cfg build install
[sagelib-8.7.beta2] ************************************************************************
[sagelib-8.7.beta2] Traceback (most recent call last):
[sagelib-8.7.beta2]   File "setup.py", line 61, in <module>
[sagelib-8.7.beta2]     import sage.env
[sagelib-8.7.beta2]   File "/mnt/opt/Sage/sage-dev/src/sage/env.py", line 264, in <module>
[sagelib-8.7.beta2]     SINGULAR_SO = _get_shared_lib_filename('Singular', 'singular-Singular')
[sagelib-8.7.beta2]   File "/mnt/opt/Sage/sage-dev/src/sage/env.py", line 247, in _get_shared_lib_filename
[sagelib-8.7.beta2]     libdirs = [sysconfig.get_config_var('LIBDIR')]
[sagelib-8.7.beta2] NameError: global name 'sysconfig' is not defined
[sagelib-8.7.beta2] ************************************************************************
[sagelib-8.7.beta2] Error building the Sage library
```



---

archive/issue_events_374161.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-02-08T12:08:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-374161"
}
```



---

archive/issue_events_374162.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-02-08T12:08:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-374162"
}
```



---

archive/issue_comments_420649.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nThat's weird--I thought an `import sysconfig` was already added in #27040, but apparently not?",
    "created_at": "2019-02-08T12:22:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420649",
    "user": "https://github.com/embray"
}
```

<div id="comment:24" align="right">comment:24</div>

That's weird--I thought an `import sysconfig` was already added in #27040, but apparently not?



---

archive/issue_comments_420650.json:
```json
{
    "body": "Changed dependencies from **#27040** to none",
    "created_at": "2019-02-08T12:41:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420650",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#27040** to none



---

archive/issue_comments_420651.json:
```json
{
    "body": "Changed commit from **[`cc2a024`](https://github.com/sagemath/sagetrac-mirror/commit/cc2a024b7474a6a5e5cb3b11f0797a22d395672a)** to **[`8d62ac5`](https://github.com/sagemath/sagetrac-mirror/commit/8d62ac50fb8c679e512ced730a5555271c2b1c65)**",
    "created_at": "2019-02-08T12:56:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420651",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cc2a024`](https://github.com/sagemath/sagetrac-mirror/commit/cc2a024b7474a6a5e5cb3b11f0797a22d395672a)** to **[`8d62ac5`](https://github.com/sagemath/sagetrac-mirror/commit/8d62ac50fb8c679e512ced730a5555271c2b1c65)**



---

archive/issue_comments_420652.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/346eb67a3990916d780faca039ecb118e1c512e2\"><code>346eb67</code></a></td><td><code>rework _get_shared_lib_filename to cover more system-specific cases,</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d62ac50fb8c679e512ced730a5555271c2b1c65\"><code>8d62ac5</code></a></td><td><code>fixed the test to be a little more flexible</code></td></tr></table>\n",
    "created_at": "2019-02-08T12:56:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420652",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/346eb67a3990916d780faca039ecb118e1c512e2"><code>346eb67</code></a></td><td><code>rework _get_shared_lib_filename to cover more system-specific cases,</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d62ac50fb8c679e512ced730a5555271c2b1c65"><code>8d62ac5</code></a></td><td><code>fixed the test to be a little more flexible</code></td></tr></table>




---

archive/issue_events_374163.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-08T12:56:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-374163"
}
```



---

archive/issue_events_374164.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-08T12:56:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-374164"
}
```



---

archive/issue_comments_420653.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nThere is something weird going on with the commits... Why am I seeing `Updated [SageMath](../wiki/SageMath) version to 8.7.beta2` in the list of commits on this ticket (when clicking on \"commits\" in the box at the top of this page)? Either it's something wrong with Trac or with this branch, but it would be good to clear that up.",
    "created_at": "2019-02-08T13:05:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420653",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:28" align="right">comment:28</div>

There is something weird going on with the commits... Why am I seeing `Updated [SageMath](../wiki/SageMath) version to 8.7.beta2` in the list of commits on this ticket (when clicking on "commits" in the box at the top of this page)? Either it's something wrong with Trac or with this branch, but it would be good to clear that up.



---

archive/issue_events_374165.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-02-08T13:05:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-374165"
}
```



---

archive/issue_events_374166.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-02-08T13:05:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-374166"
}
```



---

archive/issue_comments_420654.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nI clearly must have screwed something up while rebasing, because it also says I'm the committer on that commit.  I suspect what I did was at some point I did a `git rebase -i` and selected too many commits.  Still surprising that it would modify some commits and set me as the committer even if I didn't change them at all.",
    "created_at": "2019-02-08T13:11:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420654",
    "user": "https://github.com/embray"
}
```

<div id="comment:29" align="right">comment:29</div>

I clearly must have screwed something up while rebasing, because it also says I'm the committer on that commit.  I suspect what I did was at some point I did a `git rebase -i` and selected too many commits.  Still surprising that it would modify some commits and set me as the committer even if I didn't change them at all.



---

archive/issue_comments_420655.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/461ae1dbc64215a28d4b33857d70f66892981964\"><code>461ae1d</code></a></td><td><code>repackages the code for finding the libSingular.so as a somewhat</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b7df99619ca2a9a37ea79e90cb4617f154b45e4\"><code>3b7df99</code></a></td><td><code>rework _get_shared_lib_filename to cover more system-specific cases,</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ab94f51c0c45221d92969721be0a26dc832c1330\"><code>ab94f51</code></a></td><td><code>fixed the test to be a little more flexible</code></td></tr></table>\n",
    "created_at": "2019-02-08T13:14:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420655",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/461ae1dbc64215a28d4b33857d70f66892981964"><code>461ae1d</code></a></td><td><code>repackages the code for finding the libSingular.so as a somewhat</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b7df99619ca2a9a37ea79e90cb4617f154b45e4"><code>3b7df99</code></a></td><td><code>rework _get_shared_lib_filename to cover more system-specific cases,</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ab94f51c0c45221d92969721be0a26dc832c1330"><code>ab94f51</code></a></td><td><code>fixed the test to be a little more flexible</code></td></tr></table>




---

archive/issue_comments_420656.json:
```json
{
    "body": "Changed commit from **[`8d62ac5`](https://github.com/sagemath/sagetrac-mirror/commit/8d62ac50fb8c679e512ced730a5555271c2b1c65)** to **[`ab94f51`](https://github.com/sagemath/sagetrac-mirror/commit/ab94f51c0c45221d92969721be0a26dc832c1330)**",
    "created_at": "2019-02-08T13:14:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420656",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8d62ac5`](https://github.com/sagemath/sagetrac-mirror/commit/8d62ac50fb8c679e512ced730a5555271c2b1c65)** to **[`ab94f51`](https://github.com/sagemath/sagetrac-mirror/commit/ab94f51c0c45221d92969721be0a26dc832c1330)**



---

archive/issue_comments_420657.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nThat's better.",
    "created_at": "2019-02-08T13:15:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420657",
    "user": "https://github.com/embray"
}
```

<div id="comment:31" align="right">comment:31</div>

That's better.



---

archive/issue_events_374167.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-08T13:15:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-374167"
}
```



---

archive/issue_events_374168.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-08T13:15:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-374168"
}
```



---

archive/issue_comments_420658.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nok, tests out well.",
    "created_at": "2019-02-08T20:53:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420658",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:32" align="right">comment:32</div>

ok, tests out well.



---

archive/issue_events_374169.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-02-08T20:53:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-374169"
}
```



---

archive/issue_events_374170.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-02-08T20:53:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-374170"
}
```



---

archive/issue_comments_420659.json:
```json
{
    "body": "Changed branch from **[u/embray/misc/sage-env-lib-filename](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/misc/sage-env-lib-filename)** to **[`ab94f51`](https://github.com/sagemath/sagetrac-mirror/commit/ab94f51c0c45221d92969721be0a26dc832c1330)**",
    "created_at": "2019-02-10T12:55:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420659",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/embray/misc/sage-env-lib-filename](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/misc/sage-env-lib-filename)** to **[`ab94f51`](https://github.com/sagemath/sagetrac-mirror/commit/ab94f51c0c45221d92969721be0a26dc832c1330)**



---

archive/issue_events_374171.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-02-10T12:55:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-374171"
}
```



---

archive/issue_events_374172.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "b66fae2dc5f4b7293156851a5321c3e65692602d",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-02-10T12:55:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-374172"
}
```



---

archive/issue_comments_420660.json:
```json
{
    "body": "Changed commit from **[`ab94f51`](https://github.com/sagemath/sagetrac-mirror/commit/ab94f51c0c45221d92969721be0a26dc832c1330)** to none",
    "created_at": "2019-02-21T10:46:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420660",
    "user": "https://github.com/embray"
}
```

Changed commit from **[`ab94f51`](https://github.com/sagemath/sagetrac-mirror/commit/ab94f51c0c45221d92969721be0a26dc832c1330)** to none



---

archive/issue_comments_420661.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nUgh, this is still completely broken on Cygwin.",
    "created_at": "2019-02-21T10:46:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420661",
    "user": "https://github.com/embray"
}
```

<div id="comment:34" align="right">comment:34</div>

Ugh, this is still completely broken on Cygwin.



---

archive/issue_comments_420662.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nThis fails to find any libraries on nix, since they won't be in the same libdir as python. For that reason I'm already setting the `SINGULAR_SO` and `GAP_SO` env vars, but now this test fails anyways.\n\nThoughts on how best to resolve this? I'm not sure the function should even be tested (instead maybe test that `SINGULAR_SO` and `GAP_SO` have proper values after being assigned. If we really do want to test that function, maybe ad the `SINGULAR_SO` and `GAP_SO` locations to the `libdirs` list?",
    "created_at": "2019-04-06T14:23:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420662",
    "user": "https://github.com/timokau"
}
```

<div id="comment:35" align="right">comment:35</div>

This fails to find any libraries on nix, since they won't be in the same libdir as python. For that reason I'm already setting the `SINGULAR_SO` and `GAP_SO` env vars, but now this test fails anyways.

Thoughts on how best to resolve this? I'm not sure the function should even be tested (instead maybe test that `SINGULAR_SO` and `GAP_SO` have proper values after being assigned. If we really do want to test that function, maybe ad the `SINGULAR_SO` and `GAP_SO` locations to the `libdirs` list?



---

archive/issue_comments_420663.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nthis seems to be duplucating in an ad hoc way what the system linker/loader knows. Is there a way to query the cache of ldconfig from Python? This would be a much more robust thing, for system libraries, IMHO.",
    "created_at": "2019-04-06T16:26:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420663",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:36" align="right">comment:36</div>

this seems to be duplucating in an ad hoc way what the system linker/loader knows. Is there a way to query the cache of ldconfig from Python? This would be a much more robust thing, for system libraries, IMHO.



---

archive/issue_comments_420664.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nCome to think of it, why do we need this at all? Isn't the functionality covered (better) by `find_library` in `src/sage/misc/compat.py`?",
    "created_at": "2019-04-07T13:17:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420664",
    "user": "https://github.com/timokau"
}
```

<div id="comment:37" align="right">comment:37</div>

Come to think of it, why do we need this at all? Isn't the functionality covered (better) by `find_library` in `src/sage/misc/compat.py`?



---

archive/issue_comments_420665.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nNew ticket please.",
    "created_at": "2019-04-08T16:01:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-420665",
    "user": "https://github.com/embray"
}
```

<div id="comment:38" align="right">comment:38</div>

New ticket please.
