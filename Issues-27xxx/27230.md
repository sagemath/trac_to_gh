# Issue 27230: Improve detection of library files in sage.env

archive/issues_026993.json:
```json
{
    "body": "This is basically repackaging the existing code from `sage.env` that is used to set the `SINGULAR_SO` variable, but making it a bit more generic and flexible.\n\nThis will be useful as well for #26930 to get the correct libgap path.  It also tries to be a bit more flexible than the old code, so as to reduce the need for patching in some distros, though this does not guarantee to eliminate that need altogether.\n\n**CC:**  @dimpase @kiwifb\n\n**Branch:** [ab94f51c0c45221d92969721be0a26dc832c1330](https://github.com/sagemath/sagetrac-mirror/commit/ab94f51c0c45221d92969721be0a26dc832c1330)\n\n**Reviewer:** Fran\u00e7ois Bissey, Dima Pasechnik\n\n**Author:** Erik Bray\n\nIssue created by migration from https://trac.sagemath.org/ticket/27230\n\n",
    "closed_at": "2019-02-10T12:55:42Z",
    "created_at": "2019-02-06T15:59:11Z",
    "labels": [
        "component: misc",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.7",
    "title": "Improve detection of library files in sage.env",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/27230",
    "user": "https://github.com/embray"
}
```
This is basically repackaging the existing code from `sage.env` that is used to set the `SINGULAR_SO` variable, but making it a bit more generic and flexible.

This will be useful as well for #26930 to get the correct libgap path.  It also tries to be a bit more flexible than the old code, so as to reduce the need for patching in some distros, though this does not guarantee to eliminate that need altogether.

**CC:**  @dimpase @kiwifb

**Branch:** [ab94f51c0c45221d92969721be0a26dc832c1330](https://github.com/sagemath/sagetrac-mirror/commit/ab94f51c0c45221d92969721be0a26dc832c1330)

**Reviewer:** François Bissey, Dima Pasechnik

**Author:** Erik Bray

Issue created by migration from https://trac.sagemath.org/ticket/27230





---

archive/issue_comments_423208.json:
```json
{
    "body": "<a id='comment:1'></a>\nI have a branch for this, but the cloud hosting provider for the VM I was working in seems to be monkeying around with something and now my VM lacks working DNS...",
    "created_at": "2019-02-06T16:02:41Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423208",
    "user": "https://github.com/embray"
}
```

<a id='comment:1'></a>
I have a branch for this, but the cloud hosting provider for the VM I was working in seems to be monkeying around with something and now my VM lacks working DNS...



---

archive/issue_comments_423209.json:
```json
{
    "body": "**Branch:** [u/embray/misc/sage-env-lib-filename](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/misc/sage-env-lib-filename)",
    "created_at": "2019-02-06T16:03:20Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423209",
    "user": "https://github.com/embray"
}
```

**Branch:** [u/embray/misc/sage-env-lib-filename](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/misc/sage-env-lib-filename)



---

archive/issue_comments_423210.json:
```json
{
    "body": "<a id='comment:2'></a>\nOh, it's working again....\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/32940a6e26556a1286e80ac7e48a28e342b7f138\">32940a6</a></td><td><code>Remove deprecated stuff related to Cython</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d6581fd6136b5bbb539380365c22b8663a2ddfa9\">d6581fd</a></td><td><code>Clean up sage.env</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/84eb61be734fd9632222f0d5309f1d032fa2cf2c\">84eb61b</a></td><td><code>repackages the code for finding the libSingular.so as a somewhat</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b3c86d4ef8aab430172fbbba66bf70baa3f869ae\">b3c86d4</a></td><td><code>rework _get_shared_lib_filename to cover more system-specific cases,</code></td></tr></table>\n",
    "created_at": "2019-02-06T16:03:20Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423210",
    "user": "https://github.com/embray"
}
```

<a id='comment:2'></a>
Oh, it's working again....

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/32940a6e26556a1286e80ac7e48a28e342b7f138">32940a6</a></td><td><code>Remove deprecated stuff related to Cython</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d6581fd6136b5bbb539380365c22b8663a2ddfa9">d6581fd</a></td><td><code>Clean up sage.env</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/84eb61be734fd9632222f0d5309f1d032fa2cf2c">84eb61b</a></td><td><code>repackages the code for finding the libSingular.so as a somewhat</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b3c86d4ef8aab430172fbbba66bf70baa3f869ae">b3c86d4</a></td><td><code>rework _get_shared_lib_filename to cover more system-specific cases,</code></td></tr></table>




---

archive/issue_events_240472.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-06T16:03:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-240472"
}
```



---

archive/issue_comments_423211.json:
```json
{
    "body": "**Commit:** [b3c86d4ef8aab430172fbbba66bf70baa3f869ae](https://github.com/sagemath/sagetrac-mirror/commit/b3c86d4ef8aab430172fbbba66bf70baa3f869ae)",
    "created_at": "2019-02-06T16:03:20Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423211",
    "user": "https://github.com/embray"
}
```

**Commit:** [b3c86d4ef8aab430172fbbba66bf70baa3f869ae](https://github.com/sagemath/sagetrac-mirror/commit/b3c86d4ef8aab430172fbbba66bf70baa3f869ae)



---

archive/issue_comments_423212.json:
```json
{
    "body": "<a id='comment:3'></a>\nThis is built on top of #27040, with which it would otherwise conflict.\n\nFor #26930 the idea then would be to add\n\n```\nLIBGAP_SO = _get_shared_lib_filename('gap')\n```",
    "created_at": "2019-02-06T16:04:54Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423212",
    "user": "https://github.com/embray"
}
```

<a id='comment:3'></a>
This is built on top of #27040, with which it would otherwise conflict.

For #26930 the idea then would be to add

```
LIBGAP_SO = _get_shared_lib_filename('gap')
```



---

archive/issue_comments_423213.json:
```json
{
    "body": "**Dependencies:** #27040",
    "created_at": "2019-02-06T16:04:54Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423213",
    "user": "https://github.com/embray"
}
```

**Dependencies:** #27040



---

archive/issue_comments_423214.json:
```json
{
    "body": "<a id='comment:4'></a>\nmerge conflict, red branch...",
    "created_at": "2019-02-06T16:06:30Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423214",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:4'></a>
merge conflict, red branch...



---

archive/issue_comments_423215.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/51aa946c35472e69a828ef1dd6d16ab7161a249e\">51aa946</a></td><td><code>repackages the code for finding the libSingular.so as a somewhat</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/34b27b2c8068805c2f24adaa45740a80839cecbc\">34b27b2</a></td><td><code>rework _get_shared_lib_filename to cover more system-specific cases,</code></td></tr></table>\n",
    "created_at": "2019-02-06T16:06:52Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423215",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/51aa946c35472e69a828ef1dd6d16ab7161a249e">51aa946</a></td><td><code>repackages the code for finding the libSingular.so as a somewhat</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/34b27b2c8068805c2f24adaa45740a80839cecbc">34b27b2</a></td><td><code>rework _get_shared_lib_filename to cover more system-specific cases,</code></td></tr></table>




---

archive/issue_comments_423216.json:
```json
{
    "body": "**Changing commit** from \"[b3c86d4ef8aab430172fbbba66bf70baa3f869ae](https://github.com/sagemath/sagetrac-mirror/commit/b3c86d4ef8aab430172fbbba66bf70baa3f869ae)\" to \"[34b27b2c8068805c2f24adaa45740a80839cecbc](https://github.com/sagemath/sagetrac-mirror/commit/34b27b2c8068805c2f24adaa45740a80839cecbc)\".",
    "created_at": "2019-02-06T16:06:52Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423216",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[b3c86d4ef8aab430172fbbba66bf70baa3f869ae](https://github.com/sagemath/sagetrac-mirror/commit/b3c86d4ef8aab430172fbbba66bf70baa3f869ae)" to "[34b27b2c8068805c2f24adaa45740a80839cecbc](https://github.com/sagemath/sagetrac-mirror/commit/34b27b2c8068805c2f24adaa45740a80839cecbc)".



---

archive/issue_comments_423217.json:
```json
{
    "body": "<a id='comment:6'></a>\nRebased on latest develop again.  It seems 8.7.beta2 was released since I was previously working on this yesterday, and already includes #27040.",
    "created_at": "2019-02-06T16:07:36Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423217",
    "user": "https://github.com/embray"
}
```

<a id='comment:6'></a>
Rebased on latest develop again.  It seems 8.7.beta2 was released since I was previously working on this yesterday, and already includes #27040.



---

archive/issue_events_240473.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-06T16:11:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-240473"
}
```



---

archive/issue_events_240474.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-06T16:11:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-240474"
}
```



---

archive/issue_comments_423218.json:
```json
{
    "body": "<a id='comment:7'></a>\nI just realized with my second commit the test could fail now on Debian.",
    "created_at": "2019-02-06T16:11:34Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423218",
    "user": "https://github.com/embray"
}
```

<a id='comment:7'></a>
I just realized with my second commit the test could fail now on Debian.



---

archive/issue_comments_423219.json:
```json
{
    "body": "**Changing commit** from \"[34b27b2c8068805c2f24adaa45740a80839cecbc](https://github.com/sagemath/sagetrac-mirror/commit/34b27b2c8068805c2f24adaa45740a80839cecbc)\" to \"[917a21ba4b07dc86ed855d57bfba5cde7a110f8e](https://github.com/sagemath/sagetrac-mirror/commit/917a21ba4b07dc86ed855d57bfba5cde7a110f8e)\".",
    "created_at": "2019-02-06T16:14:09Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423219",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[34b27b2c8068805c2f24adaa45740a80839cecbc](https://github.com/sagemath/sagetrac-mirror/commit/34b27b2c8068805c2f24adaa45740a80839cecbc)" to "[917a21ba4b07dc86ed855d57bfba5cde7a110f8e](https://github.com/sagemath/sagetrac-mirror/commit/917a21ba4b07dc86ed855d57bfba5cde7a110f8e)".



---

archive/issue_comments_423220.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/917a21ba4b07dc86ed855d57bfba5cde7a110f8e\">917a21b</a></td><td><code>fixed the test to be a little more flexible</code></td></tr></table>\n",
    "created_at": "2019-02-06T16:14:09Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423220",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/917a21ba4b07dc86ed855d57bfba5cde7a110f8e">917a21b</a></td><td><code>fixed the test to be a little more flexible</code></td></tr></table>




---

archive/issue_events_240475.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-06T16:14:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-240475"
}
```



---

archive/issue_events_240476.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-06T16:14:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-240476"
}
```



---

archive/issue_comments_423221.json:
```json
{
    "body": "<a id='comment:9'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/917a21ba4b07dc86ed855d57bfba5cde7a110f8e\">917a21b</a></td><td><code>fixed the test to be a little more flexible</code></td></tr></table>\n",
    "created_at": "2019-02-06T16:14:28Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423221",
    "user": "https://github.com/embray"
}
```

<a id='comment:9'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/917a21ba4b07dc86ed855d57bfba5cde7a110f8e">917a21b</a></td><td><code>fixed the test to be a little more flexible</code></td></tr></table>




---

archive/issue_comments_423222.json:
```json
{
    "body": "<a id='comment:10'></a>\nDoes this stuff really belong to `src/sage/env.py`? \nIMHO a better fit would be src/sage/libs/ - as this is really something to do with libs...",
    "created_at": "2019-02-06T18:34:15Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423222",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:10'></a>
Does this stuff really belong to `src/sage/env.py`? 
IMHO a better fit would be src/sage/libs/ - as this is really something to do with libs...



---

archive/issue_comments_423223.json:
```json
{
    "body": "<a id='comment:11'></a>\n`env.py` is a central repository of variables so it fits there. But I am open to discussion about splitting some of it in the future if there is a good rationale. But that will be in the future. \n\nNow this will remove a bit of patch in sage-on-gentoo in a nice generic way. The amount of patching of sage in sage-on-gentoo has gone down considerably.",
    "created_at": "2019-02-06T18:51:54Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423223",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:11'></a>
`env.py` is a central repository of variables so it fits there. But I am open to discussion about splitting some of it in the future if there is a good rationale. But that will be in the future. 

Now this will remove a bit of patch in sage-on-gentoo in a nice generic way. The amount of patching of sage in sage-on-gentoo has gone down considerably.



---

archive/issue_events_240477.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2019-02-06T19:57:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-240477"
}
```



---

archive/issue_events_240478.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2019-02-06T19:57:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-240478"
}
```



---

archive/issue_comments_423224.json:
```json
{
    "body": "<a id='comment:12'></a>\nPatchbot has two failures unrelated to this ticket and it looks good to me. So I am giving this a positive review.",
    "created_at": "2019-02-06T19:57:52Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423224",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:12'></a>
Patchbot has two failures unrelated to this ticket and it looks good to me. So I am giving this a positive review.



---

archive/issue_comments_423225.json:
```json
{
    "body": "**Reviewer:** Fran\u00e7ois Bissey",
    "created_at": "2019-02-06T19:57:52Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423225",
    "user": "https://github.com/kiwifb"
}
```

**Reviewer:** François Bissey



---

archive/issue_comments_423226.json:
```json
{
    "body": "<a id='comment:13'></a>\nOK, so please apply to your branch\n\n```\n--- a/src/sage/env.py\n+++ b/src/sage/env.py\n@@ -267,6 +267,10 @@ def _get_shared_lib_filename(libname, *additional_libnames):\n SINGULAR_SO = _get_shared_lib_filename('Singular', 'singular-Singular')\n var('SINGULAR_SO', SINGULAR_SO)\n \n+# locate libgap shared object\n+GAP_SO= _get_shared_lib_filename('gap','')\n+var('GAP_SO', GAP_SO)\n+\n # post process\n if ' ' in DOT_SAGE:\n     if UNAME[:6] == 'CYGWIN':\n```\nand then I'll use it on #26930",
    "created_at": "2019-02-06T19:58:30Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423226",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:13'></a>
OK, so please apply to your branch

```
--- a/src/sage/env.py
+++ b/src/sage/env.py
@@ -267,6 +267,10 @@ def _get_shared_lib_filename(libname, *additional_libnames):
 SINGULAR_SO = _get_shared_lib_filename('Singular', 'singular-Singular')
 var('SINGULAR_SO', SINGULAR_SO)
 
+# locate libgap shared object
+GAP_SO= _get_shared_lib_filename('gap','')
+var('GAP_SO', GAP_SO)
+
 # post process
 if ' ' in DOT_SAGE:
     if UNAME[:6] == 'CYGWIN':
```
and then I'll use it on #26930



---

archive/issue_events_240479.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-02-06T19:58:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-240479"
}
```



---

archive/issue_events_240480.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-02-06T19:58:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-240480"
}
```



---

archive/issue_comments_423227.json:
```json
{
    "body": "<a id='comment:14'></a>\nI just added the stuff I asked for in comment 13 to the branch of #26930, so no worried about it, positive review.",
    "created_at": "2019-02-07T01:43:11Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423227",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:14'></a>
I just added the stuff I asked for in comment 13 to the branch of #26930, so no worried about it, positive review.



---

archive/issue_events_240481.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-02-07T01:43:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-240481"
}
```



---

archive/issue_events_240482.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-02-07T01:43:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-240482"
}
```



---

archive/issue_comments_423228.json:
```json
{
    "body": "**Changing reviewer** from \"Fran\u00e7ois Bissey\" to \"Fran\u00e7ois Bissey, Dima Pasechnik\".",
    "created_at": "2019-02-07T01:43:11Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423228",
    "user": "https://github.com/dimpase"
}
```

**Changing reviewer** from "François Bissey" to "François Bissey, Dima Pasechnik".



---

archive/issue_events_240483.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-02-07T08:09:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-240483"
}
```



---

archive/issue_events_240484.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-02-07T08:09:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-240484"
}
```



---

archive/issue_comments_423229.json:
```json
{
    "body": "<a id='comment:15'></a>\n`pyflakes` reports:\n\n```\nsrc/sage/env.py:37: redefinition of unused 'sys' from line 32\nsrc/sage/env.py:235: undefined name 'libdir'\nsrc/sage/env.py:235: undefined name 'libdir'\n```\nThe latter is a genuine bug as far as I can see.",
    "created_at": "2019-02-07T08:09:30Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423229",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'></a>
`pyflakes` reports:

```
src/sage/env.py:37: redefinition of unused 'sys' from line 32
src/sage/env.py:235: undefined name 'libdir'
src/sage/env.py:235: undefined name 'libdir'
```
The latter is a genuine bug as far as I can see.



---

archive/issue_comments_423230.json:
```json
{
    "body": "<a id='comment:16'></a>\nJust a minor thing, but I find this remark more confusing than helping and suggest to remove it:\n\n```\n(technically this is superfluous but clearer when made explicit)\n```",
    "created_at": "2019-02-07T08:11:41Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423230",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'></a>
Just a minor thing, but I find this remark more confusing than helping and suggest to remove it:

```
(technically this is superfluous but clearer when made explicit)
```



---

archive/issue_comments_423231.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [jdemeyer](#comment%3A15):\n> `pyflakes` reports:\n> \n> ```\n> src/sage/env.py:37: redefinition of unused 'sys' from line 32\n> src/sage/env.py:235: undefined name 'libdir'\n> src/sage/env.py:235: undefined name 'libdir'\n> ```\n> The latter is a genuine bug as far as I can see.\n\n\nI am guessing Erik meant `libname` from the context.",
    "created_at": "2019-02-07T08:15:06Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423231",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:17'></a>
Replying to [jdemeyer](#comment%3A15):
> `pyflakes` reports:
> 
> ```
> src/sage/env.py:37: redefinition of unused 'sys' from line 32
> src/sage/env.py:235: undefined name 'libdir'
> src/sage/env.py:235: undefined name 'libdir'
> ```
> The latter is a genuine bug as far as I can see.


I am guessing Erik meant `libname` from the context.



---

archive/issue_comments_423232.json:
```json
{
    "body": "<a id='comment:18'></a>\nAnother detail: why this signature\n\n```\ndef _get_shared_lib_filename(libname, *additional_libnames)\n```\nwhen all the arguments play the same role?\n\nWouldn't it be clearer to write it as\n\n```\ndef _get_shared_lib_filename(*libnames)\n```",
    "created_at": "2019-02-07T08:48:28Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423232",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:18'></a>
Another detail: why this signature

```
def _get_shared_lib_filename(libname, *additional_libnames)
```
when all the arguments play the same role?

Wouldn't it be clearer to write it as

```
def _get_shared_lib_filename(*libnames)
```



---

archive/issue_comments_423233.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [jdemeyer](#comment%3A18):\n> Another detail: why this signature\n> \n> ```\n> def _get_shared_lib_filename(libname, *additional_libnames)\n> ```\n> when all the arguments play the same role?\n> \n> Wouldn't it be clearer to write it as\n> \n> ```\n> def _get_shared_lib_filename(*libnames)\n> ```\n\n\nI pinged back and forth on that, but ultimately did it that way so that it would require at least one argument.  I suppose it could allow zero arguments and then just return None but why bother?",
    "created_at": "2019-02-07T18:00:43Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423233",
    "user": "https://github.com/embray"
}
```

<a id='comment:19'></a>
Replying to [jdemeyer](#comment%3A18):
> Another detail: why this signature
> 
> ```
> def _get_shared_lib_filename(libname, *additional_libnames)
> ```
> when all the arguments play the same role?
> 
> Wouldn't it be clearer to write it as
> 
> ```
> def _get_shared_lib_filename(*libnames)
> ```


I pinged back and forth on that, but ultimately did it that way so that it would require at least one argument.  I suppose it could allow zero arguments and then just return None but why bother?



---

archive/issue_comments_423234.json:
```json
{
    "body": "<a id='comment:20'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11a8a892a1cfabd51b9a1d9734603edcda0ff40c\">11a8a89</a></td><td><code>trac #26822: pep8 in centrality_betweenness and centrality_closeness</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7f780bb11f0089744b954ceefd7813cbcf6fa85d\">7f780bb</a></td><td><code>trac #26822: fix doctest error in centrality_closeness</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0bb77cd52464d509df2888188376c60a6fdf1938\">0bb77cd</a></td><td><code>Updated [SageMath](SageMath) version to 8.7.beta2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5001b21da8f75091b8cf7eba087f84cbc3a0c885\">5001b21</a></td><td><code>repackages the code for finding the libSingular.so as a somewhat</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/db8a725c69fbced1273c0ff5ea6c603de8ed983f\">db8a725</a></td><td><code>rework _get_shared_lib_filename to cover more system-specific cases,</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d137bc4f18cb77b0e67c3cb7beab8ea2a7f5efb2\">d137bc4</a></td><td><code>fixed the test to be a little more flexible</code></td></tr></table>\n",
    "created_at": "2019-02-07T18:06:49Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423234",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11a8a892a1cfabd51b9a1d9734603edcda0ff40c">11a8a89</a></td><td><code>trac #26822: pep8 in centrality_betweenness and centrality_closeness</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7f780bb11f0089744b954ceefd7813cbcf6fa85d">7f780bb</a></td><td><code>trac #26822: fix doctest error in centrality_closeness</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0bb77cd52464d509df2888188376c60a6fdf1938">0bb77cd</a></td><td><code>Updated [SageMath](SageMath) version to 8.7.beta2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5001b21da8f75091b8cf7eba087f84cbc3a0c885">5001b21</a></td><td><code>repackages the code for finding the libSingular.so as a somewhat</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/db8a725c69fbced1273c0ff5ea6c603de8ed983f">db8a725</a></td><td><code>rework _get_shared_lib_filename to cover more system-specific cases,</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d137bc4f18cb77b0e67c3cb7beab8ea2a7f5efb2">d137bc4</a></td><td><code>fixed the test to be a little more flexible</code></td></tr></table>




---

archive/issue_comments_423235.json:
```json
{
    "body": "**Changing commit** from \"[917a21ba4b07dc86ed855d57bfba5cde7a110f8e](https://github.com/sagemath/sagetrac-mirror/commit/917a21ba4b07dc86ed855d57bfba5cde7a110f8e)\" to \"[d137bc4f18cb77b0e67c3cb7beab8ea2a7f5efb2](https://github.com/sagemath/sagetrac-mirror/commit/d137bc4f18cb77b0e67c3cb7beab8ea2a7f5efb2)\".",
    "created_at": "2019-02-07T18:06:49Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423235",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[917a21ba4b07dc86ed855d57bfba5cde7a110f8e](https://github.com/sagemath/sagetrac-mirror/commit/917a21ba4b07dc86ed855d57bfba5cde7a110f8e)" to "[d137bc4f18cb77b0e67c3cb7beab8ea2a7f5efb2](https://github.com/sagemath/sagetrac-mirror/commit/d137bc4f18cb77b0e67c3cb7beab8ea2a7f5efb2)".



---

archive/issue_comments_423236.json:
```json
{
    "body": "**Changing commit** from \"[d137bc4f18cb77b0e67c3cb7beab8ea2a7f5efb2](https://github.com/sagemath/sagetrac-mirror/commit/d137bc4f18cb77b0e67c3cb7beab8ea2a7f5efb2)\" to \"[cc2a024b7474a6a5e5cb3b11f0797a22d395672a](https://github.com/sagemath/sagetrac-mirror/commit/cc2a024b7474a6a5e5cb3b11f0797a22d395672a)\".",
    "created_at": "2019-02-07T18:07:54Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423236",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d137bc4f18cb77b0e67c3cb7beab8ea2a7f5efb2](https://github.com/sagemath/sagetrac-mirror/commit/d137bc4f18cb77b0e67c3cb7beab8ea2a7f5efb2)" to "[cc2a024b7474a6a5e5cb3b11f0797a22d395672a](https://github.com/sagemath/sagetrac-mirror/commit/cc2a024b7474a6a5e5cb3b11f0797a22d395672a)".



---

archive/issue_comments_423237.json:
```json
{
    "body": "<a id='comment:21'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/05f3dd95c27ca8f8f31ca04ee3ef5c12931b231e\">05f3dd9</a></td><td><code>rework _get_shared_lib_filename to cover more system-specific cases,</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cc2a024b7474a6a5e5cb3b11f0797a22d395672a\">cc2a024</a></td><td><code>fixed the test to be a little more flexible</code></td></tr></table>\n",
    "created_at": "2019-02-07T18:07:54Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423237",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/05f3dd95c27ca8f8f31ca04ee3ef5c12931b231e">05f3dd9</a></td><td><code>rework _get_shared_lib_filename to cover more system-specific cases,</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cc2a024b7474a6a5e5cb3b11f0797a22d395672a">cc2a024</a></td><td><code>fixed the test to be a little more flexible</code></td></tr></table>




---

archive/issue_events_240485.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-07T18:10:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-240485"
}
```



---

archive/issue_events_240486.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-07T18:10:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-240486"
}
```



---

archive/issue_comments_423238.json:
```json
{
    "body": "<a id='comment:22'></a>\nAddressed [comment:16](#comment%3A16) and obvious bugs from [comment:15](#comment%3A15) (in the latter case, it previously worked on Cygwin but I did not test on Cygwin after the refactoring I did; I'm confident now that it's right-enough).\n\nHappy to shuffle things around to different locations as well, though keep in mind everything in `sage.env` should work easily with minimal, if any, imports from other sub-packages in Sage (at least anything that does anything less trivial that define a few pure-Python classes and functions).\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11a8a892a1cfabd51b9a1d9734603edcda0ff40c\">11a8a89</a></td><td><code>trac #26822: pep8 in centrality_betweenness and centrality_closeness</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7f780bb11f0089744b954ceefd7813cbcf6fa85d\">7f780bb</a></td><td><code>trac #26822: fix doctest error in centrality_closeness</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0bb77cd52464d509df2888188376c60a6fdf1938\">0bb77cd</a></td><td><code>Updated [SageMath](SageMath) version to 8.7.beta2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5001b21da8f75091b8cf7eba087f84cbc3a0c885\">5001b21</a></td><td><code>repackages the code for finding the libSingular.so as a somewhat</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/05f3dd95c27ca8f8f31ca04ee3ef5c12931b231e\">05f3dd9</a></td><td><code>rework _get_shared_lib_filename to cover more system-specific cases,</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cc2a024b7474a6a5e5cb3b11f0797a22d395672a\">cc2a024</a></td><td><code>fixed the test to be a little more flexible</code></td></tr></table>\n",
    "created_at": "2019-02-07T18:10:13Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423238",
    "user": "https://github.com/embray"
}
```

<a id='comment:22'></a>
Addressed [comment:16](#comment%3A16) and obvious bugs from [comment:15](#comment%3A15) (in the latter case, it previously worked on Cygwin but I did not test on Cygwin after the refactoring I did; I'm confident now that it's right-enough).

Happy to shuffle things around to different locations as well, though keep in mind everything in `sage.env` should work easily with minimal, if any, imports from other sub-packages in Sage (at least anything that does anything less trivial that define a few pure-Python classes and functions).

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11a8a892a1cfabd51b9a1d9734603edcda0ff40c">11a8a89</a></td><td><code>trac #26822: pep8 in centrality_betweenness and centrality_closeness</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7f780bb11f0089744b954ceefd7813cbcf6fa85d">7f780bb</a></td><td><code>trac #26822: fix doctest error in centrality_closeness</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0bb77cd52464d509df2888188376c60a6fdf1938">0bb77cd</a></td><td><code>Updated [SageMath](SageMath) version to 8.7.beta2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5001b21da8f75091b8cf7eba087f84cbc3a0c885">5001b21</a></td><td><code>repackages the code for finding the libSingular.so as a somewhat</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/05f3dd95c27ca8f8f31ca04ee3ef5c12931b231e">05f3dd9</a></td><td><code>rework _get_shared_lib_filename to cover more system-specific cases,</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cc2a024b7474a6a5e5cb3b11f0797a22d395672a">cc2a024</a></td><td><code>fixed the test to be a little more flexible</code></td></tr></table>




---

archive/issue_comments_423239.json:
```json
{
    "body": "<a id='comment:23'></a>\nan import is missing, it seems:\n\n```\n[sagelib-8.7.beta2] && sage-python23 -u setup.py --no-user-cfg build install\n[sagelib-8.7.beta2] ************************************************************************\n[sagelib-8.7.beta2] Traceback (most recent call last):\n[sagelib-8.7.beta2]   File \"setup.py\", line 61, in <module>\n[sagelib-8.7.beta2]     import sage.env\n[sagelib-8.7.beta2]   File \"/mnt/opt/Sage/sage-dev/src/sage/env.py\", line 264, in <module>\n[sagelib-8.7.beta2]     SINGULAR_SO = _get_shared_lib_filename('Singular', 'singular-Singular')\n[sagelib-8.7.beta2]   File \"/mnt/opt/Sage/sage-dev/src/sage/env.py\", line 247, in _get_shared_lib_filename\n[sagelib-8.7.beta2]     libdirs = [sysconfig.get_config_var('LIBDIR')]\n[sagelib-8.7.beta2] NameError: global name 'sysconfig' is not defined\n[sagelib-8.7.beta2] ************************************************************************\n[sagelib-8.7.beta2] Error building the Sage library\n```",
    "created_at": "2019-02-08T12:08:05Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423239",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:23'></a>
an import is missing, it seems:

```
[sagelib-8.7.beta2] && sage-python23 -u setup.py --no-user-cfg build install
[sagelib-8.7.beta2] ************************************************************************
[sagelib-8.7.beta2] Traceback (most recent call last):
[sagelib-8.7.beta2]   File "setup.py", line 61, in <module>
[sagelib-8.7.beta2]     import sage.env
[sagelib-8.7.beta2]   File "/mnt/opt/Sage/sage-dev/src/sage/env.py", line 264, in <module>
[sagelib-8.7.beta2]     SINGULAR_SO = _get_shared_lib_filename('Singular', 'singular-Singular')
[sagelib-8.7.beta2]   File "/mnt/opt/Sage/sage-dev/src/sage/env.py", line 247, in _get_shared_lib_filename
[sagelib-8.7.beta2]     libdirs = [sysconfig.get_config_var('LIBDIR')]
[sagelib-8.7.beta2] NameError: global name 'sysconfig' is not defined
[sagelib-8.7.beta2] ************************************************************************
[sagelib-8.7.beta2] Error building the Sage library
```



---

archive/issue_events_240487.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-02-08T12:08:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-240487"
}
```



---

archive/issue_events_240488.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-02-08T12:08:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-240488"
}
```



---

archive/issue_comments_423240.json:
```json
{
    "body": "<a id='comment:24'></a>\nThat's weird--I thought an `import sysconfig` was already added in #27040, but apparently not?",
    "created_at": "2019-02-08T12:22:47Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423240",
    "user": "https://github.com/embray"
}
```

<a id='comment:24'></a>
That's weird--I thought an `import sysconfig` was already added in #27040, but apparently not?



---

archive/issue_comments_423241.json:
```json
{
    "body": "**Changing dependencies** from \"#27040\" to \"\".",
    "created_at": "2019-02-08T12:41:21Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423241",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#27040" to "".



---

archive/issue_comments_423242.json:
```json
{
    "body": "**Changing commit** from \"[cc2a024b7474a6a5e5cb3b11f0797a22d395672a](https://github.com/sagemath/sagetrac-mirror/commit/cc2a024b7474a6a5e5cb3b11f0797a22d395672a)\" to \"[8d62ac50fb8c679e512ced730a5555271c2b1c65](https://github.com/sagemath/sagetrac-mirror/commit/8d62ac50fb8c679e512ced730a5555271c2b1c65)\".",
    "created_at": "2019-02-08T12:56:12Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423242",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[cc2a024b7474a6a5e5cb3b11f0797a22d395672a](https://github.com/sagemath/sagetrac-mirror/commit/cc2a024b7474a6a5e5cb3b11f0797a22d395672a)" to "[8d62ac50fb8c679e512ced730a5555271c2b1c65](https://github.com/sagemath/sagetrac-mirror/commit/8d62ac50fb8c679e512ced730a5555271c2b1c65)".



---

archive/issue_comments_423243.json:
```json
{
    "body": "<a id='comment:26'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/346eb67a3990916d780faca039ecb118e1c512e2\">346eb67</a></td><td><code>rework _get_shared_lib_filename to cover more system-specific cases,</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d62ac50fb8c679e512ced730a5555271c2b1c65\">8d62ac5</a></td><td><code>fixed the test to be a little more flexible</code></td></tr></table>\n",
    "created_at": "2019-02-08T12:56:12Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423243",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/346eb67a3990916d780faca039ecb118e1c512e2">346eb67</a></td><td><code>rework _get_shared_lib_filename to cover more system-specific cases,</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d62ac50fb8c679e512ced730a5555271c2b1c65">8d62ac5</a></td><td><code>fixed the test to be a little more flexible</code></td></tr></table>




---

archive/issue_events_240489.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-08T12:56:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-240489"
}
```



---

archive/issue_events_240490.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-08T12:56:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-240490"
}
```



---

archive/issue_comments_423244.json:
```json
{
    "body": "<a id='comment:28'></a>\nThere is something weird going on with the commits... Why am I seeing `Updated [SageMath](SageMath) version to 8.7.beta2` in the list of commits on this ticket (when clicking on \"commits\" in the box at the top of this page)? Either it's something wrong with Trac or with this branch, but it would be good to clear that up.",
    "created_at": "2019-02-08T13:05:10Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423244",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:28'></a>
There is something weird going on with the commits... Why am I seeing `Updated [SageMath](SageMath) version to 8.7.beta2` in the list of commits on this ticket (when clicking on "commits" in the box at the top of this page)? Either it's something wrong with Trac or with this branch, but it would be good to clear that up.



---

archive/issue_events_240491.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-02-08T13:05:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-240491"
}
```



---

archive/issue_events_240492.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-02-08T13:05:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-240492"
}
```



---

archive/issue_comments_423245.json:
```json
{
    "body": "<a id='comment:29'></a>\nI clearly must have screwed something up while rebasing, because it also says I'm the committer on that commit.  I suspect what I did was at some point I did a `git rebase -i` and selected too many commits.  Still surprising that it would modify some commits and set me as the committer even if I didn't change them at all.",
    "created_at": "2019-02-08T13:11:58Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423245",
    "user": "https://github.com/embray"
}
```

<a id='comment:29'></a>
I clearly must have screwed something up while rebasing, because it also says I'm the committer on that commit.  I suspect what I did was at some point I did a `git rebase -i` and selected too many commits.  Still surprising that it would modify some commits and set me as the committer even if I didn't change them at all.



---

archive/issue_comments_423246.json:
```json
{
    "body": "<a id='comment:30'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/461ae1dbc64215a28d4b33857d70f66892981964\">461ae1d</a></td><td><code>repackages the code for finding the libSingular.so as a somewhat</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b7df99619ca2a9a37ea79e90cb4617f154b45e4\">3b7df99</a></td><td><code>rework _get_shared_lib_filename to cover more system-specific cases,</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ab94f51c0c45221d92969721be0a26dc832c1330\">ab94f51</a></td><td><code>fixed the test to be a little more flexible</code></td></tr></table>\n",
    "created_at": "2019-02-08T13:14:34Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423246",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/461ae1dbc64215a28d4b33857d70f66892981964">461ae1d</a></td><td><code>repackages the code for finding the libSingular.so as a somewhat</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b7df99619ca2a9a37ea79e90cb4617f154b45e4">3b7df99</a></td><td><code>rework _get_shared_lib_filename to cover more system-specific cases,</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ab94f51c0c45221d92969721be0a26dc832c1330">ab94f51</a></td><td><code>fixed the test to be a little more flexible</code></td></tr></table>




---

archive/issue_comments_423247.json:
```json
{
    "body": "**Changing commit** from \"[8d62ac50fb8c679e512ced730a5555271c2b1c65](https://github.com/sagemath/sagetrac-mirror/commit/8d62ac50fb8c679e512ced730a5555271c2b1c65)\" to \"[ab94f51c0c45221d92969721be0a26dc832c1330](https://github.com/sagemath/sagetrac-mirror/commit/ab94f51c0c45221d92969721be0a26dc832c1330)\".",
    "created_at": "2019-02-08T13:14:34Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423247",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8d62ac50fb8c679e512ced730a5555271c2b1c65](https://github.com/sagemath/sagetrac-mirror/commit/8d62ac50fb8c679e512ced730a5555271c2b1c65)" to "[ab94f51c0c45221d92969721be0a26dc832c1330](https://github.com/sagemath/sagetrac-mirror/commit/ab94f51c0c45221d92969721be0a26dc832c1330)".



---

archive/issue_comments_423248.json:
```json
{
    "body": "<a id='comment:31'></a>\nThat's better.",
    "created_at": "2019-02-08T13:15:02Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423248",
    "user": "https://github.com/embray"
}
```

<a id='comment:31'></a>
That's better.



---

archive/issue_events_240493.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-08T13:15:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-240493"
}
```



---

archive/issue_events_240494.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-08T13:15:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-240494"
}
```



---

archive/issue_comments_423249.json:
```json
{
    "body": "<a id='comment:32'></a>\nok, tests out well.",
    "created_at": "2019-02-08T20:53:27Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423249",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:32'></a>
ok, tests out well.



---

archive/issue_events_240495.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-02-08T20:53:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-240495"
}
```



---

archive/issue_events_240496.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-02-08T20:53:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-240496"
}
```



---

archive/issue_comments_423250.json:
```json
{
    "body": "**Changing branch** from \"[u/embray/misc/sage-env-lib-filename](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/misc/sage-env-lib-filename)\" to \"[ab94f51c0c45221d92969721be0a26dc832c1330](https://github.com/sagemath/sagetrac-mirror/commit/ab94f51c0c45221d92969721be0a26dc832c1330)\".",
    "created_at": "2019-02-10T12:55:42Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423250",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/embray/misc/sage-env-lib-filename](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/misc/sage-env-lib-filename)" to "[ab94f51c0c45221d92969721be0a26dc832c1330](https://github.com/sagemath/sagetrac-mirror/commit/ab94f51c0c45221d92969721be0a26dc832c1330)".



---

archive/issue_events_240497.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-02-10T12:55:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-240497"
}
```



---

archive/issue_events_240498.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-02-10T12:55:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27230#event-240498"
}
```



---

archive/issue_comments_423251.json:
```json
{
    "body": "**Changing commit** from \"[ab94f51c0c45221d92969721be0a26dc832c1330](https://github.com/sagemath/sagetrac-mirror/commit/ab94f51c0c45221d92969721be0a26dc832c1330)\" to \"\".",
    "created_at": "2019-02-21T10:46:17Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423251",
    "user": "https://github.com/embray"
}
```

**Changing commit** from "[ab94f51c0c45221d92969721be0a26dc832c1330](https://github.com/sagemath/sagetrac-mirror/commit/ab94f51c0c45221d92969721be0a26dc832c1330)" to "".



---

archive/issue_comments_423252.json:
```json
{
    "body": "<a id='comment:34'></a>\nUgh, this is still completely broken on Cygwin.",
    "created_at": "2019-02-21T10:46:17Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423252",
    "user": "https://github.com/embray"
}
```

<a id='comment:34'></a>
Ugh, this is still completely broken on Cygwin.



---

archive/issue_comments_423253.json:
```json
{
    "body": "<a id='comment:35'></a>\nThis fails to find any libraries on nix, since they won't be in the same libdir as python. For that reason I'm already setting the `SINGULAR_SO` and `GAP_SO` env vars, but now this test fails anyways.\n\nThoughts on how best to resolve this? I'm not sure the function should even be tested (instead maybe test that `SINGULAR_SO` and `GAP_SO` have proper values after being assigned. If we really do want to test that function, maybe ad the `SINGULAR_SO` and `GAP_SO` locations to the `libdirs` list?",
    "created_at": "2019-04-06T14:23:11Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423253",
    "user": "https://github.com/timokau"
}
```

<a id='comment:35'></a>
This fails to find any libraries on nix, since they won't be in the same libdir as python. For that reason I'm already setting the `SINGULAR_SO` and `GAP_SO` env vars, but now this test fails anyways.

Thoughts on how best to resolve this? I'm not sure the function should even be tested (instead maybe test that `SINGULAR_SO` and `GAP_SO` have proper values after being assigned. If we really do want to test that function, maybe ad the `SINGULAR_SO` and `GAP_SO` locations to the `libdirs` list?



---

archive/issue_comments_423254.json:
```json
{
    "body": "<a id='comment:36'></a>\nthis seems to be duplucating in an ad hoc way what the system linker/loader knows. Is there a way to query the cache of ldconfig from Python? This would be a much more robust thing, for system libraries, IMHO.",
    "created_at": "2019-04-06T16:26:18Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423254",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:36'></a>
this seems to be duplucating in an ad hoc way what the system linker/loader knows. Is there a way to query the cache of ldconfig from Python? This would be a much more robust thing, for system libraries, IMHO.



---

archive/issue_comments_423255.json:
```json
{
    "body": "<a id='comment:37'></a>\nCome to think of it, why do we need this at all? Isn't the functionality covered (better) by `find_library` in `src/sage/misc/compat.py`?",
    "created_at": "2019-04-07T13:17:18Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423255",
    "user": "https://github.com/timokau"
}
```

<a id='comment:37'></a>
Come to think of it, why do we need this at all? Isn't the functionality covered (better) by `find_library` in `src/sage/misc/compat.py`?



---

archive/issue_comments_423256.json:
```json
{
    "body": "<a id='comment:38'></a>\nNew ticket please.",
    "created_at": "2019-04-08T16:01:09Z",
    "issue": "https://github.com/sagemath/sage/issues/27230",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27230#issuecomment-423256",
    "user": "https://github.com/embray"
}
```

<a id='comment:38'></a>
New ticket please.
