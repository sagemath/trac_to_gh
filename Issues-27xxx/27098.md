# Issue 27098: Fixed wrong number of arguments for string format

archive/issues_026861.json:
```json
{
    "body": "The string format in line 338 of `src/sage/rings/function_field/function_field_valuation.py`\n`raise ValueError(\"there must not be an element of valuation -Infinity in the domain of valuation\"%(valuation,))`\nwas passing an argument but the string didn't have one.\nI've amended the string to accept the argument to:\n`raise ValueError(\"there must not be an element of valuation -Infinity in the domain of valuation %r\"%(valuation,))`\n\nI work for Semmle and I noticed the bug with our LGTM code analyzer\nhttps://lgtm.com/projects/g/sagemath/sage/snapshot/dist-132890344-1548102310071/files/src/sage/rings/function_field/function_field_valuation.py?sort=name&dir=ASC&mode=heatmap#x394f902069b4c04f:1\n\nCC:  @tscrim\n\nBranch/Commit: 854f2e98e846ea8200cc398f531ce185019e5bd5\n\nReviewer: Travis Scrimshaw\n\nAuthor: Fr\u00e9d\u00e9ric Chapoton\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/27098\n\n",
    "closed_at": "2019-01-27T10:50:54Z",
    "created_at": "2019-01-23T15:40:42Z",
    "labels": [
        "component: finite rings",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.7",
    "title": "Fixed wrong number of arguments for string format",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27098",
    "user": "https://github.com/damianosSemmle"
}
```
The string format in line 338 of `src/sage/rings/function_field/function_field_valuation.py`
`raise ValueError("there must not be an element of valuation -Infinity in the domain of valuation"%(valuation,))`
was passing an argument but the string didn't have one.
I've amended the string to accept the argument to:
`raise ValueError("there must not be an element of valuation -Infinity in the domain of valuation %r"%(valuation,))`

I work for Semmle and I noticed the bug with our LGTM code analyzer
https://lgtm.com/projects/g/sagemath/sage/snapshot/dist-132890344-1548102310071/files/src/sage/rings/function_field/function_field_valuation.py?sort=name&dir=ASC&mode=heatmap#x394f902069b4c04f:1

CC:  @tscrim

Branch/Commit: 854f2e98e846ea8200cc398f531ce185019e5bd5

Reviewer: Travis Scrimshaw

Author: Frédéric Chapoton

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/27098





---

archive/issue_comments_521152.json:
```json
{
    "body": "Attachment [function_field_valuation.py](tarball://root/attachments/some-uuid/ticket27098/function_field_valuation.py) by @damianosSemmle created at 2019-01-23 15:41:28",
    "created_at": "2019-01-23T15:41:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27098#issuecomment-521152",
    "user": "https://github.com/damianosSemmle"
}
```

Attachment [function_field_valuation.py](tarball://root/attachments/some-uuid/ticket27098/function_field_valuation.py) by @damianosSemmle created at 2019-01-23 15:41:28



---

archive/issue_comments_521153.json:
```json
{
    "body": "Changing author from \"\" to \"Fr\u00e9d\u00e9ric Chapoton\"",
    "created_at": "2019-01-23T18:15:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27098#issuecomment-521153",
    "user": "https://github.com/fchapoton"
}
```

Changing author from "" to "Frédéric Chapoton"



---

archive/issue_comments_521154.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-01-23T18:15:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27098#issuecomment-521154",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_521155.json:
```json
{
    "body": "Changing commit from \"\" to \"854f2e98e846ea8200cc398f531ce185019e5bd5\"",
    "created_at": "2019-01-23T18:15:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27098#issuecomment-521155",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "" to "854f2e98e846ea8200cc398f531ce185019e5bd5"



---

archive/issue_comments_521156.json:
```json
{
    "body": "Changing branch from \"\" to \"u/chapoton/27098\"",
    "created_at": "2019-01-23T18:15:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27098#issuecomment-521156",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "" to "u/chapoton/27098"



---

archive/issue_comments_521157.json:
```json
{
    "body": "<a id='comment:1'></a>\nto contribute, you must push a git branch to the trac server.\n\n---\nNew commits:\n|                                                                                                                                          |                                         |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|\n|[854f2e9](https://git.sagemath.org/sage.git/commit?id=854f2e98e846ea8200cc398f531ce185019e5bd5)|`fix details in function field valuation`|",
    "created_at": "2019-01-23T18:15:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27098#issuecomment-521157",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'></a>
to contribute, you must push a git branch to the trac server.

---
New commits:
|                                                                                                                                          |                                         |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|
|[854f2e9](https://git.sagemath.org/sage.git/commit?id=854f2e98e846ea8200cc398f531ce185019e5bd5)|`fix details in function field valuation`|



---

archive/issue_comments_521158.json:
```json
{
    "body": "<a id='comment:2'></a>\nHi Fr\u00e9d\u00e9ric, apologies I'm unfamiliar with the trac server. From clicking on the link of commit `854f2e9` I understand that the suggested changes have been committed by you. Thanks.",
    "created_at": "2019-01-24T09:35:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27098#issuecomment-521158",
    "user": "https://github.com/damianosSemmle"
}
```

<a id='comment:2'></a>
Hi Frédéric, apologies I'm unfamiliar with the trac server. From clicking on the link of commit `854f2e9` I understand that the suggested changes have been committed by you. Thanks.



---

archive/issue_comments_521159.json:
```json
{
    "body": "<a id='comment:3'></a>\nYes, that's right. I agree that trac is complicated. Sorry for not being more friendly, but I am very busy. You can try to use the gitlab setting for sagemath (https://gitlab.com/sagemath) to create pull request on trac.",
    "created_at": "2019-01-24T09:40:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27098#issuecomment-521159",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'></a>
Yes, that's right. I agree that trac is complicated. Sorry for not being more friendly, but I am very busy. You can try to use the gitlab setting for sagemath (https://gitlab.com/sagemath) to create pull request on trac.



---

archive/issue_comments_521160.json:
```json
{
    "body": "<a id='comment:4'></a>\nthanks for the info I will do in the future.",
    "created_at": "2019-01-24T09:42:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27098#issuecomment-521160",
    "user": "https://github.com/damianosSemmle"
}
```

<a id='comment:4'></a>
thanks for the info I will do in the future.



---

archive/issue_comments_521161.json:
```json
{
    "body": "<a id='comment:5'></a>\ngreen bot, please review",
    "created_at": "2019-01-25T07:46:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27098#issuecomment-521161",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'></a>
green bot, please review



---

archive/issue_comments_521162.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2019-01-25T13:46:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27098#issuecomment-521162",
    "user": "https://github.com/tscrim"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_521163.json:
```json
{
    "body": "<a id='comment:6'></a>\nLGTM. Thanks.",
    "created_at": "2019-01-25T13:46:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27098#issuecomment-521163",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:6'></a>
LGTM. Thanks.



---

archive/issue_comments_521164.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2019-01-25T13:46:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27098#issuecomment-521164",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_521165.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-01-25T13:46:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27098#issuecomment-521165",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_521166.json:
```json
{
    "body": "<a id='comment:7'></a>\nNo problem. You can check for more potential issues at https://lgtm.com/projects/g/sagemath/sage. LGTM can also catch bugs like this automatically with automated code review (https://lgtm.com/help/lgtm/about-automated-code-review). Unfortunately this is currently offered for `GitHub.com`, `Bitbucket` and `GitLab` for the free version of LGTM.",
    "created_at": "2019-01-25T15:17:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27098#issuecomment-521166",
    "user": "https://github.com/damianosSemmle"
}
```

<a id='comment:7'></a>
No problem. You can check for more potential issues at https://lgtm.com/projects/g/sagemath/sage. LGTM can also catch bugs like this automatically with automated code review (https://lgtm.com/help/lgtm/about-automated-code-review). Unfortunately this is currently offered for `GitHub.com`, `Bitbucket` and `GitLab` for the free version of LGTM.



---

archive/issue_comments_521167.json:
```json
{
    "body": "Changing branch from \"u/chapoton/27098\" to \"854f2e98e846ea8200cc398f531ce185019e5bd5\"",
    "created_at": "2019-01-27T10:50:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27098#issuecomment-521167",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/chapoton/27098" to "854f2e98e846ea8200cc398f531ce185019e5bd5"



---

archive/issue_events_067329.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-01-27T10:50:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27098",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27098#event-67329"
}
```



---

archive/issue_comments_521168.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-01-27T10:50:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27098#issuecomment-521168",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
