# Issue 27421: .coefficient of multi-variate polynomial should accept output of .exponents()

archive/issues_027184.json:
```json
{
    "body": "```\nsage: P.<x,y> = QQ[]\nsage: x.coefficient(x.exponents()[0])\n```\ngives\n\n```\nTypeError: The input degrees must be a dictionary of variables to exponents.\n```\nand one has to use \n\n```\nsage: x.coefficient(list(x.exponents()[0]))\n1\n```\nas a workaround. However, it seems strange, that the exponents output by the same object are not accepted as input to another method.\n\nCC:  @chamanagrawal\n\nKeywords: easy, beginner\n\nBranch/Commit: f5e3eb47b1f08fafcc9578327eab74c84be8491c\n\nReviewer: Travis Scrimshaw\n\nAuthor: Chaman Agrawal\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/27421\n\n",
    "closed_at": "2019-03-15T08:09:28Z",
    "created_at": "2019-03-04T15:41:26Z",
    "labels": [
        "component: algebra",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.7",
    "title": ".coefficient of multi-variate polynomial should accept output of .exponents()",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27421",
    "user": "https://github.com/dkrenn"
}
```
```
sage: P.<x,y> = QQ[]
sage: x.coefficient(x.exponents()[0])
```
gives

```
TypeError: The input degrees must be a dictionary of variables to exponents.
```
and one has to use 

```
sage: x.coefficient(list(x.exponents()[0]))
1
```
as a workaround. However, it seems strange, that the exponents output by the same object are not accepted as input to another method.

CC:  @chamanagrawal

Keywords: easy, beginner

Branch/Commit: f5e3eb47b1f08fafcc9578327eab74c84be8491c

Reviewer: Travis Scrimshaw

Author: Chaman Agrawal

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/27421





---

archive/issue_comments_528694.json:
```json
{
    "body": "<a id='comment:1'></a>New commits:",
    "created_at": "2019-03-04T20:45:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27421#issuecomment-528694",
    "user": "https://github.com/ChamanAgrawal"
}
```

<a id='comment:1'></a>New commits:



---

archive/issue_comments_528695.json:
```json
{
    "body": "Changing author from \"\" to \"Chaman Agrawal\"",
    "created_at": "2019-03-04T20:45:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27421#issuecomment-528695",
    "user": "https://github.com/ChamanAgrawal"
}
```

Changing author from "" to "Chaman Agrawal"



---

archive/issue_comments_528696.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-03-04T20:45:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27421#issuecomment-528696",
    "user": "https://github.com/ChamanAgrawal"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_528697.json:
```json
{
    "body": "Changing branch from \"\" to \"u/gh-ChamanAgrawal/27421_coefficient\"",
    "created_at": "2019-03-04T20:45:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27421#issuecomment-528697",
    "user": "https://github.com/ChamanAgrawal"
}
```

Changing branch from "" to "u/gh-ChamanAgrawal/27421_coefficient"



---

archive/issue_comments_528698.json:
```json
{
    "body": "Changing commit from \"\" to \"c5c4e8185d3c266e549e7b438f53417095e37330\"",
    "created_at": "2019-03-04T20:45:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27421#issuecomment-528698",
    "user": "https://github.com/ChamanAgrawal"
}
```

Changing commit from "" to "c5c4e8185d3c266e549e7b438f53417095e37330"



---

archive/issue_comments_528699.json:
```json
{
    "body": "<a id='comment:2'></a>This is my first time in sagemath so sorry if I have missed some important community standards.\n\nFor the issue I thought two possible solutions:\n\n1) Change the return type of exponents() to list.\n\n2) Change coefficient() to handle the return value of exponents()\n\nChanging the return type of exponents() will affect all the dependent functions of exponents() so I have changed coefficient() to handle ETuple also ( return type of exponents() ).",
    "created_at": "2019-03-04T21:05:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27421#issuecomment-528699",
    "user": "https://github.com/ChamanAgrawal"
}
```

<a id='comment:2'></a>This is my first time in sagemath so sorry if I have missed some important community standards.

For the issue I thought two possible solutions:

1) Change the return type of exponents() to list.

2) Change coefficient() to handle the return value of exponents()

Changing the return type of exponents() will affect all the dependent functions of exponents() so I have changed coefficient() to handle ETuple also ( return type of exponents() ).



---

archive/issue_comments_528700.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-03-04T21:17:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27421#issuecomment-528700",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_528701.json:
```json
{
    "body": "Changing commit from \"c5c4e8185d3c266e549e7b438f53417095e37330\" to \"a406d1ec194bac92656be1c450234b4bf2a20b92\"",
    "created_at": "2019-03-04T21:17:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27421#issuecomment-528701",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c5c4e8185d3c266e549e7b438f53417095e37330" to "a406d1ec194bac92656be1c450234b4bf2a20b92"



---

archive/issue_comments_528702.json:
```json
{
    "body": "<a id='comment:4'></a>\n```\nif degrees_list is None:\n```\nis vacuous because `list(foo)` should never return `None`. Also, it seems wasteful to convert it to a list. Why not just use the `ETuple` directly with\n\n```python\nexps[i] = int((<ETuple>degrees).get_exp(i))\n```\n\nAlso, we want to move away from the old-style Cython declarations\n\n```diff\n-for i from 0<=i<gens:\n+for i in range(gens):\n```",
    "created_at": "2019-03-05T00:28:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27421#issuecomment-528702",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'></a>
```
if degrees_list is None:
```
is vacuous because `list(foo)` should never return `None`. Also, it seems wasteful to convert it to a list. Why not just use the `ETuple` directly with

```python
exps[i] = int((<ETuple>degrees).get_exp(i))
```

Also, we want to move away from the old-style Cython declarations

```diff
-for i from 0<=i<gens:
+for i in range(gens):
```



---

archive/issue_comments_528703.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-03-08T06:59:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27421#issuecomment-528703",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_528704.json:
```json
{
    "body": "Changing commit from \"a406d1ec194bac92656be1c450234b4bf2a20b92\" to \"5c5fe615439bc6dbb8f45250dace2074224e1681\"",
    "created_at": "2019-03-08T06:59:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27421#issuecomment-528704",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a406d1ec194bac92656be1c450234b4bf2a20b92" to "5c5fe615439bc6dbb8f45250dace2074224e1681"



---

archive/issue_comments_528705.json:
```json
{
    "body": "<a id='comment:6'></a>Last two little things:\n\n1 - You should test `f.coefficient(x.exponents()[0])` to show that the output matches the above (i.e., it is an equivalent input).\n2 - Your line `exps[i] = int((<ETuple>degrees).get_exp(i))` is over-indented.\n\nThanks.",
    "created_at": "2019-03-11T04:04:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27421#issuecomment-528705",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:6'></a>Last two little things:

1 - You should test `f.coefficient(x.exponents()[0])` to show that the output matches the above (i.e., it is an equivalent input).
2 - Your line `exps[i] = int((<ETuple>degrees).get_exp(i))` is over-indented.

Thanks.



---

archive/issue_comments_528706.json:
```json
{
    "body": "Changing commit from \"5c5fe615439bc6dbb8f45250dace2074224e1681\" to \"db2f0458b3e6b96b6d8ce032bb1d106256657dc4\"",
    "created_at": "2019-03-11T19:30:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27421#issuecomment-528706",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5c5fe615439bc6dbb8f45250dace2074224e1681" to "db2f0458b3e6b96b6d8ce032bb1d106256657dc4"



---

archive/issue_comments_528707.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-03-11T19:30:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27421#issuecomment-528707",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_528708.json:
```json
{
    "body": "<a id='comment:8'></a>No, that is not what I wanted for the test. I was looking for this change\n\n```diff\n-            sage: x.coefficient(x.exponents()[0])\n-            1\n+            sage: f.coefficient(x.exponents()[0])\n+            y^2 + y + 1\n```",
    "created_at": "2019-03-11T22:10:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27421#issuecomment-528708",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>No, that is not what I wanted for the test. I was looking for this change

```diff
-            sage: x.coefficient(x.exponents()[0])
-            1
+            sage: f.coefficient(x.exponents()[0])
+            y^2 + y + 1
```



---

archive/issue_comments_528709.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [comment:8 tscrim]:\n> No, that is not what I wanted for the test. I was looking for this change\n> \n> ```diff\n> -            sage: x.coefficient(x.exponents()[0])\n> -            1\n> +            sage: f.coefficient(x.exponents()[0])\n> +            y^2 + y + 1\n> ```\n\n\nBut that is not how `exponents()` works. In the Multivariate Polynomial Ring in x, y over Rational Field `R.<x,y> = QQ[]` x has exponent (1,0) so `x.exponents()` returns `[(1, 0)]` and so `f.coefficient(x.exponents()[0])` returns `1`.\n\nI don't think changing the behavior of `exponents()` is the right course of action, So can you please explain further the desired behaviour of the `coefficient()` in this case.",
    "created_at": "2019-03-12T09:29:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27421#issuecomment-528709",
    "user": "https://github.com/ChamanAgrawal"
}
```

<a id='comment:9'></a>Replying to [comment:8 tscrim]:
> No, that is not what I wanted for the test. I was looking for this change
> 
> ```diff
> -            sage: x.coefficient(x.exponents()[0])
> -            1
> +            sage: f.coefficient(x.exponents()[0])
> +            y^2 + y + 1
> ```


But that is not how `exponents()` works. In the Multivariate Polynomial Ring in x, y over Rational Field `R.<x,y> = QQ[]` x has exponent (1,0) so `x.exponents()` returns `[(1, 0)]` and so `f.coefficient(x.exponents()[0])` returns `1`.

I don't think changing the behavior of `exponents()` is the right course of action, So can you please explain further the desired behaviour of the `coefficient()` in this case.



---

archive/issue_comments_528710.json:
```json
{
    "body": "<a id='comment:10'></a>Ah, right, it has the `y` value explicitly set. Okay, then let's change the second part of your test to make it more clear what is going on, with a bit more explanation:\n\n```\n            sage: f.coefficient(x)\n            y^2 + y + 1\n\n        Note that exponents have all variables specified::\n\n            sage: x.coefficient(x.exponents()[0])\n            1\n            sage: f.coefficient([1,0])\n            1\n            sage: f.coefficient({x:1,y:0})\n            1\n```",
    "created_at": "2019-03-13T01:43:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27421#issuecomment-528710",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'></a>Ah, right, it has the `y` value explicitly set. Okay, then let's change the second part of your test to make it more clear what is going on, with a bit more explanation:

```
            sage: f.coefficient(x)
            y^2 + y + 1

        Note that exponents have all variables specified::

            sage: x.coefficient(x.exponents()[0])
            1
            sage: f.coefficient([1,0])
            1
            sage: f.coefficient({x:1,y:0})
            1
```



---

archive/issue_comments_528711.json:
```json
{
    "body": "Changing commit from \"db2f0458b3e6b96b6d8ce032bb1d106256657dc4\" to \"f5e3eb47b1f08fafcc9578327eab74c84be8491c\"",
    "created_at": "2019-03-13T15:11:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27421#issuecomment-528711",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "db2f0458b3e6b96b6d8ce032bb1d106256657dc4" to "f5e3eb47b1f08fafcc9578327eab74c84be8491c"



---

archive/issue_comments_528712.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-03-13T15:11:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27421#issuecomment-528712",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_528713.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-03-13T22:30:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27421#issuecomment-528713",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_528714.json:
```json
{
    "body": "<a id='comment:12'></a>Thanks. LGTM.",
    "created_at": "2019-03-13T22:30:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27421#issuecomment-528714",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:12'></a>Thanks. LGTM.



---

archive/issue_comments_528715.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2019-03-13T22:30:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27421#issuecomment-528715",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_events_068103.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-03-15T08:09:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27421",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27421#event-68103"
}
```



---

archive/issue_comments_528716.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-03-15T08:09:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27421#issuecomment-528716",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_528717.json:
```json
{
    "body": "Changing branch from \"u/gh-ChamanAgrawal/27421_coefficient\" to \"f5e3eb47b1f08fafcc9578327eab74c84be8491c\"",
    "created_at": "2019-03-15T08:09:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27421#issuecomment-528717",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/gh-ChamanAgrawal/27421_coefficient" to "f5e3eb47b1f08fafcc9578327eab74c84be8491c"
