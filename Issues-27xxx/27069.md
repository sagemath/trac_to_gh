# Issue 27069: Inconsistent behavior with generator ordering in free Lie algebras

archive/issues_026832.json:
```json
{
    "body": "This is an issue discovered due to #27018. Giving a free Lie algebra a set of generators that are not in lexicographic order causes `graded_basis` to output elements which are not recognized as basis elements of the Lie algebra due to different ordering behavior.\n\n```\nsage: Lxyz = LieAlgebra(QQ, ['x','y','z']).Lyndon()\nsage: Lzxy = LieAlgebra(QQ, ['z','x','y']).Lyndon()\nsage: Lxyz.graded_basis(2)\n([x, y], [x, z], [y, z])\nsage: Lzxy.graded_basis(2)\n([z, x], [z, y], [x, y])\nsage: x,y,z = Lxyz.gens()\nsage: a,b,c = Lzxy.gens()\nsage: a,b,c\n(z, x, y)\nsage: b.bracket(a)\n[x, z]\nsage: x.bracket(z)\n[x, z]\nsage: Lzxy._is_basis_element(b.leading_support(),a.leading_support())\nTrue\nsage: Lzxy._is_basis_element(a.leading_support(),b.leading_support())\nFalse\n```\nTrying to compute brackets with these elements leads to unhelpful tracebacks, e.g.\n\n```\nsage: Lzxy[Lzxy.graded_basis(2)[0],Lzxy.graded_basis(1)[0]]\nTraceback (most recent call last)\n...\nAttributeError: 'sage.algebras.lie_algebras.lie_algebra_element.Lie' object has no attribute '_right'\n```\n\nKeywords: Lie algebras\n\nBranch/Commit: [a3f59d3784c3a68a17f7d1beafe1527a4ae09770](https://github.com/sagemath/sagetrac-mirror/commit/a3f59d3784c3a68a17f7d1beafe1527a4ae09770)\n\nReviewer: Travis Scrimshaw, Eero Hakavuori\n\nAuthor: Eero Hakavuori, Travis Scrimshaw\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/27069\n\n",
    "closed_at": "2019-02-04T23:02:25Z",
    "created_at": "2019-01-16T20:34:22Z",
    "labels": [
        "component: algebra",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.7",
    "title": "Inconsistent behavior with generator ordering in free Lie algebras",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27069",
    "user": "https://github.com/ehaka"
}
```
This is an issue discovered due to #27018. Giving a free Lie algebra a set of generators that are not in lexicographic order causes `graded_basis` to output elements which are not recognized as basis elements of the Lie algebra due to different ordering behavior.

```
sage: Lxyz = LieAlgebra(QQ, ['x','y','z']).Lyndon()
sage: Lzxy = LieAlgebra(QQ, ['z','x','y']).Lyndon()
sage: Lxyz.graded_basis(2)
([x, y], [x, z], [y, z])
sage: Lzxy.graded_basis(2)
([z, x], [z, y], [x, y])
sage: x,y,z = Lxyz.gens()
sage: a,b,c = Lzxy.gens()
sage: a,b,c
(z, x, y)
sage: b.bracket(a)
[x, z]
sage: x.bracket(z)
[x, z]
sage: Lzxy._is_basis_element(b.leading_support(),a.leading_support())
True
sage: Lzxy._is_basis_element(a.leading_support(),b.leading_support())
False
```
Trying to compute brackets with these elements leads to unhelpful tracebacks, e.g.

```
sage: Lzxy[Lzxy.graded_basis(2)[0],Lzxy.graded_basis(1)[0]]
Traceback (most recent call last)
...
AttributeError: 'sage.algebras.lie_algebras.lie_algebra_element.Lie' object has no attribute '_right'
```

Keywords: Lie algebras

Branch/Commit: [a3f59d3784c3a68a17f7d1beafe1527a4ae09770](https://github.com/sagemath/sagetrac-mirror/commit/a3f59d3784c3a68a17f7d1beafe1527a4ae09770)

Reviewer: Travis Scrimshaw, Eero Hakavuori

Author: Eero Hakavuori, Travis Scrimshaw

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/27069





---

archive/issue_comments_522278.json:
```json
{
    "body": "Changing commit from \"4e27c06abf6bfc538f3a21394f2ce86dd4fc26b3\" to \"45b45064ba42c5def60ec4e5f926a06e82306549\"",
    "created_at": "2019-01-25T18:54:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27069#issuecomment-522278",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4e27c06abf6bfc538f3a21394f2ce86dd4fc26b3" to "45b45064ba42c5def60ec4e5f926a06e82306549"



---

archive/issue_comments_522279.json:
```json
{
    "body": "<a id='comment:1'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------|\n|[af8cac3](https://github.com/sagemath/sagetrac-mirror/commit/af8cac30b28e0f1e70eddb5ab6b5b1c6c13f5eae)|`Merge branch 'public/lie_elem_indexing-27018' of git://trac.sagemath.org/sage into public/lie_elem_indexing-27018`|\n|[45b4506](https://github.com/sagemath/sagetrac-mirror/commit/45b45064ba42c5def60ec4e5f926a06e82306549)|`Using the word given by elements \\NN to generate the free Lie algebra basis elements.`|",
    "created_at": "2019-01-25T18:54:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27069#issuecomment-522279",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:1'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------|
|[af8cac3](https://github.com/sagemath/sagetrac-mirror/commit/af8cac30b28e0f1e70eddb5ab6b5b1c6c13f5eae)|`Merge branch 'public/lie_elem_indexing-27018' of git://trac.sagemath.org/sage into public/lie_elem_indexing-27018`|
|[45b4506](https://github.com/sagemath/sagetrac-mirror/commit/45b45064ba42c5def60ec4e5f926a06e82306549)|`Using the word given by elements \NN to generate the free Lie algebra basis elements.`|



---

archive/issue_comments_522280.json:
```json
{
    "body": "Changing author from \"\" to \"Eero Hakavuori, Travis Scrimshaw\"",
    "created_at": "2019-01-25T18:55:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27069#issuecomment-522280",
    "user": "https://github.com/tscrim"
}
```

Changing author from "" to "Eero Hakavuori, Travis Scrimshaw"



---

archive/issue_events_076285.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2019-01-25T18:55:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27069",
    "milestone": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27069#event-76285"
}
```



---

archive/issue_comments_522281.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw, Eero Hakavuori\"",
    "created_at": "2019-01-25T18:55:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27069#issuecomment-522281",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw, Eero Hakavuori"



---

archive/issue_comments_522282.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-01-25T18:55:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27069#issuecomment-522282",
    "user": "https://github.com/tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_522283.json:
```json
{
    "body": "<a id='comment:2'></a>\nOkay, this should fix it, as well as #27018.",
    "created_at": "2019-01-25T18:55:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27069#issuecomment-522283",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:2'></a>
Okay, this should fix it, as well as #27018.



---

archive/issue_comments_522284.json:
```json
{
    "body": "Changing commit from \"45b45064ba42c5def60ec4e5f926a06e82306549\" to \"a3f59d3784c3a68a17f7d1beafe1527a4ae09770\"",
    "created_at": "2019-01-28T04:57:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27069#issuecomment-522284",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "45b45064ba42c5def60ec4e5f926a06e82306549" to "a3f59d3784c3a68a17f7d1beafe1527a4ae09770"



---

archive/issue_comments_522285.json:
```json
{
    "body": "<a id='comment:3'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|\n|[a3f59d3](https://github.com/sagemath/sagetrac-mirror/commit/a3f59d3784c3a68a17f7d1beafe1527a4ae09770)|`Small tweak to the documentation.`|",
    "created_at": "2019-01-28T04:57:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27069#issuecomment-522285",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|
|[a3f59d3](https://github.com/sagemath/sagetrac-mirror/commit/a3f59d3784c3a68a17f7d1beafe1527a4ae09770)|`Small tweak to the documentation.`|



---

archive/issue_comments_522286.json:
```json
{
    "body": "<a id='comment:4'></a>\nEverything seems to be working as it should now, thanks for the fix!",
    "created_at": "2019-01-28T05:15:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27069#issuecomment-522286",
    "user": "https://github.com/ehaka"
}
```

<a id='comment:4'></a>
Everything seems to be working as it should now, thanks for the fix!



---

archive/issue_comments_522287.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-01-28T05:15:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27069#issuecomment-522287",
    "user": "https://github.com/ehaka"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_522288.json:
```json
{
    "body": "Changing branch from \"public/lie_elem_indexing-27018\" to \"a3f59d3784c3a68a17f7d1beafe1527a4ae09770\"",
    "created_at": "2019-02-04T23:02:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27069#issuecomment-522288",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/lie_elem_indexing-27018" to "a3f59d3784c3a68a17f7d1beafe1527a4ae09770"



---

archive/issue_events_076286.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-02-04T23:02:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27069",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27069#event-76286"
}
```



---

archive/issue_comments_522289.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-02-04T23:02:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27069#issuecomment-522289",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
