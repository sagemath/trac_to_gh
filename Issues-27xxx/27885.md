# Issue 27885: Py3: symbolic/expression.pyx fix some errors

archive/issues_027648.json:
```json
{
    "body": "- Fix the errors `AttributeError: 'sage.symbolic.expression.Expression' object has no attribute '__nonzero__'` appearing in python3. \n`'__nonzero__'` is renamed into `'__bool__'` in python3.\n\n- Use #py2 #py3 tag to manage the difference of messages for `TypeError` when an object is not subscriptable.\n\n- Fix the following doctest:\n\n```\nsage: Set([-x + y < 0, x - y < 0])\n{-x + y < 0, x - y < 0}\n```\nThe later used to randomly fail because the output order was not constant with python3.\n\n\nBranch/Commit: 7658b8ee363c2c4b619310cb90efa4b149c0c711\n\nReviewer: Fr\u00e9d\u00e9ric Chapoton\n\nAuthor: Vincent Klein\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/27885\n\n",
    "closed_at": "2019-06-02T22:04:26Z",
    "created_at": "2019-05-28T13:45:14Z",
    "labels": [
        "component: python3"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.8",
    "title": "Py3: symbolic/expression.pyx fix some errors",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27885",
    "user": "https://github.com/vinklein"
}
```
- Fix the errors `AttributeError: 'sage.symbolic.expression.Expression' object has no attribute '__nonzero__'` appearing in python3. 
`'__nonzero__'` is renamed into `'__bool__'` in python3.

- Use #py2 #py3 tag to manage the difference of messages for `TypeError` when an object is not subscriptable.

- Fix the following doctest:

```
sage: Set([-x + y < 0, x - y < 0])
{-x + y < 0, x - y < 0}
```
The later used to randomly fail because the output order was not constant with python3.


Branch/Commit: 7658b8ee363c2c4b619310cb90efa4b149c0c711

Reviewer: Frédéric Chapoton

Author: Vincent Klein

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/27885





---

archive/issue_comments_389972.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-05-28T13:57:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27885#issuecomment-389972",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_389973.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-05-28T14:16:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27885#issuecomment-389973",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_389974.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-28T14:43:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27885#issuecomment-389974",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_389975.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-05-28T14:44:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27885#issuecomment-389975",
    "user": "https://github.com/vinklein"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_389976.json:
```json
{
    "body": "<a id='comment:8'></a>ok, thx",
    "created_at": "2019-05-28T19:17:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27885#issuecomment-389976",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:8'></a>ok, thx



---

archive/issue_comments_389977.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-05-28T19:17:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27885#issuecomment-389977",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_389978.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-06-02T22:04:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27885#issuecomment-389978",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_069136.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-06-02T22:04:26Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27885",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27885#event-69136"
}
```
