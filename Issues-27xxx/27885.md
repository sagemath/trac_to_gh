# Issue 27885: Py3: symbolic/expression.pyx fix some errors

archive/issues_027648.json:
```json
{
    "assignees": [],
    "body": "- Fix the errors `AttributeError: 'sage.symbolic.expression.Expression' object has no attribute '__nonzero__'` appearing in python3. \n`'__nonzero__'` is renamed into `'__bool__'` in python3.\n\n- Use #py2 #py3 tag to manage the difference of messages for `TypeError` when an object is not subscriptable.\n\n- Fix the following doctest:\n\n```\nsage: Set([-x + y < 0, x - y < 0])\n{-x + y < 0, x - y < 0}\n```\nThe later used to randomly fail because the output order was not constant with python3.\n\n\nBranch/Commit: **[7658b8e](https://github.com/sagemath/sagetrac-mirror/commit/7658b8ee363c2c4b619310cb90efa4b149c0c711)**\n\nReviewer: **Fr\u00e9d\u00e9ric Chapoton**\n\nAuthor: **Vincent Klein**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/27885_\n\n",
    "closed_at": "2019-06-02T22:04:26Z",
    "created_at": "2019-05-28T13:45:14Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20python3",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Py3: symbolic/expression.pyx fix some errors",
    "type": "issue",
    "updated_at": "2019-06-02T22:04:26Z",
    "url": "https://github.com/sagemath/sage/issues/27885",
    "user": "https://github.com/vinklein"
}
```
- Fix the errors `AttributeError: 'sage.symbolic.expression.Expression' object has no attribute '__nonzero__'` appearing in python3. 
`'__nonzero__'` is renamed into `'__bool__'` in python3.

- Use #py2 #py3 tag to manage the difference of messages for `TypeError` when an object is not subscriptable.

- Fix the following doctest:

```
sage: Set([-x + y < 0, x - y < 0])
{-x + y < 0, x - y < 0}
```
The later used to randomly fail because the output order was not constant with python3.


Branch/Commit: **[7658b8e](https://github.com/sagemath/sagetrac-mirror/commit/7658b8ee363c2c4b619310cb90efa4b149c0c711)**

Reviewer: **Frédéric Chapoton**

Author: **Vincent Klein**

_Issue created by migration from https://trac.sagemath.org/ticket/27885_





---

archive/issue_events_364265.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2019-05-28T13:45:14Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27885",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27885#event-364265"
}
```



---

archive/issue_events_364266.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2019-05-28T13:45:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27885",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20python3",
    "label_color": "000080",
    "label_name": "component: python3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27885#event-364266"
}
```



---

archive/issue_events_364267.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2019-05-28T13:45:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27885",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27885#event-364267"
}
```



---

archive/issue_events_364268.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2019-05-28T13:45:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27885",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27885#event-364268"
}
```



---

archive/issue_comments_436239.json:
```json
{
    "body": "Branch: **[u/vklein/27885](https://github.com/sagemath/sagetrac-mirror/tree/u/vklein/27885)**",
    "created_at": "2019-05-28T13:50:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27885#issuecomment-436239",
    "user": "https://github.com/vinklein"
}
```

Branch: **[u/vklein/27885](https://github.com/sagemath/sagetrac-mirror/tree/u/vklein/27885)**



---

archive/issue_comments_436240.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7cf1dab075cf06a166eb127b2aa58fef3b48ff5d\">7cf1dab</a></td><td><code>Trac #27885: expression.pyx fix `__nonzero__` ...</code></td></tr></table>\n",
    "created_at": "2019-05-28T13:57:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27885#issuecomment-436240",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2" align="right">Comment 2</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7cf1dab075cf06a166eb127b2aa58fef3b48ff5d">7cf1dab</a></td><td><code>Trac #27885: expression.pyx fix `__nonzero__` ...</code></td></tr></table>




---

archive/issue_comments_436241.json:
```json
{
    "body": "Commit: **[7cf1dab](https://github.com/sagemath/sagetrac-mirror/commit/7cf1dab075cf06a166eb127b2aa58fef3b48ff5d)**",
    "created_at": "2019-05-28T13:57:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27885#issuecomment-436241",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[7cf1dab](https://github.com/sagemath/sagetrac-mirror/commit/7cf1dab075cf06a166eb127b2aa58fef3b48ff5d)**



---

archive/issue_comments_436242.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,6 @@\n - Fix the errors\n `AttributeError: 'sage.symbolic.expression.Expression' object has no attribute '__nonzero__'` appearing in python3. \n `'__nonzero__'` is renamed into `'__bool__'` in python3.\n-The directs calls in the `EXAMPLES` have been moved into the `TESTS` and replaced by calls of the bool function as it is the correct way to call these special methods.\n \n - Use #py2 #py3 tag to manage the difference of messages for `TypeError` when an object is not subscriptable.\n \n``````\n",
    "created_at": "2019-05-28T13:58:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27885#issuecomment-436242",
    "user": "https://github.com/vinklein"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,6 @@
 - Fix the errors
 `AttributeError: 'sage.symbolic.expression.Expression' object has no attribute '__nonzero__'` appearing in python3. 
 `'__nonzero__'` is renamed into `'__bool__'` in python3.
-The directs calls in the `EXAMPLES` have been moved into the `TESTS` and replaced by calls of the bool function as it is the correct way to call these special methods.
 
 - Use #py2 #py3 tag to manage the difference of messages for `TypeError` when an object is not subscriptable.
 
``````




---

archive/issue_comments_436243.json:
```json
{
    "body": "Changed commit from **[7cf1dab](https://github.com/sagemath/sagetrac-mirror/commit/7cf1dab075cf06a166eb127b2aa58fef3b48ff5d)** to **[2a2f195](https://github.com/sagemath/sagetrac-mirror/commit/2a2f195eda640a8a576d20f22de2ae35452e35f3)**",
    "created_at": "2019-05-28T14:16:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27885#issuecomment-436243",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7cf1dab](https://github.com/sagemath/sagetrac-mirror/commit/7cf1dab075cf06a166eb127b2aa58fef3b48ff5d)** to **[2a2f195](https://github.com/sagemath/sagetrac-mirror/commit/2a2f195eda640a8a576d20f22de2ae35452e35f3)**



---

archive/issue_comments_436244.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2a2f195eda640a8a576d20f22de2ae35452e35f3\">2a2f195</a></td><td><code>Trac #27885: expression.pyx fix `__nonzero__` ...</code></td></tr></table>\n",
    "created_at": "2019-05-28T14:16:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27885#issuecomment-436244",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4" align="right">Comment 4</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2a2f195eda640a8a576d20f22de2ae35452e35f3">2a2f195</a></td><td><code>Trac #27885: expression.pyx fix `__nonzero__` ...</code></td></tr></table>




---

archive/issue_comments_436245.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,13 @@\n-- Fix the errors\n-`AttributeError: 'sage.symbolic.expression.Expression' object has no attribute '__nonzero__'` appearing in python3. \n+- Fix the errors `AttributeError: 'sage.symbolic.expression.Expression' object has no attribute '__nonzero__'` appearing in python3. \n `'__nonzero__'` is renamed into `'__bool__'` in python3.\n \n - Use #py2 #py3 tag to manage the difference of messages for `TypeError` when an object is not subscriptable.\n \n+- Fix the following doctest:\n+\n+```\n+sage: Set([-x + y < 0, x - y < 0])\n+{-x + y < 0, x - y < 0}\n+```\n+The later used to randomly fail because the output order was not constant with python3.\n+\n``````\n",
    "created_at": "2019-05-28T14:43:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27885#issuecomment-436245",
    "user": "https://github.com/vinklein"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,13 @@
-- Fix the errors
-`AttributeError: 'sage.symbolic.expression.Expression' object has no attribute '__nonzero__'` appearing in python3. 
+- Fix the errors `AttributeError: 'sage.symbolic.expression.Expression' object has no attribute '__nonzero__'` appearing in python3. 
 `'__nonzero__'` is renamed into `'__bool__'` in python3.
 
 - Use #py2 #py3 tag to manage the difference of messages for `TypeError` when an object is not subscriptable.
 
+- Fix the following doctest:
+
+```
+sage: Set([-x + y < 0, x - y < 0])
+{-x + y < 0, x - y < 0}
+```
+The later used to randomly fail because the output order was not constant with python3.
+
``````




---

archive/issue_comments_436246.json:
```json
{
    "body": "Changed commit from **[2a2f195](https://github.com/sagemath/sagetrac-mirror/commit/2a2f195eda640a8a576d20f22de2ae35452e35f3)** to **[7658b8e](https://github.com/sagemath/sagetrac-mirror/commit/7658b8ee363c2c4b619310cb90efa4b149c0c711)**",
    "created_at": "2019-05-28T14:43:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27885#issuecomment-436246",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2a2f195](https://github.com/sagemath/sagetrac-mirror/commit/2a2f195eda640a8a576d20f22de2ae35452e35f3)** to **[7658b8e](https://github.com/sagemath/sagetrac-mirror/commit/7658b8ee363c2c4b619310cb90efa4b149c0c711)**



---

archive/issue_comments_436247.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7658b8ee363c2c4b619310cb90efa4b149c0c711\">7658b8e</a></td><td><code>Trac #27885: expression.pyx ...</code></td></tr></table>\n",
    "created_at": "2019-05-28T14:43:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27885#issuecomment-436247",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6" align="right">Comment 6</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7658b8ee363c2c4b619310cb90efa4b149c0c711">7658b8e</a></td><td><code>Trac #27885: expression.pyx ...</code></td></tr></table>




---

archive/issue_events_364269.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2019-05-28T14:44:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27885",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27885#event-364269"
}
```



---

archive/issue_comments_436248.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nok, thx",
    "created_at": "2019-05-28T19:17:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27885#issuecomment-436248",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:8" align="right">Comment 8</div>

ok, thx



---

archive/issue_events_364270.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-05-28T19:17:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27885",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27885#event-364270"
}
```



---

archive/issue_events_364271.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-05-28T19:17:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27885",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27885#event-364271"
}
```



---

archive/issue_comments_436249.json:
```json
{
    "body": "Reviewer: **Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2019-05-28T19:17:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27885#issuecomment-436249",
    "user": "https://github.com/fchapoton"
}
```

Reviewer: **Frédéric Chapoton**



---

archive/issue_events_364272.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-06-02T22:04:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27885",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27885#event-364272"
}
```



---

archive/issue_events_364273.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "acb869caddfd36922e72c3da660724b95790e04e",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-06-02T22:04:26Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27885",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27885#event-364273"
}
```



---

archive/issue_comments_436250.json:
```json
{
    "body": "Changed branch from **[u/vklein/27885](https://github.com/sagemath/sagetrac-mirror/tree/u/vklein/27885)** to **[7658b8e](https://github.com/sagemath/sagetrac-mirror/commit/7658b8ee363c2c4b619310cb90efa4b149c0c711)**",
    "created_at": "2019-06-02T22:04:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27885#issuecomment-436250",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/vklein/27885](https://github.com/sagemath/sagetrac-mirror/tree/u/vklein/27885)** to **[7658b8e](https://github.com/sagemath/sagetrac-mirror/commit/7658b8ee363c2c4b619310cb90efa4b149c0c711)**
