# Issue 27885: Py3: symbolic/expression.pyx fix some errors

archive/issues_027648.json:
```json
{
    "body": "- Fix the errors `AttributeError: 'sage.symbolic.expression.Expression' object has no attribute '__nonzero__'` appearing in python3. \n`'__nonzero__'` is renamed into `'__bool__'` in python3.\n\n- Use #py2 #py3 tag to manage the difference of messages for `TypeError` when an object is not subscriptable.\n\n- Fix the following doctest:\n\n```\nsage: Set([-x + y < 0, x - y < 0])\n{-x + y < 0, x - y < 0}\n```\nThe later used to randomly fail because the output order was not constant with python3.\n\n\nBranch/Commit: 7658b8ee363c2c4b619310cb90efa4b149c0c711\n\nReviewer: Fr\u00e9d\u00e9ric Chapoton\n\nAuthor: Vincent Klein\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/27885\n\n",
    "closed_at": "2019-06-02T22:04:26Z",
    "created_at": "2019-05-28T13:45:14Z",
    "labels": [
        "component: python3"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.8",
    "title": "Py3: symbolic/expression.pyx fix some errors",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27885",
    "user": "https://github.com/vinklein"
}
```
- Fix the errors `AttributeError: 'sage.symbolic.expression.Expression' object has no attribute '__nonzero__'` appearing in python3. 
`'__nonzero__'` is renamed into `'__bool__'` in python3.

- Use #py2 #py3 tag to manage the difference of messages for `TypeError` when an object is not subscriptable.

- Fix the following doctest:

```
sage: Set([-x + y < 0, x - y < 0])
{-x + y < 0, x - y < 0}
```
The later used to randomly fail because the output order was not constant with python3.


Branch/Commit: 7658b8ee363c2c4b619310cb90efa4b149c0c711

Reviewer: Frédéric Chapoton

Author: Vincent Klein

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/27885





---

archive/issue_comments_539614.json:
```json
{
    "body": "Changing branch from \"\" to \"u/vklein/27885\"",
    "created_at": "2019-05-28T13:50:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27885#issuecomment-539614",
    "user": "https://github.com/vinklein"
}
```

Changing branch from "" to "u/vklein/27885"



---

archive/issue_comments_539615.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-05-28T13:57:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27885#issuecomment-539615",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_539616.json:
```json
{
    "body": "Changing commit from \"\" to \"7cf1dab075cf06a166eb127b2aa58fef3b48ff5d\"",
    "created_at": "2019-05-28T13:57:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27885#issuecomment-539616",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "7cf1dab075cf06a166eb127b2aa58fef3b48ff5d"



---

archive/issue_comments_539617.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,6 @@\n - Fix the errors\n `AttributeError: 'sage.symbolic.expression.Expression' object has no attribute '__nonzero__'` appearing in python3. \n `'__nonzero__'` is renamed into `'__bool__'` in python3.\n-The directs calls in the `EXAMPLES` have been moved into the `TESTS` and replaced by calls of the bool function as it is the correct way to call these special methods.\n \n - Use #py2 #py3 tag to manage the difference of messages for `TypeError` when an object is not subscriptable.\n \n``````\n",
    "created_at": "2019-05-28T13:58:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27885#issuecomment-539617",
    "user": "https://github.com/vinklein"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,6 @@
 - Fix the errors
 `AttributeError: 'sage.symbolic.expression.Expression' object has no attribute '__nonzero__'` appearing in python3. 
 `'__nonzero__'` is renamed into `'__bool__'` in python3.
-The directs calls in the `EXAMPLES` have been moved into the `TESTS` and replaced by calls of the bool function as it is the correct way to call these special methods.
 
 - Use #py2 #py3 tag to manage the difference of messages for `TypeError` when an object is not subscriptable.
 
``````




---

archive/issue_comments_539618.json:
```json
{
    "body": "Changing commit from \"7cf1dab075cf06a166eb127b2aa58fef3b48ff5d\" to \"2a2f195eda640a8a576d20f22de2ae35452e35f3\"",
    "created_at": "2019-05-28T14:16:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27885#issuecomment-539618",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7cf1dab075cf06a166eb127b2aa58fef3b48ff5d" to "2a2f195eda640a8a576d20f22de2ae35452e35f3"



---

archive/issue_comments_539619.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-05-28T14:16:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27885#issuecomment-539619",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_539620.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,13 @@\n-- Fix the errors\n-`AttributeError: 'sage.symbolic.expression.Expression' object has no attribute '__nonzero__'` appearing in python3. \n+- Fix the errors `AttributeError: 'sage.symbolic.expression.Expression' object has no attribute '__nonzero__'` appearing in python3. \n `'__nonzero__'` is renamed into `'__bool__'` in python3.\n \n - Use #py2 #py3 tag to manage the difference of messages for `TypeError` when an object is not subscriptable.\n \n+- Fix the following doctest:\n+\n+```\n+sage: Set([-x + y < 0, x - y < 0])\n+{-x + y < 0, x - y < 0}\n+```\n+The later used to randomly fail because the output order was not constant with python3.\n+\n``````\n",
    "created_at": "2019-05-28T14:43:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27885#issuecomment-539620",
    "user": "https://github.com/vinklein"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,13 @@
-- Fix the errors
-`AttributeError: 'sage.symbolic.expression.Expression' object has no attribute '__nonzero__'` appearing in python3. 
+- Fix the errors `AttributeError: 'sage.symbolic.expression.Expression' object has no attribute '__nonzero__'` appearing in python3. 
 `'__nonzero__'` is renamed into `'__bool__'` in python3.
 
 - Use #py2 #py3 tag to manage the difference of messages for `TypeError` when an object is not subscriptable.
 
+- Fix the following doctest:
+
+```
+sage: Set([-x + y < 0, x - y < 0])
+{-x + y < 0, x - y < 0}
+```
+The later used to randomly fail because the output order was not constant with python3.
+
``````




---

archive/issue_comments_539621.json:
```json
{
    "body": "Changing commit from \"2a2f195eda640a8a576d20f22de2ae35452e35f3\" to \"7658b8ee363c2c4b619310cb90efa4b149c0c711\"",
    "created_at": "2019-05-28T14:43:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27885#issuecomment-539621",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2a2f195eda640a8a576d20f22de2ae35452e35f3" to "7658b8ee363c2c4b619310cb90efa4b149c0c711"



---

archive/issue_comments_539622.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-28T14:43:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27885#issuecomment-539622",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_539623.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-05-28T14:44:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27885#issuecomment-539623",
    "user": "https://github.com/vinklein"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_539624.json:
```json
{
    "body": "<a id='comment:8'></a>ok, thx",
    "created_at": "2019-05-28T19:17:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27885#issuecomment-539624",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:8'></a>ok, thx



---

archive/issue_comments_539625.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-05-28T19:17:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27885#issuecomment-539625",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_539626.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Fr\u00e9d\u00e9ric Chapoton\"",
    "created_at": "2019-05-28T19:17:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27885#issuecomment-539626",
    "user": "https://github.com/fchapoton"
}
```

Changing reviewer from "" to "Frédéric Chapoton"



---

archive/issue_comments_539627.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-06-02T22:04:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27885#issuecomment-539627",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_069136.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-06-02T22:04:26Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27885",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27885#event-69136"
}
```



---

archive/issue_comments_539628.json:
```json
{
    "body": "Changing branch from \"u/vklein/27885\" to \"7658b8ee363c2c4b619310cb90efa4b149c0c711\"",
    "created_at": "2019-06-02T22:04:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27885#issuecomment-539628",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/vklein/27885" to "7658b8ee363c2c4b619310cb90efa4b149c0c711"
