# Issue 27885: Py3: symbolic/expression.pyx fix some errors

archive/issues_027648.json:
```json
{
    "body": "- Fix the errors `AttributeError: 'sage.symbolic.expression.Expression' object has no attribute '__nonzero__'` appearing in python3. \n`'__nonzero__'` is renamed into `'__bool__'` in python3.\n\n- Use #py2 #py3 tag to manage the difference of messages for `TypeError` when an object is not subscriptable.\n\n- Fix the following doctest:\n\n```\nsage: Set([-x + y < 0, x - y < 0])\n{-x + y < 0, x - y < 0}\n```\nThe later used to randomly fail because the output order was not constant with python3.\n\n\n**Branch/Commit:** [7658b8ee363c2c4b619310cb90efa4b149c0c711](https://github.com/sagemath/sagetrac-mirror/commit/7658b8ee363c2c4b619310cb90efa4b149c0c711)\n\n**Reviewer:** Fr\u00e9d\u00e9ric Chapoton\n\n**Author:** Vincent Klein\n\nIssue created by migration from https://trac.sagemath.org/ticket/27885\n\n",
    "closed_at": "2019-06-02T22:04:26Z",
    "created_at": "2019-05-28T13:45:14Z",
    "labels": [
        "component: python3",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.8",
    "title": "Py3: symbolic/expression.pyx fix some errors",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/27885",
    "user": "https://github.com/vinklein"
}
```
- Fix the errors `AttributeError: 'sage.symbolic.expression.Expression' object has no attribute '__nonzero__'` appearing in python3. 
`'__nonzero__'` is renamed into `'__bool__'` in python3.

- Use #py2 #py3 tag to manage the difference of messages for `TypeError` when an object is not subscriptable.

- Fix the following doctest:

```
sage: Set([-x + y < 0, x - y < 0])
{-x + y < 0, x - y < 0}
```
The later used to randomly fail because the output order was not constant with python3.


**Branch/Commit:** [7658b8ee363c2c4b619310cb90efa4b149c0c711](https://github.com/sagemath/sagetrac-mirror/commit/7658b8ee363c2c4b619310cb90efa4b149c0c711)

**Reviewer:** Frédéric Chapoton

**Author:** Vincent Klein

Issue created by migration from https://trac.sagemath.org/ticket/27885





---

archive/issue_comments_436032.json:
```json
{
    "body": "**Branch:** [u/vklein/27885](https://github.com/sagemath/sagetrac-mirror/tree/u/vklein/27885)",
    "created_at": "2019-05-28T13:50:36Z",
    "issue": "https://github.com/sagemath/sage/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27885#issuecomment-436032",
    "user": "https://github.com/vinklein"
}
```

**Branch:** [u/vklein/27885](https://github.com/sagemath/sagetrac-mirror/tree/u/vklein/27885)



---

archive/issue_comments_436033.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7cf1dab075cf06a166eb127b2aa58fef3b48ff5d\">7cf1dab</a></td><td><code>Trac #27885: expression.pyx fix `__nonzero__` ...</code></td></tr></table>\n",
    "created_at": "2019-05-28T13:57:50Z",
    "issue": "https://github.com/sagemath/sage/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27885#issuecomment-436033",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7cf1dab075cf06a166eb127b2aa58fef3b48ff5d">7cf1dab</a></td><td><code>Trac #27885: expression.pyx fix `__nonzero__` ...</code></td></tr></table>




---

archive/issue_comments_436034.json:
```json
{
    "body": "**Commit:** [7cf1dab075cf06a166eb127b2aa58fef3b48ff5d](https://github.com/sagemath/sagetrac-mirror/commit/7cf1dab075cf06a166eb127b2aa58fef3b48ff5d)",
    "created_at": "2019-05-28T13:57:50Z",
    "issue": "https://github.com/sagemath/sage/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27885#issuecomment-436034",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Commit:** [7cf1dab075cf06a166eb127b2aa58fef3b48ff5d](https://github.com/sagemath/sagetrac-mirror/commit/7cf1dab075cf06a166eb127b2aa58fef3b48ff5d)



---

archive/issue_comments_436035.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,7 +1,6 @@\n - Fix the errors\n `AttributeError: 'sage.symbolic.expression.Expression' object has no attribute '__nonzero__'` appearing in python3. \n `'__nonzero__'` is renamed into `'__bool__'` in python3.\n-The directs calls in the `EXAMPLES` have been moved into the `TESTS` and replaced by calls of the bool function as it is the correct way to call these special methods.\n \n - Use #py2 #py3 tag to manage the difference of messages for `TypeError` when an object is not subscriptable.\n \n``````\n",
    "created_at": "2019-05-28T13:58:32Z",
    "issue": "https://github.com/sagemath/sage/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27885#issuecomment-436035",
    "user": "https://github.com/vinklein"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,7 +1,6 @@
 - Fix the errors
 `AttributeError: 'sage.symbolic.expression.Expression' object has no attribute '__nonzero__'` appearing in python3. 
 `'__nonzero__'` is renamed into `'__bool__'` in python3.
-The directs calls in the `EXAMPLES` have been moved into the `TESTS` and replaced by calls of the bool function as it is the correct way to call these special methods.
 
 - Use #py2 #py3 tag to manage the difference of messages for `TypeError` when an object is not subscriptable.
 
``````




---

archive/issue_comments_436036.json:
```json
{
    "body": "**Changing commit** from \"[7cf1dab075cf06a166eb127b2aa58fef3b48ff5d](https://github.com/sagemath/sagetrac-mirror/commit/7cf1dab075cf06a166eb127b2aa58fef3b48ff5d)\" to \"[2a2f195eda640a8a576d20f22de2ae35452e35f3](https://github.com/sagemath/sagetrac-mirror/commit/2a2f195eda640a8a576d20f22de2ae35452e35f3)\".",
    "created_at": "2019-05-28T14:16:39Z",
    "issue": "https://github.com/sagemath/sage/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27885#issuecomment-436036",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[7cf1dab075cf06a166eb127b2aa58fef3b48ff5d](https://github.com/sagemath/sagetrac-mirror/commit/7cf1dab075cf06a166eb127b2aa58fef3b48ff5d)" to "[2a2f195eda640a8a576d20f22de2ae35452e35f3](https://github.com/sagemath/sagetrac-mirror/commit/2a2f195eda640a8a576d20f22de2ae35452e35f3)".



---

archive/issue_comments_436037.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2a2f195eda640a8a576d20f22de2ae35452e35f3\">2a2f195</a></td><td><code>Trac #27885: expression.pyx fix `__nonzero__` ...</code></td></tr></table>\n",
    "created_at": "2019-05-28T14:16:39Z",
    "issue": "https://github.com/sagemath/sage/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27885#issuecomment-436037",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2a2f195eda640a8a576d20f22de2ae35452e35f3">2a2f195</a></td><td><code>Trac #27885: expression.pyx fix `__nonzero__` ...</code></td></tr></table>




---

archive/issue_comments_436038.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,6 +1,13 @@\n-- Fix the errors\n-`AttributeError: 'sage.symbolic.expression.Expression' object has no attribute '__nonzero__'` appearing in python3. \n+- Fix the errors `AttributeError: 'sage.symbolic.expression.Expression' object has no attribute '__nonzero__'` appearing in python3. \n `'__nonzero__'` is renamed into `'__bool__'` in python3.\n \n - Use #py2 #py3 tag to manage the difference of messages for `TypeError` when an object is not subscriptable.\n \n+- Fix the following doctest:\n+\n+```\n+sage: Set([-x + y < 0, x - y < 0])\n+{-x + y < 0, x - y < 0}\n+```\n+The later used to randomly fail because the output order was not constant with python3.\n+\n``````\n",
    "created_at": "2019-05-28T14:43:22Z",
    "issue": "https://github.com/sagemath/sage/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27885#issuecomment-436038",
    "user": "https://github.com/vinklein"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,6 +1,13 @@
-- Fix the errors
-`AttributeError: 'sage.symbolic.expression.Expression' object has no attribute '__nonzero__'` appearing in python3. 
+- Fix the errors `AttributeError: 'sage.symbolic.expression.Expression' object has no attribute '__nonzero__'` appearing in python3. 
 `'__nonzero__'` is renamed into `'__bool__'` in python3.
 
 - Use #py2 #py3 tag to manage the difference of messages for `TypeError` when an object is not subscriptable.
 
+- Fix the following doctest:
+
+```
+sage: Set([-x + y < 0, x - y < 0])
+{-x + y < 0, x - y < 0}
+```
+The later used to randomly fail because the output order was not constant with python3.
+
``````




---

archive/issue_comments_436039.json:
```json
{
    "body": "**Changing commit** from \"[2a2f195eda640a8a576d20f22de2ae35452e35f3](https://github.com/sagemath/sagetrac-mirror/commit/2a2f195eda640a8a576d20f22de2ae35452e35f3)\" to \"[7658b8ee363c2c4b619310cb90efa4b149c0c711](https://github.com/sagemath/sagetrac-mirror/commit/7658b8ee363c2c4b619310cb90efa4b149c0c711)\".",
    "created_at": "2019-05-28T14:43:59Z",
    "issue": "https://github.com/sagemath/sage/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27885#issuecomment-436039",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[2a2f195eda640a8a576d20f22de2ae35452e35f3](https://github.com/sagemath/sagetrac-mirror/commit/2a2f195eda640a8a576d20f22de2ae35452e35f3)" to "[7658b8ee363c2c4b619310cb90efa4b149c0c711](https://github.com/sagemath/sagetrac-mirror/commit/7658b8ee363c2c4b619310cb90efa4b149c0c711)".



---

archive/issue_comments_436040.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7658b8ee363c2c4b619310cb90efa4b149c0c711\">7658b8e</a></td><td><code>Trac #27885: expression.pyx ...</code></td></tr></table>\n",
    "created_at": "2019-05-28T14:43:59Z",
    "issue": "https://github.com/sagemath/sage/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27885#issuecomment-436040",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7658b8ee363c2c4b619310cb90efa4b149c0c711">7658b8e</a></td><td><code>Trac #27885: expression.pyx ...</code></td></tr></table>




---

archive/issue_events_246077.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2019-05-28T14:44:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27885",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27885#event-246077"
}
```



---

archive/issue_comments_436041.json:
```json
{
    "body": "<a id='comment:8'></a>\nok, thx",
    "created_at": "2019-05-28T19:17:33Z",
    "issue": "https://github.com/sagemath/sage/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27885#issuecomment-436041",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:8'></a>
ok, thx



---

archive/issue_events_246078.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-05-28T19:17:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27885",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27885#event-246078"
}
```



---

archive/issue_events_246079.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-05-28T19:17:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27885",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27885#event-246079"
}
```



---

archive/issue_comments_436042.json:
```json
{
    "body": "**Reviewer:** Fr\u00e9d\u00e9ric Chapoton",
    "created_at": "2019-05-28T19:17:33Z",
    "issue": "https://github.com/sagemath/sage/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27885#issuecomment-436042",
    "user": "https://github.com/fchapoton"
}
```

**Reviewer:** Frédéric Chapoton



---

archive/issue_events_246080.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-06-02T22:04:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27885",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27885#event-246080"
}
```



---

archive/issue_events_246081.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-06-02T22:04:26Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27885",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27885#event-246081"
}
```



---

archive/issue_comments_436043.json:
```json
{
    "body": "**Changing branch** from \"[u/vklein/27885](https://github.com/sagemath/sagetrac-mirror/tree/u/vklein/27885)\" to \"[7658b8ee363c2c4b619310cb90efa4b149c0c711](https://github.com/sagemath/sagetrac-mirror/commit/7658b8ee363c2c4b619310cb90efa4b149c0c711)\".",
    "created_at": "2019-06-02T22:04:26Z",
    "issue": "https://github.com/sagemath/sage/issues/27885",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27885#issuecomment-436043",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/vklein/27885](https://github.com/sagemath/sagetrac-mirror/tree/u/vklein/27885)" to "[7658b8ee363c2c4b619310cb90efa4b149c0c711](https://github.com/sagemath/sagetrac-mirror/commit/7658b8ee363c2c4b619310cb90efa4b149c0c711)".
