# Issue 27270: spkg-configure.m4 for arb

archive/issues_027033.json:
```json
{
    "body": "\n```\nSAGE_SPKG_CONFIGURE([arb], [\n    AC_CHECK_HEADER(arb.h, [], [sage_spkg_install_arb=yes])\ndnl below function added in version 2.16 of arb \n    AC_SEARCH_LIBS([acb_mat_eig_simple], [arb], [break], [sage_spkg_install_arb=yes])\n```\n\nwe also take care of non-standard naming of arb's dylib here.\n\nconfigure tarball http://users.ox.ac.uk/~coml0531/sage/configure-b5de8991395bbf58e663e69d6250de656897c4e2.tar.gz\n\nCC:  @embray @jdemeyer @tobihan @kiwifb\n\nKeywords: spkg-configure\n\nUpstream: Reported upstream. No feedback yet.\n\nReviewer: Fran\u00e7ois Bissey, Isuru Fernando\n\nAuthor: Dima Pasechnik, Isuru Fernando\n\nBranch: 29d4ce2b95a7a721afc22db4633995c4a93d7f31\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/27270\n\n",
    "closed_at": "2019-07-26T20:27:32Z",
    "created_at": "2019-02-13T09:26:16Z",
    "labels": [
        "component: build"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.9",
    "title": "spkg-configure.m4 for arb",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27270",
    "user": "https://github.com/dimpase"
}
```

```
SAGE_SPKG_CONFIGURE([arb], [
    AC_CHECK_HEADER(arb.h, [], [sage_spkg_install_arb=yes])
dnl below function added in version 2.16 of arb 
    AC_SEARCH_LIBS([acb_mat_eig_simple], [arb], [break], [sage_spkg_install_arb=yes])
```

we also take care of non-standard naming of arb's dylib here.

configure tarball http://users.ox.ac.uk/~coml0531/sage/configure-b5de8991395bbf58e663e69d6250de656897c4e2.tar.gz

CC:  @embray @jdemeyer @tobihan @kiwifb

Keywords: spkg-configure

Upstream: Reported upstream. No feedback yet.

Reviewer: François Bissey, Isuru Fernando

Author: Dima Pasechnik, Isuru Fernando

Branch: 29d4ce2b95a7a721afc22db4633995c4a93d7f31

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/27270





---

archive/issue_comments_525321.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,7 @@\n \n+```\n+SAGE_SPKG_CONFIGURE([arb], [\n+    AC_CHECK_HEADER(arb.h, [], [sage_spkg_install_arb=yes])\n+dnl below function added in version 2.16 of arb \n+    AC_SEARCH_LIBS([acb_mat_eig_simple], [arb], [break], [sage_spkg_install_arb=yes])\n+```\n``````\n",
    "created_at": "2019-02-13T09:32:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525321",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,7 @@
 
+```
+SAGE_SPKG_CONFIGURE([arb], [
+    AC_CHECK_HEADER(arb.h, [], [sage_spkg_install_arb=yes])
+dnl below function added in version 2.16 of arb 
+    AC_SEARCH_LIBS([acb_mat_eig_simple], [arb], [break], [sage_spkg_install_arb=yes])
+```
``````




---

archive/issue_comments_525322.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#27264\"",
    "created_at": "2019-02-13T09:36:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525322",
    "user": "https://github.com/dimpase"
}
```

Changing dependencies from "" to "#27264"



---

archive/issue_comments_525323.json:
```json
{
    "body": "Changing commit from \"\" to \"46b529e44617eaa4873c32f77254018cf54f5f96\"",
    "created_at": "2019-03-21T15:54:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525323",
    "user": "https://github.com/dimpase"
}
```

Changing commit from "" to "46b529e44617eaa4873c32f77254018cf54f5f96"



---

archive/issue_comments_525324.json:
```json
{
    "body": "<a id='comment:3'></a>\nthis does not implement `--with-arb=...`, as I hope it's not needed.\nAnd no other packages have `--with-arb=`, too.\n\n---\nLast 10 new commits:\n|                                                                                                                                          |                                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[50aebab](https://git.sagemath.org/sage.git/commit?id=50aebab7b824b81166ce4652f928d15b72556e94)|`implement --with-mpfr=system/install`|\n|[0fc433f](https://git.sagemath.org/sage.git/commit?id=0fc433fe48e870db409d0ea8035ff064b25bcf61)|`update for Sage 8.7.rc0, a typo fix`|\n|[38427e1](https://git.sagemath.org/sage.git/commit?id=38427e143231467adce659ba5673b1aae2fd78c3)|`spkg-configure for mpc, adjustments for its dependees`|\n|[ec32471](https://git.sagemath.org/sage.git/commit?id=ec32471860d4d5721c978c6aca4802d563904b6e)|`Merge branch 'u/dimpase/packages/mpc-config' of trac.sagemath.org:sage into mpf`|\n|[91f423f](https://git.sagemath.org/sage.git/commit?id=91f423fab339a3279897149b323d26f20833b843)|`rebase, deal with --with-mpc`|\n|[33edfa8](https://git.sagemath.org/sage.git/commit?id=33edfa8d7fae77885dec9d3419567f63a84ed281)|`Merge branch 'mpf' into flintconf - no spkg-configure yet`|\n|[82772d7](https://git.sagemath.org/sage.git/commit?id=82772d7ba1e8a13311ba7b09ae50e36a2fb4356a)|`spkg-configure for flint`|\n|[24f17d5](https://git.sagemath.org/sage.git/commit?id=24f17d542915665f9e1c6a9207ac02f886c42e98)|`testi for GC enabled`|\n|[c1ac4f2](https://git.sagemath.org/sage.git/commit?id=c1ac4f285130c058e97ca199b5b95f28c17ac52d)|`proper nesting of tests`|\n|[46b529e](https://git.sagemath.org/sage.git/commit?id=46b529e44617eaa4873c32f77254018cf54f5f96)|`spkg-configure for arb`|",
    "created_at": "2019-03-21T15:54:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525324",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:3'></a>
this does not implement `--with-arb=...`, as I hope it's not needed.
And no other packages have `--with-arb=`, too.

---
Last 10 new commits:
|                                                                                                                                          |                                      |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
|[50aebab](https://git.sagemath.org/sage.git/commit?id=50aebab7b824b81166ce4652f928d15b72556e94)|`implement --with-mpfr=system/install`|
|[0fc433f](https://git.sagemath.org/sage.git/commit?id=0fc433fe48e870db409d0ea8035ff064b25bcf61)|`update for Sage 8.7.rc0, a typo fix`|
|[38427e1](https://git.sagemath.org/sage.git/commit?id=38427e143231467adce659ba5673b1aae2fd78c3)|`spkg-configure for mpc, adjustments for its dependees`|
|[ec32471](https://git.sagemath.org/sage.git/commit?id=ec32471860d4d5721c978c6aca4802d563904b6e)|`Merge branch 'u/dimpase/packages/mpc-config' of trac.sagemath.org:sage into mpf`|
|[91f423f](https://git.sagemath.org/sage.git/commit?id=91f423fab339a3279897149b323d26f20833b843)|`rebase, deal with --with-mpc`|
|[33edfa8](https://git.sagemath.org/sage.git/commit?id=33edfa8d7fae77885dec9d3419567f63a84ed281)|`Merge branch 'mpf' into flintconf - no spkg-configure yet`|
|[82772d7](https://git.sagemath.org/sage.git/commit?id=82772d7ba1e8a13311ba7b09ae50e36a2fb4356a)|`spkg-configure for flint`|
|[24f17d5](https://git.sagemath.org/sage.git/commit?id=24f17d542915665f9e1c6a9207ac02f886c42e98)|`testi for GC enabled`|
|[c1ac4f2](https://git.sagemath.org/sage.git/commit?id=c1ac4f285130c058e97ca199b5b95f28c17ac52d)|`proper nesting of tests`|
|[46b529e](https://git.sagemath.org/sage.git/commit?id=46b529e44617eaa4873c32f77254018cf54f5f96)|`spkg-configure for arb`|



---

archive/issue_comments_525325.json:
```json
{
    "body": "Changing branch from \"\" to \"u/dimpase/packages/arbconfig\"",
    "created_at": "2019-03-21T15:54:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525325",
    "user": "https://github.com/dimpase"
}
```

Changing branch from "" to "u/dimpase/packages/arbconfig"



---

archive/issue_comments_525326.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-03-21T15:54:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525326",
    "user": "https://github.com/dimpase"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_525327.json:
```json
{
    "body": "<a id='comment:4'></a>\nTests pass, apart from this amusing doctest failure:\n\n```\nFile \"src/sage/misc/package.py\", line 282, in sage.misc.package.installed_packages\nFailed example:\n    installed_packages()\nExpected:\n    {...'arb': ...'pynac': ...}\nGot:\n    {'.dummy': '',\n     'alabaster': '0.7.12',\n     'appnope': '0.1.0.p0',\n...\n```\n\nLess amusing is that with arb manually installed to /usr/local on Gentoo Linux, I get a import error upon Sage startup, from deep inside sagelib.\n\nI have to start Sage as `LD_LIBRARY_PATH=/usr/local/lib64 ./sage`, otherwise\nI get \n\n```\nImportError: libarb.so.2: cannot open shared object file: No such file or directory\n```\nI do have `/usr/local/lib64` in `/etc/ld.so.conf`, by the way.\nDoes this mean we need do jump through some linking hoops here?\n\nI certainly can add a proper runtime test in `spkg-configure.m4`, but why?",
    "created_at": "2019-03-21T22:25:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525327",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:4'></a>
Tests pass, apart from this amusing doctest failure:

```
File "src/sage/misc/package.py", line 282, in sage.misc.package.installed_packages
Failed example:
    installed_packages()
Expected:
    {...'arb': ...'pynac': ...}
Got:
    {'.dummy': '',
     'alabaster': '0.7.12',
     'appnope': '0.1.0.p0',
...
```

Less amusing is that with arb manually installed to /usr/local on Gentoo Linux, I get a import error upon Sage startup, from deep inside sagelib.

I have to start Sage as `LD_LIBRARY_PATH=/usr/local/lib64 ./sage`, otherwise
I get 

```
ImportError: libarb.so.2: cannot open shared object file: No such file or directory
```
I do have `/usr/local/lib64` in `/etc/ld.so.conf`, by the way.
Does this mean we need do jump through some linking hoops here?

I certainly can add a proper runtime test in `spkg-configure.m4`, but why?



---

archive/issue_comments_525328.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [dimpase](#comment%3A4):\n\n> \n> Less amusing is that with arb manually installed to /usr/local on Gentoo Linux, I get a import error upon Sage startup, from deep inside sagelib.\n\n\noops, my fault. Forgot to run ldconfig after the installation.\n(maybe arb should do it for you, cf. https://github.com/fredrik-johansson/arb/issues/273).",
    "created_at": "2019-03-22T09:02:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525328",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:5'></a>
Replying to [dimpase](#comment%3A4):

> 
> Less amusing is that with arb manually installed to /usr/local on Gentoo Linux, I get a import error upon Sage startup, from deep inside sagelib.


oops, my fault. Forgot to run ldconfig after the installation.
(maybe arb should do it for you, cf. https://github.com/fredrik-johansson/arb/issues/273).



---

archive/issue_comments_525329.json:
```json
{
    "body": "Changing commit from \"46b529e44617eaa4873c32f77254018cf54f5f96\" to \"961886d503232cdfe1a99472b72529dbdd00fb27\"",
    "created_at": "2019-03-22T09:30:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525329",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "46b529e44617eaa4873c32f77254018cf54f5f96" to "961886d503232cdfe1a99472b72529dbdd00fb27"



---

archive/issue_comments_525330.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|\n|[961886d](https://git.sagemath.org/sage.git/commit/?id=961886d503232cdfe1a99472b72529dbdd00fb27)|`arb can be dummy, don't mention it in packages doctest`|",
    "created_at": "2019-03-22T09:30:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525330",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|
|[961886d](https://git.sagemath.org/sage.git/commit/?id=961886d503232cdfe1a99472b72529dbdd00fb27)|`arb can be dummy, don't mention it in packages doctest`|



---

archive/issue_comments_525331.json:
```json
{
    "body": "Changing upstream from \"N/A\" to \"Reported upstream. No feedback yet.\"",
    "created_at": "2019-03-22T09:32:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525331",
    "user": "https://github.com/dimpase"
}
```

Changing upstream from "N/A" to "Reported upstream. No feedback yet."



---

archive/issue_comments_525332.json:
```json
{
    "body": "<a id='comment:7'></a>\nupstream report not directly relevant to this ticket, bit OK.",
    "created_at": "2019-03-22T09:32:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525332",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:7'></a>
upstream report not directly relevant to this ticket, bit OK.



---

archive/issue_comments_525333.json:
```json
{
    "body": "<a id='comment:8'></a>\nTicket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)",
    "created_at": "2019-03-25T10:56:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525333",
    "user": "https://github.com/embray"
}
```

<a id='comment:8'></a>
Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)



---

archive/issue_events_067688.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27270#event-67688"
}
```



---

archive/issue_comments_525334.json:
```json
{
    "body": "Changing commit from \"961886d503232cdfe1a99472b72529dbdd00fb27\" to \"7a9c76847329f746f1b784a2b660679be81f1575\"",
    "created_at": "2019-04-01T13:28:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525334",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "961886d503232cdfe1a99472b72529dbdd00fb27" to "7a9c76847329f746f1b784a2b660679be81f1575"



---

archive/issue_comments_525335.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------|\n|[7a9c768](https://git.sagemath.org/sage.git/commit/?id=7a9c76847329f746f1b784a2b660679be81f1575)|`typo in parameter`|",
    "created_at": "2019-04-01T13:28:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525335",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------|
|[7a9c768](https://git.sagemath.org/sage.git/commit/?id=7a9c76847329f746f1b784a2b660679be81f1575)|`typo in parameter`|



---

archive/issue_comments_525336.json:
```json
{
    "body": "Changing commit from \"7a9c76847329f746f1b784a2b660679be81f1575\" to \"1ed5dbbe84f0daa203d220e69c0af10662b8810c\"",
    "created_at": "2019-04-30T22:01:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525336",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7a9c76847329f746f1b784a2b660679be81f1575" to "1ed5dbbe84f0daa203d220e69c0af10662b8810c"



---

archive/issue_comments_525337.json:
```json
{
    "body": "<a id='comment:10'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n|                                                                                                                                           |                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[1357bef](https://git.sagemath.org/sage.git/commit/?id=1357bef819a9ac0a0672aee875e388c66b2a198c)|`implement --with-mpfr=system/install`|\n|[e7d04e7](https://git.sagemath.org/sage.git/commit/?id=e7d04e79d7d21a953e484a0c19f96538b530bb76)|`spkg-configure for mpc, adjustments for its dependees`|\n|[fb3aec7](https://git.sagemath.org/sage.git/commit/?id=fb3aec751c1ebad8b5562ee3bd4f532a6ab000a5)|`rebase, deal with --with-mpc`|\n|[30b85f7](https://git.sagemath.org/sage.git/commit/?id=30b85f782c177ec8619f47714fe2710943db4490)|`spkg-configure for flint`|\n|[e17167e](https://git.sagemath.org/sage.git/commit/?id=e17167eb398c30c2f1c6d42f7834f1ed3e8362cb)|`testi for GC enabled`|\n|[d7f3747](https://git.sagemath.org/sage.git/commit/?id=d7f3747feb83b6bef43d5cf62d17f38b28b616f1)|`proper nesting of tests`|\n|[88209e0](https://git.sagemath.org/sage.git/commit/?id=88209e0d5519bff2458088760509ee56e798519c)|`typo in parameter`|\n|[329b835](https://git.sagemath.org/sage.git/commit/?id=329b835b380970e680d702eae3739e8ab1c17b7f)|`rebase, deal with --with-mpc`|\n|[447ab2d](https://git.sagemath.org/sage.git/commit/?id=447ab2d0054cd541713010ef9da82e449cebfcbe)|`spkg-configure for arb`|\n|[1ed5dbb](https://git.sagemath.org/sage.git/commit/?id=1ed5dbbe84f0daa203d220e69c0af10662b8810c)|`arb can be dummy, don't mention it in packages doctest`|",
    "created_at": "2019-04-30T22:01:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525337",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
|                                                                                                                                           |                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
|[1357bef](https://git.sagemath.org/sage.git/commit/?id=1357bef819a9ac0a0672aee875e388c66b2a198c)|`implement --with-mpfr=system/install`|
|[e7d04e7](https://git.sagemath.org/sage.git/commit/?id=e7d04e79d7d21a953e484a0c19f96538b530bb76)|`spkg-configure for mpc, adjustments for its dependees`|
|[fb3aec7](https://git.sagemath.org/sage.git/commit/?id=fb3aec751c1ebad8b5562ee3bd4f532a6ab000a5)|`rebase, deal with --with-mpc`|
|[30b85f7](https://git.sagemath.org/sage.git/commit/?id=30b85f782c177ec8619f47714fe2710943db4490)|`spkg-configure for flint`|
|[e17167e](https://git.sagemath.org/sage.git/commit/?id=e17167eb398c30c2f1c6d42f7834f1ed3e8362cb)|`testi for GC enabled`|
|[d7f3747](https://git.sagemath.org/sage.git/commit/?id=d7f3747feb83b6bef43d5cf62d17f38b28b616f1)|`proper nesting of tests`|
|[88209e0](https://git.sagemath.org/sage.git/commit/?id=88209e0d5519bff2458088760509ee56e798519c)|`typo in parameter`|
|[329b835](https://git.sagemath.org/sage.git/commit/?id=329b835b380970e680d702eae3739e8ab1c17b7f)|`rebase, deal with --with-mpc`|
|[447ab2d](https://git.sagemath.org/sage.git/commit/?id=447ab2d0054cd541713010ef9da82e449cebfcbe)|`spkg-configure for arb`|
|[1ed5dbb](https://git.sagemath.org/sage.git/commit/?id=1ed5dbbe84f0daa203d220e69c0af10662b8810c)|`arb can be dummy, don't mention it in packages doctest`|



---

archive/issue_comments_525338.json:
```json
{
    "body": "<a id='comment:11'></a>\nOK, so this branch has mpfr (#27258)\nmpc (#27259)\nntl (#27265)\nflint (#27264) and, naturally, \narb. Would be great to have it all reviewed in one go...",
    "created_at": "2019-04-30T22:04:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525338",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:11'></a>
OK, so this branch has mpfr (#27258)
mpc (#27259)
ntl (#27265)
flint (#27264) and, naturally, 
arb. Would be great to have it all reviewed in one go...



---

archive/issue_comments_525339.json:
```json
{
    "body": "<a id='comment:12'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------|\n|[c09667d](https://git.sagemath.org/sage.git/commit/?id=c09667d92605952c0976eab66bff0c8e29def116)|`configure bump`|",
    "created_at": "2019-04-30T22:12:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525339",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------|
|[c09667d](https://git.sagemath.org/sage.git/commit/?id=c09667d92605952c0976eab66bff0c8e29def116)|`configure bump`|



---

archive/issue_comments_525340.json:
```json
{
    "body": "Changing commit from \"1ed5dbbe84f0daa203d220e69c0af10662b8810c\" to \"c09667d92605952c0976eab66bff0c8e29def116\"",
    "created_at": "2019-04-30T22:12:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525340",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "1ed5dbbe84f0daa203d220e69c0af10662b8810c" to "c09667d92605952c0976eab66bff0c8e29def116"



---

archive/issue_comments_525341.json:
```json
{
    "body": "Changing commit from \"c09667d92605952c0976eab66bff0c8e29def116\" to \"a247437766304ca3932ee779db4ae22c4a843cb5\"",
    "created_at": "2019-04-30T22:58:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525341",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c09667d92605952c0976eab66bff0c8e29def116" to "a247437766304ca3932ee779db4ae22c4a843cb5"



---

archive/issue_comments_525342.json:
```json
{
    "body": "<a id='comment:13'></a>\nAttachment [configure-320.tar.gz](tarball://root/attachments/some-uuid/ticket27270/configure-320.tar.gz) by git created at 2019-04-30 22:58:09\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------|\n|[a867838](https://git.sagemath.org/sage.git/commit/?id=a867838cf39019f4769133d9b66d4dc5540fe3a3)|`typo`|\n|[c4e7778](https://git.sagemath.org/sage.git/commit/?id=c4e777831c8bb88397c5d3ccc4e3c674f8e931da)|`rebase, deal with --with-mpc`|\n|[cd15ac1](https://git.sagemath.org/sage.git/commit/?id=cd15ac108f140318a063f778ccb0606157b73dd9)|`spkg-configure for arb`|\n|[07276c8](https://git.sagemath.org/sage.git/commit/?id=07276c8cdad9ad78db6360e556c18da18c7d4804)|`arb can be dummy, don't mention it in packages doctest`|\n|[a247437](https://git.sagemath.org/sage.git/commit/?id=a247437766304ca3932ee779db4ae22c4a843cb5)|`configure bump`|",
    "created_at": "2019-04-30T22:58:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525342",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
Attachment [configure-320.tar.gz](tarball://root/attachments/some-uuid/ticket27270/configure-320.tar.gz) by git created at 2019-04-30 22:58:09

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |      |
|-------------------------------------------------------------------------------------------------------------------------------------------|------|
|[a867838](https://git.sagemath.org/sage.git/commit/?id=a867838cf39019f4769133d9b66d4dc5540fe3a3)|`typo`|
|[c4e7778](https://git.sagemath.org/sage.git/commit/?id=c4e777831c8bb88397c5d3ccc4e3c674f8e931da)|`rebase, deal with --with-mpc`|
|[cd15ac1](https://git.sagemath.org/sage.git/commit/?id=cd15ac108f140318a063f778ccb0606157b73dd9)|`spkg-configure for arb`|
|[07276c8](https://git.sagemath.org/sage.git/commit/?id=07276c8cdad9ad78db6360e556c18da18c7d4804)|`arb can be dummy, don't mention it in packages doctest`|
|[a247437](https://git.sagemath.org/sage.git/commit/?id=a247437766304ca3932ee779db4ae22c4a843cb5)|`configure bump`|



---

archive/issue_comments_525343.json:
```json
{
    "body": "<a id='comment:14'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n|                                                                                                                                           |                              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|\n|[0392e76](https://git.sagemath.org/sage.git/commit/?id=0392e76d58c7eeafb54b245f8a97cc53f938d526)|`rebase, deal with --with-mpc`|\n|[73ce2a9](https://git.sagemath.org/sage.git/commit/?id=73ce2a9583c1ce34ba4e3439a380a71855c586e6)|`spkg-configure for flint`|\n|[37fa1a1](https://git.sagemath.org/sage.git/commit/?id=37fa1a1b67e2466d71023b14d517cc950fcbaeb0)|`testi for GC enabled`|\n|[4f6434c](https://git.sagemath.org/sage.git/commit/?id=4f6434c005ce15860aedad6f2c78e0db5494011c)|`proper nesting of tests`|\n|[a672706](https://git.sagemath.org/sage.git/commit/?id=a67270683a08dcce547a1bfb25f1611f8bc4929c)|`typo in parameter`|\n|[013dfbe](https://git.sagemath.org/sage.git/commit/?id=013dfbe8efff6b72a0b8d48f7a7d44351af3f97f)|`typo`|\n|[e698ffc](https://git.sagemath.org/sage.git/commit/?id=e698ffc466e45a87012511f77cda52dc7f92b48d)|`corrected rebase`|\n|[8fc4fb6](https://git.sagemath.org/sage.git/commit/?id=8fc4fb6e6229b920f1a8cf76cf780a98ef7e3389)|`add dependency checks, remove unneeded `-with` handling`|\n|[1ad182d](https://git.sagemath.org/sage.git/commit/?id=1ad182d3ae2326def98baf80bc68c57b79a361a7)|`SAGE_CONFIGURE_MPFR, fix sage-env-config.in, arb can be dummy`|\n|[9de7419](https://git.sagemath.org/sage.git/commit/?id=9de7419573417e1074b419fd966754a40e072503)|`added dependency check`|",
    "created_at": "2019-05-21T16:37:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525343",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
|                                                                                                                                           |                              |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|
|[0392e76](https://git.sagemath.org/sage.git/commit/?id=0392e76d58c7eeafb54b245f8a97cc53f938d526)|`rebase, deal with --with-mpc`|
|[73ce2a9](https://git.sagemath.org/sage.git/commit/?id=73ce2a9583c1ce34ba4e3439a380a71855c586e6)|`spkg-configure for flint`|
|[37fa1a1](https://git.sagemath.org/sage.git/commit/?id=37fa1a1b67e2466d71023b14d517cc950fcbaeb0)|`testi for GC enabled`|
|[4f6434c](https://git.sagemath.org/sage.git/commit/?id=4f6434c005ce15860aedad6f2c78e0db5494011c)|`proper nesting of tests`|
|[a672706](https://git.sagemath.org/sage.git/commit/?id=a67270683a08dcce547a1bfb25f1611f8bc4929c)|`typo in parameter`|
|[013dfbe](https://git.sagemath.org/sage.git/commit/?id=013dfbe8efff6b72a0b8d48f7a7d44351af3f97f)|`typo`|
|[e698ffc](https://git.sagemath.org/sage.git/commit/?id=e698ffc466e45a87012511f77cda52dc7f92b48d)|`corrected rebase`|
|[8fc4fb6](https://git.sagemath.org/sage.git/commit/?id=8fc4fb6e6229b920f1a8cf76cf780a98ef7e3389)|`add dependency checks, remove unneeded `-with` handling`|
|[1ad182d](https://git.sagemath.org/sage.git/commit/?id=1ad182d3ae2326def98baf80bc68c57b79a361a7)|`SAGE_CONFIGURE_MPFR, fix sage-env-config.in, arb can be dummy`|
|[9de7419](https://git.sagemath.org/sage.git/commit/?id=9de7419573417e1074b419fd966754a40e072503)|`added dependency check`|



---

archive/issue_comments_525344.json:
```json
{
    "body": "Changing commit from \"a247437766304ca3932ee779db4ae22c4a843cb5\" to \"9de7419573417e1074b419fd966754a40e072503\"",
    "created_at": "2019-05-21T16:37:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525344",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a247437766304ca3932ee779db4ae22c4a843cb5" to "9de7419573417e1074b419fd966754a40e072503"



---

archive/issue_comments_525345.json:
```json
{
    "body": "<a id='comment:15'></a>\nrebased over #27264, added dependency check",
    "created_at": "2019-05-21T16:38:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525345",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:15'></a>
rebased over #27264, added dependency check



---

archive/issue_comments_525346.json:
```json
{
    "body": "Changing commit from \"9de7419573417e1074b419fd966754a40e072503\" to \"483233b26149276d13a3b6149bec98a5a007756c\"",
    "created_at": "2019-06-04T11:38:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525346",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9de7419573417e1074b419fd966754a40e072503" to "483233b26149276d13a3b6149bec98a5a007756c"



---

archive/issue_comments_525347.json:
```json
{
    "body": "<a id='comment:16'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|\n|[d23d9db](https://git.sagemath.org/sage.git/commit/?id=d23d9dba15dbad6abc50e5d59fb7ab7ee7a3a495)|`add SAGE_CONFIGURE_MPFR, fix sage-env-config.in`|\n|[4222018](https://git.sagemath.org/sage.git/commit/?id=4222018be46bc710f1c085b1f4389a70702853e9)|`testi for GC enabled`|\n|[02dd624](https://git.sagemath.org/sage.git/commit/?id=02dd62477ca810e18214e558a7568bed82bfb4cd)|`proper nesting of tests`|\n|[4fb6a73](https://git.sagemath.org/sage.git/commit/?id=4fb6a738bfd02deda66aa551d8d11da3540b1479)|`SAGE_CONFIGURE_MPFR, fix sage-env-config.in, arb can be dummy`|\n|[483233b](https://git.sagemath.org/sage.git/commit/?id=483233b26149276d13a3b6149bec98a5a007756c)|`added dependency check`|",
    "created_at": "2019-06-04T11:38:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525347",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|
|[d23d9db](https://git.sagemath.org/sage.git/commit/?id=d23d9dba15dbad6abc50e5d59fb7ab7ee7a3a495)|`add SAGE_CONFIGURE_MPFR, fix sage-env-config.in`|
|[4222018](https://git.sagemath.org/sage.git/commit/?id=4222018be46bc710f1c085b1f4389a70702853e9)|`testi for GC enabled`|
|[02dd624](https://git.sagemath.org/sage.git/commit/?id=02dd62477ca810e18214e558a7568bed82bfb4cd)|`proper nesting of tests`|
|[4fb6a73](https://git.sagemath.org/sage.git/commit/?id=4fb6a738bfd02deda66aa551d8d11da3540b1479)|`SAGE_CONFIGURE_MPFR, fix sage-env-config.in, arb can be dummy`|
|[483233b](https://git.sagemath.org/sage.git/commit/?id=483233b26149276d13a3b6149bec98a5a007756c)|`added dependency check`|



---

archive/issue_comments_525348.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,3 +5,5 @@\n dnl below function added in version 2.16 of arb \n     AC_SEARCH_LIBS([acb_mat_eig_simple], [arb], [break], [sage_spkg_install_arb=yes])\n ```\n+\n+configure tarball https://trac.sagemath.org/raw-attachment/ticket/27270/configure-323.tar.gz\n``````\n",
    "created_at": "2019-06-04T11:44:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525348",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,3 +5,5 @@
 dnl below function added in version 2.16 of arb 
     AC_SEARCH_LIBS([acb_mat_eig_simple], [arb], [break], [sage_spkg_install_arb=yes])
 ```
+
+configure tarball https://trac.sagemath.org/raw-attachment/ticket/27270/configure-323.tar.gz
``````




---

archive/issue_comments_525349.json:
```json
{
    "body": "<a id='comment:17'></a>\nAttachment [configure-323.tar.gz](tarball://root/attachments/some-uuid/ticket27270/configure-323.tar.gz) by @dimpase created at 2019-06-04 11:44:49\n\nthis is now bundled with flint ticket. New configure tarball attached. I also squashed some commits, and rebased over 8.8.beta7",
    "created_at": "2019-06-04T11:44:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525349",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:17'></a>
Attachment [configure-323.tar.gz](tarball://root/attachments/some-uuid/ticket27270/configure-323.tar.gz) by @dimpase created at 2019-06-04 11:44:49

this is now bundled with flint ticket. New configure tarball attached. I also squashed some commits, and rebased over 8.8.beta7



---

archive/issue_comments_525350.json:
```json
{
    "body": "<a id='comment:18'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------|\n|[fc876ed](https://git.sagemath.org/sage.git/commit/?id=fc876ed1d0d34b1ae206b0afc22a223f7a223bad)|`configure bump`|",
    "created_at": "2019-06-04T11:45:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525350",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------|
|[fc876ed](https://git.sagemath.org/sage.git/commit/?id=fc876ed1d0d34b1ae206b0afc22a223f7a223bad)|`configure bump`|



---

archive/issue_comments_525351.json:
```json
{
    "body": "Changing commit from \"483233b26149276d13a3b6149bec98a5a007756c\" to \"fc876ed1d0d34b1ae206b0afc22a223f7a223bad\"",
    "created_at": "2019-06-04T11:45:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525351",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "483233b26149276d13a3b6149bec98a5a007756c" to "fc876ed1d0d34b1ae206b0afc22a223f7a223bad"



---

archive/issue_comments_525352.json:
```json
{
    "body": "<a id='comment:19'></a>\nHow come that 8.8.rc0 needs configure-323, which is here, not yet merged ??\n\n**EDIT:**\n\nAnd how can this depend on a duplicate/invalid/wontfix ticket ??",
    "created_at": "2019-06-09T18:37:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525352",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:19'></a>
How come that 8.8.rc0 needs configure-323, which is here, not yet merged ??

**EDIT:**

And how can this depend on a duplicate/invalid/wontfix ticket ??



---

archive/issue_comments_525353.json:
```json
{
    "body": "<a id='comment:20'></a>\nversion numbers of these tarballs are autogenerated. they are otherwise pretty much meaningless.\n\nit is merely a bug in our release process that is needed to be workedaround, as builbots don\u2019t have autotools and cannot generate the stuff on the fly...",
    "created_at": "2019-06-09T20:27:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525353",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:20'></a>
version numbers of these tarballs are autogenerated. they are otherwise pretty much meaningless.

it is merely a bug in our release process that is needed to be workedaround, as builbots don’t have autotools and cannot generate the stuff on the fly...



---

archive/issue_comments_525354.json:
```json
{
    "body": "<a id='comment:21'></a>\nNeeds a new confball. I'd suggest to merge this in 8.9.beta0 so hold the horses until 8.8 is out. \n\nYou should remove the dependency on tickets that cannot be merged, the release script will wait until the dependencies are merged which, right now, is never.",
    "created_at": "2019-06-09T20:45:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525354",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:21'></a>
Needs a new confball. I'd suggest to merge this in 8.9.beta0 so hold the horses until 8.8 is out. 

You should remove the dependency on tickets that cannot be merged, the release script will wait until the dependencies are merged which, right now, is never.



---

archive/issue_comments_525355.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-06-09T20:45:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525355",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_525356.json:
```json
{
    "body": "Changing dependencies from \"#27264\" to \"\"",
    "created_at": "2019-06-10T08:53:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525356",
    "user": "https://github.com/dimpase"
}
```

Changing dependencies from "#27264" to ""



---

archive/issue_comments_525357.json:
```json
{
    "body": "<a id='comment:23'></a>\nthe branch here bundles the work done on #27264.",
    "created_at": "2019-06-10T08:53:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525357",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:23'></a>
the branch here bundles the work done on #27264.



---

archive/issue_comments_525358.json:
```json
{
    "body": "Changing commit from \"fc876ed1d0d34b1ae206b0afc22a223f7a223bad\" to \"bd14dd2a4552c1afa0a09b6858a7e0cd504ade17\"",
    "created_at": "2019-06-11T11:18:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525358",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "fc876ed1d0d34b1ae206b0afc22a223f7a223bad" to "bd14dd2a4552c1afa0a09b6858a7e0cd504ade17"



---

archive/issue_comments_525359.json:
```json
{
    "body": "<a id='comment:24'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|\n|[848279c](https://git.sagemath.org/sage.git/commit/?id=848279c555790604ed807cb3ee2ce421edd9f3ac)|`add SAGE_CONFIGURE_MPFR, fix sage-env-config.in`|\n|[2bea28b](https://git.sagemath.org/sage.git/commit/?id=2bea28bbbe58acce91104b9b83ae86055f695d89)|`testi for GC enabled`|\n|[b5ac981](https://git.sagemath.org/sage.git/commit/?id=b5ac981c02984a116ce0d1dfdb759c933cdfed9f)|`proper nesting of tests`|\n|[f81225a](https://git.sagemath.org/sage.git/commit/?id=f81225ac31188f30ec1a39d30820c0ca813d210e)|`SAGE_CONFIGURE_MPFR, fix sage-env-config.in, arb can be dummy`|\n|[bd14dd2](https://git.sagemath.org/sage.git/commit/?id=bd14dd2a4552c1afa0a09b6858a7e0cd504ade17)|`added dependency check`|",
    "created_at": "2019-06-11T11:18:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525359",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|
|[848279c](https://git.sagemath.org/sage.git/commit/?id=848279c555790604ed807cb3ee2ce421edd9f3ac)|`add SAGE_CONFIGURE_MPFR, fix sage-env-config.in`|
|[2bea28b](https://git.sagemath.org/sage.git/commit/?id=2bea28bbbe58acce91104b9b83ae86055f695d89)|`testi for GC enabled`|
|[b5ac981](https://git.sagemath.org/sage.git/commit/?id=b5ac981c02984a116ce0d1dfdb759c933cdfed9f)|`proper nesting of tests`|
|[f81225a](https://git.sagemath.org/sage.git/commit/?id=f81225ac31188f30ec1a39d30820c0ca813d210e)|`SAGE_CONFIGURE_MPFR, fix sage-env-config.in, arb can be dummy`|
|[bd14dd2](https://git.sagemath.org/sage.git/commit/?id=bd14dd2a4552c1afa0a09b6858a7e0cd504ade17)|`added dependency check`|



---

archive/issue_comments_525360.json:
```json
{
    "body": "<a id='comment:25'></a>\nrebased over 8.8.rc0 (without configure bump, for the time being)",
    "created_at": "2019-06-11T11:19:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525360",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:25'></a>
rebased over 8.8.rc0 (without configure bump, for the time being)



---

archive/issue_events_067689.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:50:27Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27270#event-67689"
}
```



---

archive/issue_events_067690.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:50:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27270#event-67690"
}
```



---

archive/issue_comments_525361.json:
```json
{
    "body": "<a id='comment:26'></a>\nTickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).",
    "created_at": "2019-06-14T14:50:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525361",
    "user": "https://github.com/embray"
}
```

<a id='comment:26'></a>
Tickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).



---

archive/issue_comments_525362.json:
```json
{
    "body": "<a id='comment:27'></a>\nReplying to [vbraun](#comment%3A21):\n> Needs a new confball. I'd suggest to merge this in 8.9.beta0 so hold the horses until 8.8 is out. \n\n\nWould you like to get #27978 first?",
    "created_at": "2019-06-16T11:56:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525362",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:27'></a>
Replying to [vbraun](#comment%3A21):
> Needs a new confball. I'd suggest to merge this in 8.9.beta0 so hold the horses until 8.8 is out. 


Would you like to get #27978 first?



---

archive/issue_comments_525363.json:
```json
{
    "body": "<a id='comment:28'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|\n|[d91e84a](https://git.sagemath.org/sage.git/commit/?id=d91e84ae2dbe03b16ff8e4cd04defb7427d02da1)|`add SAGE_CONFIGURE_MPFR, fix sage-env-config.in`|\n|[f7b77df](https://git.sagemath.org/sage.git/commit/?id=f7b77df0ee602304827c33079c68155e0a128bd9)|`testi for GC enabled`|\n|[22100a4](https://git.sagemath.org/sage.git/commit/?id=22100a43216dc0618014e2762c8efbc3ae5eb06c)|`proper nesting of tests`|\n|[f7826c4](https://git.sagemath.org/sage.git/commit/?id=f7826c48d673266e56b3e697814851c3fa2fba84)|`SAGE_CONFIGURE_MPFR, fix sage-env-config.in, arb can be dummy`|\n|[5cd4aac](https://git.sagemath.org/sage.git/commit/?id=5cd4aac44e1f220197bf275fd4f31f18caee651b)|`added dependency check`|\n|[8d1a647](https://git.sagemath.org/sage.git/commit/?id=8d1a64795b1e69d521250c7dd4901214772372e0)|`configure bump`|",
    "created_at": "2019-06-29T08:05:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525363",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|
|[d91e84a](https://git.sagemath.org/sage.git/commit/?id=d91e84ae2dbe03b16ff8e4cd04defb7427d02da1)|`add SAGE_CONFIGURE_MPFR, fix sage-env-config.in`|
|[f7b77df](https://git.sagemath.org/sage.git/commit/?id=f7b77df0ee602304827c33079c68155e0a128bd9)|`testi for GC enabled`|
|[22100a4](https://git.sagemath.org/sage.git/commit/?id=22100a43216dc0618014e2762c8efbc3ae5eb06c)|`proper nesting of tests`|
|[f7826c4](https://git.sagemath.org/sage.git/commit/?id=f7826c48d673266e56b3e697814851c3fa2fba84)|`SAGE_CONFIGURE_MPFR, fix sage-env-config.in, arb can be dummy`|
|[5cd4aac](https://git.sagemath.org/sage.git/commit/?id=5cd4aac44e1f220197bf275fd4f31f18caee651b)|`added dependency check`|
|[8d1a647](https://git.sagemath.org/sage.git/commit/?id=8d1a64795b1e69d521250c7dd4901214772372e0)|`configure bump`|



---

archive/issue_comments_525364.json:
```json
{
    "body": "Changing commit from \"bd14dd2a4552c1afa0a09b6858a7e0cd504ade17\" to \"8d1a64795b1e69d521250c7dd4901214772372e0\"",
    "created_at": "2019-06-29T08:05:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525364",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "bd14dd2a4552c1afa0a09b6858a7e0cd504ade17" to "8d1a64795b1e69d521250c7dd4901214772372e0"



---

archive/issue_comments_525365.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-06-29T08:09:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525365",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_525366.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,4 +6,4 @@\n     AC_SEARCH_LIBS([acb_mat_eig_simple], [arb], [break], [sage_spkg_install_arb=yes])\n ```\n \n-configure tarball https://trac.sagemath.org/raw-attachment/ticket/27270/configure-323.tar.gz\n+configure tarball http://users.ox.ac.uk/~coml0531/sage/configure-328.tar.gz\n``````\n",
    "created_at": "2019-06-29T08:09:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525366",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,4 +6,4 @@
     AC_SEARCH_LIBS([acb_mat_eig_simple], [arb], [break], [sage_spkg_install_arb=yes])
 ```
 
-configure tarball https://trac.sagemath.org/raw-attachment/ticket/27270/configure-323.tar.gz
+configure tarball http://users.ox.ac.uk/~coml0531/sage/configure-328.tar.gz
``````




---

archive/issue_comments_525367.json:
```json
{
    "body": "Changing commit from \"8d1a64795b1e69d521250c7dd4901214772372e0\" to \"45cb1e46fe6929a6760e1ed96277301a36ffa084\"",
    "created_at": "2019-07-03T15:23:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525367",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "8d1a64795b1e69d521250c7dd4901214772372e0" to "45cb1e46fe6929a6760e1ed96277301a36ffa084"



---

archive/issue_comments_525368.json:
```json
{
    "body": "<a id='comment:30'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|\n|[d0cdca7](https://git.sagemath.org/sage.git/commit/?id=d0cdca7640e1b47de56949b95307530a54e155fc)|`add SAGE_CONFIGURE_MPFR, fix sage-env-config.in`|\n|[370e481](https://git.sagemath.org/sage.git/commit/?id=370e48192562a7882dca8304d732f94c2aa0c18e)|`testi for GC enabled`|\n|[032620d](https://git.sagemath.org/sage.git/commit/?id=032620df1f401d9cd63c6a1c342dc62ac159d2f8)|`proper nesting of tests`|\n|[e6b3d53](https://git.sagemath.org/sage.git/commit/?id=e6b3d53506a07dc2fad6df5d43b0503db08f6d9f)|`SAGE_CONFIGURE_MPFR, fix sage-env-config.in, arb can be dummy`|\n|[13235f9](https://git.sagemath.org/sage.git/commit/?id=13235f9997462c2349a452f2dfb6b2097deb7d56)|`added dependency check`|\n|[45cb1e4](https://git.sagemath.org/sage.git/commit/?id=45cb1e46fe6929a6760e1ed96277301a36ffa084)|`configure version bump`|",
    "created_at": "2019-07-03T15:23:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525368",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|
|[d0cdca7](https://git.sagemath.org/sage.git/commit/?id=d0cdca7640e1b47de56949b95307530a54e155fc)|`add SAGE_CONFIGURE_MPFR, fix sage-env-config.in`|
|[370e481](https://git.sagemath.org/sage.git/commit/?id=370e48192562a7882dca8304d732f94c2aa0c18e)|`testi for GC enabled`|
|[032620d](https://git.sagemath.org/sage.git/commit/?id=032620df1f401d9cd63c6a1c342dc62ac159d2f8)|`proper nesting of tests`|
|[e6b3d53](https://git.sagemath.org/sage.git/commit/?id=e6b3d53506a07dc2fad6df5d43b0503db08f6d9f)|`SAGE_CONFIGURE_MPFR, fix sage-env-config.in, arb can be dummy`|
|[13235f9](https://git.sagemath.org/sage.git/commit/?id=13235f9997462c2349a452f2dfb6b2097deb7d56)|`added dependency check`|
|[45cb1e4](https://git.sagemath.org/sage.git/commit/?id=45cb1e46fe6929a6760e1ed96277301a36ffa084)|`configure version bump`|



---

archive/issue_comments_525369.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,4 +6,5 @@\n     AC_SEARCH_LIBS([acb_mat_eig_simple], [arb], [break], [sage_spkg_install_arb=yes])\n ```\n \n-configure tarball http://users.ox.ac.uk/~coml0531/sage/configure-328.tar.gz\n+configure tarball \n+http://users.ox.ac.uk/~coml0531/sage/configure-13235f9997462c2349a452f2dfb6b2097deb7d56.tar.gz\n``````\n",
    "created_at": "2019-07-03T15:26:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525369",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,4 +6,5 @@
     AC_SEARCH_LIBS([acb_mat_eig_simple], [arb], [break], [sage_spkg_install_arb=yes])
 ```
 
-configure tarball http://users.ox.ac.uk/~coml0531/sage/configure-328.tar.gz
+configure tarball 
+http://users.ox.ac.uk/~coml0531/sage/configure-13235f9997462c2349a452f2dfb6b2097deb7d56.tar.gz
``````




---

archive/issue_comments_525370.json:
```json
{
    "body": "<a id='comment:31'></a>\nnow rebased over 8.9.beta1, using sha1-based configure tarball\n\nPlease test!",
    "created_at": "2019-07-03T15:26:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525370",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:31'></a>
now rebased over 8.9.beta1, using sha1-based configure tarball

Please test!



---

archive/issue_comments_525371.json:
```json
{
    "body": "<a id='comment:32'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|\n|[46f2ba9](https://git.sagemath.org/sage.git/commit/?id=46f2ba971a97c708a462d1a6f51a6d448493a928)|`add SAGE_CONFIGURE_MPFR, fix sage-env-config.in`|\n|[456ad04](https://git.sagemath.org/sage.git/commit/?id=456ad0410795bc4eaaa4ff183770e04071b76cda)|`testi for GC enabled`|\n|[52c3ae4](https://git.sagemath.org/sage.git/commit/?id=52c3ae44a9b1ba12e3c19bb00a36c7f4120721bc)|`proper nesting of tests`|\n|[37d2d12](https://git.sagemath.org/sage.git/commit/?id=37d2d127faae3a49c56fc6e4e245bcefe8224c0a)|`SAGE_CONFIGURE_MPFR, fix sage-env-config.in, arb can be dummy`|\n|[1f53beb](https://git.sagemath.org/sage.git/commit/?id=1f53bebd44d9856d1ba14ff009dacfda06761daf)|`added dependency check`|\n|[32f294b](https://git.sagemath.org/sage.git/commit/?id=32f294b356104ff055f168786dc6fb4adcda706b)|`sage should be called with ./ in bootstrap`|\n|[c758851](https://git.sagemath.org/sage.git/commit/?id=c75885143bb6f5a6d34bb35cc82695e63adb3d46)|`Debian names the arb library differently`|\n|[54d45ba](https://git.sagemath.org/sage.git/commit/?id=54d45ba31e6d669ec33a80fefc6be20ad40d9f21)|`mention flint and arb (and one more forgotten package) for debian`|\n|[605260c](https://git.sagemath.org/sage.git/commit/?id=605260c4c5000d3fd793787f114abdc8e59ad870)|`configure version bump`|",
    "created_at": "2019-07-11T06:14:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525371",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|
|[46f2ba9](https://git.sagemath.org/sage.git/commit/?id=46f2ba971a97c708a462d1a6f51a6d448493a928)|`add SAGE_CONFIGURE_MPFR, fix sage-env-config.in`|
|[456ad04](https://git.sagemath.org/sage.git/commit/?id=456ad0410795bc4eaaa4ff183770e04071b76cda)|`testi for GC enabled`|
|[52c3ae4](https://git.sagemath.org/sage.git/commit/?id=52c3ae44a9b1ba12e3c19bb00a36c7f4120721bc)|`proper nesting of tests`|
|[37d2d12](https://git.sagemath.org/sage.git/commit/?id=37d2d127faae3a49c56fc6e4e245bcefe8224c0a)|`SAGE_CONFIGURE_MPFR, fix sage-env-config.in, arb can be dummy`|
|[1f53beb](https://git.sagemath.org/sage.git/commit/?id=1f53bebd44d9856d1ba14ff009dacfda06761daf)|`added dependency check`|
|[32f294b](https://git.sagemath.org/sage.git/commit/?id=32f294b356104ff055f168786dc6fb4adcda706b)|`sage should be called with ./ in bootstrap`|
|[c758851](https://git.sagemath.org/sage.git/commit/?id=c75885143bb6f5a6d34bb35cc82695e63adb3d46)|`Debian names the arb library differently`|
|[54d45ba](https://git.sagemath.org/sage.git/commit/?id=54d45ba31e6d669ec33a80fefc6be20ad40d9f21)|`mention flint and arb (and one more forgotten package) for debian`|
|[605260c](https://git.sagemath.org/sage.git/commit/?id=605260c4c5000d3fd793787f114abdc8e59ad870)|`configure version bump`|



---

archive/issue_comments_525372.json:
```json
{
    "body": "Changing commit from \"45cb1e46fe6929a6760e1ed96277301a36ffa084\" to \"605260c4c5000d3fd793787f114abdc8e59ad870\"",
    "created_at": "2019-07-11T06:14:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525372",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "45cb1e46fe6929a6760e1ed96277301a36ffa084" to "605260c4c5000d3fd793787f114abdc8e59ad870"



---

archive/issue_comments_525373.json:
```json
{
    "body": "<a id='comment:33'></a>\nrebased, config bump, added another name for the arb library (in Debian), mention it and flint in docs",
    "created_at": "2019-07-11T06:17:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525373",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:33'></a>
rebased, config bump, added another name for the arb library (in Debian), mention it and flint in docs



---

archive/issue_comments_525374.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,4 +7,4 @@\n ```\n \n configure tarball \n-http://users.ox.ac.uk/~coml0531/sage/configure-13235f9997462c2349a452f2dfb6b2097deb7d56.tar.gz\n+http://users.ox.ac.uk/~coml0531/sage/configure-54d45ba31e6d669ec33a80fefc6be20ad40d9f21.tar.gz\n``````\n",
    "created_at": "2019-07-11T06:17:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525374",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,4 +7,4 @@
 ```
 
 configure tarball 
-http://users.ox.ac.uk/~coml0531/sage/configure-13235f9997462c2349a452f2dfb6b2097deb7d56.tar.gz
+http://users.ox.ac.uk/~coml0531/sage/configure-54d45ba31e6d669ec33a80fefc6be20ad40d9f21.tar.gz
``````




---

archive/issue_comments_525375.json:
```json
{
    "body": "<a id='comment:34'></a>\nwith the latest branch on Debian buster, building `sage/libs/arb/arith.so` against system's arb (so it needs `-lflint-arb` and not `-larb` breaks with a linking error (as there is no `libarb`)\n\n```\n[sagelib-8.9.beta2] gcc -pthread -shared -L/home/dimpase/sage/local/lib -Wl,-rpath,/home/dimpase/sage/local/lib -L/home/dimpase/sage/local/lib -Wl,-rpath,/home/dimpase/sage/local/lib build/temp.linux-x86_64-2.7/build/cythonized/sage/libs/arb/arith.o -L/home/dimpase/sage/local/lib -L/home/dimpase/sage/local/lib -lflint -larb -lgmp -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/libs/arb/arith.so\n[sagelib-8.9.beta2] /usr/bin/ld: cannot find -larb\n```\n\nIt apparently derives `-larb` somewhere in Cython, but where, and is there a way to override it?\n\nNote that `-lflint-arb` is known to the global makefile:\n\n```\nbuild/make/Makefile-auto:LIBS = -lrw -lreadline -lmpc -lgf2x -lcurl -lbz2 -lflint-arb -lflint -lmpfr -lgmp -lm  -lntl\n```",
    "created_at": "2019-07-11T06:55:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525375",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:34'></a>
with the latest branch on Debian buster, building `sage/libs/arb/arith.so` against system's arb (so it needs `-lflint-arb` and not `-larb` breaks with a linking error (as there is no `libarb`)

```
[sagelib-8.9.beta2] gcc -pthread -shared -L/home/dimpase/sage/local/lib -Wl,-rpath,/home/dimpase/sage/local/lib -L/home/dimpase/sage/local/lib -Wl,-rpath,/home/dimpase/sage/local/lib build/temp.linux-x86_64-2.7/build/cythonized/sage/libs/arb/arith.o -L/home/dimpase/sage/local/lib -L/home/dimpase/sage/local/lib -lflint -larb -lgmp -lpython2.7 -o build/lib.linux-x86_64-2.7/sage/libs/arb/arith.so
[sagelib-8.9.beta2] /usr/bin/ld: cannot find -larb
```

It apparently derives `-larb` somewhere in Cython, but where, and is there a way to override it?

Note that `-lflint-arb` is known to the global makefile:

```
build/make/Makefile-auto:LIBS = -lrw -lreadline -lmpc -lgf2x -lcurl -lbz2 -lflint-arb -lflint -lmpfr -lgmp -lm  -lntl
```



---

archive/issue_comments_525376.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2019-07-11T06:55:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525376",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_525377.json:
```json
{
    "body": "<a id='comment:35'></a>\nI can apply\n\n```diff\n--- a/src/module_list.py\n+++ b/src/module_list.py\n@@ -79,7 +79,7 @@ library_order_list = aliases[\"SINGULAR_LIBRARIES\"] + [\n     \"ec\", \"ecm\",\n ] + aliases[\"LINBOX_LIBRARIES\"] + aliases[\"FFLASFFPACK_LIBRARIES\"] + aliases[\"GSL_LIBRARIES\"] + [\n     \"pari\", \"flint\", \"ratpoints\", \"ecl\", \"glpk\", \"ppl\",\n-    \"arb\", \"mpfi\", \"mpfr\", \"mpc\", \"gmp\", \"gmpxx\",\n+    \"flint-arb\", \"mpfi\", \"mpfr\", \"mpc\", \"gmp\", \"gmpxx\",\n     \"brial\",\n     \"brial_groebner\",\n     \"m4rie\",\n@@ -765,7 +765,7 @@ ext_modules = [\n \n     Extension(\"sage.matrix.matrix_complex_ball_dense\",\n               [\"sage/matrix/matrix_complex_ball_dense.pyx\"],\n-              libraries=['arb']),\n+              libraries=['flint-arb']),\n \n     Extension('sage.matrix.matrix_complex_double_dense',\n               sources = ['sage/matrix/matrix_complex_double_dense.pyx']),\n```\nand then it builds, but is this the correct way?",
    "created_at": "2019-07-11T09:02:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525377",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:35'></a>
I can apply

```diff
--- a/src/module_list.py
+++ b/src/module_list.py
@@ -79,7 +79,7 @@ library_order_list = aliases["SINGULAR_LIBRARIES"] + [
     "ec", "ecm",
 ] + aliases["LINBOX_LIBRARIES"] + aliases["FFLASFFPACK_LIBRARIES"] + aliases["GSL_LIBRARIES"] + [
     "pari", "flint", "ratpoints", "ecl", "glpk", "ppl",
-    "arb", "mpfi", "mpfr", "mpc", "gmp", "gmpxx",
+    "flint-arb", "mpfi", "mpfr", "mpc", "gmp", "gmpxx",
     "brial",
     "brial_groebner",
     "m4rie",
@@ -765,7 +765,7 @@ ext_modules = [
 
     Extension("sage.matrix.matrix_complex_ball_dense",
               ["sage/matrix/matrix_complex_ball_dense.pyx"],
-              libraries=['arb']),
+              libraries=['flint-arb']),
 
     Extension('sage.matrix.matrix_complex_double_dense',
               sources = ['sage/matrix/matrix_complex_double_dense.pyx']),
```
and then it builds, but is this the correct way?



---

archive/issue_comments_525378.json:
```json
{
    "body": "<a id='comment:36'></a>\noops, scratch this, this change does not help, it appears there is some divining of `-larb` by Cython(?)",
    "created_at": "2019-07-11T09:48:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525378",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:36'></a>
oops, scratch this, this change does not help, it appears there is some divining of `-larb` by Cython(?)



---

archive/issue_comments_525379.json:
```json
{
    "body": "<a id='comment:37'></a>\nOK, so also some `#distutils` entries need to be modified. Debian applies\nhttps://salsa.debian.org/science-team/sagemath/blob/master/debian/patches/d0-arb.patch",
    "created_at": "2019-07-12T11:31:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525379",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:37'></a>
OK, so also some `#distutils` entries need to be modified. Debian applies
https://salsa.debian.org/science-team/sagemath/blob/master/debian/patches/d0-arb.patch



---

archive/issue_comments_525380.json:
```json
{
    "body": "<a id='comment:38'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|\n|[89d227c](https://git.sagemath.org/sage.git/commit/?id=89d227c31890df899fc4531c2787fd2419759e3d)|`add the name of arb dylib to cython_aliases`|",
    "created_at": "2019-07-15T18:16:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525380",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:38'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|
|[89d227c](https://git.sagemath.org/sage.git/commit/?id=89d227c31890df899fc4531c2787fd2419759e3d)|`add the name of arb dylib to cython_aliases`|



---

archive/issue_comments_525381.json:
```json
{
    "body": "Changing commit from \"605260c4c5000d3fd793787f114abdc8e59ad870\" to \"89d227c31890df899fc4531c2787fd2419759e3d\"",
    "created_at": "2019-07-15T18:16:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525381",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "605260c4c5000d3fd793787f114abdc8e59ad870" to "89d227c31890df899fc4531c2787fd2419759e3d"



---

archive/issue_comments_525382.json:
```json
{
    "body": "Changing commit from \"89d227c31890df899fc4531c2787fd2419759e3d\" to \"4c245ced57975592747387cd0c1ee16543b8bb47\"",
    "created_at": "2019-07-15T20:55:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525382",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "89d227c31890df899fc4531c2787fd2419759e3d" to "4c245ced57975592747387cd0c1ee16543b8bb47"



---

archive/issue_comments_525383.json:
```json
{
    "body": "<a id='comment:39'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|\n|[fd96a38](https://git.sagemath.org/sage.git/commit/?id=fd96a3818dc2ceb473983b2881d11da075e8d119)|`use AC_CHECK_LIB() calls, as they can be nested`|\n|[4c245ce](https://git.sagemath.org/sage.git/commit/?id=4c245ced57975592747387cd0c1ee16543b8bb47)|`configure version bump`|",
    "created_at": "2019-07-15T20:55:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525383",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:39'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|
|[fd96a38](https://git.sagemath.org/sage.git/commit/?id=fd96a3818dc2ceb473983b2881d11da075e8d119)|`use AC_CHECK_LIB() calls, as they can be nested`|
|[4c245ce](https://git.sagemath.org/sage.git/commit/?id=4c245ced57975592747387cd0c1ee16543b8bb47)|`configure version bump`|



---

archive/issue_comments_525384.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2019-07-15T20:57:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525384",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_525385.json:
```json
{
    "body": "<a id='comment:40'></a>\nplease review - should also work on Debian now...",
    "created_at": "2019-07-15T20:57:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525385",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:40'></a>
please review - should also work on Debian now...



---

archive/issue_comments_525386.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,5 +6,5 @@\n     AC_SEARCH_LIBS([acb_mat_eig_simple], [arb], [break], [sage_spkg_install_arb=yes])\n ```\n \n-configure tarball \n-http://users.ox.ac.uk/~coml0531/sage/configure-54d45ba31e6d669ec33a80fefc6be20ad40d9f21.tar.gz\n+configure tarball\n+http://users.ox.ac.uk/~coml0531/sage/configure-fd96a3818dc2ceb473983b2881d11da075e8d119.tar.gz\n``````\n",
    "created_at": "2019-07-15T20:57:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525386",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,5 +6,5 @@
     AC_SEARCH_LIBS([acb_mat_eig_simple], [arb], [break], [sage_spkg_install_arb=yes])
 ```
 
-configure tarball 
-http://users.ox.ac.uk/~coml0531/sage/configure-54d45ba31e6d669ec33a80fefc6be20ad40d9f21.tar.gz
+configure tarball
+http://users.ox.ac.uk/~coml0531/sage/configure-fd96a3818dc2ceb473983b2881d11da075e8d119.tar.gz
``````




---

archive/issue_comments_525387.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,5 +6,7 @@\n     AC_SEARCH_LIBS([acb_mat_eig_simple], [arb], [break], [sage_spkg_install_arb=yes])\n ```\n \n+we also take care of non-standard naming of arb's dylib here.\n+\n configure tarball\n http://users.ox.ac.uk/~coml0531/sage/configure-fd96a3818dc2ceb473983b2881d11da075e8d119.tar.gz\n``````\n",
    "created_at": "2019-07-15T21:46:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525387",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,5 +6,7 @@
     AC_SEARCH_LIBS([acb_mat_eig_simple], [arb], [break], [sage_spkg_install_arb=yes])
 ```
 
+we also take care of non-standard naming of arb's dylib here.
+
 configure tarball
 http://users.ox.ac.uk/~coml0531/sage/configure-fd96a3818dc2ceb473983b2881d11da075e8d119.tar.gz
``````




---

archive/issue_comments_525388.json:
```json
{
    "body": "<a id='comment:42'></a>\nQuick impressions on the `arb` part. I would test for `flint-arb` first, otherwise you could get the other `arb` on a debian system. I would use `AC_SEARCH_LIBS` see https://autotools.io/autoconf/finding.html. When you use `AC_CHECK_LIBS` or `AC_SEARCH_LIBS`  the library found will be added  to `LIBS` and that may be used for all linkings independently of other settings - of course that's what would happen in a fully autotooled package. The question is whether all those `SAGE_${PKG}_LIBRARY` variables are needed at all.",
    "created_at": "2019-07-15T21:59:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525388",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:42'></a>
Quick impressions on the `arb` part. I would test for `flint-arb` first, otherwise you could get the other `arb` on a debian system. I would use `AC_SEARCH_LIBS` see https://autotools.io/autoconf/finding.html. When you use `AC_CHECK_LIBS` or `AC_SEARCH_LIBS`  the library found will be added  to `LIBS` and that may be used for all linkings independently of other settings - of course that's what would happen in a fully autotooled package. The question is whether all those `SAGE_${PKG}_LIBRARY` variables are needed at all.



---

archive/issue_comments_525389.json:
```json
{
    "body": "<a id='comment:43'></a>\nI have now read the stuff about `src/sage/env.py.in` and this is a no for me. I don't run configure to build the sage python library and don't intend to if I can help it. I certainly can prepare the sources if you force me too but I'd rather not have to do that.",
    "created_at": "2019-07-15T22:07:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525389",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:43'></a>
I have now read the stuff about `src/sage/env.py.in` and this is a no for me. I don't run configure to build the sage python library and don't intend to if I can help it. I certainly can prepare the sources if you force me too but I'd rather not have to do that.



---

archive/issue_comments_525390.json:
```json
{
    "body": "<a id='comment:44'></a>\nReplying to [fbissey](#comment%3A42):\n> Quick impressions on the `arb` part. I would test for `flint-arb` first, otherwise you could get the other `arb` on a debian system. \n\n\nnot really - it tests for a specific function from the \"right\" arb, I cannot imagine the other arb having it.\n\n> I would use `AC_SEARCH_LIBS` see https://autotools.io/autoconf/finding.html.\n\n\nI tried that, but then you have to analyse the result of its run, and this leads to arcane code (one needs to strip `-l`, etc...)\n \n\n> When you use `AC_CHECK_LIBS` or `AC_SEARCH_LIBS`  the library found will be added  to `LIBS` and that may be used for all linkings independently of other settings - of course that's what would happen in a fully autotooled package. The question is whether all those `SAGE_${PKG}_LIBRARY` variables are needed at all.\n\n\nThe problem is that sagelib isn't autotooled, and so one needes to get arb/flint-arb strings into `# distutils libraries=` directives in Cython header files.",
    "created_at": "2019-07-15T22:08:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525390",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:44'></a>
Replying to [fbissey](#comment%3A42):
> Quick impressions on the `arb` part. I would test for `flint-arb` first, otherwise you could get the other `arb` on a debian system. 


not really - it tests for a specific function from the "right" arb, I cannot imagine the other arb having it.

> I would use `AC_SEARCH_LIBS` see https://autotools.io/autoconf/finding.html.


I tried that, but then you have to analyse the result of its run, and this leads to arcane code (one needs to strip `-l`, etc...)
 

> When you use `AC_CHECK_LIBS` or `AC_SEARCH_LIBS`  the library found will be added  to `LIBS` and that may be used for all linkings independently of other settings - of course that's what would happen in a fully autotooled package. The question is whether all those `SAGE_${PKG}_LIBRARY` variables are needed at all.


The problem is that sagelib isn't autotooled, and so one needes to get arb/flint-arb strings into `# distutils libraries=` directives in Cython header files.



---

archive/issue_comments_525391.json:
```json
{
    "body": "<a id='comment:45'></a>\nReplying to [fbissey](#comment%3A43):\n> I have now read the stuff about `src/sage/env.py.in` and this is a no for me. I don't run configure to build the sage python library and don't intend to if I can help it. I certainly can prepare the sources if you force me too but I'd rather not have to do that.\n\n\nwell, I don't see a point of not running `./configure`. Perhaps it was fashionable in Python world 10-15 years ago :-)",
    "created_at": "2019-07-15T22:15:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525391",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:45'></a>
Replying to [fbissey](#comment%3A43):
> I have now read the stuff about `src/sage/env.py.in` and this is a no for me. I don't run configure to build the sage python library and don't intend to if I can help it. I certainly can prepare the sources if you force me too but I'd rather not have to do that.


well, I don't see a point of not running `./configure`. Perhaps it was fashionable in Python world 10-15 years ago :-)



---

archive/issue_comments_525392.json:
```json
{
    "body": "<a id='comment:46'></a>\nOK you are right about the library order. Because of the check you make it doesn't matter.\n\nIt is an interesting comment about configure. Unfortunately, as far as I know running configure for a python project is still not a done thing. It doesn't mesh with the other elements of the python toolchain. There is certainly room for some configurability option in sage in regards to the optional libraries. But autotool's configure is definitely not the python way. Apart from cypari I cannot think of another python package using configure.\n\nLet's be honest, a small configure script for sage's optional stuff and the possibly unusual stuff would be fine to run. The full configure script for the whole of the distribution is inappropriate. It all goes back, once again, to \"sagelib\" being treated special instead of as a normal package. So many things would have to click in place once you do that. Other superbuild systems like the one for paraview don't treat the main target in a special way like sage's does.",
    "created_at": "2019-07-15T22:28:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525392",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:46'></a>
OK you are right about the library order. Because of the check you make it doesn't matter.

It is an interesting comment about configure. Unfortunately, as far as I know running configure for a python project is still not a done thing. It doesn't mesh with the other elements of the python toolchain. There is certainly room for some configurability option in sage in regards to the optional libraries. But autotool's configure is definitely not the python way. Apart from cypari I cannot think of another python package using configure.

Let's be honest, a small configure script for sage's optional stuff and the possibly unusual stuff would be fine to run. The full configure script for the whole of the distribution is inappropriate. It all goes back, once again, to "sagelib" being treated special instead of as a normal package. So many things would have to click in place once you do that. Other superbuild systems like the one for paraview don't treat the main target in a special way like sage's does.



---

archive/issue_comments_525393.json:
```json
{
    "body": "<a id='comment:47'></a>\nReplying to [fbissey](#comment%3A46):\n\n> It is an interesting comment about configure. Unfortunately, as far as I know running configure for a python project is still not a done thing. It doesn't mesh with the other elements of the python toolchain. There is certainly room for some configurability option in sage in regards to the optional libraries. But autotool's configure is definitely not the python way. Apart from cypari I cannot think of another python package using configure.\n\n\nHave you ever heard of cpython? :-)\n\n> \n> Let's be honest, a small configure script for sage's optional stuff and the possibly unusual stuff would be fine to run. The full configure script for the whole of the distribution is inappropriate. It all goes back, once again, to \"sagelib\" being treated special instead of as a normal package. So many things would have to click in place once you do that. \n\n\nwell, writing thousands of lines of Python to do configuration and building is what is (mal)practiced by many Python packages for reasons I don't really get. \n\n\n> Other superbuild systems like the one for paraview don't treat the main target in a special way like sage's does.\n\n\nI suggest you might look at the build system of Tensorflow (it uses Bazel ;-))",
    "created_at": "2019-07-15T22:57:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525393",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:47'></a>
Replying to [fbissey](#comment%3A46):

> It is an interesting comment about configure. Unfortunately, as far as I know running configure for a python project is still not a done thing. It doesn't mesh with the other elements of the python toolchain. There is certainly room for some configurability option in sage in regards to the optional libraries. But autotool's configure is definitely not the python way. Apart from cypari I cannot think of another python package using configure.


Have you ever heard of cpython? :-)

> 
> Let's be honest, a small configure script for sage's optional stuff and the possibly unusual stuff would be fine to run. The full configure script for the whole of the distribution is inappropriate. It all goes back, once again, to "sagelib" being treated special instead of as a normal package. So many things would have to click in place once you do that. 


well, writing thousands of lines of Python to do configuration and building is what is (mal)practiced by many Python packages for reasons I don't really get. 


> Other superbuild systems like the one for paraview don't treat the main target in a special way like sage's does.


I suggest you might look at the build system of Tensorflow (it uses Bazel ;-))



---

archive/issue_comments_525394.json:
```json
{
    "body": "<a id='comment:48'></a>\n`cpython` is the language. While it would be interesting to see if python could bootstrap itself, I am considering that you are stretching your credibility there.\n\n`bazel` and the way it is used in tensorflow [heck the whole way tensorflow is build] is a whole private hell of its own. Let's not go there. Invoking a worst project does not make yours any better. That reminds of my daughter pretending her room isn't messy because she saw a bigger mess at one of her friend's house.",
    "created_at": "2019-07-15T23:09:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525394",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:48'></a>
`cpython` is the language. While it would be interesting to see if python could bootstrap itself, I am considering that you are stretching your credibility there.

`bazel` and the way it is used in tensorflow [heck the whole way tensorflow is build] is a whole private hell of its own. Let's not go there. Invoking a worst project does not make yours any better. That reminds of my daughter pretending her room isn't messy because she saw a bigger mess at one of her friend's house.



---

archive/issue_comments_525395.json:
```json
{
    "body": "<a id='comment:49'></a>\nReplying to [fbissey](#comment%3A48):\n> `cpython` is the language. While it would be interesting to see if python could bootstrap itself, I am considering that you are stretching your credibility there.\n\n\nI don't claim any credibility, but merely observe that Python 3 is moving quite a bit of its build system from setup.py to autotools. \n\nI don't get it why pre-build manipulation of `Python/Cython` code must be done in Python or shell, and not with more suitable tools. Sounds like religion rather than common sense to me.",
    "created_at": "2019-07-15T23:54:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525395",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:49'></a>
Replying to [fbissey](#comment%3A48):
> `cpython` is the language. While it would be interesting to see if python could bootstrap itself, I am considering that you are stretching your credibility there.


I don't claim any credibility, but merely observe that Python 3 is moving quite a bit of its build system from setup.py to autotools. 

I don't get it why pre-build manipulation of `Python/Cython` code must be done in Python or shell, and not with more suitable tools. Sounds like religion rather than common sense to me.



---

archive/issue_comments_525396.json:
```json
{
    "body": "<a id='comment:50'></a>\nReplying to [dimpase](#comment%3A49):\n> Replying to [fbissey](#comment%3A48):\n> > `cpython` is the language. While it would be interesting to see if python could bootstrap itself, I am considering that you are stretching your credibility there.\n\n> \n> I don't claim any credibility, but merely observe that Python 3 is moving quite a bit of its build system from setup.py to autotools. \n> \n> I don't get it why pre-build manipulation of `Python/Cython` code must be done in Python or shell, and not with more suitable tools. Sounds like religion rather than common sense to me.\n\n\nI haven't seen that. But that is welcome in some way.\n\nBut the big issue we have in distro if I can pinpoint it better is not necessarily that you want to run configure. It is that you run configure for sage the distro and use it for sage the package. \"sagelib\" should be its own self contained package, and if it had its own configure why not. But leveraging your monster build system in the way you do, is not fine. __We don't want it.__",
    "created_at": "2019-07-16T00:02:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525396",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:50'></a>
Replying to [dimpase](#comment%3A49):
> Replying to [fbissey](#comment%3A48):
> > `cpython` is the language. While it would be interesting to see if python could bootstrap itself, I am considering that you are stretching your credibility there.

> 
> I don't claim any credibility, but merely observe that Python 3 is moving quite a bit of its build system from setup.py to autotools. 
> 
> I don't get it why pre-build manipulation of `Python/Cython` code must be done in Python or shell, and not with more suitable tools. Sounds like religion rather than common sense to me.


I haven't seen that. But that is welcome in some way.

But the big issue we have in distro if I can pinpoint it better is not necessarily that you want to run configure. It is that you run configure for sage the distro and use it for sage the package. "sagelib" should be its own self contained package, and if it had its own configure why not. But leveraging your monster build system in the way you do, is not fine. __We don't want it.__



---

archive/issue_comments_525397.json:
```json
{
    "body": "<a id='comment:51'></a>\nUnvendoring everything that was sheepishly vendored into Sage over the years is an essential step towards having a self contained package for sagelib alone.\n\nThis ticket is a part of the unvendoring process. One way or another, the problem here is that arb library does not have pkg-config support, and yes, we want to support !Debian/Ubuntu arb package with non-standard naming.",
    "created_at": "2019-07-16T00:14:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525397",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:51'></a>
Unvendoring everything that was sheepishly vendored into Sage over the years is an essential step towards having a self contained package for sagelib alone.

This ticket is a part of the unvendoring process. One way or another, the problem here is that arb library does not have pkg-config support, and yes, we want to support !Debian/Ubuntu arb package with non-standard naming.



---

archive/issue_comments_525398.json:
```json
{
    "body": "<a id='comment:52'></a>\nI understand perfectly. Since the controversial changes are for the sake of debian, I think a debian developer should give their opinion.\n\n`@`thansen if you would like to oblige or pass it to someone else in debian for review.\n\nAs I said I won't review this any further but won't oppose it further either. I have my own contingency plans.",
    "created_at": "2019-07-16T00:29:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525398",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:52'></a>
I understand perfectly. Since the controversial changes are for the sake of debian, I think a debian developer should give their opinion.

`@`thansen if you would like to oblige or pass it to someone else in debian for review.

As I said I won't review this any further but won't oppose it further either. I have my own contingency plans.



---

archive/issue_comments_525399.json:
```json
{
    "body": "<a id='comment:53'></a>\nalternatively I can store an environment variable in `src/bin/sage-env-config`\n(which, as you know, is also created by `./configure` :-))\nand then access it from `src/sage/env.py` to populate `ARB_LIBRARY`.\n\nThis would avoid creating `src/sage/env.py.in`.\n\nIf this is more acceptable (after all, distributions already deal with rewriting\n`src/bin/sage-env-config.in`) let me know, I can do this change.",
    "created_at": "2019-07-16T09:47:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525399",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:53'></a>
alternatively I can store an environment variable in `src/bin/sage-env-config`
(which, as you know, is also created by `./configure` :-))
and then access it from `src/sage/env.py` to populate `ARB_LIBRARY`.

This would avoid creating `src/sage/env.py.in`.

If this is more acceptable (after all, distributions already deal with rewriting
`src/bin/sage-env-config.in`) let me know, I can do this change.



---

archive/issue_comments_525400.json:
```json
{
    "body": "<a id='comment:54'></a>\nReplying to [dimpase](#comment%3A53):\n> alternatively I can store an environment variable in `src/bin/sage-env-config`\n> (which, as you know, is also created by `./configure` :-))\n> and then access it from `src/sage/env.py` to populate `ARB_LIBRARY`.\n> \n> This would avoid creating `src/sage/env.py.in`.\n> \n> If this is more acceptable (after all, distributions already deal with rewriting\n> `src/bin/sage-env-config.in`) let me know, I can do this change.\n\n\n+1 to this alternative. Setting env variables at build time is much better than having to tamper with source files.",
    "created_at": "2019-07-16T10:04:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525400",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:54'></a>
Replying to [dimpase](#comment%3A53):
> alternatively I can store an environment variable in `src/bin/sage-env-config`
> (which, as you know, is also created by `./configure` :-))
> and then access it from `src/sage/env.py` to populate `ARB_LIBRARY`.
> 
> This would avoid creating `src/sage/env.py.in`.
> 
> If this is more acceptable (after all, distributions already deal with rewriting
> `src/bin/sage-env-config.in`) let me know, I can do this change.


+1 to this alternative. Setting env variables at build time is much better than having to tamper with source files.



---

archive/issue_comments_525401.json:
```json
{
    "body": "<a id='comment:55'></a>\nWhile it feels better to deal with an environment variable I wonder if it is better to elect to touch the source code here. \n\nPeople can compile cython code from sage against sage libraries. If we don't touch the code minimally and someone wants to compile some cython code from sage involving arb, they will have to define the variable unless we put it permanently in the environment in some way (which is also doable of course but I stopped doing that around sage-5.0 I think).",
    "created_at": "2019-07-16T10:14:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525401",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:55'></a>
While it feels better to deal with an environment variable I wonder if it is better to elect to touch the source code here. 

People can compile cython code from sage against sage libraries. If we don't touch the code minimally and someone wants to compile some cython code from sage involving arb, they will have to define the variable unless we put it permanently in the environment in some way (which is also doable of course but I stopped doing that around sage-5.0 I think).



---

archive/issue_comments_525402.json:
```json
{
    "body": "<a id='comment:56'></a>\nWell, you tell me what you prefer. I think that to compile cython code from sage against sage libraries requires pkg-config knowing about `SAGE_LOCAL/lib/pkgconfig` directory to pick up settings for quite a number of Sage libraries, otherwise it's doomed to fail.\nIn effect, this means either using Sage's pkg-config or providing a properly set `PKG_CONFIG_PATH`. That is you cannot get away from setting some environment variables.\n\nIn fact I plan to work on `spkg-configure.m4` for `pkgconf` Sage package (cf. #27827, a part of #27330) and to install `PKG_CONFIG_PATH` into `src/bin/sage-env-config` in case\na system has pkg-config installed.",
    "created_at": "2019-07-16T10:26:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525402",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:56'></a>
Well, you tell me what you prefer. I think that to compile cython code from sage against sage libraries requires pkg-config knowing about `SAGE_LOCAL/lib/pkgconfig` directory to pick up settings for quite a number of Sage libraries, otherwise it's doomed to fail.
In effect, this means either using Sage's pkg-config or providing a properly set `PKG_CONFIG_PATH`. That is you cannot get away from setting some environment variables.

In fact I plan to work on `spkg-configure.m4` for `pkgconf` Sage package (cf. #27827, a part of #27330) and to install `PKG_CONFIG_PATH` into `src/bin/sage-env-config` in case
a system has pkg-config installed.



---

archive/issue_comments_525403.json:
```json
{
    "body": "<a id='comment:57'></a>\nIf it currently wouldn't work for cython code, then environment is best - it doesn't break something currently working. Thank you for pulling through my painful exhortations with something palatable.",
    "created_at": "2019-07-16T10:29:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525403",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:57'></a>
If it currently wouldn't work for cython code, then environment is best - it doesn't break something currently working. Thank you for pulling through my painful exhortations with something palatable.



---

archive/issue_comments_525404.json:
```json
{
    "body": "<a id='comment:58'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|\n|[cf8501c](https://git.sagemath.org/sage.git/commit/?id=cf8501c4fe6a1b2b7435c00957765230e0cc0f5a)|`pass the name of arb dylib via an environment variable`|\n|[f463852](https://git.sagemath.org/sage.git/commit/?id=f463852fe18b6974396b442f2ab1b2300cf5547e)|`new configure version`|",
    "created_at": "2019-07-16T16:29:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525404",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:58'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|
|[cf8501c](https://git.sagemath.org/sage.git/commit/?id=cf8501c4fe6a1b2b7435c00957765230e0cc0f5a)|`pass the name of arb dylib via an environment variable`|
|[f463852](https://git.sagemath.org/sage.git/commit/?id=f463852fe18b6974396b442f2ab1b2300cf5547e)|`new configure version`|



---

archive/issue_comments_525405.json:
```json
{
    "body": "Changing commit from \"4c245ced57975592747387cd0c1ee16543b8bb47\" to \"f463852fe18b6974396b442f2ab1b2300cf5547e\"",
    "created_at": "2019-07-16T16:29:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525405",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4c245ced57975592747387cd0c1ee16543b8bb47" to "f463852fe18b6974396b442f2ab1b2300cf5547e"



---

archive/issue_comments_525406.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,4 +9,5 @@\n we also take care of non-standard naming of arb's dylib here.\n \n configure tarball\n-http://users.ox.ac.uk/~coml0531/sage/configure-fd96a3818dc2ceb473983b2881d11da075e8d119.tar.gz\n+http://users.ox.ac.uk/~coml0531/sage/configure-cf8501c4fe6a1b2b7435c00957765230e0cc0f5a.tar.gz\n+\n``````\n",
    "created_at": "2019-07-16T16:30:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525406",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,4 +9,5 @@
 we also take care of non-standard naming of arb's dylib here.
 
 configure tarball
-http://users.ox.ac.uk/~coml0531/sage/configure-fd96a3818dc2ceb473983b2881d11da075e8d119.tar.gz
+http://users.ox.ac.uk/~coml0531/sage/configure-cf8501c4fe6a1b2b7435c00957765230e0cc0f5a.tar.gz
+
``````




---

archive/issue_comments_525407.json:
```json
{
    "body": "<a id='comment:60'></a>\nOK, it's changed as discussed. Please review.",
    "created_at": "2019-07-16T16:59:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525407",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:60'></a>
OK, it's changed as discussed. Please review.



---

archive/issue_comments_525408.json:
```json
{
    "body": "<a id='comment:61'></a>\nFWIW sagelib builds fine against system packages now by just setting SAGE_ARB_LIBRARY (and not running configure)",
    "created_at": "2019-07-16T17:21:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525408",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:61'></a>
FWIW sagelib builds fine against system packages now by just setting SAGE_ARB_LIBRARY (and not running configure)



---

archive/issue_comments_525409.json:
```json
{
    "body": "<a id='comment:62'></a>\nFor what its worth, I'm fine with setting an environment variable. There are already lots of env vars to set, one more or less won't make a difference. And I'm also glad we can get around configure. Thanks Fran\u00e7ois for taking the distro standpoint here :)\n\nReplying to [dimpase](#comment%3A51):\n> Unvendoring everything that was sheepishly vendored into Sage over the years is an essential step towards having a self contained package for sagelib alone.\n\n\nI feel like you're arguing slightly different things here. Treating the sagelib package as just another package could in principle be done without removing any vendoring. You keep the current build system, add a `sagelib` package under build, add basically everything as a dependency for it. `sagelib` can then have its own `./configure`, which configure just sagelib and not everything else. Distros would have not problem running that.",
    "created_at": "2019-07-16T18:52:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525409",
    "user": "https://github.com/timokau"
}
```

<a id='comment:62'></a>
For what its worth, I'm fine with setting an environment variable. There are already lots of env vars to set, one more or less won't make a difference. And I'm also glad we can get around configure. Thanks François for taking the distro standpoint here :)

Replying to [dimpase](#comment%3A51):
> Unvendoring everything that was sheepishly vendored into Sage over the years is an essential step towards having a self contained package for sagelib alone.


I feel like you're arguing slightly different things here. Treating the sagelib package as just another package could in principle be done without removing any vendoring. You keep the current build system, add a `sagelib` package under build, add basically everything as a dependency for it. `sagelib` can then have its own `./configure`, which configure just sagelib and not everything else. Distros would have not problem running that.



---

archive/issue_comments_525410.json:
```json
{
    "body": "<a id='comment:63'></a>\nReplying to [gh-timokau](#comment%3A62):\n> Replying to [dimpase](#comment%3A51):\n> > Unvendoring everything that was sheepishly vendored into Sage over the years is an essential step towards having a self contained package for sagelib alone.\n\n> \n> I feel like you're arguing slightly different things here. Treating the sagelib package as just another package could in principle be done without removing any vendoring. \n\n\nthe main configure configures \"just\" sagelib. What one has in `build/pkgs/` are vendored dependencies, which ought to disappear.\nThese little (or not so little) `spkg-configure.m4` scripts are part of the sagelib configure, they check that the deps are satisfied.\nThey have nothing to do with building the relevant deps (they deal with NOT building them).\n\n> You keep the current build system, add a `sagelib` package under build, add basically everything as a dependency for it. `sagelib` can then have its own `./configure`, which configure just sagelib and not everything else. Distros would have not problem running that.",
    "created_at": "2019-07-16T19:10:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525410",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:63'></a>
Replying to [gh-timokau](#comment%3A62):
> Replying to [dimpase](#comment%3A51):
> > Unvendoring everything that was sheepishly vendored into Sage over the years is an essential step towards having a self contained package for sagelib alone.

> 
> I feel like you're arguing slightly different things here. Treating the sagelib package as just another package could in principle be done without removing any vendoring. 


the main configure configures "just" sagelib. What one has in `build/pkgs/` are vendored dependencies, which ought to disappear.
These little (or not so little) `spkg-configure.m4` scripts are part of the sagelib configure, they check that the deps are satisfied.
They have nothing to do with building the relevant deps (they deal with NOT building them).

> You keep the current build system, add a `sagelib` package under build, add basically everything as a dependency for it. `sagelib` can then have its own `./configure`, which configure just sagelib and not everything else. Distros would have not problem running that.



---

archive/issue_comments_525411.json:
```json
{
    "body": "<a id='comment:64'></a>\nI'll be waiting to see if the patchbot turns green, but in principle I am OK with this and will give it a positive review if no problems turn up.",
    "created_at": "2019-07-16T21:10:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525411",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:64'></a>
I'll be waiting to see if the patchbot turns green, but in principle I am OK with this and will give it a positive review if no problems turn up.



---

archive/issue_comments_525412.json:
```json
{
    "body": "<a id='comment:65'></a>\nnot sure whether patchbots are able to deal well with packages changing configure; basically, for a proper test one needs to have appropriate versions of arb etc installed (so e.g. Debian 10 and Gentoo should be OK - and these are what I tested them on, as well as on other platforms, such as OSX with Homebrew).",
    "created_at": "2019-07-17T10:17:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525412",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:65'></a>
not sure whether patchbots are able to deal well with packages changing configure; basically, for a proper test one needs to have appropriate versions of arb etc installed (so e.g. Debian 10 and Gentoo should be OK - and these are what I tested them on, as well as on other platforms, such as OSX with Homebrew).



---

archive/issue_comments_525413.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Fran\u00e7ois Bissey\"",
    "created_at": "2019-07-17T10:57:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525413",
    "user": "https://github.com/kiwifb"
}
```

Changing reviewer from "" to "François Bissey"



---

archive/issue_comments_525414.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-07-17T10:57:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525414",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_525415.json:
```json
{
    "body": "<a id='comment:66'></a>\nI was hoping the changes in the tarball handling would have helped with that. But obviously not. It is good enough, in my opinion, to send to the bots to figure if corner cases have been missed.",
    "created_at": "2019-07-17T10:57:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525415",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:66'></a>
I was hoping the changes in the tarball handling would have helped with that. But obviously not. It is good enough, in my opinion, to send to the bots to figure if corner cases have been missed.



---

archive/issue_comments_525416.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2019-07-19T11:57:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525416",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_525417.json:
```json
{
    "body": "Changing commit from \"f463852fe18b6974396b442f2ab1b2300cf5547e\" to \"166e00c3652a3d1c43fe4616b2d8dbb888f6f879\"",
    "created_at": "2019-07-19T11:57:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525417",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f463852fe18b6974396b442f2ab1b2300cf5547e" to "166e00c3652a3d1c43fe4616b2d8dbb888f6f879"



---

archive/issue_comments_525418.json:
```json
{
    "body": "<a id='comment:67'></a>\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:\n|                                                                                                                                           |                                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|\n|[2c4d350](https://git.sagemath.org/sage.git/commit/?id=2c4d3506fbb122678f9be24139209e8ae2165728)|`set SAGE_ARB_LIBRARY correctly in every scenario`|\n|[166e00c](https://git.sagemath.org/sage.git/commit/?id=166e00c3652a3d1c43fe4616b2d8dbb888f6f879)|`bump up configure`|",
    "created_at": "2019-07-19T11:57:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525418",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:67'></a>
Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:
|                                                                                                                                           |                                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|
|[2c4d350](https://git.sagemath.org/sage.git/commit/?id=2c4d3506fbb122678f9be24139209e8ae2165728)|`set SAGE_ARB_LIBRARY correctly in every scenario`|
|[166e00c](https://git.sagemath.org/sage.git/commit/?id=166e00c3652a3d1c43fe4616b2d8dbb888f6f879)|`bump up configure`|



---

archive/issue_comments_525419.json:
```json
{
    "body": "<a id='comment:68'></a>\nfixing a \"minor\" m4 error in the latest change.",
    "created_at": "2019-07-19T11:59:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525419",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:68'></a>
fixing a "minor" m4 error in the latest change.



---

archive/issue_comments_525420.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,5 +9,4 @@\n we also take care of non-standard naming of arb's dylib here.\n \n configure tarball\n-http://users.ox.ac.uk/~coml0531/sage/configure-cf8501c4fe6a1b2b7435c00957765230e0cc0f5a.tar.gz\n-\n+http://users.ox.ac.uk/~coml0531/sage/configure-2c4d3506fbb122678f9be24139209e8ae2165728.tar.gz\n``````\n",
    "created_at": "2019-07-19T11:59:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525420",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,5 +9,4 @@
 we also take care of non-standard naming of arb's dylib here.
 
 configure tarball
-http://users.ox.ac.uk/~coml0531/sage/configure-cf8501c4fe6a1b2b7435c00957765230e0cc0f5a.tar.gz
-
+http://users.ox.ac.uk/~coml0531/sage/configure-2c4d3506fbb122678f9be24139209e8ae2165728.tar.gz
``````




---

archive/issue_comments_525421.json:
```json
{
    "body": "<a id='comment:69'></a>\nCould you add a fallback for SAGE_ARB_LIBRARY in env.py? This wouldn't make any difference for users of the Sage build system (since it is set in sage-env-config) or distros that rename the arb library (which need to set it anyway), and would save distros that use the standard arb library name from having to worry about it\n\n```\n--- src/sage/env.py.orig        2019-07-19 14:05:32.947459540 +0200\n+++ src/sage/env.py     2019-07-19 14:15:14.193540393 +0200\n@@ -406,6 +406,8 @@\n     # This is not a problem in practice since LinBox depends on\n     # fflas-ffpack and fflas-ffpack does add such a C++11 flag.\n     aliases[\"LINBOX_CFLAGS\"].append(\"-std=gnu++11\")\n-    aliases[\"ARB_LIBRARY\"] = os.environ['SAGE_ARB_LIBRARY']\n-\n+    if os.environ.get('SAGE_ARB_LIBRARY'):\n+        aliases[\"ARB_LIBRARY\"] = os.environ['SAGE_ARB_LIBRARY']\n+    else:\n+        aliases[\"ARB_LIBRARY\"] = 'arb'\n     return aliases\n```",
    "created_at": "2019-07-19T12:20:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525421",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:69'></a>
Could you add a fallback for SAGE_ARB_LIBRARY in env.py? This wouldn't make any difference for users of the Sage build system (since it is set in sage-env-config) or distros that rename the arb library (which need to set it anyway), and would save distros that use the standard arb library name from having to worry about it

```
--- src/sage/env.py.orig        2019-07-19 14:05:32.947459540 +0200
+++ src/sage/env.py     2019-07-19 14:15:14.193540393 +0200
@@ -406,6 +406,8 @@
     # This is not a problem in practice since LinBox depends on
     # fflas-ffpack and fflas-ffpack does add such a C++11 flag.
     aliases["LINBOX_CFLAGS"].append("-std=gnu++11")
-    aliases["ARB_LIBRARY"] = os.environ['SAGE_ARB_LIBRARY']
-
+    if os.environ.get('SAGE_ARB_LIBRARY'):
+        aliases["ARB_LIBRARY"] = os.environ['SAGE_ARB_LIBRARY']
+    else:
+        aliases["ARB_LIBRARY"] = 'arb'
     return aliases
```



---

archive/issue_comments_525422.json:
```json
{
    "body": "Changing commit from \"166e00c3652a3d1c43fe4616b2d8dbb888f6f879\" to \"411d4a77fc8a691ed09cd14b9605d59dde292850\"",
    "created_at": "2019-07-19T12:31:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525422",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "166e00c3652a3d1c43fe4616b2d8dbb888f6f879" to "411d4a77fc8a691ed09cd14b9605d59dde292850"



---

archive/issue_comments_525423.json:
```json
{
    "body": "<a id='comment:70'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|\n|[73dd667](https://git.sagemath.org/sage.git/commit/?id=73dd6671794c7bf5e408f5cba884df00ff341c9d)|`fallback for ARB_LIBRARY in src/sage/env.py`|\n|[411d4a7](https://git.sagemath.org/sage.git/commit/?id=411d4a77fc8a691ed09cd14b9605d59dde292850)|`bump up configure`|",
    "created_at": "2019-07-19T12:31:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525423",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:70'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|
|[73dd667](https://git.sagemath.org/sage.git/commit/?id=73dd6671794c7bf5e408f5cba884df00ff341c9d)|`fallback for ARB_LIBRARY in src/sage/env.py`|
|[411d4a7](https://git.sagemath.org/sage.git/commit/?id=411d4a77fc8a691ed09cd14b9605d59dde292850)|`bump up configure`|



---

archive/issue_comments_525424.json:
```json
{
    "body": "<a id='comment:71'></a>\nDone the fallback.",
    "created_at": "2019-07-19T12:34:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525424",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:71'></a>
Done the fallback.



---

archive/issue_comments_525425.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,4 +9,4 @@\n we also take care of non-standard naming of arb's dylib here.\n \n configure tarball\n-http://users.ox.ac.uk/~coml0531/sage/configure-2c4d3506fbb122678f9be24139209e8ae2165728.tar.gz\n+http://users.ox.ac.uk/~coml0531/sage/configure-73dd6671794c7bf5e408f5cba884df00ff341c9d.tar.gz\n``````\n",
    "created_at": "2019-07-19T12:34:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525425",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,4 +9,4 @@
 we also take care of non-standard naming of arb's dylib here.
 
 configure tarball
-http://users.ox.ac.uk/~coml0531/sage/configure-2c4d3506fbb122678f9be24139209e8ae2165728.tar.gz
+http://users.ox.ac.uk/~coml0531/sage/configure-73dd6671794c7bf5e408f5cba884df00ff341c9d.tar.gz
``````




---

archive/issue_comments_525426.json:
```json
{
    "body": "Changing branch from \"u/dimpase/packages/arbconfig\" to \"u/isuruf/arbconfig\"",
    "created_at": "2019-07-21T04:11:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525426",
    "user": "https://github.com/isuruf"
}
```

Changing branch from "u/dimpase/packages/arbconfig" to "u/isuruf/arbconfig"



---

archive/issue_comments_525427.json:
```json
{
    "body": "Changing commit from \"411d4a77fc8a691ed09cd14b9605d59dde292850\" to \"9f79388b5a7ba7dac32884f45cd792496baed4db\"",
    "created_at": "2019-07-21T04:11:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525427",
    "user": "https://github.com/isuruf"
}
```

Changing commit from "411d4a77fc8a691ed09cd14b9605d59dde292850" to "9f79388b5a7ba7dac32884f45cd792496baed4db"



---

archive/issue_comments_525428.json:
```json
{
    "body": "Changing reviewer from \"Fran\u00e7ois Bissey\" to \"Fran\u00e7ois Bissey, Isuru Fernando\"",
    "created_at": "2019-07-21T04:12:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525428",
    "user": "https://github.com/isuruf"
}
```

Changing reviewer from "François Bissey" to "François Bissey, Isuru Fernando"



---

archive/issue_comments_525429.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-07-21T04:12:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525429",
    "user": "https://github.com/isuruf"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_525430.json:
```json
{
    "body": "Changing author from \"Dima Pasechnik\" to \"Dima Pasechnik, Isuru Fernando\"",
    "created_at": "2019-07-21T04:12:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525430",
    "user": "https://github.com/isuruf"
}
```

Changing author from "Dima Pasechnik" to "Dima Pasechnik, Isuru Fernando"



---

archive/issue_comments_525431.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,5 +8,4 @@\n \n we also take care of non-standard naming of arb's dylib here.\n \n-configure tarball\n-http://users.ox.ac.uk/~coml0531/sage/configure-73dd6671794c7bf5e408f5cba884df00ff341c9d.tar.gz\n+configure tarball http://users.ox.ac.uk/~coml0531/sage/configure-b5de8991395bbf58e663e69d6250de656897c4e2.tar.gz\n``````\n",
    "created_at": "2019-07-21T08:41:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525431",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,5 +8,4 @@
 
 we also take care of non-standard naming of arb's dylib here.
 
-configure tarball
-http://users.ox.ac.uk/~coml0531/sage/configure-73dd6671794c7bf5e408f5cba884df00ff341c9d.tar.gz
+configure tarball http://users.ox.ac.uk/~coml0531/sage/configure-b5de8991395bbf58e663e69d6250de656897c4e2.tar.gz
``````




---

archive/issue_comments_525432.json:
```json
{
    "body": "Changing commit from \"9f79388b5a7ba7dac32884f45cd792496baed4db\" to \"29d4ce2b95a7a721afc22db4633995c4a93d7f31\"",
    "created_at": "2019-07-21T08:42:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525432",
    "user": "https://github.com/dimpase"
}
```

Changing commit from "9f79388b5a7ba7dac32884f45cd792496baed4db" to "29d4ce2b95a7a721afc22db4633995c4a93d7f31"



---

archive/issue_comments_525433.json:
```json
{
    "body": "<a id='comment:75'></a>\nLast 10 new commits:\n|                                                                                                                                          |                                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|\n|[5aad412](https://git.sagemath.org/sage.git/commit?id=5aad412d1b55a53206aa12852bd5e8468598f725)|`sage should be called with ./ in bootstrap`|\n|[085f518](https://git.sagemath.org/sage.git/commit?id=085f518ef7b83466f5dcef67f8c807138979c2ae)|`Debian names the arb library differently`|\n|[d24ae0f](https://git.sagemath.org/sage.git/commit?id=d24ae0faabf13b584d46dde34f3083bf82955b63)|`mention flint and arb (and one more forgotten package) for debian`|\n|[2e04b25](https://git.sagemath.org/sage.git/commit?id=2e04b2557206becbddb78c6cfe979c4cd7f9055b)|`add the name of arb dylib to cython_aliases`|\n|[0e4e71a](https://git.sagemath.org/sage.git/commit?id=0e4e71a020b514033d1a87b0d41d739833e3ff0a)|`use AC_CHECK_LIB() calls, as they can be nested`|\n|[3e8bd98](https://git.sagemath.org/sage.git/commit?id=3e8bd983b1f2cbfb39857d511e21796fe5fd4c64)|`pass the name of arb dylib via an environment variable`|\n|[ce2b9e0](https://git.sagemath.org/sage.git/commit?id=ce2b9e020ba96fbc270541a61fd826bece976a37)|`set SAGE_ARB_LIBRARY correctly in every scenario`|\n|[12f5129](https://git.sagemath.org/sage.git/commit?id=12f5129afb962d6e9304391ed0d38f31fea52a18)|`fallback for ARB_LIBRARY in src/sage/env.py`|\n|[b5de899](https://git.sagemath.org/sage.git/commit?id=b5de8991395bbf58e663e69d6250de656897c4e2)|`make code simpler`|\n|[29d4ce2](https://git.sagemath.org/sage.git/commit?id=29d4ce2b95a7a721afc22db4633995c4a93d7f31)|`bump up configure`|",
    "created_at": "2019-07-21T08:42:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525433",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:75'></a>
Last 10 new commits:
|                                                                                                                                          |                                            |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|
|[5aad412](https://git.sagemath.org/sage.git/commit?id=5aad412d1b55a53206aa12852bd5e8468598f725)|`sage should be called with ./ in bootstrap`|
|[085f518](https://git.sagemath.org/sage.git/commit?id=085f518ef7b83466f5dcef67f8c807138979c2ae)|`Debian names the arb library differently`|
|[d24ae0f](https://git.sagemath.org/sage.git/commit?id=d24ae0faabf13b584d46dde34f3083bf82955b63)|`mention flint and arb (and one more forgotten package) for debian`|
|[2e04b25](https://git.sagemath.org/sage.git/commit?id=2e04b2557206becbddb78c6cfe979c4cd7f9055b)|`add the name of arb dylib to cython_aliases`|
|[0e4e71a](https://git.sagemath.org/sage.git/commit?id=0e4e71a020b514033d1a87b0d41d739833e3ff0a)|`use AC_CHECK_LIB() calls, as they can be nested`|
|[3e8bd98](https://git.sagemath.org/sage.git/commit?id=3e8bd983b1f2cbfb39857d511e21796fe5fd4c64)|`pass the name of arb dylib via an environment variable`|
|[ce2b9e0](https://git.sagemath.org/sage.git/commit?id=ce2b9e020ba96fbc270541a61fd826bece976a37)|`set SAGE_ARB_LIBRARY correctly in every scenario`|
|[12f5129](https://git.sagemath.org/sage.git/commit?id=12f5129afb962d6e9304391ed0d38f31fea52a18)|`fallback for ARB_LIBRARY in src/sage/env.py`|
|[b5de899](https://git.sagemath.org/sage.git/commit?id=b5de8991395bbf58e663e69d6250de656897c4e2)|`make code simpler`|
|[29d4ce2](https://git.sagemath.org/sage.git/commit?id=29d4ce2b95a7a721afc22db4633995c4a93d7f31)|`bump up configure`|



---

archive/issue_comments_525434.json:
```json
{
    "body": "Changing branch from \"u/isuruf/arbconfig\" to \"u/dimpase/packages/arbconfig\"",
    "created_at": "2019-07-21T08:42:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525434",
    "user": "https://github.com/dimpase"
}
```

Changing branch from "u/isuruf/arbconfig" to "u/dimpase/packages/arbconfig"



---

archive/issue_comments_525435.json:
```json
{
    "body": "<a id='comment:76'></a>\nmerged u/isuruf/arbconfig (which erroneously contained just 1 commit), rebased over 8.9.beta3, bumpled up configure",
    "created_at": "2019-07-21T08:44:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525435",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:76'></a>
merged u/isuruf/arbconfig (which erroneously contained just 1 commit), rebased over 8.9.beta3, bumpled up configure



---

archive/issue_comments_525436.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-07-26T20:27:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525436",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_525437.json:
```json
{
    "body": "Changing branch from \"u/dimpase/packages/arbconfig\" to \"29d4ce2b95a7a721afc22db4633995c4a93d7f31\"",
    "created_at": "2019-07-26T20:27:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525437",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/dimpase/packages/arbconfig" to "29d4ce2b95a7a721afc22db4633995c4a93d7f31"



---

archive/issue_events_067691.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-07-26T20:27:32Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27270#event-67691"
}
```



---

archive/issue_comments_525438.json:
```json
{
    "body": "Changing commit from \"29d4ce2b95a7a721afc22db4633995c4a93d7f31\" to \"\"",
    "created_at": "2020-02-06T23:02:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525438",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "29d4ce2b95a7a721afc22db4633995c4a93d7f31" to ""



---

archive/issue_comments_525439.json:
```json
{
    "body": "<a id='comment:78'></a>\nRecognizing `flint-arb` here broke the optional package `e-antic` (used by `normaliz`). Follow-up = #27952.",
    "created_at": "2020-02-06T23:02:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27270#issuecomment-525439",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:78'></a>
Recognizing `flint-arb` here broke the optional package `e-antic` (used by `normaliz`). Follow-up = #27952.
