# Issue 27444: Expose multithreaded fflas-ffpack features

archive/issues_027207.json:
```json
{
    "assignees": [],
    "body": "Dense linear algebra mod small p uses fflas-ffpack over float or double.\nThis library support multithreading for some routines: \n- matrix-matrix multiplication\n- PLUQ decomposition\n- etc.\n\nThis ticket proposes to expose these parallel variants to Sage user.\n\nDepends on #26932\n\nCC:  @ClementPernet\n\nBranch: **[e432cb0](https://github.com/sagemath/sagetrac-mirror/commit/e432cb0e542e6c2d7d5e5495611cb42240b89c17)**\n\nReviewer: **Luca De Feo**\n\nAuthor: **Hongguang Zhu, Cl\u00e9ment Pernet**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/27444_\n\n",
    "closed_at": "2019-09-02T21:41:23Z",
    "created_at": "2019-03-08T09:49:11Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.9",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Expose multithreaded fflas-ffpack features",
    "type": "issue",
    "updated_at": "2020-06-07T00:09:29Z",
    "url": "https://github.com/sagemath/sage/issues/27444",
    "user": "https://github.com/ZHG2017"
}
```
Dense linear algebra mod small p uses fflas-ffpack over float or double.
This library support multithreading for some routines: 
- matrix-matrix multiplication
- PLUQ decomposition
- etc.

This ticket proposes to expose these parallel variants to Sage user.

Depends on #26932

CC:  @ClementPernet

Branch: **[e432cb0](https://github.com/sagemath/sagetrac-mirror/commit/e432cb0e542e6c2d7d5e5495611cb42240b89c17)**

Reviewer: **Luca De Feo**

Author: **Hongguang Zhu, Clément Pernet**

_Issue created by migration from https://trac.sagemath.org/ticket/27444_





---

archive/issue_events_358743.json:
```json
{
    "actor": "https://github.com/ZHG2017",
    "created_at": "2019-03-08T09:49:11Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27444#event-358743"
}
```



---

archive/issue_events_358744.json:
```json
{
    "actor": "https://github.com/ZHG2017",
    "created_at": "2019-03-08T09:49:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "component: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27444#event-358744"
}
```



---

archive/issue_events_358745.json:
```json
{
    "actor": "https://github.com/ZHG2017",
    "created_at": "2019-03-08T09:49:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27444#event-358745"
}
```



---

archive/issue_events_358746.json:
```json
{
    "actor": "https://github.com/ZHG2017",
    "created_at": "2019-03-08T09:49:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27444#event-358746"
}
```



---

archive/issue_comments_427535.json:
```json
{
    "body": "Branch: **[u/gh-ZHG2017/expose_multithreaded_fflas_ffpack_features](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-ZHG2017/expose_multithreaded_fflas_ffpack_features)**",
    "created_at": "2019-03-15T09:37:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427535",
    "user": "https://github.com/ZHG2017"
}
```

Branch: **[u/gh-ZHG2017/expose_multithreaded_fflas_ffpack_features](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-ZHG2017/expose_multithreaded_fflas_ffpack_features)**



---

archive/issue_comments_427536.json:
```json
{
    "body": "Commit: **[e7f4be4](https://github.com/sagemath/sagetrac-mirror/commit/e7f4be4220242e4c70faf180912d6a580a30624b)**",
    "created_at": "2019-03-15T11:01:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427536",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[e7f4be4](https://github.com/sagemath/sagetrac-mirror/commit/e7f4be4220242e4c70faf180912d6a580a30624b)**



---

archive/issue_comments_427537.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e7f4be4220242e4c70faf180912d6a580a30624b\">e7f4be4</a></td><td><code>Add ParSeqHelper to Sage</code></td></tr></table>\n",
    "created_at": "2019-03-15T11:01:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427537",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2" align="right">Comment 2</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e7f4be4220242e4c70faf180912d6a580a30624b">e7f4be4</a></td><td><code>Add ParSeqHelper to Sage</code></td></tr></table>




---

archive/issue_comments_427538.json:
```json
{
    "body": "Changed commit from **[e7f4be4](https://github.com/sagemath/sagetrac-mirror/commit/e7f4be4220242e4c70faf180912d6a580a30624b)** to **[22e592e](https://github.com/sagemath/sagetrac-mirror/commit/22e592e5cdae3c12bf45886aaa6194928c9e7c87)**",
    "created_at": "2019-03-15T14:49:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427538",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e7f4be4](https://github.com/sagemath/sagetrac-mirror/commit/e7f4be4220242e4c70faf180912d6a580a30624b)** to **[22e592e](https://github.com/sagemath/sagetrac-mirror/commit/22e592e5cdae3c12bf45886aaa6194928c9e7c87)**



---

archive/issue_comments_427539.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/22e592e5cdae3c12bf45886aaa6194928c9e7c87\">22e592e</a></td><td><code>fixing indents and templated parallel helper</code></td></tr></table>\n",
    "created_at": "2019-03-15T14:49:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427539",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3" align="right">Comment 3</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/22e592e5cdae3c12bf45886aaa6194928c9e7c87">22e592e</a></td><td><code>fixing indents and templated parallel helper</code></td></tr></table>




---

archive/issue_comments_427540.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eae88f5f92c812f68381846dbeba5fbbf38cd8ad\">eae88f5</a></td><td><code>fgemm aggregated into SageMaths with no more compile time error but not yet find out how to run it with more threads</code></td></tr></table>\n",
    "created_at": "2019-03-20T17:28:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427540",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4" align="right">Comment 4</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eae88f5f92c812f68381846dbeba5fbbf38cd8ad">eae88f5</a></td><td><code>fgemm aggregated into SageMaths with no more compile time error but not yet find out how to run it with more threads</code></td></tr></table>




---

archive/issue_comments_427541.json:
```json
{
    "body": "Changed commit from **[22e592e](https://github.com/sagemath/sagetrac-mirror/commit/22e592e5cdae3c12bf45886aaa6194928c9e7c87)** to **[eae88f5](https://github.com/sagemath/sagetrac-mirror/commit/eae88f5f92c812f68381846dbeba5fbbf38cd8ad)**",
    "created_at": "2019-03-20T17:28:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427541",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[22e592e](https://github.com/sagemath/sagetrac-mirror/commit/22e592e5cdae3c12bf45886aaa6194928c9e7c87)** to **[eae88f5](https://github.com/sagemath/sagetrac-mirror/commit/eae88f5f92c812f68381846dbeba5fbbf38cd8ad)**



---

archive/issue_comments_427542.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/01de1e16a01f54a6bcfed76e6c6b39e588e954a5\">01de1e1</a></td><td><code>Compile and link flags added for enable openmp but no multithreading found</code></td></tr></table>\n",
    "created_at": "2019-03-21T13:59:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427542",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5" align="right">Comment 5</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/01de1e16a01f54a6bcfed76e6c6b39e588e954a5">01de1e1</a></td><td><code>Compile and link flags added for enable openmp but no multithreading found</code></td></tr></table>




---

archive/issue_comments_427543.json:
```json
{
    "body": "Changed commit from **[eae88f5](https://github.com/sagemath/sagetrac-mirror/commit/eae88f5f92c812f68381846dbeba5fbbf38cd8ad)** to **[01de1e1](https://github.com/sagemath/sagetrac-mirror/commit/01de1e16a01f54a6bcfed76e6c6b39e588e954a5)**",
    "created_at": "2019-03-21T13:59:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427543",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[eae88f5](https://github.com/sagemath/sagetrac-mirror/commit/eae88f5f92c812f68381846dbeba5fbbf38cd8ad)** to **[01de1e1](https://github.com/sagemath/sagetrac-mirror/commit/01de1e16a01f54a6bcfed76e6c6b39e588e954a5)**



---

archive/issue_comments_427544.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fff3992ebda4f0febd89f2afd3f39a17e560d722\">fff3992</a></td><td><code>remove MMHelperAlgo</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d81e3c15d2db3645c0c694551f9ae3230606ac04\">d81e3c1</a></td><td><code>Merge branch 'u/gh-ZHG2017/expose_multithreaded_fflas_ffpack_features' of git://trac.sagemath.org/sage into t/27444/expose_multithreaded_fflas_ffpack_features</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/86c203840a152fac507804c138348cca550c451e\">86c2038</a></td><td><code>parallel fgemm working by patching fflas-ffpack</code></td></tr></table>\n",
    "created_at": "2019-03-21T17:04:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427544",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6" align="right">Comment 6</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fff3992ebda4f0febd89f2afd3f39a17e560d722">fff3992</a></td><td><code>remove MMHelperAlgo</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d81e3c15d2db3645c0c694551f9ae3230606ac04">d81e3c1</a></td><td><code>Merge branch 'u/gh-ZHG2017/expose_multithreaded_fflas_ffpack_features' of git://trac.sagemath.org/sage into t/27444/expose_multithreaded_fflas_ffpack_features</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/86c203840a152fac507804c138348cca550c451e">86c2038</a></td><td><code>parallel fgemm working by patching fflas-ffpack</code></td></tr></table>




---

archive/issue_comments_427545.json:
```json
{
    "body": "Changed commit from **[01de1e1](https://github.com/sagemath/sagetrac-mirror/commit/01de1e16a01f54a6bcfed76e6c6b39e588e954a5)** to **[86c2038](https://github.com/sagemath/sagetrac-mirror/commit/86c203840a152fac507804c138348cca550c451e)**",
    "created_at": "2019-03-21T17:04:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427545",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[01de1e1](https://github.com/sagemath/sagetrac-mirror/commit/01de1e16a01f54a6bcfed76e6c6b39e588e954a5)** to **[86c2038](https://github.com/sagemath/sagetrac-mirror/commit/86c203840a152fac507804c138348cca550c451e)**



---

archive/issue_comments_427546.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/449b103c8dadc063933a40cae67ee0f9a379cb2f\">449b103</a></td><td><code>fix const error</code></td></tr></table>\n",
    "created_at": "2019-03-21T17:10:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427546",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7" align="right">Comment 7</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/449b103c8dadc063933a40cae67ee0f9a379cb2f">449b103</a></td><td><code>fix const error</code></td></tr></table>




---

archive/issue_comments_427547.json:
```json
{
    "body": "Changed commit from **[86c2038](https://github.com/sagemath/sagetrac-mirror/commit/86c203840a152fac507804c138348cca550c451e)** to **[449b103](https://github.com/sagemath/sagetrac-mirror/commit/449b103c8dadc063933a40cae67ee0f9a379cb2f)**",
    "created_at": "2019-03-21T17:10:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427547",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[86c2038](https://github.com/sagemath/sagetrac-mirror/commit/86c203840a152fac507804c138348cca550c451e)** to **[449b103](https://github.com/sagemath/sagetrac-mirror/commit/449b103c8dadc063933a40cae67ee0f9a379cb2f)**



---

archive/issue_comments_427548.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/397c10854ad651aad31f8b47043c04d289c7bc1b\">397c108</a></td><td><code>fix error</code></td></tr></table>\n",
    "created_at": "2019-03-22T08:03:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427548",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8" align="right">Comment 8</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/397c10854ad651aad31f8b47043c04d289c7bc1b">397c108</a></td><td><code>fix error</code></td></tr></table>




---

archive/issue_comments_427549.json:
```json
{
    "body": "Changed commit from **[449b103](https://github.com/sagemath/sagetrac-mirror/commit/449b103c8dadc063933a40cae67ee0f9a379cb2f)** to **[397c108](https://github.com/sagemath/sagetrac-mirror/commit/397c10854ad651aad31f8b47043c04d289c7bc1b)**",
    "created_at": "2019-03-22T08:03:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427549",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[449b103](https://github.com/sagemath/sagetrac-mirror/commit/449b103c8dadc063933a40cae67ee0f9a379cb2f)** to **[397c108](https://github.com/sagemath/sagetrac-mirror/commit/397c10854ad651aad31f8b47043c04d289c7bc1b)**



---

archive/issue_comments_427550.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nFor the record: matrix multiplication over finite field works in parallel. The following experiment is on a 12 cores Intel skylake-x server:\n\n```\npernet@retourdest:~/soft/sage$ export OMP_NUM_THREADS=12;./sage \n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 SageMath version 8.7.beta7, Release Date: 2019-03-10               \u2502\n\u2502 Using Python 2.7.15. Type \"help()\" for help.                       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Warning: this is a prerelease version, and it may be unstable.     \u2503\n\u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b\nsage: a=random_matrix(GF(11),10000)\nsage: time b=a*a\nCPU times: user 23.3 s, sys: 405 ms, total: 23.7 s\nWall time: 3.3 s\n```\nwhile on the same machine, on master we get:\n\n```\nsage: a=random_matrix(GF(11),10000)\nsage: time b=a*a\nCPU times: user 18.4 s, sys: 211 ms, total: 18.6 s\nWall time: 18.7 s\n```\n\nThe speed-up of 6 for a 12 core machine is below what a self-standing fflas-ffpack achieves.\nWe need to investigate the reasons: alignment, strassen-winograd threshold, numa placement, etc.",
    "created_at": "2019-03-22T10:14:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427550",
    "user": "https://github.com/ClementPernet"
}
```

<div id="comment:9" align="right">Comment 9</div>

For the record: matrix multiplication over finite field works in parallel. The following experiment is on a 12 cores Intel skylake-x server:

```
pernet@retourdest:~/soft/sage$ export OMP_NUM_THREADS=12;./sage 
┌────────────────────────────────────────────────────────────────────┐
│ SageMath version 8.7.beta7, Release Date: 2019-03-10               │
│ Using Python 2.7.15. Type "help()" for help.                       │
└────────────────────────────────────────────────────────────────────┘
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃ Warning: this is a prerelease version, and it may be unstable.     ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
sage: a=random_matrix(GF(11),10000)
sage: time b=a*a
CPU times: user 23.3 s, sys: 405 ms, total: 23.7 s
Wall time: 3.3 s
```
while on the same machine, on master we get:

```
sage: a=random_matrix(GF(11),10000)
sage: time b=a*a
CPU times: user 18.4 s, sys: 211 ms, total: 18.6 s
Wall time: 18.7 s
```

The speed-up of 6 for a 12 core machine is below what a self-standing fflas-ffpack achieves.
We need to investigate the reasons: alignment, strassen-winograd threshold, numa placement, etc.



---

archive/issue_events_358747.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27444#event-358747"
}
```



---

archive/issue_events_358748.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27444#event-358748"
}
```



---

archive/issue_comments_427551.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nTicket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)",
    "created_at": "2019-03-25T10:56:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427551",
    "user": "https://github.com/embray"
}
```

<div id="comment:10" align="right">Comment 10</div>

Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)



---

archive/issue_comments_427552.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/58a5309f4c3da394afa1dae95cac918d9d940262\">58a5309</a></td><td><code>Using Sage Parallelism() to let user choose number of threads for fgemm</code></td></tr></table>\n",
    "created_at": "2019-03-26T09:48:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427552",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11" align="right">Comment 11</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/58a5309f4c3da394afa1dae95cac918d9d940262">58a5309</a></td><td><code>Using Sage Parallelism() to let user choose number of threads for fgemm</code></td></tr></table>




---

archive/issue_comments_427553.json:
```json
{
    "body": "Changed commit from **[397c108](https://github.com/sagemath/sagetrac-mirror/commit/397c10854ad651aad31f8b47043c04d289c7bc1b)** to **[58a5309](https://github.com/sagemath/sagetrac-mirror/commit/58a5309f4c3da394afa1dae95cac918d9d940262)**",
    "created_at": "2019-03-26T09:48:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427553",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[397c108](https://github.com/sagemath/sagetrac-mirror/commit/397c10854ad651aad31f8b47043c04d289c7bc1b)** to **[58a5309](https://github.com/sagemath/sagetrac-mirror/commit/58a5309f4c3da394afa1dae95cac918d9d940262)**



---

archive/issue_comments_427554.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/421c853598e7f226ff2d172559fa3596d67f6ad8\">421c853</a></td><td><code>Multithreaded fgemv using [SageMath](../wiki/SageMath) Parallelism() seems to be working</code></td></tr></table>\n",
    "created_at": "2019-03-27T12:37:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427554",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12" align="right">Comment 12</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/421c853598e7f226ff2d172559fa3596d67f6ad8">421c853</a></td><td><code>Multithreaded fgemv using [SageMath](../wiki/SageMath) Parallelism() seems to be working</code></td></tr></table>




---

archive/issue_comments_427555.json:
```json
{
    "body": "Changed commit from **[58a5309](https://github.com/sagemath/sagetrac-mirror/commit/58a5309f4c3da394afa1dae95cac918d9d940262)** to **[421c853](https://github.com/sagemath/sagetrac-mirror/commit/421c853598e7f226ff2d172559fa3596d67f6ad8)**",
    "created_at": "2019-03-27T12:37:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427555",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[58a5309](https://github.com/sagemath/sagetrac-mirror/commit/58a5309f4c3da394afa1dae95cac918d9d940262)** to **[421c853](https://github.com/sagemath/sagetrac-mirror/commit/421c853598e7f226ff2d172559fa3596d67f6ad8)**



---

archive/issue_comments_427556.json:
```json
{
    "body": "Changed branch from **[u/gh-ZHG2017/expose_multithreaded_fflas_ffpack_features](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-ZHG2017/expose_multithreaded_fflas_ffpack_features)** to **[u/cpernet/expose_multithreaded_fflas_ffpack_features](https://github.com/sagemath/sagetrac-mirror/tree/u/cpernet/expose_multithreaded_fflas_ffpack_features)**",
    "created_at": "2019-03-29T10:43:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427556",
    "user": "https://github.com/ClementPernet"
}
```

Changed branch from **[u/gh-ZHG2017/expose_multithreaded_fflas_ffpack_features](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-ZHG2017/expose_multithreaded_fflas_ffpack_features)** to **[u/cpernet/expose_multithreaded_fflas_ffpack_features](https://github.com/sagemath/sagetrac-mirror/tree/u/cpernet/expose_multithreaded_fflas_ffpack_features)**



---

archive/issue_comments_427557.json:
```json
{
    "body": "Changed branch from **[u/cpernet/expose_multithreaded_fflas_ffpack_features](https://github.com/sagemath/sagetrac-mirror/tree/u/cpernet/expose_multithreaded_fflas_ffpack_features)** to **[u/gh-ZHG2017/expose_multithreaded_fflas_ffpack_features](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-ZHG2017/expose_multithreaded_fflas_ffpack_features)**",
    "created_at": "2019-05-31T15:14:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427557",
    "user": "https://github.com/ZHG2017"
}
```

Changed branch from **[u/cpernet/expose_multithreaded_fflas_ffpack_features](https://github.com/sagemath/sagetrac-mirror/tree/u/cpernet/expose_multithreaded_fflas_ffpack_features)** to **[u/gh-ZHG2017/expose_multithreaded_fflas_ffpack_features](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-ZHG2017/expose_multithreaded_fflas_ffpack_features)**



---

archive/issue_events_358749.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:54:19Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27444#event-358749"
}
```



---

archive/issue_comments_427558.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nAs the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).",
    "created_at": "2019-06-14T14:54:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427558",
    "user": "https://github.com/embray"
}
```

<div id="comment:15" align="right">Comment 15</div>

As the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).



---

archive/issue_comments_427559.json:
```json
{
    "body": "Changed commit from **[421c853](https://github.com/sagemath/sagetrac-mirror/commit/421c853598e7f226ff2d172559fa3596d67f6ad8)** to **[2d552b9](https://github.com/sagemath/sagetrac-mirror/commit/2d552b9bd261147757b02b13461e7325b5bf1a9a)**",
    "created_at": "2019-06-20T13:12:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427559",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[421c853](https://github.com/sagemath/sagetrac-mirror/commit/421c853598e7f226ff2d172559fa3596d67f6ad8)** to **[2d552b9](https://github.com/sagemath/sagetrac-mirror/commit/2d552b9bd261147757b02b13461e7325b5bf1a9a)**



---

archive/issue_comments_427560.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bd8b2a0e3c84eaf05db55687b43503457ad9deca\">bd8b2a0</a></td><td><code>fix 32 compilation failure for linbox-rank</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ddacbf01a64e7830f2ad03f13200c3edff4f0dc5\">ddacbf0</a></td><td><code>upgrade to linbox-1.6.3 fflas-ffpack-2.4.1 and givaro-4.1.1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f2d1f29dcf5860053d8861a516058cc48e3f5bbb\">f2d1f29</a></td><td><code>upgrade to fflas-ffpack-2.4.2 fixing testsuite errors with echlon forms</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/784815648e9e8bac9c81e6336014f0021d91f853\">7848156</a></td><td><code>upgrade do fflas-ffpack 2.4.3 fixing an error in charpoly autotune</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c391252b321dc9865037212b76c4c8c37ccc2ea9\">c391252</a></td><td><code>Merge branch 't/26932/upgrade_to_givaro_4_1_0_fflas_ffpack_2_4_0_linbox_1_6_0' into t/27444/expose_multithreaded_fflas_ffpack_features</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2d552b9bd261147757b02b13461e7325b5bf1a9a\">2d552b9</a></td><td><code>pRank pDet and pReducedRowEchelonForm added with multithreading which also have been tested and cleaned up for code review</code></td></tr></table>\n",
    "created_at": "2019-06-20T13:12:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427560",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16" align="right">Comment 16</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bd8b2a0e3c84eaf05db55687b43503457ad9deca">bd8b2a0</a></td><td><code>fix 32 compilation failure for linbox-rank</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ddacbf01a64e7830f2ad03f13200c3edff4f0dc5">ddacbf0</a></td><td><code>upgrade to linbox-1.6.3 fflas-ffpack-2.4.1 and givaro-4.1.1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f2d1f29dcf5860053d8861a516058cc48e3f5bbb">f2d1f29</a></td><td><code>upgrade to fflas-ffpack-2.4.2 fixing testsuite errors with echlon forms</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/784815648e9e8bac9c81e6336014f0021d91f853">7848156</a></td><td><code>upgrade do fflas-ffpack 2.4.3 fixing an error in charpoly autotune</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c391252b321dc9865037212b76c4c8c37ccc2ea9">c391252</a></td><td><code>Merge branch 't/26932/upgrade_to_givaro_4_1_0_fflas_ffpack_2_4_0_linbox_1_6_0' into t/27444/expose_multithreaded_fflas_ffpack_features</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2d552b9bd261147757b02b13461e7325b5bf1a9a">2d552b9</a></td><td><code>pRank pDet and pReducedRowEchelonForm added with multithreading which also have been tested and cleaned up for code review</code></td></tr></table>




---

archive/issue_comments_427561.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nI confirm that the branch successfullly parallizes det, rank and echelonize. However, in the current version of the branch, the matrix product is no longer parallelized. Could you revert the call to pfgemm?",
    "created_at": "2019-06-27T11:33:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427561",
    "user": "https://github.com/ClementPernet"
}
```

<div id="comment:17" align="right">Comment 17</div>

I confirm that the branch successfullly parallizes det, rank and echelonize. However, in the current version of the branch, the matrix product is no longer parallelized. Could you revert the call to pfgemm?



---

archive/issue_comments_427562.json:
```json
{
    "body": "Changed commit from **[2d552b9](https://github.com/sagemath/sagetrac-mirror/commit/2d552b9bd261147757b02b13461e7325b5bf1a9a)** to **[6ca42e2](https://github.com/sagemath/sagetrac-mirror/commit/6ca42e23280f1562253274f9e0df04b45092304e)**",
    "created_at": "2019-06-27T12:15:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427562",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2d552b9](https://github.com/sagemath/sagetrac-mirror/commit/2d552b9bd261147757b02b13461e7325b5bf1a9a)** to **[6ca42e2](https://github.com/sagemath/sagetrac-mirror/commit/6ca42e23280f1562253274f9e0df04b45092304e)**



---

archive/issue_comments_427563.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6ca42e23280f1562253274f9e0df04b45092304e\">6ca42e2</a></td><td><code>Added back pfgemm with the same parallelism like pDet</code></td></tr></table>\n",
    "created_at": "2019-06-27T12:15:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427563",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18" align="right">Comment 18</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6ca42e23280f1562253274f9e0df04b45092304e">6ca42e2</a></td><td><code>Added back pfgemm with the same parallelism like pDet</code></td></tr></table>




---

archive/issue_comments_427564.json:
```json
{
    "body": "Dependencies: **26932**",
    "created_at": "2019-06-27T13:20:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427564",
    "user": "https://github.com/ClementPernet"
}
```

Dependencies: **26932**



---

archive/issue_comments_427565.json:
```json
{
    "body": "Changed dependencies from **26932** to **#26932**",
    "created_at": "2019-06-27T13:21:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427565",
    "user": "https://github.com/ClementPernet"
}
```

Changed dependencies from **26932** to **#26932**



---

archive/issue_events_358750.json:
```json
{
    "actor": "https://github.com/ClementPernet",
    "created_at": "2019-08-26T18:59:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27444#event-358750"
}
```



---

archive/issue_comments_427566.json:
```json
{
    "body": "Changed branch from **[u/gh-ZHG2017/expose_multithreaded_fflas_ffpack_features](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-ZHG2017/expose_multithreaded_fflas_ffpack_features)** to **[u/cpernet/expose_multithreaded_fflas_ffpack_features](https://github.com/sagemath/sagetrac-mirror/tree/u/cpernet/expose_multithreaded_fflas_ffpack_features)**",
    "created_at": "2019-08-27T08:21:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427566",
    "user": "https://github.com/ClementPernet"
}
```

Changed branch from **[u/gh-ZHG2017/expose_multithreaded_fflas_ffpack_features](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-ZHG2017/expose_multithreaded_fflas_ffpack_features)** to **[u/cpernet/expose_multithreaded_fflas_ffpack_features](https://github.com/sagemath/sagetrac-mirror/tree/u/cpernet/expose_multithreaded_fflas_ffpack_features)**



---

archive/issue_comments_427567.json:
```json
{
    "body": "Changed commit from **[6ca42e2](https://github.com/sagemath/sagetrac-mirror/commit/6ca42e23280f1562253274f9e0df04b45092304e)** to **[371d63c](https://github.com/sagemath/sagetrac-mirror/commit/371d63cc721ad867b05e902e428879b2671f5e61)**",
    "created_at": "2019-08-27T08:22:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427567",
    "user": "https://github.com/ClementPernet"
}
```

Changed commit from **[6ca42e2](https://github.com/sagemath/sagetrac-mirror/commit/6ca42e23280f1562253274f9e0df04b45092304e)** to **[371d63c](https://github.com/sagemath/sagetrac-mirror/commit/371d63cc721ad867b05e902e428879b2671f5e61)**



---

archive/issue_comments_427568.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nI pushed a fix to a misplaced \"noefd\" algorithm specification. This seems to fix the broken doctests.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b38619793abedcecfaad2c3897f510bbe7ebe6a2\">b386197</a></td><td><code>Merge branch 'develop' into t/27444/expose_multithreaded_fflas_ffpack_features</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/371d63cc721ad867b05e902e428879b2671f5e61\">371d63c</a></td><td><code>fix noefd default algorithm</code></td></tr></table>\n",
    "created_at": "2019-08-27T08:22:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427568",
    "user": "https://github.com/ClementPernet"
}
```

<div id="comment:23" align="right">Comment 23</div>

I pushed a fix to a misplaced "noefd" algorithm specification. This seems to fix the broken doctests.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b38619793abedcecfaad2c3897f510bbe7ebe6a2">b386197</a></td><td><code>Merge branch 'develop' into t/27444/expose_multithreaded_fflas_ffpack_features</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/371d63cc721ad867b05e902e428879b2671f5e61">371d63c</a></td><td><code>fix noefd default algorithm</code></td></tr></table>




---

archive/issue_comments_427569.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nI'm curious about these:\n\n```\nif m*n > 100000: sig_on()\n```\n\nAny reason not to always call `sig_on()`?",
    "created_at": "2019-08-27T19:09:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427569",
    "user": "https://github.com/defeo"
}
```

<div id="comment:24" align="right">Comment 24</div>

I'm curious about these:

```
if m*n > 100000: sig_on()
```

Any reason not to always call `sig_on()`?



---

archive/issue_comments_427570.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nDocs need updating.\n\nIn `parallelism.py`:\n\n> EXAMPLES:\n\n>\n> The number of processes is initialized to 1 (no parallelization) for each field **(only tensor computations are implemented at the moment)**:\n\nAlso, it would be good to document in the matrix reference the availability of parallelism, like it is done in http://doc.sagemath.org/html/en/reference/tensor_free_modules/sage/tensor/modules/free_module_tensor.html#sage.tensor.modules.free_module_tensor.FreeModuleTensor.disp",
    "created_at": "2019-08-27T20:44:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427570",
    "user": "https://github.com/defeo"
}
```

<div id="comment:25" align="right">Comment 25</div>

Docs need updating.

In `parallelism.py`:

> EXAMPLES:

>
> The number of processes is initialized to 1 (no parallelization) for each field **(only tensor computations are implemented at the moment)**:

Also, it would be good to document in the matrix reference the availability of parallelism, like it is done in http://doc.sagemath.org/html/en/reference/tensor_free_modules/sage/tensor/modules/free_module_tensor.html#sage.tensor.modules.free_module_tensor.FreeModuleTensor.disp



---

archive/issue_comments_427571.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nOtherwise, I confirm there is no regression with Python 3. If you can fix the docs, this ticket is good for me.",
    "created_at": "2019-08-27T21:29:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427571",
    "user": "https://github.com/defeo"
}
```

<div id="comment:26" align="right">Comment 26</div>

Otherwise, I confirm there is no regression with Python 3. If you can fix the docs, this ticket is good for me.



---

archive/issue_comments_427572.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nReplying to [@defeo](#comment%3A24):\n> I'm curious about these:\n> \n> ```\n> if m*n > 100000: sig_on()\n> ```\n> \n> Any reason not to always call `sig_on()`?\n\nI guess the reason is to avoid the overhead of using the sigs when the call is with a tiny instance which runs almost instantly and will therefore have no chance of being interrupted.",
    "created_at": "2019-08-28T07:33:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427572",
    "user": "https://github.com/ClementPernet"
}
```

<div id="comment:27" align="right">Comment 27</div>

Replying to [@defeo](#comment%3A24):
> I'm curious about these:
> 
> ```
> if m*n > 100000: sig_on()
> ```
> 
> Any reason not to always call `sig_on()`?

I guess the reason is to avoid the overhead of using the sigs when the call is with a tiny instance which runs almost instantly and will therefore have no chance of being interrupted.



---

archive/issue_comments_427573.json:
```json
{
    "body": "Changed commit from **[371d63c](https://github.com/sagemath/sagetrac-mirror/commit/371d63cc721ad867b05e902e428879b2671f5e61)** to **[e432cb0](https://github.com/sagemath/sagetrac-mirror/commit/e432cb0e542e6c2d7d5e5495611cb42240b89c17)**",
    "created_at": "2019-08-28T15:44:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427573",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[371d63c](https://github.com/sagemath/sagetrac-mirror/commit/371d63cc721ad867b05e902e428879b2671f5e61)** to **[e432cb0](https://github.com/sagemath/sagetrac-mirror/commit/e432cb0e542e6c2d7d5e5495611cb42240b89c17)**



---

archive/issue_comments_427574.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e432cb0e542e6c2d7d5e5495611cb42240b89c17\">e432cb0</a></td><td><code>fixing the doc</code></td></tr></table>\n",
    "created_at": "2019-08-28T15:44:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427574",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28" align="right">Comment 28</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e432cb0e542e6c2d7d5e5495611cb42240b89c17">e432cb0</a></td><td><code>fixing the doc</code></td></tr></table>




---

archive/issue_comments_427575.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\n@defeo: Doc fixed in the above commit. Should be good to go now.",
    "created_at": "2019-08-28T15:46:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427575",
    "user": "https://github.com/ClementPernet"
}
```

<div id="comment:29" align="right">Comment 29</div>

@defeo: Doc fixed in the above commit. Should be good to go now.



---

archive/issue_comments_427576.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nThe ticket has no authors?",
    "created_at": "2019-08-28T16:31:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427576",
    "user": "https://github.com/defeo"
}
```

<div id="comment:30" align="right">Comment 30</div>

The ticket has no authors?



---

archive/issue_comments_427577.json:
```json
{
    "body": "Reviewer: **Luca De Feo**",
    "created_at": "2019-08-28T16:31:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427577",
    "user": "https://github.com/defeo"
}
```

Reviewer: **Luca De Feo**



---

archive/issue_events_358751.json:
```json
{
    "actor": "https://github.com/defeo",
    "created_at": "2019-08-28T16:31:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27444#event-358751"
}
```



---

archive/issue_events_358752.json:
```json
{
    "actor": "https://github.com/defeo",
    "created_at": "2019-08-28T16:31:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27444#event-358752"
}
```



---

archive/issue_comments_427578.json:
```json
{
    "body": "Author: **Hongguang Zhu, Clement Pernet**",
    "created_at": "2019-08-28T16:40:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427578",
    "user": "https://github.com/ClementPernet"
}
```

Author: **Hongguang Zhu, Clement Pernet**



---

archive/issue_comments_427579.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nand no milestone ?",
    "created_at": "2019-08-28T19:00:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427579",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:32" align="right">Comment 32</div>

and no milestone ?



---

archive/issue_events_358753.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-08-28T19:00:24Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27444#event-358753"
}
```



---

archive/issue_events_358754.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-09-02T21:41:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27444#event-358754"
}
```



---

archive/issue_events_358755.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "842a3dcd4189397963050ab2c24836c55f78a6e7",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-09-02T21:41:23Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27444#event-358755"
}
```



---

archive/issue_comments_427580.json:
```json
{
    "body": "Changed branch from **[u/cpernet/expose_multithreaded_fflas_ffpack_features](https://github.com/sagemath/sagetrac-mirror/tree/u/cpernet/expose_multithreaded_fflas_ffpack_features)** to **[e432cb0](https://github.com/sagemath/sagetrac-mirror/commit/e432cb0e542e6c2d7d5e5495611cb42240b89c17)**",
    "created_at": "2019-09-02T21:41:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427580",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/cpernet/expose_multithreaded_fflas_ffpack_features](https://github.com/sagemath/sagetrac-mirror/tree/u/cpernet/expose_multithreaded_fflas_ffpack_features)** to **[e432cb0](https://github.com/sagemath/sagetrac-mirror/commit/e432cb0e542e6c2d7d5e5495611cb42240b89c17)**



---

archive/issue_comments_427581.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\nI don't think this ticket should have removed `--disable-openmp` from the fflas_ffpack build without mention, because now it requires OpenMP support in any modules which link to it, and this doesn't seem to work properly.",
    "created_at": "2019-10-07T16:11:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427581",
    "user": "https://github.com/embray"
}
```

<div id="comment:34" align="right">Comment 34</div>

I don't think this ticket should have removed `--disable-openmp` from the fflas_ffpack build without mention, because now it requires OpenMP support in any modules which link to it, and this doesn't seem to work properly.



---

archive/issue_comments_427582.json:
```json
{
    "body": "Changed commit from **[e432cb0](https://github.com/sagemath/sagetrac-mirror/commit/e432cb0e542e6c2d7d5e5495611cb42240b89c17)** to none",
    "created_at": "2019-10-07T16:11:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427582",
    "user": "https://github.com/embray"
}
```

Changed commit from **[e432cb0](https://github.com/sagemath/sagetrac-mirror/commit/e432cb0e542e6c2d7d5e5495611cb42240b89c17)** to none



---

archive/issue_comments_427583.json:
```json
{
    "body": "Changed author from **Hongguang Zhu, Clement Pernet** to **Hongguang Zhu, Cl\u00e9ment Pernet**",
    "created_at": "2020-06-07T00:09:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27444#issuecomment-427583",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Hongguang Zhu, Clement Pernet** to **Hongguang Zhu, Clément Pernet**
