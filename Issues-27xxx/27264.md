# Issue 27264: spkg-configure.m4 for flint

archive/issues_027027.json:
```json
{
    "body": "Flint on Sage is linked with NTL, and this can be checked by testing for presence of\n`fmpz_poly_get_ZZX` there. So, this:\n\n```\nSAGE_SPKG_CONFIGURE([flint], [\n    AC_CHECK_HEADER(flint/flint.h, [], [sage_spkg_install_flint=yes])\ndnl fmpz_mat_is_hadamard appears in Flint 2.5.0\n    AC_SEARCH_LIBS([fmpz_mat_is_hadamard], [flint], [], [sage_spkg_install_flint=yes])\n    AC_SEARCH_LIBS([fmpz_poly_get_ZZX], [flint], [break], [sage_spkg_install_flint=yes])\n])\n```\n\nCC:  @embray\n\nAuthor: Dima Pasechnik\n\nBranch: u/dimpase/packages/flintconfig\n\nCommit: 8fc4fb6e6229b920f1a8cf76cf780a98ef7e3389\n\nResolution: duplicate\n\nIssue created by migration from https://trac.sagemath.org/ticket/27264\n\n",
    "closed_at": "2019-07-31T09:39:12Z",
    "created_at": "2019-02-12T16:07:19Z",
    "labels": [
        "component: build"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "spkg-configure.m4 for flint",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27264",
    "user": "https://github.com/dimpase"
}
```
Flint on Sage is linked with NTL, and this can be checked by testing for presence of
`fmpz_poly_get_ZZX` there. So, this:

```
SAGE_SPKG_CONFIGURE([flint], [
    AC_CHECK_HEADER(flint/flint.h, [], [sage_spkg_install_flint=yes])
dnl fmpz_mat_is_hadamard appears in Flint 2.5.0
    AC_SEARCH_LIBS([fmpz_mat_is_hadamard], [flint], [], [sage_spkg_install_flint=yes])
    AC_SEARCH_LIBS([fmpz_poly_get_ZZX], [flint], [break], [sage_spkg_install_flint=yes])
])
```

CC:  @embray

Author: Dima Pasechnik

Branch: u/dimpase/packages/flintconfig

Commit: 8fc4fb6e6229b920f1a8cf76cf780a98ef7e3389

Resolution: duplicate

Issue created by migration from https://trac.sagemath.org/ticket/27264





---

archive/issue_comments_405197.json:
```json
{
    "body": "<a id='comment:1'></a>Do you want to go ahead and add a branch?  Obviously, it seems fine to me at first glance.",
    "created_at": "2019-02-12T16:13:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27264#issuecomment-405197",
    "user": "https://github.com/embray"
}
```

<a id='comment:1'></a>Do you want to go ahead and add a branch?  Obviously, it seems fine to me at first glance.



---

archive/issue_comments_405198.json:
```json
{
    "body": "<a id='comment:2'></a>Yes, but need to do #27265 (NTL) first",
    "created_at": "2019-02-12T16:20:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27264#issuecomment-405198",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:2'></a>Yes, but need to do #27265 (NTL) first



---

archive/issue_comments_405199.json:
```json
{
    "body": "<a id='comment:3'></a>Last 10 new commits:",
    "created_at": "2019-03-21T11:57:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27264#issuecomment-405199",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:3'></a>Last 10 new commits:



---

archive/issue_comments_405200.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-03-21T11:59:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27264#issuecomment-405200",
    "user": "https://github.com/dimpase"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_405201.json:
```json
{
    "body": "<a id='comment:5'></a>Should we still look at NTL first, or maybe try testing with both this ticket *and* #27265 merged together?",
    "created_at": "2019-03-21T12:00:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27264#issuecomment-405201",
    "user": "https://github.com/embray"
}
```

<a id='comment:5'></a>Should we still look at NTL first, or maybe try testing with both this ticket *and* #27265 merged together?



---

archive/issue_comments_405202.json:
```json
{
    "body": "<a id='comment:6'></a>Naturally, I am testing them all together...\n(this branch has them all).\n\nActually, there is a lot of common boilerplate in spkg-configure.m4's for mpfr, mpc, ntl, and flint. But OK, perhaps this simplification can wait---depending upon how many more spkgs need `--with-...=` support.",
    "created_at": "2019-03-21T12:07:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27264#issuecomment-405202",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:6'></a>Naturally, I am testing them all together...
(this branch has them all).

Actually, there is a lot of common boilerplate in spkg-configure.m4's for mpfr, mpc, ntl, and flint. But OK, perhaps this simplification can wait---depending upon how many more spkgs need `--with-...=` support.



---

archive/issue_comments_405203.json:
```json
{
    "body": "<a id='comment:7'></a>I agree, I think that for now it will be simpler and easier to understand if we are somewhat repetitive.  If, once we've made more progress, a clear pattern emerges then I can certainly collapse the repetitive bits into a macro.",
    "created_at": "2019-03-21T12:13:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27264#issuecomment-405203",
    "user": "https://github.com/embray"
}
```

<a id='comment:7'></a>I agree, I think that for now it will be simpler and easier to understand if we are somewhat repetitive.  If, once we've made more progress, a clear pattern emerges then I can certainly collapse the repetitive bits into a macro.



---

archive/issue_comments_405204.json:
```json
{
    "body": "<a id='comment:8'></a>This needs an extra test that flint was not built with `--with-gc=...` option, which results in a memory layout different from what Sage interface expects, and leads to crashes, e.g. in `src/sage/libs/flint/fmpz_poly.pyx`.\n\nThis option is on on some systems by default, e.g. on Gentoo...",
    "created_at": "2019-03-21T12:47:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27264#issuecomment-405204",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:8'></a>This needs an extra test that flint was not built with `--with-gc=...` option, which results in a memory layout different from what Sage interface expects, and leads to crashes, e.g. in `src/sage/libs/flint/fmpz_poly.pyx`.

This option is on on some systems by default, e.g. on Gentoo...



---

archive/issue_comments_405205.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-03-21T14:20:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27264#issuecomment-405205",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_067675.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27264",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27264#event-67675"
}
```



---

archive/issue_comments_405206.json:
```json
{
    "body": "<a id='comment:10'></a>Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)",
    "created_at": "2019-03-25T10:56:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27264#issuecomment-405206",
    "user": "https://github.com/embray"
}
```

<a id='comment:10'></a>Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)



---

archive/issue_comments_405207.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-01T13:25:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27264#issuecomment-405207",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_405208.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2019-04-30T21:27:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27264#issuecomment-405208",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_405209.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-30T22:51:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27264#issuecomment-405209",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_405210.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2019-05-21T12:06:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27264#issuecomment-405210",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_405211.json:
```json
{
    "body": "<a id='comment:15'></a>rebased over #27822 branch, added deps checks, etc",
    "created_at": "2019-05-21T12:07:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27264#issuecomment-405211",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:15'></a>rebased over #27822 branch, added deps checks, etc



---

archive/issue_comments_405212.json:
```json
{
    "body": "<a id='comment:16'></a>should this be bundled with arb?",
    "created_at": "2019-05-21T15:22:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27264#issuecomment-405212",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:16'></a>should this be bundled with arb?



---

archive/issue_events_067676.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-06-04T11:40:44Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27264",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27264#event-67676"
}
```



---

archive/issue_events_067677.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-06-04T11:40:44Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27264",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27264#event-67677"
}
```



---

archive/issue_comments_405213.json:
```json
{
    "body": "<a id='comment:17'></a>to be merged as a part of #27270",
    "created_at": "2019-06-04T11:40:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27264#issuecomment-405213",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:17'></a>to be merged as a part of #27270



---

archive/issue_comments_405214.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-06-04T11:40:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27264#issuecomment-405214",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_405215.json:
```json
{
    "body": "Resolution: duplicate",
    "created_at": "2019-07-31T09:39:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27264#issuecomment-405215",
    "user": "https://github.com/fchapoton"
}
```

Resolution: duplicate



---

archive/issue_events_067678.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-07-31T09:39:12Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27264",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27264#event-67678"
}
```
