# Issue 27351: At end of configure, suggest a list of system packages to install

archive/issues_027114.json:
```json
{
    "body": "There have been a spate of reports of issues like #26996 all stemming from people trying to build Sage on Linux systems that do not already have a supported Fortran compiler installed (but easily could). Likewise, for some other packages (openblas, R, ...).\n\nembray suggests: I would [...]  just fail--with a helpful error message-at `./configure` time, at least on platforms like Cygwin and most Linux distributions, to just install the system's fortran compiler, unless a flag is given to explicitly request it.  [...]\n\nIn this ticket we just make it a friendly message at the end of the configure run -- not just for `gfortran`, but for all packages that have system packages. We will check if this already reduces the volume of messages regarding build problems on the lists.\n\nExample:\n\n```\nconfig.status: creating directory local/lib\nconfig.status: creating directory local/share\nconfig.status: creating directory local/var/lib/sage/installed\nconfigure: Hint: The following SPKGs did not find equivalent system packages:\nconfigure:   cbc gp2c libsemigroups m4ri ninja_build pari_elldata pari_galpol pari_nftables pari_seadata perl_term_readline_gnu\nchecking for the package system in use... conda\nconfigure: Hint: Installing the following system packages is recommended and may avoid building some of the above SPKGs from source:\nconfigure:   $ conda install coincbc m4ri ninja pari-galpol pari-seadata\nconfigure: After installation, re-run configure using:\nconfigure:   $ ./config.status --recheck && ./config.status\n```\n\nCC:  @jdemeyer @dimpase @vbraun @jhpalmieri @orlitzky @kiwifb\n\nBranch/Commit: 35e1e7d50ffa9ce488fddd85afcb330e187ae752\n\nReviewer: John Palmieri\n\nAuthor: Matthias Koeppe\n\nDependencies: #29143\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/27351\n\n",
    "closed_at": "2020-03-11T23:46:25Z",
    "created_at": "2019-02-25T12:54:07Z",
    "labels": [
        "component: packages: optional",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "At end of configure, suggest a list of system packages to install",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27351",
    "user": "https://github.com/embray"
}
```
There have been a spate of reports of issues like #26996 all stemming from people trying to build Sage on Linux systems that do not already have a supported Fortran compiler installed (but easily could). Likewise, for some other packages (openblas, R, ...).

embray suggests: I would [...]  just fail--with a helpful error message-at `./configure` time, at least on platforms like Cygwin and most Linux distributions, to just install the system's fortran compiler, unless a flag is given to explicitly request it.  [...]

In this ticket we just make it a friendly message at the end of the configure run -- not just for `gfortran`, but for all packages that have system packages. We will check if this already reduces the volume of messages regarding build problems on the lists.

Example:

```
config.status: creating directory local/lib
config.status: creating directory local/share
config.status: creating directory local/var/lib/sage/installed
configure: Hint: The following SPKGs did not find equivalent system packages:
configure:   cbc gp2c libsemigroups m4ri ninja_build pari_elldata pari_galpol pari_nftables pari_seadata perl_term_readline_gnu
checking for the package system in use... conda
configure: Hint: Installing the following system packages is recommended and may avoid building some of the above SPKGs from source:
configure:   $ conda install coincbc m4ri ninja pari-galpol pari-seadata
configure: After installation, re-run configure using:
configure:   $ ./config.status --recheck && ./config.status
```

CC:  @jdemeyer @dimpase @vbraun @jhpalmieri @orlitzky @kiwifb

Branch/Commit: 35e1e7d50ffa9ce488fddd85afcb330e187ae752

Reviewer: John Palmieri

Author: Matthias Koeppe

Dependencies: #29143

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/27351





---

archive/issue_comments_527077.json:
```json
{
    "body": "<a id='comment:1'></a>I don't think that #26996 should be used as a reason. That's a bug in the build system, that we could just fix independently.\n\nI'm not saying that this ticket by itself is a bad idea, just that #26996 is not a good reason for it.",
    "created_at": "2019-02-25T12:58:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27351#issuecomment-527077",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:1'></a>I don't think that #26996 should be used as a reason. That's a bug in the build system, that we could just fix independently.

I'm not saying that this ticket by itself is a bad idea, just that #26996 is not a good reason for it.



---

archive/issue_comments_527078.json:
```json
{
    "body": "<a id='comment:2'></a>It's a good idea to make it fail on !Linux/Cygwin/Homebrew/FreeBSD.",
    "created_at": "2019-02-25T13:02:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27351#issuecomment-527078",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:2'></a>It's a good idea to make it fail on !Linux/Cygwin/Homebrew/FreeBSD.



---

archive/issue_comments_527079.json:
```json
{
    "body": "<a id='comment:3'></a>Replying to [jdemeyer](#comment%3A1):\n> I don't think that #26996 should be used as a reason. That's a bug in the build system, that we could just fix independently.\n> \n> I'm not saying that this ticket by itself is a bad idea, just that #26996 is not a good reason for it.\n\n\nI agree, that's not the motivation at all.  My point was that it happened to expose the fact that a *lot* of people, more than I'd imagined was the case, were trying (and in the past, presumably, succeeding) to build gfortran when it wasn't really necessary for them to.",
    "created_at": "2019-02-25T13:13:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27351#issuecomment-527079",
    "user": "https://github.com/embray"
}
```

<a id='comment:3'></a>Replying to [jdemeyer](#comment%3A1):
> I don't think that #26996 should be used as a reason. That's a bug in the build system, that we could just fix independently.
> 
> I'm not saying that this ticket by itself is a bad idea, just that #26996 is not a good reason for it.


I agree, that's not the motivation at all.  My point was that it happened to expose the fact that a *lot* of people, more than I'd imagined was the case, were trying (and in the past, presumably, succeeding) to build gfortran when it wasn't really necessary for them to.



---

archive/issue_comments_527080.json:
```json
{
    "body": "<a id='comment:4'></a>Removing most of the rest of my open tickets out of the 8.7 milestone, which should be closed.",
    "created_at": "2019-03-25T10:44:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27351#issuecomment-527080",
    "user": "https://github.com/embray"
}
```

<a id='comment:4'></a>Removing most of the rest of my open tickets out of the 8.7 milestone, which should be closed.



---

archive/issue_events_067906.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:44:36Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "milestone": "sage-pending",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27351#event-67906"
}
```



---

archive/issue_comments_527081.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,9 @@\n \n The problem *only* occurs when trying to install the gfortran SPKG on Linux, and the fact that it's come up so frequently is alarming, as there should not be any good reason for people to be compiling gfortrans just for Sage.\n \n-There is discussion on #27054 about recommending it as a prerequisite.  I would go one step further and just fail--with a helpful error message-at `./configure` time, at least on platforms like Cygwin and most Linux distributions, to just install the system's fortran compiler, unless a flag is given to explicitly request it.  Because there's very rarely any good reason for someone to be wasting their time on that just to build Sage, and it seems many people have been doing so unwarily for a long time.\n+There is discussion on #27054 about recommending it as a prerequisite. \n+\n+embray suggests:\n+-  I would go one step further and just fail--with a helpful error message-at `./configure` time, at least on platforms like Cygwin and most Linux distributions, to just install the system's fortran compiler, unless a flag is given to explicitly request it.  Because there's very rarely any good reason for someone to be wasting their time on that just to build Sage, and it seems many people have been doing so unwarily for a long time.\n+\n+In this ticket we just make it a message at the end of the configure run -- not just for `gfortran`, but for all packages that have system packages.\n``````\n",
    "created_at": "2020-02-09T22:13:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27351#issuecomment-527081",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,9 @@
 
 The problem *only* occurs when trying to install the gfortran SPKG on Linux, and the fact that it's come up so frequently is alarming, as there should not be any good reason for people to be compiling gfortrans just for Sage.
 
-There is discussion on #27054 about recommending it as a prerequisite.  I would go one step further and just fail--with a helpful error message-at `./configure` time, at least on platforms like Cygwin and most Linux distributions, to just install the system's fortran compiler, unless a flag is given to explicitly request it.  Because there's very rarely any good reason for someone to be wasting their time on that just to build Sage, and it seems many people have been doing so unwarily for a long time.
+There is discussion on #27054 about recommending it as a prerequisite. 
+
+embray suggests:
+-  I would go one step further and just fail--with a helpful error message-at `./configure` time, at least on platforms like Cygwin and most Linux distributions, to just install the system's fortran compiler, unless a flag is given to explicitly request it.  Because there's very rarely any good reason for someone to be wasting their time on that just to build Sage, and it seems many people have been doing so unwarily for a long time.
+
+In this ticket we just make it a message at the end of the configure run -- not just for `gfortran`, but for all packages that have system packages.
``````




---

archive/issue_events_067907.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-02-09T22:13:05Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "milestone": "sage-pending",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27351#event-67907"
}
```



---

archive/issue_events_067908.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-02-09T22:13:05Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27351#event-67908"
}
```



---

archive/issue_comments_527082.json:
```json
{
    "body": "<a id='comment:5'></a>Instead of refusing to build it, I think we should in general suggest a list of system packages to install, at the end of the `configure` run, similar to #26964.\n\nI have revised the ticket description accordingly.",
    "created_at": "2020-02-09T22:13:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27351#issuecomment-527082",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>Instead of refusing to build it, I think we should in general suggest a list of system packages to install, at the end of the `configure` run, similar to #26964.

I have revised the ticket description accordingly.



---

archive/issue_comments_527083.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/at_end_of_configure__suggest_a_list_of_system_packages_to_install\"",
    "created_at": "2020-03-05T03:31:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27351#issuecomment-527083",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/at_end_of_configure__suggest_a_list_of_system_packages_to_install"



---

archive/issue_comments_527084.json:
```json
{
    "body": "Changing commit from \"\" to \"479c5211f3a7a56cd35ab8b44660a5be0b42e167\"",
    "created_at": "2020-03-05T04:51:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27351#issuecomment-527084",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "479c5211f3a7a56cd35ab8b44660a5be0b42e167"



---

archive/issue_comments_527085.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-03-05T04:51:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27351#issuecomment-527085",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_527086.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#29143\"",
    "created_at": "2020-03-05T04:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27351#issuecomment-527086",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#29143"



---

archive/issue_comments_527087.json:
```json
{
    "body": "<a id='comment:8'></a>The code on this branch is roughly what I have in mind for this functionality. Doesn't quite work yet.",
    "created_at": "2020-03-05T04:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27351#issuecomment-527087",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>The code on this branch is roughly what I have in mind for this functionality. Doesn't quite work yet.



---

archive/issue_comments_527088.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2020-03-05T04:53:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27351#issuecomment-527088",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_527089.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,4 +7,17 @@\n embray suggests:\n -  I would go one step further and just fail--with a helpful error message-at `./configure` time, at least on platforms like Cygwin and most Linux distributions, to just install the system's fortran compiler, unless a flag is given to explicitly request it.  Because there's very rarely any good reason for someone to be wasting their time on that just to build Sage, and it seems many people have been doing so unwarily for a long time.\n \n-In this ticket we just make it a message at the end of the configure run -- not just for `gfortran`, but for all packages that have system packages.\n+In this ticket we just make it a message at the end of the configure run -- not just for `gfortran`, but for all packages that have system packages.  Example:\n+\n+```\n+config.status: creating directory local/lib\n+config.status: creating directory local/share\n+config.status: creating directory local/var/lib/sage/installed\n+configure: Hint: The following SPKGs did not find equivalent system packages:\n+configure:   cbc gp2c libsemigroups m4ri ninja_build pari_elldata pari_galpol pari_nftables pari_seadata perl_term_readline_gnu\n+checking for the package system in use... conda\n+configure: Hint: Installing the following system packages is recommended and may avoid building some of the above SPKGs from source:\n+configure:   $ conda install coincbc m4ri ninja pari-galpol pari-seadata\n+configure: After installation, re-run configure using:\n+configure:   $ ./config.status --recheck && ./config.status\n+```\n``````\n",
    "created_at": "2020-03-06T03:19:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27351#issuecomment-527089",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,4 +7,17 @@
 embray suggests:
 -  I would go one step further and just fail--with a helpful error message-at `./configure` time, at least on platforms like Cygwin and most Linux distributions, to just install the system's fortran compiler, unless a flag is given to explicitly request it.  Because there's very rarely any good reason for someone to be wasting their time on that just to build Sage, and it seems many people have been doing so unwarily for a long time.
 
-In this ticket we just make it a message at the end of the configure run -- not just for `gfortran`, but for all packages that have system packages.
+In this ticket we just make it a message at the end of the configure run -- not just for `gfortran`, but for all packages that have system packages.  Example:
+
+```
+config.status: creating directory local/lib
+config.status: creating directory local/share
+config.status: creating directory local/var/lib/sage/installed
+configure: Hint: The following SPKGs did not find equivalent system packages:
+configure:   cbc gp2c libsemigroups m4ri ninja_build pari_elldata pari_galpol pari_nftables pari_seadata perl_term_readline_gnu
+checking for the package system in use... conda
+configure: Hint: Installing the following system packages is recommended and may avoid building some of the above SPKGs from source:
+configure:   $ conda install coincbc m4ri ninja pari-galpol pari-seadata
+configure: After installation, re-run configure using:
+configure:   $ ./config.status --recheck && ./config.status
+```
``````




---

archive/issue_comments_527090.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-06T03:22:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27351#issuecomment-527090",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_527091.json:
```json
{
    "body": "Changing commit from \"479c5211f3a7a56cd35ab8b44660a5be0b42e167\" to \"cee28946b4a3eb8439bca86fbb75acfca3bd9773\"",
    "created_at": "2020-03-06T03:22:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27351#issuecomment-527091",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "479c5211f3a7a56cd35ab8b44660a5be0b42e167" to "cee28946b4a3eb8439bca86fbb75acfca3bd9773"



---

archive/issue_comments_527092.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-03-06T03:28:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27351#issuecomment-527092",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_527093.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,13 +1,10 @@\n-There have been a spate of reports of issues like #26996 all stemming from people trying to build Sage on Linux systems that do not already have a supported Fortran compiler installed (but easily could).\n+There have been a spate of reports of issues like #26996 all stemming from people trying to build Sage on Linux systems that do not already have a supported Fortran compiler installed (but easily could). Likewise, for some other packages (openblas, R, ...).\n \n-The problem *only* occurs when trying to install the gfortran SPKG on Linux, and the fact that it's come up so frequently is alarming, as there should not be any good reason for people to be compiling gfortrans just for Sage.\n+embray suggests: I would [...]  just fail--with a helpful error message-at `./configure` time, at least on platforms like Cygwin and most Linux distributions, to just install the system's fortran compiler, unless a flag is given to explicitly request it.  [...]\n \n-There is discussion on #27054 about recommending it as a prerequisite. \n+In this ticket we just make it a friendly message at the end of the configure run -- not just for `gfortran`, but for all packages that have system packages. We will check if this already reduces the volume of messages regarding build problems on the lists.\n \n-embray suggests:\n--  I would go one step further and just fail--with a helpful error message-at `./configure` time, at least on platforms like Cygwin and most Linux distributions, to just install the system's fortran compiler, unless a flag is given to explicitly request it.  Because there's very rarely any good reason for someone to be wasting their time on that just to build Sage, and it seems many people have been doing so unwarily for a long time.\n-\n-In this ticket we just make it a message at the end of the configure run -- not just for `gfortran`, but for all packages that have system packages.  Example:\n+Example:\n \n ```\n config.status: creating directory local/lib\n``````\n",
    "created_at": "2020-03-06T03:28:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27351#issuecomment-527093",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,13 +1,10 @@
-There have been a spate of reports of issues like #26996 all stemming from people trying to build Sage on Linux systems that do not already have a supported Fortran compiler installed (but easily could).
+There have been a spate of reports of issues like #26996 all stemming from people trying to build Sage on Linux systems that do not already have a supported Fortran compiler installed (but easily could). Likewise, for some other packages (openblas, R, ...).
 
-The problem *only* occurs when trying to install the gfortran SPKG on Linux, and the fact that it's come up so frequently is alarming, as there should not be any good reason for people to be compiling gfortrans just for Sage.
+embray suggests: I would [...]  just fail--with a helpful error message-at `./configure` time, at least on platforms like Cygwin and most Linux distributions, to just install the system's fortran compiler, unless a flag is given to explicitly request it.  [...]
 
-There is discussion on #27054 about recommending it as a prerequisite. 
+In this ticket we just make it a friendly message at the end of the configure run -- not just for `gfortran`, but for all packages that have system packages. We will check if this already reduces the volume of messages regarding build problems on the lists.
 
-embray suggests:
--  I would go one step further and just fail--with a helpful error message-at `./configure` time, at least on platforms like Cygwin and most Linux distributions, to just install the system's fortran compiler, unless a flag is given to explicitly request it.  Because there's very rarely any good reason for someone to be wasting their time on that just to build Sage, and it seems many people have been doing so unwarily for a long time.
-
-In this ticket we just make it a message at the end of the configure run -- not just for `gfortran`, but for all packages that have system packages.  Example:
+Example:
 
 ```
 config.status: creating directory local/lib
``````




---

archive/issue_comments_527094.json:
```json
{
    "body": "<a id='comment:13'></a>I'd be fine with completely reworking the package summary at the end of configure (the currently existing one that prints out every package name).\n\nI think this could be done much more clearly, ending with a list of suggested system packages to install as you describe.",
    "created_at": "2020-03-06T09:16:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27351#issuecomment-527094",
    "user": "https://github.com/embray"
}
```

<a id='comment:13'></a>I'd be fine with completely reworking the package summary at the end of configure (the currently existing one that prints out every package name).

I think this could be done much more clearly, ending with a list of suggested system packages to install as you describe.



---

archive/issue_comments_527095.json:
```json
{
    "body": "<a id='comment:14'></a>Replying to [embray](#comment%3A13):\n> I'd be fine with completely reworking the package summary at the end of configure (the currently existing one that prints out every package name).\n> \n> I think this could be done much more clearly, ending with a list of suggested system packages to install as you describe.\n\n\nWe reworked it recently in #28788. Further ideas for improvement - please on a new ticket.\nThe present ticket is ready and needs review.",
    "created_at": "2020-03-06T16:37:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27351#issuecomment-527095",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>Replying to [embray](#comment%3A13):
> I'd be fine with completely reworking the package summary at the end of configure (the currently existing one that prints out every package name).
> 
> I think this could be done much more clearly, ending with a list of suggested system packages to install as you describe.


We reworked it recently in #28788. Further ideas for improvement - please on a new ticket.
The present ticket is ready and needs review.



---

archive/issue_comments_527096.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-08T20:35:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27351#issuecomment-527096",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_527097.json:
```json
{
    "body": "Changing commit from \"cee28946b4a3eb8439bca86fbb75acfca3bd9773\" to \"9a8f69363cb95def900d387caa7810fa6fb0f8a1\"",
    "created_at": "2020-03-08T20:35:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27351#issuecomment-527097",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "cee28946b4a3eb8439bca86fbb75acfca3bd9773" to "9a8f69363cb95def900d387caa7810fa6fb0f8a1"



---

archive/issue_comments_527098.json:
```json
{
    "body": "<a id='comment:16'></a>Needs review...",
    "created_at": "2020-03-09T21:24:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27351#issuecomment-527098",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'></a>Needs review...



---

archive/issue_comments_527099.json:
```json
{
    "body": "<a id='comment:17'></a>In a brand new tarball on an Ubuntu virtual machine:\n\n```\nconfigure: Hint: The following SPKGs did not find equivalent system packages:\nconfigure:   arb boost boost_cropped cbc eclib fplll gfan givaro glpk gp2c lcalc libatomic_ops libsemigroups nauty pari pari_elldata pari_galdata pari_galpol pari_nftables pari_seadata pari_seadata_small planarity sqlite tachyon zeromq\nchecking for the package system in use... debian\n./configure: line 30473: build/bin/sage-get-system-packages: No such file or directory\nconfigure: No equivalent system packages for debian are known to Sage\n```",
    "created_at": "2020-03-09T21:56:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27351#issuecomment-527099",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:17'></a>In a brand new tarball on an Ubuntu virtual machine:

```
configure: Hint: The following SPKGs did not find equivalent system packages:
configure:   arb boost boost_cropped cbc eclib fplll gfan givaro glpk gp2c lcalc libatomic_ops libsemigroups nauty pari pari_elldata pari_galdata pari_galpol pari_nftables pari_seadata pari_seadata_small planarity sqlite tachyon zeromq
checking for the package system in use... debian
./configure: line 30473: build/bin/sage-get-system-packages: No such file or directory
configure: No equivalent system packages for debian are known to Sage
```



---

archive/issue_comments_527100.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-09T21:58:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27351#issuecomment-527100",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_527101.json:
```json
{
    "body": "Changing commit from \"9a8f69363cb95def900d387caa7810fa6fb0f8a1\" to \"35e1e7d50ffa9ce488fddd85afcb330e187ae752\"",
    "created_at": "2020-03-09T21:58:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27351#issuecomment-527101",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9a8f69363cb95def900d387caa7810fa6fb0f8a1" to "35e1e7d50ffa9ce488fddd85afcb330e187ae752"



---

archive/issue_comments_527102.json:
```json
{
    "body": "<a id='comment:19'></a>What about embray's suggestion to fail on some platforms if gfortran is not installed? I worry that many users will run `make` without first running `./configure`, so the messages printed here will get lost.\n\nI wouldn't object if Sage converted to the more standard `./configure; make` procedure, but we're not there yet. On a separate ticket, we should at least encourage this workflow. (As a side note, it annoys me that `make distclean` also runs `./configure`.)",
    "created_at": "2020-03-10T20:26:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27351#issuecomment-527102",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:19'></a>What about embray's suggestion to fail on some platforms if gfortran is not installed? I worry that many users will run `make` without first running `./configure`, so the messages printed here will get lost.

I wouldn't object if Sage converted to the more standard `./configure; make` procedure, but we're not there yet. On a separate ticket, we should at least encourage this workflow. (As a side note, it annoys me that `make distclean` also runs `./configure`.)



---

archive/issue_comments_527103.json:
```json
{
    "body": "<a id='comment:20'></a>I don't see any message being printed on OS X with homebrew. Is this intentional? I guess so, since there aren't any files `build/pkgs/*/distros/homebrew`. Is that correct?\n\nBy the way, not related to this ticket, but is there a better place to put files like `build/pkgs/arch.txt`? In a directory `build/pkgs/DISTROS` or `build/distros`?",
    "created_at": "2020-03-10T20:33:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27351#issuecomment-527103",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:20'></a>I don't see any message being printed on OS X with homebrew. Is this intentional? I guess so, since there aren't any files `build/pkgs/*/distros/homebrew`. Is that correct?

By the way, not related to this ticket, but is there a better place to put files like `build/pkgs/arch.txt`? In a directory `build/pkgs/DISTROS` or `build/distros`?



---

archive/issue_comments_527104.json:
```json
{
    "body": "<a id='comment:21'></a>Replying to [jhpalmieri](#comment%3A19):\n> What about embray's suggestion to fail on some platforms if gfortran is not installed? \n\n\nI prefer the milder solution - warning instead of error - for this ticket.\n\n> I worry that many users will run `make` without first running `./configure`, so the messages printed here will get lost.\n\n\nGood point. \n\n> I wouldn't object if Sage converted to the more standard `./configure; make` procedure, but we're not there yet. On a separate ticket, we should at least encourage this workflow. \n\n\nI wouldn't mind making this change. Separate ticket?\n\n> (As a side note, it annoys me that `make distclean` also runs `./configure`.)\n\n\nRight.",
    "created_at": "2020-03-10T21:06:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27351#issuecomment-527104",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:21'></a>Replying to [jhpalmieri](#comment%3A19):
> What about embray's suggestion to fail on some platforms if gfortran is not installed? 


I prefer the milder solution - warning instead of error - for this ticket.

> I worry that many users will run `make` without first running `./configure`, so the messages printed here will get lost.


Good point. 

> I wouldn't object if Sage converted to the more standard `./configure; make` procedure, but we're not there yet. On a separate ticket, we should at least encourage this workflow. 


I wouldn't mind making this change. Separate ticket?

> (As a side note, it annoys me that `make distclean` also runs `./configure`.)


Right.



---

archive/issue_comments_527105.json:
```json
{
    "body": "<a id='comment:22'></a>Replying to [jhpalmieri](#comment%3A20):\n> I don't see any message being printed on OS X with homebrew. Is this intentional? I guess so, since there aren't any files `build/pkgs/*/distros/homebrew`. Is that correct?\n\n\nThat's right, this needs to be done. That would be a follow up ticket of #29104.\n\n> By the way, not related to this ticket, but is there a better place to put files like `build/pkgs/arch.txt`? In a directory `build/pkgs/DISTROS` or `build/distros`?\n\n\nYes, in #29124 (Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap) I plan to move these files to a better location.",
    "created_at": "2020-03-10T21:09:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27351#issuecomment-527105",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:22'></a>Replying to [jhpalmieri](#comment%3A20):
> I don't see any message being printed on OS X with homebrew. Is this intentional? I guess so, since there aren't any files `build/pkgs/*/distros/homebrew`. Is that correct?


That's right, this needs to be done. That would be a follow up ticket of #29104.

> By the way, not related to this ticket, but is there a better place to put files like `build/pkgs/arch.txt`? In a directory `build/pkgs/DISTROS` or `build/distros`?


Yes, in #29124 (Add script packages build/pkgs/_prereq, build/pkgs/_toolchain, build/pkgs/_bootstrap) I plan to move these files to a better location.



---

archive/issue_comments_527106.json:
```json
{
    "body": "<a id='comment:23'></a>Replying to [mkoeppe](#comment%3A21):\n> Replying to [jhpalmieri](#comment%3A19):\n> > I wouldn't object if Sage converted to the more standard `./configure; make` procedure, but we're not there yet. On a separate ticket, we should at least encourage this workflow. \n\n> \n> I wouldn't mind making this change. Separate ticket?\n\n\nYes.\n \n> > (As a side note, it annoys me that `make distclean` also runs `./configure`.)\n\n>\n> Right.\n\n\nThis is now #29310.",
    "created_at": "2020-03-10T22:31:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27351#issuecomment-527106",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:23'></a>Replying to [mkoeppe](#comment%3A21):
> Replying to [jhpalmieri](#comment%3A19):
> > I wouldn't object if Sage converted to the more standard `./configure; make` procedure, but we're not there yet. On a separate ticket, we should at least encourage this workflow. 

> 
> I wouldn't mind making this change. Separate ticket?


Yes.
 
> > (As a side note, it annoys me that `make distclean` also runs `./configure`.)

>
> Right.


This is now #29310.



---

archive/issue_comments_527107.json:
```json
{
    "body": "<a id='comment:24'></a>This looks okay to me as a first step. We should do more to highlight the messages, at least by encouraging people to run `./configure` and read what it says.",
    "created_at": "2020-03-10T22:32:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27351#issuecomment-527107",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:24'></a>This looks okay to me as a first step. We should do more to highlight the messages, at least by encouraging people to run `./configure` and read what it says.



---

archive/issue_comments_527108.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-03-10T22:32:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27351#issuecomment-527108",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_527109.json:
```json
{
    "body": "Changing reviewer from \"\" to \"John Palmieri\"",
    "created_at": "2020-03-10T22:32:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27351#issuecomment-527109",
    "user": "https://github.com/jhpalmieri"
}
```

Changing reviewer from "" to "John Palmieri"



---

archive/issue_comments_527110.json:
```json
{
    "body": "<a id='comment:25'></a>Thanks!",
    "created_at": "2020-03-10T22:36:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27351#issuecomment-527110",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'></a>Thanks!



---

archive/issue_events_067909.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-03-11T23:46:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27351#event-67909"
}
```



---

archive/issue_comments_527111.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/at_end_of_configure__suggest_a_list_of_system_packages_to_install\" to \"35e1e7d50ffa9ce488fddd85afcb330e187ae752\"",
    "created_at": "2020-03-11T23:46:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27351#issuecomment-527111",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/at_end_of_configure__suggest_a_list_of_system_packages_to_install" to "35e1e7d50ffa9ce488fddd85afcb330e187ae752"



---

archive/issue_comments_527112.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-03-11T23:46:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27351",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27351#issuecomment-527112",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
