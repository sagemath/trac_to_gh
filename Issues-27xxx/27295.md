# Issue 27295: Add GAP's Semigroups package to gap_packages

archive/issues_027058.json:
```json
{
    "body": "Semigroup depends on a number of GAP packages; io (cf. #26930), Digraphs (that uses bliss), orb, and genss.\n \nSo they all need to be added.\n\n**CC:**  @dimpase @isuruf\n\n**Keywords:** GAP packages, semigroups\n\n**Branch:** [426edfea20eb26d1e631f82e4e745e42412128dd](https://github.com/sagemath/sagetrac-mirror/commit/426edfea20eb26d1e631f82e4e745e42412128dd)\n\n**Upstream:** Reported upstream. Developers acknowledge bug.\n\n**Reviewer:** Isuru Fernando\n\n**Author:** Dima Pasechnik\n\n**Dependencies:** #27396, #28088\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/27295\n\n",
    "closed_at": "2019-08-10T13:08:42Z",
    "created_at": "2019-02-15T15:00:34Z",
    "labels": [
        "component: interfaces"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.9",
    "title": "Add GAP's Semigroups package to gap_packages",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27295",
    "user": "https://github.com/nthiery"
}
```
Semigroup depends on a number of GAP packages; io (cf. #26930), Digraphs (that uses bliss), orb, and genss.
 
So they all need to be added.

**CC:**  @dimpase @isuruf

**Keywords:** GAP packages, semigroups

**Branch:** [426edfea20eb26d1e631f82e4e745e42412128dd](https://github.com/sagemath/sagetrac-mirror/commit/426edfea20eb26d1e631f82e4e745e42412128dd)

**Upstream:** Reported upstream. Developers acknowledge bug.

**Reviewer:** Isuru Fernando

**Author:** Dima Pasechnik

**Dependencies:** #27396, #28088

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/27295





---

archive/issue_comments_527536.json:
```json
{
    "body": "**Dependencies:** #26930",
    "created_at": "2019-03-01T12:30:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527536",
    "user": "https://github.com/dimpase"
}
```

**Dependencies:** #26930



---

archive/issue_comments_527537.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n-\n+Semigroup depends on a number of GAP packages; io (cf. #26930), Digraphs (that uses bliss), orb, and genss.\n+ \n+So they all need to be added.\n``````\n",
    "created_at": "2019-03-01T12:30:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527537",
    "user": "https://github.com/dimpase"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,3 @@
-
+Semigroup depends on a number of GAP packages; io (cf. #26930), Digraphs (that uses bliss), orb, and genss.
+ 
+So they all need to be added.
``````




---

archive/issue_comments_527538.json:
```json
{
    "body": "<a id='comment:2'></a>\nof these, only Semigroups doesn't want to get installed.\n\n```\n#W dlopen() error: libsemigroups.so.0: cannot open shared object file: No such file or directory\nError, module '/mnt/opt/Sage/sage-dev/local/share/gap/pkg/semigroups-3.0.20/bin/x86_64-pc-linux-gnu-default64/semigroups.so' not found in\n  if not LOAD_DYN( arg[1], false ) then\n    Error( \"no support for dynamic loading\" );\nfi; at /mnt/opt/Sage/sage-dev/local/share/gap/lib/files.gd:583 called from \n<function \"LoadDynamicModule\">( <arguments> )\n called from read-eval loop at /mnt/opt/Sage/sage-dev/local/share/gap/pkg/semigroups-3.0.20/init.g:26\nError, was not in any namespace at /mnt/opt/Sage/sage-dev/local/share/gap/lib/variable.g:291 called from\nLEAVE_NAMESPACE(  ); at /mnt/opt/Sage/sage-dev/local/share/gap/lib/package.gi:1253 called from\nReadPackage( pkgname, \"init.g\" ); at /mnt/opt/Sage/sage-dev/local/share/gap/lib/package.gi:1616 called from\n<function \"LoadPackage\">( <arguments> )\n called from read-eval loop at *stdin*:1\n...\n```\nAnd indeed:\n\n```\n$ find local/ -name semigroups.so\nlocal/lib/gap/pkg/semigroups-3.0.20/bin/x86_64-pc-linux-gnu-default64/semigroups.so\n$ find local/ -name libsemigroups.so\nlocal/lib/gap/pkg/semigroups-3.0.20/bin/lib/libsemigroups.so\n$ ldd `find local/ -name libsemigroups.so`\n\tlinux-vdso.so.1 (0x00007ffd85de3000)\n\tlibpthread.so.0 => /lib64/libpthread.so.0 (0x00007fa1ffc9e000)\n\tlibstdc++.so.6 => /usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/libstdc++.so.6 (0x00007fa1ffa95000)\n\tlibm.so.6 => /lib64/libm.so.6 (0x00007fa1ff91a000)\n\tlibc.so.6 => /lib64/libc.so.6 (0x00007fa1ff74b000)\n\tlibgcc_s.so.1 => /usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/libgcc_s.so.1 (0x00007fa1ff731000)\n\t/lib64/ld-linux-x86-64.so.2 (0x00007fa1ffd35000)\n$ ldd `find local/ -name semigroups.so`\n\tlinux-vdso.so.1 (0x00007ffd8e160000)\n\tlibsemigroups.so.0 => not found\n\tlibpthread.so.0 => /lib64/libpthread.so.0 (0x00007fd7baaf4000)\n\tlibstdc++.so.6 => /usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/libstdc++.so.6 (0x00007fd7ba8eb000)\n\tlibm.so.6 => /lib64/libm.so.6 (0x00007fd7ba770000)\n\tlibc.so.6 => /lib64/libc.so.6 (0x00007fd7ba5a1000)\n\tlibgcc_s.so.1 => /usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/libgcc_s.so.1 (0x00007fd7ba585000)\n\t/lib64/ld-linux-x86-64.so.2 (0x00007fd7bab88000)\n```",
    "created_at": "2019-03-01T13:25:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527538",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:2'></a>
of these, only Semigroups doesn't want to get installed.

```
#W dlopen() error: libsemigroups.so.0: cannot open shared object file: No such file or directory
Error, module '/mnt/opt/Sage/sage-dev/local/share/gap/pkg/semigroups-3.0.20/bin/x86_64-pc-linux-gnu-default64/semigroups.so' not found in
  if not LOAD_DYN( arg[1], false ) then
    Error( "no support for dynamic loading" );
fi; at /mnt/opt/Sage/sage-dev/local/share/gap/lib/files.gd:583 called from 
<function "LoadDynamicModule">( <arguments> )
 called from read-eval loop at /mnt/opt/Sage/sage-dev/local/share/gap/pkg/semigroups-3.0.20/init.g:26
Error, was not in any namespace at /mnt/opt/Sage/sage-dev/local/share/gap/lib/variable.g:291 called from
LEAVE_NAMESPACE(  ); at /mnt/opt/Sage/sage-dev/local/share/gap/lib/package.gi:1253 called from
ReadPackage( pkgname, "init.g" ); at /mnt/opt/Sage/sage-dev/local/share/gap/lib/package.gi:1616 called from
<function "LoadPackage">( <arguments> )
 called from read-eval loop at *stdin*:1
...
```
And indeed:

```
$ find local/ -name semigroups.so
local/lib/gap/pkg/semigroups-3.0.20/bin/x86_64-pc-linux-gnu-default64/semigroups.so
$ find local/ -name libsemigroups.so
local/lib/gap/pkg/semigroups-3.0.20/bin/lib/libsemigroups.so
$ ldd `find local/ -name libsemigroups.so`
	linux-vdso.so.1 (0x00007ffd85de3000)
	libpthread.so.0 => /lib64/libpthread.so.0 (0x00007fa1ffc9e000)
	libstdc++.so.6 => /usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/libstdc++.so.6 (0x00007fa1ffa95000)
	libm.so.6 => /lib64/libm.so.6 (0x00007fa1ff91a000)
	libc.so.6 => /lib64/libc.so.6 (0x00007fa1ff74b000)
	libgcc_s.so.1 => /usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/libgcc_s.so.1 (0x00007fa1ff731000)
	/lib64/ld-linux-x86-64.so.2 (0x00007fa1ffd35000)
$ ldd `find local/ -name semigroups.so`
	linux-vdso.so.1 (0x00007ffd8e160000)
	libsemigroups.so.0 => not found
	libpthread.so.0 => /lib64/libpthread.so.0 (0x00007fd7baaf4000)
	libstdc++.so.6 => /usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/libstdc++.so.6 (0x00007fd7ba8eb000)
	libm.so.6 => /lib64/libm.so.6 (0x00007fd7ba770000)
	libc.so.6 => /lib64/libc.so.6 (0x00007fd7ba5a1000)
	libgcc_s.so.1 => /usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/libgcc_s.so.1 (0x00007fd7ba585000)
	/lib64/ld-linux-x86-64.so.2 (0x00007fd7bab88000)
```



---

archive/issue_comments_527539.json:
```json
{
    "body": "<a id='comment:3'></a>\nThis is after applying\n\n```diff\ndiff --git a/build/pkgs/gap_packages/spkg-install b/build/pkgs/gap_packages/spkg-install\nindex d8260b9aa0..4592675553 100644\n--- a/build/pkgs/gap_packages/spkg-install\n+++ b/build/pkgs/gap_packages/spkg-install\n@@ -19,6 +19,7 @@ sdh_install \\\n     crystcat \\\n     design \\\n     gbnp \\\n+    genss-* \\\n     Hap* \\\n     HAPcryst \\\n     hecke-* \\\n@@ -76,7 +77,7 @@ done\n # These packages have a new-style autoconf ./configure\n # that takes --with-gaproot\n \n-for pkg in nq-* io-*\n+for pkg in nq-* io-* orb-* digraphs-* semigroups-*\n do\n     cd \"$PKG_SRC_DIR/$pkg\"\n     sdh_configure --with-gaproot=\"$GAP_ROOT\"\n```\nto the branch of #26930.",
    "created_at": "2019-03-01T13:27:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527539",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:3'></a>
This is after applying

```diff
diff --git a/build/pkgs/gap_packages/spkg-install b/build/pkgs/gap_packages/spkg-install
index d8260b9aa0..4592675553 100644
--- a/build/pkgs/gap_packages/spkg-install
+++ b/build/pkgs/gap_packages/spkg-install
@@ -19,6 +19,7 @@ sdh_install \
     crystcat \
     design \
     gbnp \
+    genss-* \
     Hap* \
     HAPcryst \
     hecke-* \
@@ -76,7 +77,7 @@ done
 # These packages have a new-style autoconf ./configure
 # that takes --with-gaproot
 
-for pkg in nq-* io-*
+for pkg in nq-* io-* orb-* digraphs-* semigroups-*
 do
     cd "$PKG_SRC_DIR/$pkg"
     sdh_configure --with-gaproot="$GAP_ROOT"
```
to the branch of #26930.



---

archive/issue_comments_527540.json:
```json
{
    "body": "<a id='comment:4'></a>\nThis is a sort of upstream issue - they install a libsemigroup, a C++ library, in the tree, etc etc. I've opened https://github.com/gap-packages/Semigroups/issues/580\n---a clean way would be to install in advance, libsemigroup separately.",
    "created_at": "2019-03-01T13:53:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527540",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:4'></a>
This is a sort of upstream issue - they install a libsemigroup, a C++ library, in the tree, etc etc. I've opened https://github.com/gap-packages/Semigroups/issues/580
---a clean way would be to install in advance, libsemigroup separately.



---

archive/issue_comments_527541.json:
```json
{
    "body": "**Changing upstream** from \"N/A\" to \"Reported upstream. No feedback yet.\".",
    "created_at": "2019-03-01T13:53:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527541",
    "user": "https://github.com/dimpase"
}
```

**Changing upstream** from "N/A" to "Reported upstream. No feedback yet.".



---

archive/issue_comments_527542.json:
```json
{
    "body": "**Changing upstream** from \"Reported upstream. No feedback yet.\" to \"Reported upstream. Developers acknowledge bug.\".",
    "created_at": "2019-03-02T07:46:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527542",
    "user": "https://github.com/dimpase"
}
```

**Changing upstream** from "Reported upstream. No feedback yet." to "Reported upstream. Developers acknowledge bug.".



---

archive/issue_comments_527543.json:
```json
{
    "body": "<a id='comment:5'></a>\nupstream welcomes PRs, so I'll try doing this in a proper way.",
    "created_at": "2019-03-02T07:46:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527543",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:5'></a>
upstream welcomes PRs, so I'll try doing this in a proper way.



---

archive/issue_comments_527544.json:
```json
{
    "body": "**Changing dependencies** from \"#26930\" to \"#26930, #27396\".",
    "created_at": "2019-03-02T08:18:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527544",
    "user": "https://github.com/dimpase"
}
```

**Changing dependencies** from "#26930" to "#26930, #27396".



---

archive/issue_comments_527545.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"GAP packages, semigroups\".",
    "created_at": "2019-03-02T08:19:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527545",
    "user": "https://github.com/dimpase"
}
```

**Changing keywords** from "" to "GAP packages, semigroups".



---

archive/issue_comments_527546.json:
```json
{
    "body": "<a id='comment:8'></a>\n`digraphs` includes its own copy of `bliss` and just trying to do the right thing they just digraphs name_spaced bliss functions.\n\n```\nfbissey@moonloop ~/sandbox/gap-4.10.0/pkg/digraphs-0.13.0 $ diff -u /dev/shm/portage/sci-libs/bliss-0.73-r1/work/bliss-0.73/bliss_C.h src/bliss-0.73/bliss_C.h \n--- /dev/shm/portage/sci-libs/bliss-0.73-r1/work/bliss-0.73/bliss_C.h   2015-09-01 19:23:10.000000000 +1200\n+++ src/bliss-0.73/bliss_C.h    2018-11-02 11:56:12.000000000 +1300\n@@ -1,5 +1,5 @@\n-#ifndef BLISS_C_H\n-#define BLISS_C_H\n+#ifndef bliss_digraphs_C_H\n+#define bliss_digraphs_C_H\n \n /*\n   Copyright (c) 2003-2015 Tommi Junttila\n@@ -37,14 +37,14 @@\n /**\n  * \\brief The true bliss graph is hiding behind this typedef.\n  */\n-typedef struct bliss_graph_struct BlissGraph;\n+typedef struct bliss_digraphs_graph_struct BlissGraph;\n....\n```",
    "created_at": "2019-03-04T01:09:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527546",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:8'></a>
`digraphs` includes its own copy of `bliss` and just trying to do the right thing they just digraphs name_spaced bliss functions.

```
fbissey@moonloop ~/sandbox/gap-4.10.0/pkg/digraphs-0.13.0 $ diff -u /dev/shm/portage/sci-libs/bliss-0.73-r1/work/bliss-0.73/bliss_C.h src/bliss-0.73/bliss_C.h 
--- /dev/shm/portage/sci-libs/bliss-0.73-r1/work/bliss-0.73/bliss_C.h   2015-09-01 19:23:10.000000000 +1200
+++ src/bliss-0.73/bliss_C.h    2018-11-02 11:56:12.000000000 +1300
@@ -1,5 +1,5 @@
-#ifndef BLISS_C_H
-#define BLISS_C_H
+#ifndef bliss_digraphs_C_H
+#define bliss_digraphs_C_H
 
 /*
   Copyright (c) 2003-2015 Tommi Junttila
@@ -37,14 +37,14 @@
 /**
  * \brief The true bliss graph is hiding behind this typedef.
  */
-typedef struct bliss_graph_struct BlissGraph;
+typedef struct bliss_digraphs_graph_struct BlissGraph;
....
```



---

archive/issue_comments_527547.json:
```json
{
    "body": "<a id='comment:9'></a>\nI don't seem to have a problem with digraphs, it installs just fine, and uses a static copy of bliss, it seems. \n\nDo you mean to say one has to watch out for something, still?",
    "created_at": "2019-03-04T07:12:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527547",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:9'></a>
I don't seem to have a problem with digraphs, it installs just fine, and uses a static copy of bliss, it seems. 

Do you mean to say one has to watch out for something, still?



---

archive/issue_comments_527548.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [dimpase](#comment%3A9):\n> I don't seem to have a problem with digraphs, it installs just fine, and uses a static copy of bliss, it seems. \n> \n> Do you mean to say one has to watch out for something, still?\n\n\nNo, just don't like it I guess.",
    "created_at": "2019-03-04T07:27:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527548",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:10'></a>
Replying to [dimpase](#comment%3A9):
> I don't seem to have a problem with digraphs, it installs just fine, and uses a static copy of bliss, it seems. 
> 
> Do you mean to say one has to watch out for something, still?


No, just don't like it I guess.



---

archive/issue_comments_527549.json:
```json
{
    "body": "<a id='comment:11'></a>\nAt least with semigroups, hopefully after my https://github.com/gap-packages/Semigroups/pull/584 is in, it can be done in a clean way.",
    "created_at": "2019-03-07T11:58:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527549",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:11'></a>
At least with semigroups, hopefully after my https://github.com/gap-packages/Semigroups/pull/584 is in, it can be done in a clean way.



---

archive/issue_comments_527550.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [dimpase](#comment%3A11):\n> At least with semigroups, hopefully after my https://github.com/gap-packages/Semigroups/pull/584 is in, it can be done in a clean way.\n\n\nLooks good. It looks like that will have to wait gap-4.10.2 for it. I just finished updating all my sage-on-gentoo gap packages to offer 4.10.1 and I must say I was shocked when `orb` ditched autotools for a `gac` setup a la `crypting` which I think is an inferior solution. I hope it doesn't become a standard practise across gap packages.",
    "created_at": "2019-03-07T20:01:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527550",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:12'></a>
Replying to [dimpase](#comment%3A11):
> At least with semigroups, hopefully after my https://github.com/gap-packages/Semigroups/pull/584 is in, it can be done in a clean way.


Looks good. It looks like that will have to wait gap-4.10.2 for it. I just finished updating all my sage-on-gentoo gap packages to offer 4.10.1 and I must say I was shocked when `orb` ditched autotools for a `gac` setup a la `crypting` which I think is an inferior solution. I hope it doesn't become a standard practise across gap packages.



---

archive/issue_comments_527551.json:
```json
{
    "body": "<a id='comment:13'></a>\nUpstream has https://github.com/gap-packages/Semigroups/tree/v3.1.2 which has all the needed changes. Should we make a separate optional package for this?",
    "created_at": "2019-03-19T12:09:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527551",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:13'></a>
Upstream has https://github.com/gap-packages/Semigroups/tree/v3.1.2 which has all the needed changes. Should we make a separate optional package for this?



---

archive/issue_comments_527552.json:
```json
{
    "body": "<a id='comment:14'></a>\nTicket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)",
    "created_at": "2019-03-25T10:56:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527552",
    "user": "https://github.com/embray"
}
```

<a id='comment:14'></a>
Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)



---

archive/issue_events_076859.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27295#event-76859"
}
```



---

archive/issue_comments_527553.json:
```json
{
    "body": "<a id='comment:15'></a>\nAs the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).",
    "created_at": "2019-06-14T14:54:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527553",
    "user": "https://github.com/embray"
}
```

<a id='comment:15'></a>
As the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).



---

archive/issue_events_076860.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:54:19Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27295#event-76860"
}
```



---

archive/issue_events_076861.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-07-01T07:12:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27295#event-76861"
}
```



---

archive/issue_comments_527554.json:
```json
{
    "body": "**Changing dependencies** from \"#26930, #27396\" to \"#27396, #28088\".",
    "created_at": "2019-07-01T07:12:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527554",
    "user": "https://github.com/dimpase"
}
```

**Changing dependencies** from "#26930, #27396" to "#27396, #28088".



---

archive/issue_comments_527555.json:
```json
{
    "body": "**Branch:** [u/dimpase/packages/semigroupsgap](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/semigroupsgap)",
    "created_at": "2019-07-01T15:11:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527555",
    "user": "https://github.com/dimpase"
}
```

**Branch:** [u/dimpase/packages/semigroupsgap](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/semigroupsgap)



---

archive/issue_comments_527556.json:
```json
{
    "body": "**Commit:** [6fbdec99d1414e53e539188782b45f65b256e92b](https://github.com/sagemath/sagetrac-mirror/commit/6fbdec99d1414e53e539188782b45f65b256e92b)",
    "created_at": "2019-07-01T15:11:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527556",
    "user": "https://github.com/dimpase"
}
```

**Commit:** [6fbdec99d1414e53e539188782b45f65b256e92b](https://github.com/sagemath/sagetrac-mirror/commit/6fbdec99d1414e53e539188782b45f65b256e92b)



---

archive/issue_comments_527557.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2019-07-01T15:11:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527557",
    "user": "https://github.com/dimpase"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_527558.json:
```json
{
    "body": "<a id='comment:17'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/32aab07bdf3e6a76c1c4ae6c0effe9a5e506f914\">32aab07</a></td><td><code>update to GAP 4.10.2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e1d5ab1b8b23eced4721964453249b478f76e64c\">e1d5ab1</a></td><td><code>add libsemigroups package</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6fbdec99d1414e53e539188782b45f65b256e92b\">6fbdec9</a></td><td><code>add GAP package semigroups and its deps</code></td></tr></table>\n",
    "created_at": "2019-07-01T15:11:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527558",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:17'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/32aab07bdf3e6a76c1c4ae6c0effe9a5e506f914">32aab07</a></td><td><code>update to GAP 4.10.2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e1d5ab1b8b23eced4721964453249b478f76e64c">e1d5ab1</a></td><td><code>add libsemigroups package</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6fbdec99d1414e53e539188782b45f65b256e92b">6fbdec9</a></td><td><code>add GAP package semigroups and its deps</code></td></tr></table>




---

archive/issue_comments_527559.json:
```json
{
    "body": "**Author:** Dima Pasechnik",
    "created_at": "2019-07-01T15:11:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527559",
    "user": "https://github.com/dimpase"
}
```

**Author:** Dima Pasechnik



---

archive/issue_comments_527560.json:
```json
{
    "body": "**Changing commit** from \"[6fbdec99d1414e53e539188782b45f65b256e92b](https://github.com/sagemath/sagetrac-mirror/commit/6fbdec99d1414e53e539188782b45f65b256e92b)\" to \"[d948da7aa8bbfc36483204413860474519621b58](https://github.com/sagemath/sagetrac-mirror/commit/d948da7aa8bbfc36483204413860474519621b58)\".",
    "created_at": "2019-07-01T15:13:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527560",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[6fbdec99d1414e53e539188782b45f65b256e92b](https://github.com/sagemath/sagetrac-mirror/commit/6fbdec99d1414e53e539188782b45f65b256e92b)" to "[d948da7aa8bbfc36483204413860474519621b58](https://github.com/sagemath/sagetrac-mirror/commit/d948da7aa8bbfc36483204413860474519621b58)".



---

archive/issue_comments_527561.json:
```json
{
    "body": "<a id='comment:18'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d948da7aa8bbfc36483204413860474519621b58\">d948da7</a></td><td><code>bump up version</code></td></tr></table>\n",
    "created_at": "2019-07-01T15:13:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527561",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d948da7aa8bbfc36483204413860474519621b58">d948da7</a></td><td><code>bump up version</code></td></tr></table>




---

archive/issue_comments_527562.json:
```json
{
    "body": "<a id='comment:19'></a>\nDoesn't Digraphs have the same problem with planarity?",
    "created_at": "2019-07-02T17:32:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527562",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:19'></a>
Doesn't Digraphs have the same problem with planarity?



---

archive/issue_comments_527563.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [isuruf](#comment%3A19):\n> Doesn't Digraphs have the same problem with planarity?\n\n\nsorry, what problem?",
    "created_at": "2019-07-02T17:56:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527563",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:20'></a>
Replying to [isuruf](#comment%3A19):
> Doesn't Digraphs have the same problem with planarity?


sorry, what problem?



---

archive/issue_comments_527564.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [dimpase](#comment%3A20):\n> Replying to [isuruf](#comment%3A19):\n> > Doesn't Digraphs have the same problem with planarity?\n\n> \n> sorry, what problem?\n\n\nThis: https://github.com/gap-packages/Digraphs/pull/207\n\nAny version of Digraphs we include in Sage should have this patch, and should be built with `--with-external-planarity` (as such, libplanarity then needs to be a dependency of gap_packages, assuming it isn't already).",
    "created_at": "2019-07-04T13:12:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527564",
    "user": "https://github.com/embray"
}
```

<a id='comment:21'></a>
Replying to [dimpase](#comment%3A20):
> Replying to [isuruf](#comment%3A19):
> > Doesn't Digraphs have the same problem with planarity?

> 
> sorry, what problem?


This: https://github.com/gap-packages/Digraphs/pull/207

Any version of Digraphs we include in Sage should have this patch, and should be built with `--with-external-planarity` (as such, libplanarity then needs to be a dependency of gap_packages, assuming it isn't already).



---

archive/issue_comments_527565.json:
```json
{
    "body": "<a id='comment:22'></a>\nIIRC there are also some patches to libplanarity that are needed by digraphs.  Isuru would know what they are since he included them in the conda package.",
    "created_at": "2019-07-04T13:13:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527565",
    "user": "https://github.com/embray"
}
```

<a id='comment:22'></a>
IIRC there are also some patches to libplanarity that are needed by digraphs.  Isuru would know what they are since he included them in the conda package.



---

archive/issue_comments_527566.json:
```json
{
    "body": "<a id='comment:23'></a>\nDoes this imply that this ticket is (abot) broken, as it adds Digraphs in an \"old\" way?\nHow does one test?\n\nNote that https://github.com/gap-packages/Digraphs/pull/207 isn't even in a released version of Digraphs.",
    "created_at": "2019-07-04T13:38:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527566",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:23'></a>
Does this imply that this ticket is (abot) broken, as it adds Digraphs in an "old" way?
How does one test?

Note that https://github.com/gap-packages/Digraphs/pull/207 isn't even in a released version of Digraphs.



---

archive/issue_comments_527567.json:
```json
{
    "body": "<a id='comment:24'></a>\nOnly patch needed by planarity is extern patch that sage already has.\n\n> Does this imply that this ticket is (abot) broken, as it adds Digraphs in an \"old\" way? How does one test? \n\n\nProbably. Digraphs adds planarity as a subdirectory just like semigroups does with libsemigroups and therefore planarity inside digraphs is not installed. Since planarity is installed in sage and the two versions of planarity are ABI compatible, you might not see a missing planarity issue. This would break if planarity versions differ in Digraphs and Sage which is pretty unlikely since planarity changes rarely.",
    "created_at": "2019-07-04T13:47:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527567",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:24'></a>
Only patch needed by planarity is extern patch that sage already has.

> Does this imply that this ticket is (abot) broken, as it adds Digraphs in an "old" way? How does one test? 


Probably. Digraphs adds planarity as a subdirectory just like semigroups does with libsemigroups and therefore planarity inside digraphs is not installed. Since planarity is installed in sage and the two versions of planarity are ABI compatible, you might not see a missing planarity issue. This would break if planarity versions differ in Digraphs and Sage which is pretty unlikely since planarity changes rarely.



---

archive/issue_comments_527568.json:
```json
{
    "body": "<a id='comment:25'></a>\nReplying to [isuruf](#comment%3A24):\n> Only patch needed by planarity is extern patch that sage already has.\n> \n> > Does this imply that this ticket is (abot) broken, as it adds Digraphs in an \"old\" way? How does one test? \n\n> \n> Probably. Digraphs adds planarity as a subdirectory just like semigroups does with libsemigroups and therefore planarity inside digraphs is not installed. Since planarity is installed in sage and the two versions of planarity are ABI compatible, you might not see a missing planarity issue. This would break if planarity versions differ in Digraphs and Sage which is pretty unlikely since planarity changes rarely.\n\n\nYou're right that `Digraphs` pick up Sage's libplanarity.so:\n\n```\n$ ldd local/lib/gap/pkg/digraphs-0.15.2/bin/x86_64-pc-linux-gnu-default64-kv3/digraphs.so\n\tlinux-vdso.so.1 (0x00007fff9bdb7000)\n\tlibplanarity.so.0 => /mnt/opt/Sage/sage-dev/local/lib/libplanarity.so.0 (0x00007f55c349d000)\n\tlibstdc++.so.6 => /usr/lib/gcc/x86_64-pc-linux-gnu/9.1.0/libstdc++.so.6 (0x00007f55c3200000)\n\tlibm.so.6 => /lib64/libm.so.6 (0x00007f55c30c3000)\n\tlibc.so.6 => /lib64/libc.so.6 (0x00007f55c2ef3000)\n\tlibgcc_s.so.1 => /usr/lib/gcc/x86_64-pc-linux-gnu/9.1.0/libgcc_s.so.1 (0x00007f55c2ed9000)\n\t/lib64/ld-linux-x86-64.so.2 (0x00007f55c350e000)\n```\n\nSo in this sense the only thing to fix is to add `planarity` to dependencies of `gap_packages`. I've checked that `Digraphs` passes its own testsuite, just in case.",
    "created_at": "2019-07-04T15:33:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527568",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:25'></a>
Replying to [isuruf](#comment%3A24):
> Only patch needed by planarity is extern patch that sage already has.
> 
> > Does this imply that this ticket is (abot) broken, as it adds Digraphs in an "old" way? How does one test? 

> 
> Probably. Digraphs adds planarity as a subdirectory just like semigroups does with libsemigroups and therefore planarity inside digraphs is not installed. Since planarity is installed in sage and the two versions of planarity are ABI compatible, you might not see a missing planarity issue. This would break if planarity versions differ in Digraphs and Sage which is pretty unlikely since planarity changes rarely.


You're right that `Digraphs` pick up Sage's libplanarity.so:

```
$ ldd local/lib/gap/pkg/digraphs-0.15.2/bin/x86_64-pc-linux-gnu-default64-kv3/digraphs.so
	linux-vdso.so.1 (0x00007fff9bdb7000)
	libplanarity.so.0 => /mnt/opt/Sage/sage-dev/local/lib/libplanarity.so.0 (0x00007f55c349d000)
	libstdc++.so.6 => /usr/lib/gcc/x86_64-pc-linux-gnu/9.1.0/libstdc++.so.6 (0x00007f55c3200000)
	libm.so.6 => /lib64/libm.so.6 (0x00007f55c30c3000)
	libc.so.6 => /lib64/libc.so.6 (0x00007f55c2ef3000)
	libgcc_s.so.1 => /usr/lib/gcc/x86_64-pc-linux-gnu/9.1.0/libgcc_s.so.1 (0x00007f55c2ed9000)
	/lib64/ld-linux-x86-64.so.2 (0x00007f55c350e000)
```

So in this sense the only thing to fix is to add `planarity` to dependencies of `gap_packages`. I've checked that `Digraphs` passes its own testsuite, just in case.



---

archive/issue_comments_527569.json:
```json
{
    "body": "<a id='comment:26'></a>\nWould still be best to use `--with-external-planarity` if possible.  Or if nothing else, delete the vendored copy it builds before installing into Sage if we definitely don't need it.",
    "created_at": "2019-07-04T15:55:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527569",
    "user": "https://github.com/embray"
}
```

<a id='comment:26'></a>
Would still be best to use `--with-external-planarity` if possible.  Or if nothing else, delete the vendored copy it builds before installing into Sage if we definitely don't need it.



---

archive/issue_comments_527570.json:
```json
{
    "body": "<a id='comment:27'></a>\nSince there hasn't been a release of Digraphs, it wouldn't work, but it's still okay to add `--with-external-planarity` and released Digraph's configure just ignores it and you wouldn't have to do anything when a new release comes in.",
    "created_at": "2019-07-04T16:00:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527570",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:27'></a>
Since there hasn't been a release of Digraphs, it wouldn't work, but it's still okay to add `--with-external-planarity` and released Digraph's configure just ignores it and you wouldn't have to do anything when a new release comes in.



---

archive/issue_comments_527571.json:
```json
{
    "body": "**Changing commit** from \"[d948da7aa8bbfc36483204413860474519621b58](https://github.com/sagemath/sagetrac-mirror/commit/d948da7aa8bbfc36483204413860474519621b58)\" to \"[cec604d9a41846df6409d7344a718cd2cc56246b](https://github.com/sagemath/sagetrac-mirror/commit/cec604d9a41846df6409d7344a718cd2cc56246b)\".",
    "created_at": "2019-07-04T16:09:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527571",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d948da7aa8bbfc36483204413860474519621b58](https://github.com/sagemath/sagetrac-mirror/commit/d948da7aa8bbfc36483204413860474519621b58)" to "[cec604d9a41846df6409d7344a718cd2cc56246b](https://github.com/sagemath/sagetrac-mirror/commit/cec604d9a41846df6409d7344a718cd2cc56246b)".



---

archive/issue_comments_527572.json:
```json
{
    "body": "<a id='comment:28'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cec604d9a41846df6409d7344a718cd2cc56246b\">cec604d</a></td><td><code>correct checksum for the tarball</code></td></tr></table>\n",
    "created_at": "2019-07-04T16:09:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527572",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cec604d9a41846df6409d7344a718cd2cc56246b">cec604d</a></td><td><code>correct checksum for the tarball</code></td></tr></table>




---

archive/issue_comments_527573.json:
```json
{
    "body": "**Changing commit** from \"[cec604d9a41846df6409d7344a718cd2cc56246b](https://github.com/sagemath/sagetrac-mirror/commit/cec604d9a41846df6409d7344a718cd2cc56246b)\" to \"[2e6ec3cdc1f338d3eae6e158ab42c8068deb44de](https://github.com/sagemath/sagetrac-mirror/commit/2e6ec3cdc1f338d3eae6e158ab42c8068deb44de)\".",
    "created_at": "2019-07-04T16:11:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527573",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[cec604d9a41846df6409d7344a718cd2cc56246b](https://github.com/sagemath/sagetrac-mirror/commit/cec604d9a41846df6409d7344a718cd2cc56246b)" to "[2e6ec3cdc1f338d3eae6e158ab42c8068deb44de](https://github.com/sagemath/sagetrac-mirror/commit/2e6ec3cdc1f338d3eae6e158ab42c8068deb44de)".



---

archive/issue_comments_527574.json:
```json
{
    "body": "<a id='comment:29'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2e6ec3cdc1f338d3eae6e158ab42c8068deb44de\">2e6ec3c</a></td><td><code>planarity is a dependency of Digraph GAP package</code></td></tr></table>\n",
    "created_at": "2019-07-04T16:11:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527574",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2e6ec3cdc1f338d3eae6e158ab42c8068deb44de">2e6ec3c</a></td><td><code>planarity is a dependency of Digraph GAP package</code></td></tr></table>




---

archive/issue_comments_527575.json:
```json
{
    "body": "<a id='comment:30'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f88343fae4694ef32d302cbd758e11c97eb5189\">6f88343</a></td><td><code>libsemigroup and planarity are dependencies of Digraph and Semigroups GAP packages</code></td></tr></table>\n",
    "created_at": "2019-07-04T16:15:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527575",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f88343fae4694ef32d302cbd758e11c97eb5189">6f88343</a></td><td><code>libsemigroup and planarity are dependencies of Digraph and Semigroups GAP packages</code></td></tr></table>




---

archive/issue_comments_527576.json:
```json
{
    "body": "**Changing commit** from \"[2e6ec3cdc1f338d3eae6e158ab42c8068deb44de](https://github.com/sagemath/sagetrac-mirror/commit/2e6ec3cdc1f338d3eae6e158ab42c8068deb44de)\" to \"[6f88343fae4694ef32d302cbd758e11c97eb5189](https://github.com/sagemath/sagetrac-mirror/commit/6f88343fae4694ef32d302cbd758e11c97eb5189)\".",
    "created_at": "2019-07-04T16:15:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527576",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[2e6ec3cdc1f338d3eae6e158ab42c8068deb44de](https://github.com/sagemath/sagetrac-mirror/commit/2e6ec3cdc1f338d3eae6e158ab42c8068deb44de)" to "[6f88343fae4694ef32d302cbd758e11c97eb5189](https://github.com/sagemath/sagetrac-mirror/commit/6f88343fae4694ef32d302cbd758e11c97eb5189)".



---

archive/issue_comments_527577.json:
```json
{
    "body": "**Changing commit** from \"[6f88343fae4694ef32d302cbd758e11c97eb5189](https://github.com/sagemath/sagetrac-mirror/commit/6f88343fae4694ef32d302cbd758e11c97eb5189)\" to \"[426edfea20eb26d1e631f82e4e745e42412128dd](https://github.com/sagemath/sagetrac-mirror/commit/426edfea20eb26d1e631f82e4e745e42412128dd)\".",
    "created_at": "2019-07-04T16:56:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527577",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[6f88343fae4694ef32d302cbd758e11c97eb5189](https://github.com/sagemath/sagetrac-mirror/commit/6f88343fae4694ef32d302cbd758e11c97eb5189)" to "[426edfea20eb26d1e631f82e4e745e42412128dd](https://github.com/sagemath/sagetrac-mirror/commit/426edfea20eb26d1e631f82e4e745e42412128dd)".



---

archive/issue_comments_527578.json:
```json
{
    "body": "<a id='comment:31'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/426edfea20eb26d1e631f82e4e745e42412128dd\">426edfe</a></td><td><code>configure params array for packages (for passing --with-... if needed)</code></td></tr></table>\n",
    "created_at": "2019-07-04T16:56:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527578",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/426edfea20eb26d1e631f82e4e745e42412128dd">426edfe</a></td><td><code>configure params array for packages (for passing --with-... if needed)</code></td></tr></table>




---

archive/issue_comments_527579.json:
```json
{
    "body": "<a id='comment:32'></a>\nReplying to [isuruf](#comment%3A27):\n> Since there hasn't been a release of Digraphs, it wouldn't work, but it's still okay to add `--with-external-planarity` and released Digraph's configure just ignores it and you wouldn't have to do anything when a new release comes in.\n\n\nI've added this, and missing deps, and the correct tarball checksum for libsemigroups from #27396. I didn't try to remove dead wood copy of planarity installed by\nDigraph, as this appears to be harmless, and won't be needed once we get updated Digraph.",
    "created_at": "2019-07-04T16:59:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527579",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:32'></a>
Replying to [isuruf](#comment%3A27):
> Since there hasn't been a release of Digraphs, it wouldn't work, but it's still okay to add `--with-external-planarity` and released Digraph's configure just ignores it and you wouldn't have to do anything when a new release comes in.


I've added this, and missing deps, and the correct tarball checksum for libsemigroups from #27396. I didn't try to remove dead wood copy of planarity installed by
Digraph, as this appears to be harmless, and won't be needed once we get updated Digraph.



---

archive/issue_comments_527580.json:
```json
{
    "body": "<a id='comment:33'></a>\nDear me, I forgot those horrors so fast. No only does Digraphs use plain \"planarity\" it also include its own vendored (and prefixed so it doesn't clash) version of bliss-0.73. I had some fun patching that in 0.13.0 and 0.15.0. No I may have to reproduce it for 0.15.2.",
    "created_at": "2019-07-04T20:58:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527580",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:33'></a>
Dear me, I forgot those horrors so fast. No only does Digraphs use plain "planarity" it also include its own vendored (and prefixed so it doesn't clash) version of bliss-0.73. I had some fun patching that in 0.13.0 and 0.15.0. No I may have to reproduce it for 0.15.2.



---

archive/issue_comments_527581.json:
```json
{
    "body": "<a id='comment:35'></a>\nThis package vendors bliss. Is that okay?",
    "created_at": "2019-07-17T16:46:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527581",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:35'></a>
This package vendors bliss. Is that okay?



---

archive/issue_comments_527582.json:
```json
{
    "body": "<a id='comment:36'></a>\nWe know about vendored bliss. It builds it statically, so it should not be a show-stopper. It should be unvendored upstream. \n\nSome of us actually do research in semigroup algorithms, so we want it in...",
    "created_at": "2019-07-17T16:52:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527582",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:36'></a>
We know about vendored bliss. It builds it statically, so it should not be a show-stopper. It should be unvendored upstream. 

Some of us actually do research in semigroup algorithms, so we want it in...



---

archive/issue_comments_527583.json:
```json
{
    "body": "**Reviewer:** Isuru Fernando",
    "created_at": "2019-07-17T16:54:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527583",
    "user": "https://github.com/isuruf"
}
```

**Reviewer:** Isuru Fernando



---

archive/issue_comments_527584.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2019-07-17T16:54:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527584",
    "user": "https://github.com/isuruf"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_527585.json:
```json
{
    "body": "<a id='comment:37'></a>\nDo you mind creating a new trac ticket for unvendoring bliss?",
    "created_at": "2019-07-17T16:54:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527585",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:37'></a>
Do you mind creating a new trac ticket for unvendoring bliss?



---

archive/issue_comments_527586.json:
```json
{
    "body": "<a id='comment:38'></a>\nTo be more precise, it's Digraphs, a dependency of Semigroups, that vendors bliss.\n\nSo this is  in fact https://github.com/gap-packages/Digraphs/issues/205",
    "created_at": "2019-07-17T17:06:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527586",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:38'></a>
To be more precise, it's Digraphs, a dependency of Semigroups, that vendors bliss.

So this is  in fact https://github.com/gap-packages/Digraphs/issues/205



---

archive/issue_comments_527587.json:
```json
{
    "body": "<a id='comment:39'></a>\nI have an unvendoring patch in sage-on-gentoo, but it is minimal. I pass `LIBS=\"-lbliss -lplanarity -lgap\"` to configure, it should be improved to get configure to figure it itself. https://github.com/cschwan/sage-on-gentoo/blob/master/dev-gap/digraphs/files/digraphs-0.15.2-system_pkg.patch",
    "created_at": "2019-07-17T20:37:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527587",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:39'></a>
I have an unvendoring patch in sage-on-gentoo, but it is minimal. I pass `LIBS="-lbliss -lplanarity -lgap"` to configure, it should be improved to get configure to figure it itself. https://github.com/cschwan/sage-on-gentoo/blob/master/dev-gap/digraphs/files/digraphs-0.15.2-system_pkg.patch



---

archive/issue_comments_527588.json:
```json
{
    "body": "<a id='comment:40'></a>\nImproved unvendoring patch: https://github.com/cschwan/sage-on-gentoo/blob/master/dev-gap/digraphs/files/digraphs-0.15.2-system_pkg-r1.patch\n\n`configure` now searches for the libraries by itself.",
    "created_at": "2019-07-17T23:29:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527588",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:40'></a>
Improved unvendoring patch: https://github.com/cschwan/sage-on-gentoo/blob/master/dev-gap/digraphs/files/digraphs-0.15.2-system_pkg-r1.patch

`configure` now searches for the libraries by itself.



---

archive/issue_events_076862.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-08-10T13:08:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27295#event-76862"
}
```



---

archive/issue_comments_527589.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2019-08-10T13:08:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527589",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed



---

archive/issue_comments_527590.json:
```json
{
    "body": "**Changing branch** from \"[u/dimpase/packages/semigroupsgap](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/semigroupsgap)\" to \"[426edfea20eb26d1e631f82e4e745e42412128dd](https://github.com/sagemath/sagetrac-mirror/commit/426edfea20eb26d1e631f82e4e745e42412128dd)\".",
    "created_at": "2019-08-10T13:08:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527590",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/dimpase/packages/semigroupsgap](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/semigroupsgap)" to "[426edfea20eb26d1e631f82e4e745e42412128dd](https://github.com/sagemath/sagetrac-mirror/commit/426edfea20eb26d1e631f82e4e745e42412128dd)".



---

archive/issue_comments_527591.json:
```json
{
    "body": "<a id='comment:42'></a>\nSeems to work on Cygwin too, FWIW.",
    "created_at": "2019-08-15T18:09:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527591",
    "user": "https://github.com/embray"
}
```

<a id='comment:42'></a>
Seems to work on Cygwin too, FWIW.



---

archive/issue_comments_527592.json:
```json
{
    "body": "**Changing commit** from \"[426edfea20eb26d1e631f82e4e745e42412128dd](https://github.com/sagemath/sagetrac-mirror/commit/426edfea20eb26d1e631f82e4e745e42412128dd)\" to \"\".",
    "created_at": "2019-08-15T18:09:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27295#issuecomment-527592",
    "user": "https://github.com/embray"
}
```

**Changing commit** from "[426edfea20eb26d1e631f82e4e745e42412128dd](https://github.com/sagemath/sagetrac-mirror/commit/426edfea20eb26d1e631f82e4e745e42412128dd)" to "".
