# Issue 27295: Add GAP's Semigroups package to gap_packages

archive/issues_027058.json:
```json
{
    "assignees": [],
    "body": "Semigroup depends on a number of GAP packages; io (cf. #26930), Digraphs (that uses bliss), orb, and genss.\n \nSo they all need to be added.\n\nDepends on #27396\nDepends on #28088\n\nCC:  @dimpase @isuruf\n\nKeywords: **GAP packages, semigroups**\n\nBranch: **[`426edfe`](https://github.com/sagemath/sagetrac-mirror/commit/426edfea20eb26d1e631f82e4e745e42412128dd)**\n\nUpstream: **Reported upstream. Developers acknowledge bug.**\n\nReviewer: **Isuru Fernando**\n\nAuthor: **Dima Pasechnik**\n\nComponent: **interfaces**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/27295_\n\n",
    "closed_at": "2019-08-10T13:08:42Z",
    "created_at": "2019-02-15T15:00:34Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20interfaces",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.9",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Add GAP's Semigroups package to gap_packages",
    "type": "issue",
    "updated_at": "2019-08-15T18:09:27Z",
    "url": "https://github.com/sagemath/sage/issues/27295",
    "user": "https://github.com/nthiery"
}
```
Semigroup depends on a number of GAP packages; io (cf. #26930), Digraphs (that uses bliss), orb, and genss.
 
So they all need to be added.

Depends on #27396
Depends on #28088

CC:  @dimpase @isuruf

Keywords: **GAP packages, semigroups**

Branch: **[`426edfe`](https://github.com/sagemath/sagetrac-mirror/commit/426edfea20eb26d1e631f82e4e745e42412128dd)**

Upstream: **Reported upstream. Developers acknowledge bug.**

Reviewer: **Isuru Fernando**

Author: **Dima Pasechnik**

Component: **interfaces**

_Issue created by migration from https://trac.sagemath.org/ticket/27295_





---

archive/issue_events_372122.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2019-02-15T15:00:34Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27295#event-372122"
}
```



---

archive/issue_events_372123.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2019-02-15T15:00:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20interfaces",
    "label_color": "0000ff",
    "label_name": "c: interfaces",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27295#event-372123"
}
```



---

archive/issue_events_372124.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2019-02-15T15:00:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27295#event-372124"
}
```



---

archive/issue_events_372125.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2019-02-15T15:00:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27295#event-372125"
}
```



---

archive/issue_comments_421878.json:
```json
{
    "body": "Dependencies: **#26930**",
    "created_at": "2019-03-01T12:30:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421878",
    "user": "https://github.com/dimpase"
}
```

Dependencies: **#26930**



---

archive/issue_comments_421879.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n-\n+Semigroup depends on a number of GAP packages; io (cf. #26930), Digraphs (that uses bliss), orb, and genss.\n+ \n+So they all need to be added.\n``````\n",
    "created_at": "2019-03-01T12:30:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421879",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
-
+Semigroup depends on a number of GAP packages; io (cf. #26930), Digraphs (that uses bliss), orb, and genss.
+ 
+So they all need to be added.
``````




---

archive/issue_comments_421880.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nof these, only Semigroups doesn't want to get installed.\n\n```\n#W dlopen() error: libsemigroups.so.0: cannot open shared object file: No such file or directory\nError, module '/mnt/opt/Sage/sage-dev/local/share/gap/pkg/semigroups-3.0.20/bin/x86_64-pc-linux-gnu-default64/semigroups.so' not found in\n  if not LOAD_DYN( arg[1], false ) then\n    Error( \"no support for dynamic loading\" );\nfi; at /mnt/opt/Sage/sage-dev/local/share/gap/lib/files.gd:583 called from \n<function \"LoadDynamicModule\">( <arguments> )\n called from read-eval loop at /mnt/opt/Sage/sage-dev/local/share/gap/pkg/semigroups-3.0.20/init.g:26\nError, was not in any namespace at /mnt/opt/Sage/sage-dev/local/share/gap/lib/variable.g:291 called from\nLEAVE_NAMESPACE(  ); at /mnt/opt/Sage/sage-dev/local/share/gap/lib/package.gi:1253 called from\nReadPackage( pkgname, \"init.g\" ); at /mnt/opt/Sage/sage-dev/local/share/gap/lib/package.gi:1616 called from\n<function \"LoadPackage\">( <arguments> )\n called from read-eval loop at *stdin*:1\n...\n```\nAnd indeed:\n\n```\n$ find local/ -name semigroups.so\nlocal/lib/gap/pkg/semigroups-3.0.20/bin/x86_64-pc-linux-gnu-default64/semigroups.so\n$ find local/ -name libsemigroups.so\nlocal/lib/gap/pkg/semigroups-3.0.20/bin/lib/libsemigroups.so\n$ ldd `find local/ -name libsemigroups.so`\n\tlinux-vdso.so.1 (0x00007ffd85de3000)\n\tlibpthread.so.0 => /lib64/libpthread.so.0 (0x00007fa1ffc9e000)\n\tlibstdc++.so.6 => /usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/libstdc++.so.6 (0x00007fa1ffa95000)\n\tlibm.so.6 => /lib64/libm.so.6 (0x00007fa1ff91a000)\n\tlibc.so.6 => /lib64/libc.so.6 (0x00007fa1ff74b000)\n\tlibgcc_s.so.1 => /usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/libgcc_s.so.1 (0x00007fa1ff731000)\n\t/lib64/ld-linux-x86-64.so.2 (0x00007fa1ffd35000)\n$ ldd `find local/ -name semigroups.so`\n\tlinux-vdso.so.1 (0x00007ffd8e160000)\n\tlibsemigroups.so.0 => not found\n\tlibpthread.so.0 => /lib64/libpthread.so.0 (0x00007fd7baaf4000)\n\tlibstdc++.so.6 => /usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/libstdc++.so.6 (0x00007fd7ba8eb000)\n\tlibm.so.6 => /lib64/libm.so.6 (0x00007fd7ba770000)\n\tlibc.so.6 => /lib64/libc.so.6 (0x00007fd7ba5a1000)\n\tlibgcc_s.so.1 => /usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/libgcc_s.so.1 (0x00007fd7ba585000)\n\t/lib64/ld-linux-x86-64.so.2 (0x00007fd7bab88000)\n```",
    "created_at": "2019-03-01T13:25:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421880",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:2" align="right">comment:2</div>

of these, only Semigroups doesn't want to get installed.

```
#W dlopen() error: libsemigroups.so.0: cannot open shared object file: No such file or directory
Error, module '/mnt/opt/Sage/sage-dev/local/share/gap/pkg/semigroups-3.0.20/bin/x86_64-pc-linux-gnu-default64/semigroups.so' not found in
  if not LOAD_DYN( arg[1], false ) then
    Error( "no support for dynamic loading" );
fi; at /mnt/opt/Sage/sage-dev/local/share/gap/lib/files.gd:583 called from 
<function "LoadDynamicModule">( <arguments> )
 called from read-eval loop at /mnt/opt/Sage/sage-dev/local/share/gap/pkg/semigroups-3.0.20/init.g:26
Error, was not in any namespace at /mnt/opt/Sage/sage-dev/local/share/gap/lib/variable.g:291 called from
LEAVE_NAMESPACE(  ); at /mnt/opt/Sage/sage-dev/local/share/gap/lib/package.gi:1253 called from
ReadPackage( pkgname, "init.g" ); at /mnt/opt/Sage/sage-dev/local/share/gap/lib/package.gi:1616 called from
<function "LoadPackage">( <arguments> )
 called from read-eval loop at *stdin*:1
...
```
And indeed:

```
$ find local/ -name semigroups.so
local/lib/gap/pkg/semigroups-3.0.20/bin/x86_64-pc-linux-gnu-default64/semigroups.so
$ find local/ -name libsemigroups.so
local/lib/gap/pkg/semigroups-3.0.20/bin/lib/libsemigroups.so
$ ldd `find local/ -name libsemigroups.so`
	linux-vdso.so.1 (0x00007ffd85de3000)
	libpthread.so.0 => /lib64/libpthread.so.0 (0x00007fa1ffc9e000)
	libstdc++.so.6 => /usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/libstdc++.so.6 (0x00007fa1ffa95000)
	libm.so.6 => /lib64/libm.so.6 (0x00007fa1ff91a000)
	libc.so.6 => /lib64/libc.so.6 (0x00007fa1ff74b000)
	libgcc_s.so.1 => /usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/libgcc_s.so.1 (0x00007fa1ff731000)
	/lib64/ld-linux-x86-64.so.2 (0x00007fa1ffd35000)
$ ldd `find local/ -name semigroups.so`
	linux-vdso.so.1 (0x00007ffd8e160000)
	libsemigroups.so.0 => not found
	libpthread.so.0 => /lib64/libpthread.so.0 (0x00007fd7baaf4000)
	libstdc++.so.6 => /usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/libstdc++.so.6 (0x00007fd7ba8eb000)
	libm.so.6 => /lib64/libm.so.6 (0x00007fd7ba770000)
	libc.so.6 => /lib64/libc.so.6 (0x00007fd7ba5a1000)
	libgcc_s.so.1 => /usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/libgcc_s.so.1 (0x00007fd7ba585000)
	/lib64/ld-linux-x86-64.so.2 (0x00007fd7bab88000)
```



---

archive/issue_comments_421881.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThis is after applying\n\n```diff\ndiff --git a/build/pkgs/gap_packages/spkg-install b/build/pkgs/gap_packages/spkg-install\nindex d8260b9aa0..4592675553 100644\n--- a/build/pkgs/gap_packages/spkg-install\n+++ b/build/pkgs/gap_packages/spkg-install\n@@ -19,6 +19,7 @@ sdh_install \\\n     crystcat \\\n     design \\\n     gbnp \\\n+    genss-* \\\n     Hap* \\\n     HAPcryst \\\n     hecke-* \\\n@@ -76,7 +77,7 @@ done\n # These packages have a new-style autoconf ./configure\n # that takes --with-gaproot\n \n-for pkg in nq-* io-*\n+for pkg in nq-* io-* orb-* digraphs-* semigroups-*\n do\n     cd \"$PKG_SRC_DIR/$pkg\"\n     sdh_configure --with-gaproot=\"$GAP_ROOT\"\n```\nto the branch of #26930.",
    "created_at": "2019-03-01T13:27:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421881",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:3" align="right">comment:3</div>

This is after applying

```diff
diff --git a/build/pkgs/gap_packages/spkg-install b/build/pkgs/gap_packages/spkg-install
index d8260b9aa0..4592675553 100644
--- a/build/pkgs/gap_packages/spkg-install
+++ b/build/pkgs/gap_packages/spkg-install
@@ -19,6 +19,7 @@ sdh_install \
     crystcat \
     design \
     gbnp \
+    genss-* \
     Hap* \
     HAPcryst \
     hecke-* \
@@ -76,7 +77,7 @@ done
 # These packages have a new-style autoconf ./configure
 # that takes --with-gaproot
 
-for pkg in nq-* io-*
+for pkg in nq-* io-* orb-* digraphs-* semigroups-*
 do
     cd "$PKG_SRC_DIR/$pkg"
     sdh_configure --with-gaproot="$GAP_ROOT"
```
to the branch of #26930.



---

archive/issue_comments_421882.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThis is a sort of upstream issue - they install a libsemigroup, a C++ library, in the tree, etc etc. I've opened https://github.com/gap-packages/Semigroups/issues/580\n---a clean way would be to install in advance, libsemigroup separately.",
    "created_at": "2019-03-01T13:53:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421882",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:4" align="right">comment:4</div>

This is a sort of upstream issue - they install a libsemigroup, a C++ library, in the tree, etc etc. I've opened https://github.com/gap-packages/Semigroups/issues/580
---a clean way would be to install in advance, libsemigroup separately.



---

archive/issue_comments_421883.json:
```json
{
    "body": "Upstream: **Reported upstream. No feedback yet.**",
    "created_at": "2019-03-01T13:53:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421883",
    "user": "https://github.com/dimpase"
}
```

Upstream: **Reported upstream. No feedback yet.**



---

archive/issue_comments_421884.json:
```json
{
    "body": "Changed upstream from **Reported upstream. No feedback yet.** to **Reported upstream. Developers acknowledge bug.**",
    "created_at": "2019-03-02T07:46:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421884",
    "user": "https://github.com/dimpase"
}
```

Changed upstream from **Reported upstream. No feedback yet.** to **Reported upstream. Developers acknowledge bug.**



---

archive/issue_comments_421885.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nupstream welcomes PRs, so I'll try doing this in a proper way.",
    "created_at": "2019-03-02T07:46:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421885",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:5" align="right">comment:5</div>

upstream welcomes PRs, so I'll try doing this in a proper way.



---

archive/issue_comments_421886.json:
```json
{
    "body": "Changed dependencies from **#26930** to **#26930, #27396**",
    "created_at": "2019-03-02T08:18:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421886",
    "user": "https://github.com/dimpase"
}
```

Changed dependencies from **#26930** to **#26930, #27396**



---

archive/issue_comments_421887.json:
```json
{
    "body": "Changed keywords from none to **GAP packages, semigroups**",
    "created_at": "2019-03-02T08:19:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421887",
    "user": "https://github.com/dimpase"
}
```

Changed keywords from none to **GAP packages, semigroups**



---

archive/issue_comments_421888.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\n`digraphs` includes its own copy of `bliss` and just trying to do the right thing they just digraphs name_spaced bliss functions.\n\n```\nfbissey@moonloop ~/sandbox/gap-4.10.0/pkg/digraphs-0.13.0 $ diff -u /dev/shm/portage/sci-libs/bliss-0.73-r1/work/bliss-0.73/bliss_C.h src/bliss-0.73/bliss_C.h \n--- /dev/shm/portage/sci-libs/bliss-0.73-r1/work/bliss-0.73/bliss_C.h   2015-09-01 19:23:10.000000000 +1200\n+++ src/bliss-0.73/bliss_C.h    2018-11-02 11:56:12.000000000 +1300\n@@ -1,5 +1,5 @@\n-#ifndef BLISS_C_H\n-#define BLISS_C_H\n+#ifndef bliss_digraphs_C_H\n+#define bliss_digraphs_C_H\n \n /*\n   Copyright (c) 2003-2015 Tommi Junttila\n@@ -37,14 +37,14 @@\n /**\n  * \\brief The true bliss graph is hiding behind this typedef.\n  */\n-typedef struct bliss_graph_struct BlissGraph;\n+typedef struct bliss_digraphs_graph_struct BlissGraph;\n....\n```",
    "created_at": "2019-03-04T01:09:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421888",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:8" align="right">comment:8</div>

`digraphs` includes its own copy of `bliss` and just trying to do the right thing they just digraphs name_spaced bliss functions.

```
fbissey@moonloop ~/sandbox/gap-4.10.0/pkg/digraphs-0.13.0 $ diff -u /dev/shm/portage/sci-libs/bliss-0.73-r1/work/bliss-0.73/bliss_C.h src/bliss-0.73/bliss_C.h 
--- /dev/shm/portage/sci-libs/bliss-0.73-r1/work/bliss-0.73/bliss_C.h   2015-09-01 19:23:10.000000000 +1200
+++ src/bliss-0.73/bliss_C.h    2018-11-02 11:56:12.000000000 +1300
@@ -1,5 +1,5 @@
-#ifndef BLISS_C_H
-#define BLISS_C_H
+#ifndef bliss_digraphs_C_H
+#define bliss_digraphs_C_H
 
 /*
   Copyright (c) 2003-2015 Tommi Junttila
@@ -37,14 +37,14 @@
 /**
  * \brief The true bliss graph is hiding behind this typedef.
  */
-typedef struct bliss_graph_struct BlissGraph;
+typedef struct bliss_digraphs_graph_struct BlissGraph;
....
```



---

archive/issue_comments_421889.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI don't seem to have a problem with digraphs, it installs just fine, and uses a static copy of bliss, it seems. \n\nDo you mean to say one has to watch out for something, still?",
    "created_at": "2019-03-04T07:12:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421889",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:9" align="right">comment:9</div>

I don't seem to have a problem with digraphs, it installs just fine, and uses a static copy of bliss, it seems. 

Do you mean to say one has to watch out for something, still?



---

archive/issue_comments_421890.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@dimpase](#comment:9):\n> I don't seem to have a problem with digraphs, it installs just fine, and uses a static copy of bliss, it seems. \n> \n> Do you mean to say one has to watch out for something, still?\n\nNo, just don't like it I guess.",
    "created_at": "2019-03-04T07:27:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421890",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@dimpase](#comment:9):
> I don't seem to have a problem with digraphs, it installs just fine, and uses a static copy of bliss, it seems. 
> 
> Do you mean to say one has to watch out for something, still?

No, just don't like it I guess.



---

archive/issue_comments_421891.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nAt least with semigroups, hopefully after my https://github.com/gap-packages/Semigroups/pull/584 is in, it can be done in a clean way.",
    "created_at": "2019-03-07T11:58:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421891",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:11" align="right">comment:11</div>

At least with semigroups, hopefully after my https://github.com/gap-packages/Semigroups/pull/584 is in, it can be done in a clean way.



---

archive/issue_comments_421892.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@dimpase](#comment:11):\n> At least with semigroups, hopefully after my https://github.com/gap-packages/Semigroups/pull/584 is in, it can be done in a clean way.\n\nLooks good. It looks like that will have to wait gap-4.10.2 for it. I just finished updating all my sage-on-gentoo gap packages to offer 4.10.1 and I must say I was shocked when `orb` ditched autotools for a `gac` setup a la `crypting` which I think is an inferior solution. I hope it doesn't become a standard practise across gap packages.",
    "created_at": "2019-03-07T20:01:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421892",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@dimpase](#comment:11):
> At least with semigroups, hopefully after my https://github.com/gap-packages/Semigroups/pull/584 is in, it can be done in a clean way.

Looks good. It looks like that will have to wait gap-4.10.2 for it. I just finished updating all my sage-on-gentoo gap packages to offer 4.10.1 and I must say I was shocked when `orb` ditched autotools for a `gac` setup a la `crypting` which I think is an inferior solution. I hope it doesn't become a standard practise across gap packages.



---

archive/issue_comments_421893.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nUpstream has https://github.com/gap-packages/Semigroups/tree/v3.1.2 which has all the needed changes. Should we make a separate optional package for this?",
    "created_at": "2019-03-19T12:09:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421893",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:13" align="right">comment:13</div>

Upstream has https://github.com/gap-packages/Semigroups/tree/v3.1.2 which has all the needed changes. Should we make a separate optional package for this?



---

archive/issue_comments_421894.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nTicket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)",
    "created_at": "2019-03-25T10:56:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421894",
    "user": "https://github.com/embray"
}
```

<div id="comment:14" align="right">comment:14</div>

Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)



---

archive/issue_events_372126.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27295#event-372126"
}
```



---

archive/issue_events_372127.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27295#event-372127"
}
```



---

archive/issue_comments_421895.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nAs the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).",
    "created_at": "2019-06-14T14:54:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421895",
    "user": "https://github.com/embray"
}
```

<div id="comment:15" align="right">comment:15</div>

As the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).



---

archive/issue_events_372128.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:54:19Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27295#event-372128"
}
```



---

archive/issue_events_372129.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-07-01T07:12:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27295#event-372129"
}
```



---

archive/issue_comments_421896.json:
```json
{
    "body": "Changed dependencies from **#26930, #27396** to **#27396, #28088**",
    "created_at": "2019-07-01T07:12:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421896",
    "user": "https://github.com/dimpase"
}
```

Changed dependencies from **#26930, #27396** to **#27396, #28088**



---

archive/issue_comments_421897.json:
```json
{
    "body": "Branch: **[u/dimpase/packages/semigroupsgap](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/semigroupsgap)**",
    "created_at": "2019-07-01T15:11:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421897",
    "user": "https://github.com/dimpase"
}
```

Branch: **[u/dimpase/packages/semigroupsgap](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/semigroupsgap)**



---

archive/issue_comments_421898.json:
```json
{
    "body": "Commit: **[`6fbdec9`](https://github.com/sagemath/sagetrac-mirror/commit/6fbdec99d1414e53e539188782b45f65b256e92b)**",
    "created_at": "2019-07-01T15:11:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421898",
    "user": "https://github.com/dimpase"
}
```

Commit: **[`6fbdec9`](https://github.com/sagemath/sagetrac-mirror/commit/6fbdec99d1414e53e539188782b45f65b256e92b)**



---

archive/issue_events_372130.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-07-01T15:11:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27295#event-372130"
}
```



---

archive/issue_comments_421899.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/32aab07bdf3e6a76c1c4ae6c0effe9a5e506f914\"><code>32aab07</code></a></td><td><code>update to GAP 4.10.2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e1d5ab1b8b23eced4721964453249b478f76e64c\"><code>e1d5ab1</code></a></td><td><code>add libsemigroups package</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6fbdec99d1414e53e539188782b45f65b256e92b\"><code>6fbdec9</code></a></td><td><code>add GAP package semigroups and its deps</code></td></tr></table>\n",
    "created_at": "2019-07-01T15:11:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421899",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:17"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/32aab07bdf3e6a76c1c4ae6c0effe9a5e506f914"><code>32aab07</code></a></td><td><code>update to GAP 4.10.2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e1d5ab1b8b23eced4721964453249b478f76e64c"><code>e1d5ab1</code></a></td><td><code>add libsemigroups package</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6fbdec99d1414e53e539188782b45f65b256e92b"><code>6fbdec9</code></a></td><td><code>add GAP package semigroups and its deps</code></td></tr></table>




---

archive/issue_comments_421900.json:
```json
{
    "body": "Author: **Dima Pasechnik**",
    "created_at": "2019-07-01T15:11:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421900",
    "user": "https://github.com/dimpase"
}
```

Author: **Dima Pasechnik**



---

archive/issue_comments_421901.json:
```json
{
    "body": "Changed commit from **[`6fbdec9`](https://github.com/sagemath/sagetrac-mirror/commit/6fbdec99d1414e53e539188782b45f65b256e92b)** to **[`d948da7`](https://github.com/sagemath/sagetrac-mirror/commit/d948da7aa8bbfc36483204413860474519621b58)**",
    "created_at": "2019-07-01T15:13:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421901",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6fbdec9`](https://github.com/sagemath/sagetrac-mirror/commit/6fbdec99d1414e53e539188782b45f65b256e92b)** to **[`d948da7`](https://github.com/sagemath/sagetrac-mirror/commit/d948da7aa8bbfc36483204413860474519621b58)**



---

archive/issue_comments_421902.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d948da7aa8bbfc36483204413860474519621b58\"><code>d948da7</code></a></td><td><code>bump up version</code></td></tr></table>\n",
    "created_at": "2019-07-01T15:13:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421902",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d948da7aa8bbfc36483204413860474519621b58"><code>d948da7</code></a></td><td><code>bump up version</code></td></tr></table>




---

archive/issue_comments_421903.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nDoesn't Digraphs have the same problem with planarity?",
    "created_at": "2019-07-02T17:32:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421903",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:19" align="right">comment:19</div>

Doesn't Digraphs have the same problem with planarity?



---

archive/issue_comments_421904.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@isuruf](#comment:19):\n> Doesn't Digraphs have the same problem with planarity?\n\nsorry, what problem?",
    "created_at": "2019-07-02T17:56:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421904",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@isuruf](#comment:19):
> Doesn't Digraphs have the same problem with planarity?

sorry, what problem?



---

archive/issue_comments_421905.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@dimpase](#comment:20):\n> Replying to [@isuruf](#comment:19):\n> > Doesn't Digraphs have the same problem with planarity?\n\n> \n> sorry, what problem?\n\nThis: https://github.com/gap-packages/Digraphs/pull/207\n\nAny version of Digraphs we include in Sage should have this patch, and should be built with `--with-external-planarity` (as such, libplanarity then needs to be a dependency of gap_packages, assuming it isn't already).",
    "created_at": "2019-07-04T13:12:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421905",
    "user": "https://github.com/embray"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@dimpase](#comment:20):
> Replying to [@isuruf](#comment:19):
> > Doesn't Digraphs have the same problem with planarity?

> 
> sorry, what problem?

This: https://github.com/gap-packages/Digraphs/pull/207

Any version of Digraphs we include in Sage should have this patch, and should be built with `--with-external-planarity` (as such, libplanarity then needs to be a dependency of gap_packages, assuming it isn't already).



---

archive/issue_comments_421906.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nIIRC there are also some patches to libplanarity that are needed by digraphs.  Isuru would know what they are since he included them in the conda package.",
    "created_at": "2019-07-04T13:13:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421906",
    "user": "https://github.com/embray"
}
```

<div id="comment:22" align="right">comment:22</div>

IIRC there are also some patches to libplanarity that are needed by digraphs.  Isuru would know what they are since he included them in the conda package.



---

archive/issue_comments_421907.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nDoes this imply that this ticket is (abot) broken, as it adds Digraphs in an \"old\" way?\nHow does one test?\n\nNote that https://github.com/gap-packages/Digraphs/pull/207 isn't even in a released version of Digraphs.",
    "created_at": "2019-07-04T13:38:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421907",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:23" align="right">comment:23</div>

Does this imply that this ticket is (abot) broken, as it adds Digraphs in an "old" way?
How does one test?

Note that https://github.com/gap-packages/Digraphs/pull/207 isn't even in a released version of Digraphs.



---

archive/issue_comments_421908.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nOnly patch needed by planarity is extern patch that sage already has.\n\n> Does this imply that this ticket is (abot) broken, as it adds Digraphs in an \"old\" way? How does one test? \n\nProbably. Digraphs adds planarity as a subdirectory just like semigroups does with libsemigroups and therefore planarity inside digraphs is not installed. Since planarity is installed in sage and the two versions of planarity are ABI compatible, you might not see a missing planarity issue. This would break if planarity versions differ in Digraphs and Sage which is pretty unlikely since planarity changes rarely.",
    "created_at": "2019-07-04T13:47:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421908",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:24" align="right">comment:24</div>

Only patch needed by planarity is extern patch that sage already has.

> Does this imply that this ticket is (abot) broken, as it adds Digraphs in an "old" way? How does one test? 

Probably. Digraphs adds planarity as a subdirectory just like semigroups does with libsemigroups and therefore planarity inside digraphs is not installed. Since planarity is installed in sage and the two versions of planarity are ABI compatible, you might not see a missing planarity issue. This would break if planarity versions differ in Digraphs and Sage which is pretty unlikely since planarity changes rarely.



---

archive/issue_comments_421909.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@isuruf](#comment:24):\n> Only patch needed by planarity is extern patch that sage already has.\n> \n> > Does this imply that this ticket is (abot) broken, as it adds Digraphs in an \"old\" way? How does one test? \n\n> \n> Probably. Digraphs adds planarity as a subdirectory just like semigroups does with libsemigroups and therefore planarity inside digraphs is not installed. Since planarity is installed in sage and the two versions of planarity are ABI compatible, you might not see a missing planarity issue. This would break if planarity versions differ in Digraphs and Sage which is pretty unlikely since planarity changes rarely.\n\nYou're right that `Digraphs` pick up Sage's libplanarity.so:\n\n```\n$ ldd local/lib/gap/pkg/digraphs-0.15.2/bin/x86_64-pc-linux-gnu-default64-kv3/digraphs.so\n\tlinux-vdso.so.1 (0x00007fff9bdb7000)\n\tlibplanarity.so.0 => /mnt/opt/Sage/sage-dev/local/lib/libplanarity.so.0 (0x00007f55c349d000)\n\tlibstdc++.so.6 => /usr/lib/gcc/x86_64-pc-linux-gnu/9.1.0/libstdc++.so.6 (0x00007f55c3200000)\n\tlibm.so.6 => /lib64/libm.so.6 (0x00007f55c30c3000)\n\tlibc.so.6 => /lib64/libc.so.6 (0x00007f55c2ef3000)\n\tlibgcc_s.so.1 => /usr/lib/gcc/x86_64-pc-linux-gnu/9.1.0/libgcc_s.so.1 (0x00007f55c2ed9000)\n\t/lib64/ld-linux-x86-64.so.2 (0x00007f55c350e000)\n```\n\nSo in this sense the only thing to fix is to add `planarity` to dependencies of `gap_packages`. I've checked that `Digraphs` passes its own testsuite, just in case.",
    "created_at": "2019-07-04T15:33:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421909",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@isuruf](#comment:24):
> Only patch needed by planarity is extern patch that sage already has.
> 
> > Does this imply that this ticket is (abot) broken, as it adds Digraphs in an "old" way? How does one test? 

> 
> Probably. Digraphs adds planarity as a subdirectory just like semigroups does with libsemigroups and therefore planarity inside digraphs is not installed. Since planarity is installed in sage and the two versions of planarity are ABI compatible, you might not see a missing planarity issue. This would break if planarity versions differ in Digraphs and Sage which is pretty unlikely since planarity changes rarely.

You're right that `Digraphs` pick up Sage's libplanarity.so:

```
$ ldd local/lib/gap/pkg/digraphs-0.15.2/bin/x86_64-pc-linux-gnu-default64-kv3/digraphs.so
	linux-vdso.so.1 (0x00007fff9bdb7000)
	libplanarity.so.0 => /mnt/opt/Sage/sage-dev/local/lib/libplanarity.so.0 (0x00007f55c349d000)
	libstdc++.so.6 => /usr/lib/gcc/x86_64-pc-linux-gnu/9.1.0/libstdc++.so.6 (0x00007f55c3200000)
	libm.so.6 => /lib64/libm.so.6 (0x00007f55c30c3000)
	libc.so.6 => /lib64/libc.so.6 (0x00007f55c2ef3000)
	libgcc_s.so.1 => /usr/lib/gcc/x86_64-pc-linux-gnu/9.1.0/libgcc_s.so.1 (0x00007f55c2ed9000)
	/lib64/ld-linux-x86-64.so.2 (0x00007f55c350e000)
```

So in this sense the only thing to fix is to add `planarity` to dependencies of `gap_packages`. I've checked that `Digraphs` passes its own testsuite, just in case.



---

archive/issue_comments_421910.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nWould still be best to use `--with-external-planarity` if possible.  Or if nothing else, delete the vendored copy it builds before installing into Sage if we definitely don't need it.",
    "created_at": "2019-07-04T15:55:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421910",
    "user": "https://github.com/embray"
}
```

<div id="comment:26" align="right">comment:26</div>

Would still be best to use `--with-external-planarity` if possible.  Or if nothing else, delete the vendored copy it builds before installing into Sage if we definitely don't need it.



---

archive/issue_comments_421911.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nSince there hasn't been a release of Digraphs, it wouldn't work, but it's still okay to add `--with-external-planarity` and released Digraph's configure just ignores it and you wouldn't have to do anything when a new release comes in.",
    "created_at": "2019-07-04T16:00:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421911",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:27" align="right">comment:27</div>

Since there hasn't been a release of Digraphs, it wouldn't work, but it's still okay to add `--with-external-planarity` and released Digraph's configure just ignores it and you wouldn't have to do anything when a new release comes in.



---

archive/issue_comments_421912.json:
```json
{
    "body": "Changed commit from **[`d948da7`](https://github.com/sagemath/sagetrac-mirror/commit/d948da7aa8bbfc36483204413860474519621b58)** to **[`cec604d`](https://github.com/sagemath/sagetrac-mirror/commit/cec604d9a41846df6409d7344a718cd2cc56246b)**",
    "created_at": "2019-07-04T16:09:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421912",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d948da7`](https://github.com/sagemath/sagetrac-mirror/commit/d948da7aa8bbfc36483204413860474519621b58)** to **[`cec604d`](https://github.com/sagemath/sagetrac-mirror/commit/cec604d9a41846df6409d7344a718cd2cc56246b)**



---

archive/issue_comments_421913.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cec604d9a41846df6409d7344a718cd2cc56246b\"><code>cec604d</code></a></td><td><code>correct checksum for the tarball</code></td></tr></table>\n",
    "created_at": "2019-07-04T16:09:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421913",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cec604d9a41846df6409d7344a718cd2cc56246b"><code>cec604d</code></a></td><td><code>correct checksum for the tarball</code></td></tr></table>




---

archive/issue_comments_421914.json:
```json
{
    "body": "Changed commit from **[`cec604d`](https://github.com/sagemath/sagetrac-mirror/commit/cec604d9a41846df6409d7344a718cd2cc56246b)** to **[`2e6ec3c`](https://github.com/sagemath/sagetrac-mirror/commit/2e6ec3cdc1f338d3eae6e158ab42c8068deb44de)**",
    "created_at": "2019-07-04T16:11:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421914",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cec604d`](https://github.com/sagemath/sagetrac-mirror/commit/cec604d9a41846df6409d7344a718cd2cc56246b)** to **[`2e6ec3c`](https://github.com/sagemath/sagetrac-mirror/commit/2e6ec3cdc1f338d3eae6e158ab42c8068deb44de)**



---

archive/issue_comments_421915.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2e6ec3cdc1f338d3eae6e158ab42c8068deb44de\"><code>2e6ec3c</code></a></td><td><code>planarity is a dependency of Digraph GAP package</code></td></tr></table>\n",
    "created_at": "2019-07-04T16:11:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421915",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2e6ec3cdc1f338d3eae6e158ab42c8068deb44de"><code>2e6ec3c</code></a></td><td><code>planarity is a dependency of Digraph GAP package</code></td></tr></table>




---

archive/issue_comments_421916.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f88343fae4694ef32d302cbd758e11c97eb5189\"><code>6f88343</code></a></td><td><code>libsemigroup and planarity are dependencies of Digraph and Semigroups GAP packages</code></td></tr></table>\n",
    "created_at": "2019-07-04T16:15:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421916",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f88343fae4694ef32d302cbd758e11c97eb5189"><code>6f88343</code></a></td><td><code>libsemigroup and planarity are dependencies of Digraph and Semigroups GAP packages</code></td></tr></table>




---

archive/issue_comments_421917.json:
```json
{
    "body": "Changed commit from **[`2e6ec3c`](https://github.com/sagemath/sagetrac-mirror/commit/2e6ec3cdc1f338d3eae6e158ab42c8068deb44de)** to **[`6f88343`](https://github.com/sagemath/sagetrac-mirror/commit/6f88343fae4694ef32d302cbd758e11c97eb5189)**",
    "created_at": "2019-07-04T16:15:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421917",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2e6ec3c`](https://github.com/sagemath/sagetrac-mirror/commit/2e6ec3cdc1f338d3eae6e158ab42c8068deb44de)** to **[`6f88343`](https://github.com/sagemath/sagetrac-mirror/commit/6f88343fae4694ef32d302cbd758e11c97eb5189)**



---

archive/issue_comments_421918.json:
```json
{
    "body": "Changed commit from **[`6f88343`](https://github.com/sagemath/sagetrac-mirror/commit/6f88343fae4694ef32d302cbd758e11c97eb5189)** to **[`426edfe`](https://github.com/sagemath/sagetrac-mirror/commit/426edfea20eb26d1e631f82e4e745e42412128dd)**",
    "created_at": "2019-07-04T16:56:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421918",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6f88343`](https://github.com/sagemath/sagetrac-mirror/commit/6f88343fae4694ef32d302cbd758e11c97eb5189)** to **[`426edfe`](https://github.com/sagemath/sagetrac-mirror/commit/426edfea20eb26d1e631f82e4e745e42412128dd)**



---

archive/issue_comments_421919.json:
```json
{
    "body": "<div id=\"comment:31\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/426edfea20eb26d1e631f82e4e745e42412128dd\"><code>426edfe</code></a></td><td><code>configure params array for packages (for passing --with-... if needed)</code></td></tr></table>\n",
    "created_at": "2019-07-04T16:56:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421919",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:31"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/426edfea20eb26d1e631f82e4e745e42412128dd"><code>426edfe</code></a></td><td><code>configure params array for packages (for passing --with-... if needed)</code></td></tr></table>




---

archive/issue_comments_421920.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@isuruf](#comment:27):\n> Since there hasn't been a release of Digraphs, it wouldn't work, but it's still okay to add `--with-external-planarity` and released Digraph's configure just ignores it and you wouldn't have to do anything when a new release comes in.\n\nI've added this, and missing deps, and the correct tarball checksum for libsemigroups from #27396. I didn't try to remove dead wood copy of planarity installed by\nDigraph, as this appears to be harmless, and won't be needed once we get updated Digraph.",
    "created_at": "2019-07-04T16:59:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421920",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@isuruf](#comment:27):
> Since there hasn't been a release of Digraphs, it wouldn't work, but it's still okay to add `--with-external-planarity` and released Digraph's configure just ignores it and you wouldn't have to do anything when a new release comes in.

I've added this, and missing deps, and the correct tarball checksum for libsemigroups from #27396. I didn't try to remove dead wood copy of planarity installed by
Digraph, as this appears to be harmless, and won't be needed once we get updated Digraph.



---

archive/issue_comments_421921.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nDear me, I forgot those horrors so fast. No only does Digraphs use plain \"planarity\" it also include its own vendored (and prefixed so it doesn't clash) version of bliss-0.73. I had some fun patching that in 0.13.0 and 0.15.0. No I may have to reproduce it for 0.15.2.",
    "created_at": "2019-07-04T20:58:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421921",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:33" align="right">comment:33</div>

Dear me, I forgot those horrors so fast. No only does Digraphs use plain "planarity" it also include its own vendored (and prefixed so it doesn't clash) version of bliss-0.73. I had some fun patching that in 0.13.0 and 0.15.0. No I may have to reproduce it for 0.15.2.



---

archive/issue_comments_421922.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nThis package vendors bliss. Is that okay?",
    "created_at": "2019-07-17T16:46:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421922",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:35" align="right">comment:35</div>

This package vendors bliss. Is that okay?



---

archive/issue_comments_421923.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nWe know about vendored bliss. It builds it statically, so it should not be a show-stopper. It should be unvendored upstream. \n\nSome of us actually do research in semigroup algorithms, so we want it in...",
    "created_at": "2019-07-17T16:52:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421923",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:36" align="right">comment:36</div>

We know about vendored bliss. It builds it statically, so it should not be a show-stopper. It should be unvendored upstream. 

Some of us actually do research in semigroup algorithms, so we want it in...



---

archive/issue_comments_421924.json:
```json
{
    "body": "Reviewer: **Isuru Fernando**",
    "created_at": "2019-07-17T16:54:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421924",
    "user": "https://github.com/isuruf"
}
```

Reviewer: **Isuru Fernando**



---

archive/issue_events_372131.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2019-07-17T16:54:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27295#event-372131"
}
```



---

archive/issue_events_372132.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2019-07-17T16:54:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27295#event-372132"
}
```



---

archive/issue_comments_421925.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nDo you mind creating a new trac ticket for unvendoring bliss?",
    "created_at": "2019-07-17T16:54:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421925",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:37" align="right">comment:37</div>

Do you mind creating a new trac ticket for unvendoring bliss?



---

archive/issue_comments_421926.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nTo be more precise, it's Digraphs, a dependency of Semigroups, that vendors bliss.\n\nSo this is  in fact https://github.com/gap-packages/Digraphs/issues/205",
    "created_at": "2019-07-17T17:06:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421926",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:38" align="right">comment:38</div>

To be more precise, it's Digraphs, a dependency of Semigroups, that vendors bliss.

So this is  in fact https://github.com/gap-packages/Digraphs/issues/205



---

archive/issue_comments_421927.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nI have an unvendoring patch in sage-on-gentoo, but it is minimal. I pass `LIBS=\"-lbliss -lplanarity -lgap\"` to configure, it should be improved to get configure to figure it itself. https://github.com/cschwan/sage-on-gentoo/blob/master/dev-gap/digraphs/files/digraphs-0.15.2-system_pkg.patch",
    "created_at": "2019-07-17T20:37:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421927",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:39" align="right">comment:39</div>

I have an unvendoring patch in sage-on-gentoo, but it is minimal. I pass `LIBS="-lbliss -lplanarity -lgap"` to configure, it should be improved to get configure to figure it itself. https://github.com/cschwan/sage-on-gentoo/blob/master/dev-gap/digraphs/files/digraphs-0.15.2-system_pkg.patch



---

archive/issue_comments_421928.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nImproved unvendoring patch: https://github.com/cschwan/sage-on-gentoo/blob/master/dev-gap/digraphs/files/digraphs-0.15.2-system_pkg-r1.patch\n\n`configure` now searches for the libraries by itself.",
    "created_at": "2019-07-17T23:29:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421928",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:40" align="right">comment:40</div>

Improved unvendoring patch: https://github.com/cschwan/sage-on-gentoo/blob/master/dev-gap/digraphs/files/digraphs-0.15.2-system_pkg-r1.patch

`configure` now searches for the libraries by itself.



---

archive/issue_events_372133.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-08-10T13:08:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27295#event-372133"
}
```



---

archive/issue_events_372134.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "223ef8bc38f8228b31947e95bc1ee65ce0be7e99",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-08-10T13:08:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27295#event-372134"
}
```



---

archive/issue_comments_421929.json:
```json
{
    "body": "Changed branch from **[u/dimpase/packages/semigroupsgap](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/semigroupsgap)** to **[`426edfe`](https://github.com/sagemath/sagetrac-mirror/commit/426edfea20eb26d1e631f82e4e745e42412128dd)**",
    "created_at": "2019-08-10T13:08:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421929",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/dimpase/packages/semigroupsgap](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/semigroupsgap)** to **[`426edfe`](https://github.com/sagemath/sagetrac-mirror/commit/426edfea20eb26d1e631f82e4e745e42412128dd)**



---

archive/issue_comments_421930.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nSeems to work on Cygwin too, FWIW.",
    "created_at": "2019-08-15T18:09:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421930",
    "user": "https://github.com/embray"
}
```

<div id="comment:42" align="right">comment:42</div>

Seems to work on Cygwin too, FWIW.



---

archive/issue_comments_421931.json:
```json
{
    "body": "Changed commit from **[`426edfe`](https://github.com/sagemath/sagetrac-mirror/commit/426edfea20eb26d1e631f82e4e745e42412128dd)** to none",
    "created_at": "2019-08-15T18:09:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27295#issuecomment-421931",
    "user": "https://github.com/embray"
}
```

Changed commit from **[`426edfe`](https://github.com/sagemath/sagetrac-mirror/commit/426edfea20eb26d1e631f82e4e745e42412128dd)** to none
