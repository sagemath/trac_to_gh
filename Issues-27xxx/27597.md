# Issue 27597: igraph requires -lblas and -llapack

archive/issues_027360.json:
```json
{
    "body": "`igraph` doesn't build on some systems:\n\n```\n[igraph-0.7.1999] /usr/lib/gcc/x86_64-pc-linux-gnu/4.9.3/../../../../x86_64-pc-linux-gnu/bin/ld: cannot find -lblas\n[igraph-0.7.1999] /usr/lib/gcc/x86_64-pc-linux-gnu/4.9.3/../../../../x86_64-pc-linux-gnu/bin/ld: cannot find -llapack\n```\n\nIdeally, it *should* use OpenBLAS but it doesn't. Note that linking against OpenBLAS should be done with `-lopenblas`, not `-lblas`.\n\n---\n\nThe use of blas/lapack in the (new) igraph is optional, so we just not use them in this branch.\n\nWe also specify the required in the (new) igraph package glpk in its dependencies.\n\nAssignee: @dimpase\n\nCC:  @dimpase\n\nBranch/Commit: 28d375fc06ce45866233da4fbe1c239909312875\n\nReviewer: Jeroen Demeyer\n\nAuthor: Dima Pasechnik\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/27597\n\n",
    "closed_at": "2019-04-11T16:57:55Z",
    "created_at": "2019-04-02T18:53:23Z",
    "labels": [
        "component: packages: optional",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.8",
    "title": "igraph requires -lblas and -llapack",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27597",
    "user": "https://github.com/jdemeyer"
}
```
`igraph` doesn't build on some systems:

```
[igraph-0.7.1999] /usr/lib/gcc/x86_64-pc-linux-gnu/4.9.3/../../../../x86_64-pc-linux-gnu/bin/ld: cannot find -lblas
[igraph-0.7.1999] /usr/lib/gcc/x86_64-pc-linux-gnu/4.9.3/../../../../x86_64-pc-linux-gnu/bin/ld: cannot find -llapack
```

Ideally, it *should* use OpenBLAS but it doesn't. Note that linking against OpenBLAS should be done with `-lopenblas`, not `-lblas`.

---

The use of blas/lapack in the (new) igraph is optional, so we just not use them in this branch.

We also specify the required in the (new) igraph package glpk in its dependencies.

Assignee: @dimpase

CC:  @dimpase

Branch/Commit: 28d375fc06ce45866233da4fbe1c239909312875

Reviewer: Jeroen Demeyer

Author: Dima Pasechnik

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/27597





---

archive/issue_comments_410794.json:
```json
{
    "body": "<a id='comment:1'></a>in fact, it's entirely a bug introduced by me. The have very similar options\n--with-glpk=external, --with-blas=external, meaning totally different things---cause they ship a version of glpk, but do not ship one for blas/lapack, which are actually optional.\n\nSo we should not link them at all (I won't try making an openblas version, I have no idea whether it's supported).",
    "created_at": "2019-04-02T23:36:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27597#issuecomment-410794",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:1'></a>in fact, it's entirely a bug introduced by me. The have very similar options
--with-glpk=external, --with-blas=external, meaning totally different things---cause they ship a version of glpk, but do not ship one for blas/lapack, which are actually optional.

So we should not link them at all (I won't try making an openblas version, I have no idea whether it's supported).



---

archive/issue_comments_410795.json:
```json
{
    "body": "Set assignee to @dimpase.",
    "created_at": "2019-04-02T23:36:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27597#issuecomment-410795",
    "user": "https://github.com/dimpase"
}
```

Set assignee to @dimpase.



---

archive/issue_comments_410796.json:
```json
{
    "body": "<a id='comment:2'></a>This should be fixed as soon as possible, as it causes the patchbot sage4 to pollute every ticket with a wrong report.",
    "created_at": "2019-04-08T08:56:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27597#issuecomment-410796",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:2'></a>This should be fixed as soon as possible, as it causes the patchbot sage4 to pollute every ticket with a wrong report.



---

archive/issue_comments_410797.json:
```json
{
    "body": "<a id='comment:4'></a>What about GLPK? If you want to use the GLPK in Sage, there should be a dependency on it.",
    "created_at": "2019-04-08T10:04:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27597#issuecomment-410797",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>What about GLPK? If you want to use the GLPK in Sage, there should be a dependency on it.



---

archive/issue_comments_410798.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-04-08T18:18:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27597#issuecomment-410798",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_410799.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-04-08T18:21:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27597#issuecomment-410799",
    "user": "https://github.com/dimpase"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_410800.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -7,6 +7,12 @@\n \n Ideally, it *should* use OpenBLAS but it doesn't. Note that linking against OpenBLAS should be done with `-lopenblas`, not `-lblas`.\n \n+---\n+\n+The use of blas/lapack in the (new) igraph is optional, so we just not use them in this branch.\n+\n+We also specify the required in the (new) igraph package glpk in its dependencies.\n+\n Comment: 1\n \n Issue created by migration from https://trac.sagemath.org/ticket/27597\n```\n",
    "created_at": "2019-04-08T18:21:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27597#issuecomment-410800",
    "user": "https://github.com/dimpase"
}
```

Description changed:
```diff
--- 
+++ 
@@ -7,6 +7,12 @@
 
 Ideally, it *should* use OpenBLAS but it doesn't. Note that linking against OpenBLAS should be done with `-lopenblas`, not `-lblas`.
 
+---
+
+The use of blas/lapack in the (new) igraph is optional, so we just not use them in this branch.
+
+We also specify the required in the (new) igraph package glpk in its dependencies.
+
 Comment: 1
 
 Issue created by migration from https://trac.sagemath.org/ticket/27597
```




---

archive/issue_comments_410801.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-04-09T05:28:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27597#issuecomment-410801",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_410802.json:
```json
{
    "body": "<a id='comment:7'></a>Green bot on sage4. Thanks!",
    "created_at": "2019-04-09T05:28:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27597#issuecomment-410802",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>Green bot on sage4. Thanks!



---

archive/issue_events_068549.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-04-11T16:57:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27597",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27597#event-68549"
}
```



---

archive/issue_comments_410803.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-04-11T16:57:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27597#issuecomment-410803",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
