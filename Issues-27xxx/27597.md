# Issue 27597: igraph requires -lblas and -llapack

archive/issues_027360.json:
```json
{
    "body": "`igraph` doesn't build on some systems:\n\n```\n[igraph-0.7.1999] /usr/lib/gcc/x86_64-pc-linux-gnu/4.9.3/../../../../x86_64-pc-linux-gnu/bin/ld: cannot find -lblas\n[igraph-0.7.1999] /usr/lib/gcc/x86_64-pc-linux-gnu/4.9.3/../../../../x86_64-pc-linux-gnu/bin/ld: cannot find -llapack\n```\n\nIdeally, it *should* use OpenBLAS but it doesn't. Note that linking against OpenBLAS should be done with `-lopenblas`, not `-lblas`.\n\n---\n\nThe use of blas/lapack in the (new) igraph is optional, so we just not use them in this branch.\n\nWe also specify the required in the (new) igraph package glpk in its dependencies.\n\nAssignee: @dimpase\n\nCC:  @dimpase\n\nBranch/Commit: 28d375fc06ce45866233da4fbe1c239909312875\n\nReviewer: Jeroen Demeyer\n\nAuthor: Dima Pasechnik\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/27597\n\n",
    "closed_at": "2019-04-11T16:57:55Z",
    "created_at": "2019-04-02T18:53:23Z",
    "labels": [
        "component: packages: optional",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.8",
    "title": "igraph requires -lblas and -llapack",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27597",
    "user": "https://github.com/jdemeyer"
}
```
`igraph` doesn't build on some systems:

```
[igraph-0.7.1999] /usr/lib/gcc/x86_64-pc-linux-gnu/4.9.3/../../../../x86_64-pc-linux-gnu/bin/ld: cannot find -lblas
[igraph-0.7.1999] /usr/lib/gcc/x86_64-pc-linux-gnu/4.9.3/../../../../x86_64-pc-linux-gnu/bin/ld: cannot find -llapack
```

Ideally, it *should* use OpenBLAS but it doesn't. Note that linking against OpenBLAS should be done with `-lopenblas`, not `-lblas`.

---

The use of blas/lapack in the (new) igraph is optional, so we just not use them in this branch.

We also specify the required in the (new) igraph package glpk in its dependencies.

Assignee: @dimpase

CC:  @dimpase

Branch/Commit: 28d375fc06ce45866233da4fbe1c239909312875

Reviewer: Jeroen Demeyer

Author: Dima Pasechnik

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/27597





---

archive/issue_comments_526179.json:
```json
{
    "body": "<a id='comment:1'></a>\nin fact, it's entirely a bug introduced by me. The have very similar options\n--with-glpk=external, --with-blas=external, meaning totally different things---cause they ship a version of glpk, but do not ship one for blas/lapack, which are actually optional.\n\nSo we should not link them at all (I won't try making an openblas version, I have no idea whether it's supported).",
    "created_at": "2019-04-02T23:36:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27597#issuecomment-526179",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:1'></a>
in fact, it's entirely a bug introduced by me. The have very similar options
--with-glpk=external, --with-blas=external, meaning totally different things---cause they ship a version of glpk, but do not ship one for blas/lapack, which are actually optional.

So we should not link them at all (I won't try making an openblas version, I have no idea whether it's supported).



---

archive/issue_comments_526180.json:
```json
{
    "body": "Changing author from \"\" to \"Dima Pasechnik\"",
    "created_at": "2019-04-02T23:36:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27597#issuecomment-526180",
    "user": "https://github.com/dimpase"
}
```

Changing author from "" to "Dima Pasechnik"



---

archive/issue_comments_526181.json:
```json
{
    "body": "Set assignee to @dimpase.",
    "created_at": "2019-04-02T23:36:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27597#issuecomment-526181",
    "user": "https://github.com/dimpase"
}
```

Set assignee to @dimpase.



---

archive/issue_comments_526182.json:
```json
{
    "body": "<a id='comment:2'></a>\nThis should be fixed as soon as possible, as it causes the patchbot sage4 to pollute every ticket with a wrong report.",
    "created_at": "2019-04-08T08:56:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27597#issuecomment-526182",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:2'></a>
This should be fixed as soon as possible, as it causes the patchbot sage4 to pollute every ticket with a wrong report.



---

archive/issue_comments_526183.json:
```json
{
    "body": "Changing commit from \"\" to \"37ccc83adced0c3daaff912bd87fc6bcb3cca2fd\"",
    "created_at": "2019-04-08T09:47:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27597#issuecomment-526183",
    "user": "https://github.com/dimpase"
}
```

Changing commit from "" to "37ccc83adced0c3daaff912bd87fc6bcb3cca2fd"



---

archive/issue_comments_526184.json:
```json
{
    "body": "Changing branch from \"\" to \"u/dimpase/packages/igraph_noblas\"",
    "created_at": "2019-04-08T09:47:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27597#issuecomment-526184",
    "user": "https://github.com/dimpase"
}
```

Changing branch from "" to "u/dimpase/packages/igraph_noblas"



---

archive/issue_comments_526185.json:
```json
{
    "body": "<a id='comment:4'></a>\nWhat about GLPK? If you want to use the GLPK in Sage, there should be a dependency on it.",
    "created_at": "2019-04-08T10:04:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27597#issuecomment-526185",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>
What about GLPK? If you want to use the GLPK in Sage, there should be a dependency on it.



---

archive/issue_comments_526186.json:
```json
{
    "body": "Changing commit from \"37ccc83adced0c3daaff912bd87fc6bcb3cca2fd\" to \"28d375fc06ce45866233da4fbe1c239909312875\"",
    "created_at": "2019-04-08T18:18:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27597#issuecomment-526186",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "37ccc83adced0c3daaff912bd87fc6bcb3cca2fd" to "28d375fc06ce45866233da4fbe1c239909312875"



---

archive/issue_comments_526187.json:
```json
{
    "body": "<a id='comment:5'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|\n|[28d375f](https://github.com/sagemath/sagetrac-mirror/commit/28d375fc06ce45866233da4fbe1c239909312875)|`do not use blas/lapack with igraph`|",
    "created_at": "2019-04-08T18:18:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27597#issuecomment-526187",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|
|[28d375f](https://github.com/sagemath/sagetrac-mirror/commit/28d375fc06ce45866233da4fbe1c239909312875)|`do not use blas/lapack with igraph`|



---

archive/issue_comments_526188.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-04-08T18:21:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27597#issuecomment-526188",
    "user": "https://github.com/dimpase"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_526189.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,3 +6,9 @@\n ```\n \n Ideally, it *should* use OpenBLAS but it doesn't. Note that linking against OpenBLAS should be done with `-lopenblas`, not `-lblas`.\n+\n+---\n+\n+The use of blas/lapack in the (new) igraph is optional, so we just not use them in this branch.\n+\n+We also specify the required in the (new) igraph package glpk in its dependencies.\n``````\n",
    "created_at": "2019-04-08T18:21:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27597#issuecomment-526189",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,3 +6,9 @@
 ```
 
 Ideally, it *should* use OpenBLAS but it doesn't. Note that linking against OpenBLAS should be done with `-lopenblas`, not `-lblas`.
+
+---
+
+The use of blas/lapack in the (new) igraph is optional, so we just not use them in this branch.
+
+We also specify the required in the (new) igraph package glpk in its dependencies.
``````




---

archive/issue_comments_526190.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-04-09T05:28:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27597#issuecomment-526190",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_526191.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Jeroen Demeyer\"",
    "created_at": "2019-04-09T05:28:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27597#issuecomment-526191",
    "user": "https://github.com/jdemeyer"
}
```

Changing reviewer from "" to "Jeroen Demeyer"



---

archive/issue_comments_526192.json:
```json
{
    "body": "<a id='comment:7'></a>\nGreen bot on sage4. Thanks!",
    "created_at": "2019-04-09T05:28:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27597#issuecomment-526192",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>
Green bot on sage4. Thanks!



---

archive/issue_events_085592.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-04-11T16:57:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27597",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27597#event-85592"
}
```



---

archive/issue_comments_526193.json:
```json
{
    "body": "Changing branch from \"u/dimpase/packages/igraph_noblas\" to \"28d375fc06ce45866233da4fbe1c239909312875\"",
    "created_at": "2019-04-11T16:57:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27597#issuecomment-526193",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/dimpase/packages/igraph_noblas" to "28d375fc06ce45866233da4fbe1c239909312875"



---

archive/issue_comments_526194.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-04-11T16:57:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27597",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27597#issuecomment-526194",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
