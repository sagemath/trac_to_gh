# Issue 27093: type_debug: support subtype_dealloc, subtype_clear, subtype_traverse

archive/issues_026856.json:
```json
{
    "body": "Support the default `tp_dealloc`, `tp_clear`, `tp_traverse` functions for heap types (a.k.a. Python classes). This is not exported by Python, but we can dynamically determine it.\n\nWith this patch, one has for example\n\n```\nsage: class X(object): pass\nsage: type_debug(X)\n<class '__main__.X'> (0x7fe42bfc3a80)\n  ob_refcnt: 5\n  ob_type: <type 'type'>\n  tp_name: X\n  tp_basicsize: 32\n  tp_itemsize: 0\n  tp_dictoffset: 16\n  tp_weaklistoffset: 24\n  tp_base (__base__): <type 'object'>\n  tp_bases (__bases__): tuple:\n    <type 'object'>\n  tp_mro (__mro__): tuple:\n    <class '__main__.X'>\n    <type 'object'>\n  tp_dict (__dict__): dict:\n    '__dict__': <attribute '__dict__' of 'X' objects>\n    '__module__': '__main__'\n    '__weakref__': <attribute '__weakref__' of 'X' objects>\n    '__doc__': None\n  tp_alloc: PyType_GenericAlloc\n  tp_new (__new__): == object\n  tp_init (__init__): == object\n  tp_dealloc (__dealloc__): subtype_dealloc\n  tp_del (__del__): NULL\n  tp_free: PyObject_GC_Del\n  tp_repr (__repr__): == object\n  tp_print: NULL\n  tp_hash (__hash__): `_Py_`HashPointer\n  tp_call (__call__): NULL\n  tp_str (__str__): == object\n  tp_compare (cmp): NULL\n  tp_richcompare (__richcmp__): NULL\n  tp_getattr (__getattribute__): NULL\n  tp_setattr (__setattribute__): NULL\n  tp_getattro (__getattribute__): PyObject_GenericGetAttr\n  tp_setattro (__setattribute__): PyObject_GenericSetAttr\n  tp_iter (__iter__): NULL\n  tp_iternext (__next__): 0x7fe426a40150\n  tp_descr_get (__get__): NULL\n  tp_descr_set (__set__): NULL\n  tp_cache: NULL\n  tp_weaklist: <weakref at 0x7fe36b81e050; to 'type' at 0x7fe42bfc3a80 (X)>\n  tp_traverse: subtype_traverse\n  tp_clear: subtype_clear\n  tp_is_gc: NULL\n  tp_as_number: 0x7fe42bfc3c08\n    nb_add (__add__): NULL\n    nb_subtract (__sub__): NULL\n    nb_multiply (__mul__): NULL\n    nb_divide (__div__): NULL\n    nb_floor_divide (__floordiv__): NULL\n    nb_true_divide (__truediv__): NULL\n    nb_remainder (__mod__): NULL\n    nb_divmod (__divmod__): NULL\n    nb_power (__pow__): NULL\n    nb_negative (__neg__): NULL\n    nb_positive (__pos__): NULL\n    nb_absolute (__abs__): NULL\n    nb_nonzero (__nonzero__): NULL\n    nb_invert (__invert__): NULL\n    nb_lshift (__lshift__): NULL\n    nb_rshift (__rshift__): NULL\n    nb_and (__and__): NULL\n    nb_or (__or__): NULL\n    nb_xor (__xor__): NULL\n    nb_int (__int__): NULL\n    nb_long (__long__): NULL\n    nb_index (__index__): NULL\n    nb_float (__float__): NULL\n    nb_oct (__oct__): NULL\n    nb_hex (__hex__): NULL\n    nb_coerce: NULL\n    nb_inplace_add (__iadd__): NULL\n    nb_inplace_subtract (__isub__): NULL\n    nb_inplace_multiply (__imul__): NULL\n    nb_inplace_divide (__idiv__): NULL\n    nb_inplace_floor_divide (__ifloordiv__): NULL\n    nb_inplace_true_divide (__itruediv__): NULL\n    nb_inplace_remainder (__imod__): NULL\n    nb_inplace_power (__ipow__): NULL\n    nb_inplace_lshift (__ilshift__): NULL\n    nb_inplace_rshift (__irshift__): NULL\n    nb_inplace_and (__iand__): NULL\n    nb_inplace_or (__ior__): NULL\n    nb_inplace_xor (__ixor__): NULL\n  tp_as_sequence: 0x7fe42bfc3d58\n    sq_length (__len__): NULL\n    sq_concat (__add__): NULL\n    sq_inplace_concat (__iadd__): NULL\n    sq_repeat (__mul__): NULL\n    sq_inplace_repeat (__imul__): NULL\n    sq_item (__getitem__): NULL\n    sq_ass_item (__setitem__): NULL\n    sq_contains (__contains__): NULL\n  tp_as_mapping: 0x7fe42bfc3d40\n    mp_length (__len__): NULL\n    mp_subscript (__getitem__): NULL\n    mp_ass_subscript (__setitem__): NULL\n  tp_as_buffer: 0x7fe42bfc3da8\n    bf_getreadbuffer: NULL\n    bf_getwritebuffer: NULL\n    bf_getsegcount: NULL\n    bf_getcharbuffer: NULL\n  tp_flags:\n    HEAPTYPE\n    BASETYPE\n    READY\n    HAVE_GC\n    CHECKTYPES\n    HAVE_VERSION_TAG\n    VALID_VERSION_TAG\n  tp_version_tag: 10759\n```\n\nNote the lines `tp_dealloc`, `tp_traverse` and `tp_clear` which are more interesting than the hexadecimal constants before this patch.\n\n**CC:**  @tscrim\n\n**Branch/Commit:** [7f3d84d07c5728850df4ef1b679e86869b8ac478](https://github.com/sagemath/sagetrac-mirror/commit/7f3d84d07c5728850df4ef1b679e86869b8ac478)\n\n**Reviewer:** Travis Scrimshaw\n\n**Author:** Jeroen Demeyer\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/27093\n\n",
    "closed_at": "2019-01-26T15:53:42Z",
    "created_at": "2019-01-23T09:35:06Z",
    "labels": [
        "component: misc"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.7",
    "title": "type_debug: support subtype_dealloc, subtype_clear, subtype_traverse",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27093",
    "user": "https://github.com/jdemeyer"
}
```
Support the default `tp_dealloc`, `tp_clear`, `tp_traverse` functions for heap types (a.k.a. Python classes). This is not exported by Python, but we can dynamically determine it.

With this patch, one has for example

```
sage: class X(object): pass
sage: type_debug(X)
<class '__main__.X'> (0x7fe42bfc3a80)
  ob_refcnt: 5
  ob_type: <type 'type'>
  tp_name: X
  tp_basicsize: 32
  tp_itemsize: 0
  tp_dictoffset: 16
  tp_weaklistoffset: 24
  tp_base (__base__): <type 'object'>
  tp_bases (__bases__): tuple:
    <type 'object'>
  tp_mro (__mro__): tuple:
    <class '__main__.X'>
    <type 'object'>
  tp_dict (__dict__): dict:
    '__dict__': <attribute '__dict__' of 'X' objects>
    '__module__': '__main__'
    '__weakref__': <attribute '__weakref__' of 'X' objects>
    '__doc__': None
  tp_alloc: PyType_GenericAlloc
  tp_new (__new__): == object
  tp_init (__init__): == object
  tp_dealloc (__dealloc__): subtype_dealloc
  tp_del (__del__): NULL
  tp_free: PyObject_GC_Del
  tp_repr (__repr__): == object
  tp_print: NULL
  tp_hash (__hash__): `_Py_`HashPointer
  tp_call (__call__): NULL
  tp_str (__str__): == object
  tp_compare (cmp): NULL
  tp_richcompare (__richcmp__): NULL
  tp_getattr (__getattribute__): NULL
  tp_setattr (__setattribute__): NULL
  tp_getattro (__getattribute__): PyObject_GenericGetAttr
  tp_setattro (__setattribute__): PyObject_GenericSetAttr
  tp_iter (__iter__): NULL
  tp_iternext (__next__): 0x7fe426a40150
  tp_descr_get (__get__): NULL
  tp_descr_set (__set__): NULL
  tp_cache: NULL
  tp_weaklist: <weakref at 0x7fe36b81e050; to 'type' at 0x7fe42bfc3a80 (X)>
  tp_traverse: subtype_traverse
  tp_clear: subtype_clear
  tp_is_gc: NULL
  tp_as_number: 0x7fe42bfc3c08
    nb_add (__add__): NULL
    nb_subtract (__sub__): NULL
    nb_multiply (__mul__): NULL
    nb_divide (__div__): NULL
    nb_floor_divide (__floordiv__): NULL
    nb_true_divide (__truediv__): NULL
    nb_remainder (__mod__): NULL
    nb_divmod (__divmod__): NULL
    nb_power (__pow__): NULL
    nb_negative (__neg__): NULL
    nb_positive (__pos__): NULL
    nb_absolute (__abs__): NULL
    nb_nonzero (__nonzero__): NULL
    nb_invert (__invert__): NULL
    nb_lshift (__lshift__): NULL
    nb_rshift (__rshift__): NULL
    nb_and (__and__): NULL
    nb_or (__or__): NULL
    nb_xor (__xor__): NULL
    nb_int (__int__): NULL
    nb_long (__long__): NULL
    nb_index (__index__): NULL
    nb_float (__float__): NULL
    nb_oct (__oct__): NULL
    nb_hex (__hex__): NULL
    nb_coerce: NULL
    nb_inplace_add (__iadd__): NULL
    nb_inplace_subtract (__isub__): NULL
    nb_inplace_multiply (__imul__): NULL
    nb_inplace_divide (__idiv__): NULL
    nb_inplace_floor_divide (__ifloordiv__): NULL
    nb_inplace_true_divide (__itruediv__): NULL
    nb_inplace_remainder (__imod__): NULL
    nb_inplace_power (__ipow__): NULL
    nb_inplace_lshift (__ilshift__): NULL
    nb_inplace_rshift (__irshift__): NULL
    nb_inplace_and (__iand__): NULL
    nb_inplace_or (__ior__): NULL
    nb_inplace_xor (__ixor__): NULL
  tp_as_sequence: 0x7fe42bfc3d58
    sq_length (__len__): NULL
    sq_concat (__add__): NULL
    sq_inplace_concat (__iadd__): NULL
    sq_repeat (__mul__): NULL
    sq_inplace_repeat (__imul__): NULL
    sq_item (__getitem__): NULL
    sq_ass_item (__setitem__): NULL
    sq_contains (__contains__): NULL
  tp_as_mapping: 0x7fe42bfc3d40
    mp_length (__len__): NULL
    mp_subscript (__getitem__): NULL
    mp_ass_subscript (__setitem__): NULL
  tp_as_buffer: 0x7fe42bfc3da8
    bf_getreadbuffer: NULL
    bf_getwritebuffer: NULL
    bf_getsegcount: NULL
    bf_getcharbuffer: NULL
  tp_flags:
    HEAPTYPE
    BASETYPE
    READY
    HAVE_GC
    CHECKTYPES
    HAVE_VERSION_TAG
    VALID_VERSION_TAG
  tp_version_tag: 10759
```

Note the lines `tp_dealloc`, `tp_traverse` and `tp_clear` which are more interesting than the hexadecimal constants before this patch.

**CC:**  @tscrim

**Branch/Commit:** [7f3d84d07c5728850df4ef1b679e86869b8ac478](https://github.com/sagemath/sagetrac-mirror/commit/7f3d84d07c5728850df4ef1b679e86869b8ac478)

**Reviewer:** Travis Scrimshaw

**Author:** Jeroen Demeyer

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/27093





---

archive/issue_events_076375.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/27093",
    "rename": {
        "from": "type_debug: support subtype_dealloc()",
        "to": "type_debug: support subtype_dealloc, subtype_clear, subtype_traverse"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27093#event-76375"
}
```



---

archive/issue_comments_522684.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-`subtype_dealloc()` is the default `tp_dealloc` function for heap types (a.k.a. Python classes). This is not exported by Python, but we can dynamically determine it.\n+Support the default `tp_dealloc`, `tp_clear`, `tp_traverse` functions for heap types (a.k.a. Python classes). This is not exported by Python, but we can dynamically determine it.\n``````\n",
    "created_at": "2019-01-23T09:41:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27093",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27093#issuecomment-522684",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1 @@
-`subtype_dealloc()` is the default `tp_dealloc` function for heap types (a.k.a. Python classes). This is not exported by Python, but we can dynamically determine it.
+Support the default `tp_dealloc`, `tp_clear`, `tp_traverse` functions for heap types (a.k.a. Python classes). This is not exported by Python, but we can dynamically determine it.
``````




---

archive/issue_comments_522685.json:
```json
{
    "body": "**Branch:** [u/jdemeyer/type_debug__support_subtype_dealloc__](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/type_debug__support_subtype_dealloc__)",
    "created_at": "2019-01-23T10:04:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27093",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27093#issuecomment-522685",
    "user": "https://github.com/jdemeyer"
}
```

**Branch:** [u/jdemeyer/type_debug__support_subtype_dealloc__](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/type_debug__support_subtype_dealloc__)



---

archive/issue_comments_522686.json:
```json
{
    "body": "<a id='comment:3'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7f3d84d07c5728850df4ef1b679e86869b8ac478\">7f3d84d</a></td><td><code>type_debug: support subtype_traverse, subtype_clear,  subtype_dealloc</code></td></tr></table>\n",
    "created_at": "2019-01-23T10:05:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27093",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27093#issuecomment-522686",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:3'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7f3d84d07c5728850df4ef1b679e86869b8ac478">7f3d84d</a></td><td><code>type_debug: support subtype_traverse, subtype_clear,  subtype_dealloc</code></td></tr></table>




---

archive/issue_comments_522687.json:
```json
{
    "body": "**Commit:** [7f3d84d07c5728850df4ef1b679e86869b8ac478](https://github.com/sagemath/sagetrac-mirror/commit/7f3d84d07c5728850df4ef1b679e86869b8ac478)",
    "created_at": "2019-01-23T10:05:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27093",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27093#issuecomment-522687",
    "user": "https://github.com/jdemeyer"
}
```

**Commit:** [7f3d84d07c5728850df4ef1b679e86869b8ac478](https://github.com/sagemath/sagetrac-mirror/commit/7f3d84d07c5728850df4ef1b679e86869b8ac478)



---

archive/issue_comments_522688.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2019-01-23T10:05:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27093",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27093#issuecomment-522688",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_522689.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,122 @@\n Support the default `tp_dealloc`, `tp_clear`, `tp_traverse` functions for heap types (a.k.a. Python classes). This is not exported by Python, but we can dynamically determine it.\n+\n+With this patch, one has for example\n+\n+```\n+sage: class X(object): pass\n+sage: type_debug(X)\n+<class '__main__.X'> (0x7fe42bfc3a80)\n+  ob_refcnt: 5\n+  ob_type: <type 'type'>\n+  tp_name: X\n+  tp_basicsize: 32\n+  tp_itemsize: 0\n+  tp_dictoffset: 16\n+  tp_weaklistoffset: 24\n+  tp_base (__base__): <type 'object'>\n+  tp_bases (__bases__): tuple:\n+    <type 'object'>\n+  tp_mro (__mro__): tuple:\n+    <class '__main__.X'>\n+    <type 'object'>\n+  tp_dict (__dict__): dict:\n+    '__dict__': <attribute '__dict__' of 'X' objects>\n+    '__module__': '__main__'\n+    '__weakref__': <attribute '__weakref__' of 'X' objects>\n+    '__doc__': None\n+  tp_alloc: PyType_GenericAlloc\n+  tp_new (__new__): == object\n+  tp_init (__init__): == object\n+  tp_dealloc (__dealloc__): subtype_dealloc\n+  tp_del (__del__): NULL\n+  tp_free: PyObject_GC_Del\n+  tp_repr (__repr__): == object\n+  tp_print: NULL\n+  tp_hash (__hash__): `_Py_`HashPointer\n+  tp_call (__call__): NULL\n+  tp_str (__str__): == object\n+  tp_compare (cmp): NULL\n+  tp_richcompare (__richcmp__): NULL\n+  tp_getattr (__getattribute__): NULL\n+  tp_setattr (__setattribute__): NULL\n+  tp_getattro (__getattribute__): PyObject_GenericGetAttr\n+  tp_setattro (__setattribute__): PyObject_GenericSetAttr\n+  tp_iter (__iter__): NULL\n+  tp_iternext (__next__): 0x7fe426a40150\n+  tp_descr_get (__get__): NULL\n+  tp_descr_set (__set__): NULL\n+  tp_cache: NULL\n+  tp_weaklist: <weakref at 0x7fe36b81e050; to 'type' at 0x7fe42bfc3a80 (X)>\n+  tp_traverse: subtype_traverse\n+  tp_clear: subtype_clear\n+  tp_is_gc: NULL\n+  tp_as_number: 0x7fe42bfc3c08\n+    nb_add (__add__): NULL\n+    nb_subtract (__sub__): NULL\n+    nb_multiply (__mul__): NULL\n+    nb_divide (__div__): NULL\n+    nb_floor_divide (__floordiv__): NULL\n+    nb_true_divide (__truediv__): NULL\n+    nb_remainder (__mod__): NULL\n+    nb_divmod (__divmod__): NULL\n+    nb_power (__pow__): NULL\n+    nb_negative (__neg__): NULL\n+    nb_positive (__pos__): NULL\n+    nb_absolute (__abs__): NULL\n+    nb_nonzero (__nonzero__): NULL\n+    nb_invert (__invert__): NULL\n+    nb_lshift (__lshift__): NULL\n+    nb_rshift (__rshift__): NULL\n+    nb_and (__and__): NULL\n+    nb_or (__or__): NULL\n+    nb_xor (__xor__): NULL\n+    nb_int (__int__): NULL\n+    nb_long (__long__): NULL\n+    nb_index (__index__): NULL\n+    nb_float (__float__): NULL\n+    nb_oct (__oct__): NULL\n+    nb_hex (__hex__): NULL\n+    nb_coerce: NULL\n+    nb_inplace_add (__iadd__): NULL\n+    nb_inplace_subtract (__isub__): NULL\n+    nb_inplace_multiply (__imul__): NULL\n+    nb_inplace_divide (__idiv__): NULL\n+    nb_inplace_floor_divide (__ifloordiv__): NULL\n+    nb_inplace_true_divide (__itruediv__): NULL\n+    nb_inplace_remainder (__imod__): NULL\n+    nb_inplace_power (__ipow__): NULL\n+    nb_inplace_lshift (__ilshift__): NULL\n+    nb_inplace_rshift (__irshift__): NULL\n+    nb_inplace_and (__iand__): NULL\n+    nb_inplace_or (__ior__): NULL\n+    nb_inplace_xor (__ixor__): NULL\n+  tp_as_sequence: 0x7fe42bfc3d58\n+    sq_length (__len__): NULL\n+    sq_concat (__add__): NULL\n+    sq_inplace_concat (__iadd__): NULL\n+    sq_repeat (__mul__): NULL\n+    sq_inplace_repeat (__imul__): NULL\n+    sq_item (__getitem__): NULL\n+    sq_ass_item (__setitem__): NULL\n+    sq_contains (__contains__): NULL\n+  tp_as_mapping: 0x7fe42bfc3d40\n+    mp_length (__len__): NULL\n+    mp_subscript (__getitem__): NULL\n+    mp_ass_subscript (__setitem__): NULL\n+  tp_as_buffer: 0x7fe42bfc3da8\n+    bf_getreadbuffer: NULL\n+    bf_getwritebuffer: NULL\n+    bf_getsegcount: NULL\n+    bf_getcharbuffer: NULL\n+  tp_flags:\n+    HEAPTYPE\n+    BASETYPE\n+    READY\n+    HAVE_GC\n+    CHECKTYPES\n+    HAVE_VERSION_TAG\n+    VALID_VERSION_TAG\n+  tp_version_tag: 10759\n+```\n+\n+Note the lines `tp_dealloc`, `tp_traverse` and `tp_clear` which are more interesting than the hexadecimal constants before this patch.\n``````\n",
    "created_at": "2019-01-23T10:18:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27093",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27093#issuecomment-522689",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,122 @@
 Support the default `tp_dealloc`, `tp_clear`, `tp_traverse` functions for heap types (a.k.a. Python classes). This is not exported by Python, but we can dynamically determine it.
+
+With this patch, one has for example
+
+```
+sage: class X(object): pass
+sage: type_debug(X)
+<class '__main__.X'> (0x7fe42bfc3a80)
+  ob_refcnt: 5
+  ob_type: <type 'type'>
+  tp_name: X
+  tp_basicsize: 32
+  tp_itemsize: 0
+  tp_dictoffset: 16
+  tp_weaklistoffset: 24
+  tp_base (__base__): <type 'object'>
+  tp_bases (__bases__): tuple:
+    <type 'object'>
+  tp_mro (__mro__): tuple:
+    <class '__main__.X'>
+    <type 'object'>
+  tp_dict (__dict__): dict:
+    '__dict__': <attribute '__dict__' of 'X' objects>
+    '__module__': '__main__'
+    '__weakref__': <attribute '__weakref__' of 'X' objects>
+    '__doc__': None
+  tp_alloc: PyType_GenericAlloc
+  tp_new (__new__): == object
+  tp_init (__init__): == object
+  tp_dealloc (__dealloc__): subtype_dealloc
+  tp_del (__del__): NULL
+  tp_free: PyObject_GC_Del
+  tp_repr (__repr__): == object
+  tp_print: NULL
+  tp_hash (__hash__): `_Py_`HashPointer
+  tp_call (__call__): NULL
+  tp_str (__str__): == object
+  tp_compare (cmp): NULL
+  tp_richcompare (__richcmp__): NULL
+  tp_getattr (__getattribute__): NULL
+  tp_setattr (__setattribute__): NULL
+  tp_getattro (__getattribute__): PyObject_GenericGetAttr
+  tp_setattro (__setattribute__): PyObject_GenericSetAttr
+  tp_iter (__iter__): NULL
+  tp_iternext (__next__): 0x7fe426a40150
+  tp_descr_get (__get__): NULL
+  tp_descr_set (__set__): NULL
+  tp_cache: NULL
+  tp_weaklist: <weakref at 0x7fe36b81e050; to 'type' at 0x7fe42bfc3a80 (X)>
+  tp_traverse: subtype_traverse
+  tp_clear: subtype_clear
+  tp_is_gc: NULL
+  tp_as_number: 0x7fe42bfc3c08
+    nb_add (__add__): NULL
+    nb_subtract (__sub__): NULL
+    nb_multiply (__mul__): NULL
+    nb_divide (__div__): NULL
+    nb_floor_divide (__floordiv__): NULL
+    nb_true_divide (__truediv__): NULL
+    nb_remainder (__mod__): NULL
+    nb_divmod (__divmod__): NULL
+    nb_power (__pow__): NULL
+    nb_negative (__neg__): NULL
+    nb_positive (__pos__): NULL
+    nb_absolute (__abs__): NULL
+    nb_nonzero (__nonzero__): NULL
+    nb_invert (__invert__): NULL
+    nb_lshift (__lshift__): NULL
+    nb_rshift (__rshift__): NULL
+    nb_and (__and__): NULL
+    nb_or (__or__): NULL
+    nb_xor (__xor__): NULL
+    nb_int (__int__): NULL
+    nb_long (__long__): NULL
+    nb_index (__index__): NULL
+    nb_float (__float__): NULL
+    nb_oct (__oct__): NULL
+    nb_hex (__hex__): NULL
+    nb_coerce: NULL
+    nb_inplace_add (__iadd__): NULL
+    nb_inplace_subtract (__isub__): NULL
+    nb_inplace_multiply (__imul__): NULL
+    nb_inplace_divide (__idiv__): NULL
+    nb_inplace_floor_divide (__ifloordiv__): NULL
+    nb_inplace_true_divide (__itruediv__): NULL
+    nb_inplace_remainder (__imod__): NULL
+    nb_inplace_power (__ipow__): NULL
+    nb_inplace_lshift (__ilshift__): NULL
+    nb_inplace_rshift (__irshift__): NULL
+    nb_inplace_and (__iand__): NULL
+    nb_inplace_or (__ior__): NULL
+    nb_inplace_xor (__ixor__): NULL
+  tp_as_sequence: 0x7fe42bfc3d58
+    sq_length (__len__): NULL
+    sq_concat (__add__): NULL
+    sq_inplace_concat (__iadd__): NULL
+    sq_repeat (__mul__): NULL
+    sq_inplace_repeat (__imul__): NULL
+    sq_item (__getitem__): NULL
+    sq_ass_item (__setitem__): NULL
+    sq_contains (__contains__): NULL
+  tp_as_mapping: 0x7fe42bfc3d40
+    mp_length (__len__): NULL
+    mp_subscript (__getitem__): NULL
+    mp_ass_subscript (__setitem__): NULL
+  tp_as_buffer: 0x7fe42bfc3da8
+    bf_getreadbuffer: NULL
+    bf_getwritebuffer: NULL
+    bf_getsegcount: NULL
+    bf_getcharbuffer: NULL
+  tp_flags:
+    HEAPTYPE
+    BASETYPE
+    READY
+    HAVE_GC
+    CHECKTYPES
+    HAVE_VERSION_TAG
+    VALID_VERSION_TAG
+  tp_version_tag: 10759
+```
+
+Note the lines `tp_dealloc`, `tp_traverse` and `tp_clear` which are more interesting than the hexadecimal constants before this patch.
``````




---

archive/issue_comments_522690.json:
```json
{
    "body": "<a id='comment:5'></a>\nLGTM.",
    "created_at": "2019-01-23T16:45:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27093",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27093#issuecomment-522690",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'></a>
LGTM.



---

archive/issue_comments_522691.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2019-01-23T16:45:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27093",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27093#issuecomment-522691",
    "user": "https://github.com/tscrim"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_522692.json:
```json
{
    "body": "**Reviewer:** Travis Scrimshaw",
    "created_at": "2019-01-23T16:45:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27093",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27093#issuecomment-522692",
    "user": "https://github.com/tscrim"
}
```

**Reviewer:** Travis Scrimshaw



---

archive/issue_comments_522693.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2019-01-26T15:53:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27093",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27093#issuecomment-522693",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed



---

archive/issue_events_076376.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-01-26T15:53:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27093",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27093#event-76376"
}
```



---

archive/issue_comments_522694.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/type_debug__support_subtype_dealloc__](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/type_debug__support_subtype_dealloc__)\" to \"[7f3d84d07c5728850df4ef1b679e86869b8ac478](https://github.com/sagemath/sagetrac-mirror/commit/7f3d84d07c5728850df4ef1b679e86869b8ac478)\".",
    "created_at": "2019-01-26T15:53:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27093",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27093#issuecomment-522694",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/jdemeyer/type_debug__support_subtype_dealloc__](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/type_debug__support_subtype_dealloc__)" to "[7f3d84d07c5728850df4ef1b679e86869b8ac478](https://github.com/sagemath/sagetrac-mirror/commit/7f3d84d07c5728850df4ef1b679e86869b8ac478)".
