# Issue 27562: Fix string formatting in ValueError in sql_db.py

archive/issues_027325.json:
```json
{
    "body": "In `src/sage/databases/sql_db.py`, lines 465--467 currently read\n\n```\n            if query_dict['table_name'] not in skel:\n                raise ValueError(\"Database has no table\" \\\n                    + str(query_dict['table_name']) + \".\")\n```\nbut should instead read\n\n```\n            if query_dict['table_name'] not in skel:\n                raise ValueError(\"database has no table %s\"\n                                 % query_dict['table_name'])\n```\n\nThe current version in particular lacks a space between\n\"has no table\" and the name, so errors look like:\n\n```\nFile ...\nFailed example:\n    r = SQLQuery(DB, {'table_name':'simon'})\nException raised:\n...\nValueError: Database has no tablesimon.\n```\ninstead of\n\n```\nFile ...\nFailed example:\n    r = SQLQuery(DB, {'table_name':'simon'})\nException raised:\n...\nValueError: database has no table simon\n```\n\nAt line 1400, one should also change\n\n```\n        if table_name in self.__skeleton__:\n            raise ValueError('Database already has a table named' \\\n                + '%s.'%table_name)\n```\nto\n\n```\n        if table_name in self.__skeleton__:\n            raise ValueError('database already has a table named %s'\n                             %table_name)\n```\n\n\n**Branch/Commit:** [8c633267e64dc4643b5efd7b95cba86a4d0e174e](https://github.com/sagemath/sagetrac-mirror/commit/8c633267e64dc4643b5efd7b95cba86a4d0e174e)\n\n**Reviewer:** Fr\u00e9d\u00e9ric Chapoton\n\n**Author:** Beatriz Galiana Carballido\n\nIssue created by migration from https://trac.sagemath.org/ticket/27562\n\n",
    "closed_at": "2019-07-23T21:03:49Z",
    "created_at": "2019-03-28T21:38:49Z",
    "labels": [
        "component: packages: optional",
        "minor",
        "good first issue"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.9",
    "title": "Fix string formatting in ValueError in sql_db.py",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/27562",
    "user": "https://github.com/slel"
}
```
In `src/sage/databases/sql_db.py`, lines 465--467 currently read

```
            if query_dict['table_name'] not in skel:
                raise ValueError("Database has no table" \
                    + str(query_dict['table_name']) + ".")
```
but should instead read

```
            if query_dict['table_name'] not in skel:
                raise ValueError("database has no table %s"
                                 % query_dict['table_name'])
```

The current version in particular lacks a space between
"has no table" and the name, so errors look like:

```
File ...
Failed example:
    r = SQLQuery(DB, {'table_name':'simon'})
Exception raised:
...
ValueError: Database has no tablesimon.
```
instead of

```
File ...
Failed example:
    r = SQLQuery(DB, {'table_name':'simon'})
Exception raised:
...
ValueError: database has no table simon
```

At line 1400, one should also change

```
        if table_name in self.__skeleton__:
            raise ValueError('Database already has a table named' \
                + '%s.'%table_name)
```
to

```
        if table_name in self.__skeleton__:
            raise ValueError('database already has a table named %s'
                             %table_name)
```


**Branch/Commit:** [8c633267e64dc4643b5efd7b95cba86a4d0e174e](https://github.com/sagemath/sagetrac-mirror/commit/8c633267e64dc4643b5efd7b95cba86a4d0e174e)

**Reviewer:** Frédéric Chapoton

**Author:** Beatriz Galiana Carballido

Issue created by migration from https://trac.sagemath.org/ticket/27562





---

archive/issue_events_243352.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2019-03-29T00:42:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "label": "good first issue",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27562#event-243352"
}
```



---

archive/issue_comments_429629.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,15 @@\n+In `src/sage/databases/sql_db.py`, lines 465--467,\n \n+```\n+            if query_dict['table_name'] not in skel:\n+                raise ValueError(\"Database has no table\" \\\n+                    + str(query_dict['table_name']) + \".\")\n+```\n+should be\n+\n+```\n+            if query_dict['table_name'] not in skel:\n+                raise ValueError(\"Database has no table %s\"\n+                    % query_dict['table_name'])\n+```\n+\n``````\n",
    "created_at": "2019-03-29T00:42:18Z",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27562#issuecomment-429629",
    "user": "https://github.com/slel"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,15 @@
+In `src/sage/databases/sql_db.py`, lines 465--467,
 
+```
+            if query_dict['table_name'] not in skel:
+                raise ValueError("Database has no table" \
+                    + str(query_dict['table_name']) + ".")
+```
+should be
+
+```
+            if query_dict['table_name'] not in skel:
+                raise ValueError("Database has no table %s"
+                    % query_dict['table_name'])
+```
+
``````




---

archive/issue_comments_429630.json:
```json
{
    "body": "**Changing reporter** from \"gh-abhayptp\" to \"slelievre\".",
    "created_at": "2019-03-29T00:42:18Z",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27562#issuecomment-429630",
    "user": "https://github.com/slel"
}
```

**Changing reporter** from "gh-abhayptp" to "slelievre".



---

archive/issue_events_243353.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2019-03-29T00:42:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "label": "minor",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27562#event-243353"
}
```



---

archive/issue_comments_429631.json:
```json
{
    "body": "<a id='comment:1'></a>\nNote: re-using this ticket created by mistake; the one about cycle basis for multiedges is at #27563.",
    "created_at": "2019-03-29T00:42:18Z",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27562#issuecomment-429631",
    "user": "https://github.com/slel"
}
```

<a id='comment:1'></a>
Note: re-using this ticket created by mistake; the one about cycle basis for multiedges is at #27563.



---

archive/issue_events_243354.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2019-03-29T00:42:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "label": "component: packages: optional",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27562#event-243354"
}
```



---

archive/issue_events_243355.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2019-03-29T00:42:18Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "rename": {
        "from": "Fixes cycle basis for multiedges",
        "to": "Fix string formatting in ValueError in sql_db.py"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27562#event-243355"
}
```



---

archive/issue_comments_429632.json:
```json
{
    "body": "<a id='comment:2'></a>\nThis should be an easy ticket to fix for a beginner.",
    "created_at": "2019-03-29T00:47:57Z",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27562#issuecomment-429632",
    "user": "https://github.com/slel"
}
```

<a id='comment:2'></a>
This should be an easy ticket to fix for a beginner.



---

archive/issue_comments_429633.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,15 +1,36 @@\n-In `src/sage/databases/sql_db.py`, lines 465--467,\n+In `src/sage/databases/sql_db.py`, lines 465--467 currently read\n \n ```\n             if query_dict['table_name'] not in skel:\n                 raise ValueError(\"Database has no table\" \\\n                     + str(query_dict['table_name']) + \".\")\n ```\n-should be\n+but should instead read\n \n ```\n             if query_dict['table_name'] not in skel:\n-                raise ValueError(\"Database has no table %s\"\n-                    % query_dict['table_name'])\n+                raise ValueError(\"database has no table %s\"\n+                                 % query_dict['table_name'])\n ```\n \n+The current version is in particular missing a space between\n+\"has no table\" and the name, so errors look like:\n+\n+```\n+File \"src/sage/databases/sql_db.py\", line 308, in sage.databases.sql_db._create_print_table\n+Failed example:\n+    r = SQLQuery(DB, {'table_name':'simon', 'display_cols':['a1'], 'expression':['b2','<=', 6]})\n+Exception raised:\n+...\n+ValueError: Database has no tablesimon.\n+```\n+instead of\n+\n+```\n+File \"src/sage/databases/sql_db.py\", line 308, in sage.databases.sql_db._create_print_table\n+Failed example:\n+    r = SQLQuery(DB, {'table_name':'simon', 'display_cols':['a1'], 'expression':['b2','<=', 6]})\n+Exception raised:\n+...\n+ValueError: database has no table simon\n+```\n``````\n",
    "created_at": "2019-03-29T00:47:57Z",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27562#issuecomment-429633",
    "user": "https://github.com/slel"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,15 +1,36 @@
-In `src/sage/databases/sql_db.py`, lines 465--467,
+In `src/sage/databases/sql_db.py`, lines 465--467 currently read
 
 ```
             if query_dict['table_name'] not in skel:
                 raise ValueError("Database has no table" \
                     + str(query_dict['table_name']) + ".")
 ```
-should be
+but should instead read
 
 ```
             if query_dict['table_name'] not in skel:
-                raise ValueError("Database has no table %s"
-                    % query_dict['table_name'])
+                raise ValueError("database has no table %s"
+                                 % query_dict['table_name'])
 ```
 
+The current version is in particular missing a space between
+"has no table" and the name, so errors look like:
+
+```
+File "src/sage/databases/sql_db.py", line 308, in sage.databases.sql_db._create_print_table
+Failed example:
+    r = SQLQuery(DB, {'table_name':'simon', 'display_cols':['a1'], 'expression':['b2','<=', 6]})
+Exception raised:
+...
+ValueError: Database has no tablesimon.
+```
+instead of
+
+```
+File "src/sage/databases/sql_db.py", line 308, in sage.databases.sql_db._create_print_table
+Failed example:
+    r = SQLQuery(DB, {'table_name':'simon', 'display_cols':['a1'], 'expression':['b2','<=', 6]})
+Exception raised:
+...
+ValueError: database has no table simon
+```
``````




---

archive/issue_comments_429634.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -13,13 +13,13 @@\n                                  % query_dict['table_name'])\n ```\n \n-The current version is in particular missing a space between\n+The current version in particular lacks a space between\n \"has no table\" and the name, so errors look like:\n \n ```\n-File \"src/sage/databases/sql_db.py\", line 308, in sage.databases.sql_db._create_print_table\n+File ...\n Failed example:\n-    r = SQLQuery(DB, {'table_name':'simon', 'display_cols':['a1'], 'expression':['b2','<=', 6]})\n+    r = SQLQuery(DB, {'table_name':'simon'})\n Exception raised:\n ...\n ValueError: Database has no tablesimon.\n@@ -27,10 +27,26 @@\n instead of\n \n ```\n-File \"src/sage/databases/sql_db.py\", line 308, in sage.databases.sql_db._create_print_table\n+File ...\n Failed example:\n-    r = SQLQuery(DB, {'table_name':'simon', 'display_cols':['a1'], 'expression':['b2','<=', 6]})\n+    r = SQLQuery(DB, {'table_name':'simon'})\n Exception raised:\n ...\n ValueError: database has no table simon\n ```\n+\n+At line 1400, one should also change\n+\n+```\n+        if table_name in self.__skeleton__:\n+            raise ValueError('Database already has a table named' \\\n+                + '%s.'%table_name)\n+```\n+to\n+\n+```\n+        if table_name in self.__skeleton__:\n+            raise ValueError('database already has a table named %s'\n+                             %table_name)\n+```\n+\n``````\n",
    "created_at": "2019-03-29T00:57:38Z",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27562#issuecomment-429634",
    "user": "https://github.com/slel"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -13,13 +13,13 @@
                                  % query_dict['table_name'])
 ```
 
-The current version is in particular missing a space between
+The current version in particular lacks a space between
 "has no table" and the name, so errors look like:
 
 ```
-File "src/sage/databases/sql_db.py", line 308, in sage.databases.sql_db._create_print_table
+File ...
 Failed example:
-    r = SQLQuery(DB, {'table_name':'simon', 'display_cols':['a1'], 'expression':['b2','<=', 6]})
+    r = SQLQuery(DB, {'table_name':'simon'})
 Exception raised:
 ...
 ValueError: Database has no tablesimon.
@@ -27,10 +27,26 @@
 instead of
 
 ```
-File "src/sage/databases/sql_db.py", line 308, in sage.databases.sql_db._create_print_table
+File ...
 Failed example:
-    r = SQLQuery(DB, {'table_name':'simon', 'display_cols':['a1'], 'expression':['b2','<=', 6]})
+    r = SQLQuery(DB, {'table_name':'simon'})
 Exception raised:
 ...
 ValueError: database has no table simon
 ```
+
+At line 1400, one should also change
+
+```
+        if table_name in self.__skeleton__:
+            raise ValueError('Database already has a table named' \
+                + '%s.'%table_name)
+```
+to
+
+```
+        if table_name in self.__skeleton__:
+            raise ValueError('database already has a table named %s'
+                             %table_name)
+```
+
``````




---

archive/issue_comments_429635.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [slelievre](#comment%3A2):\n> This should be an easy ticket to fix for a beginner.\n\n\nAs a beginner I'd like to fix this, if no one else's on it, of course. Is that okay?",
    "created_at": "2019-04-02T18:20:03Z",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27562#issuecomment-429635",
    "user": "https://github.com/beagaliana"
}
```

<a id='comment:5'></a>
Replying to [slelievre](#comment%3A2):
> This should be an easy ticket to fix for a beginner.


As a beginner I'd like to fix this, if no one else's on it, of course. Is that okay?



---

archive/issue_comments_429636.json:
```json
{
    "body": "<a id='comment:6'></a>\nSure, please go ahead. Ask questions if you have any doubt.",
    "created_at": "2019-04-03T09:33:18Z",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27562#issuecomment-429636",
    "user": "https://github.com/slel"
}
```

<a id='comment:6'></a>
Sure, please go ahead. Ask questions if you have any doubt.



---

archive/issue_comments_429637.json:
```json
{
    "body": "**Branch:** [u/gh-beagaliana/fix_string_formatting_in_valueerror_in_sql_db_py](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-beagaliana/fix_string_formatting_in_valueerror_in_sql_db_py)",
    "created_at": "2019-04-03T13:27:03Z",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27562#issuecomment-429637",
    "user": "https://github.com/beagaliana"
}
```

**Branch:** [u/gh-beagaliana/fix_string_formatting_in_valueerror_in_sql_db_py](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-beagaliana/fix_string_formatting_in_valueerror_in_sql_db_py)



---

archive/issue_comments_429638.json:
```json
{
    "body": "<a id='comment:8'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a27f054ecc618bb2622f06c67fc3e416db504987\">a27f054</a></td><td><code>Fix string formatting in ValueError in sql_db.py</code></td></tr></table>\n",
    "created_at": "2019-04-03T16:53:16Z",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27562#issuecomment-429638",
    "user": "https://github.com/beagaliana"
}
```

<a id='comment:8'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a27f054ecc618bb2622f06c67fc3e416db504987">a27f054</a></td><td><code>Fix string formatting in ValueError in sql_db.py</code></td></tr></table>




---

archive/issue_comments_429639.json:
```json
{
    "body": "**Commit:** [a27f054ecc618bb2622f06c67fc3e416db504987](https://github.com/sagemath/sagetrac-mirror/commit/a27f054ecc618bb2622f06c67fc3e416db504987)",
    "created_at": "2019-04-03T16:53:16Z",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27562#issuecomment-429639",
    "user": "https://github.com/beagaliana"
}
```

**Commit:** [a27f054ecc618bb2622f06c67fc3e416db504987](https://github.com/sagemath/sagetrac-mirror/commit/a27f054ecc618bb2622f06c67fc3e416db504987)



---

archive/issue_comments_429640.json:
```json
{
    "body": "**Author:** Beatriz Galiana Carballido",
    "created_at": "2019-04-03T16:53:16Z",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27562#issuecomment-429640",
    "user": "https://github.com/beagaliana"
}
```

**Author:** Beatriz Galiana Carballido



---

archive/issue_events_243356.json:
```json
{
    "actor": "https://github.com/beagaliana",
    "created_at": "2019-04-03T16:53:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27562#event-243356"
}
```



---

archive/issue_comments_429641.json:
```json
{
    "body": "<a id='comment:9'></a>\nplease add a doctest to check your new error message",
    "created_at": "2019-04-07T19:08:24Z",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27562#issuecomment-429641",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:9'></a>
please add a doctest to check your new error message



---

archive/issue_comments_429642.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [chapoton](#comment%3A9):\n> please add a doctest to check your new error message\n\nI've never added a doctest before so this question might be a bit too simple. I've been reading the general conventions about writing tests but I'm not really sure about where should I add it. I thought I would just write it as a comment starting with something like this  \n\n`Test that :trac:27562 is fixed::` \n\nand then just add the test itself.\n\nThank you!\n\nBea",
    "created_at": "2019-04-13T15:22:39Z",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27562#issuecomment-429642",
    "user": "https://github.com/beagaliana"
}
```

<a id='comment:10'></a>
Replying to [chapoton](#comment%3A9):
> please add a doctest to check your new error message

I've never added a doctest before so this question might be a bit too simple. I've been reading the general conventions about writing tests but I'm not really sure about where should I add it. I thought I would just write it as a comment starting with something like this  

`Test that :trac:27562 is fixed::` 

and then just add the test itself.

Thank you!

Bea



---

archive/issue_comments_429643.json:
```json
{
    "body": "<a id='comment:11'></a>\nI already got my answer, I'll try to add the doctest asap :-)",
    "created_at": "2019-04-26T12:43:44Z",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27562#issuecomment-429643",
    "user": "https://github.com/beagaliana"
}
```

<a id='comment:11'></a>
I already got my answer, I'll try to add the doctest asap :-)



---

archive/issue_comments_429644.json:
```json
{
    "body": "**Changing commit** from \"[a27f054ecc618bb2622f06c67fc3e416db504987](https://github.com/sagemath/sagetrac-mirror/commit/a27f054ecc618bb2622f06c67fc3e416db504987)\" to \"[b70fe5641ae31f82f2678018b399c3be5e58d87f](https://github.com/sagemath/sagetrac-mirror/commit/b70fe5641ae31f82f2678018b399c3be5e58d87f)\".",
    "created_at": "2019-04-26T15:53:10Z",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27562#issuecomment-429644",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[a27f054ecc618bb2622f06c67fc3e416db504987](https://github.com/sagemath/sagetrac-mirror/commit/a27f054ecc618bb2622f06c67fc3e416db504987)" to "[b70fe5641ae31f82f2678018b399c3be5e58d87f](https://github.com/sagemath/sagetrac-mirror/commit/b70fe5641ae31f82f2678018b399c3be5e58d87f)".



---

archive/issue_comments_429645.json:
```json
{
    "body": "<a id='comment:12'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b70fe5641ae31f82f2678018b399c3be5e58d87f\">b70fe56</a></td><td><code>Add doctest</code></td></tr></table>\n",
    "created_at": "2019-04-26T15:53:10Z",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27562#issuecomment-429645",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b70fe5641ae31f82f2678018b399c3be5e58d87f">b70fe56</a></td><td><code>Add doctest</code></td></tr></table>




---

archive/issue_comments_429646.json:
```json
{
    "body": "<a id='comment:13'></a>\nok, almost good.\n\n* This added piece of doc should not be in the middle of the code, but with the rest of the doc (probably somewhere slightly above the place where you have put it)\n\n* There should be an empty line after the line ending with `::`\n\n* The test lines after any `::` should be indented by 4 more spaces\n\n* The correct syntax for the trac role is <code>:trac:\\`27562\\`</code>",
    "created_at": "2019-04-28T11:53:00Z",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27562#issuecomment-429646",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:13'></a>
ok, almost good.

* This added piece of doc should not be in the middle of the code, but with the rest of the doc (probably somewhere slightly above the place where you have put it)

* There should be an empty line after the line ending with `::`

* The test lines after any `::` should be indented by 4 more spaces

* The correct syntax for the trac role is <code>:trac:\`27562\`</code>



---

archive/issue_comments_429647.json:
```json
{
    "body": "**Changing commit** from \"[b70fe5641ae31f82f2678018b399c3be5e58d87f](https://github.com/sagemath/sagetrac-mirror/commit/b70fe5641ae31f82f2678018b399c3be5e58d87f)\" to \"[7a678a28fd8a071c6a9702d07bb189779b0389ff](https://github.com/sagemath/sagetrac-mirror/commit/7a678a28fd8a071c6a9702d07bb189779b0389ff)\".",
    "created_at": "2019-04-29T12:55:50Z",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27562#issuecomment-429647",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[b70fe5641ae31f82f2678018b399c3be5e58d87f](https://github.com/sagemath/sagetrac-mirror/commit/b70fe5641ae31f82f2678018b399c3be5e58d87f)" to "[7a678a28fd8a071c6a9702d07bb189779b0389ff](https://github.com/sagemath/sagetrac-mirror/commit/7a678a28fd8a071c6a9702d07bb189779b0389ff)".



---

archive/issue_comments_429648.json:
```json
{
    "body": "<a id='comment:14'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7a678a28fd8a071c6a9702d07bb189779b0389ff\">7a678a2</a></td><td><code>Update doctest</code></td></tr></table>\n",
    "created_at": "2019-04-29T12:55:50Z",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27562#issuecomment-429648",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7a678a28fd8a071c6a9702d07bb189779b0389ff">7a678a2</a></td><td><code>Update doctest</code></td></tr></table>




---

archive/issue_comments_429649.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [chapoton](#comment%3A13):\n> ok, almost good.\n> \n> * This added piece of doc should not be in the middle of the code, but with the rest of the doc (probably somewhere slightly above the place where you have put it)\n> \n> * There should be an empty line after the line ending with `::`\n> \n> * The test lines after any `::` should be indented by 4 more spaces\n> \n> * The correct syntax for the trac role is <code>:trac:\\`27562\\`</code>\n\n\nThank you for your corrections!\n \nI just changed the doctest, I believe I did everything you suggested so it should be okay by now",
    "created_at": "2019-04-29T12:58:54Z",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27562#issuecomment-429649",
    "user": "https://github.com/beagaliana"
}
```

<a id='comment:15'></a>
Replying to [chapoton](#comment%3A13):
> ok, almost good.
> 
> * This added piece of doc should not be in the middle of the code, but with the rest of the doc (probably somewhere slightly above the place where you have put it)
> 
> * There should be an empty line after the line ending with `::`
> 
> * The test lines after any `::` should be indented by 4 more spaces
> 
> * The correct syntax for the trac role is <code>:trac:\`27562\`</code>


Thank you for your corrections!
 
I just changed the doctest, I believe I did everything you suggested so it should be okay by now



---

archive/issue_comments_429650.json:
```json
{
    "body": "<a id='comment:16'></a>\nLooks better,\n\n* you forgot to remove the \"doc in the middle of the code\"\n\n* just have one (not two) empty line before and after the new piece of doc",
    "created_at": "2019-04-30T06:19:28Z",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27562#issuecomment-429650",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:16'></a>
Looks better,

* you forgot to remove the "doc in the middle of the code"

* just have one (not two) empty line before and after the new piece of doc



---

archive/issue_comments_429651.json:
```json
{
    "body": "<a id='comment:17'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/01b0349996fcec3c295bf16e02195e971408b435\">01b0349</a></td><td><code>Fix typo in doctest</code></td></tr></table>\n",
    "created_at": "2019-05-02T10:10:47Z",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27562#issuecomment-429651",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/01b0349996fcec3c295bf16e02195e971408b435">01b0349</a></td><td><code>Fix typo in doctest</code></td></tr></table>




---

archive/issue_comments_429652.json:
```json
{
    "body": "**Changing commit** from \"[7a678a28fd8a071c6a9702d07bb189779b0389ff](https://github.com/sagemath/sagetrac-mirror/commit/7a678a28fd8a071c6a9702d07bb189779b0389ff)\" to \"[01b0349996fcec3c295bf16e02195e971408b435](https://github.com/sagemath/sagetrac-mirror/commit/01b0349996fcec3c295bf16e02195e971408b435)\".",
    "created_at": "2019-05-02T10:10:47Z",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27562#issuecomment-429652",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[7a678a28fd8a071c6a9702d07bb189779b0389ff](https://github.com/sagemath/sagetrac-mirror/commit/7a678a28fd8a071c6a9702d07bb189779b0389ff)" to "[01b0349996fcec3c295bf16e02195e971408b435](https://github.com/sagemath/sagetrac-mirror/commit/01b0349996fcec3c295bf16e02195e971408b435)".



---

archive/issue_comments_429653.json:
```json
{
    "body": "<a id='comment:18'></a>\nMoving tickets from the Sage 8.8 milestone that have been actively worked on in the last six months to the next release milestone (optimistically).",
    "created_at": "2019-07-03T11:37:56Z",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27562#issuecomment-429653",
    "user": "https://github.com/embray"
}
```

<a id='comment:18'></a>
Moving tickets from the Sage 8.8 milestone that have been actively worked on in the last six months to the next release milestone (optimistically).



---

archive/issue_events_243357.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-07-03T11:37:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27562#event-243357"
}
```



---

archive/issue_events_243358.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-07-03T11:37:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27562#event-243358"
}
```



---

archive/issue_comments_429654.json:
```json
{
    "body": "**Changing branch** from \"[u/gh-beagaliana/fix_string_formatting_in_valueerror_in_sql_db_py](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-beagaliana/fix_string_formatting_in_valueerror_in_sql_db_py)\" to \"[u/gh-NebulousOinkler/fix_string_formatting_in_valueerror_in_sql_db_py](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-NebulousOinkler/fix_string_formatting_in_valueerror_in_sql_db_py)\".",
    "created_at": "2019-07-16T22:18:48Z",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27562#issuecomment-429654",
    "user": "https://github.com/NebulousOinkler"
}
```

**Changing branch** from "[u/gh-beagaliana/fix_string_formatting_in_valueerror_in_sql_db_py](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-beagaliana/fix_string_formatting_in_valueerror_in_sql_db_py)" to "[u/gh-NebulousOinkler/fix_string_formatting_in_valueerror_in_sql_db_py](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-NebulousOinkler/fix_string_formatting_in_valueerror_in_sql_db_py)".



---

archive/issue_comments_429655.json:
```json
{
    "body": "<a id='comment:20'></a>\nMinor doctest formatting fixes made. Also made a change to the string formatting of ValueError on line 489 exactly analogous to the ticket.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bb0d767d08f97d3375ccf14c745cf3a46c502341\">bb0d767</a></td><td><code>Fixed doctests for #27562</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a092f680c401bf37778f2de00d373e895bee7643\">a092f68</a></td><td><code>Removed ellipses in doctests for #27562 and minor fix to string formatting in line 489</code></td></tr></table>\n",
    "created_at": "2019-07-16T22:25:13Z",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27562#issuecomment-429655",
    "user": "https://github.com/NebulousOinkler"
}
```

<a id='comment:20'></a>
Minor doctest formatting fixes made. Also made a change to the string formatting of ValueError on line 489 exactly analogous to the ticket.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bb0d767d08f97d3375ccf14c745cf3a46c502341">bb0d767</a></td><td><code>Fixed doctests for #27562</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a092f680c401bf37778f2de00d373e895bee7643">a092f68</a></td><td><code>Removed ellipses in doctests for #27562 and minor fix to string formatting in line 489</code></td></tr></table>




---

archive/issue_comments_429656.json:
```json
{
    "body": "**Changing commit** from \"[01b0349996fcec3c295bf16e02195e971408b435](https://github.com/sagemath/sagetrac-mirror/commit/01b0349996fcec3c295bf16e02195e971408b435)\" to \"[a092f680c401bf37778f2de00d373e895bee7643](https://github.com/sagemath/sagetrac-mirror/commit/a092f680c401bf37778f2de00d373e895bee7643)\".",
    "created_at": "2019-07-16T22:25:13Z",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27562#issuecomment-429656",
    "user": "https://github.com/NebulousOinkler"
}
```

**Changing commit** from "[01b0349996fcec3c295bf16e02195e971408b435](https://github.com/sagemath/sagetrac-mirror/commit/01b0349996fcec3c295bf16e02195e971408b435)" to "[a092f680c401bf37778f2de00d373e895bee7643](https://github.com/sagemath/sagetrac-mirror/commit/a092f680c401bf37778f2de00d373e895bee7643)".



---

archive/issue_comments_429657.json:
```json
{
    "body": "<a id='comment:21'></a>\nThe removal of ellipses looks strange. Any over traceback in doctests is using `...` \n\nMaybe they were just wrongly indented ?",
    "created_at": "2019-07-17T10:07:35Z",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27562#issuecomment-429657",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:21'></a>
The removal of ellipses looks strange. Any over traceback in doctests is using `...` 

Maybe they were just wrongly indented ?



---

archive/issue_comments_429658.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [chapoton](#comment%3A21):\n> Maybe they were just wrongly indented ?\n\n\nYes, that was an issue. I'll return the ellipses to be in line with other doctests.",
    "created_at": "2019-07-17T14:18:18Z",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27562#issuecomment-429658",
    "user": "https://github.com/NebulousOinkler"
}
```

<a id='comment:22'></a>
Replying to [chapoton](#comment%3A21):
> Maybe they were just wrongly indented ?


Yes, that was an issue. I'll return the ellipses to be in line with other doctests.



---

archive/issue_comments_429659.json:
```json
{
    "body": "<a id='comment:23'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f332985f87eb116ae8d0806242da7d4efa96f3e7\">f332985</a></td><td><code>returned ellipses to doctests</code></td></tr></table>\n",
    "created_at": "2019-07-17T14:22:44Z",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27562#issuecomment-429659",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f332985f87eb116ae8d0806242da7d4efa96f3e7">f332985</a></td><td><code>returned ellipses to doctests</code></td></tr></table>




---

archive/issue_comments_429660.json:
```json
{
    "body": "**Changing commit** from \"[a092f680c401bf37778f2de00d373e895bee7643](https://github.com/sagemath/sagetrac-mirror/commit/a092f680c401bf37778f2de00d373e895bee7643)\" to \"[f332985f87eb116ae8d0806242da7d4efa96f3e7](https://github.com/sagemath/sagetrac-mirror/commit/f332985f87eb116ae8d0806242da7d4efa96f3e7)\".",
    "created_at": "2019-07-17T14:22:44Z",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27562#issuecomment-429660",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[a092f680c401bf37778f2de00d373e895bee7643](https://github.com/sagemath/sagetrac-mirror/commit/a092f680c401bf37778f2de00d373e895bee7643)" to "[f332985f87eb116ae8d0806242da7d4efa96f3e7](https://github.com/sagemath/sagetrac-mirror/commit/f332985f87eb116ae8d0806242da7d4efa96f3e7)".



---

archive/issue_comments_429661.json:
```json
{
    "body": "**Reviewer:** Fr\u00e9d\u00e9ric Chapoton",
    "created_at": "2019-07-18T07:27:52Z",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27562#issuecomment-429661",
    "user": "https://github.com/fchapoton"
}
```

**Reviewer:** Frédéric Chapoton



---

archive/issue_comments_429662.json:
```json
{
    "body": "**Changing commit** from \"[f332985f87eb116ae8d0806242da7d4efa96f3e7](https://github.com/sagemath/sagetrac-mirror/commit/f332985f87eb116ae8d0806242da7d4efa96f3e7)\" to \"[8c633267e64dc4643b5efd7b95cba86a4d0e174e](https://github.com/sagemath/sagetrac-mirror/commit/8c633267e64dc4643b5efd7b95cba86a4d0e174e)\".",
    "created_at": "2019-07-18T07:27:52Z",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27562#issuecomment-429662",
    "user": "https://github.com/fchapoton"
}
```

**Changing commit** from "[f332985f87eb116ae8d0806242da7d4efa96f3e7](https://github.com/sagemath/sagetrac-mirror/commit/f332985f87eb116ae8d0806242da7d4efa96f3e7)" to "[8c633267e64dc4643b5efd7b95cba86a4d0e174e](https://github.com/sagemath/sagetrac-mirror/commit/8c633267e64dc4643b5efd7b95cba86a4d0e174e)".



---

archive/issue_comments_429663.json:
```json
{
    "body": "**Changing branch** from \"[u/gh-NebulousOinkler/fix_string_formatting_in_valueerror_in_sql_db_py](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-NebulousOinkler/fix_string_formatting_in_valueerror_in_sql_db_py)\" to \"[public/ticket/27562](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/27562)\".",
    "created_at": "2019-07-18T07:27:52Z",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27562#issuecomment-429663",
    "user": "https://github.com/fchapoton"
}
```

**Changing branch** from "[u/gh-NebulousOinkler/fix_string_formatting_in_valueerror_in_sql_db_py](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-NebulousOinkler/fix_string_formatting_in_valueerror_in_sql_db_py)" to "[public/ticket/27562](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/27562)".



---

archive/issue_comments_429664.json:
```json
{
    "body": "<a id='comment:24'></a>\nI have moved the ellipses to the correct place, and then squashed the commits into a single commit: the result is the new branch.\n\nI am setting to positive review.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8c633267e64dc4643b5efd7b95cba86a4d0e174e\">8c63326</a></td><td><code>Fix string formatting in ValueError in sql_db.py</code></td></tr></table>\n",
    "created_at": "2019-07-18T07:27:52Z",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27562#issuecomment-429664",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:24'></a>
I have moved the ellipses to the correct place, and then squashed the commits into a single commit: the result is the new branch.

I am setting to positive review.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8c633267e64dc4643b5efd7b95cba86a4d0e174e">8c63326</a></td><td><code>Fix string formatting in ValueError in sql_db.py</code></td></tr></table>




---

archive/issue_events_243359.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-07-18T07:27:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27562#event-243359"
}
```



---

archive/issue_events_243360.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-07-18T07:27:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27562#event-243360"
}
```



---

archive/issue_comments_429665.json:
```json
{
    "body": "**Changing branch** from \"[public/ticket/27562](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/27562)\" to \"[8c633267e64dc4643b5efd7b95cba86a4d0e174e](https://github.com/sagemath/sagetrac-mirror/commit/8c633267e64dc4643b5efd7b95cba86a4d0e174e)\".",
    "created_at": "2019-07-23T21:03:49Z",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27562#issuecomment-429665",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/ticket/27562](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/27562)" to "[8c633267e64dc4643b5efd7b95cba86a4d0e174e](https://github.com/sagemath/sagetrac-mirror/commit/8c633267e64dc4643b5efd7b95cba86a4d0e174e)".



---

archive/issue_events_243361.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-07-23T21:03:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27562#event-243361"
}
```



---

archive/issue_events_243362.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-07-23T21:03:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27562",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27562#event-243362"
}
```
