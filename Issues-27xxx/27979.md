# Issue 27979: Add missing implementation in Macaulay2 interface

archive/issues_027742.json:
```json
{
    "body": "This ticket implements the following changes to the Macaulay2 interface:\n\n- Naming of Macaulay2/interface elements is improved.\n\n  The constructor for interface elements now correctly handles the `name` parameter (which previously got ignored in some cases). For example, this works now:\n  {{{\n  sage: A = macaulay2(ZZ['x,y,z'], name='A')\n  sage: A.name()\n  'A'\n  }}}\n\n  Moreover, Macaulay2Elements can now be renamed, as `name()` was implemented. In particular, this works for polynomial rings, so the `sage0`, etc., identifiers can be avoided in the Macaulay2 output. For example:\n  {{{\n  sage: S = macaulay2(QQ['x,y'])\n  sage: S.name()\n  'sage0'\n  sage: R = S.name(\"R\")\n  sage: R.name()\n  'R'\n  sage: R.vars().cokernel().resolution()\n   1      2      1\n  R  <-- R  <-- R  <-- 0\n\n  0      1      2      3\n  }}}\n\n- The `_contains` operator (i.e. `in`) is implemented:\n  {{{\n  sage: '\"x\"' in macaulay2('hashTable {\"x\" => 1}')\n  True\n  }}}\n\n- Seeds are implemented.\n\nMoreover, this ticket provides small fixes:\n\n- The syntax `..` for defining a polynomial ring can now be used more than just once:\n  {{{\n  sage: macaulay2.ring('QQ', '[a_0..a_2,b..<d,f]').vars()\n  | a_0 a_1 a_2 b c f |\n  }}}\n\n- Tab completion is slightly improved to avoid the use of global variables.\n\n- The `latex()` doctest now works with Macaulay2 1.12 and 1.13.\n\nKeywords: macaulay2\n\nReviewer: Fr\u00e9d\u00e9ric Chapoton\n\nAuthor: Markus Wageringel\n\nBranch: 2eba33ce199bcdc52b3b1c7840e8174625865ae9\n\nDependencies: #27848\n\nCommit: 2eba33ce199bcdc52b3b1c7840e8174625865ae9\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/27979\n\n",
    "closed_at": "2019-06-28T04:30:17Z",
    "created_at": "2019-06-12T21:34:14Z",
    "labels": [
        "component: interfaces: optional"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.9",
    "title": "Add missing implementation in Macaulay2 interface",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27979",
    "user": "https://github.com/mwageringel"
}
```
This ticket implements the following changes to the Macaulay2 interface:

- Naming of Macaulay2/interface elements is improved.

  The constructor for interface elements now correctly handles the `name` parameter (which previously got ignored in some cases). For example, this works now:
  {{{
  sage: A = macaulay2(ZZ['x,y,z'], name='A')
  sage: A.name()
  'A'
  }}}

  Moreover, Macaulay2Elements can now be renamed, as `name()` was implemented. In particular, this works for polynomial rings, so the `sage0`, etc., identifiers can be avoided in the Macaulay2 output. For example:
  {{{
  sage: S = macaulay2(QQ['x,y'])
  sage: S.name()
  'sage0'
  sage: R = S.name("R")
  sage: R.name()
  'R'
  sage: R.vars().cokernel().resolution()
   1      2      1
  R  <-- R  <-- R  <-- 0

  0      1      2      3
  }}}

- The `_contains` operator (i.e. `in`) is implemented:
  {{{
  sage: '"x"' in macaulay2('hashTable {"x" => 1}')
  True
  }}}

- Seeds are implemented.

Moreover, this ticket provides small fixes:

- The syntax `..` for defining a polynomial ring can now be used more than just once:
  {{{
  sage: macaulay2.ring('QQ', '[a_0..a_2,b..<d,f]').vars()
  | a_0 a_1 a_2 b c f |
  }}}

- Tab completion is slightly improved to avoid the use of global variables.

- The `latex()` doctest now works with Macaulay2 1.12 and 1.13.

Keywords: macaulay2

Reviewer: Frédéric Chapoton

Author: Markus Wageringel

Branch: 2eba33ce199bcdc52b3b1c7840e8174625865ae9

Dependencies: #27848

Commit: 2eba33ce199bcdc52b3b1c7840e8174625865ae9

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/27979





---

archive/issue_comments_391530.json:
```json
{
    "body": "<a id='comment:1'></a>The first two commits fixing some doctests are from #27848. To run the tests on all files that have optional Macaulay2 doctests, you can use:\n\n```\nsage -t --long --optional=sage,macaulay2 $(grep -i \"optional.*macaulay2\" -r src/sage -l | paste -sd \" \" -)\n```\nTested using Macaulay2 1.13.\n\n---\nNew commits:",
    "created_at": "2019-06-12T21:42:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27979",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27979#issuecomment-391530",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:1'></a>The first two commits fixing some doctests are from #27848. To run the tests on all files that have optional Macaulay2 doctests, you can use:

```
sage -t --long --optional=sage,macaulay2 $(grep -i "optional.*macaulay2" -r src/sage -l | paste -sd " " -)
```
Tested using Macaulay2 1.13.

---
New commits:



---

archive/issue_comments_391531.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-06-12T21:42:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27979",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27979#issuecomment-391531",
    "user": "https://github.com/mwageringel"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_391532.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2019-06-12T21:42:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27979",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27979#issuecomment-391532",
    "user": "https://github.com/mwageringel"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_391533.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-06-13T05:58:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27979",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27979#issuecomment-391533",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_391534.json:
```json
{
    "body": "<a id='comment:3'></a>The oldstyle print reported by the patchbot is not Python code, but Macaulay2 code, so not relevant.",
    "created_at": "2019-06-13T06:06:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27979",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27979#issuecomment-391534",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:3'></a>The oldstyle print reported by the patchbot is not Python code, but Macaulay2 code, so not relevant.



---

archive/issue_comments_391535.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-06-21T12:26:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27979",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27979#issuecomment-391535",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_391536.json:
```json
{
    "body": "<a id='comment:5'></a>Looks good to me.\n\nI have rebased the branch on top of the branch of #27848. And then squashed the commits into a single one.\n\nI am setting this to positive.\n\n---\nNew commits:",
    "created_at": "2019-06-21T12:26:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27979",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27979#issuecomment-391536",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'></a>Looks good to me.

I have rebased the branch on top of the branch of #27848. And then squashed the commits into a single one.

I am setting this to positive.

---
New commits:



---

archive/issue_comments_391537.json:
```json
{
    "body": "<a id='comment:6'></a>Thank you.",
    "created_at": "2019-06-21T19:42:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27979",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27979#issuecomment-391537",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:6'></a>Thank you.



---

archive/issue_events_069337.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-06-28T04:30:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27979",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27979#event-69337"
}
```



---

archive/issue_comments_391538.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-06-28T04:30:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27979",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27979#issuecomment-391538",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_069338.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-07-03T11:34:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27979",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27979#event-69338"
}
```



---

archive/issue_comments_391539.json:
```json
{
    "body": "<a id='comment:8'></a>Not in Sage 8.8.  Let's please to try keep tickets' milestones related to the release in which we actually intend to include them, and in particular the release in which they were *actually* included, especially when closing tickets.",
    "created_at": "2019-07-03T11:34:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27979",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27979#issuecomment-391539",
    "user": "https://github.com/embray"
}
```

<a id='comment:8'></a>Not in Sage 8.8.  Let's please to try keep tickets' milestones related to the release in which we actually intend to include them, and in particular the release in which they were *actually* included, especially when closing tickets.
