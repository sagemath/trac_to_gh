# Issue 27027: graph relabel() assumes sortable vertices

archive/issues_026790.json:
```json
{
    "assignees": [],
    "body": "There are several cases in `relabel()` which assume sorting of vertices. \n\nThe following cases are fixed:\n\n1. `perm=None`. This should just relabel with integers from 0 to N-1 in an arbitrary order (as the documentation already says).\n\n2. `perm` is a callable. This is easy to avoid, as the ordering of the vertices is not used in the code:\n\n```\n        elif callable(perm):\n            perm = dict( [ i, perm(i) ] for i in self.vertices() )\n            complete_partial_function = False\n```\n\nThis broke several functions which did assume a particular ordering for `G.relabel(perm=None)`. Those are fixed by using `G.relabel(perm=range(G.order()))` instead.\n\nFurthermore, we allow arbitrary iterables to be given for relabeling instead of only `list` and `tuple`. This improves things with Python 3 where `range()` becomes an iterator.\n\nCC:  @dcoudert\n\nKeywords: **py3, graph**\n\nBranch/Commit: **[a7eaec9](https://github.com/sagemath/sagetrac-mirror/commit/a7eaec9a42dbdc6839fca59d2f42c8e1f07e6c07)**\n\nReviewer: **David Coudert**\n\nAuthor: **Jeroen Demeyer**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/27027_\n\n",
    "closed_at": "2019-01-27T10:54:36Z",
    "created_at": "2019-01-07T09:14:42Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "graph relabel() assumes sortable vertices",
    "type": "issue",
    "updated_at": "2019-01-27T10:54:36Z",
    "url": "https://github.com/sagemath/sage/issues/27027",
    "user": "https://github.com/jdemeyer"
}
```
There are several cases in `relabel()` which assume sorting of vertices. 

The following cases are fixed:

1. `perm=None`. This should just relabel with integers from 0 to N-1 in an arbitrary order (as the documentation already says).

2. `perm` is a callable. This is easy to avoid, as the ordering of the vertices is not used in the code:

```
        elif callable(perm):
            perm = dict( [ i, perm(i) ] for i in self.vertices() )
            complete_partial_function = False
```

This broke several functions which did assume a particular ordering for `G.relabel(perm=None)`. Those are fixed by using `G.relabel(perm=range(G.order()))` instead.

Furthermore, we allow arbitrary iterables to be given for relabeling instead of only `list` and `tuple`. This improves things with Python 3 where `range()` becomes an iterator.

CC:  @dcoudert

Keywords: **py3, graph**

Branch/Commit: **[a7eaec9](https://github.com/sagemath/sagetrac-mirror/commit/a7eaec9a42dbdc6839fca59d2f42c8e1f07e6c07)**

Reviewer: **David Coudert**

Author: **Jeroen Demeyer**

_Issue created by migration from https://trac.sagemath.org/ticket/27027_





---

archive/issue_events_353276.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-01-07T09:14:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "milestone_number": null,
    "milestone_title": "sage-8.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27027#event-353276"
}
```



---

archive/issue_events_353277.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-01-07T09:14:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "component: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27027#event-353277"
}
```



---

archive/issue_events_353278.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-01-07T09:14:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27027#event-353278"
}
```



---

archive/issue_events_353279.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-01-07T09:14:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27027#event-353279"
}
```



---

archive/issue_comments_419598.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,10 @@\n-This branch in `relabel()` should not rely on sorted vertices:\n+There are several cases in `relabel()` which assume sorting of vertices. In some cases (when given a list/tuple) this makes sense and is hard to avoid.\n+\n+The following should be fixed though:\n+\n+1. `perm=None`. This should just relabel with integers from 0 to N-1.\n+\n+2. `perm` is a callable. This is easy to avoid, as the ordering of the vertices is not used in the code:\n \n ```\n         elif callable(perm):\n``````\n",
    "created_at": "2019-01-07T09:19:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27027#issuecomment-419598",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,10 @@
-This branch in `relabel()` should not rely on sorted vertices:
+There are several cases in `relabel()` which assume sorting of vertices. In some cases (when given a list/tuple) this makes sense and is hard to avoid.
+
+The following should be fixed though:
+
+1. `perm=None`. This should just relabel with integers from 0 to N-1.
+
+2. `perm` is a callable. This is easy to avoid, as the ordering of the vertices is not used in the code:
 
 ```
         elif callable(perm):
``````




---

archive/issue_events_353280.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-01-07T09:19:36Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "title_is": "graph relabel() assumes sortable vertices",
    "title_was": "graph relabel() with callable should not sort vertices",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27027#event-353280"
}
```



---

archive/issue_comments_419599.json:
```json
{
    "body": "Branch: **[u/jdemeyer/graph_relabel___assumes_sortable_vertices](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/graph_relabel___assumes_sortable_vertices)**",
    "created_at": "2019-01-07T10:21:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27027#issuecomment-419599",
    "user": "https://github.com/jdemeyer"
}
```

Branch: **[u/jdemeyer/graph_relabel___assumes_sortable_vertices](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/graph_relabel___assumes_sortable_vertices)**



---

archive/issue_comments_419600.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nYou could use `G.relabel(list(range(G.order())))` instead of `G.relabel(list(range(len(G))))`.\n\nIn `generic_graph.py`, you changed the doctest `G.relabel(return_map=True) == expecting`. Isn't it risky to do that ? the ordering of the keys of a dictionary might differ in py2  and py3, no ?\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4e3dbd7ca700fb7eec96e234e706897b0c04ac6a\">4e3dbd7</a></td><td><code>Avoid sorting vertices in relabel()</code></td></tr></table>\n",
    "created_at": "2019-01-07T10:43:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27027#issuecomment-419600",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:3" align="right">Comment 3</div>

You could use `G.relabel(list(range(G.order())))` instead of `G.relabel(list(range(len(G))))`.

In `generic_graph.py`, you changed the doctest `G.relabel(return_map=True) == expecting`. Isn't it risky to do that ? the ordering of the keys of a dictionary might differ in py2  and py3, no ?

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4e3dbd7ca700fb7eec96e234e706897b0c04ac6a">4e3dbd7</a></td><td><code>Avoid sorting vertices in relabel()</code></td></tr></table>




---

archive/issue_comments_419601.json:
```json
{
    "body": "Commit: **[4e3dbd7](https://github.com/sagemath/sagetrac-mirror/commit/4e3dbd7ca700fb7eec96e234e706897b0c04ac6a)**",
    "created_at": "2019-01-07T10:43:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27027#issuecomment-419601",
    "user": "https://github.com/dcoudert"
}
```

Commit: **[4e3dbd7](https://github.com/sagemath/sagetrac-mirror/commit/4e3dbd7ca700fb7eec96e234e706897b0c04ac6a)**



---

archive/issue_comments_419602.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fe559c5525eb5ca2f275f847c32e1869b9cbecea\">fe559c5</a></td><td><code>Avoid sorting vertices in relabel()</code></td></tr></table>\n",
    "created_at": "2019-01-07T10:50:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27027#issuecomment-419602",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4" align="right">Comment 4</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fe559c5525eb5ca2f275f847c32e1869b9cbecea">fe559c5</a></td><td><code>Avoid sorting vertices in relabel()</code></td></tr></table>




---

archive/issue_comments_419603.json:
```json
{
    "body": "Changed commit from **[4e3dbd7](https://github.com/sagemath/sagetrac-mirror/commit/4e3dbd7ca700fb7eec96e234e706897b0c04ac6a)** to **[fe559c5](https://github.com/sagemath/sagetrac-mirror/commit/fe559c5525eb5ca2f275f847c32e1869b9cbecea)**",
    "created_at": "2019-01-07T10:50:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27027#issuecomment-419603",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4e3dbd7](https://github.com/sagemath/sagetrac-mirror/commit/4e3dbd7ca700fb7eec96e234e706897b0c04ac6a)** to **[fe559c5](https://github.com/sagemath/sagetrac-mirror/commit/fe559c5525eb5ca2f275f847c32e1869b9cbecea)**



---

archive/issue_comments_419604.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nUpdate, still work in progress.",
    "created_at": "2019-01-07T10:51:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27027#issuecomment-419604",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:5" align="right">Comment 5</div>

Update, still work in progress.



---

archive/issue_comments_419605.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n-There are several cases in `relabel()` which assume sorting of vertices. In some cases (when given a list/tuple) this makes sense and is hard to avoid.\n+There are several cases in `relabel()` which assume sorting of vertices. \n \n-The following should be fixed though:\n+The following cases are fixed:\n \n 1. `perm=None`. This should just relabel with integers from 0 to N-1.\n \n@@ -11,3 +11,5 @@\n             perm = dict( [ i, perm(i) ] for i in self.vertices() )\n             complete_partial_function = False\n ```\n+\n+Furthermore, we allow arbitrary iterables to be given for relabeling instead of only `list` and `tuple`. This makes things with Python 3 where `range()` becomes an iterator.\n``````\n",
    "created_at": "2019-01-07T11:35:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27027#issuecomment-419605",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
-There are several cases in `relabel()` which assume sorting of vertices. In some cases (when given a list/tuple) this makes sense and is hard to avoid.
+There are several cases in `relabel()` which assume sorting of vertices. 
 
-The following should be fixed though:
+The following cases are fixed:
 
 1. `perm=None`. This should just relabel with integers from 0 to N-1.
 
@@ -11,3 +11,5 @@
             perm = dict( [ i, perm(i) ] for i in self.vertices() )
             complete_partial_function = False
 ```
+
+Furthermore, we allow arbitrary iterables to be given for relabeling instead of only `list` and `tuple`. This makes things with Python 3 where `range()` becomes an iterator.
``````




---

archive/issue_comments_419606.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f92367a436e9e71999a26ec6c7dee1246f9f347\">6f92367</a></td><td><code>Avoid sorting vertices in relabel()</code></td></tr></table>\n",
    "created_at": "2019-01-07T11:37:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27027#issuecomment-419606",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7" align="right">Comment 7</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f92367a436e9e71999a26ec6c7dee1246f9f347">6f92367</a></td><td><code>Avoid sorting vertices in relabel()</code></td></tr></table>




---

archive/issue_comments_419607.json:
```json
{
    "body": "Changed commit from **[fe559c5](https://github.com/sagemath/sagetrac-mirror/commit/fe559c5525eb5ca2f275f847c32e1869b9cbecea)** to **[6f92367](https://github.com/sagemath/sagetrac-mirror/commit/6f92367a436e9e71999a26ec6c7dee1246f9f347)**",
    "created_at": "2019-01-07T11:37:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27027#issuecomment-419607",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[fe559c5](https://github.com/sagemath/sagetrac-mirror/commit/fe559c5525eb5ca2f275f847c32e1869b9cbecea)** to **[6f92367](https://github.com/sagemath/sagetrac-mirror/commit/6f92367a436e9e71999a26ec6c7dee1246f9f347)**



---

archive/issue_comments_419608.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,7 +2,7 @@\n \n The following cases are fixed:\n \n-1. `perm=None`. This should just relabel with integers from 0 to N-1.\n+1. `perm=None`. This should just relabel with integers from 0 to N-1 in an arbitrary order (as the documentation already says).\n \n 2. `perm` is a callable. This is easy to avoid, as the ordering of the vertices is not used in the code:\n \n``````\n",
    "created_at": "2019-01-07T11:39:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27027#issuecomment-419608",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,7 +2,7 @@
 
 The following cases are fixed:
 
-1. `perm=None`. This should just relabel with integers from 0 to N-1.
+1. `perm=None`. This should just relabel with integers from 0 to N-1 in an arbitrary order (as the documentation already says).
 
 2. `perm` is a callable. This is easy to avoid, as the ordering of the vertices is not used in the code:
 
``````




---

archive/issue_comments_419609.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,4 +12,4 @@\n             complete_partial_function = False\n ```\n \n-Furthermore, we allow arbitrary iterables to be given for relabeling instead of only `list` and `tuple`. This makes things with Python 3 where `range()` becomes an iterator.\n+Furthermore, we allow arbitrary iterables to be given for relabeling instead of only `list` and `tuple`. This improves things with Python 3 where `range()` becomes an iterator.\n``````\n",
    "created_at": "2019-01-07T11:40:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27027#issuecomment-419609",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,4 +12,4 @@
             complete_partial_function = False
 ```
 
-Furthermore, we allow arbitrary iterables to be given for relabeling instead of only `list` and `tuple`. This makes things with Python 3 where `range()` becomes an iterator.
+Furthermore, we allow arbitrary iterables to be given for relabeling instead of only `list` and `tuple`. This improves things with Python 3 where `range()` becomes an iterator.
``````




---

archive/issue_events_353281.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-01-07T11:40:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27027#event-353281"
}
```



---

archive/issue_comments_419610.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,4 +12,6 @@\n             complete_partial_function = False\n ```\n \n+This broke several functions which did assume a particular ordering for `G.relabel(perm=None)`. Those are fixed by using `G.relabel(perm=range(G.order()))` instead.\n+\n Furthermore, we allow arbitrary iterables to be given for relabeling instead of only `list` and `tuple`. This improves things with Python 3 where `range()` becomes an iterator.\n``````\n",
    "created_at": "2019-01-07T11:43:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27027#issuecomment-419610",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,4 +12,6 @@
             complete_partial_function = False
 ```
 
+This broke several functions which did assume a particular ordering for `G.relabel(perm=None)`. Those are fixed by using `G.relabel(perm=range(G.order()))` instead.
+
 Furthermore, we allow arbitrary iterables to be given for relabeling instead of only `list` and `tuple`. This improves things with Python 3 where `range()` becomes an iterator.
``````




---

archive/issue_comments_419611.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ab00c175178632d7dd1835bc618fa08bf5253aa8\">ab00c17</a></td><td><code>Avoid sorting vertices in relabel()</code></td></tr></table>\n",
    "created_at": "2019-01-07T13:45:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27027#issuecomment-419611",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12" align="right">Comment 12</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ab00c175178632d7dd1835bc618fa08bf5253aa8">ab00c17</a></td><td><code>Avoid sorting vertices in relabel()</code></td></tr></table>




---

archive/issue_comments_419612.json:
```json
{
    "body": "Changed commit from **[6f92367](https://github.com/sagemath/sagetrac-mirror/commit/6f92367a436e9e71999a26ec6c7dee1246f9f347)** to **[ab00c17](https://github.com/sagemath/sagetrac-mirror/commit/ab00c175178632d7dd1835bc618fa08bf5253aa8)**",
    "created_at": "2019-01-07T13:45:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27027#issuecomment-419612",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6f92367](https://github.com/sagemath/sagetrac-mirror/commit/6f92367a436e9e71999a26ec6c7dee1246f9f347)** to **[ab00c17](https://github.com/sagemath/sagetrac-mirror/commit/ab00c175178632d7dd1835bc618fa08bf5253aa8)**



---

archive/issue_comments_419613.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nGreen patchbot!",
    "created_at": "2019-01-08T11:40:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27027#issuecomment-419613",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:13" align="right">Comment 13</div>

Green patchbot!



---

archive/issue_comments_419614.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nUnless I'm mistaken, `range` is an iterator in py3. Therefore, we cannot do `G.relabel(range(G.order()))` (several places). Or we must add a specific rule for iterators.",
    "created_at": "2019-01-08T13:28:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27027#issuecomment-419614",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:14" align="right">Comment 14</div>

Unless I'm mistaken, `range` is an iterator in py3. Therefore, we cannot do `G.relabel(range(G.order()))` (several places). Or we must add a specific rule for iterators.



---

archive/issue_comments_419615.json:
```json
{
    "body": "Reviewer: **David Coudert**",
    "created_at": "2019-01-08T13:28:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27027#issuecomment-419615",
    "user": "https://github.com/dcoudert"
}
```

Reviewer: **David Coudert**



---

archive/issue_comments_419616.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nReplying to [@dcoudert](#comment%3A14):\n> Or we must add a specific rule for iterators.\n\nIndeed. This is what I did in this patch.",
    "created_at": "2019-01-08T14:18:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27027#issuecomment-419616",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:15" align="right">Comment 15</div>

Replying to [@dcoudert](#comment%3A14):
> Or we must add a specific rule for iterators.

Indeed. This is what I did in this patch.



---

archive/issue_events_353282.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-01-08T16:15:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27027#event-353282"
}
```



---

archive/issue_events_353283.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-01-08T16:15:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27027#event-353283"
}
```



---

archive/issue_comments_419617.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nFor me this patch is good to go. I did several tests without detecting any hidden issue.",
    "created_at": "2019-01-08T16:15:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27027#issuecomment-419617",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:16" align="right">Comment 16</div>

For me this patch is good to go. I did several tests without detecting any hidden issue.



---

archive/issue_comments_419618.json:
```json
{
    "body": "Changed keywords from none to **py3, graph**",
    "created_at": "2019-01-08T16:15:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27027#issuecomment-419618",
    "user": "https://github.com/dcoudert"
}
```

Changed keywords from none to **py3, graph**



---

archive/issue_events_353284.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-01-15T18:16:10Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "milestone_number": null,
    "milestone_title": "sage-8.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27027#event-353284"
}
```



---

archive/issue_events_353285.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-01-15T18:16:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27027#event-353285"
}
```



---

archive/issue_comments_419619.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nRetarging tickets optimistically to the next milestone.  If you are responsible for this ticket (either its reporter or owner) and don't believe you are likely to complete this ticket before the next release (8.7) please retarget this ticket's milestone to sage-pending or sage-wishlist.",
    "created_at": "2019-01-15T18:16:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27027#issuecomment-419619",
    "user": "https://github.com/embray"
}
```

<div id="comment:17" align="right">Comment 17</div>

Retarging tickets optimistically to the next milestone.  If you are responsible for this ticket (either its reporter or owner) and don't believe you are likely to complete this ticket before the next release (8.7) please retarget this ticket's milestone to sage-pending or sage-wishlist.



---

archive/issue_events_353286.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-01-17T17:31:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27027#event-353286"
}
```



---

archive/issue_events_353287.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-01-17T17:31:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27027#event-353287"
}
```



---

archive/issue_comments_419620.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nMerge conflict",
    "created_at": "2019-01-17T17:31:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27027#issuecomment-419620",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:18" align="right">Comment 18</div>

Merge conflict



---

archive/issue_comments_419621.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nThe issue in `src/sage/combinat/cluster_algebra_quiver/quiver.py` was already fixed by #26985.\n\nSo I'm just reverting any changes to that file.",
    "created_at": "2019-01-23T21:23:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27027#issuecomment-419621",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:19" align="right">Comment 19</div>

The issue in `src/sage/combinat/cluster_algebra_quiver/quiver.py` was already fixed by #26985.

So I'm just reverting any changes to that file.



---

archive/issue_comments_419622.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a7eaec9a42dbdc6839fca59d2f42c8e1f07e6c07\">a7eaec9</a></td><td><code>Avoid sorting vertices in relabel()</code></td></tr></table>\n",
    "created_at": "2019-01-23T21:23:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27027#issuecomment-419622",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20" align="right">Comment 20</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a7eaec9a42dbdc6839fca59d2f42c8e1f07e6c07">a7eaec9</a></td><td><code>Avoid sorting vertices in relabel()</code></td></tr></table>




---

archive/issue_comments_419623.json:
```json
{
    "body": "Changed commit from **[ab00c17](https://github.com/sagemath/sagetrac-mirror/commit/ab00c175178632d7dd1835bc618fa08bf5253aa8)** to **[a7eaec9](https://github.com/sagemath/sagetrac-mirror/commit/a7eaec9a42dbdc6839fca59d2f42c8e1f07e6c07)**",
    "created_at": "2019-01-23T21:23:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27027#issuecomment-419623",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ab00c17](https://github.com/sagemath/sagetrac-mirror/commit/ab00c175178632d7dd1835bc618fa08bf5253aa8)** to **[a7eaec9](https://github.com/sagemath/sagetrac-mirror/commit/a7eaec9a42dbdc6839fca59d2f42c8e1f07e6c07)**



---

archive/issue_events_353288.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-01-23T21:24:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27027#event-353288"
}
```



---

archive/issue_events_353289.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-01-23T21:24:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27027#event-353289"
}
```



---

archive/issue_comments_419624.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nAt least one green patchbot, so I'm restoring positive review.",
    "created_at": "2019-01-24T08:26:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27027#issuecomment-419624",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:22" align="right">Comment 22</div>

At least one green patchbot, so I'm restoring positive review.



---

archive/issue_events_353290.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-01-24T08:26:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27027#event-353290"
}
```



---

archive/issue_events_353291.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-01-24T08:26:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27027#event-353291"
}
```



---

archive/issue_comments_419625.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nOK",
    "created_at": "2019-01-24T09:29:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27027#issuecomment-419625",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:23" align="right">Comment 23</div>

OK



---

archive/issue_events_353292.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-01-25T15:11:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27027#event-353292"
}
```



---

archive/issue_events_353293.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-01-25T15:11:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27027#event-353293"
}
```



---

archive/issue_comments_419626.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\n\n```\nsage -t --long src/sage/combinat/root_system/coxeter_matrix.py\n**********************************************************************\nFile \"src/sage/combinat/root_system/coxeter_matrix.py\", line 1041, in sage.combinat.root_system.coxeter_matrix.recognize_coxeter_type_from_matrix\nFailed example:\n    CoxeterMatrix(CoxeterType(['A',10,1]).coxeter_graph()).coxeter_type()\nExpected:\n    Coxeter type of ['A', 10, 1]\nGot:\n    Coxeter type of ['A', 10, 1] relabelled by {0: 2, 1: 3, 2: 4, 3: 5, 4: 6, 5: 7, 6: 8, 7: 9, 8: 10, 9: 0, 10: 1}\n**********************************************************************\n1 item had failures:\n   1 of  39 in sage.combinat.root_system.coxeter_matrix.recognize_coxeter_type_from_matrix\n    [181 tests, 1 failure, 0.51 s\n```",
    "created_at": "2019-01-25T15:11:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27027#issuecomment-419626",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:24" align="right">Comment 24</div>


```
sage -t --long src/sage/combinat/root_system/coxeter_matrix.py
**********************************************************************
File "src/sage/combinat/root_system/coxeter_matrix.py", line 1041, in sage.combinat.root_system.coxeter_matrix.recognize_coxeter_type_from_matrix
Failed example:
    CoxeterMatrix(CoxeterType(['A',10,1]).coxeter_graph()).coxeter_type()
Expected:
    Coxeter type of ['A', 10, 1]
Got:
    Coxeter type of ['A', 10, 1] relabelled by {0: 2, 1: 3, 2: 4, 3: 5, 4: 6, 5: 7, 6: 8, 7: 9, 8: 10, 9: 0, 10: 1}
**********************************************************************
1 item had failures:
   1 of  39 in sage.combinat.root_system.coxeter_matrix.recognize_coxeter_type_from_matrix
    [181 tests, 1 failure, 0.51 s
```



---

archive/issue_comments_419627.json:
```json
{
    "body": "Dependencies: **#27033**",
    "created_at": "2019-01-25T15:33:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27027#issuecomment-419627",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#27033**



---

archive/issue_comments_419628.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nThis failure is caused by interactions with #27029. It doesn't happen by itself.",
    "created_at": "2019-01-25T15:34:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27027#issuecomment-419628",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:26" align="right">Comment 26</div>

This failure is caused by interactions with #27029. It doesn't happen by itself.



---

archive/issue_comments_419629.json:
```json
{
    "body": "Changed dependencies from **#27033** to **#27029**",
    "created_at": "2019-01-25T15:58:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27027#issuecomment-419629",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#27033** to **#27029**



---

archive/issue_events_353294.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-01-25T16:42:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27027#event-353294"
}
```



---

archive/issue_events_353295.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-01-25T16:42:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27027#event-353295"
}
```



---

archive/issue_comments_419630.json:
```json
{
    "body": "Changed dependencies from **#27029** to none",
    "created_at": "2019-01-25T16:42:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27027#issuecomment-419630",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#27029** to none



---

archive/issue_comments_419631.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nI'm a bit lost here... at least, I don't have errors when testing this ticket alone.",
    "created_at": "2019-01-25T16:51:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27027#issuecomment-419631",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:29" align="right">Comment 29</div>

I'm a bit lost here... at least, I don't have errors when testing this ticket alone.



---

archive/issue_comments_419632.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nAs I said, it's because of this ticket together with #27029.",
    "created_at": "2019-01-25T21:09:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27027#issuecomment-419632",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:30" align="right">Comment 30</div>

As I said, it's because of this ticket together with #27029.



---

archive/issue_events_353296.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-01-27T10:54:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27027#event-353296"
}
```



---

archive/issue_events_353297.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "743804f01406a0e04b34f1dc00e81731de0be46e",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-01-27T10:54:36Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27027#event-353297"
}
```



---

archive/issue_comments_419633.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/graph_relabel___assumes_sortable_vertices](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/graph_relabel___assumes_sortable_vertices)** to **[a7eaec9](https://github.com/sagemath/sagetrac-mirror/commit/a7eaec9a42dbdc6839fca59d2f42c8e1f07e6c07)**",
    "created_at": "2019-01-27T10:54:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27027",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27027#issuecomment-419633",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/graph_relabel___assumes_sortable_vertices](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/graph_relabel___assumes_sortable_vertices)** to **[a7eaec9](https://github.com/sagemath/sagetrac-mirror/commit/a7eaec9a42dbdc6839fca59d2f42c8e1f07e6c07)**
