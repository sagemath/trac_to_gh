# Issue 27039: Add DESTDIR support for optional packages that use autotools

archive/issues_026802.json:
```json
{
    "body": "All these packages have standard autotools builds, so their transformation was mostly mechanical and trivial.  Only two slight exceptions:\n\n* The `configure` script for deformation is not actually generated by autoconf and does not support all the standard options (e.g. `--libdir`).  However, the rest of it is straightforward.\n\n* For mpfrcx we also add an `spkg-legacy-uninstall` script.\n\nI've tested all of these and confirmed that they still build properly, and that the files listed in their file manifests look logical, and doctests pass for me on Linux. There should really be no difference for these packages compared to how they were previously built and installed.\n\nKeywords: destdir 4ti2 bliss cbc csdp deformation fricas gp2c igraph latte_int libogg lidia lrslib mpfrcx sirocco tdlib\n\nReviewer: Fr\u00e9d\u00e9ric Chapoton\n\nAuthor: Erik Bray\n\nBranch: 1747a4c591676b9166ca47b1ae6c6a2d721bd52e\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/27039\n\n",
    "closed_at": "2019-01-24T18:17:37Z",
    "created_at": "2019-01-10T13:37:19Z",
    "labels": [
        "component: packages: optional"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.7",
    "title": "Add DESTDIR support for optional packages that use autotools",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27039",
    "user": "https://github.com/embray"
}
```
All these packages have standard autotools builds, so their transformation was mostly mechanical and trivial.  Only two slight exceptions:

* The `configure` script for deformation is not actually generated by autoconf and does not support all the standard options (e.g. `--libdir`).  However, the rest of it is straightforward.

* For mpfrcx we also add an `spkg-legacy-uninstall` script.

I've tested all of these and confirmed that they still build properly, and that the files listed in their file manifests look logical, and doctests pass for me on Linux. There should really be no difference for these packages compared to how they were previously built and installed.

Keywords: destdir 4ti2 bliss cbc csdp deformation fricas gp2c igraph latte_int libogg lidia lrslib mpfrcx sirocco tdlib

Reviewer: Frédéric Chapoton

Author: Erik Bray

Branch: 1747a4c591676b9166ca47b1ae6c6a2d721bd52e

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/27039





---

archive/issue_comments_521580.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,4 +4,4 @@\n \n * For mpfrcx we also add an `spkg-legacy-uninstall` script.\n \n-I've tested all of these and confirmed that they still build properly, and that the files listed in their file manifests look logical.  Still running the doctests to be sure, but there should really be no difference for these packages compared to how they were previously built and installed.\n+I've tested all of these and confirmed that they still build properly, and that the files listed in their file manifests look logical, and doctests pass for me on Linux. There should really be no difference for these packages compared to how they were previously built and installed.\n``````\n",
    "created_at": "2019-01-10T15:12:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27039#issuecomment-521580",
    "user": "https://github.com/embray"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,4 +4,4 @@
 
 * For mpfrcx we also add an `spkg-legacy-uninstall` script.
 
-I've tested all of these and confirmed that they still build properly, and that the files listed in their file manifests look logical.  Still running the doctests to be sure, but there should really be no difference for these packages compared to how they were previously built and installed.
+I've tested all of these and confirmed that they still build properly, and that the files listed in their file manifests look logical, and doctests pass for me on Linux. There should really be no difference for these packages compared to how they were previously built and installed.
``````




---

archive/issue_comments_521581.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-01-10T15:12:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27039#issuecomment-521581",
    "user": "https://github.com/embray"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_521582.json:
```json
{
    "body": "<a id='comment:2'></a>\nIn `tdlib`, you added `sdh_make` where there was no `make`. Is this ok ?\n\nOtherwise, positive review",
    "created_at": "2019-01-15T19:00:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27039#issuecomment-521582",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:2'></a>
In `tdlib`, you added `sdh_make` where there was no `make`. Is this ok ?

Otherwise, positive review



---

archive/issue_comments_521583.json:
```json
{
    "body": "<a id='comment:3'></a>\nReplying to [chapoton](#comment%3A2):\n> In `tdlib`, you added `sdh_make` where there was no `make`. Is this ok ?\n> \n> Otherwise, positive review\n\n\nI double-checked on this just to be sure, but it is indeed a standard automake package so it is harmless to add the make call, and it looks more \"standard\" without it.  The fact is, this package is just a collection of headers, so there is nothing to \"build\" with a `make` call and it's possible to just skip straight to `make install`.  But should that change for any reason at least our bases are covered this way.  Good catch though--it wasn't obvious.",
    "created_at": "2019-01-16T10:26:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27039#issuecomment-521583",
    "user": "https://github.com/embray"
}
```

<a id='comment:3'></a>
Replying to [chapoton](#comment%3A2):
> In `tdlib`, you added `sdh_make` where there was no `make`. Is this ok ?
> 
> Otherwise, positive review


I double-checked on this just to be sure, but it is indeed a standard automake package so it is harmless to add the make call, and it looks more "standard" without it.  The fact is, this package is just a collection of headers, so there is nothing to "build" with a `make` call and it's possible to just skip straight to `make install`.  But should that change for any reason at least our bases are covered this way.  Good catch though--it wasn't obvious.



---

archive/issue_comments_521584.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-01-16T12:38:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27039#issuecomment-521584",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_521585.json:
```json
{
    "body": "<a id='comment:4'></a>\nok, thanks",
    "created_at": "2019-01-16T12:38:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27039#issuecomment-521585",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:4'></a>
ok, thanks



---

archive/issue_comments_521586.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Fr\u00e9d\u00e9ric Chapoton\"",
    "created_at": "2019-01-16T12:38:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27039#issuecomment-521586",
    "user": "https://github.com/fchapoton"
}
```

Changing reviewer from "" to "Frédéric Chapoton"



---

archive/issue_comments_521587.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-01-24T18:17:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27039#issuecomment-521587",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_076181.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-01-24T18:17:37Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27039",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27039#event-76181"
}
```



---

archive/issue_comments_521588.json:
```json
{
    "body": "Changing branch from \"u/embray/build/destdir-optional-autotools\" to \"1747a4c591676b9166ca47b1ae6c6a2d721bd52e\"",
    "created_at": "2019-01-24T18:17:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27039#issuecomment-521588",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/embray/build/destdir-optional-autotools" to "1747a4c591676b9166ca47b1ae6c6a2d721bd52e"



---

archive/issue_comments_521589.json:
```json
{
    "body": "<a id='comment:6'></a>\nGreat to see this merged.  Thanks!",
    "created_at": "2019-01-31T12:39:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27039#issuecomment-521589",
    "user": "https://github.com/embray"
}
```

<a id='comment:6'></a>
Great to see this merged.  Thanks!



---

archive/issue_comments_521590.json:
```json
{
    "body": "Changing commit from \"1747a4c591676b9166ca47b1ae6c6a2d721bd52e\" to \"\"",
    "created_at": "2019-01-31T12:39:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27039",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27039#issuecomment-521590",
    "user": "https://github.com/embray"
}
```

Changing commit from "1747a4c591676b9166ca47b1ae6c6a2d721bd52e" to ""
