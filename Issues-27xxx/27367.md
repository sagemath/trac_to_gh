# Issue 27367: Upgrade to mpfrcx 0.5

archive/issues_027130.json:
```json
{
    "assignees": [],
    "body": "This ticket is to upgrade to mpfrcx 0.5.\n\n**Tarball**:\n\n- http://www.multiprecision.org/downloads/mpfrcx-0.5.tar.gz\n\nThe upgrade fixes a problem with #27212, which does not work with mpfrcx 0.4.2.\n\nWe have not upgraded since introducing mpfrcx 0.4.2 as an optional package in #11806.\n\n\nCC:  @slel @embray @kiwifb\n\nComponent: **packages: optional**\n\nKeywords: **upgrade, mpfrcx**\n\nAuthor: **Dima Pasechnik**\n\nBranch: **[`7ac6cf0`](https://github.com/sagemath/sagetrac-mirror/commit/7ac6cf02adc32aeb41979f28210ebce0c1e19b0a)**\n\nReviewer: **Travis Scrimshaw**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/27367_\n\n",
    "closed_at": "2019-03-03T22:38:08Z",
    "created_at": "2019-02-26T22:31:13Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20optional",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade to mpfrcx 0.5",
    "type": "issue",
    "updated_at": "2019-03-05T16:15:01Z",
    "url": "https://github.com/sagemath/sage/issues/27367",
    "user": "https://github.com/dimpase"
}
```
This ticket is to upgrade to mpfrcx 0.5.

**Tarball**:

- http://www.multiprecision.org/downloads/mpfrcx-0.5.tar.gz

The upgrade fixes a problem with #27212, which does not work with mpfrcx 0.4.2.

We have not upgraded since introducing mpfrcx 0.4.2 as an optional package in #11806.


CC:  @slel @embray @kiwifb

Component: **packages: optional**

Keywords: **upgrade, mpfrcx**

Author: **Dima Pasechnik**

Branch: **[`7ac6cf0`](https://github.com/sagemath/sagetrac-mirror/commit/7ac6cf02adc32aeb41979f28210ebce0c1e19b0a)**

Reviewer: **Travis Scrimshaw**

_Issue created by migration from https://trac.sagemath.org/ticket/27367_





---

archive/issue_events_373029.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-02-26T22:31:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27367",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27367#event-373029"
}
```



---

archive/issue_events_373030.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-02-26T22:31:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27367",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20optional",
    "label_color": "0000b0",
    "label_name": "c: packages: optional",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27367#event-373030"
}
```



---

archive/issue_events_373031.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-02-26T22:31:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27367",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27367#event-373031"
}
```



---

archive/issue_events_373032.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-02-26T22:31:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27367",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27367#event-373032"
}
```



---

archive/issue_comments_423273.json:
```json
{
    "body": "Branch: **[u/dimpase/packages/mpfrcx05](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/mpfrcx05)**",
    "created_at": "2019-02-26T22:45:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27367#issuecomment-423273",
    "user": "https://github.com/dimpase"
}
```

Branch: **[u/dimpase/packages/mpfrcx05](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/mpfrcx05)**



---

archive/issue_comments_423274.json:
```json
{
    "body": "Commit: **[`7ac6cf0`](https://github.com/sagemath/sagetrac-mirror/commit/7ac6cf02adc32aeb41979f28210ebce0c1e19b0a)**",
    "created_at": "2019-02-26T22:45:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27367#issuecomment-423274",
    "user": "https://github.com/dimpase"
}
```

Commit: **[`7ac6cf0`](https://github.com/sagemath/sagetrac-mirror/commit/7ac6cf02adc32aeb41979f28210ebce0c1e19b0a)**



---

archive/issue_comments_423275.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nneeds testing with Sage-supplied GMP/MPIR (works with #27212 - system GMP)\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ac6cf02adc32aeb41979f28210ebce0c1e19b0a\"><code>7ac6cf0</code></a></td><td><code>update mpfrcx to version 0.5</code></td></tr></table>\n",
    "created_at": "2019-02-26T22:45:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27367#issuecomment-423275",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:1" align="right">comment:1</div>

needs testing with Sage-supplied GMP/MPIR (works with #27212 - system GMP)

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ac6cf02adc32aeb41979f28210ebce0c1e19b0a"><code>7ac6cf0</code></a></td><td><code>update mpfrcx to version 0.5</code></td></tr></table>




---

archive/issue_comments_423276.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nAdding keyword \"upgrade\" so the release manager knows to upload the tarball.",
    "created_at": "2019-02-27T12:00:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27367#issuecomment-423276",
    "user": "https://github.com/slel"
}
```

<div id="comment:2" align="right">comment:2</div>

Adding keyword "upgrade" so the release manager knows to upload the tarball.



---

archive/issue_comments_423277.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,10 @@\n-tarball: http://www.multiprecision.org/downloads/mpfrcx-0.5.tar.gz\n+This ticket is to upgrade to mpfrcx 0.5.\n \n-it fixes a problem with #27212, which does not work with the present version.\n+**Tarball**:\n+\n+- http://www.multiprecision.org/downloads/mpfrcx-0.5.tar.gz\n+\n+The upgrade fixes a problem with #27212, which does not work with mpfrcx 0.4.2.\n+\n+We have not upgraded since introducing mpfrcx 0.4.2 as an optional package in #11806.\n+\n``````\n",
    "created_at": "2019-02-27T12:00:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27367#issuecomment-423277",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,10 @@
-tarball: http://www.multiprecision.org/downloads/mpfrcx-0.5.tar.gz
+This ticket is to upgrade to mpfrcx 0.5.
 
-it fixes a problem with #27212, which does not work with the present version.
+**Tarball**:
+
+- http://www.multiprecision.org/downloads/mpfrcx-0.5.tar.gz
+
+The upgrade fixes a problem with #27212, which does not work with mpfrcx 0.4.2.
+
+We have not upgraded since introducing mpfrcx 0.4.2 as an optional package in #11806.
+
``````




---

archive/issue_comments_423278.json:
```json
{
    "body": "Changed keywords from none to **upgrade, mpfrcx**",
    "created_at": "2019-02-27T12:00:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27367#issuecomment-423278",
    "user": "https://github.com/slel"
}
```

Changed keywords from none to **upgrade, mpfrcx**



---

archive/issue_events_373033.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2019-02-27T12:00:17Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/27367",
    "title_is": "Upgrade to mpfrcx 0.5",
    "title_was": "update mpfrcx to version 0.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27367#event-373033"
}
```



---

archive/issue_events_373034.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-02-27T12:08:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27367",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27367#event-373034"
}
```



---

archive/issue_comments_423279.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI tested this a bit with `SAGE_CHECK=yes`, looks good.\n(tested on OSX 10.13 with clang, on Ubuntus, on Fedora...)",
    "created_at": "2019-02-27T12:09:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27367#issuecomment-423279",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:4" align="right">comment:4</div>

I tested this a bit with `SAGE_CHECK=yes`, looks good.
(tested on OSX 10.13 with clang, on Ubuntus, on Fedora...)



---

archive/issue_comments_423280.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nLGTM. May the buildbots smile upon you. `:P`",
    "created_at": "2019-02-28T22:21:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27367#issuecomment-423280",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:7" align="right">comment:7</div>

LGTM. May the buildbots smile upon you. `:P`



---

archive/issue_events_373035.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2019-02-28T22:21:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27367",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27367#event-373035"
}
```



---

archive/issue_events_373036.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2019-02-28T22:21:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27367",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27367#event-373036"
}
```



---

archive/issue_comments_423281.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2019-02-28T22:21:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27367#issuecomment-423281",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_events_373037.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-03-03T22:38:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27367",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27367#event-373037"
}
```



---

archive/issue_events_373038.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "28e01681308c31af48fe8bd2906a74a75ba8cebe",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-03-03T22:38:08Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27367",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27367#event-373038"
}
```



---

archive/issue_comments_423282.json:
```json
{
    "body": "Changed branch from **[u/dimpase/packages/mpfrcx05](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/mpfrcx05)** to **[`7ac6cf0`](https://github.com/sagemath/sagetrac-mirror/commit/7ac6cf02adc32aeb41979f28210ebce0c1e19b0a)**",
    "created_at": "2019-03-03T22:38:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27367#issuecomment-423282",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/dimpase/packages/mpfrcx05](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/mpfrcx05)** to **[`7ac6cf0`](https://github.com/sagemath/sagetrac-mirror/commit/7ac6cf02adc32aeb41979f28210ebce0c1e19b0a)**



---

archive/issue_comments_423283.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI would really like to get the Cygwin buildbot working again but I'll never get there if we keep merging package upgrades without giving me an opportunity to test them...",
    "created_at": "2019-03-04T16:13:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27367#issuecomment-423283",
    "user": "https://github.com/embray"
}
```

<div id="comment:9" align="right">comment:9</div>

I would really like to get the Cygwin buildbot working again but I'll never get there if we keep merging package upgrades without giving me an opportunity to test them...



---

archive/issue_comments_423284.json:
```json
{
    "body": "Changed commit from **[`7ac6cf0`](https://github.com/sagemath/sagetrac-mirror/commit/7ac6cf02adc32aeb41979f28210ebce0c1e19b0a)** to none",
    "created_at": "2019-03-04T16:13:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27367#issuecomment-423284",
    "user": "https://github.com/embray"
}
```

Changed commit from **[`7ac6cf0`](https://github.com/sagemath/sagetrac-mirror/commit/7ac6cf02adc32aeb41979f28210ebce0c1e19b0a)** to none



---

archive/issue_comments_423285.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\ntell me how to set up a Windows buildbot. I tried using GCE running Windows, but it's just hopeless...",
    "created_at": "2019-03-04T16:29:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27367#issuecomment-423285",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:10" align="right">comment:10</div>

tell me how to set up a Windows buildbot. I tried using GCE running Windows, but it's just hopeless...



---

archive/issue_comments_423286.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nWe already have one, but it was previously broken due to something (probably openblas) causing the docbuild to hang, and it's just never been working since then: http://build.sagemath.org/#/builders/37",
    "created_at": "2019-03-04T16:44:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27367#issuecomment-423286",
    "user": "https://github.com/embray"
}
```

<div id="comment:11" align="right">comment:11</div>

We already have one, but it was previously broken due to something (probably openblas) causing the docbuild to hang, and it's just never been working since then: http://build.sagemath.org/#/builders/37



---

archive/issue_comments_423287.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nSeems like the Cygwin buildbot is in slightly better shape than I thought?  It is *building* successfully, but then when it gets to running the doctests, it bizarrely exits with error code 1 immediately:\n\nhttp://build.sagemath.org/#/builders/37/builds/15/steps/8/logs/stdio\n\nThis despite being perfectly able to run the tests manually.  When run from buildbot it just fails immediately.",
    "created_at": "2019-03-04T17:11:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27367#issuecomment-423287",
    "user": "https://github.com/embray"
}
```

<div id="comment:12" align="right">comment:12</div>

Seems like the Cygwin buildbot is in slightly better shape than I thought?  It is *building* successfully, but then when it gets to running the doctests, it bizarrely exits with error code 1 immediately:

http://build.sagemath.org/#/builders/37/builds/15/steps/8/logs/stdio

This despite being perfectly able to run the tests manually.  When run from buildbot it just fails immediately.



---

archive/issue_comments_423288.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\na usual Cygwin/PTY related headache? Random googling only finds netbeans-related stuff, and I don't even know what netbeans is. https://stackoverflow.com/questions/27284742/unable-to-start-pty-process",
    "created_at": "2019-03-04T17:34:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27367#issuecomment-423288",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:13" align="right">comment:13</div>

a usual Cygwin/PTY related headache? Random googling only finds netbeans-related stuff, and I don't even know what netbeans is. https://stackoverflow.com/questions/27284742/unable-to-start-pty-process



---

archive/issue_comments_423289.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@embray](#comment%3A11):\n> We already have one, but it was previously broken due to something (probably openblas) causing the docbuild to hang, and it's just never been working since then: http://build.sagemath.org/#/builders/37\n\nSorry Eric, I thought that buildbot was there to catch when upgrades like this break things.",
    "created_at": "2019-03-04T21:46:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27367#issuecomment-423289",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@embray](#comment%3A11):
> We already have one, but it was previously broken due to something (probably openblas) causing the docbuild to hang, and it's just never been working since then: http://build.sagemath.org/#/builders/37

Sorry Eric, I thought that buildbot was there to catch when upgrades like this break things.



---

archive/issue_comments_423290.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nIt's ok, it's probably fine.  Turns out the Cygwin buildbot has at least been doing *builds* just not running the tests.  Which is not to say something couldn't have still broken with this, but at least we know it builds.  I think Volker just isn't checking that buildbot since it still isn't stable.\n\nI'm going to test this locally ASAP but I don't think it's likely to cause any headaches.",
    "created_at": "2019-03-05T16:15:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27367#issuecomment-423290",
    "user": "https://github.com/embray"
}
```

<div id="comment:15" align="right">comment:15</div>

It's ok, it's probably fine.  Turns out the Cygwin buildbot has at least been doing *builds* just not running the tests.  Which is not to say something couldn't have still broken with this, but at least we know it builds.  I think Volker just isn't checking that buildbot since it still isn't stable.

I'm going to test this locally ASAP but I don't think it's likely to cause any headaches.
