# Issue 27319: Upgrade to Cryptominisat 5.6.8

archive/issues_027082.json:
```json
{
    "assignees": [],
    "body": "This ticket is to upgrade to Cryptominisat 5.6.8.\n\n**Tarball** (to be renamed cryptominisat-5.6.8.tar.gz):\n\n- \u200bhttps://github.com/msoos/cryptominisat/archive/5.6.8.tar.gz\n\nOur last upgrade was to Cryptominisat 5.6.6 in #25480.\n\n**Release notes** (from the\n[Cryptominisat releases](https://github.com/msoos/cryptominisat/releases)\npage on GitHub):\n\n- Cryptominisat 5.6.7\n    > Some fixes and misc improvements. Also, a slightly changed naming\n    > for the independent variables. They are really sampling variables and\n    > so the interface has been renamed accordingly.\n- Cryptominisat 5.6.8\n    > Fixing Windows build\n\n\nCC:  @embray @jdemeyer @saraedum @slel tmonteil @videlec @orlitzky\n\nKeywords: **upgrade, cryptominisat**\n\nBranch/Commit: **[d219646](https://github.com/sagemath/sagetrac-mirror/commit/d219646cd4dec96a1b4e53cce1f14aa9905377c3)**\n\nReviewer: **Thierry Monteil**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/27319_\n\n",
    "closed_at": "2019-07-10T01:31:26Z",
    "created_at": "2019-02-19T08:44:20Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20optional",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.9",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade to Cryptominisat 5.6.8",
    "type": "issue",
    "updated_at": "2019-07-10T01:31:26Z",
    "url": "https://github.com/sagemath/sage/issues/27319",
    "user": "https://github.com/slel"
}
```
This ticket is to upgrade to Cryptominisat 5.6.8.

**Tarball** (to be renamed cryptominisat-5.6.8.tar.gz):

- ​https://github.com/msoos/cryptominisat/archive/5.6.8.tar.gz

Our last upgrade was to Cryptominisat 5.6.6 in #25480.

**Release notes** (from the
[Cryptominisat releases](https://github.com/msoos/cryptominisat/releases)
page on GitHub):

- Cryptominisat 5.6.7
    > Some fixes and misc improvements. Also, a slightly changed naming
    > for the independent variables. They are really sampling variables and
    > so the interface has been renamed accordingly.
- Cryptominisat 5.6.8
    > Fixing Windows build


CC:  @embray @jdemeyer @saraedum @slel tmonteil @videlec @orlitzky

Keywords: **upgrade, cryptominisat**

Branch/Commit: **[d219646](https://github.com/sagemath/sagetrac-mirror/commit/d219646cd4dec96a1b4e53cce1f14aa9905377c3)**

Reviewer: **Thierry Monteil**

Author: **Frédéric Chapoton**

_Issue created by migration from https://trac.sagemath.org/ticket/27319_





---

archive/issue_events_357202.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2019-02-19T08:44:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27319#event-357202"
}
```



---

archive/issue_events_357203.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2019-02-19T08:44:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27319#event-357203"
}
```



---

archive/issue_events_357204.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-19T15:38:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20optional",
    "label_color": "000080",
    "label_name": "component: packages: optional",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27319#event-357204"
}
```



---

archive/issue_events_357205.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2019-02-19T21:03:42Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "title_is": "Upgrade to Cryptominisat 5.6.8",
    "title_was": "Upgrade to cryptominisat 5.6.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27319#event-357205"
}
```



---

archive/issue_comments_425204.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,19 @@\n-This ticket is to upgrade to cryptominisat 5.6.7.\n+This ticket is to upgrade to Cryptominisat 5.6.8.\n \n-- **Tarball**: \u200bhttps://github.com/msoos/cryptominisat/archive/5.6.7.tar.gz\n+**Tarball** (to be renamed cryptominisat-5.6.8.tar.gz):\n \n-(to be renamed cryptominisat-5.6.7.tar.gz)\n+- \u200bhttps://github.com/msoos/cryptominisat/archive/5.6.8.tar.gz\n+\n+Our last upgrade was to Cryptominisat 5.6.6 in #25480.\n+\n+**Release notes** (from the\n+[Cryptominisat releases](https://github.com/msoos/cryptominisat/releases)\n+page on GitHub):\n+\n+- Cryptominisat 5.6.7\n+    > Some fixes and misc improvements. Also, a slightly changed naming\n+    > for the independent variables. They are really sampling variables and\n+    > so the interface has been renamed accordingly.\n+- Cryptominisat 5.6.8\n+    > Fixing Windows build\n+\n``````\n",
    "created_at": "2019-02-19T21:03:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27319#issuecomment-425204",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,19 @@
-This ticket is to upgrade to cryptominisat 5.6.7.
+This ticket is to upgrade to Cryptominisat 5.6.8.
 
-- **Tarball**: ​https://github.com/msoos/cryptominisat/archive/5.6.7.tar.gz
+**Tarball** (to be renamed cryptominisat-5.6.8.tar.gz):
 
-(to be renamed cryptominisat-5.6.7.tar.gz)
+- ​https://github.com/msoos/cryptominisat/archive/5.6.8.tar.gz
+
+Our last upgrade was to Cryptominisat 5.6.6 in #25480.
+
+**Release notes** (from the
+[Cryptominisat releases](https://github.com/msoos/cryptominisat/releases)
+page on GitHub):
+
+- Cryptominisat 5.6.7
+    > Some fixes and misc improvements. Also, a slightly changed naming
+    > for the independent variables. They are really sampling variables and
+    > so the interface has been renamed accordingly.
+- Cryptominisat 5.6.8
+    > Fixing Windows build
+
``````




---

archive/issue_events_357206.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27319#event-357206"
}
```



---

archive/issue_events_357207.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27319#event-357207"
}
```



---

archive/issue_comments_425205.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nTicket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)",
    "created_at": "2019-03-25T10:56:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27319#issuecomment-425205",
    "user": "https://github.com/embray"
}
```

<a id='comment:3'>Comment 3:</a>
Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)



---

archive/issue_comments_425206.json:
```json
{
    "body": "Branch: **[u/chapoton/27319](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/27319)**",
    "created_at": "2019-05-25T05:57:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27319#issuecomment-425206",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[u/chapoton/27319](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/27319)**



---

archive/issue_comments_425207.json:
```json
{
    "body": "Author: **Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2019-05-25T05:57:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27319#issuecomment-425207",
    "user": "https://github.com/fchapoton"
}
```

Author: **Frédéric Chapoton**



---

archive/issue_events_357208.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-05-25T05:57:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27319#event-357208"
}
```



---

archive/issue_comments_425208.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a89fb243abcb77535ca5966944e0492739866e2\">3a89fb2</a></td><td><code>update cryptominisat to 5.6.8</code></td></tr></table>\n",
    "created_at": "2019-05-25T05:57:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27319#issuecomment-425208",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:4'>Comment 4:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a89fb243abcb77535ca5966944e0492739866e2">3a89fb2</a></td><td><code>update cryptominisat to 5.6.8</code></td></tr></table>




---

archive/issue_comments_425209.json:
```json
{
    "body": "Commit: **[3a89fb2](https://github.com/sagemath/sagetrac-mirror/commit/3a89fb243abcb77535ca5966944e0492739866e2)**",
    "created_at": "2019-05-25T05:57:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27319#issuecomment-425209",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[3a89fb2](https://github.com/sagemath/sagetrac-mirror/commit/3a89fb243abcb77535ca5966944e0492739866e2)**



---

archive/issue_comments_425210.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nHere is a branch.",
    "created_at": "2019-05-25T05:57:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27319#issuecomment-425210",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'>Comment 5:</a>
Here is a branch.



---

archive/issue_comments_425211.json:
```json
{
    "body": "Reviewer: **Thierry Monteil**",
    "created_at": "2019-05-27T13:40:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27319#issuecomment-425211",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Reviewer: **Thierry Monteil**



---

archive/issue_comments_425212.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nby the way, any idea on the following failure of the arando patchbot ?\n\n```\nsage -t --long src/sage/sat/boolean_polynomials.py\n**********************************************************************\nFile \"src/sage/sat/boolean_polynomials.py\", line 146, in sage.sat.boolean_polynomials.solve\nFailed example:\n    len(sls_aes)                                                                      # optional - cryptominisat, long time\nExpected:\n    256\nGot:\n    18\n**********************************************************************\n1 item had failures:\n   1 of  41 in sage.sat.boolean_polynomials.solve\n    [46 tests, 1 failure, 186.16 s]\n----------------------------------------------------------------------\nsage -t --long src/sage/sat/boolean_polynomials.py  # 1 doctest failed\n```",
    "created_at": "2019-05-27T14:40:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27319#issuecomment-425212",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:7'>Comment 7:</a>
by the way, any idea on the following failure of the arando patchbot ?

```
sage -t --long src/sage/sat/boolean_polynomials.py
**********************************************************************
File "src/sage/sat/boolean_polynomials.py", line 146, in sage.sat.boolean_polynomials.solve
Failed example:
    len(sls_aes)                                                                      # optional - cryptominisat, long time
Expected:
    256
Got:
    18
**********************************************************************
1 item had failures:
   1 of  41 in sage.sat.boolean_polynomials.solve
    [46 tests, 1 failure, 186.16 s]
----------------------------------------------------------------------
sage -t --long src/sage/sat/boolean_polynomials.py  # 1 doctest failed
```



---

archive/issue_comments_425213.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nReplying to [@fchapoton](#comment%3A7):\n> by the way, any idea on the following failure of the arando patchbot ?\n> \n> ```\n> sage -t --long src/sage/sat/boolean_polynomials.py\n> **********************************************************************\n> File \"src/sage/sat/boolean_polynomials.py\", line 146, in sage.sat.boolean_polynomials.solve\n> Failed example:\n>     len(sls_aes)                                                                      # optional - cryptominisat, long time\n> Expected:\n>     256\n> Got:\n>     18\n> **********************************************************************\n> 1 item had failures:\n>    1 of  41 in sage.sat.boolean_polynomials.solve\n>     [46 tests, 1 failure, 186.16 s]\n> ----------------------------------------------------------------------\n> sage -t --long src/sage/sat/boolean_polynomials.py  # 1 doctest failed\n> ```\n\nI have a similar issue on a 32-bit VM. We should inspect further.",
    "created_at": "2019-05-28T19:57:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27319#issuecomment-425213",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<a id='comment:8'>Comment 8:</a>
Replying to [@fchapoton](#comment%3A7):
> by the way, any idea on the following failure of the arando patchbot ?
> 
> ```
> sage -t --long src/sage/sat/boolean_polynomials.py
> **********************************************************************
> File "src/sage/sat/boolean_polynomials.py", line 146, in sage.sat.boolean_polynomials.solve
> Failed example:
>     len(sls_aes)                                                                      # optional - cryptominisat, long time
> Expected:
>     256
> Got:
>     18
> **********************************************************************
> 1 item had failures:
>    1 of  41 in sage.sat.boolean_polynomials.solve
>     [46 tests, 1 failure, 186.16 s]
> ----------------------------------------------------------------------
> sage -t --long src/sage/sat/boolean_polynomials.py  # 1 doctest failed
> ```

I have a similar issue on a 32-bit VM. We should inspect further.



---

archive/issue_events_357209.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2019-05-28T19:57:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27319#event-357209"
}
```



---

archive/issue_events_357210.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2019-05-28T19:57:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27319#event-357210"
}
```



---

archive/issue_comments_425214.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nI re-checked: the problem was already here on 5.6.6, but not on 5.0.1.",
    "created_at": "2019-05-28T20:32:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27319#issuecomment-425214",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<a id='comment:9'>Comment 9:</a>
I re-checked: the problem was already here on 5.6.6, but not on 5.0.1.



---

archive/issue_comments_425215.json:
```json
{
    "body": "Changed commit from **[3a89fb2](https://github.com/sagemath/sagetrac-mirror/commit/3a89fb243abcb77535ca5966944e0492739866e2)** to **[d219646](https://github.com/sagemath/sagetrac-mirror/commit/d219646cd4dec96a1b4e53cce1f14aa9905377c3)**",
    "created_at": "2019-06-14T09:21:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27319#issuecomment-425215",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3a89fb2](https://github.com/sagemath/sagetrac-mirror/commit/3a89fb243abcb77535ca5966944e0492739866e2)** to **[d219646](https://github.com/sagemath/sagetrac-mirror/commit/d219646cd4dec96a1b4e53cce1f14aa9905377c3)**



---

archive/issue_comments_425216.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d219646cd4dec96a1b4e53cce1f14aa9905377c3\">d219646</a></td><td><code>update cryptominisat to 5.6.8</code></td></tr></table>\n",
    "created_at": "2019-06-14T09:21:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27319#issuecomment-425216",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:10'>Comment 10:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d219646cd4dec96a1b4e53cce1f14aa9905377c3">d219646</a></td><td><code>update cryptominisat to 5.6.8</code></td></tr></table>




---

archive/issue_comments_425217.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nI have made the necessary changes for python3-compatible doctests (because one cannot compare dicts in python3)\n\nI have also replaced `eqs = map(R, eqs)` by list comprehension in the line before the failing doctest in `src/sage/sat/boolean_polynomials.py`.",
    "created_at": "2019-06-14T09:22:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27319#issuecomment-425217",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:11'>Comment 11:</a>
I have made the necessary changes for python3-compatible doctests (because one cannot compare dicts in python3)

I have also replaced `eqs = map(R, eqs)` by list comprehension in the line before the failing doctest in `src/sage/sat/boolean_polynomials.py`.



---

archive/issue_comments_425218.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nTickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).",
    "created_at": "2019-06-14T14:50:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27319#issuecomment-425218",
    "user": "https://github.com/embray"
}
```

<a id='comment:12'>Comment 12:</a>
Tickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).



---

archive/issue_events_357211.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:50:27Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27319#event-357211"
}
```



---

archive/issue_events_357212.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:50:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27319#event-357212"
}
```



---

archive/issue_comments_425219.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nThe result of the failing doctest on arando seems to be random, varying from 16 to 25.",
    "created_at": "2019-06-17T09:24:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27319#issuecomment-425219",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:13'>Comment 13:</a>
The result of the failing doctest on arando seems to be random, varying from 16 to 25.



---

archive/issue_comments_425220.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nThierry, or somebody else, please have a look. This contains some changes that are required for py3-compatibility !\n\nMaybe we can still update, even if this does not fix the 32-bit doctest. But maybe it does ?",
    "created_at": "2019-06-27T09:44:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27319#issuecomment-425220",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:14'>Comment 14:</a>
Thierry, or somebody else, please have a look. This contains some changes that are required for py3-compatibility !

Maybe we can still update, even if this does not fix the 32-bit doctest. But maybe it does ?



---

archive/issue_events_357213.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-06-27T09:44:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27319#event-357213"
}
```



---

archive/issue_events_357214.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-06-27T09:44:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27319#event-357214"
}
```



---

archive/issue_comments_425221.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nDamn, now i have an issue building cryptominisat on 64 standard machine:\n\n```\n[ 94%] Linking CXX executable ../cryptominisat5\ncd /opt/sagemath/sage-source/local/var/tmp/sage/build/cryptominisat-5.6.8/src/cmsat5-src && /opt/sagemath/sage-source/local/bin/cmake -E cmake_link_script CMakeFiles/cryptominisat5-bin.dir/link.txt --verbose=ON\n/usr/bin/g++  -std=gnu++11   -mtune=native -Wall -Wextra -Wunused -Wsign-compare -fno-omit-frame-pointer -Wtype-limits -Wuninitialized -Wno-deprecated -Wstrict-aliasing -Wpointer-arith -Wpointer-arith -Wformat-nonliteral -Winit-self -Wparentheses -Wunreachable-code -ggdb3 -Wlogical-op -Wnull-dereference -Wdouble-promotion -Wshadow -Wformat=2 -pedantic   -L/opt/sagemath/sage-source/local/lib -Wl,-rpath,/opt/sagemath/sage-source/local/lib -O2 -Wl,--discard-all -Wl,--build-id=sha1 -rdynamic CMakeFiles/cryptominisat5-bin.dir/main.cpp.o CMakeFiles/cryptominisat5-bin.dir/main_exe.cpp.o CMakeFiles/cryptominisat5-bin.dir/signalcode.cpp.o  -o ../cryptominisat5 -Wl,-rpath,/opt/sagemath/sage-source/local/var/tmp/sage/build/cryptominisat-5.6.8/src/lib: ../lib/libcryptominisat5.so.5.6 /usr/lib/x86_64-linux-gnu/libz.so /usr/lib/x86_64-linux-gnu/libboost_program_options.so /opt/sagemath/sage-source/local/lib/libm4ri.so -pthread \n/opt/sagemath/sage-source/local/lib/libpng16.so.16: undefined reference to `inflateValidate@ZLIB_1.2.9'\ncollect2: error: ld returned 1 exit status\ncmsat5-src/CMakeFiles/cryptominisat5-bin.dir/build.make:117: recipe for target 'cryptominisat5' failed\nmake[4]: *** [cryptominisat5] Error 1\nmake[4]: Leaving directory '/opt/sagemath/sage-source/local/var/tmp/sage/build/cryptominisat-5.6.8/src'\nCMakeFiles/Makefile2:197: recipe for target 'cmsat5-src/CMakeFiles/cryptominisat5-bin.dir/all' failed\nmake[3]: *** [cmsat5-src/CMakeFiles/cryptominisat5-bin.dir/all] Error 2\nmake[3]: Leaving directory '/opt/sagemath/sage-source/local/var/tmp/sage/build/cryptominisat-5.6.8/src'\nMakefile:129: recipe for target 'all' failed\nmake[2]: *** [all] Error 2\nmake[2]: Leaving directory '/opt/sagemath/sage-source/local/var/tmp/sage/build/cryptominisat-5.6.8/src'\n********************************************************************************\nError building cryptominisat-5.6.8\n```\n\nLet me rebuild `libpng` in case.",
    "created_at": "2019-06-28T11:42:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27319#issuecomment-425221",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<a id='comment:15'>Comment 15:</a>
Damn, now i have an issue building cryptominisat on 64 standard machine:

```
[ 94%] Linking CXX executable ../cryptominisat5
cd /opt/sagemath/sage-source/local/var/tmp/sage/build/cryptominisat-5.6.8/src/cmsat5-src && /opt/sagemath/sage-source/local/bin/cmake -E cmake_link_script CMakeFiles/cryptominisat5-bin.dir/link.txt --verbose=ON
/usr/bin/g++  -std=gnu++11   -mtune=native -Wall -Wextra -Wunused -Wsign-compare -fno-omit-frame-pointer -Wtype-limits -Wuninitialized -Wno-deprecated -Wstrict-aliasing -Wpointer-arith -Wpointer-arith -Wformat-nonliteral -Winit-self -Wparentheses -Wunreachable-code -ggdb3 -Wlogical-op -Wnull-dereference -Wdouble-promotion -Wshadow -Wformat=2 -pedantic   -L/opt/sagemath/sage-source/local/lib -Wl,-rpath,/opt/sagemath/sage-source/local/lib -O2 -Wl,--discard-all -Wl,--build-id=sha1 -rdynamic CMakeFiles/cryptominisat5-bin.dir/main.cpp.o CMakeFiles/cryptominisat5-bin.dir/main_exe.cpp.o CMakeFiles/cryptominisat5-bin.dir/signalcode.cpp.o  -o ../cryptominisat5 -Wl,-rpath,/opt/sagemath/sage-source/local/var/tmp/sage/build/cryptominisat-5.6.8/src/lib: ../lib/libcryptominisat5.so.5.6 /usr/lib/x86_64-linux-gnu/libz.so /usr/lib/x86_64-linux-gnu/libboost_program_options.so /opt/sagemath/sage-source/local/lib/libm4ri.so -pthread 
/opt/sagemath/sage-source/local/lib/libpng16.so.16: undefined reference to `inflateValidate@ZLIB_1.2.9'
collect2: error: ld returned 1 exit status
cmsat5-src/CMakeFiles/cryptominisat5-bin.dir/build.make:117: recipe for target 'cryptominisat5' failed
make[4]: *** [cryptominisat5] Error 1
make[4]: Leaving directory '/opt/sagemath/sage-source/local/var/tmp/sage/build/cryptominisat-5.6.8/src'
CMakeFiles/Makefile2:197: recipe for target 'cmsat5-src/CMakeFiles/cryptominisat5-bin.dir/all' failed
make[3]: *** [cmsat5-src/CMakeFiles/cryptominisat5-bin.dir/all] Error 2
make[3]: Leaving directory '/opt/sagemath/sage-source/local/var/tmp/sage/build/cryptominisat-5.6.8/src'
Makefile:129: recipe for target 'all' failed
make[2]: *** [all] Error 2
make[2]: Leaving directory '/opt/sagemath/sage-source/local/var/tmp/sage/build/cryptominisat-5.6.8/src'
********************************************************************************
Error building cryptominisat-5.6.8
```

Let me rebuild `libpng` in case.



---

archive/issue_comments_425222.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nI still have the issue after rebuilding `libpng` (and a large part of Sage). Note that i merged with Sage 8.8, could the problem be related to #27186 ?",
    "created_at": "2019-07-05T07:50:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27319#issuecomment-425222",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<a id='comment:16'>Comment 16:</a>
I still have the issue after rebuilding `libpng` (and a large part of Sage). Note that i merged with Sage 8.8, could the problem be related to #27186 ?



---

archive/issue_comments_425223.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nThis looks like an attempt to update, rather than a full re-build after `make distclean`.\n\nNow Sage will try using libpng from your system. Blindly doing `./sage -f libpng` might actually be breaking your build, if it is not followed by `./configure`.\nIn any event, this is one of significant changes to configure, and all bets are off whether `make distclean` is needed. \n\nCould you try uninstalling `libpng` ? (`make libpng-clean`), then `./configure`\nand see whether `libpng` is picked from the system or not?",
    "created_at": "2019-07-05T08:42:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27319#issuecomment-425223",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:17'>Comment 17:</a>
This looks like an attempt to update, rather than a full re-build after `make distclean`.

Now Sage will try using libpng from your system. Blindly doing `./sage -f libpng` might actually be breaking your build, if it is not followed by `./configure`.
In any event, this is one of significant changes to configure, and all bets are off whether `make distclean` is needed. 

Could you try uninstalling `libpng` ? (`make libpng-clean`), then `./configure`
and see whether `libpng` is picked from the system or not?



---

archive/issue_comments_425224.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nthe update works for me on the 8.8.bera1, on Gentoo Linux",
    "created_at": "2019-07-05T10:13:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27319#issuecomment-425224",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:18'>Comment 18:</a>
the update works for me on the 8.8.bera1, on Gentoo Linux



---

archive/issue_comments_425225.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nReplying to [@dimpase](#comment%3A17):\n> This looks like an attempt to update, rather than a full re-build after `make distclean`.\n> \n> Now Sage will try using libpng from your system. Blindly doing `./sage -f libpng` might actually be breaking your build, if it is not followed by `./configure`.\n> In any event, this is one of significant changes to configure, and all bets are off whether `make distclean` is needed. \n> \n> Could you try uninstalling `libpng` ? (`make libpng-clean`), then `./configure`\n> and see whether `libpng` is picked from the system or not?\n\nI will give a try, but it should also work with the `libpng` provided by Sage.",
    "created_at": "2019-07-05T13:11:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27319#issuecomment-425225",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<a id='comment:19'>Comment 19:</a>
Replying to [@dimpase](#comment%3A17):
> This looks like an attempt to update, rather than a full re-build after `make distclean`.
> 
> Now Sage will try using libpng from your system. Blindly doing `./sage -f libpng` might actually be breaking your build, if it is not followed by `./configure`.
> In any event, this is one of significant changes to configure, and all bets are off whether `make distclean` is needed. 
> 
> Could you try uninstalling `libpng` ? (`make libpng-clean`), then `./configure`
> and see whether `libpng` is picked from the system or not?

I will give a try, but it should also work with the `libpng` provided by Sage.



---

archive/issue_comments_425226.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nThierry, I have troubles with the patchbot server. Could you please phone me ?\n\nReplying to [tmonteil](#comment%3A19):\n\n> Replying to [@dimpase](#comment%3A17):\n> > This looks like an attempt to update, rather than a full re-build after `make distclean`.\n> > \n> > Now Sage will try using libpng from your system. Blindly doing `./sage -f libpng` might actually be breaking your build, if it is not followed by `./configure`.\n> > In any event, this is one of significant changes to configure, and all bets are off whether `make distclean` is needed. \n> > \n> > Could you try uninstalling `libpng` ? (`make libpng-clean`), then `./configure`\n> > and see whether `libpng` is picked from the system or not?\n\n> \n> I will give a try, but it should also work with the `libpng` provided by Sage.",
    "created_at": "2019-07-05T13:14:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27319#issuecomment-425226",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:20'>Comment 20:</a>
Thierry, I have troubles with the patchbot server. Could you please phone me ?

Replying to [tmonteil](#comment%3A19):

> Replying to [@dimpase](#comment%3A17):
> > This looks like an attempt to update, rather than a full re-build after `make distclean`.
> > 
> > Now Sage will try using libpng from your system. Blindly doing `./sage -f libpng` might actually be breaking your build, if it is not followed by `./configure`.
> > In any event, this is one of significant changes to configure, and all bets are off whether `make distclean` is needed. 
> > 
> > Could you try uninstalling `libpng` ? (`make libpng-clean`), then `./configure`
> > and see whether `libpng` is picked from the system or not?

> 
> I will give a try, but it should also work with the `libpng` provided by Sage.



---

archive/issue_comments_425227.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nwell, I can guess what happens with libpng. We have now a check that if system libpng is available then system zlib is used, and it need not be compatible with Sage's libpng.\n\nIf you override this and force-install libpng in Sage then for some reason a compatible zlib doesn't get installed, and we see this error (which should be fixable by manually installing Sage's zlib)",
    "created_at": "2019-07-05T14:27:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27319#issuecomment-425227",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:21'>Comment 21:</a>
well, I can guess what happens with libpng. We have now a check that if system libpng is available then system zlib is used, and it need not be compatible with Sage's libpng.

If you override this and force-install libpng in Sage then for some reason a compatible zlib doesn't get installed, and we see this error (which should be fixable by manually installing Sage's zlib)



---

archive/issue_comments_425228.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nAs I noted over in #27186, libpng won't even use `inflateValidate` unless the zlib headers are new enough to have it. Note that Sage's zlib does have `inflateValidate`. If I had to guess, this error,\n\n```\n/opt/sagemath/sage-source/local/lib/libpng16.so.16: undefined reference to `inflateValidate@ZLIB_1.2.9'\n```\n\nsuggests to me that (Sage's) libpng was built against new headers that do have `inflateValidate`, and then linked against an older (system) copy of zlib that doesn't have `inflateValidate`.\n\nWe'll need the gory details of your libpng build, including the header/library search path used during the build. (If I knew how to get those off the top of my head I'd be telling you how to do it; I'll need to come back to this when I have some free time.)",
    "created_at": "2019-07-05T15:12:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27319#issuecomment-425228",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:22'>Comment 22:</a>
As I noted over in #27186, libpng won't even use `inflateValidate` unless the zlib headers are new enough to have it. Note that Sage's zlib does have `inflateValidate`. If I had to guess, this error,

```
/opt/sagemath/sage-source/local/lib/libpng16.so.16: undefined reference to `inflateValidate@ZLIB_1.2.9'
```

suggests to me that (Sage's) libpng was built against new headers that do have `inflateValidate`, and then linked against an older (system) copy of zlib that doesn't have `inflateValidate`.

We'll need the gory details of your libpng build, including the header/library search path used during the build. (If I knew how to get those off the top of my head I'd be telling you how to do it; I'll need to come back to this when I have some free time.)



---

archive/issue_events_357215.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2019-07-09T00:37:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27319#event-357215"
}
```



---

archive/issue_events_357216.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2019-07-09T00:37:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27319#event-357216"
}
```



---

archive/issue_events_357217.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-07-10T01:31:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27319#event-357217"
}
```



---

archive/issue_events_357218.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "a0cc8896b06c3303ca86b113b7e1786432eea4ae",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-07-10T01:31:26Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27319#event-357218"
}
```



---

archive/issue_comments_425229.json:
```json
{
    "body": "Changed branch from **[u/chapoton/27319](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/27319)** to **[d219646](https://github.com/sagemath/sagetrac-mirror/commit/d219646cd4dec96a1b4e53cce1f14aa9905377c3)**",
    "created_at": "2019-07-10T01:31:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27319#issuecomment-425229",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/chapoton/27319](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/27319)** to **[d219646](https://github.com/sagemath/sagetrac-mirror/commit/d219646cd4dec96a1b4e53cce1f14aa9905377c3)**
