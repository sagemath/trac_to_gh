# Issue 27025: NULL and multiple output from R

archive/issues_026788.json:
```json
{
    "body": "In Sage 8.4 we had\n\n```\nsage: r.eval(\"graphics.off()\")\n''\nsage: r.eval(\"\"\"\n....: 1\n....: 2\n....: \"\"\")\n'[1] 1\\n[1] 2'\n```\nin Sage 8.5 this gives\n\n```\nsage: r.eval(\"graphics.off()\")\n'NULL'\nsage: r.eval(\"\"\"\n....: 1\n....: 2\n....: \"\"\")\n'[1] 2'\n```\nwhich is annoying and inconsistent with the output one gets from R using these commands:\n\n```\n> graphics.off()\n> 1\n[1] 1\n> 2\n[1] 2\n```\nI've also seen this example in the documentation:\n\n```\nsage: r.png(filename='\"%s\"'%filename)             # optional -- rgraphics\nNULL\n```\nwhich again I think is wrong - there should be no NULL output when saving a file.\n\nCC:  @timokau @kiwifb\n\nBranch: u/gh-timokau/r-empty-results\n\nStatus: needs_work\n\nCommit: f05ee1203de8eeb6daa67cb8770822f9ab144b82\n\nIssue created by migration from https://trac.sagemath.org/ticket/27025\n\n",
    "created_at": "2019-01-06T22:39:24Z",
    "labels": [
        "component: interfaces",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "NULL and multiple output from R",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27025",
    "user": "https://github.com/novoselt"
}
```
In Sage 8.4 we had

```
sage: r.eval("graphics.off()")
''
sage: r.eval("""
....: 1
....: 2
....: """)
'[1] 1\n[1] 2'
```
in Sage 8.5 this gives

```
sage: r.eval("graphics.off()")
'NULL'
sage: r.eval("""
....: 1
....: 2
....: """)
'[1] 2'
```
which is annoying and inconsistent with the output one gets from R using these commands:

```
> graphics.off()
> 1
[1] 1
> 2
[1] 2
```
I've also seen this example in the documentation:

```
sage: r.png(filename='"%s"'%filename)             # optional -- rgraphics
NULL
```
which again I think is wrong - there should be no NULL output when saving a file.

CC:  @timokau @kiwifb

Branch: u/gh-timokau/r-empty-results

Status: needs_work

Commit: f05ee1203de8eeb6daa67cb8770822f9ab144b82

Issue created by migration from https://trac.sagemath.org/ticket/27025





---

archive/issue_comments_519541.json:
```json
{
    "body": "<a id='comment:1'></a>As an example of why this NULL is annoying:\nhttp://faculty.sfasu.edu/judsontw/math-s304/section-16.html\n\nAlso, if there were cells relying on multiple output from multiple commands, they behave differently now as well.",
    "created_at": "2019-01-06T22:53:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27025#issuecomment-519541",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:1'></a>As an example of why this NULL is annoying:
http://faculty.sfasu.edu/judsontw/math-s304/section-16.html

Also, if there were cells relying on multiple output from multiple commands, they behave differently now as well.



---

archive/issue_comments_519542.json:
```json
{
    "body": "<a id='comment:2'></a>I agree this should definitely be fixed.\n\nIncidentally, this is the opposite of what I did in the recent updates to the libgap interface (#22626): Previously, void-returning GAP functions would have their \"return value\" wrapped in a null `GapElement` that actually repr'd as `NULL` which was obviously annoying and distracting.  \n\nIn this case, the old behavior still returned an empty string, which still looks wrong to me.  It should check whether the expression in question has an actual return value or not, and if not then `r.eval` should just return `None`.",
    "created_at": "2019-01-14T09:55:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27025#issuecomment-519542",
    "user": "https://github.com/embray"
}
```

<a id='comment:2'></a>I agree this should definitely be fixed.

Incidentally, this is the opposite of what I did in the recent updates to the libgap interface (#22626): Previously, void-returning GAP functions would have their "return value" wrapped in a null `GapElement` that actually repr'd as `NULL` which was obviously annoying and distracting.  

In this case, the old behavior still returned an empty string, which still looks wrong to me.  It should check whether the expression in question has an actual return value or not, and if not then `r.eval` should just return `None`.



---

archive/issue_comments_519543.json:
```json
{
    "body": "<a id='comment:3'></a>Right, thanks for reporting. The `eval` function actually just hands of to `rpy2`:\n\n```\ndef eval(self, code, *args, **kwds):\n    self._lazy_init()\n    return str(robjects.r(code)).rstrip()\n```\n\nIn this case `robjects.r(\"graphics.off()\")` is `rpy2.rinterface.NULL`, which unfortunately is implemented to have a string representation of `NULL`. I'd argue this is an upstream bug bug since I think upstream doesn't want to do new python2 releases, we need to fix it ourselves here.\n\nThe fix should be trivial. Just add a `if result == rpy2.rinterface.NULL` to `eval`. However do you know why\n\n```\nsage: r.png(filename='\"%s\"'%filename)             # optional -- rgraphics\nNULL\n```\n\nis different? I didn't touch that in my recent R changes, so that always returned NULL.",
    "created_at": "2019-01-14T19:51:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27025#issuecomment-519543",
    "user": "https://github.com/timokau"
}
```

<a id='comment:3'></a>Right, thanks for reporting. The `eval` function actually just hands of to `rpy2`:

```
def eval(self, code, *args, **kwds):
    self._lazy_init()
    return str(robjects.r(code)).rstrip()
```

In this case `robjects.r("graphics.off()")` is `rpy2.rinterface.NULL`, which unfortunately is implemented to have a string representation of `NULL`. I'd argue this is an upstream bug bug since I think upstream doesn't want to do new python2 releases, we need to fix it ourselves here.

The fix should be trivial. Just add a `if result == rpy2.rinterface.NULL` to `eval`. However do you know why

```
sage: r.png(filename='"%s"'%filename)             # optional -- rgraphics
NULL
```

is different? I didn't touch that in my recent R changes, so that always returned NULL.



---

archive/issue_comments_519544.json:
```json
{
    "body": "<a id='comment:4'></a>Tested only the `r.py` file without any optionals though.\n\n---\nNew commits:",
    "created_at": "2019-01-14T20:17:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27025#issuecomment-519544",
    "user": "https://github.com/timokau"
}
```

<a id='comment:4'></a>Tested only the `r.py` file without any optionals though.

---
New commits:



---

archive/issue_comments_519545.json:
```json
{
    "body": "Changing branch from \"\" to \"u/gh-timokau/r-empty-results\"",
    "created_at": "2019-01-14T20:17:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27025#issuecomment-519545",
    "user": "https://github.com/timokau"
}
```

Changing branch from "" to "u/gh-timokau/r-empty-results"



---

archive/issue_comments_519546.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-01-14T20:17:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27025#issuecomment-519546",
    "user": "https://github.com/timokau"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_519547.json:
```json
{
    "body": "Changing commit from \"\" to \"f05ee1203de8eeb6daa67cb8770822f9ab144b82\"",
    "created_at": "2019-01-14T20:17:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27025#issuecomment-519547",
    "user": "https://github.com/timokau"
}
```

Changing commit from "" to "f05ee1203de8eeb6daa67cb8770822f9ab144b82"



---

archive/issue_comments_519548.json:
```json
{
    "body": "<a id='comment:5'></a>No idea about `r.png` returning NULL before and after - I thought it was a recent change.\n\nBut apart from NULL there is also change in behaviour for multi-line input. For SageMathCell, that adds that extra graphics command, this means that default output of single commands is not shown at all: https://sagecell.sagemath.org/?z=eJwzBAAAMgAy&lang=r Is it easy to restore old behaviour for this case?",
    "created_at": "2019-01-14T20:42:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27025#issuecomment-519548",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:5'></a>No idea about `r.png` returning NULL before and after - I thought it was a recent change.

But apart from NULL there is also change in behaviour for multi-line input. For SageMathCell, that adds that extra graphics command, this means that default output of single commands is not shown at all: https://sagecell.sagemath.org/?z=eJwzBAAAMgAy&lang=r Is it easy to restore old behaviour for this case?



---

archive/issue_comments_519549.json:
```json
{
    "body": "<a id='comment:6'></a>I'm not entirely sure what you mean. Do you mean multiline input to `eval()`? How should that behave? Just pass each line to R separately? Does R have some sort of line-continuation that must be considered?",
    "created_at": "2019-01-14T21:19:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27025#issuecomment-519549",
    "user": "https://github.com/timokau"
}
```

<a id='comment:6'></a>I'm not entirely sure what you mean. Do you mean multiline input to `eval()`? How should that behave? Just pass each line to R separately? Does R have some sort of line-continuation that must be considered?



---

archive/issue_comments_519550.json:
```json
{
    "body": "<a id='comment:7'></a>I gave an example in the description of how things worked before and what happens now. I don't know how it should be implemented as my knowledge of R is extremely limited, I only learned enough to save graphics to a file ;-)",
    "created_at": "2019-01-14T23:14:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27025#issuecomment-519550",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:7'></a>I gave an example in the description of how things worked before and what happens now. I don't know how it should be implemented as my knowledge of R is extremely limited, I only learned enough to save graphics to a file ;-)



---

archive/issue_comments_519551.json:
```json
{
    "body": "<a id='comment:8'></a>For your examples just splitting on newline would work. But the same issue seems to appear any time you eval more than one statement, for example `r.eval(\"1;3\")`.\n\nI'd personally argue that is out of scope for eval, but since it was supported before...\n\nI don't know much about R myself, I only messed with it in the first place because it was stuck on an old version for so long and nobody else was doing anything.",
    "created_at": "2019-01-15T09:00:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27025#issuecomment-519551",
    "user": "https://github.com/timokau"
}
```

<a id='comment:8'></a>For your examples just splitting on newline would work. But the same issue seems to appear any time you eval more than one statement, for example `r.eval("1;3")`.

I'd personally argue that is out of scope for eval, but since it was supported before...

I don't know much about R myself, I only messed with it in the first place because it was stuck on an old version for so long and nobody else was doing anything.



---

archive/issue_comments_519552.json:
```json
{
    "body": "<a id='comment:9'></a>In\n\n```diff\n         \"\"\"\n         self._lazy_init()\n-        return str(robjects.r(code)).rstrip()\n+        result = robjects.r(code)\n+        if result == rinterface.NULL:\n+            # trac #27025\n+            result = None\n+        else:\n+            result = str(result)\n+\n+        if isinstance(result, str):\n+            # no trailing newlines\n+            result = result.rstrip()\n \n+        return result\n```\n\nThis looks like it could be simplified: If `result != NULL` then you always do `result = str(result)` anyways, so why not just move the `.rstrip()` into the statement in the `else:` block and get rid of the superfluous `isinstance(result, str)`?\n\nI'm also surprised now, upon reading the docs for the eval method, that it *always* returns the result s a string, and not the actual wrapped R object itself (as the libgap interface would do).  Why is this?  That makes me rethink having it ever return `None` in the first place.  Though I'd be more inclined to say the eval-returns-a-string interface is a mistake in the first place and should be done away with.",
    "created_at": "2019-01-15T15:54:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27025#issuecomment-519552",
    "user": "https://github.com/embray"
}
```

<a id='comment:9'></a>In

```diff
         """
         self._lazy_init()
-        return str(robjects.r(code)).rstrip()
+        result = robjects.r(code)
+        if result == rinterface.NULL:
+            # trac #27025
+            result = None
+        else:
+            result = str(result)
+
+        if isinstance(result, str):
+            # no trailing newlines
+            result = result.rstrip()
 
+        return result
```

This looks like it could be simplified: If `result != NULL` then you always do `result = str(result)` anyways, so why not just move the `.rstrip()` into the statement in the `else:` block and get rid of the superfluous `isinstance(result, str)`?

I'm also surprised now, upon reading the docs for the eval method, that it *always* returns the result s a string, and not the actual wrapped R object itself (as the libgap interface would do).  Why is this?  That makes me rethink having it ever return `None` in the first place.  Though I'd be more inclined to say the eval-returns-a-string interface is a mistake in the first place and should be done away with.



---

archive/issue_comments_519553.json:
```json
{
    "body": "<a id='comment:10'></a>Replying to [comment:9 embray]:\n> In\n> \n> \n> ```\n> #!diff\n>          \"\"\"\n>          self._lazy_init()\n> -        return str(robjects.r(code)).rstrip()\n> +        result = robjects.r(code)\n> +        if result == rinterface.NULL:\n> +            # trac #27025\n> +            result = None\n> +        else:\n> +            result = str(result)\n> +\n> +        if isinstance(result, str):\n> +            # no trailing newlines\n> +            result = result.rstrip()\n>  \n> +        return result\n> ```\n> \n> This looks like it could be simplified: If `result != NULL` then you always do `result = str(result)` anyways, so why not just move the `.rstrip()` into the statement in the `else:` block and get rid of the superfluous `isinstance(result, str)`?\n\n\nI think I had a reason for that, but I can't remember it and I can't see any reason now. So it can probably be changed.\n\n> I'm also surprised now, upon reading the docs for the eval method, that it *always* returns the result s a string, and not the actual wrapped R object itself (as the libgap interface would do).  Why is this?  That makes me rethink having it ever return `None` in the first place.  Though I'd be more inclined to say the eval-returns-a-string interface is a mistake in the first place and should be done away with.\n\n\nIf you wanted a proper object, you'd use `__call__` instead: `r(\"42\")`. Not sure why its done that way, I assume its just a symptom of having been a pexpect interface before. There it was natural to eval first and then translate to an object. Now we do it the other way around: get an object first, then produce a string if requested.\n\nGap does the same thing:\n\n```\nsage: type(gap.eval('42;'))\n<type: 'str'>\n```",
    "created_at": "2019-01-15T17:17:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27025#issuecomment-519553",
    "user": "https://github.com/timokau"
}
```

<a id='comment:10'></a>Replying to [comment:9 embray]:
> In
> 
> 
> ```
> #!diff
>          """
>          self._lazy_init()
> -        return str(robjects.r(code)).rstrip()
> +        result = robjects.r(code)
> +        if result == rinterface.NULL:
> +            # trac #27025
> +            result = None
> +        else:
> +            result = str(result)
> +
> +        if isinstance(result, str):
> +            # no trailing newlines
> +            result = result.rstrip()
>  
> +        return result
> ```
> 
> This looks like it could be simplified: If `result != NULL` then you always do `result = str(result)` anyways, so why not just move the `.rstrip()` into the statement in the `else:` block and get rid of the superfluous `isinstance(result, str)`?


I think I had a reason for that, but I can't remember it and I can't see any reason now. So it can probably be changed.

> I'm also surprised now, upon reading the docs for the eval method, that it *always* returns the result s a string, and not the actual wrapped R object itself (as the libgap interface would do).  Why is this?  That makes me rethink having it ever return `None` in the first place.  Though I'd be more inclined to say the eval-returns-a-string interface is a mistake in the first place and should be done away with.


If you wanted a proper object, you'd use `__call__` instead: `r("42")`. Not sure why its done that way, I assume its just a symptom of having been a pexpect interface before. There it was natural to eval first and then translate to an object. Now we do it the other way around: get an object first, then produce a string if requested.

Gap does the same thing:

```
sage: type(gap.eval('42;'))
<type: 'str'>
```



---

archive/issue_comments_519554.json:
```json
{
    "body": "<a id='comment:11'></a>Right, I believe we talked about that before on the mailing list.  I understand that the existing interface makes sense in light of its origin as a pexpect interface.  Perhaps this should in fact be moved into `sage.lib` instead of `sage.interfaces` and updated to a more common interface, while deprecating the old interface.  Now that I think about it I think it should have been done that way in the first place, but I didn't speak up in time so oh well.  Could you please open a ticket for that?  I think we should make a stronger effort to be consistent.",
    "created_at": "2019-01-15T17:21:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27025#issuecomment-519554",
    "user": "https://github.com/embray"
}
```

<a id='comment:11'></a>Right, I believe we talked about that before on the mailing list.  I understand that the existing interface makes sense in light of its origin as a pexpect interface.  Perhaps this should in fact be moved into `sage.lib` instead of `sage.interfaces` and updated to a more common interface, while deprecating the old interface.  Now that I think about it I think it should have been done that way in the first place, but I didn't speak up in time so oh well.  Could you please open a ticket for that?  I think we should make a stronger effort to be consistent.



---

archive/issue_events_067076.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-01-15T18:15:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "milestone": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27025#event-67076"
}
```



---

archive/issue_comments_519555.json:
```json
{
    "body": "<a id='comment:12'></a>Retarging tickets optimistically to the next milestone.  If you are responsible for this ticket (either its reporter or owner) and don't believe you are likely to complete this ticket before the next release (8.7) please retarget this ticket's milestone to sage-pending or sage-wishlist.",
    "created_at": "2019-01-15T18:15:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27025#issuecomment-519555",
    "user": "https://github.com/embray"
}
```

<a id='comment:12'></a>Retarging tickets optimistically to the next milestone.  If you are responsible for this ticket (either its reporter or owner) and don't believe you are likely to complete this ticket before the next release (8.7) please retarget this ticket's milestone to sage-pending or sage-wishlist.



---

archive/issue_comments_519556.json:
```json
{
    "body": "<a id='comment:13'></a>Replying to [comment:11 embray]:\n> Right, I believe we talked about that before on the mailing list.  I understand that the existing interface makes sense in light of its origin as a pexpect interface.  Perhaps this should in fact be moved into `sage.lib` instead of `sage.interfaces` and updated to a more common interface, while deprecating the old interface.  Now that I think about it I think it should have been done that way in the first place, but I didn't speak up in time so oh well.  Could you please open a ticket for that?  I think we should make a stronger effort to be consistent.\n\n\nI don't think it should have been done like that. The point was to provide a drop-in replacement for the old interface. If we just want an R interface without backward compatibility concerns, I'd just tell users to use rpy2 directly.",
    "created_at": "2019-01-15T19:14:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27025#issuecomment-519556",
    "user": "https://github.com/timokau"
}
```

<a id='comment:13'></a>Replying to [comment:11 embray]:
> Right, I believe we talked about that before on the mailing list.  I understand that the existing interface makes sense in light of its origin as a pexpect interface.  Perhaps this should in fact be moved into `sage.lib` instead of `sage.interfaces` and updated to a more common interface, while deprecating the old interface.  Now that I think about it I think it should have been done that way in the first place, but I didn't speak up in time so oh well.  Could you please open a ticket for that?  I think we should make a stronger effort to be consistent.


I don't think it should have been done like that. The point was to provide a drop-in replacement for the old interface. If we just want an R interface without backward compatibility concerns, I'd just tell users to use rpy2 directly.



---

archive/issue_comments_519557.json:
```json
{
    "body": "<a id='comment:14'></a>Except it's clearly not just a drop-in replacement; it's a rather different way to go about things.  Regardless, what's done is done, and it's still by far a net positive so I'm not complaining :)",
    "created_at": "2019-01-16T10:43:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27025#issuecomment-519557",
    "user": "https://github.com/embray"
}
```

<a id='comment:14'></a>Except it's clearly not just a drop-in replacement; it's a rather different way to go about things.  Regardless, what's done is done, and it's still by far a net positive so I'm not complaining :)



---

archive/issue_comments_519558.json:
```json
{
    "body": "<a id='comment:15'></a>It mostly is. Due to my little R usage and a lack of tests, some issues were probably inevitable. I'm only aware of this issue (the multiline thing may be hard to fix depending on how R handles these) and the multiple instances issue (wontfix from me).\n\nI wouldn't be opposed to deprecating the old api altogether and using rpy2 (maybe a very thin wrapper) instead. But I don't want to fight that fight myself :)",
    "created_at": "2019-01-16T11:20:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27025#issuecomment-519558",
    "user": "https://github.com/timokau"
}
```

<a id='comment:15'></a>It mostly is. Due to my little R usage and a lack of tests, some issues were probably inevitable. I'm only aware of this issue (the multiline thing may be hard to fix depending on how R handles these) and the multiple instances issue (wontfix from me).

I wouldn't be opposed to deprecating the old api altogether and using rpy2 (maybe a very thin wrapper) instead. But I don't want to fight that fight myself :)



---

archive/issue_comments_519559.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-01-17T01:31:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27025#issuecomment-519559",
    "user": "https://github.com/novoselt"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_519560.json:
```json
{
    "body": "<a id='comment:16'></a>If someone is just interested in using R, then Sage is probably not the best way to do it. If someone just wants to use R from !Sage/Python specifically, then rpy2 is quite sensible with whatever decisions it comes. But the point of particular output from `eval` etc. is that every interface in Sage (at least in theory), behaves this way. In particular, it is supposed to return a string and it used to return the empty string rather than `None` as \"no output\". I think this definitely has to be the case again.\n\nRegarding multiline treatment - it may be less important as notebooks often show only the last output from commands in a single \"cell\" and a single call to `eval` is kind of like executing a \"cell\". It is still unfortunate that old behaviour is changed without deprecation period, but if nobody else complains and nobody wants to work on it, well then...",
    "created_at": "2019-01-17T01:31:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27025#issuecomment-519560",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:16'></a>If someone is just interested in using R, then Sage is probably not the best way to do it. If someone just wants to use R from !Sage/Python specifically, then rpy2 is quite sensible with whatever decisions it comes. But the point of particular output from `eval` etc. is that every interface in Sage (at least in theory), behaves this way. In particular, it is supposed to return a string and it used to return the empty string rather than `None` as "no output". I think this definitely has to be the case again.

Regarding multiline treatment - it may be less important as notebooks often show only the last output from commands in a single "cell" and a single call to `eval` is kind of like executing a "cell". It is still unfortunate that old behaviour is changed without deprecation period, but if nobody else complains and nobody wants to work on it, well then...



---

archive/issue_comments_519561.json:
```json
{
    "body": "<a id='comment:17'></a>I will look into it at some point but it's definitely not a priority for me right now.  As you said, while it's absolutely useful to have an R interface in Sage, that's useful more as a glue layer, and not for doing serious R programming, which should just be done in an R-specific UI.",
    "created_at": "2019-01-18T10:40:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27025#issuecomment-519561",
    "user": "https://github.com/embray"
}
```

<a id='comment:17'></a>I will look into it at some point but it's definitely not a priority for me right now.  As you said, while it's absolutely useful to have an R interface in Sage, that's useful more as a glue layer, and not for doing serious R programming, which should just be done in an R-specific UI.



---

archive/issue_comments_519562.json:
```json
{
    "body": "<a id='comment:18'></a>Except, of course, for using it via SageMathCell where Sage is a necessary proxy between browser and R ;-) So I do hope that the issue will be solved in the next 8.7 release...",
    "created_at": "2019-01-18T17:07:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27025#issuecomment-519562",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:18'></a>Except, of course, for using it via SageMathCell where Sage is a necessary proxy between browser and R ;-) So I do hope that the issue will be solved in the next 8.7 release...



---

archive/issue_events_067077.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "milestone": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27025#event-67077"
}
```



---

archive/issue_events_067078.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27025#event-67078"
}
```



---

archive/issue_comments_519563.json:
```json
{
    "body": "<a id='comment:19'></a>Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)",
    "created_at": "2019-03-25T10:56:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27025#issuecomment-519563",
    "user": "https://github.com/embray"
}
```

<a id='comment:19'></a>Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)



---

archive/issue_comments_519564.json:
```json
{
    "body": "<a id='comment:20'></a>Tickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).",
    "created_at": "2019-06-14T14:50:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27025#issuecomment-519564",
    "user": "https://github.com/embray"
}
```

<a id='comment:20'></a>Tickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).



---

archive/issue_events_067079.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:50:27Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27025#event-67079"
}
```



---

archive/issue_events_067080.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:50:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27025#event-67080"
}
```



---

archive/issue_events_067081.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27025#event-67081"
}
```



---

archive/issue_events_067082.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27025#event-67082"
}
```



---

archive/issue_comments_519565.json:
```json
{
    "body": "<a id='comment:21'></a>Ticket retargeted after milestone closed",
    "created_at": "2019-12-30T14:48:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27025#issuecomment-519565",
    "user": "https://github.com/embray"
}
```

<a id='comment:21'></a>Ticket retargeted after milestone closed



---

archive/issue_comments_519566.json:
```json
{
    "body": "<a id='comment:22'></a>Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.",
    "created_at": "2020-04-14T19:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27025#issuecomment-519566",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:22'></a>Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.



---

archive/issue_events_067083.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27025#event-67083"
}
```



---

archive/issue_events_067084.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27025#event-67084"
}
```



---

archive/issue_events_067085.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27025#event-67085"
}
```



---

archive/issue_events_067086.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27025#event-67086"
}
```



---

archive/issue_comments_519567.json:
```json
{
    "body": "<a id='comment:24'></a>Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27025#issuecomment-519567",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:24'></a>Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_067087.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27025#event-67087"
}
```



---

archive/issue_events_067088.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27025#event-67088"
}
```



---

archive/issue_comments_519568.json:
```json
{
    "body": "<a id='comment:25'></a>Setting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27025#issuecomment-519568",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'></a>Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_events_067089.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27025#event-67089"
}
```



---

archive/issue_events_067090.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27025#event-67090"
}
```



---

archive/issue_events_067091.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27025#event-67091"
}
```



---

archive/issue_events_067092.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27025#event-67092"
}
```



---

archive/issue_events_067093.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-07T00:07:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27025#event-67093"
}
```



---

archive/issue_events_067094.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-07T00:07:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27025#event-67094"
}
```



---

archive/issue_events_067095.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27025#event-67095"
}
```



---

archive/issue_events_067096.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27025",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27025#event-67096"
}
```
