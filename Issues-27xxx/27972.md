# Issue 27972: py3: fix last doctest in cpython folder

archive/issues_027735.json:
```json
{
    "assignees": [],
    "body": "using hash() as suggested in #27886\n\nCC:  @jhpalmieri @tscrim\n\nBranch/Commit: **[u/chapoton/27972](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/27972) @ [b0cdda7](https://github.com/sagemath/sagetrac-mirror/commit/b0cdda7aa1636a77fcec7c0b75b32cd187031fec)**\n\nReviewer: **Vincent Klein, Erik Bray**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/27972_\n\n",
    "closed_at": "2019-07-13T10:21:32Z",
    "created_at": "2019-06-12T08:00:20Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20python3",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/wontfix"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "py3: fix last doctest in cpython folder",
    "type": "issue",
    "updated_at": "2019-07-13T10:21:32Z",
    "url": "https://github.com/sagemath/sage/issues/27972",
    "user": "https://github.com/fchapoton"
}
```
using hash() as suggested in #27886

CC:  @jhpalmieri @tscrim

Branch/Commit: **[u/chapoton/27972](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/27972) @ [b0cdda7](https://github.com/sagemath/sagetrac-mirror/commit/b0cdda7aa1636a77fcec7c0b75b32cd187031fec)**

Reviewer: **Vincent Klein, Erik Bray**

Author: **Frédéric Chapoton**

_Issue created by migration from https://trac.sagemath.org/ticket/27972_





---

archive/issue_events_352464.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-06-12T08:00:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20python3",
    "label_color": "000080",
    "label_name": "component: python3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27972#event-352464"
}
```



---

archive/issue_events_352465.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-06-12T08:00:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27972#event-352465"
}
```



---

archive/issue_events_352466.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-06-12T08:00:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27972#event-352466"
}
```



---

archive/issue_comments_438006.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b0cdda7aa1636a77fcec7c0b75b32cd187031fec\">b0cdda7</a></td><td><code>py3: fix last doctests in cpython folder</code></td></tr></table>\n",
    "created_at": "2019-06-12T08:02:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-438006",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'>Comment 1:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b0cdda7aa1636a77fcec7c0b75b32cd187031fec">b0cdda7</a></td><td><code>py3: fix last doctests in cpython folder</code></td></tr></table>




---

archive/issue_comments_438007.json:
```json
{
    "body": "Commit: **[b0cdda7](https://github.com/sagemath/sagetrac-mirror/commit/b0cdda7aa1636a77fcec7c0b75b32cd187031fec)**",
    "created_at": "2019-06-12T08:02:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-438007",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[b0cdda7](https://github.com/sagemath/sagetrac-mirror/commit/b0cdda7aa1636a77fcec7c0b75b32cd187031fec)**



---

archive/issue_comments_438008.json:
```json
{
    "body": "Branch: **[u/chapoton/27972](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/27972)**",
    "created_at": "2019-06-12T08:02:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-438008",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[u/chapoton/27972](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/27972)**



---

archive/issue_comments_438009.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-using hash() as suggest in #27886\n+using hash() as suggested in #27886\n``````\n",
    "created_at": "2019-06-12T08:02:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-438009",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-using hash() as suggest in #27886
+using hash() as suggested in #27886
``````




---

archive/issue_events_352467.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-06-12T08:02:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27972#event-352467"
}
```



---

archive/issue_comments_438010.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nan easy one",
    "created_at": "2019-06-12T08:02:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-438010",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:2'>Comment 2:</a>
an easy one



---

archive/issue_events_352468.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2019-06-12T08:20:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27972#event-352468"
}
```



---

archive/issue_events_352469.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2019-06-12T08:20:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27972#event-352469"
}
```



---

archive/issue_comments_438011.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nLooks good to me.",
    "created_at": "2019-06-12T08:20:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-438011",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:3'>Comment 3:</a>
Looks good to me.



---

archive/issue_comments_438012.json:
```json
{
    "body": "Reviewer: **Vincent Klein**",
    "created_at": "2019-06-12T08:20:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-438012",
    "user": "https://github.com/vinklein"
}
```

Reviewer: **Vincent Klein**



---

archive/issue_comments_438013.json:
```json
{
    "body": "Changed reviewer from **Vincent Klein** to **Erik Bray**",
    "created_at": "2019-06-12T08:22:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-438013",
    "user": "https://github.com/embray"
}
```

Changed reviewer from **Vincent Klein** to **Erik Bray**



---

archive/issue_comments_438014.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nWas literally in the process of saying the same just now :)",
    "created_at": "2019-06-12T08:22:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-438014",
    "user": "https://github.com/embray"
}
```

<a id='comment:4'>Comment 4:</a>
Was literally in the process of saying the same just now :)



---

archive/issue_comments_438015.json:
```json
{
    "body": "Changed reviewer from **Erik Bray** to **Vincent Klein**",
    "created_at": "2019-06-12T08:23:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-438015",
    "user": "https://github.com/embray"
}
```

Changed reviewer from **Erik Bray** to **Vincent Klein**



---

archive/issue_comments_438016.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nOops!",
    "created_at": "2019-06-12T08:23:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-438016",
    "user": "https://github.com/embray"
}
```

<a id='comment:5'>Comment 5:</a>
Oops!



---

archive/issue_comments_438017.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nLet's be fair.",
    "created_at": "2019-06-12T09:17:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-438017",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:6'>Comment 6:</a>
Let's be fair.



---

archive/issue_comments_438018.json:
```json
{
    "body": "Changed reviewer from **Vincent Klein** to **Vincent Klein, Erik Bray**",
    "created_at": "2019-06-12T09:17:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-438018",
    "user": "https://github.com/vinklein"
}
```

Changed reviewer from **Vincent Klein** to **Vincent Klein, Erik Bray**



---

archive/issue_comments_438019.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nThere is nothing wrong with the Sage code, it should work. It would be better to just apply the upstream fix https://github.com/cython/cython/commit/28251032f86c266065e4976080230481b1a1bb29 instead.",
    "created_at": "2019-06-12T09:28:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-438019",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'>Comment 7:</a>
There is nothing wrong with the Sage code, it should work. It would be better to just apply the upstream fix https://github.com/cython/cython/commit/28251032f86c266065e4976080230481b1a1bb29 instead.



---

archive/issue_events_352470.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-06-12T09:28:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27972#event-352470"
}
```



---

archive/issue_events_352471.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-06-12T09:28:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27972#event-352471"
}
```



---

archive/issue_comments_438020.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nBetter maybe, but not for the goal of having all tests pass soon in python3.\n\nJeroen, will you be able to provide your alternative solution as a branch ? You seem to have less activity on trac, so I guess you have more urgent matters to handle.\n\nOtherwise, maybe this could be done in another ticket ?",
    "created_at": "2019-06-12T12:11:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-438020",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:8'>Comment 8:</a>
Better maybe, but not for the goal of having all tests pass soon in python3.

Jeroen, will you be able to provide your alternative solution as a branch ? You seem to have less activity on trac, so I guess you have more urgent matters to handle.

Otherwise, maybe this could be done in another ticket ?



---

archive/issue_comments_438021.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nReplying to [@fchapoton](#comment%3A8):\n> Jeroen, will you be able to provide your alternative solution as a branch ?\n\nShould I add it to #27886? It should take little effort.",
    "created_at": "2019-06-12T12:16:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-438021",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'>Comment 9:</a>
Replying to [@fchapoton](#comment%3A8):
> Jeroen, will you be able to provide your alternative solution as a branch ?

Should I add it to #27886? It should take little effort.



---

archive/issue_comments_438022.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nYes, please. And hopefully someone will review that ticket...",
    "created_at": "2019-06-12T12:17:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-438022",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:10'>Comment 10:</a>
Yes, please. And hopefully someone will review that ticket...



---

archive/issue_comments_438023.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nReplying to [@fchapoton](#comment%3A8):\n> You seem to have less activity on trac, so I guess you have more urgent matters to handle.\n\nNot really \"more urgent matters\" but more \"other matters\".\n\nIn case you are wondering what I have been doing recently: https://docs.python.org/3.8/whatsnew/3.8.html#vectorcall-a-fast-calling-protocol-for-cpython",
    "created_at": "2019-06-12T12:18:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-438023",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'>Comment 11:</a>
Replying to [@fchapoton](#comment%3A8):
> You seem to have less activity on trac, so I guess you have more urgent matters to handle.

Not really "more urgent matters" but more "other matters".

In case you are wondering what I have been doing recently: https://docs.python.org/3.8/whatsnew/3.8.html#vectorcall-a-fast-calling-protocol-for-cpython



---

archive/issue_comments_438024.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nThere is a very simple workaround here, that makes logical sense for the tests (passing an object through `hash()` necessarily returns whatever the acceptable type for a hash is).  Let's just fix this without having to rely yet again on patching cython or whatever.",
    "created_at": "2019-06-12T13:05:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-438024",
    "user": "https://github.com/embray"
}
```

<a id='comment:12'>Comment 12:</a>
There is a very simple workaround here, that makes logical sense for the tests (passing an object through `hash()` necessarily returns whatever the acceptable type for a hash is).  Let's just fix this without having to rely yet again on patching cython or whatever.



---

archive/issue_comments_438025.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nI already added the patch to #27886.",
    "created_at": "2019-06-12T13:08:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-438025",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'>Comment 13:</a>
I already added the patch to #27886.



---

archive/issue_comments_438026.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nI feel like the changes here make sense independently of the Cython patch: I believe that\n\n```\nsage: D = {1230981308409180310928308123: ZZ} # random large integer\nsage: test_del_dictitem_by_exact_value(D, ZZ, 1230981308409180310928308123)\n```\nwill fail, while\n\n```\nsage: D = {1230981308409180310928308123: ZZ}\nsage: test_del_dictitem_by_exact_value(D, ZZ, hash(1230981308409180310928308123))\n```\nwill work.\n\nI don't object to testing whether small integers are equal to their hash values, but that  is tested in `integer.pyx`. After the changes here, the doctest still tests the appropriate function, and they also indicate how to use the function:\n\n```\nsage: D = {'a': ZZ}\nsage: test_del_dictitem_by_exact_value(D, ZZ, hash('a'))\n```",
    "created_at": "2019-06-12T15:10:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-438026",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:14'>Comment 14:</a>
I feel like the changes here make sense independently of the Cython patch: I believe that

```
sage: D = {1230981308409180310928308123: ZZ} # random large integer
sage: test_del_dictitem_by_exact_value(D, ZZ, 1230981308409180310928308123)
```
will fail, while

```
sage: D = {1230981308409180310928308123: ZZ}
sage: test_del_dictitem_by_exact_value(D, ZZ, hash(1230981308409180310928308123))
```
will work.

I don't object to testing whether small integers are equal to their hash values, but that  is tested in `integer.pyx`. After the changes here, the doctest still tests the appropriate function, and they also indicate how to use the function:

```
sage: D = {'a': ZZ}
sage: test_del_dictitem_by_exact_value(D, ZZ, hash('a'))
```



---

archive/issue_comments_438027.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nReplying to [@jhpalmieri](#comment%3A14):\n> I don't object to testing whether small integers are equal to their hash values, but that  is tested in `integer.pyx`.\n\nTrue, but unrelated to this ticket. That's not what this doctest is testing.",
    "created_at": "2019-06-12T15:13:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-438027",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'>Comment 15:</a>
Replying to [@jhpalmieri](#comment%3A14):
> I don't object to testing whether small integers are equal to their hash values, but that  is tested in `integer.pyx`.

True, but unrelated to this ticket. That's not what this doctest is testing.



---

archive/issue_comments_438028.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nAre you agreeing with me or disagreeing? I can't tell.\n\nWhat is the doctest supposed to be testing?",
    "created_at": "2019-06-12T16:03:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-438028",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:16'>Comment 16:</a>
Are you agreeing with me or disagreeing? I can't tell.

What is the doctest supposed to be testing?



---

archive/issue_comments_438029.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nReplying to [@jhpalmieri](#comment%3A16):\n> What is the doctest supposed to be testing?\n\nThat nothing happens if you give the *wrong* hash value. So basically the test relies on `hash(1) != 2`.",
    "created_at": "2019-06-13T07:02:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-438029",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'>Comment 17:</a>
Replying to [@jhpalmieri](#comment%3A16):
> What is the doctest supposed to be testing?

That nothing happens if you give the *wrong* hash value. So basically the test relies on `hash(1) != 2`.



---

archive/issue_comments_438030.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nThe second doctest relies on `hash(1) == 1`. Well, it doesn't rely on it, but if `hash(1) != 1`, then I think it is not testing what is intended.\n\nAnd of course both rely on Sage Integers being valid hash values, which is what is fixed by the patch you posted to #27886.",
    "created_at": "2019-06-13T18:00:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-438030",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:18'>Comment 18:</a>
The second doctest relies on `hash(1) == 1`. Well, it doesn't rely on it, but if `hash(1) != 1`, then I think it is not testing what is intended.

And of course both rely on Sage Integers being valid hash values, which is what is fixed by the patch you posted to #27886.



---

archive/issue_events_352472.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:50:27Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27972#event-352472"
}
```



---

archive/issue_events_352473.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:50:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27972#event-352473"
}
```



---

archive/issue_comments_438031.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nTickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).",
    "created_at": "2019-06-14T14:50:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-438031",
    "user": "https://github.com/embray"
}
```

<a id='comment:19'>Comment 19:</a>
Tickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).



---

archive/issue_comments_438032.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nshould we close this one as invalid ?",
    "created_at": "2019-07-07T07:14:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-438032",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:20'>Comment 20:</a>
should we close this one as invalid ?



---

archive/issue_comments_438033.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nBecause of #28112?",
    "created_at": "2019-07-08T18:54:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-438033",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:21'>Comment 21:</a>
Because of #28112?



---

archive/issue_comments_438034.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nrather because of the cython upgrade in #27886, which fixes these doctests in py3",
    "created_at": "2019-07-09T19:08:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-438034",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:22'>Comment 22:</a>
rather because of the cython upgrade in #27886, which fixes these doctests in py3



---

archive/issue_events_352474.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2019-07-10T07:09:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27972#event-352474"
}
```



---

archive/issue_comments_438035.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nReplying to [@fchapoton](#comment%3A20):\n> should we close this one as invalid ?\n\nSure. All cpython's module tests pass with 8.9.beta1/py3.",
    "created_at": "2019-07-10T07:09:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-438035",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:23'>Comment 23:</a>
Replying to [@fchapoton](#comment%3A20):
> should we close this one as invalid ?

Sure. All cpython's module tests pass with 8.9.beta1/py3.



---

archive/issue_events_352475.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2019-07-10T07:10:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27972#event-352475"
}
```



---

archive/issue_events_352476.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2019-07-10T07:10:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27972#event-352476"
}
```



---

archive/issue_events_352477.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-07-13T10:21:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "label": "https://github.com/sagemath/sage/labels/wontfix",
    "label_color": "a6a6a6",
    "label_name": "wontfix",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27972#event-352477"
}
```



---

archive/issue_events_352478.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-07-13T10:21:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27972#event-352478"
}
```



---

archive/issue_events_352479.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-07-13T10:21:32Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27972#event-352479"
}
```
