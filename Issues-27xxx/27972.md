# Issue 27972: py3: fix last doctest in cpython folder

archive/issues_027735.json:
```json
{
    "assignees": [],
    "body": "using hash() as suggested in #27886\n\nCC:  @jhpalmieri @tscrim\n\nBranch/Commit: **[u/chapoton/27972](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/27972) @ [`b0cdda7`](https://github.com/sagemath/sagetrac-mirror/commit/b0cdda7aa1636a77fcec7c0b75b32cd187031fec)**\n\nReviewer: **Vincent Klein, Erik Bray**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton**\n\nComponent: **python3**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/27972_\n\n",
    "closed_at": "2019-07-13T10:21:32Z",
    "created_at": "2019-06-12T08:00:20Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20python3",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/wontfix"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "py3: fix last doctest in cpython folder",
    "type": "issue",
    "updated_at": "2019-07-13T10:21:32Z",
    "url": "https://github.com/sagemath/sage/issues/27972",
    "user": "https://github.com/fchapoton"
}
```
using hash() as suggested in #27886

CC:  @jhpalmieri @tscrim

Branch/Commit: **[u/chapoton/27972](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/27972) @ [`b0cdda7`](https://github.com/sagemath/sagetrac-mirror/commit/b0cdda7aa1636a77fcec7c0b75b32cd187031fec)**

Reviewer: **Vincent Klein, Erik Bray**

Author: **Frédéric Chapoton**

Component: **python3**

_Issue created by migration from https://trac.sagemath.org/ticket/27972_





---

archive/issue_events_383577.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-06-12T08:00:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27972#event-383577"
}
```



---

archive/issue_events_383578.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-06-12T08:00:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20python3",
    "label_color": "000080",
    "label_name": "c: python3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27972#event-383578"
}
```



---

archive/issue_events_383579.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-06-12T08:00:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27972#event-383579"
}
```



---

archive/issue_events_383580.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-06-12T08:00:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27972#event-383580"
}
```



---

archive/issue_comments_435159.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b0cdda7aa1636a77fcec7c0b75b32cd187031fec\"><code>b0cdda7</code></a></td><td><code>py3: fix last doctests in cpython folder</code></td></tr></table>\n",
    "created_at": "2019-06-12T08:02:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-435159",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b0cdda7aa1636a77fcec7c0b75b32cd187031fec"><code>b0cdda7</code></a></td><td><code>py3: fix last doctests in cpython folder</code></td></tr></table>




---

archive/issue_comments_435160.json:
```json
{
    "body": "Commit: **[`b0cdda7`](https://github.com/sagemath/sagetrac-mirror/commit/b0cdda7aa1636a77fcec7c0b75b32cd187031fec)**",
    "created_at": "2019-06-12T08:02:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-435160",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[`b0cdda7`](https://github.com/sagemath/sagetrac-mirror/commit/b0cdda7aa1636a77fcec7c0b75b32cd187031fec)**



---

archive/issue_comments_435161.json:
```json
{
    "body": "Branch: **[u/chapoton/27972](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/27972)**",
    "created_at": "2019-06-12T08:02:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-435161",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[u/chapoton/27972](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/27972)**



---

archive/issue_comments_435162.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-using hash() as suggest in #27886\n+using hash() as suggested in #27886\n``````\n",
    "created_at": "2019-06-12T08:02:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-435162",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-using hash() as suggest in #27886
+using hash() as suggested in #27886
``````




---

archive/issue_events_383581.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-06-12T08:02:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27972#event-383581"
}
```



---

archive/issue_comments_435163.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nan easy one",
    "created_at": "2019-06-12T08:02:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-435163",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:2" align="right">comment:2</div>

an easy one



---

archive/issue_events_383582.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2019-06-12T08:20:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27972#event-383582"
}
```



---

archive/issue_events_383583.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2019-06-12T08:20:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27972#event-383583"
}
```



---

archive/issue_comments_435164.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nLooks good to me.",
    "created_at": "2019-06-12T08:20:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-435164",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:3" align="right">comment:3</div>

Looks good to me.



---

archive/issue_comments_435165.json:
```json
{
    "body": "Reviewer: **Vincent Klein**",
    "created_at": "2019-06-12T08:20:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-435165",
    "user": "https://github.com/vinklein"
}
```

Reviewer: **Vincent Klein**



---

archive/issue_comments_435166.json:
```json
{
    "body": "Changed reviewer from **Vincent Klein** to **Erik Bray**",
    "created_at": "2019-06-12T08:22:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-435166",
    "user": "https://github.com/embray"
}
```

Changed reviewer from **Vincent Klein** to **Erik Bray**



---

archive/issue_comments_435167.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nWas literally in the process of saying the same just now :)",
    "created_at": "2019-06-12T08:22:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-435167",
    "user": "https://github.com/embray"
}
```

<div id="comment:4" align="right">comment:4</div>

Was literally in the process of saying the same just now :)



---

archive/issue_comments_435168.json:
```json
{
    "body": "Changed reviewer from **Erik Bray** to **Vincent Klein**",
    "created_at": "2019-06-12T08:23:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-435168",
    "user": "https://github.com/embray"
}
```

Changed reviewer from **Erik Bray** to **Vincent Klein**



---

archive/issue_comments_435169.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nOops!",
    "created_at": "2019-06-12T08:23:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-435169",
    "user": "https://github.com/embray"
}
```

<div id="comment:5" align="right">comment:5</div>

Oops!



---

archive/issue_comments_435170.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nLet's be fair.",
    "created_at": "2019-06-12T09:17:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-435170",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:6" align="right">comment:6</div>

Let's be fair.



---

archive/issue_comments_435171.json:
```json
{
    "body": "Changed reviewer from **Vincent Klein** to **Vincent Klein, Erik Bray**",
    "created_at": "2019-06-12T09:17:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-435171",
    "user": "https://github.com/vinklein"
}
```

Changed reviewer from **Vincent Klein** to **Vincent Klein, Erik Bray**



---

archive/issue_comments_435172.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThere is nothing wrong with the Sage code, it should work. It would be better to just apply the upstream fix https://github.com/cython/cython/commit/28251032f86c266065e4976080230481b1a1bb29 instead.",
    "created_at": "2019-06-12T09:28:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-435172",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:7" align="right">comment:7</div>

There is nothing wrong with the Sage code, it should work. It would be better to just apply the upstream fix https://github.com/cython/cython/commit/28251032f86c266065e4976080230481b1a1bb29 instead.



---

archive/issue_events_383584.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-06-12T09:28:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27972#event-383584"
}
```



---

archive/issue_events_383585.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-06-12T09:28:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27972#event-383585"
}
```



---

archive/issue_comments_435173.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nBetter maybe, but not for the goal of having all tests pass soon in python3.\n\nJeroen, will you be able to provide your alternative solution as a branch ? You seem to have less activity on trac, so I guess you have more urgent matters to handle.\n\nOtherwise, maybe this could be done in another ticket ?",
    "created_at": "2019-06-12T12:11:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-435173",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:8" align="right">comment:8</div>

Better maybe, but not for the goal of having all tests pass soon in python3.

Jeroen, will you be able to provide your alternative solution as a branch ? You seem to have less activity on trac, so I guess you have more urgent matters to handle.

Otherwise, maybe this could be done in another ticket ?



---

archive/issue_comments_435174.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@fchapoton](#comment:8):\n> Jeroen, will you be able to provide your alternative solution as a branch ?\n\nShould I add it to #27886? It should take little effort.",
    "created_at": "2019-06-12T12:16:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-435174",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@fchapoton](#comment:8):
> Jeroen, will you be able to provide your alternative solution as a branch ?

Should I add it to #27886? It should take little effort.



---

archive/issue_comments_435175.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nYes, please. And hopefully someone will review that ticket...",
    "created_at": "2019-06-12T12:17:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-435175",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:10" align="right">comment:10</div>

Yes, please. And hopefully someone will review that ticket...



---

archive/issue_comments_435176.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@fchapoton](#comment:8):\n> You seem to have less activity on trac, so I guess you have more urgent matters to handle.\n\nNot really \"more urgent matters\" but more \"other matters\".\n\nIn case you are wondering what I have been doing recently: https://docs.python.org/3.8/whatsnew/3.8.html#vectorcall-a-fast-calling-protocol-for-cpython",
    "created_at": "2019-06-12T12:18:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-435176",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@fchapoton](#comment:8):
> You seem to have less activity on trac, so I guess you have more urgent matters to handle.

Not really "more urgent matters" but more "other matters".

In case you are wondering what I have been doing recently: https://docs.python.org/3.8/whatsnew/3.8.html#vectorcall-a-fast-calling-protocol-for-cpython



---

archive/issue_comments_435177.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nThere is a very simple workaround here, that makes logical sense for the tests (passing an object through `hash()` necessarily returns whatever the acceptable type for a hash is).  Let's just fix this without having to rely yet again on patching cython or whatever.",
    "created_at": "2019-06-12T13:05:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-435177",
    "user": "https://github.com/embray"
}
```

<div id="comment:12" align="right">comment:12</div>

There is a very simple workaround here, that makes logical sense for the tests (passing an object through `hash()` necessarily returns whatever the acceptable type for a hash is).  Let's just fix this without having to rely yet again on patching cython or whatever.



---

archive/issue_comments_435178.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI already added the patch to #27886.",
    "created_at": "2019-06-12T13:08:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-435178",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:13" align="right">comment:13</div>

I already added the patch to #27886.



---

archive/issue_comments_435179.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI feel like the changes here make sense independently of the Cython patch: I believe that\n\n```\nsage: D = {1230981308409180310928308123: ZZ} # random large integer\nsage: test_del_dictitem_by_exact_value(D, ZZ, 1230981308409180310928308123)\n```\nwill fail, while\n\n```\nsage: D = {1230981308409180310928308123: ZZ}\nsage: test_del_dictitem_by_exact_value(D, ZZ, hash(1230981308409180310928308123))\n```\nwill work.\n\nI don't object to testing whether small integers are equal to their hash values, but that  is tested in `integer.pyx`. After the changes here, the doctest still tests the appropriate function, and they also indicate how to use the function:\n\n```\nsage: D = {'a': ZZ}\nsage: test_del_dictitem_by_exact_value(D, ZZ, hash('a'))\n```",
    "created_at": "2019-06-12T15:10:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-435179",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:14" align="right">comment:14</div>

I feel like the changes here make sense independently of the Cython patch: I believe that

```
sage: D = {1230981308409180310928308123: ZZ} # random large integer
sage: test_del_dictitem_by_exact_value(D, ZZ, 1230981308409180310928308123)
```
will fail, while

```
sage: D = {1230981308409180310928308123: ZZ}
sage: test_del_dictitem_by_exact_value(D, ZZ, hash(1230981308409180310928308123))
```
will work.

I don't object to testing whether small integers are equal to their hash values, but that  is tested in `integer.pyx`. After the changes here, the doctest still tests the appropriate function, and they also indicate how to use the function:

```
sage: D = {'a': ZZ}
sage: test_del_dictitem_by_exact_value(D, ZZ, hash('a'))
```



---

archive/issue_comments_435180.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@jhpalmieri](#comment:14):\n> I don't object to testing whether small integers are equal to their hash values, but that  is tested in `integer.pyx`.\n\nTrue, but unrelated to this ticket. That's not what this doctest is testing.",
    "created_at": "2019-06-12T15:13:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-435180",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@jhpalmieri](#comment:14):
> I don't object to testing whether small integers are equal to their hash values, but that  is tested in `integer.pyx`.

True, but unrelated to this ticket. That's not what this doctest is testing.



---

archive/issue_comments_435181.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nAre you agreeing with me or disagreeing? I can't tell.\n\nWhat is the doctest supposed to be testing?",
    "created_at": "2019-06-12T16:03:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-435181",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:16" align="right">comment:16</div>

Are you agreeing with me or disagreeing? I can't tell.

What is the doctest supposed to be testing?



---

archive/issue_comments_435182.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@jhpalmieri](#comment:16):\n> What is the doctest supposed to be testing?\n\nThat nothing happens if you give the *wrong* hash value. So basically the test relies on `hash(1) != 2`.",
    "created_at": "2019-06-13T07:02:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-435182",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@jhpalmieri](#comment:16):
> What is the doctest supposed to be testing?

That nothing happens if you give the *wrong* hash value. So basically the test relies on `hash(1) != 2`.



---

archive/issue_comments_435183.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nThe second doctest relies on `hash(1) == 1`. Well, it doesn't rely on it, but if `hash(1) != 1`, then I think it is not testing what is intended.\n\nAnd of course both rely on Sage Integers being valid hash values, which is what is fixed by the patch you posted to #27886.",
    "created_at": "2019-06-13T18:00:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-435183",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:18" align="right">comment:18</div>

The second doctest relies on `hash(1) == 1`. Well, it doesn't rely on it, but if `hash(1) != 1`, then I think it is not testing what is intended.

And of course both rely on Sage Integers being valid hash values, which is what is fixed by the patch you posted to #27886.



---

archive/issue_events_383586.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:50:27Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27972#event-383586"
}
```



---

archive/issue_events_383587.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:50:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27972#event-383587"
}
```



---

archive/issue_comments_435184.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nTickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).",
    "created_at": "2019-06-14T14:50:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-435184",
    "user": "https://github.com/embray"
}
```

<div id="comment:19" align="right">comment:19</div>

Tickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).



---

archive/issue_comments_435185.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nshould we close this one as invalid ?",
    "created_at": "2019-07-07T07:14:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-435185",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:20" align="right">comment:20</div>

should we close this one as invalid ?



---

archive/issue_comments_435186.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nBecause of #28112?",
    "created_at": "2019-07-08T18:54:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-435186",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:21" align="right">comment:21</div>

Because of #28112?



---

archive/issue_comments_435187.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nrather because of the cython upgrade in #27886, which fixes these doctests in py3",
    "created_at": "2019-07-09T19:08:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-435187",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:22" align="right">comment:22</div>

rather because of the cython upgrade in #27886, which fixes these doctests in py3



---

archive/issue_events_383588.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2019-07-10T07:09:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27972#event-383588"
}
```



---

archive/issue_events_383589.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2019-07-10T07:09:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27972#event-383589"
}
```



---

archive/issue_events_383590.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2019-07-10T07:09:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27972#event-383590"
}
```



---

archive/issue_comments_435188.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@fchapoton](#comment:20):\n> should we close this one as invalid ?\n\nSure. All cpython's module tests pass with 8.9.beta1/py3.",
    "created_at": "2019-07-10T07:09:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27972#issuecomment-435188",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@fchapoton](#comment:20):
> should we close this one as invalid ?

Sure. All cpython's module tests pass with 8.9.beta1/py3.



---

archive/issue_events_383591.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2019-07-10T07:10:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27972#event-383591"
}
```



---

archive/issue_events_383592.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2019-07-10T07:10:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27972#event-383592"
}
```



---

archive/issue_events_383593.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-07-13T10:21:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "label": "https://github.com/sagemath/sage/labels/wontfix",
    "label_color": "a6a6a6",
    "label_name": "wontfix",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27972#event-383593"
}
```



---

archive/issue_events_383594.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-07-13T10:21:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27972#event-383594"
}
```



---

archive/issue_events_383595.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-07-13T10:21:32Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27972",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27972#event-383595"
}
```
