# Issue 27061: Fix sage.misc.inline_fortran with Numpy 1.16

archive/issues_026824.json:
```json
{
    "body": "Numpy 1.16 introduced a slight backwards incompatibility such that the\nway we were calling f2py.compile() would no longer work for capturing a\nlog of the f2py output.\n\nIt turns out f2py.compile() doesn't do anything very interesting anyways\nand has many redundancies with what we do here: It's easy to call f2py\nin a subprocess ourselves with the correct arguments and handle the\noutput.\n\n\nBranch/Commit: 81cc6bf6686103a9f4717ac99913f447f90c1821\n\nReviewer: Jeroen Demeyer\n\nAuthor: Erik Bray\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/27061\n\n",
    "closed_at": "2019-01-26T15:53:14Z",
    "created_at": "2019-01-15T15:35:09Z",
    "labels": [
        "component: misc",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.7",
    "title": "Fix sage.misc.inline_fortran with Numpy 1.16",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27061",
    "user": "https://github.com/embray"
}
```
Numpy 1.16 introduced a slight backwards incompatibility such that the
way we were calling f2py.compile() would no longer work for capturing a
log of the f2py output.

It turns out f2py.compile() doesn't do anything very interesting anyways
and has many redundancies with what we do here: It's easy to call f2py
in a subprocess ourselves with the correct arguments and handle the
output.


Branch/Commit: 81cc6bf6686103a9f4717ac99913f447f90c1821

Reviewer: Jeroen Demeyer

Author: Erik Bray

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/27061





---

archive/issue_comments_401785.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-01-15T15:35:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27061#issuecomment-401785",
    "user": "https://github.com/embray"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_401786.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to misc.",
    "created_at": "2019-01-15T15:37:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27061#issuecomment-401786",
    "user": "https://github.com/embray"
}
```

Changing component from PLEASE CHANGE to misc.



---

archive/issue_comments_401787.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,12 @@\n-See commit message for more details.\n+Numpy 1.16 introduced a slight backwards incompatibility such that the\n+way we were calling f2py.compile() would no longer work for capturing a\n+log of the f2py output.\n+\n+It turns out f2py.compile() doesn't do anything very interesting anyways\n+and has many redundancies with what we do here: It's easy to call f2py\n+in a subprocess ourselves with the correct arguments and handle the\n+output.\n+\n \n Author: Erik Bray\n \n```\n",
    "created_at": "2019-01-15T18:02:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27061#issuecomment-401787",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,12 @@
-See commit message for more details.
+Numpy 1.16 introduced a slight backwards incompatibility such that the
+way we were calling f2py.compile() would no longer work for capturing a
+log of the f2py output.
+
+It turns out f2py.compile() doesn't do anything very interesting anyways
+and has many redundancies with what we do here: It's easy to call f2py
+in a subprocess ourselves with the correct arguments and handle the
+output.
+
 
 Author: Erik Bray
 
```




---

archive/issue_comments_401788.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-01-21T09:30:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27061#issuecomment-401788",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_401789.json:
```json
{
    "body": "<a id='comment:5'></a>Works for me.",
    "created_at": "2019-01-21T09:30:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27061#issuecomment-401789",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'></a>Works for me.



---

archive/issue_comments_401790.json:
```json
{
    "body": "<a id='comment:6'></a>FWIW there is an upstream report here: https://github.com/numpy/numpy/issues/12756\n\nIt was just closed, but wrongfully IMO.",
    "created_at": "2019-01-23T10:24:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27061#issuecomment-401790",
    "user": "https://github.com/embray"
}
```

<a id='comment:6'></a>FWIW there is an upstream report here: https://github.com/numpy/numpy/issues/12756

It was just closed, but wrongfully IMO.



---

archive/issue_comments_401791.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-01-26T15:53:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27061#issuecomment-401791",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_067217.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-01-26T15:53:14Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27061",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27061#event-67217"
}
```
