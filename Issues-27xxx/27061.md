# Issue 27061: Fix sage.misc.inline_fortran with Numpy 1.16

archive/issues_026824.json:
```json
{
    "body": "Numpy 1.16 introduced a slight backwards incompatibility such that the\nway we were calling f2py.compile() would no longer work for capturing a\nlog of the f2py output.\n\nIt turns out f2py.compile() doesn't do anything very interesting anyways\nand has many redundancies with what we do here: It's easy to call f2py\nin a subprocess ourselves with the correct arguments and handle the\noutput.\n\n\nBranch/Commit: [81cc6bf6686103a9f4717ac99913f447f90c1821](https://github.com/sagemath/sagetrac-mirror/commit/81cc6bf6686103a9f4717ac99913f447f90c1821)\n\nReviewer: Jeroen Demeyer\n\nAuthor: Erik Bray\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/27061\n\n",
    "closed_at": "2019-01-26T15:53:14Z",
    "created_at": "2019-01-15T15:35:09Z",
    "labels": [
        "component: misc",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.7",
    "title": "Fix sage.misc.inline_fortran with Numpy 1.16",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27061",
    "user": "https://github.com/embray"
}
```
Numpy 1.16 introduced a slight backwards incompatibility such that the
way we were calling f2py.compile() would no longer work for capturing a
log of the f2py output.

It turns out f2py.compile() doesn't do anything very interesting anyways
and has many redundancies with what we do here: It's easy to call f2py
in a subprocess ourselves with the correct arguments and handle the
output.


Branch/Commit: [81cc6bf6686103a9f4717ac99913f447f90c1821](https://github.com/sagemath/sagetrac-mirror/commit/81cc6bf6686103a9f4717ac99913f447f90c1821)

Reviewer: Jeroen Demeyer

Author: Erik Bray

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/27061





---

archive/issue_comments_522033.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-01-15T15:35:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27061#issuecomment-522033",
    "user": "https://github.com/embray"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_522034.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,9 @@\n-See commit message for more details.\n+Numpy 1.16 introduced a slight backwards incompatibility such that the\n+way we were calling f2py.compile() would no longer work for capturing a\n+log of the f2py output.\n+\n+It turns out f2py.compile() doesn't do anything very interesting anyways\n+and has many redundancies with what we do here: It's easy to call f2py\n+in a subprocess ourselves with the correct arguments and handle the\n+output.\n+\n``````\n",
    "created_at": "2019-01-15T18:02:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27061#issuecomment-522034",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,9 @@
-See commit message for more details.
+Numpy 1.16 introduced a slight backwards incompatibility such that the
+way we were calling f2py.compile() would no longer work for capturing a
+log of the f2py output.
+
+It turns out f2py.compile() doesn't do anything very interesting anyways
+and has many redundancies with what we do here: It's easy to call f2py
+in a subprocess ourselves with the correct arguments and handle the
+output.
+
``````




---

archive/issue_comments_522035.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Jeroen Demeyer\"",
    "created_at": "2019-01-21T09:21:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27061#issuecomment-522035",
    "user": "https://github.com/jdemeyer"
}
```

Changing reviewer from "" to "Jeroen Demeyer"



---

archive/issue_comments_522036.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-01-21T09:30:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27061#issuecomment-522036",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_522037.json:
```json
{
    "body": "<a id='comment:5'></a>\nWorks for me.",
    "created_at": "2019-01-21T09:30:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27061#issuecomment-522037",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'></a>
Works for me.



---

archive/issue_comments_522038.json:
```json
{
    "body": "<a id='comment:6'></a>\nFWIW there is an upstream report here: https://github.com/numpy/numpy/issues/12756\n\nIt was just closed, but wrongfully IMO.",
    "created_at": "2019-01-23T10:24:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27061#issuecomment-522038",
    "user": "https://github.com/embray"
}
```

<a id='comment:6'></a>
FWIW there is an upstream report here: https://github.com/numpy/numpy/issues/12756

It was just closed, but wrongfully IMO.



---

archive/issue_comments_522039.json:
```json
{
    "body": "Changing branch from \"u/embray/misc/inline-fortran-update\" to \"81cc6bf6686103a9f4717ac99913f447f90c1821\"",
    "created_at": "2019-01-26T15:53:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27061#issuecomment-522039",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/embray/misc/inline-fortran-update" to "81cc6bf6686103a9f4717ac99913f447f90c1821"



---

archive/issue_comments_522040.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-01-26T15:53:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27061",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27061#issuecomment-522040",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_076261.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-01-26T15:53:14Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27061",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27061#event-76261"
}
```
