# Issue 27908: py3: fix doctests in multi_polynomial_ideal and toy_buchberger

archive/issues_027671.json:
```json
{
    "body": "This ticket fixes all the doctests in `multi_polynomial_ideal` and `toy_buchberger`.\n\nBranch/Commit: 613b8f6836c8d85a294478ae84fcca4f5dec68f9\n\nReviewer: Fr\u00e9d\u00e9ric Chapoton\n\nAuthor: Markus Wageringel\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/27908\n\n",
    "closed_at": "2019-06-27T20:13:24Z",
    "created_at": "2019-05-31T19:21:26Z",
    "labels": [
        "component: python3"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.9",
    "title": "py3: fix doctests in multi_polynomial_ideal and toy_buchberger",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27908",
    "user": "https://github.com/mwageringel"
}
```
This ticket fixes all the doctests in `multi_polynomial_ideal` and `toy_buchberger`.

Branch/Commit: 613b8f6836c8d85a294478ae84fcca4f5dec68f9

Reviewer: Frédéric Chapoton

Author: Markus Wageringel

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/27908





---

archive/issue_comments_540025.json:
```json
{
    "body": "Changing commit from \"\" to \"81924255c063cf7b27688bd9ecfdbe00cf2ddbcb\"",
    "created_at": "2019-05-31T19:59:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27908#issuecomment-540025",
    "user": "https://github.com/mwageringel"
}
```

Changing commit from "" to "81924255c063cf7b27688bd9ecfdbe00cf2ddbcb"



---

archive/issue_comments_540026.json:
```json
{
    "body": "Changing branch from \"\" to \"u/gh-mwageringel/27908\"",
    "created_at": "2019-05-31T19:59:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27908#issuecomment-540026",
    "user": "https://github.com/mwageringel"
}
```

Changing branch from "" to "u/gh-mwageringel/27908"



---

archive/issue_comments_540027.json:
```json
{
    "body": "Changing author from \"\" to \"Markus Wageringel\"",
    "created_at": "2019-05-31T19:59:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27908#issuecomment-540027",
    "user": "https://github.com/mwageringel"
}
```

Changing author from "" to "Markus Wageringel"



---

archive/issue_comments_540028.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-05-31T19:59:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27908#issuecomment-540028",
    "user": "https://github.com/mwageringel"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_540029.json:
```json
{
    "body": "<a id='comment:1'></a>The hash of polynomials intenionally makes use of the string hash of its variable names. This differs in each Python 3 session, so that the order of polynomials when iterating over sets is not consistent. Sets are used both in the implementation of `random_element()` and `buchberger()`, so this is the root reason for all the doctest failures fixed in this ticket.\n\nIn `toy_buchberger` I chose to keep the protocol output of `buchberger()` by declaring it random, as it seems educationally useful. I could have used a py2 directive, but chose not to mainly to keep the test from being removed when Python 2 support is dropped. I removed the protocol output for `buchberger_improved()` and only test for the number of reductions-to-zero, as it seems enough to see the protocol once in the docs.\n\nI also fixed most of the PEP warnings in `toy_buchberger`.\n\n---\nNew commits:",
    "created_at": "2019-05-31T19:59:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27908#issuecomment-540029",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:1'></a>The hash of polynomials intenionally makes use of the string hash of its variable names. This differs in each Python 3 session, so that the order of polynomials when iterating over sets is not consistent. Sets are used both in the implementation of `random_element()` and `buchberger()`, so this is the root reason for all the doctest failures fixed in this ticket.

In `toy_buchberger` I chose to keep the protocol output of `buchberger()` by declaring it random, as it seems educationally useful. I could have used a py2 directive, but chose not to mainly to keep the test from being removed when Python 2 support is dropped. I removed the protocol output for `buchberger_improved()` and only test for the number of reductions-to-zero, as it seems enough to see the protocol once in the docs.

I also fixed most of the PEP warnings in `toy_buchberger`.

---
New commits:



---

archive/issue_comments_540030.json:
```json
{
    "body": "<a id='comment:2'></a>Could you please make the same branch without the pep changes ? I see that you have separated commits, and the pep changes only make it more difficult to understand what you really do. Thanks!",
    "created_at": "2019-06-12T07:52:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27908#issuecomment-540030",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:2'></a>Could you please make the same branch without the pep changes ? I see that you have separated commits, and the pep changes only make it more difficult to understand what you really do. Thanks!



---

archive/issue_comments_540031.json:
```json
{
    "body": "Changing commit from \"81924255c063cf7b27688bd9ecfdbe00cf2ddbcb\" to \"613b8f6836c8d85a294478ae84fcca4f5dec68f9\"",
    "created_at": "2019-06-12T17:31:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27908#issuecomment-540031",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "81924255c063cf7b27688bd9ecfdbe00cf2ddbcb" to "613b8f6836c8d85a294478ae84fcca4f5dec68f9"



---

archive/issue_comments_540032.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-06-12T17:31:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27908#issuecomment-540032",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_540033.json:
```json
{
    "body": "<a id='comment:4'></a>Of course. I have removed the last commit and will create a new ticket for it, once this one is merged.",
    "created_at": "2019-06-12T17:36:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27908#issuecomment-540033",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:4'></a>Of course. I have removed the last commit and will create a new ticket for it, once this one is merged.



---

archive/issue_comments_540034.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Fr\u00e9d\u00e9ric Chapoton\"",
    "created_at": "2019-06-12T19:08:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27908#issuecomment-540034",
    "user": "https://github.com/fchapoton"
}
```

Changing reviewer from "" to "Frédéric Chapoton"



---

archive/issue_comments_540035.json:
```json
{
    "body": "<a id='comment:5'></a>ok, thanks. This looks good enough. I am setting to positive.",
    "created_at": "2019-06-12T19:08:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27908#issuecomment-540035",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'></a>ok, thanks. This looks good enough. I am setting to positive.



---

archive/issue_comments_540036.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-06-12T19:08:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27908#issuecomment-540036",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_540037.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-06-27T20:13:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27908#issuecomment-540037",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_540038.json:
```json
{
    "body": "Changing branch from \"u/gh-mwageringel/27908\" to \"613b8f6836c8d85a294478ae84fcca4f5dec68f9\"",
    "created_at": "2019-06-27T20:13:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27908#issuecomment-540038",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/gh-mwageringel/27908" to "613b8f6836c8d85a294478ae84fcca4f5dec68f9"



---

archive/issue_events_069180.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-06-27T20:13:24Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27908",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27908#event-69180"
}
```



---

archive/issue_events_069181.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-07-03T11:34:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27908",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27908#event-69181"
}
```



---

archive/issue_comments_540039.json:
```json
{
    "body": "<a id='comment:7'></a>Not in Sage 8.8.  Let's please to try keep tickets' milestones related to the release in which we actually intend to include them, and in particular the release in which they were *actually* included, especially when closing tickets.",
    "created_at": "2019-07-03T11:34:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27908#issuecomment-540039",
    "user": "https://github.com/embray"
}
```

<a id='comment:7'></a>Not in Sage 8.8.  Let's please to try keep tickets' milestones related to the release in which we actually intend to include them, and in particular the release in which they were *actually* included, especially when closing tickets.
