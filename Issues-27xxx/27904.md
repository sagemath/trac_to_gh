# Issue 27904: py3: fix last doctest in interfaces

archive/issues_027667.json:
```json
{
    "assignees": [],
    "body": "\n\nCC:  @tscrim @jhpalmieri @kiwifb\n\nBranch/Commit: **[08a54c2](https://github.com/sagemath/sagetrac-mirror/commit/08a54c28a9e3971cde5f494b8f1058f547aa4883)**\n\nReviewer: **John Palmieri**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/27904_\n\n",
    "closed_at": "2019-06-05T18:30:53Z",
    "created_at": "2019-05-31T13:56:05Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20python3",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "py3: fix last doctest in interfaces",
    "type": "issue",
    "updated_at": "2019-06-05T18:30:53Z",
    "url": "https://github.com/sagemath/sage/issues/27904",
    "user": "https://github.com/fchapoton"
}
```


CC:  @tscrim @jhpalmieri @kiwifb

Branch/Commit: **[08a54c2](https://github.com/sagemath/sagetrac-mirror/commit/08a54c28a9e3971cde5f494b8f1058f547aa4883)**

Reviewer: **John Palmieri**

Author: **Frédéric Chapoton**

_Issue created by migration from https://trac.sagemath.org/ticket/27904_





---

archive/issue_events_364467.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-05-31T13:56:05Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27904",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27904#event-364467"
}
```



---

archive/issue_events_364468.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-05-31T13:56:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27904",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20python3",
    "label_color": "000080",
    "label_name": "component: python3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27904#event-364468"
}
```



---

archive/issue_events_364469.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-05-31T13:56:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27904",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27904#event-364469"
}
```



---

archive/issue_events_364470.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-05-31T13:56:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27904",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27904#event-364470"
}
```



---

archive/issue_comments_436482.json:
```json
{
    "body": "Commit: **[9ff58e0](https://github.com/sagemath/sagetrac-mirror/commit/9ff58e06e4b4cdd4f970fcf8d43a25334934d05f)**",
    "created_at": "2019-05-31T14:52:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27904",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27904#issuecomment-436482",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[9ff58e0](https://github.com/sagemath/sagetrac-mirror/commit/9ff58e06e4b4cdd4f970fcf8d43a25334934d05f)**



---

archive/issue_comments_436483.json:
```json
{
    "body": "Branch: **[u/chapoton/27904](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/27904)**",
    "created_at": "2019-05-31T14:52:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27904",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27904#issuecomment-436483",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[u/chapoton/27904](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/27904)**



---

archive/issue_events_364471.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-05-31T14:52:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27904",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27904#event-364471"
}
```



---

archive/issue_comments_436484.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9ff58e06e4b4cdd4f970fcf8d43a25334934d05f\">9ff58e0</a></td><td><code>py3: fix one doctest in interfaces</code></td></tr></table>\n",
    "created_at": "2019-05-31T14:52:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27904",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27904#issuecomment-436484",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'>Comment 1:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9ff58e06e4b4cdd4f970fcf8d43a25334934d05f">9ff58e0</a></td><td><code>py3: fix one doctest in interfaces</code></td></tr></table>




---

archive/issue_comments_436485.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\ngreen bot, please review this simple change",
    "created_at": "2019-05-31T19:40:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27904",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27904#issuecomment-436485",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:2'>Comment 2:</a>
green bot, please review this simple change



---

archive/issue_comments_436486.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nThis fixes one doctest in interfaces, but not the last one, at least not for me. I still see\n\n```\nsage -t src/sage/interfaces/expect.py\n**********************************************************************\nFile \"src/sage/interfaces/expect.py\", line 769, in sage.interfaces.expect.Expect._eval_line_using_file\nFailed example:\n    singular._eval_line_using_file('def a=3;', restart_if_needed=False)\nExpected:\n    Traceback (most recent call last):\n    ...\n    RuntimeError: Singular terminated unexpectedly while reading in a large line...\nGot:\n    <BLANKLINE>\n    Traceback (most recent call last):\n      File \"/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/sage/interfaces/expect.py\", line 921, in _eval_line\n        E.sendline(line)\n      File \"/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/pexpect/pty_spawn.py\", line 577, in sendline\n        return self.send(s + self.linesep)\n      File \"/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/pexpect/pty_spawn.py\", line 568, in send\n        return os.write(self.child_fd, b)\n    OSError: [Errno 5] Input/output error\n    <BLANKLINE>\n    During handling of the above exception, another exception occurred:\n    <BLANKLINE>\n    Traceback (most recent call last):\n      File \"/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/sage/interfaces/expect.py\", line 791, in _eval_line_using_file\n        s = self._eval_line(self._read_in_file_command(tmp_to_use), allow_use_file=False, restart_if_needed=False)\n      File \"/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/sage/interfaces/expect.py\", line 945, in _eval_line\n        raise_(RuntimeError, RuntimeError(\"%s\\nError evaluating %s in %s\" % (msg, line, self)), sys.exc_info()[2])\n      File \"/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/six.py\", line 692, in reraise\n        raise value.with_traceback(tb)\n      File \"/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/sage/interfaces/expect.py\", line 921, in _eval_line\n        E.sendline(line)\n      File \"/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/pexpect/pty_spawn.py\", line 577, in sendline\n        return self.send(s + self.linesep)\n      File \"/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/pexpect/pty_spawn.py\", line 568, in send\n        return os.write(self.child_fd, b)\n    RuntimeError: [Errno 5] Input/output error\n    Error evaluating < \"/Users/jpalmier/.sage/temp/D-172-25-224-210.dhcp4.washington.edu/50145/interface/tmp50259\"; in Singular\n    <BLANKLINE>\n    During handling of the above exception, another exception occurred:\n    <BLANKLINE>\n    Traceback (most recent call last):\n      File \"/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1105, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.interfaces.expect.Expect._eval_line_using_file[6]>\", line 1, in <module>\n        singular._eval_line_using_file('def a=3;', restart_if_needed=False)\n      File \"/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/sage/interfaces/expect.py\", line 818, in _eval_line_using_file\n        if \"Input/output error\" in msg[0]:  # This occurs on non-linux machines\n    TypeError: 'RuntimeError' object is not subscriptable\n**********************************************************************\nFile \"src/sage/interfaces/expect.py\", line 899, in sage.interfaces.expect.Expect._eval_line\nFailed example:\n    singular._eval_line_using_file('def a=3;', restart_if_needed=False)\nExpected:\n    Traceback (most recent call last):\n    ...\n    RuntimeError: Singular terminated unexpectedly while reading in a large line...\nGot:\n    <BLANKLINE>\n    Traceback (most recent call last):\n      File \"/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/sage/interfaces/expect.py\", line 921, in _eval_line\n        E.sendline(line)\n      File \"/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/pexpect/pty_spawn.py\", line 577, in sendline\n        return self.send(s + self.linesep)\n      File \"/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/pexpect/pty_spawn.py\", line 568, in send\n        return os.write(self.child_fd, b)\n    OSError: [Errno 5] Input/output error\n    <BLANKLINE>\n    During handling of the above exception, another exception occurred:\n    <BLANKLINE>\n    Traceback (most recent call last):\n      File \"/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/sage/interfaces/expect.py\", line 791, in _eval_line_using_file\n        s = self._eval_line(self._read_in_file_command(tmp_to_use), allow_use_file=False, restart_if_needed=False)\n      File \"/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/sage/interfaces/expect.py\", line 945, in _eval_line\n        raise_(RuntimeError, RuntimeError(\"%s\\nError evaluating %s in %s\" % (msg, line, self)), sys.exc_info()[2])\n      File \"/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/six.py\", line 692, in reraise\n        raise value.with_traceback(tb)\n      File \"/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/sage/interfaces/expect.py\", line 921, in _eval_line\n        E.sendline(line)\n      File \"/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/pexpect/pty_spawn.py\", line 577, in sendline\n        return self.send(s + self.linesep)\n      File \"/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/pexpect/pty_spawn.py\", line 568, in send\n        return os.write(self.child_fd, b)\n    RuntimeError: [Errno 5] Input/output error\n    Error evaluating < \"/Users/jpalmier/.sage/temp/D-172-25-224-210.dhcp4.washington.edu/50145/interface/tmp50265\"; in Singular\n    <BLANKLINE>\n    During handling of the above exception, another exception occurred:\n    <BLANKLINE>\n    Traceback (most recent call last):\n      File \"/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1105, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.interfaces.expect.Expect._eval_line[13]>\", line 1, in <module>\n        singular._eval_line_using_file('def a=3;', restart_if_needed=False)\n      File \"/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/sage/interfaces/expect.py\", line 818, in _eval_line_using_file\n        if \"Input/output error\" in msg[0]:  # This occurs on non-linux machines\n    TypeError: 'RuntimeError' object is not subscriptable\n**********************************************************************\n2 items had failures:\n   1 of  16 in sage.interfaces.expect.Expect._eval_line\n   1 of   9 in sage.interfaces.expect.Expect._eval_line_using_file\n    [101 tests, 2 failures, 3.35 s]\n----------------------------------------------------------------------\nsage -t src/sage/interfaces/expect.py  # 2 doctests failed\n```",
    "created_at": "2019-05-31T19:42:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27904",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27904#issuecomment-436486",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:3'>Comment 3:</a>
This fixes one doctest in interfaces, but not the last one, at least not for me. I still see

```
sage -t src/sage/interfaces/expect.py
**********************************************************************
File "src/sage/interfaces/expect.py", line 769, in sage.interfaces.expect.Expect._eval_line_using_file
Failed example:
    singular._eval_line_using_file('def a=3;', restart_if_needed=False)
Expected:
    Traceback (most recent call last):
    ...
    RuntimeError: Singular terminated unexpectedly while reading in a large line...
Got:
    <BLANKLINE>
    Traceback (most recent call last):
      File "/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/sage/interfaces/expect.py", line 921, in _eval_line
        E.sendline(line)
      File "/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/pexpect/pty_spawn.py", line 577, in sendline
        return self.send(s + self.linesep)
      File "/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/pexpect/pty_spawn.py", line 568, in send
        return os.write(self.child_fd, b)
    OSError: [Errno 5] Input/output error
    <BLANKLINE>
    During handling of the above exception, another exception occurred:
    <BLANKLINE>
    Traceback (most recent call last):
      File "/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/sage/interfaces/expect.py", line 791, in _eval_line_using_file
        s = self._eval_line(self._read_in_file_command(tmp_to_use), allow_use_file=False, restart_if_needed=False)
      File "/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/sage/interfaces/expect.py", line 945, in _eval_line
        raise_(RuntimeError, RuntimeError("%s\nError evaluating %s in %s" % (msg, line, self)), sys.exc_info()[2])
      File "/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/six.py", line 692, in reraise
        raise value.with_traceback(tb)
      File "/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/sage/interfaces/expect.py", line 921, in _eval_line
        E.sendline(line)
      File "/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/pexpect/pty_spawn.py", line 577, in sendline
        return self.send(s + self.linesep)
      File "/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/pexpect/pty_spawn.py", line 568, in send
        return os.write(self.child_fd, b)
    RuntimeError: [Errno 5] Input/output error
    Error evaluating < "/Users/jpalmier/.sage/temp/D-172-25-224-210.dhcp4.washington.edu/50145/interface/tmp50259"; in Singular
    <BLANKLINE>
    During handling of the above exception, another exception occurred:
    <BLANKLINE>
    Traceback (most recent call last):
      File "/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1105, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.interfaces.expect.Expect._eval_line_using_file[6]>", line 1, in <module>
        singular._eval_line_using_file('def a=3;', restart_if_needed=False)
      File "/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/sage/interfaces/expect.py", line 818, in _eval_line_using_file
        if "Input/output error" in msg[0]:  # This occurs on non-linux machines
    TypeError: 'RuntimeError' object is not subscriptable
**********************************************************************
File "src/sage/interfaces/expect.py", line 899, in sage.interfaces.expect.Expect._eval_line
Failed example:
    singular._eval_line_using_file('def a=3;', restart_if_needed=False)
Expected:
    Traceback (most recent call last):
    ...
    RuntimeError: Singular terminated unexpectedly while reading in a large line...
Got:
    <BLANKLINE>
    Traceback (most recent call last):
      File "/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/sage/interfaces/expect.py", line 921, in _eval_line
        E.sendline(line)
      File "/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/pexpect/pty_spawn.py", line 577, in sendline
        return self.send(s + self.linesep)
      File "/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/pexpect/pty_spawn.py", line 568, in send
        return os.write(self.child_fd, b)
    OSError: [Errno 5] Input/output error
    <BLANKLINE>
    During handling of the above exception, another exception occurred:
    <BLANKLINE>
    Traceback (most recent call last):
      File "/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/sage/interfaces/expect.py", line 791, in _eval_line_using_file
        s = self._eval_line(self._read_in_file_command(tmp_to_use), allow_use_file=False, restart_if_needed=False)
      File "/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/sage/interfaces/expect.py", line 945, in _eval_line
        raise_(RuntimeError, RuntimeError("%s\nError evaluating %s in %s" % (msg, line, self)), sys.exc_info()[2])
      File "/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/six.py", line 692, in reraise
        raise value.with_traceback(tb)
      File "/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/sage/interfaces/expect.py", line 921, in _eval_line
        E.sendline(line)
      File "/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/pexpect/pty_spawn.py", line 577, in sendline
        return self.send(s + self.linesep)
      File "/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/pexpect/pty_spawn.py", line 568, in send
        return os.write(self.child_fd, b)
    RuntimeError: [Errno 5] Input/output error
    Error evaluating < "/Users/jpalmier/.sage/temp/D-172-25-224-210.dhcp4.washington.edu/50145/interface/tmp50265"; in Singular
    <BLANKLINE>
    During handling of the above exception, another exception occurred:
    <BLANKLINE>
    Traceback (most recent call last):
      File "/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1105, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.interfaces.expect.Expect._eval_line[13]>", line 1, in <module>
        singular._eval_line_using_file('def a=3;', restart_if_needed=False)
      File "/Users/jpalmier/Desktop/Sage/sage_builds/PYTHON3/sage-8.8.beta7/local/lib/python3.7/site-packages/sage/interfaces/expect.py", line 818, in _eval_line_using_file
        if "Input/output error" in msg[0]:  # This occurs on non-linux machines
    TypeError: 'RuntimeError' object is not subscriptable
**********************************************************************
2 items had failures:
   1 of  16 in sage.interfaces.expect.Expect._eval_line
   1 of   9 in sage.interfaces.expect.Expect._eval_line_using_file
    [101 tests, 2 failures, 3.35 s]
----------------------------------------------------------------------
sage -t src/sage/interfaces/expect.py  # 2 doctests failed
```



---

archive/issue_comments_436487.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nOne needs to replace `msg[0]` by `msg.args[0]`. Let me do that.",
    "created_at": "2019-05-31T19:46:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27904",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27904#issuecomment-436487",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:4'>Comment 4:</a>
One needs to replace `msg[0]` by `msg.args[0]`. Let me do that.



---

archive/issue_comments_436488.json:
```json
{
    "body": "Changed commit from **[9ff58e0](https://github.com/sagemath/sagetrac-mirror/commit/9ff58e06e4b4cdd4f970fcf8d43a25334934d05f)** to **[08a54c2](https://github.com/sagemath/sagetrac-mirror/commit/08a54c28a9e3971cde5f494b8f1058f547aa4883)**",
    "created_at": "2019-05-31T19:50:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27904",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27904#issuecomment-436488",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9ff58e0](https://github.com/sagemath/sagetrac-mirror/commit/9ff58e06e4b4cdd4f970fcf8d43a25334934d05f)** to **[08a54c2](https://github.com/sagemath/sagetrac-mirror/commit/08a54c28a9e3971cde5f494b8f1058f547aa4883)**



---

archive/issue_comments_436489.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/08a54c28a9e3971cde5f494b8f1058f547aa4883\">08a54c2</a></td><td><code>trac 27904 fix msg handling in expect</code></td></tr></table>\n",
    "created_at": "2019-05-31T19:50:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27904",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27904#issuecomment-436489",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:5'>Comment 5:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/08a54c28a9e3971cde5f494b8f1058f547aa4883">08a54c2</a></td><td><code>trac 27904 fix msg handling in expect</code></td></tr></table>




---

archive/issue_comments_436490.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nworks for me. Please check if it works for you.",
    "created_at": "2019-05-31T19:52:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27904",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27904#issuecomment-436490",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'>Comment 6:</a>
works for me. Please check if it works for you.



---

archive/issue_events_364472.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2019-05-31T20:29:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27904",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27904#event-364472"
}
```



---

archive/issue_events_364473.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2019-05-31T20:29:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27904",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27904#event-364473"
}
```



---

archive/issue_comments_436491.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nThank you, works with Python 2 and 3.",
    "created_at": "2019-05-31T20:29:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27904",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27904#issuecomment-436491",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:7'>Comment 7:</a>
Thank you, works with Python 2 and 3.



---

archive/issue_comments_436492.json:
```json
{
    "body": "Reviewer: **John Palmieri**",
    "created_at": "2019-05-31T20:29:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27904",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27904#issuecomment-436492",
    "user": "https://github.com/jhpalmieri"
}
```

Reviewer: **John Palmieri**



---

archive/issue_comments_436493.json:
```json
{
    "body": "Changed branch from **[u/chapoton/27904](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/27904)** to **[08a54c2](https://github.com/sagemath/sagetrac-mirror/commit/08a54c28a9e3971cde5f494b8f1058f547aa4883)**",
    "created_at": "2019-06-05T18:30:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27904",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27904#issuecomment-436493",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/chapoton/27904](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/27904)** to **[08a54c2](https://github.com/sagemath/sagetrac-mirror/commit/08a54c28a9e3971cde5f494b8f1058f547aa4883)**



---

archive/issue_events_364474.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-06-05T18:30:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27904",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27904#event-364474"
}
```



---

archive/issue_events_364475.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "6a4a8c0e7121438f6f9512dd53306b6d5f24220c",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-06-05T18:30:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27904",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27904#event-364475"
}
```
