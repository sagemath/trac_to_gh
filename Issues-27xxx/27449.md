# Issue 27449: py3: fix all doctests in schemes/product_projective

archive/issues_027212.json:
```json
{
    "body": "by adding a missing `__len__` method.\n\nplus some light code cleanup.\n\nBranch/Commit: 9440e0a567a9aac62dd853c9e102b5128488d757\n\nReviewer: Travis Scrimshaw\n\nAuthor: Fr\u00e9d\u00e9ric Chapoton\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/27449\n\n",
    "closed_at": "2019-03-11T22:42:05Z",
    "created_at": "2019-03-09T13:17:47Z",
    "labels": [
        "component: python3"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.7",
    "title": "py3: fix all doctests in schemes/product_projective",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27449",
    "user": "https://github.com/fchapoton"
}
```
by adding a missing `__len__` method.

plus some light code cleanup.

Branch/Commit: 9440e0a567a9aac62dd853c9e102b5128488d757

Reviewer: Travis Scrimshaw

Author: Frédéric Chapoton

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/27449





---

archive/issue_comments_529317.json:
```json
{
    "body": "Changing branch from \"\" to \"u/chapoton/27449\"",
    "created_at": "2019-03-09T13:18:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27449",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27449#issuecomment-529317",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "" to "u/chapoton/27449"



---

archive/issue_comments_529318.json:
```json
{
    "body": "Changing commit from \"\" to \"9440e0a567a9aac62dd853c9e102b5128488d757\"",
    "created_at": "2019-03-09T13:18:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27449",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27449#issuecomment-529318",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "" to "9440e0a567a9aac62dd853c9e102b5128488d757"



---

archive/issue_comments_529319.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-03-09T13:18:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27449",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27449#issuecomment-529319",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_529320.json:
```json
{
    "body": "<a id='comment:1'></a>New commits:",
    "created_at": "2019-03-09T13:18:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27449",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27449#issuecomment-529320",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'></a>New commits:



---

archive/issue_comments_529321.json:
```json
{
    "body": "<a id='comment:2'></a>green bot, please review",
    "created_at": "2019-03-09T16:38:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27449",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27449#issuecomment-529321",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:2'></a>green bot, please review



---

archive/issue_comments_529322.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2019-03-09T21:29:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27449",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27449#issuecomment-529322",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_529323.json:
```json
{
    "body": "<a id='comment:3'></a>It turns out that it is actually faster to do a `yield` statement in Python2 than give a generator object back for a single list:\n\n```\nsage: def gen(n):\n....:     return (x for x in range(n))\nsage: def it(n):\n....:     for x in range(n):\n....:         yield x\nsage: %timeit len(list(gen(5)))\n1000000 loops, best of 3: 1.15 \u00b5s per loop\nsage: %timeit len(list(it(5)))\n1000000 loops, best of 3: 1.05 \u00b5s per loop\n\nsage: %timeit len(list(gen(100)))\n100000 loops, best of 3: 5.18 \u00b5s per loop\nsage: %timeit len(list(it(100)))\n100000 loops, best of 3: 4.64 \u00b5s per loop\n\nsage: %timeit len(list(gen(10000)))\n1000 loops, best of 3: 402 \u00b5s per loop\nsage: %timeit len(list(it(10000)))\n1000 loops, best of 3: 385 \u00b5s per loop\n```\nFor a double, there ends up being not much noticable difference:\n\n```\nsage: def gen(n):\n....:     return (x*y for x in range(n) for y in range(n))\nsage: def it(n):\n....:     for x in range(n):\n....:         for y in range(n):\n....:             yield x*y\nsage: %timeit len(list(gen(5)))\n100000 loops, best of 3: 3.56 \u00b5s per loop\nsage: %timeit len(list(it(5)))\n100000 loops, best of 3: 3.41 \u00b5s per loop\nsage: %timeit len(list(gen(100)))\n1000 loops, best of 3: 530 \u00b5s per loop\nsage: %timeit len(list(it(100)))\n1000 loops, best of 3: 534 \u00b5s per loop\n```\nI am not saying that anything needs to be changed (I actually like the simplicity of returning the generator), just pointing out some timings (this probably does not need to be super optimized anyways).\n\nSo LGTM.",
    "created_at": "2019-03-09T21:29:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27449",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27449#issuecomment-529323",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:3'></a>It turns out that it is actually faster to do a `yield` statement in Python2 than give a generator object back for a single list:

```
sage: def gen(n):
....:     return (x for x in range(n))
sage: def it(n):
....:     for x in range(n):
....:         yield x
sage: %timeit len(list(gen(5)))
1000000 loops, best of 3: 1.15 µs per loop
sage: %timeit len(list(it(5)))
1000000 loops, best of 3: 1.05 µs per loop

sage: %timeit len(list(gen(100)))
100000 loops, best of 3: 5.18 µs per loop
sage: %timeit len(list(it(100)))
100000 loops, best of 3: 4.64 µs per loop

sage: %timeit len(list(gen(10000)))
1000 loops, best of 3: 402 µs per loop
sage: %timeit len(list(it(10000)))
1000 loops, best of 3: 385 µs per loop
```
For a double, there ends up being not much noticable difference:

```
sage: def gen(n):
....:     return (x*y for x in range(n) for y in range(n))
sage: def it(n):
....:     for x in range(n):
....:         for y in range(n):
....:             yield x*y
sage: %timeit len(list(gen(5)))
100000 loops, best of 3: 3.56 µs per loop
sage: %timeit len(list(it(5)))
100000 loops, best of 3: 3.41 µs per loop
sage: %timeit len(list(gen(100)))
1000 loops, best of 3: 530 µs per loop
sage: %timeit len(list(it(100)))
1000 loops, best of 3: 534 µs per loop
```
I am not saying that anything needs to be changed (I actually like the simplicity of returning the generator), just pointing out some timings (this probably does not need to be super optimized anyways).

So LGTM.



---

archive/issue_comments_529324.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-03-09T21:39:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27449",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27449#issuecomment-529324",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_068183.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-03-11T22:42:05Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27449",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27449#event-68183"
}
```



---

archive/issue_comments_529325.json:
```json
{
    "body": "Changing branch from \"u/chapoton/27449\" to \"9440e0a567a9aac62dd853c9e102b5128488d757\"",
    "created_at": "2019-03-11T22:42:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27449",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27449#issuecomment-529325",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/chapoton/27449" to "9440e0a567a9aac62dd853c9e102b5128488d757"



---

archive/issue_comments_529326.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-03-11T22:42:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27449",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27449#issuecomment-529326",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
