# Issue 27482: Filter Kruskal Implementation For Minimum Spanning tree

archive/issues_027245.json:
```json
{
    "body": "This ticket introduces a modified version of Kruskal and is called filter-kruskal as suggested in the paper: \n        http://algo2.iti.kit.edu/documents/fkruskal.pdf\nThis algorithm avoids the sorting of a large dataset by partitioning the list of edges using a pivot. Its time complexity is approximately equal to O(m) where m=number of edges.\nI have implemented this new algorithm and it is passing all the tests. Currently, it takes approximately equal time as compared to Kruskal algorithm of sagemath. But, it can be further optimized.\n\n\nCC:  @dcoudert\n\nBranch/Commit: [94aa027a99c5ff33fb9ca065c271887e26810d2f](https://github.com/sagemath/sagetrac-mirror/commit/94aa027a99c5ff33fb9ca065c271887e26810d2f)\n\nReviewer: David Coudert\n\nAuthor: Hrishabh Yadav\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/27482\n\n",
    "closed_at": "2019-04-18T19:56:44Z",
    "created_at": "2019-03-14T06:43:29Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.8",
    "title": "Filter Kruskal Implementation For Minimum Spanning tree",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27482",
    "user": "https://github.com/Hrishabh-yadav"
}
```
This ticket introduces a modified version of Kruskal and is called filter-kruskal as suggested in the paper: 
        http://algo2.iti.kit.edu/documents/fkruskal.pdf
This algorithm avoids the sorting of a large dataset by partitioning the list of edges using a pivot. Its time complexity is approximately equal to O(m) where m=number of edges.
I have implemented this new algorithm and it is passing all the tests. Currently, it takes approximately equal time as compared to Kruskal algorithm of sagemath. But, it can be further optimized.


CC:  @dcoudert

Branch/Commit: [94aa027a99c5ff33fb9ca065c271887e26810d2f](https://github.com/sagemath/sagetrac-mirror/commit/94aa027a99c5ff33fb9ca065c271887e26810d2f)

Reviewer: David Coudert

Author: Hrishabh Yadav

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/27482





---

archive/issue_comments_531616.json:
```json
{
    "body": "<a id='comment:1'></a>\nWelcome to Sagemath !\n\nIs the algorithm complicated to implement ? Is it faster than, or comparable to, other spanning tree methods that we already have ?",
    "created_at": "2019-03-14T15:52:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531616",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:1'></a>
Welcome to Sagemath !

Is the algorithm complicated to implement ? Is it faster than, or comparable to, other spanning tree methods that we already have ?



---

archive/issue_comments_531617.json:
```json
{
    "body": "Changing branch from \"\" to \"u/gh-Hrishabh-yadav/filter_kruskal_implementation_for_minimum_spanning_tree\"",
    "created_at": "2019-03-14T17:20:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531617",
    "user": "https://github.com/Hrishabh-yadav"
}
```

Changing branch from "" to "u/gh-Hrishabh-yadav/filter_kruskal_implementation_for_minimum_spanning_tree"



---

archive/issue_comments_531618.json:
```json
{
    "body": "<a id='comment:3'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|\n|[a7c90fd](https://github.com/sagemath/sagetrac-mirror/commit/a7c90fd8574bbae0f24a7e1d650760cf78f58fe7)|`Filter Kruskal Implementation for MST`|",
    "created_at": "2019-03-14T17:29:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531618",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                       |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|
|[a7c90fd](https://github.com/sagemath/sagetrac-mirror/commit/a7c90fd8574bbae0f24a7e1d650760cf78f58fe7)|`Filter Kruskal Implementation for MST`|



---

archive/issue_comments_531619.json:
```json
{
    "body": "Changing commit from \"\" to \"a7c90fd8574bbae0f24a7e1d650760cf78f58fe7\"",
    "created_at": "2019-03-14T17:29:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531619",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "a7c90fd8574bbae0f24a7e1d650760cf78f58fe7"



---

archive/issue_comments_531620.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------|\n|[68d25b6](https://github.com/sagemath/sagetrac-mirror/commit/68d25b6405eb5ecd948b49c4afef1504145e7c33)|`Updated filter_kruskal`|",
    "created_at": "2019-03-14T18:06:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531620",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------|
|[68d25b6](https://github.com/sagemath/sagetrac-mirror/commit/68d25b6405eb5ecd948b49c4afef1504145e7c33)|`Updated filter_kruskal`|



---

archive/issue_comments_531621.json:
```json
{
    "body": "Changing commit from \"a7c90fd8574bbae0f24a7e1d650760cf78f58fe7\" to \"68d25b6405eb5ecd948b49c4afef1504145e7c33\"",
    "created_at": "2019-03-14T18:06:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531621",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a7c90fd8574bbae0f24a7e1d650760cf78f58fe7" to "68d25b6405eb5ecd948b49c4afef1504145e7c33"



---

archive/issue_comments_531622.json:
```json
{
    "body": "<a id='comment:5'></a>\nHi,\nGlad to work for Sagemath!\n\nI have implemented the following algorithm and have committed it. Right now it is comparable to kruskal but with further optimization it  should work faster than Kruskal and Prim's.\nThis algorithm works quite well for large dataset where number of vertices are more than 60000, This statements has been shown in this following pdf :\n   http://algo2.iti.kit.edu/documents/algo1-2014/alenex09filterkruskal.pdf\nAlso notice I have moved the code of \"all_paths\" from generic_graphs.py file to generic_graph.pyx  \nPlease review",
    "created_at": "2019-03-14T18:26:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531622",
    "user": "https://github.com/Hrishabh-yadav"
}
```

<a id='comment:5'></a>
Hi,
Glad to work for Sagemath!

I have implemented the following algorithm and have committed it. Right now it is comparable to kruskal but with further optimization it  should work faster than Kruskal and Prim's.
This algorithm works quite well for large dataset where number of vertices are more than 60000, This statements has been shown in this following pdf :
   http://algo2.iti.kit.edu/documents/algo1-2014/alenex09filterkruskal.pdf
Also notice I have moved the code of "all_paths" from generic_graphs.py file to generic_graph.pyx  
Please review



---

archive/issue_comments_531623.json:
```json
{
    "body": "<a id='comment:6'></a>\n> I have implemented the following algorithm and have committed it. Right now it is comparable to kruskal but with further optimization it  should work faster than Kruskal and Prim's.\n> This algorithm works quite well for large dataset where number of vertices are more than 60000, This statements has been shown in this following pdf :\n>    http://algo2.iti.kit.edu/documents/algo1-2014/alenex09filterkruskal.pdf\n\n\n60000 is big...\n\n> Also notice I have moved the code of \"all_paths\" from generic_graphs.py file to generic_graph.pyx  \n\n\n* Why ? is it related to this ticket ? Since the answer is no, you must revert this change.\n\n* Also, in your branch I see\n\n```\ndiff --git a/git-trac-command b/git-trac-command\nnew file mode 160000\n+Subproject b5d75da815a6e261eae54da66d418e60cea7a43\n```\n  Which is not related to this branch. So please correct that\n\n* I also see:\n\n```\ndiff --git a/src/sage/graphs/generic_graph.py b/src/sage/graphs/generic_graph.py\nindex 3cfb603..9fd276b 100644\n--- a/src/sage/graphs/generic_graph.py\n+++ b/src/sage/graphs/generic_graph.py\n@@ -15318,6 +15318,7 @@ class GenericGraph(GenericGraph_pyx):\n                 if not act_path:                 # there is no other vertex ...\n                     done = True                  # ... so we are done\n         return all_paths\n+        \n```\n  Why adding an empty line here ?\n  Actually it's not an empty line as you are adding several unnecessary spaces. Please revert that.\n\n* Another issue:\n\n```diff\n-    return list(kruskal_iterator(G, wfunction=wfunction, check=check))\n-\n-\n-def kruskal_iterator(G, wfunction=None, bint check=False):\n+    return  list(kruskal_iterator(G, wfunction=wfunction, check=check))\n+    #print(time.time()-start_time)\n+    \n+def kruskal_iterator(G,wfunction=None, bint check=False):\n```\n  Please remove the extra space you added after `return`, remove the print statement, and add the space you have removed in `G,wfunction=None`.\n\n\nUnderstand that we spend a considerable amount of time improving the quality of the code, of its documentation, and of its presentation to ease its maintainability.\nSo please don't introduce unnecessary changes, and please follow the coding style.\n\n\n* update your code to avoid the use of global variables. It is not necessary here.\n\n* Why using an iterator over edges here and variable `i`?\n\n```diff\n+    cdef int i=0\n+    cdef int ch=0\n+    #use of ch is to equally divide the the edges that are equal to the pivot(Random) edge weight \n+    while i < len(G_edges):\n+        \n+        Curr=next(itera)\n+        i+=1\n```\n\n* What is variable `c` ?\n\n*   You don't need variable `i` here. You don't use it. So a `for` loop is more appropriate.\n\n```diff\n+    while i < m:\n+        i+=1\n+        e = next(sortedE_iter)\n```\n\n> Please review\n\nThat's enough for now...",
    "created_at": "2019-03-15T08:16:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531623",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:6'></a>
> I have implemented the following algorithm and have committed it. Right now it is comparable to kruskal but with further optimization it  should work faster than Kruskal and Prim's.
> This algorithm works quite well for large dataset where number of vertices are more than 60000, This statements has been shown in this following pdf :
>    http://algo2.iti.kit.edu/documents/algo1-2014/alenex09filterkruskal.pdf


60000 is big...

> Also notice I have moved the code of "all_paths" from generic_graphs.py file to generic_graph.pyx  


* Why ? is it related to this ticket ? Since the answer is no, you must revert this change.

* Also, in your branch I see

```
diff --git a/git-trac-command b/git-trac-command
new file mode 160000
+Subproject b5d75da815a6e261eae54da66d418e60cea7a43
```
  Which is not related to this branch. So please correct that

* I also see:

```
diff --git a/src/sage/graphs/generic_graph.py b/src/sage/graphs/generic_graph.py
index 3cfb603..9fd276b 100644
--- a/src/sage/graphs/generic_graph.py
+++ b/src/sage/graphs/generic_graph.py
@@ -15318,6 +15318,7 @@ class GenericGraph(GenericGraph_pyx):
                 if not act_path:                 # there is no other vertex ...
                     done = True                  # ... so we are done
         return all_paths
+        
```
  Why adding an empty line here ?
  Actually it's not an empty line as you are adding several unnecessary spaces. Please revert that.

* Another issue:

```diff
-    return list(kruskal_iterator(G, wfunction=wfunction, check=check))
-
-
-def kruskal_iterator(G, wfunction=None, bint check=False):
+    return  list(kruskal_iterator(G, wfunction=wfunction, check=check))
+    #print(time.time()-start_time)
+    
+def kruskal_iterator(G,wfunction=None, bint check=False):
```
  Please remove the extra space you added after `return`, remove the print statement, and add the space you have removed in `G,wfunction=None`.


Understand that we spend a considerable amount of time improving the quality of the code, of its documentation, and of its presentation to ease its maintainability.
So please don't introduce unnecessary changes, and please follow the coding style.


* update your code to avoid the use of global variables. It is not necessary here.

* Why using an iterator over edges here and variable `i`?

```diff
+    cdef int i=0
+    cdef int ch=0
+    #use of ch is to equally divide the the edges that are equal to the pivot(Random) edge weight 
+    while i < len(G_edges):
+        
+        Curr=next(itera)
+        i+=1
```

* What is variable `c` ?

*   You don't need variable `i` here. You don't use it. So a `for` loop is more appropriate.

```diff
+    while i < m:
+        i+=1
+        e = next(sortedE_iter)
```

> Please review

That's enough for now...



---

archive/issue_comments_531624.json:
```json
{
    "body": "Changing commit from \"68d25b6405eb5ecd948b49c4afef1504145e7c33\" to \"241302ba800cd003ea15c6a32df10a2055f4f6d2\"",
    "created_at": "2019-03-16T20:42:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531624",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "68d25b6405eb5ecd948b49c4afef1504145e7c33" to "241302ba800cd003ea15c6a32df10a2055f4f6d2"



---

archive/issue_comments_531625.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------|\n|[c06f7a3](https://github.com/sagemath/sagetrac-mirror/commit/c06f7a391fddbb1ef31d0996ccba8cbd4142a627)|`A new version of spanning tree has been added, this new algorithm is Filter Krus`|\n|[69511ae](https://github.com/sagemath/sagetrac-mirror/commit/69511ae35f42e47327576d6e4e4483190ad2be7d)|`Updated filter_kruskal`|\n|[9fa585a](https://github.com/sagemath/sagetrac-mirror/commit/9fa585a822ab8be777f15a3f5a8f7d3f191dbf18)|`Updated filter_kruskal`|\n|[660e612](https://github.com/sagemath/sagetrac-mirror/commit/660e6124a12a5ccb492223614a3766903702772d)|`updating kruskal`|\n|[87700fd](https://github.com/sagemath/sagetrac-mirror/commit/87700fd1d41c4ab092261f19d4e3b4e7f60b4ac4)|`Updated filter_kruskal`|\n|[54bf085](https://github.com/sagemath/sagetrac-mirror/commit/54bf0859ae8aa2c4a103025e5b941c9038086c92)|`Updated filter_kruskal`|\n|[241302b](https://github.com/sagemath/sagetrac-mirror/commit/241302ba800cd003ea15c6a32df10a2055f4f6d2)|`Merge branch 'u/gh-Hrishabh-yadav/filter_kruskal_implementation_for_minimum_spanning_tree' of git://trac.sagemath.org/sage into t/27482/filter_kruskal_implementation_for_minimum_spanning_tree`|",
    "created_at": "2019-03-16T20:42:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531625",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------|
|[c06f7a3](https://github.com/sagemath/sagetrac-mirror/commit/c06f7a391fddbb1ef31d0996ccba8cbd4142a627)|`A new version of spanning tree has been added, this new algorithm is Filter Krus`|
|[69511ae](https://github.com/sagemath/sagetrac-mirror/commit/69511ae35f42e47327576d6e4e4483190ad2be7d)|`Updated filter_kruskal`|
|[9fa585a](https://github.com/sagemath/sagetrac-mirror/commit/9fa585a822ab8be777f15a3f5a8f7d3f191dbf18)|`Updated filter_kruskal`|
|[660e612](https://github.com/sagemath/sagetrac-mirror/commit/660e6124a12a5ccb492223614a3766903702772d)|`updating kruskal`|
|[87700fd](https://github.com/sagemath/sagetrac-mirror/commit/87700fd1d41c4ab092261f19d4e3b4e7f60b4ac4)|`Updated filter_kruskal`|
|[54bf085](https://github.com/sagemath/sagetrac-mirror/commit/54bf0859ae8aa2c4a103025e5b941c9038086c92)|`Updated filter_kruskal`|
|[241302b](https://github.com/sagemath/sagetrac-mirror/commit/241302ba800cd003ea15c6a32df10a2055f4f6d2)|`Merge branch 'u/gh-Hrishabh-yadav/filter_kruskal_implementation_for_minimum_spanning_tree' of git://trac.sagemath.org/sage into t/27482/filter_kruskal_implementation_for_minimum_spanning_tree`|



---

archive/issue_comments_531626.json:
```json
{
    "body": "Changing commit from \"241302ba800cd003ea15c6a32df10a2055f4f6d2\" to \"cdbd0e2a411e7343fb7368c34797323dbb497929\"",
    "created_at": "2019-03-16T20:47:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531626",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "241302ba800cd003ea15c6a32df10a2055f4f6d2" to "cdbd0e2a411e7343fb7368c34797323dbb497929"



---

archive/issue_comments_531627.json:
```json
{
    "body": "<a id='comment:8'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|\n|[cdbd0e2](https://github.com/sagemath/sagetrac-mirror/commit/cdbd0e2a411e7343fb7368c34797323dbb497929)|`modified some changes`|",
    "created_at": "2019-03-16T20:47:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531627",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                       |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|
|[cdbd0e2](https://github.com/sagemath/sagetrac-mirror/commit/cdbd0e2a411e7343fb7368c34797323dbb497929)|`modified some changes`|



---

archive/issue_comments_531628.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------|\n|[cf8b9a5](https://github.com/sagemath/sagetrac-mirror/commit/cf8b9a5b822202fcde37901174b53c9441a37b4d)|`Modified changes`|",
    "created_at": "2019-03-16T20:50:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531628",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------|
|[cf8b9a5](https://github.com/sagemath/sagetrac-mirror/commit/cf8b9a5b822202fcde37901174b53c9441a37b4d)|`Modified changes`|



---

archive/issue_comments_531629.json:
```json
{
    "body": "Changing commit from \"cdbd0e2a411e7343fb7368c34797323dbb497929\" to \"cf8b9a5b822202fcde37901174b53c9441a37b4d\"",
    "created_at": "2019-03-16T20:50:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531629",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "cdbd0e2a411e7343fb7368c34797323dbb497929" to "cf8b9a5b822202fcde37901174b53c9441a37b4d"



---

archive/issue_comments_531630.json:
```json
{
    "body": "<a id='comment:10'></a>\nFollowing changes have been made:\n\n1.) Deleted The file git-trac-command\n\n2.) Have modified the code according to your suggestions: \n     a.) Removed all the extra lines      \n\n     b.) Removed the useless comments, Global variables   \n     \n     c.) Modified the code to use **for** loop",
    "created_at": "2019-03-16T21:15:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531630",
    "user": "https://github.com/Hrishabh-yadav"
}
```

<a id='comment:10'></a>
Following changes have been made:

1.) Deleted The file git-trac-command

2.) Have modified the code according to your suggestions: 
     a.) Removed all the extra lines      

     b.) Removed the useless comments, Global variables   
     
     c.) Modified the code to use **for** loop



---

archive/issue_comments_531631.json:
```json
{
    "body": "<a id='comment:11'></a>\nResult with graphs size of 10000 vertices and edges : 3*10^5\n\n```\nsage:  from sage.graphs.spanning_tree import kruskal\n....: from sage.graphs.spanning_tree import filter_kruskal\n....: G= Graph()\n....: G.allow_multiple_edges(True)\n....: G.allow_loops(True)\n....: G.weighted(True)\n....: for i in range(300000):\n....:     G.add_edge(randint(0,10000),randint(0,10000),randint(0,1000000))\n....: E=filter_kruskal(G);\n....: E=kruskal(G)\nTime for filter_kruskal: 0.708007097244\nTime for Kruskal:        0.795707941055\n```\n\nResult with with more dense graphs \n\n```\nsage: from sage.graphs.spanning_tree import kruskal\n....: from sage.graphs.spanning_tree import filter_kruskal\n....: G= Graph()\n....: G.allow_multiple_edges(True)\n....: G.allow_loops(True)\n....: G.weighted(True)\n....: for i in range(3000000):\n....:     G.add_edge(randint(0,10000),randint(0,10000),randint(0,1000000))\n....: E=filter_kruskal(G);\n....: E=kruskal(G)\nTime for filter_kruskal: 7.70112395287\nTime for Kruskal:        11.8219969273\n```",
    "created_at": "2019-03-16T21:43:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531631",
    "user": "https://github.com/Hrishabh-yadav"
}
```

<a id='comment:11'></a>
Result with graphs size of 10000 vertices and edges : 3*10^5

```
sage:  from sage.graphs.spanning_tree import kruskal
....: from sage.graphs.spanning_tree import filter_kruskal
....: G= Graph()
....: G.allow_multiple_edges(True)
....: G.allow_loops(True)
....: G.weighted(True)
....: for i in range(300000):
....:     G.add_edge(randint(0,10000),randint(0,10000),randint(0,1000000))
....: E=filter_kruskal(G);
....: E=kruskal(G)
Time for filter_kruskal: 0.708007097244
Time for Kruskal:        0.795707941055
```

Result with with more dense graphs 

```
sage: from sage.graphs.spanning_tree import kruskal
....: from sage.graphs.spanning_tree import filter_kruskal
....: G= Graph()
....: G.allow_multiple_edges(True)
....: G.allow_loops(True)
....: G.weighted(True)
....: for i in range(3000000):
....:     G.add_edge(randint(0,10000),randint(0,10000),randint(0,1000000))
....: E=filter_kruskal(G);
....: E=kruskal(G)
Time for filter_kruskal: 7.70112395287
Time for Kruskal:        11.8219969273
```



---

archive/issue_comments_531632.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-03-17T12:12:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531632",
    "user": "https://github.com/Hrishabh-yadav"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_531633.json:
```json
{
    "body": "<a id='comment:13'></a>\nit seems that doctests errors shown by patchbot are not related to this ticket.\n(it also says that pyflakes plugin should show things to be fixed, but this does not happen somehow)",
    "created_at": "2019-03-18T11:07:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531633",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:13'></a>
it seems that doctests errors shown by patchbot are not related to this ticket.
(it also says that pyflakes plugin should show things to be fixed, but this does not happen somehow)



---

archive/issue_comments_531634.json:
```json
{
    "body": "<a id='comment:14'></a>\nWhat can be done?",
    "created_at": "2019-03-18T12:10:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531634",
    "user": "https://github.com/Hrishabh-yadav"
}
```

<a id='comment:14'></a>
What can be done?



---

archive/issue_comments_531635.json:
```json
{
    "body": "<a id='comment:15'></a>\nYou can try running pyflakes locally. There is nothing you can do about patchbot errors not related to this ticket...",
    "created_at": "2019-03-18T12:11:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531635",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:15'></a>
You can try running pyflakes locally. There is nothing you can do about patchbot errors not related to this ticket...



---

archive/issue_comments_531636.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [dimpase](#comment%3A15): Is there a way to run pyflakes for cython file, apparently pyflakes is not able read any cpp part in the code\n> You can try running pyflakes locally. There is nothing you can do about patchbot errors not related to this ticket...",
    "created_at": "2019-03-18T14:42:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531636",
    "user": "https://github.com/Hrishabh-yadav"
}
```

<a id='comment:16'></a>
Replying to [dimpase](#comment%3A15): Is there a way to run pyflakes for cython file, apparently pyflakes is not able read any cpp part in the code
> You can try running pyflakes locally. There is nothing you can do about patchbot errors not related to this ticket...



---

archive/issue_comments_531637.json:
```json
{
    "body": "<a id='comment:17'></a>\nPerhaps flake8 is better: see https://stackoverflow.com/questions/31269527/running-pep8-or-pylint-on-cython-code\n\nYou can install it via pip into Sage's python, naturally.",
    "created_at": "2019-03-18T14:50:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531637",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:17'></a>
Perhaps flake8 is better: see https://stackoverflow.com/questions/31269527/running-pep8-or-pylint-on-cython-code

You can install it via pip into Sage's python, naturally.



---

archive/issue_comments_531638.json:
```json
{
    "body": "<a id='comment:18'></a>\nSome remarks.\n\n- Your branch [u/gh-Hrishabh-yadav/filter_kruskal_implementation_for_minimum_spanning_tree](https://trac.sagemath.org/git-merger/cf8b9a5b822202fcde37901174b53c9441a37b4d) still contains modifications that must be reverted in `generic_graph.py`, `generic_graph_pyx.pyx`.\n\n\n- Please try to follow the general coding style http://doc.sagemath.org/html/en/developer/coding_basics.html#python-code-style. You need time and experience to learn it of course ;)\n  - missing space between declaration of parameters\n\n```diff\n-def kruskal_iterator(G,wfunction=None, bint check=False):\n+def kruskal_iterator(G, wfunction=None, bint check=False):\n```\n- missing space around `=`\n\n```diff\n-    cpdef list MST_E=[]\n+    cdef list MST_E = []\n```\n- Always put a space after `#` \n\n```diff\n-    #creating list of all edges \n+    # creating list of all edges \n```\n\n- You can use `cpdef` for a function, but there is no need for variables. Prefer `cdef`.\n\n- method `.edges()` sorts edges by default. When it's not needed, you can do either `.edges(sort=False)` or `list(G.edge_iterator())`. For instance\n\n```diff\n-            A=list(G.edges())\n-            return A\n+            return G.edges(sort=False)\n```\n  and\n\n```diff\n-    cpdef list edgesOfGraph=[]\n-    edgesOfGraph=list(g.edges())\n+    cdef edgesOfGraph = g.edges(sort=False)\n```\n\n- to iterate over the vertices, you can do `for u in g.vertex_iterator():` or simply and preferred `for u in g:`. \n\n- Instead of importing `from sage.graphs.graph import Graph` in all methods, import it for the all file \n\n- Instead of defining method `filter`, you could do directly:\n\n```\nL1_filter = [e for e in L1_Graph if union_find.find(e[0]) != union_find.find(e[1])]\n```\n\n- method `filter_kruskal_iterator` is not an itrator as it fills `MST_E`. Instead, it should yield edges.\n  This way, in method `partition`, you could do:\n\n```diff\n     if len(edgesOfGraph) < 10000:\n-        filter_kruskal_iterator(edgesOfGraph,Num_V,MST_E,union_find, wfunction=wfunction, check=False)\n-        return\n+        yield from filter_kruskal_iterator(edgesOfGraph, Num_V, union_find, wfunction=wfunction, check=False)\n```\n  and also\n\n```diff\n     if len(L1_filter) > 0:\n-       partition(L1_filter, Num_V, MST_E,union_find,wfunction=wfunction,check=check)\n+       yield from partition(L1_filter, Num_V, union_find, wfunction=wfunction, check=check)\n```",
    "created_at": "2019-03-18T15:08:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531638",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:18'></a>
Some remarks.

- Your branch [u/gh-Hrishabh-yadav/filter_kruskal_implementation_for_minimum_spanning_tree](https://trac.sagemath.org/git-merger/cf8b9a5b822202fcde37901174b53c9441a37b4d) still contains modifications that must be reverted in `generic_graph.py`, `generic_graph_pyx.pyx`.


- Please try to follow the general coding style http://doc.sagemath.org/html/en/developer/coding_basics.html#python-code-style. You need time and experience to learn it of course ;)
  - missing space between declaration of parameters

```diff
-def kruskal_iterator(G,wfunction=None, bint check=False):
+def kruskal_iterator(G, wfunction=None, bint check=False):
```
- missing space around `=`

```diff
-    cpdef list MST_E=[]
+    cdef list MST_E = []
```
- Always put a space after `#` 

```diff
-    #creating list of all edges 
+    # creating list of all edges 
```

- You can use `cpdef` for a function, but there is no need for variables. Prefer `cdef`.

- method `.edges()` sorts edges by default. When it's not needed, you can do either `.edges(sort=False)` or `list(G.edge_iterator())`. For instance

```diff
-            A=list(G.edges())
-            return A
+            return G.edges(sort=False)
```
  and

```diff
-    cpdef list edgesOfGraph=[]
-    edgesOfGraph=list(g.edges())
+    cdef edgesOfGraph = g.edges(sort=False)
```

- to iterate over the vertices, you can do `for u in g.vertex_iterator():` or simply and preferred `for u in g:`. 

- Instead of importing `from sage.graphs.graph import Graph` in all methods, import it for the all file 

- Instead of defining method `filter`, you could do directly:

```
L1_filter = [e for e in L1_Graph if union_find.find(e[0]) != union_find.find(e[1])]
```

- method `filter_kruskal_iterator` is not an itrator as it fills `MST_E`. Instead, it should yield edges.
  This way, in method `partition`, you could do:

```diff
     if len(edgesOfGraph) < 10000:
-        filter_kruskal_iterator(edgesOfGraph,Num_V,MST_E,union_find, wfunction=wfunction, check=False)
-        return
+        yield from filter_kruskal_iterator(edgesOfGraph, Num_V, union_find, wfunction=wfunction, check=False)
```
  and also

```diff
     if len(L1_filter) > 0:
-       partition(L1_filter, Num_V, MST_E,union_find,wfunction=wfunction,check=check)
+       yield from partition(L1_filter, Num_V, union_find, wfunction=wfunction, check=check)
```



---

archive/issue_comments_531639.json:
```json
{
    "body": "Changing commit from \"cf8b9a5b822202fcde37901174b53c9441a37b4d\" to \"f4d4a1ab999adbb2f88b9e60f3f2867a53a6a6c0\"",
    "created_at": "2019-03-19T18:36:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531639",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "cf8b9a5b822202fcde37901174b53c9441a37b4d" to "f4d4a1ab999adbb2f88b9e60f3f2867a53a6a6c0"



---

archive/issue_comments_531640.json:
```json
{
    "body": "<a id='comment:19'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|\n|[f4d4a1a](https://github.com/sagemath/sagetrac-mirror/commit/f4d4a1ab999adbb2f88b9e60f3f2867a53a6a6c0)|`Improved quality of code`|",
    "created_at": "2019-03-19T18:36:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531640",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                          |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|
|[f4d4a1a](https://github.com/sagemath/sagetrac-mirror/commit/f4d4a1ab999adbb2f88b9e60f3f2867a53a6a6c0)|`Improved quality of code`|



---

archive/issue_comments_531641.json:
```json
{
    "body": "<a id='comment:20'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|\n|[fbe35af](https://github.com/sagemath/sagetrac-mirror/commit/fbe35aff2ff5fd2518a95ab0888a0af7bfeaecde)|`Made count_edges global`|",
    "created_at": "2019-03-19T18:53:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531641",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|
|[fbe35af](https://github.com/sagemath/sagetrac-mirror/commit/fbe35aff2ff5fd2518a95ab0888a0af7bfeaecde)|`Made count_edges global`|



---

archive/issue_comments_531642.json:
```json
{
    "body": "Changing commit from \"f4d4a1ab999adbb2f88b9e60f3f2867a53a6a6c0\" to \"fbe35aff2ff5fd2518a95ab0888a0af7bfeaecde\"",
    "created_at": "2019-03-19T18:53:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531642",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f4d4a1ab999adbb2f88b9e60f3f2867a53a6a6c0" to "fbe35aff2ff5fd2518a95ab0888a0af7bfeaecde"



---

archive/issue_comments_531643.json:
```json
{
    "body": "<a id='comment:21'></a>\nThanks for the following suggestions, Time taken for Filter_kruskal has decreased quite well,\n\n**Result with number of edges = 3*10^6**\n\n``` \nsage: from sage.graphs.spanning_tree import kruskal\n....: from sage.graphs.spanning_tree import filter_kruskal\n....: G= Graph()\n....: G.allow_multiple_edges(True)\n....: G.allow_loops(True)\n....: G.weighted(True)\n....: for i in range(3000000):\n....:     G.add_edge(randint(0,10000),randint(0,10000),randint(0,100000000))\n....: E=filter_kruskal(G);\n....: E=kruskal(G);\nTime taken filter_kruskal : 5.84873104095\nTime taken kruskal        : 11.6121520996\n``` \n\n**Result with number of edges = 3*10^5**\n\n``` \nsage: from sage.graphs.spanning_tree import kruskal\n....: from sage.graphs.spanning_tree import filter_kruskal\n....: G= Graph()\n....: G.allow_multiple_edges(True)\n....: G.allow_loops(True)\n....: G.weighted(True)\n....: for i in range(300000):\n....:     G.add_edge(randint(0,10000),randint(0,10000),randint(0,100000000))\n....: E=filter_kruskal(G);\n....: E=kruskal(G);\nTime taken filter_kruskal : 0.632566213608\nTime taken kruskal        : 0.840409040451\n``` \n\nFor counting number of edges added in Minimum spanning tree, we can follow two way by making global variable or passing an array of a single element. Which way will be preferred or is there some other way?",
    "created_at": "2019-03-19T19:33:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531643",
    "user": "https://github.com/Hrishabh-yadav"
}
```

<a id='comment:21'></a>
Thanks for the following suggestions, Time taken for Filter_kruskal has decreased quite well,

**Result with number of edges = 3*10^6**

``` 
sage: from sage.graphs.spanning_tree import kruskal
....: from sage.graphs.spanning_tree import filter_kruskal
....: G= Graph()
....: G.allow_multiple_edges(True)
....: G.allow_loops(True)
....: G.weighted(True)
....: for i in range(3000000):
....:     G.add_edge(randint(0,10000),randint(0,10000),randint(0,100000000))
....: E=filter_kruskal(G);
....: E=kruskal(G);
Time taken filter_kruskal : 5.84873104095
Time taken kruskal        : 11.6121520996
``` 

**Result with number of edges = 3*10^5**

``` 
sage: from sage.graphs.spanning_tree import kruskal
....: from sage.graphs.spanning_tree import filter_kruskal
....: G= Graph()
....: G.allow_multiple_edges(True)
....: G.allow_loops(True)
....: G.weighted(True)
....: for i in range(300000):
....:     G.add_edge(randint(0,10000),randint(0,10000),randint(0,100000000))
....: E=filter_kruskal(G);
....: E=kruskal(G);
Time taken filter_kruskal : 0.632566213608
Time taken kruskal        : 0.840409040451
``` 

For counting number of edges added in Minimum spanning tree, we can follow two way by making global variable or passing an array of a single element. Which way will be preferred or is there some other way?



---

archive/issue_comments_531644.json:
```json
{
    "body": "<a id='comment:22'></a>\nI still don't understand what's the problem with the patchbot. Can someone explain me?",
    "created_at": "2019-03-20T18:11:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531644",
    "user": "https://github.com/Hrishabh-yadav"
}
```

<a id='comment:22'></a>
I still don't understand what's the problem with the patchbot. Can someone explain me?



---

archive/issue_comments_531645.json:
```json
{
    "body": "<a id='comment:23'></a>\nI don't know what's going on with the patchbot, but when I look at the content of your branch, I still see modifications in `generic_graph.py` and `generic_graph_pyx.pyx` that must be reverted. I also see:\n\n```\ndiff --git a/git-trac-command b/git-trac-command\nnew file mode 160000\n+Subproject b5d75da815a6e261eae54da66d418e60cea7a43\n```\nand I don't know why it's here...\n\n\n**Several comments in your code**\n\n- Please move `from sage.graphs.graph import Graph` at the top of the file, at the same level than `from sage.sets.disjoint_set cimport DisjointSet_of_hashables`\n\n- In a method, you must add an empty line just after the first 1 line description. For instance \n\n```diff\n     Minimum spanning tree using Filter_Kruskal's algorithm.\n+\n     This algorithm is different version of kruskal algorithm, where we don't sort\n```\n\n- Similarly, add an empty line between paragraphs of the documentation. It will drastically improve the readability. The quality of the documentaiton is one of the strength of Sagemath and the graph module. That's why we do our best the maintain the quality, although it takes time to get used to the standard.\n\n- the keyword `Example` should be `EXAMPLES:`, and\n\n```diff\n-    Example:\n-    The edges of a minimum spanning tree of ``G``, if one exists, otherwise\n-    returns the empty list.\n-    Output:\n-    sage: from sage.graphs.spanning_tree import filter_kruskal\n-    sage: G = Graph({1:{2:28, 6:10}, 2:{3:16, 7:14}, 3:{4:12}, 4:{5:22, 7:18}, 5:{6:25, 7:24}})\n-    sage: G.weighted(True)\n-    sage: E = filter_kruskal(G, check=True); E\n-    [(1, 6, 10), (3, 4, 12), (2, 7, 14), (2, 3, 16), (4, 5, 22), (5, 6, 25)]\n+    EXAMPLES:\n+\n+    Return the edges of a minimum spanning tree of the graph, if one exists::\n+\n+        sage: from sage.graphs.spanning_tree import filter_kruskal\n+        sage: G = Graph({1:{2:28, 6:10}, 2:{3:16, 7:14}, 3:{4:12}, 4:{5:22, 7:18}, 5:{6:25, 7:24}})\n+        sage: G.weighted(True)\n+        sage: E = filter_kruskal(G, check=True); E\n+        [(1, 6, 10), (3, 4, 12), (2, 7, 14), (2, 3, 16), (4, 5, 22), (5, 6, 25)]\n+\n```\nNote that the 4 spaces shifts are important for generating a nice html documentation.\n\n- Error messages have no capital letter at the beginning and no `.` at the end (unless we have a very long text)\n\n```diff\n-        raise ValueError(\"The input G must be an undirected graph.\")\n+        raise ValueError(\"the input graph must be undirected\")\n```\n\n- method `.edges()` returns a list of edges. So you don't need to do `list(g.edges(...))`. Moreover, there is no need to initialize `edgesOfGraph` before assigning it a list.\n\n```diff\n-    cdef list edgesOfGraph = []\n-    edgesOfGraph = list(g.edges(sort=False))\n+    cdef list edgesOfGraph = g.edges(sort=False)\n```\n  not also that I'm not a fan of the name `edgesOfGraph`. Could be simply `edges` or `E` ?\n\n- You don't need to define variable `Num_V`. It is used only once, so use `g.order()` directly\n\n- Why do you need to define a global variable to count edges ? Do you really need to count edges ? Note that as soon as the union find data structure as a single set, you know that you have selected enough edges. check `union_find.number_of_subsets()`\n\n- method `partition` must be documented and at least one doctest added. Note also that this method could be `cdef` as it is for local use only\n\n- typo: `psuedocode` -> `pseudocode`\n\n- you could reorganize the code to 1) select the pivot, and then split the list of input edges according that pivot. So something like\n\n```\n# Selecting a pivot (edge weight) at random\npivot = random.choice(edges)[2]\n\n# Divide the list of edges according the pivot.\n# We use variable ch to equally divide edges with weight equal\n# to the pivot\ncdef list L1 = []\ncdef list L2 = []\ncdef int ch = 0\n\nfor e in edges:\n    if e[2] < pivot:\n        L1.append(e)\n    elif e[2] > pivot:\n        L2.append(e)\n    elif ch:\n        L1.append(e)\n        ch = 0\n    else:\n        L2.append(e)\n        ch = 1\n```",
    "created_at": "2019-03-21T10:40:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531645",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:23'></a>
I don't know what's going on with the patchbot, but when I look at the content of your branch, I still see modifications in `generic_graph.py` and `generic_graph_pyx.pyx` that must be reverted. I also see:

```
diff --git a/git-trac-command b/git-trac-command
new file mode 160000
+Subproject b5d75da815a6e261eae54da66d418e60cea7a43
```
and I don't know why it's here...


**Several comments in your code**

- Please move `from sage.graphs.graph import Graph` at the top of the file, at the same level than `from sage.sets.disjoint_set cimport DisjointSet_of_hashables`

- In a method, you must add an empty line just after the first 1 line description. For instance 

```diff
     Minimum spanning tree using Filter_Kruskal's algorithm.
+
     This algorithm is different version of kruskal algorithm, where we don't sort
```

- Similarly, add an empty line between paragraphs of the documentation. It will drastically improve the readability. The quality of the documentaiton is one of the strength of Sagemath and the graph module. That's why we do our best the maintain the quality, although it takes time to get used to the standard.

- the keyword `Example` should be `EXAMPLES:`, and

```diff
-    Example:
-    The edges of a minimum spanning tree of ``G``, if one exists, otherwise
-    returns the empty list.
-    Output:
-    sage: from sage.graphs.spanning_tree import filter_kruskal
-    sage: G = Graph({1:{2:28, 6:10}, 2:{3:16, 7:14}, 3:{4:12}, 4:{5:22, 7:18}, 5:{6:25, 7:24}})
-    sage: G.weighted(True)
-    sage: E = filter_kruskal(G, check=True); E
-    [(1, 6, 10), (3, 4, 12), (2, 7, 14), (2, 3, 16), (4, 5, 22), (5, 6, 25)]
+    EXAMPLES:
+
+    Return the edges of a minimum spanning tree of the graph, if one exists::
+
+        sage: from sage.graphs.spanning_tree import filter_kruskal
+        sage: G = Graph({1:{2:28, 6:10}, 2:{3:16, 7:14}, 3:{4:12}, 4:{5:22, 7:18}, 5:{6:25, 7:24}})
+        sage: G.weighted(True)
+        sage: E = filter_kruskal(G, check=True); E
+        [(1, 6, 10), (3, 4, 12), (2, 7, 14), (2, 3, 16), (4, 5, 22), (5, 6, 25)]
+
```
Note that the 4 spaces shifts are important for generating a nice html documentation.

- Error messages have no capital letter at the beginning and no `.` at the end (unless we have a very long text)

```diff
-        raise ValueError("The input G must be an undirected graph.")
+        raise ValueError("the input graph must be undirected")
```

- method `.edges()` returns a list of edges. So you don't need to do `list(g.edges(...))`. Moreover, there is no need to initialize `edgesOfGraph` before assigning it a list.

```diff
-    cdef list edgesOfGraph = []
-    edgesOfGraph = list(g.edges(sort=False))
+    cdef list edgesOfGraph = g.edges(sort=False)
```
  not also that I'm not a fan of the name `edgesOfGraph`. Could be simply `edges` or `E` ?

- You don't need to define variable `Num_V`. It is used only once, so use `g.order()` directly

- Why do you need to define a global variable to count edges ? Do you really need to count edges ? Note that as soon as the union find data structure as a single set, you know that you have selected enough edges. check `union_find.number_of_subsets()`

- method `partition` must be documented and at least one doctest added. Note also that this method could be `cdef` as it is for local use only

- typo: `psuedocode` -> `pseudocode`

- you could reorganize the code to 1) select the pivot, and then split the list of input edges according that pivot. So something like

```
# Selecting a pivot (edge weight) at random
pivot = random.choice(edges)[2]

# Divide the list of edges according the pivot.
# We use variable ch to equally divide edges with weight equal
# to the pivot
cdef list L1 = []
cdef list L2 = []
cdef int ch = 0

for e in edges:
    if e[2] < pivot:
        L1.append(e)
    elif e[2] > pivot:
        L2.append(e)
    elif ch:
        L1.append(e)
        ch = 0
    else:
        L2.append(e)
        ch = 1
```



---

archive/issue_comments_531646.json:
```json
{
    "body": "Changing branch from \"u/gh-Hrishabh-yadav/filter_kruskal_implementation_for_minimum_spanning_tree\" to \"\"",
    "created_at": "2019-03-21T15:16:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531646",
    "user": "https://github.com/Hrishabh-yadav"
}
```

Changing branch from "u/gh-Hrishabh-yadav/filter_kruskal_implementation_for_minimum_spanning_tree" to ""



---

archive/issue_comments_531647.json:
```json
{
    "body": "Changing commit from \"fbe35aff2ff5fd2518a95ab0888a0af7bfeaecde\" to \"\"",
    "created_at": "2019-03-21T15:16:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531647",
    "user": "https://github.com/Hrishabh-yadav"
}
```

Changing commit from "fbe35aff2ff5fd2518a95ab0888a0af7bfeaecde" to ""



---

archive/issue_comments_531648.json:
```json
{
    "body": "Changing branch from \"\" to \"u/gh-Hrishabh-yadav/filter_kruskal_spanning_tree\"",
    "created_at": "2019-03-21T15:17:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531648",
    "user": "https://github.com/Hrishabh-yadav"
}
```

Changing branch from "" to "u/gh-Hrishabh-yadav/filter_kruskal_spanning_tree"



---

archive/issue_comments_531649.json:
```json
{
    "body": "Changing commit from \"\" to \"3aee9726cc4e73ff17df11ecb98496785fa38081\"",
    "created_at": "2019-03-21T15:32:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531649",
    "user": "https://github.com/Hrishabh-yadav"
}
```

Changing commit from "" to "3aee9726cc4e73ff17df11ecb98496785fa38081"



---

archive/issue_comments_531650.json:
```json
{
    "body": "<a id='comment:26'></a>\nThanks for the response, I deleted the previous branch and added a new one.\nI have modified the code according to your suggestions, \n\nMoving `from sage.graphs.graph import Graph` to the top of the file results in crashing of sage, with crash report saying :-\n\n```\n \n/home/hrishabh/sage/local/lib/python2.7/site-packages/sage/graphs/spanning_tree.pyx in init sage.graphs.spanning_tree (build/cythonized/sage/graphs/spanning_tree.c:13774)()\n     53 #       Copyright (c) 2009 Mike Hansen <mhansen@gmail.com>\n     54 #       Copyright (c) 2010 Gregory McWhirter <gmcwhirt@uci.edu>\n     55 #       Copyright (c) 2010 Minh Van Nguyen <nguyenminh2@gmail.com>\n     56 #\n     57 # This program is free software: you can redistribute it and/or modify\n     58 # it under the terms of the GNU General Public License as published by\n     59 # the Free Software Foundation, either version 2 of the License, or\n     60 # (at your option) any later version.\n     61 #                  https://www.gnu.org/licenses/\n     62 # ****************************************************************************\n     63 from __future__ import absolute_import\n     64 \n     65 cimport cython\n     66 \n     67 from sage.sets.disjoint_set cimport DisjointSet_of_hashables\n---> 68 from sage.graphs.graph import Graph\n        global sage.graphs.graph = undefined\n        global Graph = undefined\n     69 cpdef kruskal(G, wfunction=None, bint check=False):\n     70     r\"\"\"\n     71     Minimum spanning tree using Kruskal's algorithm.\n     72 \n     73     This function assumes that we can only compute minimum spanning trees for\n     74     undirected graphs. Such graphs can be weighted or unweighted, and they can\n     75     have multiple edges (since we are computing the minimum spanning tree, only\n     76     the minimum weight among all `(u,v)`-edges is considered, for each pair\n     77     of vertices `u`, `v`).\n     78 \n     79     INPUT:\n     80 \n     81     - ``G`` -- an undirected graph.\n     82 \n     83     - ``weight_function`` (function) - a function that inputs an edge ``e``\n\nImportError: cannot import name Graph\n\n```\n Is there something that can be done?\n\n---\nNew commits:\n|                                                                                                                                          |                                        |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|\n|[99d9ec6](https://github.com/sagemath/sagetrac-mirror/commit/99d9ec6176921fa34d3ebc2877a8d615fade0855)|`Modified some changes in documentation`|\n|[fc0905b](https://github.com/sagemath/sagetrac-mirror/commit/fc0905bf31043f72eeabe4456677271d77c65092)|`Made partition function cdef`|\n|[3aee972](https://github.com/sagemath/sagetrac-mirror/commit/3aee9726cc4e73ff17df11ecb98496785fa38081)|`Documentation changes`|",
    "created_at": "2019-03-21T15:32:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531650",
    "user": "https://github.com/Hrishabh-yadav"
}
```

<a id='comment:26'></a>
Thanks for the response, I deleted the previous branch and added a new one.
I have modified the code according to your suggestions, 

Moving `from sage.graphs.graph import Graph` to the top of the file results in crashing of sage, with crash report saying :-

```
 
/home/hrishabh/sage/local/lib/python2.7/site-packages/sage/graphs/spanning_tree.pyx in init sage.graphs.spanning_tree (build/cythonized/sage/graphs/spanning_tree.c:13774)()
     53 #       Copyright (c) 2009 Mike Hansen <mhansen@gmail.com>
     54 #       Copyright (c) 2010 Gregory McWhirter <gmcwhirt@uci.edu>
     55 #       Copyright (c) 2010 Minh Van Nguyen <nguyenminh2@gmail.com>
     56 #
     57 # This program is free software: you can redistribute it and/or modify
     58 # it under the terms of the GNU General Public License as published by
     59 # the Free Software Foundation, either version 2 of the License, or
     60 # (at your option) any later version.
     61 #                  https://www.gnu.org/licenses/
     62 # ****************************************************************************
     63 from __future__ import absolute_import
     64 
     65 cimport cython
     66 
     67 from sage.sets.disjoint_set cimport DisjointSet_of_hashables
---> 68 from sage.graphs.graph import Graph
        global sage.graphs.graph = undefined
        global Graph = undefined
     69 cpdef kruskal(G, wfunction=None, bint check=False):
     70     r"""
     71     Minimum spanning tree using Kruskal's algorithm.
     72 
     73     This function assumes that we can only compute minimum spanning trees for
     74     undirected graphs. Such graphs can be weighted or unweighted, and they can
     75     have multiple edges (since we are computing the minimum spanning tree, only
     76     the minimum weight among all `(u,v)`-edges is considered, for each pair
     77     of vertices `u`, `v`).
     78 
     79     INPUT:
     80 
     81     - ``G`` -- an undirected graph.
     82 
     83     - ``weight_function`` (function) - a function that inputs an edge ``e``

ImportError: cannot import name Graph

```
 Is there something that can be done?

---
New commits:
|                                                                                                                                          |                                        |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|
|[99d9ec6](https://github.com/sagemath/sagetrac-mirror/commit/99d9ec6176921fa34d3ebc2877a8d615fade0855)|`Modified some changes in documentation`|
|[fc0905b](https://github.com/sagemath/sagetrac-mirror/commit/fc0905bf31043f72eeabe4456677271d77c65092)|`Made partition function cdef`|
|[3aee972](https://github.com/sagemath/sagetrac-mirror/commit/3aee9726cc4e73ff17df11ecb98496785fa38081)|`Documentation changes`|



---

archive/issue_comments_531651.json:
```json
{
    "body": "<a id='comment:27'></a>\nWell, it's more complex than what I was expecting. So let the import in the methods. **BUT**, please move the import after the description of the method, for instance just before `if not isinstance(G, Graph):`\n\nMore comments:\n- no need to `list( )` `G.edges()`\n\n```diff\n-            return list(G.edges(sort=False))\n+            return G.edges(sort=False)\n```\n\n- plus you must indicate the type of a variable\n\n```diff\n-    cdef edges = list(g.edges(sort=False))\n+    cdef list edges = g.edges(sort=False)\n```\n  in fact, since variable `edges` is used only once in method `filter_kruskal`, you should better call `g.edges(sort=False)` directly, without creating intermediate variable `edges`\n\nIn method `partition`\n- you must document the method and its parameters. What is the goal of this method ? What is it doing ?\n\n- the threshold should be a parameter of the method with default value 10000. It's the only way a user can check that for instance 10 is too small without having to modify and recompile the code.\n  So it should also be a parameter of `filter_kruskal`\n\n- Method `partition` does not consider a graph but a list of edges. So the documentation and comments must be consistent with that. For instance\n\n```diff\n-    # If graph size is less than the kruskal Threshold, then we implement kruskal\n-    # Here threshold is set to  10000 edges\n-    if len(edges) < 10000:\n-        return filter_kruskal_iterator(edges, union_find, wfunction=wfunction, check=False)\n+    # If we have less edges than the threshold, we run the Kruskal algorithm\n+    if len(edges) < threshold:\n+        return filter_kruskal_iterator(edges, union_find, wfunction=wfunction, check=False)\n+\n+    # Otherwise, we partition the list of edges according a randomly selected pivot\n+\n```\n\n- \n\n```diff\n-    # Checking if we have got the spanning tree\n+    # Check if we have already obtained a spanning tree\n```\n\n\nMethod `filter_kruskal_iterator`\n\n- This method must also be documented\n\n- remove `sortedE_iter = None`. It's not used\n\n- Actually, this method is just copy/paste of the same code from `kruskal_iterator` (ok, we have already improved it by removing useless variables/instructions). So it would be much smarter to avoid code repetition by creating a method `kruskal_iterator_from_edges` that takes as input: a list of edges (`edges`), a weight function (`wfunction`), and a `DisjointSet_of_hashables` (`union_find`). The method will then yield edges.\n\n  This method will then be called by `kruskal_iterator` and `partition` like that:\n\n```\nyield from kruskal_iterator_from_edges(edges, union_find, wfunction)\n```\n\n\nI know it's along process, but the goal is to get the best possible implementation: simpler, faster, more elegant, bug free, easier to maintain, etc.",
    "created_at": "2019-03-21T16:38:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531651",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:27'></a>
Well, it's more complex than what I was expecting. So let the import in the methods. **BUT**, please move the import after the description of the method, for instance just before `if not isinstance(G, Graph):`

More comments:
- no need to `list( )` `G.edges()`

```diff
-            return list(G.edges(sort=False))
+            return G.edges(sort=False)
```

- plus you must indicate the type of a variable

```diff
-    cdef edges = list(g.edges(sort=False))
+    cdef list edges = g.edges(sort=False)
```
  in fact, since variable `edges` is used only once in method `filter_kruskal`, you should better call `g.edges(sort=False)` directly, without creating intermediate variable `edges`

In method `partition`
- you must document the method and its parameters. What is the goal of this method ? What is it doing ?

- the threshold should be a parameter of the method with default value 10000. It's the only way a user can check that for instance 10 is too small without having to modify and recompile the code.
  So it should also be a parameter of `filter_kruskal`

- Method `partition` does not consider a graph but a list of edges. So the documentation and comments must be consistent with that. For instance

```diff
-    # If graph size is less than the kruskal Threshold, then we implement kruskal
-    # Here threshold is set to  10000 edges
-    if len(edges) < 10000:
-        return filter_kruskal_iterator(edges, union_find, wfunction=wfunction, check=False)
+    # If we have less edges than the threshold, we run the Kruskal algorithm
+    if len(edges) < threshold:
+        return filter_kruskal_iterator(edges, union_find, wfunction=wfunction, check=False)
+
+    # Otherwise, we partition the list of edges according a randomly selected pivot
+
```

- 

```diff
-    # Checking if we have got the spanning tree
+    # Check if we have already obtained a spanning tree
```


Method `filter_kruskal_iterator`

- This method must also be documented

- remove `sortedE_iter = None`. It's not used

- Actually, this method is just copy/paste of the same code from `kruskal_iterator` (ok, we have already improved it by removing useless variables/instructions). So it would be much smarter to avoid code repetition by creating a method `kruskal_iterator_from_edges` that takes as input: a list of edges (`edges`), a weight function (`wfunction`), and a `DisjointSet_of_hashables` (`union_find`). The method will then yield edges.

  This method will then be called by `kruskal_iterator` and `partition` like that:

```
yield from kruskal_iterator_from_edges(edges, union_find, wfunction)
```


I know it's along process, but the goal is to get the best possible implementation: simpler, faster, more elegant, bug free, easier to maintain, etc.



---

archive/issue_comments_531652.json:
```json
{
    "body": "<a id='comment:28'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|\n|[1640775](https://github.com/sagemath/sagetrac-mirror/commit/16407759b6d08221d34da918b47dea2edca55252)|`Implemented Kruskal_iterator_from_edges`|",
    "created_at": "2019-03-21T19:21:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531652",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|
|[1640775](https://github.com/sagemath/sagetrac-mirror/commit/16407759b6d08221d34da918b47dea2edca55252)|`Implemented Kruskal_iterator_from_edges`|



---

archive/issue_comments_531653.json:
```json
{
    "body": "Changing commit from \"3aee9726cc4e73ff17df11ecb98496785fa38081\" to \"16407759b6d08221d34da918b47dea2edca55252\"",
    "created_at": "2019-03-21T19:21:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531653",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "3aee9726cc4e73ff17df11ecb98496785fa38081" to "16407759b6d08221d34da918b47dea2edca55252"



---

archive/issue_comments_531654.json:
```json
{
    "body": "<a id='comment:29'></a>\nImplementation and Documentation of `kruskal_iterator_from_edges` is done, Thanks for the guidelines. I am currently on my learning phase and working on such projects is only going to help me. So it doesn't matter about duration of the project. Please review the recent commit, Thanks! :)",
    "created_at": "2019-03-21T19:29:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531654",
    "user": "https://github.com/Hrishabh-yadav"
}
```

<a id='comment:29'></a>
Implementation and Documentation of `kruskal_iterator_from_edges` is done, Thanks for the guidelines. I am currently on my learning phase and working on such projects is only going to help me. So it doesn't matter about duration of the project. Please review the recent commit, Thanks! :)



---

archive/issue_comments_531655.json:
```json
{
    "body": "<a id='comment:30'></a>\n- Why this change ? I think you should revert it.\n\n```diff\n-    Return an iterator implementation of Kruskal algorithm.\n+    This method sanity checks and calls the fucntion kruskal_iterator_from_edges.  \n```\n\n- An error message should not start with a capital letter\n\n```diff\n-        raise ValueError(\"The input G must be an undirected graph\")\n+        raise ValueError(\"the input graph must be undirected\")\n```\n\n  **Warning** when you change an error message, you must make sure that all doctests with this error message are updated. If you are not sure of what you are doing, it's better/safer to let the error message as it was.\n\n\n- Method `filter_kruskal` can be only `def` instead of `cpdef`\n\n- You should rename parameter `kruskal_threshold` to simply `threshold`. It's clear enough.\n\n- since you document parameter `weight_function`, I suggest you use that name everywhere instead of `wfunction`\n\n- a small detail\n\n```diff\n-    - ``weight_function`` (function) - a function that inputs an edge ``e``\n+    - ``weight_function`` -- function (default: ``None``); a function that inputs an edge ``e``\n```\n  and correct the 80 columns formatting\n\n- proposal to improve the documentation\n\n```diff\n-    - ``kruskal_threshold`` -- The maximum number of edges on which kruskal algorithm\n-      should run. Default: ``kruskal_threshold=10000``.  \n+    - ``threshold`` -- integer (default: 10000); maximum number of edges\n+      on which to run kruskal algorithm. Above that value, edges are\n+      partitioned in sets of size at most ``threshold``.\n```\n\n- you can let 1 empty line here, not 2\n\n```diff\n+    \n+\n+    \"\"\"\n```\n\n\nConcerning method `partition`, I have a proposal that will, in my opinion, ease the code: make method partition a sub-method of `filter_krustal`. \nIf you like it, just copy/paste the code. I made several corrections in it\n\n```\ndef filter_kruskal(G, threshold=10000, weight_function=None, bint check=False):\n    r\"\"\"\n    ... CORRECTED DOCUMENTATION USING ABOVE COMMENTS ...\n    \"\"\"\n    import random\n    from sage.graphs.graph import Graph\n\n    if not isinstance(G, Graph):\n        raise ValueError(\"the input graph must be undirected\")\n    if check:\n        if not G.order():\n            return []\n        if not G.is_connected():\n            return\n        # G is now assumed to be a nonempty connected graph\n        if G.num_verts() == G.num_edges() + 1:\n            # G is a tree\n            return G.edges(sort=False)\n\n        g = G.to_simple(to_undirected=False, keep_label='min')\n    else:\n        g = G\n\n    def partition(edges, union_find, threshold, weight_function):\n        \"\"\"\n        This method is the core of the algorithm.\n        \"\"\"\n        # If graph size is less than the threshold, then we call Kruskal.\n        if len(edges) < threshold:\n            yield from kruskal_iterator_from_edges(edges, union_find, weight_function=weight_function)\n            return\n        # Selecting a pivot (edge weight) at random\n        pivot = random.choice(edges)[2]\n \n        # Divide the list of edges according the pivot\n        # We use variable ch to equally divide edges with weight equal\n        # the to pivot\n        cdef list L1_Graph = []\n        cdef list L2_Graph = []\n        cdef int ch = 0\n\n        for e in edges:\n            if e[2] < pivot:\n                L1_Graph.append(e)\n            elif e[2] > pivot:\n                L2_Graph.append(e)\n            else:\n                if ch:\n                    L1_Graph.append(e)\n                    ch = 0\n                else:\n                    L2_Graph.append(e)\n                    ch = 1\n\n        # We filter the list of edges to remove edges between vertices\n        # of the same component\n        L1_filter = [e for e in L1_Graph if union_find.find(e[0]) != union_find.find(e[1])]\n        if L1_filter:\n            yield from partition(L1_filter, union_find, threshold=threshold, weight_function=weight_function)\n\n        # Checking if we have got the spanning tree\n        if union_find.number_of_subsets() == 1:\n            return\n\n        L2_filter = [e for e in L2_Graph if union_find.find(e[0]) != union_find.find(e[1])]\n        if L2_filter:\n            yield from partition(L2_filter, union_find, threshold=threshold, weight_function=weight_function)\n            return\n\n\n    # Making a union set\n    cdef DisjointSet_of_hashables union_find = DisjointSet_of_hashables(g.vertex_iterator())\n\n    return list(partition(g.edges(sort=False), union_find, threshold=threshold,\n                          weight_function=weight_function))\n```\n\n\n\nConcerning method `kruskal_iterator_from_edges`:\n- a small change\n\n```diff\n-    Implements kruskal algorithm for minimum spanning tree\n+    Implement kruskal algorithm for minimum spanning tree\n``` \n- add some description of what the method do, and that it works on edges\n- document input parameters similarly that in other methods",
    "created_at": "2019-03-22T14:53:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531655",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:30'></a>
- Why this change ? I think you should revert it.

```diff
-    Return an iterator implementation of Kruskal algorithm.
+    This method sanity checks and calls the fucntion kruskal_iterator_from_edges.  
```

- An error message should not start with a capital letter

```diff
-        raise ValueError("The input G must be an undirected graph")
+        raise ValueError("the input graph must be undirected")
```

  **Warning** when you change an error message, you must make sure that all doctests with this error message are updated. If you are not sure of what you are doing, it's better/safer to let the error message as it was.


- Method `filter_kruskal` can be only `def` instead of `cpdef`

- You should rename parameter `kruskal_threshold` to simply `threshold`. It's clear enough.

- since you document parameter `weight_function`, I suggest you use that name everywhere instead of `wfunction`

- a small detail

```diff
-    - ``weight_function`` (function) - a function that inputs an edge ``e``
+    - ``weight_function`` -- function (default: ``None``); a function that inputs an edge ``e``
```
  and correct the 80 columns formatting

- proposal to improve the documentation

```diff
-    - ``kruskal_threshold`` -- The maximum number of edges on which kruskal algorithm
-      should run. Default: ``kruskal_threshold=10000``.  
+    - ``threshold`` -- integer (default: 10000); maximum number of edges
+      on which to run kruskal algorithm. Above that value, edges are
+      partitioned in sets of size at most ``threshold``.
```

- you can let 1 empty line here, not 2

```diff
+    
+
+    """
```


Concerning method `partition`, I have a proposal that will, in my opinion, ease the code: make method partition a sub-method of `filter_krustal`. 
If you like it, just copy/paste the code. I made several corrections in it

```
def filter_kruskal(G, threshold=10000, weight_function=None, bint check=False):
    r"""
    ... CORRECTED DOCUMENTATION USING ABOVE COMMENTS ...
    """
    import random
    from sage.graphs.graph import Graph

    if not isinstance(G, Graph):
        raise ValueError("the input graph must be undirected")
    if check:
        if not G.order():
            return []
        if not G.is_connected():
            return
        # G is now assumed to be a nonempty connected graph
        if G.num_verts() == G.num_edges() + 1:
            # G is a tree
            return G.edges(sort=False)

        g = G.to_simple(to_undirected=False, keep_label='min')
    else:
        g = G

    def partition(edges, union_find, threshold, weight_function):
        """
        This method is the core of the algorithm.
        """
        # If graph size is less than the threshold, then we call Kruskal.
        if len(edges) < threshold:
            yield from kruskal_iterator_from_edges(edges, union_find, weight_function=weight_function)
            return
        # Selecting a pivot (edge weight) at random
        pivot = random.choice(edges)[2]
 
        # Divide the list of edges according the pivot
        # We use variable ch to equally divide edges with weight equal
        # the to pivot
        cdef list L1_Graph = []
        cdef list L2_Graph = []
        cdef int ch = 0

        for e in edges:
            if e[2] < pivot:
                L1_Graph.append(e)
            elif e[2] > pivot:
                L2_Graph.append(e)
            else:
                if ch:
                    L1_Graph.append(e)
                    ch = 0
                else:
                    L2_Graph.append(e)
                    ch = 1

        # We filter the list of edges to remove edges between vertices
        # of the same component
        L1_filter = [e for e in L1_Graph if union_find.find(e[0]) != union_find.find(e[1])]
        if L1_filter:
            yield from partition(L1_filter, union_find, threshold=threshold, weight_function=weight_function)

        # Checking if we have got the spanning tree
        if union_find.number_of_subsets() == 1:
            return

        L2_filter = [e for e in L2_Graph if union_find.find(e[0]) != union_find.find(e[1])]
        if L2_filter:
            yield from partition(L2_filter, union_find, threshold=threshold, weight_function=weight_function)
            return


    # Making a union set
    cdef DisjointSet_of_hashables union_find = DisjointSet_of_hashables(g.vertex_iterator())

    return list(partition(g.edges(sort=False), union_find, threshold=threshold,
                          weight_function=weight_function))
```



Concerning method `kruskal_iterator_from_edges`:
- a small change

```diff
-    Implements kruskal algorithm for minimum spanning tree
+    Implement kruskal algorithm for minimum spanning tree
``` 
- add some description of what the method do, and that it works on edges
- document input parameters similarly that in other methods



---

archive/issue_comments_531656.json:
```json
{
    "body": "<a id='comment:31'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------|\n|[ffcea9e](https://github.com/sagemath/sagetrac-mirror/commit/ffcea9e1772dc81bfae6373c8b69bbc481514a4c)|`Modified Floyd-Warshall to work with weighted graphs with non-negative integer edge weights.`|\n|[0d7299f](https://github.com/sagemath/sagetrac-mirror/commit/0d7299f51f402a450428925f09faedc182453004)|`Merge branch 'u/gh-giorgosgiapis/weighted_floyd_warshall' of git://trac.sagemath.org/sage into filter_kruskal_spanning_tree`|\n|[ba6973c](https://github.com/sagemath/sagetrac-mirror/commit/ba6973cdb7cb5cf26aaadb303926626dc8ab6654)|`Made partition sub-function of filter_kruskal`|",
    "created_at": "2019-03-22T16:35:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531656",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                              |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------|
|[ffcea9e](https://github.com/sagemath/sagetrac-mirror/commit/ffcea9e1772dc81bfae6373c8b69bbc481514a4c)|`Modified Floyd-Warshall to work with weighted graphs with non-negative integer edge weights.`|
|[0d7299f](https://github.com/sagemath/sagetrac-mirror/commit/0d7299f51f402a450428925f09faedc182453004)|`Merge branch 'u/gh-giorgosgiapis/weighted_floyd_warshall' of git://trac.sagemath.org/sage into filter_kruskal_spanning_tree`|
|[ba6973c](https://github.com/sagemath/sagetrac-mirror/commit/ba6973cdb7cb5cf26aaadb303926626dc8ab6654)|`Made partition sub-function of filter_kruskal`|



---

archive/issue_comments_531657.json:
```json
{
    "body": "Changing commit from \"16407759b6d08221d34da918b47dea2edca55252\" to \"ba6973cdb7cb5cf26aaadb303926626dc8ab6654\"",
    "created_at": "2019-03-22T16:35:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531657",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "16407759b6d08221d34da918b47dea2edca55252" to "ba6973cdb7cb5cf26aaadb303926626dc8ab6654"



---

archive/issue_comments_531658.json:
```json
{
    "body": "Changing commit from \"ba6973cdb7cb5cf26aaadb303926626dc8ab6654\" to \"4772886cdf2ef90a25c11b8613b0893742ec627a\"",
    "created_at": "2019-03-22T16:57:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531658",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ba6973cdb7cb5cf26aaadb303926626dc8ab6654" to "4772886cdf2ef90a25c11b8613b0893742ec627a"



---

archive/issue_comments_531659.json:
```json
{
    "body": "<a id='comment:32'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------|\n|[4772886](https://github.com/sagemath/sagetrac-mirror/commit/4772886cdf2ef90a25c11b8613b0893742ec627a)|`Revert \"Merge branch 'u/gh-giorgosgiapis/weighted_floyd_warshall' of git://trac.sagemath.org/sage into filter_kruskal_spanning_tree\"`|",
    "created_at": "2019-03-22T16:57:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531659",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------|
|[4772886](https://github.com/sagemath/sagetrac-mirror/commit/4772886cdf2ef90a25c11b8613b0893742ec627a)|`Revert "Merge branch 'u/gh-giorgosgiapis/weighted_floyd_warshall' of git://trac.sagemath.org/sage into filter_kruskal_spanning_tree"`|



---

archive/issue_comments_531660.json:
```json
{
    "body": "<a id='comment:33'></a>\nsorry I was not clear enough, but there is a misunderstanding. I mean to replace `wfunction` by `weight_function` in the new code you are adding (= only in `filter_kruskal` and `kruskal_iterator_from_edges`), not in previously existing methods like `kruskal`, `kruskal_iterator` and `boruvka`. \n\nIndeed, these methods are called by other methods (e.g., `.min_spanning_tree()`). So with the current modifications, some doctests will break. Moreover, we usually add a deprecation warning during 1 year before effectively changing the name of a parameter to let enough time to users to update their own code.",
    "created_at": "2019-03-22T18:18:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531660",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:33'></a>
sorry I was not clear enough, but there is a misunderstanding. I mean to replace `wfunction` by `weight_function` in the new code you are adding (= only in `filter_kruskal` and `kruskal_iterator_from_edges`), not in previously existing methods like `kruskal`, `kruskal_iterator` and `boruvka`. 

Indeed, these methods are called by other methods (e.g., `.min_spanning_tree()`). So with the current modifications, some doctests will break. Moreover, we usually add a deprecation warning during 1 year before effectively changing the name of a parameter to let enough time to users to update their own code.



---

archive/issue_comments_531661.json:
```json
{
    "body": "<a id='comment:34'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[ff7a876](https://github.com/sagemath/sagetrac-mirror/commit/ff7a876f41eccba202ee0230d5c172d20636d9f9)|`Changed weight_fucntion to wfunction`|\n|[697701d](https://github.com/sagemath/sagetrac-mirror/commit/697701d62916b7731609cae44ccaf51a3ddb389e)|`changed some value error statement`|",
    "created_at": "2019-03-22T22:28:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531661",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
|[ff7a876](https://github.com/sagemath/sagetrac-mirror/commit/ff7a876f41eccba202ee0230d5c172d20636d9f9)|`Changed weight_fucntion to wfunction`|
|[697701d](https://github.com/sagemath/sagetrac-mirror/commit/697701d62916b7731609cae44ccaf51a3ddb389e)|`changed some value error statement`|



---

archive/issue_comments_531662.json:
```json
{
    "body": "Changing commit from \"4772886cdf2ef90a25c11b8613b0893742ec627a\" to \"697701d62916b7731609cae44ccaf51a3ddb389e\"",
    "created_at": "2019-03-22T22:28:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531662",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4772886cdf2ef90a25c11b8613b0893742ec627a" to "697701d62916b7731609cae44ccaf51a3ddb389e"



---

archive/issue_comments_531663.json:
```json
{
    "body": "<a id='comment:35'></a>\nIn method kruskal: `raise ValueError(\"The input G must be an undirected graph.\")`  and in method boruvka : ` raise ValueError(\"the input graph must be undirected\") `, error statements have written in such way. I have verified this according to Doctest.",
    "created_at": "2019-03-22T22:34:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531663",
    "user": "https://github.com/Hrishabh-yadav"
}
```

<a id='comment:35'></a>
In method kruskal: `raise ValueError("The input G must be an undirected graph.")`  and in method boruvka : ` raise ValueError("the input graph must be undirected") `, error statements have written in such way. I have verified this according to Doctest.



---

archive/issue_comments_531664.json:
```json
{
    "body": "<a id='comment:36'></a>\nI was not satisfied with this recursive version of filter kruskal as it makes many copies of the list. So I coded a new version that is more in the spirit of quicksort.\n\nYou can find it in branch `public/graphs/27482_filter_kruskal`\n\nThe branch do:\n- a new version of filter kruskal avoiding to create many copies of the list of edges, and that is not recursive.\n- expose the method in method `min_spanning_tree` of `generic_graph.py`\n- many corrections\n- add reference to the paper at the right place\n\nThe branch is in `public/`, so you can modify it. Of course be careful ;)\n\n\nPlease try it, do many tests, etc. If you like it, you can replace the branch in this ticket by this one.",
    "created_at": "2019-03-24T17:00:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531664",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:36'></a>
I was not satisfied with this recursive version of filter kruskal as it makes many copies of the list. So I coded a new version that is more in the spirit of quicksort.

You can find it in branch `public/graphs/27482_filter_kruskal`

The branch do:
- a new version of filter kruskal avoiding to create many copies of the list of edges, and that is not recursive.
- expose the method in method `min_spanning_tree` of `generic_graph.py`
- many corrections
- add reference to the paper at the right place

The branch is in `public/`, so you can modify it. Of course be careful ;)


Please try it, do many tests, etc. If you like it, you can replace the branch in this ticket by this one.



---

archive/issue_events_077388.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27482#event-77388"
}
```



---

archive/issue_comments_531665.json:
```json
{
    "body": "<a id='comment:37'></a>\nTicket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)",
    "created_at": "2019-03-25T10:56:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531665",
    "user": "https://github.com/embray"
}
```

<a id='comment:37'></a>
Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)



---

archive/issue_comments_531666.json:
```json
{
    "body": "Changing commit from \"697701d62916b7731609cae44ccaf51a3ddb389e\" to \"\"",
    "created_at": "2019-03-25T19:15:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531666",
    "user": "https://github.com/Hrishabh-yadav"
}
```

Changing commit from "697701d62916b7731609cae44ccaf51a3ddb389e" to ""



---

archive/issue_comments_531667.json:
```json
{
    "body": "Changing branch from \"u/gh-Hrishabh-yadav/filter_kruskal_spanning_tree\" to \"\"",
    "created_at": "2019-03-25T19:15:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531667",
    "user": "https://github.com/Hrishabh-yadav"
}
```

Changing branch from "u/gh-Hrishabh-yadav/filter_kruskal_spanning_tree" to ""



---

archive/issue_comments_531668.json:
```json
{
    "body": "Changing branch from \"\" to \"public/graphs/27482_filter_kruskal\"",
    "created_at": "2019-03-25T19:15:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531668",
    "user": "https://github.com/Hrishabh-yadav"
}
```

Changing branch from "" to "public/graphs/27482_filter_kruskal"



---

archive/issue_comments_531669.json:
```json
{
    "body": "<a id='comment:40'></a>\nI have changed the current branch to `public/graphs/27482_filter_kruskal`\nThis code works quite well, yeah making many copies of list was never a good idea.\n\nFor large and highly dense graph\n\n```\nsage: from sage.graphs.spanning_tree import kruskal\n....: from sage.graphs.spanning_tree import filter_kruskal\n....: G= Graph()\n....: G.allow_multiple_edges(True)\n....: G.allow_loops(True)\n....: G.weighted(True)\n....: for i in range(3000000):\n....:     G.add_edge(randint(0,10000),randint(0,10000),randint(0,100000000))\n....: E=filter_kruskal(G);\n....: E=kruskal(G);\nTime taken filter_kruskal : 4.15850090981\nTime taken kruskal        : 11.2105371952\n```\nFor large and partially dense graph\n\n```\nsage: from sage.graphs.spanning_tree import kruskal\n....: from sage.graphs.spanning_tree import filter_kruskal\n....: G= Graph()\n....: G.allow_multiple_edges(True)\n....: G.allow_loops(True)\n....: G.weighted(True)\n....: for i in range(300000):\n....:     G.add_edge(randint(0,10000),randint(0,10000),randint(0,100000000))\n....: E=filter_kruskal(G);\n....: E=kruskal(G);\nTime taken filter_kruskal : 0.484476089478\nTime taken kruskal        : 0.874042987823\n``` \n\n---\nNew commits:\n|                                                                                                                                          |                                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|\n|[c104692](https://github.com/sagemath/sagetrac-mirror/commit/c10469297ef364b0e917bb9b4407187d2abea9ad)|`trac #27482: new version of filter kruskal`|",
    "created_at": "2019-03-25T19:25:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531669",
    "user": "https://github.com/Hrishabh-yadav"
}
```

<a id='comment:40'></a>
I have changed the current branch to `public/graphs/27482_filter_kruskal`
This code works quite well, yeah making many copies of list was never a good idea.

For large and highly dense graph

```
sage: from sage.graphs.spanning_tree import kruskal
....: from sage.graphs.spanning_tree import filter_kruskal
....: G= Graph()
....: G.allow_multiple_edges(True)
....: G.allow_loops(True)
....: G.weighted(True)
....: for i in range(3000000):
....:     G.add_edge(randint(0,10000),randint(0,10000),randint(0,100000000))
....: E=filter_kruskal(G);
....: E=kruskal(G);
Time taken filter_kruskal : 4.15850090981
Time taken kruskal        : 11.2105371952
```
For large and partially dense graph

```
sage: from sage.graphs.spanning_tree import kruskal
....: from sage.graphs.spanning_tree import filter_kruskal
....: G= Graph()
....: G.allow_multiple_edges(True)
....: G.allow_loops(True)
....: G.weighted(True)
....: for i in range(300000):
....:     G.add_edge(randint(0,10000),randint(0,10000),randint(0,100000000))
....: E=filter_kruskal(G);
....: E=kruskal(G);
Time taken filter_kruskal : 0.484476089478
Time taken kruskal        : 0.874042987823
``` 

---
New commits:
|                                                                                                                                          |                                            |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|
|[c104692](https://github.com/sagemath/sagetrac-mirror/commit/c10469297ef364b0e917bb9b4407187d2abea9ad)|`trac #27482: new version of filter kruskal`|



---

archive/issue_comments_531670.json:
```json
{
    "body": "Changing commit from \"\" to \"c10469297ef364b0e917bb9b4407187d2abea9ad\"",
    "created_at": "2019-03-25T19:25:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531670",
    "user": "https://github.com/Hrishabh-yadav"
}
```

Changing commit from "" to "c10469297ef364b0e917bb9b4407187d2abea9ad"



---

archive/issue_comments_531671.json:
```json
{
    "body": "<a id='comment:41'></a>\nIf we see carefully selection of pivot can result in worst case complexity of O(m*m)(really really less odds!), but we can still have a better algorithm for selecting a pivot rather than selecting it randomly. I was thinking of selecting it by finding median. There are algorithm for finding median in linear time. So why not?\nAs suggested in this paper:- http://www.cs.cornell.edu/courses/cs2110/2009su/Lectures/examples/MedianFinding.pdf",
    "created_at": "2019-03-26T16:15:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531671",
    "user": "https://github.com/Hrishabh-yadav"
}
```

<a id='comment:41'></a>
If we see carefully selection of pivot can result in worst case complexity of O(m*m)(really really less odds!), but we can still have a better algorithm for selecting a pivot rather than selecting it randomly. I was thinking of selecting it by finding median. There are algorithm for finding median in linear time. So why not?
As suggested in this paper:- http://www.cs.cornell.edu/courses/cs2110/2009su/Lectures/examples/MedianFinding.pdf



---

archive/issue_comments_531672.json:
```json
{
    "body": "<a id='comment:42'></a>\nYou can try it on your side and see how it affects the running time. You could also investigate on how quicksort do in practice (i.e., how is it done in C/C++ libraries). You can certainly find some experiments with different algorithms for pivot selection.",
    "created_at": "2019-03-27T08:13:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531672",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:42'></a>
You can try it on your side and see how it affects the running time. You could also investigate on how quicksort do in practice (i.e., how is it done in C/C++ libraries). You can certainly find some experiments with different algorithms for pivot selection.



---

archive/issue_comments_531673.json:
```json
{
    "body": "<a id='comment:43'></a>\nDo you still plan to (try to) improve the implementation or can we try to conclude this ticket ?",
    "created_at": "2019-04-09T12:15:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531673",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:43'></a>
Do you still plan to (try to) improve the implementation or can we try to conclude this ticket ?



---

archive/issue_comments_531674.json:
```json
{
    "body": "<a id='comment:44'></a>\nYeah, I did try to implement it and results weren't quite good. Problem with median_of_medians is that although it is a linear time algorithm but also has large coefficient.\n\nThe result of median_of_median was still better than the one currently used for finding median. \n\nYeah it will be better if we conclude this ticket now, but still I am planning to study more about pivot selection. I also came across a data structure used for selection algorithm: https://en.wikipedia.org/wiki/Soft_heap\nWill be planning to implement it in future, for now we can conclude this ticket. Any suggestion?",
    "created_at": "2019-04-09T20:18:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531674",
    "user": "https://github.com/Hrishabh-yadav"
}
```

<a id='comment:44'></a>
Yeah, I did try to implement it and results weren't quite good. Problem with median_of_medians is that although it is a linear time algorithm but also has large coefficient.

The result of median_of_median was still better than the one currently used for finding median. 

Yeah it will be better if we conclude this ticket now, but still I am planning to study more about pivot selection. I also came across a data structure used for selection algorithm: https://en.wikipedia.org/wiki/Soft_heap
Will be planning to implement it in future, for now we can conclude this ticket. Any suggestion?



---

archive/issue_comments_531675.json:
```json
{
    "body": "<a id='comment:45'></a>\nAs reported by the patchbot\n\n```diff\n-    EXAMPLE:\n+    EXAMPLES::\n```",
    "created_at": "2019-04-10T08:35:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531675",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:45'></a>
As reported by the patchbot

```diff
-    EXAMPLE:
+    EXAMPLES::
```



---

archive/issue_comments_531676.json:
```json
{
    "body": "Changing commit from \"c10469297ef364b0e917bb9b4407187d2abea9ad\" to \"3aa3c8d654388e00cbdcb146032462a86b7326bb\"",
    "created_at": "2019-04-10T08:44:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531676",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c10469297ef364b0e917bb9b4407187d2abea9ad" to "3aa3c8d654388e00cbdcb146032462a86b7326bb"



---

archive/issue_comments_531677.json:
```json
{
    "body": "<a id='comment:46'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                     |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------|\n|[3aa3c8d](https://github.com/sagemath/sagetrac-mirror/commit/3aa3c8d654388e00cbdcb146032462a86b7326bb)|`Modified \"Example:\"`|",
    "created_at": "2019-04-10T08:44:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531677",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:46'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                     |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------|
|[3aa3c8d](https://github.com/sagemath/sagetrac-mirror/commit/3aa3c8d654388e00cbdcb146032462a86b7326bb)|`Modified "Example:"`|



---

archive/issue_comments_531678.json:
```json
{
    "body": "<a id='comment:47'></a>\nNo. Please revert last commit. The needed change is in `kruskal_iterator_from_edges`.\n\nAlso, you should build the documentation and check if the resulting html pages display well.",
    "created_at": "2019-04-10T09:07:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531678",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:47'></a>
No. Please revert last commit. The needed change is in `kruskal_iterator_from_edges`.

Also, you should build the documentation and check if the resulting html pages display well.



---

archive/issue_comments_531679.json:
```json
{
    "body": "Changing commit from \"3aa3c8d654388e00cbdcb146032462a86b7326bb\" to \"6e928245fdc3300af342bc2dfc99fee7d81b6e0c\"",
    "created_at": "2019-04-10T12:49:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531679",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "3aa3c8d654388e00cbdcb146032462a86b7326bb" to "6e928245fdc3300af342bc2dfc99fee7d81b6e0c"



---

archive/issue_comments_531680.json:
```json
{
    "body": "<a id='comment:48'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------|\n|[6e92824](https://github.com/sagemath/sagetrac-mirror/commit/6e928245fdc3300af342bc2dfc99fee7d81b6e0c)|`Revrted and Modified`|",
    "created_at": "2019-04-10T12:49:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531680",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:48'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------|
|[6e92824](https://github.com/sagemath/sagetrac-mirror/commit/6e928245fdc3300af342bc2dfc99fee7d81b6e0c)|`Revrted and Modified`|



---

archive/issue_comments_531681.json:
```json
{
    "body": "<a id='comment:49'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                     |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------|\n|[94aa027](https://github.com/sagemath/sagetrac-mirror/commit/94aa027a99c5ff33fb9ca065c271887e26810d2f)|`Modified \"Examples\"`|",
    "created_at": "2019-04-10T12:53:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531681",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:49'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                     |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------|
|[94aa027](https://github.com/sagemath/sagetrac-mirror/commit/94aa027a99c5ff33fb9ca065c271887e26810d2f)|`Modified "Examples"`|



---

archive/issue_comments_531682.json:
```json
{
    "body": "Changing commit from \"6e928245fdc3300af342bc2dfc99fee7d81b6e0c\" to \"94aa027a99c5ff33fb9ca065c271887e26810d2f\"",
    "created_at": "2019-04-10T12:53:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531682",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6e928245fdc3300af342bc2dfc99fee7d81b6e0c" to "94aa027a99c5ff33fb9ca065c271887e26810d2f"



---

archive/issue_comments_531683.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-04-11T08:13:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531683",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_531684.json:
```json
{
    "body": "Changing reviewer from \"\" to \"David Coudert\"",
    "created_at": "2019-04-11T08:13:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531684",
    "user": "https://github.com/dcoudert"
}
```

Changing reviewer from "" to "David Coudert"



---

archive/issue_comments_531685.json:
```json
{
    "body": "<a id='comment:50'></a>\nLGTM.",
    "created_at": "2019-04-11T08:13:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531685",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:50'></a>
LGTM.



---

archive/issue_comments_531686.json:
```json
{
    "body": "<a id='comment:51'></a>\nauthor name should be real name",
    "created_at": "2019-04-16T09:23:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531686",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:51'></a>
author name should be real name



---

archive/issue_comments_531687.json:
```json
{
    "body": "Changing author from \"gh-Hrishabh-yadav\" to \"Hrishabh Yadav\"",
    "created_at": "2019-04-16T11:02:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531687",
    "user": "https://github.com/Hrishabh-yadav"
}
```

Changing author from "gh-Hrishabh-yadav" to "Hrishabh Yadav"



---

archive/issue_events_077389.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-04-18T19:56:44Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27482#event-77389"
}
```



---

archive/issue_comments_531688.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-04-18T19:56:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531688",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_531689.json:
```json
{
    "body": "Changing branch from \"public/graphs/27482_filter_kruskal\" to \"94aa027a99c5ff33fb9ca065c271887e26810d2f\"",
    "created_at": "2019-04-18T19:56:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27482#issuecomment-531689",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/graphs/27482_filter_kruskal" to "94aa027a99c5ff33fb9ca065c271887e26810d2f"
