# Issue 27564: Implement algorithms for tree specifically which have better time complexity than for general graph

archive/issues_027327.json:
```json
{
    "assignees": [],
    "body": "Currently, finding diameter and center of tree,etc. is only possible using method implemented for general graphs(having way higher time complexity than the ones which are specifically for trees). \\\\\nI am proposing to implement a class for tree and implement tree specific algorithms there. And whenever we encounter a graph which is tree and there is some better algorithm to compute the asked property for tree than general graph, we convert that graph into instance of Tree and call the relevant algorithm.\\\\\nThere are a large number of algorithms for tree which have significantly less time complexity than algorithms for general graph. So, this can benefit a lot.\\\\\nIf the idea is agreed upon, I will be happy to send a diff.\n\nCC:  @dcoudert\n\nBranch/Commit: **[u/gh-abhayptp/implement_algorithms_for_tree_specifically_which_have_better_time_complexity_than_for_general_graph](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-abhayptp/implement_algorithms_for_tree_specifically_which_have_better_time_complexity_than_for_general_graph) @ [`0119f28`](https://github.com/sagemath/sagetrac-mirror/commit/0119f28eeeff2c0d2e6846dd6db2e49f441520c1)**\n\nComponent: **graph theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/27564_\n\n",
    "created_at": "2019-03-29T07:12:22Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Implement algorithms for tree specifically which have better time complexity than for general graph",
    "type": "issue",
    "updated_at": "2022-09-19T18:58:47Z",
    "url": "https://github.com/sagemath/sage/issues/27564",
    "user": "https://github.com/abhayptp"
}
```
Currently, finding diameter and center of tree,etc. is only possible using method implemented for general graphs(having way higher time complexity than the ones which are specifically for trees). \\
I am proposing to implement a class for tree and implement tree specific algorithms there. And whenever we encounter a graph which is tree and there is some better algorithm to compute the asked property for tree than general graph, we convert that graph into instance of Tree and call the relevant algorithm.\\
There are a large number of algorithms for tree which have significantly less time complexity than algorithms for general graph. So, this can benefit a lot.\\
If the idea is agreed upon, I will be happy to send a diff.

CC:  @dcoudert

Branch/Commit: **[u/gh-abhayptp/implement_algorithms_for_tree_specifically_which_have_better_time_complexity_than_for_general_graph](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-abhayptp/implement_algorithms_for_tree_specifically_which_have_better_time_complexity_than_for_general_graph) @ [`0119f28`](https://github.com/sagemath/sagetrac-mirror/commit/0119f28eeeff2c0d2e6846dd6db2e49f441520c1)**

Component: **graph theory**

_Issue created by migration from https://trac.sagemath.org/ticket/27564_





---

archive/issue_events_375488.json:
```json
{
    "actor": "https://github.com/abhayptp",
    "created_at": "2019-03-29T07:12:22Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27564#event-375488"
}
```



---

archive/issue_events_375489.json:
```json
{
    "actor": "https://github.com/abhayptp",
    "created_at": "2019-03-29T07:12:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27564#event-375489"
}
```



---

archive/issue_events_375490.json:
```json
{
    "actor": "https://github.com/abhayptp",
    "created_at": "2019-03-29T07:12:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27564#event-375490"
}
```



---

archive/issue_events_375491.json:
```json
{
    "actor": "https://github.com/abhayptp",
    "created_at": "2019-03-29T07:12:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27564#event-375491"
}
```



---

archive/issue_events_375492.json:
```json
{
    "actor": "https://github.com/abhayptp",
    "created_at": "2019-03-29T07:12:41Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "title_is": "Implement algorithms for tree specifically which have better time complexity than for general graph",
    "title_was": "Implement algorithms for tree specifically which have better time complexity than general graph",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27564#event-375492"
}
```



---

archive/issue_comments_426920.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nYou propose to make a class Tree with a specific backend like we have for bipartite graphs, or just to implement a collection of algorithms optimized for trees ?",
    "created_at": "2019-03-29T08:16:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27564#issuecomment-426920",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:2" align="right">comment:2</div>

You propose to make a class Tree with a specific backend like we have for bipartite graphs, or just to implement a collection of algorithms optimized for trees ?



---

archive/issue_comments_426921.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nTill now, I was only thinking to implement a collection of algorithms optimized for tree at one place to prevent code clutter in the current algorithms. I can not think right now how having a specific backend for trees will prove to be helpful because data structure of Tree is same as Graph unlike Bipartite graph.",
    "created_at": "2019-03-29T08:35:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27564#issuecomment-426921",
    "user": "https://github.com/abhayptp"
}
```

<div id="comment:3" align="right">comment:3</div>

Till now, I was only thinking to implement a collection of algorithms optimized for tree at one place to prevent code clutter in the current algorithms. I can not think right now how having a specific backend for trees will prove to be helpful because data structure of Tree is same as Graph unlike Bipartite graph.



---

archive/issue_comments_426922.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nFor example, another possible use case I can think of is this:\\\\\nFinding if two trees are isomorphic is possible in O(V) time, which is way better than general algorithm for graph isomorphism(no polynomial time solution for graph isomorphism yet found).\\\\\nReference:\\\\\n[http://wwwmayr.in.tum.de/konferenzen/Jass08/courses/1/smal/Smal_Paper.pdf](http://wwwmayr.in.tum.de/konferenzen/Jass08/courses/1/smal/Smal_Paper.pdf)\\\\\nBut implementing this algorithm in is_isomorphic() function will introduce lot of code clutter.",
    "created_at": "2019-03-29T08:50:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27564#issuecomment-426922",
    "user": "https://github.com/abhayptp"
}
```

<div id="comment:4" align="right">comment:4</div>

For example, another possible use case I can think of is this:\\
Finding if two trees are isomorphic is possible in O(V) time, which is way better than general algorithm for graph isomorphism(no polynomial time solution for graph isomorphism yet found).\\
Reference:\\
[http://wwwmayr.in.tum.de/konferenzen/Jass08/courses/1/smal/Smal_Paper.pdf](http://wwwmayr.in.tum.de/konferenzen/Jass08/courses/1/smal/Smal_Paper.pdf)\\
But implementing this algorithm in is_isomorphic() function will introduce lot of code clutter.



---

archive/issue_comments_426923.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI think that the tree needs to be rooted for checking the isomorphism in O(V) time. But in graph module rooted trees are not defined. But I think in combinat module rooted trees are defined.",
    "created_at": "2019-03-29T11:24:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27564#issuecomment-426923",
    "user": "https://github.com/rajat1433"
}
```

<div id="comment:5" align="right">comment:5</div>

I think that the tree needs to be rooted for checking the isomorphism in O(V) time. But in graph module rooted trees are not defined. But I think in combinat module rooted trees are defined.



---

archive/issue_comments_426924.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI do not recommend to use the rooted trees of combinat here. If you need a root, you can for instance find the center of the tree in linear time.",
    "created_at": "2019-03-29T11:42:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27564#issuecomment-426924",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:6" align="right">comment:6</div>

I do not recommend to use the rooted trees of combinat here. If you need a root, you can for instance find the center of the tree in linear time.



---

archive/issue_comments_426925.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nYes, the paper describes the same trick for checking isomorphism for unrooted trees.\\\\\nWe do not need to define a separate class for tree I think. Just a separate file will suffice which will contain all the tree related algorithms. @dcoudert opinions?",
    "created_at": "2019-03-29T11:51:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27564#issuecomment-426925",
    "user": "https://github.com/abhayptp"
}
```

<div id="comment:7" align="right">comment:7</div>

Yes, the paper describes the same trick for checking isomorphism for unrooted trees.\\
We do not need to define a separate class for tree I think. Just a separate file will suffice which will contain all the tree related algorithms. @dcoudert opinions?



---

archive/issue_comments_426926.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nFeel free to initialize.",
    "created_at": "2019-03-30T08:06:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27564#issuecomment-426926",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:8" align="right">comment:8</div>

Feel free to initialize.



---

archive/issue_comments_426927.json:
```json
{
    "body": "Branch: **[u/gh-abhayptp/implement_algorithms_for_tree_specifically_which_have_better_time_complexity_than_for_general_graph](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-abhayptp/implement_algorithms_for_tree_specifically_which_have_better_time_complexity_than_for_general_graph)**",
    "created_at": "2019-04-01T15:14:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27564#issuecomment-426927",
    "user": "https://github.com/abhayptp"
}
```

Branch: **[u/gh-abhayptp/implement_algorithms_for_tree_specifically_which_have_better_time_complexity_than_for_general_graph](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-abhayptp/implement_algorithms_for_tree_specifically_which_have_better_time_complexity_than_for_general_graph)**



---

archive/issue_comments_426928.json:
```json
{
    "body": "Commit: **[`68dadad`](https://github.com/sagemath/sagetrac-mirror/commit/68dadad6ee035f1670f3f7fa6efe8516c083b7f2)**",
    "created_at": "2019-04-01T15:16:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27564#issuecomment-426928",
    "user": "https://github.com/abhayptp"
}
```

Commit: **[`68dadad`](https://github.com/sagemath/sagetrac-mirror/commit/68dadad6ee035f1670f3f7fa6efe8516c083b7f2)**



---

archive/issue_comments_426929.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nTests and documentation is yet to be added and some changes are yet to be done. I will update status to 'Needs review' once it's done.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2b0d55b4b63782850f9eff480f9027f58e44d2ed\"><code>2b0d55b</code></a></td><td><code>Add algorithms(center, diameter, isomorphism) for tree</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/68dadad6ee035f1670f3f7fa6efe8516c083b7f2\"><code>68dadad</code></a></td><td><code>Add generateMapping for isomorphism on trees</code></td></tr></table>\n",
    "created_at": "2019-04-01T15:16:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27564#issuecomment-426929",
    "user": "https://github.com/abhayptp"
}
```

<div id="comment:10" align="right">comment:10</div>

Tests and documentation is yet to be added and some changes are yet to be done. I will update status to 'Needs review' once it's done.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2b0d55b4b63782850f9eff480f9027f58e44d2ed"><code>2b0d55b</code></a></td><td><code>Add algorithms(center, diameter, isomorphism) for tree</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/68dadad6ee035f1670f3f7fa6efe8516c083b7f2"><code>68dadad</code></a></td><td><code>Add generateMapping for isomorphism on trees</code></td></tr></table>




---

archive/issue_comments_426930.json:
```json
{
    "body": "Changed commit from **[`68dadad`](https://github.com/sagemath/sagetrac-mirror/commit/68dadad6ee035f1670f3f7fa6efe8516c083b7f2)** to **[`41ee56b`](https://github.com/sagemath/sagetrac-mirror/commit/41ee56b068cddb7b9a1d4e56379bfce9f9e91dc4)**",
    "created_at": "2019-04-03T16:48:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27564#issuecomment-426930",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`68dadad`](https://github.com/sagemath/sagetrac-mirror/commit/68dadad6ee035f1670f3f7fa6efe8516c083b7f2)** to **[`41ee56b`](https://github.com/sagemath/sagetrac-mirror/commit/41ee56b068cddb7b9a1d4e56379bfce9f9e91dc4)**



---

archive/issue_comments_426931.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/41ee56b068cddb7b9a1d4e56379bfce9f9e91dc4\"><code>41ee56b</code></a></td><td><code>Add documentation and examples</code></td></tr></table>\n",
    "created_at": "2019-04-03T16:48:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27564#issuecomment-426931",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/41ee56b068cddb7b9a1d4e56379bfce9f9e91dc4"><code>41ee56b</code></a></td><td><code>Add documentation and examples</code></td></tr></table>




---

archive/issue_comments_426932.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nAdded documentation and examples. I have included tree_isomorphism in is_isomorphic function. So, whenever G.is_isomorphic(H) is called and G and H are trees(and edge labels is false), isomorphism is checked using tree_isomorphism function. \\\\ \n\nI have tested the function by writing a script of generating some small random trees and comparing the output of tree_isomorphism and is_isomorphic. If anyone has a better idea, please suggest.\n\nedge_labels=True case can also be handled using tree_isomorphism I think. I will send another diff once I implement it. \\\\ \\\\\n \nI am not sure, if I should include tree_diameter() in diameter() functions, since currently it works on only unweighted trees. Same for tree_center.",
    "created_at": "2019-04-03T16:59:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27564#issuecomment-426932",
    "user": "https://github.com/abhayptp"
}
```

<div id="comment:12" align="right">comment:12</div>

Added documentation and examples. I have included tree_isomorphism in is_isomorphic function. So, whenever G.is_isomorphic(H) is called and G and H are trees(and edge labels is false), isomorphism is checked using tree_isomorphism function. \\ 

I have tested the function by writing a script of generating some small random trees and comparing the output of tree_isomorphism and is_isomorphic. If anyone has a better idea, please suggest.

edge_labels=True case can also be handled using tree_isomorphism I think. I will send another diff once I implement it. \\ \\
 
I am not sure, if I should include tree_diameter() in diameter() functions, since currently it works on only unweighted trees. Same for tree_center.



---

archive/issue_events_375493.json:
```json
{
    "actor": "https://github.com/abhayptp",
    "created_at": "2019-04-03T16:59:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27564#event-375493"
}
```



---

archive/issue_comments_426933.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\n\n```diff\n-        if self.is_tree() and other.is_tree() and not edge_labels:\n+        if not edge_labels and self.is_tree() and other.is_tree():\n```\n\n\nMethod `tree_diameter`\n- some code style improvements needed like\n\n```diff\n-    Returns diameter of unweighted tree.\n-    Input:\n+    Return the diameter of the unweighted tree.\n+\n+    INPUT:\n```\n\n```diff\n-    - ``endpoints`` -- boolean(default: ``False``); whether to return\n-    enpoints of diameter or not\n+    - ``endpoints`` -- boolean (default: ``False``); whether to return\n+      enpoints of diameter or not\n```\n\n- it would be nice to document the algorithm used here ( a few sentences)\n\n- this will break if `G` is empty: `u = next(G.vertex_iterator())`\n- and also if the input graph is not a tree, is not connected, etc.\n\n- instead of `shortest_path_lengths`, you must use `G.breadth_first_search(u, report_distance=True)`. You will then observe that the last reported distance is also the largest one.\n\n- Why are you only considering unweighted graphs ?",
    "created_at": "2019-04-04T08:25:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27564#issuecomment-426933",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:13" align="right">comment:13</div>


```diff
-        if self.is_tree() and other.is_tree() and not edge_labels:
+        if not edge_labels and self.is_tree() and other.is_tree():
```


Method `tree_diameter`
- some code style improvements needed like

```diff
-    Returns diameter of unweighted tree.
-    Input:
+    Return the diameter of the unweighted tree.
+
+    INPUT:
```

```diff
-    - ``endpoints`` -- boolean(default: ``False``); whether to return
-    enpoints of diameter or not
+    - ``endpoints`` -- boolean (default: ``False``); whether to return
+      enpoints of diameter or not
```

- it would be nice to document the algorithm used here ( a few sentences)

- this will break if `G` is empty: `u = next(G.vertex_iterator())`
- and also if the input graph is not a tree, is not connected, etc.

- instead of `shortest_path_lengths`, you must use `G.breadth_first_search(u, report_distance=True)`. You will then observe that the last reported distance is also the largest one.

- Why are you only considering unweighted graphs ?



---

archive/issue_comments_426934.json:
```json
{
    "body": "Changed commit from **[`41ee56b`](https://github.com/sagemath/sagetrac-mirror/commit/41ee56b068cddb7b9a1d4e56379bfce9f9e91dc4)** to **[`57fcd37`](https://github.com/sagemath/sagetrac-mirror/commit/57fcd37260267dfae64097fccd08494cc2d259dd)**",
    "created_at": "2019-04-05T19:30:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27564#issuecomment-426934",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`41ee56b`](https://github.com/sagemath/sagetrac-mirror/commit/41ee56b068cddb7b9a1d4e56379bfce9f9e91dc4)** to **[`57fcd37`](https://github.com/sagemath/sagetrac-mirror/commit/57fcd37260267dfae64097fccd08494cc2d259dd)**



---

archive/issue_comments_426935.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c1e1b2616fa679941d2451aecd9afc1e4af515d4\"><code>c1e1b26</code></a></td><td><code>WIP 1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/57fcd37260267dfae64097fccd08494cc2d259dd\"><code>57fcd37</code></a></td><td><code>Add compatibility for weighted trees and fix code style</code></td></tr></table>\n",
    "created_at": "2019-04-05T19:30:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27564#issuecomment-426935",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c1e1b2616fa679941d2451aecd9afc1e4af515d4"><code>c1e1b26</code></a></td><td><code>WIP 1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/57fcd37260267dfae64097fccd08494cc2d259dd"><code>57fcd37</code></a></td><td><code>Add compatibility for weighted trees and fix code style</code></td></tr></table>




---

archive/issue_comments_426936.json:
```json
{
    "body": "Changed commit from **[`57fcd37`](https://github.com/sagemath/sagetrac-mirror/commit/57fcd37260267dfae64097fccd08494cc2d259dd)** to **[`0119f28`](https://github.com/sagemath/sagetrac-mirror/commit/0119f28eeeff2c0d2e6846dd6db2e49f441520c1)**",
    "created_at": "2019-04-05T19:33:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27564#issuecomment-426936",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`57fcd37`](https://github.com/sagemath/sagetrac-mirror/commit/57fcd37260267dfae64097fccd08494cc2d259dd)** to **[`0119f28`](https://github.com/sagemath/sagetrac-mirror/commit/0119f28eeeff2c0d2e6846dd6db2e49f441520c1)**



---

archive/issue_comments_426937.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0119f28eeeff2c0d2e6846dd6db2e49f441520c1\"><code>0119f28</code></a></td><td><code>WIP 3</code></td></tr></table>\n",
    "created_at": "2019-04-05T19:33:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27564#issuecomment-426937",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0119f28eeeff2c0d2e6846dd6db2e49f441520c1"><code>0119f28</code></a></td><td><code>WIP 3</code></td></tr></table>




---

archive/issue_comments_426938.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\n>some code style improvements needed like\n\ndone\n>it would be nice to document the algorithm used here ( a few sentences)\n\ndone\n>this will break if G is empty: u = next(G.vertex_iterator()) and also if the input graph is not a tree, is not connected, etc.\n\nupdated.\n>instead of shortest_path_lengths, you must use G.breadth_first_search(u, report_distance=True). You will then observe that the last reported distance is also the largest one.\n\nNow, I have also added the compatibility for weighted trees. To avoid redundant code for finding shortest paths, I am using Dijkstra algorithm(so, using shortest_path_lengths). I know we can find it in linear time. But I don't think using dijkstra algorithm will affect performance that much. Or shall I write function for finding shortest_path_lenghts in trees?\n>Why are you only considering unweighted graphs ?\n\nNow, it is compatible for weighted graphs. But the given algorithm works only for non-negative weights for diameter. In case of center, positive weights since including 0 weight will imply that centers can lie on vertex other than diameter. \\\\",
    "created_at": "2019-04-05T19:47:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27564#issuecomment-426938",
    "user": "https://github.com/abhayptp"
}
```

<div id="comment:16" align="right">comment:16</div>

>some code style improvements needed like

done
>it would be nice to document the algorithm used here ( a few sentences)

done
>this will break if G is empty: u = next(G.vertex_iterator()) and also if the input graph is not a tree, is not connected, etc.

updated.
>instead of shortest_path_lengths, you must use G.breadth_first_search(u, report_distance=True). You will then observe that the last reported distance is also the largest one.

Now, I have also added the compatibility for weighted trees. To avoid redundant code for finding shortest paths, I am using Dijkstra algorithm(so, using shortest_path_lengths). I know we can find it in linear time. But I don't think using dijkstra algorithm will affect performance that much. Or shall I write function for finding shortest_path_lenghts in trees?
>Why are you only considering unweighted graphs ?

Now, it is compatible for weighted graphs. But the given algorithm works only for non-negative weights for diameter. In case of center, positive weights since including 0 weight will imply that centers can lie on vertex other than diameter. \\



---

archive/issue_comments_426939.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nNow, I see that diameter and center can also be found out for negative weighted trees using a different approach.",
    "created_at": "2019-04-05T19:52:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27564#issuecomment-426939",
    "user": "https://github.com/abhayptp"
}
```

<div id="comment:17" align="right">comment:17</div>

Now, I see that diameter and center can also be found out for negative weighted trees using a different approach.



---

archive/issue_comments_426940.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@abhayptp](#comment%3A16):\n> >some code style improvements needed like\n\n> done\n\nYou should check the developer manual http://doc.sagemath.org/html/en/developer/ and in particular http://doc.sagemath.org/html/en/developer/coding_basics.html\n\nWhen we define a method, we have first a short (1 line) description of what the method returns. Then, separated by an empty line, we have a longer description, the input block, etc.\n\n```\ndef tree_diameter(T, endpoints=False, path=False, by_weight=False):\n    r\"\"\"\n    Return the diameter of the tree `T`.\n\n    This method use 2-sweep to compute the diameter of the tree `T`. That is,\n    it first chooses some random vertex `x` and finds the most distant vertex\n    `u` from `x`. The diameter of `T` is the largest distance from `u`.\n\n    It works only on non-negative weighted trees.\n\n    INPUT:\n\n    - ``T`` -- a Graph\n```\n\n- Note that I use `r\"\"\"` instead of `\"\"\"` to indicate the use of latex. Indeed, you can ut latex code like <code>\\`G\\`</code> or <code>\\`\\sqrt{x^2 + 1}\\`</code>.\n\n- when an input is described on multiple lines, you must add 2 spaces\n\n```diff\n-    - ``endpoints`` -- boolean (default: ``False``); whether to return\n-    enpoints of diameter or not\n+    - ``endpoints`` -- boolean (default: ``False``); whether to return\n+      enpoints of diameter or not\n```\n\n\n- Concerning the usage of weights, you can for instance check the documentation of method `shortest_path`. We usually allow to pass a `weight_function`.\n\n- You can simplify you code as follows\n\n```diff\n+    if by_weight:\n+        from operator import itemgetter\n+        path_lengths = G.shortest_path_lengths(x, algorithm='Dijkstra_Boost', by_weight=True)\n+        u = max(path_lengths.items(), key=itemgetter(1))[0]\n+        path_lengths = G.shortest_path_lengths(u, algorithm='Dijkstra_Boost', by_weight=True)\n+        (v, dist) = max(path_lengths.items(), key=itemgetter(1))\n+    else:\n+        for u in G.breadth_first_search(x):\n+            pass\n+        for v, dist in G.breadth_first_search(u, report_distance=True):\n+            pass\n```\n\n- Note that it's better to use `.items()` instead of `.iteritems()` for Python 3 compatibility\n\nI let you do the same for the other methods.",
    "created_at": "2019-04-06T16:37:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27564#issuecomment-426940",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@abhayptp](#comment%3A16):
> >some code style improvements needed like

> done

You should check the developer manual http://doc.sagemath.org/html/en/developer/ and in particular http://doc.sagemath.org/html/en/developer/coding_basics.html

When we define a method, we have first a short (1 line) description of what the method returns. Then, separated by an empty line, we have a longer description, the input block, etc.

```
def tree_diameter(T, endpoints=False, path=False, by_weight=False):
    r"""
    Return the diameter of the tree `T`.

    This method use 2-sweep to compute the diameter of the tree `T`. That is,
    it first chooses some random vertex `x` and finds the most distant vertex
    `u` from `x`. The diameter of `T` is the largest distance from `u`.

    It works only on non-negative weighted trees.

    INPUT:

    - ``T`` -- a Graph
```

- Note that I use `r"""` instead of `"""` to indicate the use of latex. Indeed, you can ut latex code like <code>\`G\`</code> or <code>\`\sqrt{x^2 + 1}\`</code>.

- when an input is described on multiple lines, you must add 2 spaces

```diff
-    - ``endpoints`` -- boolean (default: ``False``); whether to return
-    enpoints of diameter or not
+    - ``endpoints`` -- boolean (default: ``False``); whether to return
+      enpoints of diameter or not
```


- Concerning the usage of weights, you can for instance check the documentation of method `shortest_path`. We usually allow to pass a `weight_function`.

- You can simplify you code as follows

```diff
+    if by_weight:
+        from operator import itemgetter
+        path_lengths = G.shortest_path_lengths(x, algorithm='Dijkstra_Boost', by_weight=True)
+        u = max(path_lengths.items(), key=itemgetter(1))[0]
+        path_lengths = G.shortest_path_lengths(u, algorithm='Dijkstra_Boost', by_weight=True)
+        (v, dist) = max(path_lengths.items(), key=itemgetter(1))
+    else:
+        for u in G.breadth_first_search(x):
+            pass
+        for v, dist in G.breadth_first_search(u, report_distance=True):
+            pass
```

- Note that it's better to use `.items()` instead of `.iteritems()` for Python 3 compatibility

I let you do the same for the other methods.



---

archive/issue_comments_426941.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nMoving tickets from the Sage 8.8 milestone that have been actively worked on in the last six months to the next release milestone (optimistically).",
    "created_at": "2019-07-03T11:37:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27564#issuecomment-426941",
    "user": "https://github.com/embray"
}
```

<div id="comment:19" align="right">comment:19</div>

Moving tickets from the Sage 8.8 milestone that have been actively worked on in the last six months to the next release milestone (optimistically).



---

archive/issue_events_375494.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-07-03T11:37:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27564#event-375494"
}
```



---

archive/issue_events_375495.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-07-03T11:37:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27564#event-375495"
}
```



---

archive/issue_events_375496.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27564#event-375496"
}
```



---

archive/issue_events_375497.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27564#event-375497"
}
```



---

archive/issue_comments_426942.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nTicket retargeted after milestone closed",
    "created_at": "2019-12-30T14:48:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27564#issuecomment-426942",
    "user": "https://github.com/embray"
}
```

<div id="comment:20" align="right">comment:20</div>

Ticket retargeted after milestone closed



---

archive/issue_events_375498.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27564#event-375498"
}
```



---

archive/issue_events_375499.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27564#event-375499"
}
```



---

archive/issue_comments_426943.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nBatch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.",
    "created_at": "2020-04-14T19:41:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27564#issuecomment-426943",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:21" align="right">comment:21</div>

Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.



---

archive/issue_events_375500.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2020-06-20T07:20:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27564#event-375500"
}
```



---

archive/issue_events_375501.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2020-06-20T07:20:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27564#event-375501"
}
```



---

archive/issue_events_375502.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27564#event-375502"
}
```



---

archive/issue_events_375503.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27564#event-375503"
}
```



---

archive/issue_events_375504.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27564#event-375504"
}
```



---

archive/issue_events_375505.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27564#event-375505"
}
```



---

archive/issue_comments_426944.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27564#issuecomment-426944",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:24" align="right">comment:24</div>

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_375506.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27564#event-375506"
}
```



---

archive/issue_events_375507.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27564#event-375507"
}
```



---

archive/issue_comments_426945.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nSetting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27564#issuecomment-426945",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:25" align="right">comment:25</div>

Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_events_375508.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27564#event-375508"
}
```



---

archive/issue_events_375509.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27564#event-375509"
}
```



---

archive/issue_events_375510.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T20:27:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27564#event-375510"
}
```



---

archive/issue_events_375511.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T20:27:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27564#event-375511"
}
```



---

archive/issue_events_375512.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27564#event-375512"
}
```



---

archive/issue_events_375513.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27564",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27564#event-375513"
}
```
