# Issue 27065: py3: handle the explain_pickle problem

archive/issues_026828.json:
```json
{
    "body": "The file explain_pickle has currently 70 failing doctests with python3. It seems to be very difficult to fix them all.\n\nProposal:\n\n* either (1) remove this file completely\n* or (2) tag all doctests with `#py2`\n\nThis ticket implements option (2): tag all doctests with `#py2`.\n\nFurther work on `explain_pickle` is tracked at #27350.\n\n**CC:**  @embray @jdemeyer @kiwifb @tscrim @vinklein\n\n**Branch:** [aa3173c15e55cd6f372382888a956d34178f4497](https://github.com/sagemath/sagetrac-mirror/commit/aa3173c15e55cd6f372382888a956d34178f4497)\n\n**Reviewer:** Jeroen Demeyer\n\n**Author:** Fr\u00e9d\u00e9ric Chapoton\n\nIssue created by migration from https://trac.sagemath.org/ticket/27065\n\n",
    "closed_at": "2019-02-26T23:36:52Z",
    "created_at": "2019-01-15T19:04:33Z",
    "labels": [
        "component: python3"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.7",
    "title": "py3: handle the explain_pickle problem",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/27065",
    "user": "https://github.com/fchapoton"
}
```
The file explain_pickle has currently 70 failing doctests with python3. It seems to be very difficult to fix them all.

Proposal:

* either (1) remove this file completely
* or (2) tag all doctests with `#py2`

This ticket implements option (2): tag all doctests with `#py2`.

Further work on `explain_pickle` is tracked at #27350.

**CC:**  @embray @jdemeyer @kiwifb @tscrim @vinklein

**Branch:** [aa3173c15e55cd6f372382888a956d34178f4497](https://github.com/sagemath/sagetrac-mirror/commit/aa3173c15e55cd6f372382888a956d34178f4497)

**Reviewer:** Jeroen Demeyer

**Author:** Frédéric Chapoton

Issue created by migration from https://trac.sagemath.org/ticket/27065





---

archive/issue_events_239019.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-01-15T19:05:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27065#event-239019"
}
```



---

archive/issue_comments_420169.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,7 +1,8 @@\n The file explain_pickle has currently 70 failing doctests with python3. It seems to be very difficult to fix them all.\n \n Proposal:\n-(1) remove this file completely\n-(2) tag all doctests with `#py2`\n \n-I suggest\n+* either (1) remove this file completely\n+\n+* or (2) tag all doctests with `#py2`\n+\n``````\n",
    "created_at": "2019-01-15T19:05:11Z",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27065#issuecomment-420169",
    "user": "https://github.com/fchapoton"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,7 +1,8 @@
 The file explain_pickle has currently 70 failing doctests with python3. It seems to be very difficult to fix them all.
 
 Proposal:
-(1) remove this file completely
-(2) tag all doctests with `#py2`
 
-I suggest
+* either (1) remove this file completely
+
+* or (2) tag all doctests with `#py2`
+
``````




---

archive/issue_comments_420170.json:
```json
{
    "body": "<a id='comment:2'></a>\nI brought this up on the mailing list some months ago, and consensus of most people who participated in the discussion was to remove this module from Sage, but publish it as a stand-alone package: https://groups.google.com/d/msg/sage-devel/94kP0_Xbx04/x7St89zwCgAJ\n\nI can work on that.  My feeling about it is to make two completely separate Python 2 and Python 3 versions.  Maintenance-wise I don't see that being much of a burden since this module won't likely be maintained much anyways, and after 2020 the Python 2 version can be removed entirely.",
    "created_at": "2019-01-16T10:42:04Z",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27065#issuecomment-420170",
    "user": "https://github.com/embray"
}
```

<a id='comment:2'></a>
I brought this up on the mailing list some months ago, and consensus of most people who participated in the discussion was to remove this module from Sage, but publish it as a stand-alone package: https://groups.google.com/d/msg/sage-devel/94kP0_Xbx04/x7St89zwCgAJ

I can work on that.  My feeling about it is to make two completely separate Python 2 and Python 3 versions.  Maintenance-wise I don't see that being much of a burden since this module won't likely be maintained much anyways, and after 2020 the Python 2 version can be removed entirely.



---

archive/issue_comments_420171.json:
```json
{
    "body": "<a id='comment:3'></a>\nGood. Should we deprecate or can we just remove (given our python3 objective) ?",
    "created_at": "2019-01-16T12:25:49Z",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27065#issuecomment-420171",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'></a>
Good. Should we deprecate or can we just remove (given our python3 objective) ?



---

archive/issue_comments_420172.json:
```json
{
    "body": "<a id='comment:4'></a>\nHere is branch that removes `explain_pickle` from sage.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/18bfcb98444219141f0fe2296059faa5cebffeef\">18bfcb9</a></td><td><code>full removal of explain_pickle (turned into an external python package)</code></td></tr></table>\n",
    "created_at": "2019-01-16T12:33:20Z",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27065#issuecomment-420172",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:4'></a>
Here is branch that removes `explain_pickle` from sage.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/18bfcb98444219141f0fe2296059faa5cebffeef">18bfcb9</a></td><td><code>full removal of explain_pickle (turned into an external python package)</code></td></tr></table>




---

archive/issue_comments_420173.json:
```json
{
    "body": "**Commit:** [18bfcb98444219141f0fe2296059faa5cebffeef](https://github.com/sagemath/sagetrac-mirror/commit/18bfcb98444219141f0fe2296059faa5cebffeef)",
    "created_at": "2019-01-16T12:33:20Z",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27065#issuecomment-420173",
    "user": "https://github.com/fchapoton"
}
```

**Commit:** [18bfcb98444219141f0fe2296059faa5cebffeef](https://github.com/sagemath/sagetrac-mirror/commit/18bfcb98444219141f0fe2296059faa5cebffeef)



---

archive/issue_comments_420174.json:
```json
{
    "body": "**Branch:** [public/ticket/27065](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/27065)",
    "created_at": "2019-01-16T12:33:20Z",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27065#issuecomment-420174",
    "user": "https://github.com/fchapoton"
}
```

**Branch:** [public/ticket/27065](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/27065)



---

archive/issue_events_239020.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-01-16T13:29:59Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "milestone": "sage-8.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27065#event-239020"
}
```



---

archive/issue_events_239021.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-01-16T13:29:59Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "milestone": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27065#event-239021"
}
```



---

archive/issue_comments_420175.json:
```json
{
    "body": "**Changing commit** from \"[18bfcb98444219141f0fe2296059faa5cebffeef](https://github.com/sagemath/sagetrac-mirror/commit/18bfcb98444219141f0fe2296059faa5cebffeef)\" to \"[25afb287e294d59341ff4647f128178be227d83b](https://github.com/sagemath/sagetrac-mirror/commit/25afb287e294d59341ff4647f128178be227d83b)\".",
    "created_at": "2019-01-16T16:19:57Z",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27065#issuecomment-420175",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[18bfcb98444219141f0fe2296059faa5cebffeef](https://github.com/sagemath/sagetrac-mirror/commit/18bfcb98444219141f0fe2296059faa5cebffeef)" to "[25afb287e294d59341ff4647f128178be227d83b](https://github.com/sagemath/sagetrac-mirror/commit/25afb287e294d59341ff4647f128178be227d83b)".



---

archive/issue_comments_420176.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ead257cf654f607df0ce6d92f16292629b275e9e\">ead257c</a></td><td><code>Merge branch 'public/ticket/27065' in 8.6</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/25afb287e294d59341ff4647f128178be227d83b\">25afb28</a></td><td><code>trac 27065 fixing some doctests</code></td></tr></table>\n",
    "created_at": "2019-01-16T16:19:57Z",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27065#issuecomment-420176",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ead257cf654f607df0ce6d92f16292629b275e9e">ead257c</a></td><td><code>Merge branch 'public/ticket/27065' in 8.6</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/25afb287e294d59341ff4647f128178be227d83b">25afb28</a></td><td><code>trac 27065 fixing some doctests</code></td></tr></table>




---

archive/issue_comments_420177.json:
```json
{
    "body": "<a id='comment:7'></a>\nWhat to do with the few doctests using `unpickle_newobj` and `unpickle_build` ? Just remove them ?",
    "created_at": "2019-01-16T16:20:39Z",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27065#issuecomment-420177",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:7'></a>
What to do with the few doctests using `unpickle_newobj` and `unpickle_build` ? Just remove them ?



---

archive/issue_events_239022.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-01-16T17:41:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27065#event-239022"
}
```



---

archive/issue_events_239023.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-01-16T17:41:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27065#event-239023"
}
```



---

archive/issue_comments_420178.json:
```json
{
    "body": "<a id='comment:8'></a>\nI had assumed keep `sage.misc.explain_pickle` but just have it do `from explain_pickle import *` and also raise a deprecation warning if imported.\n\nThis will have to wait, of course, until I make `explain_pickle`, and we can add it either as a standard package, or an optional package (in which case `sage.misc.explain_pickle` should catch `ImportError` and provide some explanation).",
    "created_at": "2019-01-16T17:41:28Z",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27065#issuecomment-420178",
    "user": "https://github.com/embray"
}
```

<a id='comment:8'></a>
I had assumed keep `sage.misc.explain_pickle` but just have it do `from explain_pickle import *` and also raise a deprecation warning if imported.

This will have to wait, of course, until I make `explain_pickle`, and we can add it either as a standard package, or an optional package (in which case `sage.misc.explain_pickle` should catch `ImportError` and provide some explanation).



---

archive/issue_comments_420179.json:
```json
{
    "body": "<a id='comment:9'></a>\nI would recommend making it straight to standard, but this will need a (quick) sage-devel vote.",
    "created_at": "2019-01-16T17:46:42Z",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27065#issuecomment-420179",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:9'></a>
I would recommend making it straight to standard, but this will need a (quick) sage-devel vote.



---

archive/issue_comments_420180.json:
```json
{
    "body": "<a id='comment:10'></a>\nI'm fine with either way, but point is there should still be some sort of regression for the old module (even if probably very few people use it outside of development--but clearly some do!)",
    "created_at": "2019-01-18T09:52:00Z",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27065#issuecomment-420180",
    "user": "https://github.com/embray"
}
```

<a id='comment:10'></a>
I'm fine with either way, but point is there should still be some sort of regression for the old module (even if probably very few people use it outside of development--but clearly some do!)



---

archive/issue_comments_420181.json:
```json
{
    "body": "<a id='comment:11'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cd63b0c05631198a35d8680cde0e18e639dd6692\">cd63b0c</a></td><td><code>trac 27065 mark the doctests as \"optional - explain_pickle\"</code></td></tr></table>\n",
    "created_at": "2019-01-21T10:35:23Z",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27065#issuecomment-420181",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cd63b0c05631198a35d8680cde0e18e639dd6692">cd63b0c</a></td><td><code>trac 27065 mark the doctests as "optional - explain_pickle"</code></td></tr></table>




---

archive/issue_comments_420182.json:
```json
{
    "body": "**Changing commit** from \"[25afb287e294d59341ff4647f128178be227d83b](https://github.com/sagemath/sagetrac-mirror/commit/25afb287e294d59341ff4647f128178be227d83b)\" to \"[cd63b0c05631198a35d8680cde0e18e639dd6692](https://github.com/sagemath/sagetrac-mirror/commit/cd63b0c05631198a35d8680cde0e18e639dd6692)\".",
    "created_at": "2019-01-21T10:35:23Z",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27065#issuecomment-420182",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[25afb287e294d59341ff4647f128178be227d83b](https://github.com/sagemath/sagetrac-mirror/commit/25afb287e294d59341ff4647f128178be227d83b)" to "[cd63b0c05631198a35d8680cde0e18e639dd6692](https://github.com/sagemath/sagetrac-mirror/commit/cd63b0c05631198a35d8680cde0e18e639dd6692)".



---

archive/issue_events_239024.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-01-21T10:37:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27065#event-239024"
}
```



---

archive/issue_events_239025.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-01-21T10:37:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27065#event-239025"
}
```



---

archive/issue_comments_420183.json:
```json
{
    "body": "<a id='comment:12'></a>\nNow ready. All failing doctests have been marked as depending on the non-existing pip package \"explain_pickle\".",
    "created_at": "2019-01-21T10:37:30Z",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27065#issuecomment-420183",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:12'></a>
Now ready. All failing doctests have been marked as depending on the non-existing pip package "explain_pickle".



---

archive/issue_comments_420184.json:
```json
{
    "body": "<a id='comment:13'></a>\nPlease just let me take care of it.  I promise I will soon (although I don't consider it high priority even for the Python 3 port, but I know you want to get those failures down--though this would be a good use case for known-failures :)\n\nI fear you did some work here that was ultimately unnecessary.  In particular, I believe the `unpickle_newobj` utility doesn't even belong in explain_pickle in the first place; it should be moved elsewhere.\n\nSecond of all, I had still planned to keep the `sage.misc.explain_pickle` module as a wrapper--possibly with parts of it deprecated, but also possibly not; it depends on exactly how the third-party `explain_pickle` module ends up being structured.  For example, there's lots of use currently of Sage-specific stuff like `SageInputExpression` and `SageInputBuilder` that doesn't necessarily make sense to use (at least directly) in a more generic implementation.  But it will definitely have an API that will allow using them, but that might involve extensions that would still belong somewhere in sage, such as in the existing explain_pickle module.\n\nSo it's not just a simple matter of removing that module and declaring tests that happened to use it as optional, and there's not much point in doing work on this until I have that third-party module ready to work with.",
    "created_at": "2019-01-21T11:00:22Z",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27065#issuecomment-420184",
    "user": "https://github.com/embray"
}
```

<a id='comment:13'></a>
Please just let me take care of it.  I promise I will soon (although I don't consider it high priority even for the Python 3 port, but I know you want to get those failures down--though this would be a good use case for known-failures :)

I fear you did some work here that was ultimately unnecessary.  In particular, I believe the `unpickle_newobj` utility doesn't even belong in explain_pickle in the first place; it should be moved elsewhere.

Second of all, I had still planned to keep the `sage.misc.explain_pickle` module as a wrapper--possibly with parts of it deprecated, but also possibly not; it depends on exactly how the third-party `explain_pickle` module ends up being structured.  For example, there's lots of use currently of Sage-specific stuff like `SageInputExpression` and `SageInputBuilder` that doesn't necessarily make sense to use (at least directly) in a more generic implementation.  But it will definitely have an API that will allow using them, but that might involve extensions that would still belong somewhere in sage, such as in the existing explain_pickle module.

So it's not just a simple matter of removing that module and declaring tests that happened to use it as optional, and there's not much point in doing work on this until I have that third-party module ready to work with.



---

archive/issue_events_239026.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-01-21T11:00:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27065#event-239026"
}
```



---

archive/issue_events_239027.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-01-21T11:00:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27065#event-239027"
}
```



---

archive/issue_comments_420185.json:
```json
{
    "body": "<a id='comment:14'></a>\nIn fact, now that I've done a bit more research into how this works, I'm almost certain that `sage.misc.explain_pickle` won't go away at all.  However, most of its current contents will be gone, and replaced with a few Sage-specific wrappers and some tests for cases that are of particular interest for Sage (e.g. testing that `register_unpickle_override` is handled properly when explaining pickles that load globals).",
    "created_at": "2019-01-21T13:49:00Z",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27065#issuecomment-420185",
    "user": "https://github.com/embray"
}
```

<a id='comment:14'></a>
In fact, now that I've done a bit more research into how this works, I'm almost certain that `sage.misc.explain_pickle` won't go away at all.  However, most of its current contents will be gone, and replaced with a few Sage-specific wrappers and some tests for cases that are of particular interest for Sage (e.g. testing that `register_unpickle_override` is handled properly when explaining pickles that load globals).



---

archive/issue_comments_420186.json:
```json
{
    "body": "**Assignee:** @embray",
    "created_at": "2019-01-21T16:51:20Z",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27065#issuecomment-420186",
    "user": "https://github.com/embray"
}
```

**Assignee:** @embray



---

archive/issue_comments_420187.json:
```json
{
    "body": "<a id='comment:15'></a>\nI've spent some time better understanding exactly how explain_pickle works, and believe I have a strategy now for implementing the \"generic\" version, and possibly deprecating parts of the existing code.",
    "created_at": "2019-01-21T16:51:20Z",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27065#issuecomment-420187",
    "user": "https://github.com/embray"
}
```

<a id='comment:15'></a>
I've spent some time better understanding exactly how explain_pickle works, and believe I have a strategy now for implementing the "generic" version, and possibly deprecating parts of the existing code.



---

archive/issue_comments_420188.json:
```json
{
    "body": "<a id='comment:16'></a>\nMaking progress on this, though I still need to do a lot of testing, and the integration back into Sage isn't even started yet.",
    "created_at": "2019-01-25T13:56:17Z",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27065#issuecomment-420188",
    "user": "https://github.com/embray"
}
```

<a id='comment:16'></a>
Making progress on this, though I still need to do a lot of testing, and the integration back into Sage isn't even started yet.



---

archive/issue_comments_420189.json:
```json
{
    "body": "<a id='comment:17'></a>\nErik, any news on this front ? I am tempted to just put `# py2` everywhere in this file..",
    "created_at": "2019-02-18T19:04:32Z",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27065#issuecomment-420189",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:17'></a>
Erik, any news on this front ? I am tempted to just put `# py2` everywhere in this file..



---

archive/issue_comments_420190.json:
```json
{
    "body": "<a id='comment:18'></a>\nI have had other priorities come up since I last worked on this (see e.g. https://trac.sagemath.org/query?priority=blocker&status=needs_info&status=needs_review&status=needs_work&status=new&status=positive_review&milestone=sage-8.7&col=id&col=summary&col=priority&col=status&col=type&col=milestone&col=component&order=priority)\n\nIf I have updates I won't just sit silently on them.",
    "created_at": "2019-02-19T15:32:47Z",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27065#issuecomment-420190",
    "user": "https://github.com/embray"
}
```

<a id='comment:18'></a>
I have had other priorities come up since I last worked on this (see e.g. https://trac.sagemath.org/query?priority=blocker&status=needs_info&status=needs_review&status=needs_work&status=new&status=positive_review&milestone=sage-8.7&col=id&col=summary&col=priority&col=status&col=type&col=milestone&col=component&order=priority)

If I have updates I won't just sit silently on them.



---

archive/issue_events_239028.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-02-22T19:24:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27065#event-239028"
}
```



---

archive/issue_events_239029.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-02-22T19:24:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27065#event-239029"
}
```



---

archive/issue_comments_420191.json:
```json
{
    "body": "**Changing commit** from \"[cd63b0c05631198a35d8680cde0e18e639dd6692](https://github.com/sagemath/sagetrac-mirror/commit/cd63b0c05631198a35d8680cde0e18e639dd6692)\" to \"[aa3173c15e55cd6f372382888a956d34178f4497](https://github.com/sagemath/sagetrac-mirror/commit/aa3173c15e55cd6f372382888a956d34178f4497)\".",
    "created_at": "2019-02-22T19:24:18Z",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27065#issuecomment-420191",
    "user": "https://github.com/fchapoton"
}
```

**Changing commit** from "[cd63b0c05631198a35d8680cde0e18e639dd6692](https://github.com/sagemath/sagetrac-mirror/commit/cd63b0c05631198a35d8680cde0e18e639dd6692)" to "[aa3173c15e55cd6f372382888a956d34178f4497](https://github.com/sagemath/sagetrac-mirror/commit/aa3173c15e55cd6f372382888a956d34178f4497)".



---

archive/issue_comments_420192.json:
```json
{
    "body": "<a id='comment:19'></a>\nThanks, Erik. I understand very well the existence of \"other priorities\".\n\nI am proposing now a simple branch, where I just tag `#py2` the failing doctests. This will allow to put this aside, and it will no longer stand in the middle of the way to python3-full-tests-pass.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa3173c15e55cd6f372382888a956d34178f4497\">aa3173c</a></td><td><code>py3: decorate most doctests in explain_pickle with tag py2</code></td></tr></table>\n",
    "created_at": "2019-02-22T19:24:18Z",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27065#issuecomment-420192",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:19'></a>
Thanks, Erik. I understand very well the existence of "other priorities".

I am proposing now a simple branch, where I just tag `#py2` the failing doctests. This will allow to put this aside, and it will no longer stand in the middle of the way to python3-full-tests-pass.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa3173c15e55cd6f372382888a956d34178f4497">aa3173c</a></td><td><code>py3: decorate most doctests in explain_pickle with tag py2</code></td></tr></table>




---

archive/issue_comments_420193.json:
```json
{
    "body": "**Changing branch** from \"[public/ticket/27065](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/27065)\" to \"[u/chapoton/py2_tag_explain_pickle](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/py2_tag_explain_pickle)\".",
    "created_at": "2019-02-22T19:24:18Z",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27065#issuecomment-420193",
    "user": "https://github.com/fchapoton"
}
```

**Changing branch** from "[public/ticket/27065](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/27065)" to "[u/chapoton/py2_tag_explain_pickle](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/py2_tag_explain_pickle)".



---

archive/issue_comments_420194.json:
```json
{
    "body": "<a id='comment:20'></a>\ngreen bot, please review",
    "created_at": "2019-02-23T07:23:12Z",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27065#issuecomment-420194",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:20'></a>
green bot, please review



---

archive/issue_comments_420195.json:
```json
{
    "body": "**Author:** Fr\u00e9d\u00e9ric Chapoton",
    "created_at": "2019-02-23T20:41:54Z",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27065#issuecomment-420195",
    "user": "https://github.com/fchapoton"
}
```

**Author:** Frédéric Chapoton



---

archive/issue_events_239030.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-02-25T08:56:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27065#event-239030"
}
```



---

archive/issue_events_239031.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-02-25T08:56:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27065#event-239031"
}
```



---

archive/issue_comments_420196.json:
```json
{
    "body": "<a id='comment:22'></a>\nI agree, this is better than nothing.",
    "created_at": "2019-02-25T08:56:47Z",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27065#issuecomment-420196",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:22'></a>
I agree, this is better than nothing.



---

archive/issue_comments_420197.json:
```json
{
    "body": "**Reviewer:** Jeroen Demeyer",
    "created_at": "2019-02-25T08:56:47Z",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27065#issuecomment-420197",
    "user": "https://github.com/jdemeyer"
}
```

**Reviewer:** Jeroen Demeyer



---

archive/issue_events_239032.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-25T12:37:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27065#event-239032"
}
```



---

archive/issue_events_239033.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-25T12:37:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27065#event-239033"
}
```



---

archive/issue_comments_420198.json:
```json
{
    "body": "<a id='comment:23'></a>\nI don't really see the urgency of this.  It's really easy to ignore these failures as they're completely localized to this module, which can easily be skipped entirely.\n\nFeel free to set back to positive_review if you disagree, but please open a new ticket for the continued work and assign me or else I will probably forget to work on it at all (I want to though; last I worked on it it was about 80% complete--it was just surprisingly hard to get some things working on Python 3).",
    "created_at": "2019-02-25T12:37:20Z",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27065#issuecomment-420198",
    "user": "https://github.com/embray"
}
```

<a id='comment:23'></a>
I don't really see the urgency of this.  It's really easy to ignore these failures as they're completely localized to this module, which can easily be skipped entirely.

Feel free to set back to positive_review if you disagree, but please open a new ticket for the continued work and assign me or else I will probably forget to work on it at all (I want to though; last I worked on it it was about 80% complete--it was just surprisingly hard to get some things working on Python 3).



---

archive/issue_events_239034.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-02-25T12:47:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27065#event-239034"
}
```



---

archive/issue_events_239035.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-02-25T12:47:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27065#event-239035"
}
```



---

archive/issue_comments_420199.json:
```json
{
    "body": "<a id='comment:24'></a>\nI have created #27350 for the task you want to do.\n\nI am now setting back the present trivial ticket to positive.",
    "created_at": "2019-02-25T12:47:51Z",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27065#issuecomment-420199",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:24'></a>
I have created #27350 for the task you want to do.

I am now setting back the present trivial ticket to positive.



---

archive/issue_comments_420200.json:
```json
{
    "body": "**Remove assignee** @embray.",
    "created_at": "2019-02-25T12:57:33Z",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27065#issuecomment-420200",
    "user": "https://github.com/embray"
}
```

**Remove assignee** @embray.



---

archive/issue_comments_420201.json:
```json
{
    "body": "<a id='comment:26'></a>\nOkay, thank you.  This is fine with me if it will make you happy.  However, though it's not a big deal, in the future I would prefer that on tickets where the \"owner\" field is set to me where I am in the process of working on a solution, that the ticket not be essentially hijacked, and instead that a new ticket be created for your temporary workaround.",
    "created_at": "2019-02-25T13:01:16Z",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27065#issuecomment-420201",
    "user": "https://github.com/embray"
}
```

<a id='comment:26'></a>
Okay, thank you.  This is fine with me if it will make you happy.  However, though it's not a big deal, in the future I would prefer that on tickets where the "owner" field is set to me where I am in the process of working on a solution, that the ticket not be essentially hijacked, and instead that a new ticket be created for your temporary workaround.



---

archive/issue_comments_420202.json:
```json
{
    "body": "**Changing branch** from \"[u/chapoton/py2_tag_explain_pickle](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/py2_tag_explain_pickle)\" to \"[aa3173c15e55cd6f372382888a956d34178f4497](https://github.com/sagemath/sagetrac-mirror/commit/aa3173c15e55cd6f372382888a956d34178f4497)\".",
    "created_at": "2019-02-26T23:36:52Z",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27065#issuecomment-420202",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/chapoton/py2_tag_explain_pickle](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/py2_tag_explain_pickle)" to "[aa3173c15e55cd6f372382888a956d34178f4497](https://github.com/sagemath/sagetrac-mirror/commit/aa3173c15e55cd6f372382888a956d34178f4497)".



---

archive/issue_events_239036.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-02-26T23:36:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27065#event-239036"
}
```



---

archive/issue_events_239037.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "613a3698404e9c93bdd23776dc190146b8e83b91",
    "created_at": "2019-02-26T23:36:52Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27065#event-239037"
}
```



---

archive/issue_comments_420203.json:
```json
{
    "body": "**Changing commit** from \"[aa3173c15e55cd6f372382888a956d34178f4497](https://github.com/sagemath/sagetrac-mirror/commit/aa3173c15e55cd6f372382888a956d34178f4497)\" to \"\".",
    "created_at": "2019-03-06T13:34:38Z",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27065#issuecomment-420203",
    "user": "https://github.com/slel"
}
```

**Changing commit** from "[aa3173c15e55cd6f372382888a956d34178f4497](https://github.com/sagemath/sagetrac-mirror/commit/aa3173c15e55cd6f372382888a956d34178f4497)" to "".



---

archive/issue_comments_420204.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,6 +3,8 @@\n Proposal:\n \n * either (1) remove this file completely\n-\n * or (2) tag all doctests with `#py2`\n \n+This ticket implements option (2): tag all doctests with `#py2`.\n+\n+Further work on `explain_pickle` is tracked at #27350.\n``````\n",
    "created_at": "2019-03-06T13:34:38Z",
    "issue": "https://github.com/sagemath/sage/issues/27065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27065#issuecomment-420204",
    "user": "https://github.com/slel"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,6 +3,8 @@
 Proposal:
 
 * either (1) remove this file completely
-
 * or (2) tag all doctests with `#py2`
 
+This ticket implements option (2): tag all doctests with `#py2`.
+
+Further work on `explain_pickle` is tracked at #27350.
``````

