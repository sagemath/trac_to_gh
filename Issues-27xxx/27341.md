# Issue 27341: Use sphinx.util.inspect.Signature not sphinx.ext.autodoc.inspector.formatargspec

archive/issues_027341.json:
```json
{
    "body": "CC:  @kiwifb @jdemeyer @slel @strogdon @tobiasdiez\n\nKeywords: sphinx, formatargspec, Signature\n\nAfter upgrading to Sphinx 1.8.5 in #26451, Sphinx's function `formatargspec` is deprecated, so we should not use anymore it in `src/sage_setup/docbuild/ext/sage_autodoc.py`.\n\nThe deprecation warning advises to replace the use of `sphinx.ext.autodoc.inspector.formatargspec`\nby that of `sphinx.util.inspect.Signature`.\n\nFor ordinary Python functions, we may be able to change `formatargspec(my_func, *argspec)` to `Signature(my_func).format_args()`. I don't think this works with Cython functions, though.\n\nIssue created by migration from https://trac.sagemath.org/ticket/27578\n\n",
    "created_at": "2019-03-30T22:28:48Z",
    "labels": [
        "component: documentation",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Use sphinx.util.inspect.Signature not sphinx.ext.autodoc.inspector.formatargspec",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27341",
    "user": "https://github.com/jhpalmieri"
}
```
CC:  @kiwifb @jdemeyer @slel @strogdon @tobiasdiez

Keywords: sphinx, formatargspec, Signature

After upgrading to Sphinx 1.8.5 in #26451, Sphinx's function `formatargspec` is deprecated, so we should not use anymore it in `src/sage_setup/docbuild/ext/sage_autodoc.py`.

The deprecation warning advises to replace the use of `sphinx.ext.autodoc.inspector.formatargspec`
by that of `sphinx.util.inspect.Signature`.

For ordinary Python functions, we may be able to change `formatargspec(my_func, *argspec)` to `Signature(my_func).format_args()`. I don't think this works with Cython functions, though.

Issue created by migration from https://trac.sagemath.org/ticket/27578





---

archive/issue_comments_385080.json:
```json
{
    "body": "The `Signature` class is new in Python 3, though there exists a backport of it for Python 2 so we'd have to add the backport as a depency so long as we still support Python 2. Obviously adding the backport is no big deal. I've used it before and it works fine. It's not a bad idea, since the `Signature` interface is much nicer in general than `inspect.getargspec`.",
    "created_at": "2019-04-02T13:59:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27341#issuecomment-385080",
    "user": "https://github.com/embray"
}
```

The `Signature` class is new in Python 3, though there exists a backport of it for Python 2 so we'd have to add the backport as a depency so long as we still support Python 2. Obviously adding the backport is no big deal. I've used it before and it works fine. It's not a bad idea, since the `Signature` interface is much nicer in general than `inspect.getargspec`.



---

archive/issue_comments_385081.json:
```json
{
    "body": "Sphinx has its own `Signature` class (in `sphinx.util.inspect`), and that's what I was thinking about using.",
    "created_at": "2019-04-02T14:58:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27341#issuecomment-385081",
    "user": "https://github.com/jhpalmieri"
}
```

Sphinx has its own `Signature` class (in `sphinx.util.inspect`), and that's what I was thinking about using.



---

archive/issue_comments_385082.json:
```json
{
    "body": "Changing keywords from \"\" to \"sphinx, formatargspec, Signature\".",
    "created_at": "2019-06-12T14:55:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27341#issuecomment-385082",
    "user": "https://github.com/slel"
}
```

Changing keywords from "" to "sphinx, formatargspec, Signature".



---

archive/issue_comments_385083.json:
```json
{
    "body": "The proposed changes at #27971 get rid of the deprecation warnings. We can leave this open in case it is worthwhile to use Sphinx's `Signature` or Python 3's `Signature`. (And maybe we should use those in `sageinspect.py`, too?)",
    "created_at": "2019-06-12T21:57:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27341#issuecomment-385083",
    "user": "https://github.com/jhpalmieri"
}
```

The proposed changes at #27971 get rid of the deprecation warnings. We can leave this open in case it is worthwhile to use Sphinx's `Signature` or Python 3's `Signature`. (And maybe we should use those in `sageinspect.py`, too?)



---

archive/issue_events_068491.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-07-03T11:39:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27341",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27341#event-68491"
}
```



---

archive/issue_comments_385084.json:
```json
{
    "body": "Moving open critical and blocker issues to the next release milestone (optimistically).",
    "created_at": "2019-07-03T11:39:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27341#issuecomment-385084",
    "user": "https://github.com/embray"
}
```

Moving open critical and blocker issues to the next release milestone (optimistically).



---

archive/issue_events_068492.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27341",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27341#event-68492"
}
```



---

archive/issue_events_068493.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27341",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27341#event-68493"
}
```



---

archive/issue_comments_385085.json:
```json
{
    "body": "Ticket retargeted after milestone closed",
    "created_at": "2019-12-30T14:48:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27341#issuecomment-385085",
    "user": "https://github.com/embray"
}
```

Ticket retargeted after milestone closed



---

archive/issue_events_068494.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-07T02:29:39Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27341",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27341#event-68494"
}
```



---

archive/issue_events_068495.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-07T02:29:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27341",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27341#event-68495"
}
```



---

archive/issue_events_068496.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27341",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27341#event-68496"
}
```



---

archive/issue_events_068497.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27341",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27341#event-68497"
}
```



---

archive/issue_comments_385086.json:
```json
{
    "body": "See also: #31309 `sage_getargspec` mishandles keyword-only arguments",
    "created_at": "2021-02-15T06:52:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27341#issuecomment-385086",
    "user": "https://github.com/mkoeppe"
}
```

See also: #31309 `sage_getargspec` mishandles keyword-only arguments



---

archive/issue_events_068498.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-24T02:04:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27341",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27341#event-68498"
}
```



---

archive/issue_events_068499.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-24T02:04:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27341",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27341#event-68499"
}
```



---

archive/issue_comments_385087.json:
```json
{
    "body": "Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-24T02:04:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27341#issuecomment-385087",
    "user": "https://github.com/mkoeppe"
}
```

Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_068500.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T02:58:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27341",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27341#event-68500"
}
```



---

archive/issue_events_068501.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T02:58:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27341",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27341#event-68501"
}
```



---

archive/issue_events_068502.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27341",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27341#event-68502"
}
```



---

archive/issue_events_068503.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27341",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27341#event-68503"
}
```



---

archive/issue_comments_385088.json:
```json
{
    "body": "An alternative is proposed in #30884.",
    "created_at": "2022-04-02T11:41:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27341#issuecomment-385088",
    "user": "https://github.com/tobiasdiez"
}
```

An alternative is proposed in #30884.



---

archive/issue_events_068504.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:17:06Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27341",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27341#event-68504"
}
```



---

archive/issue_events_068505.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:17:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27341",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27341#event-68505"
}
```



---

archive/issue_events_068506.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-06T19:31:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27341",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27341#event-68506"
}
```



---

archive/issue_events_068507.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-06T19:31:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27341",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27341#event-68507"
}
```
