# Issue 27628: py3: fix doctest with igraph

archive/issues_027391.json:
```json
{
    "assignees": [],
    "body": "ordering issue.\n\nAlso change the way to check if igraph is installed to avoid a recurrent pyflakes error.\n\nCC:  @dimpase\n\nComponent: **graph theory**\n\nAuthor: **David Coudert**\n\nBranch: **[`1e773f5`](https://github.com/sagemath/sagetrac-mirror/commit/1e773f5bfbd2fbe0712c7fe0e1731eeb7d664dc5)**\n\nReviewer: **Fr\u00e9d\u00e9ric Chapoton, Dima Pasechnik**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/27628_\n\n",
    "closed_at": "2019-04-27T17:44:17Z",
    "created_at": "2019-04-09T12:03:26Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/c%3A%20python3",
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "py3: fix doctest with igraph",
    "type": "issue",
    "updated_at": "2019-05-11T22:04:58Z",
    "url": "https://github.com/sagemath/sage/issues/27628",
    "user": "https://github.com/dcoudert"
}
```
ordering issue.

Also change the way to check if igraph is installed to avoid a recurrent pyflakes error.

CC:  @dimpase

Component: **graph theory**

Author: **David Coudert**

Branch: **[`1e773f5`](https://github.com/sagemath/sagetrac-mirror/commit/1e773f5bfbd2fbe0712c7fe0e1731eeb7d664dc5)**

Reviewer: **Frédéric Chapoton, Dima Pasechnik**

_Issue created by migration from https://trac.sagemath.org/ticket/27628_





---

archive/issue_events_376208.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-04-09T12:03:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27628#event-376208"
}
```



---

archive/issue_events_376209.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-04-09T12:03:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27628#event-376209"
}
```



---

archive/issue_events_376210.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-04-09T12:03:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27628#event-376210"
}
```



---

archive/issue_events_376211.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-04-09T12:03:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27628#event-376211"
}
```



---

archive/issue_events_376212.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-04-09T12:03:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20python3",
    "label_color": "0000b0",
    "label_name": "c: python3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27628#event-376212"
}
```



---

archive/issue_events_376213.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-04-09T12:03:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27628#event-376213"
}
```



---

archive/issue_comments_427886.json:
```json
{
    "body": "Commit: **[`8ee4a7a`](https://github.com/sagemath/sagetrac-mirror/commit/8ee4a7aab47099b5586311d36ded3c45076eee6c)**",
    "created_at": "2019-04-09T12:05:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27628#issuecomment-427886",
    "user": "https://github.com/dcoudert"
}
```

Commit: **[`8ee4a7a`](https://github.com/sagemath/sagetrac-mirror/commit/8ee4a7aab47099b5586311d36ded3c45076eee6c)**



---

archive/issue_comments_427887.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ee4a7aab47099b5586311d36ded3c45076eee6c\"><code>8ee4a7a</code></a></td><td><code>trac #27628: doctest with igraph</code></td></tr></table>\n",
    "created_at": "2019-04-09T12:05:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27628#issuecomment-427887",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ee4a7aab47099b5586311d36ded3c45076eee6c"><code>8ee4a7a</code></a></td><td><code>trac #27628: doctest with igraph</code></td></tr></table>




---

archive/issue_events_376214.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-04-09T12:05:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27628#event-376214"
}
```



---

archive/issue_comments_427888.json:
```json
{
    "body": "Branch: **[public/graphs/27628_igraph_graph](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/27628_igraph_graph)**",
    "created_at": "2019-04-09T12:05:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27628#issuecomment-427888",
    "user": "https://github.com/dcoudert"
}
```

Branch: **[public/graphs/27628_igraph_graph](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/27628_igraph_graph)**



---

archive/issue_comments_427889.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nok, looks good enough",
    "created_at": "2019-04-09T12:37:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27628#issuecomment-427889",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:2" align="right">comment:2</div>

ok, looks good enough



---

archive/issue_events_376215.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-04-09T12:37:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27628#event-376215"
}
```



---

archive/issue_events_376216.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-04-09T12:37:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27628#event-376216"
}
```



---

archive/issue_comments_427890.json:
```json
{
    "body": "Reviewer: **Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2019-04-09T12:37:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27628#issuecomment-427890",
    "user": "https://github.com/fchapoton"
}
```

Reviewer: **Frédéric Chapoton**



---

archive/issue_comments_427891.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThank you Frederic for this super fast review ;)",
    "created_at": "2019-04-09T12:44:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27628#issuecomment-427891",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:3" align="right">comment:3</div>

Thank you Frederic for this super fast review ;)



---

archive/issue_comments_427892.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThere are a couple of failures of teh sort\n\n```\n**********************************************************************\nFile \"src/sage/graphs/generic_graph.py\", line 9581, in sage.graphs.generic_graph.GenericGraph.?\nFailed example:\n    G.pagerank(algorithm=\"igraph\")\nException raised:\n    Traceback (most recent call last):\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 671, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1095, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.graphs.generic_graph.GenericGraph.?[10]>\", line 1, in <module>\n        G.pagerank(algorithm=\"igraph\")\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/graphs/generic_graph.py\", line 9668, in pagerank\n        raise PackageNotFoundError(\"igraph\")\n    PackageNotFoundError: the package 'igraph' was not found. You can install it by running 'sage -i igraph' in a shell\n**********************************************************************\n```",
    "created_at": "2019-04-11T15:55:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27628#issuecomment-427892",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:4" align="right">comment:4</div>

There are a couple of failures of teh sort

```
**********************************************************************
File "src/sage/graphs/generic_graph.py", line 9581, in sage.graphs.generic_graph.GenericGraph.?
Failed example:
    G.pagerank(algorithm="igraph")
Exception raised:
    Traceback (most recent call last):
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 671, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1095, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.graphs.generic_graph.GenericGraph.?[10]>", line 1, in <module>
        G.pagerank(algorithm="igraph")
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/graphs/generic_graph.py", line 9668, in pagerank
        raise PackageNotFoundError("igraph")
    PackageNotFoundError: the package 'igraph' was not found. You can install it by running 'sage -i igraph' in a shell
**********************************************************************
```



---

archive/issue_events_376217.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-04-11T15:55:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27628#event-376217"
}
```



---

archive/issue_events_376218.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-04-11T15:55:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27628#event-376218"
}
```



---

archive/issue_comments_427893.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nIt's not due to this ticket (nothing to do with `pagerank`) but to #27480 which adds `pagerank`. We forgot to tag doctests as `# optional - python_igraph`, and I believe it's too late so we must wait for next beta, right ?",
    "created_at": "2019-04-12T11:30:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27628#issuecomment-427893",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:5" align="right">comment:5</div>

It's not due to this ticket (nothing to do with `pagerank`) but to #27480 which adds `pagerank`. We forgot to tag doctests as `# optional - python_igraph`, and I believe it's too late so we must wait for next beta, right ?



---

archive/issue_comments_427894.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nCan we set this ticket back to positive review ?",
    "created_at": "2019-04-14T16:41:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27628#issuecomment-427894",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:6" align="right">comment:6</div>

Can we set this ticket back to positive review ?



---

archive/issue_events_376219.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-04-14T16:41:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27628#event-376219"
}
```



---

archive/issue_events_376220.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-04-14T16:41:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27628#event-376220"
}
```



---

archive/issue_comments_427895.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e6051f5e2f719497cb3c91da01551ca9b1394285\"><code>e6051f5</code></a></td><td><code>trac #27628: Merged with 8.8.beta3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1e773f5bfbd2fbe0712c7fe0e1731eeb7d664dc5\"><code>1e773f5</code></a></td><td><code>trac #27628: fix pyflakes issue with igraph</code></td></tr></table>\n",
    "created_at": "2019-04-20T12:49:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27628#issuecomment-427895",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e6051f5e2f719497cb3c91da01551ca9b1394285"><code>e6051f5</code></a></td><td><code>trac #27628: Merged with 8.8.beta3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1e773f5bfbd2fbe0712c7fe0e1731eeb7d664dc5"><code>1e773f5</code></a></td><td><code>trac #27628: fix pyflakes issue with igraph</code></td></tr></table>




---

archive/issue_comments_427896.json:
```json
{
    "body": "Changed commit from **[`8ee4a7a`](https://github.com/sagemath/sagetrac-mirror/commit/8ee4a7aab47099b5586311d36ded3c45076eee6c)** to **[`1e773f5`](https://github.com/sagemath/sagetrac-mirror/commit/1e773f5bfbd2fbe0712c7fe0e1731eeb7d664dc5)**",
    "created_at": "2019-04-20T12:49:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27628#issuecomment-427896",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8ee4a7a`](https://github.com/sagemath/sagetrac-mirror/commit/8ee4a7aab47099b5586311d36ded3c45076eee6c)** to **[`1e773f5`](https://github.com/sagemath/sagetrac-mirror/commit/1e773f5bfbd2fbe0712c7fe0e1731eeb7d664dc5)**



---

archive/issue_comments_427897.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI changed the way we check if igraph is installed to avoid a pyflakes error.",
    "created_at": "2019-04-20T12:52:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27628#issuecomment-427897",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:8" align="right">comment:8</div>

I changed the way we check if igraph is installed to avoid a pyflakes error.



---

archive/issue_comments_427898.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n-ordering issue\n+ordering issue.\n+\n+Also change the way to check if igraph is installed to avoid a recurrent pyflakes error.\n``````\n",
    "created_at": "2019-04-23T16:41:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27628#issuecomment-427898",
    "user": "https://github.com/dcoudert"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
-ordering issue
+ordering issue.
+
+Also change the way to check if igraph is installed to avoid a recurrent pyflakes error.
``````




---

archive/issue_comments_427899.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nlooks good to me.",
    "created_at": "2019-04-23T17:46:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27628#issuecomment-427899",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:10" align="right">comment:10</div>

looks good to me.



---

archive/issue_events_376221.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-04-23T17:46:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27628#event-376221"
}
```



---

archive/issue_events_376222.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-04-23T17:46:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27628#event-376222"
}
```



---

archive/issue_comments_427900.json:
```json
{
    "body": "Changed reviewer from **Fr\u00e9d\u00e9ric Chapoton** to **Fr\u00e9d\u00e9ric Chapoton, Dima Pasechnik**",
    "created_at": "2019-04-23T17:46:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27628#issuecomment-427900",
    "user": "https://github.com/dimpase"
}
```

Changed reviewer from **Frédéric Chapoton** to **Frédéric Chapoton, Dima Pasechnik**



---

archive/issue_comments_427901.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nWell, let's do a follow up ticket since this is getting merged properly right now. Please refrain to introduce anymore call to `is_package_installed`, especially when checking for a python package. There is a proper python way to do this, like in the other sections of code using `igraph`- from `sage/graphs/digraph.py` line 693 onward\n\n```\n            try:\n                import igraph\n            except ImportError:\n                raise ImportError(...)\n```\nreplacing the `ImportError(...)` with `PackageNotFoundError` is acceptable.\n\n`is_package_installed` is a big problem for sage-on-distro and it is a filthy quick and dirty hack that shouldn't ever have been included.",
    "created_at": "2019-04-27T08:23:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27628#issuecomment-427901",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:11" align="right">comment:11</div>

Well, let's do a follow up ticket since this is getting merged properly right now. Please refrain to introduce anymore call to `is_package_installed`, especially when checking for a python package. There is a proper python way to do this, like in the other sections of code using `igraph`- from `sage/graphs/digraph.py` line 693 onward

```
            try:
                import igraph
            except ImportError:
                raise ImportError(...)
```
replacing the `ImportError(...)` with `PackageNotFoundError` is acceptable.

`is_package_installed` is a big problem for sage-on-distro and it is a filthy quick and dirty hack that shouldn't ever have been included.



---

archive/issue_comments_427902.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nhow about a ticket for getting rid of `is_package_installed()`? Or at least making sure it's not used on importable things? \n\nI wonder what pyflakes error one sees on a seemingly good try/except.",
    "created_at": "2019-04-27T08:29:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27628#issuecomment-427902",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:12" align="right">comment:12</div>

how about a ticket for getting rid of `is_package_installed()`? Or at least making sure it's not used on importable things? 

I wonder what pyflakes error one sees on a seemingly good try/except.



---

archive/issue_comments_427903.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nIt is already on its way out. The only place it is not replaced by feature or something else at runtime is in `sage/databases/cremona.py` and there is a ticket for that. \n\nIt is currently impossible to totally remove it. doctesting with `--option=all` relies on it (or other features of `packages.py` which is just as bad) :( and building with some optional package still depends on it look in `sage_setup/optional_extension.py `. In both case replacement are not easy.",
    "created_at": "2019-04-27T08:36:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27628#issuecomment-427903",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:13" align="right">comment:13</div>

It is already on its way out. The only place it is not replaced by feature or something else at runtime is in `sage/databases/cremona.py` and there is a ticket for that. 

It is currently impossible to totally remove it. doctesting with `--option=all` relies on it (or other features of `packages.py` which is just as bad) :( and building with some optional package still depends on it look in `sage_setup/optional_extension.py `. In both case replacement are not easy.



---

archive/issue_comments_427904.json:
```json
{
    "body": "Changed branch from **[public/graphs/27628_igraph_graph](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/27628_igraph_graph)** to **[`1e773f5`](https://github.com/sagemath/sagetrac-mirror/commit/1e773f5bfbd2fbe0712c7fe0e1731eeb7d664dc5)**",
    "created_at": "2019-04-27T17:44:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27628#issuecomment-427904",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/graphs/27628_igraph_graph](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/27628_igraph_graph)** to **[`1e773f5`](https://github.com/sagemath/sagetrac-mirror/commit/1e773f5bfbd2fbe0712c7fe0e1731eeb7d664dc5)**



---

archive/issue_events_376223.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-04-27T17:44:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27628#event-376223"
}
```



---

archive/issue_events_376224.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "a5a41f366783f8a522d69ab37959a5f0645dc245",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-04-27T17:44:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27628#event-376224"
}
```



---

archive/issue_comments_427905.json:
```json
{
    "body": "Changed commit from **[`1e773f5`](https://github.com/sagemath/sagetrac-mirror/commit/1e773f5bfbd2fbe0712c7fe0e1731eeb7d664dc5)** to none",
    "created_at": "2019-05-11T16:18:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27628#issuecomment-427905",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[`1e773f5`](https://github.com/sagemath/sagetrac-mirror/commit/1e773f5bfbd2fbe0712c7fe0e1731eeb7d664dc5)** to none



---

archive/issue_comments_427906.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nThere is an issue with igraph on the arando patchbot with 8.8.b4 and 8.8.b5:\n\n```\n**********************************************************************\nFile \"src/sage/graphs/generic_graph.py\", line 9663, in sage.graphs.generic_graph.GenericGraph.?\nFailed example:\n    G.pagerank(alpha=0.50, algorithm=\"igraph\")  # optional - python_igraph\nExpected:\n    {0: 0.25, 1: 0.25, 2: 0.24999999999999997, 3: 0.24999999999999997}\nGot:\n    {0: 0.25, 1: 0.25, 2: 0.25, 3: 0.25}\n**********************************************************************\n1 item had failures:\n   1 of 860 in sage.graphs.generic_graph.GenericGraph.?\n    [3497 tests, 1 failure, 50.96 s]\n----------------------------------------------------------------------\nsage -t --long src/sage/graphs/generic_graph.py  # 1 doctest failed\n```",
    "created_at": "2019-05-11T16:18:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27628#issuecomment-427906",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:15" align="right">comment:15</div>

There is an issue with igraph on the arando patchbot with 8.8.b4 and 8.8.b5:

```
**********************************************************************
File "src/sage/graphs/generic_graph.py", line 9663, in sage.graphs.generic_graph.GenericGraph.?
Failed example:
    G.pagerank(alpha=0.50, algorithm="igraph")  # optional - python_igraph
Expected:
    {0: 0.25, 1: 0.25, 2: 0.24999999999999997, 3: 0.24999999999999997}
Got:
    {0: 0.25, 1: 0.25, 2: 0.25, 3: 0.25}
**********************************************************************
1 item had failures:
   1 of 860 in sage.graphs.generic_graph.GenericGraph.?
    [3497 tests, 1 failure, 50.96 s]
----------------------------------------------------------------------
sage -t --long src/sage/graphs/generic_graph.py  # 1 doctest failed
```



---

archive/issue_comments_427907.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\none can use a tag like `# abs tol 1e-12` and make the data \n\n```\n    {0: 0.25, 1: 0.25, 2: 0.25, 3: 0.25}\n```",
    "created_at": "2019-05-11T21:45:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27628#issuecomment-427907",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:16" align="right">comment:16</div>

one can use a tag like `# abs tol 1e-12` and make the data 

```
    {0: 0.25, 1: 0.25, 2: 0.25, 3: 0.25}
```



---

archive/issue_comments_427908.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nit's what we do in #27811 ;)",
    "created_at": "2019-05-11T22:04:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27628",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27628#issuecomment-427908",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:17" align="right">comment:17</div>

it's what we do in #27811 ;)
