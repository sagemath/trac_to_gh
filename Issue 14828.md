# Issue 14828: clean up the doc of fast_callable

Issue created by migration from https://trac.sagemath.org/ticket/15065

Original creator: chapoton

Original creation time: 2013-08-19 16:39:29

Keywords: fast_callable, doc

the doc syntax is not good in fast_callable


---

Comment by chapoton created at 2013-08-19 16:40:44

Changing status from new to needs_review.


---

Comment by ncohen created at 2013-08-26 13:51:20

Hellooooooo Frederic ! What would you think of running the following line in Sage's folder ? It does what you did, for all files it finds `:-P`


```
find . -iname "*.py*" | while read l; do sed -i -e '{N;N; s/\([^:]\): *\(\n *\n *sage:\)/\1::\2/}' "$l"; done
```


Nathann


---

Comment by chapoton created at 2013-08-26 14:36:46

well, this is more or less #15096  (but what a patchbomb!)


---

Comment by ncohen created at 2013-08-26 14:44:02

Oh ? Actually the changes are totally independent, for my script supposes that there is an empty line after `EXAMPLES::`, and his supposes that there is none. And my script produces a much smaller amount of modifications `^^;`

Nathann


---

Attachment


---

Comment by chapoton created at 2013-08-26 14:59:20

ok, I see. Do you think it is a reasonable thing to do ? The problem is that it can trigger many (and I mean *many*) rebasing !


---

Comment by ncohen created at 2013-08-26 15:02:59

Well... I'd say that it's okay... It does touch a lot of places, but only one or two examples at a time. Actually, I wouldn't be surprised to learn that most of these files do not even appear in a .rst file, for they would have been spotted otherwise `^^;`

Nathann


---

Comment by chapoton created at 2013-08-26 15:07:24

ok, then looks good to me.

Should we keep the milestone to 6.0 or try to get it into 5.12 ?

for the (dead right now) patchbot:

apply only script.patchâ€‹


---

Comment by ncohen created at 2013-08-26 15:12:22

HMmmmm.... `O_o`

My patch actually doesn't contain yours.

Annnnnnnnnd it exposed a couple of things that would also need fixing, so I think it'd be best to apply this as a git patch on top of yours. Okayokay, I'll do that and tell you in 20~30 minutes.

Nathann


---

Comment by ncohen created at 2013-08-26 15:39:10

Hellooooooooo !!!

You can fetch branch u/ncohen/15065 to get my additional commit `:-)`

Nathann


---

Comment by ncohen created at 2013-08-26 15:39:55

There are MANY unindented Sage blocks at the beginning of fast_callable.pyx, though `O_o`

Don't really know what to make of them ...

Nathann


---

Comment by chapoton created at 2013-08-26 16:30:08

ok, I have got your branch, and will be working on top of that. 

I do not understand why you hesitate ; why could I not just simply shift them all by 4 ?


---

Comment by ncohen created at 2013-08-26 16:33:45

Hmmm... Well, right. Though nothing will really be tested I guess, as all outputs are flagged with "random". Do you know if this file is included in the reference manual, thoug ? `O_o`

Nathann


---

Comment by chapoton created at 2013-08-26 16:35:23

I dont know, probably not I guess

hmm, I have tried sage -docbuild reference html in my git version of sage, and it seems to protest a lot. DO you know if it should work ?


---

Comment by chapoton created at 2013-08-26 16:54:53

hmm, I have updated my branch, but it does not apply cleanly (appears red on top of the page)

Do you know what to do ? one has to merge somehow, I guess..


---

Comment by ncohen created at 2013-08-27 08:22:13

Helloooooooooooo !!

Well, I just applied your updated branch on my git version of Sage and there was nothing I could complain about. Building the doc, however, is veeeeeeery noisy as you said, but I am not very worried about that. I guess it's just the usual Sphinx screams, happening whenever some files are removed or added. Either way I don't think that your branch causes it. As per the red branch name, I'm not sure that it is our fault either. It's not like the git workflow has been used for a very long time, soo... I guess we should just review this ticket as if nothing happened, even though we may have to rebase it later on. 

Do you have conflicts when you apply your branch ? That would be weird, for I don't have any. Do you run "git pull" or "git fetch" ? I just fetch it, then do a checkout.

Nathann


---

Comment by chapoton created at 2013-08-27 08:28:59

Hello Nathann,

no, I do no see conflicts (I use fetch and checkout too)

So I agree, let us just go on


---

Comment by ncohen created at 2013-08-27 09:56:06

Changing status from needs_review to positive_review.


---

Comment by ncohen created at 2013-08-27 09:56:06

Well. Then I guess I can set this ticket to positive review `:-)`

Nathann


---

Comment by chapoton created at 2013-08-27 09:59:05

Yes, it should be good to go, thanks Nathann. Let's hope that it will not raise two much controversy.


---

Comment by vbraun created at 2013-12-19 19:59:10

Merge conflict, please fix.
----
New commits:


---

Comment by chapoton created at 2013-12-20 09:50:14

I am not sure I am able to do that (got lost in whether to merge or not, which way to merge, and so on). And I have nobody nearby to explain that to me.

Is it correct to
* checkout to the branch u/chapoton/trac15065 
* git merge develop
* solve the conflicts and commit
* push the result here to replace u/chapoton/trac15065 

I have done that, but I prefer to ask before I push.


---

Comment by vbraun created at 2013-12-20 10:37:34

Yes, that sounds right. How about you push it and I'll double-check for your peace of mind :-)


---

Comment by vbraun created at 2013-12-21 12:34:46

New commits:


---

Comment by vbraun created at 2013-12-21 18:43:59

Resolution: fixed
