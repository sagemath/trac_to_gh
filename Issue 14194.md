# Issue 14194: Remove graphviz from experimental.

archive/issues_014194.json:
```json
{
    "body": "Assignee: jason, ncohen, rlm\n\nThe graphviz spkg has been broken forever, and people get confused trying to install it rather than installing graphviz in their system. Let's remove it from experimental.\n\nIssue created by migration from https://trac.sagemath.org/ticket/14398\n\n",
    "created_at": "2013-04-02T13:12:24Z",
    "labels": [
        "graph theory",
        "major",
        "bug"
    ],
    "title": "Remove graphviz from experimental.",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14194",
    "user": "nthiery"
}
```
Assignee: jason, ncohen, rlm

The graphviz spkg has been broken forever, and people get confused trying to install it rather than installing graphviz in their system. Let's remove it from experimental.

Issue created by migration from https://trac.sagemath.org/ticket/14398





---

archive/issue_comments_178371.json:
```json
{
    "body": "Changing assignee from jason, ncohen, rlm to tbd.",
    "created_at": "2013-04-02T13:29:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14194#issuecomment-178371",
    "user": "jdemeyer"
}
```

Changing assignee from jason, ncohen, rlm to tbd.



---

archive/issue_comments_178372.json:
```json
{
    "body": "Is it really that confusing to have a broken **experimental** package? On [http://www.sagemath.org/packages/experimental](http://www.sagemath.org/packages/experimental), it clearly says\n> These are EXPERIMENTAL! They probably won't work at all for you! Use at your own risk! Many of these have **never** been successfully built on any platform! (But still, if you can figure out how to build them, I'd like to know about it.)",
    "created_at": "2013-04-02T13:29:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14194#issuecomment-178372",
    "user": "jdemeyer"
}
```

Is it really that confusing to have a broken **experimental** package? On [http://www.sagemath.org/packages/experimental](http://www.sagemath.org/packages/experimental), it clearly says
> These are EXPERIMENTAL! They probably won't work at all for you! Use at your own risk! Many of these have **never** been successfully built on any platform! (But still, if you can figure out how to build them, I'd like to know about it.)



---

archive/issue_comments_178373.json:
```json
{
    "body": "Changing component from graph theory to packages: experimental.",
    "created_at": "2013-04-02T13:29:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14194#issuecomment-178373",
    "user": "jdemeyer"
}
```

Changing component from graph theory to packages: experimental.



---

archive/issue_comments_178374.json:
```json
{
    "body": "> Is it really that confusing to have a broken **experimental** package? On [http://www.sagemath.org/packages/experimental](http://www.sagemath.org/packages/experimental), it clearly says\n> > These are EXPERIMENTAL! They probably won't work at all for you! Use at your own risk! Many of these have **never** been successfully built on any platform! (But still, if you can figure out how to build them, I'd like to know about it.)\nExactly.\n\nThe problem is apparently simple lack of dependencies (pango and libperl-dev, perhaps).  See #11433 and #4864.  I suppose this is a duplicate of #7438, in some sense.",
    "created_at": "2013-04-02T13:35:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14194#issuecomment-178374",
    "user": "kcrisman"
}
```

> Is it really that confusing to have a broken **experimental** package? On [http://www.sagemath.org/packages/experimental](http://www.sagemath.org/packages/experimental), it clearly says
> > These are EXPERIMENTAL! They probably won't work at all for you! Use at your own risk! Many of these have **never** been successfully built on any platform! (But still, if you can figure out how to build them, I'd like to know about it.)
Exactly.

The problem is apparently simple lack of dependencies (pango and libperl-dev, perhaps).  See #11433 and #4864.  I suppose this is a duplicate of #7438, in some sense.



---

archive/issue_comments_178375.json:
```json
{
    "body": "well, this one just does not work. It looks like the problem is 4 years old, so there's nothing to hope for either #4864. And the fact that it's almost impossible to find in Sage's doc how this software should be installed makes \"sage -i graphviz\" the first guess, which ends with an error.\n\nNathann",
    "created_at": "2013-04-02T13:36:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14194#issuecomment-178375",
    "user": "ncohen"
}
```

well, this one just does not work. It looks like the problem is 4 years old, so there's nothing to hope for either #4864. And the fact that it's almost impossible to find in Sage's doc how this software should be installed makes "sage -i graphviz" the first guess, which ends with an error.

Nathann



---

archive/issue_comments_178376.json:
```json
{
    "body": "(and I think that all these trac tickets above clearly give proof that many of us have already lost a lot of time because of this broken spkg)\n\nNathann",
    "created_at": "2013-04-02T13:39:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14194#issuecomment-178376",
    "user": "ncohen"
}
```

(and I think that all these trac tickets above clearly give proof that many of us have already lost a lot of time because of this broken spkg)

Nathann



---

archive/issue_comments_178377.json:
```json
{
    "body": "Yeah, and the problems seem different from before.\n\n```\ncreating libgvplugin_gd_C.la\n(cd .libs && rm -f libgvplugin_gd_C.la && ln -s ../libgvplugin_gd_C.la libgvplugin_gd_C.la)\n/bin/bash ../../libtool --tag=CC   --mode=link gcc  -g -O2 -Wno-unknown-pragmas -Wstrict-prototypes -Wpointer-arith -Wall -ffast-math -version-info 5:0:0 -L/home/kcrisman/sage-5.8-sage.math.washington.edu-x86_64-Linux/local/lib -L/home/kcrisman/sage-5.8-sage.math.washington.edu-x86_64-Linux/local/lib -o libgvplugin_gd.la -rpath /home/kcrisman/sage-5.8-sage.math.washington.edu-x86_64-Linux/local/lib/graphviz gvplugin_gd.lo gvrender_gd.lo gvrender_gd_vrml.lo gvtextlayout_gd.lo gvloadimage_gd.lo gvdevice_gd.lo ../../lib/gvc/libgvc.la -L/home/kcrisman/sage-5.8-sage.math.washington.edu-x86_64-Linux/local/include -lgd -lfontconfig -lfreetype -lpng12 -lz -lm -lm \nlibtool: link: warning: `/usr/lib64/libexpat.la' seems to be moved\nlibtool: link: warning: library `/home/kcrisman/sage-5.8-sage.math.washington.edu-x86_64-Linux/local/lib/libgd.la' was moved.\ngrep: /release/merger/sage-5.8/local/lib/libfreetype.la: No such file or directory\n/bin/sed: can't read /release/merger/sage-5.8/local/lib/libfreetype.la: No such file or directory\nlibtool: link: `/release/merger/sage-5.8/local/lib/libfreetype.la' is not a valid libtool archive\nmake[3]: *** [libgvplugin_gd.la] Error 1\nmake[3]: Leaving directory `/home/kcrisman/sage-5.8-sage.math.washington.edu-x86_64-Linux/spkg/build/graphviz-2.16.1.p0/src/plugin/gd'\nmake[2]: *** [all-recursive] Error 1\nmake[2]: Leaving directory `/home/kcrisman/sage-5.8-sage.math.washington.edu-x86_64-Linux/spkg/build/graphviz-2.16.1.p0/src/plugin'\nmake[1]: *** [all-recursive] Error 1\nmake[1]: Leaving directory `/home/kcrisman/sage-5.8-sage.math.washington.edu-x86_64-Linux/spkg/build/graphviz-2.16.1.p0/src'\nmake: *** [all] Error 2\nError building Graphviz\n\nreal\t3m39.740s\nuser\t1m29.320s\nsys\t1m41.210s\n************************************************************************\nError installing package graphviz-2.16.1.p0\n************************************************************************\n```\n\nAnyway, I propose this continues at #7438.  There is zero guarantee that anything from experimental works.",
    "created_at": "2013-04-02T13:44:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14194#issuecomment-178377",
    "user": "kcrisman"
}
```

Yeah, and the problems seem different from before.

```
creating libgvplugin_gd_C.la
(cd .libs && rm -f libgvplugin_gd_C.la && ln -s ../libgvplugin_gd_C.la libgvplugin_gd_C.la)
/bin/bash ../../libtool --tag=CC   --mode=link gcc  -g -O2 -Wno-unknown-pragmas -Wstrict-prototypes -Wpointer-arith -Wall -ffast-math -version-info 5:0:0 -L/home/kcrisman/sage-5.8-sage.math.washington.edu-x86_64-Linux/local/lib -L/home/kcrisman/sage-5.8-sage.math.washington.edu-x86_64-Linux/local/lib -o libgvplugin_gd.la -rpath /home/kcrisman/sage-5.8-sage.math.washington.edu-x86_64-Linux/local/lib/graphviz gvplugin_gd.lo gvrender_gd.lo gvrender_gd_vrml.lo gvtextlayout_gd.lo gvloadimage_gd.lo gvdevice_gd.lo ../../lib/gvc/libgvc.la -L/home/kcrisman/sage-5.8-sage.math.washington.edu-x86_64-Linux/local/include -lgd -lfontconfig -lfreetype -lpng12 -lz -lm -lm 
libtool: link: warning: `/usr/lib64/libexpat.la' seems to be moved
libtool: link: warning: library `/home/kcrisman/sage-5.8-sage.math.washington.edu-x86_64-Linux/local/lib/libgd.la' was moved.
grep: /release/merger/sage-5.8/local/lib/libfreetype.la: No such file or directory
/bin/sed: can't read /release/merger/sage-5.8/local/lib/libfreetype.la: No such file or directory
libtool: link: `/release/merger/sage-5.8/local/lib/libfreetype.la' is not a valid libtool archive
make[3]: *** [libgvplugin_gd.la] Error 1
make[3]: Leaving directory `/home/kcrisman/sage-5.8-sage.math.washington.edu-x86_64-Linux/spkg/build/graphviz-2.16.1.p0/src/plugin/gd'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/home/kcrisman/sage-5.8-sage.math.washington.edu-x86_64-Linux/spkg/build/graphviz-2.16.1.p0/src/plugin'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/home/kcrisman/sage-5.8-sage.math.washington.edu-x86_64-Linux/spkg/build/graphviz-2.16.1.p0/src'
make: *** [all] Error 2
Error building Graphviz

real	3m39.740s
user	1m29.320s
sys	1m41.210s
************************************************************************
Error installing package graphviz-2.16.1.p0
************************************************************************
```

Anyway, I propose this continues at #7438.  There is zero guarantee that anything from experimental works.



---

archive/issue_comments_178378.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-04-02T13:44:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14194#issuecomment-178378",
    "user": "kcrisman"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_178379.json:
```json
{
    "body": "Why should we keep this if nobody can install it ? The problem could even be solved if there was on some page of the manual some instructions saying that we do not know how to fix this bug (it's not our fault after all) but that one library should be installed manually ?\n\nBut then again the bug you get is even different from mine `-_-`\n\nHonestly, why do we care ? It's not \"experimental\", it's just plain broken.\n\nNathann",
    "created_at": "2013-04-02T13:47:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14194#issuecomment-178379",
    "user": "ncohen"
}
```

Why should we keep this if nobody can install it ? The problem could even be solved if there was on some page of the manual some instructions saying that we do not know how to fix this bug (it's not our fault after all) but that one library should be installed manually ?

But then again the bug you get is even different from mine `-_-`

Honestly, why do we care ? It's not "experimental", it's just plain broken.

Nathann



---

archive/issue_comments_178380.json:
```json
{
    "body": "> Why should we keep this if nobody can install it ? The problem could even be solved if there was on some page of the manual some instructions saying that we do not know how to fix this bug (it's not our fault after all) but that one library should be installed manually ?\nWe don't have anything about experimental packages elsewhere, do we? \n> Honestly, why do we care ? It's not \"experimental\", it's just plain broken.\nSee #7438; it builds fine on boxen.math.  Let's continue the discussion about graphviz there.  \n\nIf you want to open a sage-devel discussion about how non-broken experimental packages should be, that's fine.  In my view - and as you know, I am pretty conservative on such things - experimental can be as broken as they want to be.  *Someone* probably does have the expertise to fix each of them, and removing them completely means no one will even have the chance.",
    "created_at": "2013-04-02T14:13:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14194#issuecomment-178380",
    "user": "kcrisman"
}
```

> Why should we keep this if nobody can install it ? The problem could even be solved if there was on some page of the manual some instructions saying that we do not know how to fix this bug (it's not our fault after all) but that one library should be installed manually ?
We don't have anything about experimental packages elsewhere, do we? 
> Honestly, why do we care ? It's not "experimental", it's just plain broken.
See #7438; it builds fine on boxen.math.  Let's continue the discussion about graphviz there.  

If you want to open a sage-devel discussion about how non-broken experimental packages should be, that's fine.  In my view - and as you know, I am pretty conservative on such things - experimental can be as broken as they want to be.  *Someone* probably does have the expertise to fix each of them, and removing them completely means no one will even have the chance.



---

archive/issue_comments_178381.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-04-02T14:13:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14194#issuecomment-178381",
    "user": "kcrisman"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_178382.json:
```json
{
    "body": "Replying to [comment:8 kcrisman]:\n> experimental can be as broken as they want to be.  *Someone* probably does have the expertise to fix each of them, and removing them completely means no one will even have the chance.\nI agree with this. There is a reason we differentiate between *optional* and *experimental*.\n\nHowever, there is one thing that could be improved: when the user does\n\n```\n./sage -i graphviz\n```\n\nthere is no obvious clue that an experimental package is being installed.\n\nSo, we could make it so that downloading an experimental package this way would first print a warning along the lines of\n\n```\nWARNING: you are about to download and install an experimental package. This\nprobably won't work at all for you! Use at your own risk!\nAre you sure you want to continue [Y/n]?\n```\n",
    "created_at": "2013-04-02T15:14:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14194#issuecomment-178382",
    "user": "jdemeyer"
}
```

Replying to [comment:8 kcrisman]:
> experimental can be as broken as they want to be.  *Someone* probably does have the expertise to fix each of them, and removing them completely means no one will even have the chance.
I agree with this. There is a reason we differentiate between *optional* and *experimental*.

However, there is one thing that could be improved: when the user does

```
./sage -i graphviz
```

there is no obvious clue that an experimental package is being installed.

So, we could make it so that downloading an experimental package this way would first print a warning along the lines of

```
WARNING: you are about to download and install an experimental package. This
probably won't work at all for you! Use at your own risk!
Are you sure you want to continue [Y/n]?
```




---

archive/issue_comments_178383.json:
```json
{
    "body": "+1 ! \n\nBut I still think that \"experimental\" should mean \"we don't know if the code runs everywhere, we just want to give it a 'real-life' try before making it optional or standard\". Not \"it does not work, everybody forgot about it, and 'experimental' is our spkg garbage folder\".\n\nNathann",
    "created_at": "2013-04-02T15:20:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14194#issuecomment-178383",
    "user": "ncohen"
}
```

+1 ! 

But I still think that "experimental" should mean "we don't know if the code runs everywhere, we just want to give it a 'real-life' try before making it optional or standard". Not "it does not work, everybody forgot about it, and 'experimental' is our spkg garbage folder".

Nathann



---

archive/issue_comments_178384.json:
```json
{
    "body": "Replying to [comment:10 ncohen]:\n> we don't know if the code runs everywhere, we just want to give it a 'real-life' try\nI think that's more or less what I understand as the definition of \"optional\" packages.\n\nI don't think we need another category of packages (standard, optional, experimental, garbage, archive).",
    "created_at": "2013-04-02T15:25:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14194#issuecomment-178384",
    "user": "jdemeyer"
}
```

Replying to [comment:10 ncohen]:
> we don't know if the code runs everywhere, we just want to give it a 'real-life' try
I think that's more or less what I understand as the definition of "optional" packages.

I don't think we need another category of packages (standard, optional, experimental, garbage, archive).



---

archive/issue_comments_178385.json:
```json
{
    "body": "Changing type from defect to enhancement.",
    "created_at": "2013-04-02T15:27:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14194#issuecomment-178385",
    "user": "jdemeyer"
}
```

Changing type from defect to enhancement.



---

archive/issue_comments_178386.json:
```json
{
    "body": "Changing component from packages: experimental to build.",
    "created_at": "2013-04-02T15:27:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14194#issuecomment-178386",
    "user": "jdemeyer"
}
```

Changing component from packages: experimental to build.



---

archive/issue_comments_178387.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2013-04-02T15:27:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14194#issuecomment-178387",
    "user": "jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_178388.json:
```json
{
    "body": "> > we don't know if the code runs everywhere, we just want to give it a 'real-life' try\n> I think that's more or less what I understand as the definition of \"optional\" packages.\n\nMany optional packages are optional because they are not gpl-compatible, or because they are too heavy to be standard. I don't get why a spkg would be optional otherwise... Either way, there is \"experiment\" in \"experimental\". That's actually the largest part of it. I stand by the rather bold claim that experimental packages should consist in... an experiment. And I don't see what could make this graphviz spkg an experiment.\n\nNathann",
    "created_at": "2013-04-02T15:33:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14194#issuecomment-178388",
    "user": "ncohen"
}
```

> > we don't know if the code runs everywhere, we just want to give it a 'real-life' try
> I think that's more or less what I understand as the definition of "optional" packages.

Many optional packages are optional because they are not gpl-compatible, or because they are too heavy to be standard. I don't get why a spkg would be optional otherwise... Either way, there is "experiment" in "experimental". That's actually the largest part of it. I stand by the rather bold claim that experimental packages should consist in... an experiment. And I don't see what could make this graphviz spkg an experiment.

Nathann



---

archive/issue_comments_178389.json:
```json
{
    "body": "Attachment",
    "created_at": "2013-04-02T15:43:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14194#issuecomment-178389",
    "user": "jdemeyer"
}
```

Attachment



---

archive/issue_comments_178390.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-04-02T15:43:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14194#issuecomment-178390",
    "user": "jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_178391.json:
```json
{
    "body": "Well. It will install the spkg even if the user answers \"I don't want to install this SPKG\" instead of \"n\", but that's not soooooooooooo bad `:-P`\n\n\n```\nAre you sure you want to continue [Y/n]? I don't want to install this SPKG !!\n>>> Downloading graphviz-2.16.1.p0.spkg.\n[...\n```\n\n\nThanks for this patch ! `:-)`\n\nNathann",
    "created_at": "2013-04-02T15:52:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14194#issuecomment-178391",
    "user": "ncohen"
}
```

Well. It will install the spkg even if the user answers "I don't want to install this SPKG" instead of "n", but that's not soooooooooooo bad `:-P`


```
Are you sure you want to continue [Y/n]? I don't want to install this SPKG !!
>>> Downloading graphviz-2.16.1.p0.spkg.
[...
```


Thanks for this patch ! `:-)`

Nathann



---

archive/issue_comments_178392.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-04-02T15:52:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14194#issuecomment-178392",
    "user": "ncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_178393.json:
```json
{
    "body": "> Well. It will install the spkg even if the user answers \"I don't want to install this SPKG\" instead of \"n\", but that's not soooooooooooo bad `:-P`\nLOL\n> Thanks for this patch ! `:-)`\nIndeed, this is a great solution, thanks for intervening here, Jeroen.  (It does say something about trying experimental when you download such things, but of course Nathann's point is well-taken about people perhaps not knowing just how experimental that is.)",
    "created_at": "2013-04-02T16:45:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14194#issuecomment-178393",
    "user": "kcrisman"
}
```

> Well. It will install the spkg even if the user answers "I don't want to install this SPKG" instead of "n", but that's not soooooooooooo bad `:-P`
LOL
> Thanks for this patch ! `:-)`
Indeed, this is a great solution, thanks for intervening here, Jeroen.  (It does say something about trying experimental when you download such things, but of course Nathann's point is well-taken about people perhaps not knowing just how experimental that is.)



---

archive/issue_comments_178394.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-04-04T17:40:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14194#issuecomment-178394",
    "user": "jdemeyer"
}
```

Resolution: fixed
