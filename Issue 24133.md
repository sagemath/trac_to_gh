# Issue 24133: rs_alg_and_aut

archive/issues_024133.json:
```json
{
    "body": "\n\nIssue created by migration from https://trac.sagemath.org/ticket/24370\n\n",
    "created_at": "2017-12-12T14:03:37Z",
    "labels": [],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "rs_alg_and_aut",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24133",
    "user": "https://github.com/JRSijsling"
}
```


Issue created by migration from https://trac.sagemath.org/ticket/24370





---

archive/issue_comments_337801.json:
```json
{
    "body": "Changing keywords from \"\" to \"endomorphisms, automorphisms\".",
    "created_at": "2017-12-12T14:42:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337801",
    "user": "https://github.com/JRSijsling"
}
```

Changing keywords from "" to "endomorphisms, automorphisms".



---

archive/issue_comments_337802.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to algebraic geometry.",
    "created_at": "2017-12-12T14:42:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337802",
    "user": "https://github.com/JRSijsling"
}
```

Changing component from PLEASE CHANGE to algebraic geometry.



---

archive/issue_comments_337803.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2017-12-12T14:42:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337803",
    "user": "https://github.com/JRSijsling"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_337804.json:
```json
{
    "body": "Changing priority from major to minor.",
    "created_at": "2017-12-12T14:42:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337804",
    "user": "https://github.com/JRSijsling"
}
```

Changing priority from major to minor.



---

archive/issue_comments_337805.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-12-12T14:42:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337805",
    "user": "https://github.com/JRSijsling"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_337806.json:
```json
{
    "body": "Sorry for the lack of content so far, I messed up the branch and lost code. It is on the way...",
    "created_at": "2017-12-13T08:13:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337806",
    "user": "https://github.com/JRSijsling"
}
```

Sorry for the lack of content so far, I messed up the branch and lost code. It is on the way...



---

archive/issue_comments_337807.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-12-13T10:23:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337807",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_337808.json:
```json
{
    "body": "Nice!\n\nFor each function, the documentation string should follow the rules listed at\n    http://doc.sagemath.org/html/en/developer/coding_basics.html#the-docstring-of-a-function-content\n\nThat is: a short one-line sentence description followed by an optional longer paragraph.",
    "created_at": "2017-12-13T18:07:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337808",
    "user": "https://github.com/videlec"
}
```

Nice!

For each function, the documentation string should follow the rules listed at
    http://doc.sagemath.org/html/en/developer/coding_basics.html#the-docstring-of-a-function-content

That is: a short one-line sentence description followed by an optional longer paragraph.



---

archive/issue_comments_337809.json:
```json
{
    "body": "To find an invertible submatrix it is much better to perform an LU decomposition. This is implemented in scipy for standard floating point precision (https://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.linalg.lu.html) and much more numerically stable than what you did.",
    "created_at": "2017-12-13T18:10:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337809",
    "user": "https://github.com/videlec"
}
```

To find an invertible submatrix it is much better to perform an LU decomposition. This is implemented in scipy for standard floating point precision (https://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.linalg.lu.html) and much more numerically stable than what you did.



---

archive/issue_comments_337810.json:
```json
{
    "body": "What is the point of taking power of `10` for everything? It is much more natural to consider precision in bits...",
    "created_at": "2017-12-13T18:12:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337810",
    "user": "https://github.com/videlec"
}
```

What is the point of taking power of `10` for everything? It is much more natural to consider precision in bits...



---

archive/issue_comments_337811.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-12-13T18:14:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337811",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_337812.json:
```json
{
    "body": "Replying to [comment:9 vdelecroix]:\n> To find an invertible submatrix it is much better to perform an LU decomposition. This is implemented in scipy for standard floating point precision (https://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.linalg.lu.html) and much more numerically stable than what you did.\n\n\nmpmath has a multiprecision version if necessary but hopefully we can just get away with the single precision version here.\n\nhttp://mpmath.org/doc/current/matrices.html#matrix-factorization",
    "created_at": "2017-12-13T18:36:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337812",
    "user": "https://github.com/nbruin"
}
```

Replying to [comment:9 vdelecroix]:
> To find an invertible submatrix it is much better to perform an LU decomposition. This is implemented in scipy for standard floating point precision (https://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.linalg.lu.html) and much more numerically stable than what you did.


mpmath has a multiprecision version if necessary but hopefully we can just get away with the single precision version here.

http://mpmath.org/doc/current/matrices.html#matrix-factorization



---

archive/issue_comments_337813.json:
```json
{
    "body": "Some small updates. Your old branch should still be there if you prefer. I haven't amended the code to use LU decomp yet, but the code as it was didn't work as intended anyway.\n\n---\nNew commits:",
    "created_at": "2017-12-14T04:06:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337813",
    "user": "https://github.com/nbruin"
}
```

Some small updates. Your old branch should still be there if you prefer. I haven't amended the code to use LU decomp yet, but the code as it was didn't work as intended anyway.

---
New commits:



---

archive/issue_comments_337814.json:
```json
{
    "body": "Another note: can we choose default values for the various epsilons based on the precision provided? It's probably good to have some margin but it probably doesn't need to be more than 5-10 bits.",
    "created_at": "2017-12-14T18:04:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337814",
    "user": "https://github.com/nbruin"
}
```

Another note: can we choose default values for the various epsilons based on the precision provided? It's probably good to have some margin but it probably doesn't need to be more than 5-10 bits.



---

archive/issue_comments_337815.json:
```json
{
    "body": "Thanks for all your comments!\n\nI pulled Nils' modifications (please check) and added functionality for homomorphisms and isomorphisms as well. I will soon add some files that test this in Attachments.\n\nI modified the descriptions to start with a single one-line summary. I have also used precision where relevant, and in bits, not in decimal digits.\n\nThere is just one problem remaining, which is the extraction of an invertible submatrix. I have used scipy.linalg.lu, but it gives an extremely uninformative error message. Moreover, that function seems to work for some matrices and fail for others, which does not help to isolate the source of the error. To see what I am talking about, try using invertible_submatrix_lu. I truly have no idea what to do to get this to work, but perhaps someone else sees a simple fix.",
    "created_at": "2017-12-20T10:56:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337815",
    "user": "https://github.com/JRSijsling"
}
```

Thanks for all your comments!

I pulled Nils' modifications (please check) and added functionality for homomorphisms and isomorphisms as well. I will soon add some files that test this in Attachments.

I modified the descriptions to start with a single one-line summary. I have also used precision where relevant, and in bits, not in decimal digits.

There is just one problem remaining, which is the extraction of an invertible submatrix. I have used scipy.linalg.lu, but it gives an extremely uninformative error message. Moreover, that function seems to work for some matrices and fail for others, which does not help to isolate the source of the error. To see what I am talking about, try using invertible_submatrix_lu. I truly have no idea what to do to get this to work, but perhaps someone else sees a simple fix.



---

archive/issue_comments_337816.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-12-20T11:01:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337816",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_337817.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-12-20T18:30:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337817",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_337818.json:
```json
{
    "body": "Attachment [test-lu.sage](tarball://root/attachments/some-uuid/ticket24370/test-lu.sage) by @JRSijsling created at 2017-12-20 18:31:19",
    "created_at": "2017-12-20T18:31:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337818",
    "user": "https://github.com/JRSijsling"
}
```

Attachment [test-lu.sage](tarball://root/attachments/some-uuid/ticket24370/test-lu.sage) by @JRSijsling created at 2017-12-20 18:31:19



---

archive/issue_comments_337819.json:
```json
{
    "body": "Attachments now contains examples of failing LU decompositions.",
    "created_at": "2017-12-20T18:31:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337819",
    "user": "https://github.com/JRSijsling"
}
```

Attachments now contains examples of failing LU decompositions.



---

archive/issue_comments_337820.json:
```json
{
    "body": "scipy failure: You're hitting fortran code here. It's hard to imagine it would be capable of working with sage multiprecision floats. If you convert to python standard complex floats it's probably OK:\n\n```\ndef invertible_submatrix_lu(M):\n    Mt = M.transpose()\n    rowsMt = Mt.rows()\n    colsMt = Mt.columns()\n    ccMt=scipy.matrix([[p.__complex__() for p in r] for r in Mt ])\n    P, L, U = lu(ccMt)\n    rowsP = matrix(P).rows()\n    col_nums = [ ]\n    for i in range(len(rowsP)):\n        if any([ (rowsP[i][j].abs() > 0.1) for j in range(len(colsMt)) ]):\n            col_nums.append(i)\n    subM = Matrix([ rowsMt[i] for i in col_nums ]).transpose()\n    return subM, col_nums\n```\nAt least it helps with the example you gave.\n\nAnother observation: \n\nThe first block of the large period matrix `P=(A|B)` MUST be invertible (these are the integrals wrt to first half of the symplectic basis). In fact, to get the small period matrix we compute `A^(-1)*B` anyway. So: is it worth looking for a \"better\" invertible submatrix than just the first block? I doubt it.\n\nI've looked at the examples you've posted. `lu` decomposition often chooses something else than the first `g` columns, but the determinant of the matrix it chooses isn't always larger in absolute value (that's not the only measure: we'd like the matrix to be well-conditioned as well).\n\nSo I think you can defend just not doing any work and just taking the first block. I suspect that should work about as well. If you have examples to the contrary it'll be interesting to see, of course!",
    "created_at": "2017-12-20T22:28:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337820",
    "user": "https://github.com/nbruin"
}
```

scipy failure: You're hitting fortran code here. It's hard to imagine it would be capable of working with sage multiprecision floats. If you convert to python standard complex floats it's probably OK:

```
def invertible_submatrix_lu(M):
    Mt = M.transpose()
    rowsMt = Mt.rows()
    colsMt = Mt.columns()
    ccMt=scipy.matrix([[p.__complex__() for p in r] for r in Mt ])
    P, L, U = lu(ccMt)
    rowsP = matrix(P).rows()
    col_nums = [ ]
    for i in range(len(rowsP)):
        if any([ (rowsP[i][j].abs() > 0.1) for j in range(len(colsMt)) ]):
            col_nums.append(i)
    subM = Matrix([ rowsMt[i] for i in col_nums ]).transpose()
    return subM, col_nums
```
At least it helps with the example you gave.

Another observation: 

The first block of the large period matrix `P=(A|B)` MUST be invertible (these are the integrals wrt to first half of the symplectic basis). In fact, to get the small period matrix we compute `A^(-1)*B` anyway. So: is it worth looking for a "better" invertible submatrix than just the first block? I doubt it.

I've looked at the examples you've posted. `lu` decomposition often chooses something else than the first `g` columns, but the determinant of the matrix it chooses isn't always larger in absolute value (that's not the only measure: we'd like the matrix to be well-conditioned as well).

So I think you can defend just not doing any work and just taking the first block. I suspect that should work about as well. If you have examples to the contrary it'll be interesting to see, of course!



---

archive/issue_comments_337821.json:
```json
{
    "body": "Thank you for giving me two solutions. What you suggest already convinces me that we should just take the first g columns. I did not do this before simply because of previous habits in circumstances where the first columns did not always give an invertible submatrix. Still, I should have realized that things do work out in this context. New version coming up.",
    "created_at": "2017-12-20T22:54:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337821",
    "user": "https://github.com/JRSijsling"
}
```

Thank you for giving me two solutions. What you suggest already convinces me that we should just take the first g columns. I did not do this before simply because of previous habits in circumstances where the first columns did not always give an invertible submatrix. Still, I should have realized that things do work out in this context. New version coming up.



---

archive/issue_comments_337822.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-12-20T22:54:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337822",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_337823.json:
```json
{
    "body": "You should pull out the inverse from the loop, of course :-).\nFurthermore, I'm not so sure that explicitly changing to the base ring of Q is better, so why not leave it to the system to choose the appropriate precision (it would probably choose the minimum of the two). Perhaps you shouldn't even base change back to `P.base_ring()` for that reason.\n\nIf course, if you think we have enough precision lying around already to get better results by doing the intermediate computations at a higher precision then you should do that explicitly. So I think the body can be shortened to something along the lines of:\n\n```\n        P = self.period_matrix()\n        Q = other.period_matrix()\n        g = P.nrows()\n        s = range(g)\n        subP = (P[:g,:g]).inverse()\n        Ts = [(Q*R)[:,:g].transpose() * subP for R in Rs]\n        return [ T.change_ring(P.base_ring()) for T in Ts ]\n```\n(if you need the number of rows you shouldn't ask for the length of the list constructed from the rows. Slicing vs. submatrix is probably just a matter of taste)\n\nAnother point: I see that \"automorphism group\" now returns a permutation group. I think you should also return the action of the group on something meaningful (returning the thing as a matrix group as was done previously did that).",
    "created_at": "2017-12-20T23:06:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337823",
    "user": "https://github.com/nbruin"
}
```

You should pull out the inverse from the loop, of course :-).
Furthermore, I'm not so sure that explicitly changing to the base ring of Q is better, so why not leave it to the system to choose the appropriate precision (it would probably choose the minimum of the two). Perhaps you shouldn't even base change back to `P.base_ring()` for that reason.

If course, if you think we have enough precision lying around already to get better results by doing the intermediate computations at a higher precision then you should do that explicitly. So I think the body can be shortened to something along the lines of:

```
        P = self.period_matrix()
        Q = other.period_matrix()
        g = P.nrows()
        s = range(g)
        subP = (P[:g,:g]).inverse()
        Ts = [(Q*R)[:,:g].transpose() * subP for R in Rs]
        return [ T.change_ring(P.base_ring()) for T in Ts ]
```
(if you need the number of rows you shouldn't ask for the length of the list constructed from the rows. Slicing vs. submatrix is probably just a matter of taste)

Another point: I see that "automorphism group" now returns a permutation group. I think you should also return the action of the group on something meaningful (returning the thing as a matrix group as was done previously did that).



---

archive/issue_comments_337824.json:
```json
{
    "body": "Perfect. There was no transpose needed, but your code suggestion is much better. I have also reverted to returning a matrix group. This is also better if one ever wants to divide out by -1, like in the non-hyperelliptic case, and the example shows how to obtain a permutation group anyway.",
    "created_at": "2017-12-21T07:16:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337824",
    "user": "https://github.com/JRSijsling"
}
```

Perfect. There was no transpose needed, but your code suggestion is much better. I have also reverted to returning a matrix group. This is also better if one ever wants to divide out by -1, like in the non-hyperelliptic case, and the example shows how to obtain a permutation group anyway.



---

archive/issue_comments_337825.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-12-21T07:16:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337825",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_337826.json:
```json
{
    "body": "Compute matrix inverse using LU decomposition. This should be numerically a little better behaved.\n\n---\nNew commits:",
    "created_at": "2017-12-30T04:20:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337826",
    "user": "https://github.com/nbruin"
}
```

Compute matrix inverse using LU decomposition. This should be numerically a little better behaved.

---
New commits:



---

archive/issue_comments_337827.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-01-03T00:13:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337827",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_337828.json:
```json
{
    "body": "Ensuring that this works:\n\n```\nsage: E=EllipticCurve([0,1])\nsage: SE=E.riemann_surface()\nsage: J=SE+SE\nsage: J.symplectic_automorphism_group()\nMatrix group over Integer Ring with 36 generators\n```",
    "created_at": "2018-01-03T00:16:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337828",
    "user": "https://github.com/nbruin"
}
```

Ensuring that this works:

```
sage: E=EllipticCurve([0,1])
sage: SE=E.riemann_surface()
sage: J=SE+SE
sage: J.symplectic_automorphism_group()
Matrix group over Integer Ring with 36 generators
```



---

archive/issue_comments_337829.json:
```json
{
    "body": "Attachment [test-other.sage](tarball://root/attachments/some-uuid/ticket24370/test-other.sage) by @JRSijsling created at 2018-01-07 19:04:42",
    "created_at": "2018-01-07T19:04:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337829",
    "user": "https://github.com/JRSijsling"
}
```

Attachment [test-other.sage](tarball://root/attachments/some-uuid/ticket24370/test-other.sage) by @JRSijsling created at 2018-01-07 19:04:42



---

archive/issue_comments_337830.json:
```json
{
    "body": "Attachment [test-other.2.sage](tarball://root/attachments/some-uuid/ticket24370/test-other.2.sage) by @JRSijsling created at 2018-01-07 19:05:25",
    "created_at": "2018-01-07T19:05:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337830",
    "user": "https://github.com/JRSijsling"
}
```

Attachment [test-other.2.sage](tarball://root/attachments/some-uuid/ticket24370/test-other.2.sage) by @JRSijsling created at 2018-01-07 19:05:25



---

archive/issue_comments_337831.json:
```json
{
    "body": "Attachment [test-self.sage](tarball://root/attachments/some-uuid/ticket24370/test-self.sage) by git created at 2018-01-07 21:57:33\n\nBranch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-01-07T21:57:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337831",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Attachment [test-self.sage](tarball://root/attachments/some-uuid/ticket24370/test-self.sage) by git created at 2018-01-07 21:57:33

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_337832.json:
```json
{
    "body": "very temporary patch to get nonsquare LU decomp from mpmath.\n\n---\nNew commits:",
    "created_at": "2018-01-08T23:12:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337832",
    "user": "https://github.com/nbruin"
}
```

very temporary patch to get nonsquare LU decomp from mpmath.

---
New commits:



---

archive/issue_comments_337833.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-01-12T09:28:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337833",
    "user": "https://github.com/JRSijsling"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_337834.json:
```json
{
    "body": "New commits:",
    "created_at": "2018-01-12T09:28:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337834",
    "user": "https://github.com/JRSijsling"
}
```

New commits:



---

archive/issue_comments_337835.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-01-12T10:57:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337835",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_337836.json:
```json
{
    "body": "TODO: I think it could be quite common for people to first compute the endomorphism ring (which is expensive) and then compute the automorphism group. Currently this is quite horrible because we don't cache the result of the endomorphism ring computation. We should have something in the user interface that allows re-use of precomputed endomorphism ring info. Given that the endomorphism computation is subject to tuning parameters (although in practice this seems fairly robust), I can see why we might not want to cache  the result outright. But then at least we might want an interface, comparable to how `tangent_representation_*` works, that can take as input a list of matrices and then computes the automorphisms from it. That's actually something that should only need the Rosati involution.",
    "created_at": "2018-01-17T11:31:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337836",
    "user": "https://github.com/nbruin"
}
```

TODO: I think it could be quite common for people to first compute the endomorphism ring (which is expensive) and then compute the automorphism group. Currently this is quite horrible because we don't cache the result of the endomorphism ring computation. We should have something in the user interface that allows re-use of precomputed endomorphism ring info. Given that the endomorphism computation is subject to tuning parameters (although in practice this seems fairly robust), I can see why we might not want to cache  the result outright. But then at least we might want an interface, comparable to how `tangent_representation_*` works, that can take as input a list of matrices and then computes the automorphisms from it. That's actually something that should only need the Rosati involution.



---

archive/issue_comments_337837.json:
```json
{
    "body": "That is true. I will add `Rs` as a keyword argument to the `symplectic_*` methods, so that they are calculated by default but can be passed by the user who already has the endomorphism/homomorphism basis.",
    "created_at": "2018-01-18T09:33:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337837",
    "user": "https://github.com/JRSijsling"
}
```

That is true. I will add `Rs` as a keyword argument to the `symplectic_*` methods, so that they are calculated by default but can be passed by the user who already has the endomorphism/homomorphism basis.



---

archive/issue_comments_337838.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-01-18T09:46:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337838",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_337839.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-02-19T12:10:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337839",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_337840.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-24T03:57:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337840",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_337841.json:
```json
{
    "body": "Merge conflict resolved (it wasn't clear to me what the conflict was, actually). This ticket has been tested quite a bit and contains very useful code. Ready to be reviewed and merged!\n\nAlso: patchbots are reporting no problems due to this ticket.",
    "created_at": "2018-03-24T04:02:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337841",
    "user": "https://github.com/nbruin"
}
```

Merge conflict resolved (it wasn't clear to me what the conflict was, actually). This ticket has been tested quite a bit and contains very useful code. Ready to be reviewed and merged!

Also: patchbots are reporting no problems due to this ticket.



---

archive/issue_comments_337842.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-26T02:33:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337842",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_337843.json:
```json
{
    "body": "Surprisingly, argument computation (used in the intersection pairing) can impose a quite measurable cost, so caching it makes sense. For instance with\n\n```\nR.<x,y>=QQ[]\nf = x^10 + y^10 + x^3*y^3 + 1\nC=Curve(f)\nS=C.riemann_surface()\n%time M=S.period_matrix()\n```\n**PRE:**\n\n```\nCPU times: user 5min 56s, sys: 151 ms, total: 5min 56s\nWall time: 5min 57s\n```\n**POST:**\n\n```\nCPU times: user 3min 8s, sys: 104 ms, total: 3min 8s\nWall time: 3min 9s\n```",
    "created_at": "2018-03-26T02:43:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337843",
    "user": "https://github.com/nbruin"
}
```

Surprisingly, argument computation (used in the intersection pairing) can impose a quite measurable cost, so caching it makes sense. For instance with

```
R.<x,y>=QQ[]
f = x^10 + y^10 + x^3*y^3 + 1
C=Curve(f)
S=C.riemann_surface()
%time M=S.period_matrix()
```
**PRE:**

```
CPU times: user 5min 56s, sys: 151 ms, total: 5min 56s
Wall time: 5min 57s
```
**POST:**

```
CPU times: user 3min 8s, sys: 104 ms, total: 3min 8s
Wall time: 3min 9s
```



---

archive/issue_comments_337844.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-28T17:50:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337844",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_337845.json:
```json
{
    "body": "Feel free to set this to positive review if you have checked that all tests actually pass. (The patchbot produces lots of errors but I guess that this is some sort of noise.)",
    "created_at": "2018-03-29T11:45:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337845",
    "user": "https://github.com/saraedum"
}
```

Feel free to set this to positive review if you have checked that all tests actually pass. (The patchbot produces lots of errors but I guess that this is some sort of noise.)



---

archive/issue_comments_337846.json:
```json
{
    "body": "Thank you, Julian!\n\nI've run the doctests and I get good results:\n\nMy own build has some failing tests, but those aren't due to the commits here; and neither are the problems that the bots report. So: positive it is. Great work.\n\n(we should watch the ticket in case it bitrots before it gets merged)",
    "created_at": "2018-03-29T16:02:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337846",
    "user": "https://github.com/nbruin"
}
```

Thank you, Julian!

I've run the doctests and I get good results:

My own build has some failing tests, but those aren't due to the commits here; and neither are the problems that the bots report. So: positive it is. Great work.

(we should watch the ticket in case it bitrots before it gets merged)



---

archive/issue_comments_337847.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-03-29T16:02:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337847",
    "user": "https://github.com/nbruin"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_337848.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2018-05-07T17:59:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337848",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_337849.json:
```json
{
    "body": "The release manager might not agree that I'm setting this to needs_work, but this breaks with #24742:\n\n```\nsage -t src/sage/schemes/riemann_surfaces/riemann_surface.py\n**********************************************************************\nFile \"src/sage/schemes/riemann_surfaces/riemann_surface.py\", line 353, in sage.schemes.riemann_surfaces.riemann_surface.RiemannSurface\nFailed example:\n    A = S.endomorphism_basis()\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 551, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 961, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.schemes.riemann_surfaces.riemann_surface.RiemannSurface[11]>\", line 1, in <module>\n        A = S.endomorphism_basis()\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/schemes/riemann_surfaces/riemann_surface.py\", line 1693, in endomorphism_basis\n        return integer_matrix_relations(M,M,b,r)\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/schemes/riemann_surfaces/riemann_surface.py\", line 2089, in integer_matrix_relations\n        A = Matrix(R,g1,g2,V[:g1*g2])\n      File \"sage/matrix/constructor.pyx\", line 626, in sage.matrix.constructor.MatrixFactory.__call__ (build/cythonized/sage/matrix/constructor.c:2519)\n        return MatrixArgs(*args, **kwds).matrix()\n      File \"sage/matrix/args.pyx\", line 646, in sage.matrix.args.MatrixArgs.matrix (build/cythonized/sage/matrix/args.c:7896)\n        self.finalize()\n      File \"sage/matrix/args.pyx\", line 853, in sage.matrix.args.MatrixArgs.finalize (build/cythonized/sage/matrix/args.c:9655)\n        raise TypeError(f\"unable to convert {self.entries!r} to a matrix\")\n    TypeError: unable to convert ['a1'] to a matrix\n**********************************************************************\n```\n\nThis is because #24742 disallows using strings to construct matrix entries.",
    "created_at": "2018-05-07T17:59:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337849",
    "user": "https://github.com/jdemeyer"
}
```

The release manager might not agree that I'm setting this to needs_work, but this breaks with #24742:

```
sage -t src/sage/schemes/riemann_surfaces/riemann_surface.py
**********************************************************************
File "src/sage/schemes/riemann_surfaces/riemann_surface.py", line 353, in sage.schemes.riemann_surfaces.riemann_surface.RiemannSurface
Failed example:
    A = S.endomorphism_basis()
Exception raised:
    Traceback (most recent call last):
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 551, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 961, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.schemes.riemann_surfaces.riemann_surface.RiemannSurface[11]>", line 1, in <module>
        A = S.endomorphism_basis()
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/schemes/riemann_surfaces/riemann_surface.py", line 1693, in endomorphism_basis
        return integer_matrix_relations(M,M,b,r)
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/schemes/riemann_surfaces/riemann_surface.py", line 2089, in integer_matrix_relations
        A = Matrix(R,g1,g2,V[:g1*g2])
      File "sage/matrix/constructor.pyx", line 626, in sage.matrix.constructor.MatrixFactory.__call__ (build/cythonized/sage/matrix/constructor.c:2519)
        return MatrixArgs(*args, **kwds).matrix()
      File "sage/matrix/args.pyx", line 646, in sage.matrix.args.MatrixArgs.matrix (build/cythonized/sage/matrix/args.c:7896)
        self.finalize()
      File "sage/matrix/args.pyx", line 853, in sage.matrix.args.MatrixArgs.finalize (build/cythonized/sage/matrix/args.c:9655)
        raise TypeError(f"unable to convert {self.entries!r} to a matrix")
    TypeError: unable to convert ['a1'] to a matrix
**********************************************************************
```

This is because #24742 disallows using strings to construct matrix entries.



---

archive/issue_comments_337850.json:
```json
{
    "body": "I think that the old code\n\n```\n    names = [\"%s%s\"%(n, i+1) for n in [\"a\",\"b\",\"c\",\"d\"] for i in range(g**2)]\n    R = PolynomialRing(CC, names)\n    vars = R.gens()\n    A = Matrix(R, g, g, vars[:g**2])\n    B = Matrix(R, g, g, vars[g**2:2*g**2])\n    C = Matrix(R, g, g, vars[2*g**2:3*g**2])\n    D = Matrix(R, g, g, vars[3*g**2:4*g**2])\n```\nis clearly better than the new code from this ticket\n\n```\n    V = [\"%s%s\"%(n,i) for n in [\"a\",\"b\",\"c\",\"d\"] for i in srange(1,1+g1*g2)]\n    R = PolynomialRing(CC,V)\n    A = Matrix(R,g1,g2,V[:g1*g2])\n    B = Matrix(R,g1,g2,V[g1*g2:2*g1*g2])\n    C = Matrix(R,g1,g2,V[2*g1*g2:3*g1*g2])\n    D = Matrix(R,g1,g2,V[3*g1*g2:4*g1*g2])\n```",
    "created_at": "2018-05-07T18:03:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337850",
    "user": "https://github.com/jdemeyer"
}
```

I think that the old code

```
    names = ["%s%s"%(n, i+1) for n in ["a","b","c","d"] for i in range(g**2)]
    R = PolynomialRing(CC, names)
    vars = R.gens()
    A = Matrix(R, g, g, vars[:g**2])
    B = Matrix(R, g, g, vars[g**2:2*g**2])
    C = Matrix(R, g, g, vars[2*g**2:3*g**2])
    D = Matrix(R, g, g, vars[3*g**2:4*g**2])
```
is clearly better than the new code from this ticket

```
    V = ["%s%s"%(n,i) for n in ["a","b","c","d"] for i in srange(1,1+g1*g2)]
    R = PolynomialRing(CC,V)
    A = Matrix(R,g1,g2,V[:g1*g2])
    B = Matrix(R,g1,g2,V[g1*g2:2*g1*g2])
    C = Matrix(R,g1,g2,V[2*g1*g2:3*g1*g2])
    D = Matrix(R,g1,g2,V[3*g1*g2:4*g1*g2])
```



---

archive/issue_comments_337851.json:
```json
{
    "body": "Replying to [comment:55 jdemeyer]:\n> I think that the old code\n> \n> ```\n>     names = [\"%s%s\"%(n, i+1) for n in [\"a\",\"b\",\"c\",\"d\"] for i in range(g**2)]\n>     R = PolynomialRing(CC, names)\n>     vars = R.gens()\n>     A = Matrix(R, g, g, vars[:g**2])\n>     B = Matrix(R, g, g, vars[g**2:2*g**2])\n>     C = Matrix(R, g, g, vars[2*g**2:3*g**2])\n>     D = Matrix(R, g, g, vars[3*g**2:4*g**2])\n> ```\n> is clearly better than the new code from this ticket\n> \n> ```\n>     V = [\"%s%s\"%(n,i) for n in [\"a\",\"b\",\"c\",\"d\"] for i in srange(1,1+g1*g2)]\n>     R = PolynomialRing(CC,V)\n>     A = Matrix(R,g1,g2,V[:g1*g2])\n>     B = Matrix(R,g1,g2,V[g1*g2:2*g1*g2])\n>     C = Matrix(R,g1,g2,V[2*g1*g2:3*g1*g2])\n>     D = Matrix(R,g1,g2,V[3*g1*g2:4*g1*g2])\n> ```\n\n\nI agree with that in principle; I'll leave it to Jeroen to fix this. Perhaps he had a good reason to prefer strings (I fail to see any). I'm also fine with merging this ticket as-is, but that's unlikely to happen now that someone has reverted the positive review (grr).",
    "created_at": "2018-05-07T19:37:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337851",
    "user": "https://github.com/nbruin"
}
```

Replying to [comment:55 jdemeyer]:
> I think that the old code
> 
> ```
>     names = ["%s%s"%(n, i+1) for n in ["a","b","c","d"] for i in range(g**2)]
>     R = PolynomialRing(CC, names)
>     vars = R.gens()
>     A = Matrix(R, g, g, vars[:g**2])
>     B = Matrix(R, g, g, vars[g**2:2*g**2])
>     C = Matrix(R, g, g, vars[2*g**2:3*g**2])
>     D = Matrix(R, g, g, vars[3*g**2:4*g**2])
> ```
> is clearly better than the new code from this ticket
> 
> ```
>     V = ["%s%s"%(n,i) for n in ["a","b","c","d"] for i in srange(1,1+g1*g2)]
>     R = PolynomialRing(CC,V)
>     A = Matrix(R,g1,g2,V[:g1*g2])
>     B = Matrix(R,g1,g2,V[g1*g2:2*g1*g2])
>     C = Matrix(R,g1,g2,V[2*g1*g2:3*g1*g2])
>     D = Matrix(R,g1,g2,V[3*g1*g2:4*g1*g2])
> ```


I agree with that in principle; I'll leave it to Jeroen to fix this. Perhaps he had a good reason to prefer strings (I fail to see any). I'm also fine with merging this ticket as-is, but that's unlikely to happen now that someone has reverted the positive review (grr).



---

archive/issue_comments_337852.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-07T20:32:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337852",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_337853.json:
```json
{
    "body": "Jeroen can revert this if he wants strings. In the mean time, the quickest way forward is to just initialize with the variable objects instead.",
    "created_at": "2018-05-07T20:34:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337853",
    "user": "https://github.com/nbruin"
}
```

Jeroen can revert this if he wants strings. In the mean time, the quickest way forward is to just initialize with the variable objects instead.



---

archive/issue_comments_337854.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2018-05-07T20:34:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337854",
    "user": "https://github.com/nbruin"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_337855.json:
```json
{
    "body": "When you said \"Jeroen\" in the last few comments, I guess you refer to Jeroen Sijsling? I didn't get that initially.",
    "created_at": "2018-05-07T21:55:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337855",
    "user": "https://github.com/jdemeyer"
}
```

When you said "Jeroen" in the last few comments, I guess you refer to Jeroen Sijsling? I didn't get that initially.



---

archive/issue_comments_337856.json:
```json
{
    "body": "Replying to [comment:59 jdemeyer]:\n> When you said \"Jeroen\" in the last few comments, I guess you refer to Jeroen Sijsling? I didn't get that initially.\n\nWell, that's a namespace issue you'll have to solve yourselves :-)",
    "created_at": "2018-05-08T04:53:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337856",
    "user": "https://github.com/nbruin"
}
```

Replying to [comment:59 jdemeyer]:
> When you said "Jeroen" in the last few comments, I guess you refer to Jeroen Sijsling? I didn't get that initially.

Well, that's a namespace issue you'll have to solve yourselves :-)



---

archive/issue_comments_337857.json:
```json
{
    "body": "This part of the functionality seems to date from before this particular ticket (thus saith git blame). And I do not recall changing this. Anyway, no need to revert on my account.",
    "created_at": "2018-05-08T14:29:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337857",
    "user": "https://github.com/JRSijsling"
}
```

This part of the functionality seems to date from before this particular ticket (thus saith git blame). And I do not recall changing this. Anyway, no need to revert on my account.



---

archive/issue_comments_337858.json:
```json
{
    "body": "Hm. It is a little weird where this change happened. It takes a `git log --follow` to find the change:\nIt seems the change was made on #24884 to use variables instead of strings. Oddly enough, there is nothing in the history of the file that has since undone that change if I look in the history of the file. It seems git trac is basing its diffs on an alternate timeline ...",
    "created_at": "2018-05-08T20:35:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337858",
    "user": "https://github.com/nbruin"
}
```

Hm. It is a little weird where this change happened. It takes a `git log --follow` to find the change:
It seems the change was made on #24884 to use variables instead of strings. Oddly enough, there is nothing in the history of the file that has since undone that change if I look in the history of the file. It seems git trac is basing its diffs on an alternate timeline ...



---

archive/issue_events_061625.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-09T09:49:56Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24133#event-61625"
}
```



---

archive/issue_comments_337859.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-05-09T09:49:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24133",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24133#issuecomment-337859",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
