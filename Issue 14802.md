# Issue 14802: sage python library and automake

Issue created by migration from Trac.

Original creator: felixs

Original creation time: 2013-08-12 15:34:29

CC:  jondo

I have chosen to implement the distribution independent build system with autotools. It turns out that two changes considerably simplify issues.

- change the suffix for .pyx files that are intended to be compiled to c++ code. automake derives the build rules from this suffix, not from meta information.
- don't use `lib[a-z]*.pyx` as the filenames for cython code. libtool will confuse the resulting plugins with shared libraries.

These changes are pretty small and can be tested/reviewed/merged independently.




---

Comment by felixs created at 2013-08-23 21:34:34

Unfortunately, cython needs to be patched to not unnecessarily break setup.py.


---

Comment by felixs created at 2013-08-23 21:34:34

Changing status from new to needs_review.


---

Comment by vbraun created at 2013-12-05 17:18:33

This obviously needs to be discussed with Cython upstream... The following thread seems relevant but doesn't end in a conclusion, and I don't know the current status there. IMHO we shouldn't modify Cython in a way that upstream won't ever merge. 

http://thread.gmane.org/gmane.comp.python.cython.devel/14955/focus=14964
----
New commits:


---

Comment by vbraun created at 2013-12-05 17:18:33

Changing status from needs_review to needs_info.


---

Comment by felixs created at 2013-12-05 23:48:03

Replying to [comment:3 vbraun]:
> http://thread.gmane.org/gmane.comp.python.cython.devel/14955/focus=14964
this thread is relevant, but it's mostly about cython bug 655 (=writing out dependencies for builds involving cython).

this ticket patches cython (4 lines) to fix a different issue. commit `@`74c837c makes `cythonize` work on files with arbitrary extensions. and thus work after appending x to files containing cython code meant to be translated to c++. for sage, this patch is meant to facilitate a transition from distutils to a (make based) build system. it's simply allowing them to coexist (and is not required after a transition).

i expect that cython developers will merge this patch (or some variant), if they see flexibility as improvement (e.g. like Robert has merged the patch that unhardwires the debugger output path, https://github.com/cython/cython/pull/247). alternatives may exist of course, i didn't find them...


---

Comment by jdemeyer created at 2017-09-05 13:03:19

I think it's clear that there no plans at all to start using automake for the Sage library. Even if automake has its advantages, as far as I know every single Python project uses `distutils` or some variant.


---

Comment by jdemeyer created at 2017-09-05 13:03:19

Changing status from needs_info to positive_review.


---

Comment by embray created at 2017-12-12 08:23:33

Resolution: wontfix
