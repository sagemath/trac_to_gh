# Issue 13488: factor_trial_division returns Python longs as exponents

archive/issues_013488.json:
```json
{
    "body": "Assignee: @williamstein\n\nunlike the rest (?) of Sage, factor_trial_division returns wants exponents of powers to be Python longs:\n\n```\nsage: from sage.rings.factorint import factor_trial_division\nsage: [t for t in factor_trial_division(8)]\n[(2, 3L)]\n```\n\nIt is a bug or a feature? It leads to this kind of data also being returned by factor():\n\n```\nsage: [t for t in Integer(8).factor(limit=1000)]\n[(2, 3L)]\n```\n\nas opposed to \n\n```\nsage: [t for t in Integer(8).factor()]\n[(2, 3)]\n```\n\nSee this [sage-support thread](https://groups.google.com/d/topic/sage-support/whnvwlDrAEo/discussion).\nSomething should be fixed - either factor(), or factor_trial_division()\n\nIssue created by migration from https://trac.sagemath.org/ticket/13692\n\n",
    "created_at": "2012-11-08T06:54:22Z",
    "labels": [
        "component: number theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.5",
    "title": "factor_trial_division returns Python longs as exponents",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13488",
    "user": "https://github.com/dimpase"
}
```
Assignee: @williamstein

unlike the rest (?) of Sage, factor_trial_division returns wants exponents of powers to be Python longs:

```
sage: from sage.rings.factorint import factor_trial_division
sage: [t for t in factor_trial_division(8)]
[(2, 3L)]
```

It is a bug or a feature? It leads to this kind of data also being returned by factor():

```
sage: [t for t in Integer(8).factor(limit=1000)]
[(2, 3L)]
```

as opposed to 

```
sage: [t for t in Integer(8).factor()]
[(2, 3)]
```

See this [sage-support thread](https://groups.google.com/d/topic/sage-support/whnvwlDrAEo/discussion).
Something should be fixed - either factor(), or factor_trial_division()

Issue created by migration from https://trac.sagemath.org/ticket/13692





---

archive/issue_comments_166106.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-11-08T07:25:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13488#issuecomment-166106",
    "user": "https://github.com/nbruin"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_166107.json:
```json
{
    "body": "Problem was that exponent was a `cdef unsigned long`, which doesn't necessarily fit in a python int, so apparently cython converts that to a python long automatically.\n\nBy defining it to be a `cdef long` instead I don't think we'll get any overflow (it's an exponent of a prime in the factorization of an integer!) and now the exponent is returned as a `python int` instead. Unless people feel strongly that this should be cast to a `Integer` instead, I think this should be sufficient.",
    "created_at": "2012-11-08T07:25:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13488#issuecomment-166107",
    "user": "https://github.com/nbruin"
}
```

Problem was that exponent was a `cdef unsigned long`, which doesn't necessarily fit in a python int, so apparently cython converts that to a python long automatically.

By defining it to be a `cdef long` instead I don't think we'll get any overflow (it's an exponent of a prime in the factorization of an integer!) and now the exponent is returned as a `python int` instead. Unless people feel strongly that this should be cast to a `Integer` instead, I think this should be sufficient.



---

archive/issue_comments_166108.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-11-08T09:43:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13488#issuecomment-166108",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_166109.json:
```json
{
    "body": "Replying to [comment:2 nbruin]:\n> Problem was that exponent was a `cdef unsigned long`, which doesn't necessarily fit in a python int, so apparently cython converts that to a python long automatically.\n> \n> By defining it to be a `cdef long` instead I don't think we'll get any overflow (it's an exponent of a prime in the factorization of an integer!) and now the exponent is returned as a `python int` instead. Unless people feel strongly that this should be cast to a `Integer` instead, I think this should be sufficient.\n\nTo have the exponents of type int() is consistent, it seem. Looks good, positive review.",
    "created_at": "2012-11-08T09:43:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13488#issuecomment-166109",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:2 nbruin]:
> Problem was that exponent was a `cdef unsigned long`, which doesn't necessarily fit in a python int, so apparently cython converts that to a python long automatically.
> 
> By defining it to be a `cdef long` instead I don't think we'll get any overflow (it's an exponent of a prime in the factorization of an integer!) and now the exponent is returned as a `python int` instead. Unless people feel strongly that this should be cast to a `Integer` instead, I think this should be sufficient.

To have the exponents of type int() is consistent, it seem. Looks good, positive review.



---

archive/issue_comments_166110.json:
```json
{
    "body": "The documentation is misformatted.  It should be\n\n```\nTESTS:\n\nTest that :trac:`13692` is solved::\n\n    sage: from sage.rings.factorint import factor_trial_division \n```\n",
    "created_at": "2012-11-08T14:11:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13488#issuecomment-166110",
    "user": "https://github.com/jdemeyer"
}
```

The documentation is misformatted.  It should be

```
TESTS:

Test that :trac:`13692` is solved::

    sage: from sage.rings.factorint import factor_trial_division 
```




---

archive/issue_comments_166111.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-11-08T14:11:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13488#issuecomment-166111",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_166112.json:
```json
{
    "body": "Attachment [trac_13692-no_unsigned_long.patch](tarball://root/attachments/some-uuid/ticket13692/trac_13692-no_unsigned_long.patch) by @nbruin created at 2012-11-08 17:12:35\n\nfix",
    "created_at": "2012-11-08T17:12:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13488#issuecomment-166112",
    "user": "https://github.com/nbruin"
}
```

Attachment [trac_13692-no_unsigned_long.patch](tarball://root/attachments/some-uuid/ticket13692/trac_13692-no_unsigned_long.patch) by @nbruin created at 2012-11-08 17:12:35

fix



---

archive/issue_comments_166113.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2012-11-08T17:14:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13488#issuecomment-166113",
    "user": "https://github.com/nbruin"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_166114.json:
```json
{
    "body": "Test section formatting amended",
    "created_at": "2012-11-08T17:14:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13488#issuecomment-166114",
    "user": "https://github.com/nbruin"
}
```

Test section formatting amended



---

archive/issue_comments_166115.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-11-13T08:21:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13488",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13488#issuecomment-166115",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_038288.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-11-13T08:21:52Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13488",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13488#event-38288"
}
```
