# Issue 20589: AlgebraicExtensionFunctor should include number field structure

Issue created by migration from Trac.

Original creator: pbruin

Original creation time: 2016-06-14 14:51:30

If a number field is equipped with structural morphisms, these are lost when applying the functorial construction of the number field (via `NumberField.construction()` and `AlgebraicExtensionFunctor`), which happens for example in the construction of push-outs:

```
sage: R.<x> = ZZ[]
sage: K.<a> = NumberField(x^2 - 3)
sage: L0.<b> = K.change_names()
sage: L0.structure()
(Isomorphism given by variable name change map:
   From: Number Field in b with defining polynomial x^2 - 3
   To:   Number Field in a with defining polynomial x^2 - 3,
 Isomorphism given by variable name change map:
   From: Number Field in a with defining polynomial x^2 - 3
   To:   Number Field in b with defining polynomial x^2 - 3)
sage: L1 = (b*x).parent().base_ring()
sage: L1.structure()
(Ring Coercion endomorphism of Number Field in b with defining polynomial x^2 - 3,
 Ring Coercion endomorphism of Number Field in b with defining polynomial x^2 - 3)
```

This currently does not cause too much trouble because the two fields (with and without the structural morphisms) are considered equal, although they are not identical:

```
sage: L1 is L0
False
sage: L1 == L0
True
```

However, this becomes a nuisance when trying to implement "equality is identity" for number fields (to be done on a future ticket).


---

Comment by pbruin created at 2016-06-14 15:11:25

Changing status from new to needs_review.


---

Comment by vdelecroix created at 2016-06-14 17:52:35

(seen in `AlgebraicExtensionFunctor`) For comparisons you can simplify

```
c = cmp(a1,b1)
if c == 0:
    c = cmp(a2,b2)
if c == 0:
    c = cmp(a3,b3)
...
return c
```

by

```
return cmp(a1,b1) or cmp(a2,b2) or cmp(a3,b3) or ...
```



---

Comment by git created at 2016-06-15 07:53:31

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by saraedum created at 2016-06-16 07:42:57

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-06-18 20:06:06

Resolution: fixed
