# Issue 27341: Don't use sphinx.ext.autodoc.inspector.formatargspec anymore

Issue created by migration from https://trac.sagemath.org/ticket/27578

Original creator: jhpalmieri

Original creation time: 2019-03-30 22:28:48

CC:  fbissey jdemeyer slelievre strogdon @tobiasdiez

After upgrading to Sphinx 1.8.5 in #26451, Sphinx's function `formatargspec` is deprecated, so we should not use anymore it in `src/sage_setup/docbuild/ext/sage_autodoc.py`.

For ordinary Python functions, we may be able to change `formatargspec(my_func, *argspec)` to `Signature(my_func).format_args()`. I don't think this works with Cython functions, though.


---

Comment by embray created at 2019-04-02 13:59:17

The `Signature` class is new in Python 3, though there exists a backport of it for Python 2 so we'd have to add the backport as a depency so long as we still support Python 2. Obviously adding the backport is no big deal. I've used it before and it works fine. It's not a bad idea, since the `Signature` interface is much nicer in general than `inspect.getargspec`.


---

Comment by jhpalmieri created at 2019-04-02 14:58:41

Sphinx has its own `Signature` class (in `sphinx.util.inspect`), and that's what I was thinking about using.


---

Comment by slelievre created at 2019-06-12 14:55:07

Changing keywords from "" to "sphinx, formatargspec, Signature".


---

Comment by jhpalmieri created at 2019-06-12 21:57:13

The proposed changes at #27971 get rid of the deprecation warnings. We can leave this open in case it is worthwhile to use Sphinx's `Signature` or Python 3's `Signature`. (And maybe we should use those in `sageinspect.py`, too?)


---

Comment by embray created at 2019-07-03 11:39:12

Moving open critical and blocker issues to the next release milestone (optimistically).


---

Comment by embray created at 2019-12-30 14:48:17

Ticket retargeted after milestone closed


---

Comment by mkoeppe created at 2021-02-15 06:52:35

See also: #31309 `sage_getargspec` mishandles keyword-only arguments


---

Comment by mkoeppe created at 2021-03-24 02:04:25

Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.


---

Comment by @tobiasdiez created at 2022-04-02 11:41:58

An alternative is proposed in #30884.
