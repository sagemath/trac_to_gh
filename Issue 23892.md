# Issue 23892: Complete the standard bijections on the symmetric group

Issue created by migration from https://trac.sagemath.org/ticket/24129

Original creator: darij

Original creation time: 2017-10-31 02:35:08

CC:  troby tscrim

Keywords: IMA coding sprint, permutation, bijections

* The Foata-SchÃ¼tzenberger transform on permutations is implemented (foata_bijection), but its inverse is not. This should be easy to fix -- an algorithm is given in the very same reference http://www-igm.univ-mlv.fr/~berstel/Mps/Travaux/A/1978-3MajorIndexMathNachr.pdf .

* The first fundamental bijection on S_n, as well as its inverse, seem to not be in [SageMath](SageMath) (although FindStat has them: http://www.findstat.org/MapsDatabase/Mp00087 ). A similarly defined map -- forget_cycles -- already exists, but this is not it.


---

Comment by tscrim created at 2017-10-31 02:46:03

Changing component from PLEASE CHANGE to combinatorics.


---

Comment by darij created at 2018-03-30 16:59:46

New commits:


---

Comment by darij created at 2018-03-30 18:28:20

Changing status from new to needs_review.


---

Comment by tscrim created at 2018-03-31 02:08:55

It looks good overall. However, I do have some comments:

- In `to_cycles()`, `mins` does not make grammatical sense to me (I know you are avoiding `min`). How about `use_min`?
- I know you didn't write this, but I don't understand why we need to do `L = list(self)` and iterate over `L`. Why can't we just iterate over `self`? (Of course, you cannot do this for the inverse method.)
- Since `len(M) = k` in your updated code, you can do the faster `[i for i,val in enumerate(M) if val > e]`. Same for `L` in the inverse method.
- Wrong type of tick at the end ``\{1, 2, \ldots, n\}'`.
- I would change
  {{{#!diff
-        The fundamental transformation is a bijection; for its
-        inverse, see :meth:`fundamental_transformation_inverse`.
+        .. SEEALSO::
+
+            :meth:`fundamental_transformation_inverse` for the inverse map.
  }}}
  and similar for the inverse map.
- You say in the ticket description that the `fundamental_transform` is different than `forget_cycles`. You should document this clearly in both of these methods, including an example where they differ.
- The line with the `== P` bugs me:
  {{{#!sage
            sage: all( P.fundamental_transformation_inverse().fundamental_transformation()
            ....:      == P
            ....:      for P in Permutations(4))
  }}}
  I would break the 80 char/line here, but that is bikeshedding. Feel free to ignore.
- I think the border cases and systematic check should be in a `TESTS::` block. Also, I would add a inverse then normal check as well.


---

Comment by git created at 2018-03-31 02:47:41

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-03-31 02:49:53

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by darij created at 2018-03-31 02:50:34

Done these and more. Travis, could you do me a favor and ./sage -bt them, since I don't know how to SSH to my IMA account and my UMN machine is recompiling Sage? Thanks!


---

Comment by git created at 2018-03-31 03:52:49

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-03-31 03:54:11

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2018-03-31 04:14:53

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2018-03-31 04:16:01

I pushed a few more doc changes to make it more explicit what the difference in the maps are, including an example in `fundamental_transformation()`. All tests pass on my machine, so if my changes look good, then you can set a positive review.


---

Comment by git created at 2018-03-31 04:35:37

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2018-03-31 05:44:23

LGTM. Thanks.


---

Comment by tscrim created at 2018-03-31 05:44:23

Changing status from needs_review to positive_review.


---

Comment by darij created at 2018-03-31 05:45:02

Thank you!


---

Comment by vbraun created at 2018-05-08 17:27:09

Resolution: fixed
