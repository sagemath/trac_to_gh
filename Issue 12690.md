# Issue 12690: The partition function under FreeBSD

Issue created by migration from Trac.

Original creator: stephen

Original creation time: 2012-04-20 03:05:14

Assignee: pjeremy

Keywords: partition FreeBSD

sage built on a FreeBSD 64 bit machine fails the test

```
sage -t  -force_lib "devel/sage/sage/combinat/partition.py"
```


After some googling, I get the impression that long double is at best flaky on FreeBSD.

I am going to suggest the following patch, although it is perhaps not necessary for the i386 version of FreeBSD.

```
--- sage-5.0.beta13/sage/combinat/partitions_c.cc-orig  2012-04-20 01:01:41.000000000 +0000
+++ sage-5.0.beta13/sage/combinat/partitions_c.cc       2012-04-20 01:02:47.000000000 +0000
`@``@` -152,7 +152,7 `@``@`
 const unsigned int double_precision = DBL_MANT_DIG;                         // The assumed precision of a double.


-#if defined(__sparc) || defined(__CYGWIN__)
+#if defined(__sparc) || defined(__CYGWIN__) || defined(__FreeBSD__)
 // On sparc solaris long double is bad/broken/different, etc.  E.g.,
 // LDBL_MANT_DIG is 113 rather than 106, which causes all kinds of trouble.
 // So we only use double_precision.
```




---

Comment by mhansen created at 2012-04-20 05:10:51

Seems like a reasonable change.


---

Attachment


---

Comment by mhansen created at 2012-05-28 07:46:42

Changing keywords from "partition FreeBSD" to "partition FreeBSD sd40.5".


---

Comment by mhansen created at 2012-05-28 07:46:42

Changing status from new to needs_review.


---

Comment by mhansen created at 2012-05-28 07:46:54

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2012-06-18 10:24:07

Resolution: fixed
