# Issue 32146: maxima interfaces: Translate == and != to equal and notequal, not = and #

archive/issues_032146.json:
```json
{
    "body": "CC:  @EmmanuelCharpentier @spaghettisalat @kcrisman @orlitzky\n\n(from #31911)\n\nIssue created by migration from https://trac.sagemath.org/ticket/32383\n\n",
    "created_at": "2021-08-15T16:01:12Z",
    "labels": [
        "component: symbolics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "maxima interfaces: Translate == and != to equal and notequal, not = and #",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32146",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @EmmanuelCharpentier @spaghettisalat @kcrisman @orlitzky

(from #31911)

Issue created by migration from https://trac.sagemath.org/ticket/32383





---

archive/issue_comments_458525.json:
```json
{
    "body": "We still need `=`, `#` in some places, though. Maxima's `solve` does not understand `equal`:\n\n```\n(%i1) solve(x^2 = 1);\n(%o1)                          [x = - 1, x = 1]\n(%i2) solve(equal(x^2, 1));\n                                      2\n(%o2)                         [equal(x , 1) = 0]\n```\n\n----\nNew commits:",
    "created_at": "2021-08-15T21:14:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32146#issuecomment-458525",
    "user": "https://github.com/mkoeppe"
}
```

We still need `=`, `#` in some places, though. Maxima's `solve` does not understand `equal`:

```
(%i1) solve(x^2 = 1);
(%o1)                          [x = - 1, x = 1]
(%i2) solve(equal(x^2, 1));
                                      2
(%o2)                         [equal(x , 1) = 0]
```

----
New commits:



---

archive/issue_comments_458526.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-15T21:26:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32146#issuecomment-458526",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_458527.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-15T21:50:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32146#issuecomment-458527",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_458528.json:
```json
{
    "body": "We will have to make the equations passed to Maxima's `solve` (and `desolve`) a special case.  There is only a small number of such call sites in the Sage library.\n\nThe introduction of `and_symbolic` in #31911 will anyway make changes to the `Expression.solve` method necessary so that it can accept conjunctions expressed using `and_symbolic` in addition to those expressed as lists of clauses.",
    "created_at": "2021-08-15T23:23:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32146#issuecomment-458528",
    "user": "https://github.com/mkoeppe"
}
```

We will have to make the equations passed to Maxima's `solve` (and `desolve`) a special case.  There is only a small number of such call sites in the Sage library.

The introduction of `and_symbolic` in #31911 will anyway make changes to the `Expression.solve` method necessary so that it can accept conjunctions expressed using `and_symbolic` in addition to those expressed as lists of clauses.



---

archive/issue_comments_458529.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-16T00:27:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32146#issuecomment-458529",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_458530.json:
```json
{
    "body": "setting it to `needs_review` so that the patchbot runs.\n\nto do: converting `equal(...)`, `notequal(...)` back to `==` and `!=`.",
    "created_at": "2021-08-16T00:28:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32146#issuecomment-458530",
    "user": "https://github.com/mkoeppe"
}
```

setting it to `needs_review` so that the patchbot runs.

to do: converting `equal(...)`, `notequal(...)` back to `==` and `!=`.



---

archive/issue_comments_458531.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-08-16T00:28:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32146#issuecomment-458531",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_458532.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-16T00:56:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32146#issuecomment-458532",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_458533.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-16T01:26:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32146#issuecomment-458533",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_458534.json:
```json
{
    "body": "Roundtripping with `max_to_sr` works\n\n```\nfrom sage.interfaces.maxima_lib import max_to_sr \nsage: max_to_sr(maxima_calculus(x == 0).ecl())                                                                            \nx == 0\n```\n\nbut normal conversion via the expression parser does not:\n\n```\nsage: maxima_calculus(x == 0)._sage_()                                                                                    \nequal(x, 0)\n```\n",
    "created_at": "2021-08-16T01:34:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32146#issuecomment-458534",
    "user": "https://github.com/mkoeppe"
}
```

Roundtripping with `max_to_sr` works

```
from sage.interfaces.maxima_lib import max_to_sr 
sage: max_to_sr(maxima_calculus(x == 0).ecl())                                                                            
x == 0
```

but normal conversion via the expression parser does not:

```
sage: maxima_calculus(x == 0)._sage_()                                                                                    
equal(x, 0)
```




---

archive/issue_comments_458535.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-16T05:08:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32146#issuecomment-458535",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_458536.json:
```json
{
    "body": "This gets the conversion to work (both with `maxima` and `maxima_calculus`), but it can't possibly be the right solution",
    "created_at": "2021-08-16T05:09:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32146#issuecomment-458536",
    "user": "https://github.com/mkoeppe"
}
```

This gets the conversion to work (both with `maxima` and `maxima_calculus`), but it can't possibly be the right solution



---

archive/issue_comments_458537.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-16T05:34:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32146#issuecomment-458537",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_458538.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-09-11T04:57:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32146#issuecomment-458538",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_458539.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-02-03T18:41:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32146#issuecomment-458539",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_458540.json:
```json
{
    "body": "Rebased",
    "created_at": "2022-02-03T18:41:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32146",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32146#issuecomment-458540",
    "user": "https://github.com/mkoeppe"
}
```

Rebased
