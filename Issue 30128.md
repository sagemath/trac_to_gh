# Issue 30128: Disable LTO in matplotlib build

Issue created by migration from https://trac.sagemath.org/ticket/30365

Original creator: mkoeppe

Original creation time: 2020-08-15 01:02:57

CC:  mjo arojas dimpase jhpalmieri fbissey

matplotlib's `setup.py` by default adds an `-flto` flag to `CFLAGS`. This can cause errors in the linking stage if we mix two compiler versions, as observed in #27754.

We disable it.




---

Comment by mkoeppe created at 2020-08-15 01:04:06

New commits:


---

Comment by mkoeppe created at 2020-08-15 01:04:06

Changing status from new to needs_review.


---

Comment by fbissey created at 2020-08-15 01:05:53

This is really straightforward and easy.


---

Comment by mkoeppe created at 2020-08-15 01:10:09

I have tested it successfully on `debian-bullseye` (with #27754, which exposed this problem).


---

Comment by fbissey created at 2020-08-15 01:53:47

Changing status from needs_review to positive_review.


---

Comment by fbissey created at 2020-08-15 01:53:47

Let's ship it then.


---

Comment by mkoeppe created at 2020-08-15 04:21:22

Thanks!


---

Comment by vbraun created at 2020-08-16 22:33:17

Resolution: fixed
