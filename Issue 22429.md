# Issue 22429: Fix python3 build on Cygwin

Issue created by migration from Trac.

Original creator: embray

Original creation time: 2017-03-21 14:39:15

Since #22354, Python 3 is now installed unconditionally as a standard package.  That's fine, but the last Python 3 version known to work on Cygwin is Python 3.4 (though I have been working with Python upstream to fix that).

In the meantime, here is a patch set needed to get the Python 3 currently in Sage (3.5.1) to at least build, and nominally work.


---

Comment by embray created at 2017-03-21 14:39:25

Changing status from new to needs_review.


---

Comment by gouezel created at 2017-03-22 21:29:21

I can confirm that Python 3 builds for me with the patch (and does not without).


---

Comment by embray created at 2017-03-23 11:02:40

There may still be runtime issues that impact Sage, but I will address those as they come.  This at least addresses building without error.


---

Comment by jdemeyer created at 2017-03-28 10:16:18

What's the upstream status of these patches? I always like when patches have some kind of pointer to an upstream ticket or commit or whatever...

For this reason, I consider the renaming `ncurses-issue_14438.patch` -> `2.6.5-ncurses-abi6.patch` a regression.


---

Comment by embray created at 2017-03-28 14:55:50

It's just for consistency's sake with the rest of my patch set, who cares what the file is called?  I can put in a reference to the issue it addresses.


---

Comment by jdemeyer created at 2017-03-28 15:02:13

Replying to [comment:5 embray]:
> I can put in a reference to the issue it addresses.

Please do (to be clear: renaming the file is fine in that case).


---

Comment by embray created at 2017-03-28 15:14:07

Yeah, no a problem.  I'm pretty sure all of these patches are upstream already, but there might be one or two that aren't for various reasons.  Need to double-check.


---

Comment by tscrim created at 2017-04-19 19:48:11

Did you double-check the patch status Erik? I'm ready to set a positive review unless Jeoren has any other comments (Python3 builds for me with this on Cygwin64).


---

Comment by embray created at 2017-04-20 09:56:52

No, I'll work on that now...


---

Comment by git created at 2017-04-20 13:51:44

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by embray created at 2017-04-20 13:54:34

I removed a handful of patches that didn't actually seem to be needed, and added better descriptions for the rest.  With this, Python 3 still builds, and at least nominally works.  I should stress that that is the only goal of this ticket.  Any other patches needed to Python 3 specifically for Sage features to work (if there are any at all) should be held off until those specific issues come up.


---

Comment by tscrim created at 2017-04-20 14:11:27

Jeroen, do you have any more comments? Otherwise, I will set a positive review.


---

Comment by jdemeyer created at 2017-04-20 15:18:26

[comment:6]


---

Comment by jdemeyer created at 2017-04-20 15:18:26

Changing status from needs_review to needs_work.


---

Comment by embray created at 2017-04-21 12:23:02

Changing priority from major to blocker.


---

Comment by git created at 2017-04-21 14:30:56

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by embray created at 2017-04-21 14:32:15

Changing status from needs_work to positive_review.


---

Comment by embray created at 2017-04-21 14:32:15

Feel free to disagree, but this addresses Jeroen's only comment.


---

Comment by jdemeyer created at 2017-04-21 15:24:42

Thanks!


---

Comment by vbraun created at 2017-04-23 12:58:00

Resolution: fixed
