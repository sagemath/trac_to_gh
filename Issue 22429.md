# Issue 22429: Fix python3 build on Cygwin

archive/issues_022429.json:
```json
{
    "body": "Since #22354, Python 3 is now installed unconditionally as a standard package.  That's fine, but the last Python 3 version known to work on Cygwin is Python 3.4 (though I have been working with Python upstream to fix that).\n\nIn the meantime, here is a patch set needed to get the Python 3 currently in Sage (3.5.1) to at least build, and nominally work.\n\nIssue created by migration from https://trac.sagemath.org/ticket/22666\n\n",
    "created_at": "2017-03-21T14:39:15Z",
    "labels": [
        "porting: Cygwin",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "Fix python3 build on Cygwin",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22429",
    "user": "embray"
}
```
Since #22354, Python 3 is now installed unconditionally as a standard package.  That's fine, but the last Python 3 version known to work on Cygwin is Python 3.4 (though I have been working with Python upstream to fix that).

In the meantime, here is a patch set needed to get the Python 3 currently in Sage (3.5.1) to at least build, and nominally work.

Issue created by migration from https://trac.sagemath.org/ticket/22666





---

archive/issue_comments_312440.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-03-21T14:39:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22429#issuecomment-312440",
    "user": "embray"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_312441.json:
```json
{
    "body": "I can confirm that Python 3 builds for me with the patch (and does not without).",
    "created_at": "2017-03-22T21:29:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22429#issuecomment-312441",
    "user": "gouezel"
}
```

I can confirm that Python 3 builds for me with the patch (and does not without).



---

archive/issue_comments_312442.json:
```json
{
    "body": "There may still be runtime issues that impact Sage, but I will address those as they come.  This at least addresses building without error.",
    "created_at": "2017-03-23T11:02:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22429#issuecomment-312442",
    "user": "embray"
}
```

There may still be runtime issues that impact Sage, but I will address those as they come.  This at least addresses building without error.



---

archive/issue_comments_312443.json:
```json
{
    "body": "What's the upstream status of these patches? I always like when patches have some kind of pointer to an upstream ticket or commit or whatever...\n\nFor this reason, I consider the renaming `ncurses-issue_14438.patch` -> `2.6.5-ncurses-abi6.patch` a regression.",
    "created_at": "2017-03-28T10:16:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22429#issuecomment-312443",
    "user": "jdemeyer"
}
```

What's the upstream status of these patches? I always like when patches have some kind of pointer to an upstream ticket or commit or whatever...

For this reason, I consider the renaming `ncurses-issue_14438.patch` -> `2.6.5-ncurses-abi6.patch` a regression.



---

archive/issue_comments_312444.json:
```json
{
    "body": "It's just for consistency's sake with the rest of my patch set, who cares what the file is called?  I can put in a reference to the issue it addresses.",
    "created_at": "2017-03-28T14:55:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22429#issuecomment-312444",
    "user": "embray"
}
```

It's just for consistency's sake with the rest of my patch set, who cares what the file is called?  I can put in a reference to the issue it addresses.



---

archive/issue_comments_312445.json:
```json
{
    "body": "Replying to [comment:5 embray]:\n> I can put in a reference to the issue it addresses.\n\nPlease do (to be clear: renaming the file is fine in that case).",
    "created_at": "2017-03-28T15:02:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22429#issuecomment-312445",
    "user": "jdemeyer"
}
```

Replying to [comment:5 embray]:
> I can put in a reference to the issue it addresses.

Please do (to be clear: renaming the file is fine in that case).



---

archive/issue_comments_312446.json:
```json
{
    "body": "Yeah, no a problem.  I'm pretty sure all of these patches are upstream already, but there might be one or two that aren't for various reasons.  Need to double-check.",
    "created_at": "2017-03-28T15:14:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22429#issuecomment-312446",
    "user": "embray"
}
```

Yeah, no a problem.  I'm pretty sure all of these patches are upstream already, but there might be one or two that aren't for various reasons.  Need to double-check.



---

archive/issue_comments_312447.json:
```json
{
    "body": "Did you double-check the patch status Erik? I'm ready to set a positive review unless Jeoren has any other comments (Python3 builds for me with this on Cygwin64).",
    "created_at": "2017-04-19T19:48:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22429#issuecomment-312447",
    "user": "tscrim"
}
```

Did you double-check the patch status Erik? I'm ready to set a positive review unless Jeoren has any other comments (Python3 builds for me with this on Cygwin64).



---

archive/issue_comments_312448.json:
```json
{
    "body": "No, I'll work on that now...",
    "created_at": "2017-04-20T09:56:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22429#issuecomment-312448",
    "user": "embray"
}
```

No, I'll work on that now...



---

archive/issue_comments_312449.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-04-20T13:51:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22429#issuecomment-312449",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_312450.json:
```json
{
    "body": "I removed a handful of patches that didn't actually seem to be needed, and added better descriptions for the rest.  With this, Python 3 still builds, and at least nominally works.  I should stress that that is the only goal of this ticket.  Any other patches needed to Python 3 specifically for Sage features to work (if there are any at all) should be held off until those specific issues come up.",
    "created_at": "2017-04-20T13:54:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22429#issuecomment-312450",
    "user": "embray"
}
```

I removed a handful of patches that didn't actually seem to be needed, and added better descriptions for the rest.  With this, Python 3 still builds, and at least nominally works.  I should stress that that is the only goal of this ticket.  Any other patches needed to Python 3 specifically for Sage features to work (if there are any at all) should be held off until those specific issues come up.



---

archive/issue_comments_312451.json:
```json
{
    "body": "Jeroen, do you have any more comments? Otherwise, I will set a positive review.",
    "created_at": "2017-04-20T14:11:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22429#issuecomment-312451",
    "user": "tscrim"
}
```

Jeroen, do you have any more comments? Otherwise, I will set a positive review.



---

archive/issue_comments_312452.json:
```json
{
    "body": "[comment:6]",
    "created_at": "2017-04-20T15:18:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22429#issuecomment-312452",
    "user": "jdemeyer"
}
```

[comment:6]



---

archive/issue_comments_312453.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-04-20T15:18:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22429#issuecomment-312453",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_312454.json:
```json
{
    "body": "Changing priority from major to blocker.",
    "created_at": "2017-04-21T12:23:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22429#issuecomment-312454",
    "user": "embray"
}
```

Changing priority from major to blocker.



---

archive/issue_comments_312455.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-04-21T14:30:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22429#issuecomment-312455",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_312456.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2017-04-21T14:32:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22429#issuecomment-312456",
    "user": "embray"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_312457.json:
```json
{
    "body": "Feel free to disagree, but this addresses Jeroen's only comment.",
    "created_at": "2017-04-21T14:32:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22429#issuecomment-312457",
    "user": "embray"
}
```

Feel free to disagree, but this addresses Jeroen's only comment.



---

archive/issue_comments_312458.json:
```json
{
    "body": "Thanks!",
    "created_at": "2017-04-21T15:24:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22429#issuecomment-312458",
    "user": "jdemeyer"
}
```

Thanks!



---

archive/issue_comments_312459.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-04-23T12:58:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22429#issuecomment-312459",
    "user": "vbraun"
}
```

Resolution: fixed
