# Issue 19388: Lift a fasters digraph for highest weight crystals from alcove path

archive/issues_019388.json:
```json
{
    "body": "Assignee: sage-combinat\n\nCC:  sage-combinat bsalisbury1 aschilling alubovsky\n\nKeywords: crystals, digraph\n\nFor highest weight crystals, we can use a graded recursive set approach to construct the digraph. We move `digraph_fast` from `CrystalOfAlcovePaths` up to the highest weight crystals and deprecate `digraph_fast`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/19625\n\n",
    "created_at": "2015-11-26T04:20:01Z",
    "labels": [
        "combinatorics",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.6",
    "title": "Lift a fasters digraph for highest weight crystals from alcove path",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19388",
    "user": "tscrim"
}
```
Assignee: sage-combinat

CC:  sage-combinat bsalisbury1 aschilling alubovsky

Keywords: crystals, digraph

For highest weight crystals, we can use a graded recursive set approach to construct the digraph. We move `digraph_fast` from `CrystalOfAlcovePaths` up to the highest weight crystals and deprecate `digraph_fast`.

Issue created by migration from https://trac.sagemath.org/ticket/19625





---

archive/issue_comments_266531.json:
```json
{
    "body": "This results in at least a 2x speedup:\n\n```\nsage: B = crystals.infinity.RiggedConfigurations(['A',2])\nsage: general_digraph = Crystals().parent_class.digraph\nsage: %timeit B.digraph(depth=6)\n100 loops, best of 3: 6.2 ms per loop\nsage: S = list(B.subcrystal(max_depth=6))\nsage: %timeit general_digraph(B, subset=S)\n100 loops, best of 3: 15.8 ms per loop\n```\n\n\nThere is a mild issue of do we want a default for `depth` for infinite crystals. If we don't, this would be a change of behavior for `digraph_fast`. I don't have too strong of an opinion, but I lean towards raising a `ValueError` if it is not a finite crystal and both `depth` and `subset` are not specified.\n----\nNew commits:",
    "created_at": "2015-11-26T04:26:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19388#issuecomment-266531",
    "user": "tscrim"
}
```

This results in at least a 2x speedup:

```
sage: B = crystals.infinity.RiggedConfigurations(['A',2])
sage: general_digraph = Crystals().parent_class.digraph
sage: %timeit B.digraph(depth=6)
100 loops, best of 3: 6.2 ms per loop
sage: S = list(B.subcrystal(max_depth=6))
sage: %timeit general_digraph(B, subset=S)
100 loops, best of 3: 15.8 ms per loop
```


There is a mild issue of do we want a default for `depth` for infinite crystals. If we don't, this would be a change of behavior for `digraph_fast`. I don't have too strong of an opinion, but I lean towards raising a `ValueError` if it is not a finite crystal and both `depth` and `subset` are not specified.
----
New commits:



---

archive/issue_comments_266532.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-11-26T04:26:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19388#issuecomment-266532",
    "user": "tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_266533.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-01-05T20:31:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19388#issuecomment-266533",
    "user": "chapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_266534.json:
```json
{
    "body": "does not apply",
    "created_at": "2017-01-05T20:31:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19388#issuecomment-266534",
    "user": "chapoton"
}
```

does not apply



---

archive/issue_comments_266535.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-08T05:20:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19388#issuecomment-266535",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_266536.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-08T05:26:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19388#issuecomment-266536",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_266537.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-01-08T05:27:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19388#issuecomment-266537",
    "user": "tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_266538.json:
```json
{
    "body": "Considering what we do for other infinite crystals (#21986), I decided we should raise a `ValueError` when the crystal is not known to be finite.",
    "created_at": "2017-01-08T05:27:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19388#issuecomment-266538",
    "user": "tscrim"
}
```

Considering what we do for other infinite crystals (#21986), I decided we should raise a `ValueError` when the crystal is not known to be finite.



---

archive/issue_comments_266539.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-11T03:31:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19388#issuecomment-266539",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_266540.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-12T00:48:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19388#issuecomment-266540",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_266541.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-26T14:30:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19388#issuecomment-266541",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_266542.json:
```json
{
    "body": "I made one last little change to make the error type and their messages consistent. If my change is good with you, then you can set a positive review.",
    "created_at": "2017-01-26T14:31:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19388#issuecomment-266542",
    "user": "tscrim"
}
```

I made one last little change to make the error type and their messages consistent. If my change is good with you, then you can set a positive review.



---

archive/issue_comments_266543.json:
```json
{
    "body": "Looks good.",
    "created_at": "2017-01-26T18:38:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19388#issuecomment-266543",
    "user": "alubovsky"
}
```

Looks good.



---

archive/issue_comments_266544.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-01-26T18:38:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19388#issuecomment-266544",
    "user": "alubovsky"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_266545.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-01-29T12:04:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19388#issuecomment-266545",
    "user": "vbraun"
}
```

Resolution: fixed
