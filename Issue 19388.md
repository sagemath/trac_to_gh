# Issue 19388: Lift a fasters digraph for highest weight crystals from alcove path

Issue created by migration from https://trac.sagemath.org/ticket/19625

Original creator: tscrim

Original creation time: 2015-11-26 04:20:01

Assignee: sage-combinat

CC:  sage-combinat bsalisbury1 aschilling alubovsky

Keywords: crystals, digraph

For highest weight crystals, we can use a graded recursive set approach to construct the digraph. We move `digraph_fast` from `CrystalOfAlcovePaths` up to the highest weight crystals and deprecate `digraph_fast`.


---

Comment by tscrim created at 2015-11-26 04:26:32

This results in at least a 2x speedup:

```
sage: B = crystals.infinity.RiggedConfigurations(['A',2])
sage: general_digraph = Crystals().parent_class.digraph
sage: %timeit B.digraph(depth=6)
100 loops, best of 3: 6.2 ms per loop
sage: S = list(B.subcrystal(max_depth=6))
sage: %timeit general_digraph(B, subset=S)
100 loops, best of 3: 15.8 ms per loop
```


There is a mild issue of do we want a default for `depth` for infinite crystals. If we don't, this would be a change of behavior for `digraph_fast`. I don't have too strong of an opinion, but I lean towards raising a `ValueError` if it is not a finite crystal and both `depth` and `subset` are not specified.
----
New commits:


---

Comment by tscrim created at 2015-11-26 04:26:32

Changing status from new to needs_review.


---

Comment by chapoton created at 2017-01-05 20:31:29

Changing status from needs_review to needs_work.


---

Comment by chapoton created at 2017-01-05 20:31:29

does not apply


---

Comment by git created at 2017-01-08 05:20:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-01-08 05:26:22

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2017-01-08 05:27:53

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2017-01-08 05:27:53

Considering what we do for other infinite crystals (#21986), I decided we should raise a `ValueError` when the crystal is not known to be finite.


---

Comment by git created at 2017-01-11 03:31:39

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-01-12 00:48:06

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-01-26 14:30:24

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2017-01-26 14:31:07

I made one last little change to make the error type and their messages consistent. If my change is good with you, then you can set a positive review.


---

Comment by alubovsky created at 2017-01-26 18:38:14

Looks good.


---

Comment by alubovsky created at 2017-01-26 18:38:14

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-01-29 12:04:48

Resolution: fixed
