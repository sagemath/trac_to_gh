# Issue 29224: sage --gdb not working

Issue created by migration from https://trac.sagemath.org/ticket/29461

Original creator: @Volker-Weissmann

Original creation time: 2020-04-03 21:20:12

CC:  dimpase

Hello,
I build sage and ran sage -i gdb with SAGE_DEBUG=yes .
But when I execute ./sage --gdb test.py, I get:


```
$ ./sage --gdb test.py
/home/volker/Sync/git/sage/local/share/gdb/python/gdb/__init__.py:23: DeprecationWarning: the imp module is deprecated in favour of importlib; see the module's documentation for alternative uses
  from imp import reload
GNU gdb (GDB) 8.2
Copyright (C) 2018 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
Type "show copying" and "show warranty" for details.
This GDB was configured as "x86_64-pc-linux-gnu".
Type "show configuration" for configuration details.
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>.
Find the GDB manual and other documentation resources online at:
    <http://www.gnu.org/software/gdb/documentation/>.

For help, type "help".
Type "apropos word" to search for commands related to "word"...
"/home/volker/.pyenv/shims/python": not in executable format: file format not recognized
Traceback (most recent call last):
  File "<string>", line 11, in <module>
  File "/home/volker/.pyenv/versions/3.8.1-debug/lib/python3.8/site-packages/Cython/Debugger/libcython.py", line 60, in <module>
    from Cython.Debugger import libpython
  File "/home/volker/.pyenv/versions/3.8.1-debug/lib/python3.8/site-packages/Cython/Debugger/libpython.py", line 1945, in <module>
    import tempfile
  File "/home/volker/.pyenv/versions/3.8.1-debug/lib/python3.8/tempfile.py", line 45, in <module>
    from random import Random as _Random
  File "/home/volker/.pyenv/versions/3.8.1-debug/lib/python3.8/random.py", line 41, in <module>
    from math import log as _log, exp as _exp, pi as _pi, e as _e, ceil as _ceil
ImportError: /home/volker/.pyenv/versions/3.8.1-debug/lib/python3.8/lib-dynload/math.cpython-38d-x86_64-linux-gnu.so: undefined symbol: PyFloat_Type
/tmp/tmppfahgne0:19: Error in sourced command file:
Error while executing Python code.
/home/volker/Sync/git/sage/src/bin/sage-gdb-commands:1: Error in sourced command file:
No executable file specified.
Use the "file" or "exec-file" command.
(gdb)
```



---

Comment by @Volker-Weissmann created at 2020-04-03 21:20:58

Changing type from PLEASE CHANGE to defect.


---

Comment by @Volker-Weissmann created at 2020-04-03 21:20:58

Changing keywords from "" to "cygdb debugger".


---

Comment by @Volker-Weissmann created at 2020-04-03 21:20:58

Changing component from PLEASE CHANGE to scripts.


---

Comment by mkoeppe created at 2020-04-04 15:41:13

Looks like breakage from using pyenv. See #29285.


---

Comment by @Volker-Weissmann created at 2020-04-05 12:53:12

I removed pyenv and now this error no longer occures. I wrote to [sage-devel] a message called "Trouble building sage --gdb" where the new error message is shown.
You can close this issue now.


---

Comment by mkoeppe created at 2020-05-05 18:58:32

Changing status from new to needs_review.


---

Comment by dimpase created at 2020-05-05 19:59:19

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2020-06-04 07:32:23

Resolution: invalid
