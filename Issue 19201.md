# Issue 19201: generators given by as_permutation_group in the wrong order

Issue created by migration from Trac.

Original creator: pguillot

Original creation time: 2015-10-20 09:41:41

CC:  chapoton ncohen dimpase

Keywords: permutation groups


```
sage: MS=MatrixSpace(QQ,2)
sage: A=MS([0,1,1,0])
sage: B=MS.identity_matrix()
sage: G = MatrixGroup([A,B])
sage: G
Matrix group over Rational Field with 2 generators (
[0 1]  [1 0]
[1 0], [0 1]
)
sage: P = G.as_permutation_group()
sage: P
Permutation Group with generators [(), (2,3)]
```


One can see that the generators of the permutation group do not correspond to those of the matrix group. They should be given in the very same order.

This is a one-line change.


---

Comment by pguillot created at 2015-12-07 10:53:16

New commits:


---

Comment by pguillot created at 2015-12-07 10:53:16

Changing status from new to needs_review.


---

Comment by dimpase created at 2015-12-07 11:06:20

the whole thing looks a but dodgy, as permutation groups are handled by GAP's `Group()`, which is not guaranteed to create a group with exactly the same generators. Let me see...


---

Comment by dimpase created at 2015-12-07 12:42:34

Changing status from needs_review to positive_review.


---

Comment by dimpase created at 2015-12-07 12:42:34

LGTM


---

Comment by chapoton created at 2015-12-07 13:26:15

there should be a blank line after TESTS::


---

Comment by chapoton created at 2015-12-07 13:26:15

Changing status from positive_review to needs_work.


---

Comment by git created at 2015-12-07 13:33:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dimpase created at 2015-12-07 14:45:14

Could you trim the whitespaces on the empty lines you added? (we don't need any spaces there).


---

Comment by git created at 2015-12-07 15:15:56

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2015-12-07 16:39:12

Changing status from needs_work to positive_review.


---

Comment by chapoton created at 2015-12-07 16:39:12

ok, good to go.

Bravo, voila ton premier ticket !


---

Comment by nbruin created at 2015-12-07 17:06:47

Changing status from positive_review to needs_info.


---

Comment by nbruin created at 2015-12-07 17:06:47

Should it return the same generators literally? The basic routine doesn't do that:

```
sage: PermutationGroup([[2,3,1],[3,1,2],[2,1,3],[3,2,1],[1,3,2],[2,3,1]])
Permutation Group with generators [(2,3), (1,2), (1,2,3), (1,3,2), (1,3)]
```

It doesn't matter so much how the permutation group is represented, as long as the isomorphism to the permutation group is given. You should probably check if the cost of "canonicalize=false" is acceptable.


---

Comment by pguillot created at 2015-12-07 17:24:04

> {{{
> sage: PermutationGroup([[2,3,1],[3,1,2],[2,1,3],[3,2,1],[1,3,2],[2,3,1]])
> Permutation Group with generators [(2,3), (1,2), (1,2,3), (1,3,2), (1,3)]
> }}}

Precisely, here canonicalize=True is assumed. Adding canonicalize= False forces it to return the same generators, literally, yes.

I had assumed that canonicalize= False actually _reduced_ the time needed for the computation, since it simply does a little less. This is confirmed by

(a) looking at the code for the class PermutationGroup_generic, which has



```
if canonicalize:
            gens = sorted(set(gens))
```


and as far as I can tell, this is the one and only place where the flag is used.

(b) When using GAP directly, if you try



```
G:= Group([(1,2,3), (1,3,2), (1,2), (1,3), (2,3), (1,2,3)]);
GeneratorsOfGroup(G);
```


then you get


```
[ (1,2,3), (1,3,2), (1,2), (1,3), (2,3), (1,2,3) ]
```


that is, they are kept in the same order _by default._

> It doesn't matter so much how the permutation group is represented, as long as the isomorphism to the permutation group is given. 

It would be best to just return the isomorphism itself (that is what GAP does), yes. I'm not sure that Sage has anything on group homomorphisms, though.


---

Comment by nbruin created at 2015-12-08 04:51:56

OK, thanks.

The basic infrastructure for homomorphisms and isomorphisms is there, so it should be fairly straightforward to interface with the gap computations. That's for another ticket, though.


---

Comment by nbruin created at 2015-12-08 04:51:56

Changing status from needs_info to positive_review.


---

Comment by vbraun created at 2015-12-09 17:54:50

Resolution: fixed
