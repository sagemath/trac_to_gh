# Issue 19201: generators given by as_permutation_group in the wrong order

archive/issues_019201.json:
```json
{
    "body": "CC:  @fchapoton @nathanncohen @dimpase\n\nKeywords: permutation groups\n\n\n```\nsage: MS=MatrixSpace(QQ,2)\nsage: A=MS([0,1,1,0])\nsage: B=MS.identity_matrix()\nsage: G = MatrixGroup([A,B])\nsage: G\nMatrix group over Rational Field with 2 generators (\n[0 1]  [1 0]\n[1 0], [0 1]\n)\nsage: P = G.as_permutation_group()\nsage: P\nPermutation Group with generators [(), (2,3)]\n```\n\n\nOne can see that the generators of the permutation group do not correspond to those of the matrix group. They should be given in the very same order.\n\nThis is a one-line change.\n\nIssue created by migration from https://trac.sagemath.org/ticket/19438\n\n",
    "created_at": "2015-10-20T09:41:41Z",
    "labels": [
        "component: group theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.10",
    "title": "generators given by as_permutation_group in the wrong order",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19201",
    "user": "https://trac.sagemath.org/admin/accounts/users/pguillot"
}
```
CC:  @fchapoton @nathanncohen @dimpase

Keywords: permutation groups


```
sage: MS=MatrixSpace(QQ,2)
sage: A=MS([0,1,1,0])
sage: B=MS.identity_matrix()
sage: G = MatrixGroup([A,B])
sage: G
Matrix group over Rational Field with 2 generators (
[0 1]  [1 0]
[1 0], [0 1]
)
sage: P = G.as_permutation_group()
sage: P
Permutation Group with generators [(), (2,3)]
```


One can see that the generators of the permutation group do not correspond to those of the matrix group. They should be given in the very same order.

This is a one-line change.

Issue created by migration from https://trac.sagemath.org/ticket/19438





---

archive/issue_comments_263113.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-12-07T10:53:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19201",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19201#issuecomment-263113",
    "user": "https://trac.sagemath.org/admin/accounts/users/pguillot"
}
```

New commits:



---

archive/issue_comments_263114.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-12-07T10:53:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19201",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19201#issuecomment-263114",
    "user": "https://trac.sagemath.org/admin/accounts/users/pguillot"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_263115.json:
```json
{
    "body": "the whole thing looks a but dodgy, as permutation groups are handled by GAP's `Group()`, which is not guaranteed to create a group with exactly the same generators. Let me see...",
    "created_at": "2015-12-07T11:06:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19201",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19201#issuecomment-263115",
    "user": "https://github.com/dimpase"
}
```

the whole thing looks a but dodgy, as permutation groups are handled by GAP's `Group()`, which is not guaranteed to create a group with exactly the same generators. Let me see...



---

archive/issue_comments_263116.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-12-07T12:42:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19201",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19201#issuecomment-263116",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_263117.json:
```json
{
    "body": "LGTM",
    "created_at": "2015-12-07T12:42:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19201",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19201#issuecomment-263117",
    "user": "https://github.com/dimpase"
}
```

LGTM



---

archive/issue_comments_263118.json:
```json
{
    "body": "there should be a blank line after TESTS::",
    "created_at": "2015-12-07T13:26:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19201",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19201#issuecomment-263118",
    "user": "https://github.com/fchapoton"
}
```

there should be a blank line after TESTS::



---

archive/issue_comments_263119.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-12-07T13:26:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19201",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19201#issuecomment-263119",
    "user": "https://github.com/fchapoton"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_263120.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-12-07T13:33:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19201",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19201#issuecomment-263120",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_263121.json:
```json
{
    "body": "Could you trim the whitespaces on the empty lines you added? (we don't need any spaces there).",
    "created_at": "2015-12-07T14:45:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19201",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19201#issuecomment-263121",
    "user": "https://github.com/dimpase"
}
```

Could you trim the whitespaces on the empty lines you added? (we don't need any spaces there).



---

archive/issue_comments_263122.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-12-07T15:15:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19201",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19201#issuecomment-263122",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_263123.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2015-12-07T16:39:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19201",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19201#issuecomment-263123",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_263124.json:
```json
{
    "body": "ok, good to go.\n\nBravo, voila ton premier ticket !",
    "created_at": "2015-12-07T16:39:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19201",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19201#issuecomment-263124",
    "user": "https://github.com/fchapoton"
}
```

ok, good to go.

Bravo, voila ton premier ticket !



---

archive/issue_comments_263125.json:
```json
{
    "body": "Changing status from positive_review to needs_info.",
    "created_at": "2015-12-07T17:06:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19201",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19201#issuecomment-263125",
    "user": "https://github.com/nbruin"
}
```

Changing status from positive_review to needs_info.



---

archive/issue_comments_263126.json:
```json
{
    "body": "Should it return the same generators literally? The basic routine doesn't do that:\n\n```\nsage: PermutationGroup([[2,3,1],[3,1,2],[2,1,3],[3,2,1],[1,3,2],[2,3,1]])\nPermutation Group with generators [(2,3), (1,2), (1,2,3), (1,3,2), (1,3)]\n```\n\nIt doesn't matter so much how the permutation group is represented, as long as the isomorphism to the permutation group is given. You should probably check if the cost of \"canonicalize=false\" is acceptable.",
    "created_at": "2015-12-07T17:06:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19201",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19201#issuecomment-263126",
    "user": "https://github.com/nbruin"
}
```

Should it return the same generators literally? The basic routine doesn't do that:

```
sage: PermutationGroup([[2,3,1],[3,1,2],[2,1,3],[3,2,1],[1,3,2],[2,3,1]])
Permutation Group with generators [(2,3), (1,2), (1,2,3), (1,3,2), (1,3)]
```

It doesn't matter so much how the permutation group is represented, as long as the isomorphism to the permutation group is given. You should probably check if the cost of "canonicalize=false" is acceptable.



---

archive/issue_comments_263127.json:
```json
{
    "body": "> {{{\n> sage: PermutationGroup([[2,3,1],[3,1,2],[2,1,3],[3,2,1],[1,3,2],[2,3,1]])\n> Permutation Group with generators [(2,3), (1,2), (1,2,3), (1,3,2), (1,3)]\n> }}}\n\nPrecisely, here canonicalize=True is assumed. Adding canonicalize= False forces it to return the same generators, literally, yes.\n\nI had assumed that canonicalize= False actually *reduced* the time needed for the computation, since it simply does a little less. This is confirmed by\n\n(a) looking at the code for the class PermutationGroup_generic, which has\n\n\n\n```\nif canonicalize:\n            gens = sorted(set(gens))\n```\n\n\nand as far as I can tell, this is the one and only place where the flag is used.\n\n(b) When using GAP directly, if you try\n\n\n\n```\nG:= Group([(1,2,3), (1,3,2), (1,2), (1,3), (2,3), (1,2,3)]);\nGeneratorsOfGroup(G);\n```\n\n\nthen you get\n\n\n```\n[ (1,2,3), (1,3,2), (1,2), (1,3), (2,3), (1,2,3) ]\n```\n\n\nthat is, they are kept in the same order *by default.*\n\n> It doesn't matter so much how the permutation group is represented, as long as the isomorphism to the permutation group is given. \n\nIt would be best to just return the isomorphism itself (that is what GAP does), yes. I'm not sure that Sage has anything on group homomorphisms, though.",
    "created_at": "2015-12-07T17:24:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19201",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19201#issuecomment-263127",
    "user": "https://trac.sagemath.org/admin/accounts/users/pguillot"
}
```

> {{{
> sage: PermutationGroup([[2,3,1],[3,1,2],[2,1,3],[3,2,1],[1,3,2],[2,3,1]])
> Permutation Group with generators [(2,3), (1,2), (1,2,3), (1,3,2), (1,3)]
> }}}

Precisely, here canonicalize=True is assumed. Adding canonicalize= False forces it to return the same generators, literally, yes.

I had assumed that canonicalize= False actually *reduced* the time needed for the computation, since it simply does a little less. This is confirmed by

(a) looking at the code for the class PermutationGroup_generic, which has



```
if canonicalize:
            gens = sorted(set(gens))
```


and as far as I can tell, this is the one and only place where the flag is used.

(b) When using GAP directly, if you try



```
G:= Group([(1,2,3), (1,3,2), (1,2), (1,3), (2,3), (1,2,3)]);
GeneratorsOfGroup(G);
```


then you get


```
[ (1,2,3), (1,3,2), (1,2), (1,3), (2,3), (1,2,3) ]
```


that is, they are kept in the same order *by default.*

> It doesn't matter so much how the permutation group is represented, as long as the isomorphism to the permutation group is given. 

It would be best to just return the isomorphism itself (that is what GAP does), yes. I'm not sure that Sage has anything on group homomorphisms, though.



---

archive/issue_comments_263128.json:
```json
{
    "body": "OK, thanks.\n\nThe basic infrastructure for homomorphisms and isomorphisms is there, so it should be fairly straightforward to interface with the gap computations. That's for another ticket, though.",
    "created_at": "2015-12-08T04:51:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19201",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19201#issuecomment-263128",
    "user": "https://github.com/nbruin"
}
```

OK, thanks.

The basic infrastructure for homomorphisms and isomorphisms is there, so it should be fairly straightforward to interface with the gap computations. That's for another ticket, though.



---

archive/issue_comments_263129.json:
```json
{
    "body": "Changing status from needs_info to positive_review.",
    "created_at": "2015-12-08T04:51:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19201",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19201#issuecomment-263129",
    "user": "https://github.com/nbruin"
}
```

Changing status from needs_info to positive_review.



---

archive/issue_events_018309.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-12-09T17:54:50Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19201",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19201#event-18309"
}
```



---

archive/issue_comments_263130.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-12-09T17:54:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19201",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19201#issuecomment-263130",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
