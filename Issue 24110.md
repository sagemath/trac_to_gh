# Issue 24110: make Coxeter matrix groups know when they are commutative

Issue created by migration from Trac.

Original creator: chapoton

Original creation time: 2017-12-08 16:53:56

CC:  tscrim stumpc5

by refining their category


---

Comment by chapoton created at 2017-12-08 16:54:27

Changing status from new to needs_review.


---

Comment by chapoton created at 2017-12-08 16:54:27

New commits:


---

Comment by chapoton created at 2017-12-08 16:56:11

By the way, there is a very suspect

```
        n = coxeter_matrix.rank()
```

a few lines above..


---

Comment by chapoton created at 2017-12-08 17:56:17

Changing keywords from "" to "coxeter".


---

Comment by tscrim created at 2017-12-09 13:21:47

Coxeter matrices have a custom rank method to make them agree with the notation of rank as a Coxeter type. So that rank is not a problem.

Could you also add a test for A<sub>1</sub> x A<sub>1</sub> x A<sub>1</sub> and A<sub>1</sub> x A<sub>2</sub>? Once done, positive review on my behalf.

----

I seem to have come across an unrelated interesting bug:

```
sage: W = CoxeterGroup(['A',2,1])
sage: W._matrix._matrix.rref()  # This is wrong
[1 0 0]
[0 1 0]
[0 0 1]
sage: W._matrix._matrix.echelon_form()
Exception RuntimeError: 'maximum recursion depth exceeded while calling a Python object' in <type 'exceptions.RuntimeError'> ignored
^CERROR:root:Internal Python error in the inspect module.
Below is the traceback from this internal error.
  File "/home/travis/sage-build/local/lib/python2.7/site-packages/IPython/core/ultratb.py", line 1132, in get_records
    return _fixed_getinnerframes(etb, number_of_lines_of_context, tb_offset)
  File "/home/travis/sage-build/local/lib/python2.7/site-packages/IPython/core/ultratb.py", line 313, in wrapped
    return f(*args, **kwargs)
  File "/home/travis/sage-build/local/lib/python2.7/site-packages/IPython/core/ultratb.py", line 358, in _fixed_getinnerframes
    records = fix_frame_records_filenames(inspect.getinnerframes(etb, context))
  File "/home/travis/sage-build/local/lib/python2.7/inspect.py", line 1053, in getinnerframes
    framelist.append((tb.tb_frame,) + getframeinfo(tb, context))
  File "/home/travis/sage-build/local/lib/python2.7/inspect.py", line 1013, in getframeinfo
    filename = getsourcefile(frame) or getfile(frame)
  File "/home/travis/sage-build/local/lib/python2.7/inspect.py", line 453, in getsourcefile
    if hasattr(getmodule(object, filename), '__loader__'):
  File "/home/travis/sage-build/local/lib/python2.7/inspect.py", line 490, in getmodule
    if ismodule(module) and hasattr(module, '__file__'):
  File "/home/travis/sage-build/local/lib/python2.7/inspect.py", line 51, in ismodule
    def ismodule(object):
  File "src/cysignals/signals.pyx", line 251, in cysignals.signals.python_check_interrupt
  File "src/cysignals/signals.pyx", line 94, in cysignals.signals.sig_raise_exception
KeyboardInterrupt
---------------------------------------------------------------------------
IndexError                                Traceback (most recent call last)
[traceback junk only from traceback output]
```

Might be related to how we are constructing the Coxeter matrix and some `int` vs `Integer` (but all entries by the `.list()` were `Integer`).


---

Comment by git created at 2017-12-09 19:46:10

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2017-12-09 19:47:27

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2017-12-09 19:47:27

thanks, Travis


---

Comment by vbraun created at 2017-12-13 17:37:15

Resolution: fixed
