# Issue 27905: Girth of directed graphs

archive/issues_027905.json:
```json
{
    "body": "CC:  @dcoudert\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/28142\n\n",
    "created_at": "2019-07-09T12:32:08Z",
    "labels": [
        "PLEASE CHANGE",
        "major"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.9",
    "title": "Girth of directed graphs",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27905",
    "user": "@jaanos"
}
```
CC:  @dcoudert



Issue created by migration from https://trac.sagemath.org/ticket/28142





---

archive/issue_comments_394027.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2019-07-09T12:52:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27905#issuecomment-394027",
    "user": "@jaanos"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_394028.json:
```json
{
    "body": "New commits:",
    "created_at": "2019-07-09T12:52:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27905#issuecomment-394028",
    "user": "@jaanos"
}
```

New commits:



---

archive/issue_comments_394029.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to graph theory.",
    "created_at": "2019-07-09T12:52:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27905#issuecomment-394029",
    "user": "@jaanos"
}
```

Changing component from PLEASE CHANGE to graph theory.



---

archive/issue_comments_394030.json:
```json
{
    "body": "I will add the doctests in the next commit. Should I also add a `_girth_bfs` method in `generic_graphs.py` (which would raise `NotImplementedError`)?",
    "created_at": "2019-07-09T12:54:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27905#issuecomment-394030",
    "user": "@jaanos"
}
```

I will add the doctests in the next commit. Should I also add a `_girth_bfs` method in `generic_graphs.py` (which would raise `NotImplementedError`)?



---

archive/issue_comments_394031.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2019-07-09T12:54:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27905#issuecomment-394031",
    "user": "@jaanos"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_394032.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-10T09:03:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27905#issuecomment-394032",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_394033.json:
```json
{
    "body": "Some quick comments:\n\n- references must be put in file `src/doc/en/reference/references/index.rst`. Then you can cite them in the documentation of the methods using `[Har62]_` and `[Biggs93]_`.\n\n- in input blocks, the correct format is:\n\n```diff\n-        - ``odd`` -- whether to compute the odd girth (default: ``False``).\n+        - ``odd`` -- boolean (default: ``False``); whether to compute the odd girth\n```\n\n\n- in `generic_graph.py`, why not extending method `girth` by adding it parameter `odd` and then call the appropriate method for graph or digraph or bipartite graph or ... \n\n- Is it possible to add parameter `certificate` in these methods to return the cycle, if any ?",
    "created_at": "2019-07-10T09:10:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27905#issuecomment-394033",
    "user": "@dcoudert"
}
```

Some quick comments:

- references must be put in file `src/doc/en/reference/references/index.rst`. Then you can cite them in the documentation of the methods using `[Har62]_` and `[Biggs93]_`.

- in input blocks, the correct format is:

```diff
-        - ``odd`` -- whether to compute the odd girth (default: ``False``).
+        - ``odd`` -- boolean (default: ``False``); whether to compute the odd girth
```


- in `generic_graph.py`, why not extending method `girth` by adding it parameter `odd` and then call the appropriate method for graph or digraph or bipartite graph or ... 

- Is it possible to add parameter `certificate` in these methods to return the cycle, if any ?



---

archive/issue_comments_394034.json:
```json
{
    "body": "Thanks for the feedback! Will fix the references and input.\n\nRegarding the parameter: I was thinking about that, actually. I forgot about `BipartiteGraph` - I guess the way to go would be to have the algorithm for undirected graphs in `generic_graph.py`, so it would also work for bipartite graphs.\n\nRegarding the certificate, a cycle would only show that the (odd) girth is at most its length. Would that be OK?",
    "created_at": "2019-07-10T10:17:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27905#issuecomment-394034",
    "user": "@jaanos"
}
```

Thanks for the feedback! Will fix the references and input.

Regarding the parameter: I was thinking about that, actually. I forgot about `BipartiteGraph` - I guess the way to go would be to have the algorithm for undirected graphs in `generic_graph.py`, so it would also work for bipartite graphs.

Regarding the certificate, a cycle would only show that the (odd) girth is at most its length. Would that be OK?



---

archive/issue_comments_394035.json:
```json
{
    "body": "> Regarding the parameter: I was thinking about that, actually. I forgot about `BipartiteGraph` - I guess the way to go would be to have the algorithm for undirected graphs in `generic_graph.py`, so it would also work for bipartite graphs.\n\nThat would be nice.\nIn case, we also have a specific class for bipartite graphs in `bipartitie_graph.py`\n \n> Regarding the certificate, a cycle would only show that the (odd) girth is at most its length. Would that be OK?\n\nIf the method only returns an upper bound, then yes, as long as it is clearly documented. Otherwise, you can simply add a todo block letting this task for future work.",
    "created_at": "2019-07-10T10:58:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27905#issuecomment-394035",
    "user": "@dcoudert"
}
```

> Regarding the parameter: I was thinking about that, actually. I forgot about `BipartiteGraph` - I guess the way to go would be to have the algorithm for undirected graphs in `generic_graph.py`, so it would also work for bipartite graphs.

That would be nice.
In case, we also have a specific class for bipartite graphs in `bipartitie_graph.py`
 
> Regarding the certificate, a cycle would only show that the (odd) girth is at most its length. Would that be OK?

If the method only returns an upper bound, then yes, as long as it is clearly documented. Otherwise, you can simply add a todo block letting this task for future work.



---

archive/issue_comments_394036.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-10T15:45:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27905#issuecomment-394036",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_394037.json:
```json
{
    "body": "OK, I've moved the main algorithm to `generic_graph.py`, fixed the references, and added certificates. I'm not sure any more that having a parameter `odd` on the `girth` method would be good - it is there for `_girth_bfs` since the method is used for both, but as concepts (and therefore public methods) I think it's best to keep them separate.",
    "created_at": "2019-07-10T15:49:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27905#issuecomment-394037",
    "user": "@jaanos"
}
```

OK, I've moved the main algorithm to `generic_graph.py`, fixed the references, and added certificates. I'm not sure any more that having a parameter `odd` on the `girth` method would be good - it is there for `_girth_bfs` since the method is used for both, but as concepts (and therefore public methods) I think it's best to keep them separate.



---

archive/issue_comments_394038.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2019-07-10T15:49:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27905#issuecomment-394038",
    "user": "@jaanos"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_394039.json:
```json
{
    "body": "Changing keywords from \"\" to \"fpsac2019\".",
    "created_at": "2019-07-11T08:48:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27905#issuecomment-394039",
    "user": "@jaanos"
}
```

Changing keywords from "" to "fpsac2019".



---

archive/issue_comments_394040.json:
```json
{
    "body": "I took the liberty to edit your code and push it in a new branch (in `public/` so that you can modify it as well).\n\nI did various small corrections and added several doctests (for instance for small cases).\n\nPlease check that every think is fine and that the documentation builds properly and displays nicely.\n----\nNew commits:",
    "created_at": "2019-07-14T19:03:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27905#issuecomment-394040",
    "user": "@dcoudert"
}
```

I took the liberty to edit your code and push it in a new branch (in `public/` so that you can modify it as well).

I did various small corrections and added several doctests (for instance for small cases).

Please check that every think is fine and that the documentation builds properly and displays nicely.
----
New commits:



---

archive/issue_comments_394041.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-15T09:56:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27905#issuecomment-394041",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_394042.json:
```json
{
    "body": "Thanks, everything looks fine to me! I have just changed two words in the `Graph` method index.",
    "created_at": "2019-07-15T09:58:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27905#issuecomment-394042",
    "user": "@jaanos"
}
```

Thanks, everything looks fine to me! I have just changed two words in the `Graph` method index.



---

archive/issue_comments_394043.json:
```json
{
    "body": "There is a failing doctest reported by the patchbot\n\n```\nsage -t --long src/sage/categories/category.py\n**********************************************************************\nFile \"src/sage/categories/category.py\", line 806, in sage.categories.category.Category.is_abelian.category_graph\nFailed example:\n    G.girth()\nExpected:\n    4\nGot:\n    +Infinity\n```\n",
    "created_at": "2019-07-15T12:49:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27905#issuecomment-394043",
    "user": "@dcoudert"
}
```

There is a failing doctest reported by the patchbot

```
sage -t --long src/sage/categories/category.py
**********************************************************************
File "src/sage/categories/category.py", line 806, in sage.categories.category.Category.is_abelian.category_graph
Failed example:
    G.girth()
Expected:
    4
Got:
    +Infinity
```




---

archive/issue_comments_394044.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-07-15T12:49:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27905#issuecomment-394044",
    "user": "@dcoudert"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_394045.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-15T13:21:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27905#issuecomment-394045",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_394046.json:
```json
{
    "body": "The doctest generated a directed acyclic graph, so its girth is now correctly reported as infinite. I have changed the doctest to compute the girth of its underlying undirected graph.",
    "created_at": "2019-07-15T13:24:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27905#issuecomment-394046",
    "user": "@jaanos"
}
```

The doctest generated a directed acyclic graph, so its girth is now correctly reported as infinite. I have changed the doctest to compute the girth of its underlying undirected graph.



---

archive/issue_comments_394047.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-07-15T13:24:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27905#issuecomment-394047",
    "user": "@jaanos"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_394048.json:
```json
{
    "body": "You should add a comment explaining that the girth of a DAG is infinite, and that the girth of the underlying undirected graph is 4 in this case.",
    "created_at": "2019-07-15T13:35:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27905#issuecomment-394048",
    "user": "@dcoudert"
}
```

You should add a comment explaining that the girth of a DAG is infinite, and that the girth of the underlying undirected graph is 4 in this case.



---

archive/issue_comments_394049.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-16T11:00:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27905#issuecomment-394049",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_394050.json:
```json
{
    "body": "OK, done. I have also fixed the indenting of the `category_graph` method.",
    "created_at": "2019-07-16T11:01:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27905#issuecomment-394050",
    "user": "@jaanos"
}
```

OK, done. I have also fixed the indenting of the `category_graph` method.



---

archive/issue_comments_394051.json:
```json
{
    "body": "LGTM. Thanks.",
    "created_at": "2019-07-16T14:16:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27905#issuecomment-394051",
    "user": "@dcoudert"
}
```

LGTM. Thanks.



---

archive/issue_comments_394052.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-07-16T14:16:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27905#issuecomment-394052",
    "user": "@dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_394053.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-07-20T09:10:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27905#issuecomment-394053",
    "user": "@vbraun"
}
```

Resolution: fixed
