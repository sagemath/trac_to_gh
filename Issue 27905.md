# Issue 27905: Girth of directed graphs

Issue created by migration from https://trac.sagemath.org/ticket/28142

Original creator: jaanos

Original creation time: 2019-07-09 12:32:08

CC:  dcoudert




---

Comment by jaanos created at 2019-07-09 12:52:07

Changing type from PLEASE CHANGE to enhancement.


---

Comment by jaanos created at 2019-07-09 12:52:07

New commits:


---

Comment by jaanos created at 2019-07-09 12:52:07

Changing component from PLEASE CHANGE to graph theory.


---

Comment by jaanos created at 2019-07-09 12:54:07

I will add the doctests in the next commit. Should I also add a `_girth_bfs` method in `generic_graphs.py` (which would raise `NotImplementedError`)?


---

Comment by jaanos created at 2019-07-09 12:54:07

Changing status from new to needs_info.


---

Comment by git created at 2019-07-10 09:03:18

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2019-07-10 09:10:47

Some quick comments:

- references must be put in file `src/doc/en/reference/references/index.rst`. Then you can cite them in the documentation of the methods using `[Har62]_` and `[Biggs93]_`.

- in input blocks, the correct format is:

```diff
-        - ``odd`` -- whether to compute the odd girth (default: ``False``).
+        - ``odd`` -- boolean (default: ``False``); whether to compute the odd girth
```


- in `generic_graph.py`, why not extending method `girth` by adding it parameter `odd` and then call the appropriate method for graph or digraph or bipartite graph or ... 

- Is it possible to add parameter `certificate` in these methods to return the cycle, if any ?


---

Comment by jaanos created at 2019-07-10 10:17:21

Thanks for the feedback! Will fix the references and input.

Regarding the parameter: I was thinking about that, actually. I forgot about `BipartiteGraph` - I guess the way to go would be to have the algorithm for undirected graphs in `generic_graph.py`, so it would also work for bipartite graphs.

Regarding the certificate, a cycle would only show that the (odd) girth is at most its length. Would that be OK?


---

Comment by dcoudert created at 2019-07-10 10:58:17

> Regarding the parameter: I was thinking about that, actually. I forgot about `BipartiteGraph` - I guess the way to go would be to have the algorithm for undirected graphs in `generic_graph.py`, so it would also work for bipartite graphs.

That would be nice.
In case, we also have a specific class for bipartite graphs in `bipartitie_graph.py`
 
> Regarding the certificate, a cycle would only show that the (odd) girth is at most its length. Would that be OK?

If the method only returns an upper bound, then yes, as long as it is clearly documented. Otherwise, you can simply add a todo block letting this task for future work.


---

Comment by git created at 2019-07-10 15:45:32

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jaanos created at 2019-07-10 15:49:59

OK, I've moved the main algorithm to `generic_graph.py`, fixed the references, and added certificates. I'm not sure any more that having a parameter `odd` on the `girth` method would be good - it is there for `_girth_bfs` since the method is used for both, but as concepts (and therefore public methods) I think it's best to keep them separate.


---

Comment by jaanos created at 2019-07-10 15:49:59

Changing status from needs_info to needs_review.


---

Comment by jaanos created at 2019-07-11 08:48:56

Changing keywords from "" to "fpsac2019".


---

Comment by dcoudert created at 2019-07-14 19:03:18

I took the liberty to edit your code and push it in a new branch (in `public/` so that you can modify it as well).

I did various small corrections and added several doctests (for instance for small cases).

Please check that every think is fine and that the documentation builds properly and displays nicely.
----
New commits:


---

Comment by git created at 2019-07-15 09:56:27

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jaanos created at 2019-07-15 09:58:42

Thanks, everything looks fine to me! I have just changed two words in the `Graph` method index.


---

Comment by dcoudert created at 2019-07-15 12:49:55

There is a failing doctest reported by the patchbot

```
sage -t --long src/sage/categories/category.py
**********************************************************************
File "src/sage/categories/category.py", line 806, in sage.categories.category.Category.is_abelian.category_graph
Failed example:
    G.girth()
Expected:
    4
Got:
    +Infinity
```



---

Comment by dcoudert created at 2019-07-15 12:49:55

Changing status from needs_review to needs_work.


---

Comment by git created at 2019-07-15 13:21:40

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jaanos created at 2019-07-15 13:24:39

The doctest generated a directed acyclic graph, so its girth is now correctly reported as infinite. I have changed the doctest to compute the girth of its underlying undirected graph.


---

Comment by jaanos created at 2019-07-15 13:24:39

Changing status from needs_work to needs_review.


---

Comment by dcoudert created at 2019-07-15 13:35:40

You should add a comment explaining that the girth of a DAG is infinite, and that the girth of the underlying undirected graph is 4 in this case.


---

Comment by git created at 2019-07-16 11:00:21

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jaanos created at 2019-07-16 11:01:11

OK, done. I have also fixed the indenting of the `category_graph` method.


---

Comment by dcoudert created at 2019-07-16 14:16:17

LGTM. Thanks.


---

Comment by dcoudert created at 2019-07-16 14:16:17

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2019-07-20 09:10:50

Resolution: fixed
