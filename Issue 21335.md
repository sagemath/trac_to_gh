# Issue 21335: Simplify qhull spkg patch and use SAGE_LOCAL instead of SAGE_ROOT/local

Issue created by migration from https://trac.sagemath.org/ticket/21572

Original creator: mkoeppe

Original creation time: 2016-09-23 00:45:29

CC:  vdelecroix jdemeyer dimpase

This is for #21534.

The ticket also changes "make -j1" to "$(MAKE)". 
The "-j1" should be unnecessary. The `Makefile.patch` purports to fix the dependency problems of the original Makefile.


---

Comment by mkoeppe created at 2016-09-23 01:04:55

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2016-09-23 01:04:55

New commits:


---

Comment by jdemeyer created at 2016-09-25 07:25:25

Fixed commit message of last commit
----
New commits:


---

Comment by jdemeyer created at 2016-09-25 07:27:25

I do get failures with a parallel build:

```
============================================
## make qtest
============================================
## Otherwise if user_eg fails to link, switch to -lqhullstatic_r
bin/qconvex
## Sun Sep 25 09:26:10 CEST 2016

============================================
QH6075 == Test non-reentrant qset.c with mem.c ====
qhull input error: short input file.  Did not find dimension and number of points

While executing:  | qconvex
Options selected for Qhull 2015.2 2016/01/18:
  run-id 511880916
Makefile:323: recipe for target 'qconvex-prompt' failed
make: *** [qconvex-prompt] Error 1
make: *** Waiting for unfinished jobs....
```



---

Comment by git created at 2016-09-25 07:27:30

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2016-09-25 07:28:10

Put back the `-j1` option. Please check and then set this to positive_review if you agree.


---

Comment by mkoeppe created at 2016-09-25 15:45:44

Thanks for testing this thoroughly.


---

Comment by mkoeppe created at 2016-09-25 15:45:44

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-10-05 06:52:49

Resolution: fixed
