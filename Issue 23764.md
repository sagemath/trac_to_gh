# Issue 23764: Some "optional - dot2tex" doctests do not depend on dot2tex

Issue created by migration from https://trac.sagemath.org/ticket/24001

Original creator: jdemeyer

Original creation time: 2017-10-09 18:42:26

A few doctests are marked `# optional - dot2tex` but they pass even when dot2tex is not installed.


---

Comment by jdemeyer created at 2017-10-09 19:26:17

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2017-10-09 19:26:17

New commits:


---

Comment by tscrim created at 2017-10-10 15:49:51

These tests passes because of changes in the digraph code (at least, I don't remember `view(Digraph([This is the Trac macro *1,2* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1,2-macro)))` working before 6.0) more by accident than intent:

```diff
diff --git a/src/sage/categories/crystals.py b/src/sage/categories/crystals.py
index eb6c2f8..897582e 100644
--- a/src/sage/categories/crystals.py
+++ b/src/sage/categories/crystals.py
@@ -945,14 +945,14 @@ class Crystals(Category_singleton):
             EXAMPLES::
 
                 sage: T = crystals.Tableaux(['A',2],shape=[1])
-                sage: T._latex_()  # optional - dot2tex graphviz
+                sage: T._latex_()
                 '...tikzpicture...'
                 sage: view(T) # optional - dot2tex graphviz, not tested (opens external window)
 
             One can for example also color the edges using the following options::
 
                 sage: T = crystals.Tableaux(['A',2],shape=[1])
-                sage: T._latex_(color_by_label = {0:"black", 1:"red", 2:"blue"})   #optional - dot2tex graphviz
+                sage: T._latex_(color_by_label={0:"black", 1:"red", 2:"blue"})
                 '...tikzpicture...'
             """
             G = self.digraph()
```

However, it should work both with and without `dot2tex`, so I think it is okay to not change it.

All of the other changes look good (some of those are part of my first contribution to Sage `:)`) that may not have necessarily passed prior.


---

Comment by tscrim created at 2017-10-10 15:49:51

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-10-22 16:37:19

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2017-10-22 16:37:19


```
File "src/sage/categories/crystals.py", line 918, in sage.categories.crystals.Crystals.ParentMethods.latex_file
Failed example:
    C.latex_file('/tmp/test.tex')
Expected nothing
Got:
    <BLANKLINE>
    Warning: `tikz.sty` is not part of this computer's TeX installation.
    This package is required to render graphs in LaTeX.
    Visit '...'.
    <BLANKLINE>
    <BLANKLINE>
    Warning: `tkz-graph.sty` is not part of this computer's TeX installation.
    This package is required to render graphs in LaTeX.
    Visit 'http://altermundus.com/pages/tkz/'.
    <BLANKLINE>
    <BLANKLINE>
    Warning: `tkz-berge.sty` is not part of this computer's TeX installation.
    This package is required to render graphs in LaTeX.
    Visit 'http://altermundus.com/pages/tkz/'.
    <BLANKLINE>
**********************************************************************
1 item had failures:
   1 of   3 in sage.categories.crystals.Crystals.ParentMethods.latex_file
    [488 tests, 1 failure, 0.95 s]
----------------------------------------------------------------------
```



---

Comment by chapoton created at 2018-02-26 11:05:53

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2018-02-26 11:05:53

New commits:


---

Comment by tscrim created at 2018-02-26 11:46:22

I'm not completely sure that failure is due to `dot2tex`, but if the bots come back green, then positive review.


---

Comment by chapoton created at 2018-02-26 15:25:43

Hmm. We rather a need a way to silent these warnings, maybe. Because there are some more..


---

Comment by chapoton created at 2018-02-26 15:25:43

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2018-02-26 15:48:20

Replying to [comment:8 tscrim]:
> I'm not completely sure that failure is due to `dot2tex`

Obviously, failures related to missing latex packages are _not_ related to `dot2tex`.


---

Comment by jdemeyer created at 2018-02-26 15:51:13

Travis, I'll revert your last commit.


---

Comment by git created at 2018-02-26 15:53:29

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2018-02-26 15:53:51

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2018-02-26 19:22:43

one failing doctest, see bot


---

Comment by chapoton created at 2018-02-26 19:22:43

Changing status from needs_review to needs_work.


---

Comment by git created at 2018-02-27 09:14:21

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2018-02-27 09:14:43

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2018-02-27 12:10:59

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2018-02-27 12:10:59

ok


---

Comment by vbraun created at 2018-03-06 23:23:54

Resolution: fixed
