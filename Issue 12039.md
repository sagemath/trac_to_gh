# Issue 12039: bug in equation checking for quasi projective/affine schemes

Issue created by migration from Trac.

Original creator: davideklund

Original creation time: 2011-12-21 12:47:37

Assignee: AlexGhitza

The method `_check_satisfies_equations` of the class `AlgebraicScheme_quasi` checks whether a point p lies on the complement of a scheme Y in a scheme X.

If one of the equations defining Y vanishes, then p is judged not a point on X-Y, but it could be that some other equation defining Y does not vanish. 

Example:

```
sage: P.<x, y, z, w> = ProjectiveSpace(3, QQ)
sage: S = P.subscheme([x])
sage: T = P.subscheme([y, z])
sage: U = T.complement(S)
sage: U._check_satisfies_equations([0,0,1,1])
...
TypeError: Coordinates [0, 0, 1, 1] do not define a point on Quasi-projective subscheme X - Y of Projective Space of dimension 3 over Rational Field, where X is defined by:
  x
and Y is defined by:
  y,
  z
```



---

Comment by davideklund created at 2011-12-21 13:16:06

Fixes the bug.


---

Attachment


---

Comment by vbraun created at 2011-12-21 13:39:57

Can you add your example to the doctest?


---

Comment by davideklund created at 2011-12-22 06:28:15

Changing status from new to needs_review.


---

Comment by davideklund created at 2011-12-22 12:05:41

Fix bug, contains doctest (patch made with Sage 4.7.2).


---

Attachment

Looks good!


---

Comment by vbraun created at 2011-12-22 13:19:48

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2011-12-24 01:05:24

Resolution: fixed
