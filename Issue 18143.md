# Issue 18143: New class for CombinatorialObject +  Element + ClasscallMetaclass

archive/issues_018143.json:
```json
{
    "body": "CC:  @nthiery\n\nThe combination\n\n```\nclass Foo(CombinatorialObject, Element):\n    __metaclass__ = ClasscallMetaclass\n```\n\n\noccurs often enough in `combinat` that it makes sense to define a new class for this.\n\nIssue created by migration from https://trac.sagemath.org/ticket/18380\n\n",
    "created_at": "2015-05-08T08:53:18Z",
    "labels": [
        "combinatorics",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.7",
    "title": "New class for CombinatorialObject +  Element + ClasscallMetaclass",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18143",
    "user": "@jdemeyer"
}
```
CC:  @nthiery

The combination

```
class Foo(CombinatorialObject, Element):
    __metaclass__ = ClasscallMetaclass
```


occurs often enough in `combinat` that it makes sense to define a new class for this.

Issue created by migration from https://trac.sagemath.org/ticket/18380





---

archive/issue_comments_244661.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-05-08T10:57:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18143#issuecomment-244661",
    "user": "@jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_244662.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-05-08T10:57:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18143#issuecomment-244662",
    "user": "@jdemeyer"
}
```

New commits:



---

archive/issue_comments_244663.json:
```json
{
    "body": "Hey Jeroen,\n\nThank you for your work on this. The current long-term goal is to do a similar replacement with (the cythonized) `ClonableArray`, although I'm not quite sure how much more work it would be to switch from `CombinatorialElement`, but maybe we can try that here. Additionally with your recent work with allowing extension classes to support metaclasses, perhaps we can put the `classcall_metaclass` directly into there? Or keep with the inbetween c/python class. Thoughts (and from Nicolas in cc)?",
    "created_at": "2015-05-08T15:28:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18143#issuecomment-244663",
    "user": "@tscrim"
}
```

Hey Jeroen,

Thank you for your work on this. The current long-term goal is to do a similar replacement with (the cythonized) `ClonableArray`, although I'm not quite sure how much more work it would be to switch from `CombinatorialElement`, but maybe we can try that here. Additionally with your recent work with allowing extension classes to support metaclasses, perhaps we can put the `classcall_metaclass` directly into there? Or keep with the inbetween c/python class. Thoughts (and from Nicolas in cc)?



---

archive/issue_comments_244664.json:
```json
{
    "body": "Replying to [comment:3 tscrim]:\n> Hey Jeroen,\n> \n> Thank you for your work on this. The current long-term goal is to do a similar replacement with (the cythonized) `ClonableArray`, although I'm not quite sure how much more work it would be to switch from `CombinatorialElement`, but maybe we can try that here.\nWell, my main reason for this ticket here is to simplify #18329, so I would prefer to merge this ticket quickly and postpone the switch to `ClonableArray` to a different ticket.\n\n> Additionally with your recent work with allowing extension classes to support metaclasses, perhaps we can put the `classcall_metaclass` directly into there?\nWell, `ClasscallMetaclass` doesn't quite work yet from Cython. The Cython metaclass mechanism from #18330 is still a bit of a hack and in particular it will not work when the metaclass has attributes.",
    "created_at": "2015-05-08T15:35:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18143#issuecomment-244664",
    "user": "@jdemeyer"
}
```

Replying to [comment:3 tscrim]:
> Hey Jeroen,
> 
> Thank you for your work on this. The current long-term goal is to do a similar replacement with (the cythonized) `ClonableArray`, although I'm not quite sure how much more work it would be to switch from `CombinatorialElement`, but maybe we can try that here.
Well, my main reason for this ticket here is to simplify #18329, so I would prefer to merge this ticket quickly and postpone the switch to `ClonableArray` to a different ticket.

> Additionally with your recent work with allowing extension classes to support metaclasses, perhaps we can put the `classcall_metaclass` directly into there?
Well, `ClasscallMetaclass` doesn't quite work yet from Cython. The Cython metaclass mechanism from #18330 is still a bit of a hack and in particular it will not work when the metaclass has attributes.



---

archive/issue_comments_244665.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-05-09T23:17:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18143#issuecomment-244665",
    "user": "@tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_244666.json:
```json
{
    "body": "I tried to make the change and, while it seems easy enough, it will take a little bit of work. So then this will make it easier to move in that direction; positive review.",
    "created_at": "2015-05-09T23:17:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18143#issuecomment-244666",
    "user": "@tscrim"
}
```

I tried to make the change and, while it seems easy enough, it will take a little bit of work. So then this will make it easier to move in that direction; positive review.



---

archive/issue_comments_244667.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-05-13T11:33:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18143#issuecomment-244667",
    "user": "@vbraun"
}
```

Resolution: fixed
