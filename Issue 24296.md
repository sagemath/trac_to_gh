# Issue 24296: Factorization of polynomials over function fields over towers of finite fields

archive/issues_024296.json:
```json
{
    "body": "CC:  swewers\n\nWith #24510 this still fails:\n\n```\nsage: k = GF(4)\nsage: k.<a> = GF(4)\nsage: R.<b> = k[]\nsage: l.<b> = k.extension(b^2 + b + a)\nsage: K.<x> = FunctionField(l)\nsage: R.<t> = K[]\nsage: F = t*x\nsage: F.factor(proof=False)\nTypeError: no conversion of this ring to a Singular ring defined\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/24533\n\n",
    "closed_at": "2018-05-29T20:39:40Z",
    "created_at": "2018-01-12T15:43:22Z",
    "labels": [
        "component: commutative algebra",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "Factorization of polynomials over function fields over towers of finite fields",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24296",
    "user": "https://github.com/saraedum"
}
```
CC:  swewers

With #24510 this still fails:

```
sage: k = GF(4)
sage: k.<a> = GF(4)
sage: R.<b> = k[]
sage: l.<b> = k.extension(b^2 + b + a)
sage: K.<x> = FunctionField(l)
sage: R.<t> = K[]
sage: F = t*x
sage: F.factor(proof=False)
TypeError: no conversion of this ring to a Singular ring defined
```


Issue created by migration from https://trac.sagemath.org/ticket/24533





---

archive/issue_comments_339789.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-01-13T09:12:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24296#issuecomment-339789",
    "user": "https://github.com/saraedum"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_339790.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-01-13T09:14:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24296#issuecomment-339790",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_339791.json:
```json
{
    "body": "Note that I also fix a bug in the old factorization code that would introduce units as actual factors. With the old code xt would factor as `(x) * 1 * t`.",
    "created_at": "2018-01-13T09:15:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24296#issuecomment-339791",
    "user": "https://github.com/saraedum"
}
```

Note that I also fix a bug in the old factorization code that would introduce units as actual factors. With the old code xt would factor as `(x) * 1 * t`.



---

archive/issue_comments_339792.json:
```json
{
    "body": "In\n\n```\nif a.is_unit():\n    unit*=a\n```\nshouldn't it be `unit*=a**e`?  Also, you should have spaces around `*=`.",
    "created_at": "2018-01-16T18:21:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24296#issuecomment-339792",
    "user": "https://github.com/roed314"
}
```

In

```
if a.is_unit():
    unit*=a
```
shouldn't it be `unit*=a**e`?  Also, you should have spaces around `*=`.



---

archive/issue_comments_339793.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-01-16T19:12:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24296#issuecomment-339793",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_339794.json:
```json
{
    "body": "Replying to [comment:11 roed]:\n> In\n> \n> ```\n> if a.is_unit():\n>     unit*=a\n> ```\n> shouldn't it be `unit*=a**e`?  Also, you should have spaces around `*=`.\n\n\nOops, thanks for catching that one.",
    "created_at": "2018-01-16T19:12:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24296#issuecomment-339794",
    "user": "https://github.com/saraedum"
}
```

Replying to [comment:11 roed]:
> In
> 
> ```
> if a.is_unit():
>     unit*=a
> ```
> shouldn't it be `unit*=a**e`?  Also, you should have spaces around `*=`.


Oops, thanks for catching that one.



---

archive/issue_comments_339795.json:
```json
{
    "body": "Two more comments:\n\n* You have\n\n```\nsage: k = GF(4)\nsage: k.<a> = GF(4)\n```\nin two places.  The first `k` is superfluous.\n* You remove an example of factorization over `CC`.  I glanced at that file and didn't see it elsewhere; why remove the test?",
    "created_at": "2018-01-16T20:34:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24296#issuecomment-339795",
    "user": "https://github.com/roed314"
}
```

Two more comments:

* You have

```
sage: k = GF(4)
sage: k.<a> = GF(4)
```
in two places.  The first `k` is superfluous.
* You remove an example of factorization over `CC`.  I glanced at that file and didn't see it elsewhere; why remove the test?



---

archive/issue_comments_339796.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-01-16T20:41:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24296#issuecomment-339796",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_339797.json:
```json
{
    "body": "I fixed the first issue.\n\nAs for the second, the example is not related to that method, so it should certainly not be the first example there. The correct `factor()`/`_factor_univariate_polynomial()` methods already have a few examples about complex factorization and I don't think that this one was added because it is interesting or tracking a bugfix. I could add it to the univariate `factor()` if you think it should not be lost for unittests.\n\n---\nNew commits:",
    "created_at": "2018-01-16T20:46:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24296#issuecomment-339797",
    "user": "https://github.com/saraedum"
}
```

I fixed the first issue.

As for the second, the example is not related to that method, so it should certainly not be the first example there. The correct `factor()`/`_factor_univariate_polynomial()` methods already have a few examples about complex factorization and I don't think that this one was added because it is interesting or tracking a bugfix. I could add it to the univariate `factor()` if you think it should not be lost for unittests.

---
New commits:



---

archive/issue_comments_339798.json:
```json
{
    "body": "Replying to [comment:16 saraedum]:\n> I fixed the first issue.\n> \n> As for the second, the example is not related to that method, so it should certainly not be the first example there. The correct `factor()`/`_factor_univariate_polynomial()` methods already have a few examples about complex factorization and I don't think that this one was added because it is interesting or tracking a bugfix. I could add it to the univariate `factor()` if you think it should not be lost for unittests.\n\n\nI agree that it's a bit weird to be the first example, but it is testing something that's probably not tested in the `_factor_univariate_polynomial()` since the polynomial ring there is multivariate (according to Sage, since it's constructed as `PolynomialRing(CC, 1)`, but of course univariate methods will work because mathematically it's a univariate polynomial.  So I don't think the example should be removed, and in fact I think this is the best place for this test, since it's checking a corner case for the multivariate `factor` method.",
    "created_at": "2018-01-16T20:57:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24296#issuecomment-339798",
    "user": "https://github.com/roed314"
}
```

Replying to [comment:16 saraedum]:
> I fixed the first issue.
> 
> As for the second, the example is not related to that method, so it should certainly not be the first example there. The correct `factor()`/`_factor_univariate_polynomial()` methods already have a few examples about complex factorization and I don't think that this one was added because it is interesting or tracking a bugfix. I could add it to the univariate `factor()` if you think it should not be lost for unittests.


I agree that it's a bit weird to be the first example, but it is testing something that's probably not tested in the `_factor_univariate_polynomial()` since the polynomial ring there is multivariate (according to Sage, since it's constructed as `PolynomialRing(CC, 1)`, but of course univariate methods will work because mathematically it's a univariate polynomial.  So I don't think the example should be removed, and in fact I think this is the best place for this test, since it's checking a corner case for the multivariate `factor` method.



---

archive/issue_comments_339799.json:
```json
{
    "body": "Oh, I did not realize that. I thought that `PolynomialRing(CC, 1)` would actually be backed by the univariate code right away. Thanks for pointing that out.",
    "created_at": "2018-01-16T21:51:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24296#issuecomment-339799",
    "user": "https://github.com/saraedum"
}
```

Oh, I did not realize that. I thought that `PolynomialRing(CC, 1)` would actually be backed by the univariate code right away. Thanks for pointing that out.



---

archive/issue_comments_339800.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-01-16T21:54:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24296#issuecomment-339800",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_339801.json:
```json
{
    "body": "There was an error in your pasting: it cuts off after 1.05.  Also, it should be `is factored` rather than `are factored`.",
    "created_at": "2018-01-16T23:05:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24296#issuecomment-339801",
    "user": "https://github.com/roed314"
}
```

There was an error in your pasting: it cuts off after 1.05.  Also, it should be `is factored` rather than `are factored`.



---

archive/issue_comments_339802.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-01-17T03:11:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24296#issuecomment-339802",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_339803.json:
```json
{
    "body": "Sorry, I'll try to review my own commits better next time\u2026",
    "created_at": "2018-01-17T03:12:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24296#issuecomment-339803",
    "user": "https://github.com/saraedum"
}
```

Sorry, I'll try to review my own commits better next time…



---

archive/issue_comments_339804.json:
```json
{
    "body": "There's one more instance of\n\n```\nsage: k = GF(4)\nsage: k.<a> = GF(4)\n```\nAfter that, positive review once tests pass.",
    "created_at": "2018-01-17T03:30:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24296#issuecomment-339804",
    "user": "https://github.com/roed314"
}
```

There's one more instance of

```
sage: k = GF(4)
sage: k.<a> = GF(4)
```
After that, positive review once tests pass.



---

archive/issue_comments_339805.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-14T12:27:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24296#issuecomment-339805",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_339806.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-24T22:26:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24296#issuecomment-339806",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_339807.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-28T12:02:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24296#issuecomment-339807",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_339808.json:
```json
{
    "body": "doctests pass.",
    "created_at": "2018-05-28T13:27:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24296#issuecomment-339808",
    "user": "https://github.com/saraedum"
}
```

doctests pass.



---

archive/issue_comments_339809.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-05-28T13:27:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24296#issuecomment-339809",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_061870.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-29T20:39:40Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24296",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24296#event-61870"
}
```



---

archive/issue_comments_339810.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-05-29T20:39:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24296#issuecomment-339810",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
