# Issue 33230: sage.geometry: Use PalpExecutable(...).absolute_filename()

Issue created by migration from https://trac.sagemath.org/ticket/33467

Original creator: mkoeppe

Original creation time: 2022-03-05 20:57:21

CC:  dimpase




---

Comment by mkoeppe created at 2022-03-06 03:44:27

Last 10 new commits:


---

Comment by mkoeppe created at 2022-03-06 03:44:27

Changing status from new to needs_review.


---

Comment by dimpase created at 2022-03-06 10:49:01

You need to adjust doctests for latte:

```
File "src/sage/interfaces/latte.py", line 95, in sage.interfaces.latte.count
Failed example:
    n = count(cddin, cdd=True, verbose=True, raw_output=True)  # optional - latte_int
Expected:
    This is LattE integrale ...
    ...
    Invocation: count '--redundancy-check=none' --cdd /dev/stdin
    ...
    Total Unimodular Cones: ...
    Maximum number of simplicial cones in memory at once: ...
    <BLANKLINE>
    ****  The number of lattice points is:   ****
    Total time: ... sec
Got:
    This is LattE integrale 1.7.6
    Available from http://www.math.ucdavis.edu/~latte/
    <BLANKLINE>
    Invocation: /mnt/opt/Sage/sage-dev/local/bin/count '--redundancy-check=none' --cdd /dev/stdin 
    Warning: Not performing check for empty polytope, because it is unimplemented for the CDD-style input format. 
    size = 12 x 4
...
```

etc., as the path is no longer relative...


---

Comment by dimpase created at 2022-03-06 13:44:00

Fix the latter is easy:


```diff
--- a/src/sage/interfaces/latte.py
+++ b/src/sage/interfaces/latte.py
@@ -95,7 +95,7 @@ def count(arg, ehrhart_polynomial=False, multivariate_generating_function=False,
         sage: n = count(cddin, cdd=True, verbose=True, raw_output=True)  # optional - latte_int
         This is LattE integrale ...
         ...
-        Invocation: count '--redundancy-check=none' --cdd /dev/stdin
+        Invocation: ...count '--redundancy-check=none' --cdd /dev/stdin
         ...
         Total Unimodular Cones: ...
         Maximum number of simplicial cones in memory at once: ...
@@ -271,7 +271,7 @@ def integrate(arg, polynomial=None, algorithm='triangulate', raw_output=False, v
         sage: ans = integrate(cddin, f, cdd=True, verbose=True, raw_output=True)  # optional - latte_int
         This is LattE integrale ...
         ...
-        Invocation: integrate --valuation=integrate --triangulate --redundancy-check=none --cdd --monomials=... /dev/stdin
+        Invocation: ...integrate --valuation=integrate --triangulate --redundancy-check=none --cdd --monomials=... /dev/stdin
         ...
 
     Testing triangulate algorithm::
@@ -313,7 +313,7 @@ def integrate(arg, polynomial=None, algorithm='triangulate', raw_output=False, v
         sage: ans = integrate(cddin, cdd=True, raw_output=True, verbose=True)  # optional - latte_int
         This is LattE integrale ...
         ...
-        Invocation: integrate --valuation=volume --triangulate --redundancy-check=none --cdd /dev/stdin
+        Invocation: ...integrate --valuation=volume --triangulate --redundancy-check=none --cdd /dev/stdin
         ...
 
     Testing the runtime error::
```



does this patch belong here?


---

Comment by dimpase created at 2022-03-06 20:09:40

Last 10 new commits:


---

Comment by git created at 2022-03-07 05:31:48

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:


---

Comment by dimpase created at 2022-03-07 05:34:59

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2022-03-07 06:06:49

Thank you!


---

Comment by vbraun created at 2022-03-09 23:37:55

Resolution: fixed
