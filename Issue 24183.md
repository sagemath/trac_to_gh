# Issue 24183: Laurent power series fail unique representation

archive/issues_024183.json:
```json
{
    "body": "\n```\nsage: L.<q> = LaurentSeriesRing(QQ)\nsage: LaurentSeriesRing(QQ, 'q') is L\nFalse\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/24420\n\n",
    "created_at": "2017-12-22T09:27:58Z",
    "labels": [
        "algebra",
        "major",
        "bug"
    ],
    "title": "Laurent power series fail unique representation",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24183",
    "user": "vdelecroix"
}
```

```
sage: L.<q> = LaurentSeriesRing(QQ)
sage: LaurentSeriesRing(QQ, 'q') is L
False
```


Issue created by migration from https://trac.sagemath.org/ticket/24420





---

archive/issue_comments_338783.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-12-26T09:42:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24183",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24183#issuecomment-338783",
    "user": "vdelecroix"
}
```

New commits:



---

archive/issue_comments_338784.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-12-26T09:42:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24183",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24183#issuecomment-338784",
    "user": "vdelecroix"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_338785.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-12-26T22:23:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24183",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24183#issuecomment-338785",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_338786.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-12-28T14:02:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24183",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24183#issuecomment-338786",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_338787.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-01-02T15:45:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24183",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24183#issuecomment-338787",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_338788.json:
```json
{
    "body": "rebased on 8.2.beta2",
    "created_at": "2018-01-02T15:45:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24183",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24183#issuecomment-338788",
    "user": "vdelecroix"
}
```

rebased on 8.2.beta2



---

archive/issue_comments_338789.json:
```json
{
    "body": "Since you are going to do the category imports in the `__init__` (which I'm not 100% in agreement with), I would make it in as small as scope as possible:\n\n```diff\n         from sage.categories.rings import Rings\n         from sage.categories.integral_domains import IntegralDomains\n         from sage.categories.fields import Fields\n-        from sage.categories.complete_discrete_valuation import (\n-                CompleteDiscreteValuationRings, CompleteDiscreteValuationFields)\n \n         base_ring = power_series.base_ring()\n         if base_ring in Fields():\n+            from sage.categories.complete_discrete_valuation import CompleteDiscreteValuationFields\n             category = CompleteDiscreteValuationFields()\n         elif base_ring in IntegralDomains():\n             category = IntegralDomains()\n         elif base_ring in Rings().Commutative():\n             category = Rings().Commutative()\n         else:\n             raise ValueError('unrecognized base ring')\n```\n\nAlso, don't we want to use `names=power_series.variable_names()` in case we (eventually support) have multiple variable names. Otherwise LGTM.",
    "created_at": "2018-01-02T17:16:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24183",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24183#issuecomment-338789",
    "user": "tscrim"
}
```

Since you are going to do the category imports in the `__init__` (which I'm not 100% in agreement with), I would make it in as small as scope as possible:

```diff
         from sage.categories.rings import Rings
         from sage.categories.integral_domains import IntegralDomains
         from sage.categories.fields import Fields
-        from sage.categories.complete_discrete_valuation import (
-                CompleteDiscreteValuationRings, CompleteDiscreteValuationFields)
 
         base_ring = power_series.base_ring()
         if base_ring in Fields():
+            from sage.categories.complete_discrete_valuation import CompleteDiscreteValuationFields
             category = CompleteDiscreteValuationFields()
         elif base_ring in IntegralDomains():
             category = IntegralDomains()
         elif base_ring in Rings().Commutative():
             category = Rings().Commutative()
         else:
             raise ValueError('unrecognized base ring')
```

Also, don't we want to use `names=power_series.variable_names()` in case we (eventually support) have multiple variable names. Otherwise LGTM.



---

archive/issue_comments_338790.json:
```json
{
    "body": "Replying to [comment:9 tscrim]:\n> Since you are going to do the category imports in the `__init__` (which I'm not 100% in agreement with)\n\nWhy? I am happy to move them at the module scope if it is a better practice.",
    "created_at": "2018-01-02T17:31:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24183",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24183#issuecomment-338790",
    "user": "vdelecroix"
}
```

Replying to [comment:9 tscrim]:
> Since you are going to do the category imports in the `__init__` (which I'm not 100% in agreement with)

Why? I am happy to move them at the module scope if it is a better practice.



---

archive/issue_comments_338791.json:
```json
{
    "body": "Replying to [comment:10 vdelecroix]:\n> Replying to [comment:9 tscrim]:\n> > Since you are going to do the category imports in the `__init__` (which I'm not 100% in agreement with)\n> \n> Why? I am happy to move them at the module scope if it is a better practice.\n\nIt slows down the construction of the ring.",
    "created_at": "2018-01-02T17:35:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24183",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24183#issuecomment-338791",
    "user": "tscrim"
}
```

Replying to [comment:10 vdelecroix]:
> Replying to [comment:9 tscrim]:
> > Since you are going to do the category imports in the `__init__` (which I'm not 100% in agreement with)
> 
> Why? I am happy to move them at the module scope if it is a better practice.

It slows down the construction of the ring.



---

archive/issue_comments_338792.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-01-02T17:39:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24183",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24183#issuecomment-338792",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_338793.json:
```json
{
    "body": "done",
    "created_at": "2018-01-02T17:45:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24183",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24183#issuecomment-338793",
    "user": "vdelecroix"
}
```

done



---

archive/issue_comments_338794.json:
```json
{
    "body": "Thanks. One last little thing: you don't use `CompleteDiscreteValuationRings`.",
    "created_at": "2018-01-02T17:50:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24183",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24183#issuecomment-338794",
    "user": "tscrim"
}
```

Thanks. One last little thing: you don't use `CompleteDiscreteValuationRings`.



---

archive/issue_comments_338795.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-01-02T17:56:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24183",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24183#issuecomment-338795",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_338796.json:
```json
{
    "body": "Indeed!",
    "created_at": "2018-01-02T17:56:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24183",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24183#issuecomment-338796",
    "user": "vdelecroix"
}
```

Indeed!



---

archive/issue_comments_338797.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-01-02T18:10:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24183",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24183#issuecomment-338797",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_338798.json:
```json
{
    "body": "Thanks.",
    "created_at": "2018-01-02T18:10:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24183",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24183#issuecomment-338798",
    "user": "tscrim"
}
```

Thanks.



---

archive/issue_comments_338799.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-01-05T23:56:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24183",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24183#issuecomment-338799",
    "user": "vbraun"
}
```

Resolution: fixed
