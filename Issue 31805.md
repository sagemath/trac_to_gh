# Issue 31805: some work on intervals in posets

Issue created by migration from https://trac.sagemath.org/ticket/32042

Original creator: chapoton

Original creation time: 2021-06-23 15:34:06

CC:  tscrim slelievre

trying to disentangle the situation, a little bit

adding more explanations

adding some typing annotations in one file


---

Comment by chapoton created at 2021-06-23 15:37:43

Changing status from new to needs_review.


---

Comment by chapoton created at 2021-06-23 15:37:43

New commits:


---

Comment by chapoton created at 2021-06-24 15:13:54

bot is morally green, please review


---

Comment by tscrim created at 2021-06-25 02:13:45

How does this compare with the timings before? I am not sure if the list comprehension might be faster.

I guess in terms of documentation, it is better to just have one method...


---

Comment by chapoton created at 2021-06-27 08:27:36

I have added some timings in the description. It seems that we may lose something when not storing any information.

The situation is quite complicated. There are two different levels at which stored information can make the computations faster. The first level is just to store in "_leq_storage" lazy attribute all the principal upper ideals as sets. The second level is to store all intervals. Both are somewhat memory-intensive (especially the second one) and could use something like bitset to be more compact.

The call of "_leq_storage" is speeding all posets computations. The pre-computation of intervals is useful in some specific methods, about computing congruences.

I have no ideal solution. Suggestions are welcome.


---

Comment by tscrim created at 2021-06-28 04:25:31

Since there doesn't seem to be too significant of a slowdown, I propose we go with the code that is more concise. Thank you.


---

Comment by tscrim created at 2021-06-28 04:25:31

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2021-07-06 21:29:20

Resolution: fixed
