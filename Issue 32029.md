# Issue 32029: Enforce normalization in coxeter3-implemented Coxeter groups

Issue created by migration from https://trac.sagemath.org/ticket/32266

Original creator: @cemulate

Original creation time: 2021-07-23 07:20:56

Keywords: coxeter3,CoxeterGroup,coxeter

Currently, we have the following unfortunate situation where elements of a coxeter3-implemented Coxeter group that should be the same are not:

```python
sage: A3 = CoxeterGroup('A3', implementation='coxeter3')
sage: s1,s2,s3 = A3.simple_reflections()
sage: s1*s3
[1, 3]
sage: s3*s1
[3, 1]
sage: s3*s1 == s1*s3
False
```


This of course bubbles up all the way to Hecke algebras, whose bases are indexed by these elements, resulting in things like:


```python
sage: A3 = CoxeterGroup('A3', implementation='coxeter3')
sage: R.<v> = LaurentPolynomialRing(ZZ)
sage: H = IwahoriHeckeAlgebra(A3, v**2)
sage: Cp = H.Cp()
sage: Cp[1,3,2] + Cp[3,1,2]
Cp[1,3,2] + Cp[3,1,2]
sage: Cp[1,3,2] == Cp[3,1,2]
False
```


Since elements of a `coxeter3/CoxeterGroup` are represented by their reduced words, normalization is a way to guarantee proper behavior here.

This patch enforces that elements of a `coxeter3/CoxeterGroup` are in normal form upon creation, and alters the results of a few existing tests to reflect this.

In addition, it provides a direct/efficient implementation of `from_reduced_word` for a `coxeter3/CoxeterGroup`; the default implementation (of applying simple reflections in order to the identity) is not needed since we can take the reduced word directly.


---

Comment by @cemulate created at 2021-07-23 07:33:25

Changing status from new to needs_review.


---

Comment by @cemulate created at 2021-07-23 07:33:25

New commits:


---

Comment by tscrim created at 2021-08-13 02:16:41

I made a trivial fix to mark tests as `# optional - coxeter3` and a slightly less trivial addition of including your failing example. If my changes are good, then you can set a positive review.
----
New commits:


---

Comment by @cemulate created at 2021-08-13 07:04:12

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2021-10-19 20:30:49

Resolution: fixed
