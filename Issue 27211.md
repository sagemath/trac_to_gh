# Issue 27211: compute normal vectors of surface faces of polyhedron

archive/issues_027211.json:
```json
{
    "body": "CC:  @jplab @laisrast @kliem\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/27448\n\n",
    "created_at": "2019-03-09T10:40:47Z",
    "labels": [
        "component: geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "compute normal vectors of surface faces of polyhedron",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27211",
    "user": "https://github.com/dkrenn"
}
```
CC:  @jplab @laisrast @kliem



Issue created by migration from https://trac.sagemath.org/ticket/27448





---

archive/issue_comments_382952.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-03-10T18:22:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27211#issuecomment-382952",
    "user": "https://github.com/dkrenn"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_382953.json:
```json
{
    "body": "New commits:",
    "created_at": "2019-03-10T18:22:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27211#issuecomment-382953",
    "user": "https://github.com/dkrenn"
}
```

New commits:



---

archive/issue_comments_382954.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-03-12T11:21:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27211#issuecomment-382954",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_382955.json:
```json
{
    "body": "\n```\n    Invalid Python 3 syntax found:\n    invalid syntax (face.py, line 587)\n```\n",
    "created_at": "2019-03-12T12:41:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27211#issuecomment-382955",
    "user": "https://github.com/fchapoton"
}
```


```
    Invalid Python 3 syntax found:
    invalid syntax (face.py, line 587)
```




---

archive/issue_comments_382956.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-03-12T12:48:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27211#issuecomment-382956",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_382957.json:
```json
{
    "body": "Replying to [comment:4 chapoton]:\n> {{{\n>     Invalid Python 3 syntax found:\n>     invalid syntax (face.py, line 587)\n> }}}\n\nIndeed, missed this one. Thanks, is now corrected.",
    "created_at": "2019-03-12T12:49:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27211#issuecomment-382957",
    "user": "https://github.com/dkrenn"
}
```

Replying to [comment:4 chapoton]:
> {{{
>     Invalid Python 3 syntax found:
>     invalid syntax (face.py, line 587)
> }}}

Indeed, missed this one. Thanks, is now corrected.



---

archive/issue_comments_382958.json:
```json
{
    "body": "please add one example with vertices in AA",
    "created_at": "2019-03-12T18:53:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27211#issuecomment-382958",
    "user": "https://github.com/fchapoton"
}
```

please add one example with vertices in AA



---

archive/issue_comments_382959.json:
```json
{
    "body": "Why is it cached!?",
    "created_at": "2019-03-15T19:49:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27211#issuecomment-382959",
    "user": "https://github.com/videlec"
}
```

Why is it cached!?



---

archive/issue_comments_382960.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2019-03-15T19:51:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27211#issuecomment-382960",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_382961.json:
```json
{
    "body": "What is that intended for?\n\n```\n        if T.base_ring() in (AA, QQbar):\n            def exactify(c):\n                c.exactify()\n                try:\n                    return QQ(c)\n                except (ValueError, TypeError):\n                    return c\n            T = T.apply_map(lambda c: exactify(c))\n```\n\nIf it is of any use, it should be carefully explained in the code.",
    "created_at": "2019-03-15T19:51:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27211#issuecomment-382961",
    "user": "https://github.com/videlec"
}
```

What is that intended for?

```
        if T.base_ring() in (AA, QQbar):
            def exactify(c):
                c.exactify()
                try:
                    return QQ(c)
                except (ValueError, TypeError):
                    return c
            T = T.apply_map(lambda c: exactify(c))
```

If it is of any use, it should be carefully explained in the code.



---

archive/issue_comments_382962.json:
```json
{
    "body": "Isn't it a big waste to compute the matrix `T` each time you ask for a normal vector. Wouldn't it make more sense to compute it once and for all?",
    "created_at": "2019-03-15T19:53:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27211#issuecomment-382962",
    "user": "https://github.com/videlec"
}
```

Isn't it a big waste to compute the matrix `T` each time you ask for a normal vector. Wouldn't it make more sense to compute it once and for all?



---

archive/issue_comments_382963.json:
```json
{
    "body": "Documentation must include examples with unbounded faces. Especially the degenerate case where the polyhedron is a vector space.",
    "created_at": "2019-03-15T19:55:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27211#issuecomment-382963",
    "user": "https://github.com/videlec"
}
```

Documentation must include examples with unbounded faces. Especially the degenerate case where the polyhedron is a vector space.



---

archive/issue_comments_382964.json:
```json
{
    "body": "Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)",
    "created_at": "2019-03-25T10:56:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27211#issuecomment-382964",
    "user": "https://github.com/embray"
}
```

Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)



---

archive/issue_comments_382965.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-03-27T18:48:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27211#issuecomment-382965",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_382966.json:
```json
{
    "body": "Replying to [comment:7 chapoton]:\n> please add one example with vertices in AA\n\nDone in ||[8f23aa9](https://git.sagemath.org/sage.git/commit/?id=8f23aa949086e9cb358a2d50b67ad85f2efb7fdd)||`Trac #27448: doctest for polyhedron with vertices in AA`||",
    "created_at": "2019-03-27T18:50:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27211#issuecomment-382966",
    "user": "https://github.com/dkrenn"
}
```

Replying to [comment:7 chapoton]:
> please add one example with vertices in AA

Done in ||[8f23aa9](https://git.sagemath.org/sage.git/commit/?id=8f23aa949086e9cb358a2d50b67ad85f2efb7fdd)||`Trac #27448: doctest for polyhedron with vertices in AA`||



---

archive/issue_comments_382967.json:
```json
{
    "body": "Replying to [comment:8 vdelecroix]:\n> Why is it cached!?\n\nBecause for my computation (related to #27447) it reduced the computation time by a factor 7 or 8.",
    "created_at": "2019-03-27T18:51:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27211#issuecomment-382967",
    "user": "https://github.com/dkrenn"
}
```

Replying to [comment:8 vdelecroix]:
> Why is it cached!?

Because for my computation (related to #27447) it reduced the computation time by a factor 7 or 8.



---

archive/issue_comments_382968.json:
```json
{
    "body": "Replying to [comment:9 vdelecroix]:\n> What is that intended for?\n> {{{\n>         if T.base_ring() in (AA, QQbar):\n>             def exactify(c):\n>                 c.exactify()\n>                 try:\n>                     return QQ(c)\n>                 except (ValueError, TypeError):\n>                     return c\n>             T = T.apply_map(lambda c: exactify(c))\n> }}}\n> If it is of any use, it should be carefully explained in the code.\n\nCode commented in ||[919bebf](https://git.sagemath.org/sage.git/commit/?id=919bebf3299bf40081f23f72b5fb6a59752f8fee)||`Trac #27448: explain purpose of exactify-code`||",
    "created_at": "2019-03-27T18:51:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27211#issuecomment-382968",
    "user": "https://github.com/dkrenn"
}
```

Replying to [comment:9 vdelecroix]:
> What is that intended for?
> {{{
>         if T.base_ring() in (AA, QQbar):
>             def exactify(c):
>                 c.exactify()
>                 try:
>                     return QQ(c)
>                 except (ValueError, TypeError):
>                     return c
>             T = T.apply_map(lambda c: exactify(c))
> }}}
> If it is of any use, it should be carefully explained in the code.

Code commented in ||[919bebf](https://git.sagemath.org/sage.git/commit/?id=919bebf3299bf40081f23f72b5fb6a59752f8fee)||`Trac #27448: explain purpose of exactify-code`||



---

archive/issue_comments_382969.json:
```json
{
    "body": "Replying to [comment:10 vdelecroix]:\n> Isn't it a big waste to compute the matrix `T` each time you ask for a normal vector. Wouldn't it make more sense to compute it once and for all?\n\nIndeed. Done in ||[4b7a774](https://git.sagemath.org/sage.git/commit/?id=4b7a774740cae38749940b8c1d862d7fd52bca9d)||`Trac #27448: cache matrix`||\nbut also see the other commits (some more changes were done).",
    "created_at": "2019-03-27T18:52:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27211#issuecomment-382969",
    "user": "https://github.com/dkrenn"
}
```

Replying to [comment:10 vdelecroix]:
> Isn't it a big waste to compute the matrix `T` each time you ask for a normal vector. Wouldn't it make more sense to compute it once and for all?

Indeed. Done in ||[4b7a774](https://git.sagemath.org/sage.git/commit/?id=4b7a774740cae38749940b8c1d862d7fd52bca9d)||`Trac #27448: cache matrix`||
but also see the other commits (some more changes were done).



---

archive/issue_comments_382970.json:
```json
{
    "body": "Replying to [comment:11 vdelecroix]:\n> Documentation must include examples with unbounded faces. Especially the degenerate case where the polyhedron is a vector space.\n\nDone in ||[769ba63](https://git.sagemath.org/sage.git/commit/?id=769ba63169b8b618910f68fe3257ba12ad22773d)||`Trac #27448 doctest for unbounded polyhedron`||",
    "created_at": "2019-03-27T18:53:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27211#issuecomment-382970",
    "user": "https://github.com/dkrenn"
}
```

Replying to [comment:11 vdelecroix]:
> Documentation must include examples with unbounded faces. Especially the degenerate case where the polyhedron is a vector space.

Done in ||[769ba63](https://git.sagemath.org/sage.git/commit/?id=769ba63169b8b618910f68fe3257ba12ad22773d)||`Trac #27448 doctest for unbounded polyhedron`||



---

archive/issue_comments_382971.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2019-03-27T18:53:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27211#issuecomment-382971",
    "user": "https://github.com/dkrenn"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_382972.json:
```json
{
    "body": "All comments are incorporated, so please review again.",
    "created_at": "2019-03-27T18:54:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27211#issuecomment-382972",
    "user": "https://github.com/dkrenn"
}
```

All comments are incorporated, so please review again.



---

archive/issue_comments_382973.json:
```json
{
    "body": "I don't understand something. According to the comment `When the polyhedron is rational, ... We correct this below.` the following should not fail\n\n```\nc.exactify()\ntry:\n    return QQ(c)\n```\n",
    "created_at": "2019-04-14T17:03:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27211#issuecomment-382973",
    "user": "https://github.com/videlec"
}
```

I don't understand something. According to the comment `When the polyhedron is rational, ... We correct this below.` the following should not fail

```
c.exactify()
try:
    return QQ(c)
```




---

archive/issue_comments_382974.json:
```json
{
    "body": "There is no example of polyhedra defined over a number field such as `QuadraticField(2)` or `NumberField(x^3 - 2, 'a', embedding=AA(2)^(1/3))`.",
    "created_at": "2019-04-14T17:05:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27211#issuecomment-382974",
    "user": "https://github.com/videlec"
}
```

There is no example of polyhedra defined over a number field such as `QuadraticField(2)` or `NumberField(x^3 - 2, 'a', embedding=AA(2)^(1/3))`.



---

archive/issue_comments_382975.json:
```json
{
    "body": "If the matrix `T` is supposed to belong to the ground field, isn't there a more direct way to compute it wihtout going through `A` that might involve a lot of different square roots?",
    "created_at": "2019-04-14T17:07:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27211#issuecomment-382975",
    "user": "https://github.com/videlec"
}
```

If the matrix `T` is supposed to belong to the ground field, isn't there a more direct way to compute it wihtout going through `A` that might involve a lot of different square roots?



---

archive/issue_comments_382976.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-04-18T20:31:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27211#issuecomment-382976",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_382977.json:
```json
{
    "body": "Tickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).",
    "created_at": "2019-06-14T14:50:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27211#issuecomment-382977",
    "user": "https://github.com/embray"
}
```

Tickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).



---

archive/issue_comments_382978.json:
```json
{
    "body": "Please have a look at the related #17215.\n\nAlso, it seems that in the doctests, the older version of the `repr` for faces is used... This should be updated.",
    "created_at": "2019-10-26T12:03:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27211#issuecomment-382978",
    "user": "https://github.com/jplab"
}
```

Please have a look at the related #17215.

Also, it seems that in the doctests, the older version of the `repr` for faces is used... This should be updated.



---

archive/issue_comments_382979.json:
```json
{
    "body": "Ticket retargeted after milestone closed",
    "created_at": "2019-12-30T14:48:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27211#issuecomment-382979",
    "user": "https://github.com/embray"
}
```

Ticket retargeted after milestone closed



---

archive/issue_comments_382980.json:
```json
{
    "body": "With #17215, one can do:\n\n```\nsage: s = polytopes.simplex(2)\nsage: for facet in s.facets():\n....:     print(\"{} has normal vector {}\".format(facet,facet.normal_cone().rays()[0].vector()))\n....:     \nA 1-dimensional face of a Polyhedron in ZZ^3 defined as the convex hull of 2 vertices has normal vector (1, 1, 0)\nA 1-dimensional face of a Polyhedron in ZZ^3 defined as the convex hull of 2 vertices has normal vector (0, -1, 0)\nA 1-dimensional face of a Polyhedron in ZZ^3 defined as the convex hull of 2 vertices has normal vector (-1, 0, 0)\n```\n\n\n\n```\nsage: P = Polyhedron(vertices=[(0,0), (1,0), (sqrt(AA(2)),2), (1,1)],base_ring=AA)\nsage: for facet in P.facets():\n....:     print(\"{} has normal vector {}\".format(facet,facet.normal_cone().rays()[0].vector()))\n....:     \nA 1-dimensional face of a Polyhedron in AA^2 defined as the convex hull of 2 vertices has normal vector (0, -1/2)\nA 1-dimensional face of a Polyhedron in AA^2 defined as the convex hull of 2 vertices has normal vector (-1, 0.7071067811865475?)\nA 1-dimensional face of a Polyhedron in AA^2 defined as the convex hull of 2 vertices has normal vector (1, -0.2071067811865476?)\n```\n\n\n\n```\nsage: P = Polyhedron(ieqs=[(0, 1, 1, 1, 1)])\nsage: for facet in P.facets():\n....:     print(\"{} has normal vector {}\".format(facet,facet.normal_cone().rays()[0].vector()))\n....:     \nA 3-dimensional face of a Polyhedron in QQ^4 defined as the convex hull of 1 vertex and 3 lines has normal vector (-1, -1, -1, -1)\nsage: for facet in P.facets():\n....:     print(\"{} has normal vector {}\".format(facet,facet.normal_cone('inner').rays()[0].vector()))\n....:     \nA 3-dimensional face of a Polyhedron in QQ^4 defined as the convex hull of 1 vertex and 3 lines has normal vector (1, 1, 1, 1)\n```\n\n\n\n```\nsage: P = Polyhedron(ieqs=[(0, 0, 1), (0, 1, 0), (1, 0, -1)])\nsage: for facet in P.facets():\n....:     print(\"{} has normal vector {}\".format(facet,facet.normal_cone().rays()[0].vector()))\n....:     \nA 1-dimensional face of a Polyhedron in QQ^2 defined as the convex hull of 1 vertex and 1 ray has normal vector (0, -1)\nA 1-dimensional face of a Polyhedron in QQ^2 defined as the convex hull of 2 vertices has normal vector (-1, 0)\nA 1-dimensional face of a Polyhedron in QQ^2 defined as the convex hull of 1 vertex and 1 ray has normal vector (0, 1)\n```\n\n\nI don't know if this fulfills what is intended in this ticket? Does it? If it does, I believe that it would be appropriate to minimize the duplication of code. In particular, it seems that the present function is intended for facets only (smaller dimensional faces also have normal vectors, but not anymore just in 1 direction...) so the name `normal_vector` is a choice which may be nasty for the user.\n\nAs for speed, well, it is true that we create a polyhedron in `normal_cone`, though, the code in #17215 is essentially all obtained through already computed data. I guess this should be benchmarked.",
    "created_at": "2020-02-04T16:45:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27211#issuecomment-382980",
    "user": "https://github.com/jplab"
}
```

With #17215, one can do:

```
sage: s = polytopes.simplex(2)
sage: for facet in s.facets():
....:     print("{} has normal vector {}".format(facet,facet.normal_cone().rays()[0].vector()))
....:     
A 1-dimensional face of a Polyhedron in ZZ^3 defined as the convex hull of 2 vertices has normal vector (1, 1, 0)
A 1-dimensional face of a Polyhedron in ZZ^3 defined as the convex hull of 2 vertices has normal vector (0, -1, 0)
A 1-dimensional face of a Polyhedron in ZZ^3 defined as the convex hull of 2 vertices has normal vector (-1, 0, 0)
```



```
sage: P = Polyhedron(vertices=[(0,0), (1,0), (sqrt(AA(2)),2), (1,1)],base_ring=AA)
sage: for facet in P.facets():
....:     print("{} has normal vector {}".format(facet,facet.normal_cone().rays()[0].vector()))
....:     
A 1-dimensional face of a Polyhedron in AA^2 defined as the convex hull of 2 vertices has normal vector (0, -1/2)
A 1-dimensional face of a Polyhedron in AA^2 defined as the convex hull of 2 vertices has normal vector (-1, 0.7071067811865475?)
A 1-dimensional face of a Polyhedron in AA^2 defined as the convex hull of 2 vertices has normal vector (1, -0.2071067811865476?)
```



```
sage: P = Polyhedron(ieqs=[(0, 1, 1, 1, 1)])
sage: for facet in P.facets():
....:     print("{} has normal vector {}".format(facet,facet.normal_cone().rays()[0].vector()))
....:     
A 3-dimensional face of a Polyhedron in QQ^4 defined as the convex hull of 1 vertex and 3 lines has normal vector (-1, -1, -1, -1)
sage: for facet in P.facets():
....:     print("{} has normal vector {}".format(facet,facet.normal_cone('inner').rays()[0].vector()))
....:     
A 3-dimensional face of a Polyhedron in QQ^4 defined as the convex hull of 1 vertex and 3 lines has normal vector (1, 1, 1, 1)
```



```
sage: P = Polyhedron(ieqs=[(0, 0, 1), (0, 1, 0), (1, 0, -1)])
sage: for facet in P.facets():
....:     print("{} has normal vector {}".format(facet,facet.normal_cone().rays()[0].vector()))
....:     
A 1-dimensional face of a Polyhedron in QQ^2 defined as the convex hull of 1 vertex and 1 ray has normal vector (0, -1)
A 1-dimensional face of a Polyhedron in QQ^2 defined as the convex hull of 2 vertices has normal vector (-1, 0)
A 1-dimensional face of a Polyhedron in QQ^2 defined as the convex hull of 1 vertex and 1 ray has normal vector (0, 1)
```


I don't know if this fulfills what is intended in this ticket? Does it? If it does, I believe that it would be appropriate to minimize the duplication of code. In particular, it seems that the present function is intended for facets only (smaller dimensional faces also have normal vectors, but not anymore just in 1 direction...) so the name `normal_vector` is a choice which may be nasty for the user.

As for speed, well, it is true that we create a polyhedron in `normal_cone`, though, the code in #17215 is essentially all obtained through already computed data. I guess this should be benchmarked.



---

archive/issue_comments_382981.json:
```json
{
    "body": "Replying to [comment:28 jipilab]:\n> With #17215, one can do: [...]> I don't know if this fulfills what is intended in this ticket? Does it? If it does, I believe that it would be appropriate to minimize the duplication of code.\n\nThis might be the case. Can we make the doctests here on this ticket work with the code of #17215 (or giving at least somehow a similar output)?\n\n> In particular, it seems that the present function is intended for facets only\n\nYes, true.\n\n> (smaller dimensional faces also have normal vectors, but not anymore just in 1 direction...) so the name `normal_vector` is a choice which may be nasty for the user.\n\nIt seems that the new code is more general indeed.",
    "created_at": "2020-02-10T08:36:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27211#issuecomment-382981",
    "user": "https://github.com/dkrenn"
}
```

Replying to [comment:28 jipilab]:
> With #17215, one can do: [...]> I don't know if this fulfills what is intended in this ticket? Does it? If it does, I believe that it would be appropriate to minimize the duplication of code.

This might be the case. Can we make the doctests here on this ticket work with the code of #17215 (or giving at least somehow a similar output)?

> In particular, it seems that the present function is intended for facets only

Yes, true.

> (smaller dimensional faces also have normal vectors, but not anymore just in 1 direction...) so the name `normal_vector` is a choice which may be nasty for the user.

It seems that the new code is more general indeed.



---

archive/issue_comments_382982.json:
```json
{
    "body": "Replying to [comment:30 dkrenn]:\n> Replying to [comment:28 jipilab]:\n> > With #17215, one can do: [...]> I don't know if this fulfills what is intended in this ticket? Does it? If it does, I believe that it would be appropriate to minimize the duplication of code.\n> \n> This might be the case. Can we make the doctests here on this ticket work with the code of #17215 (or giving at least somehow a similar output)?\n\nYes, that's definitely possible I would say.\n\n> \n> > In particular, it seems that the present function is intended for facets only\n> \n> Yes, true.\n> \n> > (smaller dimensional faces also have normal vectors, but not anymore just in 1 direction...) so the name `normal_vector` is a choice which may be nasty for the user.\n> \n> It seems that the new code is more general indeed.\n\nThen, I believe it make sense to have a method for facets that return the appropriate normal vector.",
    "created_at": "2020-02-10T11:06:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27211#issuecomment-382982",
    "user": "https://github.com/jplab"
}
```

Replying to [comment:30 dkrenn]:
> Replying to [comment:28 jipilab]:
> > With #17215, one can do: [...]> I don't know if this fulfills what is intended in this ticket? Does it? If it does, I believe that it would be appropriate to minimize the duplication of code.
> 
> This might be the case. Can we make the doctests here on this ticket work with the code of #17215 (or giving at least somehow a similar output)?

Yes, that's definitely possible I would say.

> 
> > In particular, it seems that the present function is intended for facets only
> 
> Yes, true.
> 
> > (smaller dimensional faces also have normal vectors, but not anymore just in 1 direction...) so the name `normal_vector` is a choice which may be nasty for the user.
> 
> It seems that the new code is more general indeed.

Then, I believe it make sense to have a method for facets that return the appropriate normal vector.



---

archive/issue_comments_382983.json:
```json
{
    "body": "Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.",
    "created_at": "2020-04-14T19:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27211#issuecomment-382983",
    "user": "https://github.com/mkoeppe"
}
```

Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.



---

archive/issue_comments_382984.json:
```json
{
    "body": "Has this been implemented in #17215?",
    "created_at": "2020-08-27T04:59:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27211#issuecomment-382984",
    "user": "https://github.com/mkoeppe"
}
```

Has this been implemented in #17215?



---

archive/issue_comments_382985.json:
```json
{
    "body": "Replying to [comment:33 mkoeppe]:\n> Has this been implemented in #17215?\n\nI think that the resolution was that it might be nice to have a direct function giving the vector and not a \"cone\" object...",
    "created_at": "2021-01-22T12:40:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27211#issuecomment-382985",
    "user": "https://github.com/jplab"
}
```

Replying to [comment:33 mkoeppe]:
> Has this been implemented in #17215?

I think that the resolution was that it might be nice to have a direct function giving the vector and not a "cone" object...



---

archive/issue_comments_382986.json:
```json
{
    "body": "Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-15T22:07:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27211#issuecomment-382986",
    "user": "https://github.com/mkoeppe"
}
```

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_382987.json:
```json
{
    "body": "Setting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27211#issuecomment-382987",
    "user": "https://github.com/mkoeppe"
}
```

Setting a new milestone for this ticket based on a cursory review.
