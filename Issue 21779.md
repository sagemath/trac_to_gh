# Issue 21779: Implement tete-a-tete graphs

Issue created by migration from https://trac.sagemath.org/ticket/22016

Original creator: pportilla

Original creation time: 2016-12-03 16:49:55

CC:  tscrim tmonteil

Keywords: tat, ribbon graphs, tete-a-tete, periodic, automorphisms, surfaces, boundary

In this ticket we will implement tete-a-tete graphs. These are ribbon graphs together with a metric on its edges satisfying a certain property (the tete-a-tete property). These are an original idea by the mathematician Norbert A'Campo in [A2009]. A tete-a-tete graph encodes the mapping class of an automorphism of a surface with boundary that restricts to the identity to the boundary of this surface and whose mapping class is periodic (when we allow isotopies to rotate the boundary components). Also some ideas were further developed by C. Graf, an student of A'Campo in [G2015]. Also, my current PhD thesis develops other aspects of these graphs.

These are some of the ideas that will be implemented in this ticket:

    * A class of objects called _TatGraph_ (tat stands for tete-a-tete). This  includes the notion of relative tat graph, which are a kind of graphs that allow to permute certain boundary components of the thickening of the underlying ribbon graph.
    * Numerous methods for the class above, for instance:
        - Rotation numbers around each boundary component
        - Matrix depicting the action on the first homology group of the ribbon graph with respect to the basis given by RibbonGraph.homology_basis()
        - Global method to find the end of a safewalk of a certain length.
        - Global method that produces examples of tat graphs. In particular it produces all Milnor fibers and monodromies of the Brieskorn-Pham singularities.
        - Orbit graph, this is a ribbon graph that corresponds to the orbit space resulting from taking the quotient of the original underlying ribbon graph by the action the the automorphism induced by the tat property.


[A2009] N. A'Campo, Tete-a-tete graphs and geometry monodromy.
[G2015] C.Graf, Tete-a-tete graphs and periodic automorphisms of surfaces.




[]


---

Comment by pportilla created at 2016-12-03 17:11:21

Set assignee to pportilla.


---

Comment by pportilla created at 2016-12-03 17:20:47

I just created this ticket from the web interface but I can't checkout on it from the console in my compute by doing "git trac checkout 22016", it returns:

Loading ticket #22016...
Checking out Trac #22016 remote branch u/pportilla/tat_graph -> local branch t/22016/tat_graph...
Traceback (most recent call last):
  File "/usr/local/bin/git-trac", line 18, in <module>
    cmdline.launch()
  File "/usr/local/lib/python2.7/dist-packages/git_trac/cmdline.py", line 215, in launch
    app.checkout(args.ticket_or_branch, args.branch_name)
  File "/usr/local/lib/python2.7/dist-packages/git_trac/app.py", line 116, in checkout
    self._checkout_ticket(int(ticket_or_branch), branch_name)
  File "/usr/local/lib/python2.7/dist-packages/git_trac/app.py", line 144, in _checkout_ticket
    self.repo.checkout_new_branch(ticket.branch, branch)
  File "/usr/local/lib/python2.7/dist-packages/git_trac/git_repository.py", line 136, in checkout_new_branch
    self.git.fetch('trac', remote)
  File "/usr/local/lib/python2.7/dist-packages/git_trac/git_interface.py", line 341, in meth
    return self.execute(git_cmd, *args, **kwds)
  File "/usr/local/lib/python2.7/dist-packages/git_trac/git_interface.py", line 328, in execute
    popen_stderr=subprocess.PIPE)
  File "/usr/local/lib/python2.7/dist-packages/git_trac/git_interface.py", line 263, in _run
    raise GitError(result)
git_trac.git_error.GitError: git returned with non-zero exit code (128) when executing "git fetch trac u/pportilla/tat_graph"
    STDERR: fatal: Couldn't find remote ref u/pportilla/tat_graph
    STDERR: fatal: The remote end hung up unexpectedly


I can, however fetch other tickets like for example 21587. Any ideas?


---

Comment by tscrim created at 2016-12-03 18:42:51

Were you able to fix the `git trac` command issue? If not, have you tried using `git` directly?


---

Comment by pportilla created at 2016-12-03 19:00:59

Replying to [comment:8 tscrim]:
> Were you able to fix the `git trac` command issue? If not, have you tried using `git` directly?

No I haven't been able to solve it and yes, I have also tried "git fetch -v trac u/pportilla/tat_graph-22016 && echo OK" and it returns the same kind of error " fatal: Couldn't find remote ref u/pportilla/tat_graph-22016"

I can checkout other tickets so I don't know what can be the problem.


---

Comment by tscrim created at 2016-12-03 19:11:21

Can you send me the results of `git remote -v` to my e-mail (tscrimsh at umn * edu, with * = dot)?


---

Comment by git created at 2016-12-03 19:41:32

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by pportilla created at 2016-12-03 19:44:02

I just updated the branch with all the commits from #21587 (since it depends on it)


---

Comment by git created at 2016-12-03 20:09:46

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-12-03 20:13:16

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-12-04 15:34:17

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2017-01-23 19:27:44

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2017-01-24 00:45:50

Is this ready for review?


---

Comment by pportilla created at 2017-01-24 18:21:06

Replying to [comment:17 tscrim]:
> Is this ready for review?

Hi. No, it is not. I have been busy. This is my last PhD year and, as you can imagine, I lack of time. Nevertheless, I will be back on this soon (I hope).


---

Comment by git created at 2017-05-23 08:05:26

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-03-02 17:23:31

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-03-05 08:29:53

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2019-01-03 14:39:31

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2019-01-04 00:11:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2019-01-04 17:39:44

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2019-01-13 03:13:45

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by pportilla created at 2019-01-16 16:34:10

Changing status from new to needs_review.


---

Comment by chapoton created at 2019-01-17 09:52:32

(1) Do not use latex for accents, but just unicode. Something like

```
+# -*- coding: utf-8 -*-
+r"""
+Tête-a-tête graphs.
```

where the coding line should be the first line of the .py file.

(2) You can use one single lazy_import by using a list as second argument

(3) this is wrong : `:arxiv:`arXiv:1706.05580``

(4) you should not touch cypari files. If you would like to change something here, make pull requests in their own developer site.


---

Comment by chapoton created at 2019-01-17 09:53:33

Changing status from needs_review to needs_work.


---

Comment by pportilla created at 2019-01-17 16:10:39

Hi chapoton, I am sorry but I don't know what you mean by (4). Which files did I touch that I shouldn't have?

Replying to [comment:27 chapoton]:
> (1) Do not use latex for accents, but just unicode. Something like
> {{{
> +# -*- coding: utf-8 -*-
> +r"""
> +Tête-a-tête graphs.
> }}}
> where the coding line should be the first line of the .py file.
> 
> (2) You can use one single lazy_import by using a list as second argument
> 
> (3) this is wrong : `:arxiv:`arXiv:1706.05580``
> 
> (4) you should not touch cypari files. If you would like to change something here, make pull requests in their own developer site.


---

Comment by git created at 2019-01-17 16:11:58

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2019-01-17 16:12:38

click on the name of the branch on the top of this page ; you will see that your branch does something on some files like 

```
-rw-r--r--	src/sage/libs/cypari2/.gitignore	2	
-rw-r--r--	src/sage/libs/cypari2/auto_gen.pxi	20819	
-rw-r--r--	src/sage/libs/cypari2/auto_instance.pxi
```



---

Comment by git created at 2019-01-17 16:27:06

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by pportilla created at 2019-01-17 16:28:39

Changing status from needs_work to needs_review.


---

Comment by pportilla created at 2019-01-17 16:29:07

Thank you! Done it already. Changed to needs_review again

Replying to [comment:31 chapoton]:
> click on the name of the branch on the top of this page ; you will see that your branch does something on some files like 
> {{{
> -rw-r--r--	src/sage/libs/cypari2/.gitignore	2	
> -rw-r--r--	src/sage/libs/cypari2/auto_gen.pxi	20819	
> -rw-r--r--	src/sage/libs/cypari2/auto_instance.pxi
> }}}


---

Comment by pportilla created at 2019-01-17 16:48:32

It looks that there was an error compiling with the lazy_import one-liner. Apparently it only accepts up to three arguments. So I guess I either revert the changes or use the usual  "import *"

Replying to [comment:27 chapoton]:
> (1) Do not use latex for accents, but just unicode. Something like
> {{{
> +# -*- coding: utf-8 -*-
> +r"""
> +Tête-a-tête graphs.
> }}}
> where the coding line should be the first line of the .py file.
> 
> (2) You can use one single lazy_import by using a list as second argument
> 
> (3) this is wrong : `:arxiv:`arXiv:1706.05580``
> 
> (4) you should not touch cypari files. If you would like to change something here, make pull requests in their own developer site.


---

Comment by chapoton created at 2019-01-17 16:50:38

second argument of lazy import is a **list of functions**


```
git grep "lazy_import"
```

to see some examples


---

Comment by git created at 2019-01-17 16:53:31

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by pportilla created at 2019-01-17 16:53:47

Thank you once again. Done it.
Replying to [comment:36 chapoton]:
> second argument of lazy import is a **list of functions**
> 
> {{{
> git grep "lazy_import"
> }}}
> to see some examples


---

Comment by chapoton created at 2019-01-17 16:56:42

(1) undo this change:

```
+
+Hyperbolic Geometry
+-------------------
+
```


(2) in the same file, the J. should be `{\J.`}


---

Comment by pportilla created at 2019-01-17 17:08:24

I don't know where the Hyperbolic Geometry change came from. Maybe it was there in a previous develop-version and I repushed it (?). Anyway, it is done now.

Replying to [comment:39 chapoton]:
> (1) undo this change:
> {{{
> +
> +Hyperbolic Geometry
> +-------------------
> +
> }}}
> 
> (2) in the same file, the J. should be `{\J.`}
>


---

Comment by git created at 2019-01-17 17:09:31

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2019-01-17 20:24:24

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2019-01-17 23:34:18

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2019-01-17 23:37:23

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2019-01-18 06:57:54

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2019-01-18 09:02:49

(1) This is not the right way:

```
while (finish_cycle == False):
```

should rather be

```
while not finish_cycle:
```

(2) idem here

```
while (len(aux_orbits_rho) > 0):
```

could be

```
while aux_orbits_rho:
```

(3)
This

```
+    darts = [x for i in range(len(aux_sigma)) for x in aux_sigma[i]]
```

could be

```
darts = [x for y in aux_sigma for x in y]
```

(4)
This

```
+    for i in range(len(aux_sigma[orb_vertex[0]])):
+        assert tat_graph._metric[aux_sigma[orb_vertex[0]][i]] > epsilon
```

could be

```
+    for y in aux_sigma[orb_vertex[0]]:
+        assert tat_graph._metric[y] > epsilon
```



---

Comment by tscrim created at 2019-01-18 17:22:52

I just want to expand slightly on (1) that there are a few places where you are checking `if foo == True:`/`if foo == False:` and all of those should be changed appropriately to ``if foo:`/`if not foo:`.


---

Comment by git created at 2019-01-18 18:04:22

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2019-01-18 18:10:06

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2019-02-24 19:43:16

This has not been corrected:

```
while (len(darts) > 0):
```



---

Comment by chapoton created at 2019-05-23 11:35:34

Changing status from needs_review to needs_work.


---

Comment by chapoton created at 2019-05-23 11:35:34

and the branch is now red, meaning some conflicts with the latest develop version of sage


---

Comment by mkoeppe created at 2021-02-13 20:51:01

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.


---

Comment by mkoeppe created at 2021-07-19 00:44:56

Setting a new milestone for this ticket based on a cursory review.
