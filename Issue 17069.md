# Issue 17069: Let mathjax spkg work with sagenb

archive/issues_017069.json:
```json
{
    "body": "CC:  @jhpalmieri @kcrisman\n\nKeywords: mathjax notebook\n\nThe aim of this ticket is to put mathjax (see #17288) as a dependency of sagenb spkg and let them work together.\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/17306\n\n",
    "created_at": "2014-11-07T20:28:55Z",
    "labels": [
        "component: notebook"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.6",
    "title": "Let mathjax spkg work with sagenb",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17069",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```
CC:  @jhpalmieri @kcrisman

Keywords: mathjax notebook

The aim of this ticket is to put mathjax (see #17288) as a dependency of sagenb spkg and let them work together.


Issue created by migration from https://trac.sagemath.org/ticket/17306





---

archive/issue_comments_226712.json:
```json
{
    "body": "I put a \"need review\" because the commit is ready, but there is no hurry if you need to discuss on the sagenb side.\n----\nNew commits:",
    "created_at": "2014-11-07T21:05:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17069#issuecomment-226712",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

I put a "need review" because the commit is ready, but there is no hurry if you need to discuss on the sagenb side.
----
New commits:



---

archive/issue_comments_226713.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-11-07T21:05:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17069#issuecomment-226713",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_226714.json:
```json
{
    "body": "Since this change works even without modifying the sagenb, I don't see any point in delaying the switch. For the users the difference should be using a more up-to-date version of MathJax.",
    "created_at": "2014-11-07T23:02:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17069#issuecomment-226714",
    "user": "https://github.com/novoselt"
}
```

Since this change works even without modifying the sagenb, I don't see any point in delaying the switch. For the users the difference should be using a more up-to-date version of MathJax.



---

archive/issue_comments_226715.json:
```json
{
    "body": "Well, it's kind of a hack removing things from the egg, isn't it?  Anyway, I won't be trying it in the near future, but if you have time to test it and there aren't any subtle things, obviously in the long run this is a very good idea.",
    "created_at": "2014-11-08T04:09:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17069#issuecomment-226715",
    "user": "https://github.com/kcrisman"
}
```

Well, it's kind of a hack removing things from the egg, isn't it?  Anyway, I won't be trying it in the near future, but if you have time to test it and there aren't any subtle things, obviously in the long run this is a very good idea.



---

archive/issue_comments_226716.json:
```json
{
    "body": "Shouldn't the sagenb egg thing use the version number of the sagenb package (this should be available as some kind of env var in spkg-install)?",
    "created_at": "2014-12-07T03:09:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17069#issuecomment-226716",
    "user": "https://github.com/kcrisman"
}
```

Shouldn't the sagenb egg thing use the version number of the sagenb package (this should be available as some kind of env var in spkg-install)?



---

archive/issue_comments_226717.json:
```json
{
    "body": "Replying to [comment:4 kcrisman]:\n> Well, it's kind of a hack removing things from the egg, isn't it?\n\nIf i understand the motivation in having this ticket separate from #17288, sagenb development has not much energy. So, if sagenb developpers agree with this ticket, then it can be accepted without the need to release a new version of sagenb (and the removing part of spkg-install can be removed later once mathjax is removed from sagenb tarball during a following release). I just wanted to avoid this ticket to impose some additional work on the sagenb side.",
    "created_at": "2014-12-08T11:39:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17069#issuecomment-226717",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Replying to [comment:4 kcrisman]:
> Well, it's kind of a hack removing things from the egg, isn't it?

If i understand the motivation in having this ticket separate from #17288, sagenb development has not much energy. So, if sagenb developpers agree with this ticket, then it can be accepted without the need to release a new version of sagenb (and the removing part of spkg-install can be removed later once mathjax is removed from sagenb tarball during a following release). I just wanted to avoid this ticket to impose some additional work on the sagenb side.



---

archive/issue_comments_226718.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-12-08T12:04:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17069#issuecomment-226718",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_226719.json:
```json
{
    "body": "Okay, in that case though I am not sure I will be able to review this - Andrey, I'm happy if you test this, though, I just don't want to mix things up too badly.\n\nIncidentally, I'm surprised you have to go to those lengths to find the version number, at least for sagenb; shouldn't there be a variable defining the current pkg version available inside the current pkg install process?  It surprises me if that's not the case.  But I admit I don't have independent proof of this.",
    "created_at": "2014-12-08T13:14:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17069#issuecomment-226719",
    "user": "https://github.com/kcrisman"
}
```

Okay, in that case though I am not sure I will be able to review this - Andrey, I'm happy if you test this, though, I just don't want to mix things up too badly.

Incidentally, I'm surprised you have to go to those lengths to find the version number, at least for sagenb; shouldn't there be a variable defining the current pkg version available inside the current pkg install process?  It surprises me if that's not the case.  But I admit I don't have independent proof of this.



---

archive/issue_comments_226720.json:
```json
{
    "body": "I just read the `sage-spkg` script to see if i can steal something from there. There are indeed some `PKG_VER`, `LOCAL_PKG_VER` and `PKG_BASE_VER` variables that could be good candidates. However, those variables are not exported and the `spkg-install` script is called (not sourced) so the `spkg-install` will not inherit those variables.\n\nBy the way, `LOCAL_PKG_VER` is also built by looking at `package-version.txt`.",
    "created_at": "2014-12-08T16:52:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17069#issuecomment-226720",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

I just read the `sage-spkg` script to see if i can steal something from there. There are indeed some `PKG_VER`, `LOCAL_PKG_VER` and `PKG_BASE_VER` variables that could be good candidates. However, those variables are not exported and the `spkg-install` script is called (not sourced) so the `spkg-install` will not inherit those variables.

By the way, `LOCAL_PKG_VER` is also built by looking at `package-version.txt`.



---

archive/issue_comments_226721.json:
```json
{
    "body": "Ah, interesting.  Do you think that it should be sourced?  As long as those variables then change (and after a build are vanquished) that could be useful.",
    "created_at": "2014-12-08T16:56:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17069#issuecomment-226721",
    "user": "https://github.com/kcrisman"
}
```

Ah, interesting.  Do you think that it should be sourced?  As long as those variables then change (and after a build are vanquished) that could be useful.



---

archive/issue_comments_226722.json:
```json
{
    "body": "Replying to [comment:10 kcrisman]:\n> Ah, interesting.  Do you think that it should be sourced?  As long as those variables then change (and after a build are vanquished) that could be useful.\n\nNo, if we want some variable to be available in the `spkg-install` script i would use `export USEFUL_VARIABLE` before calling the `spkg-install` script (by the way, note that some `spkg-install` scripts are written in Python and can not be sourced within a bash script). I do not know how much those variables are needed though.",
    "created_at": "2014-12-08T17:11:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17069#issuecomment-226722",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Replying to [comment:10 kcrisman]:
> Ah, interesting.  Do you think that it should be sourced?  As long as those variables then change (and after a build are vanquished) that could be useful.

No, if we want some variable to be available in the `spkg-install` script i would use `export USEFUL_VARIABLE` before calling the `spkg-install` script (by the way, note that some `spkg-install` scripts are written in Python and can not be sourced within a bash script). I do not know how much those variables are needed though.



---

archive/issue_events_049997.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2015-02-03T01:56:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17069",
    "milestone": "sage-pending",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17069#event-49997"
}
```



---

archive/issue_comments_226723.json:
```json
{
    "body": "Waiting on #17288 at this time before bothering to review.",
    "created_at": "2015-02-03T01:56:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17069#issuecomment-226723",
    "user": "https://github.com/kcrisman"
}
```

Waiting on #17288 at this time before bothering to review.



---

archive/issue_comments_226724.json:
```json
{
    "body": "Mathjax is just a runtime dependency but doesn't block installing SageNB, right?. You can also make symlinks whose destination is not yet installed. So no need to list it in deps.",
    "created_at": "2015-03-09T19:18:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17069#issuecomment-226724",
    "user": "https://github.com/vbraun"
}
```

Mathjax is just a runtime dependency but doesn't block installing SageNB, right?. You can also make symlinks whose destination is not yet installed. So no need to list it in deps.



---

archive/issue_events_049998.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-03-13T15:04:10Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17069",
    "milestone": "sage-pending",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17069#event-49998"
}
```



---

archive/issue_events_049999.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-03-13T15:04:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/17069",
    "milestone": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17069#event-49999"
}
```



---

archive/issue_comments_226725.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-03-13T15:04:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17069#issuecomment-226725",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_226726.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-13T22:27:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17069#issuecomment-226726",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_226727.json:
```json
{
    "body": "lgtm",
    "created_at": "2015-03-13T23:30:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17069#issuecomment-226727",
    "user": "https://github.com/vbraun"
}
```

lgtm



---

archive/issue_comments_226728.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2015-03-13T23:30:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17069#issuecomment-226728",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_226729.json:
```json
{
    "body": "Merge conflict with sage-6.6.beta5  (ipython 3.0 update)",
    "created_at": "2015-03-14T10:28:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17069#issuecomment-226729",
    "user": "https://github.com/vbraun"
}
```

Merge conflict with sage-6.6.beta5  (ipython 3.0 update)



---

archive/issue_comments_226730.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-03-14T10:28:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17069#issuecomment-226730",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_226731.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-14T18:09:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17069#issuecomment-226731",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_226732.json:
```json
{
    "body": "I hope the merge is correct.",
    "created_at": "2015-03-14T18:11:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17069#issuecomment-226732",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

I hope the merge is correct.



---

archive/issue_comments_226733.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-03-14T18:11:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17069#issuecomment-226733",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_226734.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-03-14T20:02:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17069#issuecomment-226734",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_050000.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-03-17T08:34:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17069",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17069#event-50000"
}
```



---

archive/issue_comments_226735.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-03-17T08:34:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17069#issuecomment-226735",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
