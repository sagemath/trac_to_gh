# Issue 11064: Fix _test_eq for Python 2.7

Issue created by migration from Trac.

Original creator: nthiery

Original creation time: 2011-04-21 22:59:38

Assignee: mvngu

In Python 2.7, AssertEqual / AssertNonEqual call directly == and != a bit differently. So in Parent._test_eq, one is better of calling explicitly != and ==.


---

Comment by fbissey created at 2011-04-22 03:50:58

I am doing a build of python-2.7 sage-4.7.alpha5 right now. I assume you tested that it was safe with python-2.6 (I will run a check on a vanilla install in any case).


---

Comment by fbissey created at 2011-04-22 04:58:12


```
sage -t -long -force_lib "devel/sage-main/sage/structure/parent.pyx"
         [21.7 s]
 
----------------------------------------------------------------------
All tests passed!
```

sage-on-gentoo 4.7.alpha5 with python-2.7.1. vanilla sage coming.


---

Comment by fbissey created at 2011-04-22 05:04:53

Changing status from new to needs_review.


---

Comment by fbissey created at 2011-04-22 05:04:53

Tested on vanilla sage (4.7.alpha1) and tests passed. Positive review from me.


---

Comment by fbissey created at 2011-04-22 05:05:04

Changing status from needs_review to positive_review.


---

Comment by fbissey created at 2011-04-23 09:02:17

Sorry not in my initial post because I missed it but sage/structure/element.pyx has exactly the same test and problem. I don't think there are any other instance but I'll check again. It looks so much the same that you would think the patch for parent.pyx would just apply with some fuzz.


---

Comment by fbissey created at 2011-04-23 09:02:17

Changing status from positive_review to needs_work.


---

Attachment


---

Comment by nthiery created at 2011-04-23 09:28:51

Replying to [comment:5 fbissey]:
> Sorry not in my initial post because I missed it but sage/structure/element.pyx has exactly the same test and problem. I don't think there are any other instance but I'll check again. It looks so much the same that you would think the patch for parent.pyx would just apply with some fuzz.

Voil√†!

So much for me not finding a way to avoid the code duplication between Parent and Element :-)


---

Comment by nthiery created at 2011-04-23 09:28:51

Changing status from needs_work to needs_review.


---

Comment by fbissey created at 2011-04-23 09:35:08

That's great! It's a bit late in the day for me to test it but we'll probably be back at positive review tomorrow.


---

Comment by fbissey created at 2011-04-24 02:00:34

Ok it worked like a charm. Back to positive review.


---

Comment by fbissey created at 2011-04-24 02:00:34

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2011-05-03 12:30:38

Resolution: fixed
