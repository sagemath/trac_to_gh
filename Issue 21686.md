# Issue 21686: Assumption bug of positive symbolic variable

Issue created by migration from Trac.

Original creator: mathzeta2

Original creation time: 2016-11-22 07:58:36

CC:  rws

There is an easily reproducible bug with assumptions:

```
sage: var("p", domain="positive")
p
sage: assume(p<1)
sage: bool(p<1)
True
sage: bool(p^2<1)
True
sage: bool(p^6<1) # Should be True
False
```


The same happens for `var("p")` and then assuming `assume(p>0)`.


---

Comment by mathzeta2 created at 2016-11-22 08:13:00

Changing keywords from "" to "days79".


---

Comment by moritz created at 2016-11-22 15:59:04

double floating problem?


```
sage: [bool(p^(i)<=1+1e-15) for i in range(20)]
[True, True, True, True, True, True, False, True, True, True, False, True, False, False, False, False, True, False, False, False]
sage: [bool(p^(i)<=1+1e-14) for i in range(20)]
[True, True, False, False, False, False, False, False, False, False, False, False, False, False, False, False, False, False, False, False]
```



---

Comment by moritz created at 2016-11-22 16:13:25


```
sage: var("p", domain="positive")
sage: assume(p<1/1000000)
sage: bool(p^6<5)
False
```



---

Comment by rws created at 2016-11-24 10:13:08

It is well known that there is no reasoning capability in Sage. See for example this thread: https://groups.google.com/d/msg/sage-support/AiPtd0x52kQ/WeOmvlFCEAAJ

The `assume` command mainly sets Maxima assumptions for use in DEs and integrals. Everything else is experimental.


---

Comment by rws created at 2016-11-24 14:11:37

See also #19162.


---

Comment by rws created at 2016-11-24 14:11:37

Changing type from defect to enhancement.


---

Comment by mathzeta2 created at 2016-11-25 16:13:43

Yes, this is already in Maxima:

```
(%i1) assume(p>0);
(%o1)                               [p > 0]
(%i2) assume(p<1);        
(%o2)                               [p < 1]
(%i3) is(p^2<1); 
(%o3)                                true
(%i4) is(p^6<1);        
(%o4)                               unknown
```

Now I see that http://maxima.sourceforge.net/docs/manual/maxima_11.html#assume mentions
 Maxima's deduction mechanism is not very strong; there are many obvious consequences which cannot be determined by is. This is a known weakness. 
But Maxima does have a tristate, as can be seen above. See #17700 for more.

Should the milestone of this ticket be changed to sage-duplicate or to sage-wishlist?


---

Comment by rws created at 2016-11-25 16:23:20

I think it's a duplicate of the enhancement ticket #19162.


---

Comment by rws created at 2016-11-25 16:23:20

Changing status from new to needs_review.


---

Comment by rws created at 2016-11-25 16:24:28

BTW for an overview of existing symbolic tickets please see https://trac.sagemath.org/wiki/symbolics


---

Comment by tmonteil created at 2016-11-27 15:36:23

I am not sure such tickets should be closed like that. Indeed, compared to #19162, there is a concrete use case (a bug), so it is important to keep track of it in the doctests, even if the fix comes from another ticket. At least, we have to copy the doctest on the other ticket, in order not to lose it.


---

Comment by dimpase created at 2021-12-04 12:43:35

Changing status from needs_review to needs_work.


---

Comment by dimpase created at 2021-12-04 12:43:35

still reproducible in 9.5.beta7
