# Issue 27599: Three.js: Add flat shading for Platonic solids

archive/issues_027599.json:
```json
{
    "body": "CC:  egourgoulhon\n\nKeywords: threejs\n\nThis ticket adds internal options to set flat shading for the Platonic solids and pass it through the JSON representation to the Three.js rendering template.\n\nThe major change is in the `json_repr` method of the `IndexFaceSet`. This representation is currently only used by the Three.js renderer and the canvas renderer, but it shouldn't affect the latter. I would rather have made the change in the `_rich_repr_threejs` method in `plot/plot3d/base.pyx` so it would only apply to Three.js plots. The problem is the existence of `Graphics3dGroups`, which have a JSON representation that can be nested. I didn't see any good way to search recursively a possibly nested array while traversing the `self.all` object, so making the change before the nested object is created seemed like the best way forward.\n\nIf anyone has a more Pythonic approach, let me know.\n\nIssue created by migration from https://trac.sagemath.org/ticket/27836\n\n",
    "created_at": "2019-05-16T00:45:02Z",
    "labels": [
        "graphics",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.8",
    "title": "Three.js: Add flat shading for Platonic solids",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27599",
    "user": "paulmasson"
}
```
CC:  egourgoulhon

Keywords: threejs

This ticket adds internal options to set flat shading for the Platonic solids and pass it through the JSON representation to the Three.js rendering template.

The major change is in the `json_repr` method of the `IndexFaceSet`. This representation is currently only used by the Three.js renderer and the canvas renderer, but it shouldn't affect the latter. I would rather have made the change in the `_rich_repr_threejs` method in `plot/plot3d/base.pyx` so it would only apply to Three.js plots. The problem is the existence of `Graphics3dGroups`, which have a JSON representation that can be nested. I didn't see any good way to search recursively a possibly nested array while traversing the `self.all` object, so making the change before the nested object is created seemed like the best way forward.

If anyone has a more Pythonic approach, let me know.

Issue created by migration from https://trac.sagemath.org/ticket/27836





---

archive/issue_comments_389471.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-05-16T00:46:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27599",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27599#issuecomment-389471",
    "user": "paulmasson"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_389472.json:
```json
{
    "body": "New commits:",
    "created_at": "2019-05-16T00:46:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27599",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27599#issuecomment-389472",
    "user": "paulmasson"
}
```

New commits:



---

archive/issue_comments_389473.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-05-19T10:14:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27599",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27599#issuecomment-389473",
    "user": "egourgoulhon"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_389474.json:
```json
{
    "body": "LGTM. Thanks for this improvement!",
    "created_at": "2019-05-19T10:14:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27599",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27599#issuecomment-389474",
    "user": "egourgoulhon"
}
```

LGTM. Thanks for this improvement!



---

archive/issue_comments_389475.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-05-24T18:29:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27599",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27599#issuecomment-389475",
    "user": "vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_389476.json:
```json
{
    "body": "Thanks for fixing this.  I agree there is need for a lot of refactoring in the plot3d code to better manage different options for specific rendering backends, as well as things like lighting an textures, in a more consistent manner.  A whole project unto itself.  But this looks good enough for now.",
    "created_at": "2019-08-12T11:31:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27599",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27599#issuecomment-389476",
    "user": "embray"
}
```

Thanks for fixing this.  I agree there is need for a lot of refactoring in the plot3d code to better manage different options for specific rendering backends, as well as things like lighting an textures, in a more consistent manner.  A whole project unto itself.  But this looks good enough for now.



---

archive/issue_comments_389477.json:
```json
{
    "body": "Follow-up at #31426 for more general polyhedra.",
    "created_at": "2021-02-22T14:57:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27599",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27599#issuecomment-389477",
    "user": "slelievre"
}
```

Follow-up at #31426 for more general polyhedra.
