# Issue 27599: Three.js: Add flat shading for Platonic solids

Issue created by migration from https://trac.sagemath.org/ticket/27836

Original creator: paulmasson

Original creation time: 2019-05-16 00:45:02

CC:  egourgoulhon

Keywords: threejs

This ticket adds internal options to set flat shading for the Platonic solids and pass it through the JSON representation to the Three.js rendering template.

The major change is in the `json_repr` method of the `IndexFaceSet`. This representation is currently only used by the Three.js renderer and the canvas renderer, but it shouldn't affect the latter. I would rather have made the change in the `_rich_repr_threejs` method in `plot/plot3d/base.pyx` so it would only apply to Three.js plots. The problem is the existence of `Graphics3dGroups`, which have a JSON representation that can be nested. I didn't see any good way to search recursively a possibly nested array while traversing the `self.all` object, so making the change before the nested object is created seemed like the best way forward.

If anyone has a more Pythonic approach, let me know.


---

Comment by paulmasson created at 2019-05-16 00:46:28

Changing status from new to needs_review.


---

Comment by paulmasson created at 2019-05-16 00:46:28

New commits:


---

Comment by egourgoulhon created at 2019-05-19 10:14:31

Changing status from needs_review to positive_review.


---

Comment by egourgoulhon created at 2019-05-19 10:14:31

LGTM. Thanks for this improvement!


---

Comment by vbraun created at 2019-05-24 18:29:54

Resolution: fixed


---

Comment by embray created at 2019-08-12 11:31:13

Thanks for fixing this.  I agree there is need for a lot of refactoring in the plot3d code to better manage different options for specific rendering backends, as well as things like lighting an textures, in a more consistent manner.  A whole project unto itself.  But this looks good enough for now.


---

Comment by slelievre created at 2021-02-22 14:57:57

Follow-up at #31426 for more general polyhedra.
