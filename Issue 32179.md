# Issue 32179: Remove unnecessary uses of SR and symbolic functions in sage.geometry (except .hyperbolic_space)

Issue created by migration from https://trac.sagemath.org/ticket/32416

Original creator: mkoeppe

Original creation time: 2021-08-24 19:10:45

CC:  @kliem chapoton

(and except `sage.geometry.riemannian_manifolds`, which is removed in #32228)

Similar to what is done in #32411.

This is part of Meta-ticket #29705 (modularization) - to remove unnecessary dependencies on the distribution sagemath-symbolics (#31695)


---

Comment by @kliem created at 2021-08-27 19:56:56

I'm working on this at the moment. Using `sympy.symbols` is ok, right?
Probably yes, because `geometry` depends on `categories.sets_cat`, which depends on `sympy`.

I'm just too lazy to reinvent the wheel and was looking for something that prints linear combinations of symbolic variables as well. Of course it is not too hard to write this yourself...


---

Comment by mkoeppe created at 2021-08-27 20:01:11

Hm... what do you need this for? Are you just looking for `repr_lincomb`?


---

Comment by @kliem created at 2021-08-27 20:03:32

Yes, that is exactly what I was looking for.


---

Comment by @kliem created at 2021-08-27 20:41:38

This is a partial solution.

- Some doctests need to be marked optional yet. In this ticket?
- `sage.geometry.polyhedron.base.Polyhedron_base.affine_hull_manifold` is missing yet.
- `sage.geometry.hyperplane_arrangement.plot` is missing. Not sure that this even works.

----
New commits:


---

Comment by mkoeppe created at 2021-08-27 21:25:19

These changes look good to me so far.


---

Comment by mkoeppe created at 2021-08-27 21:30:35

Replying to [comment:4 gh-kliem]:
> - Some doctests need to be marked optional yet. In this ticket?

We don't really have "optional" tags for things like `sagemath_symbolics` yet. You could add it to the beginning of `sage.doctest.control` (`auto_optional_tags`) but a more general solution is needed in the long term, see #30746


---

Comment by mkoeppe created at 2021-09-30 04:30:16

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2021-09-30 04:30:31

Let's see what the patchbot thinks


---

Comment by mkoeppe created at 2021-09-30 18:12:43

1 doctest failure from the changed latex whitespace in representation printing

```
sage -t --long --random-seed=0 src/doc/en/thematic_tutorials/geometry/tips.rst
**********************************************************************
File "src/doc/en/thematic_tutorials/geometry/tips.rst", line 82, in doc.en.thematic_tutorials.geometry.tips
Failed example:
    print(TCube.Hrepresentation_str(latex=True))
```



---

Comment by git created at 2021-09-30 18:33:39

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-10-03 16:59:18

LGTM, thanks.


---

Comment by mkoeppe created at 2021-10-03 16:59:18

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2021-10-03 23:29:58

Replying to [comment:6 mkoeppe]:
> We don't really have "optional" tags for things like `sagemath_symbolics` yet. 

Now provided by #32614


---

Comment by vbraun created at 2021-10-10 10:16:56

Resolution: fixed
