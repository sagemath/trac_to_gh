# Issue 28262: typing should not be installed in Python 3

Issue created by migration from https://trac.sagemath.org/ticket/28499

Original creator: vdelecroix

Original creation time: 2019-09-15 12:55:52

CC:  arojas embray fbissey @timokau infinity0 isuruf saraedum slelievre snark thansen

`typing` is a standard Sage package but it is also included in Python 3.7 standard library. This module is not compatible with Python > 3.5 (for example it breaks pytest). We should disable its installation when Sage is built with Python 3.


---

Comment by vdelecroix created at 2019-09-15 13:12:04

Changing status from new to needs_review.


---

Comment by vdelecroix created at 2019-09-15 13:12:04

New commits:


---

Comment by saraedum created at 2019-09-15 13:18:46

Not a very elegant fix but I think that's just the limitations of SPKGs. So, this looks good to me. I cannot test it because I have no Python 3 [SageMath](SageMath) installed. If you're confident that this works, feel free to set this to positive review.


---

Comment by saraedum created at 2019-09-15 13:19:11

CCing a usual suspect for testing Python 3 stuff :)


---

Comment by saraedum created at 2019-09-15 13:19:38

Or wait for #28041 and [GitLab](GitLab) CI will test it automatically.


---

Comment by vdelecroix created at 2019-09-15 13:23:23

Works for me on Python 3.


---

Comment by vdelecroix created at 2019-09-15 13:23:23

Changing status from needs_review to positive_review.


---

Comment by vdelecroix created at 2019-09-15 13:33:27

Changing keywords from "" to "py3".


---

Comment by slelievre created at 2019-09-16 03:34:07

cc-ing packagers for various distros


---

Comment by embray created at 2019-09-18 11:08:15

There is another way.  With an `spkg-configure.m4`, in I believe the third argument to [https://git.sagemath.org/sage.git/tree/m4/sage_spkg_configure.m4 SAGE_SPKG_CONFIGURE` you can pass a check for whether the package is even required.

It's not well documented how to do this, but if you set sage_require_typing=no in this check then it won't require installation of the package (it will just be treated as a dummy package).


---

Comment by chapoton created at 2019-09-30 08:12:27

moving milestone to 9.0 (after release of 8.9)


---

Comment by vbraun created at 2019-10-05 07:57:52

Resolution: fixed
