# Issue 21799: py3 remove cmp() in comparison of padics printing modes (pyx)

Issue created by migration from https://trac.sagemath.org/ticket/22036

Original creator: chapoton

Original creation time: 2016-12-07 10:21:57

CC:  tscrim jdemeyer aapitzsch

as yet another infinitesimal step to py3


---

Comment by chapoton created at 2016-12-07 10:22:30

Changing status from new to needs_review.


---

Comment by chapoton created at 2016-12-07 10:22:30

Last 10 new commits:


---

Comment by git created at 2016-12-07 10:36:29

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by chapoton created at 2016-12-07 13:45:09

failing doctests


---

Comment by chapoton created at 2016-12-07 13:45:09

Changing status from needs_review to needs_work.


---

Comment by git created at 2016-12-07 14:06:01

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2016-12-07 14:06:57

still not ok, for some reason related to symbolic rings. Remains 2 failing doctests.

sage -t src/sage/rings/padics/factory.py  # 2 doctests failed


---

Comment by chapoton created at 2016-12-09 16:08:53

Let me summarize the problem:

```
sage: x = var('x')
sage: X.<a> = Qq(27, modulus = x^3 + 2*x + 1)
sage: P.<x> = ZZ[]
sage: R.<a> = Qq(27, modulus = x^3 + 2*x + 1)
sage: X == R
False
sage: X._cmp_(R)
1
sage: X.__richcmp__(R, 2)
True
```

So the default behavior for `==` is apparently to call `_cmp_` in `Parent` which calls `__cmp__`. Therefore one may have to change the behaviour in Parent to first call `__richcmp__` before being able to handle this.


---

Comment by git created at 2016-12-15 14:36:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2016-12-15 15:47:50

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2016-12-15 17:53:09

green bot, please review


---

Comment by chapoton created at 2016-12-19 12:29:03

ping ?


---

Comment by chapoton created at 2016-12-29 15:50:42

**PING** ?


---

Comment by tscrim created at 2017-01-02 00:46:57

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2017-01-02 00:46:57

LGTM.


---

Comment by vbraun created at 2017-01-15 13:56:47

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2017-01-15 13:56:47

Merge conflict


---

Comment by git created at 2017-01-21 21:52:13

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2017-01-21 21:52:55

rebased on the latest beta, but there were no conflict


---

Comment by chapoton created at 2017-01-21 21:52:55

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2017-01-25 22:41:03

Resolution: fixed


---

Comment by jdemeyer created at 2017-06-02 19:19:44

WTF? You implemented `__richcmp__` in a pure Python file? That doesn't do anything...


---

Comment by chapoton created at 2017-06-02 19:26:46

indeed.. :(


---

Comment by tscrim created at 2017-06-02 23:00:19

We put it there as a perfect use-case for #23102. :P
