# Issue 21799: py3 remove cmp() in comparison of padics printing modes (pyx)

archive/issues_021799.json:
```json
{
    "body": "CC:  tscrim jdemeyer aapitzsch\n\nas yet another infinitesimal step to py3\n\nIssue created by migration from https://trac.sagemath.org/ticket/22036\n\n",
    "created_at": "2016-12-07T10:21:57Z",
    "labels": [
        "python3",
        "major",
        "enhancement"
    ],
    "title": "py3 remove cmp() in comparison of padics printing modes (pyx)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21799",
    "user": "chapoton"
}
```
CC:  tscrim jdemeyer aapitzsch

as yet another infinitesimal step to py3

Issue created by migration from https://trac.sagemath.org/ticket/22036





---

archive/issue_comments_302448.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-12-07T10:22:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21799#issuecomment-302448",
    "user": "chapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_302449.json:
```json
{
    "body": "Last 10 new commits:",
    "created_at": "2016-12-07T10:22:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21799#issuecomment-302449",
    "user": "chapoton"
}
```

Last 10 new commits:



---

archive/issue_comments_302450.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-12-07T10:36:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21799#issuecomment-302450",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_302451.json:
```json
{
    "body": "failing doctests",
    "created_at": "2016-12-07T13:45:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21799#issuecomment-302451",
    "user": "chapoton"
}
```

failing doctests



---

archive/issue_comments_302452.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-12-07T13:45:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21799#issuecomment-302452",
    "user": "chapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_302453.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-12-07T14:06:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21799#issuecomment-302453",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_302454.json:
```json
{
    "body": "still not ok, for some reason related to symbolic rings. Remains 2 failing doctests.\n\nsage -t src/sage/rings/padics/factory.py  # 2 doctests failed",
    "created_at": "2016-12-07T14:06:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21799#issuecomment-302454",
    "user": "chapoton"
}
```

still not ok, for some reason related to symbolic rings. Remains 2 failing doctests.

sage -t src/sage/rings/padics/factory.py  # 2 doctests failed



---

archive/issue_comments_302455.json:
```json
{
    "body": "Let me summarize the problem:\n\n```\nsage: x = var('x')\nsage: X.<a> = Qq(27, modulus = x^3 + 2*x + 1)\nsage: P.<x> = ZZ[]\nsage: R.<a> = Qq(27, modulus = x^3 + 2*x + 1)\nsage: X == R\nFalse\nsage: X._cmp_(R)\n1\nsage: X.__richcmp__(R, 2)\nTrue\n```\n\nSo the default behavior for `==` is apparently to call `_cmp_` in `Parent` which calls `__cmp__`. Therefore one may have to change the behaviour in Parent to first call `__richcmp__` before being able to handle this.",
    "created_at": "2016-12-09T16:08:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21799#issuecomment-302455",
    "user": "chapoton"
}
```

Let me summarize the problem:

```
sage: x = var('x')
sage: X.<a> = Qq(27, modulus = x^3 + 2*x + 1)
sage: P.<x> = ZZ[]
sage: R.<a> = Qq(27, modulus = x^3 + 2*x + 1)
sage: X == R
False
sage: X._cmp_(R)
1
sage: X.__richcmp__(R, 2)
True
```

So the default behavior for `==` is apparently to call `_cmp_` in `Parent` which calls `__cmp__`. Therefore one may have to change the behaviour in Parent to first call `__richcmp__` before being able to handle this.



---

archive/issue_comments_302456.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-12-15T14:36:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21799#issuecomment-302456",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_302457.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-12-15T15:47:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21799#issuecomment-302457",
    "user": "chapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_302458.json:
```json
{
    "body": "green bot, please review",
    "created_at": "2016-12-15T17:53:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21799#issuecomment-302458",
    "user": "chapoton"
}
```

green bot, please review



---

archive/issue_comments_302459.json:
```json
{
    "body": "ping ?",
    "created_at": "2016-12-19T12:29:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21799#issuecomment-302459",
    "user": "chapoton"
}
```

ping ?



---

archive/issue_comments_302460.json:
```json
{
    "body": "**PING** ?",
    "created_at": "2016-12-29T15:50:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21799#issuecomment-302460",
    "user": "chapoton"
}
```

**PING** ?



---

archive/issue_comments_302461.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-01-02T00:46:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21799#issuecomment-302461",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_302462.json:
```json
{
    "body": "LGTM.",
    "created_at": "2017-01-02T00:46:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21799#issuecomment-302462",
    "user": "tscrim"
}
```

LGTM.



---

archive/issue_comments_302463.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2017-01-15T13:56:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21799#issuecomment-302463",
    "user": "vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_302464.json:
```json
{
    "body": "Merge conflict",
    "created_at": "2017-01-15T13:56:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21799#issuecomment-302464",
    "user": "vbraun"
}
```

Merge conflict



---

archive/issue_comments_302465.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-21T21:52:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21799#issuecomment-302465",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_302466.json:
```json
{
    "body": "rebased on the latest beta, but there were no conflict",
    "created_at": "2017-01-21T21:52:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21799#issuecomment-302466",
    "user": "chapoton"
}
```

rebased on the latest beta, but there were no conflict



---

archive/issue_comments_302467.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2017-01-21T21:52:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21799#issuecomment-302467",
    "user": "chapoton"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_302468.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-01-25T22:41:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21799#issuecomment-302468",
    "user": "vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_302469.json:
```json
{
    "body": "WTF? You implemented `__richcmp__` in a pure Python file? That doesn't do anything...",
    "created_at": "2017-06-02T19:19:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21799#issuecomment-302469",
    "user": "jdemeyer"
}
```

WTF? You implemented `__richcmp__` in a pure Python file? That doesn't do anything...



---

archive/issue_comments_302470.json:
```json
{
    "body": "indeed.. :(",
    "created_at": "2017-06-02T19:26:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21799#issuecomment-302470",
    "user": "chapoton"
}
```

indeed.. :(



---

archive/issue_comments_302471.json:
```json
{
    "body": "We put it there as a perfect use-case for #23102. :P",
    "created_at": "2017-06-02T23:00:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21799#issuecomment-302471",
    "user": "tscrim"
}
```

We put it there as a perfect use-case for #23102. :P
