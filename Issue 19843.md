# Issue 19843: Overview of Sphinx custom code in Sage's documentation build system

archive/issues_019843.json:
```json
{
    "body": "CC:  @egourgoulhon @jhpalmieri @dimpase @kwankyu @haraldschilly\n\n\n```\n!rst\nThe goal of this ticket is to write an overview of the various bits and pieces of custom Sphinx code in Sage, with the long term goal to see which pieces could be:\n- thrown away, using features that are now in Sphinx\n- generalized and submitted upstream\n- cleaned up\n\n```\n\n\n\n\n\n}}}\n\nIssue created by migration from https://trac.sagemath.org/ticket/20080\n\n",
    "created_at": "2016-02-18T14:52:48Z",
    "labels": [
        "component: documentation"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Overview of Sphinx custom code in Sage's documentation build system",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19843",
    "user": "https://github.com/nthiery"
}
```
CC:  @egourgoulhon @jhpalmieri @dimpase @kwankyu @haraldschilly


```
!rst
The goal of this ticket is to write an overview of the various bits and pieces of custom Sphinx code in Sage, with the long term goal to see which pieces could be:
- thrown away, using features that are now in Sphinx
- generalized and submitted upstream
- cleaned up

```





}}}

Issue created by migration from https://trac.sagemath.org/ticket/20080





---

archive/issue_comments_272368.json:
```json
{
    "body": "I would like to mention `sphinxify.py` which is currently part of `sagenb` but should be moved to inside `sage` proper ASAP. `sphinxify` is called from `sage/misc/sagedoc.py` both at doc building time and run time.",
    "created_at": "2016-02-18T20:09:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19843#issuecomment-272368",
    "user": "https://github.com/kiwifb"
}
```

I would like to mention `sphinxify.py` which is currently part of `sagenb` but should be moved to inside `sage` proper ASAP. `sphinxify` is called from `sage/misc/sagedoc.py` both at doc building time and run time.



---

archive/issue_comments_272369.json:
```json
{
    "body": "> I would like to mention `sphinxify.py` which is currently part of `sagenb` but should be moved to inside `sage` proper ASAP. `sphinxify` is called from `sage/misc/sagedoc.py` both at doc building time and run time. \n\nI'm open to PRs, as this seems pretty reasonable - docbuild shouldn't depend on sagenb, though we would still want the doc to work from within it.",
    "created_at": "2016-02-23T18:04:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19843#issuecomment-272369",
    "user": "https://github.com/kcrisman"
}
```

> I would like to mention `sphinxify.py` which is currently part of `sagenb` but should be moved to inside `sage` proper ASAP. `sphinxify` is called from `sage/misc/sagedoc.py` both at doc building time and run time. 

I'm open to PRs, as this seems pretty reasonable - docbuild shouldn't depend on sagenb, though we would still want the doc to work from within it.



---

archive/issue_comments_272370.json:
```json
{
    "body": "Could someone clarify what\n\n> This is a slightly hacked-up version of the Sphinx-multidoc plugin\n\nmeans?\n\nI can't find any reference to a Sphinx multidoc plugin outside of Sage.",
    "created_at": "2016-07-27T10:09:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19843#issuecomment-272370",
    "user": "https://github.com/embray"
}
```

Could someone clarify what

> This is a slightly hacked-up version of the Sphinx-multidoc plugin

means?

I can't find any reference to a Sphinx multidoc plugin outside of Sage.



---

archive/issue_comments_272371.json:
```json
{
    "body": "Fixed :-)",
    "created_at": "2016-07-27T10:13:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19843#issuecomment-272371",
    "user": "https://github.com/jdemeyer"
}
```

Fixed :-)



---

archive/issue_comments_272372.json:
```json
{
    "body": "I'm having \"fun\" finally taking the time to fully understand the doc builds system... :)",
    "created_at": "2016-07-27T10:19:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19843#issuecomment-272372",
    "user": "https://github.com/embray"
}
```

I'm having "fun" finally taking the time to fully understand the doc builds system... :)



---

archive/issue_comments_272373.json:
```json
{
    "body": "it would be a good idea to revise this, or perhaps just start from scratch. It's not clear to me whether most/all of this can be achieved with vanilla Sphinx 3 or 4.",
    "created_at": "2020-06-29T09:46:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19843#issuecomment-272373",
    "user": "https://github.com/dimpase"
}
```

it would be a good idea to revise this, or perhaps just start from scratch. It's not clear to me whether most/all of this can be achieved with vanilla Sphinx 3 or 4.



---

archive/issue_comments_272374.json:
```json
{
    "body": "Related: #30010\t- Split sage_setup.docbuild out to a separate distribution (distutils package)",
    "created_at": "2020-07-16T19:39:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19843#issuecomment-272374",
    "user": "https://github.com/mkoeppe"
}
```

Related: #30010	- Split sage_setup.docbuild out to a separate distribution (distutils package)



---

archive/issue_comments_272375.json:
```json
{
    "body": "One of sphinx devs, \nTakeshi KOMIYA, is going to do a comparison with \"native\" sphinx for the reference manual - https://github.com/sphinx-doc/sphinx/issues/7891",
    "created_at": "2020-07-17T07:44:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19843#issuecomment-272375",
    "user": "https://github.com/dimpase"
}
```

One of sphinx devs, 
Takeshi KOMIYA, is going to do a comparison with "native" sphinx for the reference manual - https://github.com/sphinx-doc/sphinx/issues/7891



---

archive/issue_comments_272376.json:
```json
{
    "body": "Cool!",
    "created_at": "2020-07-21T07:28:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19843#issuecomment-272376",
    "user": "https://github.com/nthiery"
}
```

Cool!



---

archive/issue_events_054662.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-08T23:11:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19843",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19843#event-54662"
}
```



---

archive/issue_comments_272377.json:
```json
{
    "body": "Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19843#issuecomment-272377",
    "user": "https://github.com/mkoeppe"
}
```

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_054663.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19843",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19843#event-54663"
}
```



---

archive/issue_events_054664.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19843",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19843#event-54664"
}
```



---

archive/issue_events_054665.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-10T17:30:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19843",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19843#event-54665"
}
```



---

archive/issue_events_054666.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-10T17:30:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19843",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19843#event-54666"
}
```



---

archive/issue_events_054667.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:41:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19843",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19843#event-54667"
}
```



---

archive/issue_events_054668.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:41:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19843",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19843#event-54668"
}
```



---

archive/issue_events_054669.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:17:06Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19843",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19843#event-54669"
}
```



---

archive/issue_events_054670.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:17:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19843",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19843#event-54670"
}
```



---

archive/issue_events_054671.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19843",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19843#event-54671"
}
```



---

archive/issue_events_054672.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19843",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19843#event-54672"
}
```
