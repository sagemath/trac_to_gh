# Issue 11966: Fix parallel building zlib

archive/issues_011966.json:
```json
{
    "body": "Assignee: tbd\n\nCC:  @jhpalmieri\n\nSee [http://sage.math.washington.edu/home/palmieri/misc/zlib-1.2.5.log](http://sage.math.washington.edu/home/palmieri/misc/zlib-1.2.5.log)\n\nIssue created by migration from https://trac.sagemath.org/ticket/12138\n\n",
    "created_at": "2011-12-09T22:11:31Z",
    "labels": [
        "component: packages: standard",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.8",
    "title": "Fix parallel building zlib",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11966",
    "user": "https://github.com/jdemeyer"
}
```
Assignee: tbd

CC:  @jhpalmieri

See [http://sage.math.washington.edu/home/palmieri/misc/zlib-1.2.5.log](http://sage.math.washington.edu/home/palmieri/misc/zlib-1.2.5.log)

Issue created by migration from https://trac.sagemath.org/ticket/12138





---

archive/issue_comments_137444.json:
```json
{
    "body": "John, could you please test both the old and new zlib spkgs using\n\n```\nMAKEFLAGS=\"j8\" ./sage -f zlib...\n```\n\n\n(or some other value of j)\n\nOn Linux, I do not manage to reproduce the issue.",
    "created_at": "2011-12-09T23:23:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11966#issuecomment-137444",
    "user": "https://github.com/jdemeyer"
}
```

John, could you please test both the old and new zlib spkgs using

```
MAKEFLAGS="j8" ./sage -f zlib...
```


(or some other value of j)

On Linux, I do not manage to reproduce the issue.



---

archive/issue_comments_137445.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-12-09T23:23:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11966#issuecomment-137445",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_137446.json:
```json
{
    "body": "Managed to reproduce anyway with the old zlib on sage.math, not with the new one here.  So looks good, but needs formal review.",
    "created_at": "2011-12-09T23:56:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11966#issuecomment-137446",
    "user": "https://github.com/jdemeyer"
}
```

Managed to reproduce anyway with the old zlib on sage.math, not with the new one here.  So looks good, but needs formal review.



---

archive/issue_comments_137447.json:
```json
{
    "body": "Attachment [zlib-1.2.5-p0.diff](tarball://root/attachments/some-uuid/ticket12138/zlib-1.2.5-p0.diff) by @jdemeyer created at 2011-12-09 23:58:42\n\nDiff for the zlib spkg, for review only",
    "created_at": "2011-12-09T23:58:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11966#issuecomment-137447",
    "user": "https://github.com/jdemeyer"
}
```

Attachment [zlib-1.2.5-p0.diff](tarball://root/attachments/some-uuid/ticket12138/zlib-1.2.5-p0.diff) by @jdemeyer created at 2011-12-09 23:58:42

Diff for the zlib spkg, for review only



---

archive/issue_comments_137448.json:
```json
{
    "body": "Looks good to me and builds consistently on sage.math and on OS X, under circumstances where the old spkg failed.  (For example, on OS X, I got the old spkg to fail on 7 out of 10 builds, while this one built 20 times in row with no failures, and similarly on sage.math, using `MAKEFLAGS='j -l2' ./sage -f ...`.)",
    "created_at": "2011-12-10T03:20:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11966#issuecomment-137448",
    "user": "https://github.com/jhpalmieri"
}
```

Looks good to me and builds consistently on sage.math and on OS X, under circumstances where the old spkg failed.  (For example, on OS X, I got the old spkg to fail on 7 out of 10 builds, while this one built 20 times in row with no failures, and similarly on sage.math, using `MAKEFLAGS='j -l2' ./sage -f ...`.)



---

archive/issue_comments_137449.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-12-10T03:20:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11966#issuecomment-137449",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_137450.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-12-10T10:44:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11966",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11966#issuecomment-137450",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_012012.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-10T10:44:24Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/11966",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11966#event-12012"
}
```
