# Issue 11966: Fix parallel building zlib

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2011-12-09 22:11:31

Assignee: tbd

CC:  jhpalmieri

See [http://sage.math.washington.edu/home/palmieri/misc/zlib-1.2.5.log](http://sage.math.washington.edu/home/palmieri/misc/zlib-1.2.5.log)


---

Comment by jdemeyer created at 2011-12-09 23:23:18

John, could you please test both the old and new zlib spkgs using

```
MAKEFLAGS="j8" ./sage -f zlib...
```


(or some other value of j)

On Linux, I do not manage to reproduce the issue.


---

Comment by jdemeyer created at 2011-12-09 23:23:18

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2011-12-09 23:56:41

Managed to reproduce anyway with the old zlib on sage.math, not with the new one here.  So looks good, but needs formal review.


---

Attachment

Diff for the zlib spkg, for review only


---

Comment by jhpalmieri created at 2011-12-10 03:20:13

Looks good to me and builds consistently on sage.math and on OS X, under circumstances where the old spkg failed.  (For example, on OS X, I got the old spkg to fail on 7 out of 10 builds, while this one built 20 times in row with no failures, and similarly on sage.math, using `MAKEFLAGS='j -l2' ./sage -f ...`.)


---

Comment by jhpalmieri created at 2011-12-10 03:20:13

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2011-12-10 10:44:24

Resolution: fixed
