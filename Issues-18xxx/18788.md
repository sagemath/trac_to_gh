# Issue 18788: Reorganize /build

archive/issues_018551.json:
```json
{
    "body": "Proposal: Make /build the root for the `sage_bootstrap` Python module\n* /build/sage_bootstrap/...\n* /build/setup.py\n* /build/tox.ini\n* /build/bin/sage-package\n* /build/bin/sage-spkg\n\nKeep the current package metadata at \n* /build/pkgs/...\n\nMove the makefile stuff to\n* /build/make/Makefile\n* /build/make/deps\n* /build/make/pipestatus\n* /build/make/install\n* /build/make/...\n\nCC:  @jdemeyer\n\nBranch/Commit: 35efc21ddedc54eeb57bfd5fd8df3dd7b688ae08\n\nReviewer: Jeroen Demeyer\n\nAuthor: Volker Braun\n\nDependencies: #18748, #18710\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/18788\n\n",
    "closed_at": "2015-07-15T20:07:55Z",
    "created_at": "2015-06-25T20:15:38Z",
    "labels": [
        "component: build"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.8",
    "title": "Reorganize /build",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18788",
    "user": "https://github.com/vbraun"
}
```
Proposal: Make /build the root for the `sage_bootstrap` Python module
* /build/sage_bootstrap/...
* /build/setup.py
* /build/tox.ini
* /build/bin/sage-package
* /build/bin/sage-spkg

Keep the current package metadata at 
* /build/pkgs/...

Move the makefile stuff to
* /build/make/Makefile
* /build/make/deps
* /build/make/pipestatus
* /build/make/install
* /build/make/...

CC:  @jdemeyer

Branch/Commit: 35efc21ddedc54eeb57bfd5fd8df3dd7b688ae08

Reviewer: Jeroen Demeyer

Author: Volker Braun

Dependencies: #18748, #18710

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/18788





---

archive/issue_comments_331401.json:
```json
{
    "body": "Changing branch from \"\" to \"u/vbraun/reorganize_build\"",
    "created_at": "2015-06-27T23:02:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331401",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "" to "u/vbraun/reorganize_build"



---

archive/issue_comments_331402.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2015-06-27T23:03:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331402",
    "user": "https://github.com/vbraun"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_331403.json:
```json
{
    "body": "<a id='comment:2'></a>Note to self: this will require an updated confball\n\n---\nNew commits:",
    "created_at": "2015-06-27T23:03:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331403",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:2'></a>Note to self: this will require an updated confball

---
New commits:



---

archive/issue_comments_331404.json:
```json
{
    "body": "Changing commit from \"\" to \"a7546b152b891b6abb501354b8f127bebedfba7e\"",
    "created_at": "2015-06-27T23:03:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331404",
    "user": "https://github.com/vbraun"
}
```

Changing commit from "" to "a7546b152b891b6abb501354b8f127bebedfba7e"



---

archive/issue_comments_331405.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to build.",
    "created_at": "2015-06-27T23:03:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331405",
    "user": "https://github.com/vbraun"
}
```

Changing component from PLEASE CHANGE to build.



---

archive/issue_comments_331406.json:
```json
{
    "body": "<a id='comment:3'></a>FYI: this conflicts heavily with #18710.",
    "created_at": "2015-06-28T08:05:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331406",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:3'></a>FYI: this conflicts heavily with #18710.



---

archive/issue_comments_331407.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,13 @@\n Proposal: Make /build the root for the `sage_bootstrap` Python module\n * /build/sage_bootstrap/...\n-* /build/bin/sage-package\n * /build/setup.py\n * /build/tox.ini\n+\n+Move scripts to\n+* /build/bin/sage-package\n+* /build/bin/sage-spkg\n+* /build/bin/pipestatus\n+* /build/bin/install\n \n Keep the current package metadata at \n * /build/pkgs/...\n@@ -10,7 +15,6 @@\n Move the makefile stuff to\n * /build/make/Makefile\n * /build/make/deps\n-* /build/make/install\n * /build/make/...\n \n Dependencies: #18748\n``````\n",
    "created_at": "2015-06-28T08:09:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331407",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,13 @@
 Proposal: Make /build the root for the `sage_bootstrap` Python module
 * /build/sage_bootstrap/...
-* /build/bin/sage-package
 * /build/setup.py
 * /build/tox.ini
+
+Move scripts to
+* /build/bin/sage-package
+* /build/bin/sage-spkg
+* /build/bin/pipestatus
+* /build/bin/install
 
 Keep the current package metadata at 
 * /build/pkgs/...
@@ -10,7 +15,6 @@
 Move the makefile stuff to
 * /build/make/Makefile
 * /build/make/deps
-* /build/make/install
 * /build/make/...
 
 Dependencies: #18748
``````




---

archive/issue_comments_331408.json:
```json
{
    "body": "Changing commit from \"a7546b152b891b6abb501354b8f127bebedfba7e\" to \"fd25c7c52f2544bf287e18defa67755281ad55d3\"",
    "created_at": "2015-06-28T09:09:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331408",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a7546b152b891b6abb501354b8f127bebedfba7e" to "fd25c7c52f2544bf287e18defa67755281ad55d3"



---

archive/issue_comments_331409.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-28T09:09:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331409",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_331410.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-28T09:23:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331410",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_331411.json:
```json
{
    "body": "Changing commit from \"fd25c7c52f2544bf287e18defa67755281ad55d3\" to \"bd3149b68bcf18ec0660d4fa90b5c9ea9c03ea53\"",
    "created_at": "2015-06-28T09:23:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331411",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "fd25c7c52f2544bf287e18defa67755281ad55d3" to "bd3149b68bcf18ec0660d4fa90b5c9ea9c03ea53"



---

archive/issue_comments_331412.json:
```json
{
    "body": "<a id='comment:7'></a>IMHO the pipestatus and install scripts are just a symptom of the makefile hack. They should be removed when we switch to a sane build system, so they shouldn't be in build/bin",
    "created_at": "2015-06-28T09:40:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331412",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:7'></a>IMHO the pipestatus and install scripts are just a symptom of the makefile hack. They should be removed when we switch to a sane build system, so they shouldn't be in build/bin



---

archive/issue_comments_331413.json:
```json
{
    "body": "Changing dependencies from \"#18748\" to \"#18748,\"",
    "created_at": "2015-06-28T09:40:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331413",
    "user": "https://github.com/vbraun"
}
```

Changing dependencies from "#18748" to "#18748,"



---

archive/issue_comments_331414.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,19 @@\n+Proposal: Make /build the root for the `sage_bootstrap` Python module\n+* /build/sage_bootstrap/...\n+* /build/setup.py\n+* /build/tox.ini\n+* /build/bin/sage-package\n+* /build/bin/sage-spkg\n \n+Keep the current package metadata at \n+* /build/pkgs/...\n+\n+Move the makefile stuff to\n+* /build/make/Makefile\n+* /build/make/deps\n+* /build/make/pipestatus\n+* /build/make/install\n+* /build/make/...\n \n Dependencies: #18748\n \n``````\n",
    "created_at": "2015-06-28T09:40:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331414",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,19 @@
+Proposal: Make /build the root for the `sage_bootstrap` Python module
+* /build/sage_bootstrap/...
+* /build/setup.py
+* /build/tox.ini
+* /build/bin/sage-package
+* /build/bin/sage-spkg
 
+Keep the current package metadata at 
+* /build/pkgs/...
+
+Move the makefile stuff to
+* /build/make/Makefile
+* /build/make/deps
+* /build/make/pipestatus
+* /build/make/install
+* /build/make/...
 
 Dependencies: #18748
 
``````




---

archive/issue_comments_331415.json:
```json
{
    "body": "Changing dependencies from \"#18748,\" to \"#18748, #18710\"",
    "created_at": "2015-06-28T09:40:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331415",
    "user": "https://github.com/vbraun"
}
```

Changing dependencies from "#18748," to "#18748, #18710"



---

archive/issue_comments_331416.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-28T13:55:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331416",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_331417.json:
```json
{
    "body": "Changing commit from \"bd3149b68bcf18ec0660d4fa90b5c9ea9c03ea53\" to \"0aa6cfb23685ed7a653e0ccdd1c27e67fb005140\"",
    "created_at": "2015-06-28T13:55:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331417",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "bd3149b68bcf18ec0660d4fa90b5c9ea9c03ea53" to "0aa6cfb23685ed7a653e0ccdd1c27e67fb005140"



---

archive/issue_comments_331418.json:
```json
{
    "body": "<a id='comment:10'></a>The last commit fixes the doctest failure introduced in #18710 (but only triggered after build from scratch):\n\n```\nsage -t --warn-long 27.4 src/sage/misc/package.py\n**********************************************************************\nFile \"src/sage/misc/package.py\", line 193, in sage.misc.package.is_package_installed\nFailed example:\n    is_package_installed('sage')\nExpected:\n    True\nGot:\n    False\n**********************************************************************\n1 item had failures:\n   1 of   4 in sage.misc.package.is_package_installed\n    [15 tests, 1 failure, 0.08 s]\n```",
    "created_at": "2015-06-28T13:57:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331418",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:10'></a>The last commit fixes the doctest failure introduced in #18710 (but only triggered after build from scratch):

```
sage -t --warn-long 27.4 src/sage/misc/package.py
**********************************************************************
File "src/sage/misc/package.py", line 193, in sage.misc.package.is_package_installed
Failed example:
    is_package_installed('sage')
Expected:
    True
Got:
    False
**********************************************************************
1 item had failures:
   1 of   4 in sage.misc.package.is_package_installed
    [15 tests, 1 failure, 0.08 s]
```



---

archive/issue_comments_331419.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-06-28T13:57:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331419",
    "user": "https://github.com/vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_331420.json:
```json
{
    "body": "Changing author from \"\" to \"Volker Braun\"",
    "created_at": "2015-06-28T13:57:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331420",
    "user": "https://github.com/vbraun"
}
```

Changing author from "" to "Volker Braun"



---

archive/issue_comments_331421.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:7 vbraun]:\n> IMHO the pipestatus and install scripts are just a symptom of the makefile hack. They should be removed when we switch to a sane build system, so they shouldn't be in build/bin\n\n\nFor the record: I don't think makefiles are a hack. The current system surely is far from perfect, but it actually does work pretty well.",
    "created_at": "2015-06-28T19:08:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331421",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>Replying to [comment:7 vbraun]:
> IMHO the pipestatus and install scripts are just a symptom of the makefile hack. They should be removed when we switch to a sane build system, so they shouldn't be in build/bin


For the record: I don't think makefiles are a hack. The current system surely is far from perfect, but it actually does work pretty well.



---

archive/issue_comments_331422.json:
```json
{
    "body": "<a id='comment:13'></a>Replying to [comment:10 vbraun]:\n> The last commit fixes the doctest failure introduced in #18710 (but only triggered after build from scratch):\n> \n> ```\n> sage -t --warn-long 27.4 src/sage/misc/package.py\n> **********************************************************************\n> File \"src/sage/misc/package.py\", line 193, in sage.misc.package.is_package_installed\n> Failed example:\n>     is_package_installed('sage')\n> Expected:\n>     True\n> Got:\n>     False\n> **********************************************************************\n> 1 item had failures:\n>    1 of   4 in sage.misc.package.is_package_installed\n>     [15 tests, 1 failure, 0.08 s]\n> ```\n\n\nI don't think this commit should be on this ticket, but on a separate blocker ticket with just this one commit.\n\nAlso: don't you test building from scratch when closing a ticket?",
    "created_at": "2015-06-28T19:10:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331422",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>Replying to [comment:10 vbraun]:
> The last commit fixes the doctest failure introduced in #18710 (but only triggered after build from scratch):
> 
> ```
> sage -t --warn-long 27.4 src/sage/misc/package.py
> **********************************************************************
> File "src/sage/misc/package.py", line 193, in sage.misc.package.is_package_installed
> Failed example:
>     is_package_installed('sage')
> Expected:
>     True
> Got:
>     False
> **********************************************************************
> 1 item had failures:
>    1 of   4 in sage.misc.package.is_package_installed
>     [15 tests, 1 failure, 0.08 s]
> ```


I don't think this commit should be on this ticket, but on a separate blocker ticket with just this one commit.

Also: don't you test building from scratch when closing a ticket?



---

archive/issue_comments_331423.json:
```json
{
    "body": "<a id='comment:14'></a>In case I haven't made it sufficiently clear on #18748: I am still against the fact that you first create `src/sage_bootstrap/sage_bootstrap` on #18748 and then immediately move it to `build/sage_bootstrap` on this ticket. This is just making things needlessly complicated.",
    "created_at": "2015-06-28T19:15:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331423",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'></a>In case I haven't made it sufficiently clear on #18748: I am still against the fact that you first create `src/sage_bootstrap/sage_bootstrap` on #18748 and then immediately move it to `build/sage_bootstrap` on this ticket. This is just making things needlessly complicated.



---

archive/issue_comments_331424.json:
```json
{
    "body": "<a id='comment:15'></a>Well we just saw that the current system can't do reliable incremental builds, I think that this is pretty bad. That was ok 20 years ago but today this is hardly state of the art.\n\nFor the record, I'm only doing incremental builds for each ticket on the buildbot. In addition, there is a weekly full build.\n\nYou can review both tickets at the same time if the location of `sage_bootstrap` irks you.",
    "created_at": "2015-06-28T19:25:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331424",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:15'></a>Well we just saw that the current system can't do reliable incremental builds, I think that this is pretty bad. That was ok 20 years ago but today this is hardly state of the art.

For the record, I'm only doing incremental builds for each ticket on the buildbot. In addition, there is a weekly full build.

You can review both tickets at the same time if the location of `sage_bootstrap` irks you.



---

archive/issue_comments_331425.json:
```json
{
    "body": "<a id='comment:16'></a>Replying to [comment:15 vbraun]:\n> Well we just saw that the current system can't do reliable incremental builds\n\nWhat do you refer to?",
    "created_at": "2015-06-29T06:02:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331425",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'></a>Replying to [comment:15 vbraun]:
> Well we just saw that the current system can't do reliable incremental builds

What do you refer to?



---

archive/issue_comments_331426.json:
```json
{
    "body": "<a id='comment:17'></a>Replying to [comment:13 jdemeyer]:\n> I don't think this commit should be on this ticket, but on a separate blocker ticket with just this one commit.\n\nSee #18806 instead.",
    "created_at": "2015-06-29T06:07:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331426",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'></a>Replying to [comment:13 jdemeyer]:
> I don't think this commit should be on this ticket, but on a separate blocker ticket with just this one commit.

See #18806 instead.



---

archive/issue_comments_331427.json:
```json
{
    "body": "<a id='comment:18'></a>Replying to [comment:16 jdemeyer]:\n> Replying to [comment:15 vbraun]:\n> > Well we just saw that the current system can't do reliable incremental builds\n\n> What do you refer to?\n\nI refer to #18710 working fine on incremental builds but breaking full builds. By definition, that means our build system cannot reliably do incremental builds. Really, the build system has one job to do and it failed at it. Essentially, improper handling of build artifacts. Thats ok if you have a small library, but it hurts when a full rebuild takes an hour, and it makes truly large-scale software projects impossible (e.g. google built blaze/bazel when they hit that wall with makefiles).",
    "created_at": "2015-06-29T08:17:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331427",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:18'></a>Replying to [comment:16 jdemeyer]:
> Replying to [comment:15 vbraun]:
> > Well we just saw that the current system can't do reliable incremental builds

> What do you refer to?

I refer to #18710 working fine on incremental builds but breaking full builds. By definition, that means our build system cannot reliably do incremental builds. Really, the build system has one job to do and it failed at it. Essentially, improper handling of build artifacts. Thats ok if you have a small library, but it hurts when a full rebuild takes an hour, and it makes truly large-scale software projects impossible (e.g. google built blaze/bazel when they hit that wall with makefiles).



---

archive/issue_comments_331428.json:
```json
{
    "body": "<a id='comment:19'></a>Replying to [comment:18 vbraun]:\n> I refer to #18710 working fine on incremental builds but breaking full builds.\n\nSo the fact that one ticket changing the build system breaks it proves that it's not reliable?\n\nWhat do you want, a build system that is impossible to break when changing it?",
    "created_at": "2015-06-29T09:42:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331428",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:19'></a>Replying to [comment:18 vbraun]:
> I refer to #18710 working fine on incremental builds but breaking full builds.

So the fact that one ticket changing the build system breaks it proves that it's not reliable?

What do you want, a build system that is impossible to break when changing it?



---

archive/issue_comments_331429.json:
```json
{
    "body": "<a id='comment:20'></a>Yes. There are various open/free implementations that do precisely that, so why shouldn't we?",
    "created_at": "2015-06-29T09:50:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331429",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:20'></a>Yes. There are various open/free implementations that do precisely that, so why shouldn't we?



---

archive/issue_comments_331430.json:
```json
{
    "body": "Changing commit from \"0aa6cfb23685ed7a653e0ccdd1c27e67fb005140\" to \"a497d236579ef680a5b7171c536348fc0c3089be\"",
    "created_at": "2015-07-04T09:36:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331430",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "0aa6cfb23685ed7a653e0ccdd1c27e67fb005140" to "a497d236579ef680a5b7171c536348fc0c3089be"



---

archive/issue_comments_331431.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-04T09:36:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331431",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_331432.json:
```json
{
    "body": "Changing branch from \"u/vbraun/reorganize_build\" to \"u/jdemeyer/reorganize_build\"",
    "created_at": "2015-07-14T08:07:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331432",
    "user": "https://github.com/jdemeyer"
}
```

Changing branch from "u/vbraun/reorganize_build" to "u/jdemeyer/reorganize_build"



---

archive/issue_comments_331433.json:
```json
{
    "body": "<a id='comment:23'></a>Squashed on top of #18748 for easier reviewing.\n\n---\nNew commits:",
    "created_at": "2015-07-14T08:09:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331433",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:23'></a>Squashed on top of #18748 for easier reviewing.

---
New commits:



---

archive/issue_comments_331434.json:
```json
{
    "body": "Changing commit from \"a497d236579ef680a5b7171c536348fc0c3089be\" to \"0e168b13f36e0b6af6de5d521fa18f9054cb1add\"",
    "created_at": "2015-07-14T08:09:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331434",
    "user": "https://github.com/jdemeyer"
}
```

Changing commit from "a497d236579ef680a5b7171c536348fc0c3089be" to "0e168b13f36e0b6af6de5d521fa18f9054cb1add"



---

archive/issue_comments_331435.json:
```json
{
    "body": "Changing commit from \"0e168b13f36e0b6af6de5d521fa18f9054cb1add\" to \"b324ff0f8ba4899ae0cf58eded2c0933b2adf1b5\"",
    "created_at": "2015-07-14T08:44:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331435",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "0e168b13f36e0b6af6de5d521fa18f9054cb1add" to "b324ff0f8ba4899ae0cf58eded2c0933b2adf1b5"



---

archive/issue_comments_331436.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-14T08:44:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331436",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_331437.json:
```json
{
    "body": "<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-14T09:05:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331437",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_331438.json:
```json
{
    "body": "Changing commit from \"b324ff0f8ba4899ae0cf58eded2c0933b2adf1b5\" to \"550b26e15578fc24d4c27222a99957e9162eef31\"",
    "created_at": "2015-07-14T09:05:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331438",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b324ff0f8ba4899ae0cf58eded2c0933b2adf1b5" to "550b26e15578fc24d4c27222a99957e9162eef31"



---

archive/issue_comments_331439.json:
```json
{
    "body": "<a id='comment:26'></a>This looks okay to me now, what remains is testing.",
    "created_at": "2015-07-14T09:09:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331439",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:26'></a>This looks okay to me now, what remains is testing.



---

archive/issue_comments_331440.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Jeroen Demeyer\"",
    "created_at": "2015-07-14T09:09:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331440",
    "user": "https://github.com/jdemeyer"
}
```

Changing reviewer from "" to "Jeroen Demeyer"



---

archive/issue_comments_331441.json:
```json
{
    "body": "<a id='comment:27'></a>Seems to work...\n\nI give positive_review to your commit, somebody needs to review mine.",
    "created_at": "2015-07-14T13:23:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331441",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:27'></a>Seems to work...

I give positive_review to your commit, somebody needs to review mine.



---

archive/issue_comments_331442.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-07-14T17:25:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331442",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_052558.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-07-15T08:59:07Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18788#event-52558"
}
```



---

archive/issue_comments_331443.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-07-15T08:59:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331443",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_331444.json:
```json
{
    "body": "Changing branch from \"u/jdemeyer/reorganize_build\" to \"550b26e15578fc24d4c27222a99957e9162eef31\"",
    "created_at": "2015-07-15T08:59:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331444",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/jdemeyer/reorganize_build" to "550b26e15578fc24d4c27222a99957e9162eef31"



---

archive/issue_comments_331445.json:
```json
{
    "body": "Changing branch from \"550b26e15578fc24d4c27222a99957e9162eef31\" to \"u/jdemeyer/reorganize_build\"",
    "created_at": "2015-07-15T09:17:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331445",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "550b26e15578fc24d4c27222a99957e9162eef31" to "u/jdemeyer/reorganize_build"



---

archive/issue_comments_331446.json:
```json
{
    "body": "<a id='comment:30'></a>wrong path in sage-sdist",
    "created_at": "2015-07-15T09:17:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331446",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:30'></a>wrong path in sage-sdist



---

archive/issue_comments_331447.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2015-07-15T09:17:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331447",
    "user": "https://github.com/vbraun"
}
```

Changing status from closed to new.



---

archive/issue_events_052559.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-07-15T09:17:58Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18788#event-52559"
}
```



---

archive/issue_comments_331448.json:
```json
{
    "body": "Resolution changed from fixed to ",
    "created_at": "2015-07-15T09:17:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331448",
    "user": "https://github.com/vbraun"
}
```

Resolution changed from fixed to 



---

archive/issue_comments_331449.json:
```json
{
    "body": "Changing branch from \"u/jdemeyer/reorganize_build\" to \"u/vbraun/reorganize_build\"",
    "created_at": "2015-07-15T09:22:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331449",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/jdemeyer/reorganize_build" to "u/vbraun/reorganize_build"



---

archive/issue_comments_331450.json:
```json
{
    "body": "Changing commit from \"550b26e15578fc24d4c27222a99957e9162eef31\" to \"c1be005d25d13620216b9ac0700e87cb8aaf3c48\"",
    "created_at": "2015-07-15T09:22:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331450",
    "user": "https://github.com/vbraun"
}
```

Changing commit from "550b26e15578fc24d4c27222a99957e9162eef31" to "c1be005d25d13620216b9ac0700e87cb8aaf3c48"



---

archive/issue_comments_331451.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-07-15T09:22:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331451",
    "user": "https://github.com/vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_331452.json:
```json
{
    "body": "<a id='comment:32'></a>New commits:",
    "created_at": "2015-07-15T09:22:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331452",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:32'></a>New commits:



---

archive/issue_comments_331453.json:
```json
{
    "body": "<a id='comment:33'></a>The `sage-sdist` fix is obviously ok.\n\nBut I'm confused with the git history, did you just completely forget about my branch? If that was a mistake, I give positive review to your last commit cherry-picked onto my branch.",
    "created_at": "2015-07-15T19:40:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331453",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:33'></a>The `sage-sdist` fix is obviously ok.

But I'm confused with the git history, did you just completely forget about my branch? If that was a mistake, I give positive review to your last commit cherry-picked onto my branch.



---

archive/issue_comments_331454.json:
```json
{
    "body": "<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2015-07-15T19:54:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331454",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_331455.json:
```json
{
    "body": "Changing commit from \"c1be005d25d13620216b9ac0700e87cb8aaf3c48\" to \"35efc21ddedc54eeb57bfd5fd8df3dd7b688ae08\"",
    "created_at": "2015-07-15T19:54:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331455",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c1be005d25d13620216b9ac0700e87cb8aaf3c48" to "35efc21ddedc54eeb57bfd5fd8df3dd7b688ae08"



---

archive/issue_comments_331456.json:
```json
{
    "body": "<a id='comment:35'></a>thanks, forgot to pull...",
    "created_at": "2015-07-15T19:55:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331456",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:35'></a>thanks, forgot to pull...



---

archive/issue_comments_331457.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-07-15T19:55:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331457",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_052560.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-07-15T20:07:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18788#event-52560"
}
```



---

archive/issue_comments_331458.json:
```json
{
    "body": "Changing branch from \"u/vbraun/reorganize_build\" to \"35efc21ddedc54eeb57bfd5fd8df3dd7b688ae08\"",
    "created_at": "2015-07-15T20:07:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331458",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/vbraun/reorganize_build" to "35efc21ddedc54eeb57bfd5fd8df3dd7b688ae08"



---

archive/issue_comments_331459.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-07-15T20:07:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18788",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18788#issuecomment-331459",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
