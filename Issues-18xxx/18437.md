# Issue 18437: Switch from PolyBoRi to BRiAl

archive/issues_018200.json:
```json
{
    "body": "Right now PolyBoRi relies on scons (which is still Python 2 only), and has some Python 2 specific syntax in its bindings. These issues will need to be resolved before Sage can support Python 3.\n\nOn this ticket we update to the first version of BRiAl which includes a new (incomplete, but sufficient for our purposes) autotools based system.\n\nTo achieve this, we fork upstream `polybori`, see [https://github.com/BRiAl/BRiAl](https://github.com/BRiAl/BRiAl)\n\n**Tarball**: [https://github.com/BRiAl/BRiAl/releases/download/0.8.4.3/brial-0.8.4.3.tar.bz2](https://github.com/BRiAl/BRiAl/releases/download/0.8.4.3/brial-0.8.4.3.tar.bz2)\n\nCC:  @malb\n\nBranch/Commit: 7ff3b098528643b5e7e698f9883a0a6b9107eb20\n\nReviewer: Fran\u00e7ois Bissey\n\nAuthor: R. Andrew Ohana\n\nDependencies: #19085\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/18437\n\n",
    "closed_at": "2015-08-29T23:56:40Z",
    "created_at": "2015-05-18T07:59:48Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.9",
    "title": "Switch from PolyBoRi to BRiAl",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18437",
    "user": "https://github.com/ohanar"
}
```
Right now PolyBoRi relies on scons (which is still Python 2 only), and has some Python 2 specific syntax in its bindings. These issues will need to be resolved before Sage can support Python 3.

On this ticket we update to the first version of BRiAl which includes a new (incomplete, but sufficient for our purposes) autotools based system.

To achieve this, we fork upstream `polybori`, see [https://github.com/BRiAl/BRiAl](https://github.com/BRiAl/BRiAl)

**Tarball**: [https://github.com/BRiAl/BRiAl/releases/download/0.8.4.3/brial-0.8.4.3.tar.bz2](https://github.com/BRiAl/BRiAl/releases/download/0.8.4.3/brial-0.8.4.3.tar.bz2)

CC:  @malb

Branch/Commit: 7ff3b098528643b5e7e698f9883a0a6b9107eb20

Reviewer: Fran√ßois Bissey

Author: R. Andrew Ohana

Dependencies: #19085

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/18437





---

archive/issue_comments_261289.json:
```json
{
    "body": "<a id='comment:1'></a>Reposted from #15530:\n\nfyi, I started working on an autotools based build system for polybori at https://github.com/ohanar/PolyBoRi/tree/autotools. I'll probably work on it a bit more next weekend during SD 64.25, but the important bits (the c++ libraries) are currently working with only a couple of hacks. What remains (for sage at least) is just a little cleanup and throwing in the bit of the python bindings we use.\n\n---\n\nI also don't know how we should handle this with regards to upstream, since upstream is dead. I certainly don't want to take over maintenance for polybori, but we'll probably need to make some sort of fork.",
    "created_at": "2015-05-18T08:07:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261289",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:1'></a>Reposted from #15530:

fyi, I started working on an autotools based build system for polybori at https://github.com/ohanar/PolyBoRi/tree/autotools. I'll probably work on it a bit more next weekend during SD 64.25, but the important bits (the c++ libraries) are currently working with only a couple of hacks. What remains (for sage at least) is just a little cleanup and throwing in the bit of the python bindings we use.

---

I also don't know how we should handle this with regards to upstream, since upstream is dead. I certainly don't want to take over maintenance for polybori, but we'll probably need to make some sort of fork.



---

archive/issue_comments_261290.json:
```json
{
    "body": "<a id='comment:2'></a>I think there are two separate issues:\n 1) polybori is using a internal copy of a third party package that may not be dead upstream (I think it has updates once in a while): cudd.\n 2) the python bindings\n\nWe could package the libraries properly and then have a separate python binding package, unless `polybori` is altering its upstream significantly beyond the build system. The python binding could be moved in sage making it \"a collective\" responsibility.",
    "created_at": "2015-05-18T08:23:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261290",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:2'></a>I think there are two separate issues:
 1) polybori is using a internal copy of a third party package that may not be dead upstream (I think it has updates once in a while): cudd.
 2) the python bindings

We could package the libraries properly and then have a separate python binding package, unless `polybori` is altering its upstream significantly beyond the build system. The python binding could be moved in sage making it "a collective" responsibility.



---

archive/issue_comments_261291.json:
```json
{
    "body": "<a id='comment:3'></a>Current version of `cudd` in `polybori` is 2.5.0 but upstream at http://vlsi.colorado.edu/~fabio/ has a version 2.5.1 - it is somewhat alive.",
    "created_at": "2015-05-18T08:29:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261291",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:3'></a>Current version of `cudd` in `polybori` is 2.5.0 but upstream at http://vlsi.colorado.edu/~fabio/ has a version 2.5.1 - it is somewhat alive.



---

archive/issue_comments_261292.json:
```json
{
    "body": "<a id='comment:4'></a>Replying to [comment:2 fbissey]:\n> I think there are two separate issues:\n>  1) polybori is using a internal copy of a third party package that may not be dead upstream (I think it has updates once in a while): cudd.\n>  2) the python bindings\n> \n> We could package the libraries properly and then have a separate python binding package, unless `polybori` is altering its upstream significantly beyond the build system. The python binding could be moved in sage making it \"a collective\" responsibility.\n\n\nPolybori has made some real modifications to cudd (I don't think that they are too significant though). From looking at the code it seems like they at least tried to support using an unmodified version, however I don't know if it actually works. Also, cudd's build system looks to be a joke (e.g. assumes `sizeof(void *) == 4` unless you explicitly tell it otherwise), so I don't know how much I would trust it.",
    "created_at": "2015-05-18T08:37:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261292",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:4'></a>Replying to [comment:2 fbissey]:
> I think there are two separate issues:
>  1) polybori is using a internal copy of a third party package that may not be dead upstream (I think it has updates once in a while): cudd.
>  2) the python bindings
> 
> We could package the libraries properly and then have a separate python binding package, unless `polybori` is altering its upstream significantly beyond the build system. The python binding could be moved in sage making it "a collective" responsibility.


Polybori has made some real modifications to cudd (I don't think that they are too significant though). From looking at the code it seems like they at least tried to support using an unmodified version, however I don't know if it actually works. Also, cudd's build system looks to be a joke (e.g. assumes `sizeof(void *) == 4` unless you explicitly tell it otherwise), so I don't know how much I would trust it.



---

archive/issue_comments_261293.json:
```json
{
    "body": "<a id='comment:5'></a>Doesn't sound good. Autotooling something like that is definitely a good idea. But that puts the burden of maintenance on us. Mind you in Gentoo we have patches to autotool all the individual components of `suitesparse` independently of upstream, so it has been/is being done.",
    "created_at": "2015-05-18T08:46:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261293",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:5'></a>Doesn't sound good. Autotooling something like that is definitely a good idea. But that puts the burden of maintenance on us. Mind you in Gentoo we have patches to autotool all the individual components of `suitesparse` independently of upstream, so it has been/is being done.



---

archive/issue_comments_261294.json:
```json
{
    "body": "<a id='comment:6'></a>So I looked a bit more into how exactly polybori modifies cudd, and other than the build system changes, it appears to be just one of two things:\n\n1. Prefixing the symbols to not collide with another installation of cudd\n2. stripping out code that polybori doesn't use (there is only one case that polybori makes any meaningful changes to do this).\n\nGiven this, I don't think it would be hard to make polybori work with a vanilla version of cudd. Also, since upstream cudd is not completely dead, the author might be receptive to a better build system if we provide it.",
    "created_at": "2015-05-18T21:07:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261294",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:6'></a>So I looked a bit more into how exactly polybori modifies cudd, and other than the build system changes, it appears to be just one of two things:

1. Prefixing the symbols to not collide with another installation of cudd
2. stripping out code that polybori doesn't use (there is only one case that polybori makes any meaningful changes to do this).

Given this, I don't think it would be hard to make polybori work with a vanilla version of cudd. Also, since upstream cudd is not completely dead, the author might be receptive to a better build system if we provide it.



---

archive/issue_comments_261295.json:
```json
{
    "body": "<a id='comment:7'></a>I contacted the author of Cudd on Tuesday and have yet to hear back from him. Given that, I think I would prefer not packaging Cudd separately, since maintaining one autotools based system (for polybori) is easier than two (for polybori and for cudd).\n\nI've posted a branch, which uses the tarball at https://github.com/ohanar/PolyBoRi/releases/download/0.8.4/polybori-0.8.4.tar.gz. It doesn't include any of the python bindings, nor any of the tests, so beyond the build system, it is a bit of a fork of polybori. (Maybe we should rename it to something like cropped-polybori.)\n\n---\nNew commits:",
    "created_at": "2015-05-24T05:38:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261295",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:7'></a>I contacted the author of Cudd on Tuesday and have yet to hear back from him. Given that, I think I would prefer not packaging Cudd separately, since maintaining one autotools based system (for polybori) is easier than two (for polybori and for cudd).

I've posted a branch, which uses the tarball at https://github.com/ohanar/PolyBoRi/releases/download/0.8.4/polybori-0.8.4.tar.gz. It doesn't include any of the python bindings, nor any of the tests, so beyond the build system, it is a bit of a fork of polybori. (Maybe we should rename it to something like cropped-polybori.)

---
New commits:



---

archive/issue_comments_261296.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-05-24T05:38:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261296",
    "user": "https://github.com/ohanar"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_261297.json:
```json
{
    "body": "<a id='comment:8'></a>I can easily test the new stuff in Gentoo. I can even test your stuff from git master if that helps.",
    "created_at": "2015-05-24T06:18:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261297",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:8'></a>I can easily test the new stuff in Gentoo. I can even test your stuff from git master if that helps.



---

archive/issue_comments_261298.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-24T06:20:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261298",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_261299.json:
```json
{
    "body": "<a id='comment:10'></a>Yes, I that would be good (at the very least to make sure that I haven't somehow made things work with old artifacts lying around). Point in fact, I just realized that I pushed a little prematurely, as I forgot to include a few headers in the dist. The new tarball is https://github.com/ohanar/PolyBoRi/releases/download/0.8.5/polybori-0.8.5.tar.bz2.\n\nI'm actually using the autotools branch, but at the moment the tip is the new release I just cut. Since this is new, I can squash the history at some point if desired.",
    "created_at": "2015-05-24T06:23:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261299",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:10'></a>Yes, I that would be good (at the very least to make sure that I haven't somehow made things work with old artifacts lying around). Point in fact, I just realized that I pushed a little prematurely, as I forgot to include a few headers in the dist. The new tarball is https://github.com/ohanar/PolyBoRi/releases/download/0.8.5/polybori-0.8.5.tar.bz2.

I'm actually using the autotools branch, but at the moment the tip is the new release I just cut. Since this is new, I can squash the history at some point if desired.



---

archive/issue_comments_261300.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n Right now PolyBoRi relies on scons (which is still Python 2 only), and has some Python 2 specific syntax in its bindings. These issues will need to be resolved before Sage can support Python 3.\n+\n+**(Fake) upstream tarball**: [https://github.com/ohanar/PolyBoRi/releases/download/0.8.5/polybori-0.8.5.tar.bz2](https://github.com/ohanar/PolyBoRi/releases/download/0.8.5/polybori-0.8.5.tar.bz2)\n \n Comment: 1\n \n``````\n",
    "created_at": "2015-05-24T07:07:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261300",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,6 @@
 Right now PolyBoRi relies on scons (which is still Python 2 only), and has some Python 2 specific syntax in its bindings. These issues will need to be resolved before Sage can support Python 3.
+
+**(Fake) upstream tarball**: [https://github.com/ohanar/PolyBoRi/releases/download/0.8.5/polybori-0.8.5.tar.bz2](https://github.com/ohanar/PolyBoRi/releases/download/0.8.5/polybori-0.8.5.tar.bz2)
 
 Comment: 1
 
``````




---

archive/issue_comments_261301.json:
```json
{
    "body": "<a id='comment:12'></a>Exactly what does this patch do? It looks like you're moving part of `polybori` into the Sage library, why that?",
    "created_at": "2015-05-24T07:10:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261301",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>Exactly what does this patch do? It looks like you're moving part of `polybori` into the Sage library, why that?



---

archive/issue_comments_261302.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2015-05-24T07:10:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261302",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_261303.json:
```json
{
    "body": "<a id='comment:14'></a>Extraordinary measures (forking polybori???) need extraordinary justification...",
    "created_at": "2015-05-24T07:15:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261303",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'></a>Extraordinary measures (forking polybori???) need extraordinary justification...



---

archive/issue_comments_261304.json:
```json
{
    "body": "<a id='comment:15'></a>Upstream being dead is ample justification. We had that conversation elsewhere and decided that it was the way to go.",
    "created_at": "2015-05-24T07:17:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261304",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:15'></a>Upstream being dead is ample justification. We had that conversation elsewhere and decided that it was the way to go.



---

archive/issue_comments_261305.json:
```json
{
    "body": "<a id='comment:16'></a>Replying to [comment:15 fbissey]:\n> We had that conversation elsewhere\n\nPointers please...",
    "created_at": "2015-05-24T07:22:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261305",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'></a>Replying to [comment:15 fbissey]:
> We had that conversation elsewhere

Pointers please...



---

archive/issue_comments_261306.json:
```json
{
    "body": "<a id='comment:17'></a>We had some talk over at http://trac.sagemath.org/ticket/15530#comment:32 but I think the confirmation that Alexander and Michael had completely abandoned ship were posted on a thread on sage-devel. I'll dig that up.",
    "created_at": "2015-05-24T07:32:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261306",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:17'></a>We had some talk over at http://trac.sagemath.org/ticket/15530#comment:32 but I think the confirmation that Alexander and Michael had completely abandoned ship were posted on a thread on sage-devel. I'll dig that up.



---

archive/issue_comments_261307.json:
```json
{
    "body": "<a id='comment:18'></a>From sage-devel \"Python 3 focused Sage Days\" thread:\nHi, here's a reply from a PolyBoRi developer:\n\n---\n\nSubject: Re: [Polybori-discuss] Fwd: Re: [sage-devel] Re: Python 3 focused \nSage\tDays\nDate: Saturday 10 Jan 2015, 22:19:16\nFrom: Alexander Dreyer <adreyer`@`t-online.de>\nTo: Martin Albrecht <martinralbrecht`@`googlemail.com>, Polybori Discuss \n<polybori-discuss`@`lists.sourceforge.net>\n\nHi Martin,\nUnfortunately, Andrew's right, PolyBoRi died when its developers left the \nscientific community. I'm not sure, what's the best way for SAGE to deal with \nit. Porting PolyBoRi's py files shouldn't be a big deal, and Sage already uses  \nit's own Cython-bindings for the data structures. What remains is scons. \nPerhaps, it's easier to set up a setup.py or another build system than \nremoving PolyBoRi from all the crypto modules. (You probably know the \ndependencies better than me.) For working around lots of scons issues, most of \nthe SConstruct file is plain python anyway.\n\nBest regards,\n Alexander",
    "created_at": "2015-05-24T07:36:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261307",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:18'></a>From sage-devel "Python 3 focused Sage Days" thread:
Hi, here's a reply from a PolyBoRi developer:

---

Subject: Re: [Polybori-discuss] Fwd: Re: [sage-devel] Re: Python 3 focused 
Sage	Days
Date: Saturday 10 Jan 2015, 22:19:16
From: Alexander Dreyer <adreyer`@`t-online.de>
To: Martin Albrecht <martinralbrecht`@`googlemail.com>, Polybori Discuss 
<polybori-discuss`@`lists.sourceforge.net>

Hi Martin,
Unfortunately, Andrew's right, PolyBoRi died when its developers left the 
scientific community. I'm not sure, what's the best way for SAGE to deal with 
it. Porting PolyBoRi's py files shouldn't be a big deal, and Sage already uses  
it's own Cython-bindings for the data structures. What remains is scons. 
Perhaps, it's easier to set up a setup.py or another build system than 
removing PolyBoRi from all the crypto modules. (You probably know the 
dependencies better than me.) For working around lots of scons issues, most of 
the SConstruct file is plain python anyway.

Best regards,
 Alexander



---

archive/issue_comments_261308.json:
```json
{
    "body": "<a id='comment:19'></a>Even if upstream `polybori` is dead and even if you fork it, that still doesn't mean it should be moved to the Sage library.",
    "created_at": "2015-05-24T08:45:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261308",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:19'></a>Even if upstream `polybori` is dead and even if you fork it, that still doesn't mean it should be moved to the Sage library.



---

archive/issue_comments_261309.json:
```json
{
    "body": "<a id='comment:20'></a>Fair point. The question then is \"does anyone care to have to install sage to get polybori instead of having it as stand alone package?\". If it has users as a stand alone package then it should be kept split. If not, that's at the discretion of whoever actually maintains the code.",
    "created_at": "2015-05-24T10:57:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261309",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:20'></a>Fair point. The question then is "does anyone care to have to install sage to get polybori instead of having it as stand alone package?". If it has users as a stand alone package then it should be kept split. If not, that's at the discretion of whoever actually maintains the code.



---

archive/issue_comments_261310.json:
```json
{
    "body": "<a id='comment:21'></a>Replying to [comment:20 fbissey]:\n> Fair point. The question then is \"does anyone care to have to install sage to get polybori instead of having it as stand alone package?\".\n\nI don't think that's \"the question\".\n\nAll the packaging effort in Sage is really converging towards separating packages from the Sage library proper.\n\nAt the very least, moving `polybori` in the Sage library is a sufficiently big change that it should be discussed on `sage-devel`.",
    "created_at": "2015-05-24T12:56:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261310",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:21'></a>Replying to [comment:20 fbissey]:
> Fair point. The question then is "does anyone care to have to install sage to get polybori instead of having it as stand alone package?".

I don't think that's "the question".

All the packaging effort in Sage is really converging towards separating packages from the Sage library proper.

At the very least, moving `polybori` in the Sage library is a sufficiently big change that it should be discussed on `sage-devel`.



---

archive/issue_comments_261311.json:
```json
{
    "body": "<a id='comment:22'></a>If you really decide to move `polybori` to the Sage library, then I think that\n\n1. moving `polybori` to the Sage library and\n2. making it Python 3 compatible\n\nshould be two different tickets.",
    "created_at": "2015-05-24T12:58:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261311",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:22'></a>If you really decide to move `polybori` to the Sage library, then I think that

1. moving `polybori` to the Sage library and
2. making it Python 3 compatible

should be two different tickets.



---

archive/issue_events_051919.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-05-24T13:02:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "milestone": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18437#event-51919"
}
```



---

archive/issue_comments_261312.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,8 @@\n+Right now PolyBoRi relies on scons (which is still Python 2 only), and has some Python 2 specific syntax in its bindings. These issues will need to be resolved before Sage can support Python 3.\n \n+To achieve this, we fork upstream `polybori`, see [https://github.com/ohanar/PolyBoRi](https://github.com/ohanar/PolyBoRi) and we move the Python bindings to the Sage library.\n+\n+**Tarball**: [https://github.com/ohanar/PolyBoRi/releases/download/0.8.5/polybori-0.8.5.tar.bz2](https://github.com/ohanar/PolyBoRi/releases/download/0.8.5/polybori-0.8.5.tar.bz2)\n \n Comment: 1\n \n``````\n",
    "created_at": "2015-05-24T13:02:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261312",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,8 @@
+Right now PolyBoRi relies on scons (which is still Python 2 only), and has some Python 2 specific syntax in its bindings. These issues will need to be resolved before Sage can support Python 3.
 
+To achieve this, we fork upstream `polybori`, see [https://github.com/ohanar/PolyBoRi](https://github.com/ohanar/PolyBoRi) and we move the Python bindings to the Sage library.
+
+**Tarball**: [https://github.com/ohanar/PolyBoRi/releases/download/0.8.5/polybori-0.8.5.tar.bz2](https://github.com/ohanar/PolyBoRi/releases/download/0.8.5/polybori-0.8.5.tar.bz2)
 
 Comment: 1
 
``````




---

archive/issue_comments_261313.json:
```json
{
    "body": "<a id='comment:24'></a>And `build/pkgs/polybori/SPKG.txt` needs to be updated.",
    "created_at": "2015-05-24T13:03:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261313",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:24'></a>And `build/pkgs/polybori/SPKG.txt` needs to be updated.



---

archive/issue_comments_261314.json:
```json
{
    "body": "<a id='comment:25'></a>I haven't actually gone through the bindings and made sure they are python 3 compatible -- I just fixed their doctests to work in the sage environment. It is easy enough for me to break out the new package into a different ticket.\n\nI think we should rename the fork to say cropped-polybori, to avoid confusion.",
    "created_at": "2015-05-24T16:00:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261314",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:25'></a>I haven't actually gone through the bindings and made sure they are python 3 compatible -- I just fixed their doctests to work in the sage environment. It is easy enough for me to break out the new package into a different ticket.

I think we should rename the fork to say cropped-polybori, to avoid confusion.



---

archive/issue_comments_261315.json:
```json
{
    "body": "<a id='comment:26'></a>I broke off the bindings portion to #18506.\n\n---\nNew commits:",
    "created_at": "2015-05-25T23:29:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261315",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:26'></a>I broke off the bindings portion to #18506.

---
New commits:



---

archive/issue_comments_261316.json:
```json
{
    "body": "<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-08T03:07:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261316",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_261317.json:
```json
{
    "body": "<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-08T03:08:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261317",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_261318.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2015-06-08T03:11:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261318",
    "user": "https://github.com/ohanar"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_261319.json:
```json
{
    "body": "<a id='comment:29'></a>I updated the polybori autotools to include the python bindings.",
    "created_at": "2015-06-08T03:11:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261319",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:29'></a>I updated the polybori autotools to include the python bindings.



---

archive/issue_comments_261320.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,8 @@\n+Right now PolyBoRi relies on scons (which is still Python 2 only), and has some Python 2 specific syntax in its bindings. These issues will need to be resolved before Sage can support Python 3.\n \n+To achieve this, we fork upstream `polybori`, see [https://github.com/ohanar/PolyBoRi](https://github.com/ohanar/PolyBoRi) and we move the Python bindings to the Sage library.\n+\n+**Tarball**: [https://github.com/ohanar/PolyBoRi/releases/download/0.8.6/polybori-0.8.6.tar.bz2](https://github.com/ohanar/PolyBoRi/releases/download/0.8.6/polybori-0.8.6.tar.bz2)\n \n Comment: 1\n \n``````\n",
    "created_at": "2015-06-08T03:11:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261320",
    "user": "https://github.com/ohanar"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,8 @@
+Right now PolyBoRi relies on scons (which is still Python 2 only), and has some Python 2 specific syntax in its bindings. These issues will need to be resolved before Sage can support Python 3.
 
+To achieve this, we fork upstream `polybori`, see [https://github.com/ohanar/PolyBoRi](https://github.com/ohanar/PolyBoRi) and we move the Python bindings to the Sage library.
+
+**Tarball**: [https://github.com/ohanar/PolyBoRi/releases/download/0.8.6/polybori-0.8.6.tar.bz2](https://github.com/ohanar/PolyBoRi/releases/download/0.8.6/polybori-0.8.6.tar.bz2)
 
 Comment: 1
 
``````




---

archive/issue_comments_261321.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,8 @@\n+Right now PolyBoRi relies on scons (which is still Python 2 only), and has some Python 2 specific syntax in its bindings. These issues will need to be resolved before Sage can support Python 3.\n \n+To achieve this, we fork upstream `polybori`, see [https://github.com/ohanar/PolyBoRi](https://github.com/ohanar/PolyBoRi)\n+\n+**Tarball**: [https://github.com/ohanar/PolyBoRi/releases/download/0.8.6/polybori-0.8.6.tar.bz2](https://github.com/ohanar/PolyBoRi/releases/download/0.8.6/polybori-0.8.6.tar.bz2)\n \n Comment: 1\n \n``````\n",
    "created_at": "2015-06-08T05:50:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261321",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,8 @@
+Right now PolyBoRi relies on scons (which is still Python 2 only), and has some Python 2 specific syntax in its bindings. These issues will need to be resolved before Sage can support Python 3.
 
+To achieve this, we fork upstream `polybori`, see [https://github.com/ohanar/PolyBoRi](https://github.com/ohanar/PolyBoRi)
+
+**Tarball**: [https://github.com/ohanar/PolyBoRi/releases/download/0.8.6/polybori-0.8.6.tar.bz2](https://github.com/ohanar/PolyBoRi/releases/download/0.8.6/polybori-0.8.6.tar.bz2)
 
 Comment: 1
 
``````




---

archive/issue_comments_261322.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2015-06-08T05:50:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261322",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_261323.json:
```json
{
    "body": "<a id='comment:30'></a>I think this needs more explanation/documentation. Surely `build/pkgs/polybori/SPKG.txt` will need to be updated. In particular explain how you obtained the tarball.",
    "created_at": "2015-06-08T05:50:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261323",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:30'></a>I think this needs more explanation/documentation. Surely `build/pkgs/polybori/SPKG.txt` will need to be updated. In particular explain how you obtained the tarball.



---

archive/issue_comments_261324.json:
```json
{
    "body": "<a id='comment:31'></a>Is this commit [https://github.com/ohanar/PolyBoRi/commit/a91362c5be91b2fb23f8acf609852381b78b15a4](https://github.com/ohanar/PolyBoRi/commit/a91362c5be91b2fb23f8acf609852381b78b15a4) part of the tarball on this commit? I would prefer to see it as a patch in `build/pkgs/polybori/patches` (and on a different ticket).",
    "created_at": "2015-06-08T05:55:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261324",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:31'></a>Is this commit [https://github.com/ohanar/PolyBoRi/commit/a91362c5be91b2fb23f8acf609852381b78b15a4](https://github.com/ohanar/PolyBoRi/commit/a91362c5be91b2fb23f8acf609852381b78b15a4) part of the tarball on this commit? I would prefer to see it as a patch in `build/pkgs/polybori/patches` (and on a different ticket).



---

archive/issue_comments_261325.json:
```json
{
    "body": "<a id='comment:32'></a>Replying to [comment:31 jdemeyer]:\n> Is this commit [https://github.com/ohanar/PolyBoRi/commit/a91362c5be91b2fb23f8acf609852381b78b15a4](https://github.com/ohanar/PolyBoRi/commit/a91362c5be91b2fb23f8acf609852381b78b15a4) part of the tarball on this commit?\n\n\nYes.\n\n> I would prefer to see it as a patch in `build/pkgs/polybori/patches` (and on a different ticket).\n\n\nI would not. As I see it there are three routes we could go with polybori:\n\n1. We adopt the route that we took with Pynac (as a fork of Ginac). Our fork might in the future become tightly coupled with Sage, but we maintain it as a separate package outside of Sage.\n\n2. We make a minimal fork, only include the minimal changes necessary to build polybori without scons. If more substantive changes are needed, we include those in the Sage library.\n\n3. A hybrid approach: maintain a minimal fork, and a maintain a set of patches for more substantive changes.\n\n\nI really dislike option 3 (which seems to be the one you are voting for). It seems like it just adds the unnecessary work of maintain patches, with no real benefit. Upon reflection, I would vote for 1, since it allows us make changes to the c++ source if we need to in the future.\n\nIf we go with option 1, I would rename this ticket to \"Switch from polybori to XXXX\", where XXXX is our fork of polybori (still needs a name, I haven't been 100% happy with anything I've come up with). In that case, I view it as perfectly acceptable for there to be additional changes to the fork, such as the Python 3 changes I made.\n\n---\n\nAlso, `@`fbissey. The author of cudd got back to me finally, he said he was already planning on making a new release sometime this summer which uses autotools. Until then, I think I'll continue bundling it with polybori.",
    "created_at": "2015-06-09T04:16:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261325",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:32'></a>Replying to [comment:31 jdemeyer]:
> Is this commit [https://github.com/ohanar/PolyBoRi/commit/a91362c5be91b2fb23f8acf609852381b78b15a4](https://github.com/ohanar/PolyBoRi/commit/a91362c5be91b2fb23f8acf609852381b78b15a4) part of the tarball on this commit?


Yes.

> I would prefer to see it as a patch in `build/pkgs/polybori/patches` (and on a different ticket).


I would not. As I see it there are three routes we could go with polybori:

1. We adopt the route that we took with Pynac (as a fork of Ginac). Our fork might in the future become tightly coupled with Sage, but we maintain it as a separate package outside of Sage.

2. We make a minimal fork, only include the minimal changes necessary to build polybori without scons. If more substantive changes are needed, we include those in the Sage library.

3. A hybrid approach: maintain a minimal fork, and a maintain a set of patches for more substantive changes.


I really dislike option 3 (which seems to be the one you are voting for). It seems like it just adds the unnecessary work of maintain patches, with no real benefit. Upon reflection, I would vote for 1, since it allows us make changes to the c++ source if we need to in the future.

If we go with option 1, I would rename this ticket to "Switch from polybori to XXXX", where XXXX is our fork of polybori (still needs a name, I haven't been 100% happy with anything I've come up with). In that case, I view it as perfectly acceptable for there to be additional changes to the fork, such as the Python 3 changes I made.

---

Also, `@`fbissey. The author of cudd got back to me finally, he said he was already planning on making a new release sometime this summer which uses autotools. Until then, I think I'll continue bundling it with polybori.



---

archive/issue_comments_261326.json:
```json
{
    "body": "<a id='comment:33'></a>There is also the issue of not doing too much on a single ticket. If you make a ticket which is *only* about compiling polybori with autotools, I'll be happy to review it. Anything more will only make the review process more difficult.",
    "created_at": "2015-06-09T09:06:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261326",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:33'></a>There is also the issue of not doing too much on a single ticket. If you make a ticket which is *only* about compiling polybori with autotools, I'll be happy to review it. Anything more will only make the review process more difficult.



---

archive/issue_comments_261327.json:
```json
{
    "body": "<a id='comment:34'></a>Replying to [comment:32 ohanar]:\n> 1. We adopt the route that we took with Pynac (as a fork of Ginac). Our fork might in the future become tightly coupled with Sage, but we maintain it as a separate package outside of Sage.\n\n\nOne thing I don't like is that this will mean essentially unreviewed code in Sage.\n\nFrom a practical point of view, there is not much difference between code in the Sage library and code in some upstream project which is only used in Sage.\n\nBut the code in the Sage library is supposed to be reviewed, while code in upstream projects is normally not reviewed (if people are using upstream outside of Sage, that means at least that the code is tested).\n\nTo be honest, I also don't have an optimal solution. Maybe that's why you should ask for feedback on `sage-devel`.",
    "created_at": "2015-06-09T12:35:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261327",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:34'></a>Replying to [comment:32 ohanar]:
> 1. We adopt the route that we took with Pynac (as a fork of Ginac). Our fork might in the future become tightly coupled with Sage, but we maintain it as a separate package outside of Sage.


One thing I don't like is that this will mean essentially unreviewed code in Sage.

From a practical point of view, there is not much difference between code in the Sage library and code in some upstream project which is only used in Sage.

But the code in the Sage library is supposed to be reviewed, while code in upstream projects is normally not reviewed (if people are using upstream outside of Sage, that means at least that the code is tested).

To be honest, I also don't have an optimal solution. Maybe that's why you should ask for feedback on `sage-devel`.



---

archive/issue_comments_261328.json:
```json
{
    "body": "<a id='comment:35'></a>Posted on sage-devel for feed back: https://groups.google.com/forum/#!topic/sage-devel/9Uhnvm3wef8",
    "created_at": "2015-06-11T01:43:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261328",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:35'></a>Posted on sage-devel for feed back: https://groups.google.com/forum/#!topic/sage-devel/9Uhnvm3wef8



---

archive/issue_comments_261329.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2015-08-24T01:05:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261329",
    "user": "https://github.com/ohanar"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_261330.json:
```json
{
    "body": "<a id='comment:37'></a>I finally got back to this. This switches us to BRiAl (the successor/fork to polybori, as discussed in the sage-devel thread), and includes the new autotools based build system. I will repurpose  #18506. for the second version of BRiAl (to be released), which will include some python 3 syntax fixes.\n\n---\nNew commits:",
    "created_at": "2015-08-24T01:05:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261330",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:37'></a>I finally got back to this. This switches us to BRiAl (the successor/fork to polybori, as discussed in the sage-devel thread), and includes the new autotools based build system. I will repurpose  #18506. for the second version of BRiAl (to be released), which will include some python 3 syntax fixes.

---
New commits:



---

archive/issue_comments_261331.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,10 @@\n+Right now PolyBoRi relies on scons (which is still Python 2 only), and has some Python 2 specific syntax in its bindings. These issues will need to be resolved before Sage can support Python 3.\n \n+On this ticket we update to the first version of BRiAl which includes a new (incomplete, but sufficient for our purposes) autotools based system.\n+\n+To achieve this, we fork upstream `polybori`, see [https://github.com/BRiAl/BRiAl](https://github.com/BRiAl/BRiAl)\n+\n+**Tarball**: [https://github.com/BRiAl/BRiAl/releases/download/0.8.4/brial-0.8.4.tar.bz2](https://github.com/BRiAl/BRiAl/releases/download/0.8.4/brial-0.8.4.tar.bz2)\n \n Comment: 1\n \n``````\n",
    "created_at": "2015-08-24T01:05:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261331",
    "user": "https://github.com/ohanar"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,10 @@
+Right now PolyBoRi relies on scons (which is still Python 2 only), and has some Python 2 specific syntax in its bindings. These issues will need to be resolved before Sage can support Python 3.
 
+On this ticket we update to the first version of BRiAl which includes a new (incomplete, but sufficient for our purposes) autotools based system.
+
+To achieve this, we fork upstream `polybori`, see [https://github.com/BRiAl/BRiAl](https://github.com/BRiAl/BRiAl)
+
+**Tarball**: [https://github.com/BRiAl/BRiAl/releases/download/0.8.4/brial-0.8.4.tar.bz2](https://github.com/BRiAl/BRiAl/releases/download/0.8.4/brial-0.8.4.tar.bz2)
 
 Comment: 1
 
``````




---

archive/issue_comments_261332.json:
```json
{
    "body": "<a id='comment:38'></a>Cool to see some move on this! `spkg-install` still has messages about `polybori`, it is especially important to update those not too confuse new-comers.\n\nI see that the library name hasn't changed upstream (`libpolybori*`), that would be something to consider although it is not a show stopper for this.\n\nI notice `ipython` has been dropped from the list of dependencies, is it on purpose?",
    "created_at": "2015-08-24T01:40:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261332",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:38'></a>Cool to see some move on this! `spkg-install` still has messages about `polybori`, it is especially important to update those not too confuse new-comers.

I see that the library name hasn't changed upstream (`libpolybori*`), that would be something to consider although it is not a show stopper for this.

I notice `ipython` has been dropped from the list of dependencies, is it on purpose?



---

archive/issue_comments_261333.json:
```json
{
    "body": "<a id='comment:39'></a>Do I understand well that `libgd` is looked for if `libpng` is not there? It is all a bit strange. If `m4ri` doesn't have support for `png` I guess `have_libpng` will be empty and then `libgd` will be checked. The line \n\n```\n        AC_DEFINE([PBORI_HAVE_GD],[],[has gd png support])\n```\nis a bit misleading as if you arrive there, you have `libgd` support which may or may not have `png` included in it.\n\nAlso why shouldn't the compilation abort if `m4ri_png=yes` but you cannot find `libpng`? As far as I can tell `m4ri` won't use `libgd` for libpng unless you abuse the configuration options, so that whole structure looks very strange.\n\nI guess on closer look I have an issue with the way m4ri/m4rie/polybory deal with some of their optional dependencies, and that may be something to look into in the future. For starter if `m4ri` is compiled with `png` support, the used `libpng` should be included in output of `pkg-config m4ri --libs`.",
    "created_at": "2015-08-24T02:28:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261333",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:39'></a>Do I understand well that `libgd` is looked for if `libpng` is not there? It is all a bit strange. If `m4ri` doesn't have support for `png` I guess `have_libpng` will be empty and then `libgd` will be checked. The line 

```
        AC_DEFINE([PBORI_HAVE_GD],[],[has gd png support])
```
is a bit misleading as if you arrive there, you have `libgd` support which may or may not have `png` included in it.

Also why shouldn't the compilation abort if `m4ri_png=yes` but you cannot find `libpng`? As far as I can tell `m4ri` won't use `libgd` for libpng unless you abuse the configuration options, so that whole structure looks very strange.

I guess on closer look I have an issue with the way m4ri/m4rie/polybory deal with some of their optional dependencies, and that may be something to look into in the future. For starter if `m4ri` is compiled with `png` support, the used `libpng` should be included in output of `pkg-config m4ri --libs`.



---

archive/issue_comments_261334.json:
```json
{
    "body": "<a id='comment:40'></a>Replying to [comment:38 fbissey]:\n> Cool to see some move on this! `spkg-install` still has messages about `polybori`, it is especially important to update those not too confuse new-comers.\n\n\nSure, I'll do that shortly.\n\n> \n> I see that the library name hasn't changed upstream (`libpolybori*`), that would be something to consider although it is not a show stopper for this.\n\n\nI didn't want to have to deal with this on the sage side of things at the moment, so I didn't change this. There are a ton of places that the polybori name is used throughout the source code, and it would be a pain to change them, although changing the library name and headers shouldn't be too bad.\n\n> \n> I notice `ipython` has been dropped from the list of dependencies, is it on purpose?\n\n\nIt shouldn't have been a dependency in the first place from what I can tell.",
    "created_at": "2015-08-24T02:49:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261334",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:40'></a>Replying to [comment:38 fbissey]:
> Cool to see some move on this! `spkg-install` still has messages about `polybori`, it is especially important to update those not too confuse new-comers.


Sure, I'll do that shortly.

> 
> I see that the library name hasn't changed upstream (`libpolybori*`), that would be something to consider although it is not a show stopper for this.


I didn't want to have to deal with this on the sage side of things at the moment, so I didn't change this. There are a ton of places that the polybori name is used throughout the source code, and it would be a pain to change them, although changing the library name and headers shouldn't be too bad.

> 
> I notice `ipython` has been dropped from the list of dependencies, is it on purpose?


It shouldn't have been a dependency in the first place from what I can tell.



---

archive/issue_comments_261335.json:
```json
{
    "body": "<a id='comment:41'></a>Replying to [comment:39 fbissey]:\n\nI basically just took the sconstruct logic and moved it into configure.ac (with the appropriate language translation). I don't claim it is good logic.",
    "created_at": "2015-08-24T02:51:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261335",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:41'></a>Replying to [comment:39 fbissey]:

I basically just took the sconstruct logic and moved it into configure.ac (with the appropriate language translation). I don't claim it is good logic.



---

archive/issue_comments_261336.json:
```json
{
    "body": "<a id='comment:42'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-08-24T02:53:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261336",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:42'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_261337.json:
```json
{
    "body": "<a id='comment:43'></a>I say we save my last comment for future work because I think `m4ri` configure script needs surgery first.\n\n---\nNew commits:\n|                                                                                                                                          |                                         |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|\n|[5cbf983](http://git.sagemath.org/sage.git/commit/?id=5cbf983ee15dd61d8ad4aec707b58e743def3c72)|`rename error messages PolyBoRi -> BRiAl`|\n---\nNew commits:",
    "created_at": "2015-08-24T02:53:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261337",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:43'></a>I say we save my last comment for future work because I think `m4ri` configure script needs surgery first.

---
New commits:
|                                                                                                                                          |                                         |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|
|[5cbf983](http://git.sagemath.org/sage.git/commit/?id=5cbf983ee15dd61d8ad4aec707b58e743def3c72)|`rename error messages PolyBoRi -> BRiAl`|
---
New commits:



---

archive/issue_comments_261338.json:
```json
{
    "body": "<a id='comment:44'></a>I just greped the sage source code for traces of `polybori` import. Since it now installs in `brial` unless I missed a mechanism the followings need to be updated\n\n```\nMirage:sage fbissey$ grep -r \"from polybori\" *\nrings/polynomial/multi_polynomial_sequence.py:        from polybori import gauss_on_polys\nrings/polynomial/multi_polynomial_sequence.py:        from polybori.ll import eliminate,ll_encode,ll_red_nf_redsb\nrings/polynomial/multi_polynomial_sequence.py:            from polybori.interred import interred as inter_red\nrings/polynomial/pbori.pyx:    sage: from polybori import *\nrings/polynomial/pbori.pyx:        #from polybori.interpolate import interpolate_smallest_lex\nrings/polynomial/pbori.pyx:        sage: from polybori import BooleanMonomialMonoid\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid\nrings/polynomial/pbori.pyx:        sage: from polybori import BooleanMonomialMonoid, BooleanMonomial\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid, BooleanMonomial\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleSet\nrings/polynomial/pbori.pyx:        sage: from polybori import BooleanPolynomial\nrings/polynomial/pbori.pyx:        from polybori.parallel import _encode_polynomial\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleSet\nrings/polynomial/pbori.pyx:        from polybori import red_tail\nrings/polynomial/pbori.pyx:            sage: from polybori import *\nrings/polynomial/pbori.pyx:            sage: from polybori import *\nrings/polynomial/pbori.pyx:            sage: from polybori import *\nrings/polynomial/pbori.pyx:            sage: from polybori import *\nrings/polynomial/pbori.pyx:        from polybori.gbcore import groebner_basis\nrings/polynomial/pbori.pyx:        from polybori import red_tail\nrings/polynomial/pbori.pyx:        sage: from polybori import BooleSet\nrings/polynomial/pbori.pyx:        sage: from polybori import *\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleSet\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleSet\nrings/polynomial/pbori.pyx:        sage: from polybori import BooleanPolynomialVector\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleanPolynomialVector\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleanPolynomialVector\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleanPolynomialVector\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleanPolynomialVector\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleanPolynomialVector\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleanPolynomialVector\nrings/polynomial/pbori.pyx:            sage: from polybori import *\nrings/polynomial/pbori.pyx:            sage: from polybori import *\nrings/polynomial/pbori.pyx:            sage: from polybori import *\nrings/polynomial/pbori.pyx:            sage: from polybori import *\nrings/polynomial/pbori.pyx:            sage: from polybori import *\nrings/polynomial/pbori.pyx:            sage: from polybori import *\nrings/polynomial/pbori.pyx:            sage: from polybori import *\nrings/polynomial/pbori.pyx:            sage: from polybori import *\nrings/polynomial/pbori.pyx:            sage: from polybori import *\nrings/polynomial/pbori.pyx:            sage: from polybori import *\nrings/polynomial/pbori.pyx:            sage: from polybori import *\nrings/polynomial/pbori.pyx:            sage: from polybori import *\nrings/polynomial/pbori.pyx:            sage: from polybori import GroebnerStrategy\nrings/polynomial/pbori.pyx:            sage: from polybori import GroebnerStrategy\nrings/polynomial/pbori.pyx:            sage: from polybori import *\nrings/polynomial/pbori.pyx:            sage: from polybori import *\nrings/polynomial/pbori.pyx:            sage: from polybori import *\nrings/polynomial/pbori.pyx:            sage: from polybori import GroebnerStrategy\nrings/polynomial/pbori.pyx:            sage: from polybori import groebner_basis\nrings/polynomial/pbori.pyx:            sage: from polybori import GroebnerStrategy\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleanPolynomialVector\nrings/polynomial/pbori.pyx:            sage: from polybori import *\nrings/polynomial/pbori.pyx:            sage: from polybori import GroebnerStrategy\nrings/polynomial/pbori.pyx:            sage: from polybori import groebner_basis\nrings/polynomial/pbori.pyx:            sage: from polybori import GroebnerStrategy\nrings/polynomial/pbori.pyx:            sage: from polybori import GroebnerStrategy\nrings/polynomial/pbori.pyx:            sage: from polybori import GroebnerStrategy\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid\nrings/polynomial/pbori.pyx:        sage: from polybori import *\nrings/polynomial/pbori.pyx:        sage: from polybori import *\nrings/polynomial/pbori.pyx:        sage: from polybori import map_every_x_to_x_plus_one\nrings/polynomial/pbori.pyx:        sage: from polybori import zeros\nrings/polynomial/pbori.pyx:        sage: from polybori.interpolate import *\nrings/polynomial/pbori.pyx:        sage: from polybori.interpolate import *\nrings/polynomial/pbori.pyx:        sage: from polybori import ll_red_nf_redsb\nrings/polynomial/pbori.pyx:        sage: from polybori import ll_red_nf_noredsb\nrings/polynomial/pbori.pyx:        sage: from polybori import ll_red_nf_noredsb_single_recursive_call\nrings/polynomial/pbori.pyx:        sage: from polybori import if_then_else\nrings/polynomial/pbori.pyx:        sage: from polybori import top_index\nrings/polynomial/pbori.pyx:        sage: from polybori import *\nrings/polynomial/pbori.pyx:        sage: from polybori import substitute_variables\nrings/polynomial/pbori.pyx:        sage: from polybori import substitute_variables\nrings/polynomial/pbori.pyx:        sage: from polybori import random_set, set_random_seed\nrings/polynomial/pbori.pyx:        sage: from polybori import random_set, set_random_seed\nrings/polynomial/pbori.pyx:# todo: merge with pickling from polybori.parallel\nrings/polynomial/pbori.pyx:# todo: merge with pickling from polybori.parallel\nrings/polynomial/pbori.pyx:    from polybori.parallel import _decode_polynomial\nrings/polynomial/pbori.pyx:# todo: merge with pickling from polybori.parallel\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleConstant\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleConstant\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleConstant\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleConstant\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleConstant\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleConstant\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleConstant\nrings/polynomial/pbori.pyx:            sage: from polybori import BooleConstant\nrings/polynomial/pbori.pyx:            sage: from polybori import *\nrings/polynomial/pbori.pyx:            sage: from polybori import *\nrings/polynomial/pbori.pyx:            sage: from polybori import *\nrings/polynomial/pbori.pyx:            sage: from polybori import *\nrings/polynomial/pbori.pyx:            sage: from polybori import *\nrings/polynomial/pbori.pyx:            sage: from polybori import *\nrings/polynomial/pbori.pyx:            sage: from polybori import *\nrings/polynomial/pbori.pyx:            sage: from polybori import *\nsat/converters/__init__.py:from polybori import CNFEncoder as PolyBoRiCNFEncoder\n```",
    "created_at": "2015-08-24T04:31:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261338",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:44'></a>I just greped the sage source code for traces of `polybori` import. Since it now installs in `brial` unless I missed a mechanism the followings need to be updated

```
Mirage:sage fbissey$ grep -r "from polybori" *
rings/polynomial/multi_polynomial_sequence.py:        from polybori import gauss_on_polys
rings/polynomial/multi_polynomial_sequence.py:        from polybori.ll import eliminate,ll_encode,ll_red_nf_redsb
rings/polynomial/multi_polynomial_sequence.py:            from polybori.interred import interred as inter_red
rings/polynomial/pbori.pyx:    sage: from polybori import *
rings/polynomial/pbori.pyx:        #from polybori.interpolate import interpolate_smallest_lex
rings/polynomial/pbori.pyx:        sage: from polybori import BooleanMonomialMonoid
rings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid
rings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid
rings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid
rings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid
rings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid
rings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid
rings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid
rings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid
rings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid
rings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid
rings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid
rings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid
rings/polynomial/pbori.pyx:        sage: from polybori import BooleanMonomialMonoid, BooleanMonomial
rings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid, BooleanMonomial
rings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid
rings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid
rings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid
rings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid
rings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid
rings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid
rings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid
rings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid
rings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid
rings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid
rings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid
rings/polynomial/pbori.pyx:            sage: from polybori import BooleSet
rings/polynomial/pbori.pyx:        sage: from polybori import BooleanPolynomial
rings/polynomial/pbori.pyx:        from polybori.parallel import _encode_polynomial
rings/polynomial/pbori.pyx:            sage: from polybori import BooleSet
rings/polynomial/pbori.pyx:        from polybori import red_tail
rings/polynomial/pbori.pyx:            sage: from polybori import *
rings/polynomial/pbori.pyx:            sage: from polybori import *
rings/polynomial/pbori.pyx:            sage: from polybori import *
rings/polynomial/pbori.pyx:            sage: from polybori import *
rings/polynomial/pbori.pyx:        from polybori.gbcore import groebner_basis
rings/polynomial/pbori.pyx:        from polybori import red_tail
rings/polynomial/pbori.pyx:        sage: from polybori import BooleSet
rings/polynomial/pbori.pyx:        sage: from polybori import *
rings/polynomial/pbori.pyx:            sage: from polybori import BooleSet
rings/polynomial/pbori.pyx:            sage: from polybori import BooleSet
rings/polynomial/pbori.pyx:        sage: from polybori import BooleanPolynomialVector
rings/polynomial/pbori.pyx:            sage: from polybori import BooleanPolynomialVector
rings/polynomial/pbori.pyx:            sage: from polybori import BooleanPolynomialVector
rings/polynomial/pbori.pyx:            sage: from polybori import BooleanPolynomialVector
rings/polynomial/pbori.pyx:            sage: from polybori import BooleanPolynomialVector
rings/polynomial/pbori.pyx:            sage: from polybori import BooleanPolynomialVector
rings/polynomial/pbori.pyx:            sage: from polybori import BooleanPolynomialVector
rings/polynomial/pbori.pyx:            sage: from polybori import *
rings/polynomial/pbori.pyx:            sage: from polybori import *
rings/polynomial/pbori.pyx:            sage: from polybori import *
rings/polynomial/pbori.pyx:            sage: from polybori import *
rings/polynomial/pbori.pyx:            sage: from polybori import *
rings/polynomial/pbori.pyx:            sage: from polybori import *
rings/polynomial/pbori.pyx:            sage: from polybori import *
rings/polynomial/pbori.pyx:            sage: from polybori import *
rings/polynomial/pbori.pyx:            sage: from polybori import *
rings/polynomial/pbori.pyx:            sage: from polybori import *
rings/polynomial/pbori.pyx:            sage: from polybori import *
rings/polynomial/pbori.pyx:            sage: from polybori import *
rings/polynomial/pbori.pyx:            sage: from polybori import GroebnerStrategy
rings/polynomial/pbori.pyx:            sage: from polybori import GroebnerStrategy
rings/polynomial/pbori.pyx:            sage: from polybori import *
rings/polynomial/pbori.pyx:            sage: from polybori import *
rings/polynomial/pbori.pyx:            sage: from polybori import *
rings/polynomial/pbori.pyx:            sage: from polybori import GroebnerStrategy
rings/polynomial/pbori.pyx:            sage: from polybori import groebner_basis
rings/polynomial/pbori.pyx:            sage: from polybori import GroebnerStrategy
rings/polynomial/pbori.pyx:            sage: from polybori import BooleanPolynomialVector
rings/polynomial/pbori.pyx:            sage: from polybori import *
rings/polynomial/pbori.pyx:            sage: from polybori import GroebnerStrategy
rings/polynomial/pbori.pyx:            sage: from polybori import groebner_basis
rings/polynomial/pbori.pyx:            sage: from polybori import GroebnerStrategy
rings/polynomial/pbori.pyx:            sage: from polybori import GroebnerStrategy
rings/polynomial/pbori.pyx:            sage: from polybori import GroebnerStrategy
rings/polynomial/pbori.pyx:            sage: from polybori import BooleanMonomialMonoid
rings/polynomial/pbori.pyx:        sage: from polybori import *
rings/polynomial/pbori.pyx:        sage: from polybori import *
rings/polynomial/pbori.pyx:        sage: from polybori import map_every_x_to_x_plus_one
rings/polynomial/pbori.pyx:        sage: from polybori import zeros
rings/polynomial/pbori.pyx:        sage: from polybori.interpolate import *
rings/polynomial/pbori.pyx:        sage: from polybori.interpolate import *
rings/polynomial/pbori.pyx:        sage: from polybori import ll_red_nf_redsb
rings/polynomial/pbori.pyx:        sage: from polybori import ll_red_nf_noredsb
rings/polynomial/pbori.pyx:        sage: from polybori import ll_red_nf_noredsb_single_recursive_call
rings/polynomial/pbori.pyx:        sage: from polybori import if_then_else
rings/polynomial/pbori.pyx:        sage: from polybori import top_index
rings/polynomial/pbori.pyx:        sage: from polybori import *
rings/polynomial/pbori.pyx:        sage: from polybori import substitute_variables
rings/polynomial/pbori.pyx:        sage: from polybori import substitute_variables
rings/polynomial/pbori.pyx:        sage: from polybori import random_set, set_random_seed
rings/polynomial/pbori.pyx:        sage: from polybori import random_set, set_random_seed
rings/polynomial/pbori.pyx:# todo: merge with pickling from polybori.parallel
rings/polynomial/pbori.pyx:# todo: merge with pickling from polybori.parallel
rings/polynomial/pbori.pyx:    from polybori.parallel import _decode_polynomial
rings/polynomial/pbori.pyx:# todo: merge with pickling from polybori.parallel
rings/polynomial/pbori.pyx:            sage: from polybori import BooleConstant
rings/polynomial/pbori.pyx:            sage: from polybori import BooleConstant
rings/polynomial/pbori.pyx:            sage: from polybori import BooleConstant
rings/polynomial/pbori.pyx:            sage: from polybori import BooleConstant
rings/polynomial/pbori.pyx:            sage: from polybori import BooleConstant
rings/polynomial/pbori.pyx:            sage: from polybori import BooleConstant
rings/polynomial/pbori.pyx:            sage: from polybori import BooleConstant
rings/polynomial/pbori.pyx:            sage: from polybori import BooleConstant
rings/polynomial/pbori.pyx:            sage: from polybori import *
rings/polynomial/pbori.pyx:            sage: from polybori import *
rings/polynomial/pbori.pyx:            sage: from polybori import *
rings/polynomial/pbori.pyx:            sage: from polybori import *
rings/polynomial/pbori.pyx:            sage: from polybori import *
rings/polynomial/pbori.pyx:            sage: from polybori import *
rings/polynomial/pbori.pyx:            sage: from polybori import *
rings/polynomial/pbori.pyx:            sage: from polybori import *
sat/converters/__init__.py:from polybori import CNFEncoder as PolyBoRiCNFEncoder
```



---

archive/issue_comments_261339.json:
```json
{
    "body": "<a id='comment:45'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-08-24T18:23:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261339",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:45'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_261340.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,10 @@\n+Right now PolyBoRi relies on scons (which is still Python 2 only), and has some Python 2 specific syntax in its bindings. These issues will need to be resolved before Sage can support Python 3.\n \n+On this ticket we update to the first version of BRiAl which includes a new (incomplete, but sufficient for our purposes) autotools based system.\n+\n+To achieve this, we fork upstream `polybori`, see [https://github.com/BRiAl/BRiAl](https://github.com/BRiAl/BRiAl)\n+\n+**Tarball**: [https://github.com/BRiAl/BRiAl/releases/download/0.8.4.1/brial-0.8.4.1.tar.bz2](https://github.com/BRiAl/BRiAl/releases/download/0.8.4.1/brial-0.8.4.1.tar.bz2)\n \n Comment: 1\n \n``````\n",
    "created_at": "2015-08-24T18:24:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261340",
    "user": "https://github.com/ohanar"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,10 @@
+Right now PolyBoRi relies on scons (which is still Python 2 only), and has some Python 2 specific syntax in its bindings. These issues will need to be resolved before Sage can support Python 3.
 
+On this ticket we update to the first version of BRiAl which includes a new (incomplete, but sufficient for our purposes) autotools based system.
+
+To achieve this, we fork upstream `polybori`, see [https://github.com/BRiAl/BRiAl](https://github.com/BRiAl/BRiAl)
+
+**Tarball**: [https://github.com/BRiAl/BRiAl/releases/download/0.8.4.1/brial-0.8.4.1.tar.bz2](https://github.com/BRiAl/BRiAl/releases/download/0.8.4.1/brial-0.8.4.1.tar.bz2)
 
 Comment: 1
 
``````




---

archive/issue_comments_261341.json:
```json
{
    "body": "<a id='comment:46'></a>New commits:",
    "created_at": "2015-08-24T18:24:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261341",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:46'></a>New commits:



---

archive/issue_comments_261342.json:
```json
{
    "body": "<a id='comment:47'></a>One last thing. I think we should implement a removal of old `polybori` install like in the old `polybori` spkg and while we are at it cleaning of a previous `brial` install in case of updating or re-install. We should do it before the call to `configure`.",
    "created_at": "2015-08-24T18:37:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261342",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:47'></a>One last thing. I think we should implement a removal of old `polybori` install like in the old `polybori` spkg and while we are at it cleaning of a previous `brial` install in case of updating or re-install. We should do it before the call to `configure`.



---

archive/issue_comments_261343.json:
```json
{
    "body": "<a id='comment:48'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-08-24T18:51:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261343",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:48'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_261344.json:
```json
{
    "body": "<a id='comment:49'></a>I think it is ready for testing. One more thing that I just spotted\n\n```\n              libraries=['polybori', 'polybori_groebner', 'm4ri', 'gd', 'png12'],\n```\nshouldn't include `gd` we have removed the dependency in polybori and a check in sage-on-gentoo (all compiled with `-Wl,-as-needed`) shows that it is not used in `pbori.so`, there is only one instance of a direct linking to `libgd` in the whole sage, I'll check where it is coming from.",
    "created_at": "2015-08-24T19:55:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261344",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:49'></a>I think it is ready for testing. One more thing that I just spotted

```
              libraries=['polybori', 'polybori_groebner', 'm4ri', 'gd', 'png12'],
```
shouldn't include `gd` we have removed the dependency in polybori and a check in sage-on-gentoo (all compiled with `-Wl,-as-needed`) shows that it is not used in `pbori.so`, there is only one instance of a direct linking to `libgd` in the whole sage, I'll check where it is coming from.



---

archive/issue_comments_261345.json:
```json
{
    "body": "<a id='comment:50'></a>`matrix_mod2_dense` is where there is a direct linking to `gd` and it is explicit in `module_list.py`. The other 2 instances `sage.modules.vector_mod2_dense` and `sage.rings.polynomial.pbori` (whose `libraries`'s line was the object of my previous comment) are probably linked to the presence of `m4ri` and can be removed. Actually the presence in matrix_mod2_dense is curious and should be further investigated but that's not this ticket.",
    "created_at": "2015-08-24T20:05:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261345",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:50'></a>`matrix_mod2_dense` is where there is a direct linking to `gd` and it is explicit in `module_list.py`. The other 2 instances `sage.modules.vector_mod2_dense` and `sage.rings.polynomial.pbori` (whose `libraries`'s line was the object of my previous comment) are probably linked to the presence of `m4ri` and can be removed. Actually the presence in matrix_mod2_dense is curious and should be further investigated but that's not this ticket.



---

archive/issue_comments_261346.json:
```json
{
    "body": "<a id='comment:51'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-08-24T20:10:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261346",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:51'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_261347.json:
```json
{
    "body": "<a id='comment:52'></a>Ok just tested a build from scratch with the branch. The python bindings are being installed in `SAGE_LOCAL/lib64/python2.7/site-packages` that `lib64` is a bit of a problem. We'll have to dig in the configuration script as `libpolybori*` is installed correctly under `SAGE_LOCAL/lib`.",
    "created_at": "2015-08-25T00:27:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261347",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:52'></a>Ok just tested a build from scratch with the branch. The python bindings are being installed in `SAGE_LOCAL/lib64/python2.7/site-packages` that `lib64` is a bit of a problem. We'll have to dig in the configuration script as `libpolybori*` is installed correctly under `SAGE_LOCAL/lib`.



---

archive/issue_comments_261348.json:
```json
{
    "body": "<a id='comment:53'></a>Adding \n\n```\nAC_SUBST(pythondir)\n```\nin `configure.ac` (yes in lower case see http://www.gnu.org/software/automake/manual/html_node/Python.html) seem to have solved the problem. That or my autotools did a better job. I am successfully building the doc now, which is where things fell apart the first time.",
    "created_at": "2015-08-25T02:34:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261348",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:53'></a>Adding 

```
AC_SUBST(pythondir)
```
in `configure.ac` (yes in lower case see http://www.gnu.org/software/automake/manual/html_node/Python.html) seem to have solved the problem. That or my autotools did a better job. I am successfully building the doc now, which is where things fell apart the first time.



---

archive/issue_comments_261349.json:
```json
{
    "body": "<a id='comment:54'></a>Amusing, `polybori` was the last dependency pulling `scons`. Consequently my build from scratch doesn't include `scons` and the associated tests are failing. If we have an associated ticket for `scons` demotion to optional or removal it will depend on this one and vice-versa.\n\n```\nsage -t --long --warn-long 116.1 src/sage/tests/cmdline.py\n**********************************************************************\nFile \"src/sage/tests/cmdline.py\", line 578, in sage.tests.cmdline.test_executable\nFailed example:\n    out.find(\"SCons\") >= 0\nExpected:\n    True\nGot:\n    False\n**********************************************************************\nFile \"src/sage/tests/cmdline.py\", line 580, in sage.tests.cmdline.test_executable\nFailed example:\n    err\nExpected:\n    ''\nGot:\n    'Traceback (most recent call last):\\n  File \"/usr/lib/python-exec/python2.7/scons\", line 188, in <module>\\n    import SCons.Script\\nImportError: No module named SCons.Script\\n'\n**********************************************************************\nFile \"src/sage/tests/cmdline.py\", line 582, in sage.tests.cmdline.test_executable\nFailed example:\n    ret\nExpected:\n    0\nGot:\n    1\n**********************************************************************\n```",
    "created_at": "2015-08-25T02:56:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261349",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:54'></a>Amusing, `polybori` was the last dependency pulling `scons`. Consequently my build from scratch doesn't include `scons` and the associated tests are failing. If we have an associated ticket for `scons` demotion to optional or removal it will depend on this one and vice-versa.

```
sage -t --long --warn-long 116.1 src/sage/tests/cmdline.py
**********************************************************************
File "src/sage/tests/cmdline.py", line 578, in sage.tests.cmdline.test_executable
Failed example:
    out.find("SCons") >= 0
Expected:
    True
Got:
    False
**********************************************************************
File "src/sage/tests/cmdline.py", line 580, in sage.tests.cmdline.test_executable
Failed example:
    err
Expected:
    ''
Got:
    'Traceback (most recent call last):\n  File "/usr/lib/python-exec/python2.7/scons", line 188, in <module>\n    import SCons.Script\nImportError: No module named SCons.Script\n'
**********************************************************************
File "src/sage/tests/cmdline.py", line 582, in sage.tests.cmdline.test_executable
Failed example:
    ret
Expected:
    0
Got:
    1
**********************************************************************
```



---

archive/issue_comments_261350.json:
```json
{
    "body": "<a id='comment:55'></a>OK I have failing tests because `cnf.py` is not installed. It is the only one missing, I am guessing this is because it is not listed in `pyroot/Makefile.am` as I see it on github. However it is listed in the tarball you are linking from github. How did this happen? I cannot see a commit touching `pyroot/Makefile.am` other than the one moving it in `pyroot`.",
    "created_at": "2015-08-25T03:18:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261350",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:55'></a>OK I have failing tests because `cnf.py` is not installed. It is the only one missing, I am guessing this is because it is not listed in `pyroot/Makefile.am` as I see it on github. However it is listed in the tarball you are linking from github. How did this happen? I cannot see a commit touching `pyroot/Makefile.am` other than the one moving it in `pyroot`.



---

archive/issue_comments_261351.json:
```json
{
    "body": "<a id='comment:56'></a>And it wasn't included in the tarball for 0.8.4.",
    "created_at": "2015-08-25T03:28:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261351",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:56'></a>And it wasn't included in the tarball for 0.8.4.



---

archive/issue_comments_261352.json:
```json
{
    "body": "<a id='comment:57'></a>Replying to [comment:55 fbissey]:\n> OK I have failing tests because `cnf.py` is not installed. It is the only one missing, I am guessing this is because it is not listed in `pyroot/Makefile.am` as I see it on github. However it is listed in the tarball you are linking from github. How did this happen? I cannot see a commit touching `pyroot/Makefile.am` other than the one moving it in `pyroot`.\n\n\nYes, I fixed that for 0.8.4.1, look at the tag on github. I probably had a staging commit that didn't include `cnf.py`, and somehow that is on the master branch.",
    "created_at": "2015-08-25T03:31:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261352",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:57'></a>Replying to [comment:55 fbissey]:
> OK I have failing tests because `cnf.py` is not installed. It is the only one missing, I am guessing this is because it is not listed in `pyroot/Makefile.am` as I see it on github. However it is listed in the tarball you are linking from github. How did this happen? I cannot see a commit touching `pyroot/Makefile.am` other than the one moving it in `pyroot`.


Yes, I fixed that for 0.8.4.1, look at the tag on github. I probably had a staging commit that didn't include `cnf.py`, and somehow that is on the master branch.



---

archive/issue_comments_261353.json:
```json
{
    "body": "<a id='comment:58'></a>OK see it under the tag but of course when I worked on the lib/lib64 I was working from master.",
    "created_at": "2015-08-25T03:34:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261353",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:58'></a>OK see it under the tag but of course when I worked on the lib/lib64 I was working from master.



---

archive/issue_comments_261354.json:
```json
{
    "body": "<a id='comment:59'></a>scons was already demoted to optional, but since we still had standard packages depending on it, it was in practice standard so these doctest errors weren't caught.\n\nI fixed master with a force push (to reflect the correct commit). If you want to send a pull request fixing the lib64/lib issue, please do. I don't see it on OS X (obviously) and I don't have access to a decent linux box at the moment either.",
    "created_at": "2015-08-25T03:38:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261354",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:59'></a>scons was already demoted to optional, but since we still had standard packages depending on it, it was in practice standard so these doctest errors weren't caught.

I fixed master with a force push (to reflect the correct commit). If you want to send a pull request fixing the lib64/lib issue, please do. I don't see it on OS X (obviously) and I don't have access to a decent linux box at the moment either.



---

archive/issue_comments_261355.json:
```json
{
    "body": "<a id='comment:60'></a>Will send the pull request in a few hours when I can properly focus again.",
    "created_at": "2015-08-25T04:48:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261355",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:60'></a>Will send the pull request in a few hours when I can properly focus again.



---

archive/issue_comments_261356.json:
```json
{
    "body": "<a id='comment:61'></a>Replying to [comment:54 fbissey]:\n> {{{\n> sage -t --long --warn-long 116.1 src/sage/tests/cmdline.py\n> **********************************************************************\n> File \"src/sage/tests/cmdline.py\", line 578, in sage.tests.cmdline.test_executable\n> Failed example:\n>     out.find(\"SCons\") >= 0\n> Expected:\n>     True\n> Got:\n>     False\n> **********************************************************************\n> File \"src/sage/tests/cmdline.py\", line 580, in sage.tests.cmdline.test_executable\n> Failed example:\n>     err\n> Expected:\n>     ''\n> Got:\n>     'Traceback (most recent call last):\\n  File \"/usr/lib/python-exec/python2.7/scons\", line 188, in <module>\\n    import SCons.Script\\nImportError: No module named SCons.Script\\n'\n> **********************************************************************\n> File \"src/sage/tests/cmdline.py\", line 582, in sage.tests.cmdline.test_executable\n> Failed example:\n>     ret\n> Expected:\n>     0\n> Got:\n>     1\n> **********************************************************************\n> }}}\n\npositive_review to a new ticket which just removes those 3 tests.",
    "created_at": "2015-08-25T06:29:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261356",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:61'></a>Replying to [comment:54 fbissey]:
> {{{
> sage -t --long --warn-long 116.1 src/sage/tests/cmdline.py
> **********************************************************************
> File "src/sage/tests/cmdline.py", line 578, in sage.tests.cmdline.test_executable
> Failed example:
>     out.find("SCons") >= 0
> Expected:
>     True
> Got:
>     False
> **********************************************************************
> File "src/sage/tests/cmdline.py", line 580, in sage.tests.cmdline.test_executable
> Failed example:
>     err
> Expected:
>     ''
> Got:
>     'Traceback (most recent call last):\n  File "/usr/lib/python-exec/python2.7/scons", line 188, in <module>\n    import SCons.Script\nImportError: No module named SCons.Script\n'
> **********************************************************************
> File "src/sage/tests/cmdline.py", line 582, in sage.tests.cmdline.test_executable
> Failed example:
>     ret
> Expected:
>     0
> Got:
>     1
> **********************************************************************
> }}}

positive_review to a new ticket which just removes those 3 tests.



---

archive/issue_comments_261357.json:
```json
{
    "body": "<a id='comment:62'></a>Replying to [comment:59 ohanar]:\n> I fixed master with a force push (to reflect the correct commit). If you want to send a pull request fixing the lib64/lib issue, please do. I don't see it on OS X (obviously) and I don't have access to a decent linux box at the moment either.\n\n\nDone. I may just take care of Jeroen's request - I will take it literally.",
    "created_at": "2015-08-25T09:26:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261357",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:62'></a>Replying to [comment:59 ohanar]:
> I fixed master with a force push (to reflect the correct commit). If you want to send a pull request fixing the lib64/lib issue, please do. I don't see it on OS X (obviously) and I don't have access to a decent linux box at the moment either.


Done. I may just take care of Jeroen's request - I will take it literally.



---

archive/issue_comments_261358.json:
```json
{
    "body": "<a id='comment:63'></a>#19085 filled and we should depend on it.",
    "created_at": "2015-08-25T09:57:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261358",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:63'></a>#19085 filled and we should depend on it.



---

archive/issue_events_051920.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2015-08-25T09:57:43Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "milestone": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18437#event-51920"
}
```



---

archive/issue_events_051921.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2015-08-25T09:57:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "milestone": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18437#event-51921"
}
```



---

archive/issue_comments_261359.json:
```json
{
    "body": "<a id='comment:65'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-08-26T00:54:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261359",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:65'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_261360.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,10 @@\n+Right now PolyBoRi relies on scons (which is still Python 2 only), and has some Python 2 specific syntax in its bindings. These issues will need to be resolved before Sage can support Python 3.\n \n+On this ticket we update to the first version of BRiAl which includes a new (incomplete, but sufficient for our purposes) autotools based system.\n+\n+To achieve this, we fork upstream `polybori`, see [https://github.com/BRiAl/BRiAl](https://github.com/BRiAl/BRiAl)\n+\n+**Tarball**: [https://github.com/BRiAl/BRiAl/releases/download/0.8.4.2/brial-0.8.4.2.tar.bz2](https://github.com/BRiAl/BRiAl/releases/download/0.8.4.2/brial-0.8.4.2.tar.bz2)\n \n Comment: 1\n \n``````\n",
    "created_at": "2015-08-26T00:55:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261360",
    "user": "https://github.com/ohanar"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,10 @@
+Right now PolyBoRi relies on scons (which is still Python 2 only), and has some Python 2 specific syntax in its bindings. These issues will need to be resolved before Sage can support Python 3.
 
+On this ticket we update to the first version of BRiAl which includes a new (incomplete, but sufficient for our purposes) autotools based system.
+
+To achieve this, we fork upstream `polybori`, see [https://github.com/BRiAl/BRiAl](https://github.com/BRiAl/BRiAl)
+
+**Tarball**: [https://github.com/BRiAl/BRiAl/releases/download/0.8.4.2/brial-0.8.4.2.tar.bz2](https://github.com/BRiAl/BRiAl/releases/download/0.8.4.2/brial-0.8.4.2.tar.bz2)
 
 Comment: 1
 
``````




---

archive/issue_comments_261361.json:
```json
{
    "body": "<a id='comment:67'></a>Building from scratch on a clean machine...",
    "created_at": "2015-08-26T02:05:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261361",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:67'></a>Building from scratch on a clean machine...



---

archive/issue_comments_261362.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-08-26T03:46:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261362",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_261363.json:
```json
{
    "body": "<a id='comment:68'></a>I think we are ready to go!",
    "created_at": "2015-08-26T03:46:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261363",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:68'></a>I think we are ready to go!



---

archive/issue_comments_261364.json:
```json
{
    "body": "<a id='comment:69'></a>http://build.sagemath.org/release/builders/%20%20slow%20AIMS%20%20%28Debian%207%2032%20bit%29%20incremental/builds/71/steps/compile/logs/stdio",
    "created_at": "2015-08-26T14:16:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261364",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:69'></a>http://build.sagemath.org/release/builders/%20%20slow%20AIMS%20%20%28Debian%207%2032%20bit%29%20incremental/builds/71/steps/compile/logs/stdio



---

archive/issue_comments_261365.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-08-26T14:16:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261365",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_261366.json:
```json
{
    "body": "<a id='comment:70'></a>I'm guessing this issue comes down to not including the SIMD cflags of m4ri. I can't seem to figure out how to extract these from `<m4ri/m4ri_config.h>` using autotools. `@`fbissey any ideas?",
    "created_at": "2015-08-26T18:43:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261366",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:70'></a>I'm guessing this issue comes down to not including the SIMD cflags of m4ri. I can't seem to figure out how to extract these from `<m4ri/m4ri_config.h>` using autotools. `@`fbissey any ideas?



---

archive/issue_comments_261367.json:
```json
{
    "body": "<a id='comment:71'></a>If that's the case, yes I do have an idea. But I'll look at the log more in depth first. It looks like missing sse2 instruction but the build is i486 so it shouldn't have them either.",
    "created_at": "2015-08-26T19:55:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261367",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:71'></a>If that's the case, yes I do have an idea. But I'll look at the log more in depth first. It looks like missing sse2 instruction but the build is i486 so it shouldn't have them either.



---

archive/issue_comments_261368.json:
```json
{
    "body": "<a id='comment:72'></a>I think I know what to do, expect a pull request shortly.",
    "created_at": "2015-08-26T21:46:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261368",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:72'></a>I think I know what to do, expect a pull request shortly.



---

archive/issue_comments_261369.json:
```json
{
    "body": "<a id='comment:73'></a>Here is what I do in M4RIE \n\n  https://bitbucket.org/malb/m4rie/src/HEAD/m4/ax_m4ri_flags.m4?at=master\n\nbut I think this should be replaced by pkg-config like this\n\n  https://autotools.io/pkgconfig/pkg_check_modules.html",
    "created_at": "2015-08-27T08:06:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261369",
    "user": "https://github.com/malb"
}
```

<a id='comment:73'></a>Here is what I do in M4RIE 

  https://bitbucket.org/malb/m4rie/src/HEAD/m4/ax_m4ri_flags.m4?at=master

but I think this should be replaced by pkg-config like this

  https://autotools.io/pkgconfig/pkg_check_modules.html



---

archive/issue_comments_261370.json:
```json
{
    "body": "<a id='comment:74'></a>Funny, I wrote what I called a vile hack but at some point it was looking very very close to that. I just didn't have the step to use `cat` afterwards. For some reason I didn't want to go that way.",
    "created_at": "2015-08-27T08:38:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261370",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:74'></a>Funny, I wrote what I called a vile hack but at some point it was looking very very close to that. I just didn't have the step to use `cat` afterwards. For some reason I didn't want to go that way.



---

archive/issue_comments_261371.json:
```json
{
    "body": "<a id='comment:75'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-08-27T23:45:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261371",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:75'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_261372.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-08-27T23:46:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261372",
    "user": "https://github.com/ohanar"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_261373.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,10 @@\n+Right now PolyBoRi relies on scons (which is still Python 2 only), and has some Python 2 specific syntax in its bindings. These issues will need to be resolved before Sage can support Python 3.\n \n+On this ticket we update to the first version of BRiAl which includes a new (incomplete, but sufficient for our purposes) autotools based system.\n+\n+To achieve this, we fork upstream `polybori`, see [https://github.com/BRiAl/BRiAl](https://github.com/BRiAl/BRiAl)\n+\n+**Tarball**: [https://github.com/BRiAl/BRiAl/releases/download/0.8.4.2/brial-0.8.4.3.tar.bz2](https://github.com/BRiAl/BRiAl/releases/download/0.8.4.2/brial-0.8.4.3.tar.bz2)\n \n Comment: 1\n \n``````\n",
    "created_at": "2015-08-27T23:46:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261373",
    "user": "https://github.com/ohanar"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,10 @@
+Right now PolyBoRi relies on scons (which is still Python 2 only), and has some Python 2 specific syntax in its bindings. These issues will need to be resolved before Sage can support Python 3.
 
+On this ticket we update to the first version of BRiAl which includes a new (incomplete, but sufficient for our purposes) autotools based system.
+
+To achieve this, we fork upstream `polybori`, see [https://github.com/BRiAl/BRiAl](https://github.com/BRiAl/BRiAl)
+
+**Tarball**: [https://github.com/BRiAl/BRiAl/releases/download/0.8.4.2/brial-0.8.4.3.tar.bz2](https://github.com/BRiAl/BRiAl/releases/download/0.8.4.2/brial-0.8.4.3.tar.bz2)
 
 Comment: 1
 
``````




---

archive/issue_comments_261374.json:
```json
{
    "body": "<a id='comment:76'></a>ok, hopefully now fixed",
    "created_at": "2015-08-27T23:46:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261374",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:76'></a>ok, hopefully now fixed



---

archive/issue_comments_261375.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-08-28T01:09:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261375",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_261376.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-08-28T12:12:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261376",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_261377.json:
```json
{
    "body": "<a id='comment:78'></a>Isn't this a typo?\n\n```diff\n+ $(INST)/$(BRAIL) \\\n```",
    "created_at": "2015-08-28T12:12:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261377",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:78'></a>Isn't this a typo?

```diff
+ $(INST)/$(BRAIL) \
```



---

archive/issue_comments_261378.json:
```json
{
    "body": "<a id='comment:79'></a>Replying to [comment:78 jdemeyer]:\n> Isn't this a typo?\n> \n> ```\n> #!diff\n> + $(INST)/$(BRAIL) \\\n> ```\n\nLooks like one. I wonder how I got it to build \"without that problem\" on two different machines.",
    "created_at": "2015-08-28T12:22:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261378",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:79'></a>Replying to [comment:78 jdemeyer]:
> Isn't this a typo?
> 
> ```
> #!diff
> + $(INST)/$(BRAIL) \
> ```

Looks like one. I wonder how I got it to build "without that problem" on two different machines.



---

archive/issue_comments_261379.json:
```json
{
    "body": "<a id='comment:80'></a>Replying to [comment:79 fbissey]:\n> Looks like one. I wonder how I got it to build \"without that problem\" on two different machines.\n\n`$(INST)/$(BRAIL)` becomes `$(INST)/` which is an existing directory...\n\nThe problem would start if you upgrade `$(BRIAL)`, then the Sage library would not be automatically rebuilt.",
    "created_at": "2015-08-28T12:34:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261379",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:80'></a>Replying to [comment:79 fbissey]:
> Looks like one. I wonder how I got it to build "without that problem" on two different machines.

`$(INST)/$(BRAIL)` becomes `$(INST)/` which is an existing directory...

The problem would start if you upgrade `$(BRIAL)`, then the Sage library would not be automatically rebuilt.



---

archive/issue_comments_261380.json:
```json
{
    "body": "<a id='comment:81'></a>Here is a build failure because the dependencies are not correct, looks like the Sage library is built before brial:\n\nhttp://build.sagemath.org/release/builders/%20%20slow%20Oxford%20ARM%20%28Ubuntu%2012.10%29%20incremental/builds/182/steps/compile/logs/stdio",
    "created_at": "2015-08-28T14:01:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261380",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:81'></a>Here is a build failure because the dependencies are not correct, looks like the Sage library is built before brial:

http://build.sagemath.org/release/builders/%20%20slow%20Oxford%20ARM%20%28Ubuntu%2012.10%29%20incremental/builds/182/steps/compile/logs/stdio



---

archive/issue_comments_261381.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,10 @@\n+Right now PolyBoRi relies on scons (which is still Python 2 only), and has some Python 2 specific syntax in its bindings. These issues will need to be resolved before Sage can support Python 3.\n \n+On this ticket we update to the first version of BRiAl which includes a new (incomplete, but sufficient for our purposes) autotools based system.\n+\n+To achieve this, we fork upstream `polybori`, see [https://github.com/BRiAl/BRiAl](https://github.com/BRiAl/BRiAl)\n+\n+**Tarball**: [https://github.com/BRiAl/BRiAl/releases/download/0.8.4.3/brial-0.8.4.3.tar.bz2](https://github.com/BRiAl/BRiAl/releases/download/0.8.4.3/brial-0.8.4.3.tar.bz2)\n \n Comment: 1\n \n``````\n",
    "created_at": "2015-08-28T14:02:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261381",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,10 @@
+Right now PolyBoRi relies on scons (which is still Python 2 only), and has some Python 2 specific syntax in its bindings. These issues will need to be resolved before Sage can support Python 3.
 
+On this ticket we update to the first version of BRiAl which includes a new (incomplete, but sufficient for our purposes) autotools based system.
+
+To achieve this, we fork upstream `polybori`, see [https://github.com/BRiAl/BRiAl](https://github.com/BRiAl/BRiAl)
+
+**Tarball**: [https://github.com/BRiAl/BRiAl/releases/download/0.8.4.3/brial-0.8.4.3.tar.bz2](https://github.com/BRiAl/BRiAl/releases/download/0.8.4.3/brial-0.8.4.3.tar.bz2)
 
 Comment: 1
 
``````




---

archive/issue_comments_261382.json:
```json
{
    "body": "<a id='comment:83'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-08-28T20:31:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261382",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:83'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_261383.json:
```json
{
    "body": "<a id='comment:84'></a>OK, positive review - take 3.",
    "created_at": "2015-08-28T20:47:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261383",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:84'></a>OK, positive review - take 3.



---

archive/issue_comments_261384.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2015-08-28T20:47:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261384",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_events_051922.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-08-29T23:56:40Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18437#event-51922"
}
```



---

archive/issue_comments_261385.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-08-29T23:56:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18437",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18437#issuecomment-261385",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
