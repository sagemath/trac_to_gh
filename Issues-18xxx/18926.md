# Issue 18926: Auto-generated index of functions

archive/issues_018689.json:
```json
{
    "body": "This branch implements a new function named `gen_rest_table_index` which generates an index of the functions given as arguments.\n\nIt can also generate the list of all methods of a given class `A`.\n\nWith this functions, it is then very easy to add an index of functions in a Sage module, that does not have to be kept updated manually.\n\nNathann\n\nCC:  @dcoudert @jm58660 dlucas\n\nBranch/Commit: [37011a4187cbd3d91ca68224a82151666682dd67](https://github.com/sagemath/sagetrac-mirror/commit/37011a4187cbd3d91ca68224a82151666682dd67)\n\nReviewer: Johan Sebastian Rosenkilde Nielsen\n\nAuthor: Nathann Cohen\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/18926\n\n",
    "closed_at": "2015-07-27T15:15:45Z",
    "created_at": "2015-07-20T10:03:42Z",
    "labels": [
        "component: documentation"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.8",
    "title": "Auto-generated index of functions",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18926",
    "user": "https://github.com/nathanncohen"
}
```
This branch implements a new function named `gen_rest_table_index` which generates an index of the functions given as arguments.

It can also generate the list of all methods of a given class `A`.

With this functions, it is then very easy to add an index of functions in a Sage module, that does not have to be kept updated manually.

Nathann

CC:  @dcoudert @jm58660 dlucas

Branch/Commit: [37011a4187cbd3d91ca68224a82151666682dd67](https://github.com/sagemath/sagetrac-mirror/commit/37011a4187cbd3d91ca68224a82151666682dd67)

Reviewer: Johan Sebastian Rosenkilde Nielsen

Author: Nathann Cohen

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/18926





---

archive/issue_comments_338526.json:
```json
{
    "body": "<a id='comment:1'></a>\nNew commits:\n|                                                                                                                                          |                                                |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------|\n|[b231896](https://github.com/sagemath/sagetrac-mirror/commit/b23189624b8e9c913af0140fb0a036291340ce8b)|`trac #18926: Auto-generated index of functions`|",
    "created_at": "2015-07-20T10:04:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338526",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:1'></a>
New commits:
|                                                                                                                                          |                                                |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------|
|[b231896](https://github.com/sagemath/sagetrac-mirror/commit/b23189624b8e9c913af0140fb0a036291340ce8b)|`trac #18926: Auto-generated index of functions`|



---

archive/issue_comments_338527.json:
```json
{
    "body": "Changing commit from \"\" to \"b23189624b8e9c913af0140fb0a036291340ce8b\"",
    "created_at": "2015-07-20T10:04:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338527",
    "user": "https://github.com/nathanncohen"
}
```

Changing commit from "" to "b23189624b8e9c913af0140fb0a036291340ce8b"



---

archive/issue_comments_338528.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-07-20T10:04:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338528",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_338529.json:
```json
{
    "body": "Changing branch from \"\" to \"public/18926\"",
    "created_at": "2015-07-20T10:04:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338529",
    "user": "https://github.com/nathanncohen"
}
```

Changing branch from "" to "public/18926"



---

archive/issue_comments_338530.json:
```json
{
    "body": "<a id='comment:2'></a>\nCC'ing myself because of #18636.",
    "created_at": "2015-07-20T10:43:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338530",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:2'></a>
CC'ing myself because of #18636.



---

archive/issue_comments_338531.json:
```json
{
    "body": "Changing commit from \"b23189624b8e9c913af0140fb0a036291340ce8b\" to \"e1a3241375269c7f8bff7431e5bceee79f094641\"",
    "created_at": "2015-07-20T15:27:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338531",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b23189624b8e9c913af0140fb0a036291340ce8b" to "e1a3241375269c7f8bff7431e5bceee79f094641"



---

archive/issue_comments_338532.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------|\n|[e1a3241](https://github.com/sagemath/sagetrac-mirror/commit/e1a3241375269c7f8bff7431e5bceee79f094641)|`trac #18926: Table from #18636`|",
    "created_at": "2015-07-20T15:27:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338532",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------|
|[e1a3241](https://github.com/sagemath/sagetrac-mirror/commit/e1a3241375269c7f8bff7431e5bceee79f094641)|`trac #18926: Table from #18636`|



---

archive/issue_comments_338533.json:
```json
{
    "body": "<a id='comment:5'></a>\nJust to make sure: there is no way to skip all deprecated functions? On `posets.py` compare `to_graph()` and `meet_matrix()`.\n\nThe code seems to be clear. However, I know nothing about introspection in python, so hopefully somebody else will review this.",
    "created_at": "2015-07-20T19:15:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338533",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:5'></a>
Just to make sure: there is no way to skip all deprecated functions? On `posets.py` compare `to_graph()` and `meet_matrix()`.

The code seems to be clear. However, I know nothing about introspection in python, so hopefully somebody else will review this.



---

archive/issue_comments_338534.json:
```json
{
    "body": "<a id='comment:6'></a>\n> Just to make sure: there is no way to skip all deprecated functions?\n\n\nI already filter out those that I can identify. If you see a way to remove others, we can add it.\n\nNathann",
    "created_at": "2015-07-20T20:02:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338534",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:6'></a>
> Just to make sure: there is no way to skip all deprecated functions?


I already filter out those that I can identify. If you see a way to remove others, we can add it.

Nathann



---

archive/issue_comments_338535.json:
```json
{
    "body": "<a id='comment:7'></a>\nHi Nathann\n\nClever idea and nice code. I like it.\n\nA few small comments:\n\n* The doc string doesn't specify that you can give the function a module (only a class).\n\n* You could add a doc-test that passing a class or module also works. For good\n  quine humour, it could be:\n\n  sage: gen_rest_table_index(sage.misc.rest_index_of_methods)\n  ....\n\n* What exactly do you filter out with the `inspect.getmodule(root) == inspect.getmodule(f)` check?\n\n  This function would be nice to use in catalogues, such as\n  `sage.coding.codes_catalog`. But currently one can't due to the above line.\n  Could that, however, possibly give problems with references given in the\n  one-line description of a function from another module?\n\n* The function doesn't seem to do very interesting things for classes which have\n  inherited most of their methods. Is this by design? It is unfortunate wrt. the\n  category framework which garbles parent classes. For instance, running the\n  function on `FinitePosets` returns nothing.\n\n  Instead of using `root.__dict__`, then `dir(root)` would find everything and\n  his grandmother. Could that be more clever? Here the check\n  `inspect.getmodule(root) == ...` also seems to get in the way for listing\n  class methods.\n\nJohan",
    "created_at": "2015-07-22T15:47:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338535",
    "user": "https://github.com/johanrosenkilde"
}
```

<a id='comment:7'></a>
Hi Nathann

Clever idea and nice code. I like it.

A few small comments:

* The doc string doesn't specify that you can give the function a module (only a class).

* You could add a doc-test that passing a class or module also works. For good
  quine humour, it could be:

  sage: gen_rest_table_index(sage.misc.rest_index_of_methods)
  ....

* What exactly do you filter out with the `inspect.getmodule(root) == inspect.getmodule(f)` check?

  This function would be nice to use in catalogues, such as
  `sage.coding.codes_catalog`. But currently one can't due to the above line.
  Could that, however, possibly give problems with references given in the
  one-line description of a function from another module?

* The function doesn't seem to do very interesting things for classes which have
  inherited most of their methods. Is this by design? It is unfortunate wrt. the
  category framework which garbles parent classes. For instance, running the
  function on `FinitePosets` returns nothing.

  Instead of using `root.__dict__`, then `dir(root)` would find everything and
  his grandmother. Could that be more clever? Here the check
  `inspect.getmodule(root) == ...` also seems to get in the way for listing
  class methods.

Johan



---

archive/issue_comments_338536.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2015-07-22T15:55:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338536",
    "user": "https://github.com/johanrosenkilde"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_338537.json:
```json
{
    "body": "<a id='comment:9'></a>\nHellooooooooooo !\n\n> Clever idea and nice code. I like it.\n\n\nThanks. I like it too `:-P`\n\n> * The doc string doesn't specify that you can give the function a module (only a class).\n\n\nSorry. Fixed.\n\n> * You could add a doc-test that passing a class or module also works. For good\n>   quine humour, it could be:\n> \n>   sage: gen_rest_table_index(sage.misc.rest_index_of_methods)\n>   ....\n\n\nGood idea, done.\n\n> * What exactly do you filter out with the `inspect.getmodule(root) == inspect.getmodule(f)` check?\n\n\nThe imported modules. If you remove it, you will see `gen_rest_table_index` appear in the documentation of `sage.combinat.designs.difference_families`.\n\n> * The function doesn't seem to do very interesting things for classes which have\n>   inherited most of their methods. Is this by design?\n\n\nIt was designed to only show the 'first-level' functions, i.e. not the inherited ones.\n\n>   Instead of using `root.__dict__`, then `dir(root)` would find everything and\n>   his grandmother. Could that be more clever? Here the check\n>   `inspect.getmodule(root) == ...` also seems to get in the way for listing\n>   class methods.\n\n\nIf you find a nice way to make it work, I have no objection for as long as both remain available. The list of methods of 'graph' is already long enough:\n\nhttp://doc.sagemath.org/html/en/reference/graphs/sage/graphs/graph.html\n\nYou don't want to see its functions mixed with those:\n\nhttp://doc.sagemath.org/html/en/reference/graphs/sage/graphs/generic_graph.html\n\nOf course this index of functions is 'hand-made' so the example does not apply. But there are other places where I would like to have an index of functions: many classes inherit from IncidenceStructure, and I would not want to see the methods of IncidenceStructure repeated everywhere.\n\nIn this situation, it would be more efficient to list only the first-level methods, and have links saying what this class inherits from, so that users can find the other methods easily.\n\nThis way we also avoid seeing the usual broken functions \"which should not be inherited but are nevertheless\" like\n\n```\nsage: Partitions(4).base_ring\nsage: Partitions(4).objgen\nsage: Partitions(4).objgens\n...\n```\n\nNathann",
    "created_at": "2015-07-22T16:41:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338537",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:9'></a>
Hellooooooooooo !

> Clever idea and nice code. I like it.


Thanks. I like it too `:-P`

> * The doc string doesn't specify that you can give the function a module (only a class).


Sorry. Fixed.

> * You could add a doc-test that passing a class or module also works. For good
>   quine humour, it could be:
> 
>   sage: gen_rest_table_index(sage.misc.rest_index_of_methods)
>   ....


Good idea, done.

> * What exactly do you filter out with the `inspect.getmodule(root) == inspect.getmodule(f)` check?


The imported modules. If you remove it, you will see `gen_rest_table_index` appear in the documentation of `sage.combinat.designs.difference_families`.

> * The function doesn't seem to do very interesting things for classes which have
>   inherited most of their methods. Is this by design?


It was designed to only show the 'first-level' functions, i.e. not the inherited ones.

>   Instead of using `root.__dict__`, then `dir(root)` would find everything and
>   his grandmother. Could that be more clever? Here the check
>   `inspect.getmodule(root) == ...` also seems to get in the way for listing
>   class methods.


If you find a nice way to make it work, I have no objection for as long as both remain available. The list of methods of 'graph' is already long enough:

http://doc.sagemath.org/html/en/reference/graphs/sage/graphs/graph.html

You don't want to see its functions mixed with those:

http://doc.sagemath.org/html/en/reference/graphs/sage/graphs/generic_graph.html

Of course this index of functions is 'hand-made' so the example does not apply. But there are other places where I would like to have an index of functions: many classes inherit from IncidenceStructure, and I would not want to see the methods of IncidenceStructure repeated everywhere.

In this situation, it would be more efficient to list only the first-level methods, and have links saying what this class inherits from, so that users can find the other methods easily.

This way we also avoid seeing the usual broken functions "which should not be inherited but are nevertheless" like

```
sage: Partitions(4).base_ring
sage: Partitions(4).objgen
sage: Partitions(4).objgens
...
```

Nathann



---

archive/issue_comments_338538.json:
```json
{
    "body": "Changing commit from \"e1a3241375269c7f8bff7431e5bceee79f094641\" to \"eb276db9b51097b202cc9a5e1f71f1f9ca599925\"",
    "created_at": "2015-07-22T16:41:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338538",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e1a3241375269c7f8bff7431e5bceee79f094641" to "eb276db9b51097b202cc9a5e1f71f1f9ca599925"



---

archive/issue_comments_338539.json:
```json
{
    "body": "<a id='comment:10'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                  |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|\n|[5a96f89](https://github.com/sagemath/sagetrac-mirror/commit/5a96f895599cd0ae495202b4ac65862122e1f305)|`trac #18926: Merged with 6.8.rc1`|\n|[eb276db](https://github.com/sagemath/sagetrac-mirror/commit/eb276db9b51097b202cc9a5e1f71f1f9ca599925)|`trac #18926: Reviewer's remarks`|",
    "created_at": "2015-07-22T16:41:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338539",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                  |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|
|[5a96f89](https://github.com/sagemath/sagetrac-mirror/commit/5a96f895599cd0ae495202b4ac65862122e1f305)|`trac #18926: Merged with 6.8.rc1`|
|[eb276db](https://github.com/sagemath/sagetrac-mirror/commit/eb276db9b51097b202cc9a5e1f71f1f9ca599925)|`trac #18926: Reviewer's remarks`|



---

archive/issue_comments_338540.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2015-07-22T16:41:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338540",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_338541.json:
```json
{
    "body": "<a id='comment:12'></a>\nHelloooooooooooooooo Nathannnnnnnn,\n\nFor some reason, I can't pull from trac.sagemath.org right now - connection timeout. So I can't get your newest version and run the tests.\n\nI see what you're saying about the locally defined functions. To support\ncatalogues like sage.coding.codes_catalog, a flag `only_local=True` could be\nadded: usually, we wan't to filter out imported or inherited functions, but\nsometimes we might want them in. I don't think it complicates the function\ndetrimentally.\n\nI'd push this change myself if trac was working for me right now.\n\nI also wanted to suggest some further polishing of the docstrings. I'll push that as soon as I can again connect to trac.sagemath.org.\n\nJohan",
    "created_at": "2015-07-23T08:38:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338541",
    "user": "https://github.com/johanrosenkilde"
}
```

<a id='comment:12'></a>
Helloooooooooooooooo Nathannnnnnnn,

For some reason, I can't pull from trac.sagemath.org right now - connection timeout. So I can't get your newest version and run the tests.

I see what you're saying about the locally defined functions. To support
catalogues like sage.coding.codes_catalog, a flag `only_local=True` could be
added: usually, we wan't to filter out imported or inherited functions, but
sometimes we might want them in. I don't think it complicates the function
detrimentally.

I'd push this change myself if trac was working for me right now.

I also wanted to suggest some further polishing of the docstrings. I'll push that as soon as I can again connect to trac.sagemath.org.

Johan



---

archive/issue_comments_338542.json:
```json
{
    "body": "Changing commit from \"eb276db9b51097b202cc9a5e1f71f1f9ca599925\" to \"5fc4e9e9bffe705a66386bce27655da00727bd1a\"",
    "created_at": "2015-07-24T11:47:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338542",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "eb276db9b51097b202cc9a5e1f71f1f9ca599925" to "5fc4e9e9bffe705a66386bce27655da00727bd1a"



---

archive/issue_comments_338543.json:
```json
{
    "body": "<a id='comment:13'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                     |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|\n|[69f1667](https://github.com/sagemath/sagetrac-mirror/commit/69f16678fff3f48c9ce238d0a71e11f766ca74ea)|`Don't crash if there's no docstring`|\n|[a812984](https://github.com/sagemath/sagetrac-mirror/commit/a812984f7452bed4ea86daa5d25f442fa519d266)|`Some doc-string clarifications`|\n|[614a04d](https://github.com/sagemath/sagetrac-mirror/commit/614a04d9877a927a342d646c1edc392e46b40a41)|`Add the only_local keyword to allow use in catalog modules`|\n|[5fc4e9e](https://github.com/sagemath/sagetrac-mirror/commit/5fc4e9e9bffe705a66386bce27655da00727bd1a)|`Add doctest for self-inclusion when only_local=False`|",
    "created_at": "2015-07-24T11:47:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338543",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                     |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|
|[69f1667](https://github.com/sagemath/sagetrac-mirror/commit/69f16678fff3f48c9ce238d0a71e11f766ca74ea)|`Don't crash if there's no docstring`|
|[a812984](https://github.com/sagemath/sagetrac-mirror/commit/a812984f7452bed4ea86daa5d25f442fa519d266)|`Some doc-string clarifications`|
|[614a04d](https://github.com/sagemath/sagetrac-mirror/commit/614a04d9877a927a342d646c1edc392e46b40a41)|`Add the only_local keyword to allow use in catalog modules`|
|[5fc4e9e](https://github.com/sagemath/sagetrac-mirror/commit/5fc4e9e9bffe705a66386bce27655da00727bd1a)|`Add doctest for self-inclusion when only_local=False`|



---

archive/issue_comments_338544.json:
```json
{
    "body": "<a id='comment:14'></a>\nHi Nathann,\n\nNow the trac firewall has been doused, I've corrected the small things I mentioned. From my side, I give the ticket a green light now. So you can review my small changes :-)\n\nJohan",
    "created_at": "2015-07-24T11:49:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338544",
    "user": "https://github.com/johanrosenkilde"
}
```

<a id='comment:14'></a>
Hi Nathann,

Now the trac firewall has been doused, I've corrected the small things I mentioned. From my side, I give the ticket a green light now. So you can review my small changes :-)

Johan



---

archive/issue_comments_338545.json:
```json
{
    "body": "<a id='comment:15'></a>\nHelloooooo Johan,\n\nI have several remarks about your commits:\n\n- If you build the documentation of reference/misc, you will notice that the description (in the index) of `gen_rest_table_index` is unfinished: only the first line is taken into account (see http://doc.sagemath.org/html/en/developer/coding_basics.html#the-docstring-of-a-function-content)\n\n- Wrong alignment of a paragraph in the documentation of `only_local`, and some latex code which should be surrounded by two backticks instead of only one.\n\n- About `only_local`: I do not understand this doctest about not including `gen_rest_table_index` in the index of ... its own module. Why wouldn't `only_local=False` print always more than `only_local=True` in general? This does not make sense to me.\n\n- I do not understand your mention of 'static' methods.\n\n- Above the 'input' block, a lone line applies to 'classes' only, and does not take the value 'only_local' into account.\n\nNathann",
    "created_at": "2015-07-24T11:59:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338545",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:15'></a>
Helloooooo Johan,

I have several remarks about your commits:

- If you build the documentation of reference/misc, you will notice that the description (in the index) of `gen_rest_table_index` is unfinished: only the first line is taken into account (see http://doc.sagemath.org/html/en/developer/coding_basics.html#the-docstring-of-a-function-content)

- Wrong alignment of a paragraph in the documentation of `only_local`, and some latex code which should be surrounded by two backticks instead of only one.

- About `only_local`: I do not understand this doctest about not including `gen_rest_table_index` in the index of ... its own module. Why wouldn't `only_local=False` print always more than `only_local=True` in general? This does not make sense to me.

- I do not understand your mention of 'static' methods.

- Above the 'input' block, a lone line applies to 'classes' only, and does not take the value 'only_local' into account.

Nathann



---

archive/issue_comments_338546.json:
```json
{
    "body": "<a id='comment:16'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                  |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------|\n|[9325bb3](https://github.com/sagemath/sagetrac-mirror/commit/9325bb36ef1e6d0a16a986c7a6ecf20c104fef40)|`Reviewer^2 fixes`|",
    "created_at": "2015-07-24T12:06:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338546",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                  |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------|
|[9325bb3](https://github.com/sagemath/sagetrac-mirror/commit/9325bb36ef1e6d0a16a986c7a6ecf20c104fef40)|`Reviewer^2 fixes`|



---

archive/issue_comments_338547.json:
```json
{
    "body": "Changing commit from \"5fc4e9e9bffe705a66386bce27655da00727bd1a\" to \"9325bb36ef1e6d0a16a986c7a6ecf20c104fef40\"",
    "created_at": "2015-07-24T12:06:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338547",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5fc4e9e9bffe705a66386bce27655da00727bd1a" to "9325bb36ef1e6d0a16a986c7a6ecf20c104fef40"



---

archive/issue_comments_338548.json:
```json
{
    "body": "<a id='comment:17'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                           |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|\n|[3a9e3b5](https://github.com/sagemath/sagetrac-mirror/commit/3a9e3b5cbb00db4ffa5f97542ce3d027b19ee006)|`Yet another docstring fix`|",
    "created_at": "2015-07-24T12:08:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338548",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                           |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|
|[3a9e3b5](https://github.com/sagemath/sagetrac-mirror/commit/3a9e3b5cbb00db4ffa5f97542ce3d027b19ee006)|`Yet another docstring fix`|



---

archive/issue_comments_338549.json:
```json
{
    "body": "Changing commit from \"9325bb36ef1e6d0a16a986c7a6ecf20c104fef40\" to \"3a9e3b5cbb00db4ffa5f97542ce3d027b19ee006\"",
    "created_at": "2015-07-24T12:08:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338549",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9325bb36ef1e6d0a16a986c7a6ecf20c104fef40" to "3a9e3b5cbb00db4ffa5f97542ce3d027b19ee006"



---

archive/issue_comments_338550.json:
```json
{
    "body": "<a id='comment:18'></a>\nHiiiiii Nathann,\n\n> - If you build the documentation of reference/misc...\n\n\nOh, sorry, didn't check that. Fixed.\n\n> - Wrong alignment of a paragraph in the documentation of `only_local`, and some latex code which should be surrounded by two backticks instead of only one.\n\n\nFixed.\n\n> - About `only_local`: I do not understand this doctest about not including `gen_rest_table_index` in the index of ... its own module. Why wouldn't `only_local=False` print always more than `only_local=True` in general? This does not make sense to me.\n\n\nYes, it's slightly bizarre. Say you have a catalog module that you wish to have\nan index for. Then you import `gen_rest_table_index` and you call it with\n`only_local=False`: you want all the non-local functions, **except\n`gen_rest_table_index` itself**. The funny test is then simply to see that this\nis filtered out, without having to rely on another module.\n\n> - I do not understand your mention of 'static' methods.\n\n\nThe function only extracts methods of a class which have been decorated with\n``@`staticmethod`. It will not extract methods on *instances* of the class, i.e.\nthe normal methods. This was already the semantics in your original version.\n\n> - Above the 'input' block, a lone line applies to 'classes' only, and does not take the value 'only_local' into account.\n\n\nThis line was just to clarify the semantics of the function wrt. classes, since\nthis surprised me when I first reviewed the ticket. I never intended\n`only_local` to have any effect when the function is called on classes.\n\nJohan\n\n---\nNew commits:\n|                                                                                                                                          |                           |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|\n|[3a9e3b5](https://github.com/sagemath/sagetrac-mirror/commit/3a9e3b5cbb00db4ffa5f97542ce3d027b19ee006)|`Yet another docstring fix`|\n\n---\nNew commits:\n|                                                                                                                                          |                           |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|\n|[3a9e3b5](https://github.com/sagemath/sagetrac-mirror/commit/3a9e3b5cbb00db4ffa5f97542ce3d027b19ee006)|`Yet another docstring fix`|",
    "created_at": "2015-07-24T12:15:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338550",
    "user": "https://github.com/johanrosenkilde"
}
```

<a id='comment:18'></a>
Hiiiiii Nathann,

> - If you build the documentation of reference/misc...


Oh, sorry, didn't check that. Fixed.

> - Wrong alignment of a paragraph in the documentation of `only_local`, and some latex code which should be surrounded by two backticks instead of only one.


Fixed.

> - About `only_local`: I do not understand this doctest about not including `gen_rest_table_index` in the index of ... its own module. Why wouldn't `only_local=False` print always more than `only_local=True` in general? This does not make sense to me.


Yes, it's slightly bizarre. Say you have a catalog module that you wish to have
an index for. Then you import `gen_rest_table_index` and you call it with
`only_local=False`: you want all the non-local functions, **except
`gen_rest_table_index` itself**. The funny test is then simply to see that this
is filtered out, without having to rely on another module.

> - I do not understand your mention of 'static' methods.


The function only extracts methods of a class which have been decorated with
``@`staticmethod`. It will not extract methods on *instances* of the class, i.e.
the normal methods. This was already the semantics in your original version.

> - Above the 'input' block, a lone line applies to 'classes' only, and does not take the value 'only_local' into account.


This line was just to clarify the semantics of the function wrt. classes, since
this surprised me when I first reviewed the ticket. I never intended
`only_local` to have any effect when the function is called on classes.

Johan

---
New commits:
|                                                                                                                                          |                           |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|
|[3a9e3b5](https://github.com/sagemath/sagetrac-mirror/commit/3a9e3b5cbb00db4ffa5f97542ce3d027b19ee006)|`Yet another docstring fix`|

---
New commits:
|                                                                                                                                          |                           |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|
|[3a9e3b5](https://github.com/sagemath/sagetrac-mirror/commit/3a9e3b5cbb00db4ffa5f97542ce3d027b19ee006)|`Yet another docstring fix`|



---

archive/issue_comments_338551.json:
```json
{
    "body": "<a id='comment:19'></a>\nHelloooooooo,\n\n> Yes, it's slightly bizarre. Say you have a catalog module that you wish to have\n> an index for. Then you import `gen_rest_table_index` and you call it with\n> `only_local=False`: you want all the non-local functions, **except\n> `gen_rest_table_index` itself**. The funny test is then simply to see that this\n> is filtered out, without having to rely on another module.\n\n\nOh okay, it is true that somehow this function has a 'special behaviour'. Would you see anything wrong in filtering it out with `f is not gen_rest_table_index` instead of checking its module?\n\n> The function only extracts methods of a class which have been decorated with\n> ``@`staticmethod`.\n\n\nWhaaaaat? `O_o`\n\nNone of the methods of `IncidenceStructure` are decorated like that. And they appear in the list `O_o`\n\n> This line was just to clarify the semantics of the function wrt. classes, since\n> this surprised me when I first reviewed the ticket. I never intended\n> `only_local` to have any effect when the function is called on classes.\n\n\nOh. What about renaming it to 'only_local_functions` to make it plain(er) that it does not apply to methods? \n\nNathann",
    "created_at": "2015-07-24T12:27:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338551",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:19'></a>
Helloooooooo,

> Yes, it's slightly bizarre. Say you have a catalog module that you wish to have
> an index for. Then you import `gen_rest_table_index` and you call it with
> `only_local=False`: you want all the non-local functions, **except
> `gen_rest_table_index` itself**. The funny test is then simply to see that this
> is filtered out, without having to rely on another module.


Oh okay, it is true that somehow this function has a 'special behaviour'. Would you see anything wrong in filtering it out with `f is not gen_rest_table_index` instead of checking its module?

> The function only extracts methods of a class which have been decorated with
> ``@`staticmethod`.


Whaaaaat? `O_o`

None of the methods of `IncidenceStructure` are decorated like that. And they appear in the list `O_o`

> This line was just to clarify the semantics of the function wrt. classes, since
> this surprised me when I first reviewed the ticket. I never intended
> `only_local` to have any effect when the function is called on classes.


Oh. What about renaming it to 'only_local_functions` to make it plain(er) that it does not apply to methods? 

Nathann



---

archive/issue_comments_338552.json:
```json
{
    "body": "<a id='comment:20'></a>\n> Oh okay, it is true that somehow this function has a 'special behaviour'. Would you see anything wrong in filtering it out with `f is not gen_rest_table_index` instead of checking its module?\n\n\nNo, that's probably simpler. I did the other check in case more functions are added to the module, but now I realise that even if that happens, multiple such functions are probably not imported into the same module.\n\n> > The function only extracts methods of a class which have been decorated with\n> > ``@`staticmethod`.\n\n> \n> Whaaaaat? `O_o`\n> \n> None of the methods of `IncidenceStructure` are decorated like that. And they appear in the list `O_o`\n\n\nOk... It seems I've been on drugs (benadryl). I know that it was some class in combinat.posets that made me think this, and I though I tested it. I must have messed it up with the inherited-methods-not-included thing...\n\n> > This line was just to clarify the semantics of the function wrt. classes, since\n> > this surprised me when I first reviewed the ticket. I never intended\n> > `only_local` to have any effect when the function is called on classes.\n\n> \n> Oh. What about renaming it to 'only_local_functions` to make it plain(er) that it does not apply to methods? \n\n\nYeah, that's a good idea.",
    "created_at": "2015-07-24T12:33:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338552",
    "user": "https://github.com/johanrosenkilde"
}
```

<a id='comment:20'></a>
> Oh okay, it is true that somehow this function has a 'special behaviour'. Would you see anything wrong in filtering it out with `f is not gen_rest_table_index` instead of checking its module?


No, that's probably simpler. I did the other check in case more functions are added to the module, but now I realise that even if that happens, multiple such functions are probably not imported into the same module.

> > The function only extracts methods of a class which have been decorated with
> > ``@`staticmethod`.

> 
> Whaaaaat? `O_o`
> 
> None of the methods of `IncidenceStructure` are decorated like that. And they appear in the list `O_o`


Ok... It seems I've been on drugs (benadryl). I know that it was some class in combinat.posets that made me think this, and I though I tested it. I must have messed it up with the inherited-methods-not-included thing...

> > This line was just to clarify the semantics of the function wrt. classes, since
> > this surprised me when I first reviewed the ticket. I never intended
> > `only_local` to have any effect when the function is called on classes.

> 
> Oh. What about renaming it to 'only_local_functions` to make it plain(er) that it does not apply to methods? 


Yeah, that's a good idea.



---

archive/issue_comments_338553.json:
```json
{
    "body": "<a id='comment:21'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                          |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|\n|[62fae3d](https://github.com/sagemath/sagetrac-mirror/commit/62fae3d72ebc65be67fd72a426f744a581dda42d)|`More reviewer^2 comments`|",
    "created_at": "2015-07-24T12:36:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338553",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                          |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|
|[62fae3d](https://github.com/sagemath/sagetrac-mirror/commit/62fae3d72ebc65be67fd72a426f744a581dda42d)|`More reviewer^2 comments`|



---

archive/issue_comments_338554.json:
```json
{
    "body": "Changing commit from \"3a9e3b5cbb00db4ffa5f97542ce3d027b19ee006\" to \"62fae3d72ebc65be67fd72a426f744a581dda42d\"",
    "created_at": "2015-07-24T12:36:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338554",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "3a9e3b5cbb00db4ffa5f97542ce3d027b19ee006" to "62fae3d72ebc65be67fd72a426f744a581dda42d"



---

archive/issue_comments_338555.json:
```json
{
    "body": "<a id='comment:22'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                       |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|\n|[37011a4](https://github.com/sagemath/sagetrac-mirror/commit/37011a4187cbd3d91ca68224a82151666682dd67)|`trac #18926: Cleaning`|",
    "created_at": "2015-07-24T13:09:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338555",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                       |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|
|[37011a4](https://github.com/sagemath/sagetrac-mirror/commit/37011a4187cbd3d91ca68224a82151666682dd67)|`trac #18926: Cleaning`|



---

archive/issue_comments_338556.json:
```json
{
    "body": "Changing commit from \"62fae3d72ebc65be67fd72a426f744a581dda42d\" to \"37011a4187cbd3d91ca68224a82151666682dd67\"",
    "created_at": "2015-07-24T13:09:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338556",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "62fae3d72ebc65be67fd72a426f744a581dda42d" to "37011a4187cbd3d91ca68224a82151666682dd67"



---

archive/issue_comments_338557.json:
```json
{
    "body": "<a id='comment:23'></a>\nHellooooo !\n\nI cleaned/simplified a couple of things. Also, it seems that this code catalog of yours did not compile anymore and the functions appeared twice. Is it okay for you now?\n\nI do not see anything to add, on my side.\n\nNathann",
    "created_at": "2015-07-24T13:13:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338557",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:23'></a>
Hellooooo !

I cleaned/simplified a couple of things. Also, it seems that this code catalog of yours did not compile anymore and the functions appeared twice. Is it okay for you now?

I do not see anything to add, on my side.

Nathann



---

archive/issue_comments_338558.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-07-24T13:19:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338558",
    "user": "https://github.com/johanrosenkilde"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_338559.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Johan Sebastian Rosenkilde Nielsen\"",
    "created_at": "2015-07-24T13:19:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338559",
    "user": "https://github.com/johanrosenkilde"
}
```

Changing reviewer from "" to "Johan Sebastian Rosenkilde Nielsen"



---

archive/issue_comments_338560.json:
```json
{
    "body": "<a id='comment:24'></a>\nSorry for the mess. Yes, it is ok for me now.",
    "created_at": "2015-07-24T13:19:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338560",
    "user": "https://github.com/johanrosenkilde"
}
```

<a id='comment:24'></a>
Sorry for the mess. Yes, it is ok for me now.



---

archive/issue_comments_338561.json:
```json
{
    "body": "<a id='comment:25'></a>\nExxxxxxxxxcellent. Thanks. We now have free index of functions, nothing to do by hand. Cool.\n\nNathann",
    "created_at": "2015-07-24T13:21:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338561",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:25'></a>
Exxxxxxxxxcellent. Thanks. We now have free index of functions, nothing to do by hand. Cool.

Nathann



---

archive/issue_comments_338562.json:
```json
{
    "body": "<a id='comment:26'></a>\nAnd thank you very much for your help!!!\n\nNathann",
    "created_at": "2015-07-24T13:21:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338562",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:26'></a>
And thank you very much for your help!!!

Nathann



---

archive/issue_comments_338563.json:
```json
{
    "body": "<a id='comment:27'></a>\nYes it's very nice :-) I though several times that such a thing would be good to have but I was a bit daunted with the prospects of picking into Sphinx internals. Your solution is very neat.",
    "created_at": "2015-07-24T13:36:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338563",
    "user": "https://github.com/johanrosenkilde"
}
```

<a id='comment:27'></a>
Yes it's very nice :-) I though several times that such a thing would be good to have but I was a bit daunted with the prospects of picking into Sphinx internals. Your solution is very neat.



---

archive/issue_events_060030.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-07-27T15:15:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18926#event-60030"
}
```



---

archive/issue_comments_338564.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-07-27T15:15:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338564",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_338565.json:
```json
{
    "body": "Changing branch from \"public/18926\" to \"37011a4187cbd3d91ca68224a82151666682dd67\"",
    "created_at": "2015-07-27T15:15:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18926",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18926#issuecomment-338565",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/18926" to "37011a4187cbd3d91ca68224a82151666682dd67"
