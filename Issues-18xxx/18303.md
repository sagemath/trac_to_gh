# Issue 18303: faster comparisons in AA and QQbar

archive/issues_018066.json:
```json
{
    "body": "The comparisons of elements of `AA` can be much faster! We got\n\nold timing\n\n```\nsage: a = AA(125/13)\nsage: b = AA(3/5)\nsage: timeit(\"a < b\", repeat=10, number=50000)\n50000 loops, best of 10: 15.9 \u00b5s per loop\nsage: a = AA(2).sqrt()\nsage: timeit(\"a < b\", repeat=10, number=50000)\n50000 loops, best of 10: 17.9 \u00b5s per loop\n```\n\nnew timing\n\n```\nsage: a = AA(125/13)\nsage: b = AA(3/5)\nsage: timeit(\"a < b\", repeat=10, number=50000)\n50000 loops, best of 10: 680 ns per loop\nsage: a = AA(2).sqrt()\nsage: timeit(\"a < b\", repeat=10, number=50000)\n50000 loops, best of 10: 686 ns per loop\n```\n\nAlso, instead of implementing `__cmp__` we implement `_cmp_` (that avoids one function call).\n\nsee also: #18304 (comparisons involving integers and rationals)\n\nCC:  @gagern @jdemeyer\n\nBranch/Commit: 99113f1d434a846d322100a919023c3437c551ad\n\nReviewer: Fr\u00e9d\u00e9ric Chapoton\n\nAuthor: Vincent Delecroix\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/18303\n\n",
    "closed_at": "2017-05-08T21:19:06Z",
    "created_at": "2015-04-26T10:34:03Z",
    "labels": [
        "component: number fields"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "faster comparisons in AA and QQbar",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18303",
    "user": "https://github.com/videlec"
}
```
The comparisons of elements of `AA` can be much faster! We got

old timing

```
sage: a = AA(125/13)
sage: b = AA(3/5)
sage: timeit("a < b", repeat=10, number=50000)
50000 loops, best of 10: 15.9 µs per loop
sage: a = AA(2).sqrt()
sage: timeit("a < b", repeat=10, number=50000)
50000 loops, best of 10: 17.9 µs per loop
```

new timing

```
sage: a = AA(125/13)
sage: b = AA(3/5)
sage: timeit("a < b", repeat=10, number=50000)
50000 loops, best of 10: 680 ns per loop
sage: a = AA(2).sqrt()
sage: timeit("a < b", repeat=10, number=50000)
50000 loops, best of 10: 686 ns per loop
```

Also, instead of implementing `__cmp__` we implement `_cmp_` (that avoids one function call).

see also: #18304 (comparisons involving integers and rationals)

CC:  @gagern @jdemeyer

Branch/Commit: 99113f1d434a846d322100a919023c3437c551ad

Reviewer: Frédéric Chapoton

Author: Vincent Delecroix

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/18303





---

archive/issue_comments_318027.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -23,3 +23,5 @@\n sage: timeit(\"a < b\", repeat=10, number=50000)\n 50000 loops, best of 10: 7.6 \u00b5s per loop\n ```\n+\n+see also: #18304 (comparisons involving integers and rationals).\n``````\n",
    "created_at": "2015-04-26T11:05:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318027",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -23,3 +23,5 @@
 sage: timeit("a < b", repeat=10, number=50000)
 50000 loops, best of 10: 7.6 µs per loop
 ```
+
+see also: #18304 (comparisons involving integers and rationals).
``````




---

archive/issue_comments_318028.json:
```json
{
    "body": "Changing author from \"\" to \"Vincent Delecroix\"",
    "created_at": "2015-04-26T13:01:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318028",
    "user": "https://github.com/videlec"
}
```

Changing author from "" to "Vincent Delecroix"



---

archive/issue_comments_318029.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-As remarked in #17890 the comparisons of elements in `QQbar` can be much faster by implementing `_richcmp_` instead of `__cmp__`. A naive implementation already gives a great speedup\n+The comparisons of elements of `AA` can be much faster! We got\n \n old timing\n \n@@ -18,10 +18,14 @@\n sage: a = AA(125/13)\n sage: b = AA(3/5)\n sage: timeit(\"a < b\", repeat=10, number=50000)\n-50000 loops, best of 10: 1.02 \u00b5s per loop\n+50000 loops, best of 10: 680 ns per loop\n sage: a = AA(2).sqrt()\n sage: timeit(\"a < b\", repeat=10, number=50000)\n-50000 loops, best of 10: 7.6 \u00b5s per loop\n+50000 loops, best of 10: 686 ns per loop\n ```\n \n-see also: #18304 (comparisons involving integers and rationals).\n+Also, instead of implementing `__cmp__` we implement `_cmp_` (that avoids one function call).\n+\n+see also:\n+- #17890 (remove `_(rich)_cmp_impl`)\n+- #18304 (comparisons involving integers and rationals)\n``````\n",
    "created_at": "2015-04-26T13:01:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318029",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-As remarked in #17890 the comparisons of elements in `QQbar` can be much faster by implementing `_richcmp_` instead of `__cmp__`. A naive implementation already gives a great speedup
+The comparisons of elements of `AA` can be much faster! We got
 
 old timing
 
@@ -18,10 +18,14 @@
 sage: a = AA(125/13)
 sage: b = AA(3/5)
 sage: timeit("a < b", repeat=10, number=50000)
-50000 loops, best of 10: 1.02 µs per loop
+50000 loops, best of 10: 680 ns per loop
 sage: a = AA(2).sqrt()
 sage: timeit("a < b", repeat=10, number=50000)
-50000 loops, best of 10: 7.6 µs per loop
+50000 loops, best of 10: 686 ns per loop
 ```
 
-see also: #18304 (comparisons involving integers and rationals).
+Also, instead of implementing `__cmp__` we implement `_cmp_` (that avoids one function call).
+
+see also:
+- #17890 (remove `_(rich)_cmp_impl`)
+- #18304 (comparisons involving integers and rationals)
``````




---

archive/issue_comments_318030.json:
```json
{
    "body": "Changing branch from \"\" to \"u/vdelecroix/18303\"",
    "created_at": "2015-04-26T13:01:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318030",
    "user": "https://github.com/videlec"
}
```

Changing branch from "" to "u/vdelecroix/18303"



---

archive/issue_comments_318031.json:
```json
{
    "body": "Changing commit from \"\" to \"d4ee0f91df82a54df6c6959a28e72273176e04f4\"",
    "created_at": "2015-04-26T13:20:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318031",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "d4ee0f91df82a54df6c6959a28e72273176e04f4"



---

archive/issue_comments_318032.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-26T13:20:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318032",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_318033.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#17890\"",
    "created_at": "2015-04-26T13:20:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318033",
    "user": "https://github.com/videlec"
}
```

Changing dependencies from "" to "#17890"



---

archive/issue_comments_318034.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-04-26T13:20:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318034",
    "user": "https://github.com/videlec"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_318035.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -26,6 +26,4 @@\n \n Also, instead of implementing `__cmp__` we implement `_cmp_` (that avoids one function call).\n \n-see also:\n-- #17890 (remove `_(rich)_cmp_impl`)\n-- #18304 (comparisons involving integers and rationals)\n+see also: #18304 (comparisons involving integers and rationals)\n``````\n",
    "created_at": "2015-04-26T13:20:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318035",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -26,6 +26,4 @@
 
 Also, instead of implementing `__cmp__` we implement `_cmp_` (that avoids one function call).
 
-see also:
-- #17890 (remove `_(rich)_cmp_impl`)
-- #18304 (comparisons involving integers and rationals)
+see also: #18304 (comparisons involving integers and rationals)
``````




---

archive/issue_comments_318036.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-04-28T12:50:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318036",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_318037.json:
```json
{
    "body": "<a id='comment:5'></a>failing doctests",
    "created_at": "2015-04-28T12:50:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318037",
    "user": "https://github.com/videlec"
}
```

<a id='comment:5'></a>failing doctests



---

archive/issue_comments_318038.json:
```json
{
    "body": "Changing dependencies from \"#17890\" to \"#17890, #18337\"",
    "created_at": "2015-04-29T18:13:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318038",
    "user": "https://github.com/videlec"
}
```

Changing dependencies from "#17890" to "#17890, #18337"



---

archive/issue_comments_318039.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2015-04-29T22:22:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318039",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_318040.json:
```json
{
    "body": "Changing commit from \"d4ee0f91df82a54df6c6959a28e72273176e04f4\" to \"b3bfdfd61822dcc7b89746897881f997398cae18\"",
    "created_at": "2015-04-29T22:22:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318040",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d4ee0f91df82a54df6c6959a28e72273176e04f4" to "b3bfdfd61822dcc7b89746897881f997398cae18"



---

archive/issue_comments_318041.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-04-29T22:23:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318041",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_318042.json:
```json
{
    "body": "<a id='comment:9'></a>2 failing doctests, see patchbot report",
    "created_at": "2015-05-05T08:18:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318042",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:9'></a>2 failing doctests, see patchbot report



---

archive/issue_comments_318043.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-05-05T08:18:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318043",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_318044.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2015-05-08T22:25:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318044",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_318045.json:
```json
{
    "body": "Changing commit from \"b3bfdfd61822dcc7b89746897881f997398cae18\" to \"747c1110f111c8cf676b507f5bd1290bd3027e0c\"",
    "created_at": "2015-05-08T22:25:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318045",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b3bfdfd61822dcc7b89746897881f997398cae18" to "747c1110f111c8cf676b507f5bd1290bd3027e0c"



---

archive/issue_comments_318046.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-05-08T22:25:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318046",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_318047.json:
```json
{
    "body": "Changing dependencies from \"#17890, #18337\" to \"#18305\"",
    "created_at": "2015-05-08T22:25:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318047",
    "user": "https://github.com/videlec"
}
```

Changing dependencies from "#17890, #18337" to "#18305"



---

archive/issue_comments_318048.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-08T22:35:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318048",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_318049.json:
```json
{
    "body": "Changing commit from \"747c1110f111c8cf676b507f5bd1290bd3027e0c\" to \"22384295b949c3ed6c06184bc2cac967e9ee86f6\"",
    "created_at": "2015-05-08T22:35:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318049",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "747c1110f111c8cf676b507f5bd1290bd3027e0c" to "22384295b949c3ed6c06184bc2cac967e9ee86f6"



---

archive/issue_comments_318050.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-08-06T15:41:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318050",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_318051.json:
```json
{
    "body": "Changing commit from \"22384295b949c3ed6c06184bc2cac967e9ee86f6\" to \"53375b042a18ed92b39e27bc108a9904fc94b9fc\"",
    "created_at": "2015-08-06T15:41:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318051",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "22384295b949c3ed6c06184bc2cac967e9ee86f6" to "53375b042a18ed92b39e27bc108a9904fc94b9fc"



---

archive/issue_comments_318052.json:
```json
{
    "body": "<a id='comment:14'></a>rebased on the rebased #18305",
    "created_at": "2015-08-06T15:41:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318052",
    "user": "https://github.com/videlec"
}
```

<a id='comment:14'></a>rebased on the rebased #18305



---

archive/issue_comments_318053.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-10-14T16:39:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318053",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_318054.json:
```json
{
    "body": "<a id='comment:15'></a>does not apply",
    "created_at": "2015-10-14T16:39:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318054",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:15'></a>does not apply



---

archive/issue_comments_318055.json:
```json
{
    "body": "Changing commit from \"53375b042a18ed92b39e27bc108a9904fc94b9fc\" to \"8d2742b06e48bdd01ffbdceab84dc531e5cfca85\"",
    "created_at": "2017-04-30T17:19:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318055",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "53375b042a18ed92b39e27bc108a9904fc94b9fc" to "8d2742b06e48bdd01ffbdceab84dc531e5cfca85"



---

archive/issue_comments_318056.json:
```json
{
    "body": "Changing branch from \"u/vdelecroix/18303\" to \"public/18303\"",
    "created_at": "2017-04-30T17:19:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318056",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "u/vdelecroix/18303" to "public/18303"



---

archive/issue_comments_318057.json:
```json
{
    "body": "<a id='comment:16'></a>here is a new tentative based on the existing branch\n\nThe idea is to use only rich comparison, and avoid calls to cmp or `_cmp_`\n\n---\nNew commits:",
    "created_at": "2017-04-30T17:19:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318057",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:16'></a>here is a new tentative based on the existing branch

The idea is to use only rich comparison, and avoid calls to cmp or `_cmp_`

---
New commits:



---

archive/issue_events_051634.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-04-30T17:19:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "milestone": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18303#event-51634"
}
```



---

archive/issue_comments_318058.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-04-30T17:19:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318058",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_318059.json:
```json
{
    "body": "Changing dependencies from \"#18305\" to \"\"",
    "created_at": "2017-04-30T17:20:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318059",
    "user": "https://github.com/fchapoton"
}
```

Changing dependencies from "#18305" to ""



---

archive/issue_comments_318060.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-04-30T17:30:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318060",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_318061.json:
```json
{
    "body": "Changing commit from \"8d2742b06e48bdd01ffbdceab84dc531e5cfca85\" to \"ca5b9f69a3328530e82a4305e921642a93f0acec\"",
    "created_at": "2017-04-30T17:30:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318061",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "8d2742b06e48bdd01ffbdceab84dc531e5cfca85" to "ca5b9f69a3328530e82a4305e921642a93f0acec"



---

archive/issue_comments_318062.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-04-30T19:31:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318062",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_318063.json:
```json
{
    "body": "Changing commit from \"ca5b9f69a3328530e82a4305e921642a93f0acec\" to \"f552e6f2ce479c8ac6517f45ee4dbe655b3c72bf\"",
    "created_at": "2017-04-30T19:31:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318063",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ca5b9f69a3328530e82a4305e921642a93f0acec" to "f552e6f2ce479c8ac6517f45ee4dbe655b3c72bf"



---

archive/issue_comments_318064.json:
```json
{
    "body": "<a id='comment:21'></a>Vincent, would you have time to make progress here ? Maybe this is close to be ready, but I am not so sure.\n\nThis is on the road to #22907, which is on the road to #22297, which is on the **long** road to python3.",
    "created_at": "2017-05-02T11:27:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318064",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:21'></a>Vincent, would you have time to make progress here ? Maybe this is close to be ready, but I am not so sure.

This is on the road to #22907, which is on the road to #22297, which is on the **long** road to python3.



---

archive/issue_comments_318065.json:
```json
{
    "body": "Changing commit from \"f552e6f2ce479c8ac6517f45ee4dbe655b3c72bf\" to \"77911f649b2c40004d1912607cd6a351ea31382a\"",
    "created_at": "2017-05-02T14:49:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318065",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f552e6f2ce479c8ac6517f45ee4dbe655b3c72bf" to "77911f649b2c40004d1912607cd6a351ea31382a"



---

archive/issue_comments_318066.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-05-02T14:49:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318066",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_318067.json:
```json
{
    "body": "<a id='comment:23'></a>Thanks Fr\u00e9d\u00e9ric for taking care. I squashed your two commits and rebased on 8.0.beta4. The code needed some fix and actually it was possible to get rid of one of the implementation of `__nonzero__`.\n\nNeeds review again!",
    "created_at": "2017-05-02T14:51:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318067",
    "user": "https://github.com/videlec"
}
```

<a id='comment:23'></a>Thanks Frédéric for taking care. I squashed your two commits and rebased on 8.0.beta4. The code needed some fix and actually it was possible to get rid of one of the implementation of `__nonzero__`.

Needs review again!



---

archive/issue_comments_318068.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-05-02T14:53:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318068",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_318069.json:
```json
{
    "body": "Changing commit from \"77911f649b2c40004d1912607cd6a351ea31382a\" to \"515fb996026d21645e6fe0bc0aca5b58935899a3\"",
    "created_at": "2017-05-02T14:53:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318069",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "77911f649b2c40004d1912607cd6a351ea31382a" to "515fb996026d21645e6fe0bc0aca5b58935899a3"



---

archive/issue_comments_318070.json:
```json
{
    "body": "<a id='comment:25'></a>Merci, Vincent.\n\n* There are now a few trivial failing doctests. Should I take care of them ?\n\n* Did you check that speed is improved ?",
    "created_at": "2017-05-02T17:14:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318070",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:25'></a>Merci, Vincent.

* There are now a few trivial failing doctests. Should I take care of them ?

* Did you check that speed is improved ?



---

archive/issue_comments_318071.json:
```json
{
    "body": "<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-05-03T08:30:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318071",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_318072.json:
```json
{
    "body": "Changing commit from \"515fb996026d21645e6fe0bc0aca5b58935899a3\" to \"86e541d7697cb0bdc2b4ecbe7c3fc4bec7a26816\"",
    "created_at": "2017-05-03T08:30:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318072",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "515fb996026d21645e6fe0bc0aca5b58935899a3" to "86e541d7697cb0bdc2b4ecbe7c3fc4bec7a26816"



---

archive/issue_comments_318073.json:
```json
{
    "body": "<a id='comment:27'></a>I confirm that the timings are much better.",
    "created_at": "2017-05-03T08:39:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318073",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:27'></a>I confirm that the timings are much better.



---

archive/issue_comments_318074.json:
```json
{
    "body": "<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-05-03T08:45:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318074",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_318075.json:
```json
{
    "body": "Changing commit from \"86e541d7697cb0bdc2b4ecbe7c3fc4bec7a26816\" to \"f1a684897f6a2305e4b44c4ec190a7193c205f44\"",
    "created_at": "2017-05-03T08:45:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318075",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "86e541d7697cb0bdc2b4ecbe7c3fc4bec7a26816" to "f1a684897f6a2305e4b44c4ec190a7193c205f44"



---

archive/issue_comments_318076.json:
```json
{
    "body": "<a id='comment:29'></a>I do not understand the doctest block starting with\n\n```\n+        The following are non-trivially zeros (though no exactification occur)::\n```\nHow are these doctests related to this sentence ?",
    "created_at": "2017-05-03T08:46:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318076",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:29'></a>I do not understand the doctest block starting with

```
+        The following are non-trivially zeros (though no exactification occur)::
```
How are these doctests related to this sentence ?



---

archive/issue_comments_318077.json:
```json
{
    "body": "<a id='comment:30'></a>I think one should rather keep `__bool__` for the name, and {{{__nonzero__}} only as an alias, as I did.",
    "created_at": "2017-05-03T15:36:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318077",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:30'></a>I think one should rather keep `__bool__` for the name, and {{{__nonzero__}} only as an alias, as I did.



---

archive/issue_comments_318078.json:
```json
{
    "body": "<a id='comment:31'></a>Replying to [chapoton](#comment%3A30):\n> I think one should rather keep `__bool__` for the name, and {{{__nonzero__}} only as an alias, as I did.\n\n\nWhat is the point!? `__nonzero__` is standard Python and is used everywhere in Sage.",
    "created_at": "2017-05-03T15:57:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318078",
    "user": "https://github.com/videlec"
}
```

<a id='comment:31'></a>Replying to [chapoton](#comment%3A30):
> I think one should rather keep `__bool__` for the name, and {{{__nonzero__}} only as an alias, as I did.


What is the point!? `__nonzero__` is standard Python and is used everywhere in Sage.



---

archive/issue_comments_318079.json:
```json
{
    "body": "<a id='comment:32'></a>Replying to [chapoton](#comment%3A29):\n> I do not understand the doctest block starting with\n> \n> ```\n> +        The following are non-trivially zeros (though no exactification occur)::\n> ```\n> How are these doctests related to this sentence ?\n\n\nBecause the doctests test whether some quantity is zero. Let me try to rephrase it.",
    "created_at": "2017-05-03T15:58:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318079",
    "user": "https://github.com/videlec"
}
```

<a id='comment:32'></a>Replying to [chapoton](#comment%3A29):
> I do not understand the doctest block starting with
> 
> ```
> +        The following are non-trivially zeros (though no exactification occur)::
> ```
> How are these doctests related to this sentence ?


Because the doctests test whether some quantity is zero. Let me try to rephrase it.



---

archive/issue_comments_318080.json:
```json
{
    "body": "<a id='comment:33'></a>(I don't understand, I did not receive any notification by mail!)",
    "created_at": "2017-05-03T15:59:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318080",
    "user": "https://github.com/videlec"
}
```

<a id='comment:33'></a>(I don't understand, I did not receive any notification by mail!)



---

archive/issue_comments_318081.json:
```json
{
    "body": "<a id='comment:34'></a>Replying to [vdelecroix](#comment%3A31):\n> Replying to [chapoton](#comment%3A30):\n> > I think one should rather keep `__bool__` for the name, and {{{__nonzero__}} only as an alias, as I did.\n\n> \n> What is the point!? `__nonzero__` is standard Python and is used everywhere in Sage.\n\n\nI see, `__nonzero__` does not exists anymore in Python3. But then, will you take care again of removing all aliases `__nonzero__ = __bool__`? As this 2to3 move is pretty simple I do not see the point of doing it now.",
    "created_at": "2017-05-03T16:05:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318081",
    "user": "https://github.com/videlec"
}
```

<a id='comment:34'></a>Replying to [vdelecroix](#comment%3A31):
> Replying to [chapoton](#comment%3A30):
> > I think one should rather keep `__bool__` for the name, and {{{__nonzero__}} only as an alias, as I did.

> 
> What is the point!? `__nonzero__` is standard Python and is used everywhere in Sage.


I see, `__nonzero__` does not exists anymore in Python3. But then, will you take care again of removing all aliases `__nonzero__ = __bool__`? As this 2to3 move is pretty simple I do not see the point of doing it now.



---

archive/issue_comments_318082.json:
```json
{
    "body": "Changing commit from \"f1a684897f6a2305e4b44c4ec190a7193c205f44\" to \"99113f1d434a846d322100a919023c3437c551ad\"",
    "created_at": "2017-05-03T16:12:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318082",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f1a684897f6a2305e4b44c4ec190a7193c205f44" to "99113f1d434a846d322100a919023c3437c551ad"



---

archive/issue_comments_318083.json:
```json
{
    "body": "<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-05-03T16:12:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318083",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_318084.json:
```json
{
    "body": "<a id='comment:36'></a>I would not have insisted on `__nonzero__`, but this indeed for python3-readiness.\n\nFor the doctests, sorry but I still do not understand. You say morally 'let us check that something is zero non-trivially\" and then all doctests are of the kind \n\n```\nbool(something)\nFalse\n```\nwhich mean that something is NOT zero. What am I missing ?",
    "created_at": "2017-05-03T17:09:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318084",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:36'></a>I would not have insisted on `__nonzero__`, but this indeed for python3-readiness.

For the doctests, sorry but I still do not understand. You say morally 'let us check that something is zero non-trivially" and then all doctests are of the kind 

```
bool(something)
False
```
which mean that something is NOT zero. What am I missing ?



---

archive/issue_comments_318085.json:
```json
{
    "body": "<a id='comment:37'></a>Replying to [chapoton](#comment%3A36):\n> I would not have insisted on `__nonzero__`, but this indeed for python3-readiness.\n> \n> For the doctests, sorry but I still do not understand. You say morally 'let us check that something is zero non-trivially\" and then all doctests are of the kind \n> \n> ```\n> bool(something)\n> False\n> ```\n> which mean that something is NOT zero. What am I missing ?\n\n\n- `bool(0)` -> `False`\n- `bool(1)` -> `True`",
    "created_at": "2017-05-03T17:11:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318085",
    "user": "https://github.com/videlec"
}
```

<a id='comment:37'></a>Replying to [chapoton](#comment%3A36):
> I would not have insisted on `__nonzero__`, but this indeed for python3-readiness.
> 
> For the doctests, sorry but I still do not understand. You say morally 'let us check that something is zero non-trivially" and then all doctests are of the kind 
> 
> ```
> bool(something)
> False
> ```
> which mean that something is NOT zero. What am I missing ?


- `bool(0)` -> `False`
- `bool(1)` -> `True`



---

archive/issue_comments_318086.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Fr\u00e9d\u00e9ric Chapoton\"",
    "created_at": "2017-05-03T17:17:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318086",
    "user": "https://github.com/fchapoton"
}
```

Changing reviewer from "" to "Frédéric Chapoton"



---

archive/issue_comments_318087.json:
```json
{
    "body": "<a id='comment:38'></a>oh, damn. Must be tired.\n\nThen I think this is ready to go. You can set to positive if you agree.\n\nReplying to [chapoton](#comment%3A36):\n> I would not have insisted on `__nonzero__`, but this indeed for python3-readiness.\n> \n> For the doctests, sorry but I still do not understand. You say morally 'let us check that something is zero non-trivially\" and then all doctests are of the kind \n> \n> ```\n> bool(something)\n> False\n> ```\n> which mean that something is NOT zero. What am I missing ?",
    "created_at": "2017-05-03T17:17:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318087",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:38'></a>oh, damn. Must be tired.

Then I think this is ready to go. You can set to positive if you agree.

Replying to [chapoton](#comment%3A36):
> I would not have insisted on `__nonzero__`, but this indeed for python3-readiness.
> 
> For the doctests, sorry but I still do not understand. You say morally 'let us check that something is zero non-trivially" and then all doctests are of the kind 
> 
> ```
> bool(something)
> False
> ```
> which mean that something is NOT zero. What am I missing ?



---

archive/issue_comments_318088.json:
```json
{
    "body": "<a id='comment:39'></a>Will do. Just waiting for quasar.",
    "created_at": "2017-05-03T17:18:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318088",
    "user": "https://github.com/videlec"
}
```

<a id='comment:39'></a>Will do. Just waiting for quasar.



---

archive/issue_comments_318089.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-05-03T17:29:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318089",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_318090.json:
```json
{
    "body": "<a id='comment:40'></a>quasar is happy! Thanks for the review.",
    "created_at": "2017-05-03T17:29:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318090",
    "user": "https://github.com/videlec"
}
```

<a id='comment:40'></a>quasar is happy! Thanks for the review.



---

archive/issue_comments_318091.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-05-08T21:19:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318091",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_318092.json:
```json
{
    "body": "Changing branch from \"public/18303\" to \"99113f1d434a846d322100a919023c3437c551ad\"",
    "created_at": "2017-05-08T21:19:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18303#issuecomment-318092",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/18303" to "99113f1d434a846d322100a919023c3437c551ad"



---

archive/issue_events_051635.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-08T21:19:06Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18303",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18303#event-51635"
}
```
