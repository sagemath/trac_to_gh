# Issue 18913: Properly fix gdb optional test in doctest/test.py

archive/issues_018676.json:
```json
{
    "body": "```\n**********************************************************************\nFile \"src/sage/doctest/test.py\", line 330, in sage.doctest.test\nFailed example:\n    subprocess.call([\"sage\", \"-t\",  \"--warn-long\", \"0\", \"--gdb\", \"1second.rst\"], stdin=open(os.devnull), **kwds)  # long time, optional: gdb\nExpected:\n    exec gdb ...\n    Running doctests...\n    Doctesting 1 file.\n    sage -t ... 1second.rst\n        [2 tests, ... s]\n    ----------------------------------------------------------------------\n    All tests passed!\n    ----------------------------------------------------------------------\n    ...\n    0\nGot:\n    exec gdb -x \"$SAGE_LOCAL/bin/sage-gdb-commands\" --args python \"$SAGE_LOCAL/bin/sage-runtests\" --serial --timeout=0 --stats_path=/home/jdemeyer/.sage/timings2.json --optional=arb,bliss,cryptominisat,database_gap,dot2tex,gap_packages,gdb,mpir,python2,sage,scons,tides 1second.rst\n    GNU gdb (GDB) 7.8\n    Copyright (C) 2014 Free Software Foundation, Inc.\n    License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\n    This is free software: you are free to change and redistribute it.\n    There is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\n    and \"show warranty\" for details.\n    This GDB was configured as \"x86_64-unknown-linux-gnu\".\n    Type \"show configuration\" for configuration details.\n    For bug reporting instructions, please see:\n    <http://www.gnu.org/software/gdb/bugs/>.\n    Find the GDB manual and other documentation resources online at:\n    <http://www.gnu.org/software/gdb/documentation/>.\n    For help, type \"help\".\n    Type \"apropos word\" to search for commands related to \"word\"...\n    Reading symbols from python...done.\n    warning: Could not load shared library symbols for linux-vdso.so.1.\n    Do you need \"set solib-search-path\" or \"set sysroot\"?\n    [Thread debugging using libthread_db enabled]\n    Using host libthread_db library \"/lib64/libthread_db.so.1\".\n    too many failed tests, not using stored timings\n    Running doctests with ID 2015-07-16-14-35-43-4aa91299.\n    Git branch: t/18787/bug_with_products_of_symbolic_variables_with_modular_integers\n    Using --optional=arb,bliss,cryptominisat,database_gap,dot2tex,gap_packages,gdb,mpir,python2,sage,scons,tides\n    Doctesting 1 file.\n    sage -t 1second.rst\n        [2 tests, 1.00 s]\n    ----------------------------------------------------------------------\n    All tests passed!\n    ----------------------------------------------------------------------\n    Total time for all tests: 1.0 seconds\n        cpu time: 0.0 seconds\n        cumulative wall time: 1.0 seconds\n    [Inferior 1 (process 24492) exited normally]\n    (gdb) quit\n    0\n**********************************************************************\n```\n\nCC:  @seblabbe @kiwifb\n\nBranch/Commit: 1d14f4f709b3df66a6e8ee906efa32b766c00c1a\n\nReviewer: S\u00e9bastien Labb\u00e9\n\nAuthor: Jeroen Demeyer\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/18913\n\n",
    "closed_at": "2015-07-16T22:51:10Z",
    "created_at": "2015-07-16T13:13:25Z",
    "labels": [
        "component: doctest coverage",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.8",
    "title": "Properly fix gdb optional test in doctest/test.py",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18913",
    "user": "https://github.com/jdemeyer"
}
```
```
**********************************************************************
File "src/sage/doctest/test.py", line 330, in sage.doctest.test
Failed example:
    subprocess.call(["sage", "-t",  "--warn-long", "0", "--gdb", "1second.rst"], stdin=open(os.devnull), **kwds)  # long time, optional: gdb
Expected:
    exec gdb ...
    Running doctests...
    Doctesting 1 file.
    sage -t ... 1second.rst
        [2 tests, ... s]
    ----------------------------------------------------------------------
    All tests passed!
    ----------------------------------------------------------------------
    ...
    0
Got:
    exec gdb -x "$SAGE_LOCAL/bin/sage-gdb-commands" --args python "$SAGE_LOCAL/bin/sage-runtests" --serial --timeout=0 --stats_path=/home/jdemeyer/.sage/timings2.json --optional=arb,bliss,cryptominisat,database_gap,dot2tex,gap_packages,gdb,mpir,python2,sage,scons,tides 1second.rst
    GNU gdb (GDB) 7.8
    Copyright (C) 2014 Free Software Foundation, Inc.
    License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
    This is free software: you are free to change and redistribute it.
    There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
    and "show warranty" for details.
    This GDB was configured as "x86_64-unknown-linux-gnu".
    Type "show configuration" for configuration details.
    For bug reporting instructions, please see:
    <http://www.gnu.org/software/gdb/bugs/>.
    Find the GDB manual and other documentation resources online at:
    <http://www.gnu.org/software/gdb/documentation/>.
    For help, type "help".
    Type "apropos word" to search for commands related to "word"...
    Reading symbols from python...done.
    warning: Could not load shared library symbols for linux-vdso.so.1.
    Do you need "set solib-search-path" or "set sysroot"?
    [Thread debugging using libthread_db enabled]
    Using host libthread_db library "/lib64/libthread_db.so.1".
    too many failed tests, not using stored timings
    Running doctests with ID 2015-07-16-14-35-43-4aa91299.
    Git branch: t/18787/bug_with_products_of_symbolic_variables_with_modular_integers
    Using --optional=arb,bliss,cryptominisat,database_gap,dot2tex,gap_packages,gdb,mpir,python2,sage,scons,tides
    Doctesting 1 file.
    sage -t 1second.rst
        [2 tests, 1.00 s]
    ----------------------------------------------------------------------
    All tests passed!
    ----------------------------------------------------------------------
    Total time for all tests: 1.0 seconds
        cpu time: 0.0 seconds
        cumulative wall time: 1.0 seconds
    [Inferior 1 (process 24492) exited normally]
    (gdb) quit
    0
**********************************************************************
```

CC:  @seblabbe @kiwifb

Branch/Commit: 1d14f4f709b3df66a6e8ee906efa32b766c00c1a

Reviewer: Sébastien Labbé

Author: Jeroen Demeyer

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/18913





---

archive/issue_comments_270752.json:
```json
{
    "body": "<a id='comment:1'></a>Sorry, I thought that the empty string was catched by the \"...\". How should we fix it then?",
    "created_at": "2015-07-16T13:15:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18913",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18913#issuecomment-270752",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:1'></a>Sorry, I thought that the empty string was catched by the "...". How should we fix it then?



---

archive/issue_comments_270753.json:
```json
{
    "body": "<a id='comment:2'></a>Or \"...\" realy catch the emtpy string but the problem is with the double space?",
    "created_at": "2015-07-16T13:17:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18913",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18913#issuecomment-270753",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:2'></a>Or "..." realy catch the emtpy string but the problem is with the double space?



---

archive/issue_comments_270754.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-07-16T14:46:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18913",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18913#issuecomment-270754",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_270755.json:
```json
{
    "body": "<a id='comment:4'></a>Yes, the double space was the problem.\n\n---\nNew commits:",
    "created_at": "2015-07-16T14:46:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18913",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18913#issuecomment-270755",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>Yes, the double space was the problem.

---
New commits:



---

archive/issue_comments_270756.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-07-16T16:54:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18913",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18913#issuecomment-270756",
    "user": "https://github.com/seblabbe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_052779.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-07-16T22:51:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18913",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18913#event-52779"
}
```



---

archive/issue_comments_270757.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-07-16T22:51:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18913",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18913#issuecomment-270757",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
