# Issue 18908: Fix math-readline script

archive/issues_018671.json:
```json
{
    "body": "\n```\nsage: mathematica(1)\n```\nhangs indefinitely if `Mathematica` is not installed.\n\nThe reason is that internally the script `$SAGE_LOCAL/bin/math-readline` is called by `Expect()`, and the latter hangs. This script should check whether the `math` command has finished: currently the `math-readline` script keeps running even after the subprocess has exited.\n\n**CC:**  @nathanncohen @etn40ff @NathanDunfield @seblabbe\n\n**Branch/Commit:** [a3c75ab48e7a0ef0b5f5c38cf769b58e0be35ba4](https://github.com/sagemath/sagetrac-mirror/commit/a3c75ab48e7a0ef0b5f5c38cf769b58e0be35ba4)\n\n**Reviewer:** Nathann Cohen, S\u00e9bastien Labb\u00e9, Salvatore Stella, Dima Pasechnik\n\n**Author:** Jeroen Demeyer\n\nIssue created by migration from https://trac.sagemath.org/ticket/18908\n\n",
    "closed_at": "2015-07-18T09:36:43Z",
    "created_at": "2015-07-15T15:23:41Z",
    "labels": [
        "component: scripts",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.8",
    "title": "Fix math-readline script",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18908",
    "user": "https://github.com/dimpase"
}
```

```
sage: mathematica(1)
```
hangs indefinitely if `Mathematica` is not installed.

The reason is that internally the script `$SAGE_LOCAL/bin/math-readline` is called by `Expect()`, and the latter hangs. This script should check whether the `math` command has finished: currently the `math-readline` script keeps running even after the subprocess has exited.

**CC:**  @nathanncohen @etn40ff @NathanDunfield @seblabbe

**Branch/Commit:** [a3c75ab48e7a0ef0b5f5c38cf769b58e0be35ba4](https://github.com/sagemath/sagetrac-mirror/commit/a3c75ab48e7a0ef0b5f5c38cf769b58e0be35ba4)

**Reviewer:** Nathann Cohen, Sébastien Labbé, Salvatore Stella, Dima Pasechnik

**Author:** Jeroen Demeyer

Issue created by migration from https://trac.sagemath.org/ticket/18908





---

archive/issue_events_173324.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2015-07-15T15:24:21Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "rename": {
        "from": "mathematica interface hands if mathematica is not installed",
        "to": "mathematica interface hangs if mathematica is not installed"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18908#event-173324"
}
```



---

archive/issue_comments_268986.json:
```json
{
    "body": "**Commit:** [6b9a1158e64480fe9daff56e179dc9d0fcbf689d](https://github.com/sagemath/sagetrac-mirror/commit/6b9a1158e64480fe9daff56e179dc9d0fcbf689d)",
    "created_at": "2015-07-16T09:00:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-268986",
    "user": "https://github.com/dimpase"
}
```

**Commit:** [6b9a1158e64480fe9daff56e179dc9d0fcbf689d](https://github.com/sagemath/sagetrac-mirror/commit/6b9a1158e64480fe9daff56e179dc9d0fcbf689d)



---

archive/issue_comments_268987.json:
```json
{
    "body": "**Branch:** [public/18908](https://github.com/sagemath/sagetrac-mirror/tree/public/18908)",
    "created_at": "2015-07-16T09:00:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-268987",
    "user": "https://github.com/dimpase"
}
```

**Branch:** [public/18908](https://github.com/sagemath/sagetrac-mirror/tree/public/18908)



---

archive/issue_comments_268988.json:
```json
{
    "body": "<a id='comment:2'></a>\nmoving the discussion from the closed #16703 here.\nI propose the patch in the attached `public/18908` branch.\nI don't have a system with mathematica installed, I only tested it works nicely without `math` present, both stand-alone and as well as producing the right result when calling `mathematica(10)` from Sage.",
    "created_at": "2015-07-16T09:00:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-268988",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:2'></a>
moving the discussion from the closed #16703 here.
I propose the patch in the attached `public/18908` branch.
I don't have a system with mathematica installed, I only tested it works nicely without `math` present, both stand-alone and as well as producing the right result when calling `mathematica(10)` from Sage.



---

archive/issue_comments_268989.json:
```json
{
    "body": "<a id='comment:3'></a>\nWorks for me, though I don't have mathematica either. Can someone who has it run the optional mathematica doctests with it?\n\nNathann",
    "created_at": "2015-07-16T09:04:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-268989",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:3'></a>
Works for me, though I don't have mathematica either. Can someone who has it run the optional mathematica doctests with it?

Nathann



---

archive/issue_comments_268990.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [ncohen](#comment%3A3):\n> Works for me, though I don't have mathematica either. Can someone who has it run the optional mathematica doctests with it?\n> \n\nworks for me with Mathematica 9, I don't seem to have Mathematica 10 though.\n(well, doctests fail due to numerical noise etc, but the patch itself looks good)",
    "created_at": "2015-07-16T09:08:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-268990",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:4'></a>
Replying to [ncohen](#comment%3A3):
> Works for me, though I don't have mathematica either. Can someone who has it run the optional mathematica doctests with it?
> 

works for me with Mathematica 9, I don't seem to have Mathematica 10 though.
(well, doctests fail due to numerical noise etc, but the patch itself looks good)



---

archive/issue_comments_268991.json:
```json
{
    "body": "<a id='comment:5'></a>\nI'll try to fix doctests for Mathematica 9 then...",
    "created_at": "2015-07-16T09:09:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-268991",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:5'></a>
I'll try to fix doctests for Mathematica 9 then...



---

archive/issue_comments_268992.json:
```json
{
    "body": "<a id='comment:6'></a>\nThey may get pretty annoying when #18904 will be merged `;-)`",
    "created_at": "2015-07-16T09:10:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-268992",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:6'></a>
They may get pretty annoying when #18904 will be merged `;-)`



---

archive/issue_comments_268993.json:
```json
{
    "body": "<a id='comment:7'></a>\nbasically a lot of output is texified, or semi-texified, for a reason I don't get. Typically I see things like\n\n```\nFile \"src/sage/interfaces/mathematica.py\", line 44, in sage.interfaces.mathematica\nFailed example:\n    mathematica('Factor[x^2-1]')          # optional - mathematica\nExpected:\n    (-1 + x)*(1 + x)\nGot:\n    (x-1) (x+1)\n**********************************************************************\nFile \"src/sage/interfaces/mathematica.py\", line 46, in sage.interfaces.mathematica\nFailed example:\n    mathematica('Range[3]')               # optional - mathematica\nExpected:\n    {1, 2, 3}\nGot:\n    \\{1,2,3\\}\n```\n\nNow, the hard question: where does one have the place to describe the (pseudo)package type, \ni.e. optional vs experimental?!",
    "created_at": "2015-07-16T09:16:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-268993",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:7'></a>
basically a lot of output is texified, or semi-texified, for a reason I don't get. Typically I see things like

```
File "src/sage/interfaces/mathematica.py", line 44, in sage.interfaces.mathematica
Failed example:
    mathematica('Factor[x^2-1]')          # optional - mathematica
Expected:
    (-1 + x)*(1 + x)
Got:
    (x-1) (x+1)
**********************************************************************
File "src/sage/interfaces/mathematica.py", line 46, in sage.interfaces.mathematica
Failed example:
    mathematica('Range[3]')               # optional - mathematica
Expected:
    {1, 2, 3}
Got:
    \{1,2,3\}
```

Now, the hard question: where does one have the place to describe the (pseudo)package type, 
i.e. optional vs experimental?!



---

archive/issue_comments_268994.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [dimpase](#comment%3A5):\n> I'll try to fix doctests for Mathematica 9 then...\n\n\nsee also #18888 which tries to fix doctests for Mathematica 10 to avoid conflicts...",
    "created_at": "2015-07-16T10:05:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-268994",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:8'></a>
Replying to [dimpase](#comment%3A5):
> I'll try to fix doctests for Mathematica 9 then...


see also #18888 which tries to fix doctests for Mathematica 10 to avoid conflicts...



---

archive/issue_comments_268995.json:
```json
{
    "body": "<a id='comment:9'></a>\nI have mathematica 10.1 but the machine is currently out of service. It should be back, hopefully, late next week; I can run the doctest then.",
    "created_at": "2015-07-16T10:13:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-268995",
    "user": "https://github.com/etn40ff"
}
```

<a id='comment:9'></a>
I have mathematica 10.1 but the machine is currently out of service. It should be back, hopefully, late next week; I can run the doctest then.



---

archive/issue_events_173325.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2015-07-16T10:20:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18908#event-173325"
}
```



---

archive/issue_comments_268996.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [slabbe](#comment%3A8):\n> Replying to [dimpase](#comment%3A5):\n> > I'll try to fix doctests for Mathematica 9 then...\n\n> \n> see also #18888 which tries to fix doctests for Mathematica 10 to avoid conflicts...\n\nAh, OK, so let us not fix any doctests here then, do it on #18888 instead.",
    "created_at": "2015-07-16T10:20:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-268996",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:10'></a>
Replying to [slabbe](#comment%3A8):
> Replying to [dimpase](#comment%3A5):
> > I'll try to fix doctests for Mathematica 9 then...

> 
> see also #18888 which tries to fix doctests for Mathematica 10 to avoid conflicts...

Ah, OK, so let us not fix any doctests here then, do it on #18888 instead.



---

archive/issue_comments_268997.json:
```json
{
    "body": "<a id='comment:11'></a>\nI have `Mathematica 10.0 for Linux x86 (64-bit)` installed on my machine. I installed the branch. I did make start (I think sage -b does not update the script right?). And it seems to work:\n\n```\nsage: mathematica(10)\n10\n```\n\nTo make sure that the new code was really tested after the make start, I added some print:\n\n```\ndiff --git a/src/bin/math-readline b/src/bin/math-readline\nindex e6d40ef..ead0980 100755\n--- a/src/bin/math-readline\n+++ b/src/bin/math-readline\n@@ -11,6 +11,11 @@ try:\n except:\n     sys.exit('ERROR: executable math not found')\n \n+print \"NEW CODE IS BEING TESTED!!!\"\n+print \"NEW CODE IS BEING TESTED!!!\"\n+print \"NEW CODE IS BEING TESTED!!!\"\n+print \"NEW CODE IS BEING TESTED!!!\"\n+\n f1 = subprocess.Popen('math', shell=True, stdin=subprocess.PIPE).stdin\n f1.flush()\n try:\n```\n\ndid make start, run sage, but then, I still get\n\n```\nsage: mathematica(10)\n10\n```\nSo is the new code really run? Is it okay if the print are not shown?",
    "created_at": "2015-07-16T10:26:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-268997",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:11'></a>
I have `Mathematica 10.0 for Linux x86 (64-bit)` installed on my machine. I installed the branch. I did make start (I think sage -b does not update the script right?). And it seems to work:

```
sage: mathematica(10)
10
```

To make sure that the new code was really tested after the make start, I added some print:

```
diff --git a/src/bin/math-readline b/src/bin/math-readline
index e6d40ef..ead0980 100755
--- a/src/bin/math-readline
+++ b/src/bin/math-readline
@@ -11,6 +11,11 @@ try:
 except:
     sys.exit('ERROR: executable math not found')
 
+print "NEW CODE IS BEING TESTED!!!"
+print "NEW CODE IS BEING TESTED!!!"
+print "NEW CODE IS BEING TESTED!!!"
+print "NEW CODE IS BEING TESTED!!!"
+
 f1 = subprocess.Popen('math', shell=True, stdin=subprocess.PIPE).stdin
 f1.flush()
 try:
```

did make start, run sage, but then, I still get

```
sage: mathematica(10)
10
```
So is the new code really run? Is it okay if the print are not shown?



---

archive/issue_comments_268998.json:
```json
{
    "body": "<a id='comment:12'></a>\nPerhaps you should run 'make' in Sage's ROOT folder before trying it again. This could copy the updated `math-realine` from `src/bin/` to `local/bin/`.",
    "created_at": "2015-07-16T10:28:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-268998",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:12'></a>
Perhaps you should run 'make' in Sage's ROOT folder before trying it again. This could copy the updated `math-realine` from `src/bin/` to `local/bin/`.



---

archive/issue_comments_268999.json:
```json
{
    "body": "<a id='comment:13'></a>\nI do see this line at the end of make start :\n\n```\ncp /home/labbe/Applications/sage-git/src/bin/math-readline /home/labbe/Applications/sage-git/local/bin/math-readline\n```",
    "created_at": "2015-07-16T10:30:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-268999",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:13'></a>
I do see this line at the end of make start :

```
cp /home/labbe/Applications/sage-git/src/bin/math-readline /home/labbe/Applications/sage-git/local/bin/math-readline
```



---

archive/issue_comments_269000.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [slabbe](#comment%3A11):\n\n> So is the new code really run? Is it okay if the print are not shown?\n\n\nI think it is, you should not get the output of math-readline within sage. It should be stripped as it is stripped the header \n\n```\nMathematica 10.0 for Linux x86 (64-bit)\nCopyright 1988-2014 Wolfram Research, Inc.\n\n```",
    "created_at": "2015-07-16T10:37:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-269000",
    "user": "https://github.com/etn40ff"
}
```

<a id='comment:14'></a>
Replying to [slabbe](#comment%3A11):

> So is the new code really run? Is it okay if the print are not shown?


I think it is, you should not get the output of math-readline within sage. It should be stripped as it is stripped the header 

```
Mathematica 10.0 for Linux x86 (64-bit)
Copyright 1988-2014 Wolfram Research, Inc.

```



---

archive/issue_events_173326.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-07-16T10:59:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18908#event-173326"
}
```



---

archive/issue_events_173327.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-07-16T10:59:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18908#event-173327"
}
```



---

archive/issue_comments_269001.json:
```json
{
    "body": "<a id='comment:15'></a>\nOk, so then, positive review!",
    "created_at": "2015-07-16T10:59:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-269001",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:15'></a>
Ok, so then, positive review!



---

archive/issue_comments_269002.json:
```json
{
    "body": "**Reviewer:** Nathann Cohen, S\u00e9bastien Labb\u00e9, Salvatore Stella",
    "created_at": "2015-07-16T10:59:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-269002",
    "user": "https://github.com/seblabbe"
}
```

**Reviewer:** Nathann Cohen, Sébastien Labbé, Salvatore Stella



---

archive/issue_comments_269003.json:
```json
{
    "body": "**Author:** Dima Pasechnik",
    "created_at": "2015-07-16T10:59:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-269003",
    "user": "https://github.com/seblabbe"
}
```

**Author:** Dima Pasechnik



---

archive/issue_events_173328.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-07-16T11:19:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18908#event-173328"
}
```



---

archive/issue_events_173329.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-07-16T11:19:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18908#event-173329"
}
```



---

archive/issue_comments_269004.json:
```json
{
    "body": "<a id='comment:16'></a>\nWait, is there a way to doctest this fix?\n\n```\nmathematica(10)  # not mathematica\nSome error message...\n```",
    "created_at": "2015-07-16T11:19:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-269004",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:16'></a>
Wait, is there a way to doctest this fix?

```
mathematica(10)  # not mathematica
Some error message...
```



---

archive/issue_comments_269005.json:
```json
{
    "body": "<a id='comment:17'></a>\n> Wait, is there a way to doctest this fix?\n\n\nNo, though others have asked (Dima in particular).\n\nYou should not change the status of a ticket in `positive_review` to ask a question unrelated to what the ticket is supposed to address.",
    "created_at": "2015-07-16T11:23:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-269005",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:17'></a>
> Wait, is there a way to doctest this fix?


No, though others have asked (Dima in particular).

You should not change the status of a ticket in `positive_review` to ask a question unrelated to what the ticket is supposed to address.



---

archive/issue_events_173330.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-07-16T11:44:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18908#event-173330"
}
```



---

archive/issue_events_173331.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-07-16T11:44:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18908#event-173331"
}
```



---

archive/issue_comments_269006.json:
```json
{
    "body": "<a id='comment:18'></a>\nOk sorry. Back to positive review.",
    "created_at": "2015-07-16T11:44:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-269006",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:18'></a>
Ok sorry. Back to positive review.



---

archive/issue_comments_269007.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [slabbe](#comment%3A16):\n> Wait, is there a way to doctest this fix?\n> \n> ```\n> mathematica(10)  # not mathematica\n> Some error message...\n> ```\n\nlike this? \n\n```\ndiff --git a/src/sage/interfaces/mathematica.py b/src/sage/interfaces/mathematica.py\nindex aa5a848..04eaf9f 100644\n--- a/src/sage/interfaces/mathematica.py\n+++ b/src/sage/interfaces/mathematica.py\n@@ -729,6 +729,17 @@ class MathematicaElement(ExpectElement):\n             0\n \n \n+        TESTS::\n+\n+            sage: import subprocess                  # optional - nomathematica\n+            sage: try:                               # optional - nomathematica\n+            ....:     subprocess.check_output('which math', shell=True)  # optional - nomathematica\n+            ....: except:                            # optional - nomathematica\n+            ....:     mathematica(10)                # optional - nomathematica\n+            Traceback (most recent call last):\n+            ...\n+            TypeError: ...\n+\n         AUTHORS:\n \n         - Felix Lawrence (2010-11-03): Major rewrite to use ._sage_repr() and\n```",
    "created_at": "2015-07-16T11:58:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-269007",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:19'></a>
Replying to [slabbe](#comment%3A16):
> Wait, is there a way to doctest this fix?
> 
> ```
> mathematica(10)  # not mathematica
> Some error message...
> ```

like this? 

```
diff --git a/src/sage/interfaces/mathematica.py b/src/sage/interfaces/mathematica.py
index aa5a848..04eaf9f 100644
--- a/src/sage/interfaces/mathematica.py
+++ b/src/sage/interfaces/mathematica.py
@@ -729,6 +729,17 @@ class MathematicaElement(ExpectElement):
             0
 
 
+        TESTS::
+
+            sage: import subprocess                  # optional - nomathematica
+            sage: try:                               # optional - nomathematica
+            ....:     subprocess.check_output('which math', shell=True)  # optional - nomathematica
+            ....: except:                            # optional - nomathematica
+            ....:     mathematica(10)                # optional - nomathematica
+            Traceback (most recent call last):
+            ...
+            TypeError: ...
+
         AUTHORS:
 
         - Felix Lawrence (2010-11-03): Major rewrite to use ._sage_repr() and
```



---

archive/issue_events_173332.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-07-16T14:55:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18908#event-173332"
}
```



---

archive/issue_events_173333.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-07-16T14:55:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18908#event-173333"
}
```



---

archive/issue_comments_269008.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,4 +2,6 @@\n ```\n sage: mathematica(1)\n ```\n-hangs indefinitely if `Mathematica` is not installed. The reason is that internally the script `$SAGE_LOCAL/bin/math-readline` is called by `Expect()`, and the latter hangs. This script should check that `math` is present in the path, before proceeding.\n+hangs indefinitely if `Mathematica` is not installed.\n+\n+The reason is that internally the script `$SAGE_LOCAL/bin/math-readline` is called by `Expect()`, and the latter hangs. This script should check whether the `math` command has finished.\n``````\n",
    "created_at": "2015-07-16T14:55:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-269008",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,4 +2,6 @@
 ```
 sage: mathematica(1)
 ```
-hangs indefinitely if `Mathematica` is not installed. The reason is that internally the script `$SAGE_LOCAL/bin/math-readline` is called by `Expect()`, and the latter hangs. This script should check that `math` is present in the path, before proceeding.
+hangs indefinitely if `Mathematica` is not installed.
+
+The reason is that internally the script `$SAGE_LOCAL/bin/math-readline` is called by `Expect()`, and the latter hangs. This script should check whether the `math` command has finished.
``````




---

archive/issue_comments_269009.json:
```json
{
    "body": "<a id='comment:20'></a>\nThis is really the wrong fix.",
    "created_at": "2015-07-16T14:55:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-269009",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:20'></a>
This is really the wrong fix.



---

archive/issue_comments_269010.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,4 +4,4 @@\n ```\n hangs indefinitely if `Mathematica` is not installed.\n \n-The reason is that internally the script `$SAGE_LOCAL/bin/math-readline` is called by `Expect()`, and the latter hangs. This script should check whether the `math` command has finished.\n+The reason is that internally the script `$SAGE_LOCAL/bin/math-readline` is called by `Expect()`, and the latter hangs. This script should check whether the `math` command has finished: currently the `math-readline` script keeps running even after the subprocess has exited.\n``````\n",
    "created_at": "2015-07-16T14:57:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-269010",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,4 +4,4 @@
 ```
 hangs indefinitely if `Mathematica` is not installed.
 
-The reason is that internally the script `$SAGE_LOCAL/bin/math-readline` is called by `Expect()`, and the latter hangs. This script should check whether the `math` command has finished.
+The reason is that internally the script `$SAGE_LOCAL/bin/math-readline` is called by `Expect()`, and the latter hangs. This script should check whether the `math` command has finished: currently the `math-readline` script keeps running even after the subprocess has exited.
``````




---

archive/issue_comments_269011.json:
```json
{
    "body": "<a id='comment:22'></a>\nI don't know what you are talking about. If I quit Sage with math available, I see\n\n```\nsage: \nExiting Sage (CPU time 0m2.48s, Wall time 36m25.69s).\nExiting Mathematica with PID 12864 running /home/scratch/dimpase/sage/sage/src/bin/math-readline\n```\nDo you mean to say that the last message is misleading?\n\nAnd of course if there is no `math` there then the script kills itself by `sys.exit()`.",
    "created_at": "2015-07-16T15:10:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-269011",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:22'></a>
I don't know what you are talking about. If I quit Sage with math available, I see

```
sage: 
Exiting Sage (CPU time 0m2.48s, Wall time 36m25.69s).
Exiting Mathematica with PID 12864 running /home/scratch/dimpase/sage/sage/src/bin/math-readline
```
Do you mean to say that the last message is misleading?

And of course if there is no `math` there then the script kills itself by `sys.exit()`.



---

archive/issue_comments_269012.json:
```json
{
    "body": "<a id='comment:23'></a>\nThe patch on this ticket means to solve the problem of hanging if `math` is not present, no more than that. And it does it. I am not aware of any other problems, leave alone ways to reproduce these other problems.",
    "created_at": "2015-07-16T15:15:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-269012",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:23'></a>
The patch on this ticket means to solve the problem of hanging if `math` is not present, no more than that. And it does it. I am not aware of any other problems, leave alone ways to reproduce these other problems.



---

archive/issue_events_173334.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2015-07-16T15:17:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18908#event-173334"
}
```



---

archive/issue_events_173335.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2015-07-16T15:17:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18908#event-173335"
}
```



---

archive/issue_comments_269013.json:
```json
{
    "body": "<a id='comment:24'></a>\nI am setting it back to positive review. Please feel free to submit a proper error report, not \"wrong fix\" bullsh*t, and then change the ticket status accordingly.",
    "created_at": "2015-07-16T15:17:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-269013",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:24'></a>
I am setting it back to positive review. Please feel free to submit a proper error report, not "wrong fix" bullsh*t, and then change the ticket status accordingly.



---

archive/issue_comments_269014.json:
```json
{
    "body": "<a id='comment:25'></a>\nIf I understand correctly what is being said by [jdemeyer](#comment%3A21) the problem is this:\n\n```\n$ math-readline\nMathematica 10.0 for Linux x86 (64-bit)\nCopyright 1988-2014 Wolfram Research, Inc.\n\nIn[1]:= Exit\n\nTraceback (most recent call last):\n  File \"/opt/sage/local/bin/math-readline\", line 23, in <module>\n    f1.writelines(line+'\\n')\nIOError: [Errno 32] Broken pipe\n```\n\nwhich is quite ugly.",
    "created_at": "2015-07-16T15:19:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-269014",
    "user": "https://github.com/etn40ff"
}
```

<a id='comment:25'></a>
If I understand correctly what is being said by [jdemeyer](#comment%3A21) the problem is this:

```
$ math-readline
Mathematica 10.0 for Linux x86 (64-bit)
Copyright 1988-2014 Wolfram Research, Inc.

In[1]:= Exit

Traceback (most recent call last):
  File "/opt/sage/local/bin/math-readline", line 23, in <module>
    f1.writelines(line+'\n')
IOError: [Errno 32] Broken pipe
```

which is quite ugly.



---

archive/issue_events_173336.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/git",
    "created_at": "2015-07-16T15:20:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18908#event-173336"
}
```



---

archive/issue_events_173337.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/git",
    "created_at": "2015-07-16T15:20:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18908#event-173337"
}
```



---

archive/issue_comments_269015.json:
```json
{
    "body": "<a id='comment:26'></a>\n**Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a3c75ab48e7a0ef0b5f5c38cf769b58e0be35ba4\">a3c75ab</a></td><td><code>Exit math-readline if child process exits</code></td></tr></table>\n",
    "created_at": "2015-07-16T15:20:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-269015",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>
**Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a3c75ab48e7a0ef0b5f5c38cf769b58e0be35ba4">a3c75ab</a></td><td><code>Exit math-readline if child process exits</code></td></tr></table>




---

archive/issue_comments_269016.json:
```json
{
    "body": "**Changing commit** from \"[6b9a1158e64480fe9daff56e179dc9d0fcbf689d](https://github.com/sagemath/sagetrac-mirror/commit/6b9a1158e64480fe9daff56e179dc9d0fcbf689d)\" to \"[a3c75ab48e7a0ef0b5f5c38cf769b58e0be35ba4](https://github.com/sagemath/sagetrac-mirror/commit/a3c75ab48e7a0ef0b5f5c38cf769b58e0be35ba4)\".",
    "created_at": "2015-07-16T15:20:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-269016",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[6b9a1158e64480fe9daff56e179dc9d0fcbf689d](https://github.com/sagemath/sagetrac-mirror/commit/6b9a1158e64480fe9daff56e179dc9d0fcbf689d)" to "[a3c75ab48e7a0ef0b5f5c38cf769b58e0be35ba4](https://github.com/sagemath/sagetrac-mirror/commit/a3c75ab48e7a0ef0b5f5c38cf769b58e0be35ba4)".



---

archive/issue_comments_269017.json:
```json
{
    "body": "**Changing author** from \"Dima Pasechnik\" to \"Dima Pasechnik, Jeroen Demeyer\".",
    "created_at": "2015-07-16T15:22:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-269017",
    "user": "https://github.com/jdemeyer"
}
```

**Changing author** from "Dima Pasechnik" to "Dima Pasechnik, Jeroen Demeyer".



---

archive/issue_events_173338.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-07-16T15:22:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "label": "component: interfaces: optional",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18908#event-173338"
}
```



---

archive/issue_events_173339.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-07-16T15:22:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "label": "component: scripts",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18908#event-173339"
}
```



---

archive/issue_comments_269018.json:
```json
{
    "body": "<a id='comment:28'></a>\nSometimes it is easier to just write a patch and explain later rather than the other way around. And unfortunately there is no ticket status for \"hang on, I'm working on a patch\".\n\nThe *real* problem with the script was that, when the `math` child process exited (for whatever reason, including Mathematica not being installed), the `math-readline` script did not exit. The proper fix is to check for the exiting of the child process. This works no matter for which reason the child process exited (which could be calling `Exit` in Mathematica, which could be Mathematica crashing, which could be Mathematica not being installed).",
    "created_at": "2015-07-16T15:26:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-269018",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:28'></a>
Sometimes it is easier to just write a patch and explain later rather than the other way around. And unfortunately there is no ticket status for "hang on, I'm working on a patch".

The *real* problem with the script was that, when the `math` child process exited (for whatever reason, including Mathematica not being installed), the `math-readline` script did not exit. The proper fix is to check for the exiting of the child process. This works no matter for which reason the child process exited (which could be calling `Exit` in Mathematica, which could be Mathematica crashing, which could be Mathematica not being installed).



---

archive/issue_comments_269019.json:
```json
{
    "body": "<a id='comment:29'></a>\nI also made a few more fixes to the script:\n1. actually using `readline`, which was the whole point of the script!\n2. removing the empty write `sys.stdout.write('')` (what was the point of that?).\n3. using `write()` instead of `writelines()` to write a single string.\n4. removing the unneeded `sys.exit()` at the end.",
    "created_at": "2015-07-16T15:30:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-269019",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:29'></a>
I also made a few more fixes to the script:
1. actually using `readline`, which was the whole point of the script!
2. removing the empty write `sys.stdout.write('')` (what was the point of that?).
3. using `write()` instead of `writelines()` to write a single string.
4. removing the unneeded `sys.exit()` at the end.



---

archive/issue_events_173340.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-07-16T15:30:45Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "rename": {
        "from": "mathematica interface hangs if mathematica is not installed",
        "to": "Fix math-readline script"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18908#event-173340"
}
```



---

archive/issue_comments_269020.json:
```json
{
    "body": "**Changing author** from \"Dima Pasechnik, Jeroen Demeyer\" to \"Jeroen Demeyer\".",
    "created_at": "2015-07-16T15:39:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-269020",
    "user": "https://github.com/dimpase"
}
```

**Changing author** from "Dima Pasechnik, Jeroen Demeyer" to "Jeroen Demeyer".



---

archive/issue_comments_269021.json:
```json
{
    "body": "<a id='comment:32'></a>\nReplying to [jdemeyer](#comment%3A20):\n> This is really the wrong fix.\n\nFYI, I found this comment very annoying. Unless you want to alienate people, always say in such cases instead \"I would like to improve this\".",
    "created_at": "2015-07-16T22:09:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-269021",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:32'></a>
Replying to [jdemeyer](#comment%3A20):
> This is really the wrong fix.

FYI, I found this comment very annoying. Unless you want to alienate people, always say in such cases instead "I would like to improve this".



---

archive/issue_comments_269022.json:
```json
{
    "body": "<a id='comment:33'></a>\nReplying to [dimpase](#comment%3A32):\n> Replying to [jdemeyer](#comment%3A20):\n> > This is really the wrong fix.\n\n> FYI, I found this comment very annoying. Unless you want to alienate people, always say in such cases instead \"I would like to improve this\". \n\nOK, point taken. What about \"This is really not the correct fix, I'm having a look at how to improve it\".",
    "created_at": "2015-07-17T06:00:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-269022",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:33'></a>
Replying to [dimpase](#comment%3A32):
> Replying to [jdemeyer](#comment%3A20):
> > This is really the wrong fix.

> FYI, I found this comment very annoying. Unless you want to alienate people, always say in such cases instead "I would like to improve this". 

OK, point taken. What about "This is really not the correct fix, I'm having a look at how to improve it".



---

archive/issue_comments_269023.json:
```json
{
    "body": "<a id='comment:34'></a>\nReplying to [jdemeyer](#comment%3A33):\n> Replying to [dimpase](#comment%3A32):\n> > Replying to [jdemeyer](#comment%3A20):\n> > > This is really the wrong fix.\n\n> > FYI, I found this comment very annoying. Unless you want to alienate people, always say in such cases instead \"I would like to improve this\". \n> \n> OK, point taken. What about \"This is really not the correct fix, I'm having a look at how to improve it\"\n\n\ns/correct/complete would do; indeed, saying that something is incorrect/wrong without giving an explanation could create a tension you don't need.",
    "created_at": "2015-07-17T07:16:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-269023",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:34'></a>
Replying to [jdemeyer](#comment%3A33):
> Replying to [dimpase](#comment%3A32):
> > Replying to [jdemeyer](#comment%3A20):
> > > This is really the wrong fix.

> > FYI, I found this comment very annoying. Unless you want to alienate people, always say in such cases instead "I would like to improve this". 
> 
> OK, point taken. What about "This is really not the correct fix, I'm having a look at how to improve it"


s/correct/complete would do; indeed, saying that something is incorrect/wrong without giving an explanation could create a tension you don't need.



---

archive/issue_comments_269024.json:
```json
{
    "body": "<a id='comment:35'></a>\nReplying to [dimpase](#comment%3A34):\n> saying that something is incorrect/wrong without giving an explanation could create a tension you don't need.\n\n\nBut it was really incorrect: the fact that the script hangs when `math` is not installed was a *symptom* of the problem, not the problem itself.\n\nBut at the time when I send that message, I didn't have a clear explanation of the real problem: I knew that the proposed solution was wrong, but I couldn't yet say what the right fix would be. Like I said: it's often easier to explain *after* you have a working patch.\n\nAnd I had to act quickly because, these days, tickets which have positive_review are often closed very soon.",
    "created_at": "2015-07-17T07:29:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-269024",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:35'></a>
Replying to [dimpase](#comment%3A34):
> saying that something is incorrect/wrong without giving an explanation could create a tension you don't need.


But it was really incorrect: the fact that the script hangs when `math` is not installed was a *symptom* of the problem, not the problem itself.

But at the time when I send that message, I didn't have a clear explanation of the real problem: I knew that the proposed solution was wrong, but I couldn't yet say what the right fix would be. Like I said: it's often easier to explain *after* you have a working patch.

And I had to act quickly because, these days, tickets which have positive_review are often closed very soon.



---

archive/issue_comments_269025.json:
```json
{
    "body": "<a id='comment:36'></a>\nThe script hanged without `math` installed, and hanged Sage in return. And that few lines that were in the fix solved this particular issue, obviously an improvement. Anything that is an improvement cannot be called incorrect.",
    "created_at": "2015-07-17T07:39:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-269025",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:36'></a>
The script hanged without `math` installed, and hanged Sage in return. And that few lines that were in the fix solved this particular issue, obviously an improvement. Anything that is an improvement cannot be called incorrect.



---

archive/issue_comments_269026.json:
```json
{
    "body": "<a id='comment:37'></a>\nReplying to [dimpase](#comment%3A36):\n> Anything that is an improvement cannot be called incorrect.\n\nI completely disagree with this. An improvement which hides a bug is incorrect.",
    "created_at": "2015-07-17T09:29:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-269026",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:37'></a>
Replying to [dimpase](#comment%3A36):
> Anything that is an improvement cannot be called incorrect.

I completely disagree with this. An improvement which hides a bug is incorrect.



---

archive/issue_comments_269027.json:
```json
{
    "body": "<a id='comment:38'></a>\nlgtm",
    "created_at": "2015-07-17T09:29:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-269027",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:38'></a>
lgtm



---

archive/issue_events_173341.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2015-07-17T09:29:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18908#event-173341"
}
```



---

archive/issue_events_173342.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2015-07-17T09:29:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18908#event-173342"
}
```



---

archive/issue_comments_269028.json:
```json
{
    "body": "**Changing reviewer** from \"Nathann Cohen, S\u00e9bastien Labb\u00e9, Salvatore Stella\" to \"Nathann Cohen, S\u00e9bastien Labb\u00e9, Salvatore Stella, Dima Pasechnik\".",
    "created_at": "2015-07-17T09:29:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-269028",
    "user": "https://github.com/dimpase"
}
```

**Changing reviewer** from "Nathann Cohen, Sébastien Labbé, Salvatore Stella" to "Nathann Cohen, Sébastien Labbé, Salvatore Stella, Dima Pasechnik".



---

archive/issue_comments_269029.json:
```json
{
    "body": "<a id='comment:39'></a>\nReplying to [jdemeyer](#comment%3A37):\n> Replying to [dimpase](#comment%3A36):\n> > Anything that is an improvement cannot be called incorrect.\n\n> I completely disagree with this. An improvement which hides a bug is incorrect.\nexcept that this one did not hide a bug, at least not any more than the original scrip did.\n \nAnyhow, this is not the point; the point is that you should not brand anything at all \"wrong\", \"incorrect\" without a justification. (Unless you out to annoy people, and I hope that this is not the case).",
    "created_at": "2015-07-17T09:33:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-269029",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:39'></a>
Replying to [jdemeyer](#comment%3A37):
> Replying to [dimpase](#comment%3A36):
> > Anything that is an improvement cannot be called incorrect.

> I completely disagree with this. An improvement which hides a bug is incorrect.
except that this one did not hide a bug, at least not any more than the original scrip did.
 
Anyhow, this is not the point; the point is that you should not brand anything at all "wrong", "incorrect" without a justification. (Unless you out to annoy people, and I hope that this is not the case).



---

archive/issue_comments_269030.json:
```json
{
    "body": "**Changing branch** from \"[public/18908](https://github.com/sagemath/sagetrac-mirror/tree/public/18908)\" to \"[a3c75ab48e7a0ef0b5f5c38cf769b58e0be35ba4](https://github.com/sagemath/sagetrac-mirror/commit/a3c75ab48e7a0ef0b5f5c38cf769b58e0be35ba4)\".",
    "created_at": "2015-07-18T09:36:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18908#issuecomment-269030",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/18908](https://github.com/sagemath/sagetrac-mirror/tree/public/18908)" to "[a3c75ab48e7a0ef0b5f5c38cf769b58e0be35ba4](https://github.com/sagemath/sagetrac-mirror/commit/a3c75ab48e7a0ef0b5f5c38cf769b58e0be35ba4)".



---

archive/issue_events_173343.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-07-18T09:36:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18908#event-173343"
}
```



---

archive/issue_events_173344.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-07-18T09:36:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18908",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18908#event-173344"
}
```
