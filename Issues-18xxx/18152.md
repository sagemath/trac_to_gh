# Issue 18152: Universal Cyclotomic Field implementation using libgap

archive/issues_017915.json:
```json
{
    "assignees": [],
    "body": "Sage ships an implementation of the Universal Cyclotomic Field (in `sage.rings.universal_cyclotomic_field.*`) that is slower and less reliable than what is in gap. We propose in this ticket an implementation based on libgap.\n\nIt fixes some issues about the old implementation:\n- #14240:  Universal cyclotomic field breaks for moderate order\n- #16631: Universal Cyclotomic Field doesn't handle int and Integer the same\n- #16130: Matrices over Universal Cyclotomic field failing to echelonize/inverse\n- #17117: UniversalCyclotomicField elements considered real\n\nAnd is about 10x faster (see [comment:10](#comment:10)) except for operations on very sparse elements with very large conductors (see e.g. [comment:23](#comment:23), [comment:27](#comment:27) and [comment:28](#comment:28)). \n\nPossible follow up:\n- switch to Cython\n- implement dense matrices by wrapping libgap matrices (see also #16116)\n- slowness in conjugation? #18207 (see also [comment:28](#comment:28), this is unavoidable because gap uses a dense representation of elements)\n- interface with libgap polynomials (#18266)\n\nDepends on #18153\n\nCC:  @nthiery @stumpc5 @tscrim @vbraun\n\nBranch/Commit: **[`b818c83`](https://github.com/sagemath/sagetrac-mirror/commit/b818c83bc329581c6af225dcf7b54d120e6e1e7c)**\n\nReviewer: **Jean-Philippe Labb\u00e9**\n\nAuthor: **Vincent Delecroix**\n\nComponent: **number fields**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/18152_\n\n",
    "closed_at": "2015-05-06T23:57:45Z",
    "created_at": "2015-04-09T21:41:20Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20number%20fields",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Universal Cyclotomic Field implementation using libgap",
    "type": "issue",
    "updated_at": "2015-05-06T23:57:45Z",
    "url": "https://github.com/sagemath/sage/issues/18152",
    "user": "https://github.com/videlec"
}
```
Sage ships an implementation of the Universal Cyclotomic Field (in `sage.rings.universal_cyclotomic_field.*`) that is slower and less reliable than what is in gap. We propose in this ticket an implementation based on libgap.

It fixes some issues about the old implementation:
- #14240:  Universal cyclotomic field breaks for moderate order
- #16631: Universal Cyclotomic Field doesn't handle int and Integer the same
- #16130: Matrices over Universal Cyclotomic field failing to echelonize/inverse
- #17117: UniversalCyclotomicField elements considered real

And is about 10x faster (see [comment:10](#comment:10)) except for operations on very sparse elements with very large conductors (see e.g. [comment:23](#comment:23), [comment:27](#comment:27) and [comment:28](#comment:28)). 

Possible follow up:
- switch to Cython
- implement dense matrices by wrapping libgap matrices (see also #16116)
- slowness in conjugation? #18207 (see also [comment:28](#comment:28), this is unavoidable because gap uses a dense representation of elements)
- interface with libgap polynomials (#18266)

Depends on #18153

CC:  @nthiery @stumpc5 @tscrim @vbraun

Branch/Commit: **[`b818c83`](https://github.com/sagemath/sagetrac-mirror/commit/b818c83bc329581c6af225dcf7b54d120e6e1e7c)**

Reviewer: **Jean-Philippe Labbé**

Author: **Vincent Delecroix**

Component: **number fields**

_Issue created by migration from https://trac.sagemath.org/ticket/18152_





---

archive/issue_events_255737.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-09T21:41:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18152#event-255737"
}
```



---

archive/issue_events_255738.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-09T21:41:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20number%20fields",
    "label_color": "0000ff",
    "label_name": "c: number fields",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18152#event-255738"
}
```



---

archive/issue_events_255739.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-09T21:41:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18152#event-255739"
}
```



---

archive/issue_events_255740.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-09T21:41:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18152#event-255740"
}
```



---

archive/issue_comments_247917.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,6 +4,7 @@\n - #14240:  Universal cyclotomic field breaks for moderate order\n - #16631: Universal Cyclotomic Field doesn't handle int and Integer the same\n - #16130: Matrices over Universal Cyclotomic field failing to echelonize/inverse\n+- #17117: UniversalCyclotomicField elements considered real\n \n Possible follow up:\n - switch to Cython\n``````\n",
    "created_at": "2015-04-09T21:51:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247917",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,6 +4,7 @@
 - #14240:  Universal cyclotomic field breaks for moderate order
 - #16631: Universal Cyclotomic Field doesn't handle int and Integer the same
 - #16130: Matrices over Universal Cyclotomic field failing to echelonize/inverse
+- #17117: UniversalCyclotomicField elements considered real
 
 Possible follow up:
 - switch to Cython
``````




---

archive/issue_comments_247918.json:
```json
{
    "body": "Dependencies: **#18153**",
    "created_at": "2015-04-09T22:22:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247918",
    "user": "https://github.com/videlec"
}
```

Dependencies: **#18153**



---

archive/issue_comments_247919.json:
```json
{
    "body": "Branch: **[u/vdelecroix/18152](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/18152)**",
    "created_at": "2015-04-09T22:22:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247919",
    "user": "https://github.com/videlec"
}
```

Branch: **[u/vdelecroix/18152](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/18152)**



---

archive/issue_comments_247920.json:
```json
{
    "body": "Commit: **[`7d95734`](https://github.com/sagemath/sagetrac-mirror/commit/7d957347ccfeaba97438c92f6c04cbf79180f0fc)**",
    "created_at": "2015-04-09T22:24:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247920",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`7d95734`](https://github.com/sagemath/sagetrac-mirror/commit/7d957347ccfeaba97438c92f6c04cbf79180f0fc)**



---

archive/issue_comments_247921.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/31385f3e7c8c8b5d0c856fc01bb99d50b4b7aa87\"><code>31385f3</code></a></td><td><code>Trac 18153: int and infinity from libgap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/23eb30ccad2bb47f20e22810176733660d3c6a85\"><code>23eb30c</code></a></td><td><code>Trac 18152: implementation of UCF using libgap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/99c8d80c5f32090bbc63cfbdc63695602975f477\"><code>99c8d80</code></a></td><td><code>Trac 18152: remove the old implementation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d957347ccfeaba97438c92f6c04cbf79180f0fc\"><code>7d95734</code></a></td><td><code>Trac 18152: Fix coxeter group import</code></td></tr></table>\n",
    "created_at": "2015-04-09T22:24:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247921",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/31385f3e7c8c8b5d0c856fc01bb99d50b4b7aa87"><code>31385f3</code></a></td><td><code>Trac 18153: int and infinity from libgap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/23eb30ccad2bb47f20e22810176733660d3c6a85"><code>23eb30c</code></a></td><td><code>Trac 18152: implementation of UCF using libgap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/99c8d80c5f32090bbc63cfbdc63695602975f477"><code>99c8d80</code></a></td><td><code>Trac 18152: remove the old implementation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d957347ccfeaba97438c92f6c04cbf79180f0fc"><code>7d95734</code></a></td><td><code>Trac 18152: Fix coxeter group import</code></td></tr></table>




---

archive/issue_events_255741.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-09T22:26:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18152#event-255741"
}
```



---

archive/issue_comments_247922.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/31385f3e7c8c8b5d0c856fc01bb99d50b4b7aa87\"><code>31385f3</code></a></td><td><code>Trac 18153: int and infinity from libgap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/23eb30ccad2bb47f20e22810176733660d3c6a85\"><code>23eb30c</code></a></td><td><code>Trac 18152: implementation of UCF using libgap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/99c8d80c5f32090bbc63cfbdc63695602975f477\"><code>99c8d80</code></a></td><td><code>Trac 18152: remove the old implementation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d957347ccfeaba97438c92f6c04cbf79180f0fc\"><code>7d95734</code></a></td><td><code>Trac 18152: Fix coxeter group import</code></td></tr></table>\n",
    "created_at": "2015-04-09T22:26:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247922",
    "user": "https://github.com/videlec"
}
```

<div id="comment:4"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/31385f3e7c8c8b5d0c856fc01bb99d50b4b7aa87"><code>31385f3</code></a></td><td><code>Trac 18153: int and infinity from libgap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/23eb30ccad2bb47f20e22810176733660d3c6a85"><code>23eb30c</code></a></td><td><code>Trac 18152: implementation of UCF using libgap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/99c8d80c5f32090bbc63cfbdc63695602975f477"><code>99c8d80</code></a></td><td><code>Trac 18152: remove the old implementation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d957347ccfeaba97438c92f6c04cbf79180f0fc"><code>7d95734</code></a></td><td><code>Trac 18152: Fix coxeter group import</code></td></tr></table>




---

archive/issue_comments_247923.json:
```json
{
    "body": "Description changed:\n``````diff\n\n``````\n",
    "created_at": "2015-04-09T22:26:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247923",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff

``````




---

archive/issue_comments_247924.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/36fb6e5fdf3bb7879e7b67c8c40cf69a045ac144\"><code>36fb6e5</code></a></td><td><code>Trac 18153: better `__int__` and add support for -infinity</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e34e9ca6da48db87eb7ec594e6cc56e940a9aff2\"><code>e34e9ca</code></a></td><td><code>Trac 18152: fix documentation</code></td></tr></table>\n",
    "created_at": "2015-04-10T04:54:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247924",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/36fb6e5fdf3bb7879e7b67c8c40cf69a045ac144"><code>36fb6e5</code></a></td><td><code>Trac 18153: better `__int__` and add support for -infinity</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e34e9ca6da48db87eb7ec594e6cc56e940a9aff2"><code>e34e9ca</code></a></td><td><code>Trac 18152: fix documentation</code></td></tr></table>




---

archive/issue_comments_247925.json:
```json
{
    "body": "Changed commit from **[`7d95734`](https://github.com/sagemath/sagetrac-mirror/commit/7d957347ccfeaba97438c92f6c04cbf79180f0fc)** to **[`e34e9ca`](https://github.com/sagemath/sagetrac-mirror/commit/e34e9ca6da48db87eb7ec594e6cc56e940a9aff2)**",
    "created_at": "2015-04-10T04:54:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247925",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7d95734`](https://github.com/sagemath/sagetrac-mirror/commit/7d957347ccfeaba97438c92f6c04cbf79180f0fc)** to **[`e34e9ca`](https://github.com/sagemath/sagetrac-mirror/commit/e34e9ca6da48db87eb7ec594e6cc56e940a9aff2)**



---

archive/issue_comments_247926.json:
```json
{
    "body": "Changed commit from **[`e34e9ca`](https://github.com/sagemath/sagetrac-mirror/commit/e34e9ca6da48db87eb7ec594e6cc56e940a9aff2)** to **[`376bcc2`](https://github.com/sagemath/sagetrac-mirror/commit/376bcc2dd953ebe96ed5594d99ce4155ccbd883c)**",
    "created_at": "2015-04-10T06:26:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247926",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e34e9ca`](https://github.com/sagemath/sagetrac-mirror/commit/e34e9ca6da48db87eb7ec594e6cc56e940a9aff2)** to **[`376bcc2`](https://github.com/sagemath/sagetrac-mirror/commit/376bcc2dd953ebe96ed5594d99ce4155ccbd883c)**



---

archive/issue_comments_247927.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/376bcc2dd953ebe96ed5594d99ce4155ccbd883c\"><code>376bcc2</code></a></td><td><code>Trac 18152: fix constructor in rings.number_field.number_field</code></td></tr></table>\n",
    "created_at": "2015-04-10T06:26:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247927",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/376bcc2dd953ebe96ed5594d99ce4155ccbd883c"><code>376bcc2</code></a></td><td><code>Trac 18152: fix constructor in rings.number_field.number_field</code></td></tr></table>




---

archive/issue_comments_247928.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nNow all test pass!",
    "created_at": "2015-04-10T07:14:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247928",
    "user": "https://github.com/videlec"
}
```

<div id="comment:8" align="right">comment:8</div>

Now all test pass!



---

archive/issue_comments_247929.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e96846846f65b0a914d276f34725f97bfd974f4a\"><code>e968468</code></a></td><td><code>Trac 18152: better cmp + 32 vs 64 bits in doctest</code></td></tr></table>\n",
    "created_at": "2015-04-10T11:26:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247929",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e96846846f65b0a914d276f34725f97bfd974f4a"><code>e968468</code></a></td><td><code>Trac 18152: better cmp + 32 vs 64 bits in doctest</code></td></tr></table>




---

archive/issue_comments_247930.json:
```json
{
    "body": "Changed commit from **[`376bcc2`](https://github.com/sagemath/sagetrac-mirror/commit/376bcc2dd953ebe96ed5594d99ce4155ccbd883c)** to **[`e968468`](https://github.com/sagemath/sagetrac-mirror/commit/e96846846f65b0a914d276f34725f97bfd974f4a)**",
    "created_at": "2015-04-10T11:26:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247930",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`376bcc2`](https://github.com/sagemath/sagetrac-mirror/commit/376bcc2dd953ebe96ed5594d99ce4155ccbd883c)** to **[`e968468`](https://github.com/sagemath/sagetrac-mirror/commit/e96846846f65b0a914d276f34725f97bfd974f4a)**



---

archive/issue_comments_247931.json:
```json
{
    "body": "A test file to compare timings",
    "created_at": "2015-04-10T15:11:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247931",
    "user": "https://github.com/videlec"
}
```

A test file to compare timings



---

archive/issue_comments_247932.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nAttachment: **[ucf_test.py.gz](https://github.com/sagemath/sage/files/ticket18152/ucf_test.py.gz)**\n\nI did some concrete timings and the conclusion is that in all cases the new implementation is faster by a factor of at least x8 (and it can be up to x20).",
    "created_at": "2015-04-10T15:12:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247932",
    "user": "https://github.com/videlec"
}
```

<div id="comment:10" align="right">comment:10</div>

Attachment: **[ucf_test.py.gz](https://github.com/sagemath/sage/files/ticket18152/ucf_test.py.gz)**

I did some concrete timings and the conclusion is that in all cases the new implementation is faster by a factor of at least x8 (and it can be up to x20).



---

archive/issue_comments_247933.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9dd74336bd11d44758340905055c37d04749051b\"><code>9dd7433</code></a></td><td><code>Trac 12158: add a `_sub_` method</code></td></tr></table>\n",
    "created_at": "2015-04-10T15:21:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247933",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9dd74336bd11d44758340905055c37d04749051b"><code>9dd7433</code></a></td><td><code>Trac 12158: add a `_sub_` method</code></td></tr></table>




---

archive/issue_comments_247934.json:
```json
{
    "body": "Changed commit from **[`e968468`](https://github.com/sagemath/sagetrac-mirror/commit/e96846846f65b0a914d276f34725f97bfd974f4a)** to **[`9dd7433`](https://github.com/sagemath/sagetrac-mirror/commit/9dd74336bd11d44758340905055c37d04749051b)**",
    "created_at": "2015-04-10T15:21:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247934",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e968468`](https://github.com/sagemath/sagetrac-mirror/commit/e96846846f65b0a914d276f34725f97bfd974f4a)** to **[`9dd7433`](https://github.com/sagemath/sagetrac-mirror/commit/9dd74336bd11d44758340905055c37d04749051b)**



---

archive/issue_comments_247935.json:
```json
{
    "body": "Changed commit from **[`9dd7433`](https://github.com/sagemath/sagetrac-mirror/commit/9dd74336bd11d44758340905055c37d04749051b)** to **[`e58f755`](https://github.com/sagemath/sagetrac-mirror/commit/e58f75501bdd8dfd4b20bc751a6040e5b10f0844)**",
    "created_at": "2015-04-10T15:21:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247935",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9dd7433`](https://github.com/sagemath/sagetrac-mirror/commit/9dd74336bd11d44758340905055c37d04749051b)** to **[`e58f755`](https://github.com/sagemath/sagetrac-mirror/commit/e58f75501bdd8dfd4b20bc751a6040e5b10f0844)**



---

archive/issue_comments_247936.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e58f75501bdd8dfd4b20bc751a6040e5b10f0844\"><code>e58f755</code></a></td><td><code>Trac 18152: add a `_sub_` method</code></td></tr></table>\n",
    "created_at": "2015-04-10T15:21:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247936",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e58f75501bdd8dfd4b20bc751a6040e5b10f0844"><code>e58f755</code></a></td><td><code>Trac 18152: add a `_sub_` method</code></td></tr></table>




---

archive/issue_comments_247937.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e4a352468cf9c018b9bdf148a3de03793a111b9e\"><code>e4a3524</code></a></td><td><code>Trac 18152: speedup (use X._add_(Y) instead of X+Y)</code></td></tr></table>\n",
    "created_at": "2015-04-10T18:00:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247937",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e4a352468cf9c018b9bdf148a3de03793a111b9e"><code>e4a3524</code></a></td><td><code>Trac 18152: speedup (use X._add_(Y) instead of X+Y)</code></td></tr></table>




---

archive/issue_comments_247938.json:
```json
{
    "body": "Changed commit from **[`e58f755`](https://github.com/sagemath/sagetrac-mirror/commit/e58f75501bdd8dfd4b20bc751a6040e5b10f0844)** to **[`e4a3524`](https://github.com/sagemath/sagetrac-mirror/commit/e4a352468cf9c018b9bdf148a3de03793a111b9e)**",
    "created_at": "2015-04-10T18:00:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247938",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e58f755`](https://github.com/sagemath/sagetrac-mirror/commit/e58f75501bdd8dfd4b20bc751a6040e5b10f0844)** to **[`e4a3524`](https://github.com/sagemath/sagetrac-mirror/commit/e4a352468cf9c018b9bdf148a3de03793a111b9e)**



---

archive/issue_comments_247939.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nHi!\n\nDid you have a look at #16116? Does it improve also the multiplication of generic cyclotomic matrices?\n\nJean-Philippe",
    "created_at": "2015-04-11T06:13:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247939",
    "user": "https://github.com/jplab"
}
```

<div id="comment:14" align="right">comment:14</div>

Hi!

Did you have a look at #16116? Does it improve also the multiplication of generic cyclotomic matrices?

Jean-Philippe



---

archive/issue_comments_247940.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nHello Jean-Philippe,\n\nReplying to [@jplab](#comment:14):\n> Did you have a look at #16116? Does it improve also the multiplication of generic cyclotomic matrices?\n\nI guess so. Should be ten times faster. But I copied-pasted the GAP documentation in the top of the file:\n\n```\nArithmetical operations are quite expensive, so the use of\ninternally represented cyclotomics is not recommended for doing\narithmetic over number fields, such as calculations with matrices\nof cyclotomics.\n```\n\nBest,\nVincent",
    "created_at": "2015-04-11T08:38:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247940",
    "user": "https://github.com/videlec"
}
```

<div id="comment:15" align="right">comment:15</div>

Hello Jean-Philippe,

Replying to [@jplab](#comment:14):
> Did you have a look at #16116? Does it improve also the multiplication of generic cyclotomic matrices?

I guess so. Should be ten times faster. But I copied-pasted the GAP documentation in the top of the file:

```
Arithmetical operations are quite expensive, so the use of
internally represented cyclotomics is not recommended for doing
arithmetic over number fields, such as calculations with matrices
of cyclotomics.
```

Best,
Vincent



---

archive/issue_comments_247941.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,6 +6,8 @@\n - #16130: Matrices over Universal Cyclotomic field failing to echelonize/inverse\n - #17117: UniversalCyclotomicField elements considered real\n \n+And is about 10x faster (see [comment:10](#comment:10)).\n+\n Possible follow up:\n - switch to Cython\n-- implement dense matrices by wrapping libgap matrices\n+- implement dense matrices by wrapping libgap matrices (see also #16116)\n``````\n",
    "created_at": "2015-04-11T17:46:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247941",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,6 +6,8 @@
 - #16130: Matrices over Universal Cyclotomic field failing to echelonize/inverse
 - #17117: UniversalCyclotomicField elements considered real
 
+And is about 10x faster (see [comment:10](#comment:10)).
+
 Possible follow up:
 - switch to Cython
-- implement dense matrices by wrapping libgap matrices
+- implement dense matrices by wrapping libgap matrices (see also #16116)
``````




---

archive/issue_events_255742.json:
```json
{
    "actor": "https://github.com/stumpc5",
    "created_at": "2015-04-15T10:37:36Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18152#event-255742"
}
```



---

archive/issue_events_255743.json:
```json
{
    "actor": "https://github.com/stumpc5",
    "created_at": "2015-04-15T10:37:36Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "milestone_number": null,
    "milestone_title": "sage-6.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18152#event-255743"
}
```



---

archive/issue_comments_247942.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nHi there!\n\nI kind of feel bad that you plan to remove that much code I wrote in weeks of work -- but I guess that's the way it goes if there is something better...\n\nAnyway my first question would be whether it is really desired to remove an algorithm from Sage and instead use the same algorithm from Gap? Don't you think that working on the cython part of my implementation (maybe even moving to plain C of some core functionality) could get it beyond the speed of the black box (from a Sage point of view) Gap implementation?\n\nSecondly, I remember that I did quite some tests back when I implemented the UCF. And that in the end, the Sage implementation was slower on some parts, while faster on others (one I remember where Sage was quicker was the computation of the Galois conjugates of big elements, in case you want to test, one example might be `E( 2^11 * 3^4 )`). I would really like to redo these tests, but haven't yet been able to get your branch running on my computer. I will get back once that worked out.\n\nI also remember to have found a few bugs in the Gap implementation while implementing UCFs in Sage. That would also not be possible anymore when only relying on the implementation in Gap.\n\n\n\nCheers, Christian",
    "created_at": "2015-04-15T11:22:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247942",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:18" align="right">comment:18</div>

Hi there!

I kind of feel bad that you plan to remove that much code I wrote in weeks of work -- but I guess that's the way it goes if there is something better...

Anyway my first question would be whether it is really desired to remove an algorithm from Sage and instead use the same algorithm from Gap? Don't you think that working on the cython part of my implementation (maybe even moving to plain C of some core functionality) could get it beyond the speed of the black box (from a Sage point of view) Gap implementation?

Secondly, I remember that I did quite some tests back when I implemented the UCF. And that in the end, the Sage implementation was slower on some parts, while faster on others (one I remember where Sage was quicker was the computation of the Galois conjugates of big elements, in case you want to test, one example might be `E( 2^11 * 3^4 )`). I would really like to redo these tests, but haven't yet been able to get your branch running on my computer. I will get back once that worked out.

I also remember to have found a few bugs in the Gap implementation while implementing UCFs in Sage. That would also not be possible anymore when only relying on the implementation in Gap.



Cheers, Christian



---

archive/issue_comments_247943.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nHello Christian,\n\nThanks for having a look!\n\nReplying to [@stumpc5](#comment:18):\n> I kind of feel bad that you plan to remove that much code I wrote in weeks of work -- but I guess that's the way it goes if there is something better...\n\nMe too. I wondered if something were better with your code. But except the documentation I did not find any case were it was faster.\n\n> Anyway my first question would be whether it is really desired to remove an algorithm from Sage and instead use the same algorithm from Gap?\n\nSage should not reinvent the wheel. Gap is now interfaced as a fairly good level and we should try to maximize its usage at what it is good for.\n\nThat being said, it would makes sense to keep your implementation somewhere with more comparisons to the libgap implementation. Especially if you found that the Gap implementation has some bug! But I did not find any relevant example since all tests pass with my branch applied.\n\n> Don't you think that working on the cython part of my implementation (maybe even moving to plain C of some core functionality) could get it beyond the speed of the black box (from a Sage point of view) Gap implementation?\n\nNo idea. And I will not try. It is much more work than proposing what I did. And if you ask me what I would do if I want even more speed, I would link to Gap at an even lower level.\n\n> Secondly, I remember that I did quite some tests back when I implemented the UCF. And that in the end, the Sage implementation was slower on some parts, while faster on others (one I remember were Sage was quicker was the computation of the Galois conjugates of big elements, in case you want to test, one example might be `E( 2^11 * 3^4 )`). I would really like to redo these tests, but haven't yet been able to get your branch running on my computer. I will get back once that worked out.\n\nGreat! I will add this to the `ucf_test.py` that I wrote. If you have other examples in mind, please propose. I am not sure it will make a difference now since big numbers with pexpect implies a lot of parsing and computation. With libgap it is not the case anymore.\n\n> I also remember to have found a few bugs in the Gap implementation while implementing UCFs in Sage. That would also not be possible anymore when only relying on the implementation in Gap.\n\nYou do not remember what they are? Did you report them to Gap? \n\nCheers\nVincent",
    "created_at": "2015-04-15T11:36:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247943",
    "user": "https://github.com/videlec"
}
```

<div id="comment:19" align="right">comment:19</div>

Hello Christian,

Thanks for having a look!

Replying to [@stumpc5](#comment:18):
> I kind of feel bad that you plan to remove that much code I wrote in weeks of work -- but I guess that's the way it goes if there is something better...

Me too. I wondered if something were better with your code. But except the documentation I did not find any case were it was faster.

> Anyway my first question would be whether it is really desired to remove an algorithm from Sage and instead use the same algorithm from Gap?

Sage should not reinvent the wheel. Gap is now interfaced as a fairly good level and we should try to maximize its usage at what it is good for.

That being said, it would makes sense to keep your implementation somewhere with more comparisons to the libgap implementation. Especially if you found that the Gap implementation has some bug! But I did not find any relevant example since all tests pass with my branch applied.

> Don't you think that working on the cython part of my implementation (maybe even moving to plain C of some core functionality) could get it beyond the speed of the black box (from a Sage point of view) Gap implementation?

No idea. And I will not try. It is much more work than proposing what I did. And if you ask me what I would do if I want even more speed, I would link to Gap at an even lower level.

> Secondly, I remember that I did quite some tests back when I implemented the UCF. And that in the end, the Sage implementation was slower on some parts, while faster on others (one I remember were Sage was quicker was the computation of the Galois conjugates of big elements, in case you want to test, one example might be `E( 2^11 * 3^4 )`). I would really like to redo these tests, but haven't yet been able to get your branch running on my computer. I will get back once that worked out.

Great! I will add this to the `ucf_test.py` that I wrote. If you have other examples in mind, please propose. I am not sure it will make a difference now since big numbers with pexpect implies a lot of parsing and computation. With libgap it is not the case anymore.

> I also remember to have found a few bugs in the Gap implementation while implementing UCFs in Sage. That would also not be possible anymore when only relying on the implementation in Gap.

You do not remember what they are? Did you report them to Gap? 

Cheers
Vincent



---

archive/issue_comments_247944.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nHi Vincent,\n\nReplying to [@videlec](#comment:19):\n> Me too. I wondered if something were better with your code. But except the documentation I did not find any case were it was faster.\n\nDid you already redo the Galois conjugate test which I remember was slower in Gap back then?\n\n> Great! I will add this to the `ucf_test.py` that I wrote. If you have other examples in mind, please propose. I am not sure it will make a difference now since big numbers with pexpect implies a lot of parsing and computation. With libgap it is not the case anymore.\n\nI just did\n\n```\nsage: a = E( 2^11 * 3^4 )\nsage: %time x = a.galois_conjugates()\nCPU times: user 5.52 s, sys: 159 ms, total: 5.68 s\nWall time: 5.66 s\nsage: %time x = a.galois_conjugates()\nCPU times: user 6.81 s, sys: 170 ms, total: 6.98 s\nWall time: 6.99 s\n```\n\nand compared it to\n\n```\ngap> a := E( 2^11 * 3^4 );;\ngap> L := PrimeResidues(165888);;\ngap> for i in L do\n> x := GaloisCyc(a,i);\n> od;\n```\nwhich I had running for 30 sec before I ctrc-c'ed it. (I also believe that in Sage, a big portion of the time is spend of computing the list of coprimes.)\n\n> You do not remember what they are? Did you report them to Gap?\n\nI did report them, and they were fixed.\n\nOnce I get your branch running, I try to get back other tests I did.\n\nCheers, Christian",
    "created_at": "2015-04-15T11:51:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247944",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:20" align="right">comment:20</div>

Hi Vincent,

Replying to [@videlec](#comment:19):
> Me too. I wondered if something were better with your code. But except the documentation I did not find any case were it was faster.

Did you already redo the Galois conjugate test which I remember was slower in Gap back then?

> Great! I will add this to the `ucf_test.py` that I wrote. If you have other examples in mind, please propose. I am not sure it will make a difference now since big numbers with pexpect implies a lot of parsing and computation. With libgap it is not the case anymore.

I just did

```
sage: a = E( 2^11 * 3^4 )
sage: %time x = a.galois_conjugates()
CPU times: user 5.52 s, sys: 159 ms, total: 5.68 s
Wall time: 5.66 s
sage: %time x = a.galois_conjugates()
CPU times: user 6.81 s, sys: 170 ms, total: 6.98 s
Wall time: 6.99 s
```

and compared it to

```
gap> a := E( 2^11 * 3^4 );;
gap> L := PrimeResidues(165888);;
gap> for i in L do
> x := GaloisCyc(a,i);
> od;
```
which I had running for 30 sec before I ctrc-c'ed it. (I also believe that in Sage, a big portion of the time is spend of computing the list of coprimes.)

> You do not remember what they are? Did you report them to Gap?

I did report them, and they were fixed.

Once I get your branch running, I try to get back other tests I did.

Cheers, Christian



---

archive/issue_comments_247945.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nHi there!\n\nI will also do some tests on the ticket and let you know.\n\nOne thing not to forget is also the number of tickets repaired by this new implementation. If the ticket repairs them and is faster... It's difficult to say no to that.\n\nGr\u00fcsse,\nJP",
    "created_at": "2015-04-15T12:55:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247945",
    "user": "https://github.com/jplab"
}
```

<div id="comment:21" align="right">comment:21</div>

Hi there!

I will also do some tests on the ticket and let you know.

One thing not to forget is also the number of tickets repaired by this new implementation. If the ticket repairs them and is faster... It's difficult to say no to that.

Grüsse,
JP



---

archive/issue_comments_247946.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nHello,\n\nI pushed an experimental branch with both implementations at `public/18152`. It is certain that most doctest fail but it is not the purpose. With it you can do\n\n```\nsage: UCF_native.<E_native> = UniversalCyclotomicField_native()\nsage: UCF_libgap.<E_libgap> = UniversalCyclotomicField_libgap()\nsage: UCF_native\nUniversal Cyclotomic Field (native)\nsage: UCF_libgap\nUniversal Cyclotomic Field (libgap)\n```\nand play around with both implementations.\n\n\nReplying to [comment:20]: it is true that `GaloisCyc` is slow in GAP (and it is not `PrimeResidues` which takes time). I got with a little bit smaller example\n\n```\nsage: a = E_libgap( 2^9 * 3^4 )\nsage: b = E_native( 2^9 * 3^4 )\nsage: %time l = a.galois_conjugates()\nCPU times: user 6.92 s, sys: 4 ms, total: 6.92 s\nWall time: 6.9 s\nsage: %time l = b.galois_conjugates()\nCPU times: user 352 ms, sys: 52 ms, total: 404 ms\nWall time: 387 ms\n```\n\nReplying to [comment:21]: I do not think that the issues in the four tickets mentioned in the description are that big (and one of them has a fix).\n\nVincent",
    "created_at": "2015-04-15T15:39:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247946",
    "user": "https://github.com/videlec"
}
```

<div id="comment:22" align="right">comment:22</div>

Hello,

I pushed an experimental branch with both implementations at `public/18152`. It is certain that most doctest fail but it is not the purpose. With it you can do

```
sage: UCF_native.<E_native> = UniversalCyclotomicField_native()
sage: UCF_libgap.<E_libgap> = UniversalCyclotomicField_libgap()
sage: UCF_native
Universal Cyclotomic Field (native)
sage: UCF_libgap
Universal Cyclotomic Field (libgap)
```
and play around with both implementations.


Replying to [comment:20]: it is true that `GaloisCyc` is slow in GAP (and it is not `PrimeResidues` which takes time). I got with a little bit smaller example

```
sage: a = E_libgap( 2^9 * 3^4 )
sage: b = E_native( 2^9 * 3^4 )
sage: %time l = a.galois_conjugates()
CPU times: user 6.92 s, sys: 4 ms, total: 6.92 s
Wall time: 6.9 s
sage: %time l = b.galois_conjugates()
CPU times: user 352 ms, sys: 52 ms, total: 404 ms
Wall time: 387 ms
```

Replying to [comment:21]: I do not think that the issues in the four tickets mentioned in the description are that big (and one of them has a fix).

Vincent



---

archive/issue_comments_247947.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nthe branch runs now...\n\nOne issue I see is that it would if my code would not break because a few methods disappeared (such as `field_order` and `min_poly`. But this problem is minor and easy to fix -- worst case is I update my code.\n\nRedoing the following tests `Sage` vs. `libgap`:\n1.\n\n```\nsage: a = E(5)\nsage: %timeit a.conjugate()\n10000 loops, best of 3: 62.4 \u00b5s per loop\n```\nvs.\n\n```\nsage: a = E(5)\nsage: %timeit a.conjugate()\n10000 loops, best of 3: 39.9 \u00b5s per loop\n```\n2.\n\n```\nsage: a = E( 2^10 )\nsage: %timeit a.conjugate()\n10000 loops, best of 3: 69.1 \u00b5s per loop\n```\nvs.\n\n```\nsage: sage: a = E( 2^10 )\nsage: sage: %timeit a.conjugate()\n10000 loops, best of 3: 75.1 \u00b5s per loop\n```\n3.\n\n```\nsage: a = E( 2^11 * 3^4 )\nsage: %timeit a.conjugate()\n10000 loops, best of 3: 118 \u00b5s per loop\n```\nvs.\n\n```\nsage: a = E( 2^11 * 3^4 )\nsage: sage: %timeit a.conjugate()\n100 loops, best of 3: 9.15 ms per loop\n```\nFor the Galois conjugation, the `libgap` implementation doesn't finish in very finite time, see also your example above.",
    "created_at": "2015-04-15T15:42:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247947",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:23" align="right">comment:23</div>

the branch runs now...

One issue I see is that it would if my code would not break because a few methods disappeared (such as `field_order` and `min_poly`. But this problem is minor and easy to fix -- worst case is I update my code.

Redoing the following tests `Sage` vs. `libgap`:
1.

```
sage: a = E(5)
sage: %timeit a.conjugate()
10000 loops, best of 3: 62.4 µs per loop
```
vs.

```
sage: a = E(5)
sage: %timeit a.conjugate()
10000 loops, best of 3: 39.9 µs per loop
```
2.

```
sage: a = E( 2^10 )
sage: %timeit a.conjugate()
10000 loops, best of 3: 69.1 µs per loop
```
vs.

```
sage: sage: a = E( 2^10 )
sage: sage: %timeit a.conjugate()
10000 loops, best of 3: 75.1 µs per loop
```
3.

```
sage: a = E( 2^11 * 3^4 )
sage: %timeit a.conjugate()
10000 loops, best of 3: 118 µs per loop
```
vs.

```
sage: a = E( 2^11 * 3^4 )
sage: sage: %timeit a.conjugate()
100 loops, best of 3: 9.15 ms per loop
```
For the Galois conjugation, the `libgap` implementation doesn't finish in very finite time, see also your example above.



---

archive/issue_comments_247948.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\n`conjugate` actually uses `GaloisCyc` as in http://www.math.rwth-aachen.de/~Greg.Gamble/gap4r3/doc/htm/ref/CHAP058.htm#SSEC002.4.",
    "created_at": "2015-04-15T15:46:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247948",
    "user": "https://github.com/stumpc5"
}
```

<div id="comment:24" align="right">comment:24</div>

`conjugate` actually uses `GaloisCyc` as in http://www.math.rwth-aachen.de/~Greg.Gamble/gap4r3/doc/htm/ref/CHAP058.htm#SSEC002.4.



---

archive/issue_comments_247949.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nI opened #18207 for this slowness.",
    "created_at": "2015-04-15T15:57:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247949",
    "user": "https://github.com/videlec"
}
```

<div id="comment:25" align="right">comment:25</div>

I opened #18207 for this slowness.



---

archive/issue_comments_247950.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@videlec](#comment:25):\n> I opened #18207 for this slowness.\n\n(most time seems to be spent in the function `ConvertToBase` in `cyclotom.c`)",
    "created_at": "2015-04-15T15:59:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247950",
    "user": "https://github.com/videlec"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@videlec](#comment:25):
> I opened #18207 for this slowness.

(most time seems to be spent in the function `ConvertToBase` in `cyclotom.c`)



---

archive/issue_comments_247951.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nOn the other hand your code becomes slower when the element is more complicated\n\n```\nsage: a = sum(E_libgap( 2^8 * 3^4, i) for i in range(0, 2**12, 37))\nsage: b = sum(E_native( 2^8 * 3^4, i) for i in range(0, 2**12, 37))\nsage: %timeit _ = a.conjugate()\n1000 loops, best of 3: 262 \u00b5s per loop\nsage: %timeit _ = b.conjugate()\n1000 loops, best of 3: 793 \u00b5s per loop\n```\nSo I would not say that `conjugate` is slower.",
    "created_at": "2015-04-15T16:05:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247951",
    "user": "https://github.com/videlec"
}
```

<div id="comment:27" align="right">comment:27</div>

On the other hand your code becomes slower when the element is more complicated

```
sage: a = sum(E_libgap( 2^8 * 3^4, i) for i in range(0, 2**12, 37))
sage: b = sum(E_native( 2^8 * 3^4, i) for i in range(0, 2**12, 37))
sage: %timeit _ = a.conjugate()
1000 loops, best of 3: 262 µs per loop
sage: %timeit _ = b.conjugate()
1000 loops, best of 3: 793 µs per loop
```
So I would not say that `conjugate` is slower.



---

archive/issue_comments_247952.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nOk. The whole thing about conjugation just reflects the fact that Gap is using a dense representation where yours is sparse. In `a.conjugate()` Gap just run through **all** coefficients, looking for the nonzero ones. For cyclotomic elements with large conductor **and** few nonzero coefficients, it makes a big difference.\n\nIs there a use case for sparse cyclotomic elements with large conductor?",
    "created_at": "2015-04-15T16:38:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247952",
    "user": "https://github.com/videlec"
}
```

<div id="comment:28" align="right">comment:28</div>

Ok. The whole thing about conjugation just reflects the fact that Gap is using a dense representation where yours is sparse. In `a.conjugate()` Gap just run through **all** coefficients, looking for the nonzero ones. For cyclotomic elements with large conductor **and** few nonzero coefficients, it makes a big difference.

Is there a use case for sparse cyclotomic elements with large conductor?



---

archive/issue_comments_247953.json:
```json
{
    "body": "Changed branch from **[u/vdelecroix/18152](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/18152)** to **[u/jipilab/18152](https://github.com/sagemath/sagetrac-mirror/tree/u/jipilab/18152)**",
    "created_at": "2015-04-21T11:54:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247953",
    "user": "https://github.com/jplab"
}
```

Changed branch from **[u/vdelecroix/18152](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/18152)** to **[u/jipilab/18152](https://github.com/sagemath/sagetrac-mirror/tree/u/jipilab/18152)**



---

archive/issue_comments_247954.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nHi,\n\nSo, all test pass on my 6.6.rc3. I went through the files and removed some trailing spaces and blank lines.\n\nReplying to [28](#comment:28): I do not have a use case for sparse cyclotomic out of my head. It is also difficult to guess for the use I have in mind (mainly representation of Coxeter groups). Nonetheless, the matrices will not have large conductor. Thus I would say it is not too bad as it is for the purpose of Coxeter groups.\n\nGoing through the discussion, the current state of affairs is:\n\nThe following tickets are fixed:\n#14240, #16130, #16631, #17117\n\nThe following tickets are follow-ups:\n#16116,#18207\n\nThe ticket looks good to me. It is well doctested with many examples. I would put positive review, nevertheless it would be good if someone else also go over the ticket too, Christian?\n\nBest,\nJP\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/591409b3d074fff8bff7dad14be97ce02851ca94\"><code>591409b</code></a></td><td><code>Merge branch 'develop' into cyclotomic</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/29cb0a7663d9303022ce9251534e53a66fac11ec\"><code>29cb0a7</code></a></td><td><code>Corrected some blank lines and trailing spaces</code></td></tr></table>\n",
    "created_at": "2015-04-21T12:14:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247954",
    "user": "https://github.com/jplab"
}
```

<div id="comment:30" align="right">comment:30</div>

Hi,

So, all test pass on my 6.6.rc3. I went through the files and removed some trailing spaces and blank lines.

Replying to [28](#comment:28): I do not have a use case for sparse cyclotomic out of my head. It is also difficult to guess for the use I have in mind (mainly representation of Coxeter groups). Nonetheless, the matrices will not have large conductor. Thus I would say it is not too bad as it is for the purpose of Coxeter groups.

Going through the discussion, the current state of affairs is:

The following tickets are fixed:
#14240, #16130, #16631, #17117

The following tickets are follow-ups:
#16116,#18207

The ticket looks good to me. It is well doctested with many examples. I would put positive review, nevertheless it would be good if someone else also go over the ticket too, Christian?

Best,
JP

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/591409b3d074fff8bff7dad14be97ce02851ca94"><code>591409b</code></a></td><td><code>Merge branch 'develop' into cyclotomic</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/29cb0a7663d9303022ce9251534e53a66fac11ec"><code>29cb0a7</code></a></td><td><code>Corrected some blank lines and trailing spaces</code></td></tr></table>




---

archive/issue_comments_247955.json:
```json
{
    "body": "Reviewer: **Jean-Philippe Labb\u00e9**",
    "created_at": "2015-04-21T12:14:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247955",
    "user": "https://github.com/jplab"
}
```

Reviewer: **Jean-Philippe Labbé**



---

archive/issue_comments_247956.json:
```json
{
    "body": "Changed commit from **[`e4a3524`](https://github.com/sagemath/sagetrac-mirror/commit/e4a352468cf9c018b9bdf148a3de03793a111b9e)** to **[`29cb0a7`](https://github.com/sagemath/sagetrac-mirror/commit/29cb0a7663d9303022ce9251534e53a66fac11ec)**",
    "created_at": "2015-04-21T12:14:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247956",
    "user": "https://github.com/jplab"
}
```

Changed commit from **[`e4a3524`](https://github.com/sagemath/sagetrac-mirror/commit/e4a352468cf9c018b9bdf148a3de03793a111b9e)** to **[`29cb0a7`](https://github.com/sagemath/sagetrac-mirror/commit/29cb0a7663d9303022ce9251534e53a66fac11ec)**



---

archive/issue_comments_247957.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nThere are merged conflicts on the last beta... Wait a minute, I am doing a rebase. I am doing a rebase.",
    "created_at": "2015-04-21T12:20:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247957",
    "user": "https://github.com/videlec"
}
```

<div id="comment:31" align="right">comment:31</div>

There are merged conflicts on the last beta... Wait a minute, I am doing a rebase. I am doing a rebase.



---

archive/issue_comments_247958.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nOops, my bad... Should have done it with the 6.6 ...",
    "created_at": "2015-04-21T12:33:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247958",
    "user": "https://github.com/jplab"
}
```

<div id="comment:32" align="right">comment:32</div>

Oops, my bad... Should have done it with the 6.6 ...



---

archive/issue_comments_247959.json:
```json
{
    "body": "Changed commit from **[`29cb0a7`](https://github.com/sagemath/sagetrac-mirror/commit/29cb0a7663d9303022ce9251534e53a66fac11ec)** to **[`b8e369b`](https://github.com/sagemath/sagetrac-mirror/commit/b8e369b03f2f444c6af07b77038610e43e625db8)**",
    "created_at": "2015-04-21T13:03:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247959",
    "user": "https://github.com/videlec"
}
```

Changed commit from **[`29cb0a7`](https://github.com/sagemath/sagetrac-mirror/commit/29cb0a7663d9303022ce9251534e53a66fac11ec)** to **[`b8e369b`](https://github.com/sagemath/sagetrac-mirror/commit/b8e369b03f2f444c6af07b77038610e43e625db8)**



---

archive/issue_comments_247960.json:
```json
{
    "body": "Changed branch from **[u/jipilab/18152](https://github.com/sagemath/sagetrac-mirror/tree/u/jipilab/18152)** to **[u/vdelecroix/18152](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/18152)**",
    "created_at": "2015-04-21T13:03:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247960",
    "user": "https://github.com/videlec"
}
```

Changed branch from **[u/jipilab/18152](https://github.com/sagemath/sagetrac-mirror/tree/u/jipilab/18152)** to **[u/vdelecroix/18152](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/18152)**



---

archive/issue_comments_247961.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nSalut Jean-Phillippe,\n\nThanks for your corrections! The branch is a fast forward. So you have to delete your previous branch. Your commit is preserved (it is now 08df5b4). I added three commits for better compatibility with the previous version:\n- adding a `minpoly` and `field_order` methods as it was requested in [comment:23](#comment:23) (see also #18266 for a potential improvement)\n- adding a `__neg__` (it is now faster to do `-E(3)`)\n\nVincent\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c8af9b33e2e51e5515325529ea4f419ecd8a894\"><code>0c8af9b</code></a></td><td><code>Trac 18152: universal cyclotomic field using libgap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/509acf7d0c129da220729e914b50d895316f300f\"><code>509acf7</code></a></td><td><code>Trac 18152: remove the old implementation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/519dc00a585ca5f9ac000557e6151c5eec990e12\"><code>519dc00</code></a></td><td><code>Trac 18152: Fix coxeter group import</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/08df5b48a236a18a3b37faf513e93d16df4145b9\"><code>08df5b4</code></a></td><td><code>Corrected some blank lines and trailing spaces</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/890151f42c0073f067724c42378969aa9d589723\"><code>890151f</code></a></td><td><code>Trac 18152: add a minpoly method to UCF elements</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/70f78956a802b89c22dafebf02ca5016856baca5\"><code>70f7895</code></a></td><td><code>Trac 18152: field_order as a deprecated alias of conductor</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b8e369b03f2f444c6af07b77038610e43e625db8\"><code>b8e369b</code></a></td><td><code>Trac 18152: `__neg__` for UCF elements</code></td></tr></table>\n",
    "created_at": "2015-04-21T13:03:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247961",
    "user": "https://github.com/videlec"
}
```

<div id="comment:33" align="right">comment:33</div>

Salut Jean-Phillippe,

Thanks for your corrections! The branch is a fast forward. So you have to delete your previous branch. Your commit is preserved (it is now 08df5b4). I added three commits for better compatibility with the previous version:
- adding a `minpoly` and `field_order` methods as it was requested in [comment:23](#comment:23) (see also #18266 for a potential improvement)
- adding a `__neg__` (it is now faster to do `-E(3)`)

Vincent

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c8af9b33e2e51e5515325529ea4f419ecd8a894"><code>0c8af9b</code></a></td><td><code>Trac 18152: universal cyclotomic field using libgap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/509acf7d0c129da220729e914b50d895316f300f"><code>509acf7</code></a></td><td><code>Trac 18152: remove the old implementation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/519dc00a585ca5f9ac000557e6151c5eec990e12"><code>519dc00</code></a></td><td><code>Trac 18152: Fix coxeter group import</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/08df5b48a236a18a3b37faf513e93d16df4145b9"><code>08df5b4</code></a></td><td><code>Corrected some blank lines and trailing spaces</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/890151f42c0073f067724c42378969aa9d589723"><code>890151f</code></a></td><td><code>Trac 18152: add a minpoly method to UCF elements</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/70f78956a802b89c22dafebf02ca5016856baca5"><code>70f7895</code></a></td><td><code>Trac 18152: field_order as a deprecated alias of conductor</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b8e369b03f2f444c6af07b77038610e43e625db8"><code>b8e369b</code></a></td><td><code>Trac 18152: `__neg__` for UCF elements</code></td></tr></table>




---

archive/issue_comments_247962.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,8 +6,10 @@\n - #16130: Matrices over Universal Cyclotomic field failing to echelonize/inverse\n - #17117: UniversalCyclotomicField elements considered real\n \n-And is about 10x faster (see [comment:10](#comment:10)).\n+And is about 10x faster (see [comment:10](#comment:10)) except for operations on very sparse elements with very large conductors (see e.g. [comment:23](#comment:23), [comment:27](#comment:27) and [comment:28](#comment:28)). \n \n Possible follow up:\n - switch to Cython\n - implement dense matrices by wrapping libgap matrices (see also #16116)\n+- slowness in conjugation? #18207 (see also [comment:28](#comment:28), this is unavoidable because gap uses a dense representation of elements)\n+- interface with libgap polynomials (#18266)\n``````\n",
    "created_at": "2015-04-21T13:07:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247962",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,8 +6,10 @@
 - #16130: Matrices over Universal Cyclotomic field failing to echelonize/inverse
 - #17117: UniversalCyclotomicField elements considered real
 
-And is about 10x faster (see [comment:10](#comment:10)).
+And is about 10x faster (see [comment:10](#comment:10)) except for operations on very sparse elements with very large conductors (see e.g. [comment:23](#comment:23), [comment:27](#comment:27) and [comment:28](#comment:28)). 
 
 Possible follow up:
 - switch to Cython
 - implement dense matrices by wrapping libgap matrices (see also #16116)
+- slowness in conjugation? #18207 (see also [comment:28](#comment:28), this is unavoidable because gap uses a dense representation of elements)
+- interface with libgap polynomials (#18266)
``````




---

archive/issue_comments_247963.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@jplab](#comment:30):\n> The following tickets are fixed:\n> #14240, #16130, #16631, #17117\n\nAnd actually, doctests are already there! So these should be closed as soon as this one gets positively reviewed.\n\nVincent",
    "created_at": "2015-04-21T13:13:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247963",
    "user": "https://github.com/videlec"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@jplab](#comment:30):
> The following tickets are fixed:
> #14240, #16130, #16631, #17117

And actually, doctests are already there! So these should be closed as soon as this one gets positively reviewed.

Vincent



---

archive/issue_comments_247964.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nBut there is still the most important question: do we keep both versions (one being sparse the other being dense)?\n\nVincent",
    "created_at": "2015-04-21T13:35:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247964",
    "user": "https://github.com/videlec"
}
```

<div id="comment:36" align="right">comment:36</div>

But there is still the most important question: do we keep both versions (one being sparse the other being dense)?

Vincent



---

archive/issue_comments_247965.json:
```json
{
    "body": "Changed commit from **[`b8e369b`](https://github.com/sagemath/sagetrac-mirror/commit/b8e369b03f2f444c6af07b77038610e43e625db8)** to **[`28c23ce`](https://github.com/sagemath/sagetrac-mirror/commit/28c23ce280985112ea43f0bea36a76952a64ff8e)**",
    "created_at": "2015-04-21T15:31:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247965",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b8e369b`](https://github.com/sagemath/sagetrac-mirror/commit/b8e369b03f2f444c6af07b77038610e43e625db8)** to **[`28c23ce`](https://github.com/sagemath/sagetrac-mirror/commit/28c23ce280985112ea43f0bea36a76952a64ff8e)**



---

archive/issue_comments_247966.json:
```json
{
    "body": "<div id=\"comment:37\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ccfc26e48275b8579b3acb06e7777c8551ccd14a\"><code>ccfc26e</code></a></td><td><code>Trac 18152: universal cyclotomic field using libgap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1b2d04a5ef626e1f492bcfcb7505202f5ecdf54e\"><code>1b2d04a</code></a></td><td><code>Trac 18152: remove the old implementation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f3ef31ac655912f01cc29ba4668301e1f4761251\"><code>f3ef31a</code></a></td><td><code>Trac 18152: Fix coxeter group import</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bb42614d09c6cb6c115084d8f968b121fe55e1d1\"><code>bb42614</code></a></td><td><code>Corrected some blank lines and trailing spaces</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e3f714efbb90e9f664c7f19737c3f5a51a7abcd7\"><code>e3f714e</code></a></td><td><code>Trac 18152: add a minpoly method to UCF elements</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/814967784ecc8de36d80615ec97ed4577f1a29e3\"><code>8149677</code></a></td><td><code>Trac 18152: field_order as a deprecated alias of conductor</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/28c23ce280985112ea43f0bea36a76952a64ff8e\"><code>28c23ce</code></a></td><td><code>Trac 18152: `__neg__` for UCF elements</code></td></tr></table>\n",
    "created_at": "2015-04-21T15:31:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247966",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:37"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ccfc26e48275b8579b3acb06e7777c8551ccd14a"><code>ccfc26e</code></a></td><td><code>Trac 18152: universal cyclotomic field using libgap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1b2d04a5ef626e1f492bcfcb7505202f5ecdf54e"><code>1b2d04a</code></a></td><td><code>Trac 18152: remove the old implementation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f3ef31ac655912f01cc29ba4668301e1f4761251"><code>f3ef31a</code></a></td><td><code>Trac 18152: Fix coxeter group import</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bb42614d09c6cb6c115084d8f968b121fe55e1d1"><code>bb42614</code></a></td><td><code>Corrected some blank lines and trailing spaces</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e3f714efbb90e9f664c7f19737c3f5a51a7abcd7"><code>e3f714e</code></a></td><td><code>Trac 18152: add a minpoly method to UCF elements</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/814967784ecc8de36d80615ec97ed4577f1a29e3"><code>8149677</code></a></td><td><code>Trac 18152: field_order as a deprecated alias of conductor</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/28c23ce280985112ea43f0bea36a76952a64ff8e"><code>28c23ce</code></a></td><td><code>Trac 18152: `__neg__` for UCF elements</code></td></tr></table>




---

archive/issue_comments_247967.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nAll right. Updated on the very last 6.7.beta2!",
    "created_at": "2015-04-21T15:31:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247967",
    "user": "https://github.com/videlec"
}
```

<div id="comment:38" align="right">comment:38</div>

All right. Updated on the very last 6.7.beta2!



---

archive/issue_comments_247968.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nReplying to [@videlec](#comment:36):\n> But there is still the most important question: do we keep both versions (one being sparse the other being dense)?\n\nIMO, we should keep both with the default being the dense.",
    "created_at": "2015-04-21T16:01:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247968",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:39" align="right">comment:39</div>

Replying to [@videlec](#comment:36):
> But there is still the most important question: do we keep both versions (one being sparse the other being dense)?

IMO, we should keep both with the default being the dense.



---

archive/issue_comments_247969.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nReplying to [@tscrim](#comment:39):\n> Replying to [@videlec](#comment:36):\n> > But there is still the most important question: do we keep both versions (one being sparse the other being dense)?\n\n> \n> IMO, we should keep both with the default being the dense.\n\nI was implictely requiring arguments. We will not keep it just because you think it has to ;-) I do have arguments for both sides, but as I am the ticket author I better not participate.",
    "created_at": "2015-04-21T16:05:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247969",
    "user": "https://github.com/videlec"
}
```

<div id="comment:40" align="right">comment:40</div>

Replying to [@tscrim](#comment:39):
> Replying to [@videlec](#comment:36):
> > But there is still the most important question: do we keep both versions (one being sparse the other being dense)?

> 
> IMO, we should keep both with the default being the dense.

I was implictely requiring arguments. We will not keep it just because you think it has to ;-) I do have arguments for both sides, but as I am the ticket author I better not participate.



---

archive/issue_comments_247970.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nThe main argument I could see for keeping the code around is as follow: The speed balance may evolve in the future, typically if free modules in Sage get optimized, or if new use cases emerge. Of course we could always revive the code then, but it would probably have rotten in the mean time, and we may have completely forgotten about it. It also can be used for testing purposes for comparing two independent implementations of UCF. \n\nThose are not super strong arguments.\n\nThe main argument for not keeping it is that we would not want is wasting time maintaining it. \n\nA sensible approach might be to write a brief comment at the beginning of the file / class stating something like: \"at this point this code is not used much (see ...). If maintaining it becomes a bother in the future, it's ok to discard it\".",
    "created_at": "2015-04-22T09:18:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247970",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:41" align="right">comment:41</div>

The main argument I could see for keeping the code around is as follow: The speed balance may evolve in the future, typically if free modules in Sage get optimized, or if new use cases emerge. Of course we could always revive the code then, but it would probably have rotten in the mean time, and we may have completely forgotten about it. It also can be used for testing purposes for comparing two independent implementations of UCF. 

Those are not super strong arguments.

The main argument for not keeping it is that we would not want is wasting time maintaining it. 

A sensible approach might be to write a brief comment at the beginning of the file / class stating something like: "at this point this code is not used much (see ...). If maintaining it becomes a bother in the future, it's ok to discard it".



---

archive/issue_comments_247971.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nPerhaps one could add a comment/warning in the beginning of the file also to mention that GAP uses a dense representation and a link to the current ticket.\n\nIf there is a use case popping up in the future we could revive the code as Nicolas mentioned.\n\n`@`Christian: In your actual usage (not tests), is sparse faster than the current dense representation of GAP?\n\nAlso: I just updated to 6.7.beta3 on my computer and pulled the ticket. There was a small conflict in the file\n\nsrc/doc/en/reference/rings_standard/index.rst\n\nShould I push the resolution of the conflict here?",
    "created_at": "2015-04-29T09:26:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247971",
    "user": "https://github.com/jplab"
}
```

<div id="comment:42" align="right">comment:42</div>

Perhaps one could add a comment/warning in the beginning of the file also to mention that GAP uses a dense representation and a link to the current ticket.

If there is a use case popping up in the future we could revive the code as Nicolas mentioned.

`@`Christian: In your actual usage (not tests), is sparse faster than the current dense representation of GAP?

Also: I just updated to 6.7.beta3 on my computer and pulled the ticket. There was a small conflict in the file

src/doc/en/reference/rings_standard/index.rst

Should I push the resolution of the conflict here?



---

archive/issue_comments_247972.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nReplying to [@jplab](#comment:42):\n> Also: I just updated to 6.7.beta3 on my computer and pulled the ticket. There was a small conflict in the file\n> \n> src/doc/en/reference/rings_standard/index.rst\n> \n> Should I push the resolution of the conflict here?\n\nYes please.",
    "created_at": "2015-04-29T09:29:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247972",
    "user": "https://github.com/videlec"
}
```

<div id="comment:43" align="right">comment:43</div>

Replying to [@jplab](#comment:42):
> Also: I just updated to 6.7.beta3 on my computer and pulled the ticket. There was a small conflict in the file
> 
> src/doc/en/reference/rings_standard/index.rst
> 
> Should I push the resolution of the conflict here?

Yes please.



---

archive/issue_comments_247973.json:
```json
{
    "body": "Changed branch from **[u/vdelecroix/18152](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/18152)** to **[u/jipilab/18152](https://github.com/sagemath/sagetrac-mirror/tree/u/jipilab/18152)**",
    "created_at": "2015-04-29T16:08:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247973",
    "user": "https://github.com/jplab"
}
```

Changed branch from **[u/vdelecroix/18152](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/18152)** to **[u/jipilab/18152](https://github.com/sagemath/sagetrac-mirror/tree/u/jipilab/18152)**



---

archive/issue_comments_247974.json:
```json
{
    "body": "Changed commit from **[`28c23ce`](https://github.com/sagemath/sagetrac-mirror/commit/28c23ce280985112ea43f0bea36a76952a64ff8e)** to **[`dc3de84`](https://github.com/sagemath/sagetrac-mirror/commit/dc3de84809792bde5e2cde8c8c579f42496e0647)**",
    "created_at": "2015-04-29T16:09:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247974",
    "user": "https://github.com/jplab"
}
```

Changed commit from **[`28c23ce`](https://github.com/sagemath/sagetrac-mirror/commit/28c23ce280985112ea43f0bea36a76952a64ff8e)** to **[`dc3de84`](https://github.com/sagemath/sagetrac-mirror/commit/dc3de84809792bde5e2cde8c8c579f42496e0647)**



---

archive/issue_comments_247975.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nEt voil\u00e0!\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dc3de84809792bde5e2cde8c8c579f42496e0647\"><code>dc3de84</code></a></td><td><code>Merge branch 'u/vdelecroix/18152' of trac.sagemath.org:sage into SageMath6.7.b3</code></td></tr></table>\n",
    "created_at": "2015-04-29T16:09:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247975",
    "user": "https://github.com/jplab"
}
```

<div id="comment:45" align="right">comment:45</div>

Et voilà!

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dc3de84809792bde5e2cde8c8c579f42496e0647"><code>dc3de84</code></a></td><td><code>Merge branch 'u/vdelecroix/18152' of trac.sagemath.org:sage into SageMath6.7.b3</code></td></tr></table>




---

archive/issue_events_255744.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2015-04-30T08:00:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18152#event-255744"
}
```



---

archive/issue_events_255745.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2015-04-30T08:00:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18152#event-255745"
}
```



---

archive/issue_comments_247976.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nHi,\n\nAll test passed on 6.7.beta3!\n\nCould you add a comment/warning at the beginning of the file mentioning the old implementation and a link to the ticket?\n\nPerhaps it would be good to mention this in the documentation as well?",
    "created_at": "2015-04-30T08:00:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247976",
    "user": "https://github.com/jplab"
}
```

<div id="comment:46" align="right">comment:46</div>

Hi,

All test passed on 6.7.beta3!

Could you add a comment/warning at the beginning of the file mentioning the old implementation and a link to the ticket?

Perhaps it would be good to mention this in the documentation as well?



---

archive/issue_comments_247977.json:
```json
{
    "body": "Changed commit from **[`dc3de84`](https://github.com/sagemath/sagetrac-mirror/commit/dc3de84809792bde5e2cde8c8c579f42496e0647)** to **[`b818c83`](https://github.com/sagemath/sagetrac-mirror/commit/b818c83bc329581c6af225dcf7b54d120e6e1e7c)**",
    "created_at": "2015-04-30T12:20:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247977",
    "user": "https://github.com/videlec"
}
```

Changed commit from **[`dc3de84`](https://github.com/sagemath/sagetrac-mirror/commit/dc3de84809792bde5e2cde8c8c579f42496e0647)** to **[`b818c83`](https://github.com/sagemath/sagetrac-mirror/commit/b818c83bc329581c6af225dcf7b54d120e6e1e7c)**



---

archive/issue_comments_247978.json:
```json
{
    "body": "Changed branch from **[u/jipilab/18152](https://github.com/sagemath/sagetrac-mirror/tree/u/jipilab/18152)** to **[u/vdelecroix/18152](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/18152)**",
    "created_at": "2015-04-30T12:20:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247978",
    "user": "https://github.com/videlec"
}
```

Changed branch from **[u/jipilab/18152](https://github.com/sagemath/sagetrac-mirror/tree/u/jipilab/18152)** to **[u/vdelecroix/18152](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/18152)**



---

archive/issue_events_255746.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-30T12:20:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18152#event-255746"
}
```



---

archive/issue_events_255747.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-30T12:20:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18152#event-255747"
}
```



---

archive/issue_comments_247979.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nDone. I also simplified some imports.\n  \n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ba5ed57914e701a2ed055f03d10ec039017a1347\"><code>ba5ed57</code></a></td><td><code>Trac 18152: add a note about the change of implementation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b818c83bc329581c6af225dcf7b54d120e6e1e7c\"><code>b818c83</code></a></td><td><code>Trac 18152: remove and simplify some imports</code></td></tr></table>\n",
    "created_at": "2015-04-30T12:20:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247979",
    "user": "https://github.com/videlec"
}
```

<div id="comment:47" align="right">comment:47</div>

Done. I also simplified some imports.
  
---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ba5ed57914e701a2ed055f03d10ec039017a1347"><code>ba5ed57</code></a></td><td><code>Trac 18152: add a note about the change of implementation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b818c83bc329581c6af225dcf7b54d120e6e1e7c"><code>b818c83</code></a></td><td><code>Trac 18152: remove and simplify some imports</code></td></tr></table>




---

archive/issue_events_255748.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2015-05-06T09:02:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18152#event-255748"
}
```



---

archive/issue_events_255749.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2015-05-06T09:02:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18152#event-255749"
}
```



---

archive/issue_comments_247980.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nHi,\n\nThis looks good to go as I see it.\n\nI set it to positive review.",
    "created_at": "2015-05-06T09:02:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247980",
    "user": "https://github.com/jplab"
}
```

<div id="comment:48" align="right">comment:48</div>

Hi,

This looks good to go as I see it.

I set it to positive review.



---

archive/issue_comments_247981.json:
```json
{
    "body": "Changed branch from **[u/vdelecroix/18152](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/18152)** to **[`b818c83`](https://github.com/sagemath/sagetrac-mirror/commit/b818c83bc329581c6af225dcf7b54d120e6e1e7c)**",
    "created_at": "2015-05-06T23:57:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18152#issuecomment-247981",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/vdelecroix/18152](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/18152)** to **[`b818c83`](https://github.com/sagemath/sagetrac-mirror/commit/b818c83bc329581c6af225dcf7b54d120e6e1e7c)**



---

archive/issue_events_255750.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-05-06T23:57:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18152#event-255750"
}
```



---

archive/issue_events_255751.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "27a6e09bc1c0c1561f5796386d4ee671bc769f6a",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-05-06T23:57:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/18152",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18152#event-255751"
}
```
