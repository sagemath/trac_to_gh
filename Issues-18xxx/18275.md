# Issue 18275: subtraction fails for cartesian products of rings

archive/issues_018038.json:
```json
{
    "body": "\n```\nsage: C = GF(5).cartesian_product(GF(5))\nsage: C.one() - C.one()\n... BOOOOM (infinite recursion) ...\n```\nThe reason is that there is no default implementation of `_sub_` in `ElementMethods` of `Rings` (whereas there is one in `sage.structure.element.RingElement`).\n\nCC:  @nthiery\n\nBranch/Commit: 8cd8bbabfcb478512864a551efd4157c2ac43d7e\n\nReviewer: Jori M\u00e4ntysalo\n\nAuthor: Vincent Delecroix\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/18275\n\n",
    "closed_at": "2015-04-23T03:21:53Z",
    "created_at": "2015-04-22T12:27:56Z",
    "labels": [
        "component: algebra",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.7",
    "title": "subtraction fails for cartesian products of rings",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18275",
    "user": "https://github.com/videlec"
}
```

```
sage: C = GF(5).cartesian_product(GF(5))
sage: C.one() - C.one()
... BOOOOM (infinite recursion) ...
```
The reason is that there is no default implementation of `_sub_` in `ElementMethods` of `Rings` (whereas there is one in `sage.structure.element.RingElement`).

CC:  @nthiery

Branch/Commit: 8cd8bbabfcb478512864a551efd4157c2ac43d7e

Reviewer: Jori Mäntysalo

Author: Vincent Delecroix

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/18275





---

archive/issue_comments_312991.json:
```json
{
    "body": "Changing commit from \"\" to \"8cd8bbabfcb478512864a551efd4157c2ac43d7e\"",
    "created_at": "2015-04-22T12:37:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18275",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18275#issuecomment-312991",
    "user": "https://github.com/videlec"
}
```

Changing commit from "" to "8cd8bbabfcb478512864a551efd4157c2ac43d7e"



---

archive/issue_comments_312992.json:
```json
{
    "body": "<a id='comment:1'></a>\nNew commits:\n|                                                                                                                                          |                                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|\n|[8cd8bba](https://github.com/sagemath/sagetrac-mirror/commit/8cd8bbabfcb478512864a551efd4157c2ac43d7e)|`Trac 18275: fix __sub__ for additive magmas`|",
    "created_at": "2015-04-22T12:37:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18275",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18275#issuecomment-312992",
    "user": "https://github.com/videlec"
}
```

<a id='comment:1'></a>
New commits:
|                                                                                                                                          |                                             |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|
|[8cd8bba](https://github.com/sagemath/sagetrac-mirror/commit/8cd8bbabfcb478512864a551efd4157c2ac43d7e)|`Trac 18275: fix __sub__ for additive magmas`|



---

archive/issue_comments_312993.json:
```json
{
    "body": "Changing author from \"\" to \"Vincent Delecroix\"",
    "created_at": "2015-04-22T12:37:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18275",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18275#issuecomment-312993",
    "user": "https://github.com/videlec"
}
```

Changing author from "" to "Vincent Delecroix"



---

archive/issue_comments_312994.json:
```json
{
    "body": "Changing branch from \"\" to \"u/vdelecroix/18275\"",
    "created_at": "2015-04-22T12:37:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18275",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18275#issuecomment-312994",
    "user": "https://github.com/videlec"
}
```

Changing branch from "" to "u/vdelecroix/18275"



---

archive/issue_comments_312995.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-04-22T12:37:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18275",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18275#issuecomment-312995",
    "user": "https://github.com/videlec"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_312996.json:
```json
{
    "body": "<a id='comment:2'></a>\nSeems to be OK. If you want to modify something, maybe add a phrase like \"By default `a-b` is defined just as a sum of `a` and the negation of `b`.\"",
    "created_at": "2015-04-22T13:06:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18275",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18275#issuecomment-312996",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:2'></a>
Seems to be OK. If you want to modify something, maybe add a phrase like "By default `a-b` is defined just as a sum of `a` and the negation of `b`."



---

archive/issue_comments_312997.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-04-22T13:06:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18275",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18275#issuecomment-312997",
    "user": "https://github.com/jm58660"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_312998.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Jori M\u00e4ntysalo\"",
    "created_at": "2015-04-22T13:06:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18275",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18275#issuecomment-312998",
    "user": "https://github.com/jm58660"
}
```

Changing reviewer from "" to "Jori Mäntysalo"



---

archive/issue_comments_312999.json:
```json
{
    "body": "<a id='comment:3'></a>\nReplying to [jmantysalo](#comment%3A2):\n> Seems to be OK. If you want to modify something, maybe add a phrase like \"By default `a-b` is defined just as a sum of `a` and the negation of `b`.\"\n\n\nI do not especially want to modify something ;-) Actually this is what is in `sage.structure.element.RingElement`. But not all ring elements inherit from it. Hence the failure.",
    "created_at": "2015-04-22T13:09:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18275",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18275#issuecomment-312999",
    "user": "https://github.com/videlec"
}
```

<a id='comment:3'></a>
Replying to [jmantysalo](#comment%3A2):
> Seems to be OK. If you want to modify something, maybe add a phrase like "By default `a-b` is defined just as a sum of `a` and the negation of `b`."


I do not especially want to modify something ;-) Actually this is what is in `sage.structure.element.RingElement`. But not all ring elements inherit from it. Hence the failure.



---

archive/issue_comments_313000.json:
```json
{
    "body": "<a id='comment:4'></a>\nYep, so the real problem behind this specific error is that there is no `.direct_product(...)` for rings (like at least groups have). But I think that (default) definition A-B := A+(-B) is always the right thing to do.",
    "created_at": "2015-04-22T13:18:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18275",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18275#issuecomment-313000",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:4'></a>
Yep, so the real problem behind this specific error is that there is no `.direct_product(...)` for rings (like at least groups have). But I think that (default) definition A-B := A+(-B) is always the right thing to do.



---

archive/issue_comments_313001.json:
```json
{
    "body": "Changing branch from \"u/vdelecroix/18275\" to \"8cd8bbabfcb478512864a551efd4157c2ac43d7e\"",
    "created_at": "2015-04-23T03:21:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18275",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18275#issuecomment-313001",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/vdelecroix/18275" to "8cd8bbabfcb478512864a551efd4157c2ac43d7e"



---

archive/issue_comments_313002.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-04-23T03:21:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18275",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18275#issuecomment-313002",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_066463.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-04-23T03:21:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18275",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18275#event-66463"
}
```
