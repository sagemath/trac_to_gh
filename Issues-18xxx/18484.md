# Issue 18484: Implement k-chordality of a matroid

archive/issues_018247.json:
```json
{
    "assignees": [],
    "body": "A matroid is k-chordal if every circuit `C` of size >= k has a *chord*, an element `x` of the ground set is a *chord* of `C` if there exists `C = A \\sqcup B` such that `A \\cup x, B \\cup x` are circuits. Matroids that are 4-chordal are simply called chordal.\n\nKeywords: **chord**\n\nBranch/Commit: **[cd4bce2](https://github.com/sagemath/sagetrac-mirror/commit/cd4bce238ace777246392df070c0b98e6a1d9125)**\n\nReviewer: **Rudi Pendavingh**\n\nAuthor: **Travis Scrimshaw**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/18484_\n\n",
    "closed_at": "2015-06-24T20:11:17Z",
    "created_at": "2015-05-24T10:01:06Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20matroid%20theory",
        "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Implement k-chordality of a matroid",
    "type": "issue",
    "updated_at": "2015-06-24T20:11:17Z",
    "url": "https://github.com/sagemath/sage/issues/18484",
    "user": "https://github.com/sagetrac-Rudi"
}
```
A matroid is k-chordal if every circuit `C` of size >= k has a *chord*, an element `x` of the ground set is a *chord* of `C` if there exists `C = A \sqcup B` such that `A \cup x, B \cup x` are circuits. Matroids that are 4-chordal are simply called chordal.

Keywords: **chord**

Branch/Commit: **[cd4bce2](https://github.com/sagemath/sagetrac-mirror/commit/cd4bce238ace777246392df070c0b98e6a1d9125)**

Reviewer: **Rudi Pendavingh**

Author: **Travis Scrimshaw**

_Issue created by migration from https://trac.sagemath.org/ticket/18484_





---

archive/issue_events_236047.json:
```json
{
    "actor": "https://github.com/sagetrac-Rudi",
    "created_at": "2015-05-24T10:01:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18484#event-236047"
}
```



---

archive/issue_events_236048.json:
```json
{
    "actor": "https://github.com/sagetrac-Rudi",
    "created_at": "2015-05-24T10:01:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20matroid%20theory",
    "label_color": "0000ff",
    "label_name": "component: matroid theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18484#event-236048"
}
```



---

archive/issue_events_236049.json:
```json
{
    "actor": "https://github.com/sagetrac-Rudi",
    "created_at": "2015-05-24T10:01:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "label": "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18484#event-236049"
}
```



---

archive/issue_events_236050.json:
```json
{
    "actor": "https://github.com/sagetrac-Rudi",
    "created_at": "2015-05-24T10:01:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18484#event-236050"
}
```



---

archive/issue_comments_257618.json:
```json
{
    "body": "Branch: **[u/Rudi/add_test_if_a_matroid_is_ternary](https://github.com/sagemath/sagetrac-mirror/tree/u/Rudi/add_test_if_a_matroid_is_ternary)**",
    "created_at": "2015-06-17T20:17:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18484#issuecomment-257618",
    "user": "https://github.com/sagetrac-Rudi"
}
```

Branch: **[u/Rudi/add_test_if_a_matroid_is_ternary](https://github.com/sagemath/sagetrac-mirror/tree/u/Rudi/add_test_if_a_matroid_is_ternary)**



---

archive/issue_comments_257619.json:
```json
{
    "body": "Commit: **[3ed9306](https://github.com/sagemath/sagetrac-mirror/commit/3ed9306b5409c351857318d23bd95a8cd3d490f5)**",
    "created_at": "2015-06-17T20:41:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18484#issuecomment-257619",
    "user": "https://github.com/sagetrac-Rudi"
}
```

Commit: **[3ed9306](https://github.com/sagemath/sagetrac-mirror/commit/3ed9306b5409c351857318d23bd95a8cd3d490f5)**



---

archive/issue_comments_257620.json:
```json
{
    "body": "Dependencies: **18448**",
    "created_at": "2015-06-17T20:41:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18484#issuecomment-257620",
    "user": "https://github.com/sagetrac-Rudi"
}
```

Dependencies: **18448**



---

archive/issue_comments_257621.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ad1f5b4cf899ef699afc6693c5ff90b4b1b1b66\">7ad1f5b</a></td><td><code>Docstring improvements</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/503b1e76957bf4f43974bc8d6b7bfa976f0c7b47\">503b1e7</a></td><td><code>Finishing touch docstrings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/63767a1d6ae908ed768f607592e017d015097c91\">63767a1</a></td><td><code>One more ALGORITHM block</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8967234d47bf16e9bc2d5fbc26d54da72c6bf5b4\">8967234</a></td><td><code>Fixed latex in docstring</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/29e84da8eaed7025cd66afa812a2de4aeb6cf47a\">29e84da</a></td><td><code>Merge branch 'u/Rudi/add_test_if_a_matroid_is_binary' of trac.sagemath.org:sage into u/Rudi/add_test_if_a_matroid_is_binary</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ada67429271b6cee84b18067de07648e3116ab55\">ada6742</a></td><td><code>Some changes, tweaks, and made a method public.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b9c3268e52317c0d5cf9639f7e0c22b518d4c1d5\">b9c3268</a></td><td><code>Added method .binary_matroid() for Matroid, BinaryMatroid, RegularMatroid</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fab68ccf52846b56991007287b53f28d69797fba\">fab68cc</a></td><td><code>deleted a white space that messed up unindent in docs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9715aa5c34a584cc964ccc8de357a85016c0114e\">9715aa5</a></td><td><code>Merge branch 't/18448/binary_matroid-18448' into t/18484/add_test_if_a_matroid_is_ternary</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3ed9306b5409c351857318d23bd95a8cd3d490f5\">3ed9306</a></td><td><code>Initial setup of ternary matroids, needs completion of _local_ternary_matroid</code></td></tr></table>\n",
    "created_at": "2015-06-17T20:41:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18484#issuecomment-257621",
    "user": "https://github.com/sagetrac-Rudi"
}
```

<a id='comment:2'>Comment 2:</a>
Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ad1f5b4cf899ef699afc6693c5ff90b4b1b1b66">7ad1f5b</a></td><td><code>Docstring improvements</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/503b1e76957bf4f43974bc8d6b7bfa976f0c7b47">503b1e7</a></td><td><code>Finishing touch docstrings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/63767a1d6ae908ed768f607592e017d015097c91">63767a1</a></td><td><code>One more ALGORITHM block</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8967234d47bf16e9bc2d5fbc26d54da72c6bf5b4">8967234</a></td><td><code>Fixed latex in docstring</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/29e84da8eaed7025cd66afa812a2de4aeb6cf47a">29e84da</a></td><td><code>Merge branch 'u/Rudi/add_test_if_a_matroid_is_binary' of trac.sagemath.org:sage into u/Rudi/add_test_if_a_matroid_is_binary</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ada67429271b6cee84b18067de07648e3116ab55">ada6742</a></td><td><code>Some changes, tweaks, and made a method public.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b9c3268e52317c0d5cf9639f7e0c22b518d4c1d5">b9c3268</a></td><td><code>Added method .binary_matroid() for Matroid, BinaryMatroid, RegularMatroid</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fab68ccf52846b56991007287b53f28d69797fba">fab68cc</a></td><td><code>deleted a white space that messed up unindent in docs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9715aa5c34a584cc964ccc8de357a85016c0114e">9715aa5</a></td><td><code>Merge branch 't/18448/binary_matroid-18448' into t/18484/add_test_if_a_matroid_is_ternary</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3ed9306b5409c351857318d23bd95a8cd3d490f5">3ed9306</a></td><td><code>Initial setup of ternary matroids, needs completion of _local_ternary_matroid</code></td></tr></table>




---

archive/issue_comments_257622.json:
```json
{
    "body": "Changed dependencies from **18448** to **#18448**",
    "created_at": "2015-06-20T17:42:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18484#issuecomment-257622",
    "user": "https://github.com/sagetrac-Rudi"
}
```

Changed dependencies from **18448** to **#18448**



---

archive/issue_comments_257623.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nI seem to have messed up this one. I'll make a fresh start.",
    "created_at": "2015-06-20T20:43:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18484#issuecomment-257623",
    "user": "https://github.com/sagetrac-Rudi"
}
```

<a id='comment:4'>Comment 4:</a>
I seem to have messed up this one. I'll make a fresh start.



---

archive/issue_events_236051.json:
```json
{
    "actor": "https://github.com/sagetrac-Rudi",
    "created_at": "2015-06-20T20:43:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18484#event-236051"
}
```



---

archive/issue_events_236052.json:
```json
{
    "actor": "https://github.com/sagetrac-Rudi",
    "created_at": "2015-06-20T20:43:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "label": "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18484#event-236052"
}
```



---

archive/issue_events_236053.json:
```json
{
    "actor": "https://github.com/sagetrac-Rudi",
    "created_at": "2015-06-20T20:43:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18484#event-236053"
}
```



---

archive/issue_comments_257624.json:
```json
{
    "body": "Removed assignee **Rudi**",
    "created_at": "2015-06-20T20:43:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18484#issuecomment-257624",
    "user": "https://github.com/sagetrac-Rudi"
}
```

Removed assignee **Rudi**



---

archive/issue_events_236054.json:
```json
{
    "actor": "https://github.com/sagetrac-Rudi",
    "created_at": "2015-06-20T20:43:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20matroid%20theory",
    "label_color": "0000ff",
    "label_name": "component: matroid theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18484#event-236054"
}
```



---

archive/issue_comments_257625.json:
```json
{
    "body": "Changed keywords from **** to **chord**",
    "created_at": "2015-06-20T21:16:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18484#issuecomment-257625",
    "user": "https://github.com/tscrim"
}
```

Changed keywords from **** to **chord**



---

archive/issue_events_236055.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-06-20T21:16:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20matroid%20theory",
    "label_color": "0000ff",
    "label_name": "component: matroid theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18484#event-236055"
}
```



---

archive/issue_comments_257626.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nIt's better to not create a new ticket, but instead just push a new branch.\n\nAnyways, I'm going to recycle this ticket for k-chordality of a matroid (code to follow shortly, probably tomorrow).",
    "created_at": "2015-06-20T21:16:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18484#issuecomment-257626",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:6'>Comment 6:</a>
It's better to not create a new ticket, but instead just push a new branch.

Anyways, I'm going to recycle this ticket for k-chordality of a matroid (code to follow shortly, probably tomorrow).



---

archive/issue_events_236056.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-06-20T21:16:36Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "title_is": "Implement k-chordality of a matroid",
    "title_was": "Add test if a matroid is Ternary",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18484#event-236056"
}
```



---

archive/issue_comments_257627.json:
```json
{
    "body": "Changed branch from **[u/Rudi/add_test_if_a_matroid_is_ternary](https://github.com/sagemath/sagetrac-mirror/tree/u/Rudi/add_test_if_a_matroid_is_ternary)** to none",
    "created_at": "2015-06-20T21:16:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18484#issuecomment-257627",
    "user": "https://github.com/tscrim"
}
```

Changed branch from **[u/Rudi/add_test_if_a_matroid_is_ternary](https://github.com/sagemath/sagetrac-mirror/tree/u/Rudi/add_test_if_a_matroid_is_ternary)** to none



---

archive/issue_events_236057.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-06-20T21:16:36Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18484#event-236057"
}
```



---

archive/issue_comments_257628.json:
```json
{
    "body": "Changed commit from **[3ed9306](https://github.com/sagemath/sagetrac-mirror/commit/3ed9306b5409c351857318d23bd95a8cd3d490f5)** to none",
    "created_at": "2015-06-20T21:16:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18484#issuecomment-257628",
    "user": "https://github.com/tscrim"
}
```

Changed commit from **[3ed9306](https://github.com/sagemath/sagetrac-mirror/commit/3ed9306b5409c351857318d23bd95a8cd3d490f5)** to none



---

archive/issue_comments_257629.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-There is a straightforward test to see if a matroid is ternary: generate the ternary representation local to a basis, and check matroid isomorphism. Implement this algorithm. See Matroid.is_binary().\n+A matroid is k-chordal if every circuit `C` of size < k has a *chord*, an element `x` of the ground set is a *chord* of `C` if there exists `C = A \\cup B` such that `A \\cup x, B \\cup x` are circuits.\n``````\n",
    "created_at": "2015-06-20T21:16:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18484#issuecomment-257629",
    "user": "https://github.com/tscrim"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-There is a straightforward test to see if a matroid is ternary: generate the ternary representation local to a basis, and check matroid isomorphism. Implement this algorithm. See Matroid.is_binary().
+A matroid is k-chordal if every circuit `C` of size < k has a *chord*, an element `x` of the ground set is a *chord* of `C` if there exists `C = A \cup B` such that `A \cup x, B \cup x` are circuits.
``````




---

archive/issue_comments_257630.json:
```json
{
    "body": "Changed dependencies from **#18448** to none",
    "created_at": "2015-06-20T21:16:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18484#issuecomment-257630",
    "user": "https://github.com/tscrim"
}
```

Changed dependencies from **#18448** to none



---

archive/issue_comments_257631.json:
```json
{
    "body": "Author: **Travis Scrimshaw**",
    "created_at": "2015-06-20T21:16:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18484#issuecomment-257631",
    "user": "https://github.com/tscrim"
}
```

Author: **Travis Scrimshaw**



---

archive/issue_comments_257632.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nReplying to [@tscrim](#comment%3A6):\n> It's better to not create a new ticket, but instead just push a new branch.\n> \n\nI tried, but apparently I was using the wrong command. Just `git trac push 18484` from my new branch was rejected. I did not see how to scrap the existing branch.\n\n> Anyways, I'm going to recycle this ticket for k-chordality of a matroid (code to follow shortly, probably tomorrow).\n\nWill your algorithm check that definition directly? If so, a matroid M of rank >k is k-chordal if and only if  it's rank-k truncation T is, since M and T will have the same collection of length `<= k` circuits:\n `T=BasisMatroid(groundset = M.groundset(), nonbases = M.dependent_r_sets(k), rank = k)`  \n\nTo get all the circuits of length at most k in that truncation T, you could use `T.nonspanning_circuits()`. If the rank is much higher than k, this will be faster than listing all the circuits of the original matroid by `M.circuits()` and scrapping the long ones. \n\nIf that rank-k truncation T is k-chordal, then how far is T from being binary? Is there a binary matroid B, a matroid N and an element e so that N\\e = T, N/e = B?",
    "created_at": "2015-06-20T21:56:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18484#issuecomment-257632",
    "user": "https://github.com/sagetrac-Rudi"
}
```

<a id='comment:7'>Comment 7:</a>
Replying to [@tscrim](#comment%3A6):
> It's better to not create a new ticket, but instead just push a new branch.
> 

I tried, but apparently I was using the wrong command. Just `git trac push 18484` from my new branch was rejected. I did not see how to scrap the existing branch.

> Anyways, I'm going to recycle this ticket for k-chordality of a matroid (code to follow shortly, probably tomorrow).

Will your algorithm check that definition directly? If so, a matroid M of rank >k is k-chordal if and only if  it's rank-k truncation T is, since M and T will have the same collection of length `<= k` circuits:
 `T=BasisMatroid(groundset = M.groundset(), nonbases = M.dependent_r_sets(k), rank = k)`  

To get all the circuits of length at most k in that truncation T, you could use `T.nonspanning_circuits()`. If the rank is much higher than k, this will be faster than listing all the circuits of the original matroid by `M.circuits()` and scrapping the long ones. 

If that rank-k truncation T is k-chordal, then how far is T from being binary? Is there a binary matroid B, a matroid N and an element e so that N\e = T, N/e = B?



---

archive/issue_comments_257633.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nReplying to [Rudi](#comment%3A7):\n> Replying to [@tscrim](#comment%3A6):\n> > It's better to not create a new ticket, but instead just push a new branch.\n> > \n\n> I tried, but apparently I was using the wrong command. Just `git trac push 18484` from my new branch was rejected. I did not see how to scrap the existing branch.\n\nI use git directly:\n\n```\n$ git push <remote> branch_name\n```\nwhere `<remote>` is likely either `origin` or `trac`.\n\n> > Anyways, I'm going to recycle this ticket for k-chordality of a matroid (code to follow shortly, probably tomorrow).\n\n> \n> Will your algorithm check that definition directly? If so, a matroid M of rank >k is k-chordal if and only if  it's rank-k truncation T is, since M and T will have the same collection of length `<= k` circuits:\n>  `T=BasisMatroid(groundset = M.groundset(), nonbases = M.dependent_r_sets(k), rank = k)`  \n> \n> To get all the circuits of length at most k in that truncation T, you could use `T.nonspanning_circuits()`. If the rank is much higher than k, this will be faster than listing all the circuits of the original matroid by `M.circuits()` and scrapping the long ones. \n> \n> If that rank-k truncation T is k-chordal, then how far is T from being binary? Is there a binary matroid B, a matroid N and an element e so that N\\e = T, N/e = B?\n\nTo begin with, I got the sign backwards on the definition of chordality. Sorry about that, I was typing fast and didn't double-check. The terminology comes from graphic matroids, where a graph is called k-chordal if every cycle of length at least k has chord (a graph/matroid is called chordal if it is 4-chordal). My current code just checks the definition directly.\n\nI'm not sure about the relation with binary matroids. Let me think on that.",
    "created_at": "2015-06-20T22:30:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18484#issuecomment-257633",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'>Comment 8:</a>
Replying to [Rudi](#comment%3A7):
> Replying to [@tscrim](#comment%3A6):
> > It's better to not create a new ticket, but instead just push a new branch.
> > 

> I tried, but apparently I was using the wrong command. Just `git trac push 18484` from my new branch was rejected. I did not see how to scrap the existing branch.

I use git directly:

```
$ git push <remote> branch_name
```
where `<remote>` is likely either `origin` or `trac`.

> > Anyways, I'm going to recycle this ticket for k-chordality of a matroid (code to follow shortly, probably tomorrow).

> 
> Will your algorithm check that definition directly? If so, a matroid M of rank >k is k-chordal if and only if  it's rank-k truncation T is, since M and T will have the same collection of length `<= k` circuits:
>  `T=BasisMatroid(groundset = M.groundset(), nonbases = M.dependent_r_sets(k), rank = k)`  
> 
> To get all the circuits of length at most k in that truncation T, you could use `T.nonspanning_circuits()`. If the rank is much higher than k, this will be faster than listing all the circuits of the original matroid by `M.circuits()` and scrapping the long ones. 
> 
> If that rank-k truncation T is k-chordal, then how far is T from being binary? Is there a binary matroid B, a matroid N and an element e so that N\e = T, N/e = B?

To begin with, I got the sign backwards on the definition of chordality. Sorry about that, I was typing fast and didn't double-check. The terminology comes from graphic matroids, where a graph is called k-chordal if every cycle of length at least k has chord (a graph/matroid is called chordal if it is 4-chordal). My current code just checks the definition directly.

I'm not sure about the relation with binary matroids. Let me think on that.



---

archive/issue_comments_257634.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-A matroid is k-chordal if every circuit `C` of size < k has a *chord*, an element `x` of the ground set is a *chord* of `C` if there exists `C = A \\cup B` such that `A \\cup x, B \\cup x` are circuits.\n+A matroid is k-chordal if every circuit `C` of size > k has a *chord*, an element `x` of the ground set is a *chord* of `C` if there exists `C = A \\cup B` such that `A \\cup x, B \\cup x` are circuits.\n``````\n",
    "created_at": "2015-06-20T22:30:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18484#issuecomment-257634",
    "user": "https://github.com/tscrim"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-A matroid is k-chordal if every circuit `C` of size < k has a *chord*, an element `x` of the ground set is a *chord* of `C` if there exists `C = A \cup B` such that `A \cup x, B \cup x` are circuits.
+A matroid is k-chordal if every circuit `C` of size > k has a *chord*, an element `x` of the ground set is a *chord* of `C` if there exists `C = A \cup B` such that `A \cup x, B \cup x` are circuits.
``````




---

archive/issue_comments_257635.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nReplying to [@tscrim](#comment%3A8):\n\n> I'm not sure about the relation with binary matroids. Let me think on that.\n\nThat relation is suggested by having the exact split in A+x and B+x; that is typical of binary matroids. A weaker property would be that each circuit (of length >=k) *spans* an element x not in C: then there must be a proper subset A of C so that A+x is a circuit, and by circuit elimination a subset B of C so that B+x is a circuit and A union B = C. In a binary matroid such A and B are necessarily disjoint, in general matroids this is not necessary.\n\nBinary matroids are chacterized by the fact that if C, C'are circuits, then the symmetric difference of C and C' is the disjoint union of circuits.",
    "created_at": "2015-06-20T23:13:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18484#issuecomment-257635",
    "user": "https://github.com/sagetrac-Rudi"
}
```

<a id='comment:9'>Comment 9:</a>
Replying to [@tscrim](#comment%3A8):

> I'm not sure about the relation with binary matroids. Let me think on that.

That relation is suggested by having the exact split in A+x and B+x; that is typical of binary matroids. A weaker property would be that each circuit (of length >=k) *spans* an element x not in C: then there must be a proper subset A of C so that A+x is a circuit, and by circuit elimination a subset B of C so that B+x is a circuit and A union B = C. In a binary matroid such A and B are necessarily disjoint, in general matroids this is not necessary.

Binary matroids are chacterized by the fact that if C, C'are circuits, then the symmetric difference of C and C' is the disjoint union of circuits.



---

archive/issue_comments_257636.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nHmm...I see why chordality could be a measurement of how close a matroid is to being binary, but it seems like it needs some extra information about the flats. From the symmetric difference property, would that imply that all binary matroids are (4-)chordal? I'm not well versed enough in matroid theory to answer your question about the existence of a binary matroid in [comment:7](#comment%3A7). I'm also happy to talk more off-list about about my interests and learning more matroid theory.\n\nHere's the code and ready for review (only 1 day later than I thought `^^;;` ).\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f9e8633781d3843c59d8b89e333b1844c090880\">6f9e863</a></td><td><code>Implemented checks for matroid chordality.</code></td></tr></table>\n",
    "created_at": "2015-06-23T07:17:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18484#issuecomment-257636",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'>Comment 10:</a>
Hmm...I see why chordality could be a measurement of how close a matroid is to being binary, but it seems like it needs some extra information about the flats. From the symmetric difference property, would that imply that all binary matroids are (4-)chordal? I'm not well versed enough in matroid theory to answer your question about the existence of a binary matroid in [comment:7](#comment%3A7). I'm also happy to talk more off-list about about my interests and learning more matroid theory.

Here's the code and ready for review (only 1 day later than I thought `^^;;` ).

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f9e8633781d3843c59d8b89e333b1844c090880">6f9e863</a></td><td><code>Implemented checks for matroid chordality.</code></td></tr></table>




---

archive/issue_comments_257637.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-A matroid is k-chordal if every circuit `C` of size > k has a *chord*, an element `x` of the ground set is a *chord* of `C` if there exists `C = A \\cup B` such that `A \\cup x, B \\cup x` are circuits.\n+A matroid is k-chordal if every circuit `C` of size >= k has a *chord*, an element `x` of the ground set is a *chord* of `C` if there exists `C = A \\sqcup B` such that `A \\cup x, B \\cup x` are circuits. Matroids that are 4-chordal are simply called chordal.\n``````\n",
    "created_at": "2015-06-23T07:17:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18484#issuecomment-257637",
    "user": "https://github.com/tscrim"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-A matroid is k-chordal if every circuit `C` of size > k has a *chord*, an element `x` of the ground set is a *chord* of `C` if there exists `C = A \cup B` such that `A \cup x, B \cup x` are circuits.
+A matroid is k-chordal if every circuit `C` of size >= k has a *chord*, an element `x` of the ground set is a *chord* of `C` if there exists `C = A \sqcup B` such that `A \cup x, B \cup x` are circuits. Matroids that are 4-chordal are simply called chordal.
``````




---

archive/issue_events_236058.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-06-23T07:17:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18484#event-236058"
}
```



---

archive/issue_comments_257638.json:
```json
{
    "body": "Branch: **[public/matroids/k_chordal-18484](https://github.com/sagemath/sagetrac-mirror/tree/public/matroids/k_chordal-18484)**",
    "created_at": "2015-06-23T07:17:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18484#issuecomment-257638",
    "user": "https://github.com/tscrim"
}
```

Branch: **[public/matroids/k_chordal-18484](https://github.com/sagemath/sagetrac-mirror/tree/public/matroids/k_chordal-18484)**



---

archive/issue_comments_257639.json:
```json
{
    "body": "Commit: **[6f9e863](https://github.com/sagemath/sagetrac-mirror/commit/6f9e8633781d3843c59d8b89e333b1844c090880)**",
    "created_at": "2015-06-23T07:17:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18484#issuecomment-257639",
    "user": "https://github.com/tscrim"
}
```

Commit: **[6f9e863](https://github.com/sagemath/sagetrac-mirror/commit/6f9e8633781d3843c59d8b89e333b1844c090880)**



---

archive/issue_comments_257640.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nReplying to [@tscrim](#comment%3A10):\n> Hmm...I see why chordality could be a measurement of how close a matroid is to being binary, but it seems like it needs some extra information about the flats. From the symmetric difference property, would that imply that all binary matroids are (4-)chordal?\n\nNo, just that if `M` is binary and `C` is a circuit of `M`, then `x\\not\\in C` is a chord of `C` if and only if `x` is spanned by `C`. So from that perspective, you could define weak chordality in terms of each `C` spanning an element outside `C`, and ordinary chordality as you did. The two notions coincide for binary matroids. \n\nI came across this paper by Joe Bonin in which he defines the same weaker notion of chordality, using slightly different words (def. 7): http://home.gwu.edu/~jbonin/wheelsweb.pdf\n\n\n> I'm not well versed enough in matroid theory to answer your question about the existence of a binary matroid in [comment:7](#comment%3A7). I'm also happy to talk more off-list about about my interests and learning more matroid theory.\n> \n> Here's the code and ready for review (only 1 day later than I thought `^^;;` ).\n\nI'll review it.",
    "created_at": "2015-06-23T07:48:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18484#issuecomment-257640",
    "user": "https://github.com/sagetrac-Rudi"
}
```

<a id='comment:11'>Comment 11:</a>
Replying to [@tscrim](#comment%3A10):
> Hmm...I see why chordality could be a measurement of how close a matroid is to being binary, but it seems like it needs some extra information about the flats. From the symmetric difference property, would that imply that all binary matroids are (4-)chordal?

No, just that if `M` is binary and `C` is a circuit of `M`, then `x\not\in C` is a chord of `C` if and only if `x` is spanned by `C`. So from that perspective, you could define weak chordality in terms of each `C` spanning an element outside `C`, and ordinary chordality as you did. The two notions coincide for binary matroids. 

I came across this paper by Joe Bonin in which he defines the same weaker notion of chordality, using slightly different words (def. 7): http://home.gwu.edu/~jbonin/wheelsweb.pdf


> I'm not well versed enough in matroid theory to answer your question about the existence of a binary matroid in [comment:7](#comment%3A7). I'm also happy to talk more off-list about about my interests and learning more matroid theory.
> 
> Here's the code and ready for review (only 1 day later than I thought `^^;;` ).

I'll review it.



---

archive/issue_events_236059.json:
```json
{
    "actor": "https://github.com/sagetrac-Rudi",
    "created_at": "2015-06-23T08:54:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18484#event-236059"
}
```



---

archive/issue_events_236060.json:
```json
{
    "actor": "https://github.com/sagetrac-Rudi",
    "created_at": "2015-06-23T08:54:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18484#event-236060"
}
```



---

archive/issue_comments_257641.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nHi Travis,\n\nCode compiles, doctests run. No trailing whitespace anywhere :)\n\nYour code looks mathematically correct to me, but I have not ran tests.\n\nI asked for info because I think your _circuit_chordal works very hard to get an answer:\n\n```\n        for x in self.groundset():\n            if x in C:\n                continue\n            for i in xrange(len(C)):\n                for p in combinations(C, i): # p is a list\n                    if (frozenset(p + (x,)) in circuits\n                                and C.difference(p).union([x]) in circuits):\n                        return True\n```\nThe following will accomplish the same without testing all subsets of C:\n\n```\n        X = set(C)\n        e  = X.pop() \n        for x in self._closure(X)-C: # cl(X)=cl(C), and to be a chord x must be spanned by C\n            Ax = self._circuit(X.union([x])) \n            Bx = C.difference(Ax).union([x])\n            if self._is_circuit(Bx):\n                return True # if x is spanned by C, then A+x is the unique circuit in C-e+x; so x is a chord iff the complementary B is a circuit.\n```\nI expect that is_circuit will be faster than checking membership of circuits (since there are very many circuits in general) but that could perhaps be tested. Do you have a large chordal graph lying around?\n\nEfficiency will not be a reason to not give that positive review. So let me know if you want to change your code. If not, I'll proceed to doing some tests.",
    "created_at": "2015-06-23T08:54:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18484#issuecomment-257641",
    "user": "https://github.com/sagetrac-Rudi"
}
```

<a id='comment:12'>Comment 12:</a>
Hi Travis,

Code compiles, doctests run. No trailing whitespace anywhere :)

Your code looks mathematically correct to me, but I have not ran tests.

I asked for info because I think your _circuit_chordal works very hard to get an answer:

```
        for x in self.groundset():
            if x in C:
                continue
            for i in xrange(len(C)):
                for p in combinations(C, i): # p is a list
                    if (frozenset(p + (x,)) in circuits
                                and C.difference(p).union([x]) in circuits):
                        return True
```
The following will accomplish the same without testing all subsets of C:

```
        X = set(C)
        e  = X.pop() 
        for x in self._closure(X)-C: # cl(X)=cl(C), and to be a chord x must be spanned by C
            Ax = self._circuit(X.union([x])) 
            Bx = C.difference(Ax).union([x])
            if self._is_circuit(Bx):
                return True # if x is spanned by C, then A+x is the unique circuit in C-e+x; so x is a chord iff the complementary B is a circuit.
```
I expect that is_circuit will be faster than checking membership of circuits (since there are very many circuits in general) but that could perhaps be tested. Do you have a large chordal graph lying around?

Efficiency will not be a reason to not give that positive review. So let me know if you want to change your code. If not, I'll proceed to doing some tests.



---

archive/issue_comments_257642.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nReplying to [Rudi](#comment%3A12):\n\n> ```\n>         X = set(C)\n>         e  = X.pop() \n>         for x in self._closure(X)-C: # cl(X)=cl(C), and to be a chord x must be spanned by C\n>             Ax = self._circuit(X.union([x])) \n>             Bx = C.difference(Ax).union([x])\n>             if self._is_circuit(Bx):\n>                 return True # if x is spanned by C, then A+x is the unique circuit in C-e+x; so x is a chord iff the complementary B is a circuit.\n> ```\n> I expect that is_circuit will be faster than checking membership of circuits (since there are very many circuits in general) but that could perhaps be tested. \n\nNow that i think about it again, testing `not self._is_independent(Bx)` will do, since Bx cannot properly contain a circuit D. Otherwise, (D+Ax)-x would contain a circuit properly contained in C, contradiction. So you do not need the set `circuits` in there.",
    "created_at": "2015-06-23T09:13:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18484#issuecomment-257642",
    "user": "https://github.com/sagetrac-Rudi"
}
```

<a id='comment:13'>Comment 13:</a>
Replying to [Rudi](#comment%3A12):

> ```
>         X = set(C)
>         e  = X.pop() 
>         for x in self._closure(X)-C: # cl(X)=cl(C), and to be a chord x must be spanned by C
>             Ax = self._circuit(X.union([x])) 
>             Bx = C.difference(Ax).union([x])
>             if self._is_circuit(Bx):
>                 return True # if x is spanned by C, then A+x is the unique circuit in C-e+x; so x is a chord iff the complementary B is a circuit.
> ```
> I expect that is_circuit will be faster than checking membership of circuits (since there are very many circuits in general) but that could perhaps be tested. 

Now that i think about it again, testing `not self._is_independent(Bx)` will do, since Bx cannot properly contain a circuit D. Otherwise, (D+Ax)-x would contain a circuit properly contained in C, contradiction. So you do not need the set `circuits` in there.



---

archive/issue_comments_257643.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nHere's how you can generate large chordal matroids:\n\n```\nsage: W = WeylGroup(['A',5])   # increase this integer\nsage: w0 = W.long_element()\nsage: mat = matrix([x.to_vector() for x in w0.inversions(inversion_type='roots')])\nsage: M = Matroid(mat.transpose())\nsage: M.chordality()\n4\n```\nIt's a theorem (I think due to Stanley, but I could be wrong) that all inversion arrangements of root systems of type A are chordal.\n\nI have seen that Bonin paper, however his notion of k-chordal is opposite of what I'm interested in (and actually the original definition I gave) and does not (generally) recover the original notion of chordal. However if we add an upper bound parameter, we can support Bonin's definition as well. I will add this.\n\nI'm not quite sure what you mean by this:\n\n> Efficiency will not be a reason to not give that positive review.\n\nI'd take the code which is more efficient. However I think checking for a frozenset being in the *frozenset* `circuits` as containment is (amortized) O(1) and we have to generate all circuits anyways...well at least for `chordality`. I'm not sure that testing for closures would be faster as circuits are generally relatively small. Will you be running timings between the two codes or do you want me to?",
    "created_at": "2015-06-23T16:24:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18484#issuecomment-257643",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:14'>Comment 14:</a>
Here's how you can generate large chordal matroids:

```
sage: W = WeylGroup(['A',5])   # increase this integer
sage: w0 = W.long_element()
sage: mat = matrix([x.to_vector() for x in w0.inversions(inversion_type='roots')])
sage: M = Matroid(mat.transpose())
sage: M.chordality()
4
```
It's a theorem (I think due to Stanley, but I could be wrong) that all inversion arrangements of root systems of type A are chordal.

I have seen that Bonin paper, however his notion of k-chordal is opposite of what I'm interested in (and actually the original definition I gave) and does not (generally) recover the original notion of chordal. However if we add an upper bound parameter, we can support Bonin's definition as well. I will add this.

I'm not quite sure what you mean by this:

> Efficiency will not be a reason to not give that positive review.

I'd take the code which is more efficient. However I think checking for a frozenset being in the *frozenset* `circuits` as containment is (amortized) O(1) and we have to generate all circuits anyways...well at least for `chordality`. I'm not sure that testing for closures would be faster as circuits are generally relatively small. Will you be running timings between the two codes or do you want me to?



---

archive/issue_comments_257644.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nReplying to [@tscrim](#comment%3A14):\n\n> I'm not quite sure what you mean by this:\n> \n> > Efficiency will not be a reason to not give that positive review.\n\n>\n\nI just meant to say that I will not demand optimal efficiency as necessary for a positive review. Making code correct first and efficient later is a fine way to go. So I will accept code as long as it is correct. \n \n> I'd take the code which is more efficient. However I think checking for a frozenset being in the *frozenset* `circuits` as containment is (amortized) O(1) and we have to generate all circuits anyways...well at least for `chordality`.\n\nGenerating all the circuits will be the most time-consuming part of chordality() and is_k_chordal(), I agree. From that perspective, tweaking _is_circuit_chordal() is not going to matter much for the efficiency. \n\n>I'm not sure that testing for closures would be faster as circuits are generally relatively small. Will you be running timings between the two codes or do you want me to?\n\nYou do get some improvement. Your code:\n\n```\nsage: from sage.matroids.advanced import *\nsage: M = BinaryMatroid(graphs.CompleteGraph(8).incidence_matrix())\nsage: %time M.is_k_chordal()\nCPU times: user 806 ms, sys: 2.86 ms, total: 809 ms\nWall time: 809 ms\nTrue\n``` \nWith my tweaks:\n\n```\nsage: %time M.is_k_chordal()\nCPU times: user 453 ms, sys: 3.82 ms, total: 457 ms\nWall time: 458 ms\nTrue\nsage: %time M.circuits()\nCPU times: user 359 ms, sys: 1.3 ms, total: 360 ms\nWall time: 361 ms\nIterator over a system of subsets\n```\nSo not counting the time spent on computing the circuits, the speedup is 4,5x on this example.\n\nWith the example you sent, computing circuits completely dominates the running time. The effect on the overall running time is essentially zero.\n\nI leave it to you. I'm convinced by now of correctness, and you can set a positive review for this version if you want. If you want to make changes, I'll take another look later.",
    "created_at": "2015-06-23T18:31:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18484#issuecomment-257644",
    "user": "https://github.com/sagetrac-Rudi"
}
```

<a id='comment:15'>Comment 15:</a>
Replying to [@tscrim](#comment%3A14):

> I'm not quite sure what you mean by this:
> 
> > Efficiency will not be a reason to not give that positive review.

>

I just meant to say that I will not demand optimal efficiency as necessary for a positive review. Making code correct first and efficient later is a fine way to go. So I will accept code as long as it is correct. 
 
> I'd take the code which is more efficient. However I think checking for a frozenset being in the *frozenset* `circuits` as containment is (amortized) O(1) and we have to generate all circuits anyways...well at least for `chordality`.

Generating all the circuits will be the most time-consuming part of chordality() and is_k_chordal(), I agree. From that perspective, tweaking _is_circuit_chordal() is not going to matter much for the efficiency. 

>I'm not sure that testing for closures would be faster as circuits are generally relatively small. Will you be running timings between the two codes or do you want me to?

You do get some improvement. Your code:

```
sage: from sage.matroids.advanced import *
sage: M = BinaryMatroid(graphs.CompleteGraph(8).incidence_matrix())
sage: %time M.is_k_chordal()
CPU times: user 806 ms, sys: 2.86 ms, total: 809 ms
Wall time: 809 ms
True
``` 
With my tweaks:

```
sage: %time M.is_k_chordal()
CPU times: user 453 ms, sys: 3.82 ms, total: 457 ms
Wall time: 458 ms
True
sage: %time M.circuits()
CPU times: user 359 ms, sys: 1.3 ms, total: 360 ms
Wall time: 361 ms
Iterator over a system of subsets
```
So not counting the time spent on computing the circuits, the speedup is 4,5x on this example.

With the example you sent, computing circuits completely dominates the running time. The effect on the overall running time is essentially zero.

I leave it to you. I'm convinced by now of correctness, and you can set a positive review for this version if you want. If you want to make changes, I'll take another look later.



---

archive/issue_comments_257645.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/432b9792d512a9531427058a50b279ed19c35be6\">432b979</a></td><td><code>Implementing a faster version and more general versions of chordality.</code></td></tr></table>\n",
    "created_at": "2015-06-23T19:52:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18484#issuecomment-257645",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:16'>Comment 16:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/432b9792d512a9531427058a50b279ed19c35be6">432b979</a></td><td><code>Implementing a faster version and more general versions of chordality.</code></td></tr></table>




---

archive/issue_comments_257646.json:
```json
{
    "body": "Changed commit from **[6f9e863](https://github.com/sagemath/sagetrac-mirror/commit/6f9e8633781d3843c59d8b89e333b1844c090880)** to **[432b979](https://github.com/sagemath/sagetrac-mirror/commit/432b9792d512a9531427058a50b279ed19c35be6)**",
    "created_at": "2015-06-23T19:52:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18484#issuecomment-257646",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6f9e863](https://github.com/sagemath/sagetrac-mirror/commit/6f9e8633781d3843c59d8b89e333b1844c090880)** to **[432b979](https://github.com/sagemath/sagetrac-mirror/commit/432b9792d512a9531427058a50b279ed19c35be6)**



---

archive/issue_comments_257647.json:
```json
{
    "body": "Changed commit from **[432b979](https://github.com/sagemath/sagetrac-mirror/commit/432b9792d512a9531427058a50b279ed19c35be6)** to **[2dbd6b3](https://github.com/sagemath/sagetrac-mirror/commit/2dbd6b39eaf31dbe29c657e055abb194c2230a34)**",
    "created_at": "2015-06-23T19:55:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18484#issuecomment-257647",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[432b979](https://github.com/sagemath/sagetrac-mirror/commit/432b9792d512a9531427058a50b279ed19c35be6)** to **[2dbd6b3](https://github.com/sagemath/sagetrac-mirror/commit/2dbd6b39eaf31dbe29c657e055abb194c2230a34)**



---

archive/issue_comments_257648.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2dbd6b39eaf31dbe29c657e055abb194c2230a34\">2dbd6b3</a></td><td><code>Implementing a faster version and more general versions of chordality.</code></td></tr></table>\n",
    "created_at": "2015-06-23T19:55:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18484#issuecomment-257648",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:17'>Comment 17:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2dbd6b39eaf31dbe29c657e055abb194c2230a34">2dbd6b3</a></td><td><code>Implementing a faster version and more general versions of chordality.</code></td></tr></table>




---

archive/issue_comments_257649.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nThat is quite a speedup (I guess iterating over the powersets is slow in comparison); so I've incorporated that into this ticket. I've also changed `is_k_chordal` to simply `is_chordal` with other options for specifying what type of chordality the user wants to check (including the `[k1, k2]` chordality of the Bonin paper).\n\nThanks for the testing and reviewing.",
    "created_at": "2015-06-23T19:56:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18484#issuecomment-257649",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:18'>Comment 18:</a>
That is quite a speedup (I guess iterating over the powersets is slow in comparison); so I've incorporated that into this ticket. I've also changed `is_k_chordal` to simply `is_chordal` with other options for specifying what type of chordality the user wants to check (including the `[k1, k2]` chordality of the Bonin paper).

Thanks for the testing and reviewing.



---

archive/issue_events_236061.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-06-23T19:56:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18484#event-236061"
}
```



---

archive/issue_events_236062.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-06-23T19:56:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18484#event-236062"
}
```



---

archive/issue_comments_257650.json:
```json
{
    "body": "Reviewer: **Rudi Pendavingh**",
    "created_at": "2015-06-23T21:53:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18484#issuecomment-257650",
    "user": "https://github.com/sagetrac-Rudi"
}
```

Reviewer: **Rudi Pendavingh**



---

archive/issue_comments_257651.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nLooks good, just one thing.  In _is_circuit_chordal these two now unused variables are defined:\n\n```\n        cdef tuple p\n        cdef int i\n```\nWhen they are gone, positive review.",
    "created_at": "2015-06-23T21:53:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18484#issuecomment-257651",
    "user": "https://github.com/sagetrac-Rudi"
}
```

<a id='comment:19'>Comment 19:</a>
Looks good, just one thing.  In _is_circuit_chordal these two now unused variables are defined:

```
        cdef tuple p
        cdef int i
```
When they are gone, positive review.



---

archive/issue_comments_257652.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cd4bce238ace777246392df070c0b98e6a1d9125\">cd4bce2</a></td><td><code>Removed unused variables.</code></td></tr></table>\n",
    "created_at": "2015-06-23T22:18:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18484#issuecomment-257652",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:20'>Comment 20:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cd4bce238ace777246392df070c0b98e6a1d9125">cd4bce2</a></td><td><code>Removed unused variables.</code></td></tr></table>




---

archive/issue_comments_257653.json:
```json
{
    "body": "Changed commit from **[2dbd6b3](https://github.com/sagemath/sagetrac-mirror/commit/2dbd6b39eaf31dbe29c657e055abb194c2230a34)** to **[cd4bce2](https://github.com/sagemath/sagetrac-mirror/commit/cd4bce238ace777246392df070c0b98e6a1d9125)**",
    "created_at": "2015-06-23T22:18:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18484#issuecomment-257653",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2dbd6b3](https://github.com/sagemath/sagetrac-mirror/commit/2dbd6b39eaf31dbe29c657e055abb194c2230a34)** to **[cd4bce2](https://github.com/sagemath/sagetrac-mirror/commit/cd4bce238ace777246392df070c0b98e6a1d9125)**



---

archive/issue_comments_257654.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nThank you for doing the review!",
    "created_at": "2015-06-23T22:20:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18484#issuecomment-257654",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:21'>Comment 21:</a>
Thank you for doing the review!



---

archive/issue_events_236063.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-06-23T22:20:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18484#event-236063"
}
```



---

archive/issue_events_236064.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-06-23T22:20:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18484#event-236064"
}
```



---

archive/issue_comments_257655.json:
```json
{
    "body": "Changed branch from **[public/matroids/k_chordal-18484](https://github.com/sagemath/sagetrac-mirror/tree/public/matroids/k_chordal-18484)** to **[cd4bce2](https://github.com/sagemath/sagetrac-mirror/commit/cd4bce238ace777246392df070c0b98e6a1d9125)**",
    "created_at": "2015-06-24T20:11:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18484#issuecomment-257655",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/matroids/k_chordal-18484](https://github.com/sagemath/sagetrac-mirror/tree/public/matroids/k_chordal-18484)** to **[cd4bce2](https://github.com/sagemath/sagetrac-mirror/commit/cd4bce238ace777246392df070c0b98e6a1d9125)**



---

archive/issue_events_236065.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-06-24T20:11:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18484#event-236065"
}
```



---

archive/issue_events_236066.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "eff18864964fc743e0d6734197797042ec3a65f0",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-06-24T20:11:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/18484",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18484#event-236066"
}
```
