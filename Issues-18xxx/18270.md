# Issue 18270: Print matrices using unicode large delimiters (on demand)

archive/issues_018033.json:
```json
{
    "body": "Unicode provides nice symbols which can be combined to form large delimiters. It would be nice if we could print matrices using these, instead of the same ASCII brackets on all the lines. So instead of\n\n```\n[1 2|3]\n[4 5|6]\n[7 8|9]\n```\n\nI'd like to see one of these:\n\n```\n\u239b1 2\u25023\u239e    \u23a11 2\u25023\u23a4\n\u239c4 5\u25026\u239f or \u23a24 5\u25026\u23a5\n\u239d7 8\u25029\u23a0    \u23a37 8\u25029\u23a6\n```\n\nPerhaps it's best to do this in small increments: start with a keyword argument to the `str` method of matrices, then later on make this the default. So the ticket here is only for on-demand support of this feature, not for its automatic use by default. For later reference, see #14733 which switched the banner to Unicode, and thereby made the choice that Sage may look broken on non-Unicode terminals.\n\nKeywords: unicode matrix\n\nBranch/Commit: 6b6f089590377c61061bc4629e44adb47da6a0e1\n\nReviewer: Volker Braun\n\nAuthor: Martin von Gagern\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/18270\n\n",
    "closed_at": "2015-05-06T21:03:24Z",
    "created_at": "2015-04-21T16:53:55Z",
    "labels": [
        "component: user interface"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.7",
    "title": "Print matrices using unicode large delimiters (on demand)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18270",
    "user": "https://github.com/gagern"
}
```
Unicode provides nice symbols which can be combined to form large delimiters. It would be nice if we could print matrices using these, instead of the same ASCII brackets on all the lines. So instead of

```
[1 2|3]
[4 5|6]
[7 8|9]
```

I'd like to see one of these:

```
⎛1 2│3⎞    ⎡1 2│3⎤
⎜4 5│6⎟ or ⎢4 5│6⎥
⎝7 8│9⎠    ⎣7 8│9⎦
```

Perhaps it's best to do this in small increments: start with a keyword argument to the `str` method of matrices, then later on make this the default. So the ticket here is only for on-demand support of this feature, not for its automatic use by default. For later reference, see #14733 which switched the banner to Unicode, and thereby made the choice that Sage may look broken on non-Unicode terminals.

Keywords: unicode matrix

Branch/Commit: 6b6f089590377c61061bc4629e44adb47da6a0e1

Reviewer: Volker Braun

Author: Martin von Gagern

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/18270





---

archive/issue_comments_317169.json:
```json
{
    "body": "Changing branch from \"\" to \"u/gagern/MatrixUnicodeDelimiters\"",
    "created_at": "2015-04-21T16:56:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18270#issuecomment-317169",
    "user": "https://github.com/gagern"
}
```

Changing branch from "" to "u/gagern/MatrixUnicodeDelimiters"



---

archive/issue_comments_317170.json:
```json
{
    "body": "<a id='comment:2'></a>\nNew commits:\n|                                                                                                                                          |                                                                       |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------|\n|[e174830](http://git.sagemath.org/sage.git/commit/?id=e174830facfed57934dec14cf107ffd6952955b5)|`Trac #18270: Introduce unicode_symbols keyword argument to Matrix.str`|",
    "created_at": "2015-04-21T16:56:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18270#issuecomment-317170",
    "user": "https://github.com/gagern"
}
```

<a id='comment:2'></a>
New commits:
|                                                                                                                                          |                                                                       |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------|
|[e174830](http://git.sagemath.org/sage.git/commit/?id=e174830facfed57934dec14cf107ffd6952955b5)|`Trac #18270: Introduce unicode_symbols keyword argument to Matrix.str`|



---

archive/issue_comments_317171.json:
```json
{
    "body": "Changing commit from \"\" to \"e174830facfed57934dec14cf107ffd6952955b5\"",
    "created_at": "2015-04-21T16:56:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18270#issuecomment-317171",
    "user": "https://github.com/gagern"
}
```

Changing commit from "" to "e174830facfed57934dec14cf107ffd6952955b5"



---

archive/issue_comments_317172.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-04-21T16:56:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18270#issuecomment-317172",
    "user": "https://github.com/gagern"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_317173.json:
```json
{
    "body": "<a id='comment:3'></a>\nThis banner is already a mess. If I ssh + screen + sage at my laboratory, then I got a ugly\n\n```\n\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\n```\nAnd then I am not able to see anything else (but still inputting Sage commands work).\n\nThe new matrices look nice though. For the on-demand feature it would be nice to have a global flag allowing (or avoiding) unicode\n\n```\n$ sage --with-no-unicode\n```\n\nVincent",
    "created_at": "2015-04-21T17:14:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18270#issuecomment-317173",
    "user": "https://github.com/videlec"
}
```

<a id='comment:3'></a>
This banner is already a mess. If I ssh + screen + sage at my laboratory, then I got a ugly

```
�����������������������������������
```
And then I am not able to see anything else (but still inputting Sage commands work).

The new matrices look nice though. For the on-demand feature it would be nice to have a global flag allowing (or avoiding) unicode

```
$ sage --with-no-unicode
```

Vincent



---

archive/issue_comments_317174.json:
```json
{
    "body": "<a id='comment:4'></a>\nWhy not only `unicode` for the argument name?",
    "created_at": "2015-04-21T17:14:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18270#issuecomment-317174",
    "user": "https://github.com/videlec"
}
```

<a id='comment:4'></a>
Why not only `unicode` for the argument name?



---

archive/issue_comments_317175.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [vdelecroix](#comment%3A4):\n> Why not only `unicode` for the argument name?\n\n\nBecause in Python 2 `unicode` names a type as well, and I feared that at some point we might want to convert element types to unicode, thus have to call that coercion function.",
    "created_at": "2015-04-21T18:15:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18270#issuecomment-317175",
    "user": "https://github.com/gagern"
}
```

<a id='comment:5'></a>
Replying to [vdelecroix](#comment%3A4):
> Why not only `unicode` for the argument name?


Because in Python 2 `unicode` names a type as well, and I feared that at some point we might want to convert element types to unicode, thus have to call that coercion function.



---

archive/issue_comments_317176.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [vdelecroix](#comment%3A3):\n> This banner is already a mess. If I ssh + screen + sage at my laboratory, \u2026\n\n\nPerhaps you should file that as a bug, so it can be addressed? Does using `screen -U` help? What does `locale` print on your client's terminal, inside the `ssh` and inside `screen` respectively?\n\n> For the on-demand feature\n\n\nI meant \u201con-demand\u201d as opposed to \u201cautomatic\u201d, with the demand being expressed for each matrix that gets printed, i.e. by using the keyword argument from my commit. I believe you're talking about something far more automatic here.\n\n> it would be nice to have a global flag allowing (or avoiding) unicode\n\n\nThe canonical way, at least on Linux, would be to inspect `LC_CTYPE` facet of the current locale, and detect whether that refers to UTF8 or not. If one used this to automatically choose a sane default, then setting the `LC_CTYPE` environment variable manually would serve the same function as the switch you suggest:\n\n```\n$ LC_CTYPE=en_US      sage  # without unicode\n$ LC_CTYPE=en_US.utf8 sage  # with unicode\n```\n\nOf course, using `en_US` in this example is just the common default. I guess you as well as I might be using a different setting there in practice. Adding a switch might still make sense to add visibility to this feature. But all of this should probably be discussed in a follow-up ticket once we get the change here accepted.",
    "created_at": "2015-04-22T00:00:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18270#issuecomment-317176",
    "user": "https://github.com/gagern"
}
```

<a id='comment:6'></a>
Replying to [vdelecroix](#comment%3A3):
> This banner is already a mess. If I ssh + screen + sage at my laboratory, …


Perhaps you should file that as a bug, so it can be addressed? Does using `screen -U` help? What does `locale` print on your client's terminal, inside the `ssh` and inside `screen` respectively?

> For the on-demand feature


I meant “on-demand” as opposed to “automatic”, with the demand being expressed for each matrix that gets printed, i.e. by using the keyword argument from my commit. I believe you're talking about something far more automatic here.

> it would be nice to have a global flag allowing (or avoiding) unicode


The canonical way, at least on Linux, would be to inspect `LC_CTYPE` facet of the current locale, and detect whether that refers to UTF8 or not. If one used this to automatically choose a sane default, then setting the `LC_CTYPE` environment variable manually would serve the same function as the switch you suggest:

```
$ LC_CTYPE=en_US      sage  # without unicode
$ LC_CTYPE=en_US.utf8 sage  # with unicode
```

Of course, using `en_US` in this example is just the common default. I guess you as well as I might be using a different setting there in practice. Adding a switch might still make sense to add visibility to this feature. But all of this should probably be discussed in a follow-up ticket once we get the change here accepted.



---

archive/issue_comments_317177.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [gagern](#comment%3A6):\n> Replying to [vdelecroix](#comment%3A3):\n> > This banner is already a mess. If I ssh + screen + sage at my laboratory, \u2026\n\n> \n> Perhaps you should file that as a bug, so it can be addressed? Does using `screen -U` help? What does `locale` print on your client's terminal, inside the `ssh` and inside `screen` respectively?\n\n\nIndeed, `screen -U` solves the problem. My locale on the client is\n\n```\nLANG=en_GB.UTF-8\nLANGUAGE=en_GB:en\nLC_CTYPE=\"en_GB.UTF-8\"\n...\n```\nand on the remote is\n\n```\nLANG=C\nLANGUAGE=fr_FR:\nLC_CTYPE=\"C\"\n...\n```\n\n> > For the on-demand feature\n\n> \n> I meant \u201con-demand\u201d as opposed to \u201cautomatic\u201d, with the demand being expressed for each matrix that gets printed, i.e. by using the keyword argument from my commit. I believe you're talking about something far more automatic here.\n> \n> > it would be nice to have a global flag allowing (or avoiding) unicode\n\n> \n> The canonical way, at least on Linux, would be to inspect `LC_CTYPE` facet of the current locale, and detect whether that refers to UTF8 or not. If one used this to automatically choose a sane default, then setting the `LC_CTYPE` environment variable manually would serve the same function as the switch you suggest:\n> \n> \n> ```\n> $ LC_CTYPE=en_US      sage  # without unicode\n> $ LC_CTYPE=en_US.utf8 sage  # with unicode\n> ```\n> \n> Of course, using `en_US` in this example is just the common default. I guess you as well as I might be using a different setting there in practice. Adding a switch might still make sense to add visibility to this feature. But all of this should probably be discussed in a follow-up ticket once we get the change here accepted.\n\n\nI like your suggestion very much.\n\nVincent",
    "created_at": "2015-04-22T06:04:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18270#issuecomment-317177",
    "user": "https://github.com/videlec"
}
```

<a id='comment:7'></a>
Replying to [gagern](#comment%3A6):
> Replying to [vdelecroix](#comment%3A3):
> > This banner is already a mess. If I ssh + screen + sage at my laboratory, …

> 
> Perhaps you should file that as a bug, so it can be addressed? Does using `screen -U` help? What does `locale` print on your client's terminal, inside the `ssh` and inside `screen` respectively?


Indeed, `screen -U` solves the problem. My locale on the client is

```
LANG=en_GB.UTF-8
LANGUAGE=en_GB:en
LC_CTYPE="en_GB.UTF-8"
...
```
and on the remote is

```
LANG=C
LANGUAGE=fr_FR:
LC_CTYPE="C"
...
```

> > For the on-demand feature

> 
> I meant “on-demand” as opposed to “automatic”, with the demand being expressed for each matrix that gets printed, i.e. by using the keyword argument from my commit. I believe you're talking about something far more automatic here.
> 
> > it would be nice to have a global flag allowing (or avoiding) unicode

> 
> The canonical way, at least on Linux, would be to inspect `LC_CTYPE` facet of the current locale, and detect whether that refers to UTF8 or not. If one used this to automatically choose a sane default, then setting the `LC_CTYPE` environment variable manually would serve the same function as the switch you suggest:
> 
> 
> ```
> $ LC_CTYPE=en_US      sage  # without unicode
> $ LC_CTYPE=en_US.utf8 sage  # with unicode
> ```
> 
> Of course, using `en_US` in this example is just the common default. I guess you as well as I might be using a different setting there in practice. Adding a switch might still make sense to add visibility to this feature. But all of this should probably be discussed in a follow-up ticket once we get the change here accepted.


I like your suggestion very much.

Vincent



---

archive/issue_comments_317178.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-04-22T06:51:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18270#issuecomment-317178",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_317179.json:
```json
{
    "body": "<a id='comment:8'></a>\nreview comment:\n- I would very much prefer that you avoid `replace` as well as the final step which deals with the top and bottom line. You should rather define **all** the characters needed as variables at the begining (as you did for `left_bracket`, `right_bracket`, etc). That would help for readability and if at some point we decide that all these characters are arguments of the function.\n- why not curly bracket?\n\nVincent",
    "created_at": "2015-04-22T06:51:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18270#issuecomment-317179",
    "user": "https://github.com/videlec"
}
```

<a id='comment:8'></a>
review comment:
- I would very much prefer that you avoid `replace` as well as the final step which deals with the top and bottom line. You should rather define **all** the characters needed as variables at the begining (as you did for `left_bracket`, `right_bracket`, etc). That would help for readability and if at some point we decide that all these characters are arguments of the function.
- why not curly bracket?

Vincent



---

archive/issue_comments_317180.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [vdelecroix](#comment%3A8):\n> review comment:\n> - I would very much prefer that you avoid `replace` as well as the final step which deals with the top and bottom line. You should rather define **all** the characters needed as variables at the begining (as you did for `left_bracket`, `right_bracket`, etc). That would help for readability and if at some point we decide that all these characters are arguments of the function.\n\n\nIndeed when I started this patch, I had a line like\n\n     top_left_bracket, mid_left_bracket, \u2026 = u\"\u23a1\u23a2\u23a3\u23a4\u23a5\u23a6\"\n\nbut the long names made things very hard to read. And shorter alternatives, like `tlb`, make things a bit hard to understand and therefore harder to maintain. Quite the opposite of \u201chelp for readability\u201d, in my opinion. But if you insist, I can go with this approach, using the short names.\n\nKeep in mind that the `left_bracket` and `right_bracket` strings, which have been there before, are not only representing the brackets, but also collecting the vertical lines at the ends.\n\nPlugging the delimiting brackets in the right rows is a non-trivial affair, and would therefore in my opinion be far harder to maintain. The possibility of an arbitrary number of horizontal lines at either end complicates things considerably. I haven't been able to come up with a reasonably simple code snippet to achieve correct symbols automatically while building these strings. So unless you *absolutely* insist on this point, or can give a good reason on why my approach has very undesirable reprecussions, or can suggest some formulation, I'd rather stick with my approach. Or adjust it in such a way that it assembles the matrix body without any brackets, and then adds all the bracket parts in a single loop instead of replacing existing incorrect parts.\n\n> - why not curly bracket?\n\n\nBecause I don't encounter them in my day-to-day work. Can you give me a hint as to where these might occur? For an even number of rows (except two), big curly brackets would look slightly unsymmetric, but I doubt that should be a concern.",
    "created_at": "2015-04-22T07:09:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18270#issuecomment-317180",
    "user": "https://github.com/gagern"
}
```

<a id='comment:9'></a>
Replying to [vdelecroix](#comment%3A8):
> review comment:
> - I would very much prefer that you avoid `replace` as well as the final step which deals with the top and bottom line. You should rather define **all** the characters needed as variables at the begining (as you did for `left_bracket`, `right_bracket`, etc). That would help for readability and if at some point we decide that all these characters are arguments of the function.


Indeed when I started this patch, I had a line like

     top_left_bracket, mid_left_bracket, … = u"⎡⎢⎣⎤⎥⎦"

but the long names made things very hard to read. And shorter alternatives, like `tlb`, make things a bit hard to understand and therefore harder to maintain. Quite the opposite of “help for readability”, in my opinion. But if you insist, I can go with this approach, using the short names.

Keep in mind that the `left_bracket` and `right_bracket` strings, which have been there before, are not only representing the brackets, but also collecting the vertical lines at the ends.

Plugging the delimiting brackets in the right rows is a non-trivial affair, and would therefore in my opinion be far harder to maintain. The possibility of an arbitrary number of horizontal lines at either end complicates things considerably. I haven't been able to come up with a reasonably simple code snippet to achieve correct symbols automatically while building these strings. So unless you *absolutely* insist on this point, or can give a good reason on why my approach has very undesirable reprecussions, or can suggest some formulation, I'd rather stick with my approach. Or adjust it in such a way that it assembles the matrix body without any brackets, and then adds all the bracket parts in a single loop instead of replacing existing incorrect parts.

> - why not curly bracket?


Because I don't encounter them in my day-to-day work. Can you give me a hint as to where these might occur? For an even number of rows (except two), big curly brackets would look slightly unsymmetric, but I doubt that should be a concern.



---

archive/issue_comments_317181.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [gagern](#comment%3A9):\n> Replying to [vdelecroix](#comment%3A8):\n> > review comment:\n> > - I would very much prefer that you avoid `replace` as well as the final step which deals with the top and bottom line. You should rather define **all** the characters needed as variables at the begining (as you did for `left_bracket`, `right_bracket`, etc). That would help for readability and if at some point we decide that all these characters are arguments of the function.\n \n> \n> Indeed when I started this patch, I had a line like\n> \n>      top_left_bracket, mid_left_bracket, \u2026 = u\"\u23a1\u23a2\u23a3\u23a4\u23a5\u23a6\"\n> \n> but the long names made things very hard to read. And shorter alternatives, like `tlb`, make things a bit hard to understand and therefore harder to maintain. Quite the opposite of \u201chelp for readability\u201d, in my opinion. But if you insist, I can go with this approach, using the short names.\n\n\nIf there are comments it is fine. For example\n\n```\ntlb = u\"\u23a1\"    # top left bracket\n...\n```\nor\n\n```\n# we set delimiters as a string composed of 6 characters\n#   - top left bracket (tlb)\n#   ...\nif unicode_symbols:\n    delimiters = u\"\u23a1\u23a2\u23a3\u23a4\u23a5\u23a6\"\nelse:\n    delimiters = \"[[[]]]\"\ntlb, ... = delimiters\n```\n\n> > - why not curly bracket?\n \n> \n> Because I don't encounter them in my day-to-day work. Can you give me a hint as to where these might occur? For an even number of rows (except two), big curly brackets would look slightly unsymmetric, but I doubt that should be a concern.\n\n\nBy \"curly\", I meant only using \u23a7 \u23ab \u23a9 \u23ad instead of your more angular version. The term was probably wrong. See\n\n```\nsage: m = matrix([[2,1],[0,1]])\nsage: view(m)\n```\n... no angle...",
    "created_at": "2015-04-22T07:37:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18270#issuecomment-317181",
    "user": "https://github.com/videlec"
}
```

<a id='comment:10'></a>
Replying to [gagern](#comment%3A9):
> Replying to [vdelecroix](#comment%3A8):
> > review comment:
> > - I would very much prefer that you avoid `replace` as well as the final step which deals with the top and bottom line. You should rather define **all** the characters needed as variables at the begining (as you did for `left_bracket`, `right_bracket`, etc). That would help for readability and if at some point we decide that all these characters are arguments of the function.
 
> 
> Indeed when I started this patch, I had a line like
> 
>      top_left_bracket, mid_left_bracket, … = u"⎡⎢⎣⎤⎥⎦"
> 
> but the long names made things very hard to read. And shorter alternatives, like `tlb`, make things a bit hard to understand and therefore harder to maintain. Quite the opposite of “help for readability”, in my opinion. But if you insist, I can go with this approach, using the short names.


If there are comments it is fine. For example

```
tlb = u"⎡"    # top left bracket
...
```
or

```
# we set delimiters as a string composed of 6 characters
#   - top left bracket (tlb)
#   ...
if unicode_symbols:
    delimiters = u"⎡⎢⎣⎤⎥⎦"
else:
    delimiters = "[[[]]]"
tlb, ... = delimiters
```

> > - why not curly bracket?
 
> 
> Because I don't encounter them in my day-to-day work. Can you give me a hint as to where these might occur? For an even number of rows (except two), big curly brackets would look slightly unsymmetric, but I doubt that should be a concern.


By "curly", I meant only using ⎧ ⎫ ⎩ ⎭ instead of your more angular version. The term was probably wrong. See

```
sage: m = matrix([[2,1],[0,1]])
sage: view(m)
```
... no angle...



---

archive/issue_comments_317182.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [vdelecroix](#comment%3A10):\n> If there are comments it is fine. For example \u2026\n\n\nOK, I can do that. It would be 11 characters: the six you used, plus two for single-row matrices, plus three line-drawing characters. The latter could be a separate string if you prefer. I'd make it one string because I'm lazy, but that's a weak argument.\n\n> By \"curly\", I meant only using \u23a7 \u23ab \u23a9 \u23ad instead of your more angular version.\n\n\nAh, round parentheses. Personally, I much prefer these round ones as well. I had the impression that in the USA especially, the square brackets are somewhat more common. But that impression (based mostly on [Wikipedia](http://en.wikipedia.org/wiki/Matrix_(mathematics))) may be wrong, and in any case the comparison with the LaTeX rendering is a strong motivations to make things consistent and satisfy my personal preference at the same time. We might of course let the user choose between these alternatives, by allowing a string like `\"round\"` or `\"square\"` instead of `True` for the keyword argument.",
    "created_at": "2015-04-22T10:44:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18270#issuecomment-317182",
    "user": "https://github.com/gagern"
}
```

<a id='comment:11'></a>
Replying to [vdelecroix](#comment%3A10):
> If there are comments it is fine. For example …


OK, I can do that. It would be 11 characters: the six you used, plus two for single-row matrices, plus three line-drawing characters. The latter could be a separate string if you prefer. I'd make it one string because I'm lazy, but that's a weak argument.

> By "curly", I meant only using ⎧ ⎫ ⎩ ⎭ instead of your more angular version.


Ah, round parentheses. Personally, I much prefer these round ones as well. I had the impression that in the USA especially, the square brackets are somewhat more common. But that impression (based mostly on [Wikipedia](http://en.wikipedia.org/wiki/Matrix_(mathematics))) may be wrong, and in any case the comparison with the LaTeX rendering is a strong motivations to make things consistent and satisfy my personal preference at the same time. We might of course let the user choose between these alternatives, by allowing a string like `"round"` or `"square"` instead of `True` for the keyword argument.



---

archive/issue_comments_317183.json:
```json
{
    "body": "<a id='comment:12'></a>\nI've made #18357: Unicode Art.\n\nIMHO its \n* British: round bracket ()\n* American: parentheses ()\n* square bracket []\n* curly bracket {}\nI also prefer round for matrices. Could you also change it to `unicode=<bool>` instead of `unicode_symbol` (shorter and clearer).",
    "created_at": "2015-05-03T19:12:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18270#issuecomment-317183",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:12'></a>
I've made #18357: Unicode Art.

IMHO its 
* British: round bracket ()
* American: parentheses ()
* square bracket []
* curly bracket {}
I also prefer round for matrices. Could you also change it to `unicode=<bool>` instead of `unicode_symbol` (shorter and clearer).



---

archive/issue_comments_317184.json:
```json
{
    "body": "<a id='comment:13'></a>\nFixed:\n* British: round bracket ()\n* American: parentheses ()\n* square bracket []\n* curly brace {}",
    "created_at": "2015-05-03T22:28:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18270#issuecomment-317184",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:13'></a>
Fixed:
* British: round bracket ()
* American: parentheses ()
* square bracket []
* curly brace {}



---

archive/issue_comments_317185.json:
```json
{
    "body": "<a id='comment:14'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                    |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------|\n|[e4e5f4b](http://git.sagemath.org/sage.git/commit/?id=e4e5f4be04b0124d6d599b937a3ad3fed0377fe3)|`Improved unicode delimiters for matrices, allow choosing the shape`|",
    "created_at": "2015-05-04T20:18:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18270#issuecomment-317185",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                    |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------|
|[e4e5f4b](http://git.sagemath.org/sage.git/commit/?id=e4e5f4be04b0124d6d599b937a3ad3fed0377fe3)|`Improved unicode delimiters for matrices, allow choosing the shape`|



---

archive/issue_comments_317186.json:
```json
{
    "body": "Changing commit from \"e174830facfed57934dec14cf107ffd6952955b5\" to \"e4e5f4be04b0124d6d599b937a3ad3fed0377fe3\"",
    "created_at": "2015-05-04T20:18:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18270#issuecomment-317186",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e174830facfed57934dec14cf107ffd6952955b5" to "e4e5f4be04b0124d6d599b937a3ad3fed0377fe3"



---

archive/issue_comments_317187.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,12 +6,12 @@\n [7 8|9]\n ```\n \n-I'd like to see\n+I'd like to see one of these:\n \n ```\n-\u23a11 2\u25023\u23a4\n-\u23a24 5\u25026\u23a5\n-\u23a37 8\u25029\u23a6\n+\u239b1 2\u25023\u239e    \u23a11 2\u25023\u23a4\n+\u239c4 5\u25026\u239f or \u23a24 5\u25026\u23a5\n+\u239d7 8\u25029\u23a0    \u23a37 8\u25029\u23a6\n ```\n \n Perhaps it's best to do this in small increments: start with a keyword argument to the `str` method of matrices, then later on make this the default. So the ticket here is only for on-demand support of this feature, not for its automatic use by default. For later reference, see #14733 which switched the banner to Unicode, and thereby made the choice that Sage may look broken on non-Unicode terminals.\n``````\n",
    "created_at": "2015-05-04T20:20:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18270#issuecomment-317187",
    "user": "https://github.com/gagern"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,12 +6,12 @@
 [7 8|9]
 ```
 
-I'd like to see
+I'd like to see one of these:
 
 ```
-⎡1 2│3⎤
-⎢4 5│6⎥
-⎣7 8│9⎦
+⎛1 2│3⎞    ⎡1 2│3⎤
+⎜4 5│6⎟ or ⎢4 5│6⎥
+⎝7 8│9⎠    ⎣7 8│9⎦
 ```
 
 Perhaps it's best to do this in small increments: start with a keyword argument to the `str` method of matrices, then later on make this the default. So the ticket here is only for on-demand support of this feature, not for its automatic use by default. For later reference, see #14733 which switched the banner to Unicode, and thereby made the choice that Sage may look broken on non-Unicode terminals.
``````




---

archive/issue_comments_317188.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-05-04T20:20:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18270#issuecomment-317188",
    "user": "https://github.com/gagern"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_317189.json:
```json
{
    "body": "Changing commit from \"e4e5f4be04b0124d6d599b937a3ad3fed0377fe3\" to \"206b0363fa23c6ae2642ee3b192195705fcef0d9\"",
    "created_at": "2015-05-04T20:25:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18270#issuecomment-317189",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e4e5f4be04b0124d6d599b937a3ad3fed0377fe3" to "206b0363fa23c6ae2642ee3b192195705fcef0d9"



---

archive/issue_comments_317190.json:
```json
{
    "body": "<a id='comment:16'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|\n|[206b036](http://git.sagemath.org/sage.git/commit/?id=206b0363fa23c6ae2642ee3b192195705fcef0d9)|`Format link to trac ticket`|",
    "created_at": "2015-05-04T20:25:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18270#issuecomment-317190",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                            |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|
|[206b036](http://git.sagemath.org/sage.git/commit/?id=206b0363fa23c6ae2642ee3b192195705fcef0d9)|`Format link to trac ticket`|



---

archive/issue_comments_317191.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Volker Braun\"",
    "created_at": "2015-05-05T00:30:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18270#issuecomment-317191",
    "user": "https://github.com/vbraun"
}
```

Changing reviewer from "" to "Volker Braun"



---

archive/issue_comments_317192.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-05-05T00:30:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18270#issuecomment-317192",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_317193.json:
```json
{
    "body": "<a id='comment:17'></a>\nLooks great!\n\nI would prefer `unicodedata.lookup('RIGHT SQUARE BRACKET EXTENSION')` over `\u23a2`, pasting the unicode in makes it hard to review that the correct code point is used. I'll refactor that in #18357 if you don't mind.",
    "created_at": "2015-05-05T00:30:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18270#issuecomment-317193",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:17'></a>
Looks great!

I would prefer `unicodedata.lookup('RIGHT SQUARE BRACKET EXTENSION')` over `⎢`, pasting the unicode in makes it hard to review that the correct code point is used. I'll refactor that in #18357 if you don't mind.



---

archive/issue_comments_317194.json:
```json
{
    "body": "<a id='comment:18'></a>\nPDF docs don't build:\n\n```\n! Package inputenc Error: Unicode char \\u8:\u239b not set up for use with LaTeX.\n\nSee the inputenc package documentation for explanation.\nType  H <return>  for immediate help.\n ...                                              \n                                                  \nl.7663 \\PYG{g+go}{\u239b1 2\\textbar{}3\u239e}\n                                       \n? \n! Emergency stop.\n ...                                              \n                                                  \nl.7663 \\PYG{g+go}{\u239b1 2\\textbar{}3\u239e}\n```",
    "created_at": "2015-05-05T08:30:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18270#issuecomment-317194",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:18'></a>
PDF docs don't build:

```
! Package inputenc Error: Unicode char \u8:⎛ not set up for use with LaTeX.

See the inputenc package documentation for explanation.
Type  H <return>  for immediate help.
 ...                                              
                                                  
l.7663 \PYG{g+go}{⎛1 2\textbar{}3⎞}
                                       
? 
! Emergency stop.
 ...                                              
                                                  
l.7663 \PYG{g+go}{⎛1 2\textbar{}3⎞}
```



---

archive/issue_comments_317195.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-05-05T08:30:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18270#issuecomment-317195",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_317196.json:
```json
{
    "body": "<a id='comment:19'></a>\nYou just have to add a suitable `DeclareUnicodeCharacter` to `src/doc/common/conf.py`",
    "created_at": "2015-05-05T08:35:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18270#issuecomment-317196",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:19'></a>
You just have to add a suitable `DeclareUnicodeCharacter` to `src/doc/common/conf.py`



---

archive/issue_comments_317197.json:
```json
{
    "body": "<a id='comment:20'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                          |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|\n|[6b6f089](http://git.sagemath.org/sage.git/commit/?id=6b6f089590377c61061bc4629e44adb47da6a0e1)|`TeX rendering for unicode big delimiters`|",
    "created_at": "2015-05-05T20:01:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18270#issuecomment-317197",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                          |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|
|[6b6f089](http://git.sagemath.org/sage.git/commit/?id=6b6f089590377c61061bc4629e44adb47da6a0e1)|`TeX rendering for unicode big delimiters`|



---

archive/issue_comments_317198.json:
```json
{
    "body": "Changing commit from \"206b0363fa23c6ae2642ee3b192195705fcef0d9\" to \"6b6f089590377c61061bc4629e44adb47da6a0e1\"",
    "created_at": "2015-05-05T20:01:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18270#issuecomment-317198",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "206b0363fa23c6ae2642ee3b192195705fcef0d9" to "6b6f089590377c61061bc4629e44adb47da6a0e1"



---

archive/issue_comments_317199.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-05-05T20:30:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18270#issuecomment-317199",
    "user": "https://github.com/gagern"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_317200.json:
```json
{
    "body": "<a id='comment:21'></a>\nThis is my attempt to make things look reasonably useful, even though the vertical spacing and placement is far from optimal. But seeing how many other unicode symbols are represented with crude ASCII work-arounds, I think the amount of effort I put into this should be at least on a similar level.\n\nI just filed #18370 about better unicode support by switching to XeTeX or luaTeX. I have no experience with these, but I've read on several occasions that they offer far superior Unicode support. In this sense, I hope that my unicode symbol declarations will be a temporary workaround, although I have no idea just how temporary.",
    "created_at": "2015-05-05T20:30:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18270#issuecomment-317200",
    "user": "https://github.com/gagern"
}
```

<a id='comment:21'></a>
This is my attempt to make things look reasonably useful, even though the vertical spacing and placement is far from optimal. But seeing how many other unicode symbols are represented with crude ASCII work-arounds, I think the amount of effort I put into this should be at least on a similar level.

I just filed #18370 about better unicode support by switching to XeTeX or luaTeX. I have no experience with these, but I've read on several occasions that they offer far superior Unicode support. In this sense, I hope that my unicode symbol declarations will be a temporary workaround, although I have no idea just how temporary.



---

archive/issue_comments_317201.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-05-05T20:36:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18270#issuecomment-317201",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_317202.json:
```json
{
    "body": "<a id='comment:22'></a>\nSounds good. The main point of running latex on the docs is to validate the markup, nobody is going to print out the pdf.",
    "created_at": "2015-05-05T20:36:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18270#issuecomment-317202",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:22'></a>
Sounds good. The main point of running latex on the docs is to validate the markup, nobody is going to print out the pdf.



---

archive/issue_comments_317203.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-05-06T21:03:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18270#issuecomment-317203",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_051589.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-05-06T21:03:24Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18270",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18270#event-51589"
}
```



---

archive/issue_comments_317204.json:
```json
{
    "body": "Changing branch from \"u/gagern/MatrixUnicodeDelimiters\" to \"6b6f089590377c61061bc4629e44adb47da6a0e1\"",
    "created_at": "2015-05-06T21:03:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18270#issuecomment-317204",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/gagern/MatrixUnicodeDelimiters" to "6b6f089590377c61061bc4629e44adb47da6a0e1"
