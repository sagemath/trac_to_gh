# Issue 18454: New `random_cone()` function

archive/issues_018217.json:
```json
{
    "body": "For testing algebraic properties of cones (for example, the dual of a dual cone is the original cone) it is useful to be able to generate \"random\" cones.\n\n\nReviewer: Andrey Novoseltsev\n\nAuthor: Michael Orlitzky\n\nBranch: 8c962e18f07c294b96aedf12ae88069f456f099b\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/18454\n\n",
    "closed_at": "2015-08-15T17:52:39Z",
    "created_at": "2015-05-19T19:24:29Z",
    "labels": [
        "component: geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.8",
    "title": "New `random_cone()` function",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18454",
    "user": "https://github.com/orlitzky"
}
```
For testing algebraic properties of cones (for example, the dual of a dual cone is the original cone) it is useful to be able to generate "random" cones.


Reviewer: Andrey Novoseltsev

Author: Michael Orlitzky

Branch: 8c962e18f07c294b96aedf12ae88069f456f099b

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/18454





---

archive/issue_comments_261789.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,6 +1,5 @@\n For testing algebraic properties of cones (for example, the dual of a dual cone is the original cone) it is useful to be able to generate \"random\" cones.\n \n-I have a work-in-progress branch for this which adds `random_cone()` to `sage.geometry.cone`.\n \n Comment: 1\n \n```\n",
    "created_at": "2015-05-19T21:31:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18454",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18454#issuecomment-261789",
    "user": "https://github.com/orlitzky"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,6 +1,5 @@
 For testing algebraic properties of cones (for example, the dual of a dual cone is the original cone) it is useful to be able to generate "random" cones.
 
-I have a work-in-progress branch for this which adds `random_cone()` to `sage.geometry.cone`.
 
 Comment: 1
 
```




---

archive/issue_comments_261790.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-05-19T21:31:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18454",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18454#issuecomment-261790",
    "user": "https://github.com/orlitzky"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_261791.json:
```json
{
    "body": "<a id='comment:1'></a>New commits:",
    "created_at": "2015-05-19T21:31:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18454",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18454#issuecomment-261791",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:1'></a>New commits:



---

archive/issue_comments_261792.json:
```json
{
    "body": "<a id='comment:2'></a>I will surely have more picks, but for starters:\n\n- it would be nice to have an option of specifying the lattice of the random cone\n\n- decision to limit maximum number of rays to double dimension is not natural - I would drop it completely, but perhaps warn the user in documentation that it may take a while to generate a random cone with a lot of rays of low dimension. If you are up to the \"guaranteed possible maximum\" then it is dimension plus one - consider the cone on the vertices of a simplex containing the origin.",
    "created_at": "2015-05-20T04:46:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18454",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18454#issuecomment-261792",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:2'></a>I will surely have more picks, but for starters:

- it would be nice to have an option of specifying the lattice of the random cone

- decision to limit maximum number of rays to double dimension is not natural - I would drop it completely, but perhaps warn the user in documentation that it may take a while to generate a random cone with a lot of rays of low dimension. If you are up to the "guaranteed possible maximum" then it is dimension plus one - consider the cone on the vertices of a simplex containing the origin.



---

archive/issue_comments_261793.json:
```json
{
    "body": "<a id='comment:3'></a>Replying to [comment:2 novoselt]:\n> I will surely have more picks, but for starters:\n> \n> - it would be nice to have an option of specifying the lattice of the random cone\n\n\nThanks, I can try to do this one.\n\n\n\n\n>  - decision to limit maximum number of rays to double dimension is not natural - I would drop it completely, but perhaps warn the user in documentation that it may take a while to generate a random cone with a lot of rays of low dimension.\n\n\nI wasn't sure what to do here. I was trying to avoid returning a cone with e.g. four rays when the user specified `min_rays == max_rays == 10` (for example). What do we do if the user requests a minimum of 100 rays in R<sup>2</sup>? It's going to take a while indeed =)\n\nIn R<sup>3</sup>, it might happen by chance, but the current algorithm won't get there eventually: we're appending new rays to a list, and once we have plus/minus the standard basis, we can append forever and never get any new generators. We'd have to throw out the cone once it becomes the whole space and start over.",
    "created_at": "2015-05-20T05:20:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18454",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18454#issuecomment-261793",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:3'></a>Replying to [comment:2 novoselt]:
> I will surely have more picks, but for starters:
> 
> - it would be nice to have an option of specifying the lattice of the random cone


Thanks, I can try to do this one.




>  - decision to limit maximum number of rays to double dimension is not natural - I would drop it completely, but perhaps warn the user in documentation that it may take a while to generate a random cone with a lot of rays of low dimension.


I wasn't sure what to do here. I was trying to avoid returning a cone with e.g. four rays when the user specified `min_rays == max_rays == 10` (for example). What do we do if the user requests a minimum of 100 rays in R<sup>2</sup>? It's going to take a while indeed =)

In R<sup>3</sup>, it might happen by chance, but the current algorithm won't get there eventually: we're appending new rays to a list, and once we have plus/minus the standard basis, we can append forever and never get any new generators. We'd have to throw out the cone once it becomes the whole space and start over.



---

archive/issue_comments_261794.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-20T14:28:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18454",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18454#issuecomment-261794",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_261795.json:
```json
{
    "body": "<a id='comment:5'></a>Well, it would be helpful to know in what sense the cone is \"random\". If it is a cone on a random set of rays, then dimension+1 is the only sensible upper bound to me - such a cone always can be constructed. In R<sup>2</sup> it may be possible to force construction of cones with more than 4 rays - given that the code can handle 4 instead of 3 for the whole space, probably it can live with 100. But if we are talking about the minimal number of extremal rays, then for R<sup>1,2</sup> maximum is the dimension and for all others we can do anything - generate a random n-gon in a plane and lift it.\n\nIn most cases I think you would want a strictly convex cone, so that's exactly what you want with bonus points if primitive generators are not necessarily in the same hyperplane. Algorithm: generate random vectors with positive last component. There may be an extra switch to allow linear subspaces in cones.",
    "created_at": "2015-05-20T16:15:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18454",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18454#issuecomment-261795",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:5'></a>Well, it would be helpful to know in what sense the cone is "random". If it is a cone on a random set of rays, then dimension+1 is the only sensible upper bound to me - such a cone always can be constructed. In R<sup>2</sup> it may be possible to force construction of cones with more than 4 rays - given that the code can handle 4 instead of 3 for the whole space, probably it can live with 100. But if we are talking about the minimal number of extremal rays, then for R<sup>1,2</sup> maximum is the dimension and for all others we can do anything - generate a random n-gon in a plane and lift it.

In most cases I think you would want a strictly convex cone, so that's exactly what you want with bonus points if primitive generators are not necessarily in the same hyperplane. Algorithm: generate random vectors with positive last component. There may be an extra switch to allow linear subspaces in cones.



---

archive/issue_comments_261796.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [comment:5 novoselt]:\n> Well, it would be helpful to know in what sense the cone is \"random\". If it is a cone on a random set of rays, then dimension+1 is the only sensible upper bound to me - such a cone always can be constructed.\n\n\nIn any dimension you can do better, up to 2*dimension -- just take the standard basis and add negative multiples of them. The resulting come will have 2*dimension generating rays and be equal to the entire space.\n\n\n\n\n> In R<sup>2</sup> it may be possible to force construction of cones with more than 4 rays - given that the code can handle 4 instead of 3 for the whole space, probably it can live with 100.\n\n\nCan you really get more than four in R<sup>2</sup>? I haven't tried to prove it but geometrically, once you have four and try to add one more, the fifth one should either be contained in the cone already (obsoleting the new one), or be above/below some other generator (obsoleting the old one).\n\n\n> But if we are talking about the minimal number of extremal rays, then for R<sup>1,2</sup> maximum is the dimension and for all others we can do anything - generate a random n-gon in a plane and lift it.\n\n\nRight, so here you definitely wouldn't want to limit the number of rays to dimension+1.\n\n\n> In most cases I think you would want a strictly convex cone, so that's exactly what you want with bonus points if primitive generators are not necessarily in the same hyperplane. Algorithm: generate random vectors with positive last component. There may be an extra switch to allow linear subspaces in cones.\n\n\nWhen I started working on this, I thought I was interested in proper (strictly convex, nonempty interior) cones. But the stuff I'm doing appears to generalize, and none of my test cases require this (nor do the test cases I added in commit 1bbb2d1). But I agree it would be useful. I'll try to add a `strictly_convex = None/True/False` parameter. Likewise for `solid = None/True/False` if it doesn't look too hard.",
    "created_at": "2015-05-21T14:52:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18454",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18454#issuecomment-261796",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:6'></a>Replying to [comment:5 novoselt]:
> Well, it would be helpful to know in what sense the cone is "random". If it is a cone on a random set of rays, then dimension+1 is the only sensible upper bound to me - such a cone always can be constructed.


In any dimension you can do better, up to 2*dimension -- just take the standard basis and add negative multiples of them. The resulting come will have 2*dimension generating rays and be equal to the entire space.




> In R<sup>2</sup> it may be possible to force construction of cones with more than 4 rays - given that the code can handle 4 instead of 3 for the whole space, probably it can live with 100.


Can you really get more than four in R<sup>2</sup>? I haven't tried to prove it but geometrically, once you have four and try to add one more, the fifth one should either be contained in the cone already (obsoleting the new one), or be above/below some other generator (obsoleting the old one).


> But if we are talking about the minimal number of extremal rays, then for R<sup>1,2</sup> maximum is the dimension and for all others we can do anything - generate a random n-gon in a plane and lift it.


Right, so here you definitely wouldn't want to limit the number of rays to dimension+1.


> In most cases I think you would want a strictly convex cone, so that's exactly what you want with bonus points if primitive generators are not necessarily in the same hyperplane. Algorithm: generate random vectors with positive last component. There may be an extra switch to allow linear subspaces in cones.


When I started working on this, I thought I was interested in proper (strictly convex, nonempty interior) cones. But the stuff I'm doing appears to generalize, and none of my test cases require this (nor do the test cases I added in commit 1bbb2d1). But I agree it would be useful. I'll try to add a `strictly_convex = None/True/False` parameter. Likewise for `solid = None/True/False` if it doesn't look too hard.



---

archive/issue_comments_261797.json:
```json
{
    "body": "<a id='comment:7'></a>Replying to [comment:6 mjo]:\n> Replying to [comment:5 novoselt]:\n> > Well, it would be helpful to know in what sense the cone is \"random\". If it is a cone on a random set of rays, then dimension+1 is the only sensible upper bound to me - such a cone always can be constructed.\n\n> In any dimension you can do better, up to 2*dimension -- just take the standard basis and add negative multiples of them. The resulting come will have 2*dimension generating rays and be equal to the entire space.\n\"Better\" in what sense? Take (or \"generate randomly\") rays (1,0), (0,1), (-1,-1) in the plane and you can no longer add rays which are independent of these three. \"Random generation\" of four rays in opposite pairs is much less likely to happen. So if you keep generating rays removing those which are dependent with already constructed ones until you reach a predefined maximum, you cannot guarantee that more than 3 are possible.\n\n\n> > In R<sup>2</sup> it may be possible to force construction of cones with more than 4 rays - given that the code can handle 4 instead of 3 for the whole space, probably it can live with 100.\n\n> Can you really get more than four in R<sup>2</sup>?\nI meant that you can have a cone in the plane with a hundred rays that you decided to call generating ones - Sage constructors may allow you to do it for cones with linear subspaces, although I don't know why one would want it.\n\n> > But if we are talking about the minimal number of extremal rays, then for R<sup>1,2</sup> maximum is the dimension and for all others we can do anything - generate a random n-gon in a plane and lift it.\n\n> \n> Right, so here you definitely wouldn't want to limit the number of rays to dimension+1.\n\nNor to twice the dimension!",
    "created_at": "2015-05-21T23:43:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18454",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18454#issuecomment-261797",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:7'></a>Replying to [comment:6 mjo]:
> Replying to [comment:5 novoselt]:
> > Well, it would be helpful to know in what sense the cone is "random". If it is a cone on a random set of rays, then dimension+1 is the only sensible upper bound to me - such a cone always can be constructed.

> In any dimension you can do better, up to 2*dimension -- just take the standard basis and add negative multiples of them. The resulting come will have 2*dimension generating rays and be equal to the entire space.
"Better" in what sense? Take (or "generate randomly") rays (1,0), (0,1), (-1,-1) in the plane and you can no longer add rays which are independent of these three. "Random generation" of four rays in opposite pairs is much less likely to happen. So if you keep generating rays removing those which are dependent with already constructed ones until you reach a predefined maximum, you cannot guarantee that more than 3 are possible.


> > In R<sup>2</sup> it may be possible to force construction of cones with more than 4 rays - given that the code can handle 4 instead of 3 for the whole space, probably it can live with 100.

> Can you really get more than four in R<sup>2</sup>?
I meant that you can have a cone in the plane with a hundred rays that you decided to call generating ones - Sage constructors may allow you to do it for cones with linear subspaces, although I don't know why one would want it.

> > But if we are talking about the minimal number of extremal rays, then for R<sup>1,2</sup> maximum is the dimension and for all others we can do anything - generate a random n-gon in a plane and lift it.

> 
> Right, so here you definitely wouldn't want to limit the number of rays to dimension+1.

Nor to twice the dimension!



---

archive/issue_comments_261798.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [comment:7 novoselt]:\n> > Right, so here you definitely wouldn't want to limit the number of rays to dimension+1.\n\n> Nor to twice the dimension!\n\nOk, point taken =)\n\nI'll remove the restriction in the next commit and add warnings to the docs. It looks easy to add a `strictly_convex` parameter, so that's on its way too. Letting the user request a solid cone is a mess, though.",
    "created_at": "2015-05-22T03:16:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18454",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18454#issuecomment-261798",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:8'></a>Replying to [comment:7 novoselt]:
> > Right, so here you definitely wouldn't want to limit the number of rays to dimension+1.

> Nor to twice the dimension!

Ok, point taken =)

I'll remove the restriction in the next commit and add warnings to the docs. It looks easy to add a `strictly_convex` parameter, so that's on its way too. Letting the user request a solid cone is a mess, though.



---

archive/issue_comments_261799.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-23T01:12:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18454",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18454#issuecomment-261799",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_261800.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-23T01:22:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18454",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18454#issuecomment-261800",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_261801.json:
```json
{
    "body": "<a id='comment:11'></a>That wasn't **too** bad. I removed all of the unnecessary restrictions. The only ones that remain avoid (guaranteed) infinite loops. Almost all of the code is in sanity checks, error reporting, and tests.\n\nOnce I refactored for `strictly_convex`, `solid` wasn't so hard anymore. By putting everything in a loop, it makes it easy to throw the current cone away and start over. We therefore don't have to try too hard to fix an unpromising cone.",
    "created_at": "2015-05-23T01:25:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18454",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18454#issuecomment-261801",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:11'></a>That wasn't **too** bad. I removed all of the unnecessary restrictions. The only ones that remain avoid (guaranteed) infinite loops. Almost all of the code is in sanity checks, error reporting, and tests.

Once I refactored for `strictly_convex`, `solid` wasn't so hard anymore. By putting everything in a loop, it makes it easy to throw the current cone away and start over. We therefore don't have to try too hard to fix an unpromising cone.



---

archive/issue_comments_261802.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-23T15:15:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18454",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18454#issuecomment-261802",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_261803.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-04T22:29:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18454",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18454#issuecomment-261803",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_261804.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2015-06-13T14:31:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18454",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18454#issuecomment-261804",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_261805.json:
```json
{
    "body": "<a id='comment:15'></a>There are no new changes there, just a rebase on top of 6.8.beta4 for the sake of ticket #18696.",
    "created_at": "2015-06-13T14:52:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18454",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18454#issuecomment-261805",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:15'></a>There are no new changes there, just a rebase on top of 6.8.beta4 for the sake of ticket #18696.



---

archive/issue_comments_261806.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2015-07-12T01:34:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18454",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18454#issuecomment-261806",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_261807.json:
```json
{
    "body": "<a id='comment:17'></a>Replying to [comment:7 novoselt]:\n\nIs there anything I can do to help get this reviewed? Bribery and/or trade reviews?\n\nI have a bunch of \"easy\" (new method) tickets in the pipeline for a paper I'm working on, and I've used random testing for many of the properties in those tickets. I'd like to be able to cite Sage in the paper (and vice-versa) as a working implementation if we can get the algorithm merged in time.\n\nIf there are any implementation bugs, the output is either random or an error so I can just fix them and no one should notice =)\n\nI'm happy to seek out other reviewers if you'd prefer, but I know the cone code is your baby so I'd prefer that you review it if you can.",
    "created_at": "2015-07-25T18:12:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18454",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18454#issuecomment-261807",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:17'></a>Replying to [comment:7 novoselt]:

Is there anything I can do to help get this reviewed? Bribery and/or trade reviews?

I have a bunch of "easy" (new method) tickets in the pipeline for a paper I'm working on, and I've used random testing for many of the properties in those tickets. I'd like to be able to cite Sage in the paper (and vice-versa) as a working implementation if we can get the algorithm merged in time.

If there are any implementation bugs, the output is either random or an error so I can just fix them and no one should notice =)

I'm happy to seek out other reviewers if you'd prefer, but I know the cone code is your baby so I'd prefer that you review it if you can.



---

archive/issue_comments_261808.json:
```json
{
    "body": "<a id='comment:18'></a>I really hope to review it this coming week! (As well as small follow ups that you have posted.)",
    "created_at": "2015-07-27T01:39:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18454",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18454#issuecomment-261808",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:18'></a>I really hope to review it this coming week! (As well as small follow ups that you have posted.)



---

archive/issue_comments_261809.json:
```json
{
    "body": "<a id='comment:19'></a>I have a problem with `min/max_dim` - I was sure they talk about the dimension of the cone, until I got to their description. The example with it is also confusing:\n\n```\n    We can predict the dimension when ``min_dim == max_dim``::\n\n        sage: set_random_seed()\n        sage: random_cone(min_dim=4, max_dim=4, min_rays=0, max_rays=0)\n        0-d cone in 4-d lattice N\n```\nTo me this looks like we predict the dimension 0 based on `min/max_rays`.\n\nI would be in favour of using `min/max_dim` for the dimension of the cone, allowing specifying `lattice` together with these parameters as long as its dimension is at least `max_dim`, and when not given defaulting to `max_dim`-dimensional lattice. If you don't want to work on such functionality, can we please rename parameters to `min/max_ambient_dim` to avoid ambiguity when reading calls of this function?",
    "created_at": "2015-07-31T01:36:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18454",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18454#issuecomment-261809",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:19'></a>I have a problem with `min/max_dim` - I was sure they talk about the dimension of the cone, until I got to their description. The example with it is also confusing:

```
    We can predict the dimension when ``min_dim == max_dim``::

        sage: set_random_seed()
        sage: random_cone(min_dim=4, max_dim=4, min_rays=0, max_rays=0)
        0-d cone in 4-d lattice N
```
To me this looks like we predict the dimension 0 based on `min/max_rays`.

I would be in favour of using `min/max_dim` for the dimension of the cone, allowing specifying `lattice` together with these parameters as long as its dimension is at least `max_dim`, and when not given defaulting to `max_dim`-dimensional lattice. If you don't want to work on such functionality, can we please rename parameters to `min/max_ambient_dim` to avoid ambiguity when reading calls of this function?



---

archive/issue_comments_261810.json:
```json
{
    "body": "<a id='comment:20'></a>I am not a big fun of examples that generate multiple cones of the same type to make sure that things are OK. What's the point? These tests WILL be run multiple times by users and patchbots during global testing, aren't these repetitions enough?",
    "created_at": "2015-07-31T22:04:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18454",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18454#issuecomment-261810",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:20'></a>I am not a big fun of examples that generate multiple cones of the same type to make sure that things are OK. What's the point? These tests WILL be run multiple times by users and patchbots during global testing, aren't these repetitions enough?



---

archive/issue_comments_261811.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-08-03T16:58:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18454",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18454#issuecomment-261811",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_261812.json:
```json
{
    "body": "<a id='comment:22'></a>Replying to [comment:19 novoselt]:\n> I have a problem with `min/max_dim` - I was sure they talk about the dimension of the cone, until I got to their description. The example with it is also confusing:\n\n\nRight on both counts. I renamed the parameters, and fixed those two doctests. Now I save the result of `random_cone()` and check only the relevant property.\n\nI also removed a bunch of the redundant tests and cleaned up a little.\n\nI think I'm receiving trac notifications again so I should be more responsive...",
    "created_at": "2015-08-03T17:00:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18454",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18454#issuecomment-261812",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:22'></a>Replying to [comment:19 novoselt]:
> I have a problem with `min/max_dim` - I was sure they talk about the dimension of the cone, until I got to their description. The example with it is also confusing:


Right on both counts. I renamed the parameters, and fixed those two doctests. Now I save the result of `random_cone()` and check only the relevant property.

I also removed a bunch of the redundant tests and cleaned up a little.

I think I'm receiving trac notifications again so I should be more responsive...



---

archive/issue_comments_261813.json:
```json
{
    "body": "<a id='comment:23'></a>Replying to [comment:19 novoselt]:\n> I would be in favour of using `min/max_dim` for the dimension of the cone, allowing specifying `lattice` together with these parameters as long as its dimension is at least `max_dim`, and when not given defaulting to `max_dim`-dimensional lattice. If you don't want to work on such functionality...\n\n\n(I forgot to respond to this part).\n\nI don't need this ability, and I'm already pretty deep in trac ticket debt, so I don't want to add any more knobs right now. I'd be willing to add it later on if someone requests it though.",
    "created_at": "2015-08-05T01:23:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18454",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18454#issuecomment-261813",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:23'></a>Replying to [comment:19 novoselt]:
> I would be in favour of using `min/max_dim` for the dimension of the cone, allowing specifying `lattice` together with these parameters as long as its dimension is at least `max_dim`, and when not given defaulting to `max_dim`-dimensional lattice. If you don't want to work on such functionality...


(I forgot to respond to this part).

I don't need this ability, and I'm already pretty deep in trac ticket debt, so I don't want to add any more knobs right now. I'd be willing to add it later on if someone requests it though.



---

archive/issue_comments_261814.json:
```json
{
    "body": "<a id='comment:25'></a>OK:\n- merged current version of #18613 to make isomorphism checks work as expected\n- there was a duplicate piece of code, removed\n- I tweaked some code, hopefully not unreasonably\n\nRegarding redundant tests I was mostly complaining about things like \n\n```\n    Ensure that we can generate cones which are not strictly convex\n    (can take a long time)::\n\n        sage: set_random_seed()                         # long time\n        sage: l = [ random_cone(min_ambient_dim=1,      # long time\n        ....:                   max_ambient_dim=8,      # long time\n        ....:                   min_rays=2,             # long time\n        ....:                   max_rays=10,            # long time\n        ....:                   strictly_convex=False)\\\n        ....:                   .is_strictly_convex()   # long time\n        ....:       for i in range(0,10)]               # long time\n        sage: any(l)                                    # long time\n        False\n\n    As well as ones that are strictly convex::\n\n        sage: set_random_seed()                        # long time\n        sage: l = [ random_cone(min_ambient_dim=1,     # long time\n        ....:                   max_ambient_dim=8,     # long time\n        ....:                   min_rays=2,            # long time\n        ....:                   max_rays=10,           # long time\n        ....:                   strictly_convex=True)\\\n        ....:                   .is_strictly_convex()  # long time\n        ....:       for i in range(0,10) ]             # long time\n        sage: all(l)                                   # long time\n        True\n```\ngiven that above we have\n\n```\n    We can also request a strictly convex cone::\n\n        sage: set_random_seed()\n        sage: K = random_cone(max_ambient_dim=8, max_rays=10,\n        ....:                 strictly_convex=True)\n        sage: K.is_strictly_convex()\n        True\n\n    Or one that isn't strictly convex::\n\n        sage: set_random_seed()\n        sage: K = random_cone(min_ambient_dim=5, min_rays=2,\n        ....:                 strictly_convex=False)\n        sage: K.is_strictly_convex()\n        False\n```\nSince this single random tests will be repeated many times on different machines, I see little point in running 10 tests for longer version. But if you really like to keep them it is fine with me.\n\nThe code also seems a bit over-commented to me, but if you had to have them there probably others can appreciate it as well. And #18613 has clearly demonstrated that it is a very useful addition!\n\nBottom line: set to positive review if you are OK with my changes (and perhaps review #18613 as well?-))\n\n---\nNew commits:",
    "created_at": "2015-08-12T01:46:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18454",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18454#issuecomment-261814",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:25'></a>OK:
- merged current version of #18613 to make isomorphism checks work as expected
- there was a duplicate piece of code, removed
- I tweaked some code, hopefully not unreasonably

Regarding redundant tests I was mostly complaining about things like 

```
    Ensure that we can generate cones which are not strictly convex
    (can take a long time)::

        sage: set_random_seed()                         # long time
        sage: l = [ random_cone(min_ambient_dim=1,      # long time
        ....:                   max_ambient_dim=8,      # long time
        ....:                   min_rays=2,             # long time
        ....:                   max_rays=10,            # long time
        ....:                   strictly_convex=False)\
        ....:                   .is_strictly_convex()   # long time
        ....:       for i in range(0,10)]               # long time
        sage: any(l)                                    # long time
        False

    As well as ones that are strictly convex::

        sage: set_random_seed()                        # long time
        sage: l = [ random_cone(min_ambient_dim=1,     # long time
        ....:                   max_ambient_dim=8,     # long time
        ....:                   min_rays=2,            # long time
        ....:                   max_rays=10,           # long time
        ....:                   strictly_convex=True)\
        ....:                   .is_strictly_convex()  # long time
        ....:       for i in range(0,10) ]             # long time
        sage: all(l)                                   # long time
        True
```
given that above we have

```
    We can also request a strictly convex cone::

        sage: set_random_seed()
        sage: K = random_cone(max_ambient_dim=8, max_rays=10,
        ....:                 strictly_convex=True)
        sage: K.is_strictly_convex()
        True

    Or one that isn't strictly convex::

        sage: set_random_seed()
        sage: K = random_cone(min_ambient_dim=5, min_rays=2,
        ....:                 strictly_convex=False)
        sage: K.is_strictly_convex()
        False
```
Since this single random tests will be repeated many times on different machines, I see little point in running 10 tests for longer version. But if you really like to keep them it is fine with me.

The code also seems a bit over-commented to me, but if you had to have them there probably others can appreciate it as well. And #18613 has clearly demonstrated that it is a very useful addition!

Bottom line: set to positive review if you are OK with my changes (and perhaps review #18613 as well?-))

---
New commits:



---

archive/issue_comments_261815.json:
```json
{
    "body": "<a id='comment:26'></a>Replying to [comment:25 novoselt]:\n> OK:\n> - merged current version of #18613 to make isomorphism checks work as expected\n> - there was a duplicate piece of code, removed\n> - I tweaked some code, hopefully not unreasonably\n> \n> Regarding redundant tests I was mostly complaining about things like... But if you really like to keep them it is fine with me.\n\n\nNope, I just had some other redundant tests in mind. You're right, I've removed them. Thanks for the rest of the changes, too, they all look good. Just need a thumbs up on my last commit and I think this is ready.",
    "created_at": "2015-08-14T19:13:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18454",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18454#issuecomment-261815",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:26'></a>Replying to [comment:25 novoselt]:
> OK:
> - merged current version of #18613 to make isomorphism checks work as expected
> - there was a duplicate piece of code, removed
> - I tweaked some code, hopefully not unreasonably
> 
> Regarding redundant tests I was mostly complaining about things like... But if you really like to keep them it is fine with me.


Nope, I just had some other redundant tests in mind. You're right, I've removed them. Thanks for the rest of the changes, too, they all look good. Just need a thumbs up on my last commit and I think this is ready.



---

archive/issue_comments_261816.json:
```json
{
    "body": "<a id='comment:27'></a>Last 10 new commits:",
    "created_at": "2015-08-14T19:14:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18454",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18454#issuecomment-261816",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:27'></a>Last 10 new commits:



---

archive/issue_comments_261817.json:
```json
{
    "body": "<a id='comment:28'></a>Thumbs up!",
    "created_at": "2015-08-15T00:32:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18454",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18454#issuecomment-261817",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:28'></a>Thumbs up!



---

archive/issue_comments_261818.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-08-15T00:32:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18454",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18454#issuecomment-261818",
    "user": "https://github.com/novoselt"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_261819.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-08-15T17:52:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18454",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18454#issuecomment-261819",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_051951.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-08-15T17:52:39Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18454",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18454#event-51951"
}
```



---

archive/issue_comments_261820.json:
```json
{
    "body": "<a id='comment:30'></a>This recently started breaking, no idea why...\n\nSee #24517",
    "created_at": "2018-01-16T23:02:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18454",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18454#issuecomment-261820",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:30'></a>This recently started breaking, no idea why...

See #24517
