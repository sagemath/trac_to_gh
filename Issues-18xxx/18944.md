# Issue 18944: Posets: maximal_chains() partial-option broken

archive/issues_018707.json:
```json
{
    "assignees": [],
    "body": "`partial`-argument on `maximal_chains()` of finite posets is broken. The error is at `posets.py`.\n\n```\nP = Posets.BooleanLattice(2)\nP.maximal_chains(partial=[1, 2])\n```\n\noutputs `[This is the Trac macro *1, 2, 3* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1, 2, 3-macro)` which is not a chain at all. Best correction is to remove the option.\n\nCC:  @tscrim\n\nKeywords: **posets**\n\nBranch/Commit: **[9592141](https://github.com/sagemath/sagetrac-mirror/commit/95921411b2f06f9ff6477f4f3d5e77621cc8ac52)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/18944_\n\n",
    "closed_at": "2021-10-13T22:50:23Z",
    "created_at": "2015-07-23T09:03:22Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Posets: maximal_chains() partial-option broken",
    "type": "issue",
    "updated_at": "2021-10-13T22:50:23Z",
    "url": "https://github.com/sagemath/sage/issues/18944",
    "user": "https://github.com/jm58660"
}
```
`partial`-argument on `maximal_chains()` of finite posets is broken. The error is at `posets.py`.

```
P = Posets.BooleanLattice(2)
P.maximal_chains(partial=[1, 2])
```

outputs `[This is the Trac macro *1, 2, 3* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1, 2, 3-macro)` which is not a chain at all. Best correction is to remove the option.

CC:  @tscrim

Keywords: **posets**

Branch/Commit: **[9592141](https://github.com/sagemath/sagetrac-mirror/commit/95921411b2f06f9ff6477f4f3d5e77621cc8ac52)**

Reviewer: **Travis Scrimshaw**

Author: **Frédéric Chapoton**

_Issue created by migration from https://trac.sagemath.org/ticket/18944_





---

archive/issue_events_251188.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-07-23T09:03:22Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18944#event-251188"
}
```



---

archive/issue_events_251189.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-07-23T09:03:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "component: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18944#event-251189"
}
```



---

archive/issue_events_251190.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-07-23T09:03:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18944#event-251190"
}
```



---

archive/issue_events_251191.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-07-23T09:03:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18944#event-251191"
}
```



---

archive/issue_comments_268642.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eeefd9d2c4184a3f60f505a7851ec3ff16eb7bf0\">eeefd9d</a></td><td><code>Correction to maximal_chains.</code></td></tr></table>\n",
    "created_at": "2015-07-23T09:49:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18944#issuecomment-268642",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:1" align="right">Comment 1</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eeefd9d2c4184a3f60f505a7851ec3ff16eb7bf0">eeefd9d</a></td><td><code>Correction to maximal_chains.</code></td></tr></table>




---

archive/issue_comments_268643.json:
```json
{
    "body": "Commit: **[eeefd9d](https://github.com/sagemath/sagetrac-mirror/commit/eeefd9d2c4184a3f60f505a7851ec3ff16eb7bf0)**",
    "created_at": "2015-07-23T09:49:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18944#issuecomment-268643",
    "user": "https://github.com/jm58660"
}
```

Commit: **[eeefd9d](https://github.com/sagemath/sagetrac-mirror/commit/eeefd9d2c4184a3f60f505a7851ec3ff16eb7bf0)**



---

archive/issue_comments_268644.json:
```json
{
    "body": "Branch: **[u/jmantysalo/maximal_chains](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/maximal_chains)**",
    "created_at": "2015-07-23T09:49:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18944#issuecomment-268644",
    "user": "https://github.com/jm58660"
}
```

Branch: **[u/jmantysalo/maximal_chains](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/maximal_chains)**



---

archive/issue_comments_268645.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nNathann, some questions: 1) Can you confirm that this is right way to get maximal chains of a poset? 2) What you think about this kind of \"deprecation\", where I removed broken functionality with warning?\n\nAnd for most important part, 3) what about `chain_polytope`? This brokes doctest. Who knows if it has been broken all the time? Should I just let it be, and move (broken) old version on `maximal_chains` inside `chain_polytope`?\n\n(This is kind of child-ticket of #18941.)",
    "created_at": "2015-07-23T09:55:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18944#issuecomment-268645",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:2" align="right">Comment 2</div>

Nathann, some questions: 1) Can you confirm that this is right way to get maximal chains of a poset? 2) What you think about this kind of "deprecation", where I removed broken functionality with warning?

And for most important part, 3) what about `chain_polytope`? This brokes doctest. Who knows if it has been broken all the time? Should I just let it be, and move (broken) old version on `maximal_chains` inside `chain_polytope`?

(This is kind of child-ticket of #18941.)



---

archive/issue_comments_268646.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nHello,\n\n> 1) Can you confirm that this is right way to get maximal chains of a poset?\n\nHmmmmm... Well it *would*, if `all_paths_iterator` actually did only what it claimed (it actually returns path sorted by distance, and you do not want that nor should you pay for that). This being said, this is precisely the function that you should call, and if it does not do what it should, well, that's a problem interal to `all_paths_iterator`.\n\n2) What you think about this kind of \"deprecation\", where I removed broken functionality with warning?\n\nI do not see the point of displaying a warning before raising an exception. Better to only raise an exception, or to remove the optiona flag directly.\n\nNot that \"by Sage standards\" this should not be done. My usual procedure is to write to Sage devel to ask if I can remove it, have 50 persons who usually never show up yell a me, and do nothing in the end because the community disagrees. Pick your path.\n\n> And for most important part, 3) what about `chain_polytope`?\n\nI don't understand what you are talking about.\n\nNathann",
    "created_at": "2015-07-23T10:12:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18944#issuecomment-268646",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:3" align="right">Comment 3</div>

Hello,

> 1) Can you confirm that this is right way to get maximal chains of a poset?

Hmmmmm... Well it *would*, if `all_paths_iterator` actually did only what it claimed (it actually returns path sorted by distance, and you do not want that nor should you pay for that). This being said, this is precisely the function that you should call, and if it does not do what it should, well, that's a problem interal to `all_paths_iterator`.

2) What you think about this kind of "deprecation", where I removed broken functionality with warning?

I do not see the point of displaying a warning before raising an exception. Better to only raise an exception, or to remove the optiona flag directly.

Not that "by Sage standards" this should not be done. My usual procedure is to write to Sage devel to ask if I can remove it, have 50 persons who usually never show up yell a me, and do nothing in the end because the community disagrees. Pick your path.

> And for most important part, 3) what about `chain_polytope`?

I don't understand what you are talking about.

Nathann



---

archive/issue_comments_268647.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nAs for question 3, just run `sage -t` to `posets.py`.\n\nAbout 1: How it does that on iterator? But yes, with `BooleanLattice(8)` it seems to be about 3 times slower to use the function from digraphs.",
    "created_at": "2015-07-23T11:13:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18944#issuecomment-268647",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:4" align="right">Comment 4</div>

As for question 3, just run `sage -t` to `posets.py`.

About 1: How it does that on iterator? But yes, with `BooleanLattice(8)` it seems to be about 3 times slower to use the function from digraphs.



---

archive/issue_comments_268648.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nAs best I can tell, this isn't a broken function, it's bad input. `[1,2]` represents the two incomparable elements of `BooleanLattice(2)`, so they'll never be the start of a maximal chain. I think the better course of action would be to implement a check to ensure that `partial` is a saturated chain in the poset, starting with a minimal element. \n\nI think the description also needs to be clarified, because it's not clear just from reading it whether `partial=[0,1]` means listing all maximal chains with minimal element 0 or minimal element 1 (which is not what this does), or if it it means listing all maximal chains that have 0 as the minimal element and 1 as it's second element (which is what it does).",
    "created_at": "2015-08-06T18:56:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18944#issuecomment-268648",
    "user": "https://github.com/kevindilks"
}
```

<div id="comment:5" align="right">Comment 5</div>

As best I can tell, this isn't a broken function, it's bad input. `[1,2]` represents the two incomparable elements of `BooleanLattice(2)`, so they'll never be the start of a maximal chain. I think the better course of action would be to implement a check to ensure that `partial` is a saturated chain in the poset, starting with a minimal element. 

I think the description also needs to be clarified, because it's not clear just from reading it whether `partial=[0,1]` means listing all maximal chains with minimal element 0 or minimal element 1 (which is not what this does), or if it it means listing all maximal chains that have 0 as the minimal element and 1 as it's second element (which is what it does).



---

archive/issue_comments_268649.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nBut in any case, if we just add a check for input to be comparable elements, then `chain_polytope` will broke. It relies on this (odd / buggy?) behavior.\n\nAnd who will want \"partial maximal chains\" in first place? To compare: there is `exclude`-option in `chains()`.",
    "created_at": "2015-08-08T20:02:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18944#issuecomment-268649",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:6" align="right">Comment 6</div>

But in any case, if we just add a check for input to be comparable elements, then `chain_polytope` will broke. It relies on this (odd / buggy?) behavior.

And who will want "partial maximal chains" in first place? To compare: there is `exclude`-option in `chains()`.



---

archive/issue_comments_268650.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e6a4ae2b1f7f887b58a49af5c1607640c7821dde\">e6a4ae2</a></td><td><code>Removed broken partial-option from maximal_chains().</code></td></tr></table>\n",
    "created_at": "2015-09-15T06:43:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18944#issuecomment-268650",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7" align="right">Comment 7</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e6a4ae2b1f7f887b58a49af5c1607640c7821dde">e6a4ae2</a></td><td><code>Removed broken partial-option from maximal_chains().</code></td></tr></table>




---

archive/issue_comments_268651.json:
```json
{
    "body": "Changed commit from **[eeefd9d](https://github.com/sagemath/sagetrac-mirror/commit/eeefd9d2c4184a3f60f505a7851ec3ff16eb7bf0)** to **[e6a4ae2](https://github.com/sagemath/sagetrac-mirror/commit/e6a4ae2b1f7f887b58a49af5c1607640c7821dde)**",
    "created_at": "2015-09-15T06:43:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18944#issuecomment-268651",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[eeefd9d](https://github.com/sagemath/sagetrac-mirror/commit/eeefd9d2c4184a3f60f505a7851ec3ff16eb7bf0)** to **[e6a4ae2](https://github.com/sagemath/sagetrac-mirror/commit/e6a4ae2b1f7f887b58a49af5c1607640c7821dde)**



---

archive/issue_events_251192.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-09-15T06:46:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18944#event-251192"
}
```



---

archive/issue_comments_268652.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nAlso `chain_polytope()` (not only `order_complex()`) relies on this (IMO) broken `maximal_chains()` -function. Hence I made an internal copy of it with name `_max_chains()`. At least all doctests pass now. For a user perspective everything should be as before, except that `partial`-option is gone.",
    "created_at": "2015-09-15T06:46:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18944#issuecomment-268652",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:8" align="right">Comment 8</div>

Also `chain_polytope()` (not only `order_complex()`) relies on this (IMO) broken `maximal_chains()` -function. Hence I made an internal copy of it with name `_max_chains()`. At least all doctests pass now. For a user perspective everything should be as before, except that `partial`-option is gone.



---

archive/issue_comments_268653.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nI agree with Kevin, bad input is bad input and you should not expect correct behavior. So there is no counterexample to the function working as documented, but we should raise an error when not given a saturated chain.",
    "created_at": "2015-09-16T15:10:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18944#issuecomment-268653",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:9" align="right">Comment 9</div>

I agree with Kevin, bad input is bad input and you should not expect correct behavior. So there is no counterexample to the function working as documented, but we should raise an error when not given a saturated chain.



---

archive/issue_events_251193.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-09-16T15:10:08Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18944#event-251193"
}
```



---

archive/issue_events_251194.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-09-16T15:10:08Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "milestone_number": null,
    "milestone_title": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18944#event-251194"
}
```



---

archive/issue_events_251195.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-09-16T15:10:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18944#event-251195"
}
```



---

archive/issue_events_251196.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-09-16T15:10:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18944#event-251196"
}
```



---

archive/issue_comments_268654.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nReplying to [@tscrim](#comment%3A9):\n> I agree with Kevin, bad input is bad input and you should not expect correct behavior. So there is no counterexample to the function working as documented, but we should raise an error when not given a saturated chain.\n\nShould `partial` be a saturated chain starting from some minimal element? Should it be ordered?\n\nAnd why it should be saturated? If `a`, `b` and `c` are comparable, then `maximal_chains(partial=[a,b,c])` can be well defined: return every maximal chain that contains all three elements. On the other hand, `chains()` have `exclude`-option, not `include`. (Of course there are FOUR ways to have argument like this: include some element, include all elements, do not include all elements, do not include any of elements.)\n\nI am quite sure that this function has been made just as a helper function, without thinking someone to use `partial` directly.",
    "created_at": "2015-09-16T15:52:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18944#issuecomment-268654",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:10" align="right">Comment 10</div>

Replying to [@tscrim](#comment%3A9):
> I agree with Kevin, bad input is bad input and you should not expect correct behavior. So there is no counterexample to the function working as documented, but we should raise an error when not given a saturated chain.

Should `partial` be a saturated chain starting from some minimal element? Should it be ordered?

And why it should be saturated? If `a`, `b` and `c` are comparable, then `maximal_chains(partial=[a,b,c])` can be well defined: return every maximal chain that contains all three elements. On the other hand, `chains()` have `exclude`-option, not `include`. (Of course there are FOUR ways to have argument like this: include some element, include all elements, do not include all elements, do not include any of elements.)

I am quite sure that this function has been made just as a helper function, without thinking someone to use `partial` directly.



---

archive/issue_events_251197.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-09-16T15:52:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18944#event-251197"
}
```



---

archive/issue_events_251198.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-09-16T15:52:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18944#event-251198"
}
```



---

archive/issue_comments_268655.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nThe code seems to be assuming that it is ordered:\n\n```\nsage: P.maximal_chains(partial=[0,1])\n[[0, 1, 3]]\nsage: P.maximal_chains(partial=[1,0])\n[[1, 0, 1, 3], [1, 0, 2, 3]]\n```\nThe documentation says \"begins with\", that is the saturated part. I'm not opposed to changing the behavior to removing the saturated condition, but it would make the code a lot more complex (i.e., likely non-recursive).",
    "created_at": "2015-09-16T16:00:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18944#issuecomment-268655",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:11" align="right">Comment 11</div>

The code seems to be assuming that it is ordered:

```
sage: P.maximal_chains(partial=[0,1])
[[0, 1, 3]]
sage: P.maximal_chains(partial=[1,0])
[[1, 0, 1, 3], [1, 0, 2, 3]]
```
The documentation says "begins with", that is the saturated part. I'm not opposed to changing the behavior to removing the saturated condition, but it would make the code a lot more complex (i.e., likely non-recursive).



---

archive/issue_comments_268656.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nReplying to [@tscrim](#comment%3A11):\n> I'm not opposed to changing the behavior to removing the saturated condition, but it would make the code a lot more complex (i.e., likely non-recursive).\n\nNot necessarily, as digraphs already have `all_paths(start, end)`. A PoC:\n\n```\nP = Posets.BooleanLattice(5)\ng = P.hasse_diagram()\nk = [1,11,31]\nfor x in [flatten(c) for c in CartesianProduct(*[g.all_paths(k[i],k[i+1]) for i in range(len(k)-1)])]:\n    print [x[i] for i in range(len(x)) if x[i] != x[i-1]]\n```\n\nBut in that case the name of the parameter should be `include`, not `partial`.\n\nI still think that we could remove it. Maybe with deprecation that mentions `_max_chains()`?",
    "created_at": "2015-09-16T17:15:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18944#issuecomment-268656",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:12" align="right">Comment 12</div>

Replying to [@tscrim](#comment%3A11):
> I'm not opposed to changing the behavior to removing the saturated condition, but it would make the code a lot more complex (i.e., likely non-recursive).

Not necessarily, as digraphs already have `all_paths(start, end)`. A PoC:

```
P = Posets.BooleanLattice(5)
g = P.hasse_diagram()
k = [1,11,31]
for x in [flatten(c) for c in CartesianProduct(*[g.all_paths(k[i],k[i+1]) for i in range(len(k)-1)])]:
    print [x[i] for i in range(len(x)) if x[i] != x[i-1]]
```

But in that case the name of the parameter should be `include`, not `partial`.

I still think that we could remove it. Maybe with deprecation that mentions `_max_chains()`?



---

archive/issue_comments_268657.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nIf it's easy and fast enough, then let's do it.\n\nI don't think we should remove `partial` as that just pushes useful (evident it is used in other parts of sage) functionality to a hidden place.",
    "created_at": "2015-09-16T17:51:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18944#issuecomment-268657",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:13" align="right">Comment 13</div>

If it's easy and fast enough, then let's do it.

I don't think we should remove `partial` as that just pushes useful (evident it is used in other parts of sage) functionality to a hidden place.



---

archive/issue_comments_268658.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nReplying to [@tscrim](#comment%3A13):\n\n> I don't think we should remove `partial` as that just pushes useful (evident it is used in other parts of sage) functionality to a hidden place.\n\nThis argument fails: use in other places (there is two) needs the broken behavior. But I guess we are not keeping public funtion `maximal_chains()` that returns trees that are not chains.",
    "created_at": "2015-09-17T05:01:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18944#issuecomment-268658",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:14" align="right">Comment 14</div>

Replying to [@tscrim](#comment%3A13):

> I don't think we should remove `partial` as that just pushes useful (evident it is used in other parts of sage) functionality to a hidden place.

This argument fails: use in other places (there is two) needs the broken behavior. But I guess we are not keeping public funtion `maximal_chains()` that returns trees that are not chains.



---

archive/issue_comments_268659.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nI am still wondering about this... Other parts of Sage relies on broken or non-defined behaviour of `partial` argument. It feels bad design.",
    "created_at": "2016-07-18T10:47:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18944#issuecomment-268659",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:15" align="right">Comment 15</div>

I am still wondering about this... Other parts of Sage relies on broken or non-defined behaviour of `partial` argument. It feels bad design.



---

archive/issue_comments_268660.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nReplying to [@jm58660](#comment%3A15):\n> I am still wondering about this... Other parts of Sage relies on broken or non-defined behaviour of `partial` argument. It feels bad design.\n\nWe will probably need to make adjustments to the other parts the break. I haven't checked (and/or don't remember) how much the other behavior relies on the current functionality. Also I still think we should not remove the `partial`, but maybe we should just have some checks on that input.",
    "created_at": "2016-07-18T14:48:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18944#issuecomment-268660",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:16" align="right">Comment 16</div>

Replying to [@jm58660](#comment%3A15):
> I am still wondering about this... Other parts of Sage relies on broken or non-defined behaviour of `partial` argument. It feels bad design.

We will probably need to make adjustments to the other parts the break. I haven't checked (and/or don't remember) how much the other behavior relies on the current functionality. Also I still think we should not remove the `partial`, but maybe we should just have some checks on that input.



---

archive/issue_comments_268661.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nReplying to [@tscrim](#comment%3A16):\n> Replying to [@jm58660](#comment%3A15):\n> > I am still wondering about this... Other parts of Sage relies on broken or non-defined behaviour of `partial` argument. It feels bad design.\n\n> \n> We will probably need to make adjustments to the other parts the break. I haven't checked (and/or don't remember) how much the other behavior relies on the current functionality. Also I still think we should not remove the `partial`, but maybe we should just have some checks on that input.\n\nThere are two places that depends on this broken behaviour. They are not hard to fix, if we do that in ugly but working way.\n\nCan you give examples of what you mean by \"partial maximal chain\"?\n\nFor `chains()` we have `exclude`-option. This `partial`-option would be something like `include`, I guess.",
    "created_at": "2016-07-19T08:28:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18944#issuecomment-268661",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:17" align="right">Comment 17</div>

Replying to [@tscrim](#comment%3A16):
> Replying to [@jm58660](#comment%3A15):
> > I am still wondering about this... Other parts of Sage relies on broken or non-defined behaviour of `partial` argument. It feels bad design.

> 
> We will probably need to make adjustments to the other parts the break. I haven't checked (and/or don't remember) how much the other behavior relies on the current functionality. Also I still think we should not remove the `partial`, but maybe we should just have some checks on that input.

There are two places that depends on this broken behaviour. They are not hard to fix, if we do that in ugly but working way.

Can you give examples of what you mean by "partial maximal chain"?

For `chains()` we have `exclude`-option. This `partial`-option would be something like `include`, I guess.



---

archive/issue_comments_268662.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nMy guess is like you said, that it that every maximal chain must contain elements (i.e., this partial maximal chain).",
    "created_at": "2016-07-19T20:33:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18944#issuecomment-268662",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:18" align="right">Comment 18</div>

My guess is like you said, that it that every maximal chain must contain elements (i.e., this partial maximal chain).



---

archive/issue_comments_268663.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nReplying to [@tscrim](#comment%3A18):\n> My guess is like you said, that it that every maximal chain must contain elements (i.e., this partial maximal chain).\n\nThen it conflicts with current behaviour. Try\n\n```\nP = Posets.BooleanLattice(3)\nP.maximal_chains([1])\n```\n\nHence we would need a deprecation in any case.",
    "created_at": "2016-07-20T15:34:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18944#issuecomment-268663",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:19" align="right">Comment 19</div>

Replying to [@tscrim](#comment%3A18):
> My guess is like you said, that it that every maximal chain must contain elements (i.e., this partial maximal chain).

Then it conflicts with current behaviour. Try

```
P = Posets.BooleanLattice(3)
P.maximal_chains([1])
```

Hence we would need a deprecation in any case.



---

archive/issue_comments_268664.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nSo the documentation indicates that this method should find all maximal chains that beings with `partial`. Hence, a priori, we don't actually require the result when given `partial` to be a maximal chain of the poset (or at least, whether that is a requirement is vague). We might just have to actually update the documentation and maybe deal with the cases when the partial is not some interval.",
    "created_at": "2016-07-20T15:51:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18944#issuecomment-268664",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:20" align="right">Comment 20</div>

So the documentation indicates that this method should find all maximal chains that beings with `partial`. Hence, a priori, we don't actually require the result when given `partial` to be a maximal chain of the poset (or at least, whether that is a requirement is vague). We might just have to actually update the documentation and maybe deal with the cases when the partial is not some interval.



---

archive/issue_comments_268665.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nReplying to [@tscrim](#comment%3A20):\n> We might just have to actually update the documentation and maybe deal with the cases when the partial is not some interval.\n\nBut two other functions require that the function gives list of elements that are not a chain.",
    "created_at": "2016-07-20T16:08:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18944#issuecomment-268665",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:21" align="right">Comment 21</div>

Replying to [@tscrim](#comment%3A20):
> We might just have to actually update the documentation and maybe deal with the cases when the partial is not some interval.

But two other functions require that the function gives list of elements that are not a chain.



---

archive/issue_comments_268666.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nLet us just fix the documentation.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/95921411b2f06f9ff6477f4f3d5e77621cc8ac52\">9592141</a></td><td><code>fix some doc in posets</code></td></tr></table>\n",
    "created_at": "2021-10-11T14:36:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18944#issuecomment-268666",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:22" align="right">Comment 22</div>

Let us just fix the documentation.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/95921411b2f06f9ff6477f4f3d5e77621cc8ac52">9592141</a></td><td><code>fix some doc in posets</code></td></tr></table>




---

archive/issue_comments_268667.json:
```json
{
    "body": "Changed commit from **[e6a4ae2](https://github.com/sagemath/sagetrac-mirror/commit/e6a4ae2b1f7f887b58a49af5c1607640c7821dde)** to **[9592141](https://github.com/sagemath/sagetrac-mirror/commit/95921411b2f06f9ff6477f4f3d5e77621cc8ac52)**",
    "created_at": "2021-10-11T14:36:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18944#issuecomment-268667",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[e6a4ae2](https://github.com/sagemath/sagetrac-mirror/commit/e6a4ae2b1f7f887b58a49af5c1607640c7821dde)** to **[9592141](https://github.com/sagemath/sagetrac-mirror/commit/95921411b2f06f9ff6477f4f3d5e77621cc8ac52)**



---

archive/issue_comments_268668.json:
```json
{
    "body": "Changed branch from **[u/jmantysalo/maximal_chains](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/maximal_chains)** to **[u/chapoton/18944](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/18944)**",
    "created_at": "2021-10-11T14:36:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18944#issuecomment-268668",
    "user": "https://github.com/fchapoton"
}
```

Changed branch from **[u/jmantysalo/maximal_chains](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/maximal_chains)** to **[u/chapoton/18944](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/18944)**



---

archive/issue_events_251199.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-10-11T14:36:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18944#event-251199"
}
```



---

archive/issue_events_251200.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-10-11T14:36:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18944#event-251200"
}
```



---

archive/issue_comments_268669.json:
```json
{
    "body": "Changed author from **Jori M\u00e4ntysalo** to **Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2021-10-11T14:36:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18944#issuecomment-268669",
    "user": "https://github.com/fchapoton"
}
```

Changed author from **Jori Mäntysalo** to **Frédéric Chapoton**



---

archive/issue_events_251201.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-10-11T18:22:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "milestone_number": null,
    "milestone_title": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18944#event-251201"
}
```



---

archive/issue_events_251202.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-10-11T18:22:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18944#event-251202"
}
```



---

archive/issue_events_251203.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-10-12T00:26:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18944#event-251203"
}
```



---

archive/issue_events_251204.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-10-12T00:26:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18944#event-251204"
}
```



---

archive/issue_comments_268670.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nLGTM.",
    "created_at": "2021-10-12T00:26:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18944#issuecomment-268670",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:24" align="right">Comment 24</div>

LGTM.



---

archive/issue_comments_268671.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2021-10-12T00:26:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18944#issuecomment-268671",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_268672.json:
```json
{
    "body": "Changed branch from **[u/chapoton/18944](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/18944)** to **[9592141](https://github.com/sagemath/sagetrac-mirror/commit/95921411b2f06f9ff6477f4f3d5e77621cc8ac52)**",
    "created_at": "2021-10-13T22:50:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18944#issuecomment-268672",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/chapoton/18944](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/18944)** to **[9592141](https://github.com/sagemath/sagetrac-mirror/commit/95921411b2f06f9ff6477f4f3d5e77621cc8ac52)**



---

archive/issue_events_251205.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-10-13T22:50:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18944#event-251205"
}
```



---

archive/issue_events_251206.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "9b4152672a5f5dcc6bb254b85aea5dc5f219fe71",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-10-13T22:50:23Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/18944",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18944#event-251206"
}
```
