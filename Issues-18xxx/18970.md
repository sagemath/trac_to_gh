# Issue 18970: Log function and documentation revamp

archive/issues_018733.json:
```json
{
    "assignees": [],
    "body": "From https://groups.google.com/forum/?hl=en#!topic/sage-devel/hwm-7V8S3hE\n\n```\nsage: log(int(8),2)\nlog(8)/log(2)\nsage: log(8,int(2))\nlog(8)/log(2)\nsage: log(8,2)\n3\n\nAlso:\nsage: log(1/8,2)\nlog(1/8)/log(2)\n```\n\n```\nsage: ((-1)^(-I*log(3)/pi)).n()\n3.00000000000000\nsage: log(3,-1)\n...\nValueError: m must be positive\n```\n\nDepends on #21623\nDepends on #21517\nDepends on #21518\n\nBranch/Commit: **[`b0486c8`](https://github.com/sagemath/sagetrac-mirror/commit/b0486c8b520b278960485499f2b46fdacc2fce83)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Ralf Stephan**\n\nComponent: **symbolics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/18970_\n\n",
    "closed_at": "2017-10-29T10:32:17Z",
    "created_at": "2015-07-30T06:51:22Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Log function and documentation revamp",
    "type": "issue",
    "updated_at": "2017-10-29T10:32:17Z",
    "url": "https://github.com/sagemath/sage/issues/18970",
    "user": "https://github.com/rwst"
}
```
From https://groups.google.com/forum/?hl=en#!topic/sage-devel/hwm-7V8S3hE

```
sage: log(int(8),2)
log(8)/log(2)
sage: log(8,int(2))
log(8)/log(2)
sage: log(8,2)
3

Also:
sage: log(1/8,2)
log(1/8)/log(2)
```

```
sage: ((-1)^(-I*log(3)/pi)).n()
3.00000000000000
sage: log(3,-1)
...
ValueError: m must be positive
```

Depends on #21623
Depends on #21517
Depends on #21518

Branch/Commit: **[`b0486c8`](https://github.com/sagemath/sagetrac-mirror/commit/b0486c8b520b278960485499f2b46fdacc2fce83)**

Reviewer: **Travis Scrimshaw**

Author: **Ralf Stephan**

Component: **symbolics**

_Issue created by migration from https://trac.sagemath.org/ticket/18970_





---

archive/issue_events_266889.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-07-30T06:51:22Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "milestone_number": null,
    "milestone_title": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18970#event-266889"
}
```



---

archive/issue_events_266890.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-07-30T06:51:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
    "label_color": "0000ff",
    "label_name": "c: symbolics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18970#event-266890"
}
```



---

archive/issue_events_266891.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-07-30T06:51:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18970#event-266891"
}
```



---

archive/issue_events_266892.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-07-30T06:51:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18970#event-266892"
}
```



---

archive/issue_events_266893.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-07-30T06:51:59Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "title_is": "always simplify log(a^m,a) to m for any a,m coercible to Integer",
    "title_was": "always simplify log(a^m,a) to m for any m coercible to Integer",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18970#event-266893"
}
```



---

archive/issue_comments_266529.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,5 +7,9 @@\n log(8)/log(2)\n sage: log(8,2)\n 3\n+\n+Also:\n+sage: log(1/8,2)\n+log(1/8)/log(2)\n ```\n \n``````\n",
    "created_at": "2015-07-30T06:53:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266529",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,5 +7,9 @@
 log(8)/log(2)
 sage: log(8,2)
 3
+
+Also:
+sage: log(1/8,2)
+log(1/8)/log(2)
 ```
 
``````




---

archive/issue_comments_266530.json:
```json
{
    "body": "Branch: **[u/rws/always_simplify_log_a_m_a__to_m_for_any_a_m_coercible_to_integer](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/always_simplify_log_a_m_a__to_m_for_any_a_m_coercible_to_integer)**",
    "created_at": "2015-07-30T07:41:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266530",
    "user": "https://github.com/rwst"
}
```

Branch: **[u/rws/always_simplify_log_a_m_a__to_m_for_any_a_m_coercible_to_integer](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/always_simplify_log_a_m_a__to_m_for_any_a_m_coercible_to_integer)**



---

archive/issue_comments_266531.json:
```json
{
    "body": "Author: **Ralf Stephan**",
    "created_at": "2015-07-30T07:42:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266531",
    "user": "https://github.com/rwst"
}
```

Author: **Ralf Stephan**



---

archive/issue_comments_266532.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0086ec09a89cbdf71ba5b718818dd2de324e892a\"><code>0086ec0</code></a></td><td><code>18970: always simplify log(a^m,a) if possible</code></td></tr></table>\n",
    "created_at": "2015-07-30T07:42:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266532",
    "user": "https://github.com/rwst"
}
```

<div id="comment:4"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0086ec09a89cbdf71ba5b718818dd2de324e892a"><code>0086ec0</code></a></td><td><code>18970: always simplify log(a^m,a) if possible</code></td></tr></table>




---

archive/issue_events_266894.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-07-30T07:42:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18970#event-266894"
}
```



---

archive/issue_comments_266533.json:
```json
{
    "body": "Commit: **[`0086ec0`](https://github.com/sagemath/sagetrac-mirror/commit/0086ec09a89cbdf71ba5b718818dd2de324e892a)**",
    "created_at": "2015-07-30T07:42:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266533",
    "user": "https://github.com/rwst"
}
```

Commit: **[`0086ec0`](https://github.com/sagemath/sagetrac-mirror/commit/0086ec09a89cbdf71ba5b718818dd2de324e892a)**



---

archive/issue_comments_266534.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/92d9762ad28880ef81a4781a0eee34b50accc1c6\"><code>92d9762</code></a></td><td><code>18970: fix</code></td></tr></table>\n",
    "created_at": "2015-07-30T07:56:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266534",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/92d9762ad28880ef81a4781a0eee34b50accc1c6"><code>92d9762</code></a></td><td><code>18970: fix</code></td></tr></table>




---

archive/issue_comments_266535.json:
```json
{
    "body": "Changed commit from **[`0086ec0`](https://github.com/sagemath/sagetrac-mirror/commit/0086ec09a89cbdf71ba5b718818dd2de324e892a)** to **[`92d9762`](https://github.com/sagemath/sagetrac-mirror/commit/92d9762ad28880ef81a4781a0eee34b50accc1c6)**",
    "created_at": "2015-07-30T07:56:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266535",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0086ec0`](https://github.com/sagemath/sagetrac-mirror/commit/0086ec09a89cbdf71ba5b718818dd2de324e892a)** to **[`92d9762`](https://github.com/sagemath/sagetrac-mirror/commit/92d9762ad28880ef81a4781a0eee34b50accc1c6)**



---

archive/issue_events_266895.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2015-07-30T08:21:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18970#event-266895"
}
```



---

archive/issue_events_266896.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2015-07-30T08:21:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18970#event-266896"
}
```



---

archive/issue_comments_266536.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nBefore this patch\n\n```\nsage: %timeit log(QQ(8),2)\nThe slowest run took 5.08 times longer than the fastest. This could mean that an intermediate result is being cached \n10000 loops, best of 3: 39.4 \u00b5s per loop\nsage: %timeit log(QQ(8),3)\n10000 loops, best of 3: 38.1 \u00b5s per loop\nsage: %timeit log(ZZ(8),3)\n10000 loops, best of 3: 32.8 \u00b5s per loop\nsage: %timeit log(ZZ(8),2)\nThe slowest run took 14.52 times longer than the fastest. This could mean that an intermediate result is being cached \n1000000 loops, best of 3: 1.12 \u00b5s per loop\n```\nAfter\n\n```\nsage: %timeit log(QQ(8),3)\nThe slowest run took 37.28 times longer than the fastest. This could mean that an intermediate result is being cached \n10000 loops, best of 3: 48.8 \u00b5s per loop\nsage: %timeit log(QQ(8),2)\nThe slowest run took 8.69 times longer than the fastest. This could mean that an intermediate result is being cached \n100000 loops, best of 3: 5.43 \u00b5s per loop\nsage: %timeit log(ZZ(8),3)\n10000 loops, best of 3: 48.4 \u00b5s per loop\nsage: %timeit log(ZZ(8),2)\nThe slowest run took 8.80 times longer than the fastest. This could mean that an intermediate result is being cached \n100000 loops, best of 3: 5.34 \u00b5s per loop\n```\n\nI've repeated (differently) it due to the caching-warnings. Before\n\n```\nsage: timeit('log(QQ(8),3)', number=1, repeat=1)\n1 loops, best of 1: 191 \u00b5s per loop\nsage: timeit('log(QQ(8),2)', number=1, repeat=1)\n1 loops, best of 1: 150 \u00b5s per loop\nsage: timeit('log(ZZ(8),3)', number=1, repeat=1)\n1 loops, best of 1: 125 \u00b5s per loop\nsage: timeit('log(ZZ(8),2)', number=1, repeat=1)\n1 loops, best of 1: 24.1 \u00b5s per loop\n```\nAfter\n\n```\nsage: timeit('log(QQ(8),3)', number=1, repeat=1)\n1 loops, best of 1: 1.93 ms per loop\nsage: timeit('log(QQ(8),2)', number=1, repeat=1)\n1 loops, best of 1: 45.1 \u00b5s per loop\nsage: timeit('log(ZZ(8),3)', number=1, repeat=1)\n1 loops, best of 1: 158 \u00b5s per loop\nsage: timeit('log(ZZ(8),2)', number=1, repeat=1)\n1 loops, best of 1: 45.1 \u00b5s per loop\n```\n\nIn particular `log(QQ(8),3)` becomes much slower (and only `log(QQ(8),2)` gains speed).",
    "created_at": "2015-07-30T08:21:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266536",
    "user": "https://github.com/dkrenn"
}
```

<div id="comment:6" align="right">comment:6</div>

Before this patch

```
sage: %timeit log(QQ(8),2)
The slowest run took 5.08 times longer than the fastest. This could mean that an intermediate result is being cached 
10000 loops, best of 3: 39.4 µs per loop
sage: %timeit log(QQ(8),3)
10000 loops, best of 3: 38.1 µs per loop
sage: %timeit log(ZZ(8),3)
10000 loops, best of 3: 32.8 µs per loop
sage: %timeit log(ZZ(8),2)
The slowest run took 14.52 times longer than the fastest. This could mean that an intermediate result is being cached 
1000000 loops, best of 3: 1.12 µs per loop
```
After

```
sage: %timeit log(QQ(8),3)
The slowest run took 37.28 times longer than the fastest. This could mean that an intermediate result is being cached 
10000 loops, best of 3: 48.8 µs per loop
sage: %timeit log(QQ(8),2)
The slowest run took 8.69 times longer than the fastest. This could mean that an intermediate result is being cached 
100000 loops, best of 3: 5.43 µs per loop
sage: %timeit log(ZZ(8),3)
10000 loops, best of 3: 48.4 µs per loop
sage: %timeit log(ZZ(8),2)
The slowest run took 8.80 times longer than the fastest. This could mean that an intermediate result is being cached 
100000 loops, best of 3: 5.34 µs per loop
```

I've repeated (differently) it due to the caching-warnings. Before

```
sage: timeit('log(QQ(8),3)', number=1, repeat=1)
1 loops, best of 1: 191 µs per loop
sage: timeit('log(QQ(8),2)', number=1, repeat=1)
1 loops, best of 1: 150 µs per loop
sage: timeit('log(ZZ(8),3)', number=1, repeat=1)
1 loops, best of 1: 125 µs per loop
sage: timeit('log(ZZ(8),2)', number=1, repeat=1)
1 loops, best of 1: 24.1 µs per loop
```
After

```
sage: timeit('log(QQ(8),3)', number=1, repeat=1)
1 loops, best of 1: 1.93 ms per loop
sage: timeit('log(QQ(8),2)', number=1, repeat=1)
1 loops, best of 1: 45.1 µs per loop
sage: timeit('log(ZZ(8),3)', number=1, repeat=1)
1 loops, best of 1: 158 µs per loop
sage: timeit('log(ZZ(8),2)', number=1, repeat=1)
1 loops, best of 1: 45.1 µs per loop
```

In particular `log(QQ(8),3)` becomes much slower (and only `log(QQ(8),2)` gains speed).



---

archive/issue_comments_266537.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\n\n```\nsage: log(QQ(8),2).parent()\nInteger Ring\n```\nwhich is a different behavior compared to the common/similar arithmetic operations (e.g. `(QQ(2)^ZZ(1)).parent()` is `Rational Field` and not `Integer Ring`) and I would expect that the logarithm of a rational is again a rational (if possible) or something where QQ coerces into (but not out of something which coerces into QQ).",
    "created_at": "2015-07-30T08:26:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266537",
    "user": "https://github.com/dkrenn"
}
```

<div id="comment:7" align="right">comment:7</div>


```
sage: log(QQ(8),2).parent()
Integer Ring
```
which is a different behavior compared to the common/similar arithmetic operations (e.g. `(QQ(2)^ZZ(1)).parent()` is `Rational Field` and not `Integer Ring`) and I would expect that the logarithm of a rational is again a rational (if possible) or something where QQ coerces into (but not out of something which coerces into QQ).



---

archive/issue_comments_266538.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nIs this a one-time comment, or do you plan to review to the end?",
    "created_at": "2015-07-30T08:56:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266538",
    "user": "https://github.com/rwst"
}
```

<div id="comment:8" align="right">comment:8</div>

Is this a one-time comment, or do you plan to review to the end?



---

archive/issue_comments_266539.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@rwst](#comment:8):\n> Is this a one-time comment, or do you plan to review to the end?\n\nDoes this make a difference on how to react to my comment? ;) ....or more seriously: I am not sure if I feel qualified enough to review a change in the `log`-function. I just saw the discussion on sage-devel and looked into the ticket and decided to give some comments.",
    "created_at": "2015-07-30T09:18:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266539",
    "user": "https://github.com/dkrenn"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@rwst](#comment:8):
> Is this a one-time comment, or do you plan to review to the end?

Does this make a difference on how to react to my comment? ;) ....or more seriously: I am not sure if I feel qualified enough to review a change in the `log`-function. I just saw the discussion on sage-devel and looked into the ticket and decided to give some comments.



---

archive/issue_events_266897.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2016-08-29T18:40:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "milestone_number": null,
    "milestone_title": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18970#event-266897"
}
```



---

archive/issue_events_266898.json:
```json
{
    "actor": "https://github.com/nexttime",
    "created_at": "2016-08-29T18:40:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18970#event-266898"
}
```



---

archive/issue_comments_266540.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nThe code at hand unconditionally tries to coerce the arguments into ZZ,QQ instead of checking the type first. Apart from the speed issue it also would benefit from moving completely into GiNaC: atm some cases are intercepted unnecessarily in `Function_log.__call__` which itself awkwardly calls Pynac.",
    "created_at": "2016-08-30T15:03:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266540",
    "user": "https://github.com/rwst"
}
```

<div id="comment:11" align="right">comment:11</div>

The code at hand unconditionally tries to coerce the arguments into ZZ,QQ instead of checking the type first. Apart from the speed issue it also would benefit from moving completely into GiNaC: atm some cases are intercepted unnecessarily in `Function_log.__call__` which itself awkwardly calls Pynac.



---

archive/issue_events_266899.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-08-30T15:03:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18970#event-266899"
}
```



---

archive/issue_events_266900.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-08-30T15:03:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18970#event-266900"
}
```



---

archive/issue_comments_266541.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI guess some of the speed regression is due to the at least partially redundant checking whether `arg == base**v`, and of course now *in addition* computing the valuation first in case the latter does *not* hold.  (At least it seemed to when I looked at it yesterday...)\n\nNot sure how much the probably superfluous coercion contributes.",
    "created_at": "2016-08-30T15:28:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266541",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:12" align="right">comment:12</div>

I guess some of the speed regression is due to the at least partially redundant checking whether `arg == base**v`, and of course now *in addition* computing the valuation first in case the latter does *not* hold.  (At least it seemed to when I looked at it yesterday...)

Not sure how much the probably superfluous coercion contributes.



---

archive/issue_comments_266542.json:
```json
{
    "body": "Changed branch from **[u/rws/always_simplify_log_a_m_a__to_m_for_any_a_m_coercible_to_integer](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/always_simplify_log_a_m_a__to_m_for_any_a_m_coercible_to_integer)** to **[u/rws/18970-1](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/18970-1)**",
    "created_at": "2016-09-07T08:13:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266542",
    "user": "https://github.com/rwst"
}
```

Changed branch from **[u/rws/always_simplify_log_a_m_a__to_m_for_any_a_m_coercible_to_integer](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/always_simplify_log_a_m_a__to_m_for_any_a_m_coercible_to_integer)** to **[u/rws/18970-1](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/18970-1)**



---

archive/issue_comments_266543.json:
```json
{
    "body": "Dependencies: **pynac-0.6.91**",
    "created_at": "2016-09-07T08:15:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266543",
    "user": "https://github.com/rwst"
}
```

Dependencies: **pynac-0.6.91**



---

archive/issue_comments_266544.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nNew branch depends on Pynac git master.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11a81ee44404bf5baa8d2de942796f44f785de4c\"><code>11a81ee</code></a></td><td><code>18970: add two-arg log()</code></td></tr></table>\n",
    "created_at": "2016-09-07T08:15:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266544",
    "user": "https://github.com/rwst"
}
```

<div id="comment:14" align="right">comment:14</div>

New branch depends on Pynac git master.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11a81ee44404bf5baa8d2de942796f44f785de4c"><code>11a81ee</code></a></td><td><code>18970: add two-arg log()</code></td></tr></table>




---

archive/issue_comments_266545.json:
```json
{
    "body": "Changed commit from **[`92d9762`](https://github.com/sagemath/sagetrac-mirror/commit/92d9762ad28880ef81a4781a0eee34b50accc1c6)** to **[`11a81ee`](https://github.com/sagemath/sagetrac-mirror/commit/11a81ee44404bf5baa8d2de942796f44f785de4c)**",
    "created_at": "2016-09-07T08:15:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266545",
    "user": "https://github.com/rwst"
}
```

Changed commit from **[`92d9762`](https://github.com/sagemath/sagetrac-mirror/commit/92d9762ad28880ef81a4781a0eee34b50accc1c6)** to **[`11a81ee`](https://github.com/sagemath/sagetrac-mirror/commit/11a81ee44404bf5baa8d2de942796f44f785de4c)**



---

archive/issue_comments_266546.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nTimings with this branch. Before:\n\n```\nsage: %timeit log(QQ(8),2)\nThe slowest run took 10.96 times longer than the fastest. This could mean that an intermediate result is being cached.\n10000 loops, best of 3: 40.1 \u00b5s per loop\nsage: %timeit log(QQ(8),2)\n10000 loops, best of 3: 40.2 \u00b5s per loop\nsage: %timeit log(QQ(8),3)\n10000 loops, best of 3: 40.5 \u00b5s per loop\nsage: %timeit log(ZZ(8),3)\n10000 loops, best of 3: 34.4 \u00b5s per loop\nsage: %timeit log(ZZ(8),2)\nThe slowest run took 19.11 times longer than the fastest. This could mean that an intermediate result is being cached.\n1000000 loops, best of 3: 886 ns per loop\n```\nAfter:\n\n```\nsage: %timeit log(QQ(8),2)\nThe slowest run took 15.53 times longer than the fastest. This could mean that an intermediate result is being cached.\n10000 loops, best of 3: 26.7 \u00b5s per loop\nsage: %timeit log(QQ(8),3)\nThe slowest run took 10.80 times longer than the fastest. This could mean that an intermediate result is being cached.\n10000 loops, best of 3: 26.8 \u00b5s per loop\nsage: %timeit log(ZZ(8),3)\n10000 loops, best of 3: 30.2 \u00b5s per loop\nsage: %timeit log(ZZ(8),2)\nThe slowest run took 17.37 times longer than the fastest. This could mean that an intermediate result is being cached.\n1000000 loops, best of 3: 686 ns per loop\n```\nThe single run measurements vary so much from run to run that I refrain from giving them here. The After values of `timeit('log(QQ(8),3)', number=1, repeat=1)` are however in the same range as the Before values (as well as the others).",
    "created_at": "2016-09-07T08:32:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266546",
    "user": "https://github.com/rwst"
}
```

<div id="comment:15" align="right">comment:15</div>

Timings with this branch. Before:

```
sage: %timeit log(QQ(8),2)
The slowest run took 10.96 times longer than the fastest. This could mean that an intermediate result is being cached.
10000 loops, best of 3: 40.1 µs per loop
sage: %timeit log(QQ(8),2)
10000 loops, best of 3: 40.2 µs per loop
sage: %timeit log(QQ(8),3)
10000 loops, best of 3: 40.5 µs per loop
sage: %timeit log(ZZ(8),3)
10000 loops, best of 3: 34.4 µs per loop
sage: %timeit log(ZZ(8),2)
The slowest run took 19.11 times longer than the fastest. This could mean that an intermediate result is being cached.
1000000 loops, best of 3: 886 ns per loop
```
After:

```
sage: %timeit log(QQ(8),2)
The slowest run took 15.53 times longer than the fastest. This could mean that an intermediate result is being cached.
10000 loops, best of 3: 26.7 µs per loop
sage: %timeit log(QQ(8),3)
The slowest run took 10.80 times longer than the fastest. This could mean that an intermediate result is being cached.
10000 loops, best of 3: 26.8 µs per loop
sage: %timeit log(ZZ(8),3)
10000 loops, best of 3: 30.2 µs per loop
sage: %timeit log(ZZ(8),2)
The slowest run took 17.37 times longer than the fastest. This could mean that an intermediate result is being cached.
1000000 loops, best of 3: 686 ns per loop
```
The single run measurements vary so much from run to run that I refrain from giving them here. The After values of `timeit('log(QQ(8),3)', number=1, repeat=1)` are however in the same range as the Before values (as well as the others).



---

archive/issue_comments_266547.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -13,3 +13,10 @@\n log(1/8)/log(2)\n ```\n \n+```\n+sage: ((-1)^(-I*log(3)/pi)).n()\n+3.00000000000000\n+sage: log(3,-1)\n+...\n+ValueError: m must be positive\n+```\n``````\n",
    "created_at": "2016-09-07T15:11:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266547",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -13,3 +13,10 @@
 log(1/8)/log(2)
 ```
 
+```
+sage: ((-1)^(-I*log(3)/pi)).n()
+3.00000000000000
+sage: log(3,-1)
+...
+ValueError: m must be positive
+```
``````




---

archive/issue_events_266901.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-09-07T15:11:22Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "title_is": "Log function bugs with int and negative base",
    "title_was": "always simplify log(a^m,a) to m for any a,m coercible to Integer",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18970#event-266901"
}
```



---

archive/issue_comments_266548.json:
```json
{
    "body": "Changed commit from **[`11a81ee`](https://github.com/sagemath/sagetrac-mirror/commit/11a81ee44404bf5baa8d2de942796f44f785de4c)** to none",
    "created_at": "2016-09-18T06:22:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266548",
    "user": "https://github.com/rwst"
}
```

Changed commit from **[`11a81ee`](https://github.com/sagemath/sagetrac-mirror/commit/11a81ee44404bf5baa8d2de942796f44f785de4c)** to none



---

archive/issue_comments_266549.json:
```json
{
    "body": "Changed dependencies from **pynac-0.6.91** to **pynac-0.6.91, #21517, #21518**",
    "created_at": "2016-09-18T06:22:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266549",
    "user": "https://github.com/rwst"
}
```

Changed dependencies from **pynac-0.6.91** to **pynac-0.6.91, #21517, #21518**



---

archive/issue_comments_266550.json:
```json
{
    "body": "Changed branch from **[u/rws/18970-1](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/18970-1)** to none",
    "created_at": "2016-09-18T06:22:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266550",
    "user": "https://github.com/rwst"
}
```

Changed branch from **[u/rws/18970-1](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/18970-1)** to none



---

archive/issue_comments_266551.json:
```json
{
    "body": "Branch: **[u/rws/log_function_bugs_with_int_and_negative_base](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/log_function_bugs_with_int_and_negative_base)**",
    "created_at": "2016-10-02T14:43:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266551",
    "user": "https://github.com/rwst"
}
```

Branch: **[u/rws/log_function_bugs_with_int_and_negative_base](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/log_function_bugs_with_int_and_negative_base)**



---

archive/issue_comments_266552.json:
```json
{
    "body": "Commit: **[`02427f6`](https://github.com/sagemath/sagetrac-mirror/commit/02427f6475206379a32c0ac9119d83d7832a34c4)**",
    "created_at": "2016-10-02T14:45:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266552",
    "user": "https://github.com/rwst"
}
```

Commit: **[`02427f6`](https://github.com/sagemath/sagetrac-mirror/commit/02427f6475206379a32c0ac9119d83d7832a34c4)**



---

archive/issue_comments_266553.json:
```json
{
    "body": "Changed dependencies from **pynac-0.6.91, #21517, #21518** to **#21623, #21517, #21518**",
    "created_at": "2016-10-02T14:45:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266553",
    "user": "https://github.com/rwst"
}
```

Changed dependencies from **pynac-0.6.91, #21517, #21518** to **#21623, #21517, #21518**



---

archive/issue_comments_266554.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/02427f6475206379a32c0ac9119d83d7832a34c4\"><code>02427f6</code></a></td><td><code>redo log function</code></td></tr></table>\n",
    "created_at": "2016-10-02T14:45:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266554",
    "user": "https://github.com/rwst"
}
```

<div id="comment:19"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/02427f6475206379a32c0ac9119d83d7832a34c4"><code>02427f6</code></a></td><td><code>redo log function</code></td></tr></table>




---

archive/issue_events_266902.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-10-02T14:47:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18970#event-266902"
}
```



---

archive/issue_events_266903.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-10-02T14:47:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18970#event-266903"
}
```



---

archive/issue_comments_266555.json:
```json
{
    "body": "Changed commit from **[`02427f6`](https://github.com/sagemath/sagetrac-mirror/commit/02427f6475206379a32c0ac9119d83d7832a34c4)** to **[`456cc14`](https://github.com/sagemath/sagetrac-mirror/commit/456cc14d40a5dd9f1e7924bea9b97e097dd10b5d)**",
    "created_at": "2016-10-25T06:08:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266555",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`02427f6`](https://github.com/sagemath/sagetrac-mirror/commit/02427f6475206379a32c0ac9119d83d7832a34c4)** to **[`456cc14`](https://github.com/sagemath/sagetrac-mirror/commit/456cc14d40a5dd9f1e7924bea9b97e097dd10b5d)**



---

archive/issue_comments_266556.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/584c4f3b1e9e3fd35ada6ea282e71c38d6da88e8\"><code>584c4f3</code></a></td><td><code>Merge branch 'develop' into t/18970/log_function_bugs_with_int_and_negative_base</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/456cc14d40a5dd9f1e7924bea9b97e097dd10b5d\"><code>456cc14</code></a></td><td><code>18970: doc restructuring to get the most out of typing log?</code></td></tr></table>\n",
    "created_at": "2016-10-25T06:08:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266556",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/584c4f3b1e9e3fd35ada6ea282e71c38d6da88e8"><code>584c4f3</code></a></td><td><code>Merge branch 'develop' into t/18970/log_function_bugs_with_int_and_negative_base</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/456cc14d40a5dd9f1e7924bea9b97e097dd10b5d"><code>456cc14</code></a></td><td><code>18970: doc restructuring to get the most out of typing log?</code></td></tr></table>




---

archive/issue_events_266904.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-10-25T06:09:25Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "title_is": "Log function and documentation revamp",
    "title_was": "Log function bugs with int and negative base",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18970#event-266904"
}
```



---

archive/issue_comments_266557.json:
```json
{
    "body": "Changed branch from **[u/rws/log_function_bugs_with_int_and_negative_base](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/log_function_bugs_with_int_and_negative_base)** to **[u/rws/18970](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/18970)**",
    "created_at": "2016-11-07T06:41:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266557",
    "user": "https://github.com/rwst"
}
```

Changed branch from **[u/rws/log_function_bugs_with_int_and_negative_base](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/log_function_bugs_with_int_and_negative_base)** to **[u/rws/18970](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/18970)**



---

archive/issue_comments_266558.json:
```json
{
    "body": "Changed branch from **[u/rws/18970](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/18970)** to **[u/rws/18970-2](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/18970-2)**",
    "created_at": "2017-04-13T07:52:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266558",
    "user": "https://github.com/rwst"
}
```

Changed branch from **[u/rws/18970](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/18970)** to **[u/rws/18970-2](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/18970-2)**



---

archive/issue_comments_266559.json:
```json
{
    "body": "Changed commit from **[`456cc14`](https://github.com/sagemath/sagetrac-mirror/commit/456cc14d40a5dd9f1e7924bea9b97e097dd10b5d)** to **[`838c1fd`](https://github.com/sagemath/sagetrac-mirror/commit/838c1fd515514355bc2ad86a866514667109b60d)**",
    "created_at": "2017-04-13T07:53:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266559",
    "user": "https://github.com/rwst"
}
```

Changed commit from **[`456cc14`](https://github.com/sagemath/sagetrac-mirror/commit/456cc14d40a5dd9f1e7924bea9b97e097dd10b5d)** to **[`838c1fd`](https://github.com/sagemath/sagetrac-mirror/commit/838c1fd515514355bc2ad86a866514667109b60d)**



---

archive/issue_comments_266560.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nCompleted coverage.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/838c1fd515514355bc2ad86a866514667109b60d\"><code>838c1fd</code></a></td><td><code>18970: Log function and documentation revamp</code></td></tr></table>\n",
    "created_at": "2017-04-13T07:53:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266560",
    "user": "https://github.com/rwst"
}
```

<div id="comment:25" align="right">comment:25</div>

Completed coverage.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/838c1fd515514355bc2ad86a866514667109b60d"><code>838c1fd</code></a></td><td><code>18970: Log function and documentation revamp</code></td></tr></table>




---

archive/issue_events_266905.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-04-13T07:54:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18970#event-266905"
}
```



---

archive/issue_events_266906.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-04-13T07:54:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18970#event-266906"
}
```



---

archive/issue_comments_266561.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3c340011c02cd3881b6661dc2114a1696ad81c8e\"><code>3c34001</code></a></td><td><code>Merge branch 'develop' into t/18970/18970-2</code></td></tr></table>\n",
    "created_at": "2017-08-24T13:30:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266561",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3c340011c02cd3881b6661dc2114a1696ad81c8e"><code>3c34001</code></a></td><td><code>Merge branch 'develop' into t/18970/18970-2</code></td></tr></table>




---

archive/issue_comments_266562.json:
```json
{
    "body": "Changed commit from **[`838c1fd`](https://github.com/sagemath/sagetrac-mirror/commit/838c1fd515514355bc2ad86a866514667109b60d)** to **[`3c34001`](https://github.com/sagemath/sagetrac-mirror/commit/3c340011c02cd3881b6661dc2114a1696ad81c8e)**",
    "created_at": "2017-08-24T13:30:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266562",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`838c1fd`](https://github.com/sagemath/sagetrac-mirror/commit/838c1fd515514355bc2ad86a866514667109b60d)** to **[`3c34001`](https://github.com/sagemath/sagetrac-mirror/commit/3c340011c02cd3881b6661dc2114a1696ad81c8e)**



---

archive/issue_events_266907.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-08-24T13:30:55Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18970#event-266907"
}
```



---

archive/issue_events_266908.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-08-24T13:30:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18970#event-266908"
}
```



---

archive/issue_events_266909.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-10-20T20:08:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18970#event-266909"
}
```



---

archive/issue_events_266910.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-10-20T20:08:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18970#event-266910"
}
```



---

archive/issue_comments_266563.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\ndoes not apply",
    "created_at": "2017-10-20T20:08:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266563",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:29" align="right">comment:29</div>

does not apply



---

archive/issue_comments_266564.json:
```json
{
    "body": "Changed commit from **[`3c34001`](https://github.com/sagemath/sagetrac-mirror/commit/3c340011c02cd3881b6661dc2114a1696ad81c8e)** to **[`e46bc47`](https://github.com/sagemath/sagetrac-mirror/commit/e46bc475d7e399d4e4d5c9785a0e1e84335a0f59)**",
    "created_at": "2017-10-21T05:57:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266564",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3c34001`](https://github.com/sagemath/sagetrac-mirror/commit/3c340011c02cd3881b6661dc2114a1696ad81c8e)** to **[`e46bc47`](https://github.com/sagemath/sagetrac-mirror/commit/e46bc475d7e399d4e4d5c9785a0e1e84335a0f59)**



---

archive/issue_comments_266565.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/94cc4a5dcf6c3e99407cc89ff210b0acde7cede6\"><code>94cc4a5</code></a></td><td><code>Merge branch 'develop' into t/18970/18970-2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e46bc475d7e399d4e4d5c9785a0e1e84335a0f59\"><code>e46bc47</code></a></td><td><code>18970: fix and robustify doctests</code></td></tr></table>\n",
    "created_at": "2017-10-21T05:57:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266565",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/94cc4a5dcf6c3e99407cc89ff210b0acde7cede6"><code>94cc4a5</code></a></td><td><code>Merge branch 'develop' into t/18970/18970-2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e46bc475d7e399d4e4d5c9785a0e1e84335a0f59"><code>e46bc47</code></a></td><td><code>18970: fix and robustify doctests</code></td></tr></table>




---

archive/issue_events_266911.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-21T05:57:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18970#event-266911"
}
```



---

archive/issue_events_266912.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-21T05:57:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18970#event-266912"
}
```



---

archive/issue_events_266913.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-10-23T23:26:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18970#event-266913"
}
```



---

archive/issue_events_266914.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-10-23T23:26:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18970#event-266914"
}
```



---

archive/issue_comments_266566.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nNeeds another rebase over beta9.",
    "created_at": "2017-10-23T23:26:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266566",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:32" align="right">comment:32</div>

Needs another rebase over beta9.



---

archive/issue_comments_266567.json:
```json
{
    "body": "Changed commit from **[`e46bc47`](https://github.com/sagemath/sagetrac-mirror/commit/e46bc475d7e399d4e4d5c9785a0e1e84335a0f59)** to **[`7ab331e`](https://github.com/sagemath/sagetrac-mirror/commit/7ab331ecfa18257d276d66b8eeda5d01616e54c5)**",
    "created_at": "2017-10-24T06:21:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266567",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e46bc47`](https://github.com/sagemath/sagetrac-mirror/commit/e46bc475d7e399d4e4d5c9785a0e1e84335a0f59)** to **[`7ab331e`](https://github.com/sagemath/sagetrac-mirror/commit/7ab331ecfa18257d276d66b8eeda5d01616e54c5)**



---

archive/issue_comments_266568.json:
```json
{
    "body": "<div id=\"comment:33\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ab331ecfa18257d276d66b8eeda5d01616e54c5\"><code>7ab331e</code></a></td><td><code>Merge branch 'develop' into t/18970/18970-2</code></td></tr></table>\n",
    "created_at": "2017-10-24T06:21:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266568",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:33"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ab331ecfa18257d276d66b8eeda5d01616e54c5"><code>7ab331e</code></a></td><td><code>Merge branch 'develop' into t/18970/18970-2</code></td></tr></table>




---

archive/issue_events_266915.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-24T06:22:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18970#event-266915"
}
```



---

archive/issue_events_266916.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-24T06:22:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18970#event-266916"
}
```



---

archive/issue_comments_266569.json:
```json
{
    "body": "Changed commit from **[`7ab331e`](https://github.com/sagemath/sagetrac-mirror/commit/7ab331ecfa18257d276d66b8eeda5d01616e54c5)** to **[`b3b9a52`](https://github.com/sagemath/sagetrac-mirror/commit/b3b9a525146b9a32e0c2e1bc77b1883255e239ec)**",
    "created_at": "2017-10-24T15:29:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266569",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7ab331e`](https://github.com/sagemath/sagetrac-mirror/commit/7ab331ecfa18257d276d66b8eeda5d01616e54c5)** to **[`b3b9a52`](https://github.com/sagemath/sagetrac-mirror/commit/b3b9a525146b9a32e0c2e1bc77b1883255e239ec)**



---

archive/issue_comments_266570.json:
```json
{
    "body": "<div id=\"comment:35\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b3b9a525146b9a32e0c2e1bc77b1883255e239ec\"><code>b3b9a52</code></a></td><td><code>18970: fix log usage</code></td></tr></table>\n",
    "created_at": "2017-10-24T15:29:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266570",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:35"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b3b9a525146b9a32e0c2e1bc77b1883255e239ec"><code>b3b9a52</code></a></td><td><code>18970: fix log usage</code></td></tr></table>




---

archive/issue_comments_266571.json:
```json
{
    "body": "Changed branch from **[u/rws/18970-2](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/18970-2)** to **[u/rws/18970-3](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/18970-3)**",
    "created_at": "2017-10-24T15:34:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266571",
    "user": "https://github.com/rwst"
}
```

Changed branch from **[u/rws/18970-2](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/18970-2)** to **[u/rws/18970-3](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/18970-3)**



---

archive/issue_comments_266572.json:
```json
{
    "body": "Changed commit from **[`b3b9a52`](https://github.com/sagemath/sagetrac-mirror/commit/b3b9a525146b9a32e0c2e1bc77b1883255e239ec)** to **[`b0486c8`](https://github.com/sagemath/sagetrac-mirror/commit/b0486c8b520b278960485499f2b46fdacc2fce83)**",
    "created_at": "2017-10-24T15:35:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266572",
    "user": "https://github.com/rwst"
}
```

Changed commit from **[`b3b9a52`](https://github.com/sagemath/sagetrac-mirror/commit/b3b9a525146b9a32e0c2e1bc77b1883255e239ec)** to **[`b0486c8`](https://github.com/sagemath/sagetrac-mirror/commit/b0486c8b520b278960485499f2b46fdacc2fce83)**



---

archive/issue_comments_266573.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nFixes were added, cruft removed, and it all squashed.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b0486c8b520b278960485499f2b46fdacc2fce83\"><code>b0486c8</code></a></td><td><code>18970: Log function and documentation revamp</code></td></tr></table>\n",
    "created_at": "2017-10-24T15:35:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266573",
    "user": "https://github.com/rwst"
}
```

<div id="comment:37" align="right">comment:37</div>

Fixes were added, cruft removed, and it all squashed.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b0486c8b520b278960485499f2b46fdacc2fce83"><code>b0486c8</code></a></td><td><code>18970: Log function and documentation revamp</code></td></tr></table>




---

archive/issue_comments_266574.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2017-10-25T14:58:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266574",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_266575.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nLGTM. Timings on my laptop with branch:\n\n```\nsage: %timeit log(QQ(8),2)\nThe slowest run took 29.31 times longer than the fastest. This could mean that an intermediate result is being cached.\n1000000 loops, best of 3: 1.57 \u00b5s per loop\nsage: %timeit log(QQ(8),3)\nThe slowest run took 4.03 times longer than the fastest. This could mean that an intermediate result is being cached.\n10000 loops, best of 3: 35.5 \u00b5s per loop\nsage: %timeit log(ZZ(8),3)\n10000 loops, best of 3: 33 \u00b5s per loop\nsage: %timeit log(ZZ(8),2)\nThe slowest run took 16.93 times longer than the fastest. This could mean that an intermediate result is being cached.\n1000000 loops, best of 3: 887 ns per loop\n```\nvs. with `develop`:\n\n```\nsage: %timeit log(QQ(8),2)\nThe slowest run took 14987.26 times longer than the fastest. This could mean that an intermediate result is being cached.\n1000000 loops, best of 3: 1.6 \u00b5s per loop\nsage: %timeit log(QQ(8),3)\n10000 loops, best of 3: 43.2 \u00b5s per loop\nsage: %timeit log(ZZ(8),3)\nThe slowest run took 4.42 times longer than the fastest. This could mean that an intermediate result is being cached.\n10000 loops, best of 3: 38.9 \u00b5s per loop\nsage: %timeit log(ZZ(8),2)\nThe slowest run took 14.23 times longer than the fastest. This could mean that an intermediate result is being cached.\n1000000 loops, best of 3: 1.06 \u00b5s per loop\n```",
    "created_at": "2017-10-25T14:58:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266575",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:38" align="right">comment:38</div>

LGTM. Timings on my laptop with branch:

```
sage: %timeit log(QQ(8),2)
The slowest run took 29.31 times longer than the fastest. This could mean that an intermediate result is being cached.
1000000 loops, best of 3: 1.57 µs per loop
sage: %timeit log(QQ(8),3)
The slowest run took 4.03 times longer than the fastest. This could mean that an intermediate result is being cached.
10000 loops, best of 3: 35.5 µs per loop
sage: %timeit log(ZZ(8),3)
10000 loops, best of 3: 33 µs per loop
sage: %timeit log(ZZ(8),2)
The slowest run took 16.93 times longer than the fastest. This could mean that an intermediate result is being cached.
1000000 loops, best of 3: 887 ns per loop
```
vs. with `develop`:

```
sage: %timeit log(QQ(8),2)
The slowest run took 14987.26 times longer than the fastest. This could mean that an intermediate result is being cached.
1000000 loops, best of 3: 1.6 µs per loop
sage: %timeit log(QQ(8),3)
10000 loops, best of 3: 43.2 µs per loop
sage: %timeit log(ZZ(8),3)
The slowest run took 4.42 times longer than the fastest. This could mean that an intermediate result is being cached.
10000 loops, best of 3: 38.9 µs per loop
sage: %timeit log(ZZ(8),2)
The slowest run took 14.23 times longer than the fastest. This could mean that an intermediate result is being cached.
1000000 loops, best of 3: 1.06 µs per loop
```



---

archive/issue_events_266917.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-10-25T14:58:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18970#event-266917"
}
```



---

archive/issue_events_266918.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-10-25T14:58:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18970#event-266918"
}
```



---

archive/issue_comments_266576.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nThanks.",
    "created_at": "2017-10-26T06:25:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266576",
    "user": "https://github.com/rwst"
}
```

<div id="comment:39" align="right">comment:39</div>

Thanks.



---

archive/issue_comments_266577.json:
```json
{
    "body": "Changed branch from **[u/rws/18970-3](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/18970-3)** to **[`b0486c8`](https://github.com/sagemath/sagetrac-mirror/commit/b0486c8b520b278960485499f2b46fdacc2fce83)**",
    "created_at": "2017-10-29T10:32:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18970#issuecomment-266577",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/rws/18970-3](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/18970-3)** to **[`b0486c8`](https://github.com/sagemath/sagetrac-mirror/commit/b0486c8b520b278960485499f2b46fdacc2fce83)**



---

archive/issue_events_266919.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-10-29T10:32:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18970#event-266919"
}
```



---

archive/issue_events_266920.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "d6f7f9e5bd768cab6fc40293c84e9b63956584d5",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-10-29T10:32:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/18970",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18970#event-266920"
}
```
