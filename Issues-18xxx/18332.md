# Issue 18332: is_one/is_integer/is_rational for number field elements

archive/issues_018095.json:
```json
{
    "body": "We add two methods `is_integer` and `is_rational` for number field elements.\n\nCurrently, the only way to test this is to do duck typing\n\n```\ndef is_integer(x):\n    try:\n        ZZ(x)\n        return True\n    except ValueError:\n        return False\n```\nwhich is rather expensive compared to what can be done.\n\n**Branch:** [8fa6326cc34cdb44566758832111cbbc3542f46a](https://github.com/sagemath/sagetrac-mirror/commit/8fa6326cc34cdb44566758832111cbbc3542f46a)\n\n**Reviewer:** Marc Mezzarobba\n\n**Author:** Vincent Delecroix\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/18332\n\n",
    "closed_at": "2015-05-05T00:32:28Z",
    "created_at": "2015-04-29T12:00:32Z",
    "labels": [
        "component: number fields"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.7",
    "title": "is_one/is_integer/is_rational for number field elements",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18332",
    "user": "https://github.com/videlec"
}
```
We add two methods `is_integer` and `is_rational` for number field elements.

Currently, the only way to test this is to do duck typing

```
def is_integer(x):
    try:
        ZZ(x)
        return True
    except ValueError:
        return False
```
which is rather expensive compared to what can be done.

**Branch:** [8fa6326cc34cdb44566758832111cbbc3542f46a](https://github.com/sagemath/sagetrac-mirror/commit/8fa6326cc34cdb44566758832111cbbc3542f46a)

**Reviewer:** Marc Mezzarobba

**Author:** Vincent Delecroix

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/18332





---

archive/issue_comments_322581.json:
```json
{
    "body": "<a id='comment:1'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e08010c103701ba560d0a31432fd67ed7b7de958\">e08010c</a></td><td><code>Trac 18332: is_integer and is_rational for number field elements</code></td></tr></table>\n",
    "created_at": "2015-04-29T12:11:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18332#issuecomment-322581",
    "user": "https://github.com/videlec"
}
```

<a id='comment:1'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e08010c103701ba560d0a31432fd67ed7b7de958">e08010c</a></td><td><code>Trac 18332: is_integer and is_rational for number field elements</code></td></tr></table>




---

archive/issue_comments_322582.json:
```json
{
    "body": "**Commit:** [e08010c103701ba560d0a31432fd67ed7b7de958](https://github.com/sagemath/sagetrac-mirror/commit/e08010c103701ba560d0a31432fd67ed7b7de958)",
    "created_at": "2015-04-29T12:11:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18332#issuecomment-322582",
    "user": "https://github.com/videlec"
}
```

**Commit:** [e08010c103701ba560d0a31432fd67ed7b7de958](https://github.com/sagemath/sagetrac-mirror/commit/e08010c103701ba560d0a31432fd67ed7b7de958)



---

archive/issue_comments_322583.json:
```json
{
    "body": "**Branch:** [u/vdelecroix/18332](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/18332)",
    "created_at": "2015-04-29T12:11:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18332#issuecomment-322583",
    "user": "https://github.com/videlec"
}
```

**Branch:** [u/vdelecroix/18332](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/18332)



---

archive/issue_comments_322584.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2015-04-29T12:11:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18332#issuecomment-322584",
    "user": "https://github.com/videlec"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_322585.json:
```json
{
    "body": "<a id='comment:2'></a>\nHi Vincent,\n\nIs there a reason to keep the old `is_rational_c()` methods?",
    "created_at": "2015-05-03T07:47:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18332#issuecomment-322585",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:2'></a>
Hi Vincent,

Is there a reason to keep the old `is_rational_c()` methods?



---

archive/issue_comments_322586.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/465271f1e9f0fa42b72cd050d590ea325d4175d6\">465271f</a></td><td><code>Trac 18332: remove is_rational_c, add is_one</code></td></tr></table>\n",
    "created_at": "2015-05-03T08:49:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18332#issuecomment-322586",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/465271f1e9f0fa42b72cd050d590ea325d4175d6">465271f</a></td><td><code>Trac 18332: remove is_rational_c, add is_one</code></td></tr></table>




---

archive/issue_comments_322587.json:
```json
{
    "body": "**Changing commit** from \"[e08010c103701ba560d0a31432fd67ed7b7de958](https://github.com/sagemath/sagetrac-mirror/commit/e08010c103701ba560d0a31432fd67ed7b7de958)\" to \"[465271f1e9f0fa42b72cd050d590ea325d4175d6](https://github.com/sagemath/sagetrac-mirror/commit/465271f1e9f0fa42b72cd050d590ea325d4175d6)\".",
    "created_at": "2015-05-03T08:49:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18332#issuecomment-322587",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[e08010c103701ba560d0a31432fd67ed7b7de958](https://github.com/sagemath/sagetrac-mirror/commit/e08010c103701ba560d0a31432fd67ed7b7de958)" to "[465271f1e9f0fa42b72cd050d590ea325d4175d6](https://github.com/sagemath/sagetrac-mirror/commit/465271f1e9f0fa42b72cd050d590ea325d4175d6)".



---

archive/issue_comments_322588.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [mmezzarobba](#comment%3A2):\n> Hi Vincent,\n> \n> Is there a reason to keep the old `is_rational_c()` methods?\n\n\nNo. Actually, this method was wrong since it returned `False` for `0`... I added a method `is_one` and rewrote `multiplicative_order`.",
    "created_at": "2015-05-03T08:51:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18332#issuecomment-322588",
    "user": "https://github.com/videlec"
}
```

<a id='comment:4'></a>
Replying to [mmezzarobba](#comment%3A2):
> Hi Vincent,
> 
> Is there a reason to keep the old `is_rational_c()` methods?


No. Actually, this method was wrong since it returned `False` for `0`... I added a method `is_one` and rewrote `multiplicative_order`.



---

archive/issue_events_058831.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/18332",
    "rename": {
        "from": "is_integer/is_rational for number field elements",
        "to": "is_one/is_integer/is_rational for number field elements"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18332#event-58831"
}
```



---

archive/issue_comments_322589.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [vdelecroix](#comment%3A4):\n> No. Actually, this method was wrong since it returned `False` for `0`...\n\n\nYes, thoug it didn't matter in the only place where it was used :-)\n\n> I added a method `is_one` and rewrote `multiplicative_order`.\n\n\nBut then I guess you'll want to declare `is_rational` and `is_one` as `cpdef`.",
    "created_at": "2015-05-03T09:16:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18332#issuecomment-322589",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:5'></a>
Replying to [vdelecroix](#comment%3A4):
> No. Actually, this method was wrong since it returned `False` for `0`...


Yes, thoug it didn't matter in the only place where it was used :-)

> I added a method `is_one` and rewrote `multiplicative_order`.


But then I guess you'll want to declare `is_rational` and `is_one` as `cpdef`.



---

archive/issue_comments_322590.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [mmezzarobba](#comment%3A5):\n> Replying to [vdelecroix](#comment%3A4):\n> > I added a method `is_one` and rewrote `multiplicative_order`.\n\n> \n> But then I guess you'll want to declare `is_rational` and `is_one` as `cpdef`.\n\n\nDo you think so? In `sage.structure.RingElement` the `is_one` method is declared as `def` with the following default implementation\n\n```\n    def is_one(self):\n        return self == self._parent.one()\n```\nBut it is true that it might be relatively intensively used in number fields. I will do that.",
    "created_at": "2015-05-03T10:16:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18332#issuecomment-322590",
    "user": "https://github.com/videlec"
}
```

<a id='comment:6'></a>
Replying to [mmezzarobba](#comment%3A5):
> Replying to [vdelecroix](#comment%3A4):
> > I added a method `is_one` and rewrote `multiplicative_order`.

> 
> But then I guess you'll want to declare `is_rational` and `is_one` as `cpdef`.


Do you think so? In `sage.structure.RingElement` the `is_one` method is declared as `def` with the following default implementation

```
    def is_one(self):
        return self == self._parent.one()
```
But it is true that it might be relatively intensively used in number fields. I will do that.



---

archive/issue_comments_322591.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8fa6326cc34cdb44566758832111cbbc3542f46a\">8fa6326</a></td><td><code>Trac 18332: two def -> cpdef + documentation</code></td></tr></table>\n",
    "created_at": "2015-05-03T10:33:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18332#issuecomment-322591",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8fa6326cc34cdb44566758832111cbbc3542f46a">8fa6326</a></td><td><code>Trac 18332: two def -> cpdef + documentation</code></td></tr></table>




---

archive/issue_comments_322592.json:
```json
{
    "body": "**Changing commit** from \"[465271f1e9f0fa42b72cd050d590ea325d4175d6](https://github.com/sagemath/sagetrac-mirror/commit/465271f1e9f0fa42b72cd050d590ea325d4175d6)\" to \"[8fa6326cc34cdb44566758832111cbbc3542f46a](https://github.com/sagemath/sagetrac-mirror/commit/8fa6326cc34cdb44566758832111cbbc3542f46a)\".",
    "created_at": "2015-05-03T10:33:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18332#issuecomment-322592",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[465271f1e9f0fa42b72cd050d590ea325d4175d6](https://github.com/sagemath/sagetrac-mirror/commit/465271f1e9f0fa42b72cd050d590ea325d4175d6)" to "[8fa6326cc34cdb44566758832111cbbc3542f46a](https://github.com/sagemath/sagetrac-mirror/commit/8fa6326cc34cdb44566758832111cbbc3542f46a)".



---

archive/issue_comments_322593.json:
```json
{
    "body": "**Reviewer:** Marc Mezzarobba",
    "created_at": "2015-05-04T12:06:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18332#issuecomment-322593",
    "user": "https://github.com/mezzarobba"
}
```

**Reviewer:** Marc Mezzarobba



---

archive/issue_comments_322594.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2015-05-04T12:06:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18332#issuecomment-322594",
    "user": "https://github.com/mezzarobba"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_322595.json:
```json
{
    "body": "**Changing branch** from \"[u/vdelecroix/18332](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/18332)\" to \"[8fa6326cc34cdb44566758832111cbbc3542f46a](https://github.com/sagemath/sagetrac-mirror/commit/8fa6326cc34cdb44566758832111cbbc3542f46a)\".",
    "created_at": "2015-05-05T00:32:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18332#issuecomment-322595",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/vdelecroix/18332](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/18332)" to "[8fa6326cc34cdb44566758832111cbbc3542f46a](https://github.com/sagemath/sagetrac-mirror/commit/8fa6326cc34cdb44566758832111cbbc3542f46a)".



---

archive/issue_events_058832.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-05-05T00:32:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18332",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18332#event-58832"
}
```



---

archive/issue_comments_322596.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2015-05-05T00:32:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18332#issuecomment-322596",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed



---

archive/issue_comments_322597.json:
```json
{
    "body": "**Changing commit** from \"[8fa6326cc34cdb44566758832111cbbc3542f46a](https://github.com/sagemath/sagetrac-mirror/commit/8fa6326cc34cdb44566758832111cbbc3542f46a)\" to \"\".",
    "created_at": "2016-11-23T12:22:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18332#issuecomment-322597",
    "user": "https://github.com/pelegm"
}
```

**Changing commit** from "[8fa6326cc34cdb44566758832111cbbc3542f46a](https://github.com/sagemath/sagetrac-mirror/commit/8fa6326cc34cdb44566758832111cbbc3542f46a)" to "".



---

archive/issue_comments_322598.json:
```json
{
    "body": "<a id='comment:10'></a>\nWhy won't we add these methods to expressions as well?\n\n`Integer`, `Rational` and `AlgebraicNumber` have `is_integer`, `is_one` and `is_zero` but not `is_real` or `is_rational` or `is_algebraic`.",
    "created_at": "2016-11-23T12:22:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18332",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18332#issuecomment-322598",
    "user": "https://github.com/pelegm"
}
```

<a id='comment:10'></a>
Why won't we add these methods to expressions as well?

`Integer`, `Rational` and `AlgebraicNumber` have `is_integer`, `is_one` and `is_zero` but not `is_real` or `is_rational` or `is_algebraic`.
