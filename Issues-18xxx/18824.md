# Issue 18824: Add MultiPolynomialIdeal.groebner_basis("libgiac")

archive/issues_018587.json:
```json
{
    "body": "Giac is an optional package and supports fast computation of Gr\u00f6bner bases. Let's make that easily accessible.\n\nThis trac depends on #18841 in the following points:\n1) a sig_count error detection in the doctest.\n2) the output of the Katsura3 doctest in multi_polynomial_ideal.py was generated with giac-1.2.0-19 as provided in #18841. (Earlier versions provides a reversed output) \n\nCC:  @frederichan-IMJPRG\n\nBranch/Commit: 02cf665c79729f856ae8d43408caa1f6d1506973\n\nReviewer: Martin Albrecht, Frederic Han\n\nAuthor: Martin Albrecht, Frederic Han\n\nDependencies: #18841\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/18824\n\n",
    "closed_at": "2015-08-21T01:56:21Z",
    "created_at": "2015-06-30T08:18:27Z",
    "labels": [
        "component: interfaces: optional"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.8",
    "title": "Add MultiPolynomialIdeal.groebner_basis(\"libgiac\")",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18824",
    "user": "https://github.com/malb"
}
```
Giac is an optional package and supports fast computation of Gröbner bases. Let's make that easily accessible.

This trac depends on #18841 in the following points:
1) a sig_count error detection in the doctest.
2) the output of the Katsura3 doctest in multi_polynomial_ideal.py was generated with giac-1.2.0-19 as provided in #18841. (Earlier versions provides a reversed output) 

CC:  @frederichan-IMJPRG

Branch/Commit: 02cf665c79729f856ae8d43408caa1f6d1506973

Reviewer: Martin Albrecht, Frederic Han

Author: Martin Albrecht, Frederic Han

Dependencies: #18841

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/18824





---

archive/issue_comments_327666.json:
```json
{
    "body": "<a id='comment:1'></a>\nThank you.\nNB: Currently giacpy is just an optional spkg not a sage library so there is no sage.lib.giac\n\nI don't know if there is a suitable place on sage git to expand  the so called upstream spkg, I would be happy to put it in public so that sage developper could also modify it.",
    "created_at": "2015-06-30T08:56:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327666",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:1'></a>
Thank you.
NB: Currently giacpy is just an optional spkg not a sage library so there is no sage.lib.giac

I don't know if there is a suitable place on sage git to expand  the so called upstream spkg, I would be happy to put it in public so that sage developper could also modify it.



---

archive/issue_comments_327667.json:
```json
{
    "body": "Changing branch from \"\" to \"public/giacpyGB\"",
    "created_at": "2015-06-30T10:47:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327667",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

Changing branch from "" to "public/giacpyGB"



---

archive/issue_comments_327668.json:
```json
{
    "body": "<a id='comment:3'></a>\ngiacpy being optional is no problem. I'd suggest to add `sage.libs.libgiac` which imports the right stuff from giacpy and raises an error if that fails, e.g.\n\n```python\ndef groebner_basis_libgiac(gens, epsilon=0, prot=False, <other args>):\n   from giacpy import libgiac\n   F = libgiac(gens)\n   giacsettings.proba_epsilon=epsilon\n   # get ring from gens, check term order etc.\n   B = F.gbasis([P.gens()],'revlex') \n   # convert result to PolynomialSequence and return\n```",
    "created_at": "2015-06-30T11:02:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327668",
    "user": "https://github.com/malb"
}
```

<a id='comment:3'></a>
giacpy being optional is no problem. I'd suggest to add `sage.libs.libgiac` which imports the right stuff from giacpy and raises an error if that fails, e.g.

```python
def groebner_basis_libgiac(gens, epsilon=0, prot=False, <other args>):
   from giacpy import libgiac
   F = libgiac(gens)
   giacsettings.proba_epsilon=epsilon
   # get ring from gens, check term order etc.
   B = F.gbasis([P.gens()],'revlex') 
   # convert result to PolynomialSequence and return
```



---

archive/issue_comments_327669.json:
```json
{
    "body": "<a id='comment:4'></a>\nSorry  I am struggling with git (I am failing to create a branch), could you please start a branch with your function so that I can pull?\n\nNB: you need to import giacsettings also.",
    "created_at": "2015-06-30T11:36:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327669",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:4'></a>
Sorry  I am struggling with git (I am failing to create a branch), could you please start a branch with your function so that I can pull?

NB: you need to import giacsettings also.



---

archive/issue_comments_327670.json:
```json
{
    "body": "Changing branch from \"public/giacpyGB\" to \"\"",
    "created_at": "2015-06-30T11:36:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327670",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

Changing branch from "public/giacpyGB" to ""



---

archive/issue_comments_327671.json:
```json
{
    "body": "<a id='comment:5'></a>\nouf! this time I have succeed to push a trivial thing. I can start to work\n\n---\nNew commits:\n|                                                                                                                                          |                                          |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|\n|[6c54aac](https://github.com/sagemath/sagetrac-mirror/commit/6c54aacce07d0885c49b4942a46a1bf47d2c86e9)|`start groebner basis branch with libgiac`|",
    "created_at": "2015-06-30T12:33:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327671",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:5'></a>
ouf! this time I have succeed to push a trivial thing. I can start to work

---
New commits:
|                                                                                                                                          |                                          |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|
|[6c54aac](https://github.com/sagemath/sagetrac-mirror/commit/6c54aacce07d0885c49b4942a46a1bf47d2c86e9)|`start groebner basis branch with libgiac`|



---

archive/issue_comments_327672.json:
```json
{
    "body": "Changing commit from \"\" to \"6c54aacce07d0885c49b4942a46a1bf47d2c86e9\"",
    "created_at": "2015-06-30T12:33:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327672",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

Changing commit from "" to "6c54aacce07d0885c49b4942a46a1bf47d2c86e9"



---

archive/issue_comments_327673.json:
```json
{
    "body": "Changing branch from \"\" to \"public/giacpyGB\"",
    "created_at": "2015-06-30T12:33:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327673",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

Changing branch from "" to "public/giacpyGB"



---

archive/issue_comments_327674.json:
```json
{
    "body": "Changing commit from \"6c54aacce07d0885c49b4942a46a1bf47d2c86e9\" to \"0b695a051582653dfd9d67fa3f47a43db2786a17\"",
    "created_at": "2015-06-30T13:43:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327674",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6c54aacce07d0885c49b4942a46a1bf47d2c86e9" to "0b695a051582653dfd9d67fa3f47a43db2786a17"



---

archive/issue_comments_327675.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------|\n|[9e02904](https://github.com/sagemath/sagetrac-mirror/commit/9e029043937210159ce803d58ef275b3c381b58b)|`Merge branch 'public/giacpyGB' of trac.sagemath.org:sage into public/giacpy-groebner`|\n|[0988f8d](https://github.com/sagemath/sagetrac-mirror/commit/0988f8d05379d6a469135ee8236c1aeb010dfd0b)|`rename sage.libs.libgiac to sage.libs.giac`|\n|[0b695a0](https://github.com/sagemath/sagetrac-mirror/commit/0b695a051582653dfd9d67fa3f47a43db2786a17)|`poc of groebner_basis_libgiac`|",
    "created_at": "2015-06-30T13:43:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327675",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                                      |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------|
|[9e02904](https://github.com/sagemath/sagetrac-mirror/commit/9e029043937210159ce803d58ef275b3c381b58b)|`Merge branch 'public/giacpyGB' of trac.sagemath.org:sage into public/giacpy-groebner`|
|[0988f8d](https://github.com/sagemath/sagetrac-mirror/commit/0988f8d05379d6a469135ee8236c1aeb010dfd0b)|`rename sage.libs.libgiac to sage.libs.giac`|
|[0b695a0](https://github.com/sagemath/sagetrac-mirror/commit/0b695a051582653dfd9d67fa3f47a43db2786a17)|`poc of groebner_basis_libgiac`|



---

archive/issue_comments_327676.json:
```json
{
    "body": "<a id='comment:7'></a>\nI added a proof of concept implementation",
    "created_at": "2015-06-30T13:44:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327676",
    "user": "https://github.com/malb"
}
```

<a id='comment:7'></a>
I added a proof of concept implementation



---

archive/issue_comments_327677.json:
```json
{
    "body": "Changing commit from \"0b695a051582653dfd9d67fa3f47a43db2786a17\" to \"fab096e4658fb1300ec56943f9601b7cf9c915ed\"",
    "created_at": "2015-06-30T17:52:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327677",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "0b695a051582653dfd9d67fa3f47a43db2786a17" to "fab096e4658fb1300ec56943f9601b7cf9c915ed"



---

archive/issue_comments_327678.json:
```json
{
    "body": "<a id='comment:8'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                         |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------|\n|[f57602f](https://github.com/sagemath/sagetrac-mirror/commit/f57602f4d94e3c0852245989a2569f2e86a1b7c0)|`Merge branch 'develop' of trac.sagemath.org:sage into t/public/giacpyGB`|\n|[2fa05ba](https://github.com/sagemath/sagetrac-mirror/commit/2fa05babfabef5c7913a6f8dbcbc76be770fe3c3)|`Merge branch 'public/giacpyGB' of trac.sagemath.org:sage into t/public/giacpyGB`|\n|[fab096e](https://github.com/sagemath/sagetrac-mirror/commit/fab096e4658fb1300ec56943f9601b7cf9c915ed)|`test import, gens, rings. change conversion to sage`|",
    "created_at": "2015-06-30T17:52:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327678",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                         |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------|
|[f57602f](https://github.com/sagemath/sagetrac-mirror/commit/f57602f4d94e3c0852245989a2569f2e86a1b7c0)|`Merge branch 'develop' of trac.sagemath.org:sage into t/public/giacpyGB`|
|[2fa05ba](https://github.com/sagemath/sagetrac-mirror/commit/2fa05babfabef5c7913a6f8dbcbc76be770fe3c3)|`Merge branch 'public/giacpyGB' of trac.sagemath.org:sage into t/public/giacpyGB`|
|[fab096e](https://github.com/sagemath/sagetrac-mirror/commit/fab096e4658fb1300ec56943f9601b7cf9c915ed)|`test import, gens, rings. change conversion to sage`|



---

archive/issue_comments_327679.json:
```json
{
    "body": "<a id='comment:9'></a>\nI have noticed that with giac1.2.0-13 (spkg version) it may happen that the giac answer contains a 0 term, but it is fixed in giac1.2.0-15. May be updating the spkg is the best solution?",
    "created_at": "2015-07-01T06:00:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327679",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:9'></a>
I have noticed that with giac1.2.0-13 (spkg version) it may happen that the giac answer contains a 0 term, but it is fixed in giac1.2.0-15. May be updating the spkg is the best solution?



---

archive/issue_comments_327680.json:
```json
{
    "body": "<a id='comment:10'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                              |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|\n|[55fff07](https://github.com/sagemath/sagetrac-mirror/commit/55fff0715b1c1e1005e845b8704c313be06fe0a4)|`drop unused code and imports`|\n|[5f95d87](https://github.com/sagemath/sagetrac-mirror/commit/5f95d87f96f0ab494303683abc3cb709bd8833fd)|`don't check for list type explicitly`|\n|[b8725bc](https://github.com/sagemath/sagetrac-mirror/commit/b8725bcb234f3731f30b5f2cc8c1828246714e5e)|`obey PEP8 style conventions`|\n|[86bd0a4](https://github.com/sagemath/sagetrac-mirror/commit/86bd0a445cee318d3cca0fef87babf4118c910d8)|`use decorators for preserving global settings`|",
    "created_at": "2015-07-01T09:11:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327680",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                              |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|
|[55fff07](https://github.com/sagemath/sagetrac-mirror/commit/55fff0715b1c1e1005e845b8704c313be06fe0a4)|`drop unused code and imports`|
|[5f95d87](https://github.com/sagemath/sagetrac-mirror/commit/5f95d87f96f0ab494303683abc3cb709bd8833fd)|`don't check for list type explicitly`|
|[b8725bc](https://github.com/sagemath/sagetrac-mirror/commit/b8725bcb234f3731f30b5f2cc8c1828246714e5e)|`obey PEP8 style conventions`|
|[86bd0a4](https://github.com/sagemath/sagetrac-mirror/commit/86bd0a445cee318d3cca0fef87babf4118c910d8)|`use decorators for preserving global settings`|



---

archive/issue_comments_327681.json:
```json
{
    "body": "Changing commit from \"fab096e4658fb1300ec56943f9601b7cf9c915ed\" to \"86bd0a445cee318d3cca0fef87babf4118c910d8\"",
    "created_at": "2015-07-01T09:11:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327681",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "fab096e4658fb1300ec56943f9601b7cf9c915ed" to "86bd0a445cee318d3cca0fef87babf4118c910d8"



---

archive/issue_comments_327682.json:
```json
{
    "body": "<a id='comment:11'></a>\nI cleaned it up a bit more. It still needs tests, documentation and a way to shut Giac up. Also, does Giac have an option to print a protocol of the GB computation (most systems do).\n\nFinally, we get this doctest failure:\n\n```\nFile \"src/sage/libs/giac.py\", line 19, in sage.libs.giac\nFailed example:\n    sig_on_count()\nExpected:\n    0\nGot:\n    1\n```\n\nwhich suggests there's a bug somewhere.",
    "created_at": "2015-07-01T09:16:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327682",
    "user": "https://github.com/malb"
}
```

<a id='comment:11'></a>
I cleaned it up a bit more. It still needs tests, documentation and a way to shut Giac up. Also, does Giac have an option to print a protocol of the GB computation (most systems do).

Finally, we get this doctest failure:

```
File "src/sage/libs/giac.py", line 19, in sage.libs.giac
Failed example:
    sig_on_count()
Expected:
    0
Got:
    1
```

which suggests there's a bug somewhere.



---

archive/issue_comments_327683.json:
```json
{
    "body": "<a id='comment:12'></a>\nUpdating Giac should be a separate ticket.",
    "created_at": "2015-07-01T09:16:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327683",
    "user": "https://github.com/malb"
}
```

<a id='comment:12'></a>
Updating Giac should be a separate ticket.



---

archive/issue_comments_327684.json:
```json
{
    "body": "<a id='comment:13'></a>\nThank you.\nI am still working on this. I found a way for the info level.",
    "created_at": "2015-07-01T10:29:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327684",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:13'></a>
Thank you.
I am still working on this. I found a way for the info level.



---

archive/issue_comments_327685.json:
```json
{
    "body": "<a id='comment:14'></a>\nThe sig_count pb is from giacpy 0.4.8 Pygen `__iter__`, it could/should? be fixed in a separate trac?\nwe can avoid it with: \n` return PolynomialSequence(P, tuple(gb_giac), immutable=True)`\ninstead of just gb_giac. I don't remark time loss with tuple, should we adopt this?\n\nis there a way to substitute efficiently variables in PolynomialRing (ex: 'i' will give use troubles in giac) if not I will just add some protection with an error message",
    "created_at": "2015-07-02T07:52:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327685",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:14'></a>
The sig_count pb is from giacpy 0.4.8 Pygen `__iter__`, it could/should? be fixed in a separate trac?
we can avoid it with: 
` return PolynomialSequence(P, tuple(gb_giac), immutable=True)`
instead of just gb_giac. I don't remark time loss with tuple, should we adopt this?

is there a way to substitute efficiently variables in PolynomialRing (ex: 'i' will give use troubles in giac) if not I will just add some protection with an error message



---

archive/issue_comments_327686.json:
```json
{
    "body": "<a id='comment:15'></a>\nsorry I wanted to say: I don't remark time loss with tuple. (so I have edited my[comment:14](#comment%3A14))",
    "created_at": "2015-07-02T08:06:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327686",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:15'></a>
sorry I wanted to say: I don't remark time loss with tuple. (so I have edited my[comment:14](#comment%3A14))



---

archive/issue_comments_327687.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [frederichan](#comment%3A14):\n> The sig_count pb is from giacpy 0.4.8 Pygen `__iter__`, it could/should? be fixed in a separate trac?\n\n\nyes, this should be a separate ticket but this ticket IMHO should depend on that ticket. That is, this ticket should wait until the fix is in.\n\n> we can avoid it with: \n> ` return PolynomialSequence(P, tuple(gb_giac), immutable=True)`\n> instead of just gb_giac. I remark time loss with tuple, should we adopt this?\n\n\nYou mean instead of `PolynomialSequence(gb_giac, P, immutable=True)`? I don't think we should work around a bug which should be fixed instead.\n\n\n> is there a way to substitute efficiently variables in PolynomialRing (ex: 'i' will give use troubles in giac) if not I will just add some protection with an error message\n\n\nYou can try but it's not very fast:\n\n```python\nsage: P.<a,b,c,i> = QQ[]\nsage: R.<x,y,z,w> = QQ[]\nsage: f = P.random_element()\nsage: R(f)\n-2*y^2 - 1/4*y*z + 6*z*w - 2*z - 59/5\nsage: %timeit R(f)\n10000 loops, best of 3: 77.3 \u00b5s per loop\n```\n\nMaybe check `P.gens_dict().keys()` for problematic names and only switch over if there is a problem?",
    "created_at": "2015-07-02T08:06:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327687",
    "user": "https://github.com/malb"
}
```

<a id='comment:16'></a>
Replying to [frederichan](#comment%3A14):
> The sig_count pb is from giacpy 0.4.8 Pygen `__iter__`, it could/should? be fixed in a separate trac?


yes, this should be a separate ticket but this ticket IMHO should depend on that ticket. That is, this ticket should wait until the fix is in.

> we can avoid it with: 
> ` return PolynomialSequence(P, tuple(gb_giac), immutable=True)`
> instead of just gb_giac. I remark time loss with tuple, should we adopt this?


You mean instead of `PolynomialSequence(gb_giac, P, immutable=True)`? I don't think we should work around a bug which should be fixed instead.


> is there a way to substitute efficiently variables in PolynomialRing (ex: 'i' will give use troubles in giac) if not I will just add some protection with an error message


You can try but it's not very fast:

```python
sage: P.<a,b,c,i> = QQ[]
sage: R.<x,y,z,w> = QQ[]
sage: f = P.random_element()
sage: R(f)
-2*y^2 - 1/4*y*z + 6*z*w - 2*z - 59/5
sage: %timeit R(f)
10000 loops, best of 3: 77.3 µs per loop
```

Maybe check `P.gens_dict().keys()` for problematic names and only switch over if there is a problem?



---

archive/issue_comments_327688.json:
```json
{
    "body": "Changing dependencies from \"\" to \"18841\"",
    "created_at": "2015-07-02T10:27:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327688",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

Changing dependencies from "" to "18841"



---

archive/issue_comments_327689.json:
```json
{
    "body": "Changing dependencies from \"18841\" to \"#18841\"",
    "created_at": "2015-07-02T10:28:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327689",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

Changing dependencies from "18841" to "#18841"



---

archive/issue_comments_327690.json:
```json
{
    "body": "Changing commit from \"86bd0a445cee318d3cca0fef87babf4118c910d8\" to \"2f653024a1db32c326b87f8dca48503b87007acb\"",
    "created_at": "2015-07-04T09:40:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327690",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "86bd0a445cee318d3cca0fef87babf4118c910d8" to "2f653024a1db32c326b87f8dca48503b87007acb"



---

archive/issue_comments_327691.json:
```json
{
    "body": "<a id='comment:19'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                   |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|\n|[6d810f6](https://github.com/sagemath/sagetrac-mirror/commit/6d810f68abd28f5d28396e1cd53be7d42381e94a)|`add prot and restore global proba`|\n|[f725910](https://github.com/sagemath/sagetrac-mirror/commit/f7259103329915e55d1036dc87e9001fa58d9222)|`Merge branch 'public/giacpyGB' of trac.sagemath.org:sage into t/public/giacpyGB`|\n|[cc81303](https://github.com/sagemath/sagetrac-mirror/commit/cc81303b0802ec35ed8411c0832a2c5db193f442)|`add prot feature + fixes in doctests`|\n|[2f65302](https://github.com/sagemath/sagetrac-mirror/commit/2f653024a1db32c326b87f8dca48503b87007acb)|`add and change doctests. Add a threads option`|",
    "created_at": "2015-07-04T09:40:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327691",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                   |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|
|[6d810f6](https://github.com/sagemath/sagetrac-mirror/commit/6d810f68abd28f5d28396e1cd53be7d42381e94a)|`add prot and restore global proba`|
|[f725910](https://github.com/sagemath/sagetrac-mirror/commit/f7259103329915e55d1036dc87e9001fa58d9222)|`Merge branch 'public/giacpyGB' of trac.sagemath.org:sage into t/public/giacpyGB`|
|[cc81303](https://github.com/sagemath/sagetrac-mirror/commit/cc81303b0802ec35ed8411c0832a2c5db193f442)|`add prot feature + fixes in doctests`|
|[2f65302](https://github.com/sagemath/sagetrac-mirror/commit/2f653024a1db32c326b87f8dca48503b87007acb)|`add and change doctests. Add a threads option`|



---

archive/issue_comments_327692.json:
```json
{
    "body": "<a id='comment:20'></a>\ngiac gbasis have also a rur option to obtain a Rational Univariate Representation of a 0 dimensional ideal. Are you also interested by a more convient interface to this or should we leave it for later?",
    "created_at": "2015-07-04T10:16:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327692",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:20'></a>
giac gbasis have also a rur option to obtain a Rational Univariate Representation of a 0 dimensional ideal. Are you also interested by a more convient interface to this or should we leave it for later?



---

archive/issue_comments_327693.json:
```json
{
    "body": "<a id='comment:21'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |              |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------|\n|[425b8dd](https://github.com/sagemath/sagetrac-mirror/commit/425b8ddc68ca59c0f24e39995aebcdff0d9a263c)|`add doctests`|",
    "created_at": "2015-07-04T19:35:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327693",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |              |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------|
|[425b8dd](https://github.com/sagemath/sagetrac-mirror/commit/425b8ddc68ca59c0f24e39995aebcdff0d9a263c)|`add doctests`|



---

archive/issue_comments_327694.json:
```json
{
    "body": "Changing commit from \"2f653024a1db32c326b87f8dca48503b87007acb\" to \"425b8ddc68ca59c0f24e39995aebcdff0d9a263c\"",
    "created_at": "2015-07-04T19:35:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327694",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2f653024a1db32c326b87f8dca48503b87007acb" to "425b8ddc68ca59c0f24e39995aebcdff0d9a263c"



---

archive/issue_comments_327695.json:
```json
{
    "body": "<a id='comment:22'></a>\nI'm a one-feature-per-ticket kind of guy, so I'd put that rur enhancement in a separate ticket.",
    "created_at": "2015-07-05T13:56:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327695",
    "user": "https://github.com/malb"
}
```

<a id='comment:22'></a>
I'm a one-feature-per-ticket kind of guy, so I'd put that rur enhancement in a separate ticket.



---

archive/issue_comments_327696.json:
```json
{
    "body": "Changing commit from \"425b8ddc68ca59c0f24e39995aebcdff0d9a263c\" to \"28e2db98e53e67ce9b45544d59283a133f109c41\"",
    "created_at": "2015-07-08T10:29:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327696",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "425b8ddc68ca59c0f24e39995aebcdff0d9a263c" to "28e2db98e53e67ce9b45544d59283a133f109c41"



---

archive/issue_comments_327697.json:
```json
{
    "body": "<a id='comment:23'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                               |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|\n|[756d223](https://github.com/sagemath/sagetrac-mirror/commit/756d223ea16b3679e2b2837edb3c8774e02f8b85)|`wrap long lines as recommended by style guide`|\n|[7076dd0](https://github.com/sagemath/sagetrac-mirror/commit/7076dd03b82f83197f38b963873698f669b4b16c)|`follow PEP8 style guide`|\n|[28e2db9](https://github.com/sagemath/sagetrac-mirror/commit/28e2db98e53e67ce9b45544d59283a133f109c41)|`make error message more concise`|",
    "created_at": "2015-07-08T10:29:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327697",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                               |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|
|[756d223](https://github.com/sagemath/sagetrac-mirror/commit/756d223ea16b3679e2b2837edb3c8774e02f8b85)|`wrap long lines as recommended by style guide`|
|[7076dd0](https://github.com/sagemath/sagetrac-mirror/commit/7076dd03b82f83197f38b963873698f669b4b16c)|`follow PEP8 style guide`|
|[28e2db9](https://github.com/sagemath/sagetrac-mirror/commit/28e2db98e53e67ce9b45544d59283a133f109c41)|`make error message more concise`|



---

archive/issue_comments_327698.json:
```json
{
    "body": "<a id='comment:24'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------|\n|[061f277](https://github.com/sagemath/sagetrac-mirror/commit/061f2779431eceb921bedaecf6810c3a04808f04)|`Merge branch 'develop' of trac.sagemath.org:sage into giacpyGB`|",
    "created_at": "2015-07-08T11:33:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327698",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------|
|[061f277](https://github.com/sagemath/sagetrac-mirror/commit/061f2779431eceb921bedaecf6810c3a04808f04)|`Merge branch 'develop' of trac.sagemath.org:sage into giacpyGB`|



---

archive/issue_comments_327699.json:
```json
{
    "body": "Changing commit from \"28e2db98e53e67ce9b45544d59283a133f109c41\" to \"061f2779431eceb921bedaecf6810c3a04808f04\"",
    "created_at": "2015-07-08T11:33:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327699",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "28e2db98e53e67ce9b45544d59283a133f109c41" to "061f2779431eceb921bedaecf6810c3a04808f04"



---

archive/issue_comments_327700.json:
```json
{
    "body": "Changing commit from \"061f2779431eceb921bedaecf6810c3a04808f04\" to \"8bf1320413e63fe2f71d4164dea93ae3d27d73bd\"",
    "created_at": "2015-07-08T12:07:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327700",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "061f2779431eceb921bedaecf6810c3a04808f04" to "8bf1320413e63fe2f71d4164dea93ae3d27d73bd"



---

archive/issue_comments_327701.json:
```json
{
    "body": "<a id='comment:25'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                   |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|\n|[81b68fa](https://github.com/sagemath/sagetrac-mirror/commit/81b68fa63dfbdf01245100647dc879e198ce39a4)|`add groebner_basis(\"giac\") option`|\n|[8bf1320](https://github.com/sagemath/sagetrac-mirror/commit/8bf1320413e63fe2f71d4164dea93ae3d27d73bd)|`we have namespaces, use them`|",
    "created_at": "2015-07-08T12:07:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327701",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                   |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|
|[81b68fa](https://github.com/sagemath/sagetrac-mirror/commit/81b68fa63dfbdf01245100647dc879e198ce39a4)|`add groebner_basis("giac") option`|
|[8bf1320](https://github.com/sagemath/sagetrac-mirror/commit/8bf1320413e63fe2f71d4164dea93ae3d27d73bd)|`we have namespaces, use them`|



---

archive/issue_comments_327702.json:
```json
{
    "body": "<a id='comment:26'></a>\nDear martin, thank you for the modifs.\nAbout the doctests I don't trust even the first 2 characters: `//` of the message `// Giac ...`\nI have not yet tested this giac spkg  1.2.0-19 on os X to see but last time I got pbs with the begining of this message on OSX versus linux. so I think that in a doctest it is safer to do it in 2 steps:\n`sage: gb = J.groebner_basis('giac') # optional - giacpy, random`\n`sage: gb # optional - giacpy`",
    "created_at": "2015-07-08T13:31:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327702",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:26'></a>
Dear martin, thank you for the modifs.
About the doctests I don't trust even the first 2 characters: `//` of the message `// Giac ...`
I have not yet tested this giac spkg  1.2.0-19 on os X to see but last time I got pbs with the begining of this message on OSX versus linux. so I think that in a doctest it is safer to do it in 2 steps:
`sage: gb = J.groebner_basis('giac') # optional - giacpy, random`
`sage: gb # optional - giacpy`



---

archive/issue_comments_327703.json:
```json
{
    "body": "<a id='comment:27'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------|\n|[5d23482](https://github.com/sagemath/sagetrac-mirror/commit/5d23482104cf6a10406cc23f81874b93973650b0)|`fix-up doctest`|",
    "created_at": "2015-07-08T13:54:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327703",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------|
|[5d23482](https://github.com/sagemath/sagetrac-mirror/commit/5d23482104cf6a10406cc23f81874b93973650b0)|`fix-up doctest`|



---

archive/issue_comments_327704.json:
```json
{
    "body": "Changing commit from \"8bf1320413e63fe2f71d4164dea93ae3d27d73bd\" to \"5d23482104cf6a10406cc23f81874b93973650b0\"",
    "created_at": "2015-07-08T13:54:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327704",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "8bf1320413e63fe2f71d4164dea93ae3d27d73bd" to "5d23482104cf6a10406cc23f81874b93973650b0"



---

archive/issue_comments_327705.json:
```json
{
    "body": "<a id='comment:28'></a>\nI guess this ticket is done then (?)",
    "created_at": "2015-07-08T14:51:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327705",
    "user": "https://github.com/malb"
}
```

<a id='comment:28'></a>
I guess this ticket is done then (?)



---

archive/issue_comments_327706.json:
```json
{
    "body": "Changing commit from \"5d23482104cf6a10406cc23f81874b93973650b0\" to \"b590a50900bccd1e9d5fe6d62c5636d946175332\"",
    "created_at": "2015-07-08T16:52:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327706",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5d23482104cf6a10406cc23f81874b93973650b0" to "b590a50900bccd1e9d5fe6d62c5636d946175332"



---

archive/issue_comments_327707.json:
```json
{
    "body": "<a id='comment:29'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                  |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|\n|[b590a50](https://github.com/sagemath/sagetrac-mirror/commit/b590a50900bccd1e9d5fe6d62c5636d946175332)|`blacklist 'e' for variable names`|",
    "created_at": "2015-07-08T16:52:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327707",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                  |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|
|[b590a50](https://github.com/sagemath/sagetrac-mirror/commit/b590a50900bccd1e9d5fe6d62c5636d946175332)|`blacklist 'e' for variable names`|



---

archive/issue_comments_327708.json:
```json
{
    "body": "<a id='comment:30'></a>\nmay be I should also add some doc in multi_polynomial_ideal.py or pointer to the \nsage.libs.giac.groebner_basis doc",
    "created_at": "2015-07-08T16:57:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327708",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:30'></a>
may be I should also add some doc in multi_polynomial_ideal.py or pointer to the 
sage.libs.giac.groebner_basis doc



---

archive/issue_comments_327709.json:
```json
{
    "body": "<a id='comment:31'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                        |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------|\n|[5603124](https://github.com/sagemath/sagetrac-mirror/commit/5603124d85096ba10d0f8dd525105b3b697961af)|`add doc in sage.rings.polynomial.multi_polynomial_ideal.groebner_basis`|",
    "created_at": "2015-07-09T10:40:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327709",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                        |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------|
|[5603124](https://github.com/sagemath/sagetrac-mirror/commit/5603124d85096ba10d0f8dd525105b3b697961af)|`add doc in sage.rings.polynomial.multi_polynomial_ideal.groebner_basis`|



---

archive/issue_comments_327710.json:
```json
{
    "body": "Changing commit from \"b590a50900bccd1e9d5fe6d62c5636d946175332\" to \"5603124d85096ba10d0f8dd525105b3b697961af\"",
    "created_at": "2015-07-09T10:40:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327710",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b590a50900bccd1e9d5fe6d62c5636d946175332" to "5603124d85096ba10d0f8dd525105b3b697961af"



---

archive/issue_comments_327711.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,5 @@\n Giac is an optional package and supports fast computation of Gr\u00f6bner bases. Let's make that easily accessible.\n+\n+This trac depends on #18841 in the following points:\n+1) a sig_count error detection in the doctest.\n+2) the output of the Katsura3 doctest in multi_polynomial_ideal.py was generated with giac-1.2.0-19 as provided in #18841. (Earlier versions provides a reversed output) \n``````\n",
    "created_at": "2015-07-09T10:47:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327711",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,5 @@
 Giac is an optional package and supports fast computation of Gröbner bases. Let's make that easily accessible.
+
+This trac depends on #18841 in the following points:
+1) a sig_count error detection in the doctest.
+2) the output of the Katsura3 doctest in multi_polynomial_ideal.py was generated with giac-1.2.0-19 as provided in #18841. (Earlier versions provides a reversed output) 
``````




---

archive/issue_comments_327712.json:
```json
{
    "body": "<a id='comment:33'></a>\nPerhaps\n\n```\nsage: I9.groebner_basis(\"giac\",proba_epsilon=1e-7) # optional - giacpy\n```\nshould be tagged `long`?",
    "created_at": "2015-07-09T11:02:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327712",
    "user": "https://github.com/malb"
}
```

<a id='comment:33'></a>
Perhaps

```
sage: I9.groebner_basis("giac",proba_epsilon=1e-7) # optional - giacpy
```
should be tagged `long`?



---

archive/issue_comments_327713.json:
```json
{
    "body": "<a id='comment:34'></a>\nOn a 2012 (2core i5-2435M CPU `@` 2.40GHz) notebook with 4Go of RAM:\n\n```\nsage: A9=PolynomialRing(QQ,9,'x') # optional - giacpy\nsage: I9=sage.rings.ideal.Katsura(A9) # optional - giacpy\nsage: time I9.groebner_basis(\"giac\",proba_epsilon=1e-7) # optional - giacpy\n// Giac share root-directory:/home/fred/dev/sage/develop/sage.run/local/share/giac/\n// Unable to find keyword file /home/fred/dev/sage/develop/sage.run/local/share/giac/doc/fr/keywords\n// Giac share root-directory:/home/fred/dev/sage/develop/sage.run/local/share/giac/\nHelp file /home/fred/dev/sage/develop/sage.run/local/share/giac/doc/fr/aide_cas not found\nAdded 0 synonyms\nRunning a probabilistic check for the reconstructed Groebner basis. If successfull, error probability is less than 1e-07 and is estimated to be less than 10^-133. Use proba_epsilon:=0 to certify (this takes more time).\nCPU times: user 3.29 s, sys: 19.9 ms, total: 3.31 s\nWall time: 3.23 s\nPolynomial Sequence with 143 Polynomials in 9 Variables\n```",
    "created_at": "2015-07-09T11:12:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327713",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:34'></a>
On a 2012 (2core i5-2435M CPU `@` 2.40GHz) notebook with 4Go of RAM:

```
sage: A9=PolynomialRing(QQ,9,'x') # optional - giacpy
sage: I9=sage.rings.ideal.Katsura(A9) # optional - giacpy
sage: time I9.groebner_basis("giac",proba_epsilon=1e-7) # optional - giacpy
// Giac share root-directory:/home/fred/dev/sage/develop/sage.run/local/share/giac/
// Unable to find keyword file /home/fred/dev/sage/develop/sage.run/local/share/giac/doc/fr/keywords
// Giac share root-directory:/home/fred/dev/sage/develop/sage.run/local/share/giac/
Help file /home/fred/dev/sage/develop/sage.run/local/share/giac/doc/fr/aide_cas not found
Added 0 synonyms
Running a probabilistic check for the reconstructed Groebner basis. If successfull, error probability is less than 1e-07 and is estimated to be less than 10^-133. Use proba_epsilon:=0 to certify (this takes more time).
CPU times: user 3.29 s, sys: 19.9 ms, total: 3.31 s
Wall time: 3.23 s
Polynomial Sequence with 143 Polynomials in 9 Variables
```



---

archive/issue_comments_327714.json:
```json
{
    "body": "<a id='comment:35'></a>\nThree seconds is long by sage doctest standards. We're running thousands of doctests.",
    "created_at": "2015-07-09T11:22:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327714",
    "user": "https://github.com/malb"
}
```

<a id='comment:35'></a>
Three seconds is long by sage doctest standards. We're running thousands of doctests.



---

archive/issue_comments_327715.json:
```json
{
    "body": "<a id='comment:36'></a>\nOK so some others in giac.py need it also. I see that sometime there is an indication of the time. would \n# optional giacpy, long time (3s on a 2012 notebook)\n\nbe OK or is it too long.",
    "created_at": "2015-07-09T12:31:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327715",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:36'></a>
OK so some others in giac.py need it also. I see that sometime there is an indication of the time. would 
# optional giacpy, long time (3s on a 2012 notebook)

be OK or is it too long.



---

archive/issue_comments_327716.json:
```json
{
    "body": "<a id='comment:37'></a>\nIt's fine but not mandatory to add this (I'd say)",
    "created_at": "2015-07-09T12:35:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327716",
    "user": "https://github.com/malb"
}
```

<a id='comment:37'></a>
It's fine but not mandatory to add this (I'd say)



---

archive/issue_comments_327717.json:
```json
{
    "body": "<a id='comment:38'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                     |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|\n|[36620a9](https://github.com/sagemath/sagetrac-mirror/commit/36620a9e988a7453bf8655d950ae842924e9f8bf)|`add long time tags to some doctests`|",
    "created_at": "2015-07-09T13:24:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327717",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:38'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                     |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|
|[36620a9](https://github.com/sagemath/sagetrac-mirror/commit/36620a9e988a7453bf8655d950ae842924e9f8bf)|`add long time tags to some doctests`|



---

archive/issue_comments_327718.json:
```json
{
    "body": "Changing commit from \"5603124d85096ba10d0f8dd525105b3b697961af\" to \"36620a9e988a7453bf8655d950ae842924e9f8bf\"",
    "created_at": "2015-07-09T13:24:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327718",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5603124d85096ba10d0f8dd525105b3b697961af" to "36620a9e988a7453bf8655d950ae842924e9f8bf"



---

archive/issue_comments_327719.json:
```json
{
    "body": "<a id='comment:39'></a>\nto change I have tried it on OSX(10.7) with #18841 and got no problems.",
    "created_at": "2015-07-10T12:48:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327719",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:39'></a>
to change I have tried it on OSX(10.7) with #18841 and got no problems.



---

archive/issue_comments_327720.json:
```json
{
    "body": "Changing author from \"\" to \"Martin Albrecht, Frederic Han\"",
    "created_at": "2015-07-12T22:46:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327720",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

Changing author from "" to "Martin Albrecht, Frederic Han"



---

archive/issue_comments_327721.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-07-13T07:10:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327721",
    "user": "https://github.com/malb"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_327722.json:
```json
{
    "body": "<a id='comment:42'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                         |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------|\n|[24a7254](https://github.com/sagemath/sagetrac-mirror/commit/24a72542f87c52d7de765662104080e66ccf875b)|`Merge branch 'develop' of trac.sagemath.org:sage into t/public/giacpyGB`|\n|[f3a235b](https://github.com/sagemath/sagetrac-mirror/commit/f3a235b3265710b7f35b9e86d96f2ac84d5ff6b6)|`update docstring in cachefunc.pyx (groebner_basis call)`|",
    "created_at": "2015-08-05T09:33:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327722",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:42'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                         |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------|
|[24a7254](https://github.com/sagemath/sagetrac-mirror/commit/24a72542f87c52d7de765662104080e66ccf875b)|`Merge branch 'develop' of trac.sagemath.org:sage into t/public/giacpyGB`|
|[f3a235b](https://github.com/sagemath/sagetrac-mirror/commit/f3a235b3265710b7f35b9e86d96f2ac84d5ff6b6)|`update docstring in cachefunc.pyx (groebner_basis call)`|



---

archive/issue_comments_327723.json:
```json
{
    "body": "Changing commit from \"36620a9e988a7453bf8655d950ae842924e9f8bf\" to \"f3a235b3265710b7f35b9e86d96f2ac84d5ff6b6\"",
    "created_at": "2015-08-05T09:33:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327723",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "36620a9e988a7453bf8655d950ae842924e9f8bf" to "f3a235b3265710b7f35b9e86d96f2ac84d5ff6b6"



---

archive/issue_comments_327724.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-08-05T17:26:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327724",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_327725.json:
```json
{
    "body": "<a id='comment:43'></a>\nThe zero ideal gives a segfault",
    "created_at": "2015-08-05T17:26:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327725",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:43'></a>
The zero ideal gives a segfault



---

archive/issue_comments_327726.json:
```json
{
    "body": "<a id='comment:44'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------|\n|[02cf665](https://github.com/sagemath/sagetrac-mirror/commit/02cf665c79729f856ae8d43408caa1f6d1506973)|`add an is_zero ideal test before calling giac gbasis`|",
    "created_at": "2015-08-05T17:46:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327726",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:44'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                      |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------|
|[02cf665](https://github.com/sagemath/sagetrac-mirror/commit/02cf665c79729f856ae8d43408caa1f6d1506973)|`add an is_zero ideal test before calling giac gbasis`|



---

archive/issue_comments_327727.json:
```json
{
    "body": "Changing commit from \"f3a235b3265710b7f35b9e86d96f2ac84d5ff6b6\" to \"02cf665c79729f856ae8d43408caa1f6d1506973\"",
    "created_at": "2015-08-05T17:46:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327727",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f3a235b3265710b7f35b9e86d96f2ac84d5ff6b6" to "02cf665c79729f856ae8d43408caa1f6d1506973"



---

archive/issue_comments_327728.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-08-05T19:30:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327728",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_327729.json:
```json
{
    "body": "<a id='comment:46'></a>\nI think this ticket is done, i.e. I'm positively reviewing your contributions. If you review mine and agree with them, we can set this to positive review.",
    "created_at": "2015-08-17T17:35:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327729",
    "user": "https://github.com/malb"
}
```

<a id='comment:46'></a>
I think this ticket is done, i.e. I'm positively reviewing your contributions. If you review mine and agree with them, we can set this to positive review.



---

archive/issue_comments_327730.json:
```json
{
    "body": "<a id='comment:47'></a>\nOK, I thought we had to wait for a third person. I will look if I can reproduce this doctest error:\n[http://patchbot.sagemath.org/log/18824/Ubuntu/14.04/x86_64/3.13.0-61-generic/librae/2015-08-17%2014:47:28%20+0000?short](http://patchbot.sagemath.org/log/18824/Ubuntu/14.04/x86_64/3.13.0-61-generic/librae/2015-08-17%2014:47:28%20+0000?short)\ndo you think it could be related to this patch?",
    "created_at": "2015-08-18T13:17:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327730",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:47'></a>
OK, I thought we had to wait for a third person. I will look if I can reproduce this doctest error:
[http://patchbot.sagemath.org/log/18824/Ubuntu/14.04/x86_64/3.13.0-61-generic/librae/2015-08-17%2014:47:28%20+0000?short](http://patchbot.sagemath.org/log/18824/Ubuntu/14.04/x86_64/3.13.0-61-generic/librae/2015-08-17%2014:47:28%20+0000?short)
do you think it could be related to this patch?



---

archive/issue_comments_327731.json:
```json
{
    "body": "<a id='comment:48'></a>\nI am positively reviewing your changes.\n\nI was not able to reproduce the previous  patchbot doctest error with sage 6.9.beta2.",
    "created_at": "2015-08-19T08:06:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327731",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:48'></a>
I am positively reviewing your changes.

I was not able to reproduce the previous  patchbot doctest error with sage 6.9.beta2.



---

archive/issue_comments_327732.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Martin Albrecht, Frederic Han\"",
    "created_at": "2015-08-19T09:14:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327732",
    "user": "https://github.com/malb"
}
```

Changing reviewer from "" to "Martin Albrecht, Frederic Han"



---

archive/issue_comments_327733.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-08-19T09:14:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327733",
    "user": "https://github.com/malb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_067620.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-08-21T01:56:21Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18824#event-67620"
}
```



---

archive/issue_comments_327734.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-08-21T01:56:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327734",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_327735.json:
```json
{
    "body": "Changing branch from \"public/giacpyGB\" to \"02cf665c79729f856ae8d43408caa1f6d1506973\"",
    "created_at": "2015-08-21T01:56:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18824#issuecomment-327735",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/giacpyGB" to "02cf665c79729f856ae8d43408caa1f6d1506973"
