# Issue 18852: interactive_simplex_method: Enable typesetting of run_simplex_method in SageMathCloud

archive/issues_018615.json:
```json
{
    "assignees": [],
    "body": "I tried to use interactive_simplex_method in SageMathCloud, and it seems the current model of `InteractiveLPProblemStandardForm.run_simplex_method` and `LPDictionary.ELLUL` to return a string of LaTeX code is not a good fit. (See screenshot.)\n\nI propose to change these methods so they just call `pretty_print` repeatedly and return nothing. An optional keyword argument, show=False, would turn off output. This is used when, for example, `run_simplex_method` is called by `final_dictionary`.\n\n\nDepends on #18292\nDepends on #19097\n\nCC:  @novoselt @nathanncohen\n\nKeywords: **lp**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/18852_\n\n",
    "closed_at": "2015-11-22T20:58:17Z",
    "created_at": "2015-07-06T00:26:30Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/component%3A%20numerical",
        "https://github.com/sagemath/sage/labels/duplicate"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "interactive_simplex_method: Enable typesetting of run_simplex_method in SageMathCloud",
    "type": "issue",
    "updated_at": "2015-11-22T20:58:17Z",
    "url": "https://github.com/sagemath/sage/issues/18852",
    "user": "https://github.com/mkoeppe"
}
```
I tried to use interactive_simplex_method in SageMathCloud, and it seems the current model of `InteractiveLPProblemStandardForm.run_simplex_method` and `LPDictionary.ELLUL` to return a string of LaTeX code is not a good fit. (See screenshot.)

I propose to change these methods so they just call `pretty_print` repeatedly and return nothing. An optional keyword argument, show=False, would turn off output. This is used when, for example, `run_simplex_method` is called by `final_dictionary`.


Depends on #18292
Depends on #19097

CC:  @novoselt @nathanncohen

Keywords: **lp**

_Issue created by migration from https://trac.sagemath.org/ticket/18852_





---

archive/issue_events_240895.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2015-07-06T00:26:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18852",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18852#event-240895"
}
```



---

archive/issue_events_240896.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2015-07-06T00:26:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18852",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20numerical",
    "label_color": "0000ff",
    "label_name": "component: numerical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18852#event-240896"
}
```



---

archive/issue_events_240897.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2015-07-06T00:26:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18852",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18852#event-240897"
}
```



---

archive/issue_comments_266464.json:
```json
{
    "body": "screen shot - interactive simplex in SageMathCloud",
    "created_at": "2015-07-06T02:27:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18852#issuecomment-266464",
    "user": "https://github.com/mkoeppe"
}
```

screen shot - interactive simplex in SageMathCloud



---

archive/issue_events_240898.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2015-07-06T02:29:27Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/18852",
    "title_is": "interactive_simplex_method: Enable typesetting of run_simplex_method in SageMathCloud",
    "title_was": "interactive_simplex_method: Output improvements",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18852#event-240898"
}
```



---

archive/issue_comments_266465.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-I tried to use interactive_simplex_method in SageMathCloud, and it seems the current model of `InteractiveLPProblemStandardForm.run_simplex_method` and `LPDictionary.ELLUL` to return a string of LaTeX code is not a good fit.\n+I tried to use interactive_simplex_method in SageMathCloud, and it seems the current model of `InteractiveLPProblemStandardForm.run_simplex_method` and `LPDictionary.ELLUL` to return a string of LaTeX code is not a good fit. (See screenshot.)\n \n I propose to change these methods so they just call `pretty_print` repeatedly and return nothing. An optional keyword argument, show=False, would turn off output. This is used when, for example, `run_simplex_method` is called by `final_dictionary`.\n \n``````\n",
    "created_at": "2015-07-06T02:29:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18852#issuecomment-266465",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-I tried to use interactive_simplex_method in SageMathCloud, and it seems the current model of `InteractiveLPProblemStandardForm.run_simplex_method` and `LPDictionary.ELLUL` to return a string of LaTeX code is not a good fit.
+I tried to use interactive_simplex_method in SageMathCloud, and it seems the current model of `InteractiveLPProblemStandardForm.run_simplex_method` and `LPDictionary.ELLUL` to return a string of LaTeX code is not a good fit. (See screenshot.)
 
 I propose to change these methods so they just call `pretty_print` repeatedly and return nothing. An optional keyword argument, show=False, would turn off output. This is used when, for example, `run_simplex_method` is called by `final_dictionary`.
 
``````




---

archive/issue_comments_266466.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nAttachment: **[Screen Shot 2015-07-05 at 7.26.06 PM.png.gz](https://github.com/sagemath/sage/files/ticket18852/7e7b42be7cac10b0083f3f2289083acc.gz)**",
    "created_at": "2015-07-06T02:29:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18852#issuecomment-266466",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:1'>Comment 1:</a>
Attachment: **[Screen Shot 2015-07-05 at 7.26.06 PM.png.gz](https://github.com/sagemath/sage/files/ticket18852/7e7b42be7cac10b0083f3f2289083acc.gz)**



---

archive/issue_comments_266467.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nPlease don't make rush changes here - it was a lot of pain to make things work in SageNB and SageTeX. The name also may not be fitting if it was just printing something.\n\nNote that it does not return just a string - it returns a `LatexExpr` which should be typeset by frontends automatically.\n\nAlthough there are problems because of the long LaTeX code - I had to increase limits on the size of expressions handled by SMC. So there may be some sense in showing steps as separate formulas in `run_simplex_method` to ease the load on MathJax, but `ELLUL` works exactly as it should - if SMC can't deal with it, SMC has to be tuned.",
    "created_at": "2015-07-06T02:49:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18852#issuecomment-266467",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:2'>Comment 2:</a>
Please don't make rush changes here - it was a lot of pain to make things work in SageNB and SageTeX. The name also may not be fitting if it was just printing something.

Note that it does not return just a string - it returns a `LatexExpr` which should be typeset by frontends automatically.

Although there are problems because of the long LaTeX code - I had to increase limits on the size of expressions handled by SMC. So there may be some sense in showing steps as separate formulas in `run_simplex_method` to ease the load on MathJax, but `ELLUL` works exactly as it should - if SMC can't deal with it, SMC has to be tuned.



---

archive/issue_comments_266468.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nThanks a lot for your comments!\nDo we need to Cc: someone working on SMC to make them aware of this?",
    "created_at": "2015-07-06T03:32:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18852#issuecomment-266468",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'>Comment 3:</a>
Thanks a lot for your comments!
Do we need to Cc: someone working on SMC to make them aware of this?



---

archive/issue_comments_266469.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nI've opened https://github.com/sagemathinc/smc/issues/40",
    "created_at": "2015-07-06T19:01:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18852#issuecomment-266469",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:4'>Comment 4:</a>
I've opened https://github.com/sagemathinc/smc/issues/40



---

archive/issue_comments_266470.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nReplying to [@novoselt](#comment%3A2):\n> Although there are problems because of the long LaTeX code - I had to increase limits on the size of expressions handled by SMC. So there may be some sense in showing steps as separate formulas in `run_simplex_method` to ease the load on MathJax, but `ELLUL` works exactly as it should - if SMC can't deal with it, SMC has to be tuned.\n\nI guess showing the steps as separate formulas would also allow to show a plot after each update step (if the user requests that), showing the current basic solution...",
    "created_at": "2015-07-22T01:18:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18852#issuecomment-266470",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'>Comment 5:</a>
Replying to [@novoselt](#comment%3A2):
> Although there are problems because of the long LaTeX code - I had to increase limits on the size of expressions handled by SMC. So there may be some sense in showing steps as separate formulas in `run_simplex_method` to ease the load on MathJax, but `ELLUL` works exactly as it should - if SMC can't deal with it, SMC has to be tuned.

I guess showing the steps as separate formulas would also allow to show a plot after each update step (if the user requests that), showing the current basic solution...



---

archive/issue_comments_266471.json:
```json
{
    "body": "Dependencies: **#18292**",
    "created_at": "2015-08-25T19:33:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18852#issuecomment-266471",
    "user": "https://github.com/novoselt"
}
```

Dependencies: **#18292**



---

archive/issue_comments_266472.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nOnce we have html blocks implemented, `run_simplex_method` should return `HTMLFragment` which will be the current string:\n- it should display nicely when rendered as HTML\n- formulas will be in math mode automatically and will be rendered one-by-one, helping to avoid problems with too long input for MathJax\n- the same string should work as LaTeX code as well\n\n`ELLUL` on the other hand still should return `LatexExpr` since it constructs a single formula.",
    "created_at": "2015-08-25T19:33:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18852#issuecomment-266472",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:6'>Comment 6:</a>
Once we have html blocks implemented, `run_simplex_method` should return `HTMLFragment` which will be the current string:
- it should display nicely when rendered as HTML
- formulas will be in math mode automatically and will be rendered one-by-one, helping to avoid problems with too long input for MathJax
- the same string should work as LaTeX code as well

`ELLUL` on the other hand still should return `LatexExpr` since it constructs a single formula.



---

archive/issue_comments_266473.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nThis sounds like a plan, though I must say that I don't understand the output model of Sage. \n\nI know that run_simplex_method stores the final dictionary in an attribute; but suppose it would have to be a return value instead. If the function wants to print its progress (sequence of dictionaries) on the screen AND return a value, would it then have to return two values: (1) the HTMLFragment and (2) the dictionary?",
    "created_at": "2015-08-26T19:09:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18852#issuecomment-266473",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'>Comment 7:</a>
This sounds like a plan, though I must say that I don't understand the output model of Sage. 

I know that run_simplex_method stores the final dictionary in an attribute; but suppose it would have to be a return value instead. If the function wants to print its progress (sequence of dictionaries) on the screen AND return a value, would it then have to return two values: (1) the HTMLFragment and (2) the dictionary?



---

archive/issue_comments_266474.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nIt is usually a bad idea to output \"the progress\": you can't be sure how output is handled and there will be no way to catch this output for further processing.",
    "created_at": "2015-08-26T19:39:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18852#issuecomment-266474",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:8'>Comment 8:</a>
It is usually a bad idea to output "the progress": you can't be sure how output is handled and there will be no way to catch this output for further processing.



---

archive/issue_comments_266475.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nWell, it's called logging, and python has a somewhat sophisticated facility for this.\n\nWithout using the logging facility, one could simply pass a callback function to a productive function such as run_simplex_method that is called when there is something to be output.",
    "created_at": "2015-08-26T20:30:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18852#issuecomment-266475",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'>Comment 9:</a>
Well, it's called logging, and python has a somewhat sophisticated facility for this.

Without using the logging facility, one could simply pass a callback function to a productive function such as run_simplex_method that is called when there is something to be output.



---

archive/issue_comments_266476.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nLogging and output are quite orthogonal, I would say.\n\nI am also not aware of many (if any) functions in Sage that use callbacks apart from \"infrastructure\". And there is certainly no need for them in this module.",
    "created_at": "2015-08-26T22:40:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18852#issuecomment-266476",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:10'>Comment 10:</a>
Logging and output are quite orthogonal, I would say.

I am also not aware of many (if any) functions in Sage that use callbacks apart from "infrastructure". And there is certainly no need for them in this module.



---

archive/issue_comments_266477.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nOK, we'll just wait for #18292",
    "created_at": "2015-08-26T22:43:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18852#issuecomment-266477",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'>Comment 11:</a>
OK, we'll just wait for #18292



---

archive/issue_comments_266478.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nThe new output code of #19097 is a better approach.\n\nThis ticket can be closed.",
    "created_at": "2015-11-13T22:52:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18852#issuecomment-266478",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'>Comment 12:</a>
The new output code of #19097 is a better approach.

This ticket can be closed.



---

archive/issue_comments_266479.json:
```json
{
    "body": "Changed dependencies from **#18292** to **#18292, #19097**",
    "created_at": "2015-11-13T22:52:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18852#issuecomment-266479",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#18292** to **#18292, #19097**



---

archive/issue_events_240899.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2015-11-13T22:52:30Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/18852",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18852#event-240899"
}
```



---

archive/issue_events_240900.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2015-11-15T17:45:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18852",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18852#event-240900"
}
```



---

archive/issue_events_240901.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2015-11-15T17:45:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18852",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18852#event-240901"
}
```



---

archive/issue_events_240902.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2015-11-15T17:45:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18852",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18852#event-240902"
}
```



---

archive/issue_events_240903.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-11-22T20:58:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18852",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18852#event-240903"
}
```



---

archive/issue_events_240904.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-11-22T20:58:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/18852",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18852#event-240904"
}
```



---

archive/issue_events_240905.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-11-22T20:58:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18852",
    "label": "https://github.com/sagemath/sage/labels/duplicate",
    "label_color": "a6a6a6",
    "label_name": "duplicate",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18852#event-240905"
}
```
