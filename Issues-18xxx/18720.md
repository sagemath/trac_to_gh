# Issue 18720: Change diagram algebra basis set partitions from list to generator

archive/issues_018483.json:
```json
{
    "body": "Currently, when building a diagram algebra, the functions that create the set partitions representing the diagrams create a list of all the correct set partitions. However, this behavior causes the initialization of the algebras to be slow in larger cases. Furthermore, there are things one can do in these algebras without needing to know the whole basis since it is usually pretty easy to determine if an element is in the algebra. Thus, in order to avoid this computation except when necessary, I have made the set partition generating functions return iterators instead of lists.\n\nCC:  @alauve @srdoty @saliola\n\nKeywords: days65, partition algebra, diagram algebra\n\nBranch/Commit: 8ec8866554aa14c34f3d2754de57e4bb1a47bec1\n\nReviewer: Travis Scrimshaw\n\nAuthor: George H. Seelinger\n\nDependencies: #18707\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/18720\n\n",
    "closed_at": "2015-08-26T13:35:51Z",
    "created_at": "2015-06-17T17:22:40Z",
    "labels": [
        "component: algebra",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.9",
    "title": "Change diagram algebra basis set partitions from list to generator",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18720",
    "user": "https://github.com/ghseeli"
}
```
Currently, when building a diagram algebra, the functions that create the set partitions representing the diagrams create a list of all the correct set partitions. However, this behavior causes the initialization of the algebras to be slow in larger cases. Furthermore, there are things one can do in these algebras without needing to know the whole basis since it is usually pretty easy to determine if an element is in the algebra. Thus, in order to avoid this computation except when necessary, I have made the set partition generating functions return iterators instead of lists.

CC:  @alauve @srdoty @saliola

Keywords: days65, partition algebra, diagram algebra

Branch/Commit: 8ec8866554aa14c34f3d2754de57e4bb1a47bec1

Reviewer: Travis Scrimshaw

Author: George H. Seelinger

Dependencies: #18707

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/18720





---

archive/issue_comments_250893.json:
```json
{
    "body": "<a id='comment:3'></a>Thank you for your work on cleaning up the diagram algebras. I know this isn't yet ready for review, but some comments:\n\nYou should try to avoid changing the behavior of any public functions. Instead I would create an iterator method (perhaps make it hidden?) and then the original function just calls `list(iterator_method)`.\n\nYou shouldn't use `CombinatorialClass` and `CombinatorialObject` but instead `Parent, UniqueRepresentation` and `ClonableArray` respectively as these are being deprecated. Also you should set the `Element = PartitionDiagram` in `PartitionDiagrams` (the order of which will need to be swapped in the file). If you put `PartitionDiagrams` in the category of `FiniteEnumeratedSets`, then you don't need to define a `list` and `cardinality` methods (maybe even `__contains__`, I forget offhand). The `PartitionDiagram` class will also need to have parent be passed as the first argument.\n\nLet me know if you have any questions.",
    "created_at": "2015-06-19T06:24:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250893",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:3'></a>Thank you for your work on cleaning up the diagram algebras. I know this isn't yet ready for review, but some comments:

You should try to avoid changing the behavior of any public functions. Instead I would create an iterator method (perhaps make it hidden?) and then the original function just calls `list(iterator_method)`.

You shouldn't use `CombinatorialClass` and `CombinatorialObject` but instead `Parent, UniqueRepresentation` and `ClonableArray` respectively as these are being deprecated. Also you should set the `Element = PartitionDiagram` in `PartitionDiagrams` (the order of which will need to be swapped in the file). If you put `PartitionDiagrams` in the category of `FiniteEnumeratedSets`, then you don't need to define a `list` and `cardinality` methods (maybe even `__contains__`, I forget offhand). The `PartitionDiagram` class will also need to have parent be passed as the first argument.

Let me know if you have any questions.



---

archive/issue_comments_250894.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-19T18:44:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250894",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_250895.json:
```json
{
    "body": "<a id='comment:5'></a>Travis, thank you for your feedback! I still need to create documentation, but is this code closer to what you are looking for? Thank you for suggesting `Parent`, `UniqueRepresentation`, `ClonableArray`, and `FiniteEnumeratedSet.` They make things a lot easier.",
    "created_at": "2015-06-19T18:48:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250895",
    "user": "https://github.com/ghseeli"
}
```

<a id='comment:5'></a>Travis, thank you for your feedback! I still need to create documentation, but is this code closer to what you are looking for? Thank you for suggesting `Parent`, `UniqueRepresentation`, `ClonableArray`, and `FiniteEnumeratedSet.` They make things a lot easier.



---

archive/issue_comments_250896.json:
```json
{
    "body": "<a id='comment:6'></a>It looks a lot better. Considering how you're going to be using them, I would instead make the iter methods return simple tuple of pairs (where each pair is a tuple) as you don't seem to need the full weight of a `SetPartition` object. This might require some other changes to the code, but I doubt it will be that much.\n\nI would also make the `AbstractPartitionDiagram` class compare equals with `SetPartition` and lists/tuples/sets of lists/tuples/sets. This will make it easier on the user to interact with the basis elements. I would also just make one `AbstractPartitionDiagrams` class which takes a name (which gets used in the `_repr_`),  function, order, and category input as these other classes seem useless (but perhaps you have plans for them). You should also\n\n```\n        Element = AbstractPartitionDiagram  # Make this at the class level (so de-indent it one level)\n        self.element_class = Element  # Remove this, done automatically by the category framework\n```\nI'd also change the `__iter__` to this:\n\n```python\n    def __iter__(self):\n        for i in self.diagram_func(self.order):\n            yield self.element_class(self, i)\n```\n\nOn a closer look/second thought, the `*_diagram` methods are not imported into the public namespace, so it's okay to change the output to be iterators. Just make sure to change the documentation appropriately.\n\nOn an unrelated to this ticket note, you can get rid of those (IMO) annoying extra `[]` brackets in the element repr by passing `bracket=False` (I believe, maybe it was `bracket=None`) in the `CombinatorialFreeModule.__init__`.",
    "created_at": "2015-06-19T19:57:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250896",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:6'></a>It looks a lot better. Considering how you're going to be using them, I would instead make the iter methods return simple tuple of pairs (where each pair is a tuple) as you don't seem to need the full weight of a `SetPartition` object. This might require some other changes to the code, but I doubt it will be that much.

I would also make the `AbstractPartitionDiagram` class compare equals with `SetPartition` and lists/tuples/sets of lists/tuples/sets. This will make it easier on the user to interact with the basis elements. I would also just make one `AbstractPartitionDiagrams` class which takes a name (which gets used in the `_repr_`),  function, order, and category input as these other classes seem useless (but perhaps you have plans for them). You should also

```
        Element = AbstractPartitionDiagram  # Make this at the class level (so de-indent it one level)
        self.element_class = Element  # Remove this, done automatically by the category framework
```
I'd also change the `__iter__` to this:

```python
    def __iter__(self):
        for i in self.diagram_func(self.order):
            yield self.element_class(self, i)
```

On a closer look/second thought, the `*_diagram` methods are not imported into the public namespace, so it's okay to change the output to be iterators. Just make sure to change the documentation appropriately.

On an unrelated to this ticket note, you can get rid of those (IMO) annoying extra `[]` brackets in the element repr by passing `bracket=False` (I believe, maybe it was `bracket=None`) in the `CombinatorialFreeModule.__init__`.



---

archive/issue_comments_250897.json:
```json
{
    "body": "<a id='comment:7'></a>Okay, I will do those changes. I do have plans for the other classes, but I have not finished polishing up the methods. At the moment, really the only one I have special methods for is `BrauerDiagrams`, but I can imagine special methods applying to other types of diagrams. For instance, it is usually possible to determine if a diagram is a certain type of diagram without generating the entire list of those diagrams of order n. However, I assume the contains method of `FiniteEnumeratedSets` currently needs to create the entire list?\n\nHowever, it may be possible to reduce the number of classes; I will think about the best way to logically do it while preserving the functionality I want to add.",
    "created_at": "2015-06-19T20:09:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250897",
    "user": "https://github.com/ghseeli"
}
```

<a id='comment:7'></a>Okay, I will do those changes. I do have plans for the other classes, but I have not finished polishing up the methods. At the moment, really the only one I have special methods for is `BrauerDiagrams`, but I can imagine special methods applying to other types of diagrams. For instance, it is usually possible to determine if a diagram is a certain type of diagram without generating the entire list of those diagrams of order n. However, I assume the contains method of `FiniteEnumeratedSets` currently needs to create the entire list?

However, it may be possible to reduce the number of classes; I will think about the best way to logically do it while preserving the functionality I want to add.



---

archive/issue_comments_250898.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [comment:7 ghseeli]:\n> Okay, I will do those changes. I do have plans for the other classes, but I have not finished polishing up the methods. At the moment, really the only one I have special methods for is `BrauerDiagrams`, but I can imagine special methods applying to other types of diagrams. For instance, it is usually possible to determine if a diagram is a certain type of diagram without generating the entire list of those diagrams of order n. However, I assume the contains method of `FiniteEnumeratedSets` currently needs to create the entire list?\n\n\nYes, that is correct. So if you have a better solution using `__contains__`, this completely justifies having separate classes.\n\n> However, it may be possible to reduce the number of classes; I will think about the best way to logically do it while preserving the functionality I want to add.\n\n\nDon't worry too much about it. It's better that the code is readable and grouped into functionality (i.e., good OOP). It was just if they were going to be classes that passed data up to a base class, then I didn't see a reason to keeping them.",
    "created_at": "2015-06-19T20:18:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250898",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>Replying to [comment:7 ghseeli]:
> Okay, I will do those changes. I do have plans for the other classes, but I have not finished polishing up the methods. At the moment, really the only one I have special methods for is `BrauerDiagrams`, but I can imagine special methods applying to other types of diagrams. For instance, it is usually possible to determine if a diagram is a certain type of diagram without generating the entire list of those diagrams of order n. However, I assume the contains method of `FiniteEnumeratedSets` currently needs to create the entire list?


Yes, that is correct. So if you have a better solution using `__contains__`, this completely justifies having separate classes.

> However, it may be possible to reduce the number of classes; I will think about the best way to logically do it while preserving the functionality I want to add.


Don't worry too much about it. It's better that the code is readable and grouped into functionality (i.e., good OOP). It was just if they were going to be classes that passed data up to a base class, then I didn't see a reason to keeping them.



---

archive/issue_comments_250899.json:
```json
{
    "body": "<a id='comment:9'></a>I have a question about making the various other classes and objects evaluate as equal with the Diagram classes. Doing this allows the user to create algebra elements that can misbehave. For instance\n\n\n```\nsage: P = PartitionAlgebra(2,x)\nsage: elm = P.basis()[((1,2),(-1,-2))]; elm\nP[((1, 2), (-1, -2))]\nsage: type(elm.support()[0])\n<type 'tuple'>\nsage: elm^2\nTraceback (most recent call last)\n...\nAttributeError: 'tuple' object has no attribute 'compose'\n```\n\nThis isn't insurmountable, but will I have to put a lot of coercion throughout all the diagram methods to make this exhibit the desired behavior?",
    "created_at": "2015-06-19T21:10:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250899",
    "user": "https://github.com/ghseeli"
}
```

<a id='comment:9'></a>I have a question about making the various other classes and objects evaluate as equal with the Diagram classes. Doing this allows the user to create algebra elements that can misbehave. For instance


```
sage: P = PartitionAlgebra(2,x)
sage: elm = P.basis()[((1,2),(-1,-2))]; elm
P[((1, 2), (-1, -2))]
sage: type(elm.support()[0])
<type 'tuple'>
sage: elm^2
Traceback (most recent call last)
...
AttributeError: 'tuple' object has no attribute 'compose'
```

This isn't insurmountable, but will I have to put a lot of coercion throughout all the diagram methods to make this exhibit the desired behavior?



---

archive/issue_comments_250900.json:
```json
{
    "body": "<a id='comment:10'></a>You will need to make the basis indexing set iterate over elements of itself. You will also need to implement a compose method for those elements, but it should work. If you're still having issues, you can push what you currently have and I can make some fixes directly.",
    "created_at": "2015-06-19T21:16:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250900",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'></a>You will need to make the basis indexing set iterate over elements of itself. You will also need to implement a compose method for those elements, but it should work. If you're still having issues, you can push what you currently have and I can make some fixes directly.



---

archive/issue_comments_250901.json:
```json
{
    "body": "<a id='comment:11'></a>I am sorry, I don't quite get what \"make the basis indexing set iterate over elements of itself\" means because I don't quite understand the structure of the `LazyFamily` in the context of `CombinatorialFreeModule` yet. My concern is: should users expect that calling for the support of an element return a uniform type? I will commit what I have so you can take a look.",
    "created_at": "2015-06-19T21:41:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250901",
    "user": "https://github.com/ghseeli"
}
```

<a id='comment:11'></a>I am sorry, I don't quite get what "make the basis indexing set iterate over elements of itself" means because I don't quite understand the structure of the `LazyFamily` in the context of `CombinatorialFreeModule` yet. My concern is: should users expect that calling for the support of an element return a uniform type? I will commit what I have so you can take a look.



---

archive/issue_comments_250902.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-19T21:42:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250902",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_250903.json:
```json
{
    "body": "<a id='comment:13'></a>Replying to [comment:11 ghseeli]:\n> I am sorry, I don't quite get what \"make the basis indexing set iterate over elements of itself\" means because I don't quite understand the structure of the `LazyFamily` in the context of `CombinatorialFreeModule` yet. My concern is: should users expect that calling for the support of an element return a uniform type? I will commit what I have so you can take a look.\n\n\nYou are correct, it should be a uniform type. What the `LazyFamily` does in `CombinatorialFreeModule.basis()` (in this case) is iterate over the `AbstractPartitionDiagrams` class and then makes that into an element of the CFM, but only when required. However from looking at it, it should be working properly.\n\nAlso I think `range(-len(tst)/2,len(tst)/2+1)` might give you trouble because it's doing python int division (where `1/2 == 0`). And `except TypeError, ValueError:` should be `except (TypeError, ValueError):`.",
    "created_at": "2015-06-19T22:08:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250903",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:13'></a>Replying to [comment:11 ghseeli]:
> I am sorry, I don't quite get what "make the basis indexing set iterate over elements of itself" means because I don't quite understand the structure of the `LazyFamily` in the context of `CombinatorialFreeModule` yet. My concern is: should users expect that calling for the support of an element return a uniform type? I will commit what I have so you can take a look.


You are correct, it should be a uniform type. What the `LazyFamily` does in `CombinatorialFreeModule.basis()` (in this case) is iterate over the `AbstractPartitionDiagrams` class and then makes that into an element of the CFM, but only when required. However from looking at it, it should be working properly.

Also I think `range(-len(tst)/2,len(tst)/2+1)` might give you trouble because it's doing python int division (where `1/2 == 0`). And `except TypeError, ValueError:` should be `except (TypeError, ValueError):`.



---

archive/issue_comments_250904.json:
```json
{
    "body": "<a id='comment:14'></a>Ah, I meant to say `if len(tst)%2 != 0 or tst != range(-len(tst)/2,len(tst)/2+1)` so that `len(tst)` is guaranteed to be divisible by 2. Does that work better? Thanks for catching the missing parenthesis on the except statement.",
    "created_at": "2015-06-19T23:07:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250904",
    "user": "https://github.com/ghseeli"
}
```

<a id='comment:14'></a>Ah, I meant to say `if len(tst)%2 != 0 or tst != range(-len(tst)/2,len(tst)/2+1)` so that `len(tst)` is guaranteed to be divisible by 2. Does that work better? Thanks for catching the missing parenthesis on the except statement.



---

archive/issue_comments_250905.json:
```json
{
    "body": "<a id='comment:15'></a>Yes, that does. You'll have to rebase over my recent changes. I made it so that we don't create the intermediary `SetPartition` objects, which gives a pretty good speedup (the time to run the tests went from over 7 seconds to just over 6 seconds). I also merged in #18707 to avoid any potential merge conflicts.\n\n---\nNew commits:",
    "created_at": "2015-06-20T00:34:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250905",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:15'></a>Yes, that does. You'll have to rebase over my recent changes. I made it so that we don't create the intermediary `SetPartition` objects, which gives a pretty good speedup (the time to run the tests went from over 7 seconds to just over 6 seconds). I also merged in #18707 to avoid any potential merge conflicts.

---
New commits:



---

archive/issue_comments_250906.json:
```json
{
    "body": "<a id='comment:17'></a>New commits:",
    "created_at": "2015-06-20T00:49:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250906",
    "user": "https://github.com/ghseeli"
}
```

<a id='comment:17'></a>New commits:



---

archive/issue_comments_250907.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-20T01:00:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250907",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_250908.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-20T19:30:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250908",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_250909.json:
```json
{
    "body": "<a id='comment:20'></a>Travis, thank you for all your suggestions so far. They have provided good speedups and made things cleaner and easier to read. I still have one question, though, involving the how the equality between diagrams and iterables of iterables works. I think an example will be best.\n\n```\nsage: B = BrauerAlgebra(3,x)\nsage: elm = B([[1,2],[-1,-2]]) #calls element_constructor\nsage: elm2 = B.basis()[((1,2),(-1,-2),(3,-3))] #bypasses element_constructor\nsage: elm == elm2\nFalse\nsage: elm*B.one() == elm2*B.one() #support converted into same type\nTrue\nsage: elm.support()[0] == elm2.support()[0] #AbstractPartitionDiagram.__eq__ called\nTrue\nsage: type(elm.support()[0]) #support was left as tuple by construction\n<type 'tuple'>\n```\n\nSo, while I personally never construct elements by calling `B.basis().__getitem__`, it seems that this is a totally valid method to create an element, but leads to some unpredictable or unclear behaviors. Do you know the best way to address this in the context of `CombinatorialFreeModule`?",
    "created_at": "2015-06-20T19:41:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250909",
    "user": "https://github.com/ghseeli"
}
```

<a id='comment:20'></a>Travis, thank you for all your suggestions so far. They have provided good speedups and made things cleaner and easier to read. I still have one question, though, involving the how the equality between diagrams and iterables of iterables works. I think an example will be best.

```
sage: B = BrauerAlgebra(3,x)
sage: elm = B([[1,2],[-1,-2]]) #calls element_constructor
sage: elm2 = B.basis()[((1,2),(-1,-2),(3,-3))] #bypasses element_constructor
sage: elm == elm2
False
sage: elm*B.one() == elm2*B.one() #support converted into same type
True
sage: elm.support()[0] == elm2.support()[0] #AbstractPartitionDiagram.__eq__ called
True
sage: type(elm.support()[0]) #support was left as tuple by construction
<type 'tuple'>
```

So, while I personally never construct elements by calling `B.basis().__getitem__`, it seems that this is a totally valid method to create an element, but leads to some unpredictable or unclear behaviors. Do you know the best way to address this in the context of `CombinatorialFreeModule`?



---

archive/issue_comments_250910.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-20T20:23:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250910",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_250911.json:
```json
{
    "body": "<a id='comment:22'></a>This actually seems to be a more general issue with CFM:\n\n```\nsage: s = SymmetricFunctions(QQ).s()\nsage: s.basis()[(3,1,1)]\ns(3, 1, 1)\nsage: type(_.support()[0])\n<type 'tuple'>\n```\nThis is now #18750 (which can be considered independent of this ticket).",
    "created_at": "2015-06-20T21:02:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250911",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:22'></a>This actually seems to be a more general issue with CFM:

```
sage: s = SymmetricFunctions(QQ).s()
sage: s.basis()[(3,1,1)]
s(3, 1, 1)
sage: type(_.support()[0])
<type 'tuple'>
```
This is now #18750 (which can be considered independent of this ticket).



---

archive/issue_comments_250912.json:
```json
{
    "body": "<a id='comment:23'></a>Alright. Sounds good. One other question. Should the `__contains__` methods of the *Diagrams accept iterables of iterables? For instance should \n\n```\nsage: ((1,2),(-1,-2)) in da.PartitionDiagrams(2)\n```\n\nreturn `True` of `False`?",
    "created_at": "2015-06-20T21:08:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250912",
    "user": "https://github.com/ghseeli"
}
```

<a id='comment:23'></a>Alright. Sounds good. One other question. Should the `__contains__` methods of the *Diagrams accept iterables of iterables? For instance should 

```
sage: ((1,2),(-1,-2)) in da.PartitionDiagrams(2)
```

return `True` of `False`?



---

archive/issue_comments_250913.json:
```json
{
    "body": "<a id='comment:24'></a>In an ideal world, I would say anything that is valid as input for `SetPartition`. Although we don't necessary have to cover every case, just the \"typical\" ones (such as what you gave).",
    "created_at": "2015-06-20T21:10:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250913",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:24'></a>In an ideal world, I would say anything that is valid as input for `SetPartition`. Although we don't necessary have to cover every case, just the "typical" ones (such as what you gave).



---

archive/issue_comments_250914.json:
```json
{
    "body": "<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-20T21:33:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250914",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_250915.json:
```json
{
    "body": "<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-20T21:54:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250915",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_250916.json:
```json
{
    "body": "<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-20T22:15:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250916",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_250917.json:
```json
{
    "body": "<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-20T22:43:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250917",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_250918.json:
```json
{
    "body": "<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-22T18:51:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250918",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_250919.json:
```json
{
    "body": "<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-22T19:13:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250919",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_250920.json:
```json
{
    "body": "<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-30T04:05:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250920",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_250921.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-06-30T04:06:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250921",
    "user": "https://github.com/ghseeli"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_250922.json:
```json
{
    "body": "<a id='comment:33'></a>It looks like you'll have to rebase this against the latest `develop` branch.\n\nYou'll also need to make sure all methods have doctests and, more minor, to change `Returns` to `Return` and similar changes in the docstrings (of the methods you've changed). I'll continue my review at that point. Thanks.",
    "created_at": "2015-07-02T01:41:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250922",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:33'></a>It looks like you'll have to rebase this against the latest `develop` branch.

You'll also need to make sure all methods have doctests and, more minor, to change `Returns` to `Return` and similar changes in the docstrings (of the methods you've changed). I'll continue my review at that point. Thanks.



---

archive/issue_comments_250923.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-07-02T01:41:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250923",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_250924.json:
```json
{
    "body": "<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-04T00:48:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250924",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_250925.json:
```json
{
    "body": "<a id='comment:35'></a>Travis, do I need to provide doctests for double underscore methods in their documentation or in the documentation for the class as a whole?",
    "created_at": "2015-07-04T01:15:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250925",
    "user": "https://github.com/ghseeli"
}
```

<a id='comment:35'></a>Travis, do I need to provide doctests for double underscore methods in their documentation or in the documentation for the class as a whole?



---

archive/issue_comments_250926.json:
```json
{
    "body": "<a id='comment:36'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-04T01:46:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250926",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:36'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_250927.json:
```json
{
    "body": "<a id='comment:37'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-04T01:50:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250927",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:37'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_250928.json:
```json
{
    "body": "<a id='comment:38'></a>Replying to [comment:35 ghseeli]:\n> Travis, do I need to provide doctests for double underscore methods in their documentation or in the documentation for the class as a whole?\n\n\nYou need to provide doctests for any method in that method, including double underscore methods (although they can be indirectly called if the method does not make sense as a standalone or needs a lot of extra preprocessing of data).",
    "created_at": "2015-07-04T22:32:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250928",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:38'></a>Replying to [comment:35 ghseeli]:
> Travis, do I need to provide doctests for double underscore methods in their documentation or in the documentation for the class as a whole?


You need to provide doctests for any method in that method, including double underscore methods (although they can be indirectly called if the method does not make sense as a standalone or needs a lot of extra preprocessing of data).



---

archive/issue_comments_250929.json:
```json
{
    "body": "<a id='comment:39'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-06T00:22:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250929",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:39'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_250930.json:
```json
{
    "body": "<a id='comment:40'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-06T00:34:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250930",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:40'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_250931.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-07-06T00:37:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250931",
    "user": "https://github.com/ghseeli"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_250932.json:
```json
{
    "body": "<a id='comment:42'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-06T03:50:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250932",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:42'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_250933.json:
```json
{
    "body": "<a id='comment:43'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-23T03:49:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250933",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:43'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_052427.json:
```json
{
    "actor": "https://github.com/ghseeli",
    "created_at": "2015-08-06T00:45:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "milestone": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18720#event-52427"
}
```



---

archive/issue_comments_250934.json:
```json
{
    "body": "<a id='comment:45'></a>Finally had time to finish my review changes...sorry it took so long. I changed the interface for getting compact representations to use a global option you can set via the Brauer algebra or diagrams (the parent). There might be some more documentation fixes that need to be done, but overall I'd be happy with this going into Sage as is. Please check my changes, and if you're happy with them, then you can set a positive review.\n\n---\nLast 10 new commits:",
    "created_at": "2015-08-11T17:38:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250934",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:45'></a>Finally had time to finish my review changes...sorry it took so long. I changed the interface for getting compact representations to use a global option you can set via the Brauer algebra or diagrams (the parent). There might be some more documentation fixes that need to be done, but overall I'd be happy with this going into Sage as is. Please check my changes, and if you're happy with them, then you can set a positive review.

---
Last 10 new commits:



---

archive/issue_comments_250935.json:
```json
{
    "body": "<a id='comment:46'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-08-11T17:40:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250935",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:46'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_250936.json:
```json
{
    "body": "<a id='comment:47'></a>PS/FYI - This is based off 6.9.beta0.",
    "created_at": "2015-08-11T17:41:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250936",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:47'></a>PS/FYI - This is based off 6.9.beta0.



---

archive/issue_comments_250937.json:
```json
{
    "body": "<a id='comment:48'></a>Alright. It looks good to me. I did not know about this global options pattern, so thank you for doing that!",
    "created_at": "2015-08-16T20:24:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250937",
    "user": "https://github.com/ghseeli"
}
```

<a id='comment:48'></a>Alright. It looks good to me. I did not know about this global options pattern, so thank you for doing that!



---

archive/issue_comments_250938.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-08-16T20:24:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250938",
    "user": "https://github.com/ghseeli"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_250939.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-08-16T20:43:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250939",
    "user": "https://github.com/ghseeli"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_250940.json:
```json
{
    "body": "<a id='comment:52'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-08-16T22:30:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250940",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:52'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_250941.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2015-08-16T23:09:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250941",
    "user": "https://github.com/ghseeli"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_250942.json:
```json
{
    "body": "<a id='comment:54'></a>Travis, do you know why the doctest passed without the correct listed output before my most recent commit? Is this expected behavior or some sort of issue with the file setup?",
    "created_at": "2015-08-16T23:10:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250942",
    "user": "https://github.com/ghseeli"
}
```

<a id='comment:54'></a>Travis, do you know why the doctest passed without the correct listed output before my most recent commit? Is this expected behavior or some sort of issue with the file setup?



---

archive/issue_comments_250943.json:
```json
{
    "body": "<a id='comment:55'></a>Tests in `GlobalOptions` aren't actually tested because the docstring is dynamically generated. You will also need to update `doctests/sources.py` file because of this. (I would do this myself, except I currently don't have a working version of Sage.)",
    "created_at": "2015-08-17T16:05:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250943",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:55'></a>Tests in `GlobalOptions` aren't actually tested because the docstring is dynamically generated. You will also need to update `doctests/sources.py` file because of this. (I would do this myself, except I currently don't have a working version of Sage.)



---

archive/issue_comments_250944.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-08-17T16:05:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250944",
    "user": "https://github.com/tscrim"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_250945.json:
```json
{
    "body": "<a id='comment:56'></a>Documentation doesn't build either",
    "created_at": "2015-08-18T20:04:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250945",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:56'></a>Documentation doesn't build either



---

archive/issue_comments_250946.json:
```json
{
    "body": "<a id='comment:57'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-08-23T20:18:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250946",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:57'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_250947.json:
```json
{
    "body": "<a id='comment:58'></a>Travis, it is not clear to me how I need to update doctests/sources.py Could you please be more specific? Feel free to email me if that is more appropriate. Thank you!",
    "created_at": "2015-08-23T20:20:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250947",
    "user": "https://github.com/ghseeli"
}
```

<a id='comment:58'></a>Travis, it is not clear to me how I need to update doctests/sources.py Could you please be more specific? Feel free to email me if that is more appropriate. Thank you!



---

archive/issue_comments_250948.json:
```json
{
    "body": "<a id='comment:59'></a>Just run the doctest on the file and copy/paste the correct output. However I can take care of it if you want me to.",
    "created_at": "2015-08-23T20:26:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250948",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:59'></a>Just run the doctest on the file and copy/paste the correct output. However I can take care of it if you want me to.



---

archive/issue_comments_250949.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-08-24T22:46:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250949",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_250950.json:
```json
{
    "body": "<a id='comment:60'></a>I've fixed the failing doctest in `doctests/sources.py` (you needed to run `--long` with it, something which I didn't know had changed). I've also made some other documentation fixes, which I forgot needed to be done. I also cleaned up the code to make it python3 compliant and might result in a very marginal speedup. So if you're happy with my changes, then you can set this back to positive review.\n\n---\nNew commits:",
    "created_at": "2015-08-24T22:46:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250950",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:60'></a>I've fixed the failing doctest in `doctests/sources.py` (you needed to run `--long` with it, something which I didn't know had changed). I've also made some other documentation fixes, which I forgot needed to be done. I also cleaned up the code to make it python3 compliant and might result in a very marginal speedup. So if you're happy with my changes, then you can set this back to positive review.

---
New commits:



---

archive/issue_comments_250951.json:
```json
{
    "body": "<a id='comment:61'></a>Alright. It looks good to me! Thank you for all the work you have put in on this ticket, Travis!",
    "created_at": "2015-08-25T01:07:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250951",
    "user": "https://github.com/ghseeli"
}
```

<a id='comment:61'></a>Alright. It looks good to me! Thank you for all the work you have put in on this ticket, Travis!



---

archive/issue_comments_250952.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-08-25T01:07:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250952",
    "user": "https://github.com/ghseeli"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_250953.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2015-08-25T17:31:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250953",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_250954.json:
```json
{
    "body": "<a id='comment:62'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2015-08-25T17:31:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250954",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:62'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_250955.json:
```json
{
    "body": "<a id='comment:63'></a>I allowed myself one last little trivial change, `[GL]` -> `[GL1996]`, so as to make it less likely that there is a collision in reference names.\n\nThank you for your work (and sorry it took so long to do the review). Now onto the next ticket.",
    "created_at": "2015-08-25T17:32:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250955",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:63'></a>I allowed myself one last little trivial change, `[GL]` -> `[GL1996]`, so as to make it less likely that there is a collision in reference names.

Thank you for your work (and sorry it took so long to do the review). Now onto the next ticket.



---

archive/issue_comments_250956.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-08-25T17:32:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250956",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_250957.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-08-26T00:40:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250957",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_250958.json:
```json
{
    "body": "<a id='comment:64'></a>\n```\nsage -t --long src/sage/categories/magmatic_algebras.py\n**********************************************************************\nFile \"src/sage/categories/magmatic_algebras.py\", line 139, in sage.categories.magmatic_algebras.MagmaticAlgebras.WithBasis.ParentMethods.algebra_generators\nFailed example:\n    P.algebra_generators()\nExpected:\n    Finite family {{{-1, 1}}: P[{{-1, 1}}], {{-1}, {1}}: P[{{-1}, {1}}]}\nGot:\n    Lazy family (Term map from Partition diagrams of order 1 to Partition Algebra of rank 1 with parameter x over Univariate Polynomial Ring in x over Integer Ring(i))_{i in Partition diagrams of order 1}\n**********************************************************************\n1 item had failures:\n   1 of   6 in sage.categories.magmatic_algebras.MagmaticAlgebras.WithBasis.ParentMethods.algebra_generators\n    [26 tests, 1 failure, 0.20 s]\n```",
    "created_at": "2015-08-26T00:40:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250958",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:64'></a>
```
sage -t --long src/sage/categories/magmatic_algebras.py
**********************************************************************
File "src/sage/categories/magmatic_algebras.py", line 139, in sage.categories.magmatic_algebras.MagmaticAlgebras.WithBasis.ParentMethods.algebra_generators
Failed example:
    P.algebra_generators()
Expected:
    Finite family {{{-1, 1}}: P[{{-1, 1}}], {{-1}, {1}}: P[{{-1}, {1}}]}
Got:
    Lazy family (Term map from Partition diagrams of order 1 to Partition Algebra of rank 1 with parameter x over Univariate Polynomial Ring in x over Integer Ring(i))_{i in Partition diagrams of order 1}
**********************************************************************
1 item had failures:
   1 of   6 in sage.categories.magmatic_algebras.MagmaticAlgebras.WithBasis.ParentMethods.algebra_generators
    [26 tests, 1 failure, 0.20 s]
```



---

archive/issue_comments_250959.json:
```json
{
    "body": "<a id='comment:65'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-08-26T00:57:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250959",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:65'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_250960.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2015-08-26T00:57:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250960",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_events_052428.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-08-26T13:35:51Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18720#event-52428"
}
```



---

archive/issue_comments_250961.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-08-26T13:35:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18720#issuecomment-250961",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
