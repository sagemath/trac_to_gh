# Issue 18182: pushout construction and finding common parents for/including cartesian products

archive/issues_017945.json:
```json
{
    "body": "\n```\nsage: cartesian_product([ZZ]).construction() is None\nTrue\n```\nand the coercion model (in partiuclar, the `pushout` function) does not take care of cartesian products. The aim of this ticket is to add functionality for doing so.\n\nCC:  @roed314 @behackl\n\nKeywords: sd67, coercion, categories\n\nBranch/Commit: bc70cb9f592a7f3eb93267b91591d9cd4ae7b358\n\nReviewer: Benjamin Hackl, Daniel Krenn\n\nAuthor: Daniel Krenn, David Roe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/18182\n\n",
    "closed_at": "2015-10-14T17:03:39Z",
    "created_at": "2015-04-13T21:34:15Z",
    "labels": [
        "component: coercion"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.6",
    "title": "pushout construction and finding common parents for/including cartesian products",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18182",
    "user": "https://github.com/dkrenn"
}
```

```
sage: cartesian_product([ZZ]).construction() is None
True
```
and the coercion model (in partiuclar, the `pushout` function) does not take care of cartesian products. The aim of this ticket is to add functionality for doing so.

CC:  @roed314 @behackl

Keywords: sd67, coercion, categories

Branch/Commit: bc70cb9f592a7f3eb93267b91591d9cd4ae7b358

Reviewer: Benjamin Hackl, Daniel Krenn

Author: Daniel Krenn, David Roe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/18182





---

archive/issue_comments_318670.json:
```json
{
    "body": "<a id='comment:1'></a>\n(see also #15425)",
    "created_at": "2015-04-14T08:21:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318670",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:1'></a>
(see also #15425)



---

archive/issue_comments_318671.json:
```json
{
    "body": "Changing branch from \"\" to \"u/roed/18182\"",
    "created_at": "2015-04-14T21:36:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318671",
    "user": "https://github.com/roed314"
}
```

Changing branch from "" to "u/roed/18182"



---

archive/issue_comments_318672.json:
```json
{
    "body": "Changing branch from \"u/roed/18182\" to \"u/dkrenn/18182\"",
    "created_at": "2015-08-20T12:21:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318672",
    "user": "https://github.com/dkrenn"
}
```

Changing branch from "u/roed/18182" to "u/dkrenn/18182"



---

archive/issue_comments_318673.json:
```json
{
    "body": "Changing commit from \"\" to \"7f56908b5a4a12bb97e649cc971a55eec9152f5a\"",
    "created_at": "2015-08-20T12:36:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318673",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "7f56908b5a4a12bb97e649cc971a55eec9152f5a"



---

archive/issue_comments_318674.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                           |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|\n|[fe83e88](https://github.com/sagemath/sagetrac-mirror/commit/fe83e886867ea855c583ce00245193e632551f6c)|`update authors of pushout`|\n|[7f56908](https://github.com/sagemath/sagetrac-mirror/commit/7f56908b5a4a12bb97e649cc971a55eec9152f5a)|`fix links in docu`|",
    "created_at": "2015-08-20T12:36:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318674",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                           |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|
|[fe83e88](https://github.com/sagemath/sagetrac-mirror/commit/fe83e886867ea855c583ce00245193e632551f6c)|`update authors of pushout`|
|[7f56908](https://github.com/sagemath/sagetrac-mirror/commit/7f56908b5a4a12bb97e649cc971a55eec9152f5a)|`fix links in docu`|



---

archive/issue_comments_318675.json:
```json
{
    "body": "Changing author from \"\" to \"Daniel Krenn, David Roe\"",
    "created_at": "2015-08-20T12:40:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318675",
    "user": "https://github.com/dkrenn"
}
```

Changing author from "" to "Daniel Krenn, David Roe"



---

archive/issue_comments_318676.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2015-08-20T12:40:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318676",
    "user": "https://github.com/dkrenn"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_318677.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Daniel Krenn\"",
    "created_at": "2015-08-20T12:40:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318677",
    "user": "https://github.com/dkrenn"
}
```

Changing reviewer from "" to "Daniel Krenn"



---

archive/issue_comments_318678.json:
```json
{
    "body": "<a id='comment:5'></a>\nI've reviewed David's part, but I am also an author of this ticket; thus I request an additional reviewer.\n\nNote that there is still one failing doctest, where I don't have any glue why (it is the bug at the very top of the file). Who knows what is going on there?",
    "created_at": "2015-08-20T12:40:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318678",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:5'></a>
I've reviewed David's part, but I am also an author of this ticket; thus I request an additional reviewer.

Note that there is still one failing doctest, where I don't have any glue why (it is the bug at the very top of the file). Who knows what is going on there?



---

archive/issue_comments_318679.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                     |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|\n|[f55cf6b](https://github.com/sagemath/sagetrac-mirror/commit/f55cf6bde50cf7dd2e9841a3006646b7c331824a)|`Merge tag '6.8' into u/dkrenn/18182`|",
    "created_at": "2015-08-20T12:44:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318679",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                     |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|
|[f55cf6b](https://github.com/sagemath/sagetrac-mirror/commit/f55cf6bde50cf7dd2e9841a3006646b7c331824a)|`Merge tag '6.8' into u/dkrenn/18182`|



---

archive/issue_comments_318680.json:
```json
{
    "body": "Changing commit from \"7f56908b5a4a12bb97e649cc971a55eec9152f5a\" to \"f55cf6bde50cf7dd2e9841a3006646b7c331824a\"",
    "created_at": "2015-08-20T12:44:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318680",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7f56908b5a4a12bb97e649cc971a55eec9152f5a" to "f55cf6bde50cf7dd2e9841a3006646b7c331824a"



---

archive/issue_comments_318681.json:
```json
{
    "body": "Changing branch from \"u/dkrenn/18182\" to \"u/dkrenn/18182-on-6.7\"",
    "created_at": "2015-08-20T12:47:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318681",
    "user": "https://github.com/dkrenn"
}
```

Changing branch from "u/dkrenn/18182" to "u/dkrenn/18182-on-6.7"



---

archive/issue_comments_318682.json:
```json
{
    "body": "Changing commit from \"f55cf6bde50cf7dd2e9841a3006646b7c331824a\" to \"7f56908b5a4a12bb97e649cc971a55eec9152f5a\"",
    "created_at": "2015-08-20T12:47:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318682",
    "user": "https://github.com/dkrenn"
}
```

Changing commit from "f55cf6bde50cf7dd2e9841a3006646b7c331824a" to "7f56908b5a4a12bb97e649cc971a55eec9152f5a"



---

archive/issue_comments_318683.json:
```json
{
    "body": "Changing work_issues from \"\" to \"merge 6.8\"",
    "created_at": "2015-08-20T12:47:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318683",
    "user": "https://github.com/dkrenn"
}
```

Changing work_issues from "" to "merge 6.8"



---

archive/issue_comments_318684.json:
```json
{
    "body": "Changing commit from \"7f56908b5a4a12bb97e649cc971a55eec9152f5a\" to \"cbb0d83f6daca32836b5b05fa9a2f055f05690b9\"",
    "created_at": "2015-08-20T12:52:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318684",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7f56908b5a4a12bb97e649cc971a55eec9152f5a" to "cbb0d83f6daca32836b5b05fa9a2f055f05690b9"



---

archive/issue_comments_318685.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                     |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|\n|[cbb0d83](https://github.com/sagemath/sagetrac-mirror/commit/cbb0d83f6daca32836b5b05fa9a2f055f05690b9)|`Merge tag '6.8' into u/dkrenn/18182`|",
    "created_at": "2015-08-20T12:52:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318685",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                     |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|
|[cbb0d83](https://github.com/sagemath/sagetrac-mirror/commit/cbb0d83f6daca32836b5b05fa9a2f055f05690b9)|`Merge tag '6.8' into u/dkrenn/18182`|



---

archive/issue_comments_318686.json:
```json
{
    "body": "Changing commit from \"cbb0d83f6daca32836b5b05fa9a2f055f05690b9\" to \"7f56908b5a4a12bb97e649cc971a55eec9152f5a\"",
    "created_at": "2015-08-20T12:52:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318686",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "cbb0d83f6daca32836b5b05fa9a2f055f05690b9" to "7f56908b5a4a12bb97e649cc971a55eec9152f5a"



---

archive/issue_comments_318687.json:
```json
{
    "body": "<a id='comment:10'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-08-20T12:52:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318687",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_318688.json:
```json
{
    "body": "<a id='comment:11'></a>\nNew commits:\n|                                                                                                                                          |                                     |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|\n|[cbb0d83](https://github.com/sagemath/sagetrac-mirror/commit/cbb0d83f6daca32836b5b05fa9a2f055f05690b9)|`Merge tag '6.8' into u/dkrenn/18182`|",
    "created_at": "2015-08-20T12:54:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318688",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:11'></a>
New commits:
|                                                                                                                                          |                                     |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|
|[cbb0d83](https://github.com/sagemath/sagetrac-mirror/commit/cbb0d83f6daca32836b5b05fa9a2f055f05690b9)|`Merge tag '6.8' into u/dkrenn/18182`|



---

archive/issue_comments_318689.json:
```json
{
    "body": "Changing branch from \"u/dkrenn/18182-on-6.7\" to \"u/dkrenn/18182-on-6.8\"",
    "created_at": "2015-08-20T12:54:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318689",
    "user": "https://github.com/dkrenn"
}
```

Changing branch from "u/dkrenn/18182-on-6.7" to "u/dkrenn/18182-on-6.8"



---

archive/issue_comments_318690.json:
```json
{
    "body": "Changing commit from \"7f56908b5a4a12bb97e649cc971a55eec9152f5a\" to \"cbb0d83f6daca32836b5b05fa9a2f055f05690b9\"",
    "created_at": "2015-08-20T12:54:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318690",
    "user": "https://github.com/dkrenn"
}
```

Changing commit from "7f56908b5a4a12bb97e649cc971a55eec9152f5a" to "cbb0d83f6daca32836b5b05fa9a2f055f05690b9"



---

archive/issue_comments_318691.json:
```json
{
    "body": "Changing work_issues from \"merge 6.8\" to \"\"",
    "created_at": "2015-08-20T12:54:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318691",
    "user": "https://github.com/dkrenn"
}
```

Changing work_issues from "merge 6.8" to ""



---

archive/issue_comments_318692.json:
```json
{
    "body": "<a id='comment:12'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                              |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------|\n|[3cacc52](https://github.com/sagemath/sagetrac-mirror/commit/3cacc5261fb5c13c43e6ba96dbbe9b3863a0399d)|`change recursive pushout to common_parent (to take care of direct coercions)`|\n|[4662eed](https://github.com/sagemath/sagetrac-mirror/commit/4662eed90bade7fadb0a0b9b64789ff127bf0c86)|`bug kind of solved (called now directly by cartesian_product); move doctest`|\n|[ce20dd9](https://github.com/sagemath/sagetrac-mirror/commit/ce20dd9dbd0ac118a080ac19a3a5ee0fb290d23f)|`Merge remote-tracking branch 'origin/u/dkrenn/18182-on-6.7' into u/dkrenn/18182-on-6.8`|\n|[23354db](https://github.com/sagemath/sagetrac-mirror/commit/23354db861047e7c01ce11abf8d4aa4ad75b2772)|`add missing test and fix broken tests`|\n|[2de49ba](https://github.com/sagemath/sagetrac-mirror/commit/2de49baf67030c02b926fb09e4470027f420bbd4)|`Merge remote-tracking branch 'origin/u/dkrenn/18182-on-6.7' into u/dkrenn/18182-on-6.8`|",
    "created_at": "2015-08-23T09:01:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318692",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                              |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------|
|[3cacc52](https://github.com/sagemath/sagetrac-mirror/commit/3cacc5261fb5c13c43e6ba96dbbe9b3863a0399d)|`change recursive pushout to common_parent (to take care of direct coercions)`|
|[4662eed](https://github.com/sagemath/sagetrac-mirror/commit/4662eed90bade7fadb0a0b9b64789ff127bf0c86)|`bug kind of solved (called now directly by cartesian_product); move doctest`|
|[ce20dd9](https://github.com/sagemath/sagetrac-mirror/commit/ce20dd9dbd0ac118a080ac19a3a5ee0fb290d23f)|`Merge remote-tracking branch 'origin/u/dkrenn/18182-on-6.7' into u/dkrenn/18182-on-6.8`|
|[23354db](https://github.com/sagemath/sagetrac-mirror/commit/23354db861047e7c01ce11abf8d4aa4ad75b2772)|`add missing test and fix broken tests`|
|[2de49ba](https://github.com/sagemath/sagetrac-mirror/commit/2de49baf67030c02b926fb09e4470027f420bbd4)|`Merge remote-tracking branch 'origin/u/dkrenn/18182-on-6.7' into u/dkrenn/18182-on-6.8`|



---

archive/issue_comments_318693.json:
```json
{
    "body": "Changing commit from \"cbb0d83f6daca32836b5b05fa9a2f055f05690b9\" to \"2de49baf67030c02b926fb09e4470027f420bbd4\"",
    "created_at": "2015-08-23T09:01:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318693",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "cbb0d83f6daca32836b5b05fa9a2f055f05690b9" to "2de49baf67030c02b926fb09e4470027f420bbd4"



---

archive/issue_comments_318694.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [dkrenn](#comment%3A5):\n> Note that there is still one failing doctest, where I don't have any glue why (it is the bug at the very top of the file). Who knows what is going on there?\n\n\nKind of fixed; now calling the cartesian product by `cartesian_product`, which produces the correct result.\n\nThere are still two failing doctests.",
    "created_at": "2015-08-23T09:17:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318694",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:13'></a>
Replying to [dkrenn](#comment%3A5):
> Note that there is still one failing doctest, where I don't have any glue why (it is the bug at the very top of the file). Who knows what is going on there?


Kind of fixed; now calling the cartesian product by `cartesian_product`, which produces the correct result.

There are still two failing doctests.



---

archive/issue_comments_318695.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2015-08-23T09:17:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318695",
    "user": "https://github.com/dkrenn"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_318696.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [dkrenn](#comment%3A13):\n> There are still two failing doctests.\n\n\n```\nFile \"src/sage/categories/homset.py\", line 596, in sage.categories.homset.Homset.__init__\nFailed example:\n    MyHomset(ZZ^3, ZZ^3, base = QQ).base_ring()\nExpected:\n    Rational Field\nGot:\n    Integer Ring\n```\n\n```\nFile \"src/sage/categories/modules.py\", line 519, in sage.categories.modules.Modules.Homsets.ParentMethods.base_ring\nFailed example:\n    H.base_ring.__module__\nExpected nothing\nGot:\n    'sage.categories.modules'\n```\n\nDoes someone have an idea? (I have no glue)",
    "created_at": "2015-08-23T09:22:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318696",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:14'></a>
Replying to [dkrenn](#comment%3A13):
> There are still two failing doctests.


```
File "src/sage/categories/homset.py", line 596, in sage.categories.homset.Homset.__init__
Failed example:
    MyHomset(ZZ^3, ZZ^3, base = QQ).base_ring()
Expected:
    Rational Field
Got:
    Integer Ring
```

```
File "src/sage/categories/modules.py", line 519, in sage.categories.modules.Modules.Homsets.ParentMethods.base_ring
Failed example:
    H.base_ring.__module__
Expected nothing
Got:
    'sage.categories.modules'
```

Does someone have an idea? (I have no glue)



---

archive/issue_comments_318697.json:
```json
{
    "body": "<a id='comment:15'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|\n|[cd17673](https://github.com/sagemath/sagetrac-mirror/commit/cd1767347c3abaef202703950afbe56e201a3622)|`Merge tag '6.9.beta6' into t/18182/18182-on-6.8`|\n|[3eefe25](https://github.com/sagemath/sagetrac-mirror/commit/3eefe25707084aab19d3b2088ea6d90a6d142eae)|`correct typo in AUTHORS`|\n|[5fe52e4](https://github.com/sagemath/sagetrac-mirror/commit/5fe52e47875db849cc7e13201a656905ac3e063a)|`fix doctests since name of cartesian product functor has changed`|\n|[60b9375](https://github.com/sagemath/sagetrac-mirror/commit/60b9375bd3733f5b0a1a802504b8348a8feb6795)|`revert changes in base_ring of category_object and adapt doctests`|",
    "created_at": "2015-09-16T15:44:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318697",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                 |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|
|[cd17673](https://github.com/sagemath/sagetrac-mirror/commit/cd1767347c3abaef202703950afbe56e201a3622)|`Merge tag '6.9.beta6' into t/18182/18182-on-6.8`|
|[3eefe25](https://github.com/sagemath/sagetrac-mirror/commit/3eefe25707084aab19d3b2088ea6d90a6d142eae)|`correct typo in AUTHORS`|
|[5fe52e4](https://github.com/sagemath/sagetrac-mirror/commit/5fe52e47875db849cc7e13201a656905ac3e063a)|`fix doctests since name of cartesian product functor has changed`|
|[60b9375](https://github.com/sagemath/sagetrac-mirror/commit/60b9375bd3733f5b0a1a802504b8348a8feb6795)|`revert changes in base_ring of category_object and adapt doctests`|



---

archive/issue_comments_318698.json:
```json
{
    "body": "Changing commit from \"2de49baf67030c02b926fb09e4470027f420bbd4\" to \"60b9375bd3733f5b0a1a802504b8348a8feb6795\"",
    "created_at": "2015-09-16T15:44:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318698",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2de49baf67030c02b926fb09e4470027f420bbd4" to "60b9375bd3733f5b0a1a802504b8348a8feb6795"



---

archive/issue_comments_318699.json:
```json
{
    "body": "Changing branch from \"u/dkrenn/18182-on-6.8\" to \"u/dkrenn/18182/pushout\"",
    "created_at": "2015-09-16T15:46:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318699",
    "user": "https://github.com/dkrenn"
}
```

Changing branch from "u/dkrenn/18182-on-6.8" to "u/dkrenn/18182/pushout"



---

archive/issue_comments_318700.json:
```json
{
    "body": "<a id='comment:16'></a>\nreverted the change in base_ring of category_object (this will be a separate ticket (#19225))",
    "created_at": "2015-09-16T15:46:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318700",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:16'></a>
reverted the change in base_ring of category_object (this will be a separate ticket (#19225))



---

archive/issue_comments_318701.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-09-16T15:46:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318701",
    "user": "https://github.com/dkrenn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_318702.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-09-16T17:17:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318702",
    "user": "https://github.com/dkrenn"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_318703.json:
```json
{
    "body": "<a id='comment:18'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                  |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|\n|[c16587c](https://github.com/sagemath/sagetrac-mirror/commit/c16587c8b549dde5891f00ec9be10426889c7424)|`fix bug (tower has only one entry which is None)`|",
    "created_at": "2015-09-16T17:34:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318703",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                  |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|
|[c16587c](https://github.com/sagemath/sagetrac-mirror/commit/c16587c8b549dde5891f00ec9be10426889c7424)|`fix bug (tower has only one entry which is None)`|



---

archive/issue_comments_318704.json:
```json
{
    "body": "Changing commit from \"60b9375bd3733f5b0a1a802504b8348a8feb6795\" to \"c16587c8b549dde5891f00ec9be10426889c7424\"",
    "created_at": "2015-09-16T17:34:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318704",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "60b9375bd3733f5b0a1a802504b8348a8feb6795" to "c16587c8b549dde5891f00ec9be10426889c7424"



---

archive/issue_comments_318705.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-09-16T17:35:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318705",
    "user": "https://github.com/dkrenn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_318706.json:
```json
{
    "body": "<a id='comment:19'></a>\nBug fixed...let's see what the patchbot does...",
    "created_at": "2015-09-16T17:35:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318706",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:19'></a>
Bug fixed...let's see what the patchbot does...



---

archive/issue_comments_318707.json:
```json
{
    "body": "<a id='comment:20'></a>\nHello!\n\nI had a look at the changes on this ticket, made a few reviewer commits, and I have the following comments:\n\n1. `categories.modules.CartesianProducts`: I'm not entirely sure about how everything is handled here:\n   - `ParentMethods.base_ring`: It seems as if the base ring of the cartesian product of some modules is considered to be the base ring of the first module in the list. Is this intended?\n   - Should different base rings of the modules in a cartesian product be allowed? If so, this has to be fixed:\n    {{{\n      sage: E = CombinatorialFreeModule(ZZ, [1,2])\n      sage: F = CombinatorialFreeModule(QQ, ['a', 'b'])\n      sage: cartesian_product([E, F])\n      Traceback (most recent call last):\n      ...\n      AttributeError: 'CommutativeAdditiveGroups.CartesianProducts_with_c' object has no attribute 'FiniteDimensional'\n    }}}\n   - Otherwise, if this should not be supported, the error message should be replaced by something more meaningful.\n\nNote that fixing these things would be suitable for a follow-up ticket, as the current behavior is (as far as I can tell) correct: if the base rings of the modules coincide, the cartesian product can be built (at least in the examples I tried). Otherwise, a (unfortunately rather strange) exception is raised. And in the case where all base rings coincide, `base_ring` can of course return the base ring of any of the passed modules.\n\n2. `categories.pushout.ConstructionFunctor.common_base`: I think that `Raise a CoercionException` does not fit in a `OUTPUT`-block from a semantic point of view.\n\n3. `categories.pushout.MultivariateConstructionFunctor`: Is there a reason for the import of `CartesianProduct` in the `TESTS`-block? (I've removed the import in one of my commits.)\n\n4. `MultivariateConstructionFunctor.common_base`: Could you explain why you use `get_coercion_model().common_parent(...)` instead of `pushout(...)`?\n\n5. `pushout`: Is there a reason for using\n   {{{\n    sage: from sage.sets.cartesian_product import CartesianProduct\n    sage: A = CartesianProduct((ZZ['x'], QQ['y'], QQ['z']), Sets().CartesianProducts())\n   }}}\n   over\n   {{{\n    sage: A = cartesian_product((ZZ['x'], QQ['y'], QQ['z']))\n   }}}\n   As far as I can tell, the only difference is in the categories -- but they aren't used in these doctests.\n\n6. `pushout`: Am I right in the assumption that the reason for the check `.. and R_tower[-1][0] is not None` is that when considering, for example\n   {{{\n    sage: from sage.categories.pushout import pushout\n    sage: pushout(ZZ, cartesian_product([ZZ, QQ]))\n    Traceback (most recent call last):\n    ...\n    CoercionException: 'NoneType' object is not iterable\n   }}}\n   that a `CoercionException` is thrown (instead of an `AttributeError` for the failed call to `R_tower[-1][0].common_base(...)` in the line after the check)? Or is there more to it? Would it make sense to add a doctest for this exact case? (I've included one in my reviewer commits; proceed with it as you like.)\n\n7. `pushout`: `CartesianProductPolys` vs. `CartesianProductPoly`? (cf. #18223 `;-)`).\n\nBenjamin\n\n---\nNew commits:\n|                                                                                                                                          |           |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------|\n|[5c29fd4](https://github.com/sagemath/sagetrac-mirror/commit/5c29fd4a50a40d9cc0fcd5d23288639eda3f35f7)|`fix typos`|\n|[6233426](https://github.com/sagemath/sagetrac-mirror/commit/6233426582384da8b5935854bbf6beae5976b63f)|`improve language`|\n|[d31667e](https://github.com/sagemath/sagetrac-mirror/commit/d31667e083586a1c3c47dcf98a96ec6b72d558f8)|`fix ReSt-error`|\n|[c4a5bfd](https://github.com/sagemath/sagetrac-mirror/commit/c4a5bfd0af27ae8aab42f7b51002273ffa46a875)|`remove superfluous import in doctest, superfluous empty line in docstring, and fix spacing in a line (pep 8)`|\n|[726b74a](https://github.com/sagemath/sagetrac-mirror/commit/726b74ada27a58d2a899ca2b2fa66fc15b7e9a05)|`CartesianProductPolys: check whether other has a construction`|\n|[d449fab](https://github.com/sagemath/sagetrac-mirror/commit/d449fabb1adcd514bf988e64736a18de34dd7e25)|`add two doctests`|",
    "created_at": "2015-10-04T23:08:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318707",
    "user": "https://github.com/behackl"
}
```

<a id='comment:20'></a>
Hello!

I had a look at the changes on this ticket, made a few reviewer commits, and I have the following comments:

1. `categories.modules.CartesianProducts`: I'm not entirely sure about how everything is handled here:
   - `ParentMethods.base_ring`: It seems as if the base ring of the cartesian product of some modules is considered to be the base ring of the first module in the list. Is this intended?
   - Should different base rings of the modules in a cartesian product be allowed? If so, this has to be fixed:
    {{{
      sage: E = CombinatorialFreeModule(ZZ, [1,2])
      sage: F = CombinatorialFreeModule(QQ, ['a', 'b'])
      sage: cartesian_product([E, F])
      Traceback (most recent call last):
      ...
      AttributeError: 'CommutativeAdditiveGroups.CartesianProducts_with_c' object has no attribute 'FiniteDimensional'
    }}}
   - Otherwise, if this should not be supported, the error message should be replaced by something more meaningful.

Note that fixing these things would be suitable for a follow-up ticket, as the current behavior is (as far as I can tell) correct: if the base rings of the modules coincide, the cartesian product can be built (at least in the examples I tried). Otherwise, a (unfortunately rather strange) exception is raised. And in the case where all base rings coincide, `base_ring` can of course return the base ring of any of the passed modules.

2. `categories.pushout.ConstructionFunctor.common_base`: I think that `Raise a CoercionException` does not fit in a `OUTPUT`-block from a semantic point of view.

3. `categories.pushout.MultivariateConstructionFunctor`: Is there a reason for the import of `CartesianProduct` in the `TESTS`-block? (I've removed the import in one of my commits.)

4. `MultivariateConstructionFunctor.common_base`: Could you explain why you use `get_coercion_model().common_parent(...)` instead of `pushout(...)`?

5. `pushout`: Is there a reason for using
   {{{
    sage: from sage.sets.cartesian_product import CartesianProduct
    sage: A = CartesianProduct((ZZ['x'], QQ['y'], QQ['z']), Sets().CartesianProducts())
   }}}
   over
   {{{
    sage: A = cartesian_product((ZZ['x'], QQ['y'], QQ['z']))
   }}}
   As far as I can tell, the only difference is in the categories -- but they aren't used in these doctests.

6. `pushout`: Am I right in the assumption that the reason for the check `.. and R_tower[-1][0] is not None` is that when considering, for example
   {{{
    sage: from sage.categories.pushout import pushout
    sage: pushout(ZZ, cartesian_product([ZZ, QQ]))
    Traceback (most recent call last):
    ...
    CoercionException: 'NoneType' object is not iterable
   }}}
   that a `CoercionException` is thrown (instead of an `AttributeError` for the failed call to `R_tower[-1][0].common_base(...)` in the line after the check)? Or is there more to it? Would it make sense to add a doctest for this exact case? (I've included one in my reviewer commits; proceed with it as you like.)

7. `pushout`: `CartesianProductPolys` vs. `CartesianProductPoly`? (cf. #18223 `;-)`).

Benjamin

---
New commits:
|                                                                                                                                          |           |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------|
|[5c29fd4](https://github.com/sagemath/sagetrac-mirror/commit/5c29fd4a50a40d9cc0fcd5d23288639eda3f35f7)|`fix typos`|
|[6233426](https://github.com/sagemath/sagetrac-mirror/commit/6233426582384da8b5935854bbf6beae5976b63f)|`improve language`|
|[d31667e](https://github.com/sagemath/sagetrac-mirror/commit/d31667e083586a1c3c47dcf98a96ec6b72d558f8)|`fix ReSt-error`|
|[c4a5bfd](https://github.com/sagemath/sagetrac-mirror/commit/c4a5bfd0af27ae8aab42f7b51002273ffa46a875)|`remove superfluous import in doctest, superfluous empty line in docstring, and fix spacing in a line (pep 8)`|
|[726b74a](https://github.com/sagemath/sagetrac-mirror/commit/726b74ada27a58d2a899ca2b2fa66fc15b7e9a05)|`CartesianProductPolys: check whether other has a construction`|
|[d449fab](https://github.com/sagemath/sagetrac-mirror/commit/d449fabb1adcd514bf988e64736a18de34dd7e25)|`add two doctests`|



---

archive/issue_comments_318708.json:
```json
{
    "body": "Changing reviewer from \"Daniel Krenn\" to \"Benjamin Hackl, Daniel Krenn\"",
    "created_at": "2015-10-04T23:08:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318708",
    "user": "https://github.com/behackl"
}
```

Changing reviewer from "Daniel Krenn" to "Benjamin Hackl, Daniel Krenn"



---

archive/issue_comments_318709.json:
```json
{
    "body": "Changing commit from \"c16587c8b549dde5891f00ec9be10426889c7424\" to \"d449fabb1adcd514bf988e64736a18de34dd7e25\"",
    "created_at": "2015-10-04T23:08:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318709",
    "user": "https://github.com/behackl"
}
```

Changing commit from "c16587c8b549dde5891f00ec9be10426889c7424" to "d449fabb1adcd514bf988e64736a18de34dd7e25"



---

archive/issue_comments_318710.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-10-04T23:08:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318710",
    "user": "https://github.com/behackl"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_318711.json:
```json
{
    "body": "Changing branch from \"u/dkrenn/18182/pushout\" to \"u/behackl/coercion/pushout\"",
    "created_at": "2015-10-04T23:08:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318711",
    "user": "https://github.com/behackl"
}
```

Changing branch from "u/dkrenn/18182/pushout" to "u/behackl/coercion/pushout"



---

archive/issue_comments_318712.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [behackl](#comment%3A20):\n> 1. `categories.modules.CartesianProducts`: I'm not entirely sure about how everything is handled here:\n>    - `ParentMethods.base_ring`: It seems as if the base ring of the cartesian product of some modules is considered to be the base ring of the first module in the list. Is this intended?\n>    - Should different base rings of the modules in a cartesian product be allowed? If so, this has to be fixed:\n>     {{{\n>       sage: E = CombinatorialFreeModule(ZZ, [1,2])\n>       sage: F = CombinatorialFreeModule(QQ, ['a', 'b'])\n>       sage: cartesian_product([E, F])\n>       Traceback (most recent call last):\n>       ...\n>       AttributeError: 'CommutativeAdditiveGroups.CartesianProducts_with_c' object has no attribute 'FiniteDimensional'\n>     }}}\n>    - Otherwise, if this should not be supported, the error message should be replaced by something more meaningful.\n> \n> Note that fixing these things would be suitable for a follow-up ticket, as the current behavior is (as far as I can tell) correct: if the base rings of the modules coincide, the cartesian product can be built (at least in the examples I tried). Otherwise, a (unfortunately rather strange) exception is raised. And in the case where all base rings coincide, `base_ring` can of course return the base ring of any of the passed modules.\n\n\nThis is now #19375.\n\n> 2. `categories.pushout.ConstructionFunctor.common_base`: I think that `Raise a CoercionException` does not fit in a `OUTPUT`-block from a semantic point of view.\n\n\nRewritten (but I am open to suggestions if you want something different)\n\n> 3. `categories.pushout.MultivariateConstructionFunctor`: Is there a reason for the import of `CartesianProduct` in the `TESTS`-block? (I've removed the import in one of my commits.)\n\n\nThanks.\n\n> 4. `MultivariateConstructionFunctor.common_base`: Could you explain why you use `get_coercion_model().common_parent(...)` instead of `pushout(...)`?\n\n\nWe need a common parent, thus `common_parent` is the correct method to call. A pushout is one possible way to construct a common parent, but there are other ways; e.g. one could coerce into the other, or there is a scalar multiplication or action available.\n\n> 5. `pushout`: Is there a reason for using\n>    {{{\n>     sage: from sage.sets.cartesian_product import CartesianProduct\n>     sage: A = CartesianProduct((ZZ['x'], QQ['y'], QQ['z']), Sets().CartesianProducts())\n>    }}}\n>    over\n>    {{{\n>     sage: A = cartesian_product((ZZ['x'], QQ['y'], QQ['z']))\n>    }}}\n>    As far as I can tell, the only difference is in the categories -- but they aren't used in these doctests.\n\n\nThis is to check that it works as well (there was once a bug with this kind of construction, thus a doctest was added).\n\n> 6. `pushout`: Am I right in the assumption that the reason for the check `.. and R_tower[-1][0] is not None` is that when considering, for example\n>    {{{\n>     sage: from sage.categories.pushout import pushout\n>     sage: pushout(ZZ, cartesian_product([ZZ, QQ]))\n>     Traceback (most recent call last):\n>     ...\n>     CoercionException: 'NoneType' object is not iterable\n>    }}}\n>    that a `CoercionException` is thrown (instead of an `AttributeError` for the failed call to `R_tower[-1][0].common_base(...)` in the line after the check)?\n\n\nYes, this is the reason. An `AttributeError does not work with some of the calling functions; they need a `CoercionException`.\n\n> Or is there more to it? \n\n\nNo.\n\n> Would it make sense to add a doctest for this exact case? (I've included one in my reviewer commits; proceed with it as you like.)\n\n\nThanks.\n\n> 7. `pushout`: `CartesianProductPolys` vs. `CartesianProductPoly`? (cf. #18223 `;-)`).\n\n\nDone.\n\nCross-reviewed your changes...seem to be fine.",
    "created_at": "2015-10-08T11:44:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318712",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:21'></a>
Replying to [behackl](#comment%3A20):
> 1. `categories.modules.CartesianProducts`: I'm not entirely sure about how everything is handled here:
>    - `ParentMethods.base_ring`: It seems as if the base ring of the cartesian product of some modules is considered to be the base ring of the first module in the list. Is this intended?
>    - Should different base rings of the modules in a cartesian product be allowed? If so, this has to be fixed:
>     {{{
>       sage: E = CombinatorialFreeModule(ZZ, [1,2])
>       sage: F = CombinatorialFreeModule(QQ, ['a', 'b'])
>       sage: cartesian_product([E, F])
>       Traceback (most recent call last):
>       ...
>       AttributeError: 'CommutativeAdditiveGroups.CartesianProducts_with_c' object has no attribute 'FiniteDimensional'
>     }}}
>    - Otherwise, if this should not be supported, the error message should be replaced by something more meaningful.
> 
> Note that fixing these things would be suitable for a follow-up ticket, as the current behavior is (as far as I can tell) correct: if the base rings of the modules coincide, the cartesian product can be built (at least in the examples I tried). Otherwise, a (unfortunately rather strange) exception is raised. And in the case where all base rings coincide, `base_ring` can of course return the base ring of any of the passed modules.


This is now #19375.

> 2. `categories.pushout.ConstructionFunctor.common_base`: I think that `Raise a CoercionException` does not fit in a `OUTPUT`-block from a semantic point of view.


Rewritten (but I am open to suggestions if you want something different)

> 3. `categories.pushout.MultivariateConstructionFunctor`: Is there a reason for the import of `CartesianProduct` in the `TESTS`-block? (I've removed the import in one of my commits.)


Thanks.

> 4. `MultivariateConstructionFunctor.common_base`: Could you explain why you use `get_coercion_model().common_parent(...)` instead of `pushout(...)`?


We need a common parent, thus `common_parent` is the correct method to call. A pushout is one possible way to construct a common parent, but there are other ways; e.g. one could coerce into the other, or there is a scalar multiplication or action available.

> 5. `pushout`: Is there a reason for using
>    {{{
>     sage: from sage.sets.cartesian_product import CartesianProduct
>     sage: A = CartesianProduct((ZZ['x'], QQ['y'], QQ['z']), Sets().CartesianProducts())
>    }}}
>    over
>    {{{
>     sage: A = cartesian_product((ZZ['x'], QQ['y'], QQ['z']))
>    }}}
>    As far as I can tell, the only difference is in the categories -- but they aren't used in these doctests.


This is to check that it works as well (there was once a bug with this kind of construction, thus a doctest was added).

> 6. `pushout`: Am I right in the assumption that the reason for the check `.. and R_tower[-1][0] is not None` is that when considering, for example
>    {{{
>     sage: from sage.categories.pushout import pushout
>     sage: pushout(ZZ, cartesian_product([ZZ, QQ]))
>     Traceback (most recent call last):
>     ...
>     CoercionException: 'NoneType' object is not iterable
>    }}}
>    that a `CoercionException` is thrown (instead of an `AttributeError` for the failed call to `R_tower[-1][0].common_base(...)` in the line after the check)?


Yes, this is the reason. An `AttributeError does not work with some of the calling functions; they need a `CoercionException`.

> Or is there more to it? 


No.

> Would it make sense to add a doctest for this exact case? (I've included one in my reviewer commits; proceed with it as you like.)


Thanks.

> 7. `pushout`: `CartesianProductPolys` vs. `CartesianProductPoly`? (cf. #18223 `;-)`).


Done.

Cross-reviewed your changes...seem to be fine.



---

archive/issue_comments_318713.json:
```json
{
    "body": "Changing branch from \"u/behackl/coercion/pushout\" to \"u/dkrenn/coercion/pushout\"",
    "created_at": "2015-10-08T11:44:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318713",
    "user": "https://github.com/dkrenn"
}
```

Changing branch from "u/behackl/coercion/pushout" to "u/dkrenn/coercion/pushout"



---

archive/issue_comments_318714.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-10-08T11:44:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318714",
    "user": "https://github.com/dkrenn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_318715.json:
```json
{
    "body": "<a id='comment:23'></a>\nNew commits:\n|                                                                                                                                          |                                                  |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|\n|[4619fe7](https://github.com/sagemath/sagetrac-mirror/commit/4619fe72532b3aaffc4423326c8d24f873851f0a)|`Trac #18182, comment 20, 2: rewrite OUTPUT-block`|\n|[bc70cb9](https://github.com/sagemath/sagetrac-mirror/commit/bc70cb9f592a7f3eb93267b91591d9cd4ae7b358)|`Trac #18182, comment 20, 7: rename CartesianProductPolys --> CartesianProductPoly`|",
    "created_at": "2015-10-08T11:44:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318715",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:23'></a>
New commits:
|                                                                                                                                          |                                                  |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|
|[4619fe7](https://github.com/sagemath/sagetrac-mirror/commit/4619fe72532b3aaffc4423326c8d24f873851f0a)|`Trac #18182, comment 20, 2: rewrite OUTPUT-block`|
|[bc70cb9](https://github.com/sagemath/sagetrac-mirror/commit/bc70cb9f592a7f3eb93267b91591d9cd4ae7b358)|`Trac #18182, comment 20, 7: rename CartesianProductPolys --> CartesianProductPoly`|



---

archive/issue_comments_318716.json:
```json
{
    "body": "Changing commit from \"d449fabb1adcd514bf988e64736a18de34dd7e25\" to \"bc70cb9f592a7f3eb93267b91591d9cd4ae7b358\"",
    "created_at": "2015-10-08T11:44:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318716",
    "user": "https://github.com/dkrenn"
}
```

Changing commit from "d449fabb1adcd514bf988e64736a18de34dd7e25" to "bc70cb9f592a7f3eb93267b91591d9cd4ae7b358"



---

archive/issue_comments_318717.json:
```json
{
    "body": "<a id='comment:24'></a>\nReplying to [dkrenn](#comment%3A21):\n> > 1. `categories.modules.CartesianProducts`: I'm not entirely sure [...] \n  \n> \n> This is now #19375.\n\n\nPerfect.\n\n> \n> > 2. `categories.pushout.ConstructionFunctor.common_base`: I think that `Raise a CoercionException` does not fit in a `OUTPUT`-block from a semantic point of view.\n  \n> \n> Rewritten (but I am open to suggestions if you want something different)\n\n\nNo, the way you've rewritten it is fine.\n\n> > 4. `MultivariateConstructionFunctor.common_base`: Could you explain why you use `get_coercion_model().common_parent(...)` instead of `pushout(...)`?\n  \n> \n> We need a common parent, thus `common_parent` is the correct method to call. A pushout is one possible way to construct a common parent, but there are other ways; e.g. one could coerce into the other, or there is a scalar multiplication or action available.\n\n\nI understand.\n\n> \n> > 5. `pushout`: Is there a reason for using\n> >    {{{\n> >     sage: from sage.sets.cartesian_product import CartesianProduct\n> >     sage: A = CartesianProduct((ZZ['x'], QQ['y'], QQ['z']), Sets().CartesianProducts())\n> >    }}}\n> >    over\n> >    {{{\n> >     sage: A = cartesian_product((ZZ['x'], QQ['y'], QQ['z']))\n> >    }}}\n> >    As far as I can tell, the only difference is in the categories -- but they aren't used in these doctests.\n  \n> \n> This is to check that it works as well (there was once a bug with this kind of construction, thus a doctest was added).\n\n\nAlright.\n\nI cross-checked your changes, everything seems to work now, and I have no more comments.\n\nThe documentation builds and `make ptestlong` passes. --> `positive_review`.",
    "created_at": "2015-10-13T16:42:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318717",
    "user": "https://github.com/behackl"
}
```

<a id='comment:24'></a>
Replying to [dkrenn](#comment%3A21):
> > 1. `categories.modules.CartesianProducts`: I'm not entirely sure [...] 
  
> 
> This is now #19375.


Perfect.

> 
> > 2. `categories.pushout.ConstructionFunctor.common_base`: I think that `Raise a CoercionException` does not fit in a `OUTPUT`-block from a semantic point of view.
  
> 
> Rewritten (but I am open to suggestions if you want something different)


No, the way you've rewritten it is fine.

> > 4. `MultivariateConstructionFunctor.common_base`: Could you explain why you use `get_coercion_model().common_parent(...)` instead of `pushout(...)`?
  
> 
> We need a common parent, thus `common_parent` is the correct method to call. A pushout is one possible way to construct a common parent, but there are other ways; e.g. one could coerce into the other, or there is a scalar multiplication or action available.


I understand.

> 
> > 5. `pushout`: Is there a reason for using
> >    {{{
> >     sage: from sage.sets.cartesian_product import CartesianProduct
> >     sage: A = CartesianProduct((ZZ['x'], QQ['y'], QQ['z']), Sets().CartesianProducts())
> >    }}}
> >    over
> >    {{{
> >     sage: A = cartesian_product((ZZ['x'], QQ['y'], QQ['z']))
> >    }}}
> >    As far as I can tell, the only difference is in the categories -- but they aren't used in these doctests.
  
> 
> This is to check that it works as well (there was once a bug with this kind of construction, thus a doctest was added).


Alright.

I cross-checked your changes, everything seems to work now, and I have no more comments.

The documentation builds and `make ptestlong` passes. --> `positive_review`.



---

archive/issue_comments_318718.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-10-13T16:42:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318718",
    "user": "https://github.com/behackl"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_318719.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-10-14T17:03:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318719",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_318720.json:
```json
{
    "body": "Changing branch from \"u/dkrenn/coercion/pushout\" to \"bc70cb9f592a7f3eb93267b91591d9cd4ae7b358\"",
    "created_at": "2015-10-14T17:03:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18182#issuecomment-318720",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/dkrenn/coercion/pushout" to "bc70cb9f592a7f3eb93267b91591d9cd4ae7b358"



---

archive/issue_events_058485.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-10-14T17:03:39Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18182",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18182#event-58485"
}
```
