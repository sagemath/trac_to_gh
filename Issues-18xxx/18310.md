# Issue 18310: Finite dimensional modules with basis: improved conversions to vectors and matrices

archive/issues_018073.json:
```json
{
    "assignees": [],
    "body": "This ticket:\n\n- Implements the option `sparse` for `CombinatorialFreeModule.Element._vector_`\n- Implements `Modules.WithBasis.FiniteDimensional.ParentMethods.matrix` for building a matrix from a list of elements\n- Refactors `Modules.WithBasis.FiniteDimensional.MorphismMethods.matrix` to use the latter and accept the option `sparse`\n\nThis is a follow up to #11111.\n\nIt's based on #16659 due to a trivial syntactic conflict. Since #16659\nis likely to be positive reviewed very soon, it's probably not worth\nit making it independent.\n\n\nCC:  @hivert @saliola @avirmaux @sagetrac-sage-combinat @tscrim @darijgr\n\nComponent: **linear algebra**\n\nAuthor: **Nicolas M. Thi\u00e9ry**\n\nBranch/Commit: **[public/categories/fin_dim_modules_with_basis_vector_matrix-18310](https://github.com/sagemath/sagetrac-mirror/tree/public/categories/fin_dim_modules_with_basis_vector_matrix-18310) @ [`f4f4e20`](https://github.com/sagemath/sagetrac-mirror/commit/f4f4e20ce84e476c401738cadbc6b6b88bc43043)**\n\nReviewer: **Travis Scrimshaw**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/18310_\n\n",
    "created_at": "2015-04-27T10:21:30Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20linear%20algebra",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Finite dimensional modules with basis: improved conversions to vectors and matrices",
    "type": "issue",
    "updated_at": "2022-09-19T18:58:47Z",
    "url": "https://github.com/sagemath/sage/issues/18310",
    "user": "https://github.com/nthiery"
}
```
This ticket:

- Implements the option `sparse` for `CombinatorialFreeModule.Element._vector_`
- Implements `Modules.WithBasis.FiniteDimensional.ParentMethods.matrix` for building a matrix from a list of elements
- Refactors `Modules.WithBasis.FiniteDimensional.MorphismMethods.matrix` to use the latter and accept the option `sparse`

This is a follow up to #11111.

It's based on #16659 due to a trivial syntactic conflict. Since #16659
is likely to be positive reviewed very soon, it's probably not worth
it making it independent.


CC:  @hivert @saliola @avirmaux @sagetrac-sage-combinat @tscrim @darijgr

Component: **linear algebra**

Author: **Nicolas M. Thi√©ry**

Branch/Commit: **[public/categories/fin_dim_modules_with_basis_vector_matrix-18310](https://github.com/sagemath/sagetrac-mirror/tree/public/categories/fin_dim_modules_with_basis_vector_matrix-18310) @ [`f4f4e20`](https://github.com/sagemath/sagetrac-mirror/commit/f4f4e20ce84e476c401738cadbc6b6b88bc43043)**

Reviewer: **Travis Scrimshaw**

_Issue created by migration from https://trac.sagemath.org/ticket/18310_





---

archive/issue_events_257921.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2015-04-27T10:21:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "milestone_number": null,
    "milestone_title": "sage-6.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18310#event-257921"
}
```



---

archive/issue_events_257922.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2015-04-27T10:21:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20linear%20algebra",
    "label_color": "0000ff",
    "label_name": "c: linear algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18310#event-257922"
}
```



---

archive/issue_events_257923.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2015-04-27T10:21:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18310#event-257923"
}
```



---

archive/issue_events_257924.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2015-04-27T10:21:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18310#event-257924"
}
```



---

archive/issue_comments_251488.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,3 +3,5 @@\n - Implements the option `sparse` for `CombinatorialFreeModule.Element._vector_`\n - Implements `Modules.WithBasis.FiniteDimensional.ParentMethods.matrix` for building a matrix from a list of elements\n - Refactors `Modules.WithBasis.FiniteDimensional.MorphismMethods.matrix` to use the latter and accept the option `sparse`\n+\n+This is a follow up to #11111\n``````\n",
    "created_at": "2015-04-27T10:21:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18310#issuecomment-251488",
    "user": "https://github.com/nthiery"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,3 +3,5 @@
 - Implements the option `sparse` for `CombinatorialFreeModule.Element._vector_`
 - Implements `Modules.WithBasis.FiniteDimensional.ParentMethods.matrix` for building a matrix from a list of elements
 - Refactors `Modules.WithBasis.FiniteDimensional.MorphismMethods.matrix` to use the latter and accept the option `sparse`
+
+This is a follow up to #11111
``````




---

archive/issue_comments_251489.json:
```json
{
    "body": "Branch: **[u/nthiery/categories/finite_dimensinonal_modules_with_basis_vector_matrix-18310](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/categories/finite_dimensinonal_modules_with_basis_vector_matrix-18310)**",
    "created_at": "2015-04-27T15:42:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18310#issuecomment-251489",
    "user": "https://github.com/nthiery"
}
```

Branch: **[u/nthiery/categories/finite_dimensinonal_modules_with_basis_vector_matrix-18310](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/categories/finite_dimensinonal_modules_with_basis_vector_matrix-18310)**



---

archive/issue_comments_251490.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c44982418b96b37731814a0e949471b61270084\"><code>0c44982</code></a></td><td><code>17696: use is_identity_decomposition_into_orthogonal_idempotents in the examples</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cba7c8d1adcad21ace893b5827777348c2e486ef\"><code>cba7c8d</code></a></td><td><code>17696: factored out of the examples a basic implementation of the 0-Hecke monoid</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6e81e4b500f7698446fd19de792744a33667eafa\"><code>6e81e4b</code></a></td><td><code>16659: proofreading and little additions to the doc; small refactoring of the code</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/19756de9e9367efc85add11872bbf03d873b948f\"><code>19756de</code></a></td><td><code>16659: minor line-split in the doc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fd8e1ad375037e078905ae220bc9e543d65a67be\"><code>fd8e1ad</code></a></td><td><code>16659: refactored _orthogonal_decomposition and updated doctests accordingly</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cc327efe6f3a221ae089d68558e5296cc9fc295c\"><code>cc327ef</code></a></td><td><code>16659: improved documentation for _orthogonal_decomposition</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e00dfdb8c49ba0105922aeeabab5bcb234bceaf0\"><code>e00dfdb</code></a></td><td><code>16659: improved documentation for _orthogonal_decomposition</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cce7d3db05f6f10fec8c19a055987c61eee4b771\"><code>cce7d3d</code></a></td><td><code>17696: added crosslinks</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/faf83a1380dde69c2dfd7849c1b8b8d24dcbecd6\"><code>faf83a1</code></a></td><td><code>16659: added missing hecke_monoid.py file</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/223e55834daf91167b517b7c80f0af92ef627fba\"><code>223e558</code></a></td><td><code>18310: Finite dimensional modules with basis: improved conversions to vectors and matrices</code></td></tr></table>\n",
    "created_at": "2015-04-27T15:45:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18310#issuecomment-251490",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:4"></div>

Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c44982418b96b37731814a0e949471b61270084"><code>0c44982</code></a></td><td><code>17696: use is_identity_decomposition_into_orthogonal_idempotents in the examples</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cba7c8d1adcad21ace893b5827777348c2e486ef"><code>cba7c8d</code></a></td><td><code>17696: factored out of the examples a basic implementation of the 0-Hecke monoid</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6e81e4b500f7698446fd19de792744a33667eafa"><code>6e81e4b</code></a></td><td><code>16659: proofreading and little additions to the doc; small refactoring of the code</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/19756de9e9367efc85add11872bbf03d873b948f"><code>19756de</code></a></td><td><code>16659: minor line-split in the doc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fd8e1ad375037e078905ae220bc9e543d65a67be"><code>fd8e1ad</code></a></td><td><code>16659: refactored _orthogonal_decomposition and updated doctests accordingly</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cc327efe6f3a221ae089d68558e5296cc9fc295c"><code>cc327ef</code></a></td><td><code>16659: improved documentation for _orthogonal_decomposition</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e00dfdb8c49ba0105922aeeabab5bcb234bceaf0"><code>e00dfdb</code></a></td><td><code>16659: improved documentation for _orthogonal_decomposition</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cce7d3db05f6f10fec8c19a055987c61eee4b771"><code>cce7d3d</code></a></td><td><code>17696: added crosslinks</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/faf83a1380dde69c2dfd7849c1b8b8d24dcbecd6"><code>faf83a1</code></a></td><td><code>16659: added missing hecke_monoid.py file</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/223e55834daf91167b517b7c80f0af92ef627fba"><code>223e558</code></a></td><td><code>18310: Finite dimensional modules with basis: improved conversions to vectors and matrices</code></td></tr></table>




---

archive/issue_comments_251491.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,4 +4,9 @@\n - Implements `Modules.WithBasis.FiniteDimensional.ParentMethods.matrix` for building a matrix from a list of elements\n - Refactors `Modules.WithBasis.FiniteDimensional.MorphismMethods.matrix` to use the latter and accept the option `sparse`\n \n-This is a follow up to #11111\n+This is a follow up to #11111.\n+\n+It's based on #16659 due to a trivial syntactic conflict. Since #16659\n+is likely to be positive reviewed very soon, it's probably not worth\n+it making it independent.\n+\n``````\n",
    "created_at": "2015-04-27T15:45:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18310#issuecomment-251491",
    "user": "https://github.com/nthiery"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,4 +4,9 @@
 - Implements `Modules.WithBasis.FiniteDimensional.ParentMethods.matrix` for building a matrix from a list of elements
 - Refactors `Modules.WithBasis.FiniteDimensional.MorphismMethods.matrix` to use the latter and accept the option `sparse`
 
-This is a follow up to #11111
+This is a follow up to #11111.
+
+It's based on #16659 due to a trivial syntactic conflict. Since #16659
+is likely to be positive reviewed very soon, it's probably not worth
+it making it independent.
+
``````




---

archive/issue_comments_251492.json:
```json
{
    "body": "Commit: **[`223e558`](https://github.com/sagemath/sagetrac-mirror/commit/223e55834daf91167b517b7c80f0af92ef627fba)**",
    "created_at": "2015-04-27T15:45:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18310#issuecomment-251492",
    "user": "https://github.com/nthiery"
}
```

Commit: **[`223e558`](https://github.com/sagemath/sagetrac-mirror/commit/223e55834daf91167b517b7c80f0af92ef627fba)**



---

archive/issue_comments_251493.json:
```json
{
    "body": "Changed commit from **[`223e558`](https://github.com/sagemath/sagetrac-mirror/commit/223e55834daf91167b517b7c80f0af92ef627fba)** to **[`3a433dc`](https://github.com/sagemath/sagetrac-mirror/commit/3a433dc8318f07f85622c0f14116de51dac8bd20)**",
    "created_at": "2015-04-27T16:56:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18310#issuecomment-251493",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`223e558`](https://github.com/sagemath/sagetrac-mirror/commit/223e55834daf91167b517b7c80f0af92ef627fba)** to **[`3a433dc`](https://github.com/sagemath/sagetrac-mirror/commit/3a433dc8318f07f85622c0f14116de51dac8bd20)**



---

archive/issue_comments_251494.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a433dc8318f07f85622c0f14116de51dac8bd20\"><code>3a433dc</code></a></td><td><code>18310: cleanup and documentation</code></td></tr></table>\n",
    "created_at": "2015-04-27T16:56:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18310#issuecomment-251494",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a433dc8318f07f85622c0f14116de51dac8bd20"><code>3a433dc</code></a></td><td><code>18310: cleanup and documentation</code></td></tr></table>




---

archive/issue_comments_251495.json:
```json
{
    "body": "Author: **Nicolas M. Thi\u00e9ry**",
    "created_at": "2015-04-27T16:58:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18310#issuecomment-251495",
    "user": "https://github.com/nthiery"
}
```

Author: **Nicolas M. Thi√©ry**



---

archive/issue_events_257925.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2015-04-27T16:58:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18310#event-257925"
}
```



---

archive/issue_comments_251496.json:
```json
{
    "body": "Changed commit from **[`3a433dc`](https://github.com/sagemath/sagetrac-mirror/commit/3a433dc8318f07f85622c0f14116de51dac8bd20)** to **[`e3fd939`](https://github.com/sagemath/sagetrac-mirror/commit/e3fd9394117180fd542e34eafa088bd95928488c)**",
    "created_at": "2015-05-16T22:22:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18310#issuecomment-251496",
    "user": "https://github.com/tscrim"
}
```

Changed commit from **[`3a433dc`](https://github.com/sagemath/sagetrac-mirror/commit/3a433dc8318f07f85622c0f14116de51dac8bd20)** to **[`e3fd939`](https://github.com/sagemath/sagetrac-mirror/commit/e3fd9394117180fd542e34eafa088bd95928488c)**



---

archive/issue_comments_251497.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2015-05-16T22:22:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18310#issuecomment-251497",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_251498.json:
```json
{
    "body": "Changed branch from **[u/nthiery/categories/finite_dimensinonal_modules_with_basis_vector_matrix-18310](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/categories/finite_dimensinonal_modules_with_basis_vector_matrix-18310)** to **[public/categories/fin_dim_modules_with_basis_vector_matrix-18310](https://github.com/sagemath/sagetrac-mirror/tree/public/categories/fin_dim_modules_with_basis_vector_matrix-18310)**",
    "created_at": "2015-05-16T22:22:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18310#issuecomment-251498",
    "user": "https://github.com/tscrim"
}
```

Changed branch from **[u/nthiery/categories/finite_dimensinonal_modules_with_basis_vector_matrix-18310](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/categories/finite_dimensinonal_modules_with_basis_vector_matrix-18310)** to **[public/categories/fin_dim_modules_with_basis_vector_matrix-18310](https://github.com/sagemath/sagetrac-mirror/tree/public/categories/fin_dim_modules_with_basis_vector_matrix-18310)**



---

archive/issue_comments_251499.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nLooks good overall; I made some minor doc formatting tweaks. This was something Darij and I wondered about when looking at Lie algebras (something I will need to change on that ticket). However I have a question about the `column` attribute in `FDModWithBasis.ParentMethods.matrix`. You currently have `assert not columns` in the method. Did you want that to be a `NotImplementedError`, or did you want to have that do something in this ticket?\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b055669a1a57633bd827871b4bf20c3db7ce3d3e\"><code>b055669</code></a></td><td><code>Merge branch 'u/nthiery/categories/finite_dimensinonal_modules_with_basis_vector_matrix-18310' of trac.sagemath.org:sage into public/categories/fin_dim_modules_with_basis_vector_matrix-18310</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e3fd9394117180fd542e34eafa088bd95928488c\"><code>e3fd939</code></a></td><td><code>Some trivial doc formatting cleanup from reviewer.</code></td></tr></table>\n",
    "created_at": "2015-05-16T22:22:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18310#issuecomment-251499",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:7" align="right">comment:7</div>

Looks good overall; I made some minor doc formatting tweaks. This was something Darij and I wondered about when looking at Lie algebras (something I will need to change on that ticket). However I have a question about the `column` attribute in `FDModWithBasis.ParentMethods.matrix`. You currently have `assert not columns` in the method. Did you want that to be a `NotImplementedError`, or did you want to have that do something in this ticket?

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b055669a1a57633bd827871b4bf20c3db7ce3d3e"><code>b055669</code></a></td><td><code>Merge branch 'u/nthiery/categories/finite_dimensinonal_modules_with_basis_vector_matrix-18310' of trac.sagemath.org:sage into public/categories/fin_dim_modules_with_basis_vector_matrix-18310</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e3fd9394117180fd542e34eafa088bd95928488c"><code>e3fd939</code></a></td><td><code>Some trivial doc formatting cleanup from reviewer.</code></td></tr></table>




---

archive/issue_comments_251500.json:
```json
{
    "body": "Changed commit from **[`e3fd939`](https://github.com/sagemath/sagetrac-mirror/commit/e3fd9394117180fd542e34eafa088bd95928488c)** to **[`642ab71`](https://github.com/sagemath/sagetrac-mirror/commit/642ab71f657054a9643b6f9de109f92d77cef421)**",
    "created_at": "2015-05-17T20:25:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18310#issuecomment-251500",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e3fd939`](https://github.com/sagemath/sagetrac-mirror/commit/e3fd9394117180fd542e34eafa088bd95928488c)** to **[`642ab71`](https://github.com/sagemath/sagetrac-mirror/commit/642ab71f657054a9643b6f9de109f92d77cef421)**



---

archive/issue_comments_251501.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/642ab71f657054a9643b6f9de109f92d77cef421\"><code>642ab71</code></a></td><td><code>18310: implement columns option for matrix</code></td></tr></table>\n",
    "created_at": "2015-05-17T20:25:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18310#issuecomment-251501",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/642ab71f657054a9643b6f9de109f92d77cef421"><code>642ab71</code></a></td><td><code>18310: implement columns option for matrix</code></td></tr></table>




---

archive/issue_comments_251502.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@tscrim](#comment%3A7):\n> Looks good overall; I made some minor doc formatting tweaks.\n\nI am happy with them; thanks! Isn't triple quoting of strings kind of\noverkill? Not that I really mind, but it's kind of heavy handed and\nreally Sphinx should do that for us ...\n\n> However I have a question about the `column` attribute in `FDModWithBasis.ParentMethods.matrix`. You currently have `assert not columns` in the method. Did you want that to be a `NotImplementedError`, or did you want to have that do something in this ticket?\n\nOops; just a marker I had left for myself and I later forgot. There is\na basic implementation now! Back to needs review.\n\nCheers,",
    "created_at": "2015-05-17T20:30:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18310#issuecomment-251502",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@tscrim](#comment%3A7):
> Looks good overall; I made some minor doc formatting tweaks.

I am happy with them; thanks! Isn't triple quoting of strings kind of
overkill? Not that I really mind, but it's kind of heavy handed and
really Sphinx should do that for us ...

> However I have a question about the `column` attribute in `FDModWithBasis.ParentMethods.matrix`. You currently have `assert not columns` in the method. Did you want that to be a `NotImplementedError`, or did you want to have that do something in this ticket?

Oops; just a marker I had left for myself and I later forgot. There is
a basic implementation now! Back to needs review.

Cheers,



---

archive/issue_events_257926.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-05-18T04:46:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18310#event-257926"
}
```



---

archive/issue_events_257927.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-05-18T04:46:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18310#event-257927"
}
```



---

archive/issue_comments_251503.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@nthiery](#comment%3A9):\n> Replying to [@tscrim](#comment%3A7):\n> > Looks good overall; I made some minor doc formatting tweaks.\n\n> \n> I am happy with them; thanks! Isn't triple quoting of strings kind of\n> overkill? Not that I really mind, but it's kind of heavy handed and\n> really Sphinx should do that for us ...\n\nIt's 2 backticks and then a quote, so it gives it that nice code look in the (non-interactive) doc (I prefer this because it is meant to reflect exact user input).\n\n> > However I have a question about the `column` attribute in `FDModWithBasis.ParentMethods.matrix`. You currently have `assert not columns` in the method. Did you want that to be a `NotImplementedError`, or did you want to have that do something in this ticket?\n\n> \n> Oops; just a marker I had left for myself and I later forgot. There is\n> a basic implementation now! Back to needs review.\n\nThanks. Positive review.",
    "created_at": "2015-05-18T04:46:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18310#issuecomment-251503",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@nthiery](#comment%3A9):
> Replying to [@tscrim](#comment%3A7):
> > Looks good overall; I made some minor doc formatting tweaks.

> 
> I am happy with them; thanks! Isn't triple quoting of strings kind of
> overkill? Not that I really mind, but it's kind of heavy handed and
> really Sphinx should do that for us ...

It's 2 backticks and then a quote, so it gives it that nice code look in the (non-interactive) doc (I prefer this because it is meant to reflect exact user input).

> > However I have a question about the `column` attribute in `FDModWithBasis.ParentMethods.matrix`. You currently have `assert not columns` in the method. Did you want that to be a `NotImplementedError`, or did you want to have that do something in this ticket?

> 
> Oops; just a marker I had left for myself and I later forgot. There is
> a basic implementation now! Back to needs review.

Thanks. Positive review.



---

archive/issue_comments_251504.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nThe `base_ring` argument of `matrix()` is not documented in the `INPUT` block.\n\nIMHO, this belongs in the discussion on Trac, not in the docstring, especially the reference to a future hypothetical fix for #18312:\n\n```\nConstructing a sparse matrix with this method is currently\nreally much faster than building it from sparse vectors;\nsee :trac:`18312`::\n\n    sage: n = 10^3; F = CombinatorialFreeModule(QQ, range(n)); vectors = [F.zero()]*n\n    sage: %timeit m = F.matrix(vectors, sparse=True) # not tested\n    The slowest run ...\n    1000 loops, best of 3: 466 \u00b5s per loop\n    sage: %timeit m = matrix(QQ, [v._vector_(sparse=True) for v in vectors], sparse=True) # not tested\n    1 loops, best of 3: 1.19 s per loop\n\nWhen :trac:`18312` will be fixed, using this method is\nlikely to still save some constant time factor.\n```\n\nAnd finally a question: is this new code relevant only for combinatorial free modules or also \"normal\" free modules?",
    "created_at": "2015-05-18T07:28:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18310#issuecomment-251504",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:11" align="right">comment:11</div>

The `base_ring` argument of `matrix()` is not documented in the `INPUT` block.

IMHO, this belongs in the discussion on Trac, not in the docstring, especially the reference to a future hypothetical fix for #18312:

```
Constructing a sparse matrix with this method is currently
really much faster than building it from sparse vectors;
see :trac:`18312`::

    sage: n = 10^3; F = CombinatorialFreeModule(QQ, range(n)); vectors = [F.zero()]*n
    sage: %timeit m = F.matrix(vectors, sparse=True) # not tested
    The slowest run ...
    1000 loops, best of 3: 466 ¬µs per loop
    sage: %timeit m = matrix(QQ, [v._vector_(sparse=True) for v in vectors], sparse=True) # not tested
    1 loops, best of 3: 1.19 s per loop

When :trac:`18312` will be fixed, using this method is
likely to still save some constant time factor.
```

And finally a question: is this new code relevant only for combinatorial free modules or also "normal" free modules?



---

archive/issue_events_257928.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-05-18T07:28:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18310#event-257928"
}
```



---

archive/issue_events_257929.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-05-18T07:28:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18310#event-257929"
}
```



---

archive/issue_comments_251505.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/035418cccaab72f73565c50d3e5b6391d294a467\"><code>035418c</code></a></td><td><code>18310: document base_ring option</code></td></tr></table>\n",
    "created_at": "2015-05-18T09:35:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18310#issuecomment-251505",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/035418cccaab72f73565c50d3e5b6391d294a467"><code>035418c</code></a></td><td><code>18310: document base_ring option</code></td></tr></table>




---

archive/issue_comments_251506.json:
```json
{
    "body": "Changed commit from **[`642ab71`](https://github.com/sagemath/sagetrac-mirror/commit/642ab71f657054a9643b6f9de109f92d77cef421)** to **[`035418c`](https://github.com/sagemath/sagetrac-mirror/commit/035418cccaab72f73565c50d3e5b6391d294a467)**",
    "created_at": "2015-05-18T09:35:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18310#issuecomment-251506",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`642ab71`](https://github.com/sagemath/sagetrac-mirror/commit/642ab71f657054a9643b6f9de109f92d77cef421)** to **[`035418c`](https://github.com/sagemath/sagetrac-mirror/commit/035418cccaab72f73565c50d3e5b6391d294a467)**



---

archive/issue_comments_251507.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@jdemeyer](#comment%3A11):\n> And finally a question: is this new code relevant only for combinatorial free modules or also \"normal\" free modules?\n\nAnswering my own question: for normal free modules, it seems that `matrix()` just returns `basis_matrix()`. That's an annoying inconsistency. I actually see no reason to have this `matrix()` alias for `basis_matrix()`.\n\nProposal: define `matrix(*args, **kwds)` in free modules which calls `basis_matrix()` if no arguments are given (this should be deprecated) and calls the modified(*) categories implementation if any argument is supplied.\n\n(*) The `base_ring` of the resulting matrix should be the `coordinate_ring`, not the `base_ring` of the free module.",
    "created_at": "2015-05-18T09:42:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18310#issuecomment-251507",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@jdemeyer](#comment%3A11):
> And finally a question: is this new code relevant only for combinatorial free modules or also "normal" free modules?

Answering my own question: for normal free modules, it seems that `matrix()` just returns `basis_matrix()`. That's an annoying inconsistency. I actually see no reason to have this `matrix()` alias for `basis_matrix()`.

Proposal: define `matrix(*args, **kwds)` in free modules which calls `basis_matrix()` if no arguments are given (this should be deprecated) and calls the modified(*) categories implementation if any argument is supplied.

(*) The `base_ring` of the resulting matrix should be the `coordinate_ring`, not the `base_ring` of the free module.



---

archive/issue_comments_251508.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@jdemeyer](#comment%3A11):\n> The `base_ring` argument of `matrix()` is not documented in the `INPUT` block.\n\nOops, fixed. Thanks!\n\n> IMHO, this belongs in the discussion on Trac, not in the docstring, especially the reference to a future hypothetical fix for #18312:\n\nI don't agree. This is not a discussion about how to implement this\nticket, but an information for the user, indicating the relevance of\nthis method in the short and long term. She has little chance to find\nthis information if it's only on trac.\n\n> And finally a question: is this new code relevant only for\n> combinatorial free modules or also \"normal\" free modules?\n\nIt's meant for any FiniteDimensionalModulesWithBasis. When \"normal\"\nfree modules will finally be in this category, they will benefit from\nthis code; one of the thing to settle for this is the syntax to\niterate through the terms. Up to this syntax detail, I believe this\ngeneric code from this ticket should work properly.\n\nAh, this raises a good point: FreeModule already defines a `matrix`\nmethod, so we have a name conflict. Any good alternative name\nsuggestion?\n\nCheers,\n                             Nicolas",
    "created_at": "2015-05-18T09:45:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18310#issuecomment-251508",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@jdemeyer](#comment%3A11):
> The `base_ring` argument of `matrix()` is not documented in the `INPUT` block.

Oops, fixed. Thanks!

> IMHO, this belongs in the discussion on Trac, not in the docstring, especially the reference to a future hypothetical fix for #18312:

I don't agree. This is not a discussion about how to implement this
ticket, but an information for the user, indicating the relevance of
this method in the short and long term. She has little chance to find
this information if it's only on trac.

> And finally a question: is this new code relevant only for
> combinatorial free modules or also "normal" free modules?

It's meant for any FiniteDimensionalModulesWithBasis. When "normal"
free modules will finally be in this category, they will benefit from
this code; one of the thing to settle for this is the syntax to
iterate through the terms. Up to this syntax detail, I believe this
generic code from this ticket should work properly.

Ah, this raises a good point: FreeModule already defines a `matrix`
method, so we have a name conflict. Any good alternative name
suggestion?

Cheers,
                             Nicolas



---

archive/issue_comments_251509.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@nthiery](#comment%3A14):\n> but an information for the user, indicating the relevance of\n> this method in the short and long term. She has little chance to find\n> this information if it's only on trac.\n\nCompromise: at least remove the sentence <code>When :trac:\\`18312\\` will be fixed, using this method is likely to still save some constant time factor.</code>",
    "created_at": "2015-05-18T09:49:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18310#issuecomment-251509",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@nthiery](#comment%3A14):
> but an information for the user, indicating the relevance of
> this method in the short and long term. She has little chance to find
> this information if it's only on trac.

Compromise: at least remove the sentence <code>When :trac:\`18312\` will be fixed, using this method is likely to still save some constant time factor.</code>



---

archive/issue_comments_251510.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nHi Jeroen!\n\nReplying to [@jdemeyer](#comment%3A15):\n> Replying to [@nthiery](#comment%3A14):\n> > but an information for the user, indicating the relevance of\n> > this method in the short and long term. She has little chance to find\n> > this information if it's only on trac.\n\n> \n> Compromise: at least remove the sentence <code>When :trac:\\`18312\\` will be fixed, using this method is likely to still save some constant time factor.</code>\n\nWith the idea that we will update the comment when `18312` will be fixed? That sounds very reasonable indeed. I am just slightly hesitant, because I would not want the user to believe that this method is just a workaround, when it's actually a way to better express a typical intention, to give a chance to the system to better optimize it. If you think it does not read that way I am happy to remove this sentence.",
    "created_at": "2015-05-18T11:51:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18310#issuecomment-251510",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:16" align="right">comment:16</div>

Hi Jeroen!

Replying to [@jdemeyer](#comment%3A15):
> Replying to [@nthiery](#comment%3A14):
> > but an information for the user, indicating the relevance of
> > this method in the short and long term. She has little chance to find
> > this information if it's only on trac.

> 
> Compromise: at least remove the sentence <code>When :trac:\`18312\` will be fixed, using this method is likely to still save some constant time factor.</code>

With the idea that we will update the comment when `18312` will be fixed? That sounds very reasonable indeed. I am just slightly hesitant, because I would not want the user to believe that this method is just a workaround, when it's actually a way to better express a typical intention, to give a chance to the system to better optimize it. If you think it does not read that way I am happy to remove this sentence.



---

archive/issue_comments_251511.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@jdemeyer](#comment%3A13):\n> Answering my own question: for normal free modules, it seems that `matrix()` just returns `basis_matrix()`. That's an annoying inconsistency. I actually see no reason to have this `matrix()` alias for `basis_matrix()`.\n> \n> Proposal: define `matrix(*args, **kwds)` in free modules which calls `basis_matrix()` if no arguments are given (this should be deprecated) and calls the modified(*) categories implementation if any argument is supplied.\n\n+1.\n\nDo you agree that this should go in #10672 rather than here? It would\nbe weird to have matrix call a method that is not yet available from\nthe categories. As a first step, we could just deprecate\n`FreeModule.matrix` for now. What do you think?\n\n> (*) The `base_ring` of the resulting matrix should be the `coordinate_ring`, not the `base_ring` of the free module.\n\nGasp, another inconsistency: most other modules in Sage (polynomial\nrings, matrix space, ...) don't define coordinate_ring: there it's\nassumed that the coefficients of elements live in `base_ring`.  Ok,\nclarifying this is for #10672 since it's not about this specific\nmethod, but about all uses of `base_ring`.\n\nThanks for the thoughts\n\nCheers,\n                               Nicolas",
    "created_at": "2015-05-18T12:02:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18310#issuecomment-251511",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@jdemeyer](#comment%3A13):
> Answering my own question: for normal free modules, it seems that `matrix()` just returns `basis_matrix()`. That's an annoying inconsistency. I actually see no reason to have this `matrix()` alias for `basis_matrix()`.
> 
> Proposal: define `matrix(*args, **kwds)` in free modules which calls `basis_matrix()` if no arguments are given (this should be deprecated) and calls the modified(*) categories implementation if any argument is supplied.

+1.

Do you agree that this should go in #10672 rather than here? It would
be weird to have matrix call a method that is not yet available from
the categories. As a first step, we could just deprecate
`FreeModule.matrix` for now. What do you think?

> (*) The `base_ring` of the resulting matrix should be the `coordinate_ring`, not the `base_ring` of the free module.

Gasp, another inconsistency: most other modules in Sage (polynomial
rings, matrix space, ...) don't define coordinate_ring: there it's
assumed that the coefficients of elements live in `base_ring`.  Ok,
clarifying this is for #10672 since it's not about this specific
method, but about all uses of `base_ring`.

Thanks for the thoughts

Cheers,
                               Nicolas



---

archive/issue_comments_251512.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@nthiery](#comment%3A17):\n> Gasp, another inconsistency: most other modules in Sage (polynomial\n> rings, matrix space, ...) don't define coordinate_ring: there it's\n> assumed that the coefficients of elements live in `base_ring`.\n\nThat's easily worked around by defining `coordinate_ring` as an alias of `base_ring` in the category code. Then it can be overridden in specific cases where needed.",
    "created_at": "2015-05-18T13:06:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18310#issuecomment-251512",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@nthiery](#comment%3A17):
> Gasp, another inconsistency: most other modules in Sage (polynomial
> rings, matrix space, ...) don't define coordinate_ring: there it's
> assumed that the coefficients of elements live in `base_ring`.

That's easily worked around by defining `coordinate_ring` as an alias of `base_ring` in the category code. Then it can be overridden in specific cases where needed.



---

archive/issue_comments_251513.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@jdemeyer](#comment%3A18):\n> Replying to [@nthiery](#comment%3A17):\n> > Gasp, another inconsistency: most other modules in Sage (polynomial\n> > rings, matrix space, ...) don't define coordinate_ring: there it's\n> > assumed that the coefficients of elements live in `base_ring`.\n\n> That's easily worked around by defining `coordinate_ring` as an alias of `base_ring` in the category code. Then it can be overridden in specific cases where needed.\n\nYes. And making sure all the category (and users) code calls `coordinate_ring` instead of `base_ring` whenever appropriate. That's certainly doable, but we want to make sure we want this feature generally before adding this little additional layer of complexity.\nAnyway, that's for #10672.",
    "created_at": "2015-05-18T14:09:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18310#issuecomment-251513",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@jdemeyer](#comment%3A18):
> Replying to [@nthiery](#comment%3A17):
> > Gasp, another inconsistency: most other modules in Sage (polynomial
> > rings, matrix space, ...) don't define coordinate_ring: there it's
> > assumed that the coefficients of elements live in `base_ring`.

> That's easily worked around by defining `coordinate_ring` as an alias of `base_ring` in the category code. Then it can be overridden in specific cases where needed.

Yes. And making sure all the category (and users) code calls `coordinate_ring` instead of `base_ring` whenever appropriate. That's certainly doable, but we want to make sure we want this feature generally before adding this little additional layer of complexity.
Anyway, that's for #10672.



---

archive/issue_comments_251514.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/485ae1952374751ee2e0d2ba31ad7e59a9897f65\"><code>485ae19</code></a></td><td><code>Rebase over 8.1.beta9.</code></td></tr></table>\n",
    "created_at": "2017-10-26T05:15:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18310#issuecomment-251514",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/485ae1952374751ee2e0d2ba31ad7e59a9897f65"><code>485ae19</code></a></td><td><code>Rebase over 8.1.beta9.</code></td></tr></table>




---

archive/issue_comments_251515.json:
```json
{
    "body": "Changed commit from **[`035418c`](https://github.com/sagemath/sagetrac-mirror/commit/035418cccaab72f73565c50d3e5b6391d294a467)** to **[`485ae19`](https://github.com/sagemath/sagetrac-mirror/commit/485ae1952374751ee2e0d2ba31ad7e59a9897f65)**",
    "created_at": "2017-10-26T05:15:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18310#issuecomment-251515",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`035418c`](https://github.com/sagemath/sagetrac-mirror/commit/035418cccaab72f73565c50d3e5b6391d294a467)** to **[`485ae19`](https://github.com/sagemath/sagetrac-mirror/commit/485ae1952374751ee2e0d2ba31ad7e59a9897f65)**



---

archive/issue_events_257930.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-10-26T05:17:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18310#event-257930"
}
```



---

archive/issue_events_257931.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-10-26T05:17:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18310#event-257931"
}
```



---

archive/issue_comments_251516.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nI rebased this over 8.1.beta9, but I'm not sure if there is anything that needs to be addressed from the conversion above. Jeroen, do you happen to remember or can recreate?",
    "created_at": "2017-10-26T05:17:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18310#issuecomment-251516",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:21" align="right">comment:21</div>

I rebased this over 8.1.beta9, but I'm not sure if there is anything that needs to be addressed from the conversion above. Jeroen, do you happen to remember or can recreate?



---

archive/issue_events_257932.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-10-26T05:17:40Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "milestone_number": null,
    "milestone_title": "sage-6.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18310#event-257932"
}
```



---

archive/issue_events_257933.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-10-26T05:17:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18310#event-257933"
}
```



---

archive/issue_comments_251517.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/758537354cb93d2f3dad16e065baf017fa5ed0ad\"><code>7585373</code></a></td><td><code>Merge branch 'public/categories/fin_dim_modules_with_basis_vector_matrix-18310' of git://trac.sagemath.org/sage into public/categories/fin_dim_modules_with_basis_vector_matrix-18310</code></td></tr></table>\n",
    "created_at": "2018-07-29T22:21:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18310#issuecomment-251517",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/758537354cb93d2f3dad16e065baf017fa5ed0ad"><code>7585373</code></a></td><td><code>Merge branch 'public/categories/fin_dim_modules_with_basis_vector_matrix-18310' of git://trac.sagemath.org/sage into public/categories/fin_dim_modules_with_basis_vector_matrix-18310</code></td></tr></table>




---

archive/issue_comments_251518.json:
```json
{
    "body": "Changed commit from **[`485ae19`](https://github.com/sagemath/sagetrac-mirror/commit/485ae1952374751ee2e0d2ba31ad7e59a9897f65)** to **[`7585373`](https://github.com/sagemath/sagetrac-mirror/commit/758537354cb93d2f3dad16e065baf017fa5ed0ad)**",
    "created_at": "2018-07-29T22:21:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18310#issuecomment-251518",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`485ae19`](https://github.com/sagemath/sagetrac-mirror/commit/485ae1952374751ee2e0d2ba31ad7e59a9897f65)** to **[`7585373`](https://github.com/sagemath/sagetrac-mirror/commit/758537354cb93d2f3dad16e065baf017fa5ed0ad)**



---

archive/issue_events_257934.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-04T05:16:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18310#event-257934"
}
```



---

archive/issue_events_257935.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-04T05:16:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18310#event-257935"
}
```



---

archive/issue_comments_251519.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nIs this ticket still relevant? It would need rebasing",
    "created_at": "2020-07-04T05:16:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18310#issuecomment-251519",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:23" align="right">comment:23</div>

Is this ticket still relevant? It would need rebasing



---

archive/issue_events_257936.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-04T05:16:57Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18310#event-257936"
}
```



---

archive/issue_events_257937.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-04T05:16:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18310#event-257937"
}
```



---

archive/issue_comments_251520.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nI am pretty sure it is still relevant as this adds extra features like the ability to specify sparseness.",
    "created_at": "2020-07-04T07:30:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18310#issuecomment-251520",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:24" align="right">comment:24</div>

I am pretty sure it is still relevant as this adds extra features like the ability to specify sparseness.



---

archive/issue_comments_251521.json:
```json
{
    "body": "<div id=\"comment:25\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f4f4e20ce84e476c401738cadbc6b6b88bc43043\"><code>f4f4e20</code></a></td><td><code>Finite dimensional modules with basis: improved conversions to vectors and matrices (squashed)</code></td></tr></table>\n",
    "created_at": "2020-07-05T23:23:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18310#issuecomment-251521",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f4f4e20ce84e476c401738cadbc6b6b88bc43043"><code>f4f4e20</code></a></td><td><code>Finite dimensional modules with basis: improved conversions to vectors and matrices (squashed)</code></td></tr></table>




---

archive/issue_comments_251522.json:
```json
{
    "body": "Changed commit from **[`7585373`](https://github.com/sagemath/sagetrac-mirror/commit/758537354cb93d2f3dad16e065baf017fa5ed0ad)** to **[`f4f4e20`](https://github.com/sagemath/sagetrac-mirror/commit/f4f4e20ce84e476c401738cadbc6b6b88bc43043)**",
    "created_at": "2020-07-05T23:23:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18310#issuecomment-251522",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7585373`](https://github.com/sagemath/sagetrac-mirror/commit/758537354cb93d2f3dad16e065baf017fa5ed0ad)** to **[`f4f4e20`](https://github.com/sagemath/sagetrac-mirror/commit/f4f4e20ce84e476c401738cadbc6b6b88bc43043)**



---

archive/issue_comments_251523.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nSquashed. Still on top of 8.3.rc3",
    "created_at": "2020-07-05T23:24:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18310#issuecomment-251523",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:26" align="right">comment:26</div>

Squashed. Still on top of 8.3.rc3



---

archive/issue_comments_251524.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nMerging 9.2.beta3 creates some merge conflicts that look like they will be easy to resolve ... for people who know this code well",
    "created_at": "2020-07-05T23:31:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18310#issuecomment-251524",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:27" align="right">comment:27</div>

Merging 9.2.beta3 creates some merge conflicts that look like they will be easy to resolve ... for people who know this code well



---

archive/issue_events_257938.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-05T23:31:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18310#event-257938"
}
```



---

archive/issue_events_257939.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-05T23:31:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18310#event-257939"
}
```



---

archive/issue_events_257940.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18310#event-257940"
}
```



---

archive/issue_events_257941.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18310#event-257941"
}
```



---

archive/issue_events_257942.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18310#event-257942"
}
```



---

archive/issue_events_257943.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18310#event-257943"
}
```



---

archive/issue_comments_251525.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18310#issuecomment-251525",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:30" align="right">comment:30</div>

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_251526.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nSetting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18310#issuecomment-251526",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:31" align="right">comment:31</div>

Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_events_257944.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18310#event-257944"
}
```



---

archive/issue_events_257945.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18310#event-257945"
}
```



---

archive/issue_events_257946.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18310#event-257946"
}
```



---

archive/issue_events_257947.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18310#event-257947"
}
```



---

archive/issue_events_257948.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-01T21:16:35Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18310#event-257948"
}
```



---

archive/issue_events_257949.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-01T21:16:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18310#event-257949"
}
```



---

archive/issue_events_257950.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18310#event-257950"
}
```



---

archive/issue_events_257951.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18310",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18310#event-257951"
}
```
