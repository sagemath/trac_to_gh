# Issue 18916: Use Kedlaya algorithm to count points on hyperelliptic curves

archive/issues_018679.json:
```json
{
    "body": "There is an implementation in `monsky_washnitzer.py` and one in PARI/GP.\nLet's use the PARI/GP one.\n\nDepends on #20219\n\nDepends on #20581\n\n**CC:**  @defeo @katestange\n\n**Keywords:** hyperelliptic curves, matrix of Frobenius\n\n**Branch/Commit:** [e79317e72f2e50cb94e00e2a91fd643da644875e](https://github.com/sagemath/sagetrac-mirror/commit/e79317e72f2e50cb94e00e2a91fd643da644875e)\n\n**Reviewer:** Jean-Pierre Flori, Fr\u00e9d\u00e9ric Chapoton\n\n**Author:** Kiran Kedlaya\n\nIssue created by migration from https://trac.sagemath.org/ticket/18916\n\n",
    "closed_at": "2016-08-19T22:45:17Z",
    "created_at": "2015-07-17T11:54:00Z",
    "labels": [
        "component: number fields",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.3",
    "title": "Use Kedlaya algorithm to count points on hyperelliptic curves",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/18916",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```
There is an implementation in `monsky_washnitzer.py` and one in PARI/GP.
Let's use the PARI/GP one.

Depends on #20219

Depends on #20581

**CC:**  @defeo @katestange

**Keywords:** hyperelliptic curves, matrix of Frobenius

**Branch/Commit:** [e79317e72f2e50cb94e00e2a91fd643da644875e](https://github.com/sagemath/sagetrac-mirror/commit/e79317e72f2e50cb94e00e2a91fd643da644875e)

**Reviewer:** Jean-Pierre Flori, Frédéric Chapoton

**Author:** Kiran Kedlaya

Issue created by migration from https://trac.sagemath.org/ticket/18916





---

archive/issue_comments_267531.json:
```json
{
    "body": "<a id='comment:1'></a>\nThe magic line reads something like:\n\n```\nmonsky_washnitzer.matrix_of_frobenius_hyperelliptic(self.hyperelliptic_polynomials()[0], p, prec)[0]\n```\n\nThe defining polynomial needs to be monicified which is also required by hypellfrob, so it makes sense to refactor the code a little bit.\nAnd it only works for prime fields.\n\nThere is also a PARI/GP implem without these restriction (only p != 2 I'd say)",
    "created_at": "2015-07-17T14:04:51Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267531",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:1'></a>
The magic line reads something like:

```
monsky_washnitzer.matrix_of_frobenius_hyperelliptic(self.hyperelliptic_polynomials()[0], p, prec)[0]
```

The defining polynomial needs to be monicified which is also required by hypellfrob, so it makes sense to refactor the code a little bit.
And it only works for prime fields.

There is also a PARI/GP implem without these restriction (only p != 2 I'd say)



---

archive/issue_comments_267532.json:
```json
{
    "body": "<a id='comment:2'></a>\n+1 to use PARI/GP",
    "created_at": "2015-07-17T14:58:50Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267532",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'></a>
+1 to use PARI/GP



---

archive/issue_comments_267533.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"hyperelliptic curves, matrix of Frobenius\".",
    "created_at": "2016-03-21T16:59:39Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267533",
    "user": "https://github.com/kedlaya"
}
```

**Changing keywords** from "" to "hyperelliptic curves, matrix of Frobenius".



---

archive/issue_comments_267534.json:
```json
{
    "body": "<a id='comment:3'></a>\nFrom a quick inspection of the PARI/GP implementation:\n\nThe command hyperellpadicfrobenius appears to only work for prime fields. There is an internal command nfhyperellpadicfrobenius which seems to handle nonprime fields, which is called by hyperellcharpoly to get the characteristic polynomial of Frobenius; but it does not appear to be exposed.\n\nAlso, the Frobenius matrix commands have a similar restriction on p as in Harvey's code. The charpoly command seems to be doing a naive point count for smaller p.\n\nIn any case, it would be worth updating HyperellipticCurve.frobenius_polynomial and related methods to include calls to PARI as appropriate.",
    "created_at": "2016-03-21T16:59:39Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267534",
    "user": "https://github.com/kedlaya"
}
```

<a id='comment:3'></a>
From a quick inspection of the PARI/GP implementation:

The command hyperellpadicfrobenius appears to only work for prime fields. There is an internal command nfhyperellpadicfrobenius which seems to handle nonprime fields, which is called by hyperellcharpoly to get the characteristic polynomial of Frobenius; but it does not appear to be exposed.

Also, the Frobenius matrix commands have a similar restriction on p as in Harvey's code. The charpoly command seems to be doing a naive point count for smaller p.

In any case, it would be worth updating HyperellipticCurve.frobenius_polynomial and related methods to include calls to PARI as appropriate.



---

archive/issue_comments_267535.json:
```json
{
    "body": "<a id='comment:4'></a>\nAddendum: naive point counting is already implemented directly in Sage, see #11980.",
    "created_at": "2016-03-21T17:41:12Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267535",
    "user": "https://github.com/kedlaya"
}
```

<a id='comment:4'></a>
Addendum: naive point counting is already implemented directly in Sage, see #11980.



---

archive/issue_comments_267536.json:
```json
{
    "body": "<a id='comment:5'></a>\nTo make things clear, I'm looking at PARI git version, though the version in Sage is quite recent and should be similar as far as `hyperell.c` is concerned.\n\nReplying to [@kedlaya](#comment%3A3):\n> From a quick inspection of the PARI/GP implementation:\n> \n> The command hyperellpadicfrobenius appears to only work for prime fields. There is an internal command nfhyperellpadicfrobenius which seems to handle nonprime fields, which is called by hyperellcharpoly to get the characteristic polynomial of Frobenius; but it does not appear to be exposed.\n\nI confirm that `hyperellpadicfrobenius` only works for prime fields whereas the `nf...` one handles extensions.\nThough both of them are not marked `static` and use `gerepile` magic to leave a clean stack so I guess they are possible and safe to use from outside the PARI library.\n\n> \n> Also, the Frobenius matrix commands have a similar restriction on p as in Harvey's code. The charpoly command seems to be doing a naive point count for smaller p.\n\nDo you mean those in the PARI library?\nI don't see at first glance such restriction.\nThere is some naive point counting involved in `hyperellcharpoly` but that is when the curve is of (very) low genus and the characteristic is small.\nDid I miss something else?\n\nFor `p == 2` it indeed seems it only works for `F_2` using naive point counting.\n> \n> In any case, it would be worth updating HyperellipticCurve.frobenius_polynomial and related methods to include calls to PARI as appropriate.",
    "created_at": "2016-03-21T18:06:18Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267536",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:5'></a>
To make things clear, I'm looking at PARI git version, though the version in Sage is quite recent and should be similar as far as `hyperell.c` is concerned.

Replying to [@kedlaya](#comment%3A3):
> From a quick inspection of the PARI/GP implementation:
> 
> The command hyperellpadicfrobenius appears to only work for prime fields. There is an internal command nfhyperellpadicfrobenius which seems to handle nonprime fields, which is called by hyperellcharpoly to get the characteristic polynomial of Frobenius; but it does not appear to be exposed.

I confirm that `hyperellpadicfrobenius` only works for prime fields whereas the `nf...` one handles extensions.
Though both of them are not marked `static` and use `gerepile` magic to leave a clean stack so I guess they are possible and safe to use from outside the PARI library.

> 
> Also, the Frobenius matrix commands have a similar restriction on p as in Harvey's code. The charpoly command seems to be doing a naive point count for smaller p.

Do you mean those in the PARI library?
I don't see at first glance such restriction.
There is some naive point counting involved in `hyperellcharpoly` but that is when the curve is of (very) low genus and the characteristic is small.
Did I miss something else?

For `p == 2` it indeed seems it only works for `F_2` using naive point counting.
> 
> In any case, it would be worth updating HyperellipticCurve.frobenius_polynomial and related methods to include calls to PARI as appropriate.



---

archive/issue_comments_267537.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [jpflori](#comment%3A5):\n> I confirm that `hyperellpadicfrobenius` only works for prime fields whereas the `nf...` one handles extensions.\n> Though both of them are not marked `static` and use `gerepile` magic to leave a clean stack so I guess they are possible and safe to use from outside the PARI library.\n> \n\nBill Allombert confirmed this. The `nf...` command is not (currently) available in GP, but we can call it from the library.\n\n> > \n> > Also, the Frobenius matrix commands have a similar restriction on p as in Harvey's code. The charpoly command seems to be doing a naive point count for smaller p.\n\n> Do you mean those in the PARI library?\n> I don't see at first glance such restriction.\n> There is some naive point counting involved in `hyperellcharpoly` but that is when the curve is of (very) low genus and the characteristic is small.\n> Did I miss something else?\n> \n\nOh, maybe that is just an optimization for cases where naive point counting is actually faster?",
    "created_at": "2016-03-22T17:00:39Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267537",
    "user": "https://github.com/kedlaya"
}
```

<a id='comment:6'></a>
Replying to [jpflori](#comment%3A5):
> I confirm that `hyperellpadicfrobenius` only works for prime fields whereas the `nf...` one handles extensions.
> Though both of them are not marked `static` and use `gerepile` magic to leave a clean stack so I guess they are possible and safe to use from outside the PARI library.
> 

Bill Allombert confirmed this. The `nf...` command is not (currently) available in GP, but we can call it from the library.

> > 
> > Also, the Frobenius matrix commands have a similar restriction on p as in Harvey's code. The charpoly command seems to be doing a naive point count for smaller p.

> Do you mean those in the PARI library?
> I don't see at first glance such restriction.
> There is some naive point counting involved in `hyperellcharpoly` but that is when the curve is of (very) low genus and the characteristic is small.
> Did I miss something else?
> 

Oh, maybe that is just an optimization for cases where naive point counting is actually faster?



---

archive/issue_comments_267538.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [@kedlaya](#comment%3A6):\n> > Did I miss something else?\n> > \n\n> Oh, maybe that is just an optimization for cases where naive point counting is actually faster?\n\nI guess so, it just looks like hand optimized random values.",
    "created_at": "2016-03-22T17:05:01Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267538",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:7'></a>
Replying to [@kedlaya](#comment%3A6):
> > Did I miss something else?
> > 

> Oh, maybe that is just an optimization for cases where naive point counting is actually faster?

I guess so, it just looks like hand optimized random values.



---

archive/issue_comments_267539.json:
```json
{
    "body": "<a id='comment:8'></a>\nI think I need some assistance with the PARI library interface here.\n\nI mentioned above that `nfhyperellpadicfrobenius` is not currently exposed. However, this function does appear in `src/sage/libs/pari/paridecl.pxd`. Does something else need to be done in order to make it visible as a method of a PARI object?",
    "created_at": "2016-03-23T12:01:35Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267539",
    "user": "https://github.com/kedlaya"
}
```

<a id='comment:8'></a>
I think I need some assistance with the PARI library interface here.

I mentioned above that `nfhyperellpadicfrobenius` is not currently exposed. However, this function does appear in `src/sage/libs/pari/paridecl.pxd`. Does something else need to be done in order to make it visible as a method of a PARI object?



---

archive/issue_comments_267540.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [@kedlaya](#comment%3A8):\n> I think I need some assistance with the PARI library interface here.\n> \n> I mentioned above that `nfhyperellpadicfrobenius` is not currently exposed. However, this function does appear in `src/sage/libs/pari/paridecl.pxd`. Does something else need to be done in order to make it visible as a method of a PARI object?\n\nThe methods of PARI objecgt are in `gen.pxd/pyx`.\nYou should add a method there calling the C function.\nThen in the hyperelliptic curve class, something like\n\n```\npari(H.polynomial()).frobenius()\n```\ncould be called.\n\nMaybe a better option is to add a method directly in Sage's hyperelliptic curve over finite field class.\n\nI'll have some free time in a few hours, I can have a look as well.",
    "created_at": "2016-03-23T12:18:23Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267540",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:9'></a>
Replying to [@kedlaya](#comment%3A8):
> I think I need some assistance with the PARI library interface here.
> 
> I mentioned above that `nfhyperellpadicfrobenius` is not currently exposed. However, this function does appear in `src/sage/libs/pari/paridecl.pxd`. Does something else need to be done in order to make it visible as a method of a PARI object?

The methods of PARI objecgt are in `gen.pxd/pyx`.
You should add a method there calling the C function.
Then in the hyperelliptic curve class, something like

```
pari(H.polynomial()).frobenius()
```
could be called.

Maybe a better option is to add a method directly in Sage's hyperelliptic curve over finite field class.

I'll have some free time in a few hours, I can have a look as well.



---

archive/issue_comments_267541.json:
```json
{
    "body": "<a id='comment:10'></a>\nIf you do make any changes to the PARI interface, please base them on #20219.",
    "created_at": "2016-03-23T13:00:40Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267541",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>
If you do make any changes to the PARI interface, please base them on #20219.



---

archive/issue_comments_267542.json:
```json
{
    "body": "**Dependencies:** #20219",
    "created_at": "2016-03-23T17:41:40Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267542",
    "user": "https://github.com/kedlaya"
}
```

**Dependencies:** #20219



---

archive/issue_comments_267543.json:
```json
{
    "body": "**Branch:** [u/kedlaya/use_kedlaya_algorithm_to_count_points_on_hyperelliptic_curves](https://github.com/sagemath/sagetrac-mirror/tree/u/kedlaya/use_kedlaya_algorithm_to_count_points_on_hyperelliptic_curves)",
    "created_at": "2016-03-24T16:20:35Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267543",
    "user": "https://github.com/kedlaya"
}
```

**Branch:** [u/kedlaya/use_kedlaya_algorithm_to_count_points_on_hyperelliptic_curves](https://github.com/sagemath/sagetrac-mirror/tree/u/kedlaya/use_kedlaya_algorithm_to_count_points_on_hyperelliptic_curves)



---

archive/issue_comments_267544.json:
```json
{
    "body": "<a id='comment:13'></a>\n**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c0ed97a0b2a036c3a4677d8e5dbabf6b2a6d54fc\">c0ed97a</a></td><td><code>Stop using deprecated PARI factoring features</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/edc5ce28655f157a13f27d2d94ae2e5d5d731bd6\">edc5ce2</a></td><td><code>Merge branch 't/20205/get_rid_of_factorint_withproof_sage_in_pari_interface' into HEAD</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5fb408dedb22e4147ee68ae5656e643b4f1df06c\">5fb408d</a></td><td><code>Replace pari_catch_sig_on by sig_on</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d5c934c5164255e352cee9ddbc780d0759b6e185\">d5c934c</a></td><td><code>Deprecate PARI nth_prime and prime_list</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7d2d7df24760cdecf0d6585972d2bf6140c1123\">d7d2d7d</a></td><td><code>Remove redundant functions from pari_instance.pyx</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/130fc90a6740a449c79e487ab71cde7204dc8f62\">130fc90</a></td><td><code>Remove redundant functions from gen.pyx</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/229974331e50c6aeeee524b587ad3e3b717f1e60\">2299743</a></td><td><code>Use SR.symbol() instead var()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6acc79ad74d75c0a7e8a3d4fe20181da2cb2a12a\">6acc79a</a></td><td><code>Add back order() as deprecated alias of multiplicative_order()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0f2386ab32d486aca0a705c00d6da6965f24623e\">0f2386a</a></td><td><code>Fix basic t_LIST functionality</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6a4e932eef76137b6856c3b84f2fe82de807cc3a\">6a4e932</a></td><td><code>Merge branch 'u/jdemeyer/remove_redundant_functions_from_gen_pyx' of git://trac.sagemath.org/sage into t/18916/use_kedlaya_algorithm_to_count_points_on_hyperelliptic_curves</code></td></tr></table>\n",
    "created_at": "2016-03-24T16:22:32Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267544",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c0ed97a0b2a036c3a4677d8e5dbabf6b2a6d54fc">c0ed97a</a></td><td><code>Stop using deprecated PARI factoring features</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/edc5ce28655f157a13f27d2d94ae2e5d5d731bd6">edc5ce2</a></td><td><code>Merge branch 't/20205/get_rid_of_factorint_withproof_sage_in_pari_interface' into HEAD</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5fb408dedb22e4147ee68ae5656e643b4f1df06c">5fb408d</a></td><td><code>Replace pari_catch_sig_on by sig_on</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d5c934c5164255e352cee9ddbc780d0759b6e185">d5c934c</a></td><td><code>Deprecate PARI nth_prime and prime_list</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7d2d7df24760cdecf0d6585972d2bf6140c1123">d7d2d7d</a></td><td><code>Remove redundant functions from pari_instance.pyx</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/130fc90a6740a449c79e487ab71cde7204dc8f62">130fc90</a></td><td><code>Remove redundant functions from gen.pyx</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/229974331e50c6aeeee524b587ad3e3b717f1e60">2299743</a></td><td><code>Use SR.symbol() instead var()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6acc79ad74d75c0a7e8a3d4fe20181da2cb2a12a">6acc79a</a></td><td><code>Add back order() as deprecated alias of multiplicative_order()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0f2386ab32d486aca0a705c00d6da6965f24623e">0f2386a</a></td><td><code>Fix basic t_LIST functionality</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6a4e932eef76137b6856c3b84f2fe82de807cc3a">6a4e932</a></td><td><code>Merge branch 'u/jdemeyer/remove_redundant_functions_from_gen_pyx' of git://trac.sagemath.org/sage into t/18916/use_kedlaya_algorithm_to_count_points_on_hyperelliptic_curves</code></td></tr></table>




---

archive/issue_comments_267545.json:
```json
{
    "body": "**Commit:** [6a4e932eef76137b6856c3b84f2fe82de807cc3a](https://github.com/sagemath/sagetrac-mirror/commit/6a4e932eef76137b6856c3b84f2fe82de807cc3a)",
    "created_at": "2016-03-24T16:22:32Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267545",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Commit:** [6a4e932eef76137b6856c3b84f2fe82de807cc3a](https://github.com/sagemath/sagetrac-mirror/commit/6a4e932eef76137b6856c3b84f2fe82de807cc3a)



---

archive/issue_comments_267546.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [jpflori](#comment%3A9):\n> > I mentioned above that `nfhyperellpadicfrobenius` is not currently exposed. However, this function does appear in `src/sage/libs/pari/paridecl.pxd`. Does something else need to be done in order to make it visible as a method of a PARI object?\n\n> The methods of PARI objecgt are in `gen.pxd/pyx`.\n> You should add a method there calling the C function.\n\nMaybe I wasn't clear here. I think there is some mechanism by which most PARI functions appear \"automatically\" as methods of a PARI object; most of them are not explicitly declared in `src/sage/libs/pari/gen.pyx`. I was wondering why `hyperellpadicfrobenius` (which does not have its own explicitly defined wrapper as far as I can find) shows up this way while `nfhyperellpadicfrobenius` does not. I had thought `paridecl.pxd` was the master source for the autogenerated methods, but it includes both of these functions and yet only one makes it through the rest of the process.",
    "created_at": "2016-03-24T20:16:19Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267546",
    "user": "https://github.com/kedlaya"
}
```

<a id='comment:14'></a>
Replying to [jpflori](#comment%3A9):
> > I mentioned above that `nfhyperellpadicfrobenius` is not currently exposed. However, this function does appear in `src/sage/libs/pari/paridecl.pxd`. Does something else need to be done in order to make it visible as a method of a PARI object?

> The methods of PARI objecgt are in `gen.pxd/pyx`.
> You should add a method there calling the C function.

Maybe I wasn't clear here. I think there is some mechanism by which most PARI functions appear "automatically" as methods of a PARI object; most of them are not explicitly declared in `src/sage/libs/pari/gen.pyx`. I was wondering why `hyperellpadicfrobenius` (which does not have its own explicitly defined wrapper as far as I can find) shows up this way while `nfhyperellpadicfrobenius` does not. I had thought `paridecl.pxd` was the master source for the autogenerated methods, but it includes both of these functions and yet only one makes it through the rest of the process.



---

archive/issue_comments_267547.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [@kedlaya](#comment%3A14):\n> Replying to [jpflori](#comment%3A9):\n> > > I mentioned above that `nfhyperellpadicfrobenius` is not currently exposed. However, this function does appear in `src/sage/libs/pari/paridecl.pxd`. Does something else need to be done in order to make it visible as a method of a PARI object?\n\n> > The methods of PARI objecgt are in `gen.pxd/pyx`.\n> > You should add a method there calling the C function.\n\n> \n> Maybe I wasn't clear here. I think there is some mechanism by which most PARI functions appear \"automatically\" as methods of a PARI object; most of them are not explicitly declared in `src/sage/libs/pari/gen.pyx`. I was wondering why `hyperellpadicfrobenius` (which does not have its own explicitly defined wrapper as far as I can find) shows up this way while `nfhyperellpadicfrobenius` does not. I had thought `paridecl.pxd` was the master source for the autogenerated methods, but it includes both of these functions and yet only one makes it through the rest of the process.\n\nOh I see.\nI'd say it's exactly because the `nf...` function is not in GP.\nIIRC functions in GP are described in `pari.desc` which is also used for autogenerating our wrappers.\nThis puts Cython methods in the `gen_auto` class in some `pxi` auto generated files.\n\nThe `paridecl.pxd` file is still handwritten/copied from the PARI library headers and is not involved during the generation of the wrappers (though it is needed to help Cython at compilation time I'd say).\nPart of it could surely be auto-generated from `pari.desc` (or even all of it from the C headers though that would be more involved).\n\nTherefore in the end we have Cython access to the `nf...` but no method wrapping it.\n\nSee #17631 and #17860 and https://github.com/sagemath/sage/blob/master/src/sage_setup/autogen/pari/generator.py\n\nJeroen, please correct me if I'm wrong.",
    "created_at": "2016-03-24T20:38:24Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267547",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:15'></a>
Replying to [@kedlaya](#comment%3A14):
> Replying to [jpflori](#comment%3A9):
> > > I mentioned above that `nfhyperellpadicfrobenius` is not currently exposed. However, this function does appear in `src/sage/libs/pari/paridecl.pxd`. Does something else need to be done in order to make it visible as a method of a PARI object?

> > The methods of PARI objecgt are in `gen.pxd/pyx`.
> > You should add a method there calling the C function.

> 
> Maybe I wasn't clear here. I think there is some mechanism by which most PARI functions appear "automatically" as methods of a PARI object; most of them are not explicitly declared in `src/sage/libs/pari/gen.pyx`. I was wondering why `hyperellpadicfrobenius` (which does not have its own explicitly defined wrapper as far as I can find) shows up this way while `nfhyperellpadicfrobenius` does not. I had thought `paridecl.pxd` was the master source for the autogenerated methods, but it includes both of these functions and yet only one makes it through the rest of the process.

Oh I see.
I'd say it's exactly because the `nf...` function is not in GP.
IIRC functions in GP are described in `pari.desc` which is also used for autogenerating our wrappers.
This puts Cython methods in the `gen_auto` class in some `pxi` auto generated files.

The `paridecl.pxd` file is still handwritten/copied from the PARI library headers and is not involved during the generation of the wrappers (though it is needed to help Cython at compilation time I'd say).
Part of it could surely be auto-generated from `pari.desc` (or even all of it from the C headers though that would be more involved).

Therefore in the end we have Cython access to the `nf...` but no method wrapping it.

See #17631 and #17860 and https://github.com/sagemath/sage/blob/master/src/sage_setup/autogen/pari/generator.py

Jeroen, please correct me if I'm wrong.



---

archive/issue_comments_267548.json:
```json
{
    "body": "<a id='comment:16'></a>\nBill Allombert is wondering what use case(s) we have in mind for the Frobenius matrix (rather than just its characteristic polynomial). Keep in mind that they don't (currently) provide Coleman integration, which rules out the Coleman-Gross height pairing. But I think the p-adic sigma function on an elliptic curve does constitute an example where the Frobenius matrix is strictly more useful than its charpoly.",
    "created_at": "2016-03-26T14:18:47Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267548",
    "user": "https://github.com/kedlaya"
}
```

<a id='comment:16'></a>
Bill Allombert is wondering what use case(s) we have in mind for the Frobenius matrix (rather than just its characteristic polynomial). Keep in mind that they don't (currently) provide Coleman integration, which rules out the Coleman-Gross height pairing. But I think the p-adic sigma function on an elliptic curve does constitute an example where the Frobenius matrix is strictly more useful than its charpoly.



---

archive/issue_comments_267549.json:
```json
{
    "body": "<a id='comment:17'></a>\nSorry, I seem to have dragged this ticket somewhat off topic. I created the new ticket #20309 to discuss Frobenius matrices.\n\nThe original topic of this ticket was point counting (and by extension zeta functions), and for that by far the easiest solution would be to use PARI's `hyperellcharpoly`. Better would be to intelligently combine this with Harvey's code for Frobenius matrices when it applies (it's very fast but not as general), but maybe that can be a separate ticket later.",
    "created_at": "2016-03-27T20:31:09Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267549",
    "user": "https://github.com/kedlaya"
}
```

<a id='comment:17'></a>
Sorry, I seem to have dragged this ticket somewhat off topic. I created the new ticket #20309 to discuss Frobenius matrices.

The original topic of this ticket was point counting (and by extension zeta functions), and for that by far the easiest solution would be to use PARI's `hyperellcharpoly`. Better would be to intelligently combine this with Harvey's code for Frobenius matrices when it applies (it's very fast but not as general), but maybe that can be a separate ticket later.



---

archive/issue_comments_267550.json:
```json
{
    "body": "<a id='comment:18'></a>\nI'm having trouble getting the PARI code to work in characteristic 2, but even in odd characteristic there seem to be some issues:\n\n```\npari: T = ffinit(3, 2);\npari: y = ffgen(T, 'y);\npari: hyperellcharpoly(x^3 + y*x)\n***   at top-level: hyperellcharpoly(x^3\n  ***                 ^--------------------\n  *** hyperellcharpoly: bug in PARI/GP (Segmentation Fault), please report.\n```\nOff to go report this upstream...",
    "created_at": "2016-04-05T04:08:30Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267550",
    "user": "https://github.com/kedlaya"
}
```

<a id='comment:18'></a>
I'm having trouble getting the PARI code to work in characteristic 2, but even in odd characteristic there seem to be some issues:

```
pari: T = ffinit(3, 2);
pari: y = ffgen(T, 'y);
pari: hyperellcharpoly(x^3 + y*x)
***   at top-level: hyperellcharpoly(x^3
  ***                 ^--------------------
  *** hyperellcharpoly: bug in PARI/GP (Segmentation Fault), please report.
```
Off to go report this upstream...



---

archive/issue_comments_267551.json:
```json
{
    "body": "**Upstream:** Reported upstream. No feedback yet.",
    "created_at": "2016-04-05T04:08:30Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267551",
    "user": "https://github.com/kedlaya"
}
```

**Upstream:** Reported upstream. No feedback yet.



---

archive/issue_comments_267552.json:
```json
{
    "body": "<a id='comment:19'></a>\nIIRC PARI supposes that the equation is `y\u00b2 = f(x)` and the function eats `f(x)`, in particular in char 2 this is a singular curve and so says PARI.",
    "created_at": "2016-04-05T06:56:54Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267552",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:19'></a>
IIRC PARI supposes that the equation is `y² = f(x)` and the function eats `f(x)`, in particular in char 2 this is a singular curve and so says PARI.



---

archive/issue_comments_267553.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [@kedlaya](#comment%3A18):\n> I'm having trouble getting the PARI code to work in characteristic 2, but even in odd characteristic there seem to be some issues:\n> \n> ```\n> pari: T = ffinit(3, 2);\n> pari: y = ffgen(T, 'y);\n> pari: hyperellcharpoly(x^3 + y*x)\n> ***   at top-level: hyperellcharpoly(x^3\n>   ***                 ^--------------------\n>   *** hyperellcharpoly: bug in PARI/GP (Segmentation Fault), please report.\n> ```\n> Off to go report this upstream...\n\nBill Allombert reports that this particular issue (the one not in characteristic 2) is fixed upstream:\n\n```\ncommit 31253df93771c72e44c19c245dcf514822a3bdb4\nAuthor: Bill Allombert <Bill.Allombert@math.u-bordeaux1.fr>\nDate:   Fri Mar 11 12:38:30 2016 +0100\n\n    hyperellcharpoly: fix typo in ZXX_to_FpXC\n```",
    "created_at": "2016-04-05T13:30:47Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267553",
    "user": "https://github.com/kedlaya"
}
```

<a id='comment:20'></a>
Replying to [@kedlaya](#comment%3A18):
> I'm having trouble getting the PARI code to work in characteristic 2, but even in odd characteristic there seem to be some issues:
> 
> ```
> pari: T = ffinit(3, 2);
> pari: y = ffgen(T, 'y);
> pari: hyperellcharpoly(x^3 + y*x)
> ***   at top-level: hyperellcharpoly(x^3
>   ***                 ^--------------------
>   *** hyperellcharpoly: bug in PARI/GP (Segmentation Fault), please report.
> ```
> Off to go report this upstream...

Bill Allombert reports that this particular issue (the one not in characteristic 2) is fixed upstream:

```
commit 31253df93771c72e44c19c245dcf514822a3bdb4
Author: Bill Allombert <Bill.Allombert@math.u-bordeaux1.fr>
Date:   Fri Mar 11 12:38:30 2016 +0100

    hyperellcharpoly: fix typo in ZXX_to_FpXC
```



---

archive/issue_comments_267554.json:
```json
{
    "body": "**Changing upstream** from \"Reported upstream. No feedback yet.\" to \"Fixed upstream, but not in a stable release.\".",
    "created_at": "2016-04-05T13:30:47Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267554",
    "user": "https://github.com/kedlaya"
}
```

**Changing upstream** from "Reported upstream. No feedback yet." to "Fixed upstream, but not in a stable release.".



---

archive/issue_comments_267555.json:
```json
{
    "body": "**Changing commit** from \"[6a4e932eef76137b6856c3b84f2fe82de807cc3a](https://github.com/sagemath/sagetrac-mirror/commit/6a4e932eef76137b6856c3b84f2fe82de807cc3a)\" to \"[e510540635d871837fd5de0ae47f3fdbf51f07e6](https://github.com/sagemath/sagetrac-mirror/commit/e510540635d871837fd5de0ae47f3fdbf51f07e6)\".",
    "created_at": "2016-04-05T16:13:11Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267555",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[6a4e932eef76137b6856c3b84f2fe82de807cc3a](https://github.com/sagemath/sagetrac-mirror/commit/6a4e932eef76137b6856c3b84f2fe82de807cc3a)" to "[e510540635d871837fd5de0ae47f3fdbf51f07e6](https://github.com/sagemath/sagetrac-mirror/commit/e510540635d871837fd5de0ae47f3fdbf51f07e6)".



---

archive/issue_comments_267556.json:
```json
{
    "body": "<a id='comment:21'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e510540635d871837fd5de0ae47f3fdbf51f07e6\">e510540</a></td><td><code>Implement wrapper for PARI hyperellcharpoly</code></td></tr></table>\n",
    "created_at": "2016-04-05T16:13:11Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267556",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e510540635d871837fd5de0ae47f3fdbf51f07e6">e510540</a></td><td><code>Implement wrapper for PARI hyperellcharpoly</code></td></tr></table>




---

archive/issue_comments_267557.json:
```json
{
    "body": "<a id='comment:22'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/95ede4bc4354e8717bfb38143d8b5ebb168bf878\">95ede4b</a></td><td><code>Correctly handle frobenius_matrix() for an even degree polynomial</code></td></tr></table>\n",
    "created_at": "2016-04-05T16:18:29Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267557",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/95ede4bc4354e8717bfb38143d8b5ebb168bf878">95ede4b</a></td><td><code>Correctly handle frobenius_matrix() for an even degree polynomial</code></td></tr></table>




---

archive/issue_comments_267558.json:
```json
{
    "body": "**Changing commit** from \"[e510540635d871837fd5de0ae47f3fdbf51f07e6](https://github.com/sagemath/sagetrac-mirror/commit/e510540635d871837fd5de0ae47f3fdbf51f07e6)\" to \"[95ede4bc4354e8717bfb38143d8b5ebb168bf878](https://github.com/sagemath/sagetrac-mirror/commit/95ede4bc4354e8717bfb38143d8b5ebb168bf878)\".",
    "created_at": "2016-04-05T16:18:29Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267558",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[e510540635d871837fd5de0ae47f3fdbf51f07e6](https://github.com/sagemath/sagetrac-mirror/commit/e510540635d871837fd5de0ae47f3fdbf51f07e6)" to "[95ede4bc4354e8717bfb38143d8b5ebb168bf878](https://github.com/sagemath/sagetrac-mirror/commit/95ede4bc4354e8717bfb38143d8b5ebb168bf878)".



---

archive/issue_comments_267559.json:
```json
{
    "body": "<a id='comment:23'></a>\nThe previous commits call to PARI in all cases where the characteristic is odd and David Harvey's code is not applicable (either the field is not prime, or the characteristic is too small, or h != 0, or f is of even degree). The naive code is still used in characteristic 2.\n\nThere is one failing doctest due to the PARI issue described above. Presumably this will be fixed once we pull from upstream.",
    "created_at": "2016-04-05T16:20:49Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267559",
    "user": "https://github.com/kedlaya"
}
```

<a id='comment:23'></a>
The previous commits call to PARI in all cases where the characteristic is odd and David Harvey's code is not applicable (either the field is not prime, or the characteristic is too small, or h != 0, or f is of even degree). The naive code is still used in characteristic 2.

There is one failing doctest due to the PARI issue described above. Presumably this will be fixed once we pull from upstream.



---

archive/issue_comments_267560.json:
```json
{
    "body": "<a id='comment:24'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4c92503eeaed4d9cca5016ee5fec2c6082eb65d8\">4c92503</a></td><td><code>Fix count_points for even-degree hyperelliptics</code></td></tr></table>\n",
    "created_at": "2016-04-08T23:49:07Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267560",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4c92503eeaed4d9cca5016ee5fec2c6082eb65d8">4c92503</a></td><td><code>Fix count_points for even-degree hyperelliptics</code></td></tr></table>




---

archive/issue_comments_267561.json:
```json
{
    "body": "**Changing commit** from \"[95ede4bc4354e8717bfb38143d8b5ebb168bf878](https://github.com/sagemath/sagetrac-mirror/commit/95ede4bc4354e8717bfb38143d8b5ebb168bf878)\" to \"[4c92503eeaed4d9cca5016ee5fec2c6082eb65d8](https://github.com/sagemath/sagetrac-mirror/commit/4c92503eeaed4d9cca5016ee5fec2c6082eb65d8)\".",
    "created_at": "2016-04-08T23:49:07Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267561",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[95ede4bc4354e8717bfb38143d8b5ebb168bf878](https://github.com/sagemath/sagetrac-mirror/commit/95ede4bc4354e8717bfb38143d8b5ebb168bf878)" to "[4c92503eeaed4d9cca5016ee5fec2c6082eb65d8](https://github.com/sagemath/sagetrac-mirror/commit/4c92503eeaed4d9cca5016ee5fec2c6082eb65d8)".



---

archive/issue_comments_267562.json:
```json
{
    "body": "**Author:** Kiran Kedlaya",
    "created_at": "2016-04-08T23:50:23Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267562",
    "user": "https://github.com/kedlaya"
}
```

**Author:** Kiran Kedlaya



---

archive/issue_comments_267563.json:
```json
{
    "body": "<a id='comment:25'></a>\nThe last commit addresses #20391.",
    "created_at": "2016-04-08T23:50:23Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267563",
    "user": "https://github.com/kedlaya"
}
```

<a id='comment:25'></a>
The last commit addresses #20391.



---

archive/issue_comments_267564.json:
```json
{
    "body": "<a id='comment:26'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6ca4b8c808ba9a53a17ce061a96ecbabea58d595\">6ca4b8c</a></td><td><code>Add doctest regarding #20391</code></td></tr></table>\n",
    "created_at": "2016-04-09T15:04:45Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267564",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6ca4b8c808ba9a53a17ce061a96ecbabea58d595">6ca4b8c</a></td><td><code>Add doctest regarding #20391</code></td></tr></table>




---

archive/issue_comments_267565.json:
```json
{
    "body": "**Changing commit** from \"[4c92503eeaed4d9cca5016ee5fec2c6082eb65d8](https://github.com/sagemath/sagetrac-mirror/commit/4c92503eeaed4d9cca5016ee5fec2c6082eb65d8)\" to \"[6ca4b8c808ba9a53a17ce061a96ecbabea58d595](https://github.com/sagemath/sagetrac-mirror/commit/6ca4b8c808ba9a53a17ce061a96ecbabea58d595)\".",
    "created_at": "2016-04-09T15:04:45Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267565",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[4c92503eeaed4d9cca5016ee5fec2c6082eb65d8](https://github.com/sagemath/sagetrac-mirror/commit/4c92503eeaed4d9cca5016ee5fec2c6082eb65d8)" to "[6ca4b8c808ba9a53a17ce061a96ecbabea58d595](https://github.com/sagemath/sagetrac-mirror/commit/6ca4b8c808ba9a53a17ce061a96ecbabea58d595)".



---

archive/issue_comments_267566.json:
```json
{
    "body": "<a id='comment:27'></a>\n... and a doctest to indicate that #20391 is addressed.",
    "created_at": "2016-04-09T15:10:34Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267566",
    "user": "https://github.com/kedlaya"
}
```

<a id='comment:27'></a>
... and a doctest to indicate that #20391 is addressed.



---

archive/issue_comments_267567.json:
```json
{
    "body": "<a id='comment:28'></a>\n`@`Kiran: is it in state of review or do you plan further changes?",
    "created_at": "2016-05-09T09:04:42Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267567",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:28'></a>
`@`Kiran: is it in state of review or do you plan further changes?



---

archive/issue_comments_267568.json:
```json
{
    "body": "<a id='comment:29'></a>\nReplying to [jpflori](#comment%3A28):\n> `@`Kiran: is it in state of review or do you plan further changes?\n\nEven after rebasing to 7.2.rc1, there is still one failing doctest:\n\n```\nFile \"src/sage/schemes/hyperelliptic_curves/hyperelliptic_finite_field.py\", line 1348, in sage.schemes.hyperelliptic_curves.hyperelliptic_finite_field.HyperellipticCurve_finite_field.zeta_funct\nion\nFailed example:\n    H.zeta_function()\nException raised:\n    Traceback (most recent call last):\n      File \"/projects/b8cc019c-1204-44b1-bea9-eb81c119388e/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/projects/b8cc019c-1204-44b1-bea9-eb81c119388e/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.schemes.hyperelliptic_curves.hyperelliptic_finite_field.HyperellipticCurve_finite_field.zeta_function[8]>\", line 1, in <module>\n        H.zeta_function()\n      File \"/projects/b8cc019c-1204-44b1-bea9-eb81c119388e/sage/local/lib/python2.7/site-packages/sage/schemes/hyperelliptic_curves/hyperelliptic_finite_field.py\", line 1364, in zeta_function\n        P = self.frobenius_polynomial()\n      File \"sage/misc/cachefunc.pyx\", line 2235, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (/projects/b8cc019c-1204-44b1-bea9-eb81c119388e/sage/src/build/cythonized/sage/misc/cac\nhefunc.c:12462)\n        self.cache = f(self._instance)\n      File \"/projects/b8cc019c-1204-44b1-bea9-eb81c119388e/sage/local/lib/python2.7/site-packages/sage/schemes/hyperelliptic_curves/hyperelliptic_finite_field.py\", line 551, in frobenius_polyno\nmial\n        return self.frobenius_polynomial_pari()\n      File \"/projects/b8cc019c-1204-44b1-bea9-eb81c119388e/sage/local/lib/python2.7/site-packages/sage/schemes/hyperelliptic_curves/hyperelliptic_finite_field.py\", line 473, in frobenius_polyno\nmial_pari\n        return ZZ['x'](pari([f, h]).hyperellcharpoly())\n      File \"sage/libs/pari/auto_gen.pxi\", line 8650, in sage.libs.pari.gen.gen_auto.hyperellcharpoly (/projects/b8cc019c-1204-44b1-bea9-eb81c119388e/sage/src/build/cythonized/sage/libs/pari/gen\n.c:47546)\n        sig_on()\n      File \"src/cysignals/signals.pyx\", line 108, in cysignals.signals.sig_raise_exception (build/src/cysignals/signals.c:1448)\n    SignalError: Segmentation fault\n```\nAs noted above, this is due to a bug in PARI which has been fixed upstream. To resolve this, we need to pull from upstream, which is probably worth a separate ticket.",
    "created_at": "2016-05-09T22:12:53Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267568",
    "user": "https://github.com/kedlaya"
}
```

<a id='comment:29'></a>
Replying to [jpflori](#comment%3A28):
> `@`Kiran: is it in state of review or do you plan further changes?

Even after rebasing to 7.2.rc1, there is still one failing doctest:

```
File "src/sage/schemes/hyperelliptic_curves/hyperelliptic_finite_field.py", line 1348, in sage.schemes.hyperelliptic_curves.hyperelliptic_finite_field.HyperellipticCurve_finite_field.zeta_funct
ion
Failed example:
    H.zeta_function()
Exception raised:
    Traceback (most recent call last):
      File "/projects/b8cc019c-1204-44b1-bea9-eb81c119388e/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/projects/b8cc019c-1204-44b1-bea9-eb81c119388e/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.schemes.hyperelliptic_curves.hyperelliptic_finite_field.HyperellipticCurve_finite_field.zeta_function[8]>", line 1, in <module>
        H.zeta_function()
      File "/projects/b8cc019c-1204-44b1-bea9-eb81c119388e/sage/local/lib/python2.7/site-packages/sage/schemes/hyperelliptic_curves/hyperelliptic_finite_field.py", line 1364, in zeta_function
        P = self.frobenius_polynomial()
      File "sage/misc/cachefunc.pyx", line 2235, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (/projects/b8cc019c-1204-44b1-bea9-eb81c119388e/sage/src/build/cythonized/sage/misc/cac
hefunc.c:12462)
        self.cache = f(self._instance)
      File "/projects/b8cc019c-1204-44b1-bea9-eb81c119388e/sage/local/lib/python2.7/site-packages/sage/schemes/hyperelliptic_curves/hyperelliptic_finite_field.py", line 551, in frobenius_polyno
mial
        return self.frobenius_polynomial_pari()
      File "/projects/b8cc019c-1204-44b1-bea9-eb81c119388e/sage/local/lib/python2.7/site-packages/sage/schemes/hyperelliptic_curves/hyperelliptic_finite_field.py", line 473, in frobenius_polyno
mial_pari
        return ZZ['x'](pari([f, h]).hyperellcharpoly())
      File "sage/libs/pari/auto_gen.pxi", line 8650, in sage.libs.pari.gen.gen_auto.hyperellcharpoly (/projects/b8cc019c-1204-44b1-bea9-eb81c119388e/sage/src/build/cythonized/sage/libs/pari/gen
.c:47546)
        sig_on()
      File "src/cysignals/signals.pyx", line 108, in cysignals.signals.sig_raise_exception (build/src/cysignals/signals.c:1448)
    SignalError: Segmentation fault
```
As noted above, this is due to a bug in PARI which has been fixed upstream. To resolve this, we need to pull from upstream, which is probably worth a separate ticket.



---

archive/issue_comments_267569.json:
```json
{
    "body": "<a id='comment:30'></a>\nCreated #20581 for the PARI/GP upgrade.",
    "created_at": "2016-05-09T22:45:53Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267569",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:30'></a>
Created #20581 for the PARI/GP upgrade.



---

archive/issue_comments_267570.json:
```json
{
    "body": "**Changing dependencies** from \"#20219\" to \"#20219, #20581\".",
    "created_at": "2016-05-10T03:22:16Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267570",
    "user": "https://github.com/kedlaya"
}
```

**Changing dependencies** from "#20219" to "#20219, #20581".



---

archive/issue_events_170038.json:
```json
{
    "actor": "https://github.com/kedlaya",
    "created_at": "2016-05-12T16:21:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "milestone": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18916#event-170038"
}
```



---

archive/issue_events_170039.json:
```json
{
    "actor": "https://github.com/kedlaya",
    "created_at": "2016-05-12T16:21:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "milestone": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18916#event-170039"
}
```



---

archive/issue_comments_267571.json:
```json
{
    "body": "<a id='comment:33'></a>\nNow that #20581 is in, is this good to go? Or does it need the new Pari update at #21005?",
    "created_at": "2016-07-27T14:40:31Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267571",
    "user": "https://github.com/slel"
}
```

<a id='comment:33'></a>
Now that #20581 is in, is this good to go? Or does it need the new Pari update at #21005?



---

archive/issue_events_170040.json:
```json
{
    "actor": "https://github.com/kedlaya",
    "created_at": "2016-07-27T14:51:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18916#event-170040"
}
```



---

archive/issue_comments_267572.json:
```json
{
    "body": "<a id='comment:34'></a>\nReplying to [@slel](#comment%3A33):\n> Now that #20581 is in, is this good to go? Or does it need the new Pari update at #21005?\n\nIt should be good to go with just #20581, but I haven't yet had a chance to recompile to see if the broken doctest is now fixed. But let's go ahead and make that part of the review...",
    "created_at": "2016-07-27T14:51:42Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267572",
    "user": "https://github.com/kedlaya"
}
```

<a id='comment:34'></a>
Replying to [@slel](#comment%3A33):
> Now that #20581 is in, is this good to go? Or does it need the new Pari update at #21005?

It should be good to go with just #20581, but I haven't yet had a chance to recompile to see if the broken doctest is now fixed. But let's go ahead and make that part of the review...



---

archive/issue_comments_267573.json:
```json
{
    "body": "<a id='comment:35'></a>\nmissing blank line after\n\n```\nOver prime fields of odd characteristic, `f` may have even degree::\n```\n\nmissing blank line after\n\n```\nThis example shows that ticket #20391 is resolved:\n```\nwhich also should instead be\n\n```\nThis example shows that :trac:`20391` is resolved::\n```",
    "created_at": "2016-07-28T16:40:28Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267573",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:35'></a>
missing blank line after

```
Over prime fields of odd characteristic, `f` may have even degree::
```

missing blank line after

```
This example shows that ticket #20391 is resolved:
```
which also should instead be

```
This example shows that :trac:`20391` is resolved::
```



---

archive/issue_comments_267574.json:
```json
{
    "body": "<a id='comment:36'></a>\n`@`Fr\u00e9d\u00e9ric: Do you plan on pushing your changes as a reviewer's action?",
    "created_at": "2016-08-09T09:32:17Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267574",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:36'></a>
`@`Frédéric: Do you plan on pushing your changes as a reviewer's action?



---

archive/issue_comments_267575.json:
```json
{
    "body": "<a id='comment:37'></a>\nnot today, so please go on",
    "created_at": "2016-08-09T11:39:59Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267575",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:37'></a>
not today, so please go on



---

archive/issue_comments_267576.json:
```json
{
    "body": "<a id='comment:38'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f6e4aa143f809ff4f369af1342a1e6712868d2ff\">f6e4aa1</a></td><td><code>Implement wrapper for PARI hyperellcharpoly</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/834b5c596621f1e9e96d3b7e86e27d3bd607cb96\">834b5c5</a></td><td><code>Correctly handle frobenius_matrix() for an even degree polynomial</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2690f0d5df6ad0d067fa4e2927ede75423d1569a\">2690f0d</a></td><td><code>Fix count_points for even-degree hyperelliptics</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c2bd95d68843b5eeb1b82e6df5645bb4628e7096\">c2bd95d</a></td><td><code>Add doctest regarding #20391</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/625e6368014669903975320b8078b687daf8987b\">625e636</a></td><td><code>Merge branch 'u/kedlaya/use_kedlaya_algorithm_to_count_points_on_hyperelliptic_curves' of git://trac.sagemath.org/sage into t/18916/use_kedlaya_algorithm_to_count_points_on_hyperelliptic_curves</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1f90f95e7c12901dba8078c84a588d9b3cd231a7\">1f90f95</a></td><td><code>Upgrade PARI to latest master</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/186c4b0a39cc066f0a40fac72c748ceedc123a11\">186c4b0</a></td><td><code>Merge branch 'u/jdemeyer/upgrade_pari_to_latest_master' of git://trac.sagemath.org/sage into t/18916/use_kedlaya_algorithm_to_count_points_on_hyperelliptic_curves</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5a046fe8c581a3e29894ba50706efc82e2af7462\">5a046fe</a></td><td><code>Correct doctest formatting</code></td></tr></table>\n",
    "created_at": "2016-08-09T12:43:17Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267576",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:38'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f6e4aa143f809ff4f369af1342a1e6712868d2ff">f6e4aa1</a></td><td><code>Implement wrapper for PARI hyperellcharpoly</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/834b5c596621f1e9e96d3b7e86e27d3bd607cb96">834b5c5</a></td><td><code>Correctly handle frobenius_matrix() for an even degree polynomial</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2690f0d5df6ad0d067fa4e2927ede75423d1569a">2690f0d</a></td><td><code>Fix count_points for even-degree hyperelliptics</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c2bd95d68843b5eeb1b82e6df5645bb4628e7096">c2bd95d</a></td><td><code>Add doctest regarding #20391</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/625e6368014669903975320b8078b687daf8987b">625e636</a></td><td><code>Merge branch 'u/kedlaya/use_kedlaya_algorithm_to_count_points_on_hyperelliptic_curves' of git://trac.sagemath.org/sage into t/18916/use_kedlaya_algorithm_to_count_points_on_hyperelliptic_curves</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1f90f95e7c12901dba8078c84a588d9b3cd231a7">1f90f95</a></td><td><code>Upgrade PARI to latest master</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/186c4b0a39cc066f0a40fac72c748ceedc123a11">186c4b0</a></td><td><code>Merge branch 'u/jdemeyer/upgrade_pari_to_latest_master' of git://trac.sagemath.org/sage into t/18916/use_kedlaya_algorithm_to_count_points_on_hyperelliptic_curves</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5a046fe8c581a3e29894ba50706efc82e2af7462">5a046fe</a></td><td><code>Correct doctest formatting</code></td></tr></table>




---

archive/issue_comments_267577.json:
```json
{
    "body": "**Changing commit** from \"[6ca4b8c808ba9a53a17ce061a96ecbabea58d595](https://github.com/sagemath/sagetrac-mirror/commit/6ca4b8c808ba9a53a17ce061a96ecbabea58d595)\" to \"[5a046fe8c581a3e29894ba50706efc82e2af7462](https://github.com/sagemath/sagetrac-mirror/commit/5a046fe8c581a3e29894ba50706efc82e2af7462)\".",
    "created_at": "2016-08-09T12:43:17Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267577",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[6ca4b8c808ba9a53a17ce061a96ecbabea58d595](https://github.com/sagemath/sagetrac-mirror/commit/6ca4b8c808ba9a53a17ce061a96ecbabea58d595)" to "[5a046fe8c581a3e29894ba50706efc82e2af7462](https://github.com/sagemath/sagetrac-mirror/commit/5a046fe8c581a3e29894ba50706efc82e2af7462)".



---

archive/issue_comments_267578.json:
```json
{
    "body": "<a id='comment:39'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cf5ad9834607c2295df2c592b173a184b7091fdb\">cf5ad98</a></td><td><code>Merge branch 'develop' into t/18916/use_kedlaya_algorithm_to_count_points_on_hyperelliptic_curves</code></td></tr></table>\n",
    "created_at": "2016-08-10T05:50:54Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267578",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:39'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cf5ad9834607c2295df2c592b173a184b7091fdb">cf5ad98</a></td><td><code>Merge branch 'develop' into t/18916/use_kedlaya_algorithm_to_count_points_on_hyperelliptic_curves</code></td></tr></table>




---

archive/issue_comments_267579.json:
```json
{
    "body": "**Changing commit** from \"[5a046fe8c581a3e29894ba50706efc82e2af7462](https://github.com/sagemath/sagetrac-mirror/commit/5a046fe8c581a3e29894ba50706efc82e2af7462)\" to \"[cf5ad9834607c2295df2c592b173a184b7091fdb](https://github.com/sagemath/sagetrac-mirror/commit/cf5ad9834607c2295df2c592b173a184b7091fdb)\".",
    "created_at": "2016-08-10T05:50:54Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267579",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5a046fe8c581a3e29894ba50706efc82e2af7462](https://github.com/sagemath/sagetrac-mirror/commit/5a046fe8c581a3e29894ba50706efc82e2af7462)" to "[cf5ad9834607c2295df2c592b173a184b7091fdb](https://github.com/sagemath/sagetrac-mirror/commit/cf5ad9834607c2295df2c592b173a184b7091fdb)".



---

archive/issue_comments_267580.json:
```json
{
    "body": "**Changing upstream** from \"Fixed upstream, but not in a stable release.\" to \"\".",
    "created_at": "2016-08-10T05:55:47Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267580",
    "user": "https://github.com/kedlaya"
}
```

**Changing upstream** from "Fixed upstream, but not in a stable release." to "".



---

archive/issue_comments_267581.json:
```json
{
    "body": "<a id='comment:40'></a>\nI fixed the formatting issues that were reported. Separately, I updated to the current (post-7.3) develop, which includes a PARI update, and can confirm that the broken doctest is now fixed.\n\nI would set this back to needs_review except that it was never unset...",
    "created_at": "2016-08-10T05:55:47Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267581",
    "user": "https://github.com/kedlaya"
}
```

<a id='comment:40'></a>
I fixed the formatting issues that were reported. Separately, I updated to the current (post-7.3) develop, which includes a PARI update, and can confirm that the broken doctest is now fixed.

I would set this back to needs_review except that it was never unset...



---

archive/issue_comments_267582.json:
```json
{
    "body": "<a id='comment:41'></a>\nHere is a public branch with just a small commit on top of your branch,\n\nwith just some enhanced details in code and doc formatting.\n\nThis is not a full review, sorry.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c814597edef29a03cb1ae787fb484d2e84dcc461\">c814597</a></td><td><code>trac #18916 reviewer's commit (details)</code></td></tr></table>\n",
    "created_at": "2016-08-10T07:11:59Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267582",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:41'></a>
Here is a public branch with just a small commit on top of your branch,

with just some enhanced details in code and doc formatting.

This is not a full review, sorry.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c814597edef29a03cb1ae787fb484d2e84dcc461">c814597</a></td><td><code>trac #18916 reviewer's commit (details)</code></td></tr></table>




---

archive/issue_comments_267583.json:
```json
{
    "body": "**Changing branch** from \"[u/kedlaya/use_kedlaya_algorithm_to_count_points_on_hyperelliptic_curves](https://github.com/sagemath/sagetrac-mirror/tree/u/kedlaya/use_kedlaya_algorithm_to_count_points_on_hyperelliptic_curves)\" to \"[public/18916](https://github.com/sagemath/sagetrac-mirror/tree/public/18916)\".",
    "created_at": "2016-08-10T07:11:59Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267583",
    "user": "https://github.com/fchapoton"
}
```

**Changing branch** from "[u/kedlaya/use_kedlaya_algorithm_to_count_points_on_hyperelliptic_curves](https://github.com/sagemath/sagetrac-mirror/tree/u/kedlaya/use_kedlaya_algorithm_to_count_points_on_hyperelliptic_curves)" to "[public/18916](https://github.com/sagemath/sagetrac-mirror/tree/public/18916)".



---

archive/issue_comments_267584.json:
```json
{
    "body": "**Changing commit** from \"[cf5ad9834607c2295df2c592b173a184b7091fdb](https://github.com/sagemath/sagetrac-mirror/commit/cf5ad9834607c2295df2c592b173a184b7091fdb)\" to \"[c814597edef29a03cb1ae787fb484d2e84dcc461](https://github.com/sagemath/sagetrac-mirror/commit/c814597edef29a03cb1ae787fb484d2e84dcc461)\".",
    "created_at": "2016-08-10T07:11:59Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267584",
    "user": "https://github.com/fchapoton"
}
```

**Changing commit** from "[cf5ad9834607c2295df2c592b173a184b7091fdb](https://github.com/sagemath/sagetrac-mirror/commit/cf5ad9834607c2295df2c592b173a184b7091fdb)" to "[c814597edef29a03cb1ae787fb484d2e84dcc461](https://github.com/sagemath/sagetrac-mirror/commit/c814597edef29a03cb1ae787fb484d2e84dcc461)".



---

archive/issue_comments_267585.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,2 @@\n-There is an implementation in `monsky_washnitzer.py`.\n-\n-Let's use it.\n+There is an implementation in `monsky_washnitzer.py` and one in PARI/GP.\n+Let's use the PARI/GP one.\n``````\n",
    "created_at": "2016-08-10T07:53:10Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267585",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,2 @@
-There is an implementation in `monsky_washnitzer.py`.
-
-Let's use it.
+There is an implementation in `monsky_washnitzer.py` and one in PARI/GP.
+Let's use the PARI/GP one.
``````




---

archive/issue_comments_267586.json:
```json
{
    "body": "**Reviewer:** Jean-Pierre Flori, Fr\u00e9d\u00e9ric Chapoton",
    "created_at": "2016-08-10T07:53:10Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267586",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Reviewer:** Jean-Pierre Flori, Frédéric Chapoton



---

archive/issue_comments_267587.json:
```json
{
    "body": "<a id='comment:42'></a>\nThe changes look good to me.",
    "created_at": "2016-08-10T07:53:10Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267587",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:42'></a>
The changes look good to me.



---

archive/issue_events_170041.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2016-08-10T07:53:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18916#event-170041"
}
```



---

archive/issue_events_170042.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2016-08-10T07:53:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18916#event-170042"
}
```



---

archive/issue_events_170043.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-08-13T09:24:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18916#event-170043"
}
```



---

archive/issue_events_170044.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-08-13T09:24:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18916#event-170044"
}
```



---

archive/issue_comments_267588.json:
```json
{
    "body": "<a id='comment:43'></a>\n\n```\n[sagelib-7.4.beta0] [  8/311] gcc -fno-strict-aliasing -I/Users/buildslave-sage/slave/sage_git/build/local/var/tmp/sage/build/python2-2.7.10.p2/include -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -I/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/cysignals -I/Users/buildslave-sage/slave/sage_git/build/local/include -I/Users/buildslave-sage/slave/sage_git/build/local/include/python2.7 -I/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/numpy/core/include -I/Users/buildslave-sage/slave/sage_git/build/src -I/Users/buildslave-sage/slave/sage_git/build/src/sage/ext -I/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized -I/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/ext -I/Users/buildslave-sage/slave/sage_git/build/local/include/python2.7 -c /Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/libs/pari/handle_error.c -o build/temp.macosx-10.9-x86_64-2.7/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/libs/pari/handle_error.o -fno-strict-aliasing\n[sagelib-7.4.beta0] In file included from /Users/buildslave-sage/slave/sage_git/build/local/include/c++/4.9.3/backward/strstream:51:0,\n[sagelib-7.4.beta0]                  from /Users/buildslave-sage/slave/sage_git/build/local/include/libLfunction/L.h:34,\n[sagelib-7.4.beta0]                  from /Users/buildslave-sage/slave/sage_git/build/src/sage/libs/lcalc/lcalc_sage.h:1,\n[sagelib-7.4.beta0]                  from /Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/libs/lcalc/lcalc_Lfunction.cpp:338:\n[sagelib-7.4.beta0] /Users/buildslave-sage/slave/sage_git/build/local/include/c++/4.9.3/backward/backward_warning.h:32:2: warning: #warning This file includes at least one deprecated or antiquated header which may be removed without further notice at a future date. Please use a non-deprecated interface with equivalent functionality instead. For a listing of replacement headers and interfaces, consult the file backward_warning.h. To disable this warning use -Wno-deprecated. [-Wcpp]\n[sagelib-7.4.beta0]  #warning \\\n[sagelib-7.4.beta0]   ^\n[sagelib-7.4.beta0] In file included from /Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/libs/pari/gen.c:341:0:\n[sagelib-7.4.beta0] /Users/buildslave-sage/slave/sage_git/build/local/include/pari/paripriv.h:16:48: error: unknown type name 'ulong'\n```\non 32-bit",
    "created_at": "2016-08-13T09:24:30Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267588",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:43'></a>

```
[sagelib-7.4.beta0] [  8/311] gcc -fno-strict-aliasing -I/Users/buildslave-sage/slave/sage_git/build/local/var/tmp/sage/build/python2-2.7.10.p2/include -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -I/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/cysignals -I/Users/buildslave-sage/slave/sage_git/build/local/include -I/Users/buildslave-sage/slave/sage_git/build/local/include/python2.7 -I/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/numpy/core/include -I/Users/buildslave-sage/slave/sage_git/build/src -I/Users/buildslave-sage/slave/sage_git/build/src/sage/ext -I/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized -I/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/ext -I/Users/buildslave-sage/slave/sage_git/build/local/include/python2.7 -c /Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/libs/pari/handle_error.c -o build/temp.macosx-10.9-x86_64-2.7/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/libs/pari/handle_error.o -fno-strict-aliasing
[sagelib-7.4.beta0] In file included from /Users/buildslave-sage/slave/sage_git/build/local/include/c++/4.9.3/backward/strstream:51:0,
[sagelib-7.4.beta0]                  from /Users/buildslave-sage/slave/sage_git/build/local/include/libLfunction/L.h:34,
[sagelib-7.4.beta0]                  from /Users/buildslave-sage/slave/sage_git/build/src/sage/libs/lcalc/lcalc_sage.h:1,
[sagelib-7.4.beta0]                  from /Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/libs/lcalc/lcalc_Lfunction.cpp:338:
[sagelib-7.4.beta0] /Users/buildslave-sage/slave/sage_git/build/local/include/c++/4.9.3/backward/backward_warning.h:32:2: warning: #warning This file includes at least one deprecated or antiquated header which may be removed without further notice at a future date. Please use a non-deprecated interface with equivalent functionality instead. For a listing of replacement headers and interfaces, consult the file backward_warning.h. To disable this warning use -Wno-deprecated. [-Wcpp]
[sagelib-7.4.beta0]  #warning \
[sagelib-7.4.beta0]   ^
[sagelib-7.4.beta0] In file included from /Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/libs/pari/gen.c:341:0:
[sagelib-7.4.beta0] /Users/buildslave-sage/slave/sage_git/build/local/include/pari/paripriv.h:16:48: error: unknown type name 'ulong'
```
on 32-bit



---

archive/issue_comments_267589.json:
```json
{
    "body": "**Changing commit** from \"[c814597edef29a03cb1ae787fb484d2e84dcc461](https://github.com/sagemath/sagetrac-mirror/commit/c814597edef29a03cb1ae787fb484d2e84dcc461)\" to \"[e79317e72f2e50cb94e00e2a91fd643da644875e](https://github.com/sagemath/sagetrac-mirror/commit/e79317e72f2e50cb94e00e2a91fd643da644875e)\".",
    "created_at": "2016-08-14T16:07:45Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267589",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c814597edef29a03cb1ae787fb484d2e84dcc461](https://github.com/sagemath/sagetrac-mirror/commit/c814597edef29a03cb1ae787fb484d2e84dcc461)" to "[e79317e72f2e50cb94e00e2a91fd643da644875e](https://github.com/sagemath/sagetrac-mirror/commit/e79317e72f2e50cb94e00e2a91fd643da644875e)".



---

archive/issue_comments_267590.json:
```json
{
    "body": "<a id='comment:44'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ed5c3435628e113424688a9a315b7445cda8d597\">ed5c343</a></td><td><code>Remove spurious changes to PARI headers</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e79317e72f2e50cb94e00e2a91fd643da644875e\">e79317e</a></td><td><code>Merge branch 'public/18916' of git://trac.sagemath.org/sage into t/18916/use_kedlaya_algorithm_to_count_points_on_hyperelliptic_curves</code></td></tr></table>\n",
    "created_at": "2016-08-14T16:07:45Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267590",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:44'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ed5c3435628e113424688a9a315b7445cda8d597">ed5c343</a></td><td><code>Remove spurious changes to PARI headers</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e79317e72f2e50cb94e00e2a91fd643da644875e">e79317e</a></td><td><code>Merge branch 'public/18916' of git://trac.sagemath.org/sage into t/18916/use_kedlaya_algorithm_to_count_points_on_hyperelliptic_curves</code></td></tr></table>




---

archive/issue_events_170045.json:
```json
{
    "actor": "https://github.com/kedlaya",
    "created_at": "2016-08-14T16:10:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18916#event-170045"
}
```



---

archive/issue_events_170046.json:
```json
{
    "actor": "https://github.com/kedlaya",
    "created_at": "2016-08-14T16:10:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18916#event-170046"
}
```



---

archive/issue_comments_267591.json:
```json
{
    "body": "<a id='comment:45'></a>\nBetween pulling from the PARI-related tickets and updating develop, a couple of unwanted changes to the PARI headers seem to have crept in, causing the build warning. I just removed these; here we go again.",
    "created_at": "2016-08-14T16:10:08Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267591",
    "user": "https://github.com/kedlaya"
}
```

<a id='comment:45'></a>
Between pulling from the PARI-related tickets and updating develop, a couple of unwanted changes to the PARI headers seem to have crept in, causing the build warning. I just removed these; here we go again.



---

archive/issue_comments_267592.json:
```json
{
    "body": "<a id='comment:46'></a>\nI can confirm it now builds on my setup with 7.4.beta0.",
    "created_at": "2016-08-16T12:30:10Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267592",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:46'></a>
I can confirm it now builds on my setup with 7.4.beta0.



---

archive/issue_events_170047.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2016-08-16T12:30:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18916#event-170047"
}
```



---

archive/issue_events_170048.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2016-08-16T12:30:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18916#event-170048"
}
```



---

archive/issue_events_170049.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-08-19T22:45:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18916#event-170049"
}
```



---

archive/issue_events_170050.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "ad71386dac74e6820c174b2936389305b1b4b54e",
    "created_at": "2016-08-19T22:45:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18916#event-170050"
}
```



---

archive/issue_comments_267593.json:
```json
{
    "body": "**Changing branch** from \"[public/18916](https://github.com/sagemath/sagetrac-mirror/tree/public/18916)\" to \"[e79317e72f2e50cb94e00e2a91fd643da644875e](https://github.com/sagemath/sagetrac-mirror/commit/e79317e72f2e50cb94e00e2a91fd643da644875e)\".",
    "created_at": "2016-08-19T22:45:17Z",
    "issue": "https://github.com/sagemath/sage/issues/18916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18916#issuecomment-267593",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/18916](https://github.com/sagemath/sagetrac-mirror/tree/public/18916)" to "[e79317e72f2e50cb94e00e2a91fd643da644875e](https://github.com/sagemath/sagetrac-mirror/commit/e79317e72f2e50cb94e00e2a91fd643da644875e)".
