# Issue 18398: Automate Branching Rules for IntegrableRepresentations

archive/issues_018161.json:
```json
{
    "assignees": [],
    "body": "Currently branching rules for IntegrableRepresentations of untwisted affine Lie algebras are implemented. But the process requires the user to create a dictionary between the nodes of two Dynkin diagrams, a process that can be automated.\n\nDepends on #18767\n\nCC:  @sagetrac-sage-combinat\n\nBranch/Commit: **[public/combinat/branching-15398](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/branching-15398) @ [`1706a8d`](https://github.com/sagemath/sagetrac-mirror/commit/1706a8dea96a178e09b817fc793bf881dfa889b8)**\n\nAuthor: **Daniel Bump**\n\nComponent: **combinatorics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/18398_\n\n",
    "created_at": "2015-05-10T22:09:34Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.10",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Automate Branching Rules for IntegrableRepresentations",
    "type": "issue",
    "updated_at": "2017-03-12T20:56:27Z",
    "url": "https://github.com/sagemath/sage/issues/18398",
    "user": "https://github.com/dwbump"
}
```
Currently branching rules for IntegrableRepresentations of untwisted affine Lie algebras are implemented. But the process requires the user to create a dictionary between the nodes of two Dynkin diagrams, a process that can be automated.

Depends on #18767

CC:  @sagetrac-sage-combinat

Branch/Commit: **[public/combinat/branching-15398](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/branching-15398) @ [`1706a8d`](https://github.com/sagemath/sagetrac-mirror/commit/1706a8dea96a178e09b817fc793bf881dfa889b8)**

Author: **Daniel Bump**

Component: **combinatorics**

_Issue created by migration from https://trac.sagemath.org/ticket/18398_





---

archive/issue_events_259097.json:
```json
{
    "actor": "https://github.com/dwbump",
    "created_at": "2015-05-10T22:09:34Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18398",
    "milestone_number": null,
    "milestone_title": "sage-6.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18398#event-259097"
}
```



---

archive/issue_events_259098.json:
```json
{
    "actor": "https://github.com/dwbump",
    "created_at": "2015-05-10T22:09:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18398",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18398#event-259098"
}
```



---

archive/issue_events_259099.json:
```json
{
    "actor": "https://github.com/dwbump",
    "created_at": "2015-05-10T22:09:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18398",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18398#event-259099"
}
```



---

archive/issue_comments_253248.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3779d1a904ebebdf453cf2f6e20a2c75b0e9407a\"><code>3779d1a</code></a></td><td><code>get_branching_rule method</code></td></tr></table>\n",
    "created_at": "2015-05-11T04:05:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18398#issuecomment-253248",
    "user": "https://github.com/dwbump"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3779d1a904ebebdf453cf2f6e20a2c75b0e9407a"><code>3779d1a</code></a></td><td><code>get_branching_rule method</code></td></tr></table>




---

archive/issue_comments_253249.json:
```json
{
    "body": "Branch: **[public/combinat/branching-15398](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/branching-15398)**",
    "created_at": "2015-05-11T04:05:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18398#issuecomment-253249",
    "user": "https://github.com/dwbump"
}
```

Branch: **[public/combinat/branching-15398](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/branching-15398)**



---

archive/issue_comments_253250.json:
```json
{
    "body": "Commit: **[`3779d1a`](https://github.com/sagemath/sagetrac-mirror/commit/3779d1a904ebebdf453cf2f6e20a2c75b0e9407a)**",
    "created_at": "2015-05-11T04:05:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18398#issuecomment-253250",
    "user": "https://github.com/dwbump"
}
```

Commit: **[`3779d1a`](https://github.com/sagemath/sagetrac-mirror/commit/3779d1a904ebebdf453cf2f6e20a2c75b0e9407a)**



---

archive/issue_comments_253251.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/186389c95a92b6430c19647a9842e2e025512cc4\"><code>186389c</code></a></td><td><code>automated branching rules now working</code></td></tr></table>\n",
    "created_at": "2015-05-11T18:27:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18398#issuecomment-253251",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/186389c95a92b6430c19647a9842e2e025512cc4"><code>186389c</code></a></td><td><code>automated branching rules now working</code></td></tr></table>




---

archive/issue_comments_253252.json:
```json
{
    "body": "Changed commit from **[`3779d1a`](https://github.com/sagemath/sagetrac-mirror/commit/3779d1a904ebebdf453cf2f6e20a2c75b0e9407a)** to **[`186389c`](https://github.com/sagemath/sagetrac-mirror/commit/186389c95a92b6430c19647a9842e2e025512cc4)**",
    "created_at": "2015-05-11T18:27:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18398#issuecomment-253252",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3779d1a`](https://github.com/sagemath/sagetrac-mirror/commit/3779d1a904ebebdf453cf2f6e20a2c75b0e9407a)** to **[`186389c`](https://github.com/sagemath/sagetrac-mirror/commit/186389c95a92b6430c19647a9842e2e025512cc4)**



---

archive/issue_events_259100.json:
```json
{
    "actor": "https://github.com/dwbump",
    "created_at": "2015-05-11T18:38:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18398",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18398#event-259100"
}
```



---

archive/issue_events_259101.json:
```json
{
    "actor": "https://github.com/dwbump",
    "created_at": "2015-05-11T18:38:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18398",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18398#event-259101"
}
```



---

archive/issue_comments_253253.json:
```json
{
    "body": "Changed commit from **[`186389c`](https://github.com/sagemath/sagetrac-mirror/commit/186389c95a92b6430c19647a9842e2e025512cc4)** to **[`1ee0267`](https://github.com/sagemath/sagetrac-mirror/commit/1ee0267f7bf4a926a3f6e0295a08be464e2e529f)**",
    "created_at": "2015-05-11T23:47:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18398#issuecomment-253253",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`186389c`](https://github.com/sagemath/sagetrac-mirror/commit/186389c95a92b6430c19647a9842e2e025512cc4)** to **[`1ee0267`](https://github.com/sagemath/sagetrac-mirror/commit/1ee0267f7bf4a926a3f6e0295a08be464e2e529f)**



---

archive/issue_comments_253254.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1ee0267f7bf4a926a3f6e0295a08be464e2e529f\"><code>1ee0267</code></a></td><td><code>doc revision</code></td></tr></table>\n",
    "created_at": "2015-05-11T23:47:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18398#issuecomment-253254",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1ee0267f7bf4a926a3f6e0295a08be464e2e529f"><code>1ee0267</code></a></td><td><code>doc revision</code></td></tr></table>




---

archive/issue_comments_253255.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI think it would be better if we implement a method on the various `CartanType` classes which does the respective branching rules. In #15463, I go part of the way there by implementing a `subtype` method, but I think we should take that idea and expand on it here, and then use `subtype` to do the branching rule here. Does this sound like a good approach or do you need something more direct here (FYI - I haven't looked too closely at this patch yet)?",
    "created_at": "2015-06-23T07:33:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18398#issuecomment-253255",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:5" align="right">comment:5</div>

I think it would be better if we implement a method on the various `CartanType` classes which does the respective branching rules. In #15463, I go part of the way there by implementing a `subtype` method, but I think we should take that idea and expand on it here, and then use `subtype` to do the branching rule here. Does this sound like a good approach or do you need something more direct here (FYI - I haven't looked too closely at this patch yet)?



---

archive/issue_comments_253256.json:
```json
{
    "body": "Work Issues: **#18767 should be merged first since it is more important**",
    "created_at": "2015-09-13T02:55:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18398#issuecomment-253256",
    "user": "https://github.com/dwbump"
}
```

Work Issues: **#18767 should be merged first since it is more important**



---

archive/issue_comments_253257.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThis patch contains a lot of case-by-case encoding of work that can also be done by hand by the user when the user needs the branching rules (explained in the reference manual). It saves the reader having to line up the Dynkin diagrams.\n\nSo although it is convenient not to have to do this, the reader who needs a branching rule can do so without this patch. This patch is therefore less important than #18767 which adds real new functionality. After #18767 this patch should be generalized to include the twisted types. So I think it is better if #18767 (which adds real new functionality) is merged first. After that, this patch should be extended to include the twisted cases.\n\n> In #15463, I go part of the way there by implementing a subtype method, but I think we should take that idea and expand on it here, and then use subtype to do the branching rule here. \n\nFollowing a suggestion of Volker Braun, branching rules for finite dimensional Lie algebras were implemented in the categorical framework in the Weyl character ring. \n\n```\nsage: R1=branching_rule(\"E7\",\"A7\",\"extended\")\nsage: type(R1)\n<class 'sage.combinat.root_system.branching_rules.BranchingRule'>\nsage: R2=branching_rule(\"A7\",\"A3xA3\",\"levi\")\nsage: R1*R2\ncomposite branching rule E7 => (extended) A7 => (levi) A3xA3\n```\n\nOne could try to extend this to the affine case but here we are only dealing with Levi branching rules. (The Levi subalgebras are finite-dimensional.) This is less ambitious but still useful.",
    "created_at": "2015-09-13T02:55:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18398#issuecomment-253257",
    "user": "https://github.com/dwbump"
}
```

<div id="comment:6" align="right">comment:6</div>

This patch contains a lot of case-by-case encoding of work that can also be done by hand by the user when the user needs the branching rules (explained in the reference manual). It saves the reader having to line up the Dynkin diagrams.

So although it is convenient not to have to do this, the reader who needs a branching rule can do so without this patch. This patch is therefore less important than #18767 which adds real new functionality. After #18767 this patch should be generalized to include the twisted types. So I think it is better if #18767 (which adds real new functionality) is merged first. After that, this patch should be extended to include the twisted cases.

> In #15463, I go part of the way there by implementing a subtype method, but I think we should take that idea and expand on it here, and then use subtype to do the branching rule here. 

Following a suggestion of Volker Braun, branching rules for finite dimensional Lie algebras were implemented in the categorical framework in the Weyl character ring. 

```
sage: R1=branching_rule("E7","A7","extended")
sage: type(R1)
<class 'sage.combinat.root_system.branching_rules.BranchingRule'>
sage: R2=branching_rule("A7","A3xA3","levi")
sage: R1*R2
composite branching rule E7 => (extended) A7 => (levi) A3xA3
```

One could try to extend this to the affine case but here we are only dealing with Levi branching rules. (The Levi subalgebras are finite-dimensional.) This is less ambitious but still useful.



---

archive/issue_comments_253258.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nWe could probably benefit from using the `subtype` method in #17798 (and could potentially need improvements) so it requires less hard-coded branching rules.",
    "created_at": "2015-10-12T18:43:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18398#issuecomment-253258",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:7" align="right">comment:7</div>

We could probably benefit from using the `subtype` method in #17798 (and could potentially need improvements) so it requires less hard-coded branching rules.



---

archive/issue_comments_253259.json:
```json
{
    "body": "Dependencies: **#18767**",
    "created_at": "2015-10-12T18:43:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18398#issuecomment-253259",
    "user": "https://github.com/tscrim"
}
```

Dependencies: **#18767**



---

archive/issue_events_259102.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-12T18:43:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/18398",
    "milestone_number": null,
    "milestone_title": "sage-6.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18398#event-259102"
}
```



---

archive/issue_events_259103.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-12T18:43:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18398",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18398#event-259103"
}
```



---

archive/issue_comments_253260.json:
```json
{
    "body": "Changed work issues from **#18767 should be merged first since it is more important** to none",
    "created_at": "2015-10-12T18:43:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18398#issuecomment-253260",
    "user": "https://github.com/tscrim"
}
```

Changed work issues from **#18767 should be merged first since it is more important** to none



---

archive/issue_comments_253261.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nmultiple doctests fail, cf. patchbot",
    "created_at": "2017-01-05T11:50:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18398#issuecomment-253261",
    "user": "https://github.com/cheuberg"
}
```

<div id="comment:8" align="right">comment:8</div>

multiple doctests fail, cf. patchbot



---

archive/issue_events_259104.json:
```json
{
    "actor": "https://github.com/cheuberg",
    "created_at": "2017-01-05T11:50:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18398",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18398#event-259104"
}
```



---

archive/issue_events_259105.json:
```json
{
    "actor": "https://github.com/cheuberg",
    "created_at": "2017-01-05T11:50:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18398",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18398#event-259105"
}
```



---

archive/issue_comments_253262.json:
```json
{
    "body": "Changed commit from **[`1ee0267`](https://github.com/sagemath/sagetrac-mirror/commit/1ee0267f7bf4a926a3f6e0295a08be464e2e529f)** to **[`1706a8d`](https://github.com/sagemath/sagetrac-mirror/commit/1706a8dea96a178e09b817fc793bf881dfa889b8)**",
    "created_at": "2017-03-12T20:56:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18398#issuecomment-253262",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1ee0267`](https://github.com/sagemath/sagetrac-mirror/commit/1ee0267f7bf4a926a3f6e0295a08be464e2e529f)** to **[`1706a8d`](https://github.com/sagemath/sagetrac-mirror/commit/1706a8dea96a178e09b817fc793bf881dfa889b8)**



---

archive/issue_comments_253263.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/79963f8a23f34a7c6456b1c6836e78b94e46149b\"><code>79963f8</code></a></td><td><code>Merge branch 'public/combinat/branching-15398' in 7.6.b6</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1706a8dea96a178e09b817fc793bf881dfa889b8\"><code>1706a8d</code></a></td><td><code>trac 18398 python3 print</code></td></tr></table>\n",
    "created_at": "2017-03-12T20:56:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18398#issuecomment-253263",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/79963f8a23f34a7c6456b1c6836e78b94e46149b"><code>79963f8</code></a></td><td><code>Merge branch 'public/combinat/branching-15398' in 7.6.b6</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1706a8dea96a178e09b817fc793bf881dfa889b8"><code>1706a8d</code></a></td><td><code>trac 18398 python3 print</code></td></tr></table>

