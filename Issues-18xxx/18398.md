# Issue 18398: Automate Branching Rules for IntegrableRepresentations

archive/issues_018161.json:
```json
{
    "body": "Currently branching rules for IntegrableRepresentations of untwisted affine Lie algebras are implemented. But the process requires the user to create a dictionary between the nodes of two Dynkin diagrams, a process that can be automated.\n\nCC:  sage-combinat\n\nBranch: [public/combinat/branching-15398](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/branching-15398)\n\nCommit: [1706a8dea96a178e09b817fc793bf881dfa889b8](https://github.com/sagemath/sagetrac-mirror/commit/1706a8dea96a178e09b817fc793bf881dfa889b8)\n\nAuthor: Daniel Bump\n\nStatus: needs_work\n\nDependencies: #18767\n\nIssue created by migration from https://trac.sagemath.org/ticket/18398\n\n",
    "created_at": "2015-05-10T22:09:34Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.10",
    "title": "Automate Branching Rules for IntegrableRepresentations",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18398",
    "user": "https://github.com/dwbump"
}
```
Currently branching rules for IntegrableRepresentations of untwisted affine Lie algebras are implemented. But the process requires the user to create a dictionary between the nodes of two Dynkin diagrams, a process that can be automated.

CC:  sage-combinat

Branch: [public/combinat/branching-15398](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/branching-15398)

Commit: [1706a8dea96a178e09b817fc793bf881dfa889b8](https://github.com/sagemath/sagetrac-mirror/commit/1706a8dea96a178e09b817fc793bf881dfa889b8)

Author: Daniel Bump

Status: needs_work

Dependencies: #18767

Issue created by migration from https://trac.sagemath.org/ticket/18398





---

archive/issue_comments_324179.json:
```json
{
    "body": "<a id='comment:1'></a>\nNew commits:\n|                                                                                                                                          |                           |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|\n|[3779d1a](https://github.com/sagemath/sagetrac-mirror/commit/3779d1a904ebebdf453cf2f6e20a2c75b0e9407a)|`get_branching_rule method`|",
    "created_at": "2015-05-11T04:05:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18398#issuecomment-324179",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:1'></a>
New commits:
|                                                                                                                                          |                           |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|
|[3779d1a](https://github.com/sagemath/sagetrac-mirror/commit/3779d1a904ebebdf453cf2f6e20a2c75b0e9407a)|`get_branching_rule method`|



---

archive/issue_comments_324180.json:
```json
{
    "body": "Branch: [public/combinat/branching-15398](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/branching-15398)",
    "created_at": "2015-05-11T04:05:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18398#issuecomment-324180",
    "user": "https://github.com/dwbump"
}
```

Branch: [public/combinat/branching-15398](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/branching-15398)



---

archive/issue_comments_324181.json:
```json
{
    "body": "Commit: [3779d1a904ebebdf453cf2f6e20a2c75b0e9407a](https://github.com/sagemath/sagetrac-mirror/commit/3779d1a904ebebdf453cf2f6e20a2c75b0e9407a)",
    "created_at": "2015-05-11T04:05:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18398#issuecomment-324181",
    "user": "https://github.com/dwbump"
}
```

Commit: [3779d1a904ebebdf453cf2f6e20a2c75b0e9407a](https://github.com/sagemath/sagetrac-mirror/commit/3779d1a904ebebdf453cf2f6e20a2c75b0e9407a)



---

archive/issue_comments_324182.json:
```json
{
    "body": "<a id='comment:2'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                       |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|\n|[186389c](https://github.com/sagemath/sagetrac-mirror/commit/186389c95a92b6430c19647a9842e2e025512cc4)|`automated branching rules now working`|",
    "created_at": "2015-05-11T18:27:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18398#issuecomment-324182",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                       |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|
|[186389c](https://github.com/sagemath/sagetrac-mirror/commit/186389c95a92b6430c19647a9842e2e025512cc4)|`automated branching rules now working`|



---

archive/issue_comments_324183.json:
```json
{
    "body": "Changing commit from \"[3779d1a904ebebdf453cf2f6e20a2c75b0e9407a](https://github.com/sagemath/sagetrac-mirror/commit/3779d1a904ebebdf453cf2f6e20a2c75b0e9407a)\" to \"[186389c95a92b6430c19647a9842e2e025512cc4](https://github.com/sagemath/sagetrac-mirror/commit/186389c95a92b6430c19647a9842e2e025512cc4)\"",
    "created_at": "2015-05-11T18:27:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18398#issuecomment-324183",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[3779d1a904ebebdf453cf2f6e20a2c75b0e9407a](https://github.com/sagemath/sagetrac-mirror/commit/3779d1a904ebebdf453cf2f6e20a2c75b0e9407a)" to "[186389c95a92b6430c19647a9842e2e025512cc4](https://github.com/sagemath/sagetrac-mirror/commit/186389c95a92b6430c19647a9842e2e025512cc4)"



---

archive/issue_comments_324184.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-05-11T18:38:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18398#issuecomment-324184",
    "user": "https://github.com/dwbump"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_324185.json:
```json
{
    "body": "Changing commit from \"[186389c95a92b6430c19647a9842e2e025512cc4](https://github.com/sagemath/sagetrac-mirror/commit/186389c95a92b6430c19647a9842e2e025512cc4)\" to \"[1ee0267f7bf4a926a3f6e0295a08be464e2e529f](https://github.com/sagemath/sagetrac-mirror/commit/1ee0267f7bf4a926a3f6e0295a08be464e2e529f)\"",
    "created_at": "2015-05-11T23:47:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18398#issuecomment-324185",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[186389c95a92b6430c19647a9842e2e025512cc4](https://github.com/sagemath/sagetrac-mirror/commit/186389c95a92b6430c19647a9842e2e025512cc4)" to "[1ee0267f7bf4a926a3f6e0295a08be464e2e529f](https://github.com/sagemath/sagetrac-mirror/commit/1ee0267f7bf4a926a3f6e0295a08be464e2e529f)"



---

archive/issue_comments_324186.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |              |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------|\n|[1ee0267](https://github.com/sagemath/sagetrac-mirror/commit/1ee0267f7bf4a926a3f6e0295a08be464e2e529f)|`doc revision`|",
    "created_at": "2015-05-11T23:47:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18398#issuecomment-324186",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |              |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------|
|[1ee0267](https://github.com/sagemath/sagetrac-mirror/commit/1ee0267f7bf4a926a3f6e0295a08be464e2e529f)|`doc revision`|



---

archive/issue_comments_324187.json:
```json
{
    "body": "<a id='comment:5'></a>\nI think it would be better if we implement a method on the various `CartanType` classes which does the respective branching rules. In #15463, I go part of the way there by implementing a `subtype` method, but I think we should take that idea and expand on it here, and then use `subtype` to do the branching rule here. Does this sound like a good approach or do you need something more direct here (FYI - I haven't looked too closely at this patch yet)?",
    "created_at": "2015-06-23T07:33:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18398#issuecomment-324187",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'></a>
I think it would be better if we implement a method on the various `CartanType` classes which does the respective branching rules. In #15463, I go part of the way there by implementing a `subtype` method, but I think we should take that idea and expand on it here, and then use `subtype` to do the branching rule here. Does this sound like a good approach or do you need something more direct here (FYI - I haven't looked too closely at this patch yet)?



---

archive/issue_comments_324188.json:
```json
{
    "body": "Work_Issues: #18767 should be merged first since it is more important",
    "created_at": "2015-09-13T02:55:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18398#issuecomment-324188",
    "user": "https://github.com/dwbump"
}
```

Work_Issues: #18767 should be merged first since it is more important



---

archive/issue_comments_324189.json:
```json
{
    "body": "<a id='comment:6'></a>\nThis patch contains a lot of case-by-case encoding of work that can also be done by hand by the user when the user needs the branching rules (explained in the reference manual). It saves the reader having to line up the Dynkin diagrams.\n\nSo although it is convenient not to have to do this, the reader who needs a branching rule can do so without this patch. This patch is therefore less important than #18767 which adds real new functionality. After #18767 this patch should be generalized to include the twisted types. So I think it is better if #18767 (which adds real new functionality) is merged first. After that, this patch should be extended to include the twisted cases.\n\n> In #15463, I go part of the way there by implementing a subtype method, but I think we should take that idea and expand on it here, and then use subtype to do the branching rule here. \n\n\nFollowing a suggestion of Volker Braun, branching rules for finite dimensional Lie algebras were implemented in the categorical framework in the Weyl character ring. \n\n```\nsage: R1=branching_rule(\"E7\",\"A7\",\"extended\")\nsage: type(R1)\n<class 'sage.combinat.root_system.branching_rules.BranchingRule'>\nsage: R2=branching_rule(\"A7\",\"A3xA3\",\"levi\")\nsage: R1*R2\ncomposite branching rule E7 => (extended) A7 => (levi) A3xA3\n```\n\nOne could try to extend this to the affine case but here we are only dealing with Levi branching rules. (The Levi subalgebras are finite-dimensional.) This is less ambitious but still useful.",
    "created_at": "2015-09-13T02:55:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18398#issuecomment-324189",
    "user": "https://github.com/dwbump"
}
```

<a id='comment:6'></a>
This patch contains a lot of case-by-case encoding of work that can also be done by hand by the user when the user needs the branching rules (explained in the reference manual). It saves the reader having to line up the Dynkin diagrams.

So although it is convenient not to have to do this, the reader who needs a branching rule can do so without this patch. This patch is therefore less important than #18767 which adds real new functionality. After #18767 this patch should be generalized to include the twisted types. So I think it is better if #18767 (which adds real new functionality) is merged first. After that, this patch should be extended to include the twisted cases.

> In #15463, I go part of the way there by implementing a subtype method, but I think we should take that idea and expand on it here, and then use subtype to do the branching rule here. 


Following a suggestion of Volker Braun, branching rules for finite dimensional Lie algebras were implemented in the categorical framework in the Weyl character ring. 

```
sage: R1=branching_rule("E7","A7","extended")
sage: type(R1)
<class 'sage.combinat.root_system.branching_rules.BranchingRule'>
sage: R2=branching_rule("A7","A3xA3","levi")
sage: R1*R2
composite branching rule E7 => (extended) A7 => (levi) A3xA3
```

One could try to extend this to the affine case but here we are only dealing with Levi branching rules. (The Levi subalgebras are finite-dimensional.) This is less ambitious but still useful.



---

archive/issue_comments_324190.json:
```json
{
    "body": "<a id='comment:7'></a>\nWe could probably benefit from using the `subtype` method in #17798 (and could potentially need improvements) so it requires less hard-coded branching rules.",
    "created_at": "2015-10-12T18:43:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18398#issuecomment-324190",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'></a>
We could probably benefit from using the `subtype` method in #17798 (and could potentially need improvements) so it requires less hard-coded branching rules.



---

archive/issue_comments_324191.json:
```json
{
    "body": "Dependencies: #18767",
    "created_at": "2015-10-12T18:43:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18398#issuecomment-324191",
    "user": "https://github.com/tscrim"
}
```

Dependencies: #18767



---

archive/issue_events_058969.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-12T18:43:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18398",
    "milestone": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18398#event-58969"
}
```



---

archive/issue_comments_324192.json:
```json
{
    "body": "Changing work_issues from \"#18767 should be merged first since it is more important\" to \"\"",
    "created_at": "2015-10-12T18:43:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18398#issuecomment-324192",
    "user": "https://github.com/tscrim"
}
```

Changing work_issues from "#18767 should be merged first since it is more important" to ""



---

archive/issue_comments_324193.json:
```json
{
    "body": "<a id='comment:8'></a>\nmultiple doctests fail, cf. patchbot",
    "created_at": "2017-01-05T11:50:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18398#issuecomment-324193",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:8'></a>
multiple doctests fail, cf. patchbot



---

archive/issue_comments_324194.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-01-05T11:50:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18398#issuecomment-324194",
    "user": "https://github.com/cheuberg"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_324195.json:
```json
{
    "body": "Changing commit from \"[1ee0267f7bf4a926a3f6e0295a08be464e2e529f](https://github.com/sagemath/sagetrac-mirror/commit/1ee0267f7bf4a926a3f6e0295a08be464e2e529f)\" to \"[1706a8dea96a178e09b817fc793bf881dfa889b8](https://github.com/sagemath/sagetrac-mirror/commit/1706a8dea96a178e09b817fc793bf881dfa889b8)\"",
    "created_at": "2017-03-12T20:56:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18398#issuecomment-324195",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[1ee0267f7bf4a926a3f6e0295a08be464e2e529f](https://github.com/sagemath/sagetrac-mirror/commit/1ee0267f7bf4a926a3f6e0295a08be464e2e529f)" to "[1706a8dea96a178e09b817fc793bf881dfa889b8](https://github.com/sagemath/sagetrac-mirror/commit/1706a8dea96a178e09b817fc793bf881dfa889b8)"



---

archive/issue_comments_324196.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------|\n|[79963f8](https://github.com/sagemath/sagetrac-mirror/commit/79963f8a23f34a7c6456b1c6836e78b94e46149b)|`Merge branch 'public/combinat/branching-15398' in 7.6.b6`|\n|[1706a8d](https://github.com/sagemath/sagetrac-mirror/commit/1706a8dea96a178e09b817fc793bf881dfa889b8)|`trac 18398 python3 print`|",
    "created_at": "2017-03-12T20:56:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18398#issuecomment-324196",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                          |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------|
|[79963f8](https://github.com/sagemath/sagetrac-mirror/commit/79963f8a23f34a7c6456b1c6836e78b94e46149b)|`Merge branch 'public/combinat/branching-15398' in 7.6.b6`|
|[1706a8d](https://github.com/sagemath/sagetrac-mirror/commit/1706a8dea96a178e09b817fc793bf881dfa889b8)|`trac 18398 python3 print`|
