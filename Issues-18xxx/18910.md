# Issue 18910: Boost minimum spanning tree

archive/issues_018673.json:
```json
{
    "body": "Include Boost implementation of Kruskal and Prim algorithms for minimum spanning tree.\n\nCC:  @nathanncohen @dcoudert stefan rudi\n\nKeywords: Boost, minimum spanning tree\n\nBranch/Commit: 38a817d387325a25c62df70c6e77d7c06169f152\n\nReviewer: David Coudert\n\nAuthor: Michele Borassi\n\nDependencies: #18876, #18906\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/18910\n\n",
    "closed_at": "2015-07-31T17:52:20Z",
    "created_at": "2015-07-16T08:36:09Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.8",
    "title": "Boost minimum spanning tree",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18910",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```
Include Boost implementation of Kruskal and Prim algorithms for minimum spanning tree.

CC:  @nathanncohen @dcoudert stefan rudi

Keywords: Boost, minimum spanning tree

Branch/Commit: 38a817d387325a25c62df70c6e77d7c06169f152

Reviewer: David Coudert

Author: Michele Borassi

Dependencies: #18876, #18906

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/18910





---

archive/issue_comments_270700.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2015-07-16T08:39:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18910#issuecomment-270700",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_270701.json:
```json
{
    "body": "Changing keywords from \"\" to \"Boost, minimum spanning tree\".",
    "created_at": "2015-07-16T08:39:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18910#issuecomment-270701",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

Changing keywords from "" to "Boost, minimum spanning tree".



---

archive/issue_comments_270702.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to graph theory.",
    "created_at": "2015-07-16T08:39:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18910#issuecomment-270702",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

Changing component from PLEASE CHANGE to graph theory.



---

archive/issue_comments_270703.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-\n+Include Boost implementation of Kruskal and Prim algorithms for minimum spanning tree.\n \n Type: PLEASE CHANGE\n \n```\n",
    "created_at": "2015-07-16T08:39:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18910#issuecomment-270703",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,4 @@
-
+Include Boost implementation of Kruskal and Prim algorithms for minimum spanning tree.
 
 Type: PLEASE CHANGE
 
```




---

archive/issue_comments_270704.json:
```json
{
    "body": "<a id='comment:3'></a>Hello!\n\nThis is the first version of Boost minimum spanning tree. With this code, I'm inserting in Sage the code to interface with Boost weighted graphs. The improvement on this specific algorithm is not striking (about 2x over the old algorithm), but I still set the Boost algorithm as default.\n\nSome benchmark:\n\n```\nsage: sage: def random_weighted_graph(n, m, lower_weight = 1, upper_weight = 100): \n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 import random\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 g = graphs.RandomGNM(n,m)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 m = g.num_edges()\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 weights = [random.randint(lower_weight, upper_weight) for r in xrange(m)]\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 uw_edges = g.edges()\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 w_edges = [(uw_edges[i][0], uw_edges[i][1], weights[i]) for i in xrange(m)]\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 return Graph(w_edges, weighted = True)\n....: \nsage: g = random_weighted_graph(20000,200000)\nsage: %timeit(g.min_spanning_tree(algorithm=\"Prim_Boost\"))\n1 loops, best of 3: 279 ms per loop\nsage: %timeit(g.min_spanning_tree(algorithm=\"Kruskal_Boost\"))\n1 loops, best of 3: 361 ms per loop\nsage: %timeit(g.min_spanning_tree(algorithm=\"Kruskal\"))\n1 loops, best of 3: 492 ms per loop\nsage: %timeit(g.min_spanning_tree(algorithm=\"NetworkX\"))\n1 loops, best of 3: 1.92 s per loop\nsage: %timeit(g.min_spanning_tree(algorithm=\"Prim_edge\"))\n1 loops, best of 3: 17.3 s per loop\nsage: %timeit(g.min_spanning_tree(algorithm=\"Prim_fringe\"))\n1 loops, best of 3: 36.1 s per loop\n```\nHope you like it!\n\nMichele",
    "created_at": "2015-07-19T16:34:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18910#issuecomment-270704",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

<a id='comment:3'></a>Hello!

This is the first version of Boost minimum spanning tree. With this code, I'm inserting in Sage the code to interface with Boost weighted graphs. The improvement on this specific algorithm is not striking (about 2x over the old algorithm), but I still set the Boost algorithm as default.

Some benchmark:

```
sage: sage: def random_weighted_graph(n, m, lower_weight = 1, upper_weight = 100): 
        import random
        g = graphs.RandomGNM(n,m)
        m = g.num_edges()
        weights = [random.randint(lower_weight, upper_weight) for r in xrange(m)]
        uw_edges = g.edges()
        w_edges = [(uw_edges[i][0], uw_edges[i][1], weights[i]) for i in xrange(m)]
        return Graph(w_edges, weighted = True)
....: 
sage: g = random_weighted_graph(20000,200000)
sage: %timeit(g.min_spanning_tree(algorithm="Prim_Boost"))
1 loops, best of 3: 279 ms per loop
sage: %timeit(g.min_spanning_tree(algorithm="Kruskal_Boost"))
1 loops, best of 3: 361 ms per loop
sage: %timeit(g.min_spanning_tree(algorithm="Kruskal"))
1 loops, best of 3: 492 ms per loop
sage: %timeit(g.min_spanning_tree(algorithm="NetworkX"))
1 loops, best of 3: 1.92 s per loop
sage: %timeit(g.min_spanning_tree(algorithm="Prim_edge"))
1 loops, best of 3: 17.3 s per loop
sage: %timeit(g.min_spanning_tree(algorithm="Prim_fringe"))
1 loops, best of 3: 36.1 s per loop
```
Hope you like it!

Michele



---

archive/issue_comments_270705.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-07-21T05:58:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18910#issuecomment-270705",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_270706.json:
```json
{
    "body": "<a id='comment:5'></a>The weight function you use does not allow to access all possible stuff that might be stored on an edge. For instance, I may have an edge like `(u, v, {'weight':3, 'toto':4})` in which case a function like `weight_function=lambda e:e[2]['weight']` is possible. With current implementation, you assume that `weight_function((u,v))` returns the weight. Better to have `weight_function(e)` or `weight_function((u,v,l))`.\n\nAlso, could you be a bit more specific with the description of the weight function\n\n```\n- ``weight_function`` -- A function that takes an edge and returns a\n          numeric weight. If ``None`` (default), the algorithm uses the edge\n          weights, if available, otherwise it assigns weight 1 to each edge (in\n          the latter case, the output can be any spanning tree).\n```\nIn particular, the default behavior assume that edge weights are numbers, that is if `e=(u,v,l)` then `l` is a number.\n\nDavid.",
    "created_at": "2015-07-21T08:15:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18910#issuecomment-270706",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:5'></a>The weight function you use does not allow to access all possible stuff that might be stored on an edge. For instance, I may have an edge like `(u, v, {'weight':3, 'toto':4})` in which case a function like `weight_function=lambda e:e[2]['weight']` is possible. With current implementation, you assume that `weight_function((u,v))` returns the weight. Better to have `weight_function(e)` or `weight_function((u,v,l))`.

Also, could you be a bit more specific with the description of the weight function

```
- ``weight_function`` -- A function that takes an edge and returns a
          numeric weight. If ``None`` (default), the algorithm uses the edge
          weights, if available, otherwise it assigns weight 1 to each edge (in
          the latter case, the output can be any spanning tree).
```
In particular, the default behavior assume that edge weights are numbers, that is if `e=(u,v,l)` then `l` is a number.

David.



---

archive/issue_comments_270707.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-21T13:40:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18910#issuecomment-270707",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_270708.json:
```json
{
    "body": "<a id='comment:7'></a>Hello!\n\nyou are absolutely right: I have made the modification you asked, I have improved the explanation of the weight function, and I have added an example in the generic_graph file.\n\nThank you very much!\n\nMichele",
    "created_at": "2015-07-21T13:41:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18910#issuecomment-270708",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

<a id='comment:7'></a>Hello!

you are absolutely right: I have made the modification you asked, I have improved the explanation of the weight function, and I have added an example in the generic_graph file.

Thank you very much!

Michele



---

archive/issue_comments_270709.json:
```json
{
    "body": "<a id='comment:8'></a>Hello,\n\nI know that dealing with weights is not easy. However, here we have different behaviors.\n\n```\nsage: g = Graph([(0,1,{'blop':1}), (1,2,{'blop':'b'})])\nsage: g.min_spanning_tree(algorithm=\"Prim_Boost\", weight_function=lambda e:e[2]['blop'])\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n...\nTypeError: a float is required\nsage: g = Graph([(0,1,1), (1,2,'b')])\nsage: g.min_spanning_tree(algorithm=\"Prim_Boost\", weight_function=lambda e:e[2])\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n...\nTypeError: a float is required\nsage: g.min_spanning_tree(algorithm=\"Prim_Boost\")\n[(0, 1, 1), (1, 2, 'b')]\n```\n\nDavid.",
    "created_at": "2015-07-21T14:59:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18910#issuecomment-270709",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:8'></a>Hello,

I know that dealing with weights is not easy. However, here we have different behaviors.

```
sage: g = Graph([(0,1,{'blop':1}), (1,2,{'blop':'b'})])
sage: g.min_spanning_tree(algorithm="Prim_Boost", weight_function=lambda e:e[2]['blop'])
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
...
TypeError: a float is required
sage: g = Graph([(0,1,1), (1,2,'b')])
sage: g.min_spanning_tree(algorithm="Prim_Boost", weight_function=lambda e:e[2])
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
...
TypeError: a float is required
sage: g.min_spanning_tree(algorithm="Prim_Boost")
[(0, 1, 1), (1, 2, 'b')]
```

David.



---

archive/issue_comments_270710.json:
```json
{
    "body": "<a id='comment:9'></a>Hello!\n\nYeah, I have some problems, too: it is difficult to decide which is the correct behavior. In your examples, I have trouble understanding which improvement you are suggesting: could you be a bit more specific?\n\nIn particular, in the first two cases, you provide a weight function which is not correct, so a TypeError is raised (if you provide a function, the algorithm raises an error if it is not correct). In the third case, your graph is not weighted:\n\n```\nsage: g = Graph([(0,1,1), (1,2,'b')])\nsage: g.weighted()\nFalse\n```\nHence, the algorithm simply says \"Since the graph is not weighted, I ignore the label and set weight 1 to each edge\".\n\nMaybe a problem occurs if the graph is weighted and no function is provided: in this case, the algorithm tries to use labels even if they are not numbers. In Boost algorithms, non-numeric weights are assumed to be 1, while in other algorithms labels are simply compared, and Python decides which is the biggest.\n\n```\nsage: g = Graph([(0,1,1), (1,2,'b')], weighted=True)\nsage: g.min_spanning_tree(algorithm=\"Prim_Boost\")\n[(0, 1, 1), (1, 2, 'b')]\nsage: g.min_spanning_tree(algorithm=\"Prim_fringe\")\n[(0, 1, 1), (1, 2, 'b')]\nsage: g.min_spanning_tree(algorithm=\"Prim_edge\")\n[(0, 1, 1), (1, 2, 'b')]\nsage: g.min_spanning_tree(algorithm=\"Kruskal\")\n[(0, 1, 1), (1, 2, 'b')]\nsage: g.min_spanning_tree(algorithm=\"Kruskal_Boost\")\n[(0, 1, 1), (1, 2, 'b')]\nsage: g.min_spanning_tree(algorithm=\"NetworkX\")\n[(0, 1, 1), (1, 2, 'b')]\n```\nIn the latter example, do you think I should only improve the explanation, which is in the INPUT section of the documentation and in the examples? Or do you think I should raise an exception if a weight is not a number?\n\nThank you very much!\n\nMichele",
    "created_at": "2015-07-21T16:17:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18910#issuecomment-270710",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

<a id='comment:9'></a>Hello!

Yeah, I have some problems, too: it is difficult to decide which is the correct behavior. In your examples, I have trouble understanding which improvement you are suggesting: could you be a bit more specific?

In particular, in the first two cases, you provide a weight function which is not correct, so a TypeError is raised (if you provide a function, the algorithm raises an error if it is not correct). In the third case, your graph is not weighted:

```
sage: g = Graph([(0,1,1), (1,2,'b')])
sage: g.weighted()
False
```
Hence, the algorithm simply says "Since the graph is not weighted, I ignore the label and set weight 1 to each edge".

Maybe a problem occurs if the graph is weighted and no function is provided: in this case, the algorithm tries to use labels even if they are not numbers. In Boost algorithms, non-numeric weights are assumed to be 1, while in other algorithms labels are simply compared, and Python decides which is the biggest.

```
sage: g = Graph([(0,1,1), (1,2,'b')], weighted=True)
sage: g.min_spanning_tree(algorithm="Prim_Boost")
[(0, 1, 1), (1, 2, 'b')]
sage: g.min_spanning_tree(algorithm="Prim_fringe")
[(0, 1, 1), (1, 2, 'b')]
sage: g.min_spanning_tree(algorithm="Prim_edge")
[(0, 1, 1), (1, 2, 'b')]
sage: g.min_spanning_tree(algorithm="Kruskal")
[(0, 1, 1), (1, 2, 'b')]
sage: g.min_spanning_tree(algorithm="Kruskal_Boost")
[(0, 1, 1), (1, 2, 'b')]
sage: g.min_spanning_tree(algorithm="NetworkX")
[(0, 1, 1), (1, 2, 'b')]
```
In the latter example, do you think I should only improve the explanation, which is in the INPUT section of the documentation and in the examples? Or do you think I should raise an exception if a weight is not a number?

Thank you very much!

Michele



---

archive/issue_comments_270711.json:
```json
{
    "body": "<a id='comment:10'></a>I think it's a weird behavior to assume that an edge like `(1, 2, 'b')` has weight 1. However, it was the original behavior of the method, so I propose to keep it unchanged.\nSo don't raise exception, but if you can improve further the doc, it should be ok.\nThanks.",
    "created_at": "2015-07-21T17:07:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18910#issuecomment-270711",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:10'></a>I think it's a weird behavior to assume that an edge like `(1, 2, 'b')` has weight 1. However, it was the original behavior of the method, so I propose to keep it unchanged.
So don't raise exception, but if you can improve further the doc, it should be ok.
Thanks.



---

archive/issue_comments_270712.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-22T11:05:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18910#issuecomment-270712",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_270713.json:
```json
{
    "body": "<a id='comment:12'></a>Hello!\n\nI have changed the behavior: now, if edge weights are not convertible to floats through `float()` function, an error is raised. I have tried to clarify this behavior as much as possible in the documentation.\n\nThank you very much!\n\nMichele",
    "created_at": "2015-07-22T11:07:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18910#issuecomment-270713",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

<a id='comment:12'></a>Hello!

I have changed the behavior: now, if edge weights are not convertible to floats through `float()` function, an error is raised. I have tried to clarify this behavior as much as possible in the documentation.

Thank you very much!

Michele



---

archive/issue_comments_270714.json:
```json
{
    "body": "<a id='comment:13'></a>The documentation builds properly and is now good.\n\nI tracked all calls to `min_spanning_tree` to launch tests. All tests pass in graphs and homology.\nHowever, one test is broken in `src/sage/matroids/utilities.py`, method `lift_cross_ratios`. I suspect that this is due to the change in the output ordering of edges.\nI don't know what to do here. I have forced you to sort edges because all methods where not returning edges in the same order, and I think it is better now (the output is independent on the algorithm). \n\nThe set T constructed in this method is, before applying this patch:\n\n```\nset([((0, 0), (0, 1), (0, 0)), ((0, 0), (2, 1), (0, 2)), ((0, 1), (1, 0), (1, 0)), ((1, 0), (1, 1), (1, 1)), ((1, 1), (2, 0), (2, 1)), ((0, 0), (3, 1), (0, 3)), ((0, 0), (4, 1), (0, 4))])\n```\nand with this patch:\n\n```\nset([((0, 0), (0, 1), (0, 0)), ((0, 0), (2, 1), (0, 2)), ((0, 1), (1, 0), (1, 0)), ((1, 0), (1, 1), (1, 1)), ((2, 0), (2, 1), (2, 2)), ((0, 0), (3, 1), (0, 3)), ((0, 0), (4, 1), (0, 4))])\n```\nSo only one entry differs: `((1, 1), (2, 0), (2, 1))` becomes `((2, 0), (2, 1), (2, 2))`.\n\nI don't know if we can safely update the expected output of this test or not. Nathann?",
    "created_at": "2015-07-22T13:05:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18910#issuecomment-270714",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:13'></a>The documentation builds properly and is now good.

I tracked all calls to `min_spanning_tree` to launch tests. All tests pass in graphs and homology.
However, one test is broken in `src/sage/matroids/utilities.py`, method `lift_cross_ratios`. I suspect that this is due to the change in the output ordering of edges.
I don't know what to do here. I have forced you to sort edges because all methods where not returning edges in the same order, and I think it is better now (the output is independent on the algorithm). 

The set T constructed in this method is, before applying this patch:

```
set([((0, 0), (0, 1), (0, 0)), ((0, 0), (2, 1), (0, 2)), ((0, 1), (1, 0), (1, 0)), ((1, 0), (1, 1), (1, 1)), ((1, 1), (2, 0), (2, 1)), ((0, 0), (3, 1), (0, 3)), ((0, 0), (4, 1), (0, 4))])
```
and with this patch:

```
set([((0, 0), (0, 1), (0, 0)), ((0, 0), (2, 1), (0, 2)), ((0, 1), (1, 0), (1, 0)), ((1, 0), (1, 1), (1, 1)), ((2, 0), (2, 1), (2, 2)), ((0, 0), (3, 1), (0, 3)), ((0, 0), (4, 1), (0, 4))])
```
So only one entry differs: `((1, 1), (2, 0), (2, 1))` becomes `((2, 0), (2, 1), (2, 2))`.

I don't know if we can safely update the expected output of this test or not. Nathann?



---

archive/issue_comments_270715.json:
```json
{
    "body": "<a id='comment:14'></a>Hello,\n\n> I don't know if we can safely update the expected output of this test or not. Nathann?\n\n\nNot sure. Possible, but not sure. The best is to ask the matroid guys. Stefan, Rudi? Does it look okay to you if by changing the behaviour of a graph spanning tree routine, the output of \n\n```\nsage: Z = lift_cross_ratios(A, to_sixth_root_of_unity)\n```\n\nat line 416 of matroids/utilities.py changes like that?\n\n```\nFailed example:\n    Z\nExpected:\n    [ 1  0  1  1  1]\n    [ 1  1  0  0  z]\n    [ 0  1 -z -1  0]\nGot:\n    [     1      0      1      1      1]\n    [     1      1      0      0      z]\n    [     0  z - 1      1 -z + 1      0]\n```\n\nIt may be caused by a different spanning tree, or by a reordering of its edges.\n\nNathann",
    "created_at": "2015-07-22T14:28:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18910#issuecomment-270715",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:14'></a>Hello,

> I don't know if we can safely update the expected output of this test or not. Nathann?


Not sure. Possible, but not sure. The best is to ask the matroid guys. Stefan, Rudi? Does it look okay to you if by changing the behaviour of a graph spanning tree routine, the output of 

```
sage: Z = lift_cross_ratios(A, to_sixth_root_of_unity)
```

at line 416 of matroids/utilities.py changes like that?

```
Failed example:
    Z
Expected:
    [ 1  0  1  1  1]
    [ 1  1  0  0  z]
    [ 0  1 -z -1  0]
Got:
    [     1      0      1      1      1]
    [     1      1      0      0      z]
    [     0  z - 1      1 -z + 1      0]
```

It may be caused by a different spanning tree, or by a reordering of its edges.

Nathann



---

archive/issue_comments_270716.json:
```json
{
    "body": "<a id='comment:15'></a>Replying to [comment:14 ncohen]:\n> Stefan, Rudi? Does it look okay to you if by changing the behaviour of a graph spanning tree routine, the output of \n> \n> ```\n> sage: Z = lift_cross_ratios(A, to_sixth_root_of_unity)\n> ```\n> \n> at line 416 of matroids/utilities.py changes like that?\n> \n> ```\n> Failed example:\n>     Z\n> Expected:\n>     [ 1  0  1  1  1]\n>     [ 1  1  0  0  z]\n>     [ 0  1 -z -1  0]\n> Got:\n>     [     1      0      1      1      1]\n>     [     1      1      0      0      z]\n>     [     0  z - 1      1 -z + 1      0]\n> ```\n> \n> It may be caused by a different spanning tree, or by a reordering of its edges.\n\n\nYes, that looks OK. This output matrix Z is fixed up to scaling of rows and columns, and the tree is used to determine the scaling. Looks like in this example the bottom row is scaled by  z-1 (which happens to equal -z<sup>-1</sup> in that ring, z is is a sixth root of unity). \n\nSo it's safe to just update the output of the test.",
    "created_at": "2015-07-22T14:42:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18910#issuecomment-270716",
    "user": "https://trac.sagemath.org/admin/accounts/users/Rudi"
}
```

<a id='comment:15'></a>Replying to [comment:14 ncohen]:
> Stefan, Rudi? Does it look okay to you if by changing the behaviour of a graph spanning tree routine, the output of 
> 
> ```
> sage: Z = lift_cross_ratios(A, to_sixth_root_of_unity)
> ```
> 
> at line 416 of matroids/utilities.py changes like that?
> 
> ```
> Failed example:
>     Z
> Expected:
>     [ 1  0  1  1  1]
>     [ 1  1  0  0  z]
>     [ 0  1 -z -1  0]
> Got:
>     [     1      0      1      1      1]
>     [     1      1      0      0      z]
>     [     0  z - 1      1 -z + 1      0]
> ```
> 
> It may be caused by a different spanning tree, or by a reordering of its edges.


Yes, that looks OK. This output matrix Z is fixed up to scaling of rows and columns, and the tree is used to determine the scaling. Looks like in this example the bottom row is scaled by  z-1 (which happens to equal -z<sup>-1</sup> in that ring, z is is a sixth root of unity). 

So it's safe to just update the output of the test.



---

archive/issue_comments_270717.json:
```json
{
    "body": "<a id='comment:16'></a>> Yes, that looks OK.\n\n\nGreat. Thanks for your answer `:-)`\n\nNathann",
    "created_at": "2015-07-22T15:11:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18910#issuecomment-270717",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:16'></a>> Yes, that looks OK.


Great. Thanks for your answer `:-)`

Nathann



---

archive/issue_comments_270718.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-22T15:24:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18910#issuecomment-270718",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_270719.json:
```json
{
    "body": "<a id='comment:18'></a>Done! Thank you very much, Rudi!",
    "created_at": "2015-07-22T15:25:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18910#issuecomment-270719",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

<a id='comment:18'></a>Done! Thank you very much, Rudi!



---

archive/issue_comments_270720.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-07-22T15:51:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18910#issuecomment-270720",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_270721.json:
```json
{
    "body": "<a id='comment:19'></a>Good!",
    "created_at": "2015-07-22T15:51:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18910#issuecomment-270721",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:19'></a>Good!



---

archive/issue_comments_270722.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2015-07-30T10:39:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18910#issuecomment-270722",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_270723.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2015-07-30T10:39:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18910#issuecomment-270723",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_270724.json:
```json
{
    "body": "<a id='comment:21'></a>I have merged this ticket with the latest version of #18876 to avoid conflicts.",
    "created_at": "2015-07-30T10:39:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18910#issuecomment-270724",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

<a id='comment:21'></a>I have merged this ticket with the latest version of #18876 to avoid conflicts.



---

archive/issue_comments_270725.json:
```json
{
    "body": "<a id='comment:22'></a>When I click on the link to the code (to of the page, branch `u/borassi/boost_minimum_spanning_tree`), for file `bandwidth.pyx` I see the following line which has been changed in #18876. \n\n```\n+    :meth:`bandwidth_heuristics()<sage.graphs.base.boost_graph.bandwidth_heuristics>` | Uses Boost heuristics to approximate the bandwidth of the input graph\n```\nIs it normal??",
    "created_at": "2015-07-30T11:30:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18910#issuecomment-270725",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:22'></a>When I click on the link to the code (to of the page, branch `u/borassi/boost_minimum_spanning_tree`), for file `bandwidth.pyx` I see the following line which has been changed in #18876. 

```
+    :meth:`bandwidth_heuristics()<sage.graphs.base.boost_graph.bandwidth_heuristics>` | Uses Boost heuristics to approximate the bandwidth of the input graph
```
Is it normal??



---

archive/issue_comments_270726.json:
```json
{
    "body": "<a id='comment:23'></a>Yes, it is normal, I think: I modified that line only after I merged #18876. However, I do not think it is a problem, because the new commit in #18876 should not create conflicts (I have tested the merge).\n\nIn any case, I re-merged them with this new commit.\n\nReplying to [comment:22 dcoudert]:\n\n\n> When I click on the link to the code (to of the page, branch `u/borassi/boost_minimum_spanning_tree`), for file `bandwidth.pyx` I see the following line which has been changed in #18876. \n> \n> ```\n> +    :meth:`bandwidth_heuristics()<sage.graphs.base.boost_graph.bandwidth_heuristics>` | Uses Boost heuristics to approximate the bandwidth of the input graph\n> ```\n> Is it normal??",
    "created_at": "2015-07-30T12:47:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18910#issuecomment-270726",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

<a id='comment:23'></a>Yes, it is normal, I think: I modified that line only after I merged #18876. However, I do not think it is a problem, because the new commit in #18876 should not create conflicts (I have tested the merge).

In any case, I re-merged them with this new commit.

Replying to [comment:22 dcoudert]:


> When I click on the link to the code (to of the page, branch `u/borassi/boost_minimum_spanning_tree`), for file `bandwidth.pyx` I see the following line which has been changed in #18876. 
> 
> ```
> +    :meth:`bandwidth_heuristics()<sage.graphs.base.boost_graph.bandwidth_heuristics>` | Uses Boost heuristics to approximate the bandwidth of the input graph
> ```
> Is it normal??



---

archive/issue_comments_270727.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-30T12:48:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18910#issuecomment-270727",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_270728.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-07-30T16:24:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18910#issuecomment-270728",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_270729.json:
```json
{
    "body": "<a id='comment:25'></a>for me the patch is good to go !",
    "created_at": "2015-07-30T16:24:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18910#issuecomment-270729",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:25'></a>for me the patch is good to go !



---

archive/issue_events_052776.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-07-31T17:52:20Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18910",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18910#event-52776"
}
```



---

archive/issue_comments_270730.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-07-31T17:52:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18910#issuecomment-270730",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
