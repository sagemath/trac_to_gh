# Issue 18333: Cleanup and speedup in QQbar

archive/issues_018096.json:
```json
{
    "assignees": [],
    "body": "This is a task ticket for speed up and cleaning in `sage.rings.qqbar`\n\nPrerequisites on number fields/polynomials/interval arithmetic\n- #18332: implement `is_integer` and `is_rational` on number field elements\n- #18334: implement `unique_sign` and `unique_trunc` on interval field elements\n- #18337: implement `real` and `imag` on real intervals\n- #17830: consider the natural order induced from `RR` for number fields with real embedding\n- #19362, #28191: refine root\n- #18356: implement composed_op from [BFSS]\n- #19824: faster comparison for (real) embedded number fields\n- #24503: enhanced `LazyAlgebraic`\n\nTasks in `AA/QQbar`:\n- #18303: better comparisons\n- #17886, #18242: faster exactification operations using power series and resultants (see also #18356)\n- #15600: exactification is slow in `do_polred`\n- #16222, #18122, #31889: enhanced minpoly\n- #19954 and #19955: remove all descriptors except `ANRoot`, `ANExtension` and `ANRational`\n- #20074: simplify method dispatcher for binary operators\n- #12745: conversion issue `QQbar -> AA`\n- #18106: introduce a polynomial descriptor, make sum and product be n-ary instead of binary and get rid of recursive calls\n- #12715: number field embeddings should always have target in `AA` or `QQbar`\n- #19356: QQbar.polynomial_root(): allow approximate root\n- #21095: slowness in exactification\n- #21838: do not make appear the imaginary (or real) part in QQbar when it is known to be zero\n- #5574: Implement QQbar<sup>QQ</sup> as action\n- use firstly interval arithmetic for `sign`/`floor`/`ceil`/`trunc`/`round` instead of the `_floor_ceil` helper\n- remove the following methods from `ANDescr`:\n   - `rational_value`\n   - `is_field_element`\n   - `is_exact`\n- (?) enhanced `sage_input` for `ANExtension`\n- better powering (`__pow__`) using `ANExtension` and fix convention for powering in `AA` vs `QQbar`\n- reimplement `_real_refine_interval` without these ugly dictionaries (see also #17895)\n- use directly embedded number fields in `AlgebraicGenerator` as comparison there is faster (see #17830 and #19824). We might want that these embedded number field carries an interval of fixed precision with them  (let say `64`) to avoid reevaluation in most cases\n- #26944: improve hashing to avoid exact computations\n- more generally, track down code in qqbar.py that may lead to larger extensions than necessary if an exact computation is triggered (for example, see if the formulas in `ANUnaryExpr.exactify()` can be optimized).\n- #31767: more capable sign \n\nBugs\n\n- #20209: `QQbar -> RIF` conversion fails\n- #12745: Coercion problem with Algebraic Real Field\n- #20288: representation and mutability of the description\n\nCC:  @mezzarobba @gagern @cheuberg\n\nAuthor: **Vincent Delecroix**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/18333_\n\n",
    "created_at": "2015-04-29T12:09:02Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20number%20fields",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/wishlist%20item"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Cleanup and speedup in QQbar",
    "type": "issue",
    "updated_at": "2021-06-01T07:10:27Z",
    "url": "https://github.com/sagemath/sage/issues/18333",
    "user": "https://github.com/videlec"
}
```
This is a task ticket for speed up and cleaning in `sage.rings.qqbar`

Prerequisites on number fields/polynomials/interval arithmetic
- #18332: implement `is_integer` and `is_rational` on number field elements
- #18334: implement `unique_sign` and `unique_trunc` on interval field elements
- #18337: implement `real` and `imag` on real intervals
- #17830: consider the natural order induced from `RR` for number fields with real embedding
- #19362, #28191: refine root
- #18356: implement composed_op from [BFSS]
- #19824: faster comparison for (real) embedded number fields
- #24503: enhanced `LazyAlgebraic`

Tasks in `AA/QQbar`:
- #18303: better comparisons
- #17886, #18242: faster exactification operations using power series and resultants (see also #18356)
- #15600: exactification is slow in `do_polred`
- #16222, #18122, #31889: enhanced minpoly
- #19954 and #19955: remove all descriptors except `ANRoot`, `ANExtension` and `ANRational`
- #20074: simplify method dispatcher for binary operators
- #12745: conversion issue `QQbar -> AA`
- #18106: introduce a polynomial descriptor, make sum and product be n-ary instead of binary and get rid of recursive calls
- #12715: number field embeddings should always have target in `AA` or `QQbar`
- #19356: QQbar.polynomial_root(): allow approximate root
- #21095: slowness in exactification
- #21838: do not make appear the imaginary (or real) part in QQbar when it is known to be zero
- #5574: Implement QQbar<sup>QQ</sup> as action
- use firstly interval arithmetic for `sign`/`floor`/`ceil`/`trunc`/`round` instead of the `_floor_ceil` helper
- remove the following methods from `ANDescr`:
   - `rational_value`
   - `is_field_element`
   - `is_exact`
- (?) enhanced `sage_input` for `ANExtension`
- better powering (`__pow__`) using `ANExtension` and fix convention for powering in `AA` vs `QQbar`
- reimplement `_real_refine_interval` without these ugly dictionaries (see also #17895)
- use directly embedded number fields in `AlgebraicGenerator` as comparison there is faster (see #17830 and #19824). We might want that these embedded number field carries an interval of fixed precision with them  (let say `64`) to avoid reevaluation in most cases
- #26944: improve hashing to avoid exact computations
- more generally, track down code in qqbar.py that may lead to larger extensions than necessary if an exact computation is triggered (for example, see if the formulas in `ANUnaryExpr.exactify()` can be optimized).
- #31767: more capable sign 

Bugs

- #20209: `QQbar -> RIF` conversion fails
- #12745: Coercion problem with Algebraic Real Field
- #20288: representation and mutability of the description

CC:  @mezzarobba @gagern @cheuberg

Author: **Vincent Delecroix**

_Issue created by migration from https://trac.sagemath.org/ticket/18333_





---

archive/issue_events_242912.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-29T12:09:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18333",
    "milestone_number": null,
    "milestone_title": "sage-6.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18333#event-242912"
}
```



---

archive/issue_events_242913.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-29T12:09:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18333",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20number%20fields",
    "label_color": "0000ff",
    "label_name": "component: number fields",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18333#event-242913"
}
```



---

archive/issue_events_242914.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-29T12:09:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18333",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18333#event-242914"
}
```



---

archive/issue_comments_254541.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,9 @@\n-This is a task ticket for speed up cleaning in `sage.rings.qqbar`\n+This is a task ticket for speed up and cleaning in `sage.rings.qqbar`\n \n - #18332: implement `is_integer` and `is_rational` on number field elements\n - #18303: better comparisons\n-- implement `unique_sign` and `unique_trunc` on interval field elements and use it for faster `sign`/`floor`/`ceil`/`trunc`/`round` on algebraic elements\n+- #18334: implement `unique_sign` and `unique_trunc` on interval field elements\n+- use firstly interval arithmetic for `sign`/`floor`/`ceil`/`trunc`/`round`\n+- enhanced `sage_input` for `ANRoot`\n+- remove `ANRootOfUnity` as one of the descriptor\n+- better powering (`__pow__`) and fix convention for powering in `AA` vs `QQbar`\n``````\n",
    "created_at": "2015-04-29T13:04:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18333#issuecomment-254541",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,9 @@
-This is a task ticket for speed up cleaning in `sage.rings.qqbar`
+This is a task ticket for speed up and cleaning in `sage.rings.qqbar`
 
 - #18332: implement `is_integer` and `is_rational` on number field elements
 - #18303: better comparisons
-- implement `unique_sign` and `unique_trunc` on interval field elements and use it for faster `sign`/`floor`/`ceil`/`trunc`/`round` on algebraic elements
+- #18334: implement `unique_sign` and `unique_trunc` on interval field elements
+- use firstly interval arithmetic for `sign`/`floor`/`ceil`/`trunc`/`round`
+- enhanced `sage_input` for `ANRoot`
+- remove `ANRootOfUnity` as one of the descriptor
+- better powering (`__pow__`) and fix convention for powering in `AA` vs `QQbar`
``````




---

archive/issue_comments_254542.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,5 +5,10 @@\n - #18334: implement `unique_sign` and `unique_trunc` on interval field elements\n - use firstly interval arithmetic for `sign`/`floor`/`ceil`/`trunc`/`round`\n - enhanced `sage_input` for `ANRoot`\n+- remove the following methods from `ANDescr`:\n+   - `rational_value`\n+   - `is_field_element`\n+   - `is_exact`\n - remove `ANRootOfUnity` as one of the descriptor\n - better powering (`__pow__`) and fix convention for powering in `AA` vs `QQbar`\n+- reimplement `_real_refine_interval` without these ugly dictionaries\n``````\n",
    "created_at": "2015-04-29T16:50:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18333#issuecomment-254542",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,5 +5,10 @@
 - #18334: implement `unique_sign` and `unique_trunc` on interval field elements
 - use firstly interval arithmetic for `sign`/`floor`/`ceil`/`trunc`/`round`
 - enhanced `sage_input` for `ANRoot`
+- remove the following methods from `ANDescr`:
+   - `rational_value`
+   - `is_field_element`
+   - `is_exact`
 - remove `ANRootOfUnity` as one of the descriptor
 - better powering (`__pow__`) and fix convention for powering in `AA` vs `QQbar`
+- reimplement `_real_refine_interval` without these ugly dictionaries
``````




---

archive/issue_comments_254543.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,11 +4,11 @@\n - #18303: better comparisons\n - #18334: implement `unique_sign` and `unique_trunc` on interval field elements\n - use firstly interval arithmetic for `sign`/`floor`/`ceil`/`trunc`/`round`\n-- enhanced `sage_input` for `ANRoot`\n - remove the following methods from `ANDescr`:\n    - `rational_value`\n    - `is_field_element`\n    - `is_exact`\n-- remove `ANRootOfUnity` as one of the descriptor\n-- better powering (`__pow__`) and fix convention for powering in `AA` vs `QQbar`\n+- fusion `ANRoot` and `ANRootOfUnity` within `ANExtension`\n+- enhanced `sage_input` for `ANExtension`\n+- better powering (`__pow__`) using `ANExtension` and fix convention for powering in `AA` vs `QQbar`\n - reimplement `_real_refine_interval` without these ugly dictionaries\n``````\n",
    "created_at": "2015-04-29T17:03:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18333#issuecomment-254543",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,11 +4,11 @@
 - #18303: better comparisons
 - #18334: implement `unique_sign` and `unique_trunc` on interval field elements
 - use firstly interval arithmetic for `sign`/`floor`/`ceil`/`trunc`/`round`
-- enhanced `sage_input` for `ANRoot`
 - remove the following methods from `ANDescr`:
    - `rational_value`
    - `is_field_element`
    - `is_exact`
-- remove `ANRootOfUnity` as one of the descriptor
-- better powering (`__pow__`) and fix convention for powering in `AA` vs `QQbar`
+- fusion `ANRoot` and `ANRootOfUnity` within `ANExtension`
+- enhanced `sage_input` for `ANExtension`
+- better powering (`__pow__`) using `ANExtension` and fix convention for powering in `AA` vs `QQbar`
 - reimplement `_real_refine_interval` without these ugly dictionaries
``````




---

archive/issue_comments_254544.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,14 @@\n This is a task ticket for speed up and cleaning in `sage.rings.qqbar`\n \n+Prerequisites on number fields/interval arithmetic\n - #18332: implement `is_integer` and `is_rational` on number field elements\n+- #18334: implement `unique_sign` and `unique_trunc` on interval field elements\n+- #18337: implement `real` and `imag` on real intervals\n+\n+Actual tasks:\n - #18303: better comparisons\n-- #18334: implement `unique_sign` and `unique_trunc` on interval field elements\n+- #17886 and #18242: faster qqbar operations using resultants\n+- #15600: exactification is slow in `do_polred`\n - use firstly interval arithmetic for `sign`/`floor`/`ceil`/`trunc`/`round`\n - remove the following methods from `ANDescr`:\n    - `rational_value`\n@@ -11,4 +17,5 @@\n - fusion `ANRoot` and `ANRootOfUnity` within `ANExtension`\n - enhanced `sage_input` for `ANExtension`\n - better powering (`__pow__`) using `ANExtension` and fix convention for powering in `AA` vs `QQbar`\n-- reimplement `_real_refine_interval` without these ugly dictionaries\n+- reimplement `_real_refine_interval` without these ugly dictionaries (see also #17895)\n+- make number field elements compare themselves and use that\n``````\n",
    "created_at": "2015-04-29T17:26:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18333#issuecomment-254544",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,14 @@
 This is a task ticket for speed up and cleaning in `sage.rings.qqbar`
 
+Prerequisites on number fields/interval arithmetic
 - #18332: implement `is_integer` and `is_rational` on number field elements
+- #18334: implement `unique_sign` and `unique_trunc` on interval field elements
+- #18337: implement `real` and `imag` on real intervals
+
+Actual tasks:
 - #18303: better comparisons
-- #18334: implement `unique_sign` and `unique_trunc` on interval field elements
+- #17886 and #18242: faster qqbar operations using resultants
+- #15600: exactification is slow in `do_polred`
 - use firstly interval arithmetic for `sign`/`floor`/`ceil`/`trunc`/`round`
 - remove the following methods from `ANDescr`:
    - `rational_value`
@@ -11,4 +17,5 @@
 - fusion `ANRoot` and `ANRootOfUnity` within `ANExtension`
 - enhanced `sage_input` for `ANExtension`
 - better powering (`__pow__`) using `ANExtension` and fix convention for powering in `AA` vs `QQbar`
-- reimplement `_real_refine_interval` without these ugly dictionaries
+- reimplement `_real_refine_interval` without these ugly dictionaries (see also #17895)
+- make number field elements compare themselves and use that
``````




---

archive/issue_comments_254545.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,6 +9,7 @@\n - #18303: better comparisons\n - #17886 and #18242: faster qqbar operations using resultants\n - #15600: exactification is slow in `do_polred`\n+- #16222, #18122: enhanced minpoly\n - use firstly interval arithmetic for `sign`/`floor`/`ceil`/`trunc`/`round`\n - remove the following methods from `ANDescr`:\n    - `rational_value`\n``````\n",
    "created_at": "2015-04-29T17:45:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18333#issuecomment-254545",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,6 +9,7 @@
 - #18303: better comparisons
 - #17886 and #18242: faster qqbar operations using resultants
 - #15600: exactification is slow in `do_polred`
+- #16222, #18122: enhanced minpoly
 - use firstly interval arithmetic for `sign`/`floor`/`ceil`/`trunc`/`round`
 - remove the following methods from `ANDescr`:
    - `rational_value`
``````




---

archive/issue_comments_254546.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,19 +4,21 @@\n - #18332: implement `is_integer` and `is_rational` on number field elements\n - #18334: implement `unique_sign` and `unique_trunc` on interval field elements\n - #18337: implement `real` and `imag` on real intervals\n+- #17830: consider the natural order induced from `RR` for number fields with real embedding\n \n-Actual tasks:\n+Tasks in `AA/QQbar`:\n - #18303: better comparisons\n - #17886 and #18242: faster qqbar operations using resultants\n - #15600: exactification is slow in `do_polred`\n - #16222, #18122: enhanced minpoly\n-- use firstly interval arithmetic for `sign`/`floor`/`ceil`/`trunc`/`round`\n+- use firstly interval arithmetic for `sign`/`floor`/`ceil`/`trunc`/`round` instead of the `_floor_ceil` helper\n - remove the following methods from `ANDescr`:\n    - `rational_value`\n    - `is_field_element`\n    - `is_exact`\n - fusion `ANRoot` and `ANRootOfUnity` within `ANExtension`\n+- remove redundancy between the unary operators `norm`, `abs`, `real`, `imag` and `conjugate`\n - enhanced `sage_input` for `ANExtension`\n - better powering (`__pow__`) using `ANExtension` and fix convention for powering in `AA` vs `QQbar`\n - reimplement `_real_refine_interval` without these ugly dictionaries (see also #17895)\n-- make number field elements compare themselves and use that\n+- use directly embedded number fields in `AlgebraicGenerator`\n``````\n",
    "created_at": "2015-04-29T21:40:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18333#issuecomment-254546",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,19 +4,21 @@
 - #18332: implement `is_integer` and `is_rational` on number field elements
 - #18334: implement `unique_sign` and `unique_trunc` on interval field elements
 - #18337: implement `real` and `imag` on real intervals
+- #17830: consider the natural order induced from `RR` for number fields with real embedding
 
-Actual tasks:
+Tasks in `AA/QQbar`:
 - #18303: better comparisons
 - #17886 and #18242: faster qqbar operations using resultants
 - #15600: exactification is slow in `do_polred`
 - #16222, #18122: enhanced minpoly
-- use firstly interval arithmetic for `sign`/`floor`/`ceil`/`trunc`/`round`
+- use firstly interval arithmetic for `sign`/`floor`/`ceil`/`trunc`/`round` instead of the `_floor_ceil` helper
 - remove the following methods from `ANDescr`:
    - `rational_value`
    - `is_field_element`
    - `is_exact`
 - fusion `ANRoot` and `ANRootOfUnity` within `ANExtension`
+- remove redundancy between the unary operators `norm`, `abs`, `real`, `imag` and `conjugate`
 - enhanced `sage_input` for `ANExtension`
 - better powering (`__pow__`) using `ANExtension` and fix convention for powering in `AA` vs `QQbar`
 - reimplement `_real_refine_interval` without these ugly dictionaries (see also #17895)
-- make number field elements compare themselves and use that
+- use directly embedded number fields in `AlgebraicGenerator`
``````




---

archive/issue_comments_254547.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,6 +11,7 @@\n - #17886 and #18242: faster qqbar operations using resultants\n - #15600: exactification is slow in `do_polred`\n - #16222, #18122: enhanced minpoly\n+- #12745: conversion issue `QQbar -> AA`\n - use firstly interval arithmetic for `sign`/`floor`/`ceil`/`trunc`/`round` instead of the `_floor_ceil` helper\n - remove the following methods from `ANDescr`:\n    - `rational_value`\n``````\n",
    "created_at": "2015-05-03T10:10:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18333#issuecomment-254547",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,6 +11,7 @@
 - #17886 and #18242: faster qqbar operations using resultants
 - #15600: exactification is slow in `do_polred`
 - #16222, #18122: enhanced minpoly
+- #12745: conversion issue `QQbar -> AA`
 - use firstly interval arithmetic for `sign`/`floor`/`ceil`/`trunc`/`round` instead of the `_floor_ceil` helper
 - remove the following methods from `ANDescr`:
    - `rational_value`
``````




---

archive/issue_comments_254548.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,6 +12,7 @@\n - #15600: exactification is slow in `do_polred`\n - #16222, #18122: enhanced minpoly\n - #12745: conversion issue `QQbar -> AA`\n+- #18106: introduce a polynomial descriptor, make sum and product be n-ary instead of binary and get rid of recursive calls\n - use firstly interval arithmetic for `sign`/`floor`/`ceil`/`trunc`/`round` instead of the `_floor_ceil` helper\n - remove the following methods from `ANDescr`:\n    - `rational_value`\n``````\n",
    "created_at": "2015-05-16T10:14:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18333#issuecomment-254548",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,6 +12,7 @@
 - #15600: exactification is slow in `do_polred`
 - #16222, #18122: enhanced minpoly
 - #12745: conversion issue `QQbar -> AA`
+- #18106: introduce a polynomial descriptor, make sum and product be n-ary instead of binary and get rid of recursive calls
 - use firstly interval arithmetic for `sign`/`floor`/`ceil`/`trunc`/`round` instead of the `_floor_ceil` helper
 - remove the following methods from `ANDescr`:
    - `rational_value`
``````




---

archive/issue_comments_254549.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,7 +8,7 @@\n \n Tasks in `AA/QQbar`:\n - #18303: better comparisons\n-- #17886 and #18242: faster qqbar operations using resultants\n+- #17886, #18356, #18242: faster qqbar operations using resultants\n - #15600: exactification is slow in `do_polred`\n - #16222, #18122: enhanced minpoly\n - #12745: conversion issue `QQbar -> AA`\n``````\n",
    "created_at": "2015-08-09T17:35:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18333#issuecomment-254549",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,7 +8,7 @@
 
 Tasks in `AA/QQbar`:
 - #18303: better comparisons
-- #17886 and #18242: faster qqbar operations using resultants
+- #17886, #18356, #18242: faster qqbar operations using resultants
 - #15600: exactification is slow in `do_polred`
 - #16222, #18122: enhanced minpoly
 - #12745: conversion issue `QQbar -> AA`
``````




---

archive/issue_comments_254550.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nabout slowness of QQbar, see #19910.",
    "created_at": "2016-01-18T17:02:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18333#issuecomment-254550",
    "user": "https://github.com/zimmermann6"
}
```

<a id='comment:11'>Comment 11:</a>
about slowness of QQbar, see #19910.



---

archive/issue_comments_254551.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,14 +1,16 @@\n This is a task ticket for speed up and cleaning in `sage.rings.qqbar`\n \n-Prerequisites on number fields/interval arithmetic\n+Prerequisites on number fields/polynomials/interval arithmetic\n - #18332: implement `is_integer` and `is_rational` on number field elements\n - #18334: implement `unique_sign` and `unique_trunc` on interval field elements\n - #18337: implement `real` and `imag` on real intervals\n - #17830: consider the natural order induced from `RR` for number fields with real embedding\n+- #19362: refine root\n+- #18356: implement composed_op from [BFSS]\n \n Tasks in `AA/QQbar`:\n - #18303: better comparisons\n-- #17886, #18356, #18242: faster qqbar operations using resultants\n+- #17886, #18242: faster exactification operations using power series and resultants (see also #18356)\n - #15600: exactification is slow in `do_polred`\n - #16222, #18122: enhanced minpoly\n - #12745: conversion issue `QQbar -> AA`\n@@ -23,4 +25,4 @@\n - enhanced `sage_input` for `ANExtension`\n - better powering (`__pow__`) using `ANExtension` and fix convention for powering in `AA` vs `QQbar`\n - reimplement `_real_refine_interval` without these ugly dictionaries (see also #17895)\n-- use directly embedded number fields in `AlgebraicGenerator`\n+- use directly embedded number fields in `AlgebraicGenerator` as comparison there is faster (see #17830 and #19824). We might want that these embedded number field carries an interval of fixed precision with them  (let say `64`) to avoid reevaluation in most cases.\n``````\n",
    "created_at": "2016-01-18T19:32:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18333#issuecomment-254551",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,14 +1,16 @@
 This is a task ticket for speed up and cleaning in `sage.rings.qqbar`
 
-Prerequisites on number fields/interval arithmetic
+Prerequisites on number fields/polynomials/interval arithmetic
 - #18332: implement `is_integer` and `is_rational` on number field elements
 - #18334: implement `unique_sign` and `unique_trunc` on interval field elements
 - #18337: implement `real` and `imag` on real intervals
 - #17830: consider the natural order induced from `RR` for number fields with real embedding
+- #19362: refine root
+- #18356: implement composed_op from [BFSS]
 
 Tasks in `AA/QQbar`:
 - #18303: better comparisons
-- #17886, #18356, #18242: faster qqbar operations using resultants
+- #17886, #18242: faster exactification operations using power series and resultants (see also #18356)
 - #15600: exactification is slow in `do_polred`
 - #16222, #18122: enhanced minpoly
 - #12745: conversion issue `QQbar -> AA`
@@ -23,4 +25,4 @@
 - enhanced `sage_input` for `ANExtension`
 - better powering (`__pow__`) using `ANExtension` and fix convention for powering in `AA` vs `QQbar`
 - reimplement `_real_refine_interval` without these ugly dictionaries (see also #17895)
-- use directly embedded number fields in `AlgebraicGenerator`
+- use directly embedded number fields in `AlgebraicGenerator` as comparison there is faster (see #17830 and #19824). We might want that these embedded number field carries an interval of fixed precision with them  (let say `64`) to avoid reevaluation in most cases.
``````




---

archive/issue_events_242915.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-01-18T19:32:14Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/18333",
    "milestone_number": null,
    "milestone_title": "sage-6.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18333#event-242915"
}
```



---

archive/issue_events_242916.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-01-18T19:32:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18333",
    "label": "https://github.com/sagemath/sage/labels/wishlist%20item",
    "label_color": "e81ff9",
    "label_name": "wishlist item",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18333#event-242916"
}
```



---

archive/issue_comments_254552.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,6 +7,7 @@\n - #17830: consider the natural order induced from `RR` for number fields with real embedding\n - #19362: refine root\n - #18356: implement composed_op from [BFSS]\n+- #19824: faster comparison for (real) embedded number fields\n \n Tasks in `AA/QQbar`:\n - #18303: better comparisons\n``````\n",
    "created_at": "2016-01-18T19:37:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18333#issuecomment-254552",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,6 +7,7 @@
 - #17830: consider the natural order induced from `RR` for number fields with real embedding
 - #19362: refine root
 - #18356: implement composed_op from [BFSS]
+- #19824: faster comparison for (real) embedded number fields
 
 Tasks in `AA/QQbar`:
 - #18303: better comparisons
``````




---

archive/issue_comments_254553.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -14,6 +14,7 @@\n - #17886, #18242: faster exactification operations using power series and resultants (see also #18356)\n - #15600: exactification is slow in `do_polred`\n - #16222, #18122: enhanced minpoly\n+- #19954 and #19955: remove all descriptors except `ANRoot`, `ANExtension` and `ANRational`\n - #12745: conversion issue `QQbar -> AA`\n - #18106: introduce a polynomial descriptor, make sum and product be n-ary instead of binary and get rid of recursive calls\n - use firstly interval arithmetic for `sign`/`floor`/`ceil`/`trunc`/`round` instead of the `_floor_ceil` helper\n@@ -21,9 +22,7 @@\n    - `rational_value`\n    - `is_field_element`\n    - `is_exact`\n-- fusion `ANRoot` and `ANRootOfUnity` within `ANExtension`\n-- remove redundancy between the unary operators `norm`, `abs`, `real`, `imag` and `conjugate`\n-- enhanced `sage_input` for `ANExtension`\n+- (?) enhanced `sage_input` for `ANExtension`\n - better powering (`__pow__`) using `ANExtension` and fix convention for powering in `AA` vs `QQbar`\n - reimplement `_real_refine_interval` without these ugly dictionaries (see also #17895)\n - use directly embedded number fields in `AlgebraicGenerator` as comparison there is faster (see #17830 and #19824). We might want that these embedded number field carries an interval of fixed precision with them  (let say `64`) to avoid reevaluation in most cases.\n``````\n",
    "created_at": "2016-01-24T20:16:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18333#issuecomment-254553",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -14,6 +14,7 @@
 - #17886, #18242: faster exactification operations using power series and resultants (see also #18356)
 - #15600: exactification is slow in `do_polred`
 - #16222, #18122: enhanced minpoly
+- #19954 and #19955: remove all descriptors except `ANRoot`, `ANExtension` and `ANRational`
 - #12745: conversion issue `QQbar -> AA`
 - #18106: introduce a polynomial descriptor, make sum and product be n-ary instead of binary and get rid of recursive calls
 - use firstly interval arithmetic for `sign`/`floor`/`ceil`/`trunc`/`round` instead of the `_floor_ceil` helper
@@ -21,9 +22,7 @@
    - `rational_value`
    - `is_field_element`
    - `is_exact`
-- fusion `ANRoot` and `ANRootOfUnity` within `ANExtension`
-- remove redundancy between the unary operators `norm`, `abs`, `real`, `imag` and `conjugate`
-- enhanced `sage_input` for `ANExtension`
+- (?) enhanced `sage_input` for `ANExtension`
 - better powering (`__pow__`) using `ANExtension` and fix convention for powering in `AA` vs `QQbar`
 - reimplement `_real_refine_interval` without these ugly dictionaries (see also #17895)
 - use directly embedded number fields in `AlgebraicGenerator` as comparison there is faster (see #17830 and #19824). We might want that these embedded number field carries an interval of fixed precision with them  (let say `64`) to avoid reevaluation in most cases.
``````




---

archive/issue_comments_254554.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -15,6 +15,7 @@\n - #15600: exactification is slow in `do_polred`\n - #16222, #18122: enhanced minpoly\n - #19954 and #19955: remove all descriptors except `ANRoot`, `ANExtension` and `ANRational`\n+- #20074: simplify method dispatcher for binary operators\n - #12745: conversion issue `QQbar -> AA`\n - #18106: introduce a polynomial descriptor, make sum and product be n-ary instead of binary and get rid of recursive calls\n - use firstly interval arithmetic for `sign`/`floor`/`ceil`/`trunc`/`round` instead of the `_floor_ceil` helper\n``````\n",
    "created_at": "2016-02-17T03:00:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18333#issuecomment-254554",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -15,6 +15,7 @@
 - #15600: exactification is slow in `do_polred`
 - #16222, #18122: enhanced minpoly
 - #19954 and #19955: remove all descriptors except `ANRoot`, `ANExtension` and `ANRational`
+- #20074: simplify method dispatcher for binary operators
 - #12745: conversion issue `QQbar -> AA`
 - #18106: introduce a polynomial descriptor, make sum and product be n-ary instead of binary and get rid of recursive calls
 - use firstly interval arithmetic for `sign`/`floor`/`ceil`/`trunc`/`round` instead of the `_floor_ceil` helper
``````




---

archive/issue_comments_254555.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nThere's an issue on QQBar element powering reported in [#18836 comment 9](https://github.com/sagemath/sage/issues/18836#comment:9) that may have interaction with what you're doing here (perhaps you're solving the issue?). Perhaps it's worthwhile including that problem in this QQbar cleanup operation somewhere.",
    "created_at": "2016-02-17T07:35:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18333#issuecomment-254555",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:16'>Comment 16:</a>
There's an issue on QQBar element powering reported in [#18836 comment 9](https://github.com/sagemath/sage/issues/18836#comment:9) that may have interaction with what you're doing here (perhaps you're solving the issue?). Perhaps it's worthwhile including that problem in this QQbar cleanup operation somewhere.



---

archive/issue_comments_254556.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -27,3 +27,7 @@\n - better powering (`__pow__`) using `ANExtension` and fix convention for powering in `AA` vs `QQbar`\n - reimplement `_real_refine_interval` without these ugly dictionaries (see also #17895)\n - use directly embedded number fields in `AlgebraicGenerator` as comparison there is faster (see #17830 and #19824). We might want that these embedded number field carries an interval of fixed precision with them  (let say `64`) to avoid reevaluation in most cases.\n+\n+Bugs\n+\n+- #20209: `QQbar -> RIF` conversion fails\n``````\n",
    "created_at": "2016-03-14T20:31:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18333#issuecomment-254556",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -27,3 +27,7 @@
 - better powering (`__pow__`) using `ANExtension` and fix convention for powering in `AA` vs `QQbar`
 - reimplement `_real_refine_interval` without these ugly dictionaries (see also #17895)
 - use directly embedded number fields in `AlgebraicGenerator` as comparison there is faster (see #17830 and #19824). We might want that these embedded number field carries an interval of fixed precision with them  (let say `64`) to avoid reevaluation in most cases.
+
+Bugs
+
+- #20209: `QQbar -> RIF` conversion fails
``````




---

archive/issue_comments_254557.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -18,6 +18,8 @@\n - #20074: simplify method dispatcher for binary operators\n - #12745: conversion issue `QQbar -> AA`\n - #18106: introduce a polynomial descriptor, make sum and product be n-ary instead of binary and get rid of recursive calls\n+- #12715: number field embeddings should always have target in `AA` or `QQbar`\n+- #19356: QQbar.polynomial_root(): allow approximate root\n - use firstly interval arithmetic for `sign`/`floor`/`ceil`/`trunc`/`round` instead of the `_floor_ceil` helper\n - remove the following methods from `ANDescr`:\n    - `rational_value`\n``````\n",
    "created_at": "2016-03-29T15:33:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18333#issuecomment-254557",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -18,6 +18,8 @@
 - #20074: simplify method dispatcher for binary operators
 - #12745: conversion issue `QQbar -> AA`
 - #18106: introduce a polynomial descriptor, make sum and product be n-ary instead of binary and get rid of recursive calls
+- #12715: number field embeddings should always have target in `AA` or `QQbar`
+- #19356: QQbar.polynomial_root(): allow approximate root
 - use firstly interval arithmetic for `sign`/`floor`/`ceil`/`trunc`/`round` instead of the `_floor_ceil` helper
 - remove the following methods from `ANDescr`:
    - `rational_value`
``````




---

archive/issue_comments_254558.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -20,6 +20,7 @@\n - #18106: introduce a polynomial descriptor, make sum and product be n-ary instead of binary and get rid of recursive calls\n - #12715: number field embeddings should always have target in `AA` or `QQbar`\n - #19356: QQbar.polynomial_root(): allow approximate root\n+- #21095: slowness in exactification\n - use firstly interval arithmetic for `sign`/`floor`/`ceil`/`trunc`/`round` instead of the `_floor_ceil` helper\n - remove the following methods from `ANDescr`:\n    - `rational_value`\n``````\n",
    "created_at": "2016-07-25T20:46:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18333#issuecomment-254558",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -20,6 +20,7 @@
 - #18106: introduce a polynomial descriptor, make sum and product be n-ary instead of binary and get rid of recursive calls
 - #12715: number field embeddings should always have target in `AA` or `QQbar`
 - #19356: QQbar.polynomial_root(): allow approximate root
+- #21095: slowness in exactification
 - use firstly interval arithmetic for `sign`/`floor`/`ceil`/`trunc`/`round` instead of the `_floor_ceil` helper
 - remove the following methods from `ANDescr`:
    - `rational_value`
``````




---

archive/issue_comments_254559.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -34,3 +34,4 @@\n Bugs\n \n - #20209: `QQbar -> RIF` conversion fails\n+- #12745: Coercion problem with Algebraic Real Field\n``````\n",
    "created_at": "2016-08-31T15:45:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18333#issuecomment-254559",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -34,3 +34,4 @@
 Bugs
 
 - #20209: `QQbar -> RIF` conversion fails
+- #12745: Coercion problem with Algebraic Real Field
``````




---

archive/issue_comments_254560.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -21,6 +21,7 @@\n - #12715: number field embeddings should always have target in `AA` or `QQbar`\n - #19356: QQbar.polynomial_root(): allow approximate root\n - #21095: slowness in exactification\n+- #21838: do not make appear the imaginary (or real) part in QQbar when it is known to be zero\n - use firstly interval arithmetic for `sign`/`floor`/`ceil`/`trunc`/`round` instead of the `_floor_ceil` helper\n - remove the following methods from `ANDescr`:\n    - `rational_value`\n@@ -35,3 +36,4 @@\n \n - #20209: `QQbar -> RIF` conversion fails\n - #12745: Coercion problem with Algebraic Real Field\n+- #20288: representation and mutability of the description\n``````\n",
    "created_at": "2016-11-08T12:12:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18333#issuecomment-254560",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -21,6 +21,7 @@
 - #12715: number field embeddings should always have target in `AA` or `QQbar`
 - #19356: QQbar.polynomial_root(): allow approximate root
 - #21095: slowness in exactification
+- #21838: do not make appear the imaginary (or real) part in QQbar when it is known to be zero
 - use firstly interval arithmetic for `sign`/`floor`/`ceil`/`trunc`/`round` instead of the `_floor_ceil` helper
 - remove the following methods from `ANDescr`:
    - `rational_value`
@@ -35,3 +36,4 @@
 
 - #20209: `QQbar -> RIF` conversion fails
 - #12745: Coercion problem with Algebraic Real Field
+- #20288: representation and mutability of the description
``````




---

archive/issue_comments_254561.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,6 +8,7 @@\n - #19362: refine root\n - #18356: implement composed_op from [BFSS]\n - #19824: faster comparison for (real) embedded number fields\n+- #24503: enhanced `LazyAlgebraic`\n \n Tasks in `AA/QQbar`:\n - #18303: better comparisons\n``````\n",
    "created_at": "2018-01-10T11:31:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18333#issuecomment-254561",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,6 +8,7 @@
 - #19362: refine root
 - #18356: implement composed_op from [BFSS]
 - #19824: faster comparison for (real) embedded number fields
+- #24503: enhanced `LazyAlgebraic`
 
 Tasks in `AA/QQbar`:
 - #18303: better comparisons
``````




---

archive/issue_comments_254562.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -22,7 +22,9 @@\n - #12715: number field embeddings should always have target in `AA` or `QQbar`\n - #19356: QQbar.polynomial_root(): allow approximate root\n - #21095: slowness in exactification\n-- #21838: do not make appear the imaginary (or real) part in QQbar when it is known to be zero\n+- #21838: do not make appear the imaginary (or real) part in QQbar when \n+it is known to be zero\n+- #5574: Implement QQbar^QQ as action\n - use firstly interval arithmetic for `sign`/`floor`/`ceil`/`trunc`/`round` instead of the `_floor_ceil` helper\n - remove the following methods from `ANDescr`:\n    - `rational_value`\n``````\n",
    "created_at": "2018-01-10T11:36:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18333#issuecomment-254562",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -22,7 +22,9 @@
 - #12715: number field embeddings should always have target in `AA` or `QQbar`
 - #19356: QQbar.polynomial_root(): allow approximate root
 - #21095: slowness in exactification
-- #21838: do not make appear the imaginary (or real) part in QQbar when it is known to be zero
+- #21838: do not make appear the imaginary (or real) part in QQbar when 
+it is known to be zero
+- #5574: Implement QQbar^QQ as action
 - use firstly interval arithmetic for `sign`/`floor`/`ceil`/`trunc`/`round` instead of the `_floor_ceil` helper
 - remove the following methods from `ANDescr`:
    - `rational_value`
``````




---

archive/issue_comments_254563.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -22,8 +22,7 @@\n - #12715: number field embeddings should always have target in `AA` or `QQbar`\n - #19356: QQbar.polynomial_root(): allow approximate root\n - #21095: slowness in exactification\n-- #21838: do not make appear the imaginary (or real) part in QQbar when \n-it is known to be zero\n+- #21838: do not make appear the imaginary (or real) part in QQbar when it is known to be zero\n - #5574: Implement QQbar^QQ as action\n - use firstly interval arithmetic for `sign`/`floor`/`ceil`/`trunc`/`round` instead of the `_floor_ceil` helper\n - remove the following methods from `ANDescr`:\n``````\n",
    "created_at": "2018-01-10T11:36:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18333#issuecomment-254563",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -22,8 +22,7 @@
 - #12715: number field embeddings should always have target in `AA` or `QQbar`
 - #19356: QQbar.polynomial_root(): allow approximate root
 - #21095: slowness in exactification
-- #21838: do not make appear the imaginary (or real) part in QQbar when 
-it is known to be zero
+- #21838: do not make appear the imaginary (or real) part in QQbar when it is known to be zero
 - #5574: Implement QQbar^QQ as action
 - use firstly interval arithmetic for `sign`/`floor`/`ceil`/`trunc`/`round` instead of the `_floor_ceil` helper
 - remove the following methods from `ANDescr`:
``````




---

archive/issue_comments_254564.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -23,7 +23,7 @@\n - #19356: QQbar.polynomial_root(): allow approximate root\n - #21095: slowness in exactification\n - #21838: do not make appear the imaginary (or real) part in QQbar when it is known to be zero\n-- #5574: Implement QQbar^QQ as action\n+- #5574: Implement QQbar<sup>QQ</sup> as action\n - use firstly interval arithmetic for `sign`/`floor`/`ceil`/`trunc`/`round` instead of the `_floor_ceil` helper\n - remove the following methods from `ANDescr`:\n    - `rational_value`\n``````\n",
    "created_at": "2018-01-10T11:37:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18333#issuecomment-254564",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -23,7 +23,7 @@
 - #19356: QQbar.polynomial_root(): allow approximate root
 - #21095: slowness in exactification
 - #21838: do not make appear the imaginary (or real) part in QQbar when it is known to be zero
-- #5574: Implement QQbar^QQ as action
+- #5574: Implement QQbar<sup>QQ</sup> as action
 - use firstly interval arithmetic for `sign`/`floor`/`ceil`/`trunc`/`round` instead of the `_floor_ceil` helper
 - remove the following methods from `ANDescr`:
    - `rational_value`
``````




---

archive/issue_comments_254565.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -32,7 +32,9 @@\n - (?) enhanced `sage_input` for `ANExtension`\n - better powering (`__pow__`) using `ANExtension` and fix convention for powering in `AA` vs `QQbar`\n - reimplement `_real_refine_interval` without these ugly dictionaries (see also #17895)\n-- use directly embedded number fields in `AlgebraicGenerator` as comparison there is faster (see #17830 and #19824). We might want that these embedded number field carries an interval of fixed precision with them  (let say `64`) to avoid reevaluation in most cases.\n+- use directly embedded number fields in `AlgebraicGenerator` as comparison there is faster (see #17830 and #19824). We might want that these embedded number field carries an interval of fixed precision with them  (let say `64`) to avoid reevaluation in most cases\n+- #26944: improve hashing to avoid exact computations\n+- more generally, track down code in qqbar.py that may lead to larger extensions than necessary if an exact computation is triggered (for example, see if the formulas in `ANUnaryExpr.exactify()` can be optimized).\n \n Bugs\n \n``````\n",
    "created_at": "2018-12-23T08:41:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18333#issuecomment-254565",
    "user": "https://github.com/mezzarobba"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -32,7 +32,9 @@
 - (?) enhanced `sage_input` for `ANExtension`
 - better powering (`__pow__`) using `ANExtension` and fix convention for powering in `AA` vs `QQbar`
 - reimplement `_real_refine_interval` without these ugly dictionaries (see also #17895)
-- use directly embedded number fields in `AlgebraicGenerator` as comparison there is faster (see #17830 and #19824). We might want that these embedded number field carries an interval of fixed precision with them  (let say `64`) to avoid reevaluation in most cases.
+- use directly embedded number fields in `AlgebraicGenerator` as comparison there is faster (see #17830 and #19824). We might want that these embedded number field carries an interval of fixed precision with them  (let say `64`) to avoid reevaluation in most cases
+- #26944: improve hashing to avoid exact computations
+- more generally, track down code in qqbar.py that may lead to larger extensions than necessary if an exact computation is triggered (for example, see if the formulas in `ANUnaryExpr.exactify()` can be optimized).
 
 Bugs
 
``````




---

archive/issue_comments_254566.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,7 +5,7 @@\n - #18334: implement `unique_sign` and `unique_trunc` on interval field elements\n - #18337: implement `real` and `imag` on real intervals\n - #17830: consider the natural order induced from `RR` for number fields with real embedding\n-- #19362: refine root\n+- #19362, #28191: refine root\n - #18356: implement composed_op from [BFSS]\n - #19824: faster comparison for (real) embedded number fields\n - #24503: enhanced `LazyAlgebraic`\n``````\n",
    "created_at": "2019-07-14T20:18:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18333#issuecomment-254566",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,7 +5,7 @@
 - #18334: implement `unique_sign` and `unique_trunc` on interval field elements
 - #18337: implement `real` and `imag` on real intervals
 - #17830: consider the natural order induced from `RR` for number fields with real embedding
-- #19362: refine root
+- #19362, #28191: refine root
 - #18356: implement composed_op from [BFSS]
 - #19824: faster comparison for (real) embedded number fields
 - #24503: enhanced `LazyAlgebraic`
``````




---

archive/issue_comments_254567.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\n- [sage-devel, 2021-04-29: The sign() method in QQbar overlooks some (presumably) easy shortcuts](https://groups.google.com/g/sage-devel/c/OaUlf5VHBbc)",
    "created_at": "2021-04-29T20:23:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18333#issuecomment-254567",
    "user": "https://github.com/slel"
}
```

<a id='comment:30'>Comment 30:</a>
- [sage-devel, 2021-04-29: The sign() method in QQbar overlooks some (presumably) easy shortcuts](https://groups.google.com/g/sage-devel/c/OaUlf5VHBbc)



---

archive/issue_comments_254568.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -14,7 +14,7 @@\n - #18303: better comparisons\n - #17886, #18242: faster exactification operations using power series and resultants (see also #18356)\n - #15600: exactification is slow in `do_polred`\n-- #16222, #18122: enhanced minpoly\n+- #16222, #18122, #31889: enhanced minpoly\n - #19954 and #19955: remove all descriptors except `ANRoot`, `ANExtension` and `ANRational`\n - #20074: simplify method dispatcher for binary operators\n - #12745: conversion issue `QQbar -> AA`\n@@ -35,6 +35,7 @@\n - use directly embedded number fields in `AlgebraicGenerator` as comparison there is faster (see #17830 and #19824). We might want that these embedded number field carries an interval of fixed precision with them  (let say `64`) to avoid reevaluation in most cases\n - #26944: improve hashing to avoid exact computations\n - more generally, track down code in qqbar.py that may lead to larger extensions than necessary if an exact computation is triggered (for example, see if the formulas in `ANUnaryExpr.exactify()` can be optimized).\n+- #31767: more capable sign \n \n Bugs\n \n``````\n",
    "created_at": "2021-06-01T07:10:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18333",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18333#issuecomment-254568",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -14,7 +14,7 @@
 - #18303: better comparisons
 - #17886, #18242: faster exactification operations using power series and resultants (see also #18356)
 - #15600: exactification is slow in `do_polred`
-- #16222, #18122: enhanced minpoly
+- #16222, #18122, #31889: enhanced minpoly
 - #19954 and #19955: remove all descriptors except `ANRoot`, `ANExtension` and `ANRational`
 - #20074: simplify method dispatcher for binary operators
 - #12745: conversion issue `QQbar -> AA`
@@ -35,6 +35,7 @@
 - use directly embedded number fields in `AlgebraicGenerator` as comparison there is faster (see #17830 and #19824). We might want that these embedded number field carries an interval of fixed precision with them  (let say `64`) to avoid reevaluation in most cases
 - #26944: improve hashing to avoid exact computations
 - more generally, track down code in qqbar.py that may lead to larger extensions than necessary if an exact computation is triggered (for example, see if the formulas in `ANUnaryExpr.exactify()` can be optimized).
+- #31767: more capable sign 
 
 Bugs
 
``````

