# Issue 18685: Add basis status functions get_col_stat, get_row_stat to GLPK backend

archive/issues_018448.json:
```json
{
    "body": "Expose the GLPK functions get_col_stat, get_row_stat in Sage's GLPKBackend class.\n\nThese functions are essential for any serious linear programming.\nFor example, if one wants to extract the exact rational basic solution from the dictionary, one needs the information returned by these functions.\n\n\nCC:  @nathanncohen @yuan-zhou\n\nKeywords: LP, glpk\n\nBranch/Commit: 30eef17b1ce8cc81a6f493417a04deae8be64821\n\nReviewer: Nathann Cohen\n\nAuthor: Yuan Zhou\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/18685\n\n",
    "closed_at": "2015-06-14T19:54:39Z",
    "created_at": "2015-06-11T21:57:32Z",
    "labels": [
        "component: numerical"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.8",
    "title": "Add basis status functions get_col_stat, get_row_stat to GLPK backend",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18685",
    "user": "https://github.com/mkoeppe"
}
```
Expose the GLPK functions get_col_stat, get_row_stat in Sage's GLPKBackend class.

These functions are essential for any serious linear programming.
For example, if one wants to extract the exact rational basic solution from the dictionary, one needs the information returned by these functions.


CC:  @nathanncohen @yuan-zhou

Keywords: LP, glpk

Branch/Commit: 30eef17b1ce8cc81a6f493417a04deae8be64821

Reviewer: Nathann Cohen

Author: Yuan Zhou

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/18685





---

archive/issue_comments_328813.json:
```json
{
    "body": "<a id='comment:2'></a>\nI am curious to know how you would use it in Sage, but you will not have any problem exposing them. That's easy Cython.",
    "created_at": "2015-06-11T22:42:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18685#issuecomment-328813",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:2'></a>
I am curious to know how you would use it in Sage, but you will not have any problem exposing them. That's easy Cython.



---

archive/issue_comments_328814.json:
```json
{
    "body": "Changing branch from \"\" to \"u/yzh/add_basis_status_functions_get_col_stat__get_row_stat_to_glpk_backend\"",
    "created_at": "2015-06-11T23:49:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18685#issuecomment-328814",
    "user": "https://github.com/yuan-zhou"
}
```

Changing branch from "" to "u/yzh/add_basis_status_functions_get_col_stat__get_row_stat_to_glpk_backend"



---

archive/issue_comments_328815.json:
```json
{
    "body": "Changing commit from \"\" to \"e5c7095c35a0b278a4947ebd29db29d098face34\"",
    "created_at": "2015-06-11T23:50:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18685#issuecomment-328815",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "e5c7095c35a0b278a4947ebd29db29d098face34"



---

archive/issue_comments_328816.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-06-11T23:50:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18685#issuecomment-328816",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_328817.json:
```json
{
    "body": "<a id='comment:4'></a>\nNew commits:\n|                                                                                                                                          |                                                              |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------|\n|[e5c7095](http://git.sagemath.org/sage.git/commit/?id=e5c7095c35a0b278a4947ebd29db29d098face34)|`Add Sage interface for retrieving the basis status from GLPK`|",
    "created_at": "2015-06-11T23:50:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18685#issuecomment-328817",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
New commits:
|                                                                                                                                          |                                                              |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------|
|[e5c7095](http://git.sagemath.org/sage.git/commit/?id=e5c7095c35a0b278a4947ebd29db29d098face34)|`Add Sage interface for retrieving the basis status from GLPK`|



---

archive/issue_comments_328818.json:
```json
{
    "body": "<a id='comment:5'></a>\nYour code needs documentation and doctests. You can mimic what is done on the other functions of the same file, and will find some documentation here:\n\nhttp://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings\n\nNathann",
    "created_at": "2015-06-12T07:36:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18685#issuecomment-328818",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:5'></a>
Your code needs documentation and doctests. You can mimic what is done on the other functions of the same file, and will find some documentation here:

http://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings

Nathann



---

archive/issue_comments_328819.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-06-12T07:37:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18685#issuecomment-328819",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_328820.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|\n|[49dba6a](http://git.sagemath.org/sage.git/commit/?id=49dba6a5cdb32dd49cd858e8a77cdfcfe361362c)|`get_col_stat, get_row_stat: Add docstrings`|",
    "created_at": "2015-06-12T17:25:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18685#issuecomment-328820",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                            |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|
|[49dba6a](http://git.sagemath.org/sage.git/commit/?id=49dba6a5cdb32dd49cd858e8a77cdfcfe361362c)|`get_col_stat, get_row_stat: Add docstrings`|



---

archive/issue_comments_328821.json:
```json
{
    "body": "Changing commit from \"e5c7095c35a0b278a4947ebd29db29d098face34\" to \"49dba6a5cdb32dd49cd858e8a77cdfcfe361362c\"",
    "created_at": "2015-06-12T17:25:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18685#issuecomment-328821",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e5c7095c35a0b278a4947ebd29db29d098face34" to "49dba6a5cdb32dd49cd858e8a77cdfcfe361362c"



---

archive/issue_comments_328822.json:
```json
{
    "body": "<a id='comment:8'></a>\nDoctests have been added; please review",
    "created_at": "2015-06-12T17:33:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18685#issuecomment-328822",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
Doctests have been added; please review



---

archive/issue_comments_328823.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-06-12T17:33:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18685#issuecomment-328823",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_328824.json:
```json
{
    "body": "<a id='comment:10'></a>\nCould you protect against reading out-of-bounds constraints? Right now it crashes Sage. Could you also add a doctest for that?\n\nNathann",
    "created_at": "2015-06-12T18:17:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18685#issuecomment-328824",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:10'></a>
Could you protect against reading out-of-bounds constraints? Right now it crashes Sage. Could you also add a doctest for that?

Nathann



---

archive/issue_comments_328825.json:
```json
{
    "body": "<a id='comment:11'></a>\nI am not sure if this ticket is the right place to introduce bounds checking for these functions.\nOther GLPK backend functions don't do that either (below is an example) -- after all, GLPK does check the bounds; it only chooses to terminate the process with abort()....\n\nDoes this rather need to be handled with sig_on() / sig_off() somehow?\n\n```\nsage: lp.add_linear_constraint(zip([0, 1, 2], [8, 6, 1]), None, 48)\nsage: lp.add_linear_constraint(zip([0, 1, 2], [4, 2, 1.5]), None, 20)\nsage: lp.add_linear_constraint(zip([0, 1, 2], [2, 1.5, 0.5]), None, 8)\nsage: lp.set_objective([60, 30, 20])\nsage: import sage.numerical.backends.glpk_backend as backend\nsage: lp.solver_parameter(backend.glp_simplex_or_intopt, backend.glp_simplex_only)\nsage: lp.solve()\nsage: lp.get_variable_value(-1)\nglp_get_col_prim: j = 0; column number out of range\nError detected in file glpapi06.c at line 739\n------------------------------------------------------------------------\nUnhandled SIGABRT: An abort() occurred in Sage.\nThis probably occurred because a *compiled* component of Sage has a bug\nin it and is not properly wrapped with sig_on(), sig_off().\nSage will now terminate.\n------------------------------------------------------------------------\n```",
    "created_at": "2015-06-13T02:03:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18685#issuecomment-328825",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>
I am not sure if this ticket is the right place to introduce bounds checking for these functions.
Other GLPK backend functions don't do that either (below is an example) -- after all, GLPK does check the bounds; it only chooses to terminate the process with abort()....

Does this rather need to be handled with sig_on() / sig_off() somehow?

```
sage: lp.add_linear_constraint(zip([0, 1, 2], [8, 6, 1]), None, 48)
sage: lp.add_linear_constraint(zip([0, 1, 2], [4, 2, 1.5]), None, 20)
sage: lp.add_linear_constraint(zip([0, 1, 2], [2, 1.5, 0.5]), None, 8)
sage: lp.set_objective([60, 30, 20])
sage: import sage.numerical.backends.glpk_backend as backend
sage: lp.solver_parameter(backend.glp_simplex_or_intopt, backend.glp_simplex_only)
sage: lp.solve()
sage: lp.get_variable_value(-1)
glp_get_col_prim: j = 0; column number out of range
Error detected in file glpapi06.c at line 739
------------------------------------------------------------------------
Unhandled SIGABRT: An abort() occurred in Sage.
This probably occurred because a *compiled* component of Sage has a bug
in it and is not properly wrapped with sig_on(), sig_off().
Sage will now terminate.
------------------------------------------------------------------------
```



---

archive/issue_comments_328826.json:
```json
{
    "body": "<a id='comment:12'></a>\n> I am not sure if this ticket is the right place to introduce bounds checking for these functions.\n\n\nIf you are ready to pay for a Python function call, you may as well avoid segfaults.\n\n> Other GLPK backend functions don't do that either (below is an example)\n\n\nOh. Right. Well, that's because we hardly ever use this function by giving it integers, I'd say. We always give it symbolic LP variable, for which it is not a problem. You can fix both here if you like, but you should at least make the one you introduce check for this.\n\n> Does this rather need to be handled with sig_on() / sig_off() somehow?\n\n\nNo, `sig_on/sig_off` is only meant to handle `KeyboardInterrupt`. \n\nNathann",
    "created_at": "2015-06-13T07:20:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18685#issuecomment-328826",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:12'></a>
> I am not sure if this ticket is the right place to introduce bounds checking for these functions.


If you are ready to pay for a Python function call, you may as well avoid segfaults.

> Other GLPK backend functions don't do that either (below is an example)


Oh. Right. Well, that's because we hardly ever use this function by giving it integers, I'd say. We always give it symbolic LP variable, for which it is not a problem. You can fix both here if you like, but you should at least make the one you introduce check for this.

> Does this rather need to be handled with sig_on() / sig_off() somehow?


No, `sig_on/sig_off` is only meant to handle `KeyboardInterrupt`. 

Nathann



---

archive/issue_comments_328827.json:
```json
{
    "body": "<a id='comment:13'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                    |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|\n|[e96bce5](http://git.sagemath.org/sage.git/commit/?id=e96bce575cd072f71325eb0cbb42410e068aeeb5)|`check bounds for get_row_stat() and git_col_stat()`|",
    "created_at": "2015-06-13T10:10:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18685#issuecomment-328827",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                    |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|
|[e96bce5](http://git.sagemath.org/sage.git/commit/?id=e96bce575cd072f71325eb0cbb42410e068aeeb5)|`check bounds for get_row_stat() and git_col_stat()`|



---

archive/issue_comments_328828.json:
```json
{
    "body": "Changing commit from \"49dba6a5cdb32dd49cd858e8a77cdfcfe361362c\" to \"e96bce575cd072f71325eb0cbb42410e068aeeb5\"",
    "created_at": "2015-06-13T10:10:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18685#issuecomment-328828",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "49dba6a5cdb32dd49cd858e8a77cdfcfe361362c" to "e96bce575cd072f71325eb0cbb42410e068aeeb5"



---

archive/issue_comments_328829.json:
```json
{
    "body": "<a id='comment:14'></a>\nLooks good! The patchbot complains that there are 'tab' characters in `glpk_backend.pxd`, however.",
    "created_at": "2015-06-13T10:14:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18685#issuecomment-328829",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:14'></a>
Looks good! The patchbot complains that there are 'tab' characters in `glpk_backend.pxd`, however.



---

archive/issue_comments_328830.json:
```json
{
    "body": "Changing commit from \"e96bce575cd072f71325eb0cbb42410e068aeeb5\" to \"30eef17b1ce8cc81a6f493417a04deae8be64821\"",
    "created_at": "2015-06-13T10:31:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18685#issuecomment-328830",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e96bce575cd072f71325eb0cbb42410e068aeeb5" to "30eef17b1ce8cc81a6f493417a04deae8be64821"



---

archive/issue_comments_328831.json:
```json
{
    "body": "<a id='comment:15'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                       |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|\n|[30eef17](http://git.sagemath.org/sage.git/commit/?id=30eef17b1ce8cc81a6f493417a04deae8be64821)|`replace tab by spaces`|",
    "created_at": "2015-06-13T10:31:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18685#issuecomment-328831",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                       |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|
|[30eef17](http://git.sagemath.org/sage.git/commit/?id=30eef17b1ce8cc81a6f493417a04deae8be64821)|`replace tab by spaces`|



---

archive/issue_comments_328832.json:
```json
{
    "body": "<a id='comment:16'></a>\nGooooooood to go!\n\nNathann\n\nP.S.: Please fill the \"Author\" field with your full name",
    "created_at": "2015-06-13T10:32:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18685#issuecomment-328832",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:16'></a>
Gooooooood to go!

Nathann

P.S.: Please fill the "Author" field with your full name



---

archive/issue_comments_328833.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Nathann Cohen\"",
    "created_at": "2015-06-13T10:32:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18685#issuecomment-328833",
    "user": "https://github.com/nathanncohen"
}
```

Changing reviewer from "" to "Nathann Cohen"



---

archive/issue_comments_328834.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-06-13T10:32:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18685#issuecomment-328834",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_328835.json:
```json
{
    "body": "Changing author from \"\" to \"Yuan Zhou\"",
    "created_at": "2015-06-13T10:41:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18685#issuecomment-328835",
    "user": "https://github.com/yuan-zhou"
}
```

Changing author from "" to "Yuan Zhou"



---

archive/issue_comments_328836.json:
```json
{
    "body": "<a id='comment:18'></a>\nThanks!",
    "created_at": "2015-06-13T10:42:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18685#issuecomment-328836",
    "user": "https://github.com/yuan-zhou"
}
```

<a id='comment:18'></a>
Thanks!



---

archive/issue_comments_328837.json:
```json
{
    "body": "Changing branch from \"u/yzh/add_basis_status_functions_get_col_stat__get_row_stat_to_glpk_backend\" to \"30eef17b1ce8cc81a6f493417a04deae8be64821\"",
    "created_at": "2015-06-14T19:54:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18685#issuecomment-328837",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/yzh/add_basis_status_functions_get_col_stat__get_row_stat_to_glpk_backend" to "30eef17b1ce8cc81a6f493417a04deae8be64821"



---

archive/issue_events_052368.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-06-14T19:54:39Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18685",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18685#event-52368"
}
```



---

archive/issue_comments_328838.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-06-14T19:54:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18685#issuecomment-328838",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
