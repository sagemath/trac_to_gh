# Issue 18036: I.parent() should not be the symbolic ring

archive/issues_017799.json:
```json
{
    "body": "As suggested in #7545, this ticket defines the imaginary unit `I` directly as the generator of `QuadraticField(-1)` instead of wrapping it in a symbolic expression.\n\n**Why?** To allow it to be used in combination with elements of QQbar, CC, etc., without coercion forcing the expression to SR. For example, `1.0 + I` is now an element of CC instead of SR.\n\n**How?** We set `I` in sage.all to the generator of \u211a[i], and deprecate importing it from `sage.symbolic.I`. The symbolic `I` remains available from `sage.symbolic.constants` for library code working with symbolic expressions, and as `SR(I)` or `SR.I()`. We create a dedicated subclass of quadratic number field elements to make it possible to support features similar to those of symbolic expressions of the form `a + I*b` that would not make sense for number field elements (or be too hard to implement, or pollute the namespace).\n\n**Why not \u2124[i]?** Because the class hierarchy of number field and order elements makes it difficult to provide the compatibility features mentioned above for elements of both \u2124[i] and \u211a[i]. Having `I` be an element of \u211a[i] covers almost all use cases (all except working with algebraic integers?), and people who work with orders are sophisticated enough to explicitly ask for I\u00a0\u2208\u00a0\u2124[i] when they need that. (This is a debatable choice. We could probably do without the dedicated subclass for elements of \u211a[i], at the price of breaking backward compatibility a bit more.)\n\nCC:  @categorie @jdemeyer @mezzarobba @behackl @rwst @kliem @mwageringel\n\nBranch/Commit: 54a34a7443d373e678c5461e5205ef2cdd7470b1\n\nReviewer: Vincent Delecroix\n\nAuthor: Marc Mezzarobba\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/18036\n\n",
    "closed_at": "2020-11-22T15:06:53Z",
    "created_at": "2015-03-22T11:15:52Z",
    "labels": [
        "component: number fields",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "I.parent() should not be the symbolic ring",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18036",
    "user": "https://github.com/videlec"
}
```
As suggested in #7545, this ticket defines the imaginary unit `I` directly as the generator of `QuadraticField(-1)` instead of wrapping it in a symbolic expression.

**Why?** To allow it to be used in combination with elements of QQbar, CC, etc., without coercion forcing the expression to SR. For example, `1.0 + I` is now an element of CC instead of SR.

**How?** We set `I` in sage.all to the generator of ℚ[i], and deprecate importing it from `sage.symbolic.I`. The symbolic `I` remains available from `sage.symbolic.constants` for library code working with symbolic expressions, and as `SR(I)` or `SR.I()`. We create a dedicated subclass of quadratic number field elements to make it possible to support features similar to those of symbolic expressions of the form `a + I*b` that would not make sense for number field elements (or be too hard to implement, or pollute the namespace).

**Why not ℤ[i]?** Because the class hierarchy of number field and order elements makes it difficult to provide the compatibility features mentioned above for elements of both ℤ[i] and ℚ[i]. Having `I` be an element of ℚ[i] covers almost all use cases (all except working with algebraic integers?), and people who work with orders are sophisticated enough to explicitly ask for I ∈ ℤ[i] when they need that. (This is a debatable choice. We could probably do without the dedicated subclass for elements of ℚ[i], at the price of breaking backward compatibility a bit more.)

CC:  @categorie @jdemeyer @mezzarobba @behackl @rwst @kliem @mwageringel

Branch/Commit: 54a34a7443d373e678c5461e5205ef2cdd7470b1

Reviewer: Vincent Delecroix

Author: Marc Mezzarobba

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/18036





---

archive/issue_comments_310974.json:
```json
{
    "body": "<a id='comment:1'></a>\nI'm not so sure it should. Which quadratic field is the appropriate one? There are many, distinguishable by the name of their generator (that would be 'I') for this one, but also by their specified embeddings, and it's not clear which one to choose.\n\nIs there an argument for doing this? Ticket #17860 referenced in the description makes no mention of it. I'd imagine there might be evaluation reasons that might make it attractive. Perhaps those also give an indication of which quadratic field would be the appropriate one.",
    "created_at": "2015-03-22T18:16:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-310974",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:1'></a>
I'm not so sure it should. Which quadratic field is the appropriate one? There are many, distinguishable by the name of their generator (that would be 'I') for this one, but also by their specified embeddings, and it's not clear which one to choose.

Is there an argument for doing this? Ticket #17860 referenced in the description makes no mention of it. I'd imagine there might be evaluation reasons that might make it attractive. Perhaps those also give an indication of which quadratic field would be the appropriate one.



---

archive/issue_comments_310975.json:
```json
{
    "body": "<a id='comment:2'></a>\nReplying to [nbruin](#comment%3A1):\n> I'm not so sure it should. Which quadratic field is the appropriate one? There are many, distinguishable by the name of their generator (that would be 'I') for this one, but also by their specified embeddings, and it's not clear which one to choose.\n\n\nI also thought of this in the train... and I do not see much possible choices. I found two rather natural choices for the adoption of `I`:\n- the ring of integers `Z[sqrt(-1)]` with its natural embedding in `QQbar`\n- `QQbar` itself\n\n> Is there an argument for doing this? Ticket #17860 referenced in the description makes no mention of it. I'd imagine there might be evaluation reasons that might make it attractive. Perhaps those also give an indication of which quadratic field would be the appropriate one.\n\n\nSome reasons (in favor of the first choice):\n- `I + 1.0` and `1.0 * I` should be complex numbers\n- `factor((I+3))` should be the factorization over the Gaussian integers (i.e. `(-I) * (I + 1) * (2*I + 1)`)\n- `abs(I)` should be the integer `1`\n\nVincent",
    "created_at": "2015-03-22T21:07:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-310975",
    "user": "https://github.com/videlec"
}
```

<a id='comment:2'></a>
Replying to [nbruin](#comment%3A1):
> I'm not so sure it should. Which quadratic field is the appropriate one? There are many, distinguishable by the name of their generator (that would be 'I') for this one, but also by their specified embeddings, and it's not clear which one to choose.


I also thought of this in the train... and I do not see much possible choices. I found two rather natural choices for the adoption of `I`:
- the ring of integers `Z[sqrt(-1)]` with its natural embedding in `QQbar`
- `QQbar` itself

> Is there an argument for doing this? Ticket #17860 referenced in the description makes no mention of it. I'd imagine there might be evaluation reasons that might make it attractive. Perhaps those also give an indication of which quadratic field would be the appropriate one.


Some reasons (in favor of the first choice):
- `I + 1.0` and `1.0 * I` should be complex numbers
- `factor((I+3))` should be the factorization over the Gaussian integers (i.e. `(-I) * (I + 1) * (2*I + 1)`)
- `abs(I)` should be the integer `1`

Vincent



---

archive/issue_comments_310976.json:
```json
{
    "body": "<a id='comment:3'></a>\n`I` should be an element of `QuadraticField(-1, 'I', embedding=CC.gen(), latex_name='i')`, which is what it currently is (see `src/sage/symbolic/pynac.pyx`).",
    "created_at": "2015-03-22T22:17:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-310976",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:3'></a>
`I` should be an element of `QuadraticField(-1, 'I', embedding=CC.gen(), latex_name='i')`, which is what it currently is (see `src/sage/symbolic/pynac.pyx`).



---

archive/issue_comments_310977.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [nbruin](#comment%3A1):\n> Is there an argument for doing this?\n\n\nIn short: the same reason that `1` is not symbolic. When doing basic arithmetic with `I`, there is no need for a symbolic `I`. Whenever something symbolic is needed, coercion will make it symbolic.",
    "created_at": "2015-03-22T22:27:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-310977",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>
Replying to [nbruin](#comment%3A1):
> Is there an argument for doing this?


In short: the same reason that `1` is not symbolic. When doing basic arithmetic with `I`, there is no need for a symbolic `I`. Whenever something symbolic is needed, coercion will make it symbolic.



---

archive/issue_comments_310978.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [vdelecroix](#comment%3A2):\n> I found two rather natural choices for the adoption of `I`:\n> - the ring of integers `Z[sqrt(-1)]` with its natural embedding in `QQbar`\n \nThe ring `ZZ[sqrt(-1)]` definitely looks like the most natural choice to me, since admits a canonical homomorphism to any other ring with a distinguished square root of -1.\n\nAs for the distinguished embedding, is there a specific reason for choosing `QQbar`?  A more minimal choice would be to fix an embedding into a `UniversalCyclotomicField`; then we would have coercion maps `ZZ[I]` -> `UniversalCyclotomicField(zeta)` -> `QQbar` -> `CC`.  (Maybe this makes finding common parents slightly harder, though.)",
    "created_at": "2015-03-24T17:08:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-310978",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:5'></a>
Replying to [vdelecroix](#comment%3A2):
> I found two rather natural choices for the adoption of `I`:
> - the ring of integers `Z[sqrt(-1)]` with its natural embedding in `QQbar`
 
The ring `ZZ[sqrt(-1)]` definitely looks like the most natural choice to me, since admits a canonical homomorphism to any other ring with a distinguished square root of -1.

As for the distinguished embedding, is there a specific reason for choosing `QQbar`?  A more minimal choice would be to fix an embedding into a `UniversalCyclotomicField`; then we would have coercion maps `ZZ[I]` -> `UniversalCyclotomicField(zeta)` -> `QQbar` -> `CC`.  (Maybe this makes finding common parents slightly harder, though.)



---

archive/issue_comments_310979.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-As suggested in #17860, `I` (so that `I^2 = -1`) should be defined directly as the generator of `QuadraticField(-1)` and not wrapped into a symbolic expression.\n+As suggested in #7545, `I` (so that `I^2 = -1`) should be defined directly as the generator of `QuadraticField(-1)` and not wrapped into a symbolic expression.\n \n Currently, `I` is defined in `sage/symbolic/pynac.pyx` within the function `init_pynac_I`.\n``````\n",
    "created_at": "2015-03-24T18:08:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-310979",
    "user": "https://github.com/kcrisman"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-As suggested in #17860, `I` (so that `I^2 = -1`) should be defined directly as the generator of `QuadraticField(-1)` and not wrapped into a symbolic expression.
+As suggested in #7545, `I` (so that `I^2 = -1`) should be defined directly as the generator of `QuadraticField(-1)` and not wrapped into a symbolic expression.
 
 Currently, `I` is defined in `sage/symbolic/pynac.pyx` within the function `init_pynac_I`.
``````




---

archive/issue_comments_310980.json:
```json
{
    "body": "<a id='comment:6'></a>\nThank you all for working on this - this kind of thing has been on the radar for [comment:5:ticket:7545 years] but after Burcin left day-to-day operations around here there hasn't been the combination of energy and know-how to do this \"correctly\", whatever that might mean.  Just keep in mind it would be nice for `I in SR` to be true, though I'm sure it will be since `1 in SR` already is `True`.  I do like the idea of `abs(I)` being an `Integer` and not a symbolic expression.",
    "created_at": "2015-03-24T18:08:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-310980",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:6'></a>
Thank you all for working on this - this kind of thing has been on the radar for [comment:5:ticket:7545 years] but after Burcin left day-to-day operations around here there hasn't been the combination of energy and know-how to do this "correctly", whatever that might mean.  Just keep in mind it would be nice for `I in SR` to be true, though I'm sure it will be since `1 in SR` already is `True`.  I do like the idea of `abs(I)` being an `Integer` and not a symbolic expression.



---

archive/issue_comments_310981.json:
```json
{
    "body": "<a id='comment:8'></a>\nProof of concept to see what would break: `u/mmezzarobba/18036-QQi` (I'm using a number field element for now, not an order element, but switching shouldn't be hard). Still needs quite a bit of work, but all tests should pass (I didn't run them all with the last version of the code). Any comment or improvement welcome!\n\nIn particular:\n* Are there behavior changes that you think are not acceptable, or not acceptable without a deprecation?\n* I'm not happy with the changes to `sage.geometry.hyperbolic_space` (which apparently relied on operations involving `I` triggering coercions to `SR`), but I don't understand the code well enough to do better.\n\nTangentially related: now may be a good time to deprecate (or remove directly?) the bogus coercion from `SR` to `QQbar`.",
    "created_at": "2015-04-15T14:18:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-310981",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:8'></a>
Proof of concept to see what would break: `u/mmezzarobba/18036-QQi` (I'm using a number field element for now, not an order element, but switching shouldn't be hard). Still needs quite a bit of work, but all tests should pass (I didn't run them all with the last version of the code). Any comment or improvement welcome!

In particular:
* Are there behavior changes that you think are not acceptable, or not acceptable without a deprecation?
* I'm not happy with the changes to `sage.geometry.hyperbolic_space` (which apparently relied on operations involving `I` triggering coercions to `SR`), but I don't understand the code well enough to do better.

Tangentially related: now may be a good time to deprecate (or remove directly?) the bogus coercion from `SR` to `QQbar`.



---

archive/issue_comments_310982.json:
```json
{
    "body": "<a id='comment:9'></a>\nAs it turns out, there are a few failures in `complex_mpc.pyx`. But unless I'm mistaken these failures are solved by #14982. And conversely, the present ticket provides a real fix for a problem I only worked around in #14982.",
    "created_at": "2015-04-15T15:27:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-310982",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:9'></a>
As it turns out, there are a few failures in `complex_mpc.pyx`. But unless I'm mistaken these failures are solved by #14982. And conversely, the present ticket provides a real fix for a problem I only worked around in #14982.



---

archive/issue_comments_310983.json:
```json
{
    "body": "<a id='comment:10'></a>\nVery nice that it worked!\n\nI do not quite understand why you need the creation of a new class of `NumberFieldQQi`... is that only for the special method you need in the element class?\n\nFor embedding in QQbar I guess that what should be fixed is embedding of number fields. In the ideal world, you would declare:\n\n```\nQQi = NumberField(x**2 + 1, 'I', embedding=QQbar.gen())\n```\nBut then, there might be an infinite loop with the definition of `I` in `QQbar`. I had the same sort of troubles when refining default embedding from lazy field to `AA/QQbar`.\n\nVincent",
    "created_at": "2015-04-15T16:54:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-310983",
    "user": "https://github.com/videlec"
}
```

<a id='comment:10'></a>
Very nice that it worked!

I do not quite understand why you need the creation of a new class of `NumberFieldQQi`... is that only for the special method you need in the element class?

For embedding in QQbar I guess that what should be fixed is embedding of number fields. In the ideal world, you would declare:

```
QQi = NumberField(x**2 + 1, 'I', embedding=QQbar.gen())
```
But then, there might be an infinite loop with the definition of `I` in `QQbar`. I had the same sort of troubles when refining default embedding from lazy field to `AA/QQbar`.

Vincent



---

archive/issue_comments_310984.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [vdelecroix](#comment%3A10):\n> I do not quite understand why you need the creation of a new class of `NumberFieldQQi`... is that only for the special method you need in the element class?\n\n\nI don't remember, it could be that the reason no longer exists due to later changes.\n\n> For embedding in QQbar I guess that what should be fixed is embedding of number fields. In the ideal world, you would declare:\n> \n> ```\n> QQi = NumberField(x**2 + 1, 'I', embedding=QQbar.gen())\n> ```\n\n\nYes, the idea is to switch to an embedding into QQbar when other number fields do.",
    "created_at": "2015-04-15T17:13:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-310984",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:11'></a>
Replying to [vdelecroix](#comment%3A10):
> I do not quite understand why you need the creation of a new class of `NumberFieldQQi`... is that only for the special method you need in the element class?


I don't remember, it could be that the reason no longer exists due to later changes.

> For embedding in QQbar I guess that what should be fixed is embedding of number fields. In the ideal world, you would declare:
> 
> ```
> QQi = NumberField(x**2 + 1, 'I', embedding=QQbar.gen())
> ```


Yes, the idea is to switch to an embedding into QQbar when other number fields do.



---

archive/issue_comments_310985.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [mmezzarobba](#comment%3A11):\n> Replying to [vdelecroix](#comment%3A10):\n> > I do not quite understand why you need the creation of a new class of `NumberFieldQQi`... is that only for the special method you need in the element class?\n\n> \n> I don't remember, it could be that the reason no longer exists due to later changes.\n\n\nOne reason was that having separate classes makes it easy to test if we are in the special case of QQ[i] using `isinstance`. In the case of the parent class, this is convenient when specifying coercions, for instance.",
    "created_at": "2015-04-18T11:13:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-310985",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:12'></a>
Replying to [mmezzarobba](#comment%3A11):
> Replying to [vdelecroix](#comment%3A10):
> > I do not quite understand why you need the creation of a new class of `NumberFieldQQi`... is that only for the special method you need in the element class?

> 
> I don't remember, it could be that the reason no longer exists due to later changes.


One reason was that having separate classes makes it easy to test if we are in the special case of QQ[i] using `isinstance`. In the case of the parent class, this is convenient when specifying coercions, for instance.



---

archive/issue_comments_310986.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [mmezzarobba](#comment%3A12):\n> Replying to [mmezzarobba](#comment%3A11):\n> > Replying to [vdelecroix](#comment%3A10):\n> > > I do not quite understand why you need the creation of a new class of `NumberFieldQQi`... is that only for the special method you need in the element class?\n\n> > \n> > I don't remember, it could be that the reason no longer exists due to later changes.\n\n> \n> One reason was that having separate classes makes it easy to test if we are in the special case of QQ[i] using `isinstance`. In the case of the parent class, this is convenient when specifying coercions, for instance.\n\n\nAnyway this will be instantiated at startup so why not keeping one instance `QQi` in `sage.rings.number_field.number_field`? (like we have for `ZZ`, `QQ`, etc). Then you can test identity when testing coercions.",
    "created_at": "2015-04-18T11:27:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-310986",
    "user": "https://github.com/videlec"
}
```

<a id='comment:13'></a>
Replying to [mmezzarobba](#comment%3A12):
> Replying to [mmezzarobba](#comment%3A11):
> > Replying to [vdelecroix](#comment%3A10):
> > > I do not quite understand why you need the creation of a new class of `NumberFieldQQi`... is that only for the special method you need in the element class?

> > 
> > I don't remember, it could be that the reason no longer exists due to later changes.

> 
> One reason was that having separate classes makes it easy to test if we are in the special case of QQ[i] using `isinstance`. In the case of the parent class, this is convenient when specifying coercions, for instance.


Anyway this will be instantiated at startup so why not keeping one instance `QQi` in `sage.rings.number_field.number_field`? (like we have for `ZZ`, `QQ`, etc). Then you can test identity when testing coercions.



---

archive/issue_comments_310987.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [vdelecroix](#comment%3A13):\n> Anyway this will be instantiated at startup so why not keeping one instance `QQi` in `sage.rings.number_field.number_field`? (like we have for `ZZ`, `QQ`, etc).\n\n\nIf I remember right, currently, just adding `QQi = ...()` in the module currently doesn't work due to import order constraints. For now I just kept the creation of QQ[i] happening at the same time as it used to. But that's certainly something we should try to improve after this first draft.\n\n> Then you can test identity when testing coercions.\n\n\nYes. Having a separate class would also be natural if we want `I.parent()` to display something less frightening than \u201cNumber Field in `I` with defining polynomial `x^2 + 1`\u201d, and more generally to implement features specific to QQ[i]. But I can't really think of anything that makes sense for this field and not for embedded quadratic number fields in general, so perhaps it is better to encourage people to always implement a more general version?\n\nA related question is whether `QQi is NumberField(x^2+1, 'I', embedding=CC.0)` should be true, or if there should be two separate parents.\n\nWhat do you think?",
    "created_at": "2015-04-18T16:56:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-310987",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:14'></a>
Replying to [vdelecroix](#comment%3A13):
> Anyway this will be instantiated at startup so why not keeping one instance `QQi` in `sage.rings.number_field.number_field`? (like we have for `ZZ`, `QQ`, etc).


If I remember right, currently, just adding `QQi = ...()` in the module currently doesn't work due to import order constraints. For now I just kept the creation of QQ[i] happening at the same time as it used to. But that's certainly something we should try to improve after this first draft.

> Then you can test identity when testing coercions.


Yes. Having a separate class would also be natural if we want `I.parent()` to display something less frightening than “Number Field in `I` with defining polynomial `x^2 + 1`”, and more generally to implement features specific to QQ[i]. But I can't really think of anything that makes sense for this field and not for embedded quadratic number fields in general, so perhaps it is better to encourage people to always implement a more general version?

A related question is whether `QQi is NumberField(x^2+1, 'I', embedding=CC.0)` should be true, or if there should be two separate parents.

What do you think?



---

archive/issue_comments_310988.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [mmezzarobba](#comment%3A14):\n> Replying to [vdelecroix](#comment%3A13):\n> > Anyway this will be instantiated at startup so why not keeping one instance `QQi` in `sage.rings.number_field.number_field`? (like we have for `ZZ`, `QQ`, etc).\n\n> \n> If I remember right, currently, just adding `QQi = ...()` in the module currently doesn't work due to import order constraints. For now I just kept the creation of QQ[i] happening at the same time as it used to. But that's certainly something we should try to improve after this first draft.\n\n\nHere we can probably cheat with\n\n```\n_QQi = None\ndef NumberFieldQQi():\n    if _QQi is None:\n        # build it once for all\n        ...\n    return _QQi\n```\n\n> > Then you can test identity when testing coercions.\n\n> \n> Yes. Having a separate class would also be natural if we want `I.parent()` to display something less frightening than \u201cNumber Field in `I` with defining polynomial `x^2 + 1`\u201d, and more generally to implement features specific to QQ[i]. But I can't really think of anything that makes sense for this field and not for embedded quadratic number fields in general, so perhaps it is better to encourage people to always implement a more general version?\n\n\nYes! Having a custom representation should be done in the main class. It is already possible:\n\n```\nsage: K = QuadraticField(2)\nsage: K.rename('It's me')\nsage: K\nIt's me\nsage: K.rename(None)\nsage: K\nNumber Field in a with defining polynomial x^2 - 2\n```\n\n> A related question is whether `QQi is NumberField(x^2+1, 'I', embedding=CC.0)` should be true, or if there should be two separate parents.\n\n>\n> What do you think?\n\n\nMore generally, do we want unique representation for (absolute) number fields? I would tend to say yes. And the natural keys would be:\n- the polynomial\n- the variable name (not of the polynomial!)\n- the embedding\n\nVincent",
    "created_at": "2015-04-19T11:17:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-310988",
    "user": "https://github.com/videlec"
}
```

<a id='comment:16'></a>
Replying to [mmezzarobba](#comment%3A14):
> Replying to [vdelecroix](#comment%3A13):
> > Anyway this will be instantiated at startup so why not keeping one instance `QQi` in `sage.rings.number_field.number_field`? (like we have for `ZZ`, `QQ`, etc).

> 
> If I remember right, currently, just adding `QQi = ...()` in the module currently doesn't work due to import order constraints. For now I just kept the creation of QQ[i] happening at the same time as it used to. But that's certainly something we should try to improve after this first draft.


Here we can probably cheat with

```
_QQi = None
def NumberFieldQQi():
    if _QQi is None:
        # build it once for all
        ...
    return _QQi
```

> > Then you can test identity when testing coercions.

> 
> Yes. Having a separate class would also be natural if we want `I.parent()` to display something less frightening than “Number Field in `I` with defining polynomial `x^2 + 1`”, and more generally to implement features specific to QQ[i]. But I can't really think of anything that makes sense for this field and not for embedded quadratic number fields in general, so perhaps it is better to encourage people to always implement a more general version?


Yes! Having a custom representation should be done in the main class. It is already possible:

```
sage: K = QuadraticField(2)
sage: K.rename('It's me')
sage: K
It's me
sage: K.rename(None)
sage: K
Number Field in a with defining polynomial x^2 - 2
```

> A related question is whether `QQi is NumberField(x^2+1, 'I', embedding=CC.0)` should be true, or if there should be two separate parents.

>
> What do you think?


More generally, do we want unique representation for (absolute) number fields? I would tend to say yes. And the natural keys would be:
- the polynomial
- the variable name (not of the polynomial!)
- the embedding

Vincent



---

archive/issue_comments_310989.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [vdelecroix](#comment%3A16):\n> Yes! Having a custom representation should be done in the main class. It is already possible:\n\n\nIf all we want is a different string representation, yes, perhaps it makes sense to use `rename()`...\n\n> > A related question is whether `QQi is NumberField(x^2+1, 'I', embedding=CC.0)` should be true, or if there should be two separate parents.\n\n> >\n> > What do you think?\n\n> \n> More generally, do we want unique representation for (absolute) number fields?\n\n\nI think everyone agrees that absolute number fields should have unique representation. My question was whether Q[i] should *be* an absolute number field in this sense, or if it should be a \u201cspecial\u201d object such that people could work with both Q[i]-as-a-subset-of-complex-numbers and Q[i]-as-a-number field, possibly at the same time. I'd prefer a single object as well, but I am sure I have missed some of the implications, so if anyone has arguments in favor of the other option, I would be interested in hearing them.",
    "created_at": "2015-04-19T12:56:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-310989",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:17'></a>
Replying to [vdelecroix](#comment%3A16):
> Yes! Having a custom representation should be done in the main class. It is already possible:


If all we want is a different string representation, yes, perhaps it makes sense to use `rename()`...

> > A related question is whether `QQi is NumberField(x^2+1, 'I', embedding=CC.0)` should be true, or if there should be two separate parents.

> >
> > What do you think?

> 
> More generally, do we want unique representation for (absolute) number fields?


I think everyone agrees that absolute number fields should have unique representation. My question was whether Q[i] should *be* an absolute number field in this sense, or if it should be a “special” object such that people could work with both Q[i]-as-a-subset-of-complex-numbers and Q[i]-as-a-number field, possibly at the same time. I'd prefer a single object as well, but I am sure I have missed some of the implications, so if anyone has arguments in favor of the other option, I would be interested in hearing them.



---

archive/issue_comments_310990.json:
```json
{
    "body": "<a id='comment:18'></a>\nReplying to [mmezzarobba](#comment%3A17):\n> > > A related question is whether `QQi is NumberField(x^2+1, 'I', embedding=CC.0)` should be true, or if there should be two separate parents.\n\n> > >\n> > > What do you think?\n\n> > \n> > More generally, do we want unique representation for (absolute) number fields?\n\n> \n> I think everyone agrees that absolute number fields should have unique representation. My question was whether Q[i] should *be* an absolute number field in this sense, or if it should be a \u201cspecial\u201d object such that people could work with both Q[i]-as-a-subset-of-complex-numbers and Q[i]-as-a-number field, possibly at the same time. I'd prefer a single object as well, but I am sure I have missed some of the implications, so if anyone has arguments in favor of the other option, I would be interested in hearing them.\n\n\nI would be interested in working with **any** number field seeing them as a subfield of the real or complex numbers! Not only `QQi` and it makes sense to ask whether we need a dedicated class for that. For both parent and elements.\n\nNote that it is already partly possible to play with element of number fields as real numbers (especially with quadratic fields)\n\n```\nsage: K.<sqrt2> = QuadraticField(2)\nsage: 1 < sqrt2 < 3/2\nTrue\nsage: sqrt2.n()\n1.41421356237310\nsage: sqrt2 + CC(0,1)\n1.41421356237310 + 1.00000000000000*I\nsage: sage: cos(sqrt2)\ncos(sqrt(2))\nsage: sqrt2.continued_fraction()\n[1; (2)*]\n```\n\nAbout having methods `.cos()`, `.sin()`, `.exp()`, it is already something which I found dangerous with integers for which the method `.sqrt()` might return an answer with a different parent\n\n```\nsage: 4.sqrt()  # answer is a Sage integer\n2\nsage: 2.sqrt()  # answer is symbolic\nsqrt(2)\n```\nWhich is very different from\n\n```\nsage: R.<x> = ZZ[]\nsage: ((x+1)**2 * (x-2)**4).sqrt()\nx^3 - 3*x^2 + 4\nsage: R(2).sqrt()\nTraceback (most recent call last):\n...\nTypeError: Polynomial is not a square. You must specify\nthe name of the square root when using the default extend = True\n```\n\nAt the time Sage would support embedding of number fields into p-adic fields, I think it might be worse to have that dedicated class! But in the meantime, I have no strong opinion.\n\nVincent",
    "created_at": "2015-04-19T13:14:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-310990",
    "user": "https://github.com/videlec"
}
```

<a id='comment:18'></a>
Replying to [mmezzarobba](#comment%3A17):
> > > A related question is whether `QQi is NumberField(x^2+1, 'I', embedding=CC.0)` should be true, or if there should be two separate parents.

> > >
> > > What do you think?

> > 
> > More generally, do we want unique representation for (absolute) number fields?

> 
> I think everyone agrees that absolute number fields should have unique representation. My question was whether Q[i] should *be* an absolute number field in this sense, or if it should be a “special” object such that people could work with both Q[i]-as-a-subset-of-complex-numbers and Q[i]-as-a-number field, possibly at the same time. I'd prefer a single object as well, but I am sure I have missed some of the implications, so if anyone has arguments in favor of the other option, I would be interested in hearing them.


I would be interested in working with **any** number field seeing them as a subfield of the real or complex numbers! Not only `QQi` and it makes sense to ask whether we need a dedicated class for that. For both parent and elements.

Note that it is already partly possible to play with element of number fields as real numbers (especially with quadratic fields)

```
sage: K.<sqrt2> = QuadraticField(2)
sage: 1 < sqrt2 < 3/2
True
sage: sqrt2.n()
1.41421356237310
sage: sqrt2 + CC(0,1)
1.41421356237310 + 1.00000000000000*I
sage: sage: cos(sqrt2)
cos(sqrt(2))
sage: sqrt2.continued_fraction()
[1; (2)*]
```

About having methods `.cos()`, `.sin()`, `.exp()`, it is already something which I found dangerous with integers for which the method `.sqrt()` might return an answer with a different parent

```
sage: 4.sqrt()  # answer is a Sage integer
2
sage: 2.sqrt()  # answer is symbolic
sqrt(2)
```
Which is very different from

```
sage: R.<x> = ZZ[]
sage: ((x+1)**2 * (x-2)**4).sqrt()
x^3 - 3*x^2 + 4
sage: R(2).sqrt()
Traceback (most recent call last):
...
TypeError: Polynomial is not a square. You must specify
the name of the square root when using the default extend = True
```

At the time Sage would support embedding of number fields into p-adic fields, I think it might be worse to have that dedicated class! But in the meantime, I have no strong opinion.

Vincent



---

archive/issue_comments_310991.json:
```json
{
    "body": "<a id='comment:19'></a>\nSee also https://groups.google.com/forum/?hl=en#!topic/sage-devel/Oa0kOC-VGds",
    "created_at": "2015-10-17T13:47:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-310991",
    "user": "https://github.com/rwst"
}
```

<a id='comment:19'></a>
See also https://groups.google.com/forum/?hl=en#!topic/sage-devel/Oa0kOC-VGds



---

archive/issue_comments_310992.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [vdelecroix](#comment%3A18):\n> About having methods `.cos()`, `.sin()`, `.exp()`, it is already something which I found dangerous with integers\n\n\nStill, if we ever want this new non-symbolic `I` to behave like to old symbolic `I`, we would need to support things like that:\n\n```\n**********************************************************************\nFile \"src/sage/symbolic/expression.pyx\", line 7901, in sage.symbolic.expression.Expression.log\nFailed example:\n    I.log()\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.symbolic.expression.Expression.log[11]>\", line 1, in <module>\n        I.log()\n      File \"sage/structure/element.pyx\", line 420, in sage.structure.element.Element.__getattr__ (build/cythonized/sage/structure/element.c:4676)\n        return getattr_from_other_class(self, P._abstract_element_class, name)\n      File \"sage/structure/misc.pyx\", line 259, in sage.structure.misc.getattr_from_other_class (build/cythonized/sage/structure/misc.c:1772)\n        raise dummy_attribute_error\n    AttributeError: 'sage.rings.number_field.number_field_element_quadratic.NumberFieldElement_quadratic' object has no attribute 'log'\n**********************************************************************\n```",
    "created_at": "2016-01-05T12:46:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-310992",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:20'></a>
Replying to [vdelecroix](#comment%3A18):
> About having methods `.cos()`, `.sin()`, `.exp()`, it is already something which I found dangerous with integers


Still, if we ever want this new non-symbolic `I` to behave like to old symbolic `I`, we would need to support things like that:

```
**********************************************************************
File "src/sage/symbolic/expression.pyx", line 7901, in sage.symbolic.expression.Expression.log
Failed example:
    I.log()
Exception raised:
    Traceback (most recent call last):
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.symbolic.expression.Expression.log[11]>", line 1, in <module>
        I.log()
      File "sage/structure/element.pyx", line 420, in sage.structure.element.Element.__getattr__ (build/cythonized/sage/structure/element.c:4676)
        return getattr_from_other_class(self, P._abstract_element_class, name)
      File "sage/structure/misc.pyx", line 259, in sage.structure.misc.getattr_from_other_class (build/cythonized/sage/structure/misc.c:1772)
        raise dummy_attribute_error
    AttributeError: 'sage.rings.number_field.number_field_element_quadratic.NumberFieldElement_quadratic' object has no attribute 'log'
**********************************************************************
```



---

archive/issue_comments_310993.json:
```json
{
    "body": "Changing branch from \"\" to \"u/jdemeyer/i_parent___should_not_be_the_symbolic_ring\"",
    "created_at": "2016-01-05T12:56:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-310993",
    "user": "https://github.com/jdemeyer"
}
```

Changing branch from "" to "u/jdemeyer/i_parent___should_not_be_the_symbolic_ring"



---

archive/issue_comments_310994.json:
```json
{
    "body": "Changing commit from \"\" to \"2f5a5198849c5b96bc2733e1e5853dc1b23f1cf9\"",
    "created_at": "2016-03-07T09:57:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-310994",
    "user": "https://github.com/behackl"
}
```

Changing commit from "" to "2f5a5198849c5b96bc2733e1e5853dc1b23f1cf9"



---

archive/issue_comments_310995.json:
```json
{
    "body": "<a id='comment:22'></a>\nNew commits:\n|                                                                                                                                          |                                    |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|\n|[2f5a519](http://git.sagemath.org/sage.git/commit/?id=2f5a5198849c5b96bc2733e1e5853dc1b23f1cf9)|`parent(I) should be a number field`|",
    "created_at": "2016-03-07T09:57:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-310995",
    "user": "https://github.com/behackl"
}
```

<a id='comment:22'></a>
New commits:
|                                                                                                                                          |                                    |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|
|[2f5a519](http://git.sagemath.org/sage.git/commit/?id=2f5a5198849c5b96bc2733e1e5853dc1b23f1cf9)|`parent(I) should be a number field`|



---

archive/issue_comments_310996.json:
```json
{
    "body": "<a id='comment:24'></a>\nHi! I'd like to revive this discussion a bit because we're getting a doctest failure at https://github.com/pynac/pynac/pull/162 which would probably be fixed along the lines of this ticket.\n\nFor starters, I had a look at the current branch and some of the resulting doctest failures; this should roughly resemble the tasks that are still to be done:\n\n* `sage -t --warn-long 54.2 src/sage/symbolic/constants.py  # 3 doctests failed`;\n`sage -t --warn-long 54.2 src/sage/symbolic/pynac.pyx  # 3 doctests failed`: \n\n  duplicate doctests. not sure how to fix (maybe switch to I_symbolic?). and which to remove.\n\n* `sage -t --warn-long 54.2 src/sage/symbolic/relation.py  # 3 doctests failed`:\n\n  Doctests can be fixed directly.\n\n* `sage -t --warn-long 54.2 src/sage/symbolic/expression_conversions.py  # 2 doctests failed`\n\n  probably I_symbolic is needed?\n\n* `sage -t --warn-long 54.2 src/sage/symbolic/expression.pyx  # 14 doctests failed`\n  *  arithmetic with `oo` is broken (4 doctests)\n  *  `_is_registered_constant_` --> remove doctest? I_symbolic?\n  *  `is_numeric`/`is_constant` missing (I_symbolic?)\n  *  `imag_part`/`real_part` should be an alias of `imag`/`real` (3 doctests)\n  *  `I.log` not implemented (3 doctests)\n  * `rectform`: either converse to SR or multiply with I_symbolic.\n\n* `sage -t --warn-long 54.2 src/sage/rings/infinity.py  # 2 doctests failed`\n\n  arithmetic with `oo` is broken.\n\n* `sage -t --warn-long 54.2 src/sage/rings/complex_mpc.pyx  # 8 doctests failed` and `sage -t --warn-long 54.2 src/sage/rings/complex_arb.pyx  # 7 doctests failed`\n  * coercion errors: `ValueError: Cannot coerce algebraic number with non-zero imaginary part to algebraic real`\n  * precision regressions.\n\n* `sage -t --warn-long 54.2 src/sage/rings/qqbar.py  # 6 doctests failed`\n  \n  common parent issue: `TypeError: unsupported operand parent(s) for '+': 'Algebraic Field' and 'Number Field in I with defining polynomial x^2 + 1'`\n\n* `sage -t --warn-long 54.2 src/sage/rings/number_field/number_field_element_quadratic.pyx  # 1 doctest failed`\n\n  common parent issue: `TypeError: unsupported operand parent(s) for '*': 'Number Field in I with defining polynomial x^2 + 1' and 'Number Field in sqrt3 with defining polynomial x^2 - 3'`\n\n* `sage -t --warn-long 54.2 src/sage/rings/polynomial/polynomial_rational_flint.pyx  # 1 doctest failed`\n\n  false error is raised\n\n* `sage -t --warn-long 54.2 src/sage/rings/polynomial/cyclotomic.pyx  # 2 doctests failed`\n\n  both can be fixed directly.\n\n* Stuff in `sage/geometry/hyperbolic_space/hyperbolic_*.py` breaks down:\n  * `sage -t --warn-long 51.1 src/sage/geometry/hyperbolic_space/hyperbolic_point.py  # 1 doctest failed`\n  * `sage -t --warn-long 51.1 src/sage/geometry/hyperbolic_space/hyperbolic_geodesic.py  # 4 doctests failed`\n  * `sage -t --warn-long 51.1 src/sage/geometry/hyperbolic_space/hyperbolic_isometry.py  # 1 doctest failed`\n  * `sage -t --warn-long 51.1 src/sage/geometry/hyperbolic_space/hyperbolic_model.py  # 2 doctests failed`\n\n  Not sure about these errors, some seem to be coercion related, others are just `TypeError: 'sage.rings.complex_number.ComplexNumber' object is not callable`---maybe that goes away along the way.\n\n\nThese are certainly not all failures, but they should give an idea of what breaks down. The biggest issue seems to be coercion...",
    "created_at": "2016-03-07T12:54:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-310996",
    "user": "https://github.com/behackl"
}
```

<a id='comment:24'></a>
Hi! I'd like to revive this discussion a bit because we're getting a doctest failure at https://github.com/pynac/pynac/pull/162 which would probably be fixed along the lines of this ticket.

For starters, I had a look at the current branch and some of the resulting doctest failures; this should roughly resemble the tasks that are still to be done:

* `sage -t --warn-long 54.2 src/sage/symbolic/constants.py  # 3 doctests failed`;
`sage -t --warn-long 54.2 src/sage/symbolic/pynac.pyx  # 3 doctests failed`: 

  duplicate doctests. not sure how to fix (maybe switch to I_symbolic?). and which to remove.

* `sage -t --warn-long 54.2 src/sage/symbolic/relation.py  # 3 doctests failed`:

  Doctests can be fixed directly.

* `sage -t --warn-long 54.2 src/sage/symbolic/expression_conversions.py  # 2 doctests failed`

  probably I_symbolic is needed?

* `sage -t --warn-long 54.2 src/sage/symbolic/expression.pyx  # 14 doctests failed`
  *  arithmetic with `oo` is broken (4 doctests)
  *  `_is_registered_constant_` --> remove doctest? I_symbolic?
  *  `is_numeric`/`is_constant` missing (I_symbolic?)
  *  `imag_part`/`real_part` should be an alias of `imag`/`real` (3 doctests)
  *  `I.log` not implemented (3 doctests)
  * `rectform`: either converse to SR or multiply with I_symbolic.

* `sage -t --warn-long 54.2 src/sage/rings/infinity.py  # 2 doctests failed`

  arithmetic with `oo` is broken.

* `sage -t --warn-long 54.2 src/sage/rings/complex_mpc.pyx  # 8 doctests failed` and `sage -t --warn-long 54.2 src/sage/rings/complex_arb.pyx  # 7 doctests failed`
  * coercion errors: `ValueError: Cannot coerce algebraic number with non-zero imaginary part to algebraic real`
  * precision regressions.

* `sage -t --warn-long 54.2 src/sage/rings/qqbar.py  # 6 doctests failed`
  
  common parent issue: `TypeError: unsupported operand parent(s) for '+': 'Algebraic Field' and 'Number Field in I with defining polynomial x^2 + 1'`

* `sage -t --warn-long 54.2 src/sage/rings/number_field/number_field_element_quadratic.pyx  # 1 doctest failed`

  common parent issue: `TypeError: unsupported operand parent(s) for '*': 'Number Field in I with defining polynomial x^2 + 1' and 'Number Field in sqrt3 with defining polynomial x^2 - 3'`

* `sage -t --warn-long 54.2 src/sage/rings/polynomial/polynomial_rational_flint.pyx  # 1 doctest failed`

  false error is raised

* `sage -t --warn-long 54.2 src/sage/rings/polynomial/cyclotomic.pyx  # 2 doctests failed`

  both can be fixed directly.

* Stuff in `sage/geometry/hyperbolic_space/hyperbolic_*.py` breaks down:
  * `sage -t --warn-long 51.1 src/sage/geometry/hyperbolic_space/hyperbolic_point.py  # 1 doctest failed`
  * `sage -t --warn-long 51.1 src/sage/geometry/hyperbolic_space/hyperbolic_geodesic.py  # 4 doctests failed`
  * `sage -t --warn-long 51.1 src/sage/geometry/hyperbolic_space/hyperbolic_isometry.py  # 1 doctest failed`
  * `sage -t --warn-long 51.1 src/sage/geometry/hyperbolic_space/hyperbolic_model.py  # 2 doctests failed`

  Not sure about these errors, some seem to be coercion related, others are just `TypeError: 'sage.rings.complex_number.ComplexNumber' object is not callable`---maybe that goes away along the way.


These are certainly not all failures, but they should give an idea of what breaks down. The biggest issue seems to be coercion...



---

archive/issue_comments_310997.json:
```json
{
    "body": "<a id='comment:25'></a>\nReplying to [behackl](#comment%3A24):\n> The biggest issue seems to be coercion...\n\n\nAnd stuff like `I.log()`.",
    "created_at": "2016-03-07T13:00:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-310997",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:25'></a>
Replying to [behackl](#comment%3A24):
> The biggest issue seems to be coercion...


And stuff like `I.log()`.



---

archive/issue_comments_310998.json:
```json
{
    "body": "<a id='comment:26'></a>\nReplying to [behackl](#comment%3A24):\n> * `sage -t --warn-long 54.2 src/sage/rings/infinity.py  # 2 doctests failed`\n> \n>   arithmetic with `oo` is broken.\n\n\nIt's just missing coercion of number field elements into the infinity ring. It would give a `SignError` anyway.",
    "created_at": "2016-03-07T14:46:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-310998",
    "user": "https://github.com/rwst"
}
```

<a id='comment:26'></a>
Replying to [behackl](#comment%3A24):
> * `sage -t --warn-long 54.2 src/sage/rings/infinity.py  # 2 doctests failed`
> 
>   arithmetic with `oo` is broken.


It's just missing coercion of number field elements into the infinity ring. It would give a `SignError` anyway.



---

archive/issue_comments_310999.json:
```json
{
    "body": "<a id='comment:27'></a>\nWould \n\n```\nA = GaussianIntegers()\nA(1+I)\n```\nwork with this branch?",
    "created_at": "2016-06-22T20:09:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-310999",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:27'></a>
Would 

```
A = GaussianIntegers()
A(1+I)
```
work with this branch?



---

archive/issue_comments_311000.json:
```json
{
    "body": "<a id='comment:28'></a>\nReplying to [kcrisman](#comment%3A27):\n\n```\nsage: A = GaussianIntegers()\nsage: A(1+I)\nI + 1\nsage: type(_)\n<type 'sage.rings.number_field.number_field_element_quadratic.OrderElement_quadratic'>\n```",
    "created_at": "2016-06-25T06:32:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311000",
    "user": "https://github.com/rwst"
}
```

<a id='comment:28'></a>
Replying to [kcrisman](#comment%3A27):

```
sage: A = GaussianIntegers()
sage: A(1+I)
I + 1
sage: type(_)
<type 'sage.rings.number_field.number_field_element_quadratic.OrderElement_quadratic'>
```



---

archive/issue_comments_311001.json:
```json
{
    "body": "<a id='comment:29'></a>\nThanks!  That is definitely a motivation for me to review this next week ... any sense on whether the various doctest failures are \"real\", as opposed to just fixes like[comment:26](#comment%3A26)?",
    "created_at": "2016-06-25T11:50:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311001",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:29'></a>
Thanks!  That is definitely a motivation for me to review this next week ... any sense on whether the various doctest failures are "real", as opposed to just fixes like[comment:26](#comment%3A26)?



---

archive/issue_comments_311002.json:
```json
{
    "body": "<a id='comment:30'></a>\nWhat's a \"real\" doctest failure? Some features of `SR` simply are not supported for number field elements.",
    "created_at": "2016-06-25T16:29:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311002",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:30'></a>
What's a "real" doctest failure? Some features of `SR` simply are not supported for number field elements.



---

archive/issue_comments_311003.json:
```json
{
    "body": "<a id='comment:31'></a>\nSo, we must have two different `I`s.\n\nThis interface duplication creates a similar problems to the one with pos.char. elements (either ring elements or symbolic `Mod`). I think what's most understandable to the user would be a switch that prevents mixing and whose value is clearly visible on startup like `symbolic I mode is ON`. I know this goes against the no globals rules but I predict no one will accept having to input `symbolic_I`, and we will get hell for that.",
    "created_at": "2016-06-26T13:02:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311003",
    "user": "https://github.com/rwst"
}
```

<a id='comment:31'></a>
So, we must have two different `I`s.

This interface duplication creates a similar problems to the one with pos.char. elements (either ring elements or symbolic `Mod`). I think what's most understandable to the user would be a switch that prevents mixing and whose value is clearly visible on startup like `symbolic I mode is ON`. I know this goes against the no globals rules but I predict no one will accept having to input `symbolic_I`, and we will get hell for that.



---

archive/issue_comments_311004.json:
```json
{
    "body": "<a id='comment:32'></a>\nReplying to [rws](#comment%3A31):\n> So, we must have two different `I`s.\n\n\nI've lost track what the exact issues are that lead to that conclusion, but I would definitely prefer if we don't do that. I think we can avoid it for the following reason:\n\nSage itself needs *many* different I's. For one thing, every `ComplexField(b)` needs its own. We'd like coercion to take care of creating the many different I's. I guess we're now finding it's difficult to find a parent that coerces into sufficiently many complex parents.\n\nIf that is the case, perhaps we should solve the problem by just having a `LiteralI`, just as we have `RealLiteral` to avoid the precision coercion problems that arise with floats. The advantage is that its coercion properties can be tailored exactly to what we need (within the bounds of what coercion can handle in the first place)\n\nIt doesn't surprise me that I is problematic that way. It is, after all, an object that represents multiple values.",
    "created_at": "2016-06-26T14:23:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311004",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:32'></a>
Replying to [rws](#comment%3A31):
> So, we must have two different `I`s.


I've lost track what the exact issues are that lead to that conclusion, but I would definitely prefer if we don't do that. I think we can avoid it for the following reason:

Sage itself needs *many* different I's. For one thing, every `ComplexField(b)` needs its own. We'd like coercion to take care of creating the many different I's. I guess we're now finding it's difficult to find a parent that coerces into sufficiently many complex parents.

If that is the case, perhaps we should solve the problem by just having a `LiteralI`, just as we have `RealLiteral` to avoid the precision coercion problems that arise with floats. The advantage is that its coercion properties can be tailored exactly to what we need (within the bounds of what coercion can handle in the first place)

It doesn't surprise me that I is problematic that way. It is, after all, an object that represents multiple values.



---

archive/issue_comments_311005.json:
```json
{
    "body": "<a id='comment:33'></a>\nReplying to [rws](#comment%3A31):\n> So, we must have two different `I`s.\n\n\nWe really should not do that. Ideally, `I` should be some number field element but which allows the appropriate symbolic operations.",
    "created_at": "2016-06-26T15:19:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311005",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:33'></a>
Replying to [rws](#comment%3A31):
> So, we must have two different `I`s.


We really should not do that. Ideally, `I` should be some number field element but which allows the appropriate symbolic operations.



---

archive/issue_comments_311006.json:
```json
{
    "body": "<a id='comment:34'></a>\nReplying to [jdemeyer](#comment%3A33):\n> Ideally, `I` should be some number field element but which allows the appropriate symbolic operations.\n\n\nWell, if the operation's name is a registered function\n, convert to symbolic, apply, convert back?",
    "created_at": "2016-06-26T15:28:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311006",
    "user": "https://github.com/rwst"
}
```

<a id='comment:34'></a>
Replying to [jdemeyer](#comment%3A33):
> Ideally, `I` should be some number field element but which allows the appropriate symbolic operations.


Well, if the operation's name is a registered function
, convert to symbolic, apply, convert back?



---

archive/issue_comments_311007.json:
```json
{
    "body": "<a id='comment:35'></a>\nSee also #22208.",
    "created_at": "2017-01-20T01:55:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311007",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:35'></a>
See also #22208.



---

archive/issue_comments_311008.json:
```json
{
    "body": "Changing branch from \"u/jdemeyer/i_parent___should_not_be_the_symbolic_ring\" to \"public/18036\"",
    "created_at": "2017-02-20T07:20:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311008",
    "user": "https://github.com/rwst"
}
```

Changing branch from "u/jdemeyer/i_parent___should_not_be_the_symbolic_ring" to "public/18036"



---

archive/issue_comments_311009.json:
```json
{
    "body": "<a id='comment:37'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|\n|[d7fab0b](https://git.sagemath.org/sage.git/commit/?id=d7fab0b6a8628301543ed7bfae70380e1d6fa714)|`Merge branch 'develop' into t/18036/public/18036`|",
    "created_at": "2018-03-04T15:21:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311009",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:37'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|
|[d7fab0b](https://git.sagemath.org/sage.git/commit/?id=d7fab0b6a8628301543ed7bfae70380e1d6fa714)|`Merge branch 'develop' into t/18036/public/18036`|



---

archive/issue_comments_311010.json:
```json
{
    "body": "Changing commit from \"2f5a5198849c5b96bc2733e1e5853dc1b23f1cf9\" to \"d7fab0b6a8628301543ed7bfae70380e1d6fa714\"",
    "created_at": "2018-03-04T15:21:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311010",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2f5a5198849c5b96bc2733e1e5853dc1b23f1cf9" to "d7fab0b6a8628301543ed7bfae70380e1d6fa714"



---

archive/issue_events_051208.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-18T19:41:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18036#event-51208"
}
```



---

archive/issue_events_051209.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-29T16:37:33Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18036#event-51209"
}
```



---

archive/issue_events_051210.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-29T16:37:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18036#event-51210"
}
```



---

archive/issue_comments_311011.json:
```json
{
    "body": "Changing commit from \"d7fab0b6a8628301543ed7bfae70380e1d6fa714\" to \"2657cd768a920d339cc7bc9d2b4dd88cf3862d8d\"",
    "created_at": "2020-10-19T08:55:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311011",
    "user": "https://github.com/mezzarobba"
}
```

Changing commit from "d7fab0b6a8628301543ed7bfae70380e1d6fa714" to "2657cd768a920d339cc7bc9d2b4dd88cf3862d8d"



---

archive/issue_comments_311012.json:
```json
{
    "body": "Changing author from \"\" to \"Marc Mezzarobba\"",
    "created_at": "2020-10-19T08:55:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311012",
    "user": "https://github.com/mezzarobba"
}
```

Changing author from "" to "Marc Mezzarobba"



---

archive/issue_comments_311013.json:
```json
{
    "body": "<a id='comment:40'></a>\nTime to reboot this ticket! (Still a bit of a work in progress, comments welcome.)",
    "created_at": "2020-10-19T08:55:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311013",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:40'></a>
Time to reboot this ticket! (Still a bit of a work in progress, comments welcome.)



---

archive/issue_comments_311014.json:
```json
{
    "body": "Changing branch from \"public/18036\" to \"u/mmezzarobba/18036-QQi\"",
    "created_at": "2020-10-19T08:55:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311014",
    "user": "https://github.com/mezzarobba"
}
```

Changing branch from "public/18036" to "u/mmezzarobba/18036-QQi"



---

archive/issue_comments_311015.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,7 @@\n-As suggested in #7545, `I` (so that `I^2 = -1`) should be defined directly as the generator of `QuadraticField(-1)` and not wrapped into a symbolic expression.\n+As suggested in #7545, this ticket defines the imaginary unit `I` directly as the generator of `QuadraticField(-1)` instead of wrapping it in a symbolic expression.\n \n-Currently, `I` is defined in `sage/symbolic/pynac.pyx` within the function `init_pynac_I`.\n+**Why?** To allow it to be used in combination with elements of QQbar, CC, etc., without coercion forcing the expression to SR. For example, `1.0 + I` is now an element of CC instead of SR.\n+\n+**How?** We set `I` in sage.all to the generator of \u211a[i], and deprecate importing it from `sage.symbolic.I`. The symbolic `I` remains available from `sage.symbolic.constants` for library code working with symbolic expressions, and as `SR(I)` or `SR.I()`. We create a dedicated subclass of quadratic number field elements to make it possible to support features similar to those of symbolic expressions of the form `a + I*b` that would not make sense for number field elements (or be too hard to implement, or pollute the namespace).\n+\n+**Why not \u2124[i]?** Because the class hierarchy of number field and order elements makes it difficult to provide the compatibility features mentioned above for elements of both \u2124[i] and \u211a[i]. Having `I` be an element of \u211a[i] covers almost all use cases (all except working with algebraic integers?), and people who work with orders are sophisticated enough to explicitly ask for I\u00a0\u2208\u00a0\u2124[i] when they need that. (This is a debatable choice. We could probably do without the dedicated subclass for elements of \u211a[i], at the price of breaking backward compatibility a bit more.)\n``````\n",
    "created_at": "2020-10-19T08:55:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311015",
    "user": "https://github.com/mezzarobba"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,7 @@
-As suggested in #7545, `I` (so that `I^2 = -1`) should be defined directly as the generator of `QuadraticField(-1)` and not wrapped into a symbolic expression.
+As suggested in #7545, this ticket defines the imaginary unit `I` directly as the generator of `QuadraticField(-1)` instead of wrapping it in a symbolic expression.
 
-Currently, `I` is defined in `sage/symbolic/pynac.pyx` within the function `init_pynac_I`.
+**Why?** To allow it to be used in combination with elements of QQbar, CC, etc., without coercion forcing the expression to SR. For example, `1.0 + I` is now an element of CC instead of SR.
+
+**How?** We set `I` in sage.all to the generator of ℚ[i], and deprecate importing it from `sage.symbolic.I`. The symbolic `I` remains available from `sage.symbolic.constants` for library code working with symbolic expressions, and as `SR(I)` or `SR.I()`. We create a dedicated subclass of quadratic number field elements to make it possible to support features similar to those of symbolic expressions of the form `a + I*b` that would not make sense for number field elements (or be too hard to implement, or pollute the namespace).
+
+**Why not ℤ[i]?** Because the class hierarchy of number field and order elements makes it difficult to provide the compatibility features mentioned above for elements of both ℤ[i] and ℚ[i]. Having `I` be an element of ℚ[i] covers almost all use cases (all except working with algebraic integers?), and people who work with orders are sophisticated enough to explicitly ask for I ∈ ℤ[i] when they need that. (This is a debatable choice. We could probably do without the dedicated subclass for elements of ℚ[i], at the price of breaking backward compatibility a bit more.)
``````




---

archive/issue_comments_311016.json:
```json
{
    "body": "<a id='comment:41'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n|                                                                                                                                           |                                              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|\n|[2d8979c](https://git.sagemath.org/sage.git/commit/?id=2d8979cadc457e7c0b5a11e4feba2e3209d59cbe)|`#18036 change global I to an element of \u211a[i]`|\n|[953aa1e](https://git.sagemath.org/sage.git/commit/?id=953aa1ee6242329f942a55473e068b62cd8266d9)|`#18036 add SR.I() for conversion-less access to the symbolic I`|\n|[68ac2e7](https://git.sagemath.org/sage.git/commit/?id=68ac2e799d17e28383d6881aa6863e2fc3b25035)|`#18036 add a dedicated element class for \u211a[i]`|\n|[6409f1e](https://git.sagemath.org/sage.git/commit/?id=6409f1e5300205977d6c4e1b1da506b3eaba8466)|`#18026 explicit pushout(InfinityRing, *) -> SR`|\n|[2c68f5c](https://git.sagemath.org/sage.git/commit/?id=2c68f5c0b50b9379c165c7073ff62f446284db6d)|`#18036 fix imports of I from symbolic.all`|\n|[544c141](https://git.sagemath.org/sage.git/commit/?id=544c141c9120ea79a7f00b392bae41bf309bc881)|`#18036 update some doctests using I.pyobject()`|\n|[8a1ffe9](https://git.sagemath.org/sage.git/commit/?id=8a1ffe91ce02e675b3fe48342a16f342313e3def)|`#18036 I \u2192 SR(I) in some doctests`|\n|[79d4513](https://git.sagemath.org/sage.git/commit/?id=79d4513a1c3077be1e95a5536070a9850baba4be)|`#18036 minor code adaptations in rings/`|\n|[597ccc4](https://git.sagemath.org/sage.git/commit/?id=597ccc4c1750d1bf2ddd0a428226c76146335f7e)|`#18036 update some doctests in rings/`|\n|[4d2df78](https://git.sagemath.org/sage.git/commit/?id=4d2df78446d3b3fcadde1a8b9431451a8bc537fe)|`#18036 miscellaneous doctest updates`|",
    "created_at": "2020-10-19T08:56:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311016",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:41'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
|                                                                                                                                           |                                              |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|
|[2d8979c](https://git.sagemath.org/sage.git/commit/?id=2d8979cadc457e7c0b5a11e4feba2e3209d59cbe)|`#18036 change global I to an element of ℚ[i]`|
|[953aa1e](https://git.sagemath.org/sage.git/commit/?id=953aa1ee6242329f942a55473e068b62cd8266d9)|`#18036 add SR.I() for conversion-less access to the symbolic I`|
|[68ac2e7](https://git.sagemath.org/sage.git/commit/?id=68ac2e799d17e28383d6881aa6863e2fc3b25035)|`#18036 add a dedicated element class for ℚ[i]`|
|[6409f1e](https://git.sagemath.org/sage.git/commit/?id=6409f1e5300205977d6c4e1b1da506b3eaba8466)|`#18026 explicit pushout(InfinityRing, *) -> SR`|
|[2c68f5c](https://git.sagemath.org/sage.git/commit/?id=2c68f5c0b50b9379c165c7073ff62f446284db6d)|`#18036 fix imports of I from symbolic.all`|
|[544c141](https://git.sagemath.org/sage.git/commit/?id=544c141c9120ea79a7f00b392bae41bf309bc881)|`#18036 update some doctests using I.pyobject()`|
|[8a1ffe9](https://git.sagemath.org/sage.git/commit/?id=8a1ffe91ce02e675b3fe48342a16f342313e3def)|`#18036 I → SR(I) in some doctests`|
|[79d4513](https://git.sagemath.org/sage.git/commit/?id=79d4513a1c3077be1e95a5536070a9850baba4be)|`#18036 minor code adaptations in rings/`|
|[597ccc4](https://git.sagemath.org/sage.git/commit/?id=597ccc4c1750d1bf2ddd0a428226c76146335f7e)|`#18036 update some doctests in rings/`|
|[4d2df78](https://git.sagemath.org/sage.git/commit/?id=4d2df78446d3b3fcadde1a8b9431451a8bc537fe)|`#18036 miscellaneous doctest updates`|



---

archive/issue_comments_311017.json:
```json
{
    "body": "Changing commit from \"2657cd768a920d339cc7bc9d2b4dd88cf3862d8d\" to \"4d2df78446d3b3fcadde1a8b9431451a8bc537fe\"",
    "created_at": "2020-10-19T08:56:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311017",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2657cd768a920d339cc7bc9d2b4dd88cf3862d8d" to "4d2df78446d3b3fcadde1a8b9431451a8bc537fe"



---

archive/issue_comments_311018.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-10-19T08:57:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311018",
    "user": "https://github.com/mezzarobba"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_311019.json:
```json
{
    "body": "Changing commit from \"4d2df78446d3b3fcadde1a8b9431451a8bc537fe\" to \"e47cd5bff02a0ca5072cc2ee79cfdf42f0b4ca6c\"",
    "created_at": "2020-10-19T11:40:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311019",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4d2df78446d3b3fcadde1a8b9431451a8bc537fe" to "e47cd5bff02a0ca5072cc2ee79cfdf42f0b4ca6c"



---

archive/issue_comments_311020.json:
```json
{
    "body": "<a id='comment:43'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|\n|[92254a3](https://git.sagemath.org/sage.git/commit/?id=92254a365d8929af4f25972fba3b842730688af0)|`#18036 fix imports of I from symbolic.all`|\n|[4d16638](https://git.sagemath.org/sage.git/commit/?id=4d1663870d5e58c2863fc6d9f1099f100ab9acd9)|`#18036 update some doctests using I.pyobject()`|\n|[f6f4bba](https://git.sagemath.org/sage.git/commit/?id=f6f4bbaf28d845aa6bf15e2d720e99dba8ad8d43)|`#18036 I \u2192 SR(I) in some doctests`|\n|[fb2cbf0](https://git.sagemath.org/sage.git/commit/?id=fb2cbf0154162df13800eebd1033ded4aafbfe80)|`#18036 minor code adaptations in rings/`|\n|[272137a](https://git.sagemath.org/sage.git/commit/?id=272137a743000c921c6f80a23f97ef3132b6cdf6)|`#18036 update some doctests in rings/`|\n|[e47cd5b](https://git.sagemath.org/sage.git/commit/?id=e47cd5bff02a0ca5072cc2ee79cfdf42f0b4ca6c)|`#18036 miscellaneous doctest updates`|",
    "created_at": "2020-10-19T11:40:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311020",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:43'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|
|[92254a3](https://git.sagemath.org/sage.git/commit/?id=92254a365d8929af4f25972fba3b842730688af0)|`#18036 fix imports of I from symbolic.all`|
|[4d16638](https://git.sagemath.org/sage.git/commit/?id=4d1663870d5e58c2863fc6d9f1099f100ab9acd9)|`#18036 update some doctests using I.pyobject()`|
|[f6f4bba](https://git.sagemath.org/sage.git/commit/?id=f6f4bbaf28d845aa6bf15e2d720e99dba8ad8d43)|`#18036 I → SR(I) in some doctests`|
|[fb2cbf0](https://git.sagemath.org/sage.git/commit/?id=fb2cbf0154162df13800eebd1033ded4aafbfe80)|`#18036 minor code adaptations in rings/`|
|[272137a](https://git.sagemath.org/sage.git/commit/?id=272137a743000c921c6f80a23f97ef3132b6cdf6)|`#18036 update some doctests in rings/`|
|[e47cd5b](https://git.sagemath.org/sage.git/commit/?id=e47cd5bff02a0ca5072cc2ee79cfdf42f0b4ca6c)|`#18036 miscellaneous doctest updates`|



---

archive/issue_comments_311021.json:
```json
{
    "body": "<a id='comment:44'></a>\nI can't speak to all the small changes that impact number field users, but I really like how atomic your commits are, well explained, and overall you seem to have a good approach.  And if the doctests still pass, that might be a good sign in and of itself (though obviously shouldn't be added to an rc at this late date).  Can anyone think of any other \"extra\" methods like `real_part` that should be added in `class NumberFieldElement_gaussian`?",
    "created_at": "2020-10-19T14:47:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311021",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:44'></a>
I can't speak to all the small changes that impact number field users, but I really like how atomic your commits are, well explained, and overall you seem to have a good approach.  And if the doctests still pass, that might be a good sign in and of itself (though obviously shouldn't be added to an rc at this late date).  Can anyone think of any other "extra" methods like `real_part` that should be added in `class NumberFieldElement_gaussian`?



---

archive/issue_comments_311022.json:
```json
{
    "body": "Changing commit from \"e47cd5bff02a0ca5072cc2ee79cfdf42f0b4ca6c\" to \"c4d4fa750c0220b3c5b56d7bdd05651498dd3614\"",
    "created_at": "2020-10-20T06:10:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311022",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e47cd5bff02a0ca5072cc2ee79cfdf42f0b4ca6c" to "c4d4fa750c0220b3c5b56d7bdd05651498dd3614"



---

archive/issue_comments_311023.json:
```json
{
    "body": "<a id='comment:45'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|\n|[a223789](https://git.sagemath.org/sage.git/commit/?id=a223789d70398c2fa3f56f83cda07892aa679c8e)|`[wip] attempt to fix the issues with pari`|\n|[c4d4fa7](https://git.sagemath.org/sage.git/commit/?id=c4d4fa750c0220b3c5b56d7bdd05651498dd3614)|`[wip] further doctest updates`|",
    "created_at": "2020-10-20T06:10:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311023",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:45'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|
|[a223789](https://git.sagemath.org/sage.git/commit/?id=a223789d70398c2fa3f56f83cda07892aa679c8e)|`[wip] attempt to fix the issues with pari`|
|[c4d4fa7](https://git.sagemath.org/sage.git/commit/?id=c4d4fa750c0220b3c5b56d7bdd05651498dd3614)|`[wip] further doctest updates`|



---

archive/issue_comments_311024.json:
```json
{
    "body": "<a id='comment:46'></a>\nReplying to [kcrisman](#comment%3A44):\n> I can't speak to all the small changes that impact number field users,\n\n\nIt should not have much impact, except maybe for the conversion to pari which is overridden to return a pari object of the form a+I*b instead of a element of a quotient ring. I don't know pari well enough to be able to tell if that can be an issue.\n\n> but I really like how atomic your commits are, well explained, and overall you seem to have a good approach.\n\n\nThank you!\n\n> And if the doctests still pass, that might be a good sign in and of itself (though obviously shouldn't be added to an rc at this late date).\n\n\nNo. Ideally, I would like it to be merged early in the next release cycle, so that we have time to sort out any issues.\n\n> Can anyone think of any other \"extra\" methods like `real_part` that should be added in `class NumberFieldElement_gaussian`?\n\n\nThere was a discussion above about possibly supporting a significant subset of the methods of symbolic expressions, including elementary and special functions. I am reluctant to do that, because we will never achieve  perfect compatibility, and integers and rationals already  have their own API (so that users already need explicit conversions to SR in many cases if they want to use methods of symbolic expressions). But there may still be other methods  that make sense to add.",
    "created_at": "2020-10-20T06:27:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311024",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:46'></a>
Replying to [kcrisman](#comment%3A44):
> I can't speak to all the small changes that impact number field users,


It should not have much impact, except maybe for the conversion to pari which is overridden to return a pari object of the form a+I*b instead of a element of a quotient ring. I don't know pari well enough to be able to tell if that can be an issue.

> but I really like how atomic your commits are, well explained, and overall you seem to have a good approach.


Thank you!

> And if the doctests still pass, that might be a good sign in and of itself (though obviously shouldn't be added to an rc at this late date).


No. Ideally, I would like it to be merged early in the next release cycle, so that we have time to sort out any issues.

> Can anyone think of any other "extra" methods like `real_part` that should be added in `class NumberFieldElement_gaussian`?


There was a discussion above about possibly supporting a significant subset of the methods of symbolic expressions, including elementary and special functions. I am reluctant to do that, because we will never achieve  perfect compatibility, and integers and rationals already  have their own API (so that users already need explicit conversions to SR in many cases if they want to use methods of symbolic expressions). But there may still be other methods  that make sense to add.



---

archive/issue_comments_311025.json:
```json
{
    "body": "<a id='comment:47'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|\n|[701658e](https://git.sagemath.org/sage.git/commit/?id=701658e21be0c30ad7aa68c5f6fc9b945a6961c6)|`[wip] attempt to fix the issues with pari`|\n|[3ab8aa6](https://git.sagemath.org/sage.git/commit/?id=3ab8aa6a01ee9c4f6e4040b3f7817f3d8a81f1fa)|`[wip] further doctest updates`|",
    "created_at": "2020-10-20T10:41:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311025",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:47'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|
|[701658e](https://git.sagemath.org/sage.git/commit/?id=701658e21be0c30ad7aa68c5f6fc9b945a6961c6)|`[wip] attempt to fix the issues with pari`|
|[3ab8aa6](https://git.sagemath.org/sage.git/commit/?id=3ab8aa6a01ee9c4f6e4040b3f7817f3d8a81f1fa)|`[wip] further doctest updates`|



---

archive/issue_comments_311026.json:
```json
{
    "body": "Changing commit from \"c4d4fa750c0220b3c5b56d7bdd05651498dd3614\" to \"3ab8aa6a01ee9c4f6e4040b3f7817f3d8a81f1fa\"",
    "created_at": "2020-10-20T10:41:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311026",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c4d4fa750c0220b3c5b56d7bdd05651498dd3614" to "3ab8aa6a01ee9c4f6e4040b3f7817f3d8a81f1fa"



---

archive/issue_comments_311027.json:
```json
{
    "body": "<a id='comment:48'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|\n|[ef659d9](https://git.sagemath.org/sage.git/commit/?id=ef659d9284a7f9fbd890e8ea32117d0e477d81fb)|`[wip] attempt to fix the issues with pari`|\n|[b724b83](https://git.sagemath.org/sage.git/commit/?id=b724b83b07333d97069088cf5c79c6dbdb8a0601)|`[wip] further doctest updates`|",
    "created_at": "2020-10-20T13:22:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311027",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:48'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|
|[ef659d9](https://git.sagemath.org/sage.git/commit/?id=ef659d9284a7f9fbd890e8ea32117d0e477d81fb)|`[wip] attempt to fix the issues with pari`|
|[b724b83](https://git.sagemath.org/sage.git/commit/?id=b724b83b07333d97069088cf5c79c6dbdb8a0601)|`[wip] further doctest updates`|



---

archive/issue_comments_311028.json:
```json
{
    "body": "Changing commit from \"3ab8aa6a01ee9c4f6e4040b3f7817f3d8a81f1fa\" to \"b724b83b07333d97069088cf5c79c6dbdb8a0601\"",
    "created_at": "2020-10-20T13:22:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311028",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "3ab8aa6a01ee9c4f6e4040b3f7817f3d8a81f1fa" to "b724b83b07333d97069088cf5c79c6dbdb8a0601"



---

archive/issue_comments_311029.json:
```json
{
    "body": "<a id='comment:49'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[d46c7ab](https://git.sagemath.org/sage.git/commit/?id=d46c7abb5299ba48bc3f8a2a627522bd47187dbc)|`#18036 miscellaneous doctest updates`|",
    "created_at": "2020-10-20T18:12:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311029",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:49'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
|[d46c7ab](https://git.sagemath.org/sage.git/commit/?id=d46c7abb5299ba48bc3f8a2a627522bd47187dbc)|`#18036 miscellaneous doctest updates`|



---

archive/issue_comments_311030.json:
```json
{
    "body": "Changing commit from \"b724b83b07333d97069088cf5c79c6dbdb8a0601\" to \"d46c7abb5299ba48bc3f8a2a627522bd47187dbc\"",
    "created_at": "2020-10-20T18:12:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311030",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b724b83b07333d97069088cf5c79c6dbdb8a0601" to "d46c7abb5299ba48bc3f8a2a627522bd47187dbc"



---

archive/issue_comments_311031.json:
```json
{
    "body": "<a id='comment:50'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                                          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------|\n|[7375723](https://git.sagemath.org/sage.git/commit/?id=7375723a860414d3985f355d29a61ecd1edba1d0)|`#18036 fix type test in EllipticCurve_rational_field.eval_modular_form()`|\n|[59d4e98](https://git.sagemath.org/sage.git/commit/?id=59d4e9870453e0ccf2097f525ea20243da7a18a7)|`#18036 miscellaneous doctest updates`|",
    "created_at": "2020-10-21T05:56:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311031",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:50'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                                          |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------|
|[7375723](https://git.sagemath.org/sage.git/commit/?id=7375723a860414d3985f355d29a61ecd1edba1d0)|`#18036 fix type test in EllipticCurve_rational_field.eval_modular_form()`|
|[59d4e98](https://git.sagemath.org/sage.git/commit/?id=59d4e9870453e0ccf2097f525ea20243da7a18a7)|`#18036 miscellaneous doctest updates`|



---

archive/issue_comments_311032.json:
```json
{
    "body": "Changing commit from \"d46c7abb5299ba48bc3f8a2a627522bd47187dbc\" to \"59d4e9870453e0ccf2097f525ea20243da7a18a7\"",
    "created_at": "2020-10-21T05:56:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311032",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d46c7abb5299ba48bc3f8a2a627522bd47187dbc" to "59d4e9870453e0ccf2097f525ea20243da7a18a7"



---

archive/issue_comments_311033.json:
```json
{
    "body": "Changing commit from \"59d4e9870453e0ccf2097f525ea20243da7a18a7\" to \"423506edf89295469a2c75cb0a41e206a98e9839\"",
    "created_at": "2020-10-21T14:05:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311033",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "59d4e9870453e0ccf2097f525ea20243da7a18a7" to "423506edf89295469a2c75cb0a41e206a98e9839"



---

archive/issue_comments_311034.json:
```json
{
    "body": "<a id='comment:51'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[423506e](https://git.sagemath.org/sage.git/commit/?id=423506edf89295469a2c75cb0a41e206a98e9839)|`#18036 miscellaneous doctest updates`|",
    "created_at": "2020-10-21T14:05:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311034",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:51'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
|[423506e](https://git.sagemath.org/sage.git/commit/?id=423506edf89295469a2c75cb0a41e206a98e9839)|`#18036 miscellaneous doctest updates`|



---

archive/issue_comments_311035.json:
```json
{
    "body": "Changing commit from \"423506edf89295469a2c75cb0a41e206a98e9839\" to \"983a0c73400e57834d0a0f45d136c944a78a5b55\"",
    "created_at": "2020-10-22T08:31:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311035",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "423506edf89295469a2c75cb0a41e206a98e9839" to "983a0c73400e57834d0a0f45d136c944a78a5b55"



---

archive/issue_comments_311036.json:
```json
{
    "body": "<a id='comment:52'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------|\n|[0604abe](https://git.sagemath.org/sage.git/commit/?id=0604abea66c744569b7197bab366af720b554379)|`#18036 explicit pushout(InfinityRing, *) -> SR`|\n|[3a6f981](https://git.sagemath.org/sage.git/commit/?id=3a6f98190439e4fe28c8dda3d623b0f7299fcbc9)|`#18036 fix imports of I from symbolic.all`|\n|[6c7cc80](https://git.sagemath.org/sage.git/commit/?id=6c7cc809d0cd48035a411cdc8cc646bba2d24bf4)|`#18036 fix type test in EllipticCurve_rational_field.eval_modular_form()`|\n|[ab91938](https://git.sagemath.org/sage.git/commit/?id=ab919386cf1ee659e92d13b5cde50ed35670fce5)|`#18036 minor code adaptations in rings/`|\n|[5280659](https://git.sagemath.org/sage.git/commit/?id=5280659a59b9d5c0c51047f0fc8bb2a6551f50fd)|`#18036 doctest updates: I.pyobject()`|\n|[f48d481](https://git.sagemath.org/sage.git/commit/?id=f48d48169c90ad8706a9f8511a58026eab4d030c)|`#18036 doctest updates: I \u2192 SR(I)`|\n|[715bcf1](https://git.sagemath.org/sage.git/commit/?id=715bcf1b64d0c7bcb4ae6492ea914a6e7ea41dff)|`#18036 doctest updates: pari-gp interfaces`|\n|[c78746e](https://git.sagemath.org/sage.git/commit/?id=c78746e5c18233c615ac33f07f896db01980062e)|`#18036 doctest updates: modular forms`|\n|[983a0c7](https://git.sagemath.org/sage.git/commit/?id=983a0c73400e57834d0a0f45d136c944a78a5b55)|`#18036 doctest updates: misc benign changes`|",
    "created_at": "2020-10-22T08:31:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311036",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:52'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------|
|[0604abe](https://git.sagemath.org/sage.git/commit/?id=0604abea66c744569b7197bab366af720b554379)|`#18036 explicit pushout(InfinityRing, *) -> SR`|
|[3a6f981](https://git.sagemath.org/sage.git/commit/?id=3a6f98190439e4fe28c8dda3d623b0f7299fcbc9)|`#18036 fix imports of I from symbolic.all`|
|[6c7cc80](https://git.sagemath.org/sage.git/commit/?id=6c7cc809d0cd48035a411cdc8cc646bba2d24bf4)|`#18036 fix type test in EllipticCurve_rational_field.eval_modular_form()`|
|[ab91938](https://git.sagemath.org/sage.git/commit/?id=ab919386cf1ee659e92d13b5cde50ed35670fce5)|`#18036 minor code adaptations in rings/`|
|[5280659](https://git.sagemath.org/sage.git/commit/?id=5280659a59b9d5c0c51047f0fc8bb2a6551f50fd)|`#18036 doctest updates: I.pyobject()`|
|[f48d481](https://git.sagemath.org/sage.git/commit/?id=f48d48169c90ad8706a9f8511a58026eab4d030c)|`#18036 doctest updates: I → SR(I)`|
|[715bcf1](https://git.sagemath.org/sage.git/commit/?id=715bcf1b64d0c7bcb4ae6492ea914a6e7ea41dff)|`#18036 doctest updates: pari-gp interfaces`|
|[c78746e](https://git.sagemath.org/sage.git/commit/?id=c78746e5c18233c615ac33f07f896db01980062e)|`#18036 doctest updates: modular forms`|
|[983a0c7](https://git.sagemath.org/sage.git/commit/?id=983a0c73400e57834d0a0f45d136c944a78a5b55)|`#18036 doctest updates: misc benign changes`|



---

archive/issue_comments_311037.json:
```json
{
    "body": "<a id='comment:53'></a>\nOkay, the branch is now stable as far as I am concerned, and all tests to pass. It wouldn't be a bad time to start reviewing it if anyone is interested!",
    "created_at": "2020-10-23T06:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311037",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:53'></a>
Okay, the branch is now stable as far as I am concerned, and all tests to pass. It wouldn't be a bad time to start reviewing it if anyone is interested!



---

archive/issue_comments_311038.json:
```json
{
    "body": "<a id='comment:54'></a>\nimpressive :)",
    "created_at": "2020-10-23T07:04:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311038",
    "user": "https://github.com/videlec"
}
```

<a id='comment:54'></a>
impressive :)



---

archive/issue_comments_311039.json:
```json
{
    "body": "<a id='comment:55'></a>\nI am annoyed that you had to introduce a specific class `NumberFieldElement_gaussian`. In the long run do you intend to put more in it or to remove it? For the sake of this ticket, I would\n\n- implement `_symbolic_`, `real_part`, `imag_part` on `NumberFieldElement_quadratic` (taking care of the embedding). Note that this would be desirable for more general number fields but more complicated (eg which symbolic representation? And number fields are generally not stable under taking real part.)\n- explicitely deprecate `log`\n\nSo that `NumberFieldElement_gaussian` would just be a transition class.",
    "created_at": "2020-10-23T07:13:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311039",
    "user": "https://github.com/videlec"
}
```

<a id='comment:55'></a>
I am annoyed that you had to introduce a specific class `NumberFieldElement_gaussian`. In the long run do you intend to put more in it or to remove it? For the sake of this ticket, I would

- implement `_symbolic_`, `real_part`, `imag_part` on `NumberFieldElement_quadratic` (taking care of the embedding). Note that this would be desirable for more general number fields but more complicated (eg which symbolic representation? And number fields are generally not stable under taking real part.)
- explicitely deprecate `log`

So that `NumberFieldElement_gaussian` would just be a transition class.



---

archive/issue_comments_311040.json:
```json
{
    "body": "<a id='comment:56'></a>\nAlso, the default embedding is not ideal\n\n```\nsage: I.parent().coerce_embedding()                                                                                                                                                            \nGeneric morphism:\n  From: Number Field in I with defining polynomial x^2 + 1 with I = 1*I\n  To:   Complex Lazy Field\n  Defn: I -> 1*I\n```\nCould we set it to `QQbar`?",
    "created_at": "2020-10-23T07:25:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311040",
    "user": "https://github.com/videlec"
}
```

<a id='comment:56'></a>
Also, the default embedding is not ideal

```
sage: I.parent().coerce_embedding()                                                                                                                                                            
Generic morphism:
  From: Number Field in I with defining polynomial x^2 + 1 with I = 1*I
  To:   Complex Lazy Field
  Defn: I -> 1*I
```
Could we set it to `QQbar`?



---

archive/issue_comments_311041.json:
```json
{
    "body": "<a id='comment:57'></a>\nReplying to [vdelecroix](#comment%3A55):\n> I am annoyed that you had to introduce a specific class `NumberFieldElement_gaussian`. In the long run do you intend to put more in it or to remove it?\n\n\nTo put more in it, probably.\n\nReplying to [vdelecroix](#comment%3A56):\n> Also, the default embedding is not ideal\n> \n> ```\n> sage: I.parent().coerce_embedding()                                                                                                                                                            \n> Generic morphism:\n>   From: Number Field in I with defining polynomial x^2 + 1 with I = 1*I\n>   To:   Complex Lazy Field\n>   Defn: I -> 1*I\n> ```\n> Could we set it to `QQbar`?\n\n\nI was thinking of doing that later, in #12715. But I will try to see if doing it now just for \u211a[i] breaks anything.",
    "created_at": "2020-10-23T08:55:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311041",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:57'></a>
Replying to [vdelecroix](#comment%3A55):
> I am annoyed that you had to introduce a specific class `NumberFieldElement_gaussian`. In the long run do you intend to put more in it or to remove it?


To put more in it, probably.

Replying to [vdelecroix](#comment%3A56):
> Also, the default embedding is not ideal
> 
> ```
> sage: I.parent().coerce_embedding()                                                                                                                                                            
> Generic morphism:
>   From: Number Field in I with defining polynomial x^2 + 1 with I = 1*I
>   To:   Complex Lazy Field
>   Defn: I -> 1*I
> ```
> Could we set it to `QQbar`?


I was thinking of doing that later, in #12715. But I will try to see if doing it now just for ℚ[i] breaks anything.



---

archive/issue_comments_311042.json:
```json
{
    "body": "<a id='comment:58'></a>\nReplying to [mmezzarobba](#comment%3A57):\n> > Could we set it to `QQbar`?\n\n> \n> I was thinking of doing that later, in #12715. But I will try to see if doing it now just for \u211a[i] breaks anything.\n\n\nThat creates import loops which may require to change the order of imports in sage.all significantly: the initialization of QQbar in sage.all currently comes very late, but the change would require moving it before that of pynac, which is done much earlier. I don't have the courage to try to untangle that mess at the moment.",
    "created_at": "2020-10-23T09:19:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311042",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:58'></a>
Replying to [mmezzarobba](#comment%3A57):
> > Could we set it to `QQbar`?

> 
> I was thinking of doing that later, in #12715. But I will try to see if doing it now just for ℚ[i] breaks anything.


That creates import loops which may require to change the order of imports in sage.all significantly: the initialization of QQbar in sage.all currently comes very late, but the change would require moving it before that of pynac, which is done much earlier. I don't have the courage to try to untangle that mess at the moment.



---

archive/issue_comments_311043.json:
```json
{
    "body": "<a id='comment:59'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n|                                                                                                                                           |                                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|\n|[549b73b](https://git.sagemath.org/sage.git/commit/?id=549b73b7fc7ef3edf9726c262b210f2ac788025d)|`#18036 add a dedicated element class for \u211a[i]`|\n|[357c7e3](https://git.sagemath.org/sage.git/commit/?id=357c7e365a25227f985c7ad36825c13d33821aff)|`#18036 explicit pushout(InfinityRing, *) -> SR`|\n|[6b63640](https://git.sagemath.org/sage.git/commit/?id=6b63640a9061e6eec4239bbaf778043d4843f0e8)|`#18036 fix imports of I from symbolic.all`|\n|[2d3bf87](https://git.sagemath.org/sage.git/commit/?id=2d3bf8732fd218e44da11770e650f4d31500cf3d)|`#18036 fix type test in EllipticCurve_rational_field.eval_modular_form()`|\n|[a9937ef](https://git.sagemath.org/sage.git/commit/?id=a9937ef0b8e0c7d955c117cd712c7939bb4fe1c0)|`#18036 minor code adaptations in rings/`|\n|[b6e1117](https://git.sagemath.org/sage.git/commit/?id=b6e111726e3b7708b2c60e3e6ad5f010dc742e25)|`#18036 doctest updates: I.pyobject()`|\n|[e8a8ce9](https://git.sagemath.org/sage.git/commit/?id=e8a8ce9d96aed7ed01174bc2b4096f7a2d734b1f)|`#18036 doctest updates: I \u2192 SR(I)`|\n|[860bbfb](https://git.sagemath.org/sage.git/commit/?id=860bbfb2f588b2d2232cde8a1a731b4c60e7c8b2)|`#18036 doctest updates: pari-gp interfaces`|\n|[955712d](https://git.sagemath.org/sage.git/commit/?id=955712d6b08a83bf84e8ea81ed64d71a896240da)|`#18036 doctest updates: modular forms`|\n|[feb4333](https://git.sagemath.org/sage.git/commit/?id=feb4333de3597611e7fbbfce800dcab2ee67aba6)|`#18036 doctest updates: misc benign changes`|",
    "created_at": "2020-10-25T05:39:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311043",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:59'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
|                                                                                                                                           |                                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|
|[549b73b](https://git.sagemath.org/sage.git/commit/?id=549b73b7fc7ef3edf9726c262b210f2ac788025d)|`#18036 add a dedicated element class for ℚ[i]`|
|[357c7e3](https://git.sagemath.org/sage.git/commit/?id=357c7e365a25227f985c7ad36825c13d33821aff)|`#18036 explicit pushout(InfinityRing, *) -> SR`|
|[6b63640](https://git.sagemath.org/sage.git/commit/?id=6b63640a9061e6eec4239bbaf778043d4843f0e8)|`#18036 fix imports of I from symbolic.all`|
|[2d3bf87](https://git.sagemath.org/sage.git/commit/?id=2d3bf8732fd218e44da11770e650f4d31500cf3d)|`#18036 fix type test in EllipticCurve_rational_field.eval_modular_form()`|
|[a9937ef](https://git.sagemath.org/sage.git/commit/?id=a9937ef0b8e0c7d955c117cd712c7939bb4fe1c0)|`#18036 minor code adaptations in rings/`|
|[b6e1117](https://git.sagemath.org/sage.git/commit/?id=b6e111726e3b7708b2c60e3e6ad5f010dc742e25)|`#18036 doctest updates: I.pyobject()`|
|[e8a8ce9](https://git.sagemath.org/sage.git/commit/?id=e8a8ce9d96aed7ed01174bc2b4096f7a2d734b1f)|`#18036 doctest updates: I → SR(I)`|
|[860bbfb](https://git.sagemath.org/sage.git/commit/?id=860bbfb2f588b2d2232cde8a1a731b4c60e7c8b2)|`#18036 doctest updates: pari-gp interfaces`|
|[955712d](https://git.sagemath.org/sage.git/commit/?id=955712d6b08a83bf84e8ea81ed64d71a896240da)|`#18036 doctest updates: modular forms`|
|[feb4333](https://git.sagemath.org/sage.git/commit/?id=feb4333de3597611e7fbbfce800dcab2ee67aba6)|`#18036 doctest updates: misc benign changes`|



---

archive/issue_comments_311044.json:
```json
{
    "body": "Changing commit from \"983a0c73400e57834d0a0f45d136c944a78a5b55\" to \"feb4333de3597611e7fbbfce800dcab2ee67aba6\"",
    "created_at": "2020-10-25T05:39:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311044",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "983a0c73400e57834d0a0f45d136c944a78a5b55" to "feb4333de3597611e7fbbfce800dcab2ee67aba6"



---

archive/issue_comments_311045.json:
```json
{
    "body": "<a id='comment:60'></a>\n(trivial rebase on final 9.2)",
    "created_at": "2020-10-25T05:39:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311045",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:60'></a>
(trivial rebase on final 9.2)



---

archive/issue_comments_311046.json:
```json
{
    "body": "<a id='comment:61'></a>\nGood! I hope it will get smoothly into the next beta.",
    "created_at": "2020-10-25T14:22:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311046",
    "user": "https://github.com/videlec"
}
```

<a id='comment:61'></a>
Good! I hope it will get smoothly into the next beta.



---

archive/issue_comments_311047.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-10-25T14:22:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311047",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_311048.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Vincent Delecroix\"",
    "created_at": "2020-10-25T14:22:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311048",
    "user": "https://github.com/videlec"
}
```

Changing reviewer from "" to "Vincent Delecroix"



---

archive/issue_comments_311049.json:
```json
{
    "body": "<a id='comment:62'></a>\nThanks a lot!",
    "created_at": "2020-10-25T15:22:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311049",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:62'></a>
Thanks a lot!



---

archive/issue_comments_311050.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-10-31T18:09:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311050",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_311051.json:
```json
{
    "body": "<a id='comment:63'></a>\nMerge conflict",
    "created_at": "2020-10-31T18:09:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311051",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:63'></a>
Merge conflict



---

archive/issue_comments_311052.json:
```json
{
    "body": "<a id='comment:64'></a>\nThanks Volker. Could you merge it early in the next beta? It is likely to create merge conflicts because touching a lot of files.",
    "created_at": "2020-10-31T18:16:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311052",
    "user": "https://github.com/videlec"
}
```

<a id='comment:64'></a>
Thanks Volker. Could you merge it early in the next beta? It is likely to create merge conflicts because touching a lot of files.



---

archive/issue_comments_311053.json:
```json
{
    "body": "Changing commit from \"feb4333de3597611e7fbbfce800dcab2ee67aba6\" to \"f885b3d5f8d6432537d1d07afc75382a4a0e107d\"",
    "created_at": "2020-11-01T15:07:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311053",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "feb4333de3597611e7fbbfce800dcab2ee67aba6" to "f885b3d5f8d6432537d1d07afc75382a4a0e107d"



---

archive/issue_comments_311054.json:
```json
{
    "body": "<a id='comment:65'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n|                                                                                                                                           |                                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|\n|[9976c5e](https://git.sagemath.org/sage.git/commit/?id=9976c5e8d667c156630146ac433daa3273196eb2)|`#18036 add a dedicated element class for \u211a[i]`|\n|[3575380](https://git.sagemath.org/sage.git/commit/?id=3575380d64ce423991df3739b652836fb2af723d)|`#18036 explicit pushout(InfinityRing, *) -> SR`|\n|[8d92af6](https://git.sagemath.org/sage.git/commit/?id=8d92af6e81d978f9d3c80be42929ab7bb158c5ad)|`#18036 fix imports of I from symbolic.all`|\n|[f4b41f6](https://git.sagemath.org/sage.git/commit/?id=f4b41f6162d1d0a7508d9787ad967a25232974af)|`#18036 fix type test in EllipticCurve_rational_field.eval_modular_form()`|\n|[78a69e0](https://git.sagemath.org/sage.git/commit/?id=78a69e089a2b2dc6741cb4cbcc807524dd948a25)|`#18036 minor code adaptations in rings/`|\n|[f430a42](https://git.sagemath.org/sage.git/commit/?id=f430a426245194cc955dad0a49f5396fd0312ed5)|`#18036 doctest updates: I.pyobject()`|\n|[68e0860](https://git.sagemath.org/sage.git/commit/?id=68e0860cd3d4f5ae62ea12c63c238546ded06d16)|`#18036 doctest updates: I \u2192 SR(I)`|\n|[81c3a79](https://git.sagemath.org/sage.git/commit/?id=81c3a79b3bba4b6aee7549905cae2895a7922716)|`#18036 doctest updates: pari-gp interfaces`|\n|[73185af](https://git.sagemath.org/sage.git/commit/?id=73185af8f20eb806e428a01fe6e6cc11fb04e580)|`#18036 doctest updates: modular forms`|\n|[f885b3d](https://git.sagemath.org/sage.git/commit/?id=f885b3d5f8d6432537d1d07afc75382a4a0e107d)|`#18036 doctest updates: misc benign changes`|",
    "created_at": "2020-11-01T15:07:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311054",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:65'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
|                                                                                                                                           |                                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|
|[9976c5e](https://git.sagemath.org/sage.git/commit/?id=9976c5e8d667c156630146ac433daa3273196eb2)|`#18036 add a dedicated element class for ℚ[i]`|
|[3575380](https://git.sagemath.org/sage.git/commit/?id=3575380d64ce423991df3739b652836fb2af723d)|`#18036 explicit pushout(InfinityRing, *) -> SR`|
|[8d92af6](https://git.sagemath.org/sage.git/commit/?id=8d92af6e81d978f9d3c80be42929ab7bb158c5ad)|`#18036 fix imports of I from symbolic.all`|
|[f4b41f6](https://git.sagemath.org/sage.git/commit/?id=f4b41f6162d1d0a7508d9787ad967a25232974af)|`#18036 fix type test in EllipticCurve_rational_field.eval_modular_form()`|
|[78a69e0](https://git.sagemath.org/sage.git/commit/?id=78a69e089a2b2dc6741cb4cbcc807524dd948a25)|`#18036 minor code adaptations in rings/`|
|[f430a42](https://git.sagemath.org/sage.git/commit/?id=f430a426245194cc955dad0a49f5396fd0312ed5)|`#18036 doctest updates: I.pyobject()`|
|[68e0860](https://git.sagemath.org/sage.git/commit/?id=68e0860cd3d4f5ae62ea12c63c238546ded06d16)|`#18036 doctest updates: I → SR(I)`|
|[81c3a79](https://git.sagemath.org/sage.git/commit/?id=81c3a79b3bba4b6aee7549905cae2895a7922716)|`#18036 doctest updates: pari-gp interfaces`|
|[73185af](https://git.sagemath.org/sage.git/commit/?id=73185af8f20eb806e428a01fe6e6cc11fb04e580)|`#18036 doctest updates: modular forms`|
|[f885b3d](https://git.sagemath.org/sage.git/commit/?id=f885b3d5f8d6432537d1d07afc75382a4a0e107d)|`#18036 doctest updates: misc benign changes`|



---

archive/issue_comments_311055.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-11-02T12:24:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311055",
    "user": "https://github.com/mezzarobba"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_311056.json:
```json
{
    "body": "<a id='comment:67'></a>\nRebase was trivial, tests still pass.",
    "created_at": "2020-11-02T13:53:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311056",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:67'></a>
Rebase was trivial, tests still pass.



---

archive/issue_comments_311057.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-11-02T13:53:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311057",
    "user": "https://github.com/mezzarobba"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_311058.json:
```json
{
    "body": "<a id='comment:68'></a>\nMerge conflict",
    "created_at": "2020-11-07T19:20:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311058",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:68'></a>
Merge conflict



---

archive/issue_comments_311059.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-11-07T19:20:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311059",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_311060.json:
```json
{
    "body": "<a id='comment:69'></a>\nReplying to [vbraun](#comment%3A68):\n> Merge conflict\n\n\nHow many times are we supposed to play this game? :)",
    "created_at": "2020-11-07T19:24:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311060",
    "user": "https://github.com/videlec"
}
```

<a id='comment:69'></a>
Replying to [vbraun](#comment%3A68):
> Merge conflict


How many times are we supposed to play this game? :)



---

archive/issue_comments_311061.json:
```json
{
    "body": "<a id='comment:70'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n|                                                                                                                                           |                                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|\n|[11b239c](https://git.sagemath.org/sage.git/commit/?id=11b239cb720517fcb5c1bb7ea4745857900aa895)|`#18036 add a dedicated element class for \u211a[i]`|\n|[5ed00bc](https://git.sagemath.org/sage.git/commit/?id=5ed00bc5dd6533fe6a8247fa9257815f42c2927c)|`#18036 explicit pushout(InfinityRing, *) -> SR`|\n|[c9b08f6](https://git.sagemath.org/sage.git/commit/?id=c9b08f6fcee08fce231597882cb6953f4ad2be89)|`#18036 fix imports of I from symbolic.all`|\n|[11be379](https://git.sagemath.org/sage.git/commit/?id=11be3793838fe4b5a1617f4614ad7616c45ba4e7)|`#18036 fix type test in EllipticCurve_rational_field.eval_modular_form()`|\n|[8125051](https://git.sagemath.org/sage.git/commit/?id=81250513565f3a0530b5d082c0654580781a3703)|`#18036 minor code adaptations in rings/`|\n|[e5f9325](https://git.sagemath.org/sage.git/commit/?id=e5f93250b4e2711f18c413cca65a1572bffec97c)|`#18036 doctest updates: I.pyobject()`|\n|[ed58a73](https://git.sagemath.org/sage.git/commit/?id=ed58a73ec406d108bd07fe530db571fd461a0481)|`#18036 doctest updates: I \u2192 SR(I)`|\n|[fe14b1a](https://git.sagemath.org/sage.git/commit/?id=fe14b1abcf7c3ddf5fcc9e39564104177edaee41)|`#18036 doctest updates: pari-gp interfaces`|\n|[671eed0](https://git.sagemath.org/sage.git/commit/?id=671eed046afb4de7fba0bc0ae8541ed19ea9717a)|`#18036 doctest updates: modular forms`|\n|[10c5abf](https://git.sagemath.org/sage.git/commit/?id=10c5abf85b9c0e18b2bb635d2a5f9ed7f3fc0096)|`#18036 doctest updates: misc benign changes`|",
    "created_at": "2020-11-08T05:05:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311061",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:70'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
|                                                                                                                                           |                                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|
|[11b239c](https://git.sagemath.org/sage.git/commit/?id=11b239cb720517fcb5c1bb7ea4745857900aa895)|`#18036 add a dedicated element class for ℚ[i]`|
|[5ed00bc](https://git.sagemath.org/sage.git/commit/?id=5ed00bc5dd6533fe6a8247fa9257815f42c2927c)|`#18036 explicit pushout(InfinityRing, *) -> SR`|
|[c9b08f6](https://git.sagemath.org/sage.git/commit/?id=c9b08f6fcee08fce231597882cb6953f4ad2be89)|`#18036 fix imports of I from symbolic.all`|
|[11be379](https://git.sagemath.org/sage.git/commit/?id=11be3793838fe4b5a1617f4614ad7616c45ba4e7)|`#18036 fix type test in EllipticCurve_rational_field.eval_modular_form()`|
|[8125051](https://git.sagemath.org/sage.git/commit/?id=81250513565f3a0530b5d082c0654580781a3703)|`#18036 minor code adaptations in rings/`|
|[e5f9325](https://git.sagemath.org/sage.git/commit/?id=e5f93250b4e2711f18c413cca65a1572bffec97c)|`#18036 doctest updates: I.pyobject()`|
|[ed58a73](https://git.sagemath.org/sage.git/commit/?id=ed58a73ec406d108bd07fe530db571fd461a0481)|`#18036 doctest updates: I → SR(I)`|
|[fe14b1a](https://git.sagemath.org/sage.git/commit/?id=fe14b1abcf7c3ddf5fcc9e39564104177edaee41)|`#18036 doctest updates: pari-gp interfaces`|
|[671eed0](https://git.sagemath.org/sage.git/commit/?id=671eed046afb4de7fba0bc0ae8541ed19ea9717a)|`#18036 doctest updates: modular forms`|
|[10c5abf](https://git.sagemath.org/sage.git/commit/?id=10c5abf85b9c0e18b2bb635d2a5f9ed7f3fc0096)|`#18036 doctest updates: misc benign changes`|



---

archive/issue_comments_311062.json:
```json
{
    "body": "Changing commit from \"f885b3d5f8d6432537d1d07afc75382a4a0e107d\" to \"10c5abf85b9c0e18b2bb635d2a5f9ed7f3fc0096\"",
    "created_at": "2020-11-08T05:05:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311062",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f885b3d5f8d6432537d1d07afc75382a4a0e107d" to "10c5abf85b9c0e18b2bb635d2a5f9ed7f3fc0096"



---

archive/issue_comments_311063.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-11-08T05:05:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311063",
    "user": "https://github.com/mezzarobba"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_311064.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-11-08T11:29:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311064",
    "user": "https://github.com/mezzarobba"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_311065.json:
```json
{
    "body": "<a id='comment:73'></a>\nPDF docs don't build",
    "created_at": "2020-11-17T23:20:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311065",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:73'></a>
PDF docs don't build



---

archive/issue_comments_311066.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-11-17T23:20:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311066",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_311067.json:
```json
{
    "body": "<a id='comment:74'></a>\ncould be because of\n\n```diff\n+    An element of \u211a[i].\n```",
    "created_at": "2020-11-19T07:16:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311067",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:74'></a>
could be because of

```diff
+    An element of ℚ[i].
```



---

archive/issue_comments_311068.json:
```json
{
    "body": "Changing commit from \"10c5abf85b9c0e18b2bb635d2a5f9ed7f3fc0096\" to \"54a34a7443d373e678c5461e5205ef2cdd7470b1\"",
    "created_at": "2020-11-19T07:46:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311068",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "10c5abf85b9c0e18b2bb635d2a5f9ed7f3fc0096" to "54a34a7443d373e678c5461e5205ef2cdd7470b1"



---

archive/issue_comments_311069.json:
```json
{
    "body": "<a id='comment:75'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------|\n|[54a34a7](https://git.sagemath.org/sage.git/commit/?id=54a34a7443d373e678c5461e5205ef2cdd7470b1)|`#18036 fix docstring`|",
    "created_at": "2020-11-19T07:46:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311069",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:75'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------|
|[54a34a7](https://git.sagemath.org/sage.git/commit/?id=54a34a7443d373e678c5461e5205ef2cdd7470b1)|`#18036 fix docstring`|



---

archive/issue_comments_311070.json:
```json
{
    "body": "<a id='comment:76'></a>\nThanks Volker and Fr\u00e9d\u00e9ric.",
    "created_at": "2020-11-19T07:48:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311070",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:76'></a>
Thanks Volker and Frédéric.



---

archive/issue_comments_311071.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2020-11-19T09:18:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311071",
    "user": "https://github.com/mezzarobba"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_events_051211.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-11-22T15:06:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18036#event-51211"
}
```



---

archive/issue_comments_311072.json:
```json
{
    "body": "Changing branch from \"u/mmezzarobba/18036-QQi\" to \"54a34a7443d373e678c5461e5205ef2cdd7470b1\"",
    "created_at": "2020-11-22T15:06:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311072",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mmezzarobba/18036-QQi" to "54a34a7443d373e678c5461e5205ef2cdd7470b1"



---

archive/issue_comments_311073.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-11-22T15:06:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18036#issuecomment-311073",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
