# Issue 18036: I.parent() should not be the symbolic ring

archive/issues_017799.json:
```json
{
    "assignees": [],
    "body": "As suggested in #7545, this ticket defines the imaginary unit `I` directly as the generator of `QuadraticField(-1)` instead of wrapping it in a symbolic expression.\n\n**Why?** To allow it to be used in combination with elements of QQbar, CC, etc., without coercion forcing the expression to SR. For example, `1.0 + I` is now an element of CC instead of SR.\n\n**How?** We set `I` in sage.all to the generator of \u211a[i], and deprecate importing it from `sage.symbolic.I`. The symbolic `I` remains available from `sage.symbolic.constants` for library code working with symbolic expressions, and as `SR(I)` or `SR.I()`. We create a dedicated subclass of quadratic number field elements to make it possible to support features similar to those of symbolic expressions of the form `a + I*b` that would not make sense for number field elements (or be too hard to implement, or pollute the namespace).\n\n**Why not \u2124[i]?** Because the class hierarchy of number field and order elements makes it difficult to provide the compatibility features mentioned above for elements of both \u2124[i] and \u211a[i]. Having `I` be an element of \u211a[i] covers almost all use cases (all except working with algebraic integers?), and people who work with orders are sophisticated enough to explicitly ask for I\u00a0\u2208\u00a0\u2124[i] when they need that. (This is a debatable choice. We could probably do without the dedicated subclass for elements of \u211a[i], at the price of breaking backward compatibility a bit more.)\n\nCC:  @categorie @jdemeyer @mezzarobba @behackl @rwst @kliem @mwageringel\n\nBranch/Commit: **[`54a34a7`](https://github.com/sagemath/sagetrac-mirror/commit/54a34a7443d373e678c5461e5205ef2cdd7470b1)**\n\nReviewer: **Vincent Delecroix**\n\nAuthor: **Marc Mezzarobba**\n\nComponent: **number fields**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/18036_\n\n",
    "closed_at": "2020-11-22T15:06:53Z",
    "created_at": "2015-03-22T11:15:52Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20number%20fields",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "I.parent() should not be the symbolic ring",
    "type": "issue",
    "updated_at": "2020-11-22T15:06:53Z",
    "url": "https://github.com/sagemath/sage/issues/18036",
    "user": "https://github.com/videlec"
}
```
As suggested in #7545, this ticket defines the imaginary unit `I` directly as the generator of `QuadraticField(-1)` instead of wrapping it in a symbolic expression.

**Why?** To allow it to be used in combination with elements of QQbar, CC, etc., without coercion forcing the expression to SR. For example, `1.0 + I` is now an element of CC instead of SR.

**How?** We set `I` in sage.all to the generator of ℚ[i], and deprecate importing it from `sage.symbolic.I`. The symbolic `I` remains available from `sage.symbolic.constants` for library code working with symbolic expressions, and as `SR(I)` or `SR.I()`. We create a dedicated subclass of quadratic number field elements to make it possible to support features similar to those of symbolic expressions of the form `a + I*b` that would not make sense for number field elements (or be too hard to implement, or pollute the namespace).

**Why not ℤ[i]?** Because the class hierarchy of number field and order elements makes it difficult to provide the compatibility features mentioned above for elements of both ℤ[i] and ℚ[i]. Having `I` be an element of ℚ[i] covers almost all use cases (all except working with algebraic integers?), and people who work with orders are sophisticated enough to explicitly ask for I ∈ ℤ[i] when they need that. (This is a debatable choice. We could probably do without the dedicated subclass for elements of ℚ[i], at the price of breaking backward compatibility a bit more.)

CC:  @categorie @jdemeyer @mezzarobba @behackl @rwst @kliem @mwageringel

Branch/Commit: **[`54a34a7`](https://github.com/sagemath/sagetrac-mirror/commit/54a34a7443d373e678c5461e5205ef2cdd7470b1)**

Reviewer: **Vincent Delecroix**

Author: **Marc Mezzarobba**

Component: **number fields**

_Issue created by migration from https://trac.sagemath.org/ticket/18036_





---

archive/issue_events_254179.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-03-22T11:15:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18036#event-254179"
}
```



---

archive/issue_events_254180.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-03-22T11:15:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20number%20fields",
    "label_color": "0000ff",
    "label_name": "c: number fields",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18036#event-254180"
}
```



---

archive/issue_events_254181.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-03-22T11:15:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18036#event-254181"
}
```



---

archive/issue_events_254182.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-03-22T11:15:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18036#event-254182"
}
```



---

archive/issue_comments_245509.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nI'm not so sure it should. Which quadratic field is the appropriate one? There are many, distinguishable by the name of their generator (that would be 'I') for this one, but also by their specified embeddings, and it's not clear which one to choose.\n\nIs there an argument for doing this? Ticket #17860 referenced in the description makes no mention of it. I'd imagine there might be evaluation reasons that might make it attractive. Perhaps those also give an indication of which quadratic field would be the appropriate one.",
    "created_at": "2015-03-22T18:16:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245509",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:1" align="right">comment:1</div>

I'm not so sure it should. Which quadratic field is the appropriate one? There are many, distinguishable by the name of their generator (that would be 'I') for this one, but also by their specified embeddings, and it's not clear which one to choose.

Is there an argument for doing this? Ticket #17860 referenced in the description makes no mention of it. I'd imagine there might be evaluation reasons that might make it attractive. Perhaps those also give an indication of which quadratic field would be the appropriate one.



---

archive/issue_comments_245510.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nReplying to [@nbruin](#comment:1):\n> I'm not so sure it should. Which quadratic field is the appropriate one? There are many, distinguishable by the name of their generator (that would be 'I') for this one, but also by their specified embeddings, and it's not clear which one to choose.\n\nI also thought of this in the train... and I do not see much possible choices. I found two rather natural choices for the adoption of `I`:\n- the ring of integers `Z[sqrt(-1)]` with its natural embedding in `QQbar`\n- `QQbar` itself\n\n> Is there an argument for doing this? Ticket #17860 referenced in the description makes no mention of it. I'd imagine there might be evaluation reasons that might make it attractive. Perhaps those also give an indication of which quadratic field would be the appropriate one.\n\nSome reasons (in favor of the first choice):\n- `I + 1.0` and `1.0 * I` should be complex numbers\n- `factor((I+3))` should be the factorization over the Gaussian integers (i.e. `(-I) * (I + 1) * (2*I + 1)`)\n- `abs(I)` should be the integer `1`\n\nVincent",
    "created_at": "2015-03-22T21:07:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245510",
    "user": "https://github.com/videlec"
}
```

<div id="comment:2" align="right">comment:2</div>

Replying to [@nbruin](#comment:1):
> I'm not so sure it should. Which quadratic field is the appropriate one? There are many, distinguishable by the name of their generator (that would be 'I') for this one, but also by their specified embeddings, and it's not clear which one to choose.

I also thought of this in the train... and I do not see much possible choices. I found two rather natural choices for the adoption of `I`:
- the ring of integers `Z[sqrt(-1)]` with its natural embedding in `QQbar`
- `QQbar` itself

> Is there an argument for doing this? Ticket #17860 referenced in the description makes no mention of it. I'd imagine there might be evaluation reasons that might make it attractive. Perhaps those also give an indication of which quadratic field would be the appropriate one.

Some reasons (in favor of the first choice):
- `I + 1.0` and `1.0 * I` should be complex numbers
- `factor((I+3))` should be the factorization over the Gaussian integers (i.e. `(-I) * (I + 1) * (2*I + 1)`)
- `abs(I)` should be the integer `1`

Vincent



---

archive/issue_comments_245511.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\n`I` should be an element of `QuadraticField(-1, 'I', embedding=CC.gen(), latex_name='i')`, which is what it currently is (see `src/sage/symbolic/pynac.pyx`).",
    "created_at": "2015-03-22T22:17:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245511",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:3" align="right">comment:3</div>

`I` should be an element of `QuadraticField(-1, 'I', embedding=CC.gen(), latex_name='i')`, which is what it currently is (see `src/sage/symbolic/pynac.pyx`).



---

archive/issue_comments_245512.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@nbruin](#comment:1):\n> Is there an argument for doing this?\n\nIn short: the same reason that `1` is not symbolic. When doing basic arithmetic with `I`, there is no need for a symbolic `I`. Whenever something symbolic is needed, coercion will make it symbolic.",
    "created_at": "2015-03-22T22:27:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245512",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@nbruin](#comment:1):
> Is there an argument for doing this?

In short: the same reason that `1` is not symbolic. When doing basic arithmetic with `I`, there is no need for a symbolic `I`. Whenever something symbolic is needed, coercion will make it symbolic.



---

archive/issue_comments_245513.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@videlec](#comment:2):\n> I found two rather natural choices for the adoption of `I`:\n> - the ring of integers `Z[sqrt(-1)]` with its natural embedding in `QQbar`\n\nThe ring `ZZ[sqrt(-1)]` definitely looks like the most natural choice to me, since admits a canonical homomorphism to any other ring with a distinguished square root of -1.\n\nAs for the distinguished embedding, is there a specific reason for choosing `QQbar`?  A more minimal choice would be to fix an embedding into a `UniversalCyclotomicField`; then we would have coercion maps `ZZ[I]` -> `UniversalCyclotomicField(zeta)` -> `QQbar` -> `CC`.  (Maybe this makes finding common parents slightly harder, though.)",
    "created_at": "2015-03-24T17:08:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245513",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@videlec](#comment:2):
> I found two rather natural choices for the adoption of `I`:
> - the ring of integers `Z[sqrt(-1)]` with its natural embedding in `QQbar`

The ring `ZZ[sqrt(-1)]` definitely looks like the most natural choice to me, since admits a canonical homomorphism to any other ring with a distinguished square root of -1.

As for the distinguished embedding, is there a specific reason for choosing `QQbar`?  A more minimal choice would be to fix an embedding into a `UniversalCyclotomicField`; then we would have coercion maps `ZZ[I]` -> `UniversalCyclotomicField(zeta)` -> `QQbar` -> `CC`.  (Maybe this makes finding common parents slightly harder, though.)



---

archive/issue_comments_245514.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-As suggested in #17860, `I` (so that `I^2 = -1`) should be defined directly as the generator of `QuadraticField(-1)` and not wrapped into a symbolic expression.\n+As suggested in #7545, `I` (so that `I^2 = -1`) should be defined directly as the generator of `QuadraticField(-1)` and not wrapped into a symbolic expression.\n \n Currently, `I` is defined in `sage/symbolic/pynac.pyx` within the function `init_pynac_I`.\n``````\n",
    "created_at": "2015-03-24T18:08:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245514",
    "user": "https://github.com/kcrisman"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-As suggested in #17860, `I` (so that `I^2 = -1`) should be defined directly as the generator of `QuadraticField(-1)` and not wrapped into a symbolic expression.
+As suggested in #7545, `I` (so that `I^2 = -1`) should be defined directly as the generator of `QuadraticField(-1)` and not wrapped into a symbolic expression.
 
 Currently, `I` is defined in `sage/symbolic/pynac.pyx` within the function `init_pynac_I`.
``````




---

archive/issue_comments_245515.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThank you all for working on this - this kind of thing has been on the radar for [years](https://github.com/sagemath/sage/issues/7545#comment:5) but after Burcin left day-to-day operations around here there hasn't been the combination of energy and know-how to do this \"correctly\", whatever that might mean.  Just keep in mind it would be nice for `I in SR` to be true, though I'm sure it will be since `1 in SR` already is `True`.  I do like the idea of `abs(I)` being an `Integer` and not a symbolic expression.",
    "created_at": "2015-03-24T18:08:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245515",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:6" align="right">comment:6</div>

Thank you all for working on this - this kind of thing has been on the radar for [years](https://github.com/sagemath/sage/issues/7545#comment:5) but after Burcin left day-to-day operations around here there hasn't been the combination of energy and know-how to do this "correctly", whatever that might mean.  Just keep in mind it would be nice for `I in SR` to be true, though I'm sure it will be since `1 in SR` already is `True`.  I do like the idea of `abs(I)` being an `Integer` and not a symbolic expression.



---

archive/issue_comments_245516.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nProof of concept to see what would break: `u/mmezzarobba/18036-QQi` (I'm using a number field element for now, not an order element, but switching shouldn't be hard). Still needs quite a bit of work, but all tests should pass (I didn't run them all with the last version of the code). Any comment or improvement welcome!\n\nIn particular:\n* Are there behavior changes that you think are not acceptable, or not acceptable without a deprecation?\n* I'm not happy with the changes to `sage.geometry.hyperbolic_space` (which apparently relied on operations involving `I` triggering coercions to `SR`), but I don't understand the code well enough to do better.\n\nTangentially related: now may be a good time to deprecate (or remove directly?) the bogus coercion from `SR` to `QQbar`.",
    "created_at": "2015-04-15T14:18:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245516",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:8" align="right">comment:8</div>

Proof of concept to see what would break: `u/mmezzarobba/18036-QQi` (I'm using a number field element for now, not an order element, but switching shouldn't be hard). Still needs quite a bit of work, but all tests should pass (I didn't run them all with the last version of the code). Any comment or improvement welcome!

In particular:
* Are there behavior changes that you think are not acceptable, or not acceptable without a deprecation?
* I'm not happy with the changes to `sage.geometry.hyperbolic_space` (which apparently relied on operations involving `I` triggering coercions to `SR`), but I don't understand the code well enough to do better.

Tangentially related: now may be a good time to deprecate (or remove directly?) the bogus coercion from `SR` to `QQbar`.



---

archive/issue_comments_245517.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nAs it turns out, there are a few failures in `complex_mpc.pyx`. But unless I'm mistaken these failures are solved by #14982. And conversely, the present ticket provides a real fix for a problem I only worked around in #14982.",
    "created_at": "2015-04-15T15:27:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245517",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:9" align="right">comment:9</div>

As it turns out, there are a few failures in `complex_mpc.pyx`. But unless I'm mistaken these failures are solved by #14982. And conversely, the present ticket provides a real fix for a problem I only worked around in #14982.



---

archive/issue_comments_245518.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nVery nice that it worked!\n\nI do not quite understand why you need the creation of a new class of `NumberFieldQQi`... is that only for the special method you need in the element class?\n\nFor embedding in QQbar I guess that what should be fixed is embedding of number fields. In the ideal world, you would declare:\n\n```\nQQi = NumberField(x**2 + 1, 'I', embedding=QQbar.gen())\n```\nBut then, there might be an infinite loop with the definition of `I` in `QQbar`. I had the same sort of troubles when refining default embedding from lazy field to `AA/QQbar`.\n\nVincent",
    "created_at": "2015-04-15T16:54:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245518",
    "user": "https://github.com/videlec"
}
```

<div id="comment:10" align="right">comment:10</div>

Very nice that it worked!

I do not quite understand why you need the creation of a new class of `NumberFieldQQi`... is that only for the special method you need in the element class?

For embedding in QQbar I guess that what should be fixed is embedding of number fields. In the ideal world, you would declare:

```
QQi = NumberField(x**2 + 1, 'I', embedding=QQbar.gen())
```
But then, there might be an infinite loop with the definition of `I` in `QQbar`. I had the same sort of troubles when refining default embedding from lazy field to `AA/QQbar`.

Vincent



---

archive/issue_comments_245519.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@videlec](#comment:10):\n> I do not quite understand why you need the creation of a new class of `NumberFieldQQi`... is that only for the special method you need in the element class?\n\nI don't remember, it could be that the reason no longer exists due to later changes.\n\n> For embedding in QQbar I guess that what should be fixed is embedding of number fields. In the ideal world, you would declare:\n> \n> ```\n> QQi = NumberField(x**2 + 1, 'I', embedding=QQbar.gen())\n> ```\n\nYes, the idea is to switch to an embedding into QQbar when other number fields do.",
    "created_at": "2015-04-15T17:13:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245519",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@videlec](#comment:10):
> I do not quite understand why you need the creation of a new class of `NumberFieldQQi`... is that only for the special method you need in the element class?

I don't remember, it could be that the reason no longer exists due to later changes.

> For embedding in QQbar I guess that what should be fixed is embedding of number fields. In the ideal world, you would declare:
> 
> ```
> QQi = NumberField(x**2 + 1, 'I', embedding=QQbar.gen())
> ```

Yes, the idea is to switch to an embedding into QQbar when other number fields do.



---

archive/issue_comments_245520.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@mezzarobba](#comment:11):\n> Replying to [@videlec](#comment:10):\n> > I do not quite understand why you need the creation of a new class of `NumberFieldQQi`... is that only for the special method you need in the element class?\n\n> \n> I don't remember, it could be that the reason no longer exists due to later changes.\n\nOne reason was that having separate classes makes it easy to test if we are in the special case of QQ[i] using `isinstance`. In the case of the parent class, this is convenient when specifying coercions, for instance.",
    "created_at": "2015-04-18T11:13:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245520",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@mezzarobba](#comment:11):
> Replying to [@videlec](#comment:10):
> > I do not quite understand why you need the creation of a new class of `NumberFieldQQi`... is that only for the special method you need in the element class?

> 
> I don't remember, it could be that the reason no longer exists due to later changes.

One reason was that having separate classes makes it easy to test if we are in the special case of QQ[i] using `isinstance`. In the case of the parent class, this is convenient when specifying coercions, for instance.



---

archive/issue_comments_245521.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@mezzarobba](#comment:12):\n> Replying to [@mezzarobba](#comment:11):\n> > Replying to [@videlec](#comment:10):\n> > > I do not quite understand why you need the creation of a new class of `NumberFieldQQi`... is that only for the special method you need in the element class?\n\n> > \n> > I don't remember, it could be that the reason no longer exists due to later changes.\n\n> \n> One reason was that having separate classes makes it easy to test if we are in the special case of QQ[i] using `isinstance`. In the case of the parent class, this is convenient when specifying coercions, for instance.\n\nAnyway this will be instantiated at startup so why not keeping one instance `QQi` in `sage.rings.number_field.number_field`? (like we have for `ZZ`, `QQ`, etc). Then you can test identity when testing coercions.",
    "created_at": "2015-04-18T11:27:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245521",
    "user": "https://github.com/videlec"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@mezzarobba](#comment:12):
> Replying to [@mezzarobba](#comment:11):
> > Replying to [@videlec](#comment:10):
> > > I do not quite understand why you need the creation of a new class of `NumberFieldQQi`... is that only for the special method you need in the element class?

> > 
> > I don't remember, it could be that the reason no longer exists due to later changes.

> 
> One reason was that having separate classes makes it easy to test if we are in the special case of QQ[i] using `isinstance`. In the case of the parent class, this is convenient when specifying coercions, for instance.

Anyway this will be instantiated at startup so why not keeping one instance `QQi` in `sage.rings.number_field.number_field`? (like we have for `ZZ`, `QQ`, etc). Then you can test identity when testing coercions.



---

archive/issue_comments_245522.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@videlec](#comment:13):\n> Anyway this will be instantiated at startup so why not keeping one instance `QQi` in `sage.rings.number_field.number_field`? (like we have for `ZZ`, `QQ`, etc).\n\nIf I remember right, currently, just adding `QQi = ...()` in the module currently doesn't work due to import order constraints. For now I just kept the creation of QQ[i] happening at the same time as it used to. But that's certainly something we should try to improve after this first draft.\n\n> Then you can test identity when testing coercions.\n\nYes. Having a separate class would also be natural if we want `I.parent()` to display something less frightening than \u201cNumber Field in `I` with defining polynomial `x^2 + 1`\u201d, and more generally to implement features specific to QQ[i]. But I can't really think of anything that makes sense for this field and not for embedded quadratic number fields in general, so perhaps it is better to encourage people to always implement a more general version?\n\nA related question is whether `QQi is NumberField(x^2+1, 'I', embedding=CC.0)` should be true, or if there should be two separate parents.\n\nWhat do you think?",
    "created_at": "2015-04-18T16:56:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245522",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@videlec](#comment:13):
> Anyway this will be instantiated at startup so why not keeping one instance `QQi` in `sage.rings.number_field.number_field`? (like we have for `ZZ`, `QQ`, etc).

If I remember right, currently, just adding `QQi = ...()` in the module currently doesn't work due to import order constraints. For now I just kept the creation of QQ[i] happening at the same time as it used to. But that's certainly something we should try to improve after this first draft.

> Then you can test identity when testing coercions.

Yes. Having a separate class would also be natural if we want `I.parent()` to display something less frightening than “Number Field in `I` with defining polynomial `x^2 + 1`”, and more generally to implement features specific to QQ[i]. But I can't really think of anything that makes sense for this field and not for embedded quadratic number fields in general, so perhaps it is better to encourage people to always implement a more general version?

A related question is whether `QQi is NumberField(x^2+1, 'I', embedding=CC.0)` should be true, or if there should be two separate parents.

What do you think?



---

archive/issue_events_254183.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2015-04-19T05:57:31Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "title_is": "I.parent() should not be the symbolic ring",
    "title_was": "I should not be symbolic",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18036#event-254183"
}
```



---

archive/issue_comments_245523.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@mezzarobba](#comment:14):\n> Replying to [@videlec](#comment:13):\n> > Anyway this will be instantiated at startup so why not keeping one instance `QQi` in `sage.rings.number_field.number_field`? (like we have for `ZZ`, `QQ`, etc).\n\n> \n> If I remember right, currently, just adding `QQi = ...()` in the module currently doesn't work due to import order constraints. For now I just kept the creation of QQ[i] happening at the same time as it used to. But that's certainly something we should try to improve after this first draft.\n\nHere we can probably cheat with\n\n```\n_QQi = None\ndef NumberFieldQQi():\n    if _QQi is None:\n        # build it once for all\n        ...\n    return _QQi\n```\n\n> > Then you can test identity when testing coercions.\n\n> \n> Yes. Having a separate class would also be natural if we want `I.parent()` to display something less frightening than \u201cNumber Field in `I` with defining polynomial `x^2 + 1`\u201d, and more generally to implement features specific to QQ[i]. But I can't really think of anything that makes sense for this field and not for embedded quadratic number fields in general, so perhaps it is better to encourage people to always implement a more general version?\n\nYes! Having a custom representation should be done in the main class. It is already possible:\n\n```\nsage: K = QuadraticField(2)\nsage: K.rename('It's me')\nsage: K\nIt's me\nsage: K.rename(None)\nsage: K\nNumber Field in a with defining polynomial x^2 - 2\n```\n\n> A related question is whether `QQi is NumberField(x^2+1, 'I', embedding=CC.0)` should be true, or if there should be two separate parents.\n\n>\n> What do you think?\n\nMore generally, do we want unique representation for (absolute) number fields? I would tend to say yes. And the natural keys would be:\n- the polynomial\n- the variable name (not of the polynomial!)\n- the embedding\n\nVincent",
    "created_at": "2015-04-19T11:17:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245523",
    "user": "https://github.com/videlec"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@mezzarobba](#comment:14):
> Replying to [@videlec](#comment:13):
> > Anyway this will be instantiated at startup so why not keeping one instance `QQi` in `sage.rings.number_field.number_field`? (like we have for `ZZ`, `QQ`, etc).

> 
> If I remember right, currently, just adding `QQi = ...()` in the module currently doesn't work due to import order constraints. For now I just kept the creation of QQ[i] happening at the same time as it used to. But that's certainly something we should try to improve after this first draft.

Here we can probably cheat with

```
_QQi = None
def NumberFieldQQi():
    if _QQi is None:
        # build it once for all
        ...
    return _QQi
```

> > Then you can test identity when testing coercions.

> 
> Yes. Having a separate class would also be natural if we want `I.parent()` to display something less frightening than “Number Field in `I` with defining polynomial `x^2 + 1`”, and more generally to implement features specific to QQ[i]. But I can't really think of anything that makes sense for this field and not for embedded quadratic number fields in general, so perhaps it is better to encourage people to always implement a more general version?

Yes! Having a custom representation should be done in the main class. It is already possible:

```
sage: K = QuadraticField(2)
sage: K.rename('It's me')
sage: K
It's me
sage: K.rename(None)
sage: K
Number Field in a with defining polynomial x^2 - 2
```

> A related question is whether `QQi is NumberField(x^2+1, 'I', embedding=CC.0)` should be true, or if there should be two separate parents.

>
> What do you think?

More generally, do we want unique representation for (absolute) number fields? I would tend to say yes. And the natural keys would be:
- the polynomial
- the variable name (not of the polynomial!)
- the embedding

Vincent



---

archive/issue_comments_245524.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@videlec](#comment:16):\n> Yes! Having a custom representation should be done in the main class. It is already possible:\n\nIf all we want is a different string representation, yes, perhaps it makes sense to use `rename()`...\n\n> > A related question is whether `QQi is NumberField(x^2+1, 'I', embedding=CC.0)` should be true, or if there should be two separate parents.\n\n> >\n> > What do you think?\n\n> \n> More generally, do we want unique representation for (absolute) number fields?\n\nI think everyone agrees that absolute number fields should have unique representation. My question was whether Q[i] should *be* an absolute number field in this sense, or if it should be a \u201cspecial\u201d object such that people could work with both Q[i]-as-a-subset-of-complex-numbers and Q[i]-as-a-number field, possibly at the same time. I'd prefer a single object as well, but I am sure I have missed some of the implications, so if anyone has arguments in favor of the other option, I would be interested in hearing them.",
    "created_at": "2015-04-19T12:56:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245524",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@videlec](#comment:16):
> Yes! Having a custom representation should be done in the main class. It is already possible:

If all we want is a different string representation, yes, perhaps it makes sense to use `rename()`...

> > A related question is whether `QQi is NumberField(x^2+1, 'I', embedding=CC.0)` should be true, or if there should be two separate parents.

> >
> > What do you think?

> 
> More generally, do we want unique representation for (absolute) number fields?

I think everyone agrees that absolute number fields should have unique representation. My question was whether Q[i] should *be* an absolute number field in this sense, or if it should be a “special” object such that people could work with both Q[i]-as-a-subset-of-complex-numbers and Q[i]-as-a-number field, possibly at the same time. I'd prefer a single object as well, but I am sure I have missed some of the implications, so if anyone has arguments in favor of the other option, I would be interested in hearing them.



---

archive/issue_comments_245525.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@mezzarobba](#comment:17):\n> > > A related question is whether `QQi is NumberField(x^2+1, 'I', embedding=CC.0)` should be true, or if there should be two separate parents.\n\n> > >\n> > > What do you think?\n\n> > \n> > More generally, do we want unique representation for (absolute) number fields?\n\n> \n> I think everyone agrees that absolute number fields should have unique representation. My question was whether Q[i] should *be* an absolute number field in this sense, or if it should be a \u201cspecial\u201d object such that people could work with both Q[i]-as-a-subset-of-complex-numbers and Q[i]-as-a-number field, possibly at the same time. I'd prefer a single object as well, but I am sure I have missed some of the implications, so if anyone has arguments in favor of the other option, I would be interested in hearing them.\n\nI would be interested in working with **any** number field seeing them as a subfield of the real or complex numbers! Not only `QQi` and it makes sense to ask whether we need a dedicated class for that. For both parent and elements.\n\nNote that it is already partly possible to play with element of number fields as real numbers (especially with quadratic fields)\n\n```\nsage: K.<sqrt2> = QuadraticField(2)\nsage: 1 < sqrt2 < 3/2\nTrue\nsage: sqrt2.n()\n1.41421356237310\nsage: sqrt2 + CC(0,1)\n1.41421356237310 + 1.00000000000000*I\nsage: sage: cos(sqrt2)\ncos(sqrt(2))\nsage: sqrt2.continued_fraction()\n[1; (2)*]\n```\n\nAbout having methods `.cos()`, `.sin()`, `.exp()`, it is already something which I found dangerous with integers for which the method `.sqrt()` might return an answer with a different parent\n\n```\nsage: 4.sqrt()  # answer is a Sage integer\n2\nsage: 2.sqrt()  # answer is symbolic\nsqrt(2)\n```\nWhich is very different from\n\n```\nsage: R.<x> = ZZ[]\nsage: ((x+1)**2 * (x-2)**4).sqrt()\nx^3 - 3*x^2 + 4\nsage: R(2).sqrt()\nTraceback (most recent call last):\n...\nTypeError: Polynomial is not a square. You must specify\nthe name of the square root when using the default extend = True\n```\n\nAt the time Sage would support embedding of number fields into p-adic fields, I think it might be worse to have that dedicated class! But in the meantime, I have no strong opinion.\n\nVincent",
    "created_at": "2015-04-19T13:14:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245525",
    "user": "https://github.com/videlec"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@mezzarobba](#comment:17):
> > > A related question is whether `QQi is NumberField(x^2+1, 'I', embedding=CC.0)` should be true, or if there should be two separate parents.

> > >
> > > What do you think?

> > 
> > More generally, do we want unique representation for (absolute) number fields?

> 
> I think everyone agrees that absolute number fields should have unique representation. My question was whether Q[i] should *be* an absolute number field in this sense, or if it should be a “special” object such that people could work with both Q[i]-as-a-subset-of-complex-numbers and Q[i]-as-a-number field, possibly at the same time. I'd prefer a single object as well, but I am sure I have missed some of the implications, so if anyone has arguments in favor of the other option, I would be interested in hearing them.

I would be interested in working with **any** number field seeing them as a subfield of the real or complex numbers! Not only `QQi` and it makes sense to ask whether we need a dedicated class for that. For both parent and elements.

Note that it is already partly possible to play with element of number fields as real numbers (especially with quadratic fields)

```
sage: K.<sqrt2> = QuadraticField(2)
sage: 1 < sqrt2 < 3/2
True
sage: sqrt2.n()
1.41421356237310
sage: sqrt2 + CC(0,1)
1.41421356237310 + 1.00000000000000*I
sage: sage: cos(sqrt2)
cos(sqrt(2))
sage: sqrt2.continued_fraction()
[1; (2)*]
```

About having methods `.cos()`, `.sin()`, `.exp()`, it is already something which I found dangerous with integers for which the method `.sqrt()` might return an answer with a different parent

```
sage: 4.sqrt()  # answer is a Sage integer
2
sage: 2.sqrt()  # answer is symbolic
sqrt(2)
```
Which is very different from

```
sage: R.<x> = ZZ[]
sage: ((x+1)**2 * (x-2)**4).sqrt()
x^3 - 3*x^2 + 4
sage: R(2).sqrt()
Traceback (most recent call last):
...
TypeError: Polynomial is not a square. You must specify
the name of the square root when using the default extend = True
```

At the time Sage would support embedding of number fields into p-adic fields, I think it might be worse to have that dedicated class! But in the meantime, I have no strong opinion.

Vincent



---

archive/issue_comments_245526.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nSee also https://groups.google.com/forum/?hl=en#!topic/sage-devel/Oa0kOC-VGds",
    "created_at": "2015-10-17T13:47:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245526",
    "user": "https://github.com/rwst"
}
```

<div id="comment:19" align="right">comment:19</div>

See also https://groups.google.com/forum/?hl=en#!topic/sage-devel/Oa0kOC-VGds



---

archive/issue_comments_245527.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@videlec](#comment:18):\n> About having methods `.cos()`, `.sin()`, `.exp()`, it is already something which I found dangerous with integers\n\nStill, if we ever want this new non-symbolic `I` to behave like to old symbolic `I`, we would need to support things like that:\n\n```\n**********************************************************************\nFile \"src/sage/symbolic/expression.pyx\", line 7901, in sage.symbolic.expression.Expression.log\nFailed example:\n    I.log()\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.symbolic.expression.Expression.log[11]>\", line 1, in <module>\n        I.log()\n      File \"sage/structure/element.pyx\", line 420, in sage.structure.element.Element.__getattr__ (build/cythonized/sage/structure/element.c:4676)\n        return getattr_from_other_class(self, P._abstract_element_class, name)\n      File \"sage/structure/misc.pyx\", line 259, in sage.structure.misc.getattr_from_other_class (build/cythonized/sage/structure/misc.c:1772)\n        raise dummy_attribute_error\n    AttributeError: 'sage.rings.number_field.number_field_element_quadratic.NumberFieldElement_quadratic' object has no attribute 'log'\n**********************************************************************\n```",
    "created_at": "2016-01-05T12:46:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245527",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@videlec](#comment:18):
> About having methods `.cos()`, `.sin()`, `.exp()`, it is already something which I found dangerous with integers

Still, if we ever want this new non-symbolic `I` to behave like to old symbolic `I`, we would need to support things like that:

```
**********************************************************************
File "src/sage/symbolic/expression.pyx", line 7901, in sage.symbolic.expression.Expression.log
Failed example:
    I.log()
Exception raised:
    Traceback (most recent call last):
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.symbolic.expression.Expression.log[11]>", line 1, in <module>
        I.log()
      File "sage/structure/element.pyx", line 420, in sage.structure.element.Element.__getattr__ (build/cythonized/sage/structure/element.c:4676)
        return getattr_from_other_class(self, P._abstract_element_class, name)
      File "sage/structure/misc.pyx", line 259, in sage.structure.misc.getattr_from_other_class (build/cythonized/sage/structure/misc.c:1772)
        raise dummy_attribute_error
    AttributeError: 'sage.rings.number_field.number_field_element_quadratic.NumberFieldElement_quadratic' object has no attribute 'log'
**********************************************************************
```



---

archive/issue_comments_245528.json:
```json
{
    "body": "Branch: **[u/jdemeyer/i_parent___should_not_be_the_symbolic_ring](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/i_parent___should_not_be_the_symbolic_ring)**",
    "created_at": "2016-01-05T12:56:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245528",
    "user": "https://github.com/jdemeyer"
}
```

Branch: **[u/jdemeyer/i_parent___should_not_be_the_symbolic_ring](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/i_parent___should_not_be_the_symbolic_ring)**



---

archive/issue_comments_245529.json:
```json
{
    "body": "Commit: **[`2f5a519`](https://github.com/sagemath/sagetrac-mirror/commit/2f5a5198849c5b96bc2733e1e5853dc1b23f1cf9)**",
    "created_at": "2016-03-07T09:57:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245529",
    "user": "https://github.com/behackl"
}
```

Commit: **[`2f5a519`](https://github.com/sagemath/sagetrac-mirror/commit/2f5a5198849c5b96bc2733e1e5853dc1b23f1cf9)**



---

archive/issue_comments_245530.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2f5a5198849c5b96bc2733e1e5853dc1b23f1cf9\"><code>2f5a519</code></a></td><td><code>parent(I) should be a number field</code></td></tr></table>\n",
    "created_at": "2016-03-07T09:57:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245530",
    "user": "https://github.com/behackl"
}
```

<div id="comment:22"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2f5a5198849c5b96bc2733e1e5853dc1b23f1cf9"><code>2f5a519</code></a></td><td><code>parent(I) should be a number field</code></td></tr></table>




---

archive/issue_comments_245531.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nHi! I'd like to revive this discussion a bit because we're getting a doctest failure at https://github.com/pynac/pynac/pull/162 which would probably be fixed along the lines of this ticket.\n\nFor starters, I had a look at the current branch and some of the resulting doctest failures; this should roughly resemble the tasks that are still to be done:\n\n* `sage -t --warn-long 54.2 src/sage/symbolic/constants.py  # 3 doctests failed`;\n`sage -t --warn-long 54.2 src/sage/symbolic/pynac.pyx  # 3 doctests failed`: \n\n  duplicate doctests. not sure how to fix (maybe switch to I_symbolic?). and which to remove.\n\n* `sage -t --warn-long 54.2 src/sage/symbolic/relation.py  # 3 doctests failed`:\n\n  Doctests can be fixed directly.\n\n* `sage -t --warn-long 54.2 src/sage/symbolic/expression_conversions.py  # 2 doctests failed`\n\n  probably I_symbolic is needed?\n\n* `sage -t --warn-long 54.2 src/sage/symbolic/expression.pyx  # 14 doctests failed`\n  *  arithmetic with `oo` is broken (4 doctests)\n  *  `_is_registered_constant_` --> remove doctest? I_symbolic?\n  *  `is_numeric`/`is_constant` missing (I_symbolic?)\n  *  `imag_part`/`real_part` should be an alias of `imag`/`real` (3 doctests)\n  *  `I.log` not implemented (3 doctests)\n  * `rectform`: either converse to SR or multiply with I_symbolic.\n\n* `sage -t --warn-long 54.2 src/sage/rings/infinity.py  # 2 doctests failed`\n\n  arithmetic with `oo` is broken.\n\n* `sage -t --warn-long 54.2 src/sage/rings/complex_mpc.pyx  # 8 doctests failed` and `sage -t --warn-long 54.2 src/sage/rings/complex_arb.pyx  # 7 doctests failed`\n  * coercion errors: `ValueError: Cannot coerce algebraic number with non-zero imaginary part to algebraic real`\n  * precision regressions.\n\n* `sage -t --warn-long 54.2 src/sage/rings/qqbar.py  # 6 doctests failed`\n  \n  common parent issue: `TypeError: unsupported operand parent(s) for '+': 'Algebraic Field' and 'Number Field in I with defining polynomial x^2 + 1'`\n\n* `sage -t --warn-long 54.2 src/sage/rings/number_field/number_field_element_quadratic.pyx  # 1 doctest failed`\n\n  common parent issue: `TypeError: unsupported operand parent(s) for '*': 'Number Field in I with defining polynomial x^2 + 1' and 'Number Field in sqrt3 with defining polynomial x^2 - 3'`\n\n* `sage -t --warn-long 54.2 src/sage/rings/polynomial/polynomial_rational_flint.pyx  # 1 doctest failed`\n\n  false error is raised\n\n* `sage -t --warn-long 54.2 src/sage/rings/polynomial/cyclotomic.pyx  # 2 doctests failed`\n\n  both can be fixed directly.\n\n* Stuff in `sage/geometry/hyperbolic_space/hyperbolic_*.py` breaks down:\n  * `sage -t --warn-long 51.1 src/sage/geometry/hyperbolic_space/hyperbolic_point.py  # 1 doctest failed`\n  * `sage -t --warn-long 51.1 src/sage/geometry/hyperbolic_space/hyperbolic_geodesic.py  # 4 doctests failed`\n  * `sage -t --warn-long 51.1 src/sage/geometry/hyperbolic_space/hyperbolic_isometry.py  # 1 doctest failed`\n  * `sage -t --warn-long 51.1 src/sage/geometry/hyperbolic_space/hyperbolic_model.py  # 2 doctests failed`\n\n  Not sure about these errors, some seem to be coercion related, others are just `TypeError: 'sage.rings.complex_number.ComplexNumber' object is not callable`---maybe that goes away along the way.\n\n\nThese are certainly not all failures, but they should give an idea of what breaks down. The biggest issue seems to be coercion...",
    "created_at": "2016-03-07T12:54:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245531",
    "user": "https://github.com/behackl"
}
```

<div id="comment:24" align="right">comment:24</div>

Hi! I'd like to revive this discussion a bit because we're getting a doctest failure at https://github.com/pynac/pynac/pull/162 which would probably be fixed along the lines of this ticket.

For starters, I had a look at the current branch and some of the resulting doctest failures; this should roughly resemble the tasks that are still to be done:

* `sage -t --warn-long 54.2 src/sage/symbolic/constants.py  # 3 doctests failed`;
`sage -t --warn-long 54.2 src/sage/symbolic/pynac.pyx  # 3 doctests failed`: 

  duplicate doctests. not sure how to fix (maybe switch to I_symbolic?). and which to remove.

* `sage -t --warn-long 54.2 src/sage/symbolic/relation.py  # 3 doctests failed`:

  Doctests can be fixed directly.

* `sage -t --warn-long 54.2 src/sage/symbolic/expression_conversions.py  # 2 doctests failed`

  probably I_symbolic is needed?

* `sage -t --warn-long 54.2 src/sage/symbolic/expression.pyx  # 14 doctests failed`
  *  arithmetic with `oo` is broken (4 doctests)
  *  `_is_registered_constant_` --> remove doctest? I_symbolic?
  *  `is_numeric`/`is_constant` missing (I_symbolic?)
  *  `imag_part`/`real_part` should be an alias of `imag`/`real` (3 doctests)
  *  `I.log` not implemented (3 doctests)
  * `rectform`: either converse to SR or multiply with I_symbolic.

* `sage -t --warn-long 54.2 src/sage/rings/infinity.py  # 2 doctests failed`

  arithmetic with `oo` is broken.

* `sage -t --warn-long 54.2 src/sage/rings/complex_mpc.pyx  # 8 doctests failed` and `sage -t --warn-long 54.2 src/sage/rings/complex_arb.pyx  # 7 doctests failed`
  * coercion errors: `ValueError: Cannot coerce algebraic number with non-zero imaginary part to algebraic real`
  * precision regressions.

* `sage -t --warn-long 54.2 src/sage/rings/qqbar.py  # 6 doctests failed`
  
  common parent issue: `TypeError: unsupported operand parent(s) for '+': 'Algebraic Field' and 'Number Field in I with defining polynomial x^2 + 1'`

* `sage -t --warn-long 54.2 src/sage/rings/number_field/number_field_element_quadratic.pyx  # 1 doctest failed`

  common parent issue: `TypeError: unsupported operand parent(s) for '*': 'Number Field in I with defining polynomial x^2 + 1' and 'Number Field in sqrt3 with defining polynomial x^2 - 3'`

* `sage -t --warn-long 54.2 src/sage/rings/polynomial/polynomial_rational_flint.pyx  # 1 doctest failed`

  false error is raised

* `sage -t --warn-long 54.2 src/sage/rings/polynomial/cyclotomic.pyx  # 2 doctests failed`

  both can be fixed directly.

* Stuff in `sage/geometry/hyperbolic_space/hyperbolic_*.py` breaks down:
  * `sage -t --warn-long 51.1 src/sage/geometry/hyperbolic_space/hyperbolic_point.py  # 1 doctest failed`
  * `sage -t --warn-long 51.1 src/sage/geometry/hyperbolic_space/hyperbolic_geodesic.py  # 4 doctests failed`
  * `sage -t --warn-long 51.1 src/sage/geometry/hyperbolic_space/hyperbolic_isometry.py  # 1 doctest failed`
  * `sage -t --warn-long 51.1 src/sage/geometry/hyperbolic_space/hyperbolic_model.py  # 2 doctests failed`

  Not sure about these errors, some seem to be coercion related, others are just `TypeError: 'sage.rings.complex_number.ComplexNumber' object is not callable`---maybe that goes away along the way.


These are certainly not all failures, but they should give an idea of what breaks down. The biggest issue seems to be coercion...



---

archive/issue_comments_245532.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@behackl](#comment:24):\n> The biggest issue seems to be coercion...\n\nAnd stuff like `I.log()`.",
    "created_at": "2016-03-07T13:00:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245532",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@behackl](#comment:24):
> The biggest issue seems to be coercion...

And stuff like `I.log()`.



---

archive/issue_comments_245533.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@behackl](#comment:24):\n> * `sage -t --warn-long 54.2 src/sage/rings/infinity.py  # 2 doctests failed`\n> \n>   arithmetic with `oo` is broken.\n\nIt's just missing coercion of number field elements into the infinity ring. It would give a `SignError` anyway.",
    "created_at": "2016-03-07T14:46:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245533",
    "user": "https://github.com/rwst"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@behackl](#comment:24):
> * `sage -t --warn-long 54.2 src/sage/rings/infinity.py  # 2 doctests failed`
> 
>   arithmetic with `oo` is broken.

It's just missing coercion of number field elements into the infinity ring. It would give a `SignError` anyway.



---

archive/issue_comments_245534.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nWould \n\n```\nA = GaussianIntegers()\nA(1+I)\n```\nwork with this branch?",
    "created_at": "2016-06-22T20:09:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245534",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:27" align="right">comment:27</div>

Would 

```
A = GaussianIntegers()
A(1+I)
```
work with this branch?



---

archive/issue_comments_245535.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@kcrisman](#comment:27):\n\n```\nsage: A = GaussianIntegers()\nsage: A(1+I)\nI + 1\nsage: type(_)\n<type 'sage.rings.number_field.number_field_element_quadratic.OrderElement_quadratic'>\n```",
    "created_at": "2016-06-25T06:32:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245535",
    "user": "https://github.com/rwst"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@kcrisman](#comment:27):

```
sage: A = GaussianIntegers()
sage: A(1+I)
I + 1
sage: type(_)
<type 'sage.rings.number_field.number_field_element_quadratic.OrderElement_quadratic'>
```



---

archive/issue_comments_245536.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nThanks!  That is definitely a motivation for me to review this next week ... any sense on whether the various doctest failures are \"real\", as opposed to just fixes like [comment:26](#comment:26)?",
    "created_at": "2016-06-25T11:50:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245536",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:29" align="right">comment:29</div>

Thanks!  That is definitely a motivation for me to review this next week ... any sense on whether the various doctest failures are "real", as opposed to just fixes like [comment:26](#comment:26)?



---

archive/issue_comments_245537.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nWhat's a \"real\" doctest failure? Some features of `SR` simply are not supported for number field elements.",
    "created_at": "2016-06-25T16:29:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245537",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:30" align="right">comment:30</div>

What's a "real" doctest failure? Some features of `SR` simply are not supported for number field elements.



---

archive/issue_comments_245538.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nSo, we must have two different `I`s.\n\nThis interface duplication creates a similar problems to the one with pos.char. elements (either ring elements or symbolic `Mod`). I think what's most understandable to the user would be a switch that prevents mixing and whose value is clearly visible on startup like `symbolic I mode is ON`. I know this goes against the no globals rules but I predict no one will accept having to input `symbolic_I`, and we will get hell for that.",
    "created_at": "2016-06-26T13:02:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245538",
    "user": "https://github.com/rwst"
}
```

<div id="comment:31" align="right">comment:31</div>

So, we must have two different `I`s.

This interface duplication creates a similar problems to the one with pos.char. elements (either ring elements or symbolic `Mod`). I think what's most understandable to the user would be a switch that prevents mixing and whose value is clearly visible on startup like `symbolic I mode is ON`. I know this goes against the no globals rules but I predict no one will accept having to input `symbolic_I`, and we will get hell for that.



---

archive/issue_comments_245539.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@rwst](#comment:31):\n> So, we must have two different `I`s.\n\nI've lost track what the exact issues are that lead to that conclusion, but I would definitely prefer if we don't do that. I think we can avoid it for the following reason:\n\nSage itself needs *many* different I's. For one thing, every `ComplexField(b)` needs its own. We'd like coercion to take care of creating the many different I's. I guess we're now finding it's difficult to find a parent that coerces into sufficiently many complex parents.\n\nIf that is the case, perhaps we should solve the problem by just having a `LiteralI`, just as we have `RealLiteral` to avoid the precision coercion problems that arise with floats. The advantage is that its coercion properties can be tailored exactly to what we need (within the bounds of what coercion can handle in the first place)\n\nIt doesn't surprise me that I is problematic that way. It is, after all, an object that represents multiple values.",
    "created_at": "2016-06-26T14:23:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245539",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@rwst](#comment:31):
> So, we must have two different `I`s.

I've lost track what the exact issues are that lead to that conclusion, but I would definitely prefer if we don't do that. I think we can avoid it for the following reason:

Sage itself needs *many* different I's. For one thing, every `ComplexField(b)` needs its own. We'd like coercion to take care of creating the many different I's. I guess we're now finding it's difficult to find a parent that coerces into sufficiently many complex parents.

If that is the case, perhaps we should solve the problem by just having a `LiteralI`, just as we have `RealLiteral` to avoid the precision coercion problems that arise with floats. The advantage is that its coercion properties can be tailored exactly to what we need (within the bounds of what coercion can handle in the first place)

It doesn't surprise me that I is problematic that way. It is, after all, an object that represents multiple values.



---

archive/issue_comments_245540.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@rwst](#comment:31):\n> So, we must have two different `I`s.\n\nWe really should not do that. Ideally, `I` should be some number field element but which allows the appropriate symbolic operations.",
    "created_at": "2016-06-26T15:19:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245540",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@rwst](#comment:31):
> So, we must have two different `I`s.

We really should not do that. Ideally, `I` should be some number field element but which allows the appropriate symbolic operations.



---

archive/issue_comments_245541.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nReplying to [@jdemeyer](#comment:33):\n> Ideally, `I` should be some number field element but which allows the appropriate symbolic operations.\n\nWell, if the operation's name is a registered function\n, convert to symbolic, apply, convert back?",
    "created_at": "2016-06-26T15:28:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245541",
    "user": "https://github.com/rwst"
}
```

<div id="comment:34" align="right">comment:34</div>

Replying to [@jdemeyer](#comment:33):
> Ideally, `I` should be some number field element but which allows the appropriate symbolic operations.

Well, if the operation's name is a registered function
, convert to symbolic, apply, convert back?



---

archive/issue_comments_245542.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nSee also #22208.",
    "created_at": "2017-01-20T01:55:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245542",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:35" align="right">comment:35</div>

See also #22208.



---

archive/issue_comments_245543.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/i_parent___should_not_be_the_symbolic_ring](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/i_parent___should_not_be_the_symbolic_ring)** to **[public/18036](https://github.com/sagemath/sagetrac-mirror/tree/public/18036)**",
    "created_at": "2017-02-20T07:20:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245543",
    "user": "https://github.com/rwst"
}
```

Changed branch from **[u/jdemeyer/i_parent___should_not_be_the_symbolic_ring](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/i_parent___should_not_be_the_symbolic_ring)** to **[public/18036](https://github.com/sagemath/sagetrac-mirror/tree/public/18036)**



---

archive/issue_comments_245544.json:
```json
{
    "body": "<div id=\"comment:37\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7fab0b6a8628301543ed7bfae70380e1d6fa714\"><code>d7fab0b</code></a></td><td><code>Merge branch 'develop' into t/18036/public/18036</code></td></tr></table>\n",
    "created_at": "2018-03-04T15:21:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245544",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:37"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7fab0b6a8628301543ed7bfae70380e1d6fa714"><code>d7fab0b</code></a></td><td><code>Merge branch 'develop' into t/18036/public/18036</code></td></tr></table>




---

archive/issue_comments_245545.json:
```json
{
    "body": "Changed commit from **[`2f5a519`](https://github.com/sagemath/sagetrac-mirror/commit/2f5a5198849c5b96bc2733e1e5853dc1b23f1cf9)** to **[`d7fab0b`](https://github.com/sagemath/sagetrac-mirror/commit/d7fab0b6a8628301543ed7bfae70380e1d6fa714)**",
    "created_at": "2018-03-04T15:21:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245545",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2f5a519`](https://github.com/sagemath/sagetrac-mirror/commit/2f5a5198849c5b96bc2733e1e5853dc1b23f1cf9)** to **[`d7fab0b`](https://github.com/sagemath/sagetrac-mirror/commit/d7fab0b6a8628301543ed7bfae70380e1d6fa714)**



---

archive/issue_events_254184.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-18T19:41:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18036#event-254184"
}
```



---

archive/issue_events_254185.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-18T19:41:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18036#event-254185"
}
```



---

archive/issue_events_254186.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-29T16:37:33Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18036#event-254186"
}
```



---

archive/issue_events_254187.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-29T16:37:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18036#event-254187"
}
```



---

archive/issue_comments_245546.json:
```json
{
    "body": "Changed commit from **[`d7fab0b`](https://github.com/sagemath/sagetrac-mirror/commit/d7fab0b6a8628301543ed7bfae70380e1d6fa714)** to **[`2657cd7`](https://github.com/sagemath/sagetrac-mirror/commit/2657cd768a920d339cc7bc9d2b4dd88cf3862d8d)**",
    "created_at": "2020-10-19T08:55:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245546",
    "user": "https://github.com/mezzarobba"
}
```

Changed commit from **[`d7fab0b`](https://github.com/sagemath/sagetrac-mirror/commit/d7fab0b6a8628301543ed7bfae70380e1d6fa714)** to **[`2657cd7`](https://github.com/sagemath/sagetrac-mirror/commit/2657cd768a920d339cc7bc9d2b4dd88cf3862d8d)**



---

archive/issue_comments_245547.json:
```json
{
    "body": "Author: **Marc Mezzarobba**",
    "created_at": "2020-10-19T08:55:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245547",
    "user": "https://github.com/mezzarobba"
}
```

Author: **Marc Mezzarobba**



---

archive/issue_comments_245548.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nTime to reboot this ticket! (Still a bit of a work in progress, comments welcome.)",
    "created_at": "2020-10-19T08:55:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245548",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:40" align="right">comment:40</div>

Time to reboot this ticket! (Still a bit of a work in progress, comments welcome.)



---

archive/issue_comments_245549.json:
```json
{
    "body": "Changed branch from **[public/18036](https://github.com/sagemath/sagetrac-mirror/tree/public/18036)** to **[u/mmezzarobba/18036-QQi](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/18036-QQi)**",
    "created_at": "2020-10-19T08:55:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245549",
    "user": "https://github.com/mezzarobba"
}
```

Changed branch from **[public/18036](https://github.com/sagemath/sagetrac-mirror/tree/public/18036)** to **[u/mmezzarobba/18036-QQi](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/18036-QQi)**



---

archive/issue_comments_245550.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,7 @@\n-As suggested in #7545, `I` (so that `I^2 = -1`) should be defined directly as the generator of `QuadraticField(-1)` and not wrapped into a symbolic expression.\n+As suggested in #7545, this ticket defines the imaginary unit `I` directly as the generator of `QuadraticField(-1)` instead of wrapping it in a symbolic expression.\n \n-Currently, `I` is defined in `sage/symbolic/pynac.pyx` within the function `init_pynac_I`.\n+**Why?** To allow it to be used in combination with elements of QQbar, CC, etc., without coercion forcing the expression to SR. For example, `1.0 + I` is now an element of CC instead of SR.\n+\n+**How?** We set `I` in sage.all to the generator of \u211a[i], and deprecate importing it from `sage.symbolic.I`. The symbolic `I` remains available from `sage.symbolic.constants` for library code working with symbolic expressions, and as `SR(I)` or `SR.I()`. We create a dedicated subclass of quadratic number field elements to make it possible to support features similar to those of symbolic expressions of the form `a + I*b` that would not make sense for number field elements (or be too hard to implement, or pollute the namespace).\n+\n+**Why not \u2124[i]?** Because the class hierarchy of number field and order elements makes it difficult to provide the compatibility features mentioned above for elements of both \u2124[i] and \u211a[i]. Having `I` be an element of \u211a[i] covers almost all use cases (all except working with algebraic integers?), and people who work with orders are sophisticated enough to explicitly ask for I\u00a0\u2208\u00a0\u2124[i] when they need that. (This is a debatable choice. We could probably do without the dedicated subclass for elements of \u211a[i], at the price of breaking backward compatibility a bit more.)\n``````\n",
    "created_at": "2020-10-19T08:55:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245550",
    "user": "https://github.com/mezzarobba"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,7 @@
-As suggested in #7545, `I` (so that `I^2 = -1`) should be defined directly as the generator of `QuadraticField(-1)` and not wrapped into a symbolic expression.
+As suggested in #7545, this ticket defines the imaginary unit `I` directly as the generator of `QuadraticField(-1)` instead of wrapping it in a symbolic expression.
 
-Currently, `I` is defined in `sage/symbolic/pynac.pyx` within the function `init_pynac_I`.
+**Why?** To allow it to be used in combination with elements of QQbar, CC, etc., without coercion forcing the expression to SR. For example, `1.0 + I` is now an element of CC instead of SR.
+
+**How?** We set `I` in sage.all to the generator of ℚ[i], and deprecate importing it from `sage.symbolic.I`. The symbolic `I` remains available from `sage.symbolic.constants` for library code working with symbolic expressions, and as `SR(I)` or `SR.I()`. We create a dedicated subclass of quadratic number field elements to make it possible to support features similar to those of symbolic expressions of the form `a + I*b` that would not make sense for number field elements (or be too hard to implement, or pollute the namespace).
+
+**Why not ℤ[i]?** Because the class hierarchy of number field and order elements makes it difficult to provide the compatibility features mentioned above for elements of both ℤ[i] and ℚ[i]. Having `I` be an element of ℚ[i] covers almost all use cases (all except working with algebraic integers?), and people who work with orders are sophisticated enough to explicitly ask for I ∈ ℤ[i] when they need that. (This is a debatable choice. We could probably do without the dedicated subclass for elements of ℚ[i], at the price of breaking backward compatibility a bit more.)
``````




---

archive/issue_comments_245551.json:
```json
{
    "body": "<div id=\"comment:41\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2d8979cadc457e7c0b5a11e4feba2e3209d59cbe\"><code>2d8979c</code></a></td><td><code>#18036 change global I to an element of \u211a[i]</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/953aa1ee6242329f942a55473e068b62cd8266d9\"><code>953aa1e</code></a></td><td><code>#18036 add SR.I() for conversion-less access to the symbolic I</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/68ac2e799d17e28383d6881aa6863e2fc3b25035\"><code>68ac2e7</code></a></td><td><code>#18036 add a dedicated element class for \u211a[i]</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6409f1e5300205977d6c4e1b1da506b3eaba8466\"><code>6409f1e</code></a></td><td><code>#18026 explicit pushout(InfinityRing, *) -> SR</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c68f5c0b50b9379c165c7073ff62f446284db6d\"><code>2c68f5c</code></a></td><td><code>#18036 fix imports of I from symbolic.all</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/544c141c9120ea79a7f00b392bae41bf309bc881\"><code>544c141</code></a></td><td><code>#18036 update some doctests using I.pyobject()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8a1ffe91ce02e675b3fe48342a16f342313e3def\"><code>8a1ffe9</code></a></td><td><code>#18036 I \u2192 SR(I) in some doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/79d4513a1c3077be1e95a5536070a9850baba4be\"><code>79d4513</code></a></td><td><code>#18036 minor code adaptations in rings/</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/597ccc4c1750d1bf2ddd0a428226c76146335f7e\"><code>597ccc4</code></a></td><td><code>#18036 update some doctests in rings/</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4d2df78446d3b3fcadde1a8b9431451a8bc537fe\"><code>4d2df78</code></a></td><td><code>#18036 miscellaneous doctest updates</code></td></tr></table>\n",
    "created_at": "2020-10-19T08:56:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245551",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:41"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2d8979cadc457e7c0b5a11e4feba2e3209d59cbe"><code>2d8979c</code></a></td><td><code>#18036 change global I to an element of ℚ[i]</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/953aa1ee6242329f942a55473e068b62cd8266d9"><code>953aa1e</code></a></td><td><code>#18036 add SR.I() for conversion-less access to the symbolic I</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/68ac2e799d17e28383d6881aa6863e2fc3b25035"><code>68ac2e7</code></a></td><td><code>#18036 add a dedicated element class for ℚ[i]</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6409f1e5300205977d6c4e1b1da506b3eaba8466"><code>6409f1e</code></a></td><td><code>#18026 explicit pushout(InfinityRing, *) -> SR</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c68f5c0b50b9379c165c7073ff62f446284db6d"><code>2c68f5c</code></a></td><td><code>#18036 fix imports of I from symbolic.all</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/544c141c9120ea79a7f00b392bae41bf309bc881"><code>544c141</code></a></td><td><code>#18036 update some doctests using I.pyobject()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8a1ffe91ce02e675b3fe48342a16f342313e3def"><code>8a1ffe9</code></a></td><td><code>#18036 I → SR(I) in some doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/79d4513a1c3077be1e95a5536070a9850baba4be"><code>79d4513</code></a></td><td><code>#18036 minor code adaptations in rings/</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/597ccc4c1750d1bf2ddd0a428226c76146335f7e"><code>597ccc4</code></a></td><td><code>#18036 update some doctests in rings/</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4d2df78446d3b3fcadde1a8b9431451a8bc537fe"><code>4d2df78</code></a></td><td><code>#18036 miscellaneous doctest updates</code></td></tr></table>




---

archive/issue_comments_245552.json:
```json
{
    "body": "Changed commit from **[`2657cd7`](https://github.com/sagemath/sagetrac-mirror/commit/2657cd768a920d339cc7bc9d2b4dd88cf3862d8d)** to **[`4d2df78`](https://github.com/sagemath/sagetrac-mirror/commit/4d2df78446d3b3fcadde1a8b9431451a8bc537fe)**",
    "created_at": "2020-10-19T08:56:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245552",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2657cd7`](https://github.com/sagemath/sagetrac-mirror/commit/2657cd768a920d339cc7bc9d2b4dd88cf3862d8d)** to **[`4d2df78`](https://github.com/sagemath/sagetrac-mirror/commit/4d2df78446d3b3fcadde1a8b9431451a8bc537fe)**



---

archive/issue_events_254188.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2020-10-19T08:57:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18036#event-254188"
}
```



---

archive/issue_comments_245553.json:
```json
{
    "body": "Changed commit from **[`4d2df78`](https://github.com/sagemath/sagetrac-mirror/commit/4d2df78446d3b3fcadde1a8b9431451a8bc537fe)** to **[`e47cd5b`](https://github.com/sagemath/sagetrac-mirror/commit/e47cd5bff02a0ca5072cc2ee79cfdf42f0b4ca6c)**",
    "created_at": "2020-10-19T11:40:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245553",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4d2df78`](https://github.com/sagemath/sagetrac-mirror/commit/4d2df78446d3b3fcadde1a8b9431451a8bc537fe)** to **[`e47cd5b`](https://github.com/sagemath/sagetrac-mirror/commit/e47cd5bff02a0ca5072cc2ee79cfdf42f0b4ca6c)**



---

archive/issue_comments_245554.json:
```json
{
    "body": "<div id=\"comment:43\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/92254a365d8929af4f25972fba3b842730688af0\"><code>92254a3</code></a></td><td><code>#18036 fix imports of I from symbolic.all</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4d1663870d5e58c2863fc6d9f1099f100ab9acd9\"><code>4d16638</code></a></td><td><code>#18036 update some doctests using I.pyobject()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f6f4bbaf28d845aa6bf15e2d720e99dba8ad8d43\"><code>f6f4bba</code></a></td><td><code>#18036 I \u2192 SR(I) in some doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fb2cbf0154162df13800eebd1033ded4aafbfe80\"><code>fb2cbf0</code></a></td><td><code>#18036 minor code adaptations in rings/</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/272137a743000c921c6f80a23f97ef3132b6cdf6\"><code>272137a</code></a></td><td><code>#18036 update some doctests in rings/</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e47cd5bff02a0ca5072cc2ee79cfdf42f0b4ca6c\"><code>e47cd5b</code></a></td><td><code>#18036 miscellaneous doctest updates</code></td></tr></table>\n",
    "created_at": "2020-10-19T11:40:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245554",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:43"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/92254a365d8929af4f25972fba3b842730688af0"><code>92254a3</code></a></td><td><code>#18036 fix imports of I from symbolic.all</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4d1663870d5e58c2863fc6d9f1099f100ab9acd9"><code>4d16638</code></a></td><td><code>#18036 update some doctests using I.pyobject()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f6f4bbaf28d845aa6bf15e2d720e99dba8ad8d43"><code>f6f4bba</code></a></td><td><code>#18036 I → SR(I) in some doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fb2cbf0154162df13800eebd1033ded4aafbfe80"><code>fb2cbf0</code></a></td><td><code>#18036 minor code adaptations in rings/</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/272137a743000c921c6f80a23f97ef3132b6cdf6"><code>272137a</code></a></td><td><code>#18036 update some doctests in rings/</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e47cd5bff02a0ca5072cc2ee79cfdf42f0b4ca6c"><code>e47cd5b</code></a></td><td><code>#18036 miscellaneous doctest updates</code></td></tr></table>




---

archive/issue_comments_245555.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nI can't speak to all the small changes that impact number field users, but I really like how atomic your commits are, well explained, and overall you seem to have a good approach.  And if the doctests still pass, that might be a good sign in and of itself (though obviously shouldn't be added to an rc at this late date).  Can anyone think of any other \"extra\" methods like `real_part` that should be added in `class NumberFieldElement_gaussian`?",
    "created_at": "2020-10-19T14:47:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245555",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:44" align="right">comment:44</div>

I can't speak to all the small changes that impact number field users, but I really like how atomic your commits are, well explained, and overall you seem to have a good approach.  And if the doctests still pass, that might be a good sign in and of itself (though obviously shouldn't be added to an rc at this late date).  Can anyone think of any other "extra" methods like `real_part` that should be added in `class NumberFieldElement_gaussian`?



---

archive/issue_comments_245556.json:
```json
{
    "body": "Changed commit from **[`e47cd5b`](https://github.com/sagemath/sagetrac-mirror/commit/e47cd5bff02a0ca5072cc2ee79cfdf42f0b4ca6c)** to **[`c4d4fa7`](https://github.com/sagemath/sagetrac-mirror/commit/c4d4fa750c0220b3c5b56d7bdd05651498dd3614)**",
    "created_at": "2020-10-20T06:10:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245556",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e47cd5b`](https://github.com/sagemath/sagetrac-mirror/commit/e47cd5bff02a0ca5072cc2ee79cfdf42f0b4ca6c)** to **[`c4d4fa7`](https://github.com/sagemath/sagetrac-mirror/commit/c4d4fa750c0220b3c5b56d7bdd05651498dd3614)**



---

archive/issue_comments_245557.json:
```json
{
    "body": "<div id=\"comment:45\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a223789d70398c2fa3f56f83cda07892aa679c8e\"><code>a223789</code></a></td><td><code>[wip] attempt to fix the issues with pari</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c4d4fa750c0220b3c5b56d7bdd05651498dd3614\"><code>c4d4fa7</code></a></td><td><code>[wip] further doctest updates</code></td></tr></table>\n",
    "created_at": "2020-10-20T06:10:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245557",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:45"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a223789d70398c2fa3f56f83cda07892aa679c8e"><code>a223789</code></a></td><td><code>[wip] attempt to fix the issues with pari</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c4d4fa750c0220b3c5b56d7bdd05651498dd3614"><code>c4d4fa7</code></a></td><td><code>[wip] further doctest updates</code></td></tr></table>




---

archive/issue_comments_245558.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nReplying to [@kcrisman](#comment:44):\n> I can't speak to all the small changes that impact number field users,\n\nIt should not have much impact, except maybe for the conversion to pari which is overridden to return a pari object of the form a+I*b instead of a element of a quotient ring. I don't know pari well enough to be able to tell if that can be an issue.\n\n> but I really like how atomic your commits are, well explained, and overall you seem to have a good approach.\n\nThank you!\n\n> And if the doctests still pass, that might be a good sign in and of itself (though obviously shouldn't be added to an rc at this late date).\n\nNo. Ideally, I would like it to be merged early in the next release cycle, so that we have time to sort out any issues.\n\n> Can anyone think of any other \"extra\" methods like `real_part` that should be added in `class NumberFieldElement_gaussian`?\n\nThere was a discussion above about possibly supporting a significant subset of the methods of symbolic expressions, including elementary and special functions. I am reluctant to do that, because we will never achieve  perfect compatibility, and integers and rationals already  have their own API (so that users already need explicit conversions to SR in many cases if they want to use methods of symbolic expressions). But there may still be other methods  that make sense to add.",
    "created_at": "2020-10-20T06:27:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245558",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:46" align="right">comment:46</div>

Replying to [@kcrisman](#comment:44):
> I can't speak to all the small changes that impact number field users,

It should not have much impact, except maybe for the conversion to pari which is overridden to return a pari object of the form a+I*b instead of a element of a quotient ring. I don't know pari well enough to be able to tell if that can be an issue.

> but I really like how atomic your commits are, well explained, and overall you seem to have a good approach.

Thank you!

> And if the doctests still pass, that might be a good sign in and of itself (though obviously shouldn't be added to an rc at this late date).

No. Ideally, I would like it to be merged early in the next release cycle, so that we have time to sort out any issues.

> Can anyone think of any other "extra" methods like `real_part` that should be added in `class NumberFieldElement_gaussian`?

There was a discussion above about possibly supporting a significant subset of the methods of symbolic expressions, including elementary and special functions. I am reluctant to do that, because we will never achieve  perfect compatibility, and integers and rationals already  have their own API (so that users already need explicit conversions to SR in many cases if they want to use methods of symbolic expressions). But there may still be other methods  that make sense to add.



---

archive/issue_comments_245559.json:
```json
{
    "body": "<div id=\"comment:47\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/701658e21be0c30ad7aa68c5f6fc9b945a6961c6\"><code>701658e</code></a></td><td><code>[wip] attempt to fix the issues with pari</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3ab8aa6a01ee9c4f6e4040b3f7817f3d8a81f1fa\"><code>3ab8aa6</code></a></td><td><code>[wip] further doctest updates</code></td></tr></table>\n",
    "created_at": "2020-10-20T10:41:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245559",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:47"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/701658e21be0c30ad7aa68c5f6fc9b945a6961c6"><code>701658e</code></a></td><td><code>[wip] attempt to fix the issues with pari</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3ab8aa6a01ee9c4f6e4040b3f7817f3d8a81f1fa"><code>3ab8aa6</code></a></td><td><code>[wip] further doctest updates</code></td></tr></table>




---

archive/issue_comments_245560.json:
```json
{
    "body": "Changed commit from **[`c4d4fa7`](https://github.com/sagemath/sagetrac-mirror/commit/c4d4fa750c0220b3c5b56d7bdd05651498dd3614)** to **[`3ab8aa6`](https://github.com/sagemath/sagetrac-mirror/commit/3ab8aa6a01ee9c4f6e4040b3f7817f3d8a81f1fa)**",
    "created_at": "2020-10-20T10:41:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245560",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c4d4fa7`](https://github.com/sagemath/sagetrac-mirror/commit/c4d4fa750c0220b3c5b56d7bdd05651498dd3614)** to **[`3ab8aa6`](https://github.com/sagemath/sagetrac-mirror/commit/3ab8aa6a01ee9c4f6e4040b3f7817f3d8a81f1fa)**



---

archive/issue_comments_245561.json:
```json
{
    "body": "<div id=\"comment:48\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ef659d9284a7f9fbd890e8ea32117d0e477d81fb\"><code>ef659d9</code></a></td><td><code>[wip] attempt to fix the issues with pari</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b724b83b07333d97069088cf5c79c6dbdb8a0601\"><code>b724b83</code></a></td><td><code>[wip] further doctest updates</code></td></tr></table>\n",
    "created_at": "2020-10-20T13:22:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245561",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:48"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ef659d9284a7f9fbd890e8ea32117d0e477d81fb"><code>ef659d9</code></a></td><td><code>[wip] attempt to fix the issues with pari</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b724b83b07333d97069088cf5c79c6dbdb8a0601"><code>b724b83</code></a></td><td><code>[wip] further doctest updates</code></td></tr></table>




---

archive/issue_comments_245562.json:
```json
{
    "body": "Changed commit from **[`3ab8aa6`](https://github.com/sagemath/sagetrac-mirror/commit/3ab8aa6a01ee9c4f6e4040b3f7817f3d8a81f1fa)** to **[`b724b83`](https://github.com/sagemath/sagetrac-mirror/commit/b724b83b07333d97069088cf5c79c6dbdb8a0601)**",
    "created_at": "2020-10-20T13:22:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245562",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3ab8aa6`](https://github.com/sagemath/sagetrac-mirror/commit/3ab8aa6a01ee9c4f6e4040b3f7817f3d8a81f1fa)** to **[`b724b83`](https://github.com/sagemath/sagetrac-mirror/commit/b724b83b07333d97069088cf5c79c6dbdb8a0601)**



---

archive/issue_comments_245563.json:
```json
{
    "body": "<div id=\"comment:49\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d46c7abb5299ba48bc3f8a2a627522bd47187dbc\"><code>d46c7ab</code></a></td><td><code>#18036 miscellaneous doctest updates</code></td></tr></table>\n",
    "created_at": "2020-10-20T18:12:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245563",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:49"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d46c7abb5299ba48bc3f8a2a627522bd47187dbc"><code>d46c7ab</code></a></td><td><code>#18036 miscellaneous doctest updates</code></td></tr></table>




---

archive/issue_comments_245564.json:
```json
{
    "body": "Changed commit from **[`b724b83`](https://github.com/sagemath/sagetrac-mirror/commit/b724b83b07333d97069088cf5c79c6dbdb8a0601)** to **[`d46c7ab`](https://github.com/sagemath/sagetrac-mirror/commit/d46c7abb5299ba48bc3f8a2a627522bd47187dbc)**",
    "created_at": "2020-10-20T18:12:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245564",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b724b83`](https://github.com/sagemath/sagetrac-mirror/commit/b724b83b07333d97069088cf5c79c6dbdb8a0601)** to **[`d46c7ab`](https://github.com/sagemath/sagetrac-mirror/commit/d46c7abb5299ba48bc3f8a2a627522bd47187dbc)**



---

archive/issue_comments_245565.json:
```json
{
    "body": "<div id=\"comment:50\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7375723a860414d3985f355d29a61ecd1edba1d0\"><code>7375723</code></a></td><td><code>#18036 fix type test in EllipticCurve_rational_field.eval_modular_form()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/59d4e9870453e0ccf2097f525ea20243da7a18a7\"><code>59d4e98</code></a></td><td><code>#18036 miscellaneous doctest updates</code></td></tr></table>\n",
    "created_at": "2020-10-21T05:56:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245565",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:50"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7375723a860414d3985f355d29a61ecd1edba1d0"><code>7375723</code></a></td><td><code>#18036 fix type test in EllipticCurve_rational_field.eval_modular_form()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/59d4e9870453e0ccf2097f525ea20243da7a18a7"><code>59d4e98</code></a></td><td><code>#18036 miscellaneous doctest updates</code></td></tr></table>




---

archive/issue_comments_245566.json:
```json
{
    "body": "Changed commit from **[`d46c7ab`](https://github.com/sagemath/sagetrac-mirror/commit/d46c7abb5299ba48bc3f8a2a627522bd47187dbc)** to **[`59d4e98`](https://github.com/sagemath/sagetrac-mirror/commit/59d4e9870453e0ccf2097f525ea20243da7a18a7)**",
    "created_at": "2020-10-21T05:56:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245566",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d46c7ab`](https://github.com/sagemath/sagetrac-mirror/commit/d46c7abb5299ba48bc3f8a2a627522bd47187dbc)** to **[`59d4e98`](https://github.com/sagemath/sagetrac-mirror/commit/59d4e9870453e0ccf2097f525ea20243da7a18a7)**



---

archive/issue_comments_245567.json:
```json
{
    "body": "Changed commit from **[`59d4e98`](https://github.com/sagemath/sagetrac-mirror/commit/59d4e9870453e0ccf2097f525ea20243da7a18a7)** to **[`423506e`](https://github.com/sagemath/sagetrac-mirror/commit/423506edf89295469a2c75cb0a41e206a98e9839)**",
    "created_at": "2020-10-21T14:05:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245567",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`59d4e98`](https://github.com/sagemath/sagetrac-mirror/commit/59d4e9870453e0ccf2097f525ea20243da7a18a7)** to **[`423506e`](https://github.com/sagemath/sagetrac-mirror/commit/423506edf89295469a2c75cb0a41e206a98e9839)**



---

archive/issue_comments_245568.json:
```json
{
    "body": "<div id=\"comment:51\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/423506edf89295469a2c75cb0a41e206a98e9839\"><code>423506e</code></a></td><td><code>#18036 miscellaneous doctest updates</code></td></tr></table>\n",
    "created_at": "2020-10-21T14:05:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245568",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:51"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/423506edf89295469a2c75cb0a41e206a98e9839"><code>423506e</code></a></td><td><code>#18036 miscellaneous doctest updates</code></td></tr></table>




---

archive/issue_comments_245569.json:
```json
{
    "body": "Changed commit from **[`423506e`](https://github.com/sagemath/sagetrac-mirror/commit/423506edf89295469a2c75cb0a41e206a98e9839)** to **[`983a0c7`](https://github.com/sagemath/sagetrac-mirror/commit/983a0c73400e57834d0a0f45d136c944a78a5b55)**",
    "created_at": "2020-10-22T08:31:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245569",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`423506e`](https://github.com/sagemath/sagetrac-mirror/commit/423506edf89295469a2c75cb0a41e206a98e9839)** to **[`983a0c7`](https://github.com/sagemath/sagetrac-mirror/commit/983a0c73400e57834d0a0f45d136c944a78a5b55)**



---

archive/issue_comments_245570.json:
```json
{
    "body": "<div id=\"comment:52\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0604abea66c744569b7197bab366af720b554379\"><code>0604abe</code></a></td><td><code>#18036 explicit pushout(InfinityRing, *) -> SR</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a6f98190439e4fe28c8dda3d623b0f7299fcbc9\"><code>3a6f981</code></a></td><td><code>#18036 fix imports of I from symbolic.all</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c7cc809d0cd48035a411cdc8cc646bba2d24bf4\"><code>6c7cc80</code></a></td><td><code>#18036 fix type test in EllipticCurve_rational_field.eval_modular_form()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ab919386cf1ee659e92d13b5cde50ed35670fce5\"><code>ab91938</code></a></td><td><code>#18036 minor code adaptations in rings/</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5280659a59b9d5c0c51047f0fc8bb2a6551f50fd\"><code>5280659</code></a></td><td><code>#18036 doctest updates: I.pyobject()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f48d48169c90ad8706a9f8511a58026eab4d030c\"><code>f48d481</code></a></td><td><code>#18036 doctest updates: I \u2192 SR(I)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/715bcf1b64d0c7bcb4ae6492ea914a6e7ea41dff\"><code>715bcf1</code></a></td><td><code>#18036 doctest updates: pari-gp interfaces</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c78746e5c18233c615ac33f07f896db01980062e\"><code>c78746e</code></a></td><td><code>#18036 doctest updates: modular forms</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/983a0c73400e57834d0a0f45d136c944a78a5b55\"><code>983a0c7</code></a></td><td><code>#18036 doctest updates: misc benign changes</code></td></tr></table>\n",
    "created_at": "2020-10-22T08:31:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245570",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:52"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0604abea66c744569b7197bab366af720b554379"><code>0604abe</code></a></td><td><code>#18036 explicit pushout(InfinityRing, *) -> SR</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a6f98190439e4fe28c8dda3d623b0f7299fcbc9"><code>3a6f981</code></a></td><td><code>#18036 fix imports of I from symbolic.all</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c7cc809d0cd48035a411cdc8cc646bba2d24bf4"><code>6c7cc80</code></a></td><td><code>#18036 fix type test in EllipticCurve_rational_field.eval_modular_form()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ab919386cf1ee659e92d13b5cde50ed35670fce5"><code>ab91938</code></a></td><td><code>#18036 minor code adaptations in rings/</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5280659a59b9d5c0c51047f0fc8bb2a6551f50fd"><code>5280659</code></a></td><td><code>#18036 doctest updates: I.pyobject()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f48d48169c90ad8706a9f8511a58026eab4d030c"><code>f48d481</code></a></td><td><code>#18036 doctest updates: I → SR(I)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/715bcf1b64d0c7bcb4ae6492ea914a6e7ea41dff"><code>715bcf1</code></a></td><td><code>#18036 doctest updates: pari-gp interfaces</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c78746e5c18233c615ac33f07f896db01980062e"><code>c78746e</code></a></td><td><code>#18036 doctest updates: modular forms</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/983a0c73400e57834d0a0f45d136c944a78a5b55"><code>983a0c7</code></a></td><td><code>#18036 doctest updates: misc benign changes</code></td></tr></table>




---

archive/issue_comments_245571.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nOkay, the branch is now stable as far as I am concerned, and all tests to pass. It wouldn't be a bad time to start reviewing it if anyone is interested!",
    "created_at": "2020-10-23T06:41:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245571",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:53" align="right">comment:53</div>

Okay, the branch is now stable as far as I am concerned, and all tests to pass. It wouldn't be a bad time to start reviewing it if anyone is interested!



---

archive/issue_comments_245572.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nimpressive :)",
    "created_at": "2020-10-23T07:04:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245572",
    "user": "https://github.com/videlec"
}
```

<div id="comment:54" align="right">comment:54</div>

impressive :)



---

archive/issue_comments_245573.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nI am annoyed that you had to introduce a specific class `NumberFieldElement_gaussian`. In the long run do you intend to put more in it or to remove it? For the sake of this ticket, I would\n\n- implement `_symbolic_`, `real_part`, `imag_part` on `NumberFieldElement_quadratic` (taking care of the embedding). Note that this would be desirable for more general number fields but more complicated (eg which symbolic representation? And number fields are generally not stable under taking real part.)\n- explicitely deprecate `log`\n\nSo that `NumberFieldElement_gaussian` would just be a transition class.",
    "created_at": "2020-10-23T07:13:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245573",
    "user": "https://github.com/videlec"
}
```

<div id="comment:55" align="right">comment:55</div>

I am annoyed that you had to introduce a specific class `NumberFieldElement_gaussian`. In the long run do you intend to put more in it or to remove it? For the sake of this ticket, I would

- implement `_symbolic_`, `real_part`, `imag_part` on `NumberFieldElement_quadratic` (taking care of the embedding). Note that this would be desirable for more general number fields but more complicated (eg which symbolic representation? And number fields are generally not stable under taking real part.)
- explicitely deprecate `log`

So that `NumberFieldElement_gaussian` would just be a transition class.



---

archive/issue_comments_245574.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nAlso, the default embedding is not ideal\n\n```\nsage: I.parent().coerce_embedding()                                                                                                                                                            \nGeneric morphism:\n  From: Number Field in I with defining polynomial x^2 + 1 with I = 1*I\n  To:   Complex Lazy Field\n  Defn: I -> 1*I\n```\nCould we set it to `QQbar`?",
    "created_at": "2020-10-23T07:25:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245574",
    "user": "https://github.com/videlec"
}
```

<div id="comment:56" align="right">comment:56</div>

Also, the default embedding is not ideal

```
sage: I.parent().coerce_embedding()                                                                                                                                                            
Generic morphism:
  From: Number Field in I with defining polynomial x^2 + 1 with I = 1*I
  To:   Complex Lazy Field
  Defn: I -> 1*I
```
Could we set it to `QQbar`?



---

archive/issue_comments_245575.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nReplying to [@videlec](#comment:55):\n> I am annoyed that you had to introduce a specific class `NumberFieldElement_gaussian`. In the long run do you intend to put more in it or to remove it?\n\nTo put more in it, probably.\n\nReplying to [@videlec](#comment:56):\n> Also, the default embedding is not ideal\n> \n> ```\n> sage: I.parent().coerce_embedding()                                                                                                                                                            \n> Generic morphism:\n>   From: Number Field in I with defining polynomial x^2 + 1 with I = 1*I\n>   To:   Complex Lazy Field\n>   Defn: I -> 1*I\n> ```\n> Could we set it to `QQbar`?\n\nI was thinking of doing that later, in #12715. But I will try to see if doing it now just for \u211a[i] breaks anything.",
    "created_at": "2020-10-23T08:55:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245575",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:57" align="right">comment:57</div>

Replying to [@videlec](#comment:55):
> I am annoyed that you had to introduce a specific class `NumberFieldElement_gaussian`. In the long run do you intend to put more in it or to remove it?

To put more in it, probably.

Replying to [@videlec](#comment:56):
> Also, the default embedding is not ideal
> 
> ```
> sage: I.parent().coerce_embedding()                                                                                                                                                            
> Generic morphism:
>   From: Number Field in I with defining polynomial x^2 + 1 with I = 1*I
>   To:   Complex Lazy Field
>   Defn: I -> 1*I
> ```
> Could we set it to `QQbar`?

I was thinking of doing that later, in #12715. But I will try to see if doing it now just for ℚ[i] breaks anything.



---

archive/issue_comments_245576.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nReplying to [@mezzarobba](#comment:57):\n> > Could we set it to `QQbar`?\n\n> \n> I was thinking of doing that later, in #12715. But I will try to see if doing it now just for \u211a[i] breaks anything.\n\nThat creates import loops which may require to change the order of imports in sage.all significantly: the initialization of QQbar in sage.all currently comes very late, but the change would require moving it before that of pynac, which is done much earlier. I don't have the courage to try to untangle that mess at the moment.",
    "created_at": "2020-10-23T09:19:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245576",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:58" align="right">comment:58</div>

Replying to [@mezzarobba](#comment:57):
> > Could we set it to `QQbar`?

> 
> I was thinking of doing that later, in #12715. But I will try to see if doing it now just for ℚ[i] breaks anything.

That creates import loops which may require to change the order of imports in sage.all significantly: the initialization of QQbar in sage.all currently comes very late, but the change would require moving it before that of pynac, which is done much earlier. I don't have the courage to try to untangle that mess at the moment.



---

archive/issue_comments_245577.json:
```json
{
    "body": "<div id=\"comment:59\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/549b73b7fc7ef3edf9726c262b210f2ac788025d\"><code>549b73b</code></a></td><td><code>#18036 add a dedicated element class for \u211a[i]</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/357c7e365a25227f985c7ad36825c13d33821aff\"><code>357c7e3</code></a></td><td><code>#18036 explicit pushout(InfinityRing, *) -> SR</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6b63640a9061e6eec4239bbaf778043d4843f0e8\"><code>6b63640</code></a></td><td><code>#18036 fix imports of I from symbolic.all</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2d3bf8732fd218e44da11770e650f4d31500cf3d\"><code>2d3bf87</code></a></td><td><code>#18036 fix type test in EllipticCurve_rational_field.eval_modular_form()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a9937ef0b8e0c7d955c117cd712c7939bb4fe1c0\"><code>a9937ef</code></a></td><td><code>#18036 minor code adaptations in rings/</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b6e111726e3b7708b2c60e3e6ad5f010dc742e25\"><code>b6e1117</code></a></td><td><code>#18036 doctest updates: I.pyobject()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e8a8ce9d96aed7ed01174bc2b4096f7a2d734b1f\"><code>e8a8ce9</code></a></td><td><code>#18036 doctest updates: I \u2192 SR(I)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/860bbfb2f588b2d2232cde8a1a731b4c60e7c8b2\"><code>860bbfb</code></a></td><td><code>#18036 doctest updates: pari-gp interfaces</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/955712d6b08a83bf84e8ea81ed64d71a896240da\"><code>955712d</code></a></td><td><code>#18036 doctest updates: modular forms</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/feb4333de3597611e7fbbfce800dcab2ee67aba6\"><code>feb4333</code></a></td><td><code>#18036 doctest updates: misc benign changes</code></td></tr></table>\n",
    "created_at": "2020-10-25T05:39:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245577",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:59"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/549b73b7fc7ef3edf9726c262b210f2ac788025d"><code>549b73b</code></a></td><td><code>#18036 add a dedicated element class for ℚ[i]</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/357c7e365a25227f985c7ad36825c13d33821aff"><code>357c7e3</code></a></td><td><code>#18036 explicit pushout(InfinityRing, *) -> SR</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6b63640a9061e6eec4239bbaf778043d4843f0e8"><code>6b63640</code></a></td><td><code>#18036 fix imports of I from symbolic.all</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2d3bf8732fd218e44da11770e650f4d31500cf3d"><code>2d3bf87</code></a></td><td><code>#18036 fix type test in EllipticCurve_rational_field.eval_modular_form()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a9937ef0b8e0c7d955c117cd712c7939bb4fe1c0"><code>a9937ef</code></a></td><td><code>#18036 minor code adaptations in rings/</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b6e111726e3b7708b2c60e3e6ad5f010dc742e25"><code>b6e1117</code></a></td><td><code>#18036 doctest updates: I.pyobject()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e8a8ce9d96aed7ed01174bc2b4096f7a2d734b1f"><code>e8a8ce9</code></a></td><td><code>#18036 doctest updates: I → SR(I)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/860bbfb2f588b2d2232cde8a1a731b4c60e7c8b2"><code>860bbfb</code></a></td><td><code>#18036 doctest updates: pari-gp interfaces</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/955712d6b08a83bf84e8ea81ed64d71a896240da"><code>955712d</code></a></td><td><code>#18036 doctest updates: modular forms</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/feb4333de3597611e7fbbfce800dcab2ee67aba6"><code>feb4333</code></a></td><td><code>#18036 doctest updates: misc benign changes</code></td></tr></table>




---

archive/issue_comments_245578.json:
```json
{
    "body": "Changed commit from **[`983a0c7`](https://github.com/sagemath/sagetrac-mirror/commit/983a0c73400e57834d0a0f45d136c944a78a5b55)** to **[`feb4333`](https://github.com/sagemath/sagetrac-mirror/commit/feb4333de3597611e7fbbfce800dcab2ee67aba6)**",
    "created_at": "2020-10-25T05:39:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245578",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`983a0c7`](https://github.com/sagemath/sagetrac-mirror/commit/983a0c73400e57834d0a0f45d136c944a78a5b55)** to **[`feb4333`](https://github.com/sagemath/sagetrac-mirror/commit/feb4333de3597611e7fbbfce800dcab2ee67aba6)**



---

archive/issue_comments_245579.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\n(trivial rebase on final 9.2)",
    "created_at": "2020-10-25T05:39:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245579",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:60" align="right">comment:60</div>

(trivial rebase on final 9.2)



---

archive/issue_comments_245580.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nGood! I hope it will get smoothly into the next beta.",
    "created_at": "2020-10-25T14:22:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245580",
    "user": "https://github.com/videlec"
}
```

<div id="comment:61" align="right">comment:61</div>

Good! I hope it will get smoothly into the next beta.



---

archive/issue_events_254189.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-10-25T14:22:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18036#event-254189"
}
```



---

archive/issue_events_254190.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-10-25T14:22:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18036#event-254190"
}
```



---

archive/issue_comments_245581.json:
```json
{
    "body": "Reviewer: **Vincent Delecroix**",
    "created_at": "2020-10-25T14:22:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245581",
    "user": "https://github.com/videlec"
}
```

Reviewer: **Vincent Delecroix**



---

archive/issue_comments_245582.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nThanks a lot!",
    "created_at": "2020-10-25T15:22:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245582",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:62" align="right">comment:62</div>

Thanks a lot!



---

archive/issue_events_254191.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-10-31T18:09:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18036#event-254191"
}
```



---

archive/issue_events_254192.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-10-31T18:09:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18036#event-254192"
}
```



---

archive/issue_comments_245583.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nMerge conflict",
    "created_at": "2020-10-31T18:09:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245583",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:63" align="right">comment:63</div>

Merge conflict



---

archive/issue_comments_245584.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nThanks Volker. Could you merge it early in the next beta? It is likely to create merge conflicts because touching a lot of files.",
    "created_at": "2020-10-31T18:16:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245584",
    "user": "https://github.com/videlec"
}
```

<div id="comment:64" align="right">comment:64</div>

Thanks Volker. Could you merge it early in the next beta? It is likely to create merge conflicts because touching a lot of files.



---

archive/issue_comments_245585.json:
```json
{
    "body": "Changed commit from **[`feb4333`](https://github.com/sagemath/sagetrac-mirror/commit/feb4333de3597611e7fbbfce800dcab2ee67aba6)** to **[`f885b3d`](https://github.com/sagemath/sagetrac-mirror/commit/f885b3d5f8d6432537d1d07afc75382a4a0e107d)**",
    "created_at": "2020-11-01T15:07:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245585",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`feb4333`](https://github.com/sagemath/sagetrac-mirror/commit/feb4333de3597611e7fbbfce800dcab2ee67aba6)** to **[`f885b3d`](https://github.com/sagemath/sagetrac-mirror/commit/f885b3d5f8d6432537d1d07afc75382a4a0e107d)**



---

archive/issue_comments_245586.json:
```json
{
    "body": "<div id=\"comment:65\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9976c5e8d667c156630146ac433daa3273196eb2\"><code>9976c5e</code></a></td><td><code>#18036 add a dedicated element class for \u211a[i]</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3575380d64ce423991df3739b652836fb2af723d\"><code>3575380</code></a></td><td><code>#18036 explicit pushout(InfinityRing, *) -> SR</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d92af6e81d978f9d3c80be42929ab7bb158c5ad\"><code>8d92af6</code></a></td><td><code>#18036 fix imports of I from symbolic.all</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f4b41f6162d1d0a7508d9787ad967a25232974af\"><code>f4b41f6</code></a></td><td><code>#18036 fix type test in EllipticCurve_rational_field.eval_modular_form()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/78a69e089a2b2dc6741cb4cbcc807524dd948a25\"><code>78a69e0</code></a></td><td><code>#18036 minor code adaptations in rings/</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f430a426245194cc955dad0a49f5396fd0312ed5\"><code>f430a42</code></a></td><td><code>#18036 doctest updates: I.pyobject()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/68e0860cd3d4f5ae62ea12c63c238546ded06d16\"><code>68e0860</code></a></td><td><code>#18036 doctest updates: I \u2192 SR(I)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/81c3a79b3bba4b6aee7549905cae2895a7922716\"><code>81c3a79</code></a></td><td><code>#18036 doctest updates: pari-gp interfaces</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/73185af8f20eb806e428a01fe6e6cc11fb04e580\"><code>73185af</code></a></td><td><code>#18036 doctest updates: modular forms</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f885b3d5f8d6432537d1d07afc75382a4a0e107d\"><code>f885b3d</code></a></td><td><code>#18036 doctest updates: misc benign changes</code></td></tr></table>\n",
    "created_at": "2020-11-01T15:07:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245586",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:65"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9976c5e8d667c156630146ac433daa3273196eb2"><code>9976c5e</code></a></td><td><code>#18036 add a dedicated element class for ℚ[i]</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3575380d64ce423991df3739b652836fb2af723d"><code>3575380</code></a></td><td><code>#18036 explicit pushout(InfinityRing, *) -> SR</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d92af6e81d978f9d3c80be42929ab7bb158c5ad"><code>8d92af6</code></a></td><td><code>#18036 fix imports of I from symbolic.all</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f4b41f6162d1d0a7508d9787ad967a25232974af"><code>f4b41f6</code></a></td><td><code>#18036 fix type test in EllipticCurve_rational_field.eval_modular_form()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/78a69e089a2b2dc6741cb4cbcc807524dd948a25"><code>78a69e0</code></a></td><td><code>#18036 minor code adaptations in rings/</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f430a426245194cc955dad0a49f5396fd0312ed5"><code>f430a42</code></a></td><td><code>#18036 doctest updates: I.pyobject()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/68e0860cd3d4f5ae62ea12c63c238546ded06d16"><code>68e0860</code></a></td><td><code>#18036 doctest updates: I → SR(I)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/81c3a79b3bba4b6aee7549905cae2895a7922716"><code>81c3a79</code></a></td><td><code>#18036 doctest updates: pari-gp interfaces</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/73185af8f20eb806e428a01fe6e6cc11fb04e580"><code>73185af</code></a></td><td><code>#18036 doctest updates: modular forms</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f885b3d5f8d6432537d1d07afc75382a4a0e107d"><code>f885b3d</code></a></td><td><code>#18036 doctest updates: misc benign changes</code></td></tr></table>




---

archive/issue_events_254193.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2020-11-02T12:24:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18036#event-254193"
}
```



---

archive/issue_events_254194.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2020-11-02T12:24:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18036#event-254194"
}
```



---

archive/issue_comments_245587.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nRebase was trivial, tests still pass.",
    "created_at": "2020-11-02T13:53:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245587",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:67" align="right">comment:67</div>

Rebase was trivial, tests still pass.



---

archive/issue_events_254195.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2020-11-02T13:53:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18036#event-254195"
}
```



---

archive/issue_events_254196.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2020-11-02T13:53:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18036#event-254196"
}
```



---

archive/issue_comments_245588.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nMerge conflict",
    "created_at": "2020-11-07T19:20:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245588",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:68" align="right">comment:68</div>

Merge conflict



---

archive/issue_events_254197.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-11-07T19:20:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18036#event-254197"
}
```



---

archive/issue_events_254198.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-11-07T19:20:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18036#event-254198"
}
```



---

archive/issue_comments_245589.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nReplying to [@vbraun](#comment:68):\n> Merge conflict\n\nHow many times are we supposed to play this game? :)",
    "created_at": "2020-11-07T19:24:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245589",
    "user": "https://github.com/videlec"
}
```

<div id="comment:69" align="right">comment:69</div>

Replying to [@vbraun](#comment:68):
> Merge conflict

How many times are we supposed to play this game? :)



---

archive/issue_comments_245590.json:
```json
{
    "body": "<div id=\"comment:70\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11b239cb720517fcb5c1bb7ea4745857900aa895\"><code>11b239c</code></a></td><td><code>#18036 add a dedicated element class for \u211a[i]</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5ed00bc5dd6533fe6a8247fa9257815f42c2927c\"><code>5ed00bc</code></a></td><td><code>#18036 explicit pushout(InfinityRing, *) -> SR</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c9b08f6fcee08fce231597882cb6953f4ad2be89\"><code>c9b08f6</code></a></td><td><code>#18036 fix imports of I from symbolic.all</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11be3793838fe4b5a1617f4614ad7616c45ba4e7\"><code>11be379</code></a></td><td><code>#18036 fix type test in EllipticCurve_rational_field.eval_modular_form()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/81250513565f3a0530b5d082c0654580781a3703\"><code>8125051</code></a></td><td><code>#18036 minor code adaptations in rings/</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e5f93250b4e2711f18c413cca65a1572bffec97c\"><code>e5f9325</code></a></td><td><code>#18036 doctest updates: I.pyobject()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ed58a73ec406d108bd07fe530db571fd461a0481\"><code>ed58a73</code></a></td><td><code>#18036 doctest updates: I \u2192 SR(I)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fe14b1abcf7c3ddf5fcc9e39564104177edaee41\"><code>fe14b1a</code></a></td><td><code>#18036 doctest updates: pari-gp interfaces</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/671eed046afb4de7fba0bc0ae8541ed19ea9717a\"><code>671eed0</code></a></td><td><code>#18036 doctest updates: modular forms</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/10c5abf85b9c0e18b2bb635d2a5f9ed7f3fc0096\"><code>10c5abf</code></a></td><td><code>#18036 doctest updates: misc benign changes</code></td></tr></table>\n",
    "created_at": "2020-11-08T05:05:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245590",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:70"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11b239cb720517fcb5c1bb7ea4745857900aa895"><code>11b239c</code></a></td><td><code>#18036 add a dedicated element class for ℚ[i]</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5ed00bc5dd6533fe6a8247fa9257815f42c2927c"><code>5ed00bc</code></a></td><td><code>#18036 explicit pushout(InfinityRing, *) -> SR</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c9b08f6fcee08fce231597882cb6953f4ad2be89"><code>c9b08f6</code></a></td><td><code>#18036 fix imports of I from symbolic.all</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11be3793838fe4b5a1617f4614ad7616c45ba4e7"><code>11be379</code></a></td><td><code>#18036 fix type test in EllipticCurve_rational_field.eval_modular_form()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/81250513565f3a0530b5d082c0654580781a3703"><code>8125051</code></a></td><td><code>#18036 minor code adaptations in rings/</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e5f93250b4e2711f18c413cca65a1572bffec97c"><code>e5f9325</code></a></td><td><code>#18036 doctest updates: I.pyobject()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ed58a73ec406d108bd07fe530db571fd461a0481"><code>ed58a73</code></a></td><td><code>#18036 doctest updates: I → SR(I)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fe14b1abcf7c3ddf5fcc9e39564104177edaee41"><code>fe14b1a</code></a></td><td><code>#18036 doctest updates: pari-gp interfaces</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/671eed046afb4de7fba0bc0ae8541ed19ea9717a"><code>671eed0</code></a></td><td><code>#18036 doctest updates: modular forms</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/10c5abf85b9c0e18b2bb635d2a5f9ed7f3fc0096"><code>10c5abf</code></a></td><td><code>#18036 doctest updates: misc benign changes</code></td></tr></table>




---

archive/issue_comments_245591.json:
```json
{
    "body": "Changed commit from **[`f885b3d`](https://github.com/sagemath/sagetrac-mirror/commit/f885b3d5f8d6432537d1d07afc75382a4a0e107d)** to **[`10c5abf`](https://github.com/sagemath/sagetrac-mirror/commit/10c5abf85b9c0e18b2bb635d2a5f9ed7f3fc0096)**",
    "created_at": "2020-11-08T05:05:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245591",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f885b3d`](https://github.com/sagemath/sagetrac-mirror/commit/f885b3d5f8d6432537d1d07afc75382a4a0e107d)** to **[`10c5abf`](https://github.com/sagemath/sagetrac-mirror/commit/10c5abf85b9c0e18b2bb635d2a5f9ed7f3fc0096)**



---

archive/issue_events_254199.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2020-11-08T05:05:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18036#event-254199"
}
```



---

archive/issue_events_254200.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2020-11-08T05:05:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18036#event-254200"
}
```



---

archive/issue_events_254201.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2020-11-08T11:29:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18036#event-254201"
}
```



---

archive/issue_events_254202.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2020-11-08T11:29:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18036#event-254202"
}
```



---

archive/issue_comments_245592.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nPDF docs don't build",
    "created_at": "2020-11-17T23:20:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245592",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:73" align="right">comment:73</div>

PDF docs don't build



---

archive/issue_events_254203.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-11-17T23:20:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18036#event-254203"
}
```



---

archive/issue_events_254204.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-11-17T23:20:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18036#event-254204"
}
```



---

archive/issue_comments_245593.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\ncould be because of\n\n```diff\n+    An element of \u211a[i].\n```",
    "created_at": "2020-11-19T07:16:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245593",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:74" align="right">comment:74</div>

could be because of

```diff
+    An element of ℚ[i].
```



---

archive/issue_comments_245594.json:
```json
{
    "body": "Changed commit from **[`10c5abf`](https://github.com/sagemath/sagetrac-mirror/commit/10c5abf85b9c0e18b2bb635d2a5f9ed7f3fc0096)** to **[`54a34a7`](https://github.com/sagemath/sagetrac-mirror/commit/54a34a7443d373e678c5461e5205ef2cdd7470b1)**",
    "created_at": "2020-11-19T07:46:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245594",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`10c5abf`](https://github.com/sagemath/sagetrac-mirror/commit/10c5abf85b9c0e18b2bb635d2a5f9ed7f3fc0096)** to **[`54a34a7`](https://github.com/sagemath/sagetrac-mirror/commit/54a34a7443d373e678c5461e5205ef2cdd7470b1)**



---

archive/issue_comments_245595.json:
```json
{
    "body": "<div id=\"comment:75\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/54a34a7443d373e678c5461e5205ef2cdd7470b1\"><code>54a34a7</code></a></td><td><code>#18036 fix docstring</code></td></tr></table>\n",
    "created_at": "2020-11-19T07:46:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245595",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:75"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/54a34a7443d373e678c5461e5205ef2cdd7470b1"><code>54a34a7</code></a></td><td><code>#18036 fix docstring</code></td></tr></table>




---

archive/issue_comments_245596.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nThanks Volker and Fr\u00e9d\u00e9ric.",
    "created_at": "2020-11-19T07:48:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245596",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:76" align="right">comment:76</div>

Thanks Volker and Frédéric.



---

archive/issue_events_254205.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2020-11-19T09:18:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18036#event-254205"
}
```



---

archive/issue_events_254206.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2020-11-19T09:18:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18036#event-254206"
}
```



---

archive/issue_events_254207.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-11-22T15:06:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18036#event-254207"
}
```



---

archive/issue_events_254208.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "027ca1730437da5de69f8638c282920a8d29acb5",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-11-22T15:06:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18036#event-254208"
}
```



---

archive/issue_comments_245597.json:
```json
{
    "body": "Changed branch from **[u/mmezzarobba/18036-QQi](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/18036-QQi)** to **[`54a34a7`](https://github.com/sagemath/sagetrac-mirror/commit/54a34a7443d373e678c5461e5205ef2cdd7470b1)**",
    "created_at": "2020-11-22T15:06:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18036",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18036#issuecomment-245597",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mmezzarobba/18036-QQi](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/18036-QQi)** to **[`54a34a7`](https://github.com/sagemath/sagetrac-mirror/commit/54a34a7443d373e678c5461e5205ef2cdd7470b1)**
