# Issue 18278: LatticePoset: add sublattice()

archive/issues_018278.json:
```json
{
    "body": "CC:  @fchapoton @nathanncohen\n\nAdd a function to get smallest sublattice of the lattice containing given elements.\n\nIssue created by migration from https://trac.sagemath.org/ticket/18515\n\n",
    "closed_at": "2015-05-27T22:09:23Z",
    "created_at": "2015-05-26T11:05:37Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.8",
    "title": "LatticePoset: add sublattice()",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18278",
    "user": "https://github.com/jm58660"
}
```
CC:  @fchapoton @nathanncohen

Add a function to get smallest sublattice of the lattice containing given elements.

Issue created by migration from https://trac.sagemath.org/ticket/18515





---

archive/issue_comments_247270.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-05-26T11:40:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18278#issuecomment-247270",
    "user": "https://github.com/jm58660"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_247271.json:
```json
{
    "body": "Slooow. Better than nothing. Needs review.\n  \n---\nNew commits:",
    "created_at": "2015-05-26T11:40:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18278#issuecomment-247271",
    "user": "https://github.com/jm58660"
}
```

Slooow. Better than nothing. Needs review.
  
---
New commits:



---

archive/issue_comments_247272.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-26T11:43:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18278#issuecomment-247272",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_247273.json:
```json
{
    "body": "I think there is a typo. I've changed the code to what I think is correct.  The previous code did the following:\n\n```\nsage: L = Posets.BooleanLattice(3)\nsage: L.sublattice([3,5,6,7])\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-14-837853635c8a> in <module>()\n----> 1 L.sublattice([Integer(3),Integer(5),Integer(6),Integer(7)])\n\n/Users/davideinstein/projects/sage/local/lib/python2.7/site-packages/sage/combinat/posets/lattices.pyc in sublattice(self, elms)\n    881                     elms.append(m)\n    882                     n=True\n--> 883         return LatticePoset(self.subposet(elms))\n    884 \n    885 ############################################################################\n\n/Users/davideinstein/projects/sage/local/lib/python2.7/site-packages/sage/combinat/posets/lattices.pyc in LatticePoset(data, *args, **options)\n    406     P = Poset(data, *args, **options)\n    407     if not P.is_lattice():\n--> 408         raise ValueError(\"Not a lattice.\")\n    409 \n    410     return FiniteLatticePoset(P, category = FiniteLatticePosets(), facade = P._is_facade)\n\nValueError: Not a lattice.\n```\n\nAlso, could you put whitespace around `=` as suggested by http://doc.sagemath.org/html/en/developer/coding_basics.html#python-code-style\n\n---\nNew commits:",
    "created_at": "2015-05-27T03:40:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18278#issuecomment-247273",
    "user": "https://github.com/deinst"
}
```

I think there is a typo. I've changed the code to what I think is correct.  The previous code did the following:

```
sage: L = Posets.BooleanLattice(3)
sage: L.sublattice([3,5,6,7])
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-14-837853635c8a> in <module>()
----> 1 L.sublattice([Integer(3),Integer(5),Integer(6),Integer(7)])

/Users/davideinstein/projects/sage/local/lib/python2.7/site-packages/sage/combinat/posets/lattices.pyc in sublattice(self, elms)
    881                     elms.append(m)
    882                     n=True
--> 883         return LatticePoset(self.subposet(elms))
    884 
    885 ############################################################################

/Users/davideinstein/projects/sage/local/lib/python2.7/site-packages/sage/combinat/posets/lattices.pyc in LatticePoset(data, *args, **options)
    406     P = Poset(data, *args, **options)
    407     if not P.is_lattice():
--> 408         raise ValueError("Not a lattice.")
    409 
    410     return FiniteLatticePoset(P, category = FiniteLatticePosets(), facade = P._is_facade)

ValueError: Not a lattice.
```

Also, could you put whitespace around `=` as suggested by http://doc.sagemath.org/html/en/developer/coding_basics.html#python-code-style

---
New commits:



---

archive/issue_comments_247274.json:
```json
{
    "body": "Otherwise it looks good to me.",
    "created_at": "2015-05-27T03:44:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18278#issuecomment-247274",
    "user": "https://github.com/deinst"
}
```

Otherwise it looks good to me.



---

archive/issue_comments_247275.json:
```json
{
    "body": "Thanks! And yes, there was a stupid typo. I'll try to remember spaces from now on. (A promise I have made before...)\n\nSo, who's going to review this?",
    "created_at": "2015-05-27T05:37:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18278#issuecomment-247275",
    "user": "https://github.com/jm58660"
}
```

Thanks! And yes, there was a stupid typo. I'll try to remember spaces from now on. (A promise I have made before...)

So, who's going to review this?



---

archive/issue_comments_247276.json:
```json
{
    "body": "Yo !\n\nI added a commit at `public/18515` which improves the algorithm a bit. In general, try to avoid using 'Subsets' (or any combinat stuff) if you can avoid it: they implement their code to deal with infinitely more abstraction than you usually need (categories, parents, elements, ...). \n\n```\nsage: type(Subsets([1,2,3],2).an_element())\n<class 'sage.sets.set.Set_object_enumerated_with_category'>\n```\n\nWhen you only need to enumerate pairs of points, the better is to use itertools:\n\n```\nsage: from itertools import combinations\nsage: list(combinations([1,2,3],2))\n[(1, 2), (1, 3), (2, 3)]\n```\n\nSimple, and more efficient.\n\n> So, who's going to review this?\n\n\nWe can review each other's commits, it is not forbidden. For as long as everything is doubled checked, no problem.\n\nNathann",
    "created_at": "2015-05-27T07:52:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18278#issuecomment-247276",
    "user": "https://github.com/nathanncohen"
}
```

Yo !

I added a commit at `public/18515` which improves the algorithm a bit. In general, try to avoid using 'Subsets' (or any combinat stuff) if you can avoid it: they implement their code to deal with infinitely more abstraction than you usually need (categories, parents, elements, ...). 

```
sage: type(Subsets([1,2,3],2).an_element())
<class 'sage.sets.set.Set_object_enumerated_with_category'>
```

When you only need to enumerate pairs of points, the better is to use itertools:

```
sage: from itertools import combinations
sage: list(combinations([1,2,3],2))
[(1, 2), (1, 3), (2, 3)]
```

Simple, and more efficient.

> So, who's going to review this?


We can review each other's commits, it is not forbidden. For as long as everything is doubled checked, no problem.

Nathann



---

archive/issue_comments_247277.json:
```json
{
    "body": "Seems good, but of course doesn't make that much difference than totally other algorithm mentioned in the note. I'll check the code of Nathann and then put this to positive review. (Assuming that deinst doesn't do it before that.)",
    "created_at": "2015-05-27T09:05:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18278#issuecomment-247277",
    "user": "https://github.com/jm58660"
}
```

Seems good, but of course doesn't make that much difference than totally other algorithm mentioned in the note. I'll check the code of Nathann and then put this to positive review. (Assuming that deinst doesn't do it before that.)



---

archive/issue_comments_247278.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-05-27T09:53:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18278#issuecomment-247278",
    "user": "https://github.com/jm58660"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_247279.json:
```json
{
    "body": "Works.\n\n---\nNew commits:",
    "created_at": "2015-05-27T09:53:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18278#issuecomment-247279",
    "user": "https://github.com/jm58660"
}
```

Works.

---
New commits:



---

archive/issue_comments_247280.json:
```json
{
    "body": "`;-)`",
    "created_at": "2015-05-27T11:29:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18278#issuecomment-247280",
    "user": "https://github.com/nathanncohen"
}
```

`;-)`



---

archive/issue_events_052048.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-05-27T22:09:23Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18278",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18278#event-52048"
}
```



---

archive/issue_comments_247281.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-05-27T22:09:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18278#issuecomment-247281",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
