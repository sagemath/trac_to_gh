# Issue 18380: New class for CombinatorialObject +  Element + ClasscallMetaclass

archive/issues_018143.json:
```json
{
    "body": "The combination\n\n```\nclass Foo(CombinatorialObject, Element):\n    `__metaclass__` = ClasscallMetaclass\n```\n\noccurs often enough in `combinat` that it makes sense to define a new class for this.\n\n**CC:**  @nthiery\n\n**Branch/Commit:** [8f60acb73c82116508ef1a88352251ccde88de2c](https://github.com/sagemath/sagetrac-mirror/commit/8f60acb73c82116508ef1a88352251ccde88de2c)\n\n**Reviewer:** Travis Scrimshaw\n\n**Author:** Jeroen Demeyer\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/18380\n\n",
    "closed_at": "2015-05-13T11:33:52Z",
    "created_at": "2015-05-08T08:53:18Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.7",
    "title": "New class for CombinatorialObject +  Element + ClasscallMetaclass",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18380",
    "user": "https://github.com/jdemeyer"
}
```
The combination

```
class Foo(CombinatorialObject, Element):
    `__metaclass__` = ClasscallMetaclass
```

occurs often enough in `combinat` that it makes sense to define a new class for this.

**CC:**  @nthiery

**Branch/Commit:** [8f60acb73c82116508ef1a88352251ccde88de2c](https://github.com/sagemath/sagetrac-mirror/commit/8f60acb73c82116508ef1a88352251ccde88de2c)

**Reviewer:** Travis Scrimshaw

**Author:** Jeroen Demeyer

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/18380





---

archive/issue_comments_323740.json:
```json
{
    "body": "**Branch:** [u/jdemeyer/new_class_for_combinatorialobject____element___classcallmetaclass](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/new_class_for_combinatorialobject____element___classcallmetaclass)",
    "created_at": "2015-05-08T10:27:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18380#issuecomment-323740",
    "user": "https://github.com/jdemeyer"
}
```

**Branch:** [u/jdemeyer/new_class_for_combinatorialobject____element___classcallmetaclass](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/new_class_for_combinatorialobject____element___classcallmetaclass)



---

archive/issue_comments_323741.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2015-05-08T10:57:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18380#issuecomment-323741",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_323742.json:
```json
{
    "body": "**Commit:** [8f60acb73c82116508ef1a88352251ccde88de2c](https://github.com/sagemath/sagetrac-mirror/commit/8f60acb73c82116508ef1a88352251ccde88de2c)",
    "created_at": "2015-05-08T10:57:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18380#issuecomment-323742",
    "user": "https://github.com/jdemeyer"
}
```

**Commit:** [8f60acb73c82116508ef1a88352251ccde88de2c](https://github.com/sagemath/sagetrac-mirror/commit/8f60acb73c82116508ef1a88352251ccde88de2c)



---

archive/issue_comments_323743.json:
```json
{
    "body": "**Author:** Jeroen Demeyer",
    "created_at": "2015-05-08T10:57:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18380#issuecomment-323743",
    "user": "https://github.com/jdemeyer"
}
```

**Author:** Jeroen Demeyer



---

archive/issue_comments_323744.json:
```json
{
    "body": "<a id='comment:2'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8f60acb73c82116508ef1a88352251ccde88de2c\">8f60acb</a></td><td><code>Add class CombinatorialElement</code></td></tr></table>\n",
    "created_at": "2015-05-08T10:57:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18380#issuecomment-323744",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8f60acb73c82116508ef1a88352251ccde88de2c">8f60acb</a></td><td><code>Add class CombinatorialElement</code></td></tr></table>




---

archive/issue_comments_323745.json:
```json
{
    "body": "<a id='comment:3'></a>\nHey Jeroen,\n\nThank you for your work on this. The current long-term goal is to do a similar replacement with (the cythonized) `ClonableArray`, although I'm not quite sure how much more work it would be to switch from `CombinatorialElement`, but maybe we can try that here. Additionally with your recent work with allowing extension classes to support metaclasses, perhaps we can put the `classcall_metaclass` directly into there? Or keep with the inbetween c/python class. Thoughts (and from Nicolas in cc)?",
    "created_at": "2015-05-08T15:28:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18380#issuecomment-323745",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:3'></a>
Hey Jeroen,

Thank you for your work on this. The current long-term goal is to do a similar replacement with (the cythonized) `ClonableArray`, although I'm not quite sure how much more work it would be to switch from `CombinatorialElement`, but maybe we can try that here. Additionally with your recent work with allowing extension classes to support metaclasses, perhaps we can put the `classcall_metaclass` directly into there? Or keep with the inbetween c/python class. Thoughts (and from Nicolas in cc)?



---

archive/issue_comments_323746.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [tscrim](#comment%3A3):\n> Hey Jeroen,\n> \n> Thank you for your work on this. The current long-term goal is to do a similar replacement with (the cythonized) `ClonableArray`, although I'm not quite sure how much more work it would be to switch from `CombinatorialElement`, but maybe we can try that here.\n\nWell, my main reason for this ticket here is to simplify #18329, so I would prefer to merge this ticket quickly and postpone the switch to `ClonableArray` to a different ticket.\n\n> Additionally with your recent work with allowing extension classes to support metaclasses, perhaps we can put the `classcall_metaclass` directly into there?\n\nWell, `ClasscallMetaclass` doesn't quite work yet from Cython. The Cython metaclass mechanism from #18330 is still a bit of a hack and in particular it will not work when the metaclass has attributes.",
    "created_at": "2015-05-08T15:35:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18380#issuecomment-323746",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>
Replying to [tscrim](#comment%3A3):
> Hey Jeroen,
> 
> Thank you for your work on this. The current long-term goal is to do a similar replacement with (the cythonized) `ClonableArray`, although I'm not quite sure how much more work it would be to switch from `CombinatorialElement`, but maybe we can try that here.

Well, my main reason for this ticket here is to simplify #18329, so I would prefer to merge this ticket quickly and postpone the switch to `ClonableArray` to a different ticket.

> Additionally with your recent work with allowing extension classes to support metaclasses, perhaps we can put the `classcall_metaclass` directly into there?

Well, `ClasscallMetaclass` doesn't quite work yet from Cython. The Cython metaclass mechanism from #18330 is still a bit of a hack and in particular it will not work when the metaclass has attributes.



---

archive/issue_comments_323747.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2015-05-09T23:17:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18380#issuecomment-323747",
    "user": "https://github.com/tscrim"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_323748.json:
```json
{
    "body": "<a id='comment:5'></a>\nI tried to make the change and, while it seems easy enough, it will take a little bit of work. So then this will make it easier to move in that direction; positive review.",
    "created_at": "2015-05-09T23:17:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18380#issuecomment-323748",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'></a>
I tried to make the change and, while it seems easy enough, it will take a little bit of work. So then this will make it easier to move in that direction; positive review.



---

archive/issue_comments_323749.json:
```json
{
    "body": "**Reviewer:** Travis Scrimshaw",
    "created_at": "2015-05-09T23:17:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18380#issuecomment-323749",
    "user": "https://github.com/tscrim"
}
```

**Reviewer:** Travis Scrimshaw



---

archive/issue_comments_323750.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/new_class_for_combinatorialobject____element___classcallmetaclass](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/new_class_for_combinatorialobject____element___classcallmetaclass)\" to \"[8f60acb73c82116508ef1a88352251ccde88de2c](https://github.com/sagemath/sagetrac-mirror/commit/8f60acb73c82116508ef1a88352251ccde88de2c)\".",
    "created_at": "2015-05-13T11:33:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18380#issuecomment-323750",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/jdemeyer/new_class_for_combinatorialobject____element___classcallmetaclass](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/new_class_for_combinatorialobject____element___classcallmetaclass)" to "[8f60acb73c82116508ef1a88352251ccde88de2c](https://github.com/sagemath/sagetrac-mirror/commit/8f60acb73c82116508ef1a88352251ccde88de2c)".



---

archive/issue_comments_323751.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2015-05-13T11:33:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18380#issuecomment-323751",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed



---

archive/issue_events_058931.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-05-13T11:33:52Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18380",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18380#event-58931"
}
```
