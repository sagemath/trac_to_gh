# Issue 18013: Implement abstract tableau refactoring

archive/issues_017776.json:
```json
{
    "assignees": [],
    "body": "As part of general cleanup in #17983, implement new abstract classes for `(Skew)(Semi)(Standard)Tableau(x)`.\n\nCC:  jkeitel @darijgr @MariaMonks @opechenik @nthiery\n\nKeywords: **days64, sage-combinat, tableaux, refactoring, days64.25, days68**\n\nBranch/Commit: **[public/18013](https://github.com/sagemath/sagetrac-mirror/tree/public/18013) @ [37ace34](https://github.com/sagemath/sagetrac-mirror/commit/37ace348fb1afdb930b0657a80e40a58aea14be2)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Josh Swanson**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/18013_\n\n",
    "created_at": "2015-03-20T19:24:48Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Implement abstract tableau refactoring",
    "type": "issue",
    "updated_at": "2022-12-29T01:33:44Z",
    "url": "https://github.com/sagemath/sage/issues/18013",
    "user": "https://github.com/sagetrac-jpswanson"
}
```
As part of general cleanup in #17983, implement new abstract classes for `(Skew)(Semi)(Standard)Tableau(x)`.

CC:  jkeitel @darijgr @MariaMonks @opechenik @nthiery

Keywords: **days64, sage-combinat, tableaux, refactoring, days64.25, days68**

Branch/Commit: **[public/18013](https://github.com/sagemath/sagetrac-mirror/tree/public/18013) @ [37ace34](https://github.com/sagemath/sagetrac-mirror/commit/37ace348fb1afdb930b0657a80e40a58aea14be2)**

Reviewer: **Travis Scrimshaw**

Author: **Josh Swanson**

_Issue created by migration from https://trac.sagemath.org/ticket/18013_





---

archive/issue_events_238575.json:
```json
{
    "actor": "https://github.com/sagetrac-jpswanson",
    "created_at": "2015-03-20T19:24:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18013#event-238575"
}
```



---

archive/issue_events_238576.json:
```json
{
    "actor": "https://github.com/sagetrac-jpswanson",
    "created_at": "2015-03-20T19:24:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "component: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18013#event-238576"
}
```



---

archive/issue_events_238577.json:
```json
{
    "actor": "https://github.com/sagetrac-jpswanson",
    "created_at": "2015-03-20T19:24:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18013#event-238577"
}
```



---

archive/issue_events_238578.json:
```json
{
    "actor": "https://github.com/sagetrac-jpswanson",
    "created_at": "2015-03-20T19:24:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18013#event-238578"
}
```



---

archive/issue_comments_247584.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-As part of general cleanup in #17983, implement new abstract classes for ``(Skew)(Semi)(Standard)Tableau(x)``.\n+As part of general cleanup in #17983, implement new abstract classes for `(Skew)(Semi)(Standard)Tableau(x)`.\n``````\n",
    "created_at": "2015-03-20T19:25:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247584",
    "user": "https://github.com/sagetrac-jpswanson"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-As part of general cleanup in #17983, implement new abstract classes for ``(Skew)(Semi)(Standard)Tableau(x)``.
+As part of general cleanup in #17983, implement new abstract classes for `(Skew)(Semi)(Standard)Tableau(x)`.
``````




---

archive/issue_comments_247585.json:
```json
{
    "body": "Commit: **[f4888c8](https://github.com/sagemath/sagetrac-mirror/commit/f4888c8337b137dce79b324662bca10b96f177a5)**",
    "created_at": "2015-03-20T19:35:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247585",
    "user": "https://github.com/sagetrac-jpswanson"
}
```

Commit: **[f4888c8](https://github.com/sagemath/sagetrac-mirror/commit/f4888c8337b137dce79b324662bca10b96f177a5)**



---

archive/issue_comments_247586.json:
```json
{
    "body": "Branch: **[public/18013](https://github.com/sagemath/sagetrac-mirror/tree/public/18013)**",
    "created_at": "2015-03-20T19:35:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247586",
    "user": "https://github.com/sagetrac-jpswanson"
}
```

Branch: **[public/18013](https://github.com/sagemath/sagetrac-mirror/tree/public/18013)**



---

archive/issue_comments_247587.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f4888c8337b137dce79b324662bca10b96f177a5\">f4888c8</a></td><td><code>First steps</code></td></tr></table>\n",
    "created_at": "2015-03-20T19:35:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247587",
    "user": "https://github.com/sagetrac-jpswanson"
}
```

<a id='comment:2'>Comment 2:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f4888c8337b137dce79b324662bca10b96f177a5">f4888c8</a></td><td><code>First steps</code></td></tr></table>




---

archive/issue_comments_247588.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0283f6ee772b7905d389c6f024f1ac06f5ca2de4\">0283f6e</a></td><td><code>Initial commit</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/29a811d1d431ac10f924f4eb2d73b9ba39f142f6\">29a811d</a></td><td><code>More work on rows and cols</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f28a68f1f7c23a1f6cfde2f9c8775db78a2db24\">6f28a68</a></td><td><code>Readded abstract_tableau.py</code></td></tr></table>\n",
    "created_at": "2015-03-20T22:19:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247588",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:3'>Comment 3:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0283f6ee772b7905d389c6f024f1ac06f5ca2de4">0283f6e</a></td><td><code>Initial commit</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/29a811d1d431ac10f924f4eb2d73b9ba39f142f6">29a811d</a></td><td><code>More work on rows and cols</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f28a68f1f7c23a1f6cfde2f9c8775db78a2db24">6f28a68</a></td><td><code>Readded abstract_tableau.py</code></td></tr></table>




---

archive/issue_comments_247589.json:
```json
{
    "body": "Changed commit from **[f4888c8](https://github.com/sagemath/sagetrac-mirror/commit/f4888c8337b137dce79b324662bca10b96f177a5)** to **[6f28a68](https://github.com/sagemath/sagetrac-mirror/commit/6f28a68f1f7c23a1f6cfde2f9c8775db78a2db24)**",
    "created_at": "2015-03-20T22:19:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247589",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f4888c8](https://github.com/sagemath/sagetrac-mirror/commit/f4888c8337b137dce79b324662bca10b96f177a5)** to **[6f28a68](https://github.com/sagemath/sagetrac-mirror/commit/6f28a68f1f7c23a1f6cfde2f9c8775db78a2db24)**



---

archive/issue_comments_247590.json:
```json
{
    "body": "Changed commit from **[6f28a68](https://github.com/sagemath/sagetrac-mirror/commit/6f28a68f1f7c23a1f6cfde2f9c8775db78a2db24)** to **[77ac126](https://github.com/sagemath/sagetrac-mirror/commit/77ac1269e23087cd07a002de922ec1cbbc9e3119)**",
    "created_at": "2015-03-21T02:06:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247590",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6f28a68](https://github.com/sagemath/sagetrac-mirror/commit/6f28a68f1f7c23a1f6cfde2f9c8775db78a2db24)** to **[77ac126](https://github.com/sagemath/sagetrac-mirror/commit/77ac1269e23087cd07a002de922ec1cbbc9e3119)**



---

archive/issue_comments_247591.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3f3734baba900605da8c55fdce913b962c5b4757\">3f3734b</a></td><td><code>Constructor for SkewTableau</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/16b4e167baf2de26d6be134f5bcd36bcf67c250f\">16b4e16</a></td><td><code>Let elements know about their parents</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/77ac1269e23087cd07a002de922ec1cbbc9e3119\">77ac126</a></td><td><code>More work on parents</code></td></tr></table>\n",
    "created_at": "2015-03-21T02:06:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247591",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:4'>Comment 4:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3f3734baba900605da8c55fdce913b962c5b4757">3f3734b</a></td><td><code>Constructor for SkewTableau</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/16b4e167baf2de26d6be134f5bcd36bcf67c250f">16b4e16</a></td><td><code>Let elements know about their parents</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/77ac1269e23087cd07a002de922ec1cbbc9e3119">77ac126</a></td><td><code>More work on parents</code></td></tr></table>




---

archive/issue_comments_247592.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0f22277185fe9090677f882c4462546f49f29c15\">0f22277</a></td><td><code>Merge remote-tracking branch 'origin/develop' into AbstractTableaux</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c16bfe663f67218e98850ca94d75b3cee8eb690e\">c16bfe6</a></td><td><code>Python 3 tweaks, more work</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d95436335ccf9ff696381d32c68ef3c045edcc2\">5d95436</a></td><td><code>Further tweaks; moved parent classes to their own file</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6b43530e1c3fa14f1a8b4bcf3938b3ca0edaa9dc\">6b43530</a></td><td><code>First stab at sorting out input validation vs. initialization between parents and elements</code></td></tr></table>\n",
    "created_at": "2015-03-26T08:11:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247592",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:5'>Comment 5:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0f22277185fe9090677f882c4462546f49f29c15">0f22277</a></td><td><code>Merge remote-tracking branch 'origin/develop' into AbstractTableaux</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c16bfe663f67218e98850ca94d75b3cee8eb690e">c16bfe6</a></td><td><code>Python 3 tweaks, more work</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d95436335ccf9ff696381d32c68ef3c045edcc2">5d95436</a></td><td><code>Further tweaks; moved parent classes to their own file</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6b43530e1c3fa14f1a8b4bcf3938b3ca0edaa9dc">6b43530</a></td><td><code>First stab at sorting out input validation vs. initialization between parents and elements</code></td></tr></table>




---

archive/issue_comments_247593.json:
```json
{
    "body": "Changed commit from **[77ac126](https://github.com/sagemath/sagetrac-mirror/commit/77ac1269e23087cd07a002de922ec1cbbc9e3119)** to **[6b43530](https://github.com/sagemath/sagetrac-mirror/commit/6b43530e1c3fa14f1a8b4bcf3938b3ca0edaa9dc)**",
    "created_at": "2015-03-26T08:11:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247593",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[77ac126](https://github.com/sagemath/sagetrac-mirror/commit/77ac1269e23087cd07a002de922ec1cbbc9e3119)** to **[6b43530](https://github.com/sagemath/sagetrac-mirror/commit/6b43530e1c3fa14f1a8b4bcf3938b3ca0edaa9dc)**



---

archive/issue_comments_247594.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nFWIW, the current version is quite rough and continues to be basically untested. When some parent classes are in a decent state, testing and lots of bug fixes will need to be done. I plan on continuing to work on this tableaux meta project off and on over the next few months.",
    "created_at": "2015-03-26T08:14:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247594",
    "user": "https://github.com/sagetrac-jpswanson"
}
```

<a id='comment:6'>Comment 6:</a>
FWIW, the current version is quite rough and continues to be basically untested. When some parent classes are in a decent state, testing and lots of bug fixes will need to be done. I plan on continuing to work on this tableaux meta project off and on over the next few months.



---

archive/issue_comments_247595.json:
```json
{
    "body": "Author: **Josh Swanson**",
    "created_at": "2015-03-26T08:14:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247595",
    "user": "https://github.com/sagetrac-jpswanson"
}
```

Author: **Josh Swanson**



---

archive/issue_comments_247596.json:
```json
{
    "body": "Changed commit from **[6b43530](https://github.com/sagemath/sagetrac-mirror/commit/6b43530e1c3fa14f1a8b4bcf3938b3ca0edaa9dc)** to **[0840b6c](https://github.com/sagemath/sagetrac-mirror/commit/0840b6c3851ffc24acac45d6a2c1c73a75eb47cb)**",
    "created_at": "2015-03-26T08:25:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247596",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6b43530](https://github.com/sagemath/sagetrac-mirror/commit/6b43530e1c3fa14f1a8b4bcf3938b3ca0edaa9dc)** to **[0840b6c](https://github.com/sagemath/sagetrac-mirror/commit/0840b6c3851ffc24acac45d6a2c1c73a75eb47cb)**



---

archive/issue_comments_247597.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0840b6c3851ffc24acac45d6a2c1c73a75eb47cb\">0840b6c</a></td><td><code>(forgot to save last few lines)</code></td></tr></table>\n",
    "created_at": "2015-03-26T08:25:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247597",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:7'>Comment 7:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0840b6c3851ffc24acac45d6a2c1c73a75eb47cb">0840b6c</a></td><td><code>(forgot to save last few lines)</code></td></tr></table>




---

archive/issue_comments_247598.json:
```json
{
    "body": "Changed commit from **[0840b6c](https://github.com/sagemath/sagetrac-mirror/commit/0840b6c3851ffc24acac45d6a2c1c73a75eb47cb)** to **[46efb65](https://github.com/sagemath/sagetrac-mirror/commit/46efb658944c0bd6f3b12cb62c6a1fd843a5b094)**",
    "created_at": "2015-04-02T02:46:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247598",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0840b6c](https://github.com/sagemath/sagetrac-mirror/commit/0840b6c3851ffc24acac45d6a2c1c73a75eb47cb)** to **[46efb65](https://github.com/sagemath/sagetrac-mirror/commit/46efb658944c0bd6f3b12cb62c6a1fd843a5b094)**



---

archive/issue_comments_247599.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/46efb658944c0bd6f3b12cb62c6a1fd843a5b094\">46efb65</a></td><td><code>some further steps</code></td></tr></table>\n",
    "created_at": "2015-04-02T02:46:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247599",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:8'>Comment 8:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/46efb658944c0bd6f3b12cb62c6a1fd843a5b094">46efb65</a></td><td><code>some further steps</code></td></tr></table>




---

archive/issue_comments_247600.json:
```json
{
    "body": "Changed commit from **[46efb65](https://github.com/sagemath/sagetrac-mirror/commit/46efb658944c0bd6f3b12cb62c6a1fd843a5b094)** to **[cb3e4db](https://github.com/sagemath/sagetrac-mirror/commit/cb3e4db77fc179c34db99fe3741a5cdd2e0b3e6a)**",
    "created_at": "2015-05-25T04:20:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247600",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[46efb65](https://github.com/sagemath/sagetrac-mirror/commit/46efb658944c0bd6f3b12cb62c6a1fd843a5b094)** to **[cb3e4db](https://github.com/sagemath/sagetrac-mirror/commit/cb3e4db77fc179c34db99fe3741a5cdd2e0b3e6a)**



---

archive/issue_comments_247601.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bb5c9f3a2d9a6edcffe787716faa91fa5fd4aed6\">bb5c9f3</a></td><td><code>Do not let R use global or user-local Makevars</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1b3bf1377dc0e56ad84645659a52252d41f9c141\">1b3bf13</a></td><td><code>Merge branch 'r_makevars' into AbstractTableaux</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cb3e4db77fc179c34db99fe3741a5cdd2e0b3e6a\">cb3e4db</a></td><td><code>Broke things into smaller files, cleaned up BadShapeTableau(x)</code></td></tr></table>\n",
    "created_at": "2015-05-25T04:20:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247601",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:9'>Comment 9:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bb5c9f3a2d9a6edcffe787716faa91fa5fd4aed6">bb5c9f3</a></td><td><code>Do not let R use global or user-local Makevars</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1b3bf1377dc0e56ad84645659a52252d41f9c141">1b3bf13</a></td><td><code>Merge branch 'r_makevars' into AbstractTableaux</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cb3e4db77fc179c34db99fe3741a5cdd2e0b3e6a">cb3e4db</a></td><td><code>Broke things into smaller files, cleaned up BadShapeTableau(x)</code></td></tr></table>




---

archive/issue_comments_247602.json:
```json
{
    "body": "Changed keywords from **days64, sage-combinat, tableaux, refactoring** to **days64, sage-combinat, tableaux, refactoring, days64.25**",
    "created_at": "2015-05-25T04:28:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247602",
    "user": "https://github.com/sagetrac-jpswanson"
}
```

Changed keywords from **days64, sage-combinat, tableaux, refactoring** to **days64, sage-combinat, tableaux, refactoring, days64.25**



---

archive/issue_comments_247603.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nI'm continuing work on this at days64.25. bb5c9f3 was included since I needed the fix to get Sage to compile on my machine.\n\nThe general outline of this change is clearer in the most recent commit. The overall abstraction and design decisions (file names, division of labor between Parents and Elements, etc.) could probably use a second opinion at this point.",
    "created_at": "2015-05-25T04:28:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247603",
    "user": "https://github.com/sagetrac-jpswanson"
}
```

<a id='comment:10'>Comment 10:</a>
I'm continuing work on this at days64.25. bb5c9f3 was included since I needed the fix to get Sage to compile on my machine.

The general outline of this change is clearer in the most recent commit. The overall abstraction and design decisions (file names, division of labor between Parents and Elements, etc.) could probably use a second opinion at this point.



---

archive/issue_comments_247604.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nThank you! I'm particularly glad you got rid of the `six.with_metaclass` construct; it never worked for me.",
    "created_at": "2015-05-25T10:51:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247604",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:11'>Comment 11:</a>
Thank you! I'm particularly glad you got rid of the `six.with_metaclass` construct; it never worked for me.



---

archive/issue_comments_247605.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nI made a separate ticket about the metaclass issue, #18503. It's probably some issue with the `ClasscallMetaclass` implementation, but I don't want to get distracted by it now. I'll try getting a decent subset of the skew tableaux code moved over today so some testing can be done. My current plan is to focus on tableau.py and skew_tableau.py, which are the oldest and most in need of refactoring anyway.",
    "created_at": "2015-05-25T20:05:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247605",
    "user": "https://github.com/sagetrac-jpswanson"
}
```

<a id='comment:12'>Comment 12:</a>
I made a separate ticket about the metaclass issue, #18503. It's probably some issue with the `ClasscallMetaclass` implementation, but I don't want to get distracted by it now. I'll try getting a decent subset of the skew tableaux code moved over today so some testing can be done. My current plan is to focus on tableau.py and skew_tableau.py, which are the oldest and most in need of refactoring anyway.



---

archive/issue_comments_247606.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/22a8b8ce1c5a7041014cc73e06afc74d35aaabc9\">22a8b8c</a></td><td><code>Fixed `__classcall__` stuff; made it compile</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8085221a4208c15fcd2753ebdc6aa204a4c492bd\">8085221</a></td><td><code>Updating comments</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/82cf374f69a7cdb7536147b9312c336a453bec33\">82cf374</a></td><td><code>More work on SkewTableau; testing tomorrow?</code></td></tr></table>\n",
    "created_at": "2015-05-26T06:21:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247606",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:13'>Comment 13:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/22a8b8ce1c5a7041014cc73e06afc74d35aaabc9">22a8b8c</a></td><td><code>Fixed `__classcall__` stuff; made it compile</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8085221a4208c15fcd2753ebdc6aa204a4c492bd">8085221</a></td><td><code>Updating comments</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/82cf374f69a7cdb7536147b9312c336a453bec33">82cf374</a></td><td><code>More work on SkewTableau; testing tomorrow?</code></td></tr></table>




---

archive/issue_comments_247607.json:
```json
{
    "body": "Changed commit from **[cb3e4db](https://github.com/sagemath/sagetrac-mirror/commit/cb3e4db77fc179c34db99fe3741a5cdd2e0b3e6a)** to **[82cf374](https://github.com/sagemath/sagetrac-mirror/commit/82cf374f69a7cdb7536147b9312c336a453bec33)**",
    "created_at": "2015-05-26T06:21:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247607",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[cb3e4db](https://github.com/sagemath/sagetrac-mirror/commit/cb3e4db77fc179c34db99fe3741a5cdd2e0b3e6a)** to **[82cf374](https://github.com/sagemath/sagetrac-mirror/commit/82cf374f69a7cdb7536147b9312c336a453bec33)**



---

archive/issue_comments_247608.json:
```json
{
    "body": "Changed commit from **[82cf374](https://github.com/sagemath/sagetrac-mirror/commit/82cf374f69a7cdb7536147b9312c336a453bec33)** to **[4b48f64](https://github.com/sagemath/sagetrac-mirror/commit/4b48f6454b5d7a3526539ccad46c568b47a89a99)**",
    "created_at": "2015-05-26T07:46:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247608",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[82cf374](https://github.com/sagemath/sagetrac-mirror/commit/82cf374f69a7cdb7536147b9312c336a453bec33)** to **[4b48f64](https://github.com/sagemath/sagetrac-mirror/commit/4b48f6454b5d7a3526539ccad46c568b47a89a99)**



---

archive/issue_comments_247609.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b48f6454b5d7a3526539ccad46c568b47a89a99\">4b48f64</a></td><td><code>First pass at migrating existing skew_tableau.py to new format, lots of fixing needed</code></td></tr></table>\n",
    "created_at": "2015-05-26T07:46:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247609",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:14'>Comment 14:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b48f6454b5d7a3526539ccad46c568b47a89a99">4b48f64</a></td><td><code>First pass at migrating existing skew_tableau.py to new format, lots of fixing needed</code></td></tr></table>




---

archive/issue_comments_247610.json:
```json
{
    "body": "Changed commit from **[4b48f64](https://github.com/sagemath/sagetrac-mirror/commit/4b48f6454b5d7a3526539ccad46c568b47a89a99)** to **[d88663e](https://github.com/sagemath/sagetrac-mirror/commit/d88663e3105b48b848fc33f1237471cabe0d6311)**",
    "created_at": "2015-05-27T07:58:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247610",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4b48f64](https://github.com/sagemath/sagetrac-mirror/commit/4b48f6454b5d7a3526539ccad46c568b47a89a99)** to **[d88663e](https://github.com/sagemath/sagetrac-mirror/commit/d88663e3105b48b848fc33f1237471cabe0d6311)**



---

archive/issue_comments_247611.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e8194e9a20c6e4af508ef6024e38ee7e0e6446e0\">e8194e9</a></td><td><code>new skew_tableau.py doctests now all pass</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d88663e3105b48b848fc33f1237471cabe0d6311\">d88663e</a></td><td><code>Fixed most new skew_tableaux.py doctests</code></td></tr></table>\n",
    "created_at": "2015-05-27T07:58:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247611",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:15'>Comment 15:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e8194e9a20c6e4af508ef6024e38ee7e0e6446e0">e8194e9</a></td><td><code>new skew_tableau.py doctests now all pass</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d88663e3105b48b848fc33f1237471cabe0d6311">d88663e</a></td><td><code>Fixed most new skew_tableaux.py doctests</code></td></tr></table>




---

archive/issue_comments_247612.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\ndays64.25 is essentially done, so I'm not sure when I'll get to work on this ticket again--hopefully soon. In any case, stuff that still needs to be done:\n\n* Implement coercions to construct skew tableaux from the four formats. This will fix most of the remaining failing doctests, be more general, remove some special-case code, etc. Figure out how to deal with validation in this case--probably turn `from_expr` and friends into underscore methods which bypass the coercion framework and optionally bypass validation.\n* Turn the dispatcher classes which currently use `__classcall_private__` into dispatcher methods.\n* Address the TODO's.\n* Go through documentation:\n  * Add doctests to new methods\n  * Deal with orphaned doctests\n  * Unify Element and Parent docstrings\n* Update the rest of Sage to refer to the new `SkewTableaux` location.\n* Doctest the rest of Sage.\n\nI also made two changes that might be controversial since they affect how user's code works.\n1. I added (optional; default: enabled) validation to `SkewTableau`.\n2. I moved some methods (e.g. `restrict` and `to_chain`) from `SkewTableau` to the newly created `SemistandardSkewTableau`.\n\nMy hope is that people are mostly constructing these tableaux by iterating over, say, `StandardSkewTableaux(...)`, in which case these are not an issue.\n\nFinally, I think this ticket should be finished when the skew tableaux code has been migrated over and polished. Doing the same to the (straight) tableaux code will be another large project, given that there's around twice as many lines.",
    "created_at": "2015-05-27T08:24:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247612",
    "user": "https://github.com/sagetrac-jpswanson"
}
```

<a id='comment:16'>Comment 16:</a>
days64.25 is essentially done, so I'm not sure when I'll get to work on this ticket again--hopefully soon. In any case, stuff that still needs to be done:

* Implement coercions to construct skew tableaux from the four formats. This will fix most of the remaining failing doctests, be more general, remove some special-case code, etc. Figure out how to deal with validation in this case--probably turn `from_expr` and friends into underscore methods which bypass the coercion framework and optionally bypass validation.
* Turn the dispatcher classes which currently use `__classcall_private__` into dispatcher methods.
* Address the TODO's.
* Go through documentation:
  * Add doctests to new methods
  * Deal with orphaned doctests
  * Unify Element and Parent docstrings
* Update the rest of Sage to refer to the new `SkewTableaux` location.
* Doctest the rest of Sage.

I also made two changes that might be controversial since they affect how user's code works.
1. I added (optional; default: enabled) validation to `SkewTableau`.
2. I moved some methods (e.g. `restrict` and `to_chain`) from `SkewTableau` to the newly created `SemistandardSkewTableau`.

My hope is that people are mostly constructing these tableaux by iterating over, say, `StandardSkewTableaux(...)`, in which case these are not an issue.

Finally, I think this ticket should be finished when the skew tableaux code has been migrated over and polished. Doing the same to the (straight) tableaux code will be another large project, given that there's around twice as many lines.



---

archive/issue_comments_247613.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/37279683bb437d5cf77b1ac03a0c6110297e5983\">3727968</a></td><td><code>General docstring cleanup, in particular finished skew_tableau.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3c1d800a5cd96ec85bdf588e1ab7d951bb7ad91e\">3c1d800</a></td><td><code>Fixed abstract to_word_by_column</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/80161d37d3b93a0e3ef16a48704e38195b36c35a\">80161d3</a></td><td><code>More bad/abstract docstring tweaks</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9d68deb0c28372761024b33ee4b6b95da89a3d1c\">9d68deb</a></td><td><code>Docstring tweaks, fixed iterator bugs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/229a7506fb9451b8796d5c2cf58198c2cde986fe\">229a750</a></td><td><code>Added many _element_constructor_'s, docstring cleanup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6b589ff863acf7d29320512ab5c5fadee0113429\">6b589ff</a></td><td><code>Broke out tableaux_options.py; minor fixups</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a1a2192ad81e9e8c7c0c2fb00ef051e792882753\">a1a2192</a></td><td><code>Fixed doctest failures, removed old unused files</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cd2a2af558cdb3d326745d9ac00a805f905b5596\">cd2a2af</a></td><td><code>coverage testing fixups</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/272a8c17413622db0f486d057861dff598323686\">272a8c1</a></td><td><code>html doc tweaks</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fff8dbfe4e579b801ee5f9a2faabec40a144242b\">fff8dbf</a></td><td><code>Integrated new skew tableau into ribbons; added deprecation warnings; more tweaks; all sage doctests pass</code></td></tr></table>\n",
    "created_at": "2015-08-29T06:12:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247613",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:17'>Comment 17:</a>
Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/37279683bb437d5cf77b1ac03a0c6110297e5983">3727968</a></td><td><code>General docstring cleanup, in particular finished skew_tableau.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3c1d800a5cd96ec85bdf588e1ab7d951bb7ad91e">3c1d800</a></td><td><code>Fixed abstract to_word_by_column</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/80161d37d3b93a0e3ef16a48704e38195b36c35a">80161d3</a></td><td><code>More bad/abstract docstring tweaks</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9d68deb0c28372761024b33ee4b6b95da89a3d1c">9d68deb</a></td><td><code>Docstring tweaks, fixed iterator bugs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/229a7506fb9451b8796d5c2cf58198c2cde986fe">229a750</a></td><td><code>Added many _element_constructor_'s, docstring cleanup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6b589ff863acf7d29320512ab5c5fadee0113429">6b589ff</a></td><td><code>Broke out tableaux_options.py; minor fixups</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a1a2192ad81e9e8c7c0c2fb00ef051e792882753">a1a2192</a></td><td><code>Fixed doctest failures, removed old unused files</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cd2a2af558cdb3d326745d9ac00a805f905b5596">cd2a2af</a></td><td><code>coverage testing fixups</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/272a8c17413622db0f486d057861dff598323686">272a8c1</a></td><td><code>html doc tweaks</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fff8dbfe4e579b801ee5f9a2faabec40a144242b">fff8dbf</a></td><td><code>Integrated new skew tableau into ribbons; added deprecation warnings; more tweaks; all sage doctests pass</code></td></tr></table>




---

archive/issue_comments_247614.json:
```json
{
    "body": "Changed commit from **[d88663e](https://github.com/sagemath/sagetrac-mirror/commit/d88663e3105b48b848fc33f1237471cabe0d6311)** to **[fff8dbf](https://github.com/sagemath/sagetrac-mirror/commit/fff8dbfe4e579b801ee5f9a2faabec40a144242b)**",
    "created_at": "2015-08-29T06:12:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247614",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d88663e](https://github.com/sagemath/sagetrac-mirror/commit/d88663e3105b48b848fc33f1237471cabe0d6311)** to **[fff8dbf](https://github.com/sagemath/sagetrac-mirror/commit/fff8dbfe4e579b801ee5f9a2faabec40a144242b)**



---

archive/issue_comments_247615.json:
```json
{
    "body": "Changed keywords from **days64, sage-combinat, tableaux, refactoring, days64.25** to **days64, sage-combinat, tableaux, refactoring, days64.25, days68**",
    "created_at": "2015-08-29T06:26:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247615",
    "user": "https://github.com/sagetrac-jpswanson"
}
```

Changed keywords from **days64, sage-combinat, tableaux, refactoring, days64.25** to **days64, sage-combinat, tableaux, refactoring, days64.25, days68**



---

archive/issue_events_238579.json:
```json
{
    "actor": "https://github.com/sagetrac-jpswanson",
    "created_at": "2015-08-29T06:26:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18013#event-238579"
}
```



---

archive/issue_comments_247616.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nI worked on this quite a bit more at days68 and it's now in a usable state, ready for others' comments and improvements. Some optimization should probably still be done, especially for the iterators. I'd also like to move tableaux stuff into their own namespace in the interpreter namespace, like graphs currently doest, but that's for another ticket.\n\nThe next targets for tableaux cleanup should probably be ribbon tableaux (short but horrible) and straight shape tableaux (less short, less horrible).\n\nOh, a couple of potentially controversial things I did:\n\n* Removed `__classcall_private__` (and the corresponding metaclass) in favor of factory functions for both parents and elements. The main benefit of the change is that people no longer have to have any idea about `(InheritComparison)ClasscallMetaclass`, `__classcall_private__`, etc. to work with this code, and it was just simpler; Element classes also don't have to know about their Parents in any way, so the abstraction seems cleaner. The main drawback is that import statements need to be updated depending on if they want the class or the factory. The vast majority of uses want the factory functions, which is what the deprecation warnings in the old `skew_tableau.py` point to. Syntax in the interpreter is unchanged.\n\n* Moved several methods from `SkewTableau` to `SemistandardSkewTableau` or `StandardSkewTabeau`, namely `bender_knuth_involution`, `rectify`, `slide`, and `to_permutation`. Perhaps deprecation warnings should be added.",
    "created_at": "2015-08-29T06:26:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247616",
    "user": "https://github.com/sagetrac-jpswanson"
}
```

<a id='comment:18'>Comment 18:</a>
I worked on this quite a bit more at days68 and it's now in a usable state, ready for others' comments and improvements. Some optimization should probably still be done, especially for the iterators. I'd also like to move tableaux stuff into their own namespace in the interpreter namespace, like graphs currently doest, but that's for another ticket.

The next targets for tableaux cleanup should probably be ribbon tableaux (short but horrible) and straight shape tableaux (less short, less horrible).

Oh, a couple of potentially controversial things I did:

* Removed `__classcall_private__` (and the corresponding metaclass) in favor of factory functions for both parents and elements. The main benefit of the change is that people no longer have to have any idea about `(InheritComparison)ClasscallMetaclass`, `__classcall_private__`, etc. to work with this code, and it was just simpler; Element classes also don't have to know about their Parents in any way, so the abstraction seems cleaner. The main drawback is that import statements need to be updated depending on if they want the class or the factory. The vast majority of uses want the factory functions, which is what the deprecation warnings in the old `skew_tableau.py` point to. Syntax in the interpreter is unchanged.

* Moved several methods from `SkewTableau` to `SemistandardSkewTableau` or `StandardSkewTabeau`, namely `bender_knuth_involution`, `rectify`, `slide`, and `to_permutation`. Perhaps deprecation warnings should be added.



---

archive/issue_comments_247617.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nThank you for your work on this; this is something that needs to be done (and Darij will be very happy once it is). However there are currently many things that need to be addressed before this gets into Sage.\n\nDo not remove the `__classcall_private__` for the parent; we want to tightly couple that code with that class.\n\nFor the elements, they do need to know about their parents from a code point of view, so it breaks some things that need to be done wrt the categories. I also don't see the use of having a separate function which we have to maintain as the creation of a tableau should be tightly coupled with the tableau class.\n\nIn short, IMO the `__classcall_private__` (and `__classcall__`) idioms are very useful for allowing easy public interface with the classes and couples the (user) creation with the class. I strongly recommend keeping/using them.\n\nNext, from a quick look-over of the changes:\n\n- Python is not Java, every class does not need to be in a separate file. In fact, IMO the parent and element classes should be in the same file because they are (loosely) coupled. I would also not put the global options in a separate file as well, but with the abstract tableau(x).\n- Not all methods have doctests (`_element_constructor_`'s in `ribbon_shaped_tableau.py`).\n- You need to add deprecations for the move as they are public functions.\n- Remove the `list_method`, it is not used in `list(T)`, but instead `T.list()`, which should be given by the category of `EnumeratedSets`. If something isn't working without that, then you (we) need to do some debugging.\n- In the `__iter__`, you should not do `self(...)`, but instead `self.element_class(self, ...)` as that way you don't invoke the coercion framework (which should have some speed impact).\n- In a similar vein, you should not iterate over another parent, but instead refactor out the iterator into a function (generator/iterator) which yields simple python lists. This will have a non-negligible effect on speed because elements are \"heavy\" objects compared to python lists.\n- The (typical) user will never see the documentation for `_element_constructor_`; make each one have it's own and you can add a `SEEALSO::` block to link it if you feel it is necessary.\n- Your `_coerce_map_from_` is completely wrong (and poorly coded). Kill with fire and holy water. It should not be a `@classmethod`. You're not doing any arithmetic on tableaux, so I'm guessing you want coercions for equality checks? Do a proper `_coerce_map_from_(self, P)` and check `isinstance(P, Foo)`. For reference, then `Foo_with_category` is a subclass of `Foo`.\n- Demolish the factories as mentioned above.\n- You're not initializing `AbstractTableau` correctly. You don't need an `__init__` method because you want to inherit the one from `Element`. I think you should remove the dependency on `six` in this class and make more pythonic iterations. I'm also not completely convinced of how you're not taking a `dict` as input, but that can come later after the other issues are worked out.\n- You should never have a `_set_parent` call, ever. This is a strong indication you're doing something wrong.\n\nThere will likely be more changes that need to be done, but this will be a good start.",
    "created_at": "2015-08-29T15:05:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247617",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:19'>Comment 19:</a>
Thank you for your work on this; this is something that needs to be done (and Darij will be very happy once it is). However there are currently many things that need to be addressed before this gets into Sage.

Do not remove the `__classcall_private__` for the parent; we want to tightly couple that code with that class.

For the elements, they do need to know about their parents from a code point of view, so it breaks some things that need to be done wrt the categories. I also don't see the use of having a separate function which we have to maintain as the creation of a tableau should be tightly coupled with the tableau class.

In short, IMO the `__classcall_private__` (and `__classcall__`) idioms are very useful for allowing easy public interface with the classes and couples the (user) creation with the class. I strongly recommend keeping/using them.

Next, from a quick look-over of the changes:

- Python is not Java, every class does not need to be in a separate file. In fact, IMO the parent and element classes should be in the same file because they are (loosely) coupled. I would also not put the global options in a separate file as well, but with the abstract tableau(x).
- Not all methods have doctests (`_element_constructor_`'s in `ribbon_shaped_tableau.py`).
- You need to add deprecations for the move as they are public functions.
- Remove the `list_method`, it is not used in `list(T)`, but instead `T.list()`, which should be given by the category of `EnumeratedSets`. If something isn't working without that, then you (we) need to do some debugging.
- In the `__iter__`, you should not do `self(...)`, but instead `self.element_class(self, ...)` as that way you don't invoke the coercion framework (which should have some speed impact).
- In a similar vein, you should not iterate over another parent, but instead refactor out the iterator into a function (generator/iterator) which yields simple python lists. This will have a non-negligible effect on speed because elements are "heavy" objects compared to python lists.
- The (typical) user will never see the documentation for `_element_constructor_`; make each one have it's own and you can add a `SEEALSO::` block to link it if you feel it is necessary.
- Your `_coerce_map_from_` is completely wrong (and poorly coded). Kill with fire and holy water. It should not be a `@classmethod`. You're not doing any arithmetic on tableaux, so I'm guessing you want coercions for equality checks? Do a proper `_coerce_map_from_(self, P)` and check `isinstance(P, Foo)`. For reference, then `Foo_with_category` is a subclass of `Foo`.
- Demolish the factories as mentioned above.
- You're not initializing `AbstractTableau` correctly. You don't need an `__init__` method because you want to inherit the one from `Element`. I think you should remove the dependency on `six` in this class and make more pythonic iterations. I'm also not completely convinced of how you're not taking a `dict` as input, but that can come later after the other issues are worked out.
- You should never have a `_set_parent` call, ever. This is a strong indication you're doing something wrong.

There will likely be more changes that need to be done, but this will be a good start.



---

archive/issue_events_238580.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-08-29T15:05:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18013#event-238580"
}
```



---

archive/issue_events_238581.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-08-29T15:05:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18013#event-238581"
}
```



---

archive/issue_comments_247618.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nThanks for the feedback Travis!\n\n* About `__classcall_private__`: I had asked Andrew Ohana for his opinion about this at Sage Days, and he strongly agreed with removing it; Darij also expressed happiness that I had removed it in an email; and I personally think it obfuscates the logic without any real benefit. So, we seem to fundamentally disagree here--not sure what else to say. Perhaps you could elaborate on why \"we want to tightly couple that code with that class\", and how you think my current layout does not achieve that goal. The `__classcall_private__` idiom caused quite a bit of confusion at days64 when we first started this project, and it also fosters confusion over where to put validation and normalization code--in an element's `__classcall_private__`, `__init__`, or maybe somewhere on the parent?\n\n* About elements knowing their parents: I meant they need to know they have a parent (i.e. `el.parent()`), but they don't need to know what their parent is. More precisely, `__classcall_private__` is the only place the name of the parent is required in the element classes, which strikes me as a red flag. To be clear, I'm far more interested in practical issues like those above than in philosophical musings about OOP.\n\n* About multiple files: having worked with this stuff a fair amount, breaking up elements and parents is very useful if only because it's much easier to find things. Also, there's lots of precedent for this in Sage: Parent and Element themselves are in two files; `rational_field.py` and `rational.pyx` are broken up, as are many other rings. About the options file: I again disagree; it's awkward to have those options at the top of the file since they serve a fundamentally different purpose compared to the rest of the file. Doesn't seem like a separate file is really hurting anything.\n\n* About `__iter__` and `self.element_class(...)` instead of `self(...)`: I agree optimization needs to be done, but the change you suggested won't typically work since input normalization is done by the parent class, and skipping it leads to subtle bugs. Figuring out the right optimizations is one of the main things that still needs to be done IMO. I totally agree that the current method is quite bloated.\n\n* About `_coerce_map_from_`: hah, I dislike it too, but what you suggested won't work (it's what I initially did). The trouble is that hardcoding the class name (`SkewTableau` for me) causes *all* child classes to have coercions between each other. For instance, `SemistandardSkewTableau` would have a coercion to `StandardSkewTableau` since they're both `SkewTableau`. The horrible hack at the start was what Andrew came up with to get around the apparent inability to get at the non-dynamically-generated class. This seems like an issue with the category framework to me, but maybe there's a good solution.\n\n* About `AbstractTableau.__init__`: ah whoops, thanks, I've at least changed it to `super(AbstractTableau, self).__init__(*args, **kwds)`. I'd like to just delete the method, except for the comment up top explaining that normalization and validation should be done in the parent class. Given the amount of confusion over where to do that in the existing codebase, it seems worthwhile, but I'm on the fence--opinions?\n\n* About `six`: I don't know what you mean. The use of `six` here is very slightly different from the 2.x syntax and is only included with an eye towards 2->3 conversion. For instance, `dict.iteritems` doesn't exist in Python 3.\n\nThings I'll do now: add doctests to `_element_constructor_`'s in `ribbon_shaped_tableau.py`, add deprecations to move the functions I mentioned, fix up the `_element_constructor_` documentation, move `_dct` from `BadShapeTableau` to `AbstractTableau`, remove the silly `_set_parent` call, and remove `list_method`. Those changes shouldn't take long.",
    "created_at": "2015-08-29T20:14:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247618",
    "user": "https://github.com/sagetrac-jpswanson"
}
```

<a id='comment:20'>Comment 20:</a>
Thanks for the feedback Travis!

* About `__classcall_private__`: I had asked Andrew Ohana for his opinion about this at Sage Days, and he strongly agreed with removing it; Darij also expressed happiness that I had removed it in an email; and I personally think it obfuscates the logic without any real benefit. So, we seem to fundamentally disagree here--not sure what else to say. Perhaps you could elaborate on why "we want to tightly couple that code with that class", and how you think my current layout does not achieve that goal. The `__classcall_private__` idiom caused quite a bit of confusion at days64 when we first started this project, and it also fosters confusion over where to put validation and normalization code--in an element's `__classcall_private__`, `__init__`, or maybe somewhere on the parent?

* About elements knowing their parents: I meant they need to know they have a parent (i.e. `el.parent()`), but they don't need to know what their parent is. More precisely, `__classcall_private__` is the only place the name of the parent is required in the element classes, which strikes me as a red flag. To be clear, I'm far more interested in practical issues like those above than in philosophical musings about OOP.

* About multiple files: having worked with this stuff a fair amount, breaking up elements and parents is very useful if only because it's much easier to find things. Also, there's lots of precedent for this in Sage: Parent and Element themselves are in two files; `rational_field.py` and `rational.pyx` are broken up, as are many other rings. About the options file: I again disagree; it's awkward to have those options at the top of the file since they serve a fundamentally different purpose compared to the rest of the file. Doesn't seem like a separate file is really hurting anything.

* About `__iter__` and `self.element_class(...)` instead of `self(...)`: I agree optimization needs to be done, but the change you suggested won't typically work since input normalization is done by the parent class, and skipping it leads to subtle bugs. Figuring out the right optimizations is one of the main things that still needs to be done IMO. I totally agree that the current method is quite bloated.

* About `_coerce_map_from_`: hah, I dislike it too, but what you suggested won't work (it's what I initially did). The trouble is that hardcoding the class name (`SkewTableau` for me) causes *all* child classes to have coercions between each other. For instance, `SemistandardSkewTableau` would have a coercion to `StandardSkewTableau` since they're both `SkewTableau`. The horrible hack at the start was what Andrew came up with to get around the apparent inability to get at the non-dynamically-generated class. This seems like an issue with the category framework to me, but maybe there's a good solution.

* About `AbstractTableau.__init__`: ah whoops, thanks, I've at least changed it to `super(AbstractTableau, self).__init__(*args, **kwds)`. I'd like to just delete the method, except for the comment up top explaining that normalization and validation should be done in the parent class. Given the amount of confusion over where to do that in the existing codebase, it seems worthwhile, but I'm on the fence--opinions?

* About `six`: I don't know what you mean. The use of `six` here is very slightly different from the 2.x syntax and is only included with an eye towards 2->3 conversion. For instance, `dict.iteritems` doesn't exist in Python 3.

Things I'll do now: add doctests to `_element_constructor_`'s in `ribbon_shaped_tableau.py`, add deprecations to move the functions I mentioned, fix up the `_element_constructor_` documentation, move `_dct` from `BadShapeTableau` to `AbstractTableau`, remove the silly `_set_parent` call, and remove `list_method`. Those changes shouldn't take long.



---

archive/issue_comments_247619.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/37ace348fb1afdb930b0657a80e40a58aea14be2\">37ace34</a></td><td><code>Implemented Travis' suggestions; all combinat doctests pass</code></td></tr></table>\n",
    "created_at": "2015-08-30T00:22:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247619",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:21'>Comment 21:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/37ace348fb1afdb930b0657a80e40a58aea14be2">37ace34</a></td><td><code>Implemented Travis' suggestions; all combinat doctests pass</code></td></tr></table>




---

archive/issue_comments_247620.json:
```json
{
    "body": "Changed commit from **[fff8dbf](https://github.com/sagemath/sagetrac-mirror/commit/fff8dbfe4e579b801ee5f9a2faabec40a144242b)** to **[37ace34](https://github.com/sagemath/sagetrac-mirror/commit/37ace348fb1afdb930b0657a80e40a58aea14be2)**",
    "created_at": "2015-08-30T00:22:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247620",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[fff8dbf](https://github.com/sagemath/sagetrac-mirror/commit/fff8dbfe4e579b801ee5f9a2faabec40a144242b)** to **[37ace34](https://github.com/sagemath/sagetrac-mirror/commit/37ace348fb1afdb930b0657a80e40a58aea14be2)**



---

archive/issue_comments_247621.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nLingering things from my perspective:\n\n* finish `__classcall_private__` vs factories debate\n* clean up `_coerce_map_from_` hack if possible\n* get rid of TODO's in ``_richcmp_`` (probably just use #19108)\n* optimize iteration\n\nthough there are probably other things that need tweaking. I've got other things to do for a few days, but will try to do iteration optimization within the next week.",
    "created_at": "2015-08-30T00:34:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247621",
    "user": "https://github.com/sagetrac-jpswanson"
}
```

<a id='comment:22'>Comment 22:</a>
Lingering things from my perspective:

* finish `__classcall_private__` vs factories debate
* clean up `_coerce_map_from_` hack if possible
* get rid of TODO's in ``_richcmp_`` (probably just use #19108)
* optimize iteration

though there are probably other things that need tweaking. I've got other things to do for a few days, but will try to do iteration optimization within the next week.



---

archive/issue_comments_247622.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nThese \"philosophical musings of OOP\" that you are disregarding are there to for good programming practices and to help ease the burden of code maintenance. So they are real practical issues later on that will make our lives easier when we need to change things yet again. So please don't trivialize them. (I'm trying not to sound like a rant here, but I fear I've failed.)\n\nWith that being said, in an ideal world, we would just allow the user directly to the `__init__`, which could take a variety of different inputs and initialize the class correctly as necessary. Python does not have polymorphism, and this at least allows us to work around that for the user entry point of `*Tableau` and still provide a good construction data from the parent. The `__classcall_private__` is also there so you don't have a *separate* function with a *different* name (or at least in a separate location which can lead to confusion as well). Even still, you are going to either have to parse that same input in that separate function.\n\nThis is an implementation detail that, yes, does raise the barrier of entry (which better documentation can alleviate), but the ease of code maintenance because you know it's there with the class and behaves like a constructor far outweighs the cost IMO. (BTW, if we ultimately decide to have the creation functions, they should have `python_function_names` and not `LookLikeClasses`.) The biggest problem is in a separate file you want to create a, e.g., `SkewTableau` and want to check if something is an instance of a `SkewTableau`, you have 2 different things for what really should be 1 (although I would advocate creating the correct parent and feeding the data to that parent, but I have seen this pattern a lot in code in the wild). This is the \"tightly coupling\" I was talking about and is the biggest way how your pattern breaks it.\n\nThe red flag that's popping up is more of a mathematical one in that we are trying to provide an object for when the user does not care about the set that object lies in. This idiom has made my life a lot easier in both using the code and maintaining other combinatorics code that uses it, and I strongly recommend keeping it.\n\nIn regards to the checking/duplication, what you should do is think about how you want to code to flow through, what needs to be parsed, and at which point. I'm not necessarily sure I like how you do your containment checking because you are creating an element which you immediately discard. This makes it a lot slower than it needs to be and you can instead implement the necessary checks in various `__contains__` methods (or common shortcuts in there, and have that call a `_contain_check` method which you override in subclasses), and then have the `_element_constructor_` just create an element and then call the `__contains__`. I do understand why you did things this way, but there is a price that is and will have to be paid.\n\nNormalization should not be done in the parent; that is why you are doing so much work. Let the element in the `__init__` do the normalization, put it in a `@staticmethod` of the *element* and call that when needed, or put it in one place that all code paths for element creation *from the user* must go through. I think this will greatly simplify your code.\n\nOne other thing with the `_element_constructor_`, everywhere you basically are checking if `check` is in the keywords. Please make `check` an explicit named argument.\n\nFor splitting the parent/element classes up, a lot of those rings, look at the file extensions. We want fast arithmetic and the like, which are done on the elements, and so we use cython. However, cython has limitations and don't (or at least didn't when those rings were created) behave well with respect to categories and other pythonic things, so they were written in python. (Again, most code in the rings folder is quite old.) Separate files usually means separate concerns, but I feel their topic is close enough together that they should be in the same file. Plus it helps keep down the possibility of import loops (a major maintenance headache) and startup imports/time.\n\nThe `self(x)` causes Sage to set the coercions for ``self`` from the parent of ``x``, which has led to some very subtle bugs (e.g., #15309). The speed bonus comes for free. Do not use unless you have a good reason to, and in this case, I don't see a good one. As for the `__iter__`, this I will insist must be changed before this gets into Sage, there are too many subtleties and speed to be gained.\n\nFor the `_coerce_map_from_`, you will need to implement multiple such methods in the appropriate parents or check more data if you want finer control. This is a horrible hack and completely breaks the assumptions of the coercion framework. It really smells more like you want simple conversions with a good `__eq__` implementation, which will be faster at the tradeoff of a little more code/work.\n\nThe answer to confusion in code is more/better documentation/comments.\n\nFor getting around `six`, you do things like `[d[i] for i in d]` or just put `items` and deal with the slowdown until we (finally) convert to python3. However I feel that your current design should implement a custom `__getitem__` for the abstract tableaux and force all subclasses to use that same internal data structure (that is part of the reason why they are subclasses). If you want different data structures but to inherit methods, python is nice with multiple inheritance. Create separate ABC's for each internal type with the necessary methods for the actual concrete classes you'd want. Otherwise you're going against well-established \"philosophical musings of OOP\" and have to work harder than you need to for the things you want.\n\nSorry this is more of a treatise than useful comments, but I think there is a lot of work that will need to be done on this before this can be merged into Sage. I understand that other things take precedence over this, but I appreciate your work on this.",
    "created_at": "2015-08-30T02:25:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247622",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:23'>Comment 23:</a>
These "philosophical musings of OOP" that you are disregarding are there to for good programming practices and to help ease the burden of code maintenance. So they are real practical issues later on that will make our lives easier when we need to change things yet again. So please don't trivialize them. (I'm trying not to sound like a rant here, but I fear I've failed.)

With that being said, in an ideal world, we would just allow the user directly to the `__init__`, which could take a variety of different inputs and initialize the class correctly as necessary. Python does not have polymorphism, and this at least allows us to work around that for the user entry point of `*Tableau` and still provide a good construction data from the parent. The `__classcall_private__` is also there so you don't have a *separate* function with a *different* name (or at least in a separate location which can lead to confusion as well). Even still, you are going to either have to parse that same input in that separate function.

This is an implementation detail that, yes, does raise the barrier of entry (which better documentation can alleviate), but the ease of code maintenance because you know it's there with the class and behaves like a constructor far outweighs the cost IMO. (BTW, if we ultimately decide to have the creation functions, they should have `python_function_names` and not `LookLikeClasses`.) The biggest problem is in a separate file you want to create a, e.g., `SkewTableau` and want to check if something is an instance of a `SkewTableau`, you have 2 different things for what really should be 1 (although I would advocate creating the correct parent and feeding the data to that parent, but I have seen this pattern a lot in code in the wild). This is the "tightly coupling" I was talking about and is the biggest way how your pattern breaks it.

The red flag that's popping up is more of a mathematical one in that we are trying to provide an object for when the user does not care about the set that object lies in. This idiom has made my life a lot easier in both using the code and maintaining other combinatorics code that uses it, and I strongly recommend keeping it.

In regards to the checking/duplication, what you should do is think about how you want to code to flow through, what needs to be parsed, and at which point. I'm not necessarily sure I like how you do your containment checking because you are creating an element which you immediately discard. This makes it a lot slower than it needs to be and you can instead implement the necessary checks in various `__contains__` methods (or common shortcuts in there, and have that call a `_contain_check` method which you override in subclasses), and then have the `_element_constructor_` just create an element and then call the `__contains__`. I do understand why you did things this way, but there is a price that is and will have to be paid.

Normalization should not be done in the parent; that is why you are doing so much work. Let the element in the `__init__` do the normalization, put it in a `@staticmethod` of the *element* and call that when needed, or put it in one place that all code paths for element creation *from the user* must go through. I think this will greatly simplify your code.

One other thing with the `_element_constructor_`, everywhere you basically are checking if `check` is in the keywords. Please make `check` an explicit named argument.

For splitting the parent/element classes up, a lot of those rings, look at the file extensions. We want fast arithmetic and the like, which are done on the elements, and so we use cython. However, cython has limitations and don't (or at least didn't when those rings were created) behave well with respect to categories and other pythonic things, so they were written in python. (Again, most code in the rings folder is quite old.) Separate files usually means separate concerns, but I feel their topic is close enough together that they should be in the same file. Plus it helps keep down the possibility of import loops (a major maintenance headache) and startup imports/time.

The `self(x)` causes Sage to set the coercions for ``self`` from the parent of ``x``, which has led to some very subtle bugs (e.g., #15309). The speed bonus comes for free. Do not use unless you have a good reason to, and in this case, I don't see a good one. As for the `__iter__`, this I will insist must be changed before this gets into Sage, there are too many subtleties and speed to be gained.

For the `_coerce_map_from_`, you will need to implement multiple such methods in the appropriate parents or check more data if you want finer control. This is a horrible hack and completely breaks the assumptions of the coercion framework. It really smells more like you want simple conversions with a good `__eq__` implementation, which will be faster at the tradeoff of a little more code/work.

The answer to confusion in code is more/better documentation/comments.

For getting around `six`, you do things like `[d[i] for i in d]` or just put `items` and deal with the slowdown until we (finally) convert to python3. However I feel that your current design should implement a custom `__getitem__` for the abstract tableaux and force all subclasses to use that same internal data structure (that is part of the reason why they are subclasses). If you want different data structures but to inherit methods, python is nice with multiple inheritance. Create separate ABC's for each internal type with the necessary methods for the actual concrete classes you'd want. Otherwise you're going against well-established "philosophical musings of OOP" and have to work harder than you need to for the things you want.

Sorry this is more of a treatise than useful comments, but I think there is a lot of work that will need to be done on this before this can be merged into Sage. I understand that other things take precedence over this, but I appreciate your work on this.



---

archive/issue_comments_247623.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nThanks again for your thoughts!\n\nI don't think I quite communicated my intent about \"philosophical musings\". You say they're \"to help ease the burden of code maintenance\", which I'd say is a perfectly reasonable \"practical issue\"--it's one of the most important when writing code. I just find an argument like \"X is a red flag\" or \"Y should be tied closely to Z\" to be generally much less convincing than \"X is hard to maintain\" or \"Y is hard to find if it's not near Z\". I'd call the former \"philosophical musings\" and the latter \"practical issues\".\n\nI'll think further on your comments about `__classcall_private__`. Ease of code maintenance is one of the biggest reasons I removed it, but nonetheless I'll weigh the options again. I know it's a common idiom in combinat, though grepping for it shows that it doesn't seem to have caught on much elsewhere in the Sage codebase. I would imagine a number of our disagreements stem from combinat doing something one way and me not being familiar with/not wanting to use that way, which isn't necessarily a bad thing, especially when it's not a clear-cut case of \"house style\".\n\nI'll also rethink where validation and normalization \"should\" or \"should be expected\" to be done. I don't see much potential for \"greatly simplified code\"--perhaps you could be more specific about what simplifications you envision. If you mean that less work could be done on element creation in specific instances like making an SSYT from an SYT, then sure.\n\nAgain we agree that iteration optimization is essentially required. It's probably the single most important use of the SSYT and SYT code, and there's tons of nested, pointless resolutions, normalizations, and copies going on currently.\n\nAt the end you rather suddenly suggested a significant refactoring, where as far as I can tell you want `SkewTableau` to inherit from a second base class which is built on the `_st` representation of tableaux, so `SkewTableau` would use both `_st` and `_dct`. The specifics and benefits are unclear to me--I'd have to reimplement many of the routines currently on `AbstractTableau` in the new context using the `_st` representation, whereas the whole point of this refactoring was to cut down on code duplication. (Or, perhaps you wanted the `_st` ABC to be very minimalistic? If so, what's the point? Do you expect both ABC's to have `to_word`, for instance, and if so why?) I tend to think of the `_st` representation used in `_dct` as an optimization since it's how existing routines and classes want to deal with or generate these tableaux, rather than as a fundamentally different design choice, which makes me much more okay with the current abstraction. At a minimum, this idea should be documented somewhere though!\n\nOh, about the `_coerce_map_from_` hack: I can certainly reimplement `_coerce_map_from_` on each child class and hard-code the name of the subclass there. However, this seems to be bad OOP practice--I explicitly do not want child classes to inherit that method, since it'll introduce a subtle bug that we both missed at first glance. What I want, and what seems reasonable, is either for the dynamically generated class to preserve ``isinstance`` or to get at the non-dynamically generated class, either of which seems to be an issue with the category framework. But I'm not at all familiar with the category framework, so I'll defer to experts. Could you expand on how the current hack \"completely breaks the assumptions of the coercion framework\"?\n\nThanks again for your input!",
    "created_at": "2015-08-30T08:47:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247623",
    "user": "https://github.com/sagetrac-jpswanson"
}
```

<a id='comment:24'>Comment 24:</a>
Thanks again for your thoughts!

I don't think I quite communicated my intent about "philosophical musings". You say they're "to help ease the burden of code maintenance", which I'd say is a perfectly reasonable "practical issue"--it's one of the most important when writing code. I just find an argument like "X is a red flag" or "Y should be tied closely to Z" to be generally much less convincing than "X is hard to maintain" or "Y is hard to find if it's not near Z". I'd call the former "philosophical musings" and the latter "practical issues".

I'll think further on your comments about `__classcall_private__`. Ease of code maintenance is one of the biggest reasons I removed it, but nonetheless I'll weigh the options again. I know it's a common idiom in combinat, though grepping for it shows that it doesn't seem to have caught on much elsewhere in the Sage codebase. I would imagine a number of our disagreements stem from combinat doing something one way and me not being familiar with/not wanting to use that way, which isn't necessarily a bad thing, especially when it's not a clear-cut case of "house style".

I'll also rethink where validation and normalization "should" or "should be expected" to be done. I don't see much potential for "greatly simplified code"--perhaps you could be more specific about what simplifications you envision. If you mean that less work could be done on element creation in specific instances like making an SSYT from an SYT, then sure.

Again we agree that iteration optimization is essentially required. It's probably the single most important use of the SSYT and SYT code, and there's tons of nested, pointless resolutions, normalizations, and copies going on currently.

At the end you rather suddenly suggested a significant refactoring, where as far as I can tell you want `SkewTableau` to inherit from a second base class which is built on the `_st` representation of tableaux, so `SkewTableau` would use both `_st` and `_dct`. The specifics and benefits are unclear to me--I'd have to reimplement many of the routines currently on `AbstractTableau` in the new context using the `_st` representation, whereas the whole point of this refactoring was to cut down on code duplication. (Or, perhaps you wanted the `_st` ABC to be very minimalistic? If so, what's the point? Do you expect both ABC's to have `to_word`, for instance, and if so why?) I tend to think of the `_st` representation used in `_dct` as an optimization since it's how existing routines and classes want to deal with or generate these tableaux, rather than as a fundamentally different design choice, which makes me much more okay with the current abstraction. At a minimum, this idea should be documented somewhere though!

Oh, about the `_coerce_map_from_` hack: I can certainly reimplement `_coerce_map_from_` on each child class and hard-code the name of the subclass there. However, this seems to be bad OOP practice--I explicitly do not want child classes to inherit that method, since it'll introduce a subtle bug that we both missed at first glance. What I want, and what seems reasonable, is either for the dynamically generated class to preserve ``isinstance`` or to get at the non-dynamically generated class, either of which seems to be an issue with the category framework. But I'm not at all familiar with the category framework, so I'll defer to experts. Could you expand on how the current hack "completely breaks the assumptions of the coercion framework"?

Thanks again for your input!



---

archive/issue_comments_247624.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nThe reason it doesn't appear elsewhere is that either it doesn't use categories/parent/elements (e.g. graphs) or creation of elements are done only through the parent. There are only a few other examples where I know of outside of `combinat` that uses parents/elements that uses a function as a way of creating elements not through the parent. They are `integer` and `rational`, and they are low-level, optimized, and cython (which until very recently did not support metaclasses). So it ends up being more of a \"house style\" because of what our users expect, but it is a slight abuse IMO (how many papers say, let `X` be the set of all partitions, and let `\\lambda \\in X`?).\n\nFor the normalization, I see many places in the code where you seem to be fighting against doing normalization/validation, most notably: it was part of your reasoning for the factory functions IIRC, the `check` argument checks everywhere, the method which iterates over the `dict` of cells and having that be an abstract method. The last one is the reason I suggested the refactoring and the ABCs (which can be very complicated, but only require one or two methods to be implemented in the concrete class; depends on the situation) would be more minimal. I'm starting to read deeper into the code and think about the structuring now. (I saw a talk at last year's ~PyCon which gave a good argument why we should work harder now rather than take the \"technical debt\" that we'd have to pay later.)\n\nI'm sorry, I must have misunderstood what you said about the iteration.\n\nFor the `_coerce_map_from_`, if you do not want the child classes to inherit it, then they should not be child classes. If `Y` is a subclass of `X`, then instances of `Y` should behave like instances of `X` (Nicolas has referred to this as the 'is a' test). I'm okay with an ABC and/or mix-in class not conforming to this, but not for user accessible concrete classes.\n\nI will take a full detailed look at this next week and do my reviewer pass over the code (which might involve the refactoring I mentioned above). Thank you again for your work on this.\n\n(Oh look a short-ish response by me :P)",
    "created_at": "2015-08-30T13:39:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247624",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:25'>Comment 25:</a>
The reason it doesn't appear elsewhere is that either it doesn't use categories/parent/elements (e.g. graphs) or creation of elements are done only through the parent. There are only a few other examples where I know of outside of `combinat` that uses parents/elements that uses a function as a way of creating elements not through the parent. They are `integer` and `rational`, and they are low-level, optimized, and cython (which until very recently did not support metaclasses). So it ends up being more of a "house style" because of what our users expect, but it is a slight abuse IMO (how many papers say, let `X` be the set of all partitions, and let `\lambda \in X`?).

For the normalization, I see many places in the code where you seem to be fighting against doing normalization/validation, most notably: it was part of your reasoning for the factory functions IIRC, the `check` argument checks everywhere, the method which iterates over the `dict` of cells and having that be an abstract method. The last one is the reason I suggested the refactoring and the ABCs (which can be very complicated, but only require one or two methods to be implemented in the concrete class; depends on the situation) would be more minimal. I'm starting to read deeper into the code and think about the structuring now. (I saw a talk at last year's ~PyCon which gave a good argument why we should work harder now rather than take the "technical debt" that we'd have to pay later.)

I'm sorry, I must have misunderstood what you said about the iteration.

For the `_coerce_map_from_`, if you do not want the child classes to inherit it, then they should not be child classes. If `Y` is a subclass of `X`, then instances of `Y` should behave like instances of `X` (Nicolas has referred to this as the 'is a' test). I'm okay with an ABC and/or mix-in class not conforming to this, but not for user accessible concrete classes.

I will take a full detailed look at this next week and do my reviewer pass over the code (which might involve the refactoring I mentioned above). Thank you again for your work on this.

(Oh look a short-ish response by me :P)



---

archive/issue_events_238582.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-08-30T13:39:34Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18013#event-238582"
}
```



---

archive/issue_events_238583.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-08-30T13:39:34Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "milestone_number": null,
    "milestone_title": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18013#event-238583"
}
```



---

archive/issue_comments_247625.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2015-08-30T13:39:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247625",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_247626.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nNicolas, perhaps you could also add your wisdom to this discussion too?",
    "created_at": "2015-08-30T22:47:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18013#issuecomment-247626",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:26'>Comment 26:</a>
Nicolas, perhaps you could also add your wisdom to this discussion too?



---

archive/issue_events_238584.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-29T01:33:44Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/18013",
    "milestone_number": null,
    "milestone_title": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18013#event-238584"
}
```
