# Issue 18250: G.triangles_count speedup

archive/issues_018013.json:
```json
{
    "body": "I thought that we had a decent implementation of `G.triangles_count`. Turns out that we did not.\n\nHere is what the branch does:\n\n- Exception on non-simple graphs. The digraph version can handle loops (it\n  cannot handle multiple edges) and the graph version cannot handle any of the\n  two.\n\n- (obvious) speedup in the 'iter' algorithm. Before:\n\n  ```\n  sage: %timeit _=g.triangles_count(algorithm='iter')\n  1 loops, best of 3: 10.2 s per loop\n  ```\n  After:\n\n  ```\n  sage: g=graphs.RandomGNP(700,.3)\n  sage: %timeit _=g.triangles_count(algorithm='iter')\n  1 loops, best of 3: 6.37 s per loop\n  ```\n\n- Added `triangles_count` in `static_sparse_graph` and another one in\n  `static_dense_graph`. They first copy the graph in a proper data structure and\n  count the triangles on the copy. They can take require more memory (though\n  they are 100000x cheaper than the default data structure)\n\n- The default algorithm is 'iter' in the code but 'matrix' in the doc. Fixed:\n  `sparse_copy` is now the default.\n\nOverall, comparing default implementations:\n\nBefore\n\n```\nsage: g = graphs.RandomGNP(500,.5)\nsage: %timeit g.triangles_count()\n1 loops, best of 3: 9.78 s per loop\n```\n\nAfter\n\n```\nsage: g = graphs.RandomGNP(500,.5)\nsage: %timeit g.triangles_count()\n10 loops, best of 3: 162 ms per loop\n```\n\n**CC:**  azi @videlec @dcoudert\n\n**Branch/Commit:** [fd88c98cfc2fee8d0750cd9b6f88d1d7b8177ed4](https://github.com/sagemath/sagetrac-mirror/commit/fd88c98cfc2fee8d0750cd9b6f88d1d7b8177ed4)\n\n**Reviewer:** Vincent Delecroix\n\n**Author:** Nathann Cohen\n\nIssue created by migration from https://trac.sagemath.org/ticket/18250\n\n",
    "closed_at": "2015-04-21T00:10:54Z",
    "created_at": "2015-04-19T09:35:33Z",
    "labels": [
        "component: graph theory",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.7",
    "title": "G.triangles_count speedup",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18250",
    "user": "https://github.com/nathanncohen"
}
```
I thought that we had a decent implementation of `G.triangles_count`. Turns out that we did not.

Here is what the branch does:

- Exception on non-simple graphs. The digraph version can handle loops (it
  cannot handle multiple edges) and the graph version cannot handle any of the
  two.

- (obvious) speedup in the 'iter' algorithm. Before:

  ```
  sage: %timeit _=g.triangles_count(algorithm='iter')
  1 loops, best of 3: 10.2 s per loop
  ```
  After:

  ```
  sage: g=graphs.RandomGNP(700,.3)
  sage: %timeit _=g.triangles_count(algorithm='iter')
  1 loops, best of 3: 6.37 s per loop
  ```

- Added `triangles_count` in `static_sparse_graph` and another one in
  `static_dense_graph`. They first copy the graph in a proper data structure and
  count the triangles on the copy. They can take require more memory (though
  they are 100000x cheaper than the default data structure)

- The default algorithm is 'iter' in the code but 'matrix' in the doc. Fixed:
  `sparse_copy` is now the default.

Overall, comparing default implementations:

Before

```
sage: g = graphs.RandomGNP(500,.5)
sage: %timeit g.triangles_count()
1 loops, best of 3: 9.78 s per loop
```

After

```
sage: g = graphs.RandomGNP(500,.5)
sage: %timeit g.triangles_count()
10 loops, best of 3: 162 ms per loop
```

**CC:**  azi @videlec @dcoudert

**Branch/Commit:** [fd88c98cfc2fee8d0750cd9b6f88d1d7b8177ed4](https://github.com/sagemath/sagetrac-mirror/commit/fd88c98cfc2fee8d0750cd9b6f88d1d7b8177ed4)

**Reviewer:** Vincent Delecroix

**Author:** Nathann Cohen

Issue created by migration from https://trac.sagemath.org/ticket/18250





---

archive/issue_comments_252642.json:
```json
{
    "body": "**Commit:** [e780f711afba40b34c0d11b65adaf3cc4429fac2](https://github.com/sagemath/sagetrac-mirror/commit/e780f711afba40b34c0d11b65adaf3cc4429fac2)",
    "created_at": "2015-04-19T09:41:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252642",
    "user": "https://github.com/nathanncohen"
}
```

**Commit:** [e780f711afba40b34c0d11b65adaf3cc4429fac2](https://github.com/sagemath/sagetrac-mirror/commit/e780f711afba40b34c0d11b65adaf3cc4429fac2)



---

archive/issue_comments_252643.json:
```json
{
    "body": "<a id='comment:1'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e780f711afba40b34c0d11b65adaf3cc4429fac2\">e780f71</a></td><td><code>trac #18250: G.triangles_count speedup</code></td></tr></table>\n",
    "created_at": "2015-04-19T09:41:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252643",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:1'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e780f711afba40b34c0d11b65adaf3cc4429fac2">e780f71</a></td><td><code>trac #18250: G.triangles_count speedup</code></td></tr></table>




---

archive/issue_comments_252644.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -33,11 +33,15 @@\n Before\n \n ```\n-\n+sage: g = graphs.RandomGNP(500,.5)\n+sage: %timeit g.triangles_count()\n+1 loops, best of 3: 9.78 s per loop\n ```\n \n After\n \n ```\n-\n+sage: g = graphs.RandomGNP(500,.5)\n+sage: %timeit g.triangles_count()\n+10 loops, best of 3: 162 ms per loop\n ```\n``````\n",
    "created_at": "2015-04-19T09:41:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252644",
    "user": "https://github.com/nathanncohen"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -33,11 +33,15 @@
 Before
 
 ```
-
+sage: g = graphs.RandomGNP(500,.5)
+sage: %timeit g.triangles_count()
+1 loops, best of 3: 9.78 s per loop
 ```
 
 After
 
 ```
-
+sage: g = graphs.RandomGNP(500,.5)
+sage: %timeit g.triangles_count()
+10 loops, best of 3: 162 ms per loop
 ```
``````




---

archive/issue_events_163848.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-04-19T09:41:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18250#event-163848"
}
```



---

archive/issue_comments_252645.json:
```json
{
    "body": "**Branch:** [public/18250](https://github.com/sagemath/sagetrac-mirror/tree/public/18250)",
    "created_at": "2015-04-19T09:41:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252645",
    "user": "https://github.com/nathanncohen"
}
```

**Branch:** [public/18250](https://github.com/sagemath/sagetrac-mirror/tree/public/18250)



---

archive/issue_comments_252646.json:
```json
{
    "body": "**Changing commit** from \"[e780f711afba40b34c0d11b65adaf3cc4429fac2](https://github.com/sagemath/sagetrac-mirror/commit/e780f711afba40b34c0d11b65adaf3cc4429fac2)\" to \"[ed8bb3c374929b2a32b3e9310124990eb5b2350c](https://github.com/sagemath/sagetrac-mirror/commit/ed8bb3c374929b2a32b3e9310124990eb5b2350c)\".",
    "created_at": "2015-04-19T11:04:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252646",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[e780f711afba40b34c0d11b65adaf3cc4429fac2](https://github.com/sagemath/sagetrac-mirror/commit/e780f711afba40b34c0d11b65adaf3cc4429fac2)" to "[ed8bb3c374929b2a32b3e9310124990eb5b2350c](https://github.com/sagemath/sagetrac-mirror/commit/ed8bb3c374929b2a32b3e9310124990eb5b2350c)".



---

archive/issue_comments_252647.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ed8bb3c374929b2a32b3e9310124990eb5b2350c\">ed8bb3c</a></td><td><code>Trac 18250: documentation</code></td></tr></table>\n",
    "created_at": "2015-04-19T11:04:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252647",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ed8bb3c374929b2a32b3e9310124990eb5b2350c">ed8bb3c</a></td><td><code>Trac 18250: documentation</code></td></tr></table>




---

archive/issue_events_163849.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-19T11:05:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18250#event-163849"
}
```



---

archive/issue_events_163850.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-19T11:05:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18250#event-163850"
}
```



---

archive/issue_comments_252648.json:
```json
{
    "body": "<a id='comment:3'></a>\nHello,\n\nSmall commit for documentation at `public/18250`.\n\nThe algorithm `'iter'` returns `int` while `dense_copy` returns `Integer`. This would better be uniform.\n\nYou always perform a copy?! Isn't it possible to have a graph whose backend is already a `static_sparse_graph` or a `static_dense_graph`?\n\nVincent",
    "created_at": "2015-04-19T11:05:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252648",
    "user": "https://github.com/videlec"
}
```

<a id='comment:3'></a>
Hello,

Small commit for documentation at `public/18250`.

The algorithm `'iter'` returns `int` while `dense_copy` returns `Integer`. This would better be uniform.

You always perform a copy?! Isn't it possible to have a graph whose backend is already a `static_sparse_graph` or a `static_dense_graph`?

Vincent



---

archive/issue_comments_252649.json:
```json
{
    "body": "**Changing commit** from \"[ed8bb3c374929b2a32b3e9310124990eb5b2350c](https://github.com/sagemath/sagetrac-mirror/commit/ed8bb3c374929b2a32b3e9310124990eb5b2350c)\" to \"[fa6115dc6cdea907dad9c2cd69668f5e71660024](https://github.com/sagemath/sagetrac-mirror/commit/fa6115dc6cdea907dad9c2cd69668f5e71660024)\".",
    "created_at": "2015-04-19T12:36:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252649",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ed8bb3c374929b2a32b3e9310124990eb5b2350c](https://github.com/sagemath/sagetrac-mirror/commit/ed8bb3c374929b2a32b3e9310124990eb5b2350c)" to "[fa6115dc6cdea907dad9c2cd69668f5e71660024](https://github.com/sagemath/sagetrac-mirror/commit/fa6115dc6cdea907dad9c2cd69668f5e71660024)".



---

archive/issue_comments_252650.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fa6115dc6cdea907dad9c2cd69668f5e71660024\">fa6115d</a></td><td><code>trac #18250: Integer return type and avoid useless copies</code></td></tr></table>\n",
    "created_at": "2015-04-19T12:36:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252650",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fa6115dc6cdea907dad9c2cd69668f5e71660024">fa6115d</a></td><td><code>trac #18250: Integer return type and avoid useless copies</code></td></tr></table>




---

archive/issue_events_163851.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-04-19T12:43:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18250#event-163851"
}
```



---

archive/issue_events_163852.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-04-19T12:43:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18250#event-163852"
}
```



---

archive/issue_comments_252651.json:
```json
{
    "body": "<a id='comment:5'></a>\nYooooooooooooooo,\n\n> Small commit for documentation at `public/18250`.\n\n\nOh, right. Thanks.\n\n> The algorithm `'iter'` returns `int` while `dense_copy` returns `Integer`. This would better be uniform.\n\n\nDone.\n\n> You always perform a copy?! Isn't it possible to have a graph whose backend is already a `static_sparse_graph` or a `static_dense_graph`?\n\n\nWell, in this case copies are eally cheap, so I personally prefer a simpler code to one that avoids that copy.\n\nStill, I implemented it. There is a 'trick' somewhere: \n\n1) I first build a copy of the graph with `G.copy(immutable=True)` (which makes no copy if the graph is already immutable), then access its internal data structure\n\n2) If I do `g[0] = G.copy(immutable=True)._backend._cg.g[0]` I get a segfault because G.copy() is immediately deallocated. So I first do `G = G.copy(immutable=True)._backend`, and *then* access its internal data.\n\nFortunately the copy `G` is not deleted until the end of the function. If Cython ever notices that (as far as it is concerned) it is never used again in the function, then it will be deallocated and we will get a segfault again.\n\nNathann",
    "created_at": "2015-04-19T12:43:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252651",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:5'></a>
Yooooooooooooooo,

> Small commit for documentation at `public/18250`.


Oh, right. Thanks.

> The algorithm `'iter'` returns `int` while `dense_copy` returns `Integer`. This would better be uniform.


Done.

> You always perform a copy?! Isn't it possible to have a graph whose backend is already a `static_sparse_graph` or a `static_dense_graph`?


Well, in this case copies are eally cheap, so I personally prefer a simpler code to one that avoids that copy.

Still, I implemented it. There is a 'trick' somewhere: 

1) I first build a copy of the graph with `G.copy(immutable=True)` (which makes no copy if the graph is already immutable), then access its internal data structure

2) If I do `g[0] = G.copy(immutable=True)._backend._cg.g[0]` I get a segfault because G.copy() is immediately deallocated. So I first do `G = G.copy(immutable=True)._backend`, and *then* access its internal data.

Fortunately the copy `G` is not deleted until the end of the function. If Cython ever notices that (as far as it is concerned) it is never used again in the function, then it will be deallocated and we will get a segfault again.

Nathann



---

archive/issue_comments_252652.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [ncohen](#comment%3A5):\n> > You always perform a copy?! Isn't it possible to have a graph whose backend is already a `static_sparse_graph` or a `static_dense_graph`?\n\n> Fortunately the copy `G` is not deleted until the end of the function. If Cython ever notices that (as far as it is concerned) it is never used again in the function, then it will be deallocated and we will get a segfault again.\n\nCython does not perform deallocation, it is Python job. Though Cython does increment/decrement the reference counter. And precisely, doing `G = G.copy(immutable=True)` precisely increment the reference counter!\n\nLooks good! I am running the tests...\n\nVincent",
    "created_at": "2015-04-19T12:47:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252652",
    "user": "https://github.com/videlec"
}
```

<a id='comment:6'></a>
Replying to [ncohen](#comment%3A5):
> > You always perform a copy?! Isn't it possible to have a graph whose backend is already a `static_sparse_graph` or a `static_dense_graph`?

> Fortunately the copy `G` is not deleted until the end of the function. If Cython ever notices that (as far as it is concerned) it is never used again in the function, then it will be deallocated and we will get a segfault again.

Cython does not perform deallocation, it is Python job. Though Cython does increment/decrement the reference counter. And precisely, doing `G = G.copy(immutable=True)` precisely increment the reference counter!

Looks good! I am running the tests...

Vincent



---

archive/issue_comments_252653.json:
```json
{
    "body": "<a id='comment:7'></a>\n> Cython does not perform deallocation, it is Python job.\n\n\nWell if you prefer, but this code is translated into C, and gcc may notice that the object is totally useless. They must have done something to keep those Python variables until the end.\n\nNathann",
    "created_at": "2015-04-19T13:10:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252653",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:7'></a>
> Cython does not perform deallocation, it is Python job.


Well if you prefer, but this code is translated into C, and gcc may notice that the object is totally useless. They must have done something to keep those Python variables until the end.

Nathann



---

archive/issue_comments_252654.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [ncohen](#comment%3A7):\n> > Cython does not perform deallocation, it is Python job.\n\n> \n> Well if you prefer, but this code is translated into C, and gcc may notice that the object is totally useless. They must have done something to keep those Python variables until the end.\n\n\nNope. gcc will not do that. An affectation `G = H` is not one instruction if `H` is a Python object. Cython translates it into something like\n\n```\ncdef PyObject * G = H;\nPy_INCREF(G);\n```\nwhick prevents deallocation of H until G is garbage collected (typically at the end of the function or until a call of `del G`).\n\nVincent",
    "created_at": "2015-04-19T13:18:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252654",
    "user": "https://github.com/videlec"
}
```

<a id='comment:8'></a>
Replying to [ncohen](#comment%3A7):
> > Cython does not perform deallocation, it is Python job.

> 
> Well if you prefer, but this code is translated into C, and gcc may notice that the object is totally useless. They must have done something to keep those Python variables until the end.


Nope. gcc will not do that. An affectation `G = H` is not one instruction if `H` is a Python object. Cython translates it into something like

```
cdef PyObject * G = H;
Py_INCREF(G);
```
whick prevents deallocation of H until G is garbage collected (typically at the end of the function or until a call of `del G`).

Vincent



---

archive/issue_comments_252655.json:
```json
{
    "body": "**Reviewer:** Vincent Delecroix",
    "created_at": "2015-04-19T13:24:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252655",
    "user": "https://github.com/videlec"
}
```

**Reviewer:** Vincent Delecroix



---

archive/issue_comments_252656.json:
```json
{
    "body": "<a id='comment:9'></a>\nI do not like the default choice being `sparse copy`. Especially if `G` is implemented as a static dense graph! Wouldn't it be better to have a default `algorithm=None` and be more clever about choosing the right algorithm?",
    "created_at": "2015-04-19T13:24:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252656",
    "user": "https://github.com/videlec"
}
```

<a id='comment:9'></a>
I do not like the default choice being `sparse copy`. Especially if `G` is implemented as a static dense graph! Wouldn't it be better to have a default `algorithm=None` and be more clever about choosing the right algorithm?



---

archive/issue_comments_252657.json:
```json
{
    "body": "<a id='comment:10'></a>\nI don't think that anybody in Sage plays with data structure except me, in Sage's subfunctions. I can do it, but I am rather convinced that it is useless. It may be useful in one or two years if I can rewrite and clean all this stuff.\n\nWill do.\n\nNathann",
    "created_at": "2015-04-19T13:28:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252657",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:10'></a>
I don't think that anybody in Sage plays with data structure except me, in Sage's subfunctions. I can do it, but I am rather convinced that it is useless. It may be useful in one or two years if I can rewrite and clean all this stuff.

Will do.

Nathann



---

archive/issue_comments_252658.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [ncohen](#comment%3A10):\n> I don't think that anybody in Sage plays with data structure except me, in Sage's subfunctions. I can do it, but I am rather convinced that it is useless. It may be useful in one or two years if I can rewrite and clean all this stuff.\n\n\nOk. Let say something based on the density.",
    "created_at": "2015-04-19T13:32:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252658",
    "user": "https://github.com/videlec"
}
```

<a id='comment:11'></a>
Replying to [ncohen](#comment%3A10):
> I don't think that anybody in Sage plays with data structure except me, in Sage's subfunctions. I can do it, but I am rather convinced that it is useless. It may be useful in one or two years if I can rewrite and clean all this stuff.


Ok. Let say something based on the density.



---

archive/issue_comments_252659.json:
```json
{
    "body": "<a id='comment:12'></a>\n> Ok. Let say something based on the density.\n\n\n`O_o`\n\nNononono. That's for the user to decide. I don't want ugly `density>0.3` which may only make sense on a specific architecture, and on the kind of graphs that were used for the tests.",
    "created_at": "2015-04-19T13:38:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252659",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:12'></a>
> Ok. Let say something based on the density.


`O_o`

Nononono. That's for the user to decide. I don't want ugly `density>0.3` which may only make sense on a specific architecture, and on the kind of graphs that were used for the tests.



---

archive/issue_comments_252660.json:
```json
{
    "body": "<a id='comment:13'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fd88c98cfc2fee8d0750cd9b6f88d1d7b8177ed4\">fd88c98</a></td><td><code>trac #18250: algorithm=None by default and better 'wrong values' check</code></td></tr></table>\n",
    "created_at": "2015-04-19T13:55:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252660",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fd88c98cfc2fee8d0750cd9b6f88d1d7b8177ed4">fd88c98</a></td><td><code>trac #18250: algorithm=None by default and better 'wrong values' check</code></td></tr></table>




---

archive/issue_comments_252661.json:
```json
{
    "body": "**Changing commit** from \"[fa6115dc6cdea907dad9c2cd69668f5e71660024](https://github.com/sagemath/sagetrac-mirror/commit/fa6115dc6cdea907dad9c2cd69668f5e71660024)\" to \"[fd88c98cfc2fee8d0750cd9b6f88d1d7b8177ed4](https://github.com/sagemath/sagetrac-mirror/commit/fd88c98cfc2fee8d0750cd9b6f88d1d7b8177ed4)\".",
    "created_at": "2015-04-19T13:55:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252661",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[fa6115dc6cdea907dad9c2cd69668f5e71660024](https://github.com/sagemath/sagetrac-mirror/commit/fa6115dc6cdea907dad9c2cd69668f5e71660024)" to "[fd88c98cfc2fee8d0750cd9b6f88d1d7b8177ed4](https://github.com/sagemath/sagetrac-mirror/commit/fd88c98cfc2fee8d0750cd9b6f88d1d7b8177ed4)".



---

archive/issue_comments_252662.json:
```json
{
    "body": "<a id='comment:14'></a>\nHello,\n\nThe method `matrix` does work for non simple graphs, right? (after removing the loops)\n\nVincent",
    "created_at": "2015-04-19T14:27:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252662",
    "user": "https://github.com/videlec"
}
```

<a id='comment:14'></a>
Hello,

The method `matrix` does work for non simple graphs, right? (after removing the loops)

Vincent



---

archive/issue_comments_252663.json:
```json
{
    "body": "<a id='comment:15'></a>\n> The method `matrix` does work for non simple graphs, right? (after removing the loops)\n\n\nAfter removing loops and multiple edges, yes.\n\nNathann",
    "created_at": "2015-04-19T14:28:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252663",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:15'></a>
> The method `matrix` does work for non simple graphs, right? (after removing the loops)


After removing loops and multiple edges, yes.

Nathann



---

archive/issue_comments_252664.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [ncohen](#comment%3A15):\n> > The method `matrix` does work for non simple graphs, right? (after removing the loops)\n\n> \n> After removing loops and multiple edges, yes.\n\n\nPlease, consider the following **right** answers\n\n```\nsage: G = Graph([(0,1),(0,1),(1,2),(2,0)], multiedges=True)\nsage: (G.adjacency_matrix()**3).trace() / 6\n2\nsage: sage: G = Graph([(0,1),(0,1),(1,2), (1,2), (2,0)], multiedges=True)\nsage: (G.adjacency_matrix()**3).trace()//6\n4\n```",
    "created_at": "2015-04-19T14:31:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252664",
    "user": "https://github.com/videlec"
}
```

<a id='comment:16'></a>
Replying to [ncohen](#comment%3A15):
> > The method `matrix` does work for non simple graphs, right? (after removing the loops)

> 
> After removing loops and multiple edges, yes.


Please, consider the following **right** answers

```
sage: G = Graph([(0,1),(0,1),(1,2),(2,0)], multiedges=True)
sage: (G.adjacency_matrix()**3).trace() / 6
2
sage: sage: G = Graph([(0,1),(0,1),(1,2), (1,2), (2,0)], multiedges=True)
sage: (G.adjacency_matrix()**3).trace()//6
4
```



---

archive/issue_comments_252665.json:
```json
{
    "body": "<a id='comment:17'></a>\nWhat do you mean?",
    "created_at": "2015-04-19T14:32:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252665",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:17'></a>
What do you mean?



---

archive/issue_comments_252666.json:
```json
{
    "body": "<a id='comment:18'></a>\nReplying to [ncohen](#comment%3A17):\n> What do you mean?\n\n\nThat the method `algorithm=matrix` is valid for non simple graphs (once you removed the loops).",
    "created_at": "2015-04-19T14:33:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252666",
    "user": "https://github.com/videlec"
}
```

<a id='comment:18'></a>
Replying to [ncohen](#comment%3A17):
> What do you mean?


That the method `algorithm=matrix` is valid for non simple graphs (once you removed the loops).



---

archive/issue_comments_252667.json:
```json
{
    "body": "<a id='comment:19'></a>\nDepends what you call a triangle. For me it is a set of three points adjacent to each other.",
    "created_at": "2015-04-19T14:35:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252667",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:19'></a>
Depends what you call a triangle. For me it is a set of three points adjacent to each other.



---

archive/issue_comments_252668.json:
```json
{
    "body": "<a id='comment:20'></a>\nIf it is a 'closed walk of length 3' then you should keep the loops inside.",
    "created_at": "2015-04-19T14:36:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252668",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:20'></a>
If it is a 'closed walk of length 3' then you should keep the loops inside.



---

archive/issue_comments_252669.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [ncohen](#comment%3A20):\n> If it is a 'closed walk of length 3' then you should keep the loops inside.\n\n\nIt is not. It is [C3](http://en.wikipedia.org/wiki/Triangle_graph): three vertices and three edges! The edges are part of the data.",
    "created_at": "2015-04-19T14:38:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252669",
    "user": "https://github.com/videlec"
}
```

<a id='comment:21'></a>
Replying to [ncohen](#comment%3A20):
> If it is a 'closed walk of length 3' then you should keep the loops inside.


It is not. It is [C3](http://en.wikipedia.org/wiki/Triangle_graph): three vertices and three edges! The edges are part of the data.



---

archive/issue_comments_252670.json:
```json
{
    "body": "<a id='comment:22'></a>\nAhahah. So if you have three vertices and 4 edges in between, then it is not a triangle? No problem, yet another definition\n\nNathann",
    "created_at": "2015-04-19T14:39:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252670",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:22'></a>
Ahahah. So if you have three vertices and 4 edges in between, then it is not a triangle? No problem, yet another definition

Nathann



---

archive/issue_comments_252671.json:
```json
{
    "body": "<a id='comment:23'></a>\nReplying to [ncohen](#comment%3A22):\n> Ahahah. So if you have three vertices and 4 edges in between, then it is not a triangle? No problem, yet another definition\n\n\nNo. It is not a triangle. But it does contain many triangles. It is very much like on the sphere. For each (non degenerate) triple of points you have **4** triangles whose vertices are exactly these points.",
    "created_at": "2015-04-19T14:42:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252671",
    "user": "https://github.com/videlec"
}
```

<a id='comment:23'></a>
Replying to [ncohen](#comment%3A22):
> Ahahah. So if you have three vertices and 4 edges in between, then it is not a triangle? No problem, yet another definition


No. It is not a triangle. But it does contain many triangles. It is very much like on the sphere. For each (non degenerate) triple of points you have **4** triangles whose vertices are exactly these points.



---

archive/issue_comments_252672.json:
```json
{
    "body": "<a id='comment:24'></a>\nSee, I am extremely aware of this kind of problems. There is one thousand different ways of defining stuff, and everybody has his own notion of it, depending on where you come from. I'm pretty sure that guys from word theory/automata would think that a triangle is just \"a path of length three that leads you back to where you started\" (that corresponds to the 'closed walk' I mentionned above).\n\nI don't want people to believe stuff and end up with something else than what they had in mind. If two different persons can expect different result from the same function, I want either none of them or a way to force them to tell me what exactly they expect.",
    "created_at": "2015-04-19T14:43:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252672",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:24'></a>
See, I am extremely aware of this kind of problems. There is one thousand different ways of defining stuff, and everybody has his own notion of it, depending on where you come from. I'm pretty sure that guys from word theory/automata would think that a triangle is just "a path of length three that leads you back to where you started" (that corresponds to the 'closed walk' I mentionned above).

I don't want people to believe stuff and end up with something else than what they had in mind. If two different persons can expect different result from the same function, I want either none of them or a way to force them to tell me what exactly they expect.



---

archive/issue_comments_252673.json:
```json
{
    "body": "<a id='comment:25'></a>\nOh, and then you will also have the guys who have a weight on their edges and want to count the number of weighted triangles.",
    "created_at": "2015-04-19T14:45:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252673",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:25'></a>
Oh, and then you will also have the guys who have a weight on their edges and want to count the number of weighted triangles.



---

archive/issue_comments_252674.json:
```json
{
    "body": "<a id='comment:26'></a>\nReplying to [ncohen](#comment%3A25):\n> Oh, and then you will also have the guys who have a weight on their edges and want to count the number of weighted triangles.\n\n\nThis is what I am thinking about when I consider a multi graph, it is just a graph with (positive) integer labels. The weight of a triangle is the product of the labels on the three edges. And to count triangles, you just sum the weights. It is what you get from the matrix trace (when you removed the loops).\n\nBut I agree that there is one ambiguity: you might want to count induced C3.\n\nVincent",
    "created_at": "2015-04-19T14:48:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252674",
    "user": "https://github.com/videlec"
}
```

<a id='comment:26'></a>
Replying to [ncohen](#comment%3A25):
> Oh, and then you will also have the guys who have a weight on their edges and want to count the number of weighted triangles.


This is what I am thinking about when I consider a multi graph, it is just a graph with (positive) integer labels. The weight of a triangle is the product of the labels on the three edges. And to count triangles, you just sum the weights. It is what you get from the matrix trace (when you removed the loops).

But I agree that there is one ambiguity: you might want to count induced C3.

Vincent



---

archive/issue_comments_252675.json:
```json
{
    "body": "<a id='comment:27'></a>\nReplying to [ncohen](#comment%3A24):\n> I'm pretty sure that guys from word theory/automata would think that a triangle is just \"a path of length three that leads you back to where you started\" (that corresponds to the 'closed walk' I mentionned above).\n\n\nSome people have wrong ideas. I know.",
    "created_at": "2015-04-19T14:49:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252675",
    "user": "https://github.com/videlec"
}
```

<a id='comment:27'></a>
Replying to [ncohen](#comment%3A24):
> I'm pretty sure that guys from word theory/automata would think that a triangle is just "a path of length three that leads you back to where you started" (that corresponds to the 'closed walk' I mentionned above).


Some people have wrong ideas. I know.



---

archive/issue_comments_252676.json:
```json
{
    "body": "<a id='comment:28'></a>\n> Some people have wrong ideas. I know.\n\n\nAnd in my infinite Christ-like generosity I still care for them, and they shouldn't get wrong results just because they are sinners.\n\nNathann",
    "created_at": "2015-04-19T14:51:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252676",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:28'></a>
> Some people have wrong ideas. I know.


And in my infinite Christ-like generosity I still care for them, and they shouldn't get wrong results just because they are sinners.

Nathann



---

archive/issue_comments_252677.json:
```json
{
    "body": "<a id='comment:29'></a>\nMore seriously, I would prefer if the `triangles_count` in `static_dense_graph` would only accept backend being `static_dense_graph` (and move the copy step inside the `generic_graph`). Would make more sense. But that's very minor. I just want to know your feelings about how you would handle specificities of the backends in the future.",
    "created_at": "2015-04-19T14:54:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252677",
    "user": "https://github.com/videlec"
}
```

<a id='comment:29'></a>
More seriously, I would prefer if the `triangles_count` in `static_dense_graph` would only accept backend being `static_dense_graph` (and move the copy step inside the `generic_graph`). Would make more sense. But that's very minor. I just want to know your feelings about how you would handle specificities of the backends in the future.



---

archive/issue_events_163853.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-19T14:54:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18250#event-163853"
}
```



---

archive/issue_events_163854.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-19T14:54:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18250#event-163854"
}
```



---

archive/issue_comments_252678.json:
```json
{
    "body": "<a id='comment:30'></a>\n> More seriously, I would prefer if the `triangles_count` in `static_dense_graph` would only accept backend being `static_dense_graph` (and move the copy step inside the `generic_graph`)\n\n\nWell.. `generic_graph.py` cannot handle `C` types so it would have required to move the function to `generic_graph_pyx.pyx` (what a mess `>_<`), but I think that I was also influenced by the function `is_strongly_regular` immediately above.\n\nAlso, at first this function was building a copy of the graph every time, because I really did not think that it mattered. There are many functions like that in `distance_all_pairs` too. It contains every function which \"relies heavily on the distance_all_pairs functions\", and most of them accept Sage graphs directly (though some of them have pure C couterparts).\n\n> I just want to know your feelings about how you would handle specificities of the backends in the future.\n\n\nCan you tell me what you mean by \"specificities of the backends\"?\n\nNathann",
    "created_at": "2015-04-19T15:01:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252678",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:30'></a>
> More seriously, I would prefer if the `triangles_count` in `static_dense_graph` would only accept backend being `static_dense_graph` (and move the copy step inside the `generic_graph`)


Well.. `generic_graph.py` cannot handle `C` types so it would have required to move the function to `generic_graph_pyx.pyx` (what a mess `>_<`), but I think that I was also influenced by the function `is_strongly_regular` immediately above.

Also, at first this function was building a copy of the graph every time, because I really did not think that it mattered. There are many functions like that in `distance_all_pairs` too. It contains every function which "relies heavily on the distance_all_pairs functions", and most of them accept Sage graphs directly (though some of them have pure C couterparts).

> I just want to know your feelings about how you would handle specificities of the backends in the future.


Can you tell me what you mean by "specificities of the backends"?

Nathann



---

archive/issue_comments_252679.json:
```json
{
    "body": "<a id='comment:31'></a>\n(Thanks for the review btw!)",
    "created_at": "2015-04-19T15:01:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252679",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:31'></a>
(Thanks for the review btw!)



---

archive/issue_comments_252680.json:
```json
{
    "body": "<a id='comment:32'></a>\n> Can you tell me what you mean by \"specificities of the backends\"?\n\n\nIf you actually mean \"specificities of the backens\" (and not about the Multi,looped,edge-labelled) graph), then what I want to do is merely to make it simple to switch from one to the other, for the user or for the coders. I am trying to clean the constructor first (#18185 in `needs_review`), then I will try to make it a bit faster (creating immutable copies is unnecessarily complicated), to distribute them a bit (into subfunctions).\n\nThe main problem I haven't solved is this: what should the *default* backend for Sage graphs be?\n\nFor small graphs I expect that the current one is right. But being able to run \"has_edge\" in `log(n)` time, or being able to remove edges has a huge cost. If we just want to add edges and vertices (i.e. to build graphs, from an algorithm or from a file) then it can be MUCH cheaper. For analysis of large networks it is something that you cannot afford to pay, and then this backend must be different.\n\nSo if we want to make no choice at all, it really has to become much simpler and natural to pick a backend for a graph.\n\nAlso, we may want to have a 'virtual' backend like in Gap for graphs defined from a group action. No graph would actually be stored, yet all algorithms should be available.\n\nWell, that's what I think of these days.\n\nNathann",
    "created_at": "2015-04-19T16:14:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252680",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:32'></a>
> Can you tell me what you mean by "specificities of the backends"?


If you actually mean "specificities of the backens" (and not about the Multi,looped,edge-labelled) graph), then what I want to do is merely to make it simple to switch from one to the other, for the user or for the coders. I am trying to clean the constructor first (#18185 in `needs_review`), then I will try to make it a bit faster (creating immutable copies is unnecessarily complicated), to distribute them a bit (into subfunctions).

The main problem I haven't solved is this: what should the *default* backend for Sage graphs be?

For small graphs I expect that the current one is right. But being able to run "has_edge" in `log(n)` time, or being able to remove edges has a huge cost. If we just want to add edges and vertices (i.e. to build graphs, from an algorithm or from a file) then it can be MUCH cheaper. For analysis of large networks it is something that you cannot afford to pay, and then this backend must be different.

So if we want to make no choice at all, it really has to become much simpler and natural to pick a backend for a graph.

Also, we may want to have a 'virtual' backend like in Gap for graphs defined from a group action. No graph would actually be stored, yet all algorithms should be available.

Well, that's what I think of these days.

Nathann



---

archive/issue_comments_252681.json:
```json
{
    "body": "**Changing branch** from \"[public/18250](https://github.com/sagemath/sagetrac-mirror/tree/public/18250)\" to \"[fd88c98cfc2fee8d0750cd9b6f88d1d7b8177ed4](https://github.com/sagemath/sagetrac-mirror/commit/fd88c98cfc2fee8d0750cd9b6f88d1d7b8177ed4)\".",
    "created_at": "2015-04-21T00:10:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18250#issuecomment-252681",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/18250](https://github.com/sagemath/sagetrac-mirror/tree/public/18250)" to "[fd88c98cfc2fee8d0750cd9b6f88d1d7b8177ed4](https://github.com/sagemath/sagetrac-mirror/commit/fd88c98cfc2fee8d0750cd9b6f88d1d7b8177ed4)".



---

archive/issue_events_163855.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-04-21T00:10:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18250#event-163855"
}
```



---

archive/issue_events_163856.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-04-21T00:10:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18250",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18250#event-163856"
}
```
