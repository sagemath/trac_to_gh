# Issue 18828: Export graph to file

archive/issues_018591.json:
```json
{
    "assignees": [],
    "body": "I feel rather guilty, as all that this branch does is steal networkx functions. With it we can export graphs to several file formats, using the `networkx.write_*` functions.\n\nNathann\n\nCC:  @dimpase @dcoudert @sagetrac-borassi\n\nBranch/Commit: **[`254b36c`](https://github.com/sagemath/sagetrac-mirror/commit/254b36c7132562b01b8802a0f3da49c90f6487d5)**\n\nReviewer: **David Coudert**\n\nAuthor: **Nathann Cohen**\n\nComponent: **graph theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/18828_\n\n",
    "closed_at": "2015-07-03T22:14:22Z",
    "created_at": "2015-06-30T14:58:53Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Export graph to file",
    "type": "issue",
    "updated_at": "2015-07-03T22:14:22Z",
    "url": "https://github.com/sagemath/sage/issues/18828",
    "user": "https://github.com/nathanncohen"
}
```
I feel rather guilty, as all that this branch does is steal networkx functions. With it we can export graphs to several file formats, using the `networkx.write_*` functions.

Nathann

CC:  @dimpase @dcoudert @sagetrac-borassi

Branch/Commit: **[`254b36c`](https://github.com/sagemath/sagetrac-mirror/commit/254b36c7132562b01b8802a0f3da49c90f6487d5)**

Reviewer: **David Coudert**

Author: **Nathann Cohen**

Component: **graph theory**

_Issue created by migration from https://trac.sagemath.org/ticket/18828_





---

archive/issue_events_267354.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-06-30T14:58:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18828#event-267354"
}
```



---

archive/issue_events_267355.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-06-30T14:58:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18828#event-267355"
}
```



---

archive/issue_events_267356.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-06-30T14:58:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18828#event-267356"
}
```



---

archive/issue_events_267357.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-06-30T14:58:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18828#event-267357"
}
```



---

archive/issue_comments_263267.json:
```json
{
    "body": "Commit: **[`1bd29e5`](https://github.com/sagemath/sagetrac-mirror/commit/1bd29e566d28ac731e920d8aa6c70913ede27cb0)**",
    "created_at": "2015-06-30T15:14:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-263267",
    "user": "https://github.com/nathanncohen"
}
```

Commit: **[`1bd29e5`](https://github.com/sagemath/sagetrac-mirror/commit/1bd29e566d28ac731e920d8aa6c70913ede27cb0)**



---

archive/issue_comments_263268.json:
```json
{
    "body": "Branch: **[u/ncohen/18828](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/18828)**",
    "created_at": "2015-06-30T15:14:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-263268",
    "user": "https://github.com/nathanncohen"
}
```

Branch: **[u/ncohen/18828](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/18828)**



---

archive/issue_comments_263269.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1bd29e566d28ac731e920d8aa6c70913ede27cb0\">1bd29e5</a></td><td><code>trac #18828: Export graph to file</code></td></tr></table>\n",
    "created_at": "2015-06-30T15:14:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-263269",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1bd29e566d28ac731e920d8aa6c70913ede27cb0">1bd29e5</a></td><td><code>trac #18828: Export graph to file</code></td></tr></table>




---

archive/issue_events_267358.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-06-30T15:14:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18828#event-267358"
}
```



---

archive/issue_events_267359.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2015-06-30T18:11:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18828#event-267359"
}
```



---

archive/issue_events_267360.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2015-06-30T18:11:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18828#event-267360"
}
```



---

archive/issue_comments_263270.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nHello,\n\nThe patchbot reports compilation errors associated with ticket #18746. I don't know why...\nActually I have the same issue when I try to compile my develop branch, and so I'm currently unable to test this patch.\n\nConcerning this ticket. Don't feel guilty to steal networkx. It is very useful and we will certainly also have to do the same for reading graphs from file.\n\nI suggest to change the way you guess the file format with something like:\n\n```\nfor ext in formats:\n    if filename.endswith('.'+ext):\n        break\nfinally:\n    raise ...\n```\nWith networkx it is possible to give extension like `.edgelist.gz` in which case the file should be compressed (at least with version 1.9.1, but we only have 1.8.1). See https://networkx.github.io/documentation/latest/reference/generated/networkx.readwrite.edgelist.write_edgelist.html\n\nDavid.",
    "created_at": "2015-06-30T18:11:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-263270",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:3" align="right">comment:3</div>

Hello,

The patchbot reports compilation errors associated with ticket #18746. I don't know why...
Actually I have the same issue when I try to compile my develop branch, and so I'm currently unable to test this patch.

Concerning this ticket. Don't feel guilty to steal networkx. It is very useful and we will certainly also have to do the same for reading graphs from file.

I suggest to change the way you guess the file format with something like:

```
for ext in formats:
    if filename.endswith('.'+ext):
        break
finally:
    raise ...
```
With networkx it is possible to give extension like `.edgelist.gz` in which case the file should be compressed (at least with version 1.9.1, but we only have 1.8.1). See https://networkx.github.io/documentation/latest/reference/generated/networkx.readwrite.edgelist.write_edgelist.html

David.



---

archive/issue_comments_263271.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nHellooooo!\n\nI have a little trouble understanding the goal of this ticket: would you like to have only one standard function to save graphs, instead of calling different NetworkX functions, right? Because, for instance, if I want to save a file in adjlist format I can simply type:\n\n```\nimport networkx\nnetworkx.write_adjlist(G, path)\n\n```\ninstead of using this new function.\n\nIn any case, I have tried to compile this code, both with `make` and with `make distclean && make`, and it works! Some small suggestions:\n\n* could you make a test that checks if the output is correct?\n\n* \"the format is \u2018guessed\u2019 from the extension ...\" maybe it is better to say \"the format is the extension\", because you do not guess, you simply use the extension.\n\n* I would add a link to the NetworkX manual (!http://networkx.lanl.gov/reference/readwrite.html), where the different file formats are detailed.",
    "created_at": "2015-07-01T09:20:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-263271",
    "user": "https://github.com/sagetrac-borassi"
}
```

<div id="comment:4" align="right">comment:4</div>

Hellooooo!

I have a little trouble understanding the goal of this ticket: would you like to have only one standard function to save graphs, instead of calling different NetworkX functions, right? Because, for instance, if I want to save a file in adjlist format I can simply type:

```
import networkx
networkx.write_adjlist(G, path)

```
instead of using this new function.

In any case, I have tried to compile this code, both with `make` and with `make distclean && make`, and it works! Some small suggestions:

* could you make a test that checks if the output is correct?

* "the format is ‘guessed’ from the extension ..." maybe it is better to say "the format is the extension", because you do not guess, you simply use the extension.

* I would add a link to the NetworkX manual (!http://networkx.lanl.gov/reference/readwrite.html), where the different file formats are detailed.



---

archive/issue_comments_263272.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nHello,\n\n> The patchbot reports compilation errors associated with ticket #18746. I don't know why...\n> Actually I have the same issue when I try to compile my develop branch, and so I'm currently unable to test this patch.\n\nI had the same problem. Can be solved by removing all the cython cached files that you can find:\n\n```\n./src/build/temp.linux-x86_64-2.7/sage/graphs/graph_decompositions\n./src/build/temp.linux-x86_64-2.7/home/ncohen/.Sage/src/build/cythonized/sage/graphs/graph_decompositions\n./src/build/cythonized/sage/graphs/graph_decompositions\n./src/build/cython_debug/cython_debug_info_sage.graphs.graph_decompositions*\n./src/build/lib.linux-x86_64-2.7/sage/graphs/graph_decompositions\n./local/lib/python2.7/site-packages/sage/graphs/graph_decompositions\n```\n\nAnd then it works. That's trouble for the patchbots, though.\n\n> Concerning this ticket. Don't feel guilty to steal networkx. It is very useful and we will certainly also have to do the same for reading graphs from file.\n\nYep.\n\n> I suggest to change the way you guess the file format with something like:\n> \n> ```\n> for ext in formats:\n>     if filename.endswith('.'+ext):\n>         break\n> finally:\n>     raise ...\n> ```\n\nWhy? It is longer, and does the same. None of the extensions contains a point.\n\n> With networkx it is possible to give extension like `.edgelist.gz` in which case the file should be compressed (at least with version 1.9.1, but we only have 1.8.1). See https://networkx.github.io/documentation/latest/reference/generated/networkx.readwrite.edgelist.write_edgelist.html\n\nSo you want to add all combinations of `.edgelist.gz, edgelist.tgz,..` for all possible combinations to the dictionary of extensions? `O_o`\n\nNathann",
    "created_at": "2015-07-01T10:15:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-263272",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:5" align="right">comment:5</div>

Hello,

> The patchbot reports compilation errors associated with ticket #18746. I don't know why...
> Actually I have the same issue when I try to compile my develop branch, and so I'm currently unable to test this patch.

I had the same problem. Can be solved by removing all the cython cached files that you can find:

```
./src/build/temp.linux-x86_64-2.7/sage/graphs/graph_decompositions
./src/build/temp.linux-x86_64-2.7/home/ncohen/.Sage/src/build/cythonized/sage/graphs/graph_decompositions
./src/build/cythonized/sage/graphs/graph_decompositions
./src/build/cython_debug/cython_debug_info_sage.graphs.graph_decompositions*
./src/build/lib.linux-x86_64-2.7/sage/graphs/graph_decompositions
./local/lib/python2.7/site-packages/sage/graphs/graph_decompositions
```

And then it works. That's trouble for the patchbots, though.

> Concerning this ticket. Don't feel guilty to steal networkx. It is very useful and we will certainly also have to do the same for reading graphs from file.

Yep.

> I suggest to change the way you guess the file format with something like:
> 
> ```
> for ext in formats:
>     if filename.endswith('.'+ext):
>         break
> finally:
>     raise ...
> ```

Why? It is longer, and does the same. None of the extensions contains a point.

> With networkx it is possible to give extension like `.edgelist.gz` in which case the file should be compressed (at least with version 1.9.1, but we only have 1.8.1). See https://networkx.github.io/documentation/latest/reference/generated/networkx.readwrite.edgelist.write_edgelist.html

So you want to add all combinations of `.edgelist.gz, edgelist.tgz,..` for all possible combinations to the dictionary of extensions? `O_o`

Nathann



---

archive/issue_comments_263273.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nHello,\n\n> I have a little trouble understanding the goal of this ticket: would you like to have only one standard function to save graphs, instead of calling different NetworkX functions, right?\n\nYes\n\n> Because, for instance, if I want to save a file in adjlist format I can simply type:\n\nThat's what the branch does, too. Only you may not know that those functions can be found in networkx.\n\n> In any case, I have tried to compile this code, both with `make` and with `make distclean && make`, and it works! Some small suggestions:\n> \n> * could you make a test that checks if the output is correct?\n\nI added one check, but it is unpleasant in many ways. First, the (integer) vertices become strings, and then each edge gets a label encoding a weight. Well, that's networkx...\n\n> * \"the format is \u2018guessed\u2019 from the extension ...\" maybe it is better to say \"the format is the extension\", because you do not guess, you simply use the extension.\n\nHow is that not a guess? Anyway, udpated.\n\n> * I would add a link to the NetworkX manual (!http://networkx.lanl.gov/reference/readwrite.html), where the different file formats are detailed.\n\nDone.\n\nNathann",
    "created_at": "2015-07-01T10:25:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-263273",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:6" align="right">comment:6</div>

Hello,

> I have a little trouble understanding the goal of this ticket: would you like to have only one standard function to save graphs, instead of calling different NetworkX functions, right?

Yes

> Because, for instance, if I want to save a file in adjlist format I can simply type:

That's what the branch does, too. Only you may not know that those functions can be found in networkx.

> In any case, I have tried to compile this code, both with `make` and with `make distclean && make`, and it works! Some small suggestions:
> 
> * could you make a test that checks if the output is correct?

I added one check, but it is unpleasant in many ways. First, the (integer) vertices become strings, and then each edge gets a label encoding a weight. Well, that's networkx...

> * "the format is ‘guessed’ from the extension ..." maybe it is better to say "the format is the extension", because you do not guess, you simply use the extension.

How is that not a guess? Anyway, udpated.

> * I would add a link to the NetworkX manual (!http://networkx.lanl.gov/reference/readwrite.html), where the different file formats are detailed.

Done.

Nathann



---

archive/issue_comments_263274.json:
```json
{
    "body": "Changed commit from **[`1bd29e5`](https://github.com/sagemath/sagetrac-mirror/commit/1bd29e566d28ac731e920d8aa6c70913ede27cb0)** to **[`f7c4a18`](https://github.com/sagemath/sagetrac-mirror/commit/f7c4a18508cf66a958ffe3110754916d406c0ee3)**",
    "created_at": "2015-07-01T10:26:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-263274",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1bd29e5`](https://github.com/sagemath/sagetrac-mirror/commit/1bd29e566d28ac731e920d8aa6c70913ede27cb0)** to **[`f7c4a18`](https://github.com/sagemath/sagetrac-mirror/commit/f7c4a18508cf66a958ffe3110754916d406c0ee3)**



---

archive/issue_comments_263275.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f7c4a18508cf66a958ffe3110754916d406c0ee3\">f7c4a18</a></td><td><code>trac #18828: Reviewer's remarks</code></td></tr></table>\n",
    "created_at": "2015-07-01T10:26:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-263275",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f7c4a18508cf66a958ffe3110754916d406c0ee3">f7c4a18</a></td><td><code>trac #18828: Reviewer's remarks</code></td></tr></table>




---

archive/issue_events_267361.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-07-01T10:26:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18828#event-267361"
}
```



---

archive/issue_events_267362.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-07-01T10:26:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18828#event-267362"
}
```



---

archive/issue_comments_263276.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThis method is clearly useful. It is too boring to import networkx each time you want to read/write a graph from/to a file.\n> > * could you make a test that checks if the output is correct?\n\n> \n> I added one check, but it is unpleasant in many ways. First, the (integer) vertices become strings, and then each edge gets a label encoding a weight. Well, that's networkx...\n\nBy default method `networx.write_edgelist` sets parameter `data=True`. So your method produce a weighted edgelist instead of an edgelist\n\n```\n0 1 {}\n```\ninstead of\n\n```\n0 1\n```\nI understand that you prefer short and fast code, but since writing to a file is slow anyway, we could spend some computation time to refine the behavior of the method.\n\nDavid",
    "created_at": "2015-07-01T18:29:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-263276",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:9" align="right">comment:9</div>

This method is clearly useful. It is too boring to import networkx each time you want to read/write a graph from/to a file.
> > * could you make a test that checks if the output is correct?

> 
> I added one check, but it is unpleasant in many ways. First, the (integer) vertices become strings, and then each edge gets a label encoding a weight. Well, that's networkx...

By default method `networx.write_edgelist` sets parameter `data=True`. So your method produce a weighted edgelist instead of an edgelist

```
0 1 {}
```
instead of

```
0 1
```
I understand that you prefer short and fast code, but since writing to a file is slow anyway, we could spend some computation time to refine the behavior of the method.

David



---

archive/issue_comments_263277.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\n> I understand that you prefer short and fast code, but since writing to a file is slow anyway, we could spend some computation time to refine the behavior of the method.\n\nWould it do the trick for you if we replaced 'networkx.write_edgelist' with 'lambda x:networkx.write_edgelist(x,data=False)'?\n\nNathann",
    "created_at": "2015-07-01T18:31:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-263277",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:10" align="right">comment:10</div>

> I understand that you prefer short and fast code, but since writing to a file is slow anyway, we could spend some computation time to refine the behavior of the method.

Would it do the trick for you if we replaced 'networkx.write_edgelist' with 'lambda x:networkx.write_edgelist(x,data=False)'?

Nathann



---

archive/issue_comments_263278.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@nathanncohen](#comment:10):\n> > I understand that you prefer short and fast code, but since writing to a file is slow anyway, we could spend some computation time to refine the behavior of the method.\n\n> \n> Would it do the trick for you if we replaced 'networkx.write_edgelist' with 'lambda x:networkx.write_edgelist(x,data=False)'?\n\nNice trick. Furthermore, in case we want to write the labels, we can have another parameter to set data=True.",
    "created_at": "2015-07-01T18:51:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-263278",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@nathanncohen](#comment:10):
> > I understand that you prefer short and fast code, but since writing to a file is slow anyway, we could spend some computation time to refine the behavior of the method.

> 
> Would it do the trick for you if we replaced 'networkx.write_edgelist' with 'lambda x:networkx.write_edgelist(x,data=False)'?

Nice trick. Furthermore, in case we want to write the labels, we can have another parameter to set data=True.



---

archive/issue_comments_263279.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c019634f9a18798786f80c2c3254b2263f58f7d8\">c019634</a></td><td><code>trac #18828: Expose all options from networkx</code></td></tr></table>\n",
    "created_at": "2015-07-01T19:49:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-263279",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c019634f9a18798786f80c2c3254b2263f58f7d8">c019634</a></td><td><code>trac #18828: Expose all options from networkx</code></td></tr></table>




---

archive/issue_comments_263280.json:
```json
{
    "body": "Changed commit from **[`f7c4a18`](https://github.com/sagemath/sagetrac-mirror/commit/f7c4a18508cf66a958ffe3110754916d406c0ee3)** to **[`c019634`](https://github.com/sagemath/sagetrac-mirror/commit/c019634f9a18798786f80c2c3254b2263f58f7d8)**",
    "created_at": "2015-07-01T19:49:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-263280",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f7c4a18`](https://github.com/sagemath/sagetrac-mirror/commit/f7c4a18508cf66a958ffe3110754916d406c0ee3)** to **[`c019634`](https://github.com/sagemath/sagetrac-mirror/commit/c019634f9a18798786f80c2c3254b2263f58f7d8)**



---

archive/issue_comments_263281.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\n> Nice trick. Furthermore, in case we want to write the labels, we can have another parameter to set data=True.\n\nSome functions have this 'data' flag, others do not. To make everything simpler I updated the code to make it possible to forward any other flag to networkx. This way, we can pick whatever we want.\n\nNathann",
    "created_at": "2015-07-01T19:50:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-263281",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:13" align="right">comment:13</div>

> Nice trick. Furthermore, in case we want to write the labels, we can have another parameter to set data=True.

Some functions have this 'data' flag, others do not. To make everything simpler I updated the code to make it possible to forward any other flag to networkx. This way, we can pick whatever we want.

Nathann



---

archive/issue_comments_263282.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI propose to add extend the tests in the following way. Let me know if you agree before I push a commit.\n\n```\nsage: g = graphs.PetersenGraph()\nsage: filename = tmp_filename(ext=\".pajek\")\nsage: g.export_to_file(filename)\nsage: import networkx\nsage: h = Graph( networkx.read_pajek(filename)\nsage: g.is_isomorphic(h)\nTrue\nsage: filename = tmp_filename(ext=\".edgelist\")\nsage: g.export_to_file(filename, data=False)\nsage: h = Graph( networkx.read_edgelist(filename)\nsage: g.is_isomorphic(h)\nTrue\n```\nRelying on vertex names is unfortunately not possible yet since the read method turns vertex id like `13` to `u'13'`.",
    "created_at": "2015-07-02T10:42:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-263282",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:14" align="right">comment:14</div>

I propose to add extend the tests in the following way. Let me know if you agree before I push a commit.

```
sage: g = graphs.PetersenGraph()
sage: filename = tmp_filename(ext=".pajek")
sage: g.export_to_file(filename)
sage: import networkx
sage: h = Graph( networkx.read_pajek(filename)
sage: g.is_isomorphic(h)
True
sage: filename = tmp_filename(ext=".edgelist")
sage: g.export_to_file(filename, data=False)
sage: h = Graph( networkx.read_edgelist(filename)
sage: g.is_isomorphic(h)
True
```
Relying on vertex names is unfortunately not possible yet since the read method turns vertex id like `13` to `u'13'`.



---

archive/issue_comments_263283.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nNo problem no problem. Or perhaps we could relabel the graph with the function 'int' ? This should turn the u'13' into a proper 13.\n\nNathann",
    "created_at": "2015-07-02T10:44:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-263283",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:15" align="right">comment:15</div>

No problem no problem. Or perhaps we could relabel the graph with the function 'int' ? This should turn the u'13' into a proper 13.

Nathann



---

archive/issue_comments_263284.json:
```json
{
    "body": "Changed branch from **[u/ncohen/18828](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/18828)** to **[u/dcoudert/18828](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/18828)**",
    "created_at": "2015-07-03T15:35:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-263284",
    "user": "https://github.com/dcoudert"
}
```

Changed branch from **[u/ncohen/18828](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/18828)** to **[u/dcoudert/18828](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/18828)**



---

archive/issue_comments_263285.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nI have pushed a small edit on the example. Hope it helps.\n\nFor the unicode problem, I have once used the following trick. Certainly not the best way to do it.\n\n```\nimport string\n\nif all(isinstance(u, unicode) for u in G):\n    myaction = string.atoi\nelif all(isinstance(u, str) for u in G):\n    myaction = ZZ\nelse:\n    myaction = lambda x:x\n\ntry:\n    L = {u:myaction(u) for u in G}\nexcept:\n    L = {u:str(u) for u in G}\n\nG.relabel(perm=L, inplace=True)\n```\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fed2fd73b9c217218a7dc15cdef487482970271d\">fed2fd7</a></td><td><code>trac #18828: Merged with 6.8.beta7</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/254b36c7132562b01b8802a0f3da49c90f6487d5\">254b36c</a></td><td><code>trac #18828: fix and improve test/examples</code></td></tr></table>\n",
    "created_at": "2015-07-03T15:38:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-263285",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:17" align="right">comment:17</div>

I have pushed a small edit on the example. Hope it helps.

For the unicode problem, I have once used the following trick. Certainly not the best way to do it.

```
import string

if all(isinstance(u, unicode) for u in G):
    myaction = string.atoi
elif all(isinstance(u, str) for u in G):
    myaction = ZZ
else:
    myaction = lambda x:x

try:
    L = {u:myaction(u) for u in G}
except:
    L = {u:str(u) for u in G}

G.relabel(perm=L, inplace=True)
```

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fed2fd73b9c217218a7dc15cdef487482970271d">fed2fd7</a></td><td><code>trac #18828: Merged with 6.8.beta7</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/254b36c7132562b01b8802a0f3da49c90f6487d5">254b36c</a></td><td><code>trac #18828: fix and improve test/examples</code></td></tr></table>




---

archive/issue_comments_263286.json:
```json
{
    "body": "Changed commit from **[`c019634`](https://github.com/sagemath/sagetrac-mirror/commit/c019634f9a18798786f80c2c3254b2263f58f7d8)** to **[`254b36c`](https://github.com/sagemath/sagetrac-mirror/commit/254b36c7132562b01b8802a0f3da49c90f6487d5)**",
    "created_at": "2015-07-03T15:38:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-263286",
    "user": "https://github.com/dcoudert"
}
```

Changed commit from **[`c019634`](https://github.com/sagemath/sagetrac-mirror/commit/c019634f9a18798786f80c2c3254b2263f58f7d8)** to **[`254b36c`](https://github.com/sagemath/sagetrac-mirror/commit/254b36c7132562b01b8802a0f3da49c90f6487d5)**



---

archive/issue_comments_263287.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nWorks for me !",
    "created_at": "2015-07-03T15:47:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-263287",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:18" align="right">comment:18</div>

Works for me !



---

archive/issue_comments_263288.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nSo then good to go.\n\nIt would be nice to have a method for importing a graph from file, but I don't know where to put it: as a method of class `Generic_Graph`? as a method of (di)graphs generators?",
    "created_at": "2015-07-03T16:00:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-263288",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:19" align="right">comment:19</div>

So then good to go.

It would be nice to have a method for importing a graph from file, but I don't know where to put it: as a method of class `Generic_Graph`? as a method of (di)graphs generators?



---

archive/issue_events_267363.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2015-07-03T16:00:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18828#event-267363"
}
```



---

archive/issue_events_267364.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2015-07-03T16:00:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18828#event-267364"
}
```



---

archive/issue_comments_263289.json:
```json
{
    "body": "Reviewer: **David Coudert**",
    "created_at": "2015-07-03T16:00:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-263289",
    "user": "https://github.com/dcoudert"
}
```

Reviewer: **David Coudert**



---

archive/issue_comments_263290.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\n> It would be nice to have a method for importing a graph from file, but I don't know where to put it: as a method of class `Generic_Graph`? as a method of (di)graphs generators?\n\nThe 'classiest way' would probably be something like `Graph(filename)`. But adding formats to the current list scares me `:-P`\n\nNathann",
    "created_at": "2015-07-03T17:09:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-263290",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:20" align="right">comment:20</div>

> It would be nice to have a method for importing a graph from file, but I don't know where to put it: as a method of class `Generic_Graph`? as a method of (di)graphs generators?

The 'classiest way' would probably be something like `Graph(filename)`. But adding formats to the current list scares me `:-P`

Nathann



---

archive/issue_comments_263291.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\n> The 'classiest way' would probably be something like `Graph(filename)`. But adding formats to the current list scares me `:-P`\n\nI understand. Although you did an impressive cleaning, it's still hard.\nWell, we will think to something.",
    "created_at": "2015-07-03T17:10:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-263291",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:21" align="right">comment:21</div>

> The 'classiest way' would probably be something like `Graph(filename)`. But adding formats to the current list scares me `:-P`

I understand. Although you did an impressive cleaning, it's still hard.
Well, we will think to something.



---

archive/issue_events_267365.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-07-03T22:14:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18828#event-267365"
}
```



---

archive/issue_events_267366.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "50175380601c002830951c07331d989ce76aec8d",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-07-03T22:14:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18828#event-267366"
}
```



---

archive/issue_comments_263292.json:
```json
{
    "body": "Changed branch from **[u/dcoudert/18828](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/18828)** to **[`254b36c`](https://github.com/sagemath/sagetrac-mirror/commit/254b36c7132562b01b8802a0f3da49c90f6487d5)**",
    "created_at": "2015-07-03T22:14:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-263292",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/dcoudert/18828](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/18828)** to **[`254b36c`](https://github.com/sagemath/sagetrac-mirror/commit/254b36c7132562b01b8802a0f3da49c90f6487d5)**
