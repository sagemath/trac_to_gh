# Issue 18828: Export graph to file

archive/issues_018591.json:
```json
{
    "assignees": [],
    "body": "I feel rather guilty, as all that this branch does is steal networkx functions. With it we can export graphs to several file formats, using the `networkx.write_*` functions.\n\nNathann\n\nCC:  @dimpase @dcoudert borassi\n\nBranch/Commit: **[254b36c](https://github.com/sagemath/sagetrac-mirror/commit/254b36c7132562b01b8802a0f3da49c90f6487d5)**\n\nReviewer: **David Coudert**\n\nAuthor: **Nathann Cohen**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/18828_\n\n",
    "closed_at": "2015-07-03T22:14:22Z",
    "created_at": "2015-06-30T14:58:53Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Export graph to file",
    "type": "issue",
    "updated_at": "2015-07-03T22:14:22Z",
    "url": "https://github.com/sagemath/sage/issues/18828",
    "user": "https://github.com/nathanncohen"
}
```
I feel rather guilty, as all that this branch does is steal networkx functions. With it we can export graphs to several file formats, using the `networkx.write_*` functions.

Nathann

CC:  @dimpase @dcoudert borassi

Branch/Commit: **[254b36c](https://github.com/sagemath/sagetrac-mirror/commit/254b36c7132562b01b8802a0f3da49c90f6487d5)**

Reviewer: **David Coudert**

Author: **Nathann Cohen**

_Issue created by migration from https://trac.sagemath.org/ticket/18828_





---

archive/issue_events_240555.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-06-30T14:58:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18828#event-240555"
}
```



---

archive/issue_events_240556.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-06-30T14:58:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "component: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18828#event-240556"
}
```



---

archive/issue_events_240557.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-06-30T14:58:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18828#event-240557"
}
```



---

archive/issue_events_240558.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-06-30T14:58:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18828#event-240558"
}
```



---

archive/issue_comments_265793.json:
```json
{
    "body": "Commit: **[1bd29e5](https://github.com/sagemath/sagetrac-mirror/commit/1bd29e566d28ac731e920d8aa6c70913ede27cb0)**",
    "created_at": "2015-06-30T15:14:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-265793",
    "user": "https://github.com/nathanncohen"
}
```

Commit: **[1bd29e5](https://github.com/sagemath/sagetrac-mirror/commit/1bd29e566d28ac731e920d8aa6c70913ede27cb0)**



---

archive/issue_comments_265794.json:
```json
{
    "body": "Branch: **[u/ncohen/18828](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/18828)**",
    "created_at": "2015-06-30T15:14:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-265794",
    "user": "https://github.com/nathanncohen"
}
```

Branch: **[u/ncohen/18828](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/18828)**



---

archive/issue_comments_265795.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1bd29e566d28ac731e920d8aa6c70913ede27cb0\">1bd29e5</a></td><td><code>trac #18828: Export graph to file</code></td></tr></table>\n",
    "created_at": "2015-06-30T15:14:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-265795",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:1'>Comment 1:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1bd29e566d28ac731e920d8aa6c70913ede27cb0">1bd29e5</a></td><td><code>trac #18828: Export graph to file</code></td></tr></table>




---

archive/issue_events_240559.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-06-30T15:14:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18828#event-240559"
}
```



---

archive/issue_events_240560.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2015-06-30T18:11:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18828#event-240560"
}
```



---

archive/issue_events_240561.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2015-06-30T18:11:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18828#event-240561"
}
```



---

archive/issue_comments_265796.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nHello,\n\nThe patchbot reports compilation errors associated with ticket #18746. I don't know why...\nActually I have the same issue when I try to compile my develop branch, and so I'm currently unable to test this patch.\n\nConcerning this ticket. Don't feel guilty to steal networkx. It is very useful and we will certainly also have to do the same for reading graphs from file.\n\nI suggest to change the way you guess the file format with something like:\n\n```\nfor ext in formats:\n    if filename.endswith('.'+ext):\n        break\nfinally:\n    raise ...\n```\nWith networkx it is possible to give extension like `.edgelist.gz` in which case the file should be compressed (at least with version 1.9.1, but we only have 1.8.1). See https://networkx.github.io/documentation/latest/reference/generated/networkx.readwrite.edgelist.write_edgelist.html\n\nDavid.",
    "created_at": "2015-06-30T18:11:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-265796",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:3'>Comment 3:</a>
Hello,

The patchbot reports compilation errors associated with ticket #18746. I don't know why...
Actually I have the same issue when I try to compile my develop branch, and so I'm currently unable to test this patch.

Concerning this ticket. Don't feel guilty to steal networkx. It is very useful and we will certainly also have to do the same for reading graphs from file.

I suggest to change the way you guess the file format with something like:

```
for ext in formats:
    if filename.endswith('.'+ext):
        break
finally:
    raise ...
```
With networkx it is possible to give extension like `.edgelist.gz` in which case the file should be compressed (at least with version 1.9.1, but we only have 1.8.1). See https://networkx.github.io/documentation/latest/reference/generated/networkx.readwrite.edgelist.write_edgelist.html

David.



---

archive/issue_comments_265797.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nHellooooo!\n\nI have a little trouble understanding the goal of this ticket: would you like to have only one standard function to save graphs, instead of calling different NetworkX functions, right? Because, for instance, if I want to save a file in adjlist format I can simply type:\n\n```\nimport networkx\nnetworkx.write_adjlist(G, path)\n\n```\ninstead of using this new function.\n\nIn any case, I have tried to compile this code, both with `make` and with `make distclean && make`, and it works! Some small suggestions:\n\n* could you make a test that checks if the output is correct?\n\n* \"the format is \u2018guessed\u2019 from the extension ...\" maybe it is better to say \"the format is the extension\", because you do not guess, you simply use the extension.\n\n* I would add a link to the NetworkX manual (!http://networkx.lanl.gov/reference/readwrite.html), where the different file formats are detailed.",
    "created_at": "2015-07-01T09:20:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-265797",
    "user": "https://github.com/sagetrac-borassi"
}
```

<a id='comment:4'>Comment 4:</a>
Hellooooo!

I have a little trouble understanding the goal of this ticket: would you like to have only one standard function to save graphs, instead of calling different NetworkX functions, right? Because, for instance, if I want to save a file in adjlist format I can simply type:

```
import networkx
networkx.write_adjlist(G, path)

```
instead of using this new function.

In any case, I have tried to compile this code, both with `make` and with `make distclean && make`, and it works! Some small suggestions:

* could you make a test that checks if the output is correct?

* "the format is ‘guessed’ from the extension ..." maybe it is better to say "the format is the extension", because you do not guess, you simply use the extension.

* I would add a link to the NetworkX manual (!http://networkx.lanl.gov/reference/readwrite.html), where the different file formats are detailed.



---

archive/issue_comments_265798.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nHello,\n\n> The patchbot reports compilation errors associated with ticket #18746. I don't know why...\n> Actually I have the same issue when I try to compile my develop branch, and so I'm currently unable to test this patch.\n\nI had the same problem. Can be solved by removing all the cython cached files that you can find:\n\n```\n./src/build/temp.linux-x86_64-2.7/sage/graphs/graph_decompositions\n./src/build/temp.linux-x86_64-2.7/home/ncohen/.Sage/src/build/cythonized/sage/graphs/graph_decompositions\n./src/build/cythonized/sage/graphs/graph_decompositions\n./src/build/cython_debug/cython_debug_info_sage.graphs.graph_decompositions*\n./src/build/lib.linux-x86_64-2.7/sage/graphs/graph_decompositions\n./local/lib/python2.7/site-packages/sage/graphs/graph_decompositions\n```\n\nAnd then it works. That's trouble for the patchbots, though.\n\n> Concerning this ticket. Don't feel guilty to steal networkx. It is very useful and we will certainly also have to do the same for reading graphs from file.\n\nYep.\n\n> I suggest to change the way you guess the file format with something like:\n> \n> ```\n> for ext in formats:\n>     if filename.endswith('.'+ext):\n>         break\n> finally:\n>     raise ...\n> ```\n\nWhy? It is longer, and does the same. None of the extensions contains a point.\n\n> With networkx it is possible to give extension like `.edgelist.gz` in which case the file should be compressed (at least with version 1.9.1, but we only have 1.8.1). See https://networkx.github.io/documentation/latest/reference/generated/networkx.readwrite.edgelist.write_edgelist.html\n\nSo you want to add all combinations of `.edgelist.gz, edgelist.tgz,..` for all possible combinations to the dictionary of extensions? `O_o`\n\nNathann",
    "created_at": "2015-07-01T10:15:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-265798",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:5'>Comment 5:</a>
Hello,

> The patchbot reports compilation errors associated with ticket #18746. I don't know why...
> Actually I have the same issue when I try to compile my develop branch, and so I'm currently unable to test this patch.

I had the same problem. Can be solved by removing all the cython cached files that you can find:

```
./src/build/temp.linux-x86_64-2.7/sage/graphs/graph_decompositions
./src/build/temp.linux-x86_64-2.7/home/ncohen/.Sage/src/build/cythonized/sage/graphs/graph_decompositions
./src/build/cythonized/sage/graphs/graph_decompositions
./src/build/cython_debug/cython_debug_info_sage.graphs.graph_decompositions*
./src/build/lib.linux-x86_64-2.7/sage/graphs/graph_decompositions
./local/lib/python2.7/site-packages/sage/graphs/graph_decompositions
```

And then it works. That's trouble for the patchbots, though.

> Concerning this ticket. Don't feel guilty to steal networkx. It is very useful and we will certainly also have to do the same for reading graphs from file.

Yep.

> I suggest to change the way you guess the file format with something like:
> 
> ```
> for ext in formats:
>     if filename.endswith('.'+ext):
>         break
> finally:
>     raise ...
> ```

Why? It is longer, and does the same. None of the extensions contains a point.

> With networkx it is possible to give extension like `.edgelist.gz` in which case the file should be compressed (at least with version 1.9.1, but we only have 1.8.1). See https://networkx.github.io/documentation/latest/reference/generated/networkx.readwrite.edgelist.write_edgelist.html

So you want to add all combinations of `.edgelist.gz, edgelist.tgz,..` for all possible combinations to the dictionary of extensions? `O_o`

Nathann



---

archive/issue_comments_265799.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nHello,\n\n> I have a little trouble understanding the goal of this ticket: would you like to have only one standard function to save graphs, instead of calling different NetworkX functions, right?\n\nYes\n\n> Because, for instance, if I want to save a file in adjlist format I can simply type:\n\nThat's what the branch does, too. Only you may not know that those functions can be found in networkx.\n\n> In any case, I have tried to compile this code, both with `make` and with `make distclean && make`, and it works! Some small suggestions:\n> \n> * could you make a test that checks if the output is correct?\n\nI added one check, but it is unpleasant in many ways. First, the (integer) vertices become strings, and then each edge gets a label encoding a weight. Well, that's networkx...\n\n> * \"the format is \u2018guessed\u2019 from the extension ...\" maybe it is better to say \"the format is the extension\", because you do not guess, you simply use the extension.\n\nHow is that not a guess? Anyway, udpated.\n\n> * I would add a link to the NetworkX manual (!http://networkx.lanl.gov/reference/readwrite.html), where the different file formats are detailed.\n\nDone.\n\nNathann",
    "created_at": "2015-07-01T10:25:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-265799",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:6'>Comment 6:</a>
Hello,

> I have a little trouble understanding the goal of this ticket: would you like to have only one standard function to save graphs, instead of calling different NetworkX functions, right?

Yes

> Because, for instance, if I want to save a file in adjlist format I can simply type:

That's what the branch does, too. Only you may not know that those functions can be found in networkx.

> In any case, I have tried to compile this code, both with `make` and with `make distclean && make`, and it works! Some small suggestions:
> 
> * could you make a test that checks if the output is correct?

I added one check, but it is unpleasant in many ways. First, the (integer) vertices become strings, and then each edge gets a label encoding a weight. Well, that's networkx...

> * "the format is ‘guessed’ from the extension ..." maybe it is better to say "the format is the extension", because you do not guess, you simply use the extension.

How is that not a guess? Anyway, udpated.

> * I would add a link to the NetworkX manual (!http://networkx.lanl.gov/reference/readwrite.html), where the different file formats are detailed.

Done.

Nathann



---

archive/issue_comments_265800.json:
```json
{
    "body": "Changed commit from **[1bd29e5](https://github.com/sagemath/sagetrac-mirror/commit/1bd29e566d28ac731e920d8aa6c70913ede27cb0)** to **[f7c4a18](https://github.com/sagemath/sagetrac-mirror/commit/f7c4a18508cf66a958ffe3110754916d406c0ee3)**",
    "created_at": "2015-07-01T10:26:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-265800",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1bd29e5](https://github.com/sagemath/sagetrac-mirror/commit/1bd29e566d28ac731e920d8aa6c70913ede27cb0)** to **[f7c4a18](https://github.com/sagemath/sagetrac-mirror/commit/f7c4a18508cf66a958ffe3110754916d406c0ee3)**



---

archive/issue_comments_265801.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f7c4a18508cf66a958ffe3110754916d406c0ee3\">f7c4a18</a></td><td><code>trac #18828: Reviewer's remarks</code></td></tr></table>\n",
    "created_at": "2015-07-01T10:26:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-265801",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:7'>Comment 7:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f7c4a18508cf66a958ffe3110754916d406c0ee3">f7c4a18</a></td><td><code>trac #18828: Reviewer's remarks</code></td></tr></table>




---

archive/issue_events_240562.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-07-01T10:26:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18828#event-240562"
}
```



---

archive/issue_events_240563.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-07-01T10:26:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18828#event-240563"
}
```



---

archive/issue_comments_265802.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nThis method is clearly useful. It is too boring to import networkx each time you want to read/write a graph from/to a file.\n> > * could you make a test that checks if the output is correct?\n\n> \n> I added one check, but it is unpleasant in many ways. First, the (integer) vertices become strings, and then each edge gets a label encoding a weight. Well, that's networkx...\n\nBy default method `networx.write_edgelist` sets parameter `data=True`. So your method produce a weighted edgelist instead of an edgelist\n\n```\n0 1 {}\n```\ninstead of\n\n```\n0 1\n```\nI understand that you prefer short and fast code, but since writing to a file is slow anyway, we could spend some computation time to refine the behavior of the method.\n\nDavid",
    "created_at": "2015-07-01T18:29:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-265802",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:9'>Comment 9:</a>
This method is clearly useful. It is too boring to import networkx each time you want to read/write a graph from/to a file.
> > * could you make a test that checks if the output is correct?

> 
> I added one check, but it is unpleasant in many ways. First, the (integer) vertices become strings, and then each edge gets a label encoding a weight. Well, that's networkx...

By default method `networx.write_edgelist` sets parameter `data=True`. So your method produce a weighted edgelist instead of an edgelist

```
0 1 {}
```
instead of

```
0 1
```
I understand that you prefer short and fast code, but since writing to a file is slow anyway, we could spend some computation time to refine the behavior of the method.

David



---

archive/issue_comments_265803.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\n> I understand that you prefer short and fast code, but since writing to a file is slow anyway, we could spend some computation time to refine the behavior of the method.\n\nWould it do the trick for you if we replaced 'networkx.write_edgelist' with 'lambda x:networkx.write_edgelist(x,data=False)'?\n\nNathann",
    "created_at": "2015-07-01T18:31:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-265803",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:10'>Comment 10:</a>
> I understand that you prefer short and fast code, but since writing to a file is slow anyway, we could spend some computation time to refine the behavior of the method.

Would it do the trick for you if we replaced 'networkx.write_edgelist' with 'lambda x:networkx.write_edgelist(x,data=False)'?

Nathann



---

archive/issue_comments_265804.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nReplying to [@nathanncohen](#comment%3A10):\n> > I understand that you prefer short and fast code, but since writing to a file is slow anyway, we could spend some computation time to refine the behavior of the method.\n\n> \n> Would it do the trick for you if we replaced 'networkx.write_edgelist' with 'lambda x:networkx.write_edgelist(x,data=False)'?\n\nNice trick. Furthermore, in case we want to write the labels, we can have another parameter to set data=True.",
    "created_at": "2015-07-01T18:51:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-265804",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:11'>Comment 11:</a>
Replying to [@nathanncohen](#comment%3A10):
> > I understand that you prefer short and fast code, but since writing to a file is slow anyway, we could spend some computation time to refine the behavior of the method.

> 
> Would it do the trick for you if we replaced 'networkx.write_edgelist' with 'lambda x:networkx.write_edgelist(x,data=False)'?

Nice trick. Furthermore, in case we want to write the labels, we can have another parameter to set data=True.



---

archive/issue_comments_265805.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c019634f9a18798786f80c2c3254b2263f58f7d8\">c019634</a></td><td><code>trac #18828: Expose all options from networkx</code></td></tr></table>\n",
    "created_at": "2015-07-01T19:49:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-265805",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:12'>Comment 12:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c019634f9a18798786f80c2c3254b2263f58f7d8">c019634</a></td><td><code>trac #18828: Expose all options from networkx</code></td></tr></table>




---

archive/issue_comments_265806.json:
```json
{
    "body": "Changed commit from **[f7c4a18](https://github.com/sagemath/sagetrac-mirror/commit/f7c4a18508cf66a958ffe3110754916d406c0ee3)** to **[c019634](https://github.com/sagemath/sagetrac-mirror/commit/c019634f9a18798786f80c2c3254b2263f58f7d8)**",
    "created_at": "2015-07-01T19:49:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-265806",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f7c4a18](https://github.com/sagemath/sagetrac-mirror/commit/f7c4a18508cf66a958ffe3110754916d406c0ee3)** to **[c019634](https://github.com/sagemath/sagetrac-mirror/commit/c019634f9a18798786f80c2c3254b2263f58f7d8)**



---

archive/issue_comments_265807.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\n> Nice trick. Furthermore, in case we want to write the labels, we can have another parameter to set data=True.\n\nSome functions have this 'data' flag, others do not. To make everything simpler I updated the code to make it possible to forward any other flag to networkx. This way, we can pick whatever we want.\n\nNathann",
    "created_at": "2015-07-01T19:50:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-265807",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:13'>Comment 13:</a>
> Nice trick. Furthermore, in case we want to write the labels, we can have another parameter to set data=True.

Some functions have this 'data' flag, others do not. To make everything simpler I updated the code to make it possible to forward any other flag to networkx. This way, we can pick whatever we want.

Nathann



---

archive/issue_comments_265808.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nI propose to add extend the tests in the following way. Let me know if you agree before I push a commit.\n\n```\nsage: g = graphs.PetersenGraph()\nsage: filename = tmp_filename(ext=\".pajek\")\nsage: g.export_to_file(filename)\nsage: import networkx\nsage: h = Graph( networkx.read_pajek(filename)\nsage: g.is_isomorphic(h)\nTrue\nsage: filename = tmp_filename(ext=\".edgelist\")\nsage: g.export_to_file(filename, data=False)\nsage: h = Graph( networkx.read_edgelist(filename)\nsage: g.is_isomorphic(h)\nTrue\n```\nRelying on vertex names is unfortunately not possible yet since the read method turns vertex id like `13` to `u'13'`.",
    "created_at": "2015-07-02T10:42:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-265808",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:14'>Comment 14:</a>
I propose to add extend the tests in the following way. Let me know if you agree before I push a commit.

```
sage: g = graphs.PetersenGraph()
sage: filename = tmp_filename(ext=".pajek")
sage: g.export_to_file(filename)
sage: import networkx
sage: h = Graph( networkx.read_pajek(filename)
sage: g.is_isomorphic(h)
True
sage: filename = tmp_filename(ext=".edgelist")
sage: g.export_to_file(filename, data=False)
sage: h = Graph( networkx.read_edgelist(filename)
sage: g.is_isomorphic(h)
True
```
Relying on vertex names is unfortunately not possible yet since the read method turns vertex id like `13` to `u'13'`.



---

archive/issue_comments_265809.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nNo problem no problem. Or perhaps we could relabel the graph with the function 'int' ? This should turn the u'13' into a proper 13.\n\nNathann",
    "created_at": "2015-07-02T10:44:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-265809",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:15'>Comment 15:</a>
No problem no problem. Or perhaps we could relabel the graph with the function 'int' ? This should turn the u'13' into a proper 13.

Nathann



---

archive/issue_comments_265810.json:
```json
{
    "body": "Changed branch from **[u/ncohen/18828](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/18828)** to **[u/dcoudert/18828](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/18828)**",
    "created_at": "2015-07-03T15:35:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-265810",
    "user": "https://github.com/dcoudert"
}
```

Changed branch from **[u/ncohen/18828](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/18828)** to **[u/dcoudert/18828](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/18828)**



---

archive/issue_comments_265811.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nI have pushed a small edit on the example. Hope it helps.\n\nFor the unicode problem, I have once used the following trick. Certainly not the best way to do it.\n\n```\nimport string\n\nif all(isinstance(u, unicode) for u in G):\n    myaction = string.atoi\nelif all(isinstance(u, str) for u in G):\n    myaction = ZZ\nelse:\n    myaction = lambda x:x\n\ntry:\n    L = {u:myaction(u) for u in G}\nexcept:\n    L = {u:str(u) for u in G}\n\nG.relabel(perm=L, inplace=True)\n```\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fed2fd73b9c217218a7dc15cdef487482970271d\">fed2fd7</a></td><td><code>trac #18828: Merged with 6.8.beta7</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/254b36c7132562b01b8802a0f3da49c90f6487d5\">254b36c</a></td><td><code>trac #18828: fix and improve test/examples</code></td></tr></table>\n",
    "created_at": "2015-07-03T15:38:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-265811",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:17'>Comment 17:</a>
I have pushed a small edit on the example. Hope it helps.

For the unicode problem, I have once used the following trick. Certainly not the best way to do it.

```
import string

if all(isinstance(u, unicode) for u in G):
    myaction = string.atoi
elif all(isinstance(u, str) for u in G):
    myaction = ZZ
else:
    myaction = lambda x:x

try:
    L = {u:myaction(u) for u in G}
except:
    L = {u:str(u) for u in G}

G.relabel(perm=L, inplace=True)
```

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fed2fd73b9c217218a7dc15cdef487482970271d">fed2fd7</a></td><td><code>trac #18828: Merged with 6.8.beta7</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/254b36c7132562b01b8802a0f3da49c90f6487d5">254b36c</a></td><td><code>trac #18828: fix and improve test/examples</code></td></tr></table>




---

archive/issue_comments_265812.json:
```json
{
    "body": "Changed commit from **[c019634](https://github.com/sagemath/sagetrac-mirror/commit/c019634f9a18798786f80c2c3254b2263f58f7d8)** to **[254b36c](https://github.com/sagemath/sagetrac-mirror/commit/254b36c7132562b01b8802a0f3da49c90f6487d5)**",
    "created_at": "2015-07-03T15:38:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-265812",
    "user": "https://github.com/dcoudert"
}
```

Changed commit from **[c019634](https://github.com/sagemath/sagetrac-mirror/commit/c019634f9a18798786f80c2c3254b2263f58f7d8)** to **[254b36c](https://github.com/sagemath/sagetrac-mirror/commit/254b36c7132562b01b8802a0f3da49c90f6487d5)**



---

archive/issue_comments_265813.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nWorks for me !",
    "created_at": "2015-07-03T15:47:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-265813",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:18'>Comment 18:</a>
Works for me !



---

archive/issue_comments_265814.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nSo then good to go.\n\nIt would be nice to have a method for importing a graph from file, but I don't know where to put it: as a method of class `Generic_Graph`? as a method of (di)graphs generators?",
    "created_at": "2015-07-03T16:00:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-265814",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:19'>Comment 19:</a>
So then good to go.

It would be nice to have a method for importing a graph from file, but I don't know where to put it: as a method of class `Generic_Graph`? as a method of (di)graphs generators?



---

archive/issue_events_240564.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2015-07-03T16:00:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18828#event-240564"
}
```



---

archive/issue_events_240565.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2015-07-03T16:00:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18828#event-240565"
}
```



---

archive/issue_comments_265815.json:
```json
{
    "body": "Reviewer: **David Coudert**",
    "created_at": "2015-07-03T16:00:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-265815",
    "user": "https://github.com/dcoudert"
}
```

Reviewer: **David Coudert**



---

archive/issue_comments_265816.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\n> It would be nice to have a method for importing a graph from file, but I don't know where to put it: as a method of class `Generic_Graph`? as a method of (di)graphs generators?\n\nThe 'classiest way' would probably be something like `Graph(filename)`. But adding formats to the current list scares me `:-P`\n\nNathann",
    "created_at": "2015-07-03T17:09:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-265816",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:20'>Comment 20:</a>
> It would be nice to have a method for importing a graph from file, but I don't know where to put it: as a method of class `Generic_Graph`? as a method of (di)graphs generators?

The 'classiest way' would probably be something like `Graph(filename)`. But adding formats to the current list scares me `:-P`

Nathann



---

archive/issue_comments_265817.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\n> The 'classiest way' would probably be something like `Graph(filename)`. But adding formats to the current list scares me `:-P`\n\nI understand. Although you did an impressive cleaning, it's still hard.\nWell, we will think to something.",
    "created_at": "2015-07-03T17:10:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-265817",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:21'>Comment 21:</a>
> The 'classiest way' would probably be something like `Graph(filename)`. But adding formats to the current list scares me `:-P`

I understand. Although you did an impressive cleaning, it's still hard.
Well, we will think to something.



---

archive/issue_events_240566.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-07-03T22:14:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18828#event-240566"
}
```



---

archive/issue_events_240567.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "50175380601c002830951c07331d989ce76aec8d",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-07-03T22:14:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18828#event-240567"
}
```



---

archive/issue_comments_265818.json:
```json
{
    "body": "Changed branch from **[u/dcoudert/18828](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/18828)** to **[254b36c](https://github.com/sagemath/sagetrac-mirror/commit/254b36c7132562b01b8802a0f3da49c90f6487d5)**",
    "created_at": "2015-07-03T22:14:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18828#issuecomment-265818",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/dcoudert/18828](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/18828)** to **[254b36c](https://github.com/sagemath/sagetrac-mirror/commit/254b36c7132562b01b8802a0f3da49c90f6487d5)**
