# Issue 18563: Change known-broken new-style packages to "experimental"

archive/issues_018326.json:
```json
{
    "body": "Packages which are known to fail optional doctests or which do not install on all supported platforms should be \"experimental\", not \"optional\".\n\nPackages moved to experimental:\n* `4ti2`: doesn't pass optional doctests\n* `autotools`: breaks installation of Singular if `xz` is not installed\n* `compilerwrapper`: totally breaks building Sage on OS X\n* `fricas`: doesn't pass optional doctests\n* `gap_packages`: doesn't pass optional doctests\n* `latte_int`: doesn't pass optional doctests\n* `topcom`: doesn't pass doctests, even breaks non-optional tests\n* `valgrind`: doesn't build on OS X 10.10\n\nOther problematic packages, not changed here:\n* `arb`: doesn't build on OS X: fixed by #18560\n* `dot2tex`: see #18124\n* `gdb`: does not work properly on OS X: live with it\n* `tides`: see #18573\n\nBranch/Commit: 245ab151fe517da0eb2a982494376a20441304f4\n\nReviewer: Nathann Cohen\n\nAuthor: Jeroen Demeyer\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/18563\n\n",
    "closed_at": "2015-06-02T20:18:12Z",
    "created_at": "2015-06-01T08:11:59Z",
    "labels": [
        "component: packages: experimental",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.8",
    "title": "Change known-broken new-style packages to \"experimental\"",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18563",
    "user": "https://github.com/jdemeyer"
}
```
Packages which are known to fail optional doctests or which do not install on all supported platforms should be "experimental", not "optional".

Packages moved to experimental:
* `4ti2`: doesn't pass optional doctests
* `autotools`: breaks installation of Singular if `xz` is not installed
* `compilerwrapper`: totally breaks building Sage on OS X
* `fricas`: doesn't pass optional doctests
* `gap_packages`: doesn't pass optional doctests
* `latte_int`: doesn't pass optional doctests
* `topcom`: doesn't pass doctests, even breaks non-optional tests
* `valgrind`: doesn't build on OS X 10.10

Other problematic packages, not changed here:
* `arb`: doesn't build on OS X: fixed by #18560
* `dot2tex`: see #18124
* `gdb`: does not work properly on OS X: live with it
* `tides`: see #18573

Branch/Commit: 245ab151fe517da0eb2a982494376a20441304f4

Reviewer: Nathann Cohen

Author: Jeroen Demeyer

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/18563





---

archive/issue_comments_264646.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n Packages which are known to fail optional doctests should be \"experimental\", not \"optional\".\n+\n+**NOTE** replicate the changes on Sage's mirrors (ask Harald) when this patch is merged\n \n Author: Jeroen Demeyer\n \n```\n",
    "created_at": "2015-06-01T08:17:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18563",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18563#issuecomment-264646",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,6 @@
 Packages which are known to fail optional doctests should be "experimental", not "optional".
+
+**NOTE** replicate the changes on Sage's mirrors (ask Harald) when this patch is merged
 
 Author: Jeroen Demeyer
 
```




---

archive/issue_comments_264647.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2015-06-01T08:17:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18563",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18563#issuecomment-264647",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_264648.json:
```json
{
    "body": "<a id='comment:3'></a>needs review ?",
    "created_at": "2015-06-01T08:19:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18563",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18563#issuecomment-264648",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:3'></a>needs review ?



---

archive/issue_comments_264649.json:
```json
{
    "body": "Replying to [ticket:18563 jdemeyer]:\n> **NOTE** replicate the changes on Sage's mirrors (ask Harald) when this patch is merged\n\nI plan to consider only new-style packages in this ticket, is the mirror thing still relevant?",
    "created_at": "2015-06-01T08:49:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18563",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18563#issuecomment-264649",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [ticket:18563 jdemeyer]:
> **NOTE** replicate the changes on Sage's mirrors (ask Harald) when this patch is merged

I plan to consider only new-style packages in this ticket, is the mirror thing still relevant?



---

archive/issue_comments_264650.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-\n+Packages which are known to fail optional doctests should be \"experimental\", not \"optional\".\n \n Author: Jeroen Demeyer\n \n```\n",
    "created_at": "2015-06-01T08:50:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18563",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18563#issuecomment-264650",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,4 @@
-
+Packages which are known to fail optional doctests should be "experimental", not "optional".
 
 Author: Jeroen Demeyer
 
```




---

archive/issue_comments_264651.json:
```json
{
    "body": "<a id='comment:5'></a>> I plan to consider only new-style packages in this ticket, is the mirror thing still relevant?\n\n\nIndeed, in this case you don't need to.\n\nNathann",
    "created_at": "2015-06-01T08:50:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18563",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18563#issuecomment-264651",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:5'></a>> I plan to consider only new-style packages in this ticket, is the mirror thing still relevant?


Indeed, in this case you don't need to.

Nathann



---

archive/issue_comments_264652.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-01T10:04:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18563",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18563#issuecomment-264652",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_264653.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-\n+Packages which are known to fail optional doctests or which do not install on all supported platforms should be \"experimental\", not \"optional\".\n \n Author: Jeroen Demeyer\n \n```\n",
    "created_at": "2015-06-01T10:10:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18563",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18563#issuecomment-264653",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,4 @@
-
+Packages which are known to fail optional doctests or which do not install on all supported platforms should be "experimental", not "optional".
 
 Author: Jeroen Demeyer
 
```




---

archive/issue_comments_264654.json:
```json
{
    "body": "<a id='comment:8'></a>What's wrong with Valgrind? I just compiled it on this machine:\n\n```\nsimulote:valgrind-3.10.0 ncohen$ uname -a\nDarwin simulote 13.4.0 Darwin Kernel Version 13.4.0: Sun Aug 17 19:50:11 PDT 2014; root:xnu-2422.115.4~1/RELEASE_X86_64 x86_64\n```\n\nDid you keep the log? I'd be interested to look at them.",
    "created_at": "2015-06-01T10:20:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18563",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18563#issuecomment-264654",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:8'></a>What's wrong with Valgrind? I just compiled it on this machine:

```
simulote:valgrind-3.10.0 ncohen$ uname -a
Darwin simulote 13.4.0 Darwin Kernel Version 13.4.0: Sun Aug 17 19:50:11 PDT 2014; root:xnu-2422.115.4~1/RELEASE_X86_64 x86_64
```

Did you keep the log? I'd be interested to look at them.



---

archive/issue_comments_264655.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [comment:8 ncohen]:\n> What's wrong with Valgrind? I just compiled it on this machine:\n> \n> ```\n> simulote:valgrind-3.10.0 ncohen$ uname -a\n> Darwin simulote 13.4.0 Darwin Kernel Version 13.4.0: Sun Aug 17 19:50:11 PDT 2014; root:xnu-2422.115.4~1/RELEASE_X86_64 x86_64\n> ```\n\nThat's OS X 10.9 which is indeed fine. The problem is that it explicitly does not work on OS X 10.10:\n\n```\nchecking for a supported OS... ok (darwin14.3.0)\nchecking for the kernel version... unsupported (14.3.0)\nconfigure: error: Valgrind works on Darwin 10.x, 11.x, 12.x and 13.x (Mac OS X 10.6/7/8/9)\nError configuring Valgrind\n```\nSee also [http://stackoverflow.com/questions/26564125/yosemite-and-valgrind](http://stackoverflow.com/questions/26564125/yosemite-and-valgrind) for example.",
    "created_at": "2015-06-01T10:27:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18563",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18563#issuecomment-264655",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'></a>Replying to [comment:8 ncohen]:
> What's wrong with Valgrind? I just compiled it on this machine:
> 
> ```
> simulote:valgrind-3.10.0 ncohen$ uname -a
> Darwin simulote 13.4.0 Darwin Kernel Version 13.4.0: Sun Aug 17 19:50:11 PDT 2014; root:xnu-2422.115.4~1/RELEASE_X86_64 x86_64
> ```

That's OS X 10.9 which is indeed fine. The problem is that it explicitly does not work on OS X 10.10:

```
checking for a supported OS... ok (darwin14.3.0)
checking for the kernel version... unsupported (14.3.0)
configure: error: Valgrind works on Darwin 10.x, 11.x, 12.x and 13.x (Mac OS X 10.6/7/8/9)
Error configuring Valgrind
```
See also [http://stackoverflow.com/questions/26564125/yosemite-and-valgrind](http://stackoverflow.com/questions/26564125/yosemite-and-valgrind) for example.



---

archive/issue_comments_264656.json:
```json
{
    "body": "<a id='comment:10'></a>> That's OS X 10.9 which is indeed fine. The problem is that it explicitly does not work on OS X 10.10:\n\n\nFunny. Well, anyway they seem to say that the latest svn version handles it. Good news.\n\nOh, by the way I am about write a ticket so that `sage -i <experimental_package>` shows the same warning we have when the package is a new-style package.\n\nNathann",
    "created_at": "2015-06-01T10:31:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18563",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18563#issuecomment-264656",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:10'></a>> That's OS X 10.9 which is indeed fine. The problem is that it explicitly does not work on OS X 10.10:


Funny. Well, anyway they seem to say that the latest svn version handles it. Good news.

Oh, by the way I am about write a ticket so that `sage -i <experimental_package>` shows the same warning we have when the package is a new-style package.

Nathann



---

archive/issue_comments_264657.json:
```json
{
    "body": "<a id='comment:11'></a>> Oh, by the way I am about write a ticket so that `sage -i <experimental_package>` shows the same warning we have when the package is a new-style package.\n\n\nDone at #18566\n\nNathann",
    "created_at": "2015-06-01T10:58:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18563",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18563#issuecomment-264657",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:11'></a>> Oh, by the way I am about write a ticket so that `sage -i <experimental_package>` shows the same warning we have when the package is a new-style package.


Done at #18566

Nathann



---

archive/issue_comments_264658.json:
```json
{
    "body": "<a id='comment:12'></a>Something else: I think we should invent a new category \"`alternative`\" for packages `python2`, `python3`, `gmp`, `mpir` which are essentially standard but shouldn't be installed at the same time. If you agree, I will create a new ticket for this.",
    "created_at": "2015-06-01T11:28:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18563",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18563#issuecomment-264658",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>Something else: I think we should invent a new category "`alternative`" for packages `python2`, `python3`, `gmp`, `mpir` which are essentially standard but shouldn't be installed at the same time. If you agree, I will create a new ticket for this.



---

archive/issue_comments_264659.json:
```json
{
    "body": "<a id='comment:13'></a>Aargh... I installed `compilerwrapper` on OS X and it totally broke everything. Another package to move to \"experimental\". Restarting after `make distclean`...",
    "created_at": "2015-06-01T11:32:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18563",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18563#issuecomment-264659",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>Aargh... I installed `compilerwrapper` on OS X and it totally broke everything. Another package to move to "experimental". Restarting after `make distclean`...



---

archive/issue_comments_264660.json:
```json
{
    "body": "<a id='comment:14'></a>> Something else: I think we should invent a new category \"`alternative`\" for packages `python2`, `python3`, `gmp`, `mpir` which are essentially standard but shouldn't be installed at the same time. If you agree, I will create a new ticket for this.\n\n\nI cannot say that I like this much. We already have base/standard/optional/experimental packages, old-style spkgs and new-style spkgs. What would be the advantage of alternative packages?\n\nNathann",
    "created_at": "2015-06-01T11:39:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18563",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18563#issuecomment-264660",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:14'></a>> Something else: I think we should invent a new category "`alternative`" for packages `python2`, `python3`, `gmp`, `mpir` which are essentially standard but shouldn't be installed at the same time. If you agree, I will create a new ticket for this.


I cannot say that I like this much. We already have base/standard/optional/experimental packages, old-style spkgs and new-style spkgs. What would be the advantage of alternative packages?

Nathann



---

archive/issue_comments_264661.json:
```json
{
    "body": "<a id='comment:15'></a>Replying to [comment:14 ncohen]:\n> What would be the advantage of alternative packages?\n\nI want to be able to install *all* optional packages without breaking anything.",
    "created_at": "2015-06-01T11:43:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18563",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18563#issuecomment-264661",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'></a>Replying to [comment:14 ncohen]:
> What would be the advantage of alternative packages?

I want to be able to install *all* optional packages without breaking anything.



---

archive/issue_comments_264662.json:
```json
{
    "body": "<a id='comment:16'></a>> I want to be able to install *all* optional packages without breaking anything.\n\n\nWhat about adding a couple of lines in their `spkg-install` script to detect when that happens?",
    "created_at": "2015-06-01T11:48:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18563",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18563#issuecomment-264662",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:16'></a>> I want to be able to install *all* optional packages without breaking anything.


What about adding a couple of lines in their `spkg-install` script to detect when that happens?



---

archive/issue_comments_264663.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-01T12:09:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18563",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18563#issuecomment-264663",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_264664.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-01T13:56:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18563",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18563#issuecomment-264664",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_264665.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n+Packages which are known to fail optional doctests or which do not install on all supported platforms should be \"experimental\", not \"optional\".\n \n+\\`arb\\` doesn't build on OS X, but there is already for that: #18560. So I'm not changing that here.\n \n Author: Jeroen Demeyer\n \n```\n",
    "created_at": "2015-06-01T15:57:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18563",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18563#issuecomment-264665",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,6 @@
+Packages which are known to fail optional doctests or which do not install on all supported platforms should be "experimental", not "optional".
 
+\`arb\` doesn't build on OS X, but there is already for that: #18560. So I'm not changing that here.
 
 Author: Jeroen Demeyer
 
```




---

archive/issue_comments_264666.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-06-02T06:05:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18563",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18563#issuecomment-264666",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_264667.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,20 @@\n+Packages which are known to fail optional doctests or which do not install on all supported platforms should be \"experimental\", not \"optional\".\n \n+Packages moved to experimental:\n+* \\`4ti2\\`: doesn't pass optional doctests\n+* \\`autotools\\`: breaks installation of Singular if \\`xz\\` is not installed\n+* \\`compilerwrapper\\`: totally breaks building Sage on OS X\n+* \\`fricas\\`: doesn't pass optional doctests\n+* \\`gap_packages\\`: doesn't pass optional doctests\n+* \\`latte_int\\`: doesn't pass optional doctests\n+* \\`topcom\\`: doesn't pass doctests, even breaks non-optional tests\n+* \\`valgrind\\`: doesn't build on OS X 10.10\n+\n+Other problematic packages, not changed here:\n+* \\`arb\\`: doesn't build on OS X: fixed by #18560\n+* \\`dot2tex\\`: see #18124\n+* \\`gdb\\`: does not work properly on OS X: live with it\n+* \\`tides\\`: see #18573\n \n Author: Jeroen Demeyer\n \n```\n",
    "created_at": "2015-06-02T06:05:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18563",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18563#issuecomment-264667",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,20 @@
+Packages which are known to fail optional doctests or which do not install on all supported platforms should be "experimental", not "optional".
 
+Packages moved to experimental:
+* \`4ti2\`: doesn't pass optional doctests
+* \`autotools\`: breaks installation of Singular if \`xz\` is not installed
+* \`compilerwrapper\`: totally breaks building Sage on OS X
+* \`fricas\`: doesn't pass optional doctests
+* \`gap_packages\`: doesn't pass optional doctests
+* \`latte_int\`: doesn't pass optional doctests
+* \`topcom\`: doesn't pass doctests, even breaks non-optional tests
+* \`valgrind\`: doesn't build on OS X 10.10
+
+Other problematic packages, not changed here:
+* \`arb\`: doesn't build on OS X: fixed by #18560
+* \`dot2tex\`: see #18124
+* \`gdb\`: does not work properly on OS X: live with it
+* \`tides\`: see #18573
 
 Author: Jeroen Demeyer
 
```




---

archive/issue_comments_264668.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-06-02T09:43:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18563",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18563#issuecomment-264668",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_264669.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-06-02T20:18:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18563",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18563#issuecomment-264669",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_052161.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-06-02T20:18:12Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18563",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18563#event-52161"
}
```
