# Issue 18533: Upgrade ccache and make it a new-style package

archive/issues_018296.json:
```json
{
    "assignees": [],
    "body": "**Upstream**: [http://samba.org/ftp/ccache/ccache-3.2.2.tar.bz2](http://samba.org/ftp/ccache/ccache-3.2.2.tar.bz2)\n\n**Branch:** [d2d009fbad12994f0f95a93a915b1d2481f688be](https://github.com/sagemath/sagetrac-mirror/commit/d2d009fbad12994f0f95a93a915b1d2481f688be)\n\n**Reviewer:** Fr\u00e9d\u00e9ric Chapoton\n\n**Author:** Jeroen Demeyer\n\nIssue created by migration from https://trac.sagemath.org/ticket/18533\n\n",
    "closed_at": "2015-06-13T22:09:20Z",
    "created_at": "2015-05-28T07:12:01Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20optional",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade ccache and make it a new-style package",
    "type": "issue",
    "updated_at": "2015-06-18T07:51:33Z",
    "url": "https://github.com/sagemath/sage/issues/18533",
    "user": "https://github.com/jdemeyer"
}
```
**Upstream**: [http://samba.org/ftp/ccache/ccache-3.2.2.tar.bz2](http://samba.org/ftp/ccache/ccache-3.2.2.tar.bz2)

**Branch:** [d2d009fbad12994f0f95a93a915b1d2481f688be](https://github.com/sagemath/sagetrac-mirror/commit/d2d009fbad12994f0f95a93a915b1d2481f688be)

**Reviewer:** Frédéric Chapoton

**Author:** Jeroen Demeyer

Issue created by migration from https://trac.sagemath.org/ticket/18533





---

archive/issue_events_226606.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-05-28T07:12:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18533#event-226606"
}
```



---

archive/issue_events_226607.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-05-28T07:12:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20optional",
    "label_color": "08517b",
    "label_name": "component: packages: optional",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18533#event-226607"
}
```



---

archive/issue_events_226608.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-05-28T07:12:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "008080",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18533#event-226608"
}
```



---

archive/issue_events_226609.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-05-28T08:10:47Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "rename": {
        "from": "New-style package for ccache",
        "to": "Upgrade ccache and make it a new-style package"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18533#event-226609"
}
```



---

archive/issue_comments_259494.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+**Upstream**: [http://samba.org/ftp/ccache/ccache-3.2.2.tar.bz2](http://samba.org/ftp/ccache/ccache-3.2.2.tar.bz2)\n``````\n",
    "created_at": "2015-05-28T08:11:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18533#issuecomment-259494",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+**Upstream**: [http://samba.org/ftp/ccache/ccache-3.2.2.tar.bz2](http://samba.org/ftp/ccache/ccache-3.2.2.tar.bz2)
``````




---

archive/issue_comments_259495.json:
```json
{
    "body": "**Branch:** [u/jdemeyer/ticket/18533](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/18533)",
    "created_at": "2015-05-28T08:50:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18533#issuecomment-259495",
    "user": "https://github.com/jdemeyer"
}
```

**Branch:** [u/jdemeyer/ticket/18533](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/18533)



---

archive/issue_comments_259496.json:
```json
{
    "body": "**Commit:** [f37901542ceb45f34b81c069c6f27f471f9a0283](https://github.com/sagemath/sagetrac-mirror/commit/f37901542ceb45f34b81c069c6f27f471f9a0283)",
    "created_at": "2015-05-28T08:53:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18533#issuecomment-259496",
    "user": "https://github.com/jdemeyer"
}
```

**Commit:** [f37901542ceb45f34b81c069c6f27f471f9a0283](https://github.com/sagemath/sagetrac-mirror/commit/f37901542ceb45f34b81c069c6f27f471f9a0283)



---

archive/issue_comments_259497.json:
```json
{
    "body": "<a id='comment:4'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f37901542ceb45f34b81c069c6f27f471f9a0283\">f379015</a></td><td><code>Add ccache package</code></td></tr></table>\n",
    "created_at": "2015-05-28T08:53:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18533#issuecomment-259497",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f37901542ceb45f34b81c069c6f27f471f9a0283">f379015</a></td><td><code>Add ccache package</code></td></tr></table>




---

archive/issue_events_226610.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-05-28T08:53:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18533#event-226610"
}
```



---

archive/issue_comments_259498.json:
```json
{
    "body": "**Changing commit** from \"[f37901542ceb45f34b81c069c6f27f471f9a0283](https://github.com/sagemath/sagetrac-mirror/commit/f37901542ceb45f34b81c069c6f27f471f9a0283)\" to \"[d2d009fbad12994f0f95a93a915b1d2481f688be](https://github.com/sagemath/sagetrac-mirror/commit/d2d009fbad12994f0f95a93a915b1d2481f688be)\".",
    "created_at": "2015-06-06T08:30:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18533#issuecomment-259498",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[f37901542ceb45f34b81c069c6f27f471f9a0283](https://github.com/sagemath/sagetrac-mirror/commit/f37901542ceb45f34b81c069c6f27f471f9a0283)" to "[d2d009fbad12994f0f95a93a915b1d2481f688be](https://github.com/sagemath/sagetrac-mirror/commit/d2d009fbad12994f0f95a93a915b1d2481f688be)".



---

archive/issue_comments_259499.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d2d009fbad12994f0f95a93a915b1d2481f688be\">d2d009f</a></td><td><code>Add ccache package</code></td></tr></table>\n",
    "created_at": "2015-06-06T08:30:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18533#issuecomment-259499",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d2d009fbad12994f0f95a93a915b1d2481f688be">d2d009f</a></td><td><code>Add ccache package</code></td></tr></table>




---

archive/issue_comments_259500.json:
```json
{
    "body": "<a id='comment:6'></a>\nLooks good to me. I have installed, run the testsuite, and looked at the diff.\n\nShould I set a positive review, or do you hope for a more thorough discussion ?",
    "created_at": "2015-06-12T18:43:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18533#issuecomment-259500",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'></a>
Looks good to me. I have installed, run the testsuite, and looked at the diff.

Should I set a positive review, or do you hope for a more thorough discussion ?



---

archive/issue_comments_259501.json:
```json
{
    "body": "**Reviewer:** Fr\u00e9d\u00e9ric Chapoton",
    "created_at": "2015-06-12T19:45:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18533#issuecomment-259501",
    "user": "https://github.com/jdemeyer"
}
```

**Reviewer:** Frédéric Chapoton



---

archive/issue_events_226611.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-06-12T19:45:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18533#event-226611"
}
```



---

archive/issue_events_226612.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-06-12T19:45:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18533#event-226612"
}
```



---

archive/issue_comments_259502.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/ticket/18533](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/18533)\" to \"[d2d009fbad12994f0f95a93a915b1d2481f688be](https://github.com/sagemath/sagetrac-mirror/commit/d2d009fbad12994f0f95a93a915b1d2481f688be)\".",
    "created_at": "2015-06-13T22:09:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18533#issuecomment-259502",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/jdemeyer/ticket/18533](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/18533)" to "[d2d009fbad12994f0f95a93a915b1d2481f688be](https://github.com/sagemath/sagetrac-mirror/commit/d2d009fbad12994f0f95a93a915b1d2481f688be)".



---

archive/issue_events_226613.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-06-13T22:09:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18533#event-226613"
}
```



---

archive/issue_events_226614.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "da3f44feb3ff2765292944e37f28b04d47b24330",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-06-13T22:09:20Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18533#event-226614"
}
```



---

archive/issue_comments_259503.json:
```json
{
    "body": "**Changing commit** from \"[d2d009fbad12994f0f95a93a915b1d2481f688be](https://github.com/sagemath/sagetrac-mirror/commit/d2d009fbad12994f0f95a93a915b1d2481f688be)\" to \"\".",
    "created_at": "2015-06-17T21:03:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18533#issuecomment-259503",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing commit** from "[d2d009fbad12994f0f95a93a915b1d2481f688be](https://github.com/sagemath/sagetrac-mirror/commit/d2d009fbad12994f0f95a93a915b1d2481f688be)" to "".



---

archive/issue_comments_259504.json:
```json
{
    "body": "<a id='comment:9'></a>\nI'm not sure where to post this, but note that if the tar file fails to download, the log file is not formatted correctly, so Sage doesn't report which package failed to build. From the end of `install.log`:\n\n```\nError building Sage.\n\nThe following package(s) may have failed to build:\n\nThe build directory may contain configuration files and other potentially\nhelpful information. WARNING: if you now run 'make' again, the build\ndirectory will, by default, be deleted. Set the environment variable\nSAGE_KEEP_BUILT_SPKGS to 'yes' to prevent this.\n```\nFrom the end of `ccache-3.2.2.log`:\n\n```\n[xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]\n[Errno 404] Not Found: '//sagepad.org/spkg/upstream/ccache/ccache-3.2.2.tar.bz2'\nTraceback (most recent call last):\n  File \"/Users/palmieri/Desktop/Sage_stuff/git/sage/src/bin/sage-download-file\", line 457, in <module>\n    tarball.download()\n  File \"/Users/palmieri/Desktop/Sage_stuff/git/sage/src/bin/sage-download-file\", line 402, in download\n    raise FileNotMirroredError('tarball does not exist on mirror')\n__main__.FileNotMirroredError: tarball does not exist on mirror\n```\nThis is presumably not specific to ccache. Does it belong on a brand-new ticket, or  #18710, or somewhere else?",
    "created_at": "2015-06-17T21:03:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18533#issuecomment-259504",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:9'></a>
I'm not sure where to post this, but note that if the tar file fails to download, the log file is not formatted correctly, so Sage doesn't report which package failed to build. From the end of `install.log`:

```
Error building Sage.

The following package(s) may have failed to build:

The build directory may contain configuration files and other potentially
helpful information. WARNING: if you now run 'make' again, the build
directory will, by default, be deleted. Set the environment variable
SAGE_KEEP_BUILT_SPKGS to 'yes' to prevent this.
```
From the end of `ccache-3.2.2.log`:

```
[xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
[Errno 404] Not Found: '//sagepad.org/spkg/upstream/ccache/ccache-3.2.2.tar.bz2'
Traceback (most recent call last):
  File "/Users/palmieri/Desktop/Sage_stuff/git/sage/src/bin/sage-download-file", line 457, in <module>
    tarball.download()
  File "/Users/palmieri/Desktop/Sage_stuff/git/sage/src/bin/sage-download-file", line 402, in download
    raise FileNotMirroredError('tarball does not exist on mirror')
__main__.FileNotMirroredError: tarball does not exist on mirror
```
This is presumably not specific to ccache. Does it belong on a brand-new ticket, or  #18710, or somewhere else?



---

archive/issue_comments_259505.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [@jhpalmieri](#comment%3A9):\n> Does it belong on a brand-new ticket\n\nYes please (very similar to #16774 actually)",
    "created_at": "2015-06-18T07:51:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18533#issuecomment-259505",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>
Replying to [@jhpalmieri](#comment%3A9):
> Does it belong on a brand-new ticket

Yes please (very similar to #16774 actually)
