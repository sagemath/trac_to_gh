# Issue 18533: Upgrade ccache and make it a new-style package

archive/issues_018296.json:
```json
{
    "assignees": [],
    "body": "**Upstream**: [http://samba.org/ftp/ccache/ccache-3.2.2.tar.bz2](http://samba.org/ftp/ccache/ccache-3.2.2.tar.bz2)\n\nComponent: **packages: optional**\n\nAuthor: **Jeroen Demeyer**\n\nBranch: **[`d2d009f`](https://github.com/sagemath/sagetrac-mirror/commit/d2d009fbad12994f0f95a93a915b1d2481f688be)**\n\nReviewer: **Fr\u00e9d\u00e9ric Chapoton**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/18533_\n\n",
    "closed_at": "2015-06-13T22:09:20Z",
    "created_at": "2015-05-28T07:12:01Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20optional",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade ccache and make it a new-style package",
    "type": "issue",
    "updated_at": "2015-06-18T07:51:33Z",
    "url": "https://github.com/sagemath/sage/issues/18533",
    "user": "https://github.com/jdemeyer"
}
```
**Upstream**: [http://samba.org/ftp/ccache/ccache-3.2.2.tar.bz2](http://samba.org/ftp/ccache/ccache-3.2.2.tar.bz2)

Component: **packages: optional**

Author: **Jeroen Demeyer**

Branch: **[`d2d009f`](https://github.com/sagemath/sagetrac-mirror/commit/d2d009fbad12994f0f95a93a915b1d2481f688be)**

Reviewer: **Frédéric Chapoton**

_Issue created by migration from https://trac.sagemath.org/ticket/18533_





---

archive/issue_events_261003.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-05-28T07:12:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18533#event-261003"
}
```



---

archive/issue_events_261004.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-05-28T07:12:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20optional",
    "label_color": "0000b0",
    "label_name": "c: packages: optional",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18533#event-261004"
}
```



---

archive/issue_events_261005.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-05-28T07:12:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18533#event-261005"
}
```



---

archive/issue_events_261006.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-05-28T07:12:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18533#event-261006"
}
```



---

archive/issue_events_261007.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-05-28T08:10:47Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "title_is": "Upgrade ccache and make it a new-style package",
    "title_was": "New-style package for ccache",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18533#event-261007"
}
```



---

archive/issue_comments_256964.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+**Upstream**: [http://samba.org/ftp/ccache/ccache-3.2.2.tar.bz2](http://samba.org/ftp/ccache/ccache-3.2.2.tar.bz2)\n``````\n",
    "created_at": "2015-05-28T08:11:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18533#issuecomment-256964",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+**Upstream**: [http://samba.org/ftp/ccache/ccache-3.2.2.tar.bz2](http://samba.org/ftp/ccache/ccache-3.2.2.tar.bz2)
``````




---

archive/issue_comments_256965.json:
```json
{
    "body": "Branch: **[u/jdemeyer/ticket/18533](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/18533)**",
    "created_at": "2015-05-28T08:50:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18533#issuecomment-256965",
    "user": "https://github.com/jdemeyer"
}
```

Branch: **[u/jdemeyer/ticket/18533](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/18533)**



---

archive/issue_comments_256966.json:
```json
{
    "body": "Commit: **[`f379015`](https://github.com/sagemath/sagetrac-mirror/commit/f37901542ceb45f34b81c069c6f27f471f9a0283)**",
    "created_at": "2015-05-28T08:53:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18533#issuecomment-256966",
    "user": "https://github.com/jdemeyer"
}
```

Commit: **[`f379015`](https://github.com/sagemath/sagetrac-mirror/commit/f37901542ceb45f34b81c069c6f27f471f9a0283)**



---

archive/issue_comments_256967.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f37901542ceb45f34b81c069c6f27f471f9a0283\"><code>f379015</code></a></td><td><code>Add ccache package</code></td></tr></table>\n",
    "created_at": "2015-05-28T08:53:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18533#issuecomment-256967",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:4"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f37901542ceb45f34b81c069c6f27f471f9a0283"><code>f379015</code></a></td><td><code>Add ccache package</code></td></tr></table>




---

archive/issue_events_261008.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-05-28T08:53:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18533#event-261008"
}
```



---

archive/issue_comments_256968.json:
```json
{
    "body": "Changed commit from **[`f379015`](https://github.com/sagemath/sagetrac-mirror/commit/f37901542ceb45f34b81c069c6f27f471f9a0283)** to **[`d2d009f`](https://github.com/sagemath/sagetrac-mirror/commit/d2d009fbad12994f0f95a93a915b1d2481f688be)**",
    "created_at": "2015-06-06T08:30:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18533#issuecomment-256968",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f379015`](https://github.com/sagemath/sagetrac-mirror/commit/f37901542ceb45f34b81c069c6f27f471f9a0283)** to **[`d2d009f`](https://github.com/sagemath/sagetrac-mirror/commit/d2d009fbad12994f0f95a93a915b1d2481f688be)**



---

archive/issue_comments_256969.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d2d009fbad12994f0f95a93a915b1d2481f688be\"><code>d2d009f</code></a></td><td><code>Add ccache package</code></td></tr></table>\n",
    "created_at": "2015-06-06T08:30:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18533#issuecomment-256969",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d2d009fbad12994f0f95a93a915b1d2481f688be"><code>d2d009f</code></a></td><td><code>Add ccache package</code></td></tr></table>




---

archive/issue_comments_256970.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nLooks good to me. I have installed, run the testsuite, and looked at the diff.\n\nShould I set a positive review, or do you hope for a more thorough discussion ?",
    "created_at": "2015-06-12T18:43:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18533#issuecomment-256970",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:6" align="right">comment:6</div>

Looks good to me. I have installed, run the testsuite, and looked at the diff.

Should I set a positive review, or do you hope for a more thorough discussion ?



---

archive/issue_comments_256971.json:
```json
{
    "body": "Reviewer: **Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2015-06-12T19:45:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18533#issuecomment-256971",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Frédéric Chapoton**



---

archive/issue_events_261009.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-06-12T19:45:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18533#event-261009"
}
```



---

archive/issue_events_261010.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-06-12T19:45:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18533#event-261010"
}
```



---

archive/issue_comments_256972.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/ticket/18533](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/18533)** to **[`d2d009f`](https://github.com/sagemath/sagetrac-mirror/commit/d2d009fbad12994f0f95a93a915b1d2481f688be)**",
    "created_at": "2015-06-13T22:09:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18533#issuecomment-256972",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/ticket/18533](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/18533)** to **[`d2d009f`](https://github.com/sagemath/sagetrac-mirror/commit/d2d009fbad12994f0f95a93a915b1d2481f688be)**



---

archive/issue_events_261011.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-06-13T22:09:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18533#event-261011"
}
```



---

archive/issue_events_261012.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "da3f44feb3ff2765292944e37f28b04d47b24330",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-06-13T22:09:20Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18533#event-261012"
}
```



---

archive/issue_comments_256973.json:
```json
{
    "body": "Changed commit from **[`d2d009f`](https://github.com/sagemath/sagetrac-mirror/commit/d2d009fbad12994f0f95a93a915b1d2481f688be)** to none",
    "created_at": "2015-06-17T21:03:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18533#issuecomment-256973",
    "user": "https://github.com/jhpalmieri"
}
```

Changed commit from **[`d2d009f`](https://github.com/sagemath/sagetrac-mirror/commit/d2d009fbad12994f0f95a93a915b1d2481f688be)** to none



---

archive/issue_comments_256974.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI'm not sure where to post this, but note that if the tar file fails to download, the log file is not formatted correctly, so Sage doesn't report which package failed to build. From the end of `install.log`:\n\n```\nError building Sage.\n\nThe following package(s) may have failed to build:\n\nThe build directory may contain configuration files and other potentially\nhelpful information. WARNING: if you now run 'make' again, the build\ndirectory will, by default, be deleted. Set the environment variable\nSAGE_KEEP_BUILT_SPKGS to 'yes' to prevent this.\n```\nFrom the end of `ccache-3.2.2.log`:\n\n```\n[xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]\n[Errno 404] Not Found: '//sagepad.org/spkg/upstream/ccache/ccache-3.2.2.tar.bz2'\nTraceback (most recent call last):\n  File \"/Users/palmieri/Desktop/Sage_stuff/git/sage/src/bin/sage-download-file\", line 457, in <module>\n    tarball.download()\n  File \"/Users/palmieri/Desktop/Sage_stuff/git/sage/src/bin/sage-download-file\", line 402, in download\n    raise FileNotMirroredError('tarball does not exist on mirror')\n__main__.FileNotMirroredError: tarball does not exist on mirror\n```\nThis is presumably not specific to ccache. Does it belong on a brand-new ticket, or  #18710, or somewhere else?",
    "created_at": "2015-06-17T21:03:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18533#issuecomment-256974",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:9" align="right">comment:9</div>

I'm not sure where to post this, but note that if the tar file fails to download, the log file is not formatted correctly, so Sage doesn't report which package failed to build. From the end of `install.log`:

```
Error building Sage.

The following package(s) may have failed to build:

The build directory may contain configuration files and other potentially
helpful information. WARNING: if you now run 'make' again, the build
directory will, by default, be deleted. Set the environment variable
SAGE_KEEP_BUILT_SPKGS to 'yes' to prevent this.
```
From the end of `ccache-3.2.2.log`:

```
[xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
[Errno 404] Not Found: '//sagepad.org/spkg/upstream/ccache/ccache-3.2.2.tar.bz2'
Traceback (most recent call last):
  File "/Users/palmieri/Desktop/Sage_stuff/git/sage/src/bin/sage-download-file", line 457, in <module>
    tarball.download()
  File "/Users/palmieri/Desktop/Sage_stuff/git/sage/src/bin/sage-download-file", line 402, in download
    raise FileNotMirroredError('tarball does not exist on mirror')
__main__.FileNotMirroredError: tarball does not exist on mirror
```
This is presumably not specific to ccache. Does it belong on a brand-new ticket, or  #18710, or somewhere else?



---

archive/issue_comments_256975.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@jhpalmieri](#comment%3A9):\n> Does it belong on a brand-new ticket\n\nYes please (very similar to #16774 actually)",
    "created_at": "2015-06-18T07:51:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18533#issuecomment-256975",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@jhpalmieri](#comment%3A9):
> Does it belong on a brand-new ticket

Yes please (very similar to #16774 actually)
