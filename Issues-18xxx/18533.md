# Issue 18533: Upgrade ccache and make it a new-style package

archive/issues_018296.json:
```json
{
    "body": "**Upstream**: [http://samba.org/ftp/ccache/ccache-3.2.2.tar.bz2](http://samba.org/ftp/ccache/ccache-3.2.2.tar.bz2)\n\nReviewer: Fr\u00e9d\u00e9ric Chapoton\n\nAuthor: Jeroen Demeyer\n\nBranch: d2d009fbad12994f0f95a93a915b1d2481f688be\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/18533\n\n",
    "closed_at": "2015-06-13T22:09:20Z",
    "created_at": "2015-05-28T07:12:01Z",
    "labels": [
        "component: packages: optional"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.8",
    "title": "Upgrade ccache and make it a new-style package",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18533",
    "user": "https://github.com/jdemeyer"
}
```
**Upstream**: [http://samba.org/ftp/ccache/ccache-3.2.2.tar.bz2](http://samba.org/ftp/ccache/ccache-3.2.2.tar.bz2)

Reviewer: Frédéric Chapoton

Author: Jeroen Demeyer

Branch: d2d009fbad12994f0f95a93a915b1d2481f688be

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/18533





---

archive/issue_comments_263877.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-\n+**Upstream**: [http://samba.org/ftp/ccache/ccache-3.2.2.tar.bz2](http://samba.org/ftp/ccache/ccache-3.2.2.tar.bz2)\n \n Author: Jeroen Demeyer\n \n``````\n",
    "created_at": "2015-05-28T08:11:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18533#issuecomment-263877",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-
+**Upstream**: [http://samba.org/ftp/ccache/ccache-3.2.2.tar.bz2](http://samba.org/ftp/ccache/ccache-3.2.2.tar.bz2)
 
 Author: Jeroen Demeyer
 
``````




---

archive/issue_comments_263878.json:
```json
{
    "body": "<a id='comment:4'></a>New commits:",
    "created_at": "2015-05-28T08:53:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18533#issuecomment-263878",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>New commits:



---

archive/issue_comments_263879.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-05-28T08:53:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18533#issuecomment-263879",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_263880.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-06-06T08:30:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18533#issuecomment-263880",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_263881.json:
```json
{
    "body": "<a id='comment:6'></a>Looks good to me. I have installed, run the testsuite, and looked at the diff.\n\nShould I set a positive review, or do you hope for a more thorough discussion ?",
    "created_at": "2015-06-12T18:43:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18533#issuecomment-263881",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'></a>Looks good to me. I have installed, run the testsuite, and looked at the diff.

Should I set a positive review, or do you hope for a more thorough discussion ?



---

archive/issue_comments_263882.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-06-12T19:45:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18533#issuecomment-263882",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_263883.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-06-13T22:09:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18533#issuecomment-263883",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_052110.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-06-13T22:09:20Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18533",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18533#event-52110"
}
```



---

archive/issue_comments_263884.json:
```json
{
    "body": "<a id='comment:9'></a>I'm not sure where to post this, but note that if the tar file fails to download, the log file is not formatted correctly, so Sage doesn't report which package failed to build. From the end of `install.log`:\n\n```\nError building Sage.\n\nThe following package(s) may have failed to build:\n\nThe build directory may contain configuration files and other potentially\nhelpful information. WARNING: if you now run 'make' again, the build\ndirectory will, by default, be deleted. Set the environment variable\nSAGE_KEEP_BUILT_SPKGS to 'yes' to prevent this.\n```\nFrom the end of `ccache-3.2.2.log`:\n\n```\n[xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]\n[Errno 404] Not Found: '//sagepad.org/spkg/upstream/ccache/ccache-3.2.2.tar.bz2'\nTraceback (most recent call last):\n  File \"/Users/palmieri/Desktop/Sage_stuff/git/sage/src/bin/sage-download-file\", line 457, in <module>\n    tarball.download()\n  File \"/Users/palmieri/Desktop/Sage_stuff/git/sage/src/bin/sage-download-file\", line 402, in download\n    raise FileNotMirroredError('tarball does not exist on mirror')\n__main__.FileNotMirroredError: tarball does not exist on mirror\n```\nThis is presumably not specific to ccache. Does it belong on a brand-new ticket, or  #18710, or somewhere else?",
    "created_at": "2015-06-17T21:03:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18533#issuecomment-263884",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:9'></a>I'm not sure where to post this, but note that if the tar file fails to download, the log file is not formatted correctly, so Sage doesn't report which package failed to build. From the end of `install.log`:

```
Error building Sage.

The following package(s) may have failed to build:

The build directory may contain configuration files and other potentially
helpful information. WARNING: if you now run 'make' again, the build
directory will, by default, be deleted. Set the environment variable
SAGE_KEEP_BUILT_SPKGS to 'yes' to prevent this.
```
From the end of `ccache-3.2.2.log`:

```
[xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
[Errno 404] Not Found: '//sagepad.org/spkg/upstream/ccache/ccache-3.2.2.tar.bz2'
Traceback (most recent call last):
  File "/Users/palmieri/Desktop/Sage_stuff/git/sage/src/bin/sage-download-file", line 457, in <module>
    tarball.download()
  File "/Users/palmieri/Desktop/Sage_stuff/git/sage/src/bin/sage-download-file", line 402, in download
    raise FileNotMirroredError('tarball does not exist on mirror')
__main__.FileNotMirroredError: tarball does not exist on mirror
```
This is presumably not specific to ccache. Does it belong on a brand-new ticket, or  #18710, or somewhere else?



---

archive/issue_comments_263885.json:
```json
{
    "body": "<a id='comment:10'></a>Replying to [comment:9 jhpalmieri]:\n> Does it belong on a brand-new ticket\n\nYes please (very similar to #16774 actually)",
    "created_at": "2015-06-18T07:51:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18533#issuecomment-263885",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>Replying to [comment:9 jhpalmieri]:
> Does it belong on a brand-new ticket

Yes please (very similar to #16774 actually)
