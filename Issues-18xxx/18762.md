# Issue 18762: Create coercion between diagram algebras and the symmetric group algebra

archive/issues_018525.json:
```json
{
    "body": "There is a natural embedding of elements of the symmetric group algebra into diagram algebras, especially the partition algebra and the Brauer algebra. Therefore, there should be a morphism registered to the coercion model to allow for symmetric group algebra elements to be coerced into the appropriate diagram algebras. This morphism is pretty straight forward and will only take a few lines to implement. \n\n**CC:**  @alauve @srdoty @saliola @tscrim\n\n**Keywords:** diagram algebra, partition algebra, days65\n\n**Branch/Commit:** [14f80d3624d95079c896cb5efe8f29988834e1ac](https://github.com/sagemath/sagetrac-mirror/commit/14f80d3624d95079c896cb5efe8f29988834e1ac)\n\n**Reviewer:** Travis Scrimshaw\n\n**Author:** George H. Seelinger\n\n**Dependencies:** #18720\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/18762\n\n",
    "closed_at": "2015-10-12T22:53:02Z",
    "created_at": "2015-06-22T19:29:29Z",
    "labels": [
        "component: algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.10",
    "title": "Create coercion between diagram algebras and the symmetric group algebra",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18762",
    "user": "https://github.com/ghseeli"
}
```
There is a natural embedding of elements of the symmetric group algebra into diagram algebras, especially the partition algebra and the Brauer algebra. Therefore, there should be a morphism registered to the coercion model to allow for symmetric group algebra elements to be coerced into the appropriate diagram algebras. This morphism is pretty straight forward and will only take a few lines to implement. 

**CC:**  @alauve @srdoty @saliola @tscrim

**Keywords:** diagram algebra, partition algebra, days65

**Branch/Commit:** [14f80d3624d95079c896cb5efe8f29988834e1ac](https://github.com/sagemath/sagetrac-mirror/commit/14f80d3624d95079c896cb5efe8f29988834e1ac)

**Reviewer:** Travis Scrimshaw

**Author:** George H. Seelinger

**Dependencies:** #18720

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/18762





---

archive/issue_comments_334459.json:
```json
{
    "body": "**Branch:** [u/ghseeli/create_coercion_between_diagram_algebras_and_the_symmetric_group_algebra](https://github.com/sagemath/sagetrac-mirror/tree/u/ghseeli/create_coercion_between_diagram_algebras_and_the_symmetric_group_algebra)",
    "created_at": "2015-06-23T00:25:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334459",
    "user": "https://github.com/ghseeli"
}
```

**Branch:** [u/ghseeli/create_coercion_between_diagram_algebras_and_the_symmetric_group_algebra](https://github.com/sagemath/sagetrac-mirror/tree/u/ghseeli/create_coercion_between_diagram_algebras_and_the_symmetric_group_algebra)



---

archive/issue_comments_334460.json:
```json
{
    "body": "**Commit:** [28ee71f199a7162aa57408864e451f8a3477fcbf](https://github.com/sagemath/sagetrac-mirror/commit/28ee71f199a7162aa57408864e451f8a3477fcbf)",
    "created_at": "2015-06-23T00:27:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334460",
    "user": "https://github.com/ghseeli"
}
```

**Commit:** [28ee71f199a7162aa57408864e451f8a3477fcbf](https://github.com/sagemath/sagetrac-mirror/commit/28ee71f199a7162aa57408864e451f8a3477fcbf)



---

archive/issue_comments_334461.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a471981e8adaf66bf6c10685db0058f48a96577\">3a47198</a></td><td><code>created a BrauerDiagram class with specific BrauerDiagram methods.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/496382a775e4181931b2b56e56d44a5756ffd472\">496382a</a></td><td><code>added long time to long doc tests and other minor documentation changes.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6ba06059713e0b1d1a5d0485d0f8b442cc8e66c7\">6ba0605</a></td><td><code>added compact representation for BrauerDiagrams. While this idea can probably be extended to some sub-algebras of the Brauer algebra, this form is based off of Graham--Lehr's bipartition triple form (see the documentation for bipartition_triple in class:BrauerDiagram) which is defined for Brauer algebras.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/37fa5e06a056dc6ea747534d329312c5db649f2e\">37fa5e0</a></td><td><code>added documentation for Brauer diagram compact_repr</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/af7f86ce1a0d53a5c90a855c16e1b04b084d8400\">af7f86c</a></td><td><code>Merge branch 't/18720/change_diagram_algebra_basis_set_partitions_from_list_to_generator' into t/18762/create_coercion_between_diagram_algebras_and_the_symmetric_group_algebra</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/52d11e500036f996dd4e2440eca89cbbb7e214f2\">52d11e5</a></td><td><code>Added morphism to SymmetricGroupAlgebra to DiagramAlgebra and registered it as coercion</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/08a04a7de398221e0af2d726b71c29dabb01530a\">08a04a7</a></td><td><code>Merge branch 'develop' into t/18720/change_diagram_algebra_basis_set_partitions_from_list_to_generator</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/35b76635aba7c929de272e75c7c7d5f22e602d72\">35b7663</a></td><td><code>Merge branch 't/18720/change_diagram_algebra_basis_set_partitions_from_list_to_generator' into t/18762/create_coercion_between_diagram_algebras_and_the_symmetric_group_algebra</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/169e666878335aebe8fec04618851d7f76d71124\">169e666</a></td><td><code>added missing import statement to diagram algebras file</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/28ee71f199a7162aa57408864e451f8a3477fcbf\">28ee71f</a></td><td><code>fixed the order of commands and import statements</code></td></tr></table>\n",
    "created_at": "2015-06-23T00:27:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334461",
    "user": "https://github.com/ghseeli"
}
```

<a id='comment:2'></a>
**Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a471981e8adaf66bf6c10685db0058f48a96577">3a47198</a></td><td><code>created a BrauerDiagram class with specific BrauerDiagram methods.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/496382a775e4181931b2b56e56d44a5756ffd472">496382a</a></td><td><code>added long time to long doc tests and other minor documentation changes.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6ba06059713e0b1d1a5d0485d0f8b442cc8e66c7">6ba0605</a></td><td><code>added compact representation for BrauerDiagrams. While this idea can probably be extended to some sub-algebras of the Brauer algebra, this form is based off of Graham--Lehr's bipartition triple form (see the documentation for bipartition_triple in class:BrauerDiagram) which is defined for Brauer algebras.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/37fa5e06a056dc6ea747534d329312c5db649f2e">37fa5e0</a></td><td><code>added documentation for Brauer diagram compact_repr</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/af7f86ce1a0d53a5c90a855c16e1b04b084d8400">af7f86c</a></td><td><code>Merge branch 't/18720/change_diagram_algebra_basis_set_partitions_from_list_to_generator' into t/18762/create_coercion_between_diagram_algebras_and_the_symmetric_group_algebra</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/52d11e500036f996dd4e2440eca89cbbb7e214f2">52d11e5</a></td><td><code>Added morphism to SymmetricGroupAlgebra to DiagramAlgebra and registered it as coercion</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/08a04a7de398221e0af2d726b71c29dabb01530a">08a04a7</a></td><td><code>Merge branch 'develop' into t/18720/change_diagram_algebra_basis_set_partitions_from_list_to_generator</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/35b76635aba7c929de272e75c7c7d5f22e602d72">35b7663</a></td><td><code>Merge branch 't/18720/change_diagram_algebra_basis_set_partitions_from_list_to_generator' into t/18762/create_coercion_between_diagram_algebras_and_the_symmetric_group_algebra</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/169e666878335aebe8fec04618851d7f76d71124">169e666</a></td><td><code>added missing import statement to diagram algebras file</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/28ee71f199a7162aa57408864e451f8a3477fcbf">28ee71f</a></td><td><code>fixed the order of commands and import statements</code></td></tr></table>




---

archive/issue_comments_334462.json:
```json
{
    "body": "<a id='comment:3'></a>\nAlright, so, the code at present does not work. For some reason, I get an MRO error when I try to initialize the SymmetricGroupAlgebra with the same base ring as the DiagramAlgebra. Does anyone have any suggestions about how to fix this?",
    "created_at": "2015-06-23T00:45:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334462",
    "user": "https://github.com/ghseeli"
}
```

<a id='comment:3'></a>
Alright, so, the code at present does not work. For some reason, I get an MRO error when I try to initialize the SymmetricGroupAlgebra with the same base ring as the DiagramAlgebra. Does anyone have any suggestions about how to fix this?



---

archive/issue_comments_334463.json:
```json
{
    "body": "**Changing commit** from \"[28ee71f199a7162aa57408864e451f8a3477fcbf](https://github.com/sagemath/sagetrac-mirror/commit/28ee71f199a7162aa57408864e451f8a3477fcbf)\" to \"[69bd5dbdd4cb11875dc5ab79cd3a8735633f3226](https://github.com/sagemath/sagetrac-mirror/commit/69bd5dbdd4cb11875dc5ab79cd3a8735633f3226)\".",
    "created_at": "2015-06-23T00:46:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334463",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[28ee71f199a7162aa57408864e451f8a3477fcbf](https://github.com/sagemath/sagetrac-mirror/commit/28ee71f199a7162aa57408864e451f8a3477fcbf)" to "[69bd5dbdd4cb11875dc5ab79cd3a8735633f3226](https://github.com/sagemath/sagetrac-mirror/commit/69bd5dbdd4cb11875dc5ab79cd3a8735633f3226)".



---

archive/issue_comments_334464.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/69bd5dbdd4cb11875dc5ab79cd3a8735633f3226\">69bd5db</a></td><td><code>changed the ring of the symmetric group algebra created for the morphism from sga to diagram algebra to be the base ring of the diagram algebra. However, this causes a type error with the MRO</code></td></tr></table>\n",
    "created_at": "2015-06-23T00:46:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334464",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/69bd5dbdd4cb11875dc5ab79cd3a8735633f3226">69bd5db</a></td><td><code>changed the ring of the symmetric group algebra created for the morphism from sga to diagram algebra to be the base ring of the diagram algebra. However, this causes a type error with the MRO</code></td></tr></table>




---

archive/issue_comments_334465.json:
```json
{
    "body": "<a id='comment:5'></a>\nAn MRO error is extremely strange. I will take a look at this as soon as I can.",
    "created_at": "2015-06-23T01:03:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334465",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'></a>
An MRO error is extremely strange. I will take a look at this as soon as I can.



---

archive/issue_comments_334466.json:
```json
{
    "body": "<a id='comment:6'></a>\nIs this a bug in the SymmetricGroupAlgebra?\n\n```\nsage: SymmetricGroupAlgebra(SR,3,category = FiniteDimensionalAlgebrasWithBasis(SR))\nTraceback\n...\nTypeError: Cannot create a consistent method resolution\norder (MRO) for bases MagmaticAlgebras.subcategory_class, UnitalAlgebras.WithBasis.subcategory_class, AdditiveMagmas.Algebras.subcategory_class\n```\nBut, in a completely new Sage session:\n\n```\nsage: SymmetricGroupAlgebra(SR,3)\nSymmetric group algebra of order 3 over Symbolic Ring\nsage: SymmetricGroupAlgebra(SR,3,category = FiniteDimensionalAlgebrasWithBasis(SR))\nSymmetric group algebra of order 3 over Symbolic Ring\n```\nI have no idea what could be going on here. Is it some clever caching that somehow makes things work? In any event, this is the cause of the issue, I think.\n\n(I tried this in sage6.8beta5)",
    "created_at": "2015-06-26T17:41:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334466",
    "user": "https://github.com/ghseeli"
}
```

<a id='comment:6'></a>
Is this a bug in the SymmetricGroupAlgebra?

```
sage: SymmetricGroupAlgebra(SR,3,category = FiniteDimensionalAlgebrasWithBasis(SR))
Traceback
...
TypeError: Cannot create a consistent method resolution
order (MRO) for bases MagmaticAlgebras.subcategory_class, UnitalAlgebras.WithBasis.subcategory_class, AdditiveMagmas.Algebras.subcategory_class
```
But, in a completely new Sage session:

```
sage: SymmetricGroupAlgebra(SR,3)
Symmetric group algebra of order 3 over Symbolic Ring
sage: SymmetricGroupAlgebra(SR,3,category = FiniteDimensionalAlgebrasWithBasis(SR))
Symmetric group algebra of order 3 over Symbolic Ring
```
I have no idea what could be going on here. Is it some clever caching that somehow makes things work? In any event, this is the cause of the issue, I think.

(I tried this in sage6.8beta5)



---

archive/issue_comments_334467.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d16a7f5087d26374c80b26d55dd608024ddd6bdb\">d16a7f5</a></td><td><code>tried moving SymmetricGroupAlgebra declaration in DiagramAlgebras init to no avail</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/22c7116a9e7355b0b351a9d7dd733e8423fcdcf2\">22c7116</a></td><td><code>temporary workaround for getting SymmetricGroupAlgebra initialized by initializing twice.</code></td></tr></table>\n",
    "created_at": "2015-06-26T17:53:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334467",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d16a7f5087d26374c80b26d55dd608024ddd6bdb">d16a7f5</a></td><td><code>tried moving SymmetricGroupAlgebra declaration in DiagramAlgebras init to no avail</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/22c7116a9e7355b0b351a9d7dd733e8423fcdcf2">22c7116</a></td><td><code>temporary workaround for getting SymmetricGroupAlgebra initialized by initializing twice.</code></td></tr></table>




---

archive/issue_comments_334468.json:
```json
{
    "body": "**Changing commit** from \"[69bd5dbdd4cb11875dc5ab79cd3a8735633f3226](https://github.com/sagemath/sagetrac-mirror/commit/69bd5dbdd4cb11875dc5ab79cd3a8735633f3226)\" to \"[22c7116a9e7355b0b351a9d7dd733e8423fcdcf2](https://github.com/sagemath/sagetrac-mirror/commit/22c7116a9e7355b0b351a9d7dd733e8423fcdcf2)\".",
    "created_at": "2015-06-26T17:53:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334468",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[69bd5dbdd4cb11875dc5ab79cd3a8735633f3226](https://github.com/sagemath/sagetrac-mirror/commit/69bd5dbdd4cb11875dc5ab79cd3a8735633f3226)" to "[22c7116a9e7355b0b351a9d7dd733e8423fcdcf2](https://github.com/sagemath/sagetrac-mirror/commit/22c7116a9e7355b0b351a9d7dd733e8423fcdcf2)".



---

archive/issue_comments_334469.json:
```json
{
    "body": "<a id='comment:8'></a>\nOh wow, that's very interesting behavior...However it is not quite proper input as the category of the Weyl group `W`. Yet it should behave correctly and consistently, or at least give a better error message.",
    "created_at": "2015-06-27T05:17:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334469",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>
Oh wow, that's very interesting behavior...However it is not quite proper input as the category of the Weyl group `W`. Yet it should behave correctly and consistently, or at least give a better error message.



---

archive/issue_comments_334470.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5b487615dcb0d78098ce7a0bea1cf7ef2bcf17f3\">5b48761</a></td><td><code>Merge branch 't/18720/change_diagram_algebra_basis_set_partitions_from_list_to_generator' into t/18762/create_coercion_between_diagram_algebras_and_the_symmetric_group_algebra</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cb070380d79d62bdd560ba7b0f14c3c86074e5bf\">cb07038</a></td><td><code>removed category declaration and unnecessary comment</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/145d421d36fcd09785be7b6d330b36430be5128f\">145d421</a></td><td><code>Merge branch 'develop' into t/18762/create_coercion_between_diagram_algebras_and_the_symmetric_group_algebra</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4af2b92083ab7fd6a4e64ce8fb8b27b98923e87c\">4af2b92</a></td><td><code>Merge branch 'develop' into t/18720/change_diagram_algebra_basis_set_partitions_from_list_to_generator</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8a8b0cf17d9aad3c67ecf6ad3aa56af398df2edb\">8a8b0cf</a></td><td><code>Changed all 'returns' in the documentation to 'return'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c97973a93bad3e73431bc9106a78dde651d08445\">c97973a</a></td><td><code>added more doctests to methods that did not have them</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0ca1903aedcbfba453ea8d73b253f3fcef15b162\">0ca1903</a></td><td><code>Added more doctests for cardinality and element_constructor methods</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6ba937927ac71ef799899c26c608e6c7d80b9b98\">6ba9379</a></td><td><code>added a few more doctests for a few methods I missed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6339baaa5ada0a46f51081ef343846ac7a92fe65\">6339baa</a></td><td><code>Merge branch 't/18720/change_diagram_algebra_basis_set_partitions_from_list_to_generator' into t/18762/create_coercion_between_diagram_algebras_and_the_symmetric_group_algebra</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e138144a3975a51a005f06df98c6ef1b0fad1753\">e138144</a></td><td><code>Added documentation and a doctest for coercion</code></td></tr></table>\n",
    "created_at": "2015-07-04T02:09:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334470",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5b487615dcb0d78098ce7a0bea1cf7ef2bcf17f3">5b48761</a></td><td><code>Merge branch 't/18720/change_diagram_algebra_basis_set_partitions_from_list_to_generator' into t/18762/create_coercion_between_diagram_algebras_and_the_symmetric_group_algebra</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cb070380d79d62bdd560ba7b0f14c3c86074e5bf">cb07038</a></td><td><code>removed category declaration and unnecessary comment</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/145d421d36fcd09785be7b6d330b36430be5128f">145d421</a></td><td><code>Merge branch 'develop' into t/18762/create_coercion_between_diagram_algebras_and_the_symmetric_group_algebra</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4af2b92083ab7fd6a4e64ce8fb8b27b98923e87c">4af2b92</a></td><td><code>Merge branch 'develop' into t/18720/change_diagram_algebra_basis_set_partitions_from_list_to_generator</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8a8b0cf17d9aad3c67ecf6ad3aa56af398df2edb">8a8b0cf</a></td><td><code>Changed all 'returns' in the documentation to 'return'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c97973a93bad3e73431bc9106a78dde651d08445">c97973a</a></td><td><code>added more doctests to methods that did not have them</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0ca1903aedcbfba453ea8d73b253f3fcef15b162">0ca1903</a></td><td><code>Added more doctests for cardinality and element_constructor methods</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6ba937927ac71ef799899c26c608e6c7d80b9b98">6ba9379</a></td><td><code>added a few more doctests for a few methods I missed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6339baaa5ada0a46f51081ef343846ac7a92fe65">6339baa</a></td><td><code>Merge branch 't/18720/change_diagram_algebra_basis_set_partitions_from_list_to_generator' into t/18762/create_coercion_between_diagram_algebras_and_the_symmetric_group_algebra</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e138144a3975a51a005f06df98c6ef1b0fad1753">e138144</a></td><td><code>Added documentation and a doctest for coercion</code></td></tr></table>




---

archive/issue_comments_334471.json:
```json
{
    "body": "**Changing commit** from \"[22c7116a9e7355b0b351a9d7dd733e8423fcdcf2](https://github.com/sagemath/sagetrac-mirror/commit/22c7116a9e7355b0b351a9d7dd733e8423fcdcf2)\" to \"[e138144a3975a51a005f06df98c6ef1b0fad1753](https://github.com/sagemath/sagetrac-mirror/commit/e138144a3975a51a005f06df98c6ef1b0fad1753)\".",
    "created_at": "2015-07-04T02:09:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334471",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[22c7116a9e7355b0b351a9d7dd733e8423fcdcf2](https://github.com/sagemath/sagetrac-mirror/commit/22c7116a9e7355b0b351a9d7dd733e8423fcdcf2)" to "[e138144a3975a51a005f06df98c6ef1b0fad1753](https://github.com/sagemath/sagetrac-mirror/commit/e138144a3975a51a005f06df98c6ef1b0fad1753)".



---

archive/issue_events_059701.json:
```json
{
    "actor": "https://github.com/ghseeli",
    "created_at": "2015-08-06T00:33:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "milestone": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18762#event-59701"
}
```



---

archive/issue_comments_334472.json:
```json
{
    "body": "**Changing commit** from \"[e138144a3975a51a005f06df98c6ef1b0fad1753](https://github.com/sagemath/sagetrac-mirror/commit/e138144a3975a51a005f06df98c6ef1b0fad1753)\" to \"[d4d3a091c747cf5ed31f02eb10d6f3298445aecd](https://github.com/sagemath/sagetrac-mirror/commit/d4d3a091c747cf5ed31f02eb10d6f3298445aecd)\".",
    "created_at": "2015-08-16T23:34:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334472",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[e138144a3975a51a005f06df98c6ef1b0fad1753](https://github.com/sagemath/sagetrac-mirror/commit/e138144a3975a51a005f06df98c6ef1b0fad1753)" to "[d4d3a091c747cf5ed31f02eb10d6f3298445aecd](https://github.com/sagemath/sagetrac-mirror/commit/d4d3a091c747cf5ed31f02eb10d6f3298445aecd)".



---

archive/issue_comments_334473.json:
```json
{
    "body": "<a id='comment:11'></a>\n**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3d59b52b8743c10b5ebd39de2a4692a72d8e7581\">3d59b52</a></td><td><code>fixed a few typos</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e66621fcc50175b120a3a006288347403ba1b615\">e66621f</a></td><td><code>Added attribution to authors in source</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4aab0caaa22c7c06d125719451be93d458e85dfb\">4aab0ca</a></td><td><code>changed major typo in AbstractDiagrams initializer</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/01c0c041b5739189f234fafaa707ab935ad97b9d\">01c0c04</a></td><td><code>Doing some cleanup and adding a global options.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d424bcf88796291b1a3d68a7545774b67ac00b70\">d424bcf</a></td><td><code>Merge branch 'u/ghseeli/diagram_algebra_improvements-18720' of trac.sagemath.org:sage into u/tscrim/diagram_algebra_improvements-18720</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/298ff6f130f9b4ee7e23ea941bfb7327ab93ee21\">298ff6f</a></td><td><code>Removing some unnecessary imports.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b15960d4c457abe287d1c2bf259a1e42d0ad997c\">b15960d</a></td><td><code>Fixed typo in documentation.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/489b1894c675f78564c427574043f33f1959f09f\">489b189</a></td><td><code>fixed a doctest that was oddly passing but should not have. See commit details</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/51e2984a134711655ef83e9f368c78f0214f4bfb\">51e2984</a></td><td><code>manual merge. I hope I got all the imports right</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4d3a091c747cf5ed31f02eb10d6f3298445aecd\">d4d3a09</a></td><td><code>accidentally deleted crucial statement for coercion. I have reinserted it.</code></td></tr></table>\n",
    "created_at": "2015-08-16T23:34:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334473",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3d59b52b8743c10b5ebd39de2a4692a72d8e7581">3d59b52</a></td><td><code>fixed a few typos</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e66621fcc50175b120a3a006288347403ba1b615">e66621f</a></td><td><code>Added attribution to authors in source</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4aab0caaa22c7c06d125719451be93d458e85dfb">4aab0ca</a></td><td><code>changed major typo in AbstractDiagrams initializer</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/01c0c041b5739189f234fafaa707ab935ad97b9d">01c0c04</a></td><td><code>Doing some cleanup and adding a global options.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d424bcf88796291b1a3d68a7545774b67ac00b70">d424bcf</a></td><td><code>Merge branch 'u/ghseeli/diagram_algebra_improvements-18720' of trac.sagemath.org:sage into u/tscrim/diagram_algebra_improvements-18720</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/298ff6f130f9b4ee7e23ea941bfb7327ab93ee21">298ff6f</a></td><td><code>Removing some unnecessary imports.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b15960d4c457abe287d1c2bf259a1e42d0ad997c">b15960d</a></td><td><code>Fixed typo in documentation.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/489b1894c675f78564c427574043f33f1959f09f">489b189</a></td><td><code>fixed a doctest that was oddly passing but should not have. See commit details</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/51e2984a134711655ef83e9f368c78f0214f4bfb">51e2984</a></td><td><code>manual merge. I hope I got all the imports right</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4d3a091c747cf5ed31f02eb10d6f3298445aecd">d4d3a09</a></td><td><code>accidentally deleted crucial statement for coercion. I have reinserted it.</code></td></tr></table>




---

archive/issue_comments_334474.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2015-08-16T23:34:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334474",
    "user": "https://github.com/ghseeli"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_334475.json:
```json
{
    "body": "<a id='comment:13'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c716ed1f04481f887151cee40dca441cecfc9daa\">c716ed1</a></td><td><code>Merge branch 'develop' into t/18720/change_diagram_algebra_basis_set_partitions_from_list_to_generator</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fa3f7926d3753a13f33200f22870507d870ff835\">fa3f792</a></td><td><code>Fixed doctest in sources.py.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/616b818be77e7a7b45763b1d71d64f950061c5c0\">616b818</a></td><td><code>Fixing the documentation and some code cleanup/python3 support.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7160ffe448356f9f22cd9ed57d1114d7059b1db1\">7160ffe</a></td><td><code>fixed merge conflicts</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2adcfeffa5d87f137ee9010fb69087a2b76e98a7\">2adcfef</a></td><td><code>oops! Didn't completely merge</code></td></tr></table>\n",
    "created_at": "2015-08-25T02:19:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334475",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c716ed1f04481f887151cee40dca441cecfc9daa">c716ed1</a></td><td><code>Merge branch 'develop' into t/18720/change_diagram_algebra_basis_set_partitions_from_list_to_generator</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fa3f7926d3753a13f33200f22870507d870ff835">fa3f792</a></td><td><code>Fixed doctest in sources.py.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/616b818be77e7a7b45763b1d71d64f950061c5c0">616b818</a></td><td><code>Fixing the documentation and some code cleanup/python3 support.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7160ffe448356f9f22cd9ed57d1114d7059b1db1">7160ffe</a></td><td><code>fixed merge conflicts</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2adcfeffa5d87f137ee9010fb69087a2b76e98a7">2adcfef</a></td><td><code>oops! Didn't completely merge</code></td></tr></table>




---

archive/issue_comments_334476.json:
```json
{
    "body": "**Changing commit** from \"[d4d3a091c747cf5ed31f02eb10d6f3298445aecd](https://github.com/sagemath/sagetrac-mirror/commit/d4d3a091c747cf5ed31f02eb10d6f3298445aecd)\" to \"[2adcfeffa5d87f137ee9010fb69087a2b76e98a7](https://github.com/sagemath/sagetrac-mirror/commit/2adcfeffa5d87f137ee9010fb69087a2b76e98a7)\".",
    "created_at": "2015-08-25T02:19:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334476",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d4d3a091c747cf5ed31f02eb10d6f3298445aecd](https://github.com/sagemath/sagetrac-mirror/commit/d4d3a091c747cf5ed31f02eb10d6f3298445aecd)" to "[2adcfeffa5d87f137ee9010fb69087a2b76e98a7](https://github.com/sagemath/sagetrac-mirror/commit/2adcfeffa5d87f137ee9010fb69087a2b76e98a7)".



---

archive/issue_comments_334477.json:
```json
{
    "body": "<a id='comment:14'></a>\nThis currently breaks the requirements of a coercion in that the coercion map must be defined on all elements of the domain. So it will need to be a conversion, which you can implement in the `_element_constructor_` method by\n\n```python\nif isinstance(x, SymmetricGroupAlgebra.Element) and other_conditions_on_parent(x):\n    return convert_to_element_of_self(x)\n```\nFor those diagram algebras which this is well-defined on the entire domain, you can make the call to ``self`` a coercion in the constructor or implement:\n\n```python\ndef _coerce_map_from_(self, P):\n    if isinstance(P, SymmetricGroupAlgebra) and other_conditions(P):\n        return True\n    return super(self, DiagramAlgebra)._coerce_map_from_(P)\n```",
    "created_at": "2015-08-28T22:50:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334477",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:14'></a>
This currently breaks the requirements of a coercion in that the coercion map must be defined on all elements of the domain. So it will need to be a conversion, which you can implement in the `_element_constructor_` method by

```python
if isinstance(x, SymmetricGroupAlgebra.Element) and other_conditions_on_parent(x):
    return convert_to_element_of_self(x)
```
For those diagram algebras which this is well-defined on the entire domain, you can make the call to ``self`` a coercion in the constructor or implement:

```python
def _coerce_map_from_(self, P):
    if isinstance(P, SymmetricGroupAlgebra) and other_conditions(P):
        return True
    return super(self, DiagramAlgebra)._coerce_map_from_(P)
```



---

archive/issue_comments_334478.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2015-09-19T03:24:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334478",
    "user": "https://github.com/videlec"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_334479.json:
```json
{
    "body": "<a id='comment:15'></a>\nHello,\n\nJust some sided remarks.\n\n- You have more commits than the number of lines you modified! Moreover most of your commit messages are completely useless. The git history is important since it is used to find out which commit is responsible for a given change. You would better start a new (clean) branch from scratch.\n- methods must be documented (see [the developer guide](http://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings))\n\nVincent",
    "created_at": "2015-09-19T03:24:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334479",
    "user": "https://github.com/videlec"
}
```

<a id='comment:15'></a>
Hello,

Just some sided remarks.

- You have more commits than the number of lines you modified! Moreover most of your commit messages are completely useless. The git history is important since it is used to find out which commit is responsible for a given change. You would better start a new (clean) branch from scratch.
- methods must be documented (see [the developer guide](http://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings))

Vincent



---

archive/issue_comments_334480.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [vdelecroix](#comment%3A15):\n> - You have more commits than the number of lines you modified! Moreover most of your commit messages are completely useless. The git history is important since it is used to find out which commit is responsible for a given change. You would better start a new (clean) branch from scratch.\n\n\nThis comment is completely off base. First, learn to use `git blame` and `git log filename` (or `git log -p filename`). Second, the commit messages tell about the changes (although there are some of them that are really long; git practices want the first lines to be short). You are being way too precious about the git history.",
    "created_at": "2015-09-19T14:35:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334480",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:16'></a>
Replying to [vdelecroix](#comment%3A15):
> - You have more commits than the number of lines you modified! Moreover most of your commit messages are completely useless. The git history is important since it is used to find out which commit is responsible for a given change. You would better start a new (clean) branch from scratch.


This comment is completely off base. First, learn to use `git blame` and `git log filename` (or `git log -p filename`). Second, the commit messages tell about the changes (although there are some of them that are really long; git practices want the first lines to be short). You are being way too precious about the git history.



---

archive/issue_comments_334481.json:
```json
{
    "body": "<a id='comment:17'></a>\nVincent,\n\nThank you for your feedback. I had intended to change the status from needs_review to needs_work when Travis made his comments 3 weeks ago, so I am sorry you felt compelled to review something that was already in need of a lot of work. I understand that methods must be documented and I will do so accordingly before there is a positive review. However, first, I needed to establish what is going on here, (see the earlier comments about weird coercion behavior) and that is still somewhat (?) in the air. I do agree that my git comments are rather terse, but at the same time, as you note, most of them are rather small and thus looking at the diff should be more than enough to get an idea of what is happening. Furthermore, as someone who develops software semi-professionally, it is not unusual that the number of commits exceeds the number of lines changed. Most software developers would say that the number of lines affected has little correlation with content. Finally, a lot of these commits are due to the age of the ticket. New versions of the beta need to be merged into the branch so that the feature doesn't depart from the current beta. I am sorry that my development cycle has been so slow that this has been necessary. I hope to finish this ticket soon. Thank you for your feedback and I hope you will be more satisfied with the end result when it goes back up for review.\n\nBest,\nGeorge",
    "created_at": "2015-09-22T02:31:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334481",
    "user": "https://github.com/ghseeli"
}
```

<a id='comment:17'></a>
Vincent,

Thank you for your feedback. I had intended to change the status from needs_review to needs_work when Travis made his comments 3 weeks ago, so I am sorry you felt compelled to review something that was already in need of a lot of work. I understand that methods must be documented and I will do so accordingly before there is a positive review. However, first, I needed to establish what is going on here, (see the earlier comments about weird coercion behavior) and that is still somewhat (?) in the air. I do agree that my git comments are rather terse, but at the same time, as you note, most of them are rather small and thus looking at the diff should be more than enough to get an idea of what is happening. Furthermore, as someone who develops software semi-professionally, it is not unusual that the number of commits exceeds the number of lines changed. Most software developers would say that the number of lines affected has little correlation with content. Finally, a lot of these commits are due to the age of the ticket. New versions of the beta need to be merged into the branch so that the feature doesn't depart from the current beta. I am sorry that my development cycle has been so slow that this has been necessary. I hope to finish this ticket soon. Thank you for your feedback and I hope you will be more satisfied with the end result when it goes back up for review.

Best,
George



---

archive/issue_comments_334482.json:
```json
{
    "body": "<a id='comment:18'></a>\nHello,\n\nReplying to [ghseeli](#comment%3A17):\n> Finally, a lot of these commits are due to the age of the ticket. New versions of the beta need to be merged into the branch so that the feature doesn't depart from the current beta.\n\n\nThere is no need to merge the last beta.\n\nBut anyway, the most important is to do how you feel. And take for the best other's comments to get a better Sage software.\n\nVincent",
    "created_at": "2015-09-22T10:57:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334482",
    "user": "https://github.com/videlec"
}
```

<a id='comment:18'></a>
Hello,

Replying to [ghseeli](#comment%3A17):
> Finally, a lot of these commits are due to the age of the ticket. New versions of the beta need to be merged into the branch so that the feature doesn't depart from the current beta.


There is no need to merge the last beta.

But anyway, the most important is to do how you feel. And take for the best other's comments to get a better Sage software.

Vincent



---

archive/issue_comments_334483.json:
```json
{
    "body": "<a id='comment:19'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/781c64386f4a5fb41f9ab0cf0b98c87233c3158e\">781c643</a></td><td><code>Merge branch 'develop' into t/18762/create_coercion_between_diagram_algebras_and_the_symmetric_group_algebra</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/888f1a20b70ad96a5e194f53e510d2dba008e01f\">888f1a2</a></td><td><code>Merge branch 'develop' into t/18762/create_coercion_between_diagram_algebras_and_the_symmetric_group_algebra</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6e7cb2173baacb6b5bbb8b29ec7cafb57c4ad6c7\">6e7cb21</a></td><td><code>Created conversions of SymmetricGroupAlgebra to DiagramAlgebras as well as appropriate coercions where it makes sense</code></td></tr></table>\n",
    "created_at": "2015-10-10T23:04:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334483",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/781c64386f4a5fb41f9ab0cf0b98c87233c3158e">781c643</a></td><td><code>Merge branch 'develop' into t/18762/create_coercion_between_diagram_algebras_and_the_symmetric_group_algebra</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/888f1a20b70ad96a5e194f53e510d2dba008e01f">888f1a2</a></td><td><code>Merge branch 'develop' into t/18762/create_coercion_between_diagram_algebras_and_the_symmetric_group_algebra</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6e7cb2173baacb6b5bbb8b29ec7cafb57c4ad6c7">6e7cb21</a></td><td><code>Created conversions of SymmetricGroupAlgebra to DiagramAlgebras as well as appropriate coercions where it makes sense</code></td></tr></table>




---

archive/issue_comments_334484.json:
```json
{
    "body": "**Changing commit** from \"[2adcfeffa5d87f137ee9010fb69087a2b76e98a7](https://github.com/sagemath/sagetrac-mirror/commit/2adcfeffa5d87f137ee9010fb69087a2b76e98a7)\" to \"[6e7cb2173baacb6b5bbb8b29ec7cafb57c4ad6c7](https://github.com/sagemath/sagetrac-mirror/commit/6e7cb2173baacb6b5bbb8b29ec7cafb57c4ad6c7)\".",
    "created_at": "2015-10-10T23:04:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334484",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[2adcfeffa5d87f137ee9010fb69087a2b76e98a7](https://github.com/sagemath/sagetrac-mirror/commit/2adcfeffa5d87f137ee9010fb69087a2b76e98a7)" to "[6e7cb2173baacb6b5bbb8b29ec7cafb57c4ad6c7](https://github.com/sagemath/sagetrac-mirror/commit/6e7cb2173baacb6b5bbb8b29ec7cafb57c4ad6c7)".



---

archive/issue_comments_334485.json:
```json
{
    "body": "<a id='comment:20'></a>\nAlright, I have now added conversions instead of coercions where appropriate. Furthermore, I have included some appropriate unit tests. I was wondering, should I also include some negative unit tests? As in, verify an error is raised when someone tries to instantiate an invalid algebra element using an inappropriate symmetric group algebra element?\n\nThank you!",
    "created_at": "2015-10-10T23:11:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334485",
    "user": "https://github.com/ghseeli"
}
```

<a id='comment:20'></a>
Alright, I have now added conversions instead of coercions where appropriate. Furthermore, I have included some appropriate unit tests. I was wondering, should I also include some negative unit tests? As in, verify an error is raised when someone tries to instantiate an invalid algebra element using an inappropriate symmetric group algebra element?

Thank you!



---

archive/issue_comments_334486.json:
```json
{
    "body": "<a id='comment:21'></a>\nYes, these are also useful to verify that you are checking things properly. Also you should make sure to test corner cases.",
    "created_at": "2015-10-10T23:51:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334486",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:21'></a>
Yes, these are also useful to verify that you are checking things properly. Also you should make sure to test corner cases.



---

archive/issue_comments_334487.json:
```json
{
    "body": "<a id='comment:22'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ea857ff335ac439123ef7b7891bdd8909e5c3fb4\">ea857ff</a></td><td><code>added more negative unit tests for conversion from symmetric group algebra to diagram algebra. One test does not pass</code></td></tr></table>\n",
    "created_at": "2015-10-11T00:11:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334487",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ea857ff335ac439123ef7b7891bdd8909e5c3fb4">ea857ff</a></td><td><code>added more negative unit tests for conversion from symmetric group algebra to diagram algebra. One test does not pass</code></td></tr></table>




---

archive/issue_comments_334488.json:
```json
{
    "body": "**Changing commit** from \"[6e7cb2173baacb6b5bbb8b29ec7cafb57c4ad6c7](https://github.com/sagemath/sagetrac-mirror/commit/6e7cb2173baacb6b5bbb8b29ec7cafb57c4ad6c7)\" to \"[ea857ff335ac439123ef7b7891bdd8909e5c3fb4](https://github.com/sagemath/sagetrac-mirror/commit/ea857ff335ac439123ef7b7891bdd8909e5c3fb4)\".",
    "created_at": "2015-10-11T00:11:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334488",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[6e7cb2173baacb6b5bbb8b29ec7cafb57c4ad6c7](https://github.com/sagemath/sagetrac-mirror/commit/6e7cb2173baacb6b5bbb8b29ec7cafb57c4ad6c7)" to "[ea857ff335ac439123ef7b7891bdd8909e5c3fb4](https://github.com/sagemath/sagetrac-mirror/commit/ea857ff335ac439123ef7b7891bdd8909e5c3fb4)".



---

archive/issue_comments_334489.json:
```json
{
    "body": "<a id='comment:23'></a>\nAlright, I added some negative unit tests. However, I am now having trouble getting the following test to pass:\n\n\n```\nsage: R.<x> = QQ[]\nsage: BA = BrauerAlgebra(2, x, R)\nsage: BA.ambient().has_coerce_map_from(BA)\nTrue\n```\n\nHowever, when I run these commands in Sage, the result comes out as expected. Any ideas on why this is happening?",
    "created_at": "2015-10-11T00:13:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334489",
    "user": "https://github.com/ghseeli"
}
```

<a id='comment:23'></a>
Alright, I added some negative unit tests. However, I am now having trouble getting the following test to pass:


```
sage: R.<x> = QQ[]
sage: BA = BrauerAlgebra(2, x, R)
sage: BA.ambient().has_coerce_map_from(BA)
True
```

However, when I run these commands in Sage, the result comes out as expected. Any ideas on why this is happening?



---

archive/issue_comments_334490.json:
```json
{
    "body": "<a id='comment:24'></a>\nMy guess is that we have the coercion situation `BA -> X -> A` where `X` is some intermediate object that makes the coercion chain. At some point in the doctests:\n\n1 - `BA` and `A` have been created, but `X` has not.\n2 - There is a check in some way for if there is a coercion from `BA` to `A`, which there is not. (This can be something as innocuous as `A(x)` where `x in BA`).\n3 - The result of 2 is cached, so even when `X` is created, there is no check to see if there is a coercion path from `BA` to `A`.\n\nHowever that is just a quick guess from the symptoms. I will take a more detailed look over the next few days.\n\nSide note in case you didn't notice, you have `TESTS:` block which should be `TESTS::`.",
    "created_at": "2015-10-11T03:47:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334490",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:24'></a>
My guess is that we have the coercion situation `BA -> X -> A` where `X` is some intermediate object that makes the coercion chain. At some point in the doctests:

1 - `BA` and `A` have been created, but `X` has not.
2 - There is a check in some way for if there is a coercion from `BA` to `A`, which there is not. (This can be something as innocuous as `A(x)` where `x in BA`).
3 - The result of 2 is cached, so even when `X` is created, there is no check to see if there is a coercion path from `BA` to `A`.

However that is just a quick guess from the symptoms. I will take a more detailed look over the next few days.

Side note in case you didn't notice, you have `TESTS:` block which should be `TESTS::`.



---

archive/issue_comments_334491.json:
```json
{
    "body": "<a id='comment:25'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a4c199d2842865c6385e6938b67974f39ebd8876\">a4c199d</a></td><td><code>added the necessary extra colon after tests</code></td></tr></table>\n",
    "created_at": "2015-10-11T17:01:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334491",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a4c199d2842865c6385e6938b67974f39ebd8876">a4c199d</a></td><td><code>added the necessary extra colon after tests</code></td></tr></table>




---

archive/issue_comments_334492.json:
```json
{
    "body": "**Changing commit** from \"[ea857ff335ac439123ef7b7891bdd8909e5c3fb4](https://github.com/sagemath/sagetrac-mirror/commit/ea857ff335ac439123ef7b7891bdd8909e5c3fb4)\" to \"[a4c199d2842865c6385e6938b67974f39ebd8876](https://github.com/sagemath/sagetrac-mirror/commit/a4c199d2842865c6385e6938b67974f39ebd8876)\".",
    "created_at": "2015-10-11T17:01:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334492",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ea857ff335ac439123ef7b7891bdd8909e5c3fb4](https://github.com/sagemath/sagetrac-mirror/commit/ea857ff335ac439123ef7b7891bdd8909e5c3fb4)" to "[a4c199d2842865c6385e6938b67974f39ebd8876](https://github.com/sagemath/sagetrac-mirror/commit/a4c199d2842865c6385e6938b67974f39ebd8876)".



---

archive/issue_comments_334493.json:
```json
{
    "body": "**Changing branch** from \"[u/ghseeli/create_coercion_between_diagram_algebras_and_the_symmetric_group_algebra](https://github.com/sagemath/sagetrac-mirror/tree/u/ghseeli/create_coercion_between_diagram_algebras_and_the_symmetric_group_algebra)\" to \"[u/tscrim/diagram_algebras_SGA-18762](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/diagram_algebras_SGA-18762)\".",
    "created_at": "2015-10-12T00:43:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334493",
    "user": "https://github.com/tscrim"
}
```

**Changing branch** from "[u/ghseeli/create_coercion_between_diagram_algebras_and_the_symmetric_group_algebra](https://github.com/sagemath/sagetrac-mirror/tree/u/ghseeli/create_coercion_between_diagram_algebras_and_the_symmetric_group_algebra)" to "[u/tscrim/diagram_algebras_SGA-18762](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/diagram_algebras_SGA-18762)".



---

archive/issue_comments_334494.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2015-10-12T00:43:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334494",
    "user": "https://github.com/tscrim"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_334495.json:
```json
{
    "body": "**Reviewer:** Travis Scrimshaw",
    "created_at": "2015-10-12T00:43:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334495",
    "user": "https://github.com/tscrim"
}
```

**Reviewer:** Travis Scrimshaw



---

archive/issue_events_059702.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-12T00:43:31Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "milestone": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18762#event-59702"
}
```



---

archive/issue_events_059703.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-10-12T00:43:31Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "milestone": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18762#event-59703"
}
```



---

archive/issue_comments_334496.json:
```json
{
    "body": "<a id='comment:26'></a>\nOkay, so I figured out what was going on.\n\n<technical>What was happening was you were creating a coercion from a subalgebra to the ambient algebra, but the ambient algebra could be garbage collected because the morphism (which only holds a strong reference to the *codomain*) could be collected and the subalgebra didn't have a strong reference to the ambient algebra. When the ambient algebra was recreated, the morphism was not, and so there was no coercion registered (which is done in the codomains). I reworked things so the lift morphism was strongly referenced, and hence the ambient algebra, by the subalgebra.</technical>\n\nI also reworked the morphisms to the Sage standard practice and expanded coercions to allow when there is also a coercion of base rings. There were also some other misc issues that I fixed as well.\n\nIf you're happy with my changes, then you can set a positive review.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/14f80d3624d95079c896cb5efe8f29988834e1ac\">14f80d3</a></td><td><code>Reviewer changes and fixing coercions.</code></td></tr></table>\n",
    "created_at": "2015-10-12T00:43:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334496",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:26'></a>
Okay, so I figured out what was going on.

<technical>What was happening was you were creating a coercion from a subalgebra to the ambient algebra, but the ambient algebra could be garbage collected because the morphism (which only holds a strong reference to the *codomain*) could be collected and the subalgebra didn't have a strong reference to the ambient algebra. When the ambient algebra was recreated, the morphism was not, and so there was no coercion registered (which is done in the codomains). I reworked things so the lift morphism was strongly referenced, and hence the ambient algebra, by the subalgebra.</technical>

I also reworked the morphisms to the Sage standard practice and expanded coercions to allow when there is also a coercion of base rings. There were also some other misc issues that I fixed as well.

If you're happy with my changes, then you can set a positive review.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/14f80d3624d95079c896cb5efe8f29988834e1ac">14f80d3</a></td><td><code>Reviewer changes and fixing coercions.</code></td></tr></table>




---

archive/issue_comments_334497.json:
```json
{
    "body": "**Changing commit** from \"[a4c199d2842865c6385e6938b67974f39ebd8876](https://github.com/sagemath/sagetrac-mirror/commit/a4c199d2842865c6385e6938b67974f39ebd8876)\" to \"[14f80d3624d95079c896cb5efe8f29988834e1ac](https://github.com/sagemath/sagetrac-mirror/commit/14f80d3624d95079c896cb5efe8f29988834e1ac)\".",
    "created_at": "2015-10-12T00:43:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334497",
    "user": "https://github.com/tscrim"
}
```

**Changing commit** from "[a4c199d2842865c6385e6938b67974f39ebd8876](https://github.com/sagemath/sagetrac-mirror/commit/a4c199d2842865c6385e6938b67974f39ebd8876)" to "[14f80d3624d95079c896cb5efe8f29988834e1ac](https://github.com/sagemath/sagetrac-mirror/commit/14f80d3624d95079c896cb5efe8f29988834e1ac)".



---

archive/issue_comments_334498.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2015-10-12T02:03:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334498",
    "user": "https://github.com/ghseeli"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_334499.json:
```json
{
    "body": "<a id='comment:28'></a>\nAlright, I now set the ticket to a positive review. Thank you again for all your help Travis! I feel like I am learning a lot more about the internals of Sage.",
    "created_at": "2015-10-12T02:04:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334499",
    "user": "https://github.com/ghseeli"
}
```

<a id='comment:28'></a>
Alright, I now set the ticket to a positive review. Thank you again for all your help Travis! I feel like I am learning a lot more about the internals of Sage.



---

archive/issue_comments_334500.json:
```json
{
    "body": "<a id='comment:29'></a>\nThanks for your contributions. Feel free to cc me on any future tickets you work on (I suspect I will find them to be useful).",
    "created_at": "2015-10-12T02:37:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334500",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:29'></a>
Thanks for your contributions. Feel free to cc me on any future tickets you work on (I suspect I will find them to be useful).



---

archive/issue_comments_334501.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2015-10-12T22:53:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334501",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed



---

archive/issue_comments_334502.json:
```json
{
    "body": "**Changing branch** from \"[u/tscrim/diagram_algebras_SGA-18762](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/diagram_algebras_SGA-18762)\" to \"[14f80d3624d95079c896cb5efe8f29988834e1ac](https://github.com/sagemath/sagetrac-mirror/commit/14f80d3624d95079c896cb5efe8f29988834e1ac)\".",
    "created_at": "2015-10-12T22:53:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18762#issuecomment-334502",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/tscrim/diagram_algebras_SGA-18762](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/diagram_algebras_SGA-18762)" to "[14f80d3624d95079c896cb5efe8f29988834e1ac](https://github.com/sagemath/sagetrac-mirror/commit/14f80d3624d95079c896cb5efe8f29988834e1ac)".



---

archive/issue_events_059704.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-10-12T22:53:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18762",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18762#event-59704"
}
```
