# Issue 18440: Fix (Di)Graph incidence matrix

archive/issues_018203.json:
```json
{
    "assignees": [],
    "body": "The incidence matrix of a graph is according to [wikipedia](http://en.wikipedia.org/wiki/Incidence_matrix):\n- a matrix with 0, 1 and 2 if the graph is not oriented\n- a matrix with 0, 1 and -1 if the graph is oriented\nAnd in the oriented case the column corresponding to a loop must be zero (in order for `m * m.transpose()` to be equal to the Kirchhoff matrix).\n\nWe keep the default of returning an oriented incidence matrix but add a keyword `oriented` in order to use the other convention.\n\nThis ticket comes from a question from David Joyner [on this sage-support thread](https://groups.google.com/forum/#!topic/sage-support/pCgasKfrFyY).\n\nCC:  @nathanncohen\n\nComponent: **graph theory**\n\nAuthor: **Vincent Delecroix**\n\nBranch/Commit: **[`7e0330b`](https://github.com/sagemath/sagetrac-mirror/commit/7e0330bfcbd9e48c1ce59470d249feefb666f37e)**\n\nReviewer: **Nathann Cohen**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/18440_\n\n",
    "closed_at": "2015-05-25T21:09:31Z",
    "created_at": "2015-05-18T11:50:26Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Fix (Di)Graph incidence matrix",
    "type": "issue",
    "updated_at": "2015-05-25T21:09:31Z",
    "url": "https://github.com/sagemath/sage/issues/18440",
    "user": "https://github.com/videlec"
}
```
The incidence matrix of a graph is according to [wikipedia](http://en.wikipedia.org/wiki/Incidence_matrix):
- a matrix with 0, 1 and 2 if the graph is not oriented
- a matrix with 0, 1 and -1 if the graph is oriented
And in the oriented case the column corresponding to a loop must be zero (in order for `m * m.transpose()` to be equal to the Kirchhoff matrix).

We keep the default of returning an oriented incidence matrix but add a keyword `oriented` in order to use the other convention.

This ticket comes from a question from David Joyner [on this sage-support thread](https://groups.google.com/forum/#!topic/sage-support/pCgasKfrFyY).

CC:  @nathanncohen

Component: **graph theory**

Author: **Vincent Delecroix**

Branch/Commit: **[`7e0330b`](https://github.com/sagemath/sagetrac-mirror/commit/7e0330bfcbd9e48c1ce59470d249feefb666f37e)**

Reviewer: **Nathann Cohen**

_Issue created by migration from https://trac.sagemath.org/ticket/18440_





---

archive/issue_events_259701.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-05-18T11:50:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "milestone_number": null,
    "milestone_title": "sage-6.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18440#event-259701"
}
```



---

archive/issue_events_259702.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-05-18T11:50:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18440#event-259702"
}
```



---

archive/issue_events_259703.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-05-18T11:50:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18440#event-259703"
}
```



---

archive/issue_events_259704.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-05-18T11:50:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18440#event-259704"
}
```



---

archive/issue_comments_254202.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,6 +3,8 @@\n - a matrix with 0, 1 and -1 if the graph is oriented\n And in the oriented case there must be no loop.\n \n+The current method does not follows this definition and moreover sorts the column. And it makes impossible to use a correspondance with the output of other methods.\n+\n Changing that is backward incompatible and breaks some example of the graph constructor.\n \n This ticket comes from a question from David Joyner [on this sage-support thread](https://groups.google.com/forum/#!topic/sage-support/pCgasKfrFyY).\n``````\n",
    "created_at": "2015-05-18T11:52:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18440#issuecomment-254202",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,6 +3,8 @@
 - a matrix with 0, 1 and -1 if the graph is oriented
 And in the oriented case there must be no loop.
 
+The current method does not follows this definition and moreover sorts the column. And it makes impossible to use a correspondance with the output of other methods.
+
 Changing that is backward incompatible and breaks some example of the graph constructor.
 
 This ticket comes from a question from David Joyner [on this sage-support thread](https://groups.google.com/forum/#!topic/sage-support/pCgasKfrFyY).
``````




---

archive/issue_comments_254203.json:
```json
{
    "body": "Branch: **[u/vdelecroix/18440](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/18440)**",
    "created_at": "2015-05-18T11:52:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18440#issuecomment-254203",
    "user": "https://github.com/videlec"
}
```

Branch: **[u/vdelecroix/18440](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/18440)**



---

archive/issue_comments_254204.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,10 +1,8 @@\n The incidence matrix of a graph is according to [wikipedia](http://en.wikipedia.org/wiki/Incidence_matrix):\n - a matrix with 0, 1 and 2 if the graph is not oriented\n - a matrix with 0, 1 and -1 if the graph is oriented\n-And in the oriented case there must be no loop.\n+And in the oriented case the column corresponding to a loop must be zero (in order for `m * m.transpose()` to be equal to the Kirchhoff matrix).\n \n-The current method does not follows this definition and moreover sorts the column. And it makes impossible to use a correspondance with the output of other methods.\n-\n-Changing that is backward incompatible and breaks some example of the graph constructor.\n+We keep the default of returning an oriented incidence matrix but add a keyword `oriented` in order to use the other convention.\n \n This ticket comes from a question from David Joyner [on this sage-support thread](https://groups.google.com/forum/#!topic/sage-support/pCgasKfrFyY).\n``````\n",
    "created_at": "2015-05-18T12:49:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18440#issuecomment-254204",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,10 +1,8 @@
 The incidence matrix of a graph is according to [wikipedia](http://en.wikipedia.org/wiki/Incidence_matrix):
 - a matrix with 0, 1 and 2 if the graph is not oriented
 - a matrix with 0, 1 and -1 if the graph is oriented
-And in the oriented case there must be no loop.
+And in the oriented case the column corresponding to a loop must be zero (in order for `m * m.transpose()` to be equal to the Kirchhoff matrix).
 
-The current method does not follows this definition and moreover sorts the column. And it makes impossible to use a correspondance with the output of other methods.
-
-Changing that is backward incompatible and breaks some example of the graph constructor.
+We keep the default of returning an oriented incidence matrix but add a keyword `oriented` in order to use the other convention.
 
 This ticket comes from a question from David Joyner [on this sage-support thread](https://groups.google.com/forum/#!topic/sage-support/pCgasKfrFyY).
``````




---

archive/issue_comments_254205.json:
```json
{
    "body": "Commit: **[`6c5c67b`](https://github.com/sagemath/sagetrac-mirror/commit/6c5c67bdfe52bedb3eb22541cb2bfb7668a4a0e8)**",
    "created_at": "2015-05-18T15:40:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18440#issuecomment-254205",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`6c5c67b`](https://github.com/sagemath/sagetrac-mirror/commit/6c5c67bdfe52bedb3eb22541cb2bfb7668a4a0e8)**



---

archive/issue_comments_254206.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0824ca649d08566381eb74d525744cf3c4aafeb4\"><code>0824ca6</code></a></td><td><code>Add is_projective_plane to incidence_structure</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c5c67bdfe52bedb3eb22541cb2bfb7668a4a0e8\"><code>6c5c67b</code></a></td><td><code>Trac #18440: fix (Di)Graph incidence matrix</code></td></tr></table>\n",
    "created_at": "2015-05-18T15:40:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18440#issuecomment-254206",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0824ca649d08566381eb74d525744cf3c4aafeb4"><code>0824ca6</code></a></td><td><code>Add is_projective_plane to incidence_structure</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c5c67bdfe52bedb3eb22541cb2bfb7668a4a0e8"><code>6c5c67b</code></a></td><td><code>Trac #18440: fix (Di)Graph incidence matrix</code></td></tr></table>




---

archive/issue_comments_254207.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ce97fc896c793328791eddcde2e496429909d244\"><code>ce97fc8</code></a></td><td><code>Trac #18440: fix (Di)Graph incidence matrix</code></td></tr></table>\n",
    "created_at": "2015-05-18T15:41:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18440#issuecomment-254207",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ce97fc896c793328791eddcde2e496429909d244"><code>ce97fc8</code></a></td><td><code>Trac #18440: fix (Di)Graph incidence matrix</code></td></tr></table>




---

archive/issue_comments_254208.json:
```json
{
    "body": "Changed commit from **[`6c5c67b`](https://github.com/sagemath/sagetrac-mirror/commit/6c5c67bdfe52bedb3eb22541cb2bfb7668a4a0e8)** to **[`ce97fc8`](https://github.com/sagemath/sagetrac-mirror/commit/ce97fc896c793328791eddcde2e496429909d244)**",
    "created_at": "2015-05-18T15:41:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18440#issuecomment-254208",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6c5c67b`](https://github.com/sagemath/sagetrac-mirror/commit/6c5c67bdfe52bedb3eb22541cb2bfb7668a4a0e8)** to **[`ce97fc8`](https://github.com/sagemath/sagetrac-mirror/commit/ce97fc896c793328791eddcde2e496429909d244)**



---

archive/issue_events_259705.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-05-18T15:41:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18440#event-259705"
}
```



---

archive/issue_comments_254209.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nHellooooooo ! I do not understand the purpose of your 'oriented' argument. You are right that the current function is wrong in what it does, i.e. orient arbitrarily the edges of an undirected graph in order to have a `-1,0,+1` matrix: why would you want to \"keep this feature\"?\n\nTo me it does not make much sense. We could just define this parameter from the value of `self.is_directed`. Also, but that's only a typo, the documentation of 'oriented' says that it can make the  matrix 'oriented' or ... 'oriented'. Could you say somewhere that '2' only happens in the presence of loops? Real graphs don't have loops `:-P`\n\nThaaaaaaaaaanks,\n\nNathann",
    "created_at": "2015-05-18T17:53:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18440#issuecomment-254209",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:6" align="right">comment:6</div>

Hellooooooo ! I do not understand the purpose of your 'oriented' argument. You are right that the current function is wrong in what it does, i.e. orient arbitrarily the edges of an undirected graph in order to have a `-1,0,+1` matrix: why would you want to "keep this feature"?

To me it does not make much sense. We could just define this parameter from the value of `self.is_directed`. Also, but that's only a typo, the documentation of 'oriented' says that it can make the  matrix 'oriented' or ... 'oriented'. Could you say somewhere that '2' only happens in the presence of loops? Real graphs don't have loops `:-P`

Thaaaaaaaaaanks,

Nathann



---

archive/issue_events_259706.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-05-18T17:53:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18440#event-259706"
}
```



---

archive/issue_events_259707.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-05-18T17:53:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18440#event-259707"
}
```



---

archive/issue_comments_254210.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@nathanncohen](#comment%3A6):\n> Hellooooooo ! I do not understand the purpose of your 'oriented' argument.\n\nIt seems that people are mostly interested in the oriented version, which needs an oriented graph. The reason is that\n\n```\nm * m.transpose() == m.kirckhhoff_matrix()\n```\nand this is true for oriented graph (even multiedges with loops with my branch ;-).\n\n> You are right that the current function is wrong in what it does, i.e. orient arbitrarily the edges of an undirected graph in order to have a `-1,0,+1` matrix: why would you want to \"keep this feature\"?\n\nI do not want to. It seems to be what people expect. I am 100% in favor of making the default unoriented for graphs but then we should find a simple solution to obtain the oriented version. Do you think that the following is simple enough\n\n```\nsage: G.to_directed().incidence_matrix()\n```\n\n> To me it does not make much sense. We could just define this parameter from the value of `self.is_directed`. Also, but that's only a typo, the documentation of 'oriented' says that it can make the  matrix 'oriented' or ... 'oriented'. Could you say somewhere that '2' only happens in the presence of loops?\n\nHa true true.\n\n> Real graphs don't have loops `:-P`\n\nHa right. I always forgot that I am not doing graph theory with my graph with one vertex and three edges ;-)\n\nVincent",
    "created_at": "2015-05-18T19:46:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18440#issuecomment-254210",
    "user": "https://github.com/videlec"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@nathanncohen](#comment%3A6):
> Hellooooooo ! I do not understand the purpose of your 'oriented' argument.

It seems that people are mostly interested in the oriented version, which needs an oriented graph. The reason is that

```
m * m.transpose() == m.kirckhhoff_matrix()
```
and this is true for oriented graph (even multiedges with loops with my branch ;-).

> You are right that the current function is wrong in what it does, i.e. orient arbitrarily the edges of an undirected graph in order to have a `-1,0,+1` matrix: why would you want to "keep this feature"?

I do not want to. It seems to be what people expect. I am 100% in favor of making the default unoriented for graphs but then we should find a simple solution to obtain the oriented version. Do you think that the following is simple enough

```
sage: G.to_directed().incidence_matrix()
```

> To me it does not make much sense. We could just define this parameter from the value of `self.is_directed`. Also, but that's only a typo, the documentation of 'oriented' says that it can make the  matrix 'oriented' or ... 'oriented'. Could you say somewhere that '2' only happens in the presence of loops?

Ha true true.

> Real graphs don't have loops `:-P`

Ha right. I always forgot that I am not doing graph theory with my graph with one vertex and three edges ;-)

Vincent



---

archive/issue_comments_254211.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\n> It seems that people are mostly interested in the oriented version\n\n\"What's wrong with these people?\"\n\n> I do not want to. It seems to be what people expect. I am 100% in favor of making the default unoriented for graphs but then we should find a simple solution to obtain the oriented version. \n\nSo why don't we do that? Guys who want to force an oriented version will only have to change the flag, won't they?\n\n> Do you think that the following is simple enough\n> \n> ```\n> sage: G.to_directed().incidence_matrix()\n> ```\n\nThis doubles the number of edges. It is not an arbitrary orientation, it replaces every undirected edge with a 2-cycle.\n\nEither way, could you say in the docstring that forcing an oriented graph will result in \"some arbitrary orientation\" to be picked?\n\n> Ha right. I always forgot that I am not doing graph theory with my graph with one vertex and three edges ;-)\n\nOf course not. \n\nNathann",
    "created_at": "2015-05-18T20:07:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18440#issuecomment-254211",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:9" align="right">comment:9</div>

> It seems that people are mostly interested in the oriented version

"What's wrong with these people?"

> I do not want to. It seems to be what people expect. I am 100% in favor of making the default unoriented for graphs but then we should find a simple solution to obtain the oriented version. 

So why don't we do that? Guys who want to force an oriented version will only have to change the flag, won't they?

> Do you think that the following is simple enough
> 
> ```
> sage: G.to_directed().incidence_matrix()
> ```

This doubles the number of edges. It is not an arbitrary orientation, it replaces every undirected edge with a 2-cycle.

Either way, could you say in the docstring that forcing an oriented graph will result in "some arbitrary orientation" to be picked?

> Ha right. I always forgot that I am not doing graph theory with my graph with one vertex and three edges ;-)

Of course not. 

Nathann



---

archive/issue_comments_254212.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0b309a1740162ac84d57d72d9d15631b3ab582c9\"><code>0b309a1</code></a></td><td><code>Trac #18440: fix (Di)Graph incidence matrix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/59a365a77db83aa2d83da38e408f3237aed5d07b\"><code>59a365a</code></a></td><td><code>Trac #18440: default ordering given by the graph</code></td></tr></table>\n",
    "created_at": "2015-05-24T12:20:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18440#issuecomment-254212",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0b309a1740162ac84d57d72d9d15631b3ab582c9"><code>0b309a1</code></a></td><td><code>Trac #18440: fix (Di)Graph incidence matrix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/59a365a77db83aa2d83da38e408f3237aed5d07b"><code>59a365a</code></a></td><td><code>Trac #18440: default ordering given by the graph</code></td></tr></table>




---

archive/issue_comments_254213.json:
```json
{
    "body": "Changed commit from **[`ce97fc8`](https://github.com/sagemath/sagetrac-mirror/commit/ce97fc896c793328791eddcde2e496429909d244)** to **[`59a365a`](https://github.com/sagemath/sagetrac-mirror/commit/59a365a77db83aa2d83da38e408f3237aed5d07b)**",
    "created_at": "2015-05-24T12:20:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18440#issuecomment-254213",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ce97fc8`](https://github.com/sagemath/sagetrac-mirror/commit/ce97fc896c793328791eddcde2e496429909d244)** to **[`59a365a`](https://github.com/sagemath/sagetrac-mirror/commit/59a365a77db83aa2d83da38e408f3237aed5d07b)**



---

archive/issue_comments_254214.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nHello,\n\nRebased on `6.8.beta0` + new commit for a coherent default ordering.\n\nVincent",
    "created_at": "2015-05-24T12:21:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18440#issuecomment-254214",
    "user": "https://github.com/videlec"
}
```

<div id="comment:11" align="right">comment:11</div>

Hello,

Rebased on `6.8.beta0` + new commit for a coherent default ordering.

Vincent



---

archive/issue_events_259708.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-05-24T12:21:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18440#event-259708"
}
```



---

archive/issue_events_259709.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-05-24T12:21:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18440#event-259709"
}
```



---

archive/issue_events_259710.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-05-24T14:09:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18440#event-259710"
}
```



---

archive/issue_events_259711.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-05-24T14:09:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18440#event-259711"
}
```



---

archive/issue_comments_254215.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nHelloooooo !\n\nI added a small commit at `public/18440` with superficial changes. And I have\nthree remarks:\n\n- You say in the documentation of `incidence_matrix` that a digraph cannot be\n  recovered from its incidence matrix, which sounds rather unexpected for\n  someone like me. That's the usual problem again: for me (and many others) a\n  digraph is simple unless stated otherwise. Could you say that 'it is not\n  possible to recover the loops of a digraph from its incidence matrix' instead?\n\n- Documentation of `oriented` in the `INPUT section: you do not exactly specify\n  what the default behaviour is. It is implicitly done in the paragraphs before\n  the 'INPUT' section. Could you say (unless you find something better) that\n  when equal to `None` it is inferred from the graph's type?\n\n- It is a bit weird that an error is reported when loops=False but a loops is\n  present in the matrix, while multiple edges are silently ignored when\n  multiedges=False. I we stick to the behaviour of `add_edge` those edges should\n  be silently ignored (and with deprecation #15706 that should be the standard\n  some day). What about doing the same here?\n\n- Could you doctest the new exceptions you added?\n\nThanks,\n\nNathann",
    "created_at": "2015-05-24T14:09:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18440#issuecomment-254215",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:12" align="right">comment:12</div>

Helloooooo !

I added a small commit at `public/18440` with superficial changes. And I have
three remarks:

- You say in the documentation of `incidence_matrix` that a digraph cannot be
  recovered from its incidence matrix, which sounds rather unexpected for
  someone like me. That's the usual problem again: for me (and many others) a
  digraph is simple unless stated otherwise. Could you say that 'it is not
  possible to recover the loops of a digraph from its incidence matrix' instead?

- Documentation of `oriented` in the `INPUT section: you do not exactly specify
  what the default behaviour is. It is implicitly done in the paragraphs before
  the 'INPUT' section. Could you say (unless you find something better) that
  when equal to `None` it is inferred from the graph's type?

- It is a bit weird that an error is reported when loops=False but a loops is
  present in the matrix, while multiple edges are silently ignored when
  multiedges=False. I we stick to the behaviour of `add_edge` those edges should
  be silently ignored (and with deprecation #15706 that should be the standard
  some day). What about doing the same here?

- Could you doctest the new exceptions you added?

Thanks,

Nathann



---

archive/issue_comments_254216.json:
```json
{
    "body": "Reviewer: **Nathann Cohen**",
    "created_at": "2015-05-24T14:09:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18440#issuecomment-254216",
    "user": "https://github.com/nathanncohen"
}
```

Reviewer: **Nathann Cohen**



---

archive/issue_events_259712.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-05-24T15:04:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18440#event-259712"
}
```



---

archive/issue_events_259713.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-05-24T15:04:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18440#event-259713"
}
```



---

archive/issue_comments_254217.json:
```json
{
    "body": "Changed commit from **[`59a365a`](https://github.com/sagemath/sagetrac-mirror/commit/59a365a77db83aa2d83da38e408f3237aed5d07b)** to **[`1543608`](https://github.com/sagemath/sagetrac-mirror/commit/154360896085aa04c861b7b9a4d078da017e83e2)**",
    "created_at": "2015-05-24T15:04:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18440#issuecomment-254217",
    "user": "https://github.com/videlec"
}
```

Changed commit from **[`59a365a`](https://github.com/sagemath/sagetrac-mirror/commit/59a365a77db83aa2d83da38e408f3237aed5d07b)** to **[`1543608`](https://github.com/sagemath/sagetrac-mirror/commit/154360896085aa04c861b7b9a4d078da017e83e2)**



---

archive/issue_comments_254218.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nThanks for your commit.\n\nI took care of your three remarks in an additional commit.\n\nVincent\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b656a4c0fa53cf232dbf825e31f27f2722ab657b\"><code>b656a4c</code></a></td><td><code>trac #18440: Changes in exception messages, some missing spaces, ...</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/154360896085aa04c861b7b9a4d078da017e83e2\"><code>1543608</code></a></td><td><code>Trac #18440: more doctest + silently ignore loops when loops=False</code></td></tr></table>\n",
    "created_at": "2015-05-24T15:04:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18440#issuecomment-254218",
    "user": "https://github.com/videlec"
}
```

<div id="comment:13" align="right">comment:13</div>

Thanks for your commit.

I took care of your three remarks in an additional commit.

Vincent

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b656a4c0fa53cf232dbf825e31f27f2722ab657b"><code>b656a4c</code></a></td><td><code>trac #18440: Changes in exception messages, some missing spaces, ...</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/154360896085aa04c861b7b9a4d078da017e83e2"><code>1543608</code></a></td><td><code>Trac #18440: more doctest + silently ignore loops when loops=False</code></td></tr></table>




---

archive/issue_comments_254219.json:
```json
{
    "body": "Changed branch from **[u/vdelecroix/18440](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/18440)** to **[public/18440](https://github.com/sagemath/sagetrac-mirror/tree/public/18440)**",
    "created_at": "2015-05-24T15:04:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18440#issuecomment-254219",
    "user": "https://github.com/videlec"
}
```

Changed branch from **[u/vdelecroix/18440](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/18440)** to **[public/18440](https://github.com/sagemath/sagetrac-mirror/tree/public/18440)**



---

archive/issue_comments_254220.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nThanks !\n\nWell, it looks good to me but the patchbot indicates a broken doctest in the matroid/ folder.\n\nNathann",
    "created_at": "2015-05-24T15:07:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18440#issuecomment-254220",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:14" align="right">comment:14</div>

Thanks !

Well, it looks good to me but the patchbot indicates a broken doctest in the matroid/ folder.

Nathann



---

archive/issue_comments_254221.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@nathanncohen](#comment%3A14):\n> Thanks !\n> \n> Well, it looks good to me but the patchbot indicates a broken doctest in the matroid/ folder.\n\nDamn!",
    "created_at": "2015-05-24T15:17:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18440#issuecomment-254221",
    "user": "https://github.com/videlec"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@nathanncohen](#comment%3A14):
> Thanks !
> 
> Well, it looks good to me but the patchbot indicates a broken doctest in the matroid/ folder.

Damn!



---

archive/issue_comments_254222.json:
```json
{
    "body": "Changed commit from **[`1543608`](https://github.com/sagemath/sagetrac-mirror/commit/154360896085aa04c861b7b9a4d078da017e83e2)** to **[`9b30b92`](https://github.com/sagemath/sagetrac-mirror/commit/9b30b9264c08c292e674103b1e58f09050e21680)**",
    "created_at": "2015-05-24T15:21:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18440#issuecomment-254222",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1543608`](https://github.com/sagemath/sagetrac-mirror/commit/154360896085aa04c861b7b9a4d078da017e83e2)** to **[`9b30b92`](https://github.com/sagemath/sagetrac-mirror/commit/9b30b9264c08c292e674103b1e58f09050e21680)**



---

archive/issue_comments_254223.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9b30b9264c08c292e674103b1e58f09050e21680\"><code>9b30b92</code></a></td><td><code>Trac #18440: fix the doctest in matroids</code></td></tr></table>\n",
    "created_at": "2015-05-24T15:21:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18440#issuecomment-254223",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9b30b9264c08c292e674103b1e58f09050e21680"><code>9b30b92</code></a></td><td><code>Trac #18440: fix the doctest in matroids</code></td></tr></table>




---

archive/issue_comments_254224.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nTheeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeen,\n\nNathann",
    "created_at": "2015-05-24T16:04:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18440#issuecomment-254224",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:17" align="right">comment:17</div>

Theeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeen,

Nathann



---

archive/issue_events_259714.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-05-24T16:04:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18440#event-259714"
}
```



---

archive/issue_events_259715.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-05-24T16:04:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18440#event-259715"
}
```



---

archive/issue_comments_254225.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nPDF docs don't build",
    "created_at": "2015-05-24T20:11:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18440#issuecomment-254225",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:18" align="right">comment:18</div>

PDF docs don't build



---

archive/issue_events_259716.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-05-24T20:11:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18440#event-259716"
}
```



---

archive/issue_events_259717.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-05-24T20:11:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18440#event-259717"
}
```



---

archive/issue_comments_254226.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nBecause of this ticket?!!?",
    "created_at": "2015-05-24T20:17:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18440#issuecomment-254226",
    "user": "https://github.com/videlec"
}
```

<div id="comment:19" align="right">comment:19</div>

Because of this ticket?!!?



---

archive/issue_comments_254227.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\n`{-1,0,1\\}`",
    "created_at": "2015-05-24T20:19:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18440#issuecomment-254227",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:20" align="right">comment:20</div>

`{-1,0,1\}`



---

archive/issue_comments_254228.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\n`;-)` Thanks!",
    "created_at": "2015-05-24T20:21:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18440#issuecomment-254228",
    "user": "https://github.com/videlec"
}
```

<div id="comment:21" align="right">comment:21</div>

`;-)` Thanks!



---

archive/issue_comments_254229.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7e0330bfcbd9e48c1ce59470d249feefb666f37e\"><code>7e0330b</code></a></td><td><code>Trac #18440: fix documentation</code></td></tr></table>\n",
    "created_at": "2015-05-24T20:46:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18440#issuecomment-254229",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7e0330bfcbd9e48c1ce59470d249feefb666f37e"><code>7e0330b</code></a></td><td><code>Trac #18440: fix documentation</code></td></tr></table>




---

archive/issue_comments_254230.json:
```json
{
    "body": "Changed commit from **[`9b30b92`](https://github.com/sagemath/sagetrac-mirror/commit/9b30b9264c08c292e674103b1e58f09050e21680)** to **[`7e0330b`](https://github.com/sagemath/sagetrac-mirror/commit/7e0330bfcbd9e48c1ce59470d249feefb666f37e)**",
    "created_at": "2015-05-24T20:46:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18440#issuecomment-254230",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9b30b92`](https://github.com/sagemath/sagetrac-mirror/commit/9b30b9264c08c292e674103b1e58f09050e21680)** to **[`7e0330b`](https://github.com/sagemath/sagetrac-mirror/commit/7e0330bfcbd9e48c1ce59470d249feefb666f37e)**



---

archive/issue_events_259718.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-05-24T20:46:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18440#event-259718"
}
```



---

archive/issue_events_259719.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-05-24T20:46:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18440#event-259719"
}
```



---

archive/issue_events_259720.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-05-25T21:09:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18440#event-259720"
}
```



---

archive/issue_events_259721.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "4eb730cddb830b8a99c38a2f70b6b2d860f51581",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-05-25T21:09:31Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18440#event-259721"
}
```



---

archive/issue_comments_254231.json:
```json
{
    "body": "Changed branch from **[public/18440](https://github.com/sagemath/sagetrac-mirror/tree/public/18440)** to **[`7e0330b`](https://github.com/sagemath/sagetrac-mirror/commit/7e0330bfcbd9e48c1ce59470d249feefb666f37e)**",
    "created_at": "2015-05-25T21:09:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18440",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18440#issuecomment-254231",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/18440](https://github.com/sagemath/sagetrac-mirror/tree/public/18440)** to **[`7e0330b`](https://github.com/sagemath/sagetrac-mirror/commit/7e0330bfcbd9e48c1ce59470d249feefb666f37e)**
