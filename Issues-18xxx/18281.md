# Issue 18281: implement critical point functionality including is_pcf for projective morphisms

archive/issues_018044.json:
```json
{
    "body": "Implement computing the critical point locus for a morphism of projective space and checking if that morphism is post-critically finite (all critical points are preperiodic). We can also construction to critical point portrait.\n\nAssignee: @bhutz\n\nBranch/Commit: f904d5df326f0874a531b288d5303a285442e5e1\n\nReviewer: Grayson Jorgenson\n\nAuthor: Ben Hutz\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/18281\n\n",
    "closed_at": "2015-05-20T22:28:25Z",
    "created_at": "2015-04-22T15:30:20Z",
    "labels": [
        "component: algebraic geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.8",
    "title": "implement critical point functionality including is_pcf for projective morphisms",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18281",
    "user": "https://github.com/bhutz"
}
```
Implement computing the critical point locus for a morphism of projective space and checking if that morphism is post-critically finite (all critical points are preperiodic). We can also construction to critical point portrait.

Assignee: @bhutz

Branch/Commit: f904d5df326f0874a531b288d5303a285442e5e1

Reviewer: Grayson Jorgenson

Author: Ben Hutz

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/18281





---

archive/issue_comments_317384.json:
```json
{
    "body": "Changing branch from \"\" to \"u/bhutz/ticket/18281\"",
    "created_at": "2015-04-24T19:35:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18281",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18281#issuecomment-317384",
    "user": "https://github.com/bhutz"
}
```

Changing branch from "" to "u/bhutz/ticket/18281"



---

archive/issue_comments_317385.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-04-24T19:36:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18281",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18281#issuecomment-317385",
    "user": "https://github.com/bhutz"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_317386.json:
```json
{
    "body": "Changing author from \"\" to \"Ben Hutz\"",
    "created_at": "2015-04-24T19:36:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18281",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18281#issuecomment-317386",
    "user": "https://github.com/bhutz"
}
```

Changing author from "" to "Ben Hutz"



---

archive/issue_comments_317387.json:
```json
{
    "body": "<a id='comment:2'></a>\nNew commits:\n|                                                                                                                                          |                                                              |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------|\n|[83242df](http://git.sagemath.org/sage.git/commit/?id=83242df1ca8b49344cc0cbc58c4b197d36a2c41b)|`18281: critical point functionality for projective morphisms`|",
    "created_at": "2015-04-24T19:36:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18281",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18281#issuecomment-317387",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:2'></a>
New commits:
|                                                                                                                                          |                                                              |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------|
|[83242df](http://git.sagemath.org/sage.git/commit/?id=83242df1ca8b49344cc0cbc58c4b197d36a2c41b)|`18281: critical point functionality for projective morphisms`|



---

archive/issue_comments_317388.json:
```json
{
    "body": "Changing commit from \"\" to \"83242df1ca8b49344cc0cbc58c4b197d36a2c41b\"",
    "created_at": "2015-04-24T19:36:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18281",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18281#issuecomment-317388",
    "user": "https://github.com/bhutz"
}
```

Changing commit from "" to "83242df1ca8b49344cc0cbc58c4b197d36a2c41b"



---

archive/issue_comments_317389.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-05-16T02:41:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18281",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18281#issuecomment-317389",
    "user": "https://trac.sagemath.org/admin/accounts/users/gjorgenson"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_317390.json:
```json
{
    "body": "<a id='comment:3'></a>\nchange_ring (for both SchemeMorphism_polynomial and SchemeMorphism_point):\n- Before creating an embedding into QQbar, need check that the map is defined over a number field, change_ring breaks otherwise:\n\n```\nP.<x,y> = ProjectiveSpace(ZZ,1)\nH = End(P)\nf = H([3*x^2,y^2])\nf.change_ring(QQbar)\n```\n- There is also an issue when trying to change_ring from QQbar to QQbar:\n\n```\nP.<x,y> = ProjectiveSpace(QQbar,1)\nH = End(P)\nf = H([3*x^2,y^2])\nf.change_ring(QQbar)\n```\n\n_preperiodic_points_to_cyclegraph:\n- maybe add more comments explaining how equal points with different representations are dealt with\n\nwronskian_ideal:\n- in line 2497, change format of NotImplementedError to the standard format\n- change \"== false\" checks to \"not\" for faster performance\n\ncritical_points:\n- rational_points should return a list, so the list conversion in the return statement is not needed\n\nis_postcritically_finite\n- remove extra lines in documentation, lines 2560 and 2595\n- subscheme check not needed since the check is present in critical_points\n- perhaps restrict to only maps defined over number fields\n\ncritical_point_portrait:\n- copying crit_points list not needed, instead could loop over crit_points by index, stopping when the index is the original length of the crit_points list\n- subscheme and endomorphism checks not needed since they are present in critical_points\n\ncritical_height:\n- maybe include a note that the keywords are optional\n- subscheme and endomorphism checks are already done in critical_points",
    "created_at": "2015-05-16T02:41:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18281",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18281#issuecomment-317390",
    "user": "https://trac.sagemath.org/admin/accounts/users/gjorgenson"
}
```

<a id='comment:3'></a>
change_ring (for both SchemeMorphism_polynomial and SchemeMorphism_point):
- Before creating an embedding into QQbar, need check that the map is defined over a number field, change_ring breaks otherwise:

```
P.<x,y> = ProjectiveSpace(ZZ,1)
H = End(P)
f = H([3*x^2,y^2])
f.change_ring(QQbar)
```
- There is also an issue when trying to change_ring from QQbar to QQbar:

```
P.<x,y> = ProjectiveSpace(QQbar,1)
H = End(P)
f = H([3*x^2,y^2])
f.change_ring(QQbar)
```

_preperiodic_points_to_cyclegraph:
- maybe add more comments explaining how equal points with different representations are dealt with

wronskian_ideal:
- in line 2497, change format of NotImplementedError to the standard format
- change "== false" checks to "not" for faster performance

critical_points:
- rational_points should return a list, so the list conversion in the return statement is not needed

is_postcritically_finite
- remove extra lines in documentation, lines 2560 and 2595
- subscheme check not needed since the check is present in critical_points
- perhaps restrict to only maps defined over number fields

critical_point_portrait:
- copying crit_points list not needed, instead could loop over crit_points by index, stopping when the index is the original length of the crit_points list
- subscheme and endomorphism checks not needed since they are present in critical_points

critical_height:
- maybe include a note that the keywords are optional
- subscheme and endomorphism checks are already done in critical_points



---

archive/issue_comments_317391.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Grayson Jorgenson\"",
    "created_at": "2015-05-16T02:41:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18281",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18281#issuecomment-317391",
    "user": "https://trac.sagemath.org/admin/accounts/users/gjorgenson"
}
```

Changing reviewer from "" to "Grayson Jorgenson"



---

archive/issue_comments_317392.json:
```json
{
    "body": "Changing commit from \"83242df1ca8b49344cc0cbc58c4b197d36a2c41b\" to \"5a9f9356ef6459e8a42d2f0bbdb39961d81da980\"",
    "created_at": "2015-05-17T15:17:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18281",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18281#issuecomment-317392",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "83242df1ca8b49344cc0cbc58c4b197d36a2c41b" to "5a9f9356ef6459e8a42d2f0bbdb39961d81da980"



---

archive/issue_comments_317393.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|\n|[5a9f935](http://git.sagemath.org/sage.git/commit/?id=5a9f9356ef6459e8a42d2f0bbdb39961d81da980)|`18281: changes from review`|",
    "created_at": "2015-05-17T15:17:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18281",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18281#issuecomment-317393",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                            |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|
|[5a9f935](http://git.sagemath.org/sage.git/commit/?id=5a9f9356ef6459e8a42d2f0bbdb39961d81da980)|`18281: changes from review`|



---

archive/issue_comments_317394.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-05-17T15:18:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18281",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18281#issuecomment-317394",
    "user": "https://github.com/bhutz"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_317395.json:
```json
{
    "body": "<a id='comment:5'></a>\nI made the changes. I changed the descriptions of the kwds for heights in a number of places.\n\nI also decided that critical heights over number field orders was ok and moved the function to the 'rings' section.",
    "created_at": "2015-05-17T15:18:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18281",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18281#issuecomment-317395",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:5'></a>
I made the changes. I changed the descriptions of the kwds for heights in a number of places.

I also decided that critical heights over number field orders was ok and moved the function to the 'rings' section.



---

archive/issue_comments_317396.json:
```json
{
    "body": "<a id='comment:6'></a>\nI tested `is_postcritically_finite` and `critical_point_portrait` on examples of pcf maps. \n\nEverything looks good, but there is one instance of whitespace in line 2184 of `projective_morphism`",
    "created_at": "2015-05-20T02:57:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18281",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18281#issuecomment-317396",
    "user": "https://trac.sagemath.org/admin/accounts/users/gjorgenson"
}
```

<a id='comment:6'></a>
I tested `is_postcritically_finite` and `critical_point_portrait` on examples of pcf maps. 

Everything looks good, but there is one instance of whitespace in line 2184 of `projective_morphism`



---

archive/issue_comments_317397.json:
```json
{
    "body": "Changing commit from \"5a9f9356ef6459e8a42d2f0bbdb39961d81da980\" to \"f904d5df326f0874a531b288d5303a285442e5e1\"",
    "created_at": "2015-05-20T15:08:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18281",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18281#issuecomment-317397",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5a9f9356ef6459e8a42d2f0bbdb39961d81da980" to "f904d5df326f0874a531b288d5303a285442e5e1"



---

archive/issue_comments_317398.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                     |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|\n|[f904d5d](http://git.sagemath.org/sage.git/commit/?id=f904d5df326f0874a531b288d5303a285442e5e1)|`18281 removing trailing white space`|",
    "created_at": "2015-05-20T15:08:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18281",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18281#issuecomment-317398",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                     |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|
|[f904d5d](http://git.sagemath.org/sage.git/commit/?id=f904d5df326f0874a531b288d5303a285442e5e1)|`18281 removing trailing white space`|



---

archive/issue_events_051609.json:
```json
{
    "actor": "https://github.com/bhutz",
    "created_at": "2015-05-20T15:10:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18281",
    "milestone": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18281#event-51609"
}
```



---

archive/issue_comments_317399.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-05-20T15:14:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18281",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18281#issuecomment-317399",
    "user": "https://trac.sagemath.org/admin/accounts/users/gjorgenson"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_317400.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-05-20T22:28:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18281",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18281#issuecomment-317400",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_317401.json:
```json
{
    "body": "Changing branch from \"u/bhutz/ticket/18281\" to \"f904d5df326f0874a531b288d5303a285442e5e1\"",
    "created_at": "2015-05-20T22:28:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18281",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18281#issuecomment-317401",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/bhutz/ticket/18281" to "f904d5df326f0874a531b288d5303a285442e5e1"



---

archive/issue_events_051610.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-05-20T22:28:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18281",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18281#event-51610"
}
```
