# Issue 18367: Move ntl_wrap to Sage library

archive/issues_018130.json:
```json
{
    "body": "\n\nBranch/Commit: 0bd4c02e112fb242060fd112e7f36a17c36a80e8\n\nReviewer: Fran\u00e7ois Bissey\n\nAuthor: Jeroen Demeyer\n\nDependencies: #18519\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/18367\n\n",
    "closed_at": "2015-06-03T23:22:45Z",
    "created_at": "2015-05-05T14:54:12Z",
    "labels": [
        "component: c_lib"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.8",
    "title": "Move ntl_wrap to Sage library",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18367",
    "user": "https://github.com/jdemeyer"
}
```


Branch/Commit: 0bd4c02e112fb242060fd112e7f36a17c36a80e8

Reviewer: François Bissey

Author: Jeroen Demeyer

Dependencies: #18519

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/18367





---

archive/issue_comments_315314.json:
```json
{
    "body": "Changing branch from \"\" to \"u/jdemeyer/move_ntl_wrap_to_sage_library\"",
    "created_at": "2015-05-05T14:55:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18367#issuecomment-315314",
    "user": "https://github.com/jdemeyer"
}
```

Changing branch from "" to "u/jdemeyer/move_ntl_wrap_to_sage_library"



---

archive/issue_comments_315315.json:
```json
{
    "body": "Changing commit from \"\" to \"bf7497a9f33239e8cd1da2037f751aaf643d8da9\"",
    "created_at": "2015-05-27T09:59:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18367#issuecomment-315315",
    "user": "https://github.com/jdemeyer"
}
```

Changing commit from "" to "bf7497a9f33239e8cd1da2037f751aaf643d8da9"



---

archive/issue_comments_315316.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#18519\"",
    "created_at": "2015-05-27T09:59:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18367#issuecomment-315316",
    "user": "https://github.com/jdemeyer"
}
```

Changing dependencies from "" to "#18519"



---

archive/issue_comments_315317.json:
```json
{
    "body": "<a id='comment:2'></a>\nNew commits:\n|                                                                                                                                          |                                   |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|\n|[bf7497a](https://github.com/sagemath/sagetrac-mirror/commit/bf7497a9f33239e8cd1da2037f751aaf643d8da9)|`Move ntl_wrap to the Sage library`|",
    "created_at": "2015-05-27T09:59:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18367#issuecomment-315317",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'></a>
New commits:
|                                                                                                                                          |                                   |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|
|[bf7497a](https://github.com/sagemath/sagetrac-mirror/commit/bf7497a9f33239e8cd1da2037f751aaf643d8da9)|`Move ntl_wrap to the Sage library`|



---

archive/issue_comments_315318.json:
```json
{
    "body": "<a id='comment:3'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                          |                                         |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|\n|[2ed346b](https://github.com/sagemath/sagetrac-mirror/commit/2ed346b88143b4f0417432cd5546e9aed00b55e2)|`Remove unneeded inclusions of cdefs.pxi`|\n|[57e9278](https://github.com/sagemath/sagetrac-mirror/commit/57e92784a5df59af03c6f9a778a9fc295b41e038)|`More removals of cdefs.pxi`|\n|[370106d](https://github.com/sagemath/sagetrac-mirror/commit/370106df8a115b314ef4c50ac1ae494458c4d1b1)|`Even more removals of cdefs`|\n|[1accad6](https://github.com/sagemath/sagetrac-mirror/commit/1accad6c25198c6d2c412ef1d2f593f11faa5db4)|`Remove cdefs.pxi from .pxd/.pxi files`|\n|[ec497b4](https://github.com/sagemath/sagetrac-mirror/commit/ec497b4b01ed36b7ffe8de31c752d18456017f34)|`Merge tag '6.8.beta0' into HEAD`|\n|[b5a143f](https://github.com/sagemath/sagetrac-mirror/commit/b5a143f743ee88f7e8e5a894943f25fefe2116c7)|`Move ntl_wrap to Sage library`|",
    "created_at": "2015-05-27T11:20:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18367#issuecomment-315318",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                          |                                         |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|
|[2ed346b](https://github.com/sagemath/sagetrac-mirror/commit/2ed346b88143b4f0417432cd5546e9aed00b55e2)|`Remove unneeded inclusions of cdefs.pxi`|
|[57e9278](https://github.com/sagemath/sagetrac-mirror/commit/57e92784a5df59af03c6f9a778a9fc295b41e038)|`More removals of cdefs.pxi`|
|[370106d](https://github.com/sagemath/sagetrac-mirror/commit/370106df8a115b314ef4c50ac1ae494458c4d1b1)|`Even more removals of cdefs`|
|[1accad6](https://github.com/sagemath/sagetrac-mirror/commit/1accad6c25198c6d2c412ef1d2f593f11faa5db4)|`Remove cdefs.pxi from .pxd/.pxi files`|
|[ec497b4](https://github.com/sagemath/sagetrac-mirror/commit/ec497b4b01ed36b7ffe8de31c752d18456017f34)|`Merge tag '6.8.beta0' into HEAD`|
|[b5a143f](https://github.com/sagemath/sagetrac-mirror/commit/b5a143f743ee88f7e8e5a894943f25fefe2116c7)|`Move ntl_wrap to Sage library`|



---

archive/issue_comments_315319.json:
```json
{
    "body": "Changing commit from \"bf7497a9f33239e8cd1da2037f751aaf643d8da9\" to \"b5a143f743ee88f7e8e5a894943f25fefe2116c7\"",
    "created_at": "2015-05-27T11:20:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18367#issuecomment-315319",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "bf7497a9f33239e8cd1da2037f751aaf643d8da9" to "b5a143f743ee88f7e8e5a894943f25fefe2116c7"



---

archive/issue_comments_315320.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-05-27T11:26:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18367#issuecomment-315320",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_315321.json:
```json
{
    "body": "<a id='comment:5'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                  |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------|\n|[6cf2f45](https://github.com/sagemath/sagetrac-mirror/commit/6cf2f45d0fef31a9d954cc04691edd9c419839bb)|`Merge tag '6.8.beta1' into t/18367/move_ntl_wrap_to_sage_library`|",
    "created_at": "2015-05-28T06:36:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18367#issuecomment-315321",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                  |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------|
|[6cf2f45](https://github.com/sagemath/sagetrac-mirror/commit/6cf2f45d0fef31a9d954cc04691edd9c419839bb)|`Merge tag '6.8.beta1' into t/18367/move_ntl_wrap_to_sage_library`|



---

archive/issue_comments_315322.json:
```json
{
    "body": "Changing commit from \"b5a143f743ee88f7e8e5a894943f25fefe2116c7\" to \"6cf2f45d0fef31a9d954cc04691edd9c419839bb\"",
    "created_at": "2015-05-28T06:36:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18367#issuecomment-315322",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b5a143f743ee88f7e8e5a894943f25fefe2116c7" to "6cf2f45d0fef31a9d954cc04691edd9c419839bb"



---

archive/issue_comments_315323.json:
```json
{
    "body": "Changing commit from \"6cf2f45d0fef31a9d954cc04691edd9c419839bb\" to \"97215ae7497e2b510cc8df715b2340561b057af8\"",
    "created_at": "2015-05-28T08:47:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18367#issuecomment-315323",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6cf2f45d0fef31a9d954cc04691edd9c419839bb" to "97215ae7497e2b510cc8df715b2340561b057af8"



---

archive/issue_comments_315324.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|\n|[97215ae](https://github.com/sagemath/sagetrac-mirror/commit/97215ae7497e2b510cc8df715b2340561b057af8)|`Rename ntl_wrap -> ntlwrap`|",
    "created_at": "2015-05-28T08:47:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18367#issuecomment-315324",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                            |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|
|[97215ae](https://github.com/sagemath/sagetrac-mirror/commit/97215ae7497e2b510cc8df715b2340561b057af8)|`Rename ntl_wrap -> ntlwrap`|



---

archive/issue_comments_315325.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-05-31T08:46:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18367#issuecomment-315325",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_315326.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Fran\u00e7ois Bissey\"",
    "created_at": "2015-05-31T08:46:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18367#issuecomment-315326",
    "user": "https://github.com/kiwifb"
}
```

Changing reviewer from "" to "François Bissey"



---

archive/issue_comments_315327.json:
```json
{
    "body": "<a id='comment:7'></a>\nLooks ready to be sent to the bots to me.",
    "created_at": "2015-05-31T08:46:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18367#issuecomment-315327",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:7'></a>
Looks ready to be sent to the bots to me.



---

archive/issue_events_066690.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2015-05-31T08:48:44Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18367",
    "milestone": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18367#event-66690"
}
```



---

archive/issue_comments_315328.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-06-02T20:17:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18367#issuecomment-315328",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_315329.json:
```json
{
    "body": "<a id='comment:9'></a>\nOn arando, snapperkob, and arm I get this:\n\n```\nDeleting empty directory /home/buildslave-sage/slave/sage_git/build/src/doc/hu/a_tour_of_sage/static\nTraceback (most recent call last):\n  File \"/home/buildslave-sage/slave/sage_git/build/src/doc/common/builder.py\", line 1619, in <module>\n    import sage.all\n  File \"/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/all.py\", line 99, in <module>\n    from sage.rings.all      import *\n  File \"/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/all.py\", line 68, in <module>\n    from number_field.all import *\n  File \"/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/number_field/all.py\", line 7, in <module>\n    from totallyreal import enumerate_totallyreal_fields_prim\n  File \"sage/rings/number_field/totallyreal_data.pxd\", line 12, in init sage.rings.number_field.totallyreal (build/cythonized/sage/rings/number_field/totallyreal.c:10354)\n  File \"sage/rings/number_field/totallyreal_data.pyx\", line 40, in init sage.rings.number_field.totallyreal_data (build/cythonized/sage/rings/number_field/totallyreal_data.c:11148)\n  File \"/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_ring_constructor.py\", line 465, in PolynomialRing\n    R = _single_variate(base_ring, name, sparse, implementation)\n  File \"/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_ring_constructor.py\", line 539, in _single_variate\n    R = m.PolynomialRing_integral_domain(base_ring, name, sparse, implementation)\n  File \"/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_ring.py\", line 1544, in __init__\n    sparse=sparse, element_class=element_class)\n  File \"/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_ring.py\", line 1451, in __init__\n    sparse=sparse, element_class=element_class, category=category)\n  File \"/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_ring.py\", line 305, in __init__\n    from sage.matrix.matrix_space import is_MatrixSpace\n  File \"/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/matrix/matrix_space.py\", line 46, in <module>\n    import matrix_modn_sparse\n  File \"sage/matrix/matrix_integer_dense.pxd\", line 11, in init sage.matrix.matrix_modn_sparse (build/cythonized/sage/matrix/matrix_modn_sparse.c:18762)\n  File \"sage/matrix/matrix_modn_dense_template_header.pxi\", line 9, in init sage.matrix.matrix_integer_dense (build/cythonized/sage/matrix/matrix_integer_dense.c:50329)\nImportError: /home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/matrix/matrix_modn_dense_float.so: undefined symbol: _ZN3NTL8ZZ_pInfoE\n```",
    "created_at": "2015-06-02T20:17:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18367#issuecomment-315329",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:9'></a>
On arando, snapperkob, and arm I get this:

```
Deleting empty directory /home/buildslave-sage/slave/sage_git/build/src/doc/hu/a_tour_of_sage/static
Traceback (most recent call last):
  File "/home/buildslave-sage/slave/sage_git/build/src/doc/common/builder.py", line 1619, in <module>
    import sage.all
  File "/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/all.py", line 99, in <module>
    from sage.rings.all      import *
  File "/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/all.py", line 68, in <module>
    from number_field.all import *
  File "/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/number_field/all.py", line 7, in <module>
    from totallyreal import enumerate_totallyreal_fields_prim
  File "sage/rings/number_field/totallyreal_data.pxd", line 12, in init sage.rings.number_field.totallyreal (build/cythonized/sage/rings/number_field/totallyreal.c:10354)
  File "sage/rings/number_field/totallyreal_data.pyx", line 40, in init sage.rings.number_field.totallyreal_data (build/cythonized/sage/rings/number_field/totallyreal_data.c:11148)
  File "/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_ring_constructor.py", line 465, in PolynomialRing
    R = _single_variate(base_ring, name, sparse, implementation)
  File "/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_ring_constructor.py", line 539, in _single_variate
    R = m.PolynomialRing_integral_domain(base_ring, name, sparse, implementation)
  File "/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_ring.py", line 1544, in __init__
    sparse=sparse, element_class=element_class)
  File "/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_ring.py", line 1451, in __init__
    sparse=sparse, element_class=element_class, category=category)
  File "/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_ring.py", line 305, in __init__
    from sage.matrix.matrix_space import is_MatrixSpace
  File "/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/matrix/matrix_space.py", line 46, in <module>
    import matrix_modn_sparse
  File "sage/matrix/matrix_integer_dense.pxd", line 11, in init sage.matrix.matrix_modn_sparse (build/cythonized/sage/matrix/matrix_modn_sparse.c:18762)
  File "sage/matrix/matrix_modn_dense_template_header.pxi", line 9, in init sage.matrix.matrix_integer_dense (build/cythonized/sage/matrix/matrix_integer_dense.c:50329)
ImportError: /home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/matrix/matrix_modn_dense_float.so: undefined symbol: _ZN3NTL8ZZ_pInfoE
```



---

archive/issue_comments_315330.json:
```json
{
    "body": "<a id='comment:10'></a>\nWhat `gcc` versions are those? It probably needs a compiler flag, the symbol comes from `ZZ_p.h`.",
    "created_at": "2015-06-02T21:48:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18367#issuecomment-315330",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:10'></a>
What `gcc` versions are those? It probably needs a compiler flag, the symbol comes from `ZZ_p.h`.



---

archive/issue_comments_315331.json:
```json
{
    "body": "<a id='comment:11'></a>\nAs one data point, arando is gcc version 4.8.2 (Ubuntu 4.8.2-19ubuntu1)",
    "created_at": "2015-06-02T22:00:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18367#issuecomment-315331",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:11'></a>
As one data point, arando is gcc version 4.8.2 (Ubuntu 4.8.2-19ubuntu1)



---

archive/issue_comments_315332.json:
```json
{
    "body": "<a id='comment:12'></a>\nHum, the symbol should be in libntl which suggests that it didn't link appropriately to it.",
    "created_at": "2015-06-02T22:33:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18367#issuecomment-315332",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:12'></a>
Hum, the symbol should be in libntl which suggests that it didn't link appropriately to it.



---

archive/issue_comments_315333.json:
```json
{
    "body": "<a id='comment:13'></a>\nVolker, did you also include #18450 in that test run since that also affects libraries?",
    "created_at": "2015-06-03T06:24:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18367#issuecomment-315333",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>
Volker, did you also include #18450 in that test run since that also affects libraries?



---

archive/issue_comments_315334.json:
```json
{
    "body": "<a id='comment:14'></a>\nNo, all tickets that were included are closed by now",
    "created_at": "2015-06-03T07:40:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18367#issuecomment-315334",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:14'></a>
No, all tickets that were included are closed by now



---

archive/issue_comments_315335.json:
```json
{
    "body": "Changing commit from \"97215ae7497e2b510cc8df715b2340561b057af8\" to \"0bd4c02e112fb242060fd112e7f36a17c36a80e8\"",
    "created_at": "2015-06-03T08:22:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18367#issuecomment-315335",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "97215ae7497e2b510cc8df715b2340561b057af8" to "0bd4c02e112fb242060fd112e7f36a17c36a80e8"



---

archive/issue_comments_315336.json:
```json
{
    "body": "<a id='comment:15'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                  |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------|\n|[0bd4c02](https://github.com/sagemath/sagetrac-mirror/commit/0bd4c02e112fb242060fd112e7f36a17c36a80e8)|`linbox needs ntl`|",
    "created_at": "2015-06-03T08:22:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18367#issuecomment-315336",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                  |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------|
|[0bd4c02](https://github.com/sagemath/sagetrac-mirror/commit/0bd4c02e112fb242060fd112e7f36a17c36a80e8)|`linbox needs ntl`|



---

archive/issue_comments_315337.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-06-03T08:53:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18367#issuecomment-315337",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_315338.json:
```json
{
    "body": "<a id='comment:17'></a>\nActually info from sage-on-gentoo which is all compiled with `-as-needed` suggest a slightly different approach:\n\n```\nfbissey@QCD-nzi3 ~ $ ldd -r /usr/lib64/python2.7/site-packages/sage/matrix/matrix_modn_dense_float.so\n\tlinux-vdso.so.1 (0x00007fff24fff000)\n\tlibgivaro.so.0 => /usr/lib64/libgivaro.so.0 (0x00007f318a8ce000)\n\tlibgmp.so.10 => /usr/lib64/libgmp.so.10 (0x00007f318a65d000)\n\tlibopenblas_openmp.so.0 => /usr/lib64/libopenblas_openmp.so.0 (0x00007f318a0d5000)\n\tlibstdc++.so.6 => /usr/lib/gcc/x86_64-pc-linux-gnu/4.9.2/libstdc++.so.6 (0x00007f3189dc6000)\n\tlibpython2.7.so.1.0 => /usr/lib64/libpython2.7.so.1.0 (0x00007f3189a08000)\n\tlibm.so.6 => /lib64/libm.so.6 (0x00007f3189703000)\n\tlibgcc_s.so.1 => /usr/lib/gcc/x86_64-pc-linux-gnu/4.9.2/libgcc_s.so.1 (0x00007f31894ec000)\n\tlibc.so.6 => /lib64/libc.so.6 (0x00007f318914f000)\n\tlibgmpxx.so.4 => /usr/lib64/libgmpxx.so.4 (0x00007f3188f48000)\n\tlibpthread.so.0 => /lib64/libpthread.so.0 (0x00007f3188d2d000)\n\tlibgomp.so.1 => /usr/lib/gcc/x86_64-pc-linux-gnu/4.9.2/libgomp.so.1 (0x00007f3188b16000)\n\t/lib64/ld-linux-x86-64.so.2 (0x00007f318ade4000)\n\tlibdl.so.2 => /lib64/libdl.so.2 (0x00007f3188911000)\n\tlibutil.so.1 => /lib64/libutil.so.1 (0x00007f318870e000)\nfbissey@QCD-nzi3 ~ $ ldd -r /usr/lib64/python2.7/site-packages/sage/matrix/matrix_modn_dense_double.so\n\tlinux-vdso.so.1 (0x00007fff91dff000)\n\tlibgivaro.so.0 => /usr/lib64/libgivaro.so.0 (0x00007f9413287000)\n\tlibgmp.so.10 => /usr/lib64/libgmp.so.10 (0x00007f9413016000)\n\tlibopenblas_openmp.so.0 => /usr/lib64/libopenblas_openmp.so.0 (0x00007f9412a8e000)\n\tlibstdc++.so.6 => /usr/lib/gcc/x86_64-pc-linux-gnu/4.9.2/libstdc++.so.6 (0x00007f941277f000)\n\tlibpython2.7.so.1.0 => /usr/lib64/libpython2.7.so.1.0 (0x00007f94123c1000)\n\tlibm.so.6 => /lib64/libm.so.6 (0x00007f94120bc000)\n\tlibgcc_s.so.1 => /usr/lib/gcc/x86_64-pc-linux-gnu/4.9.2/libgcc_s.so.1 (0x00007f9411ea5000)\n\tlibc.so.6 => /lib64/libc.so.6 (0x00007f9411b08000)\n\tlibgmpxx.so.4 => /usr/lib64/libgmpxx.so.4 (0x00007f9411901000)\n\tlibpthread.so.0 => /lib64/libpthread.so.0 (0x00007f94116e6000)\n\tlibgomp.so.1 => /usr/lib/gcc/x86_64-pc-linux-gnu/4.9.2/libgomp.so.1 (0x00007f94114cf000)\n\t/lib64/ld-linux-x86-64.so.2 (0x00007f941379b000)\n\tlibdl.so.2 => /lib64/libdl.so.2 (0x00007f94112ca000)\n\tlibutil.so.1 => /lib64/libutil.so.1 (0x00007f94110c7000)\n```\nNeither of those get libntl and they don't get liblinbox either.  All the libraries are resolved so they are definitely not needed. Furthermore liblinbox doesn't need libntl. Only liblinboxsage does and curiously I don't think we ever link to it.\n\n```\nfbissey@QCD-nzi3 ~ $ ldd -r /usr/lib64/liblinbox.so\n\tlinux-vdso.so.1 (0x00007fff2d334000)\n\tlibgivaro.so.0 => /usr/lib64/libgivaro.so.0 (0x00007fbb7557f000)\n\tlibstdc++.so.6 => /usr/lib/gcc/x86_64-pc-linux-gnu/4.9.2/libstdc++.so.6 (0x00007fbb7526f000)\n\tlibc.so.6 => /lib64/libc.so.6 (0x00007fbb74ed2000)\n\tlibgcc_s.so.1 => /usr/lib/gcc/x86_64-pc-linux-gnu/4.9.2/libgcc_s.so.1 (0x00007fbb74cbb000)\n\tlibgmpxx.so.4 => /usr/lib64/libgmpxx.so.4 (0x00007fbb74ab5000)\n\tlibgmp.so.10 => /usr/lib64/libgmp.so.10 (0x00007fbb74843000)\n\tlibm.so.6 => /lib64/libm.so.6 (0x00007fbb7453f000)\n\t/lib64/ld-linux-x86-64.so.2 (0x00007fbb75a18000)\nfbissey@QCD-nzi3 ~ $ ldd -r /usr/lib64/liblinboxsage.so\n\tlinux-vdso.so.1 (0x00007ffffbbcf000)\n\tlibgmpxx.so.4 => /usr/lib64/libgmpxx.so.4 (0x00007fed8461a000)\n\tlibntl.so.5 => /usr/lib64/libntl.so.5 (0x00007fed84260000)\n\tlibgmp.so.10 => /usr/lib64/libgmp.so.10 (0x00007fed83fee000)\n\tlibgf2x.so.1 => /usr/lib64/libgf2x.so.1 (0x00007fed83dd9000)\n\tlibopenblas_openmp.so.0 => /usr/lib64/libopenblas_openmp.so.0 (0x00007fed83852000)\n\tliblinbox.so.0 => /usr/lib64/liblinbox.so.0 (0x00007fed8364a000)\n\tlibgivaro.so.0 => /usr/lib64/libgivaro.so.0 (0x00007fed833ee000)\n\tlibiml.so.0 => /usr/lib64/libiml.so.0 (0x00007fed831cd000)\n\tlibstdc++.so.6 => /usr/lib/gcc/x86_64-pc-linux-gnu/4.9.2/libstdc++.so.6 (0x00007fed82ebd000)\n\tlibm.so.6 => /lib64/libm.so.6 (0x00007fed82bb9000)\n\tlibc.so.6 => /lib64/libc.so.6 (0x00007fed8281c000)\n\tlibgcc_s.so.1 => /usr/lib/gcc/x86_64-pc-linux-gnu/4.9.2/libgcc_s.so.1 (0x00007fed82604000)\n\tlibpthread.so.0 => /lib64/libpthread.so.0 (0x00007fed823e9000)\n\tlibgomp.so.1 => /usr/lib/gcc/x86_64-pc-linux-gnu/4.9.2/libgomp.so.1 (0x00007fed821d2000)\n\t/lib64/ld-linux-x86-64.so.2 (0x00007fed84ca3000)\n```\nIn the first instance Jeroen's latest commit would solve the present problem though.",
    "created_at": "2015-06-03T08:56:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18367#issuecomment-315338",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:17'></a>
Actually info from sage-on-gentoo which is all compiled with `-as-needed` suggest a slightly different approach:

```
fbissey@QCD-nzi3 ~ $ ldd -r /usr/lib64/python2.7/site-packages/sage/matrix/matrix_modn_dense_float.so
	linux-vdso.so.1 (0x00007fff24fff000)
	libgivaro.so.0 => /usr/lib64/libgivaro.so.0 (0x00007f318a8ce000)
	libgmp.so.10 => /usr/lib64/libgmp.so.10 (0x00007f318a65d000)
	libopenblas_openmp.so.0 => /usr/lib64/libopenblas_openmp.so.0 (0x00007f318a0d5000)
	libstdc++.so.6 => /usr/lib/gcc/x86_64-pc-linux-gnu/4.9.2/libstdc++.so.6 (0x00007f3189dc6000)
	libpython2.7.so.1.0 => /usr/lib64/libpython2.7.so.1.0 (0x00007f3189a08000)
	libm.so.6 => /lib64/libm.so.6 (0x00007f3189703000)
	libgcc_s.so.1 => /usr/lib/gcc/x86_64-pc-linux-gnu/4.9.2/libgcc_s.so.1 (0x00007f31894ec000)
	libc.so.6 => /lib64/libc.so.6 (0x00007f318914f000)
	libgmpxx.so.4 => /usr/lib64/libgmpxx.so.4 (0x00007f3188f48000)
	libpthread.so.0 => /lib64/libpthread.so.0 (0x00007f3188d2d000)
	libgomp.so.1 => /usr/lib/gcc/x86_64-pc-linux-gnu/4.9.2/libgomp.so.1 (0x00007f3188b16000)
	/lib64/ld-linux-x86-64.so.2 (0x00007f318ade4000)
	libdl.so.2 => /lib64/libdl.so.2 (0x00007f3188911000)
	libutil.so.1 => /lib64/libutil.so.1 (0x00007f318870e000)
fbissey@QCD-nzi3 ~ $ ldd -r /usr/lib64/python2.7/site-packages/sage/matrix/matrix_modn_dense_double.so
	linux-vdso.so.1 (0x00007fff91dff000)
	libgivaro.so.0 => /usr/lib64/libgivaro.so.0 (0x00007f9413287000)
	libgmp.so.10 => /usr/lib64/libgmp.so.10 (0x00007f9413016000)
	libopenblas_openmp.so.0 => /usr/lib64/libopenblas_openmp.so.0 (0x00007f9412a8e000)
	libstdc++.so.6 => /usr/lib/gcc/x86_64-pc-linux-gnu/4.9.2/libstdc++.so.6 (0x00007f941277f000)
	libpython2.7.so.1.0 => /usr/lib64/libpython2.7.so.1.0 (0x00007f94123c1000)
	libm.so.6 => /lib64/libm.so.6 (0x00007f94120bc000)
	libgcc_s.so.1 => /usr/lib/gcc/x86_64-pc-linux-gnu/4.9.2/libgcc_s.so.1 (0x00007f9411ea5000)
	libc.so.6 => /lib64/libc.so.6 (0x00007f9411b08000)
	libgmpxx.so.4 => /usr/lib64/libgmpxx.so.4 (0x00007f9411901000)
	libpthread.so.0 => /lib64/libpthread.so.0 (0x00007f94116e6000)
	libgomp.so.1 => /usr/lib/gcc/x86_64-pc-linux-gnu/4.9.2/libgomp.so.1 (0x00007f94114cf000)
	/lib64/ld-linux-x86-64.so.2 (0x00007f941379b000)
	libdl.so.2 => /lib64/libdl.so.2 (0x00007f94112ca000)
	libutil.so.1 => /lib64/libutil.so.1 (0x00007f94110c7000)
```
Neither of those get libntl and they don't get liblinbox either.  All the libraries are resolved so they are definitely not needed. Furthermore liblinbox doesn't need libntl. Only liblinboxsage does and curiously I don't think we ever link to it.

```
fbissey@QCD-nzi3 ~ $ ldd -r /usr/lib64/liblinbox.so
	linux-vdso.so.1 (0x00007fff2d334000)
	libgivaro.so.0 => /usr/lib64/libgivaro.so.0 (0x00007fbb7557f000)
	libstdc++.so.6 => /usr/lib/gcc/x86_64-pc-linux-gnu/4.9.2/libstdc++.so.6 (0x00007fbb7526f000)
	libc.so.6 => /lib64/libc.so.6 (0x00007fbb74ed2000)
	libgcc_s.so.1 => /usr/lib/gcc/x86_64-pc-linux-gnu/4.9.2/libgcc_s.so.1 (0x00007fbb74cbb000)
	libgmpxx.so.4 => /usr/lib64/libgmpxx.so.4 (0x00007fbb74ab5000)
	libgmp.so.10 => /usr/lib64/libgmp.so.10 (0x00007fbb74843000)
	libm.so.6 => /lib64/libm.so.6 (0x00007fbb7453f000)
	/lib64/ld-linux-x86-64.so.2 (0x00007fbb75a18000)
fbissey@QCD-nzi3 ~ $ ldd -r /usr/lib64/liblinboxsage.so
	linux-vdso.so.1 (0x00007ffffbbcf000)
	libgmpxx.so.4 => /usr/lib64/libgmpxx.so.4 (0x00007fed8461a000)
	libntl.so.5 => /usr/lib64/libntl.so.5 (0x00007fed84260000)
	libgmp.so.10 => /usr/lib64/libgmp.so.10 (0x00007fed83fee000)
	libgf2x.so.1 => /usr/lib64/libgf2x.so.1 (0x00007fed83dd9000)
	libopenblas_openmp.so.0 => /usr/lib64/libopenblas_openmp.so.0 (0x00007fed83852000)
	liblinbox.so.0 => /usr/lib64/liblinbox.so.0 (0x00007fed8364a000)
	libgivaro.so.0 => /usr/lib64/libgivaro.so.0 (0x00007fed833ee000)
	libiml.so.0 => /usr/lib64/libiml.so.0 (0x00007fed831cd000)
	libstdc++.so.6 => /usr/lib/gcc/x86_64-pc-linux-gnu/4.9.2/libstdc++.so.6 (0x00007fed82ebd000)
	libm.so.6 => /lib64/libm.so.6 (0x00007fed82bb9000)
	libc.so.6 => /lib64/libc.so.6 (0x00007fed8281c000)
	libgcc_s.so.1 => /usr/lib/gcc/x86_64-pc-linux-gnu/4.9.2/libgcc_s.so.1 (0x00007fed82604000)
	libpthread.so.0 => /lib64/libpthread.so.0 (0x00007fed823e9000)
	libgomp.so.1 => /usr/lib/gcc/x86_64-pc-linux-gnu/4.9.2/libgomp.so.1 (0x00007fed821d2000)
	/lib64/ld-linux-x86-64.so.2 (0x00007fed84ca3000)
```
In the first instance Jeroen's latest commit would solve the present problem though.



---

archive/issue_comments_315339.json:
```json
{
    "body": "<a id='comment:18'></a>\nHowever, I will go with caution. Because #18450 could have brought something in, that I cannot see yet, in this ticket. The commit looks good to me.",
    "created_at": "2015-06-03T09:02:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18367#issuecomment-315339",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:18'></a>
However, I will go with caution. Because #18450 could have brought something in, that I cannot see yet, in this ticket. The commit looks good to me.



---

archive/issue_comments_315340.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-06-03T09:02:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18367#issuecomment-315340",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_315341.json:
```json
{
    "body": "<a id='comment:19'></a>\nOK, maybe the commit message was wrong, but at least the fix works...",
    "created_at": "2015-06-03T09:19:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18367#issuecomment-315341",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:19'></a>
OK, maybe the commit message was wrong, but at least the fix works...



---

archive/issue_comments_315342.json:
```json
{
    "body": "<a id='comment:20'></a>\nInterestingly you have that stuff in the commit for #17854, which now may need some rebasing?",
    "created_at": "2015-06-03T09:52:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18367#issuecomment-315342",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:20'></a>
Interestingly you have that stuff in the commit for #17854, which now may need some rebasing?



---

archive/issue_comments_315343.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [fbissey](#comment%3A20):\n> Interestingly you have that stuff in the commit for #17854, which now may need some rebasing?\n\n\nCool git tip: if you make an *identical change* in two different commits, git recognizes that and it doesn't cause a conflict.",
    "created_at": "2015-06-03T10:00:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18367#issuecomment-315343",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:21'></a>
Replying to [fbissey](#comment%3A20):
> Interestingly you have that stuff in the commit for #17854, which now may need some rebasing?


Cool git tip: if you make an *identical change* in two different commits, git recognizes that and it doesn't cause a conflict.



---

archive/issue_comments_315344.json:
```json
{
    "body": "Changing branch from \"u/jdemeyer/move_ntl_wrap_to_sage_library\" to \"0bd4c02e112fb242060fd112e7f36a17c36a80e8\"",
    "created_at": "2015-06-03T23:22:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18367#issuecomment-315344",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/jdemeyer/move_ntl_wrap_to_sage_library" to "0bd4c02e112fb242060fd112e7f36a17c36a80e8"



---

archive/issue_events_066691.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-06-03T23:22:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18367",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18367#event-66691"
}
```



---

archive/issue_comments_315345.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-06-03T23:22:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18367",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18367#issuecomment-315345",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
