# Issue 18732: Add tableau query functions glp_eval_tab_row, glp_eval_tab_col to GLPK backend

archive/issues_018495.json:
```json
{
    "body": "Expose the GLPK functions glp_eval_tab_row, glp_eval_tab_col in Sage's GLPKBackend class.\n\nSee [GLPK manual](http://fossies.org/linux/glpk/doc/glpk.pdf), section 4.3 \"Simplex tableau routines\".\n\nOne needs these functions if one wants to implement tableau cutting planes such as Gomory's fractional cut.\n\n\n\n**CC:**  @nathanncohen @yuan-zhou zwang @jdemeyer\n\n**Keywords:** LP, glpk\n\n**Branch/Commit:** [3c0da609a36bd5832cf6a9f11895e993971731c4](https://github.com/sagemath/sagetrac-mirror/commit/3c0da609a36bd5832cf6a9f11895e993971731c4)\n\n**Reviewer:** Nathann Cohen\n\n**Author:** Yuan Zhou, Matthias Koeppe\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/18732\n\n",
    "closed_at": "2015-06-24T11:37:10Z",
    "created_at": "2015-06-19T03:05:56Z",
    "labels": [
        "component: numerical"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.8",
    "title": "Add tableau query functions glp_eval_tab_row, glp_eval_tab_col to GLPK backend",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18732",
    "user": "https://github.com/mkoeppe"
}
```
Expose the GLPK functions glp_eval_tab_row, glp_eval_tab_col in Sage's GLPKBackend class.

See [GLPK manual](http://fossies.org/linux/glpk/doc/glpk.pdf), section 4.3 "Simplex tableau routines".

One needs these functions if one wants to implement tableau cutting planes such as Gomory's fractional cut.



**CC:**  @nathanncohen @yuan-zhou zwang @jdemeyer

**Keywords:** LP, glpk

**Branch/Commit:** [3c0da609a36bd5832cf6a9f11895e993971731c4](https://github.com/sagemath/sagetrac-mirror/commit/3c0da609a36bd5832cf6a9f11895e993971731c4)

**Reviewer:** Nathann Cohen

**Author:** Yuan Zhou, Matthias Koeppe

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/18732





---

archive/issue_comments_333630.json:
```json
{
    "body": "**Changing author** from \"ncohen, yzh\" to \"\".",
    "created_at": "2015-06-19T03:45:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18732#issuecomment-333630",
    "user": "https://github.com/yuan-zhou"
}
```

**Changing author** from "ncohen, yzh" to "".



---

archive/issue_comments_333631.json:
```json
{
    "body": "**Branch:** [u/yzh/add_tableau_query_functions_glp_eval_tab_row__glp_eval_tab_col_to_glpk_backend](https://github.com/sagemath/sagetrac-mirror/tree/u/yzh/add_tableau_query_functions_glp_eval_tab_row__glp_eval_tab_col_to_glpk_backend)",
    "created_at": "2015-06-21T10:46:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18732#issuecomment-333631",
    "user": "https://github.com/yuan-zhou"
}
```

**Branch:** [u/yzh/add_tableau_query_functions_glp_eval_tab_row__glp_eval_tab_col_to_glpk_backend](https://github.com/sagemath/sagetrac-mirror/tree/u/yzh/add_tableau_query_functions_glp_eval_tab_row__glp_eval_tab_col_to_glpk_backend)



---

archive/issue_comments_333632.json:
```json
{
    "body": "**Commit:** [380dfb55b3966cd836fa1fbdc8325a9b3df8920e](https://github.com/sagemath/sagetrac-mirror/commit/380dfb55b3966cd836fa1fbdc8325a9b3df8920e)",
    "created_at": "2015-06-21T10:52:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18732#issuecomment-333632",
    "user": "https://github.com/nathanncohen"
}
```

**Commit:** [380dfb55b3966cd836fa1fbdc8325a9b3df8920e](https://github.com/sagemath/sagetrac-mirror/commit/380dfb55b3966cd836fa1fbdc8325a9b3df8920e)



---

archive/issue_comments_333633.json:
```json
{
    "body": "<a id='comment:4'></a>\nHello !\n\nCould you allocate memory *after* raising an exception? Otherwise, those exceptions trigger memory leaks.\n\n`sig_on` and `sig_off` should always appear in pairs, but perhaps you should use `sig_check` in this special case?\nhttp://www.sagemath.org/documentation/html/en/developer/coding_in_cython.html#interrupt-and-signal-handling\n\nCan you check that the pointers you allocate are not 'null'?\n\nNathann\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/380dfb55b3966cd836fa1fbdc8325a9b3df8920e\">380dfb5</a></td><td><code>Add tableau query functions eval_tab_row, eval_tab_col to GLPK backend.</code></td></tr></table>\n",
    "created_at": "2015-06-21T10:52:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18732#issuecomment-333633",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:4'></a>
Hello !

Could you allocate memory *after* raising an exception? Otherwise, those exceptions trigger memory leaks.

`sig_on` and `sig_off` should always appear in pairs, but perhaps you should use `sig_check` in this special case?
http://www.sagemath.org/documentation/html/en/developer/coding_in_cython.html#interrupt-and-signal-handling

Can you check that the pointers you allocate are not 'null'?

Nathann

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/380dfb55b3966cd836fa1fbdc8325a9b3df8920e">380dfb5</a></td><td><code>Add tableau query functions eval_tab_row, eval_tab_col to GLPK backend.</code></td></tr></table>




---

archive/issue_comments_333634.json:
```json
{
    "body": "<a id='comment:5'></a>\nBonjour Nathann,\n\nThanks for the reference! It says that `sig_str` behaves the same as `sig_on`. I just mimic the code in the `GLPKBackend.solve` and `GLPKBackend.row` methods.\n\nDoes one need to deallocate the memory if an Error is raised between `sig_on` and `sig_off`?\n\nHow to check that the pointers are not 'null'?\n\nYuan",
    "created_at": "2015-06-21T11:16:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18732#issuecomment-333634",
    "user": "https://github.com/yuan-zhou"
}
```

<a id='comment:5'></a>
Bonjour Nathann,

Thanks for the reference! It says that `sig_str` behaves the same as `sig_on`. I just mimic the code in the `GLPKBackend.solve` and `GLPKBackend.row` methods.

Does one need to deallocate the memory if an Error is raised between `sig_on` and `sig_off`?

How to check that the pointers are not 'null'?

Yuan



---

archive/issue_comments_333635.json:
```json
{
    "body": "<a id='comment:6'></a>\nHelloooooo,\n\n> Thanks for the reference! It says that `sig_str` behaves the same as `sig_on`.\n\n\nOh. My mistake. I did not notice `sig_str`, and did not even know about it. Sorry.\n\n> Does one need to deallocate the memory if an Error is raised between `sig_on` and `sig_off`?\n\n\nWell, if you allocate memory somewhere and the function ends, then it is never deallocated. If you can avoid this easily, it is better to do it.\n\n> How to check that the pointers are not 'null'?\n\n\nwith \"if my_pointer == NULL\" ?\n\nNathann",
    "created_at": "2015-06-21T11:19:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18732#issuecomment-333635",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:6'></a>
Helloooooo,

> Thanks for the reference! It says that `sig_str` behaves the same as `sig_on`.


Oh. My mistake. I did not notice `sig_str`, and did not even know about it. Sorry.

> Does one need to deallocate the memory if an Error is raised between `sig_on` and `sig_off`?


Well, if you allocate memory somewhere and the function ends, then it is never deallocated. If you can avoid this easily, it is better to do it.

> How to check that the pointers are not 'null'?


with "if my_pointer == NULL" ?

Nathann



---

archive/issue_comments_333636.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1cf22a926b785affdf53e33ea30c539850ae406a\">1cf22a9</a></td><td><code>Fix memory leaks and check null pointer in eval_tab_row(), eval_tab_col().</code></td></tr></table>\n",
    "created_at": "2015-06-21T22:01:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18732#issuecomment-333636",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1cf22a926b785affdf53e33ea30c539850ae406a">1cf22a9</a></td><td><code>Fix memory leaks and check null pointer in eval_tab_row(), eval_tab_col().</code></td></tr></table>




---

archive/issue_comments_333637.json:
```json
{
    "body": "**Changing commit** from \"[380dfb55b3966cd836fa1fbdc8325a9b3df8920e](https://github.com/sagemath/sagetrac-mirror/commit/380dfb55b3966cd836fa1fbdc8325a9b3df8920e)\" to \"[1cf22a926b785affdf53e33ea30c539850ae406a](https://github.com/sagemath/sagetrac-mirror/commit/1cf22a926b785affdf53e33ea30c539850ae406a)\".",
    "created_at": "2015-06-21T22:01:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18732#issuecomment-333637",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[380dfb55b3966cd836fa1fbdc8325a9b3df8920e](https://github.com/sagemath/sagetrac-mirror/commit/380dfb55b3966cd836fa1fbdc8325a9b3df8920e)" to "[1cf22a926b785affdf53e33ea30c539850ae406a](https://github.com/sagemath/sagetrac-mirror/commit/1cf22a926b785affdf53e33ea30c539850ae406a)".



---

archive/issue_comments_333638.json:
```json
{
    "body": "<a id='comment:8'></a>\nIt now raises `MIPSolverException` if GLPK returns an error message \"basis factorization does not exist\". Memory checks are also added. Please review.",
    "created_at": "2015-06-21T22:08:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18732#issuecomment-333638",
    "user": "https://github.com/yuan-zhou"
}
```

<a id='comment:8'></a>
It now raises `MIPSolverException` if GLPK returns an error message "basis factorization does not exist". Memory checks are also added. Please review.



---

archive/issue_comments_333639.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2015-06-21T22:08:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18732#issuecomment-333639",
    "user": "https://github.com/yuan-zhou"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_333640.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2015-06-22T21:44:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18732#issuecomment-333640",
    "user": "https://github.com/nathanncohen"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_333641.json:
```json
{
    "body": "<a id='comment:9'></a>\n\n```\n+        cdef int * c_indices = <int*> sage_malloc((n+1)*sizeof(int))\n+        if c_indices == NULL:\n+            raise MemoryError(\"failed to allocate %s bytes\" % ((n+1)*sizeof(int)))\n+        cdef double * c_values = <double*> sage_malloc((n+1)*sizeof(double))\n+        if c_values == NULL:\n+            sage_free(c_indices)\n+            raise MemoryError(\"failed to allocate %s bytes\" % ((n+1)*sizeof(double)))\n```\n\ncan be replaced by \n\n```\n+        cdef int * c_indices = <int*> sage_malloc((n+1)*sizeof(int))\n+        cdef double * c_values = <double*> sage_malloc((n+1)*sizeof(double))\n+        if c_indices == NULL or c_values == NULL:\n+            raise MemoryError\n```\n\nThis occurs twice.\n\n```\nfor 0 < j <= i:}}} is \"old-style\", you should use \"for j in range(i)\" instead, which is translated into the very same C code.\n\nFinally, this piece of code had bad side-effects:\n\n{{{\n+        try:\n+            sig_on()\n+            i = glp_eval_tab_row(self.lp, k + 1, c_indices, c_values)\n+            sig_off()\n+        except Exception:\n+            sage_free(c_indices)\n+            sage_free(c_values)\n+            raise MIPSolverException('GLPK : basis factorization does not exist')\n}}}\n\nIndeed, as it catches everything and only raises MIPSolverException, it can transform a KeyboardInterrupt into a \"GLPK: basis factorization does not exist\". And of course the C function `glp_eval_tab_row` cannot be expected to raise any exception.\n\nI don't think that it is worth adding a sig_on/sig_off in this function, considering how short it is. \n\nNathann",
    "created_at": "2015-06-22T21:44:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18732#issuecomment-333641",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:9'></a>

```
+        cdef int * c_indices = <int*> sage_malloc((n+1)*sizeof(int))
+        if c_indices == NULL:
+            raise MemoryError("failed to allocate %s bytes" % ((n+1)*sizeof(int)))
+        cdef double * c_values = <double*> sage_malloc((n+1)*sizeof(double))
+        if c_values == NULL:
+            sage_free(c_indices)
+            raise MemoryError("failed to allocate %s bytes" % ((n+1)*sizeof(double)))
```

can be replaced by 

```
+        cdef int * c_indices = <int*> sage_malloc((n+1)*sizeof(int))
+        cdef double * c_values = <double*> sage_malloc((n+1)*sizeof(double))
+        if c_indices == NULL or c_values == NULL:
+            raise MemoryError
```

This occurs twice.

```
for 0 < j <= i:}}} is "old-style", you should use "for j in range(i)" instead, which is translated into the very same C code.

Finally, this piece of code had bad side-effects:

{{{
+        try:
+            sig_on()
+            i = glp_eval_tab_row(self.lp, k + 1, c_indices, c_values)
+            sig_off()
+        except Exception:
+            sage_free(c_indices)
+            sage_free(c_values)
+            raise MIPSolverException('GLPK : basis factorization does not exist')
}}}

Indeed, as it catches everything and only raises MIPSolverException, it can transform a KeyboardInterrupt into a "GLPK: basis factorization does not exist". And of course the C function `glp_eval_tab_row` cannot be expected to raise any exception.

I don't think that it is worth adding a sig_on/sig_off in this function, considering how short it is. 

Nathann



---

archive/issue_comments_333642.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [ncohen](#comment%3A9):\n> \n> ```\n> +        cdef int * c_indices = <int*> sage_malloc((n+1)*sizeof(int))\n> +        if c_indices == NULL:\n> +            raise MemoryError(\"failed to allocate %s bytes\" % ((n+1)*sizeof(int)))\n> +        cdef double * c_values = <double*> sage_malloc((n+1)*sizeof(double))\n> +        if c_values == NULL:\n> +            sage_free(c_indices)\n> +            raise MemoryError(\"failed to allocate %s bytes\" % ((n+1)*sizeof(double)))\n> ```\n> \n> can be replaced by \n> \n> \n> ```\n> +        cdef int * c_indices = <int*> sage_malloc((n+1)*sizeof(int))\n> +        cdef double * c_values = <double*> sage_malloc((n+1)*sizeof(double))\n> +        if c_indices == NULL or c_values == NULL:\n> +            raise MemoryError\n> ```\n> \n> This occurs twice.\n\n\nNathann, if the second allocation fails, your version would leak the memory of the first allocation. \n\n\n\n> ```\n> for 0 < j <= i:}}} is \"old-style\", you should use \"for j in range(i)\" instead, which is translated into the very same C code.\n> \n> Finally, this piece of code had bad side-effects:\n> \n> {{{\n> +        try:\n> +            sig_on()\n> +            i = glp_eval_tab_row(self.lp, k + 1, c_indices, c_values)\n> +            sig_off()\n> +        except Exception:\n> +            sage_free(c_indices)\n> +            sage_free(c_values)\n> +            raise MIPSolverException('GLPK : basis factorization does not exist')\n> }}}\n> \n> Indeed, as it catches everything and only raises MIPSolverException, it can transform a KeyboardInterrupt into a \"GLPK: basis factorization does not exist\". And of course the C function `glp_eval_tab_row` cannot be expected to raise any exception.\n> \n> I don't think that it is worth adding a sig_on/sig_off in this function, considering how short it is. \n\n\nsig_on/sig_off catches all kinds of signals, and here it is used to catch SIGABRT, which GLPK invokes via abort() whenever there is an error. \n\nIs there a way to distinguish which signal was caught?",
    "created_at": "2015-06-22T22:28:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18732#issuecomment-333642",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>
Replying to [ncohen](#comment%3A9):
> 
> ```
> +        cdef int * c_indices = <int*> sage_malloc((n+1)*sizeof(int))
> +        if c_indices == NULL:
> +            raise MemoryError("failed to allocate %s bytes" % ((n+1)*sizeof(int)))
> +        cdef double * c_values = <double*> sage_malloc((n+1)*sizeof(double))
> +        if c_values == NULL:
> +            sage_free(c_indices)
> +            raise MemoryError("failed to allocate %s bytes" % ((n+1)*sizeof(double)))
> ```
> 
> can be replaced by 
> 
> 
> ```
> +        cdef int * c_indices = <int*> sage_malloc((n+1)*sizeof(int))
> +        cdef double * c_values = <double*> sage_malloc((n+1)*sizeof(double))
> +        if c_indices == NULL or c_values == NULL:
> +            raise MemoryError
> ```
> 
> This occurs twice.


Nathann, if the second allocation fails, your version would leak the memory of the first allocation. 



> ```
> for 0 < j <= i:}}} is "old-style", you should use "for j in range(i)" instead, which is translated into the very same C code.
> 
> Finally, this piece of code had bad side-effects:
> 
> {{{
> +        try:
> +            sig_on()
> +            i = glp_eval_tab_row(self.lp, k + 1, c_indices, c_values)
> +            sig_off()
> +        except Exception:
> +            sage_free(c_indices)
> +            sage_free(c_values)
> +            raise MIPSolverException('GLPK : basis factorization does not exist')
> }}}
> 
> Indeed, as it catches everything and only raises MIPSolverException, it can transform a KeyboardInterrupt into a "GLPK: basis factorization does not exist". And of course the C function `glp_eval_tab_row` cannot be expected to raise any exception.
> 
> I don't think that it is worth adding a sig_on/sig_off in this function, considering how short it is. 


sig_on/sig_off catches all kinds of signals, and here it is used to catch SIGABRT, which GLPK invokes via abort() whenever there is an error. 

Is there a way to distinguish which signal was caught?



---

archive/issue_comments_333643.json:
```json
{
    "body": "<a id='comment:12'></a>\n> Nathann, if the second allocation fails, your version would leak the memory of the first allocation. \n\n\nSorry, I wrote this yesterday evening just before going to sleep and I was exhausted:\n\n```\n+        cdef int * c_indices = <int*> sage_malloc((n+1)*sizeof(int))\n+        cdef double * c_values = <double*> sage_malloc((n+1)*sizeof(double))\n+        if c_indices == NULL or c_values == NULL:\n+            sage_free(c_indices)\n+            sage_free(c_values)\n+            raise MemoryError\n```\n\n> sig_on/sig_off catches all kinds of signals, and here it is used to catch SIGABRT, which GLPK invokes via abort() whenever there is an error. \n\n\nOh, okay. Sorry.\n\n> Is there a way to distinguish which signal was caught?\n\n\nJust type \"raise\" instead of \"raise <something>\". It will raise what was caught. You can also use this model:\n\n```\ntry:\n    your_glpk_function(...)\nelse: # only executed if everything went well\n    <copy the C data wherever you need>\nfinally: #whatever happens\n    <free the memory>\nreturn <whatever you need> \n```\n\nAlso, I don't think you should both with a loop of 'append'. Something like `values = [c_values[j] for j in range(i)]` works fine.\n\nNathann",
    "created_at": "2015-06-23T07:20:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18732#issuecomment-333643",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:12'></a>
> Nathann, if the second allocation fails, your version would leak the memory of the first allocation. 


Sorry, I wrote this yesterday evening just before going to sleep and I was exhausted:

```
+        cdef int * c_indices = <int*> sage_malloc((n+1)*sizeof(int))
+        cdef double * c_values = <double*> sage_malloc((n+1)*sizeof(double))
+        if c_indices == NULL or c_values == NULL:
+            sage_free(c_indices)
+            sage_free(c_values)
+            raise MemoryError
```

> sig_on/sig_off catches all kinds of signals, and here it is used to catch SIGABRT, which GLPK invokes via abort() whenever there is an error. 


Oh, okay. Sorry.

> Is there a way to distinguish which signal was caught?


Just type "raise" instead of "raise <something>". It will raise what was caught. You can also use this model:

```
try:
    your_glpk_function(...)
else: # only executed if everything went well
    <copy the C data wherever you need>
finally: #whatever happens
    <free the memory>
return <whatever you need> 
```

Also, I don't think you should both with a loop of 'append'. Something like `values = [c_values[j] for j in range(i)]` works fine.

Nathann



---

archive/issue_comments_333644.json:
```json
{
    "body": "**Changing branch** from \"[u/yzh/add_tableau_query_functions_glp_eval_tab_row__glp_eval_tab_col_to_glpk_backend](https://github.com/sagemath/sagetrac-mirror/tree/u/yzh/add_tableau_query_functions_glp_eval_tab_row__glp_eval_tab_col_to_glpk_backend)\" to \"[u/mkoeppe/add_tableau_query_functions_glp_eval_tab_row__glp_eval_tab_col_to_glpk_backend](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/add_tableau_query_functions_glp_eval_tab_row__glp_eval_tab_col_to_glpk_backend)\".",
    "created_at": "2015-06-23T07:42:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18732#issuecomment-333644",
    "user": "https://github.com/mkoeppe"
}
```

**Changing branch** from "[u/yzh/add_tableau_query_functions_glp_eval_tab_row__glp_eval_tab_col_to_glpk_backend](https://github.com/sagemath/sagetrac-mirror/tree/u/yzh/add_tableau_query_functions_glp_eval_tab_row__glp_eval_tab_col_to_glpk_backend)" to "[u/mkoeppe/add_tableau_query_functions_glp_eval_tab_row__glp_eval_tab_col_to_glpk_backend](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/add_tableau_query_functions_glp_eval_tab_row__glp_eval_tab_col_to_glpk_backend)".



---

archive/issue_comments_333645.json:
```json
{
    "body": "**Changing commit** from \"[1cf22a926b785affdf53e33ea30c539850ae406a](https://github.com/sagemath/sagetrac-mirror/commit/1cf22a926b785affdf53e33ea30c539850ae406a)\" to \"[3eeebfcaf555629b3041d0ad4e10fd097365de65](https://github.com/sagemath/sagetrac-mirror/commit/3eeebfcaf555629b3041d0ad4e10fd097365de65)\".",
    "created_at": "2015-06-23T07:53:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18732#issuecomment-333645",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[1cf22a926b785affdf53e33ea30c539850ae406a](https://github.com/sagemath/sagetrac-mirror/commit/1cf22a926b785affdf53e33ea30c539850ae406a)" to "[3eeebfcaf555629b3041d0ad4e10fd097365de65](https://github.com/sagemath/sagetrac-mirror/commit/3eeebfcaf555629b3041d0ad4e10fd097365de65)".



---

archive/issue_comments_333646.json:
```json
{
    "body": "<a id='comment:14'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3eeebfcaf555629b3041d0ad4e10fd097365de65\">3eeebfc</a></td><td><code>Restructure with try..except..else..finally. Use list comprehension instead of append.</code></td></tr></table>\n",
    "created_at": "2015-06-23T07:53:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18732#issuecomment-333646",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3eeebfcaf555629b3041d0ad4e10fd097365de65">3eeebfc</a></td><td><code>Restructure with try..except..else..finally. Use list comprehension instead of append.</code></td></tr></table>




---

archive/issue_comments_333647.json:
```json
{
    "body": "<a id='comment:15'></a>\nThanks for the suggestions; I've made these changes. Needs review.",
    "created_at": "2015-06-23T07:55:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18732#issuecomment-333647",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'></a>
Thanks for the suggestions; I've made these changes. Needs review.



---

archive/issue_comments_333648.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2015-06-23T07:55:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18732#issuecomment-333648",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_333649.json:
```json
{
    "body": "<a id='comment:16'></a>\n`except Exception: raise` is useless, isn't it?\n\nCould you also update the malloc blocks?",
    "created_at": "2015-06-23T08:02:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18732#issuecomment-333649",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:16'></a>
`except Exception: raise` is useless, isn't it?

Could you also update the malloc blocks?



---

archive/issue_comments_333650.json:
```json
{
    "body": "<a id='comment:17'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/268eceb146ae99da8f970906be5ea36b8755ded5\">268eceb</a></td><td><code>Simplify memory allocation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e2b25e2ace4888a84140b1f52165cea19653f9e0\">e2b25e2</a></td><td><code>Simplify try statements</code></td></tr></table>\n",
    "created_at": "2015-06-23T18:45:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18732#issuecomment-333650",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/268eceb146ae99da8f970906be5ea36b8755ded5">268eceb</a></td><td><code>Simplify memory allocation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e2b25e2ace4888a84140b1f52165cea19653f9e0">e2b25e2</a></td><td><code>Simplify try statements</code></td></tr></table>




---

archive/issue_comments_333651.json:
```json
{
    "body": "**Changing commit** from \"[3eeebfcaf555629b3041d0ad4e10fd097365de65](https://github.com/sagemath/sagetrac-mirror/commit/3eeebfcaf555629b3041d0ad4e10fd097365de65)\" to \"[e2b25e2ace4888a84140b1f52165cea19653f9e0](https://github.com/sagemath/sagetrac-mirror/commit/e2b25e2ace4888a84140b1f52165cea19653f9e0)\".",
    "created_at": "2015-06-23T18:45:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18732#issuecomment-333651",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[3eeebfcaf555629b3041d0ad4e10fd097365de65](https://github.com/sagemath/sagetrac-mirror/commit/3eeebfcaf555629b3041d0ad4e10fd097365de65)" to "[e2b25e2ace4888a84140b1f52165cea19653f9e0](https://github.com/sagemath/sagetrac-mirror/commit/e2b25e2ace4888a84140b1f52165cea19653f9e0)".



---

archive/issue_comments_333652.json:
```json
{
    "body": "<a id='comment:18'></a>\nReplying to [ncohen](#comment%3A16):\n> `except Exception: raise` is useless, isn't it?\n\n\nYou are right, of course. I've removed it.\n\n> Could you also update the malloc blocks?\n\n\nDone.",
    "created_at": "2015-06-23T18:45:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18732#issuecomment-333652",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'></a>
Replying to [ncohen](#comment%3A16):
> `except Exception: raise` is useless, isn't it?


You are right, of course. I've removed it.

> Could you also update the malloc blocks?


Done.



---

archive/issue_comments_333653.json:
```json
{
    "body": "**Reviewer:** Nathann Cohen",
    "created_at": "2015-06-23T21:54:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18732#issuecomment-333653",
    "user": "https://github.com/nathanncohen"
}
```

**Reviewer:** Nathann Cohen



---

archive/issue_comments_333654.json:
```json
{
    "body": "<a id='comment:19'></a>\nHello !\n\nI made some modifications, in a commit at public/18732:\n\n- The first line of each docstring must be a short sentence describing what the function does\n\n- Some inequations could be turned into latex formulas\n\n- A row/col problem? Please check\n\n  ```\n-        cdef int n = glp_get_num_rows(self.lp)\n+        cdef int n = glp_get_num_cols(self.lp)\n  ```\n\nIf you agree with this, you can set the ticket's status to `positive_review`.\n\nNathann\n\nP.S.: Please fill the 'author' field.",
    "created_at": "2015-06-23T21:54:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18732#issuecomment-333654",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:19'></a>
Hello !

I made some modifications, in a commit at public/18732:

- The first line of each docstring must be a short sentence describing what the function does

- Some inequations could be turned into latex formulas

- A row/col problem? Please check

  ```
-        cdef int n = glp_get_num_rows(self.lp)
+        cdef int n = glp_get_num_cols(self.lp)
  ```

If you agree with this, you can set the ticket's status to `positive_review`.

Nathann

P.S.: Please fill the 'author' field.



---

archive/issue_comments_333655.json:
```json
{
    "body": "**Changing branch** from \"[u/mkoeppe/add_tableau_query_functions_glp_eval_tab_row__glp_eval_tab_col_to_glpk_backend](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/add_tableau_query_functions_glp_eval_tab_row__glp_eval_tab_col_to_glpk_backend)\" to \"[public/18732](https://github.com/sagemath/sagetrac-mirror/tree/public/18732)\".",
    "created_at": "2015-06-23T23:51:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18732#issuecomment-333655",
    "user": "https://github.com/mkoeppe"
}
```

**Changing branch** from "[u/mkoeppe/add_tableau_query_functions_glp_eval_tab_row__glp_eval_tab_col_to_glpk_backend](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/add_tableau_query_functions_glp_eval_tab_row__glp_eval_tab_col_to_glpk_backend)" to "[public/18732](https://github.com/sagemath/sagetrac-mirror/tree/public/18732)".



---

archive/issue_comments_333656.json:
```json
{
    "body": "**Author:** Yuan Zhou, Matthias Koeppe",
    "created_at": "2015-06-23T23:53:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18732#issuecomment-333656",
    "user": "https://github.com/mkoeppe"
}
```

**Author:** Yuan Zhou, Matthias Koeppe



---

archive/issue_comments_333657.json:
```json
{
    "body": "<a id='comment:21'></a>\nI agree with your changes. Thanks!\n\nI have made another minor change to the docstrings to correctly reflect the type of exception that is raised.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f5a15613f7c1079c59dbfa0404d1beb5add20abb\">f5a1561</a></td><td><code>trac #18732: superficial changes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3c0da609a36bd5832cf6a9f11895e993971731c4\">3c0da60</a></td><td><code>Update docstrings regarding exceptions raised</code></td></tr></table>\n",
    "created_at": "2015-06-23T23:53:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18732#issuecomment-333657",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:21'></a>
I agree with your changes. Thanks!

I have made another minor change to the docstrings to correctly reflect the type of exception that is raised.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f5a15613f7c1079c59dbfa0404d1beb5add20abb">f5a1561</a></td><td><code>trac #18732: superficial changes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3c0da609a36bd5832cf6a9f11895e993971731c4">3c0da60</a></td><td><code>Update docstrings regarding exceptions raised</code></td></tr></table>




---

archive/issue_comments_333658.json:
```json
{
    "body": "**Changing commit** from \"[e2b25e2ace4888a84140b1f52165cea19653f9e0](https://github.com/sagemath/sagetrac-mirror/commit/e2b25e2ace4888a84140b1f52165cea19653f9e0)\" to \"[3c0da609a36bd5832cf6a9f11895e993971731c4](https://github.com/sagemath/sagetrac-mirror/commit/3c0da609a36bd5832cf6a9f11895e993971731c4)\".",
    "created_at": "2015-06-23T23:53:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18732#issuecomment-333658",
    "user": "https://github.com/mkoeppe"
}
```

**Changing commit** from "[e2b25e2ace4888a84140b1f52165cea19653f9e0](https://github.com/sagemath/sagetrac-mirror/commit/e2b25e2ace4888a84140b1f52165cea19653f9e0)" to "[3c0da609a36bd5832cf6a9f11895e993971731c4](https://github.com/sagemath/sagetrac-mirror/commit/3c0da609a36bd5832cf6a9f11895e993971731c4)".



---

archive/issue_comments_333659.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2015-06-23T23:53:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18732#issuecomment-333659",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_333660.json:
```json
{
    "body": "<a id='comment:22'></a>\n> I have made another minor change to the docstrings to correctly reflect the type of exception that is raised.\n\n\n+1\n\nNathann",
    "created_at": "2015-06-24T07:48:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18732#issuecomment-333660",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:22'></a>
> I have made another minor change to the docstrings to correctly reflect the type of exception that is raised.


+1

Nathann



---

archive/issue_comments_333661.json:
```json
{
    "body": "**Changing branch** from \"[public/18732](https://github.com/sagemath/sagetrac-mirror/tree/public/18732)\" to \"[3c0da609a36bd5832cf6a9f11895e993971731c4](https://github.com/sagemath/sagetrac-mirror/commit/3c0da609a36bd5832cf6a9f11895e993971731c4)\".",
    "created_at": "2015-06-24T11:37:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18732#issuecomment-333661",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/18732](https://github.com/sagemath/sagetrac-mirror/tree/public/18732)" to "[3c0da609a36bd5832cf6a9f11895e993971731c4](https://github.com/sagemath/sagetrac-mirror/commit/3c0da609a36bd5832cf6a9f11895e993971731c4)".



---

archive/issue_events_059638.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-06-24T11:37:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18732",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18732#event-59638"
}
```



---

archive/issue_comments_333662.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2015-06-24T11:37:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18732#issuecomment-333662",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed
