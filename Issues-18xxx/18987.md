# Issue 18987: Parallel computation of number of solutions in dancing links

archive/issues_018750.json:
```json
{
    "assignees": [],
    "body": "The following computation takes a lot of time:\n\n```\nsage: from sage.games.quantumino import QuantuminoSolver\nsage: QuantuminoSolver(0).number_of_solutions()  # long time (several days)\n```\n\nbut we can make it faster by doing the computation in parallel... This ticket does this (directly in the dancing links code).\n\nBranch/Commit: **[`29ff986`](https://github.com/sagemath/sagetrac-mirror/commit/29ff98625316f95c48fd704115a209dce38deda8)**\n\nReviewer: **Vincent Delecroix**\n\nAuthor: **S\u00e9bastien Labb\u00e9**\n\nComponent: **combinatorics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/18987_\n\n",
    "closed_at": "2015-09-08T14:41:15Z",
    "created_at": "2015-08-04T13:19:14Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.9",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Parallel computation of number of solutions in dancing links",
    "type": "issue",
    "updated_at": "2015-09-08T14:41:15Z",
    "url": "https://github.com/sagemath/sage/issues/18987",
    "user": "https://github.com/seblabbe"
}
```
The following computation takes a lot of time:

```
sage: from sage.games.quantumino import QuantuminoSolver
sage: QuantuminoSolver(0).number_of_solutions()  # long time (several days)
```

but we can make it faster by doing the computation in parallel... This ticket does this (directly in the dancing links code).

Branch/Commit: **[`29ff986`](https://github.com/sagemath/sagetrac-mirror/commit/29ff98625316f95c48fd704115a209dce38deda8)**

Reviewer: **Vincent Delecroix**

Author: **Sébastien Labbé**

Component: **combinatorics**

_Issue created by migration from https://trac.sagemath.org/ticket/18987_





---

archive/issue_events_267116.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-08-04T13:19:14Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "milestone_number": null,
    "milestone_title": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18987#event-267116"
}
```



---

archive/issue_events_267117.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-08-04T13:19:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18987#event-267117"
}
```



---

archive/issue_events_267118.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-08-04T13:19:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18987#event-267118"
}
```



---

archive/issue_events_267119.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-08-04T13:19:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18987#event-267119"
}
```



---

archive/issue_comments_266911.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nPreliminary version. Not ready for review.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ee430a47cc3f7eb71bf6358ee50f360ac3cf6c57\"><code>ee430a4</code></a></td><td><code>Parallel computation of the nb of solutions for tilings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a86b42d048567484cf30c7a6f7838704615083e3\"><code>a86b42d</code></a></td><td><code>Tilings polyominos modulo 180 degrees rotations</code></td></tr></table>\n",
    "created_at": "2015-08-04T13:23:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266911",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:1" align="right">comment:1</div>

Preliminary version. Not ready for review.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ee430a47cc3f7eb71bf6358ee50f360ac3cf6c57"><code>ee430a4</code></a></td><td><code>Parallel computation of the nb of solutions for tilings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a86b42d048567484cf30c7a6f7838704615083e3"><code>a86b42d</code></a></td><td><code>Tilings polyominos modulo 180 degrees rotations</code></td></tr></table>




---

archive/issue_comments_266912.json:
```json
{
    "body": "Commit: **[`a86b42d`](https://github.com/sagemath/sagetrac-mirror/commit/a86b42d048567484cf30c7a6f7838704615083e3)**",
    "created_at": "2015-08-04T13:23:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266912",
    "user": "https://github.com/seblabbe"
}
```

Commit: **[`a86b42d`](https://github.com/sagemath/sagetrac-mirror/commit/a86b42d048567484cf30c7a6f7838704615083e3)**



---

archive/issue_comments_266913.json:
```json
{
    "body": "Branch: **[u/slabbe/18987](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/18987)**",
    "created_at": "2015-08-04T13:23:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266913",
    "user": "https://github.com/seblabbe"
}
```

Branch: **[u/slabbe/18987](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/18987)**



---

archive/issue_comments_266914.json:
```json
{
    "body": "Changed commit from **[`a86b42d`](https://github.com/sagemath/sagetrac-mirror/commit/a86b42d048567484cf30c7a6f7838704615083e3)** to **[`6fd4a87`](https://github.com/sagemath/sagetrac-mirror/commit/6fd4a8759641415b121b4a12aa6ecb711490b533)**",
    "created_at": "2015-08-04T13:31:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266914",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a86b42d`](https://github.com/sagemath/sagetrac-mirror/commit/a86b42d048567484cf30c7a6f7838704615083e3)** to **[`6fd4a87`](https://github.com/sagemath/sagetrac-mirror/commit/6fd4a8759641415b121b4a12aa6ecb711490b533)**



---

archive/issue_comments_266915.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/406d8766e149baf3e381a0fbefc1e4ec44e6e203\"><code>406d876</code></a></td><td><code>Parallel computation of the nb of solutions for tilings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6fd4a8759641415b121b4a12aa6ecb711490b533\"><code>6fd4a87</code></a></td><td><code>Tilings polyominos modulo 180 degrees rotations</code></td></tr></table>\n",
    "created_at": "2015-08-04T13:31:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266915",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/406d8766e149baf3e381a0fbefc1e4ec44e6e203"><code>406d876</code></a></td><td><code>Parallel computation of the nb of solutions for tilings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6fd4a8759641415b121b4a12aa6ecb711490b533"><code>6fd4a87</code></a></td><td><code>Tilings polyominos modulo 180 degrees rotations</code></td></tr></table>




---

archive/issue_comments_266916.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,8 +5,6 @@\n sage: QuantuminoSolver(0).number_of_solutions()  # long time (about 30 days)\n ```\n \n-but we can make it faster by doing the computation in parallel... This ticket does this. It is motivated by a question I received from Nicolaas Neuwahl, the designer of the  Quantumino puzzle:\n+but we can make it faster by doing the computation in parallel... This ticket does this.\n \n-   *can you tell me HOW MANY different quantumino-solutions exist?*\n-\n-The [official website](http://familygamesamerica.com/mainsite/consumers/productview.php?pro_id=274&search=quantumino) says *there are over 10.000 potential solutions*. \n+It also simplify the computation by avoiding to compute 4 times the same solution (obtained by rotation of angle pi of the 5x8x2 box).\n``````\n",
    "created_at": "2015-08-04T19:39:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266916",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,8 +5,6 @@
 sage: QuantuminoSolver(0).number_of_solutions()  # long time (about 30 days)
 ```
 
-but we can make it faster by doing the computation in parallel... This ticket does this. It is motivated by a question I received from Nicolaas Neuwahl, the designer of the  Quantumino puzzle:
+but we can make it faster by doing the computation in parallel... This ticket does this.
 
-   *can you tell me HOW MANY different quantumino-solutions exist?*
-
-The [official website](http://familygamesamerica.com/mainsite/consumers/productview.php?pro_id=274&search=quantumino) says *there are over 10.000 potential solutions*. 
+It also simplify the computation by avoiding to compute 4 times the same solution (obtained by rotation of angle pi of the 5x8x2 box).
``````




---

archive/issue_comments_266917.json:
```json
{
    "body": "Changed branch from **[u/slabbe/18987](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/18987)** to none",
    "created_at": "2015-08-04T19:40:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266917",
    "user": "https://github.com/seblabbe"
}
```

Changed branch from **[u/slabbe/18987](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/18987)** to none



---

archive/issue_comments_266918.json:
```json
{
    "body": "Changed commit from **[`6fd4a87`](https://github.com/sagemath/sagetrac-mirror/commit/6fd4a8759641415b121b4a12aa6ecb711490b533)** to none",
    "created_at": "2015-08-04T19:40:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266918",
    "user": "https://github.com/seblabbe"
}
```

Changed commit from **[`6fd4a87`](https://github.com/sagemath/sagetrac-mirror/commit/6fd4a8759641415b121b4a12aa6ecb711490b533)** to none



---

archive/issue_comments_266919.json:
```json
{
    "body": "Commit: **[`3c11961`](https://github.com/sagemath/sagetrac-mirror/commit/3c11961ebae4953711c490f7ac57679b99c59b52)**",
    "created_at": "2015-08-04T19:41:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266919",
    "user": "https://github.com/seblabbe"
}
```

Commit: **[`3c11961`](https://github.com/sagemath/sagetrac-mirror/commit/3c11961ebae4953711c490f7ac57679b99c59b52)**



---

archive/issue_comments_266920.json:
```json
{
    "body": "Branch: **[u/slabbe/18987](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/18987)**",
    "created_at": "2015-08-04T19:41:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266920",
    "user": "https://github.com/seblabbe"
}
```

Branch: **[u/slabbe/18987](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/18987)**



---

archive/issue_events_267120.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-08-04T19:41:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18987#event-267120"
}
```



---

archive/issue_comments_266921.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/06915dc3b89c1e8b4f1214a0985e27a3bf6434c7\"><code>06915dc</code></a></td><td><code>Parallel computation of the nb of solutions for tilings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/520cf9361dbcc4f870ee8d0526c85cf6a049b253\"><code>520cf93</code></a></td><td><code>Tilings of polyominos modulo 180 degrees rotations</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3c11961ebae4953711c490f7ac57679b99c59b52\"><code>3c11961</code></a></td><td><code>Add a transparent gray box to QuantuminoState.show3d</code></td></tr></table>\n",
    "created_at": "2015-08-04T19:41:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266921",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:5"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/06915dc3b89c1e8b4f1214a0985e27a3bf6434c7"><code>06915dc</code></a></td><td><code>Parallel computation of the nb of solutions for tilings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/520cf9361dbcc4f870ee8d0526c85cf6a049b253"><code>520cf93</code></a></td><td><code>Tilings of polyominos modulo 180 degrees rotations</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3c11961ebae4953711c490f7ac57679b99c59b52"><code>3c11961</code></a></td><td><code>Add a transparent gray box to QuantuminoState.show3d</code></td></tr></table>




---

archive/issue_events_267121.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-08-04T19:48:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18987#event-267121"
}
```



---

archive/issue_events_267122.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-08-04T19:48:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18987#event-267122"
}
```



---

archive/issue_comments_266922.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nStill other stuff to improve...",
    "created_at": "2015-08-04T19:48:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266922",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:6" align="right">comment:6</div>

Still other stuff to improve...



---

archive/issue_comments_266923.json:
```json
{
    "body": "Changed commit from **[`3c11961`](https://github.com/sagemath/sagetrac-mirror/commit/3c11961ebae4953711c490f7ac57679b99c59b52)** to **[`b370fd0`](https://github.com/sagemath/sagetrac-mirror/commit/b370fd04a3efb7393d5516936958c552934faa7f)**",
    "created_at": "2015-08-04T21:07:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266923",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3c11961`](https://github.com/sagemath/sagetrac-mirror/commit/3c11961ebae4953711c490f7ac57679b99c59b52)** to **[`b370fd0`](https://github.com/sagemath/sagetrac-mirror/commit/b370fd04a3efb7393d5516936958c552934faa7f)**



---

archive/issue_comments_266924.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a75f8e3201330a652af9f2b69cc0af86ed2f7b3b\"><code>a75f8e3</code></a></td><td><code>Parallel computation of the nb of solutions for tilings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/21038b033a90520ee142dbabac283929c5fa017b\"><code>21038b0</code></a></td><td><code>Tilings of polyominos modulo 180 degrees rotations</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b370fd04a3efb7393d5516936958c552934faa7f\"><code>b370fd0</code></a></td><td><code>Add a transparent gray box to QuantuminoState.show3d</code></td></tr></table>\n",
    "created_at": "2015-08-04T21:07:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266924",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a75f8e3201330a652af9f2b69cc0af86ed2f7b3b"><code>a75f8e3</code></a></td><td><code>Parallel computation of the nb of solutions for tilings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/21038b033a90520ee142dbabac283929c5fa017b"><code>21038b0</code></a></td><td><code>Tilings of polyominos modulo 180 degrees rotations</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b370fd04a3efb7393d5516936958c552934faa7f"><code>b370fd0</code></a></td><td><code>Add a transparent gray box to QuantuminoState.show3d</code></td></tr></table>




---

archive/issue_events_267123.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-08-04T21:10:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18987#event-267123"
}
```



---

archive/issue_events_267124.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-08-04T21:10:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18987#event-267124"
}
```



---

archive/issue_comments_266925.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nOk, now needs reviews. I won't rebase my branch anymore.",
    "created_at": "2015-08-04T21:10:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266925",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:8" align="right">comment:8</div>

Ok, now needs reviews. I won't rebase my branch anymore.



---

archive/issue_events_267125.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-08-09T18:09:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18987#event-267125"
}
```



---

archive/issue_events_267126.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-08-09T18:09:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18987#event-267126"
}
```



---

archive/issue_comments_266926.json:
```json
{
    "body": "Reviewer: **Vincent Delecroix**",
    "created_at": "2015-08-09T18:09:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266926",
    "user": "https://github.com/videlec"
}
```

Reviewer: **Vincent Delecroix**



---

archive/issue_comments_266927.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nSalut Sebastien,\n\nDo you mind if I rebase over 6.9.beta1? Note that I also have a waiting commit that does some tiny optimization to `dancing_links.pyx`.\n\nI am not sure the overall strategy is the good one. If parallelization is needed I guess that it should better be implemented at the level of dancing links. Googling \"parallelization dancing links\" already gives a lot of things.\n\nLess importantly:\n- I do not understand the name of the function `orthogonal_transformation`. Are these the orthogonal transformations of `R^3` with integer coordinates? If so, please write more precise specifications.\n\n- As far as I see, you do not test all cases of the function `orthogonal_transformation`.\n\n- What is the `modpi` arguments. What is a rotation of angle `pi` for you? Is it a linear transformation that is a pi-rotation restricted on a plane and leaves invariant the orthogonal complement? (I guess it should also have integer coordinates) If this is, then it is of course not a group... but of course you might consider the group generated by these.\n\nVincent",
    "created_at": "2015-08-09T18:09:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266927",
    "user": "https://github.com/videlec"
}
```

<div id="comment:9" align="right">comment:9</div>

Salut Sebastien,

Do you mind if I rebase over 6.9.beta1? Note that I also have a waiting commit that does some tiny optimization to `dancing_links.pyx`.

I am not sure the overall strategy is the good one. If parallelization is needed I guess that it should better be implemented at the level of dancing links. Googling "parallelization dancing links" already gives a lot of things.

Less importantly:
- I do not understand the name of the function `orthogonal_transformation`. Are these the orthogonal transformations of `R^3` with integer coordinates? If so, please write more precise specifications.

- As far as I see, you do not test all cases of the function `orthogonal_transformation`.

- What is the `modpi` arguments. What is a rotation of angle `pi` for you? Is it a linear transformation that is a pi-rotation restricted on a plane and leaves invariant the orthogonal complement? (I guess it should also have integer coordinates) If this is, then it is of course not a group... but of course you might consider the group generated by these.

Vincent



---

archive/issue_comments_266928.json:
```json
{
    "body": "Author: **S\u00e9bastien Labb\u00e9**",
    "created_at": "2015-08-09T18:09:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266928",
    "user": "https://github.com/videlec"
}
```

Author: **Sébastien Labbé**



---

archive/issue_comments_266929.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@videlec](#comment:9):\n> Salut Sebastien,\n> \n> Do you mind if I rebase over 6.9.beta1? \n\nMerge or rebase? I prefer if you merge. Or I can rebase on 6.9.beta1 to keep the authorship (right?).\n\n> Note that I also have a waiting commit that does some tiny optimization to `dancing_links.pyx`.\n\nWhere?\n\n> I am not sure the overall strategy is the good one. If parallelization is needed I guess that it should better be implemented at the level of dancing links. Googling \"parallelization dancing links\" already gives a lot of things.\n\nIndeed, I am using a parallelization strategy that applies to a tiling problem where each piece is used only once. This strategy obviously does not apply to the general problem that is the Exact cover problem.\n\nAlso, I prefered to cut the (tiling) problem into subproblems that takes at most 2-3 hours each so that I can more easily follow the process of the computation and stop and restart the computation more easily. Even with a parallel implementation of dancing links, the computation would take days to finish.",
    "created_at": "2015-08-09T20:07:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266929",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@videlec](#comment:9):
> Salut Sebastien,
> 
> Do you mind if I rebase over 6.9.beta1? 

Merge or rebase? I prefer if you merge. Or I can rebase on 6.9.beta1 to keep the authorship (right?).

> Note that I also have a waiting commit that does some tiny optimization to `dancing_links.pyx`.

Where?

> I am not sure the overall strategy is the good one. If parallelization is needed I guess that it should better be implemented at the level of dancing links. Googling "parallelization dancing links" already gives a lot of things.

Indeed, I am using a parallelization strategy that applies to a tiling problem where each piece is used only once. This strategy obviously does not apply to the general problem that is the Exact cover problem.

Also, I prefered to cut the (tiling) problem into subproblems that takes at most 2-3 hours each so that I can more easily follow the process of the computation and stop and restart the computation more easily. Even with a parallel implementation of dancing links, the computation would take days to finish.



---

archive/issue_comments_266930.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@seblabbe](#comment:10):\n> Replying to [@videlec](#comment:9):\n> > Salut Sebastien,\n> > \n> > Do you mind if I rebase over 6.9.beta1? \n\n> \n> Merge or rebase? I prefer if you merge. Or I can rebase on 6.9.beta1 to keep the authorship (right?).\n\nThe autorship of what? If I do a rebase, you keep the autorship of commits. But of course it will be my branch (or a public one).\n\nI do prefer rebase over merge because:\n- history is much cleaner afterwards (fewer commits that follow each other)\n- you can hide whatever you want in a merge commit\n\n> > Note that I also have a waiting commit that does some tiny optimization to `dancing_links.pyx`.\n\n> \n> Where?\n\nOn my computer ;-) It is waiting for the rebase or merge.\n\n> > I am not sure the overall strategy is the good one. If parallelization is needed I guess that it should better be implemented at the level of dancing links. Googling \"parallelization dancing links\" already gives a lot of things.\n\n> \n> Indeed, I am using a parallelization strategy that applies to a tiling problem where each piece is used only once. This strategy obviously does not apply to the general problem that is the Exact cover problem.\n\nIn the exact cover problem, each subset is used at most once. In your tiling formulation a piece count for several subsets. You can naively apply the same thing for dancing links: look at one position `i0` and consider the set `S0` of subsets that cover it. For each subset in `S0`, launch a thread where you only run through the subproblem that consists of having fixed this subset.\n\nBut I guess that there exists less naive parallelization.\n\n> Also, I prefered to cut the (tiling) problem into subproblems that takes at most 2-3 hours each so that I can more easily follow the process of the computation and stop and restart the computation more easily. Even with a parallel implementation of dancing links, the computation would take days to finish.\n\nWhy? If your parallization ends with a time better than `total_time / nb_cpus` then you should parallelize more often ;-)\n\nVincent",
    "created_at": "2015-08-09T20:18:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266930",
    "user": "https://github.com/videlec"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@seblabbe](#comment:10):
> Replying to [@videlec](#comment:9):
> > Salut Sebastien,
> > 
> > Do you mind if I rebase over 6.9.beta1? 

> 
> Merge or rebase? I prefer if you merge. Or I can rebase on 6.9.beta1 to keep the authorship (right?).

The autorship of what? If I do a rebase, you keep the autorship of commits. But of course it will be my branch (or a public one).

I do prefer rebase over merge because:
- history is much cleaner afterwards (fewer commits that follow each other)
- you can hide whatever you want in a merge commit

> > Note that I also have a waiting commit that does some tiny optimization to `dancing_links.pyx`.

> 
> Where?

On my computer ;-) It is waiting for the rebase or merge.

> > I am not sure the overall strategy is the good one. If parallelization is needed I guess that it should better be implemented at the level of dancing links. Googling "parallelization dancing links" already gives a lot of things.

> 
> Indeed, I am using a parallelization strategy that applies to a tiling problem where each piece is used only once. This strategy obviously does not apply to the general problem that is the Exact cover problem.

In the exact cover problem, each subset is used at most once. In your tiling formulation a piece count for several subsets. You can naively apply the same thing for dancing links: look at one position `i0` and consider the set `S0` of subsets that cover it. For each subset in `S0`, launch a thread where you only run through the subproblem that consists of having fixed this subset.

But I guess that there exists less naive parallelization.

> Also, I prefered to cut the (tiling) problem into subproblems that takes at most 2-3 hours each so that I can more easily follow the process of the computation and stop and restart the computation more easily. Even with a parallel implementation of dancing links, the computation would take days to finish.

Why? If your parallization ends with a time better than `total_time / nb_cpus` then you should parallelize more often ;-)

Vincent



---

archive/issue_comments_266931.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\n> Less importantly:\n> - I do not understand the name of the function `orthogonal_transformation`.\n\nI chose that name 3 years ago. I agree it was not the best function name.\n\nYour comments are very good. The reason that things are not clearly written is that it is not clear enough in my head. Let me sleep this night and I will come back on this tomorrow or later this week.\n\nWhen `modpi=True`, I (think! I) want to quotient the result by the group generated by the diagonal matrices of 1's and -1's with exactly two -1 on the diagonal. Only, when the dimension is 3, I was able to generate representative of the classes easily.",
    "created_at": "2015-08-09T20:20:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266931",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:12" align="right">comment:12</div>

> Less importantly:
> - I do not understand the name of the function `orthogonal_transformation`.

I chose that name 3 years ago. I agree it was not the best function name.

Your comments are very good. The reason that things are not clearly written is that it is not clear enough in my head. Let me sleep this night and I will come back on this tomorrow or later this week.

When `modpi=True`, I (think! I) want to quotient the result by the group generated by the diagonal matrices of 1's and -1's with exactly two -1 on the diagonal. Only, when the dimension is 3, I was able to generate representative of the classes easily.



---

archive/issue_comments_266932.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\n> Why? If your parallization ends with a time better than `total_time / nb_cpus` then you should parallelize more often ;-)\n\nI have 240 subproblems each of them taking between 20 minutes and 10 hours of computation. But my machine at work only have 4 cores. So one way or the other, the computation takes days to finish since I do not have access to a super machine.",
    "created_at": "2015-08-09T20:27:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266932",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:13" align="right">comment:13</div>

> Why? If your parallization ends with a time better than `total_time / nb_cpus` then you should parallelize more often ;-)

I have 240 subproblems each of them taking between 20 minutes and 10 hours of computation. But my machine at work only have 4 cores. So one way or the other, the computation takes days to finish since I do not have access to a super machine.



---

archive/issue_comments_266933.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\n> I am not sure the overall strategy is the good one. If parallelization is needed I guess that it should better be implemented at the level of dancing links. Googling \"parallelization dancing links\" already gives a lot of things.\n\nIf you agree, I suggest to move the discussion of \"parallelization dancing links\" in another ticket for which I am willing to be a reviewer.",
    "created_at": "2015-08-09T20:31:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266933",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:14" align="right">comment:14</div>

> I am not sure the overall strategy is the good one. If parallelization is needed I guess that it should better be implemented at the level of dancing links. Googling "parallelization dancing links" already gives a lot of things.

If you agree, I suggest to move the discussion of "parallelization dancing links" in another ticket for which I am willing to be a reviewer.



---

archive/issue_comments_266934.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@seblabbe](#comment:13):\n> > Why? If your parallization ends with a time better than `total_time / nb_cpus` then you should parallelize more often ;-)\n\n> \n> I have 240 subproblems each of them taking between 20 minutes and 10 hours of computation. But my machine at work only have 4 cores. So one way or the other, the computation takes days to finish since I do not have access to a super machine.\n\nThis looks very bad. At the end, you might end up with only one core working on the biggest subinstance. And it can lasts several days even with 200 cores. Ideally, you should slice the problem in such way that each subinstance will not take longer than 1 hour (let say). This is why adopting a less naive strategy at the level of dancing links seems to me the best option since people already worked on it.\n\nThere is no super computer in Liege? I can set an invitation to use the very powerful [Plafrim](https://plafrim.bordeaux.inria.fr/doku.php) in Bordeaux. But it is some work to learn how to use it (e.g. you need to tell in advance for how long you request the processors).\n\nVincent",
    "created_at": "2015-08-09T20:36:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266934",
    "user": "https://github.com/videlec"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@seblabbe](#comment:13):
> > Why? If your parallization ends with a time better than `total_time / nb_cpus` then you should parallelize more often ;-)

> 
> I have 240 subproblems each of them taking between 20 minutes and 10 hours of computation. But my machine at work only have 4 cores. So one way or the other, the computation takes days to finish since I do not have access to a super machine.

This looks very bad. At the end, you might end up with only one core working on the biggest subinstance. And it can lasts several days even with 200 cores. Ideally, you should slice the problem in such way that each subinstance will not take longer than 1 hour (let say). This is why adopting a less naive strategy at the level of dancing links seems to me the best option since people already worked on it.

There is no super computer in Liege? I can set an invitation to use the very powerful [Plafrim](https://plafrim.bordeaux.inria.fr/doku.php) in Bordeaux. But it is some work to learn how to use it (e.g. you need to tell in advance for how long you request the processors).

Vincent



---

archive/issue_comments_266935.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/55fb3b7c845f7c7a49b966f84314804f589454ef\"><code>55fb3b7</code></a></td><td><code>Parallel computation of the nb of solutions for tilings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ef310074326f707952a73a5a99ce3b43e3b98c3d\"><code>ef31007</code></a></td><td><code>Tilings of polyominos modulo 180 degrees rotations</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cbbc26242b1883f8a51065ccd7e8e97e6154025b\"><code>cbbc262</code></a></td><td><code>Add a transparent gray box to QuantuminoState.show3d</code></td></tr></table>\n",
    "created_at": "2015-08-09T20:45:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266935",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/55fb3b7c845f7c7a49b966f84314804f589454ef"><code>55fb3b7</code></a></td><td><code>Parallel computation of the nb of solutions for tilings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ef310074326f707952a73a5a99ce3b43e3b98c3d"><code>ef31007</code></a></td><td><code>Tilings of polyominos modulo 180 degrees rotations</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cbbc26242b1883f8a51065ccd7e8e97e6154025b"><code>cbbc262</code></a></td><td><code>Add a transparent gray box to QuantuminoState.show3d</code></td></tr></table>




---

archive/issue_comments_266936.json:
```json
{
    "body": "Changed commit from **[`b370fd0`](https://github.com/sagemath/sagetrac-mirror/commit/b370fd04a3efb7393d5516936958c552934faa7f)** to **[`cbbc262`](https://github.com/sagemath/sagetrac-mirror/commit/cbbc26242b1883f8a51065ccd7e8e97e6154025b)**",
    "created_at": "2015-08-09T20:45:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266936",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b370fd0`](https://github.com/sagemath/sagetrac-mirror/commit/b370fd04a3efb7393d5516936958c552934faa7f)** to **[`cbbc262`](https://github.com/sagemath/sagetrac-mirror/commit/cbbc26242b1883f8a51065ccd7e8e97e6154025b)**



---

archive/issue_comments_266937.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nQuickly reading [1] (which looks serious but not very deep) it seems that it is hard to find subinstance of the problems that are well scaled for a given cluster.\n\n  [1] S. M. Ashraful Kadir, \"A Parallel Programming Approach to Solve the Exact Cover Problem\"",
    "created_at": "2015-08-09T20:50:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266937",
    "user": "https://github.com/videlec"
}
```

<div id="comment:17" align="right">comment:17</div>

Quickly reading [1] (which looks serious but not very deep) it seems that it is hard to find subinstance of the problems that are well scaled for a given cluster.

  [1] S. M. Ashraful Kadir, "A Parallel Programming Approach to Solve the Exact Cover Problem"



---

archive/issue_comments_266938.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\n> This looks very bad. At the end, you might end up with only one core working on the biggest subinstance. And it can lasts several days even with 200 cores. Ideally, you should slice the problem in such way that each subinstance will not take longer than 1 hour (let say).\n\nIt is not very bad as most of the 240 computations takes the same amount of time (about 2 to 3 hours). Maybe 5 of time takes more (10 hours). So I am using the four cores at least 95% of the time. In my case, I have very good subinstances to reuse your term.\n\n> \n> There is no super computer in Liege? \n\nWell maybe there is something. It is the first time in Li\u00e8ge that I need computation power, but it is the vacation now.\n\n> I can set an invitation to use the very powerful [Plafrim](https://plafrim.bordeaux.inria.fr/doku.php) in Bordeaux. But it is some work to learn how to use it (e.g. you need to tell in advance for how long you request the processors).\n\nThat would be nice!",
    "created_at": "2015-08-09T20:55:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266938",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:18" align="right">comment:18</div>

> This looks very bad. At the end, you might end up with only one core working on the biggest subinstance. And it can lasts several days even with 200 cores. Ideally, you should slice the problem in such way that each subinstance will not take longer than 1 hour (let say).

It is not very bad as most of the 240 computations takes the same amount of time (about 2 to 3 hours). Maybe 5 of time takes more (10 hours). So I am using the four cores at least 95% of the time. In my case, I have very good subinstances to reuse your term.

> 
> There is no super computer in Liege? 

Well maybe there is something. It is the first time in Liège that I need computation power, but it is the vacation now.

> I can set an invitation to use the very powerful [Plafrim](https://plafrim.bordeaux.inria.fr/doku.php) in Bordeaux. But it is some work to learn how to use it (e.g. you need to tell in advance for how long you request the processors).

That would be nice!



---

archive/issue_comments_266939.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\n> Do you mind if I rebase over 6.9.beta1? \n\nI just did that (in case you did not notice).",
    "created_at": "2015-08-09T21:02:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266939",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:19" align="right">comment:19</div>

> Do you mind if I rebase over 6.9.beta1? 

I just did that (in case you did not notice).



---

archive/issue_comments_266940.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9d8d0a142b58c2ab0c3ab2e18eef093295c0c54e\"><code>9d8d0a1</code></a></td><td><code>doc + optim in dancing_links</code></td></tr></table>\n",
    "created_at": "2015-08-09T21:14:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266940",
    "user": "https://github.com/videlec"
}
```

<div id="comment:20"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9d8d0a142b58c2ab0c3ab2e18eef093295c0c54e"><code>9d8d0a1</code></a></td><td><code>doc + optim in dancing_links</code></td></tr></table>




---

archive/issue_comments_266941.json:
```json
{
    "body": "Changed commit from **[`cbbc262`](https://github.com/sagemath/sagetrac-mirror/commit/cbbc26242b1883f8a51065ccd7e8e97e6154025b)** to **[`9d8d0a1`](https://github.com/sagemath/sagetrac-mirror/commit/9d8d0a142b58c2ab0c3ab2e18eef093295c0c54e)**",
    "created_at": "2015-08-09T21:14:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266941",
    "user": "https://github.com/videlec"
}
```

Changed commit from **[`cbbc262`](https://github.com/sagemath/sagetrac-mirror/commit/cbbc26242b1883f8a51065ccd7e8e97e6154025b)** to **[`9d8d0a1`](https://github.com/sagemath/sagetrac-mirror/commit/9d8d0a142b58c2ab0c3ab2e18eef093295c0c54e)**



---

archive/issue_comments_266942.json:
```json
{
    "body": "Changed branch from **[u/slabbe/18987](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/18987)** to **[public/18987](https://github.com/sagemath/sagetrac-mirror/tree/public/18987)**",
    "created_at": "2015-08-09T21:14:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266942",
    "user": "https://github.com/videlec"
}
```

Changed branch from **[u/slabbe/18987](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/18987)** to **[public/18987](https://github.com/sagemath/sagetrac-mirror/tree/public/18987)**



---

archive/issue_comments_266943.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nI found the organization of the dancing links code very confusing. Do you know why there are both a file `dancing_links.pyx` (that wraps the C++ class as a Cython class) and a file `dlxcpp.py` (that uses the Cython class in a functional style)? And there is also a `combinat/dlx.py`!! I guess this is mostly historical but it needs a serious cleanup.",
    "created_at": "2015-08-09T21:19:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266943",
    "user": "https://github.com/videlec"
}
```

<div id="comment:21" align="right">comment:21</div>

I found the organization of the dancing links code very confusing. Do you know why there are both a file `dancing_links.pyx` (that wraps the C++ class as a Cython class) and a file `dlxcpp.py` (that uses the Cython class in a functional style)? And there is also a `combinat/dlx.py`!! I guess this is mostly historical but it needs a serious cleanup.



---

archive/issue_comments_266944.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nEven just inside `dancing_links.pyx`, the class is called a Wrapper for the C++ code and `dlx_solver` is a function that calls the constructor of the wrapper...\n\nAlso I would not put this in `combnat/matrices` just because the exact cover problem can be represented as a 0-1 matrix...",
    "created_at": "2015-08-09T21:25:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266944",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:22" align="right">comment:22</div>

Even just inside `dancing_links.pyx`, the class is called a Wrapper for the C++ code and `dlx_solver` is a function that calls the constructor of the wrapper...

Also I would not put this in `combnat/matrices` just because the exact cover problem can be represented as a 0-1 matrix...



---

archive/issue_comments_266945.json:
```json
{
    "body": "Changed commit from **[`9d8d0a1`](https://github.com/sagemath/sagetrac-mirror/commit/9d8d0a142b58c2ab0c3ab2e18eef093295c0c54e)** to **[`91de863`](https://github.com/sagemath/sagetrac-mirror/commit/91de8636683e1c8cec7d9d33e645721572de3b1c)**",
    "created_at": "2015-08-10T07:31:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266945",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9d8d0a1`](https://github.com/sagemath/sagetrac-mirror/commit/9d8d0a142b58c2ab0c3ab2e18eef093295c0c54e)** to **[`91de863`](https://github.com/sagemath/sagetrac-mirror/commit/91de8636683e1c8cec7d9d33e645721572de3b1c)**



---

archive/issue_comments_266946.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/91de8636683e1c8cec7d9d33e645721572de3b1c\"><code>91de863</code></a></td><td><code>rename orthogonal_transformation function</code></td></tr></table>\n",
    "created_at": "2015-08-10T07:31:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266946",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/91de8636683e1c8cec7d9d33e645721572de3b1c"><code>91de863</code></a></td><td><code>rename orthogonal_transformation function</code></td></tr></table>




---

archive/issue_comments_266947.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nIs there a way to quotient two groups in Sage, maybe using gap or something ?\n\n```\nsage: L = [w.matrix() for w in WeylGroup(['B',3]) if w.matrix().det()==1]\nsage: G = MatrixGroup(L)\nsage: H = MatrixGroup(L[:4])\nsage: len(G)\n24\nsage: len(H)\n4\nsage: H\nMatrix group over Rational Field with 4 generators (\n[1 0 0]  [ 1  0  0]  [-1  0  0]  [-1  0  0]\n[0 1 0]  [ 0 -1  0]  [ 0  1  0]  [ 0 -1  0]\n[0 0 1], [ 0  0 -1], [ 0  0 -1], [ 0  0  1]\n)\nsage: G.quotient(H)\nTraceback (most recent call last):\n...\nNotImplementedError:\n```",
    "created_at": "2015-08-10T08:11:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266947",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:24" align="right">comment:24</div>

Is there a way to quotient two groups in Sage, maybe using gap or something ?

```
sage: L = [w.matrix() for w in WeylGroup(['B',3]) if w.matrix().det()==1]
sage: G = MatrixGroup(L)
sage: H = MatrixGroup(L[:4])
sage: len(G)
24
sage: len(H)
4
sage: H
Matrix group over Rational Field with 4 generators (
[1 0 0]  [ 1  0  0]  [-1  0  0]  [-1  0  0]
[0 1 0]  [ 0 -1  0]  [ 0  1  0]  [ 0 -1  0]
[0 0 1], [ 0  0 -1], [ 0  0 -1], [ 0  0  1]
)
sage: G.quotient(H)
Traceback (most recent call last):
...
NotImplementedError:
```



---

archive/issue_comments_266948.json:
```json
{
    "body": "<div id=\"comment:25\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c752d4038a7419285a1c1fa9b0c21842b593a2e\"><code>0c752d4</code></a></td><td><code>Improve explanation of the modpi argument</code></td></tr></table>\n",
    "created_at": "2015-08-10T09:07:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266948",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c752d4038a7419285a1c1fa9b0c21842b593a2e"><code>0c752d4</code></a></td><td><code>Improve explanation of the modpi argument</code></td></tr></table>




---

archive/issue_comments_266949.json:
```json
{
    "body": "Changed commit from **[`91de863`](https://github.com/sagemath/sagetrac-mirror/commit/91de8636683e1c8cec7d9d33e645721572de3b1c)** to **[`0c752d4`](https://github.com/sagemath/sagetrac-mirror/commit/0c752d4038a7419285a1c1fa9b0c21842b593a2e)**",
    "created_at": "2015-08-10T09:07:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266949",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`91de863`](https://github.com/sagemath/sagetrac-mirror/commit/91de8636683e1c8cec7d9d33e645721572de3b1c)** to **[`0c752d4`](https://github.com/sagemath/sagetrac-mirror/commit/0c752d4038a7419285a1c1fa9b0c21842b593a2e)**



---

archive/issue_events_267127.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-08-10T09:08:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18987#event-267127"
}
```



---

archive/issue_events_267128.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-08-10T09:08:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18987#event-267128"
}
```



---

archive/issue_comments_266950.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\n> - What is the `modpi` arguments. What is a rotation of angle `pi` for you? Is it a linear transformation that is a pi-rotation restricted on a plane and leaves invariant the orthogonal complement? (I guess it should also have integer coordinates) If this is, then it is of course not a group... but of course you might consider the group generated by these.\n\nOk, so tell me if it is better now.",
    "created_at": "2015-08-10T09:08:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266950",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:26" align="right">comment:26</div>

> - What is the `modpi` arguments. What is a rotation of angle `pi` for you? Is it a linear transformation that is a pi-rotation restricted on a plane and leaves invariant the orthogonal complement? (I guess it should also have integer coordinates) If this is, then it is of course not a group... but of course you might consider the group generated by these.

Ok, so tell me if it is better now.



---

archive/issue_comments_266951.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@seblabbe](#comment:26):\n> > - What is the `modpi` arguments. What is a rotation of angle `pi` for you? Is it a linear transformation that is a pi-rotation restricted on a plane and leaves invariant the orthogonal complement? (I guess it should also have integer coordinates) If this is, then it is of course not a group... but of course you might consider the group generated by these.\n\n> \n> Ok, so tell me if it is better now.\n\nA bit. What do you mean by `the rectangular parallelepiped`? There is only one? As far as I understand it is the isometry group that preserves **any** rectangular parallelepiped. You can also say differently: the group of orientable isometry that preserve (globally) each axis. Is that right?\n\nAnd as before, this is the group *generated* by these rotation and not only thes rotations themselves (except in dim 2 and 3).\n\nIsn't this group exactly the subgroup of matrices with an even number of `-1` on the diagonal? So the quotient is just the signed permutation matrices with either `0` or `1` coefficient `-1` (all others being `1`). Isn't it?\n\nWhen `orientation_preserving` is `False` I guess this group is the subgroup of matrices with any number of `-1` on the diagonal. In that case, the quotient would just be the permutation matrices. No?",
    "created_at": "2015-08-10T09:24:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266951",
    "user": "https://github.com/videlec"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@seblabbe](#comment:26):
> > - What is the `modpi` arguments. What is a rotation of angle `pi` for you? Is it a linear transformation that is a pi-rotation restricted on a plane and leaves invariant the orthogonal complement? (I guess it should also have integer coordinates) If this is, then it is of course not a group... but of course you might consider the group generated by these.

> 
> Ok, so tell me if it is better now.

A bit. What do you mean by `the rectangular parallelepiped`? There is only one? As far as I understand it is the isometry group that preserves **any** rectangular parallelepiped. You can also say differently: the group of orientable isometry that preserve (globally) each axis. Is that right?

And as before, this is the group *generated* by these rotation and not only thes rotations themselves (except in dim 2 and 3).

Isn't this group exactly the subgroup of matrices with an even number of `-1` on the diagonal? So the quotient is just the signed permutation matrices with either `0` or `1` coefficient `-1` (all others being `1`). Isn't it?

When `orientation_preserving` is `False` I guess this group is the subgroup of matrices with any number of `-1` on the diagonal. In that case, the quotient would just be the permutation matrices. No?



---

archive/issue_comments_266952.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nAnd when you say `that is by rotations of angle pi` this is confusing since there are infinitely many of them. You can say `by rotations of angle pi on the plane generated by two axes`.",
    "created_at": "2015-08-10T09:25:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266952",
    "user": "https://github.com/videlec"
}
```

<div id="comment:28" align="right">comment:28</div>

And when you say `that is by rotations of angle pi` this is confusing since there are infinitely many of them. You can say `by rotations of angle pi on the plane generated by two axes`.



---

archive/issue_comments_266953.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\n> A bit. What do you mean by `the rectangular parallelepiped`? There is only one? \n\nOf course the length of the side can change, so there is more than one. But, of course, I consider the case where the length of the sides are all distinct.\n\n> As far as I understand it is the isometry group that preserves **any** rectangular parallelepiped. \n\nYou understand well.\n\n> You can also say differently: the group of orientable isometry that preserve (globally) each axis. Is that right?\n\nYes.\n\n> And as before, this is the group *generated* by these rotation and not only thes rotations themselves (except in dim 2 and 3).\n\nOf course. \"modpi\" is in the sense of modulo a group.\n\n> Isn't this group exactly the subgroup of matrices with an even number of `-1` on the diagonal? \n\nYes.\n\n> So the quotient is just the signed permutation matrices with either `0` or `1` coefficient `-1` (all others being `1`). Isn't it?\n\nMaybe. When the dimension is odd, the quotient is the signed permutation matrices where the signs is either all positive or all negative with determinant 1. That is the formula that I was using.\n\n> When `orientation_preserving` is `False` I guess this group is the subgroup of matrices with any number of `-1` on the diagonal. In that case, the quotient would just be the permutation matrices. No?\n\nYes! You are right.",
    "created_at": "2015-08-10T09:38:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266953",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:29" align="right">comment:29</div>

> A bit. What do you mean by `the rectangular parallelepiped`? There is only one? 

Of course the length of the side can change, so there is more than one. But, of course, I consider the case where the length of the sides are all distinct.

> As far as I understand it is the isometry group that preserves **any** rectangular parallelepiped. 

You understand well.

> You can also say differently: the group of orientable isometry that preserve (globally) each axis. Is that right?

Yes.

> And as before, this is the group *generated* by these rotation and not only thes rotations themselves (except in dim 2 and 3).

Of course. "modpi" is in the sense of modulo a group.

> Isn't this group exactly the subgroup of matrices with an even number of `-1` on the diagonal? 

Yes.

> So the quotient is just the signed permutation matrices with either `0` or `1` coefficient `-1` (all others being `1`). Isn't it?

Maybe. When the dimension is odd, the quotient is the signed permutation matrices where the signs is either all positive or all negative with determinant 1. That is the formula that I was using.

> When `orientation_preserving` is `False` I guess this group is the subgroup of matrices with any number of `-1` on the diagonal. In that case, the quotient would just be the permutation matrices. No?

Yes! You are right.



---

archive/issue_comments_266954.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\n> So the quotient is just the signed permutation matrices with either `0` or `1` coefficient `-1` (all others being `1`). Isn't it?\n\nWhen `orientation_preserving=True`, the determinant of every returned matrix must be one. Therefore, I believe the quotient is the positive permutation matrices of determinant one + the other permutation matrices where one 1 is replaced by -1.",
    "created_at": "2015-08-10T09:59:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266954",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:30" align="right">comment:30</div>

> So the quotient is just the signed permutation matrices with either `0` or `1` coefficient `-1` (all others being `1`). Isn't it?

When `orientation_preserving=True`, the determinant of every returned matrix must be one. Therefore, I believe the quotient is the positive permutation matrices of determinant one + the other permutation matrices where one 1 is replaced by -1.



---

archive/issue_comments_266955.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\n> > So the quotient is just the signed permutation matrices with either `0` or `1` coefficient `-1` (all others being `1`). Isn't it?\n\n> \n> Maybe. When the dimension is odd, the quotient is the signed permutation matrices where the signs is either all positive or all negative with determinant 1. That is the formula that I was using.\n\nOk, now I understand why I needed it that way. I need well-chosen representatives for the quotient. By this, I mean that the chosen representatives of the cosets form a group itself.\n\nFor example, these representatives do not form a group:\n\n```\nsage: n = 3\nsage: c = identity_matrix(n)\nsage: c[0,0] = -1\nsage: L = [w.matrix() for w in WeylGroup(['A', n-1])]\nsage: L = [(w if w.det() == 1 else c*w) for w in L]\n[\n[1 0 0]  [ 0  0 -1]  [0 0 1]  [ 0 -1  0]  [0 1 0]  [-1  0  0]\n[0 1 0]  [ 0  1  0]  [1 0 0]  [ 1  0  0]  [0 0 1]  [ 0  0  1]\n[0 0 1], [ 1  0  0], [0 1 0], [ 0  0  1], [1 0 0], [ 0  1  0]\n]\nsage: MatrixGroup(L).cardinality()\n24\n```\n\nBut these representatives forms a group:\n\n```\nsage: L = [w.matrix() for w in WeylGroup(['A', n-1])]\nsage: L = [m.det() * m for m in L]\nsage: L\n[\n[1 0 0]  [ 0  0 -1]  [0 0 1]  [ 0 -1  0]  [0 1 0]  [-1  0  0]\n[0 1 0]  [ 0 -1  0]  [1 0 0]  [-1  0  0]  [0 0 1]  [ 0  0 -1]\n[0 0 1], [-1  0  0], [0 1 0], [ 0  0 -1], [1 0 0], [ 0 -1  0]\n]\nsage: MatrixGroup(L).cardinality()\n6\n```\n\nAnd I still don't know how to construct the quotient when n is even.",
    "created_at": "2015-08-10T12:29:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266955",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:31" align="right">comment:31</div>

> > So the quotient is just the signed permutation matrices with either `0` or `1` coefficient `-1` (all others being `1`). Isn't it?

> 
> Maybe. When the dimension is odd, the quotient is the signed permutation matrices where the signs is either all positive or all negative with determinant 1. That is the formula that I was using.

Ok, now I understand why I needed it that way. I need well-chosen representatives for the quotient. By this, I mean that the chosen representatives of the cosets form a group itself.

For example, these representatives do not form a group:

```
sage: n = 3
sage: c = identity_matrix(n)
sage: c[0,0] = -1
sage: L = [w.matrix() for w in WeylGroup(['A', n-1])]
sage: L = [(w if w.det() == 1 else c*w) for w in L]
[
[1 0 0]  [ 0  0 -1]  [0 0 1]  [ 0 -1  0]  [0 1 0]  [-1  0  0]
[0 1 0]  [ 0  1  0]  [1 0 0]  [ 1  0  0]  [0 0 1]  [ 0  0  1]
[0 0 1], [ 1  0  0], [0 1 0], [ 0  0  1], [1 0 0], [ 0  1  0]
]
sage: MatrixGroup(L).cardinality()
24
```

But these representatives forms a group:

```
sage: L = [w.matrix() for w in WeylGroup(['A', n-1])]
sage: L = [m.det() * m for m in L]
sage: L
[
[1 0 0]  [ 0  0 -1]  [0 0 1]  [ 0 -1  0]  [0 1 0]  [-1  0  0]
[0 1 0]  [ 0 -1  0]  [1 0 0]  [-1  0  0]  [0 0 1]  [ 0  0 -1]
[0 0 1], [-1  0  0], [0 1 0], [ 0  0 -1], [1 0 0], [ 0 -1  0]
]
sage: MatrixGroup(L).cardinality()
6
```

And I still don't know how to construct the quotient when n is even.



---

archive/issue_comments_266956.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nOkay, so it is a chance that it works for when n is odd because in general:\n\nhttp://groupprops.subwiki.org/wiki/Quotient_group_need_not_be_isomorphic_to_any_subgroup",
    "created_at": "2015-08-10T12:46:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266956",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:32" align="right">comment:32</div>

Okay, so it is a chance that it works for when n is odd because in general:

http://groupprops.subwiki.org/wiki/Quotient_group_need_not_be_isomorphic_to_any_subgroup



---

archive/issue_comments_266957.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\n> Ok, now I understand why I needed it that way.\n\nWait. I really need the quotient itself finally. I was just lucky that the transformation keeping some the pentamino invariant was in the group.\n\n```\n\n    sage: from sage.combinat.tiling import ncube_isometry_group\n    sage: from sage.games.quantumino import pentaminos\n    sage: L = ncube_isometry_group(3)\n    sage: f = lambda p : [m for m in L[1:] if (m*p).canonical() == p.canonical()]\n    sage: [(i, f(p)) for i,p in enumerate(pentaminos) if f(p)]\n    [(6, [\n    [ 0  0 -1]\n    [ 0 -1  0]\n    [-1  0  0]\n    ]),\n     (7, [\n    [ 0  0  1]\n    [ 0 -1  0]\n    [ 1  0  0]\n    ]),\n     (12, [\n    [-1  0  0]\n    [ 0  0 -1]\n    [ 0 -1  0]\n    ]),\n     (13, [\n    [ 0  0 -1]\n    [ 0 -1  0]\n    [-1  0  0]\n    ]),\n     (16, [\n    [ 0  0 -1]\n    [ 0 -1  0]\n    [-1  0  0]\n    ])]\n```\n\nAbove, I get a problem with pentamino number 7 because it is invariant under a transformation that is not in the subgroup isomorphic to the quotient. So I really need to consider the quotient with all of the elements in each coset. Chosing a representative won't work even if it is well chosen.\n\nGive me more time. I'll update my branch.",
    "created_at": "2015-08-10T13:45:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266957",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:33" align="right">comment:33</div>

> Ok, now I understand why I needed it that way.

Wait. I really need the quotient itself finally. I was just lucky that the transformation keeping some the pentamino invariant was in the group.

```

    sage: from sage.combinat.tiling import ncube_isometry_group
    sage: from sage.games.quantumino import pentaminos
    sage: L = ncube_isometry_group(3)
    sage: f = lambda p : [m for m in L[1:] if (m*p).canonical() == p.canonical()]
    sage: [(i, f(p)) for i,p in enumerate(pentaminos) if f(p)]
    [(6, [
    [ 0  0 -1]
    [ 0 -1  0]
    [-1  0  0]
    ]),
     (7, [
    [ 0  0  1]
    [ 0 -1  0]
    [ 1  0  0]
    ]),
     (12, [
    [-1  0  0]
    [ 0  0 -1]
    [ 0 -1  0]
    ]),
     (13, [
    [ 0  0 -1]
    [ 0 -1  0]
    [-1  0  0]
    ]),
     (16, [
    [ 0  0 -1]
    [ 0 -1  0]
    [-1  0  0]
    ])]
```

Above, I get a problem with pentamino number 7 because it is invariant under a transformation that is not in the subgroup isomorphic to the quotient. So I really need to consider the quotient with all of the elements in each coset. Chosing a representative won't work even if it is well chosen.

Give me more time. I'll update my branch.



---

archive/issue_comments_266958.json:
```json
{
    "body": "<div id=\"comment:34\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a51e4d83be6ed02daacecd3dd932db7099c4fbab\"><code>a51e4d8</code></a></td><td><code>Using cosets for when modpi=True</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dc3797bd98509562635b7ef940c7cbd48fc71e31\"><code>dc3797b</code></a></td><td><code>Change pentaminos to there canonical form</code></td></tr></table>\n",
    "created_at": "2015-08-10T19:45:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266958",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:34"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a51e4d83be6ed02daacecd3dd932db7099c4fbab"><code>a51e4d8</code></a></td><td><code>Using cosets for when modpi=True</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dc3797bd98509562635b7ef940c7cbd48fc71e31"><code>dc3797b</code></a></td><td><code>Change pentaminos to there canonical form</code></td></tr></table>




---

archive/issue_comments_266959.json:
```json
{
    "body": "Changed commit from **[`0c752d4`](https://github.com/sagemath/sagetrac-mirror/commit/0c752d4038a7419285a1c1fa9b0c21842b593a2e)** to **[`dc3797b`](https://github.com/sagemath/sagetrac-mirror/commit/dc3797bd98509562635b7ef940c7cbd48fc71e31)**",
    "created_at": "2015-08-10T19:45:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266959",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0c752d4`](https://github.com/sagemath/sagetrac-mirror/commit/0c752d4038a7419285a1c1fa9b0c21842b593a2e)** to **[`dc3797b`](https://github.com/sagemath/sagetrac-mirror/commit/dc3797bd98509562635b7ef940c7cbd48fc71e31)**



---

archive/issue_comments_266960.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nRe-needs review.",
    "created_at": "2015-08-10T19:46:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266960",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:35" align="right">comment:35</div>

Re-needs review.



---

archive/issue_comments_266961.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nNote that the patchbot was not able to build the doc.",
    "created_at": "2015-08-10T21:58:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266961",
    "user": "https://github.com/videlec"
}
```

<div id="comment:36" align="right">comment:36</div>

Note that the patchbot was not able to build the doc.



---

archive/issue_comments_266962.json:
```json
{
    "body": "Changed commit from **[`dc3797b`](https://github.com/sagemath/sagetrac-mirror/commit/dc3797bd98509562635b7ef940c7cbd48fc71e31)** to **[`1e01ba2`](https://github.com/sagemath/sagetrac-mirror/commit/1e01ba27547f9a7f8ec2e35418f95b00e2ffb405)**",
    "created_at": "2015-08-11T06:02:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266962",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`dc3797b`](https://github.com/sagemath/sagetrac-mirror/commit/dc3797bd98509562635b7ef940c7cbd48fc71e31)** to **[`1e01ba2`](https://github.com/sagemath/sagetrac-mirror/commit/1e01ba27547f9a7f8ec2e35418f95b00e2ffb405)**



---

archive/issue_comments_266963.json:
```json
{
    "body": "<div id=\"comment:37\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ca84fcf36ec653753ad53297320c85a6867e0bff\"><code>ca84fcf</code></a></td><td><code>Trac #18987: Parallel computation of the nb of solutions for tilings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3d4402bd52e80d94b2d199283ccb9900102565ee\"><code>3d4402b</code></a></td><td><code>Trac #18987: Tilings of polyominos modulo 180 degrees rotations</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/65f6512ae9b59de0634fd63ddd0bd23b443ab31d\"><code>65f6512</code></a></td><td><code>Trac #18987: Add a transparent gray box to QuantuminoState.show3d</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/555f0a9ecfa788fb7e82f8cf387037624504732b\"><code>555f0a9</code></a></td><td><code>Trac #18987: doc + optim in dancing_links</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/481d96eb3cf4e583775d5baa23305341fdd4de4f\"><code>481d96e</code></a></td><td><code>Trac #18987: rename orthogonal_transformation function</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5f66e1de423ce677cad0b7b4fd1e26029c77dde2\"><code>5f66e1d</code></a></td><td><code>Trac #18987: Improve explanation of the modpi argument</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d3591151d9498972eb705eeade3de87d633f888b\"><code>d359115</code></a></td><td><code>Trac #18987: Using cosets for when modpi=True</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1e01ba27547f9a7f8ec2e35418f95b00e2ffb405\"><code>1e01ba2</code></a></td><td><code>Trac #18987: Change pentaminos to there canonical form</code></td></tr></table>\n",
    "created_at": "2015-08-11T06:02:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266963",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:37"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ca84fcf36ec653753ad53297320c85a6867e0bff"><code>ca84fcf</code></a></td><td><code>Trac #18987: Parallel computation of the nb of solutions for tilings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3d4402bd52e80d94b2d199283ccb9900102565ee"><code>3d4402b</code></a></td><td><code>Trac #18987: Tilings of polyominos modulo 180 degrees rotations</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/65f6512ae9b59de0634fd63ddd0bd23b443ab31d"><code>65f6512</code></a></td><td><code>Trac #18987: Add a transparent gray box to QuantuminoState.show3d</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/555f0a9ecfa788fb7e82f8cf387037624504732b"><code>555f0a9</code></a></td><td><code>Trac #18987: doc + optim in dancing_links</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/481d96eb3cf4e583775d5baa23305341fdd4de4f"><code>481d96e</code></a></td><td><code>Trac #18987: rename orthogonal_transformation function</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5f66e1de423ce677cad0b7b4fd1e26029c77dde2"><code>5f66e1d</code></a></td><td><code>Trac #18987: Improve explanation of the modpi argument</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d3591151d9498972eb705eeade3de87d633f888b"><code>d359115</code></a></td><td><code>Trac #18987: Using cosets for when modpi=True</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1e01ba27547f9a7f8ec2e35418f95b00e2ffb405"><code>1e01ba2</code></a></td><td><code>Trac #18987: Change pentaminos to there canonical form</code></td></tr></table>




---

archive/issue_comments_266964.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nThere was a `TESTS::` with text following. Fixed that (and squashed it the the last commit). Also added the prefix `Trac #18987: ` to all commit messages.",
    "created_at": "2015-08-11T06:05:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266964",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:38" align="right">comment:38</div>

There was a `TESTS::` with text following. Fixed that (and squashed it the the last commit). Also added the prefix `Trac #18987: ` to all commit messages.



---

archive/issue_events_267129.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-08-11T08:54:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18987#event-267129"
}
```



---

archive/issue_events_267130.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-08-11T08:54:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18987#event-267130"
}
```



---

archive/issue_comments_266965.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nThere is one failing doctest on the patchbot that is not failing on my machine...",
    "created_at": "2015-08-11T08:54:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266965",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:39" align="right">comment:39</div>

There is one failing doctest on the patchbot that is not failing on my machine...



---

archive/issue_comments_266966.json:
```json
{
    "body": "<div id=\"comment:40\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2133ecdcffb1b993049874c8be6cad2b1224a73a\"><code>2133ecd</code></a></td><td><code>Trac #18987: fixing intermittent doctest failure</code></td></tr></table>\n",
    "created_at": "2015-08-11T08:55:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266966",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:40"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2133ecdcffb1b993049874c8be6cad2b1224a73a"><code>2133ecd</code></a></td><td><code>Trac #18987: fixing intermittent doctest failure</code></td></tr></table>




---

archive/issue_comments_266967.json:
```json
{
    "body": "Changed commit from **[`1e01ba2`](https://github.com/sagemath/sagetrac-mirror/commit/1e01ba27547f9a7f8ec2e35418f95b00e2ffb405)** to **[`2133ecd`](https://github.com/sagemath/sagetrac-mirror/commit/2133ecdcffb1b993049874c8be6cad2b1224a73a)**",
    "created_at": "2015-08-11T08:55:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266967",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1e01ba2`](https://github.com/sagemath/sagetrac-mirror/commit/1e01ba27547f9a7f8ec2e35418f95b00e2ffb405)** to **[`2133ecd`](https://github.com/sagemath/sagetrac-mirror/commit/2133ecdcffb1b993049874c8be6cad2b1224a73a)**



---

archive/issue_events_267131.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-08-11T08:55:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18987#event-267131"
}
```



---

archive/issue_events_267132.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-08-11T08:55:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18987#event-267132"
}
```



---

archive/issue_comments_266968.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nAre you sure `ncube_isometry_group` is worth a `@cached_function`?\n\nIn `ncube_isometry_group_modpi` why are you building `MatrixGroup`?\n\nIn\n\n```\nP_coset = set(frozenset((m.matrix() * self).canonical() for m in coset) for coset in L)\nreturn set(next(iter(s)) for s in P_coset)\n```\nYou are building a lot of images to consider `matrix x polyomino` to use just one at the end. Why not\n\n```\nreturn set((L[0].matrix() * self).canonical() for coset in L)\n```\nAnd if you were not using matrix groups you can even do\n\n```\nreturn set((L[0] * self).canonical() for coset in L)\n```",
    "created_at": "2015-08-11T10:13:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266968",
    "user": "https://github.com/videlec"
}
```

<div id="comment:42" align="right">comment:42</div>

Are you sure `ncube_isometry_group` is worth a `@cached_function`?

In `ncube_isometry_group_modpi` why are you building `MatrixGroup`?

In

```
P_coset = set(frozenset((m.matrix() * self).canonical() for m in coset) for coset in L)
return set(next(iter(s)) for s in P_coset)
```
You are building a lot of images to consider `matrix x polyomino` to use just one at the end. Why not

```
return set((L[0].matrix() * self).canonical() for coset in L)
```
And if you were not using matrix groups you can even do

```
return set((L[0] * self).canonical() for coset in L)
```



---

archive/issue_comments_266969.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nYou are using `L` instead of `coset` I think. Can you edit your previous comment to make sure I understand what you mean?",
    "created_at": "2015-08-11T11:43:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266969",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:43" align="right">comment:43</div>

You are using `L` instead of `coset` I think. Can you edit your previous comment to make sure I understand what you mean?



---

archive/issue_comments_266970.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nReplying to [@videlec](#comment:42):\n> Are you sure `ncube_isometry_group` is worth a `@cached_function`?\n\nCalling this function takes 2.8s on my machine. And it is called once for each polyomino. That is 16 times for the Quantumino puzzle. With the cache, I gain about 40s to construct the rows to give to the dlx solver.\n\n> In `ncube_isometry_group_modpi` why are you building `MatrixGroup`?\n\nBecause otherwise, this\n\n```\nG = ncube_isometry_group(n, orientation_preserving)\nH = [h for h in G if all(i==j for (i,j) in h.nonzero_positions())]\nleft_cosets = set(tuple(sorted(h*g for h in H)) for g in G)\n```\n\nthrows a `TypeError: mutable matrices are unhashable` and I find it more fun to read like this instead of the `.set_immutable()` on every matrices.",
    "created_at": "2015-08-11T11:48:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266970",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:44" align="right">comment:44</div>

Replying to [@videlec](#comment:42):
> Are you sure `ncube_isometry_group` is worth a `@cached_function`?

Calling this function takes 2.8s on my machine. And it is called once for each polyomino. That is 16 times for the Quantumino puzzle. With the cache, I gain about 40s to construct the rows to give to the dlx solver.

> In `ncube_isometry_group_modpi` why are you building `MatrixGroup`?

Because otherwise, this

```
G = ncube_isometry_group(n, orientation_preserving)
H = [h for h in G if all(i==j for (i,j) in h.nonzero_positions())]
left_cosets = set(tuple(sorted(h*g for h in H)) for g in G)
```

throws a `TypeError: mutable matrices are unhashable` and I find it more fun to read like this instead of the `.set_immutable()` on every matrices.



---

archive/issue_comments_266971.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\n> You are building a lot of images to consider `matrix x polyomino` to use just one at the end. Why not\n\nI know but I need all of them. That is what I understood yesterday. Let me try to explain. In general it is okay to take only one matrix in the coset. The problem comes when the polyomino is invariant under some of the 24 orientation preserving isometries of the cube. For example, consider:\n\n```\nsage: from sage.games.quantumino import pentaminos                                  \nsage: from sage.combinat.tiling import ncube_isometry_group                         \nsage: p = pentaminos[7]                                                             \nsage: m = ncube_isometry_group(3)[-3]                                               \nsage: p                                                                             \nPolyomino: [(0, 0, 0), (0, 1, 0), (0, 2, 0), (0, 2, 1), (1, 0, 0)], Color: orange   \nsage: m                                                                             \n[ 0  0  1]                                                                          \n[ 0 -1  0]                                                                          \n[ 1  0  0]                                                                          \nsage: (m*p).canonical() == p                                                        \nTrue                                                                                \n```\n\nThe polyomino `p` has 12 distinct rotation images instead of 24. And among the 12 ways of placing that polyomino into a box, there are 3 distinct ways up to rotation of the box keeping the box invariant. To compute this, we need to consider the whole coset:\n\n```\nsage: cosets = ncube_isometry_group_modpi(3)\nsage: P_coset = set(frozenset((m.matrix() * p).canonical() for m in coset) for coset in cosets)\nsage: len(P_coset)                         \n3   \nsage: len(set(next(iter(s)) for s in P_coset))\n3                                                                                          \n```\n\nOtherwise, you obtain too many polyominos (see below).\n\n```\nsage: set((coset[0].matrix() * p).canonical() for coset in cosets)                 \n{Polyomino: [(0, 0, 1), (1, 0, 1), (1, 1, 1), (1, 2, 0), (1, 2, 1)], Color: orange,\n Polyomino: [(0, 1, 2), (1, 0, 0), (1, 1, 0), (1, 1, 1), (1, 1, 2)], Color: orange,\n Polyomino: [(0, 0, 0), (0, 1, 0), (1, 1, 0), (2, 1, 0), (2, 1, 1)], Color: orange,\n Polyomino: [(0, 1, 0), (0, 1, 1), (1, 1, 1), (2, 0, 1), (2, 1, 1)], Color: orange,\n Polyomino: [(0, 2, 0), (1, 0, 0), (1, 0, 1), (1, 1, 0), (1, 2, 0)], Color: orange}\n```",
    "created_at": "2015-08-11T12:16:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266971",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:45" align="right">comment:45</div>

> You are building a lot of images to consider `matrix x polyomino` to use just one at the end. Why not

I know but I need all of them. That is what I understood yesterday. Let me try to explain. In general it is okay to take only one matrix in the coset. The problem comes when the polyomino is invariant under some of the 24 orientation preserving isometries of the cube. For example, consider:

```
sage: from sage.games.quantumino import pentaminos                                  
sage: from sage.combinat.tiling import ncube_isometry_group                         
sage: p = pentaminos[7]                                                             
sage: m = ncube_isometry_group(3)[-3]                                               
sage: p                                                                             
Polyomino: [(0, 0, 0), (0, 1, 0), (0, 2, 0), (0, 2, 1), (1, 0, 0)], Color: orange   
sage: m                                                                             
[ 0  0  1]                                                                          
[ 0 -1  0]                                                                          
[ 1  0  0]                                                                          
sage: (m*p).canonical() == p                                                        
True                                                                                
```

The polyomino `p` has 12 distinct rotation images instead of 24. And among the 12 ways of placing that polyomino into a box, there are 3 distinct ways up to rotation of the box keeping the box invariant. To compute this, we need to consider the whole coset:

```
sage: cosets = ncube_isometry_group_modpi(3)
sage: P_coset = set(frozenset((m.matrix() * p).canonical() for m in coset) for coset in cosets)
sage: len(P_coset)                         
3   
sage: len(set(next(iter(s)) for s in P_coset))
3                                                                                          
```

Otherwise, you obtain too many polyominos (see below).

```
sage: set((coset[0].matrix() * p).canonical() for coset in cosets)                 
{Polyomino: [(0, 0, 1), (1, 0, 1), (1, 1, 1), (1, 2, 0), (1, 2, 1)], Color: orange,
 Polyomino: [(0, 1, 2), (1, 0, 0), (1, 1, 0), (1, 1, 1), (1, 1, 2)], Color: orange,
 Polyomino: [(0, 0, 0), (0, 1, 0), (1, 1, 0), (2, 1, 0), (2, 1, 1)], Color: orange,
 Polyomino: [(0, 1, 0), (0, 1, 1), (1, 1, 1), (2, 0, 1), (2, 1, 1)], Color: orange,
 Polyomino: [(0, 2, 0), (1, 0, 0), (1, 0, 1), (1, 1, 0), (1, 2, 0)], Color: orange}
```



---

archive/issue_comments_266972.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nReplying to [@seblabbe](#comment:44):\n> Replying to [@videlec](#comment:42):\n> > Are you sure `ncube_isometry_group` is worth a `@cached_function`?\n\n> \n> Calling this function takes 2.8s on my machine. And it is called once for each polyomino. That is 16 times for the Quantumino puzzle. With the cache, I gain about 40s to construct the rows to give to the dlx solver.\n\nPerhaps the way it is implemented is wrong. For example\n\n```\nsage: %timeit P = [s.matrix() for s in SymmetricGroup(4)]\n1 loops, best of 3: 1.27 ms per loop\n```\nand with the signs\n\n```\nsage: from itertools import product\nsage: %timeit M = [diagonal_matrix(p) for p in product([1,-1], repeat=4)]\n1 loops, best of 3: 2.9 ms per loop\nsage: M = [diagonal_matrix(p) for p in product([1,-1], repeat=4)]\nsage: %timeit S = [m*s.matrix() for m in M for s in SymmetricGroup(4)]\n100 loops, best of 3: 18.3 ms per loop\n```\nSo it is likely to be `~20ms`.",
    "created_at": "2015-08-11T16:20:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266972",
    "user": "https://github.com/videlec"
}
```

<div id="comment:46" align="right">comment:46</div>

Replying to [@seblabbe](#comment:44):
> Replying to [@videlec](#comment:42):
> > Are you sure `ncube_isometry_group` is worth a `@cached_function`?

> 
> Calling this function takes 2.8s on my machine. And it is called once for each polyomino. That is 16 times for the Quantumino puzzle. With the cache, I gain about 40s to construct the rows to give to the dlx solver.

Perhaps the way it is implemented is wrong. For example

```
sage: %timeit P = [s.matrix() for s in SymmetricGroup(4)]
1 loops, best of 3: 1.27 ms per loop
```
and with the signs

```
sage: from itertools import product
sage: %timeit M = [diagonal_matrix(p) for p in product([1,-1], repeat=4)]
1 loops, best of 3: 2.9 ms per loop
sage: M = [diagonal_matrix(p) for p in product([1,-1], repeat=4)]
sage: %timeit S = [m*s.matrix() for m in M for s in SymmetricGroup(4)]
100 loops, best of 3: 18.3 ms per loop
```
So it is likely to be `~20ms`.



---

archive/issue_comments_266973.json:
```json
{
    "body": "<div id=\"comment:47\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0d68ecec28cb92d9e78a92d6e733d42b3e8941c1\"><code>0d68ece</code></a></td><td><code>Trac #18987: removed a cached_function</code></td></tr></table>\n",
    "created_at": "2015-08-12T08:53:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266973",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:47"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0d68ecec28cb92d9e78a92d6e733d42b3e8941c1"><code>0d68ece</code></a></td><td><code>Trac #18987: removed a cached_function</code></td></tr></table>




---

archive/issue_comments_266974.json:
```json
{
    "body": "Changed commit from **[`2133ecd`](https://github.com/sagemath/sagetrac-mirror/commit/2133ecdcffb1b993049874c8be6cad2b1224a73a)** to **[`0d68ece`](https://github.com/sagemath/sagetrac-mirror/commit/0d68ecec28cb92d9e78a92d6e733d42b3e8941c1)**",
    "created_at": "2015-08-12T08:53:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266974",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2133ecd`](https://github.com/sagemath/sagetrac-mirror/commit/2133ecdcffb1b993049874c8be6cad2b1224a73a)** to **[`0d68ece`](https://github.com/sagemath/sagetrac-mirror/commit/0d68ecec28cb92d9e78a92d6e733d42b3e8941c1)**



---

archive/issue_comments_266975.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\n> > Replying to [@videlec](#comment:42):\n> > > Are you sure `ncube_isometry_group` is worth a `@cached_function`?\n\nIn fact, you make me realize that there is already caching involved in WeylGroup. Therefore caching that function is not so necessary. Without caching, I get:\n\n```\nsage: from sage.combinat.tiling import ncube_isometry_group\nsage: time L = ncube_isometry_group(4)             \nCPU times: user 1.14 s, sys: 19.7 ms, total: 1.16 s\nWall time: 1.3 s                                   \nsage: time L = ncube_isometry_group(4)             \nCPU times: user 358 ms, sys: 4.01 ms, total: 362 ms\nWall time: 448 ms                                      \n```\n\n> ```\n> sage: from itertools import product\n> sage: %timeit M = [diagonal_matrix(p) for p in product([1,-1], repeat=4)]\n> 1 loops, best of 3: 2.9 ms per loop\n> sage: M = [diagonal_matrix(p) for p in product([1,-1], repeat=4)]\n> sage: %timeit S = [m*s.matrix() for m in M for s in SymmetricGroup(4)]\n> 100 loops, best of 3: 18.3 ms per loop\n> ```\n> So it is likely to be `~20ms`.\n\nNote that you can't use timeit above since there is caching involved in SymmetricGroup.\n\nFor comparison, your solution on my machine gives the following timings:\n\n```python\nsage: from itertools import product   \nsage: # first call                                 \nsage: time M = [diagonal_matrix(p) for p in product([1,-1], repeat=4)] \nCPU times: user 11.4 ms, sys: 92 \u00b5s, total: 11.5 ms                    \nWall time: 11.9 ms                                                     \nsage: time S = [m*s.matrix() for m in M for s in SymmetricGroup(4)]    \nCPU times: user 191 ms, sys: 25.2 ms, total: 216 ms                    \nWall time: 667 ms                                                      \nsage: # second call\nsage: time M = [diagonal_matrix(p) for p in product([1,-1], repeat=4)]\nCPU times: user 11.7 ms, sys: 1.34 ms, total: 13 ms                   \nWall time: 16.6 ms                                                    \nsage: time S = [m*s.matrix() for m in M for s in SymmetricGroup(4)]   \nCPU times: user 108 ms, sys: 1.92 ms, total: 110 ms                   \nWall time: 114 ms                                                     \n```\n\nSo it seems using `WeylGroup(['B',4])` is about 4 times slower than your solution. But I don't know if I will change it. I mean that improvement could be done directly in `WeylGroup` code...",
    "created_at": "2015-08-12T09:08:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266975",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:48" align="right">comment:48</div>

> > Replying to [@videlec](#comment:42):
> > > Are you sure `ncube_isometry_group` is worth a `@cached_function`?

In fact, you make me realize that there is already caching involved in WeylGroup. Therefore caching that function is not so necessary. Without caching, I get:

```
sage: from sage.combinat.tiling import ncube_isometry_group
sage: time L = ncube_isometry_group(4)             
CPU times: user 1.14 s, sys: 19.7 ms, total: 1.16 s
Wall time: 1.3 s                                   
sage: time L = ncube_isometry_group(4)             
CPU times: user 358 ms, sys: 4.01 ms, total: 362 ms
Wall time: 448 ms                                      
```

> ```
> sage: from itertools import product
> sage: %timeit M = [diagonal_matrix(p) for p in product([1,-1], repeat=4)]
> 1 loops, best of 3: 2.9 ms per loop
> sage: M = [diagonal_matrix(p) for p in product([1,-1], repeat=4)]
> sage: %timeit S = [m*s.matrix() for m in M for s in SymmetricGroup(4)]
> 100 loops, best of 3: 18.3 ms per loop
> ```
> So it is likely to be `~20ms`.

Note that you can't use timeit above since there is caching involved in SymmetricGroup.

For comparison, your solution on my machine gives the following timings:

```python
sage: from itertools import product   
sage: # first call                                 
sage: time M = [diagonal_matrix(p) for p in product([1,-1], repeat=4)] 
CPU times: user 11.4 ms, sys: 92 µs, total: 11.5 ms                    
Wall time: 11.9 ms                                                     
sage: time S = [m*s.matrix() for m in M for s in SymmetricGroup(4)]    
CPU times: user 191 ms, sys: 25.2 ms, total: 216 ms                    
Wall time: 667 ms                                                      
sage: # second call
sage: time M = [diagonal_matrix(p) for p in product([1,-1], repeat=4)]
CPU times: user 11.7 ms, sys: 1.34 ms, total: 13 ms                   
Wall time: 16.6 ms                                                    
sage: time S = [m*s.matrix() for m in M for s in SymmetricGroup(4)]   
CPU times: user 108 ms, sys: 1.92 ms, total: 110 ms                   
Wall time: 114 ms                                                     
```

So it seems using `WeylGroup(['B',4])` is about 4 times slower than your solution. But I don't know if I will change it. I mean that improvement could be done directly in `WeylGroup` code...



---

archive/issue_comments_266976.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nReplying to [@seblabbe](#comment:48):\n> > \n> > ```\n> > sage: from itertools import product\n> > sage: %timeit M = [diagonal_matrix(p) for p in product([1,-1], repeat=4)]\n> > 1 loops, best of 3: 2.9 ms per loop\n> > sage: M = [diagonal_matrix(p) for p in product([1,-1], repeat=4)]\n> > sage: %timeit S = [m*s.matrix() for m in M for s in SymmetricGroup(4)]\n> > 100 loops, best of 3: 18.3 ms per loop\n> > ```\n> > So it is likely to be `~20ms`.\n\n> \n> Note that you can't use timeit above since there is caching involved in SymmetricGroup.\n\nWhere?! Beyond the construction of the group (`SymmetricGroup(4) is SymmetricGroup(4)` gives `True`) nothing is cached.",
    "created_at": "2015-08-12T13:19:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266976",
    "user": "https://github.com/videlec"
}
```

<div id="comment:49" align="right">comment:49</div>

Replying to [@seblabbe](#comment:48):
> > 
> > ```
> > sage: from itertools import product
> > sage: %timeit M = [diagonal_matrix(p) for p in product([1,-1], repeat=4)]
> > 1 loops, best of 3: 2.9 ms per loop
> > sage: M = [diagonal_matrix(p) for p in product([1,-1], repeat=4)]
> > sage: %timeit S = [m*s.matrix() for m in M for s in SymmetricGroup(4)]
> > 100 loops, best of 3: 18.3 ms per loop
> > ```
> > So it is likely to be `~20ms`.

> 
> Note that you can't use timeit above since there is caching involved in SymmetricGroup.

Where?! Beyond the construction of the group (`SymmetricGroup(4) is SymmetricGroup(4)` gives `True`) nothing is cached.



---

archive/issue_comments_266977.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\n> Where?! Beyond the construction of the group (`SymmetricGroup(4) is SymmetricGroup(4)` gives `True`) nothing is cached.\n\nDon't you get that the first execution of\n\n```\nsage: time S = [m*s.matrix() for m in M for s in SymmetricGroup(4)]\n```\nis slower than the second? And that the second takes about the same time than the third, the fourth, etc. ? Like me:\n\n```\nsage: from itertools import product                                \nsage: M = [diagonal_matrix(p) for p in product([1,-1], repeat=4)]  \nsage: time S = [m*s.matrix() for m in M for s in SymmetricGroup(4)]\nCPU times: user 184 ms, sys: 18 ms, total: 202 ms                  \nWall time: 710 ms                                                  \nsage: time S = [m*s.matrix() for m in M for s in SymmetricGroup(4)]\nCPU times: user 109 ms, sys: 2.05 ms, total: 111 ms                \nWall time: 166 ms                                                  \nsage: time S = [m*s.matrix() for m in M for s in SymmetricGroup(4)]\nCPU times: user 109 ms, sys: 2.6 ms, total: 111 ms                 \nWall time: 113 ms                                                  \nsage: time S = [m*s.matrix() for m in M for s in SymmetricGroup(4)]\nCPU times: user 110 ms, sys: 2.12 ms, total: 112 ms                \nWall time: 169 ms                                                  \nsage: time S = [m*s.matrix() for m in M for s in SymmetricGroup(4)]\nCPU times: user 108 ms, sys: 2.44 ms, total: 111 ms                \nWall time: 114 ms                                                  \n```",
    "created_at": "2015-08-12T13:58:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266977",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:50" align="right">comment:50</div>

> Where?! Beyond the construction of the group (`SymmetricGroup(4) is SymmetricGroup(4)` gives `True`) nothing is cached.

Don't you get that the first execution of

```
sage: time S = [m*s.matrix() for m in M for s in SymmetricGroup(4)]
```
is slower than the second? And that the second takes about the same time than the third, the fourth, etc. ? Like me:

```
sage: from itertools import product                                
sage: M = [diagonal_matrix(p) for p in product([1,-1], repeat=4)]  
sage: time S = [m*s.matrix() for m in M for s in SymmetricGroup(4)]
CPU times: user 184 ms, sys: 18 ms, total: 202 ms                  
Wall time: 710 ms                                                  
sage: time S = [m*s.matrix() for m in M for s in SymmetricGroup(4)]
CPU times: user 109 ms, sys: 2.05 ms, total: 111 ms                
Wall time: 166 ms                                                  
sage: time S = [m*s.matrix() for m in M for s in SymmetricGroup(4)]
CPU times: user 109 ms, sys: 2.6 ms, total: 111 ms                 
Wall time: 113 ms                                                  
sage: time S = [m*s.matrix() for m in M for s in SymmetricGroup(4)]
CPU times: user 110 ms, sys: 2.12 ms, total: 112 ms                
Wall time: 169 ms                                                  
sage: time S = [m*s.matrix() for m in M for s in SymmetricGroup(4)]
CPU times: user 108 ms, sys: 2.44 ms, total: 111 ms                
Wall time: 114 ms                                                  
```



---

archive/issue_comments_266978.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nYes for the timing. But this does **not** implies that something is cached. Actually, the reason is because gap is launched (I do not know why)\n\n```\nsage: S = SymmetricGroup(4)\nsage: time gap(3)\nCPU times: user 16 ms, sys: 12 ms, total: 28 ms\nWall time: 295 ms\n3\nsage: from itertools import product\nsage: M = [diagonal_matrix(p) for p in product([1,-1], repeat=4)]\nsage: time S = [m*s.matrix() for m in M for s in SymmetricGroup(4)]\nCPU times: user 56 ms, sys: 0 ns, total: 56 ms\nWall time: 56.9 ms\nsage: time S = [m*s.matrix() for m in M for s in SymmetricGroup(4)]\nCPU times: user 56 ms, sys: 0 ns, total: 56 ms\nWall time: 53 ms\n```",
    "created_at": "2015-08-12T14:06:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266978",
    "user": "https://github.com/videlec"
}
```

<div id="comment:51" align="right">comment:51</div>

Yes for the timing. But this does **not** implies that something is cached. Actually, the reason is because gap is launched (I do not know why)

```
sage: S = SymmetricGroup(4)
sage: time gap(3)
CPU times: user 16 ms, sys: 12 ms, total: 28 ms
Wall time: 295 ms
3
sage: from itertools import product
sage: M = [diagonal_matrix(p) for p in product([1,-1], repeat=4)]
sage: time S = [m*s.matrix() for m in M for s in SymmetricGroup(4)]
CPU times: user 56 ms, sys: 0 ns, total: 56 ms
Wall time: 56.9 ms
sage: time S = [m*s.matrix() for m in M for s in SymmetricGroup(4)]
CPU times: user 56 ms, sys: 0 ns, total: 56 ms
Wall time: 53 ms
```



---

archive/issue_comments_266979.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\ncaching `ncube_isometry_group` gives:\n\n```\nsage: from sage.games.quantumino import QuantuminoSolver \nsage: q = QuantuminoSolver(0)                            \nsage: t = q.tiling_solver()                              \nsage: time rows = t.rows()                               \nCPU times: user 18.8 s, sys: 168 ms, total: 19 s         \nWall time: 19 s                                          \n```\n\nnot caching `ncube_isometry_group` gives:\n\n```\nsage: from sage.games.quantumino import QuantuminoSolver  \nsage: q = QuantuminoSolver(0)                             \nsage: t = q.tiling_solver()                               \nsage: time rows = t.rows()                                \nCPU times: user 19.4 s, sys: 288 ms, total: 19.7 s        \nWall time: 20 s                                                                      \n```\n\nSo I confirm that I don't lose relatively much time by not caching.",
    "created_at": "2015-08-12T14:20:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266979",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:52" align="right">comment:52</div>

caching `ncube_isometry_group` gives:

```
sage: from sage.games.quantumino import QuantuminoSolver 
sage: q = QuantuminoSolver(0)                            
sage: t = q.tiling_solver()                              
sage: time rows = t.rows()                               
CPU times: user 18.8 s, sys: 168 ms, total: 19 s         
Wall time: 19 s                                          
```

not caching `ncube_isometry_group` gives:

```
sage: from sage.games.quantumino import QuantuminoSolver  
sage: q = QuantuminoSolver(0)                             
sage: t = q.tiling_solver()                               
sage: time rows = t.rows()                                
CPU times: user 19.4 s, sys: 288 ms, total: 19.7 s        
Wall time: 20 s                                                                      
```

So I confirm that I don't lose relatively much time by not caching.



---

archive/issue_comments_266980.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nReplying to [@videlec](#comment:46):\n> Perhaps the way it is implemented is wrong. For example\n> \n> ```\n> sage: %timeit P = [s.matrix() for s in SymmetricGroup(4)]\n> 1 loops, best of 3: 1.27 ms per loop\n> ```\n\nI removed the `cached_method`. Do you want me to replace the code based on `WeylGroup(['B',n])` by the `SymmetricGroup` + `diagonal_matrix of signs` code you propose? I think that this improvement should be done in `WeylGroup` in another ticket.\n\nAlso, for timing improvements in that file `tiling.py`, there is a another more important thing to spend time on because a lot of time is spent creating vectors from tuple (because coordinates are stored as tuple). This should be done in another ticket.\n\nNeeds review!",
    "created_at": "2015-08-13T12:03:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266980",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:53" align="right">comment:53</div>

Replying to [@videlec](#comment:46):
> Perhaps the way it is implemented is wrong. For example
> 
> ```
> sage: %timeit P = [s.matrix() for s in SymmetricGroup(4)]
> 1 loops, best of 3: 1.27 ms per loop
> ```

I removed the `cached_method`. Do you want me to replace the code based on `WeylGroup(['B',n])` by the `SymmetricGroup` + `diagonal_matrix of signs` code you propose? I think that this improvement should be done in `WeylGroup` in another ticket.

Also, for timing improvements in that file `tiling.py`, there is a another more important thing to spend time on because a lot of time is spent creating vectors from tuple (because coordinates are stored as tuple). This should be done in another ticket.

Needs review!



---

archive/issue_comments_266981.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nReplying to [@seblabbe](#comment:53):\n> Replying to [@videlec](#comment:46):\n> > Perhaps the way it is implemented is wrong. For example\n> > \n> > ```\n> > sage: %timeit P = [s.matrix() for s in SymmetricGroup(4)]\n> > 1 loops, best of 3: 1.27 ms per loop\n> > ```\n\n> \n> I removed the `cached_method`. Do you want me to replace the code based on `WeylGroup(['B',n])` by the `SymmetricGroup` + `diagonal_matrix of signs` code you propose? I think that this improvement should be done in `WeylGroup` in another ticket.\n\nNope. I also the think that the `WeylGroup` code has to be improved.\n\n> Also, for timing improvements in that file `tiling.py`, there is a another more important thing to spend time on because a lot of time is spent creating vectors from tuple (because coordinates are stored as tuple). This should be done in another ticket.\n\nDid you notice that\n\n```\nsage: t = map(vector, t)\n```\nis much slower than\n\n```\nsage: V = FreeModule(ZZ,12)\nsage: t = map(V,t)\n```\n(I measure a factor x8 in `__sub__` and `__add__` for example)\n\nMoreover, everything would be faster if you would store integer vectors instead of tuples (and an attribute `self._free_module`). Why aren't you doing that?",
    "created_at": "2015-08-13T12:56:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266981",
    "user": "https://github.com/videlec"
}
```

<div id="comment:54" align="right">comment:54</div>

Replying to [@seblabbe](#comment:53):
> Replying to [@videlec](#comment:46):
> > Perhaps the way it is implemented is wrong. For example
> > 
> > ```
> > sage: %timeit P = [s.matrix() for s in SymmetricGroup(4)]
> > 1 loops, best of 3: 1.27 ms per loop
> > ```

> 
> I removed the `cached_method`. Do you want me to replace the code based on `WeylGroup(['B',n])` by the `SymmetricGroup` + `diagonal_matrix of signs` code you propose? I think that this improvement should be done in `WeylGroup` in another ticket.

Nope. I also the think that the `WeylGroup` code has to be improved.

> Also, for timing improvements in that file `tiling.py`, there is a another more important thing to spend time on because a lot of time is spent creating vectors from tuple (because coordinates are stored as tuple). This should be done in another ticket.

Did you notice that

```
sage: t = map(vector, t)
```
is much slower than

```
sage: V = FreeModule(ZZ,12)
sage: t = map(V,t)
```
(I measure a factor x8 in `__sub__` and `__add__` for example)

Moreover, everything would be faster if you would store integer vectors instead of tuples (and an attribute `self._free_module`). Why aren't you doing that?



---

archive/issue_comments_266982.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nI still do not understand why you are parallelizing the polyomino solver code and not the DLX one. Isn't your strategy exactly equivalent to this one: pick a column, for each row that does have a 1 in this column remove all the columns occuppied by the piece and launch an independent process?",
    "created_at": "2015-08-13T13:02:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266982",
    "user": "https://github.com/videlec"
}
```

<div id="comment:55" align="right">comment:55</div>

I still do not understand why you are parallelizing the polyomino solver code and not the DLX one. Isn't your strategy exactly equivalent to this one: pick a column, for each row that does have a 1 in this column remove all the columns occuppied by the piece and launch an independent process?



---

archive/issue_comments_266983.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\n> Moreover, everything would be faster if you would store integer vectors instead of tuples (and an attribute `self._free_module`). Why aren't you doing that?\n\n1. Because I think I wanted to use the most basic hashable container (tuple) for the need. I realized only recently that it was slow because there are many matrix operations and additions involved. So indeed, storing vectors would be better.\n\n2. Because it is not the purpose of this ticket.",
    "created_at": "2015-08-15T12:27:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266983",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:56" align="right">comment:56</div>

> Moreover, everything would be faster if you would store integer vectors instead of tuples (and an attribute `self._free_module`). Why aren't you doing that?

1. Because I think I wanted to use the most basic hashable container (tuple) for the need. I realized only recently that it was slow because there are many matrix operations and additions involved. So indeed, storing vectors would be better.

2. Because it is not the purpose of this ticket.



---

archive/issue_comments_266984.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nReplying to [@videlec](#comment:55):\n> I still do not understand why you are parallelizing the polyomino solver code and not the DLX one. Isn't your strategy exactly equivalent to this one: pick a column, for each row that does have a 1 in this column remove all the columns occuppied by the piece and launch an independent process?\n\nOkay, I will work on a new commit for that.",
    "created_at": "2015-08-15T12:28:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266984",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:57" align="right">comment:57</div>

Replying to [@videlec](#comment:55):
> I still do not understand why you are parallelizing the polyomino solver code and not the DLX one. Isn't your strategy exactly equivalent to this one: pick a column, for each row that does have a 1 in this column remove all the columns occuppied by the piece and launch an independent process?

Okay, I will work on a new commit for that.



---

archive/issue_events_267133.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-08-15T12:28:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18987#event-267133"
}
```



---

archive/issue_events_267134.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-08-15T12:28:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18987#event-267134"
}
```



---

archive/issue_comments_266985.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nReplying to [@seblabbe](#comment:56):\n> > Moreover, everything would be faster if you would store integer vectors instead of tuples (and an attribute `self._free_module`). Why aren't you doing that?\n\n> \n> 1. Because I think I wanted to use the most basic hashable container (tuple) for the need. I realized only recently that it was slow because there are many matrix operations and additions involved. So indeed, storing vectors would be better.\n> \n> 2. Because it is not the purpose of this ticket.\n\nI opened #19036",
    "created_at": "2015-08-15T12:37:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266985",
    "user": "https://github.com/videlec"
}
```

<div id="comment:58" align="right">comment:58</div>

Replying to [@seblabbe](#comment:56):
> > Moreover, everything would be faster if you would store integer vectors instead of tuples (and an attribute `self._free_module`). Why aren't you doing that?

> 
> 1. Because I think I wanted to use the most basic hashable container (tuple) for the need. I realized only recently that it was slow because there are many matrix operations and additions involved. So indeed, storing vectors would be better.
> 
> 2. Because it is not the purpose of this ticket.

I opened #19036



---

archive/issue_comments_266986.json:
```json
{
    "body": "<div id=\"comment:59\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/df655874d79c75f3d5b18adda01cedb620a1856b\"><code>df65587</code></a></td><td><code>Trac #18987: Moved the paralel computation of nb of sol in dancing links module</code></td></tr></table>\n",
    "created_at": "2015-08-17T21:50:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266986",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:59"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/df655874d79c75f3d5b18adda01cedb620a1856b"><code>df65587</code></a></td><td><code>Trac #18987: Moved the paralel computation of nb of sol in dancing links module</code></td></tr></table>




---

archive/issue_comments_266987.json:
```json
{
    "body": "Changed commit from **[`0d68ece`](https://github.com/sagemath/sagetrac-mirror/commit/0d68ecec28cb92d9e78a92d6e733d42b3e8941c1)** to **[`df65587`](https://github.com/sagemath/sagetrac-mirror/commit/df655874d79c75f3d5b18adda01cedb620a1856b)**",
    "created_at": "2015-08-17T21:50:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266987",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0d68ece`](https://github.com/sagemath/sagetrac-mirror/commit/0d68ecec28cb92d9e78a92d6e733d42b3e8941c1)** to **[`df65587`](https://github.com/sagemath/sagetrac-mirror/commit/df655874d79c75f3d5b18adda01cedb620a1856b)**



---

archive/issue_comments_266988.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\n(I will not have access to a machine with Sage for the next 7 days).",
    "created_at": "2015-08-17T21:52:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266988",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:60" align="right">comment:60</div>

(I will not have access to a machine with Sage for the next 7 days).



---

archive/issue_events_267135.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-08-17T21:52:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18987#event-267135"
}
```



---

archive/issue_events_267136.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-08-17T21:52:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18987#event-267136"
}
```



---

archive/issue_comments_266989.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nOk, Vincent. I am now back and available to do the follow up on this ticket.\n\nWith the new proposal you made, this ticket now consist of two independant things. Do you prefer me to split the code into two tickets (easier to review) or is it ok like this?\n\nS\u00e9bastien",
    "created_at": "2015-08-24T09:05:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266989",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:61" align="right">comment:61</div>

Ok, Vincent. I am now back and available to do the follow up on this ticket.

With the new proposal you made, this ticket now consist of two independant things. Do you prefer me to split the code into two tickets (easier to review) or is it ok like this?

Sébastien



---

archive/issue_comments_266990.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nI finally decided to split this ticket into two to ease the review. The second part is now available at #19107.",
    "created_at": "2015-08-27T19:25:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266990",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:62" align="right">comment:62</div>

I finally decided to split this ticket into two to ease the review. The second part is now available at #19107.



---

archive/issue_comments_266991.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,7 +2,7 @@\n \n ```\n sage: from sage.games.quantumino import QuantuminoSolver\n-sage: QuantuminoSolver(0).number_of_solutions()  # long time (about 30 days)\n+sage: QuantuminoSolver(0).number_of_solutions()  # long time (several days)\n ```\n \n but we can make it faster by doing the computation in parallel... This ticket does this.\n``````\n",
    "created_at": "2015-08-27T19:25:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266991",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,7 +2,7 @@
 
 ```
 sage: from sage.games.quantumino import QuantuminoSolver
-sage: QuantuminoSolver(0).number_of_solutions()  # long time (about 30 days)
+sage: QuantuminoSolver(0).number_of_solutions()  # long time (several days)
 ```
 
 but we can make it faster by doing the computation in parallel... This ticket does this.
``````




---

archive/issue_events_267137.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-08-27T19:25:05Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "title_is": "Parallel computation of number of solutions in dancing links",
    "title_was": "Parallel computation for TilingSolver.number_of_solutions",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18987#event-267137"
}
```



---

archive/issue_comments_266992.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,6 +5,4 @@\n sage: QuantuminoSolver(0).number_of_solutions()  # long time (several days)\n ```\n \n-but we can make it faster by doing the computation in parallel... This ticket does this.\n-\n-It also simplify the computation by avoiding to compute 4 times the same solution (obtained by rotation of angle pi of the 5x8x2 box).\n+but we can make it faster by doing the computation in parallel... This ticket does this (directly in the dancing links code).\n``````\n",
    "created_at": "2015-08-27T19:26:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266992",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,6 +5,4 @@
 sage: QuantuminoSolver(0).number_of_solutions()  # long time (several days)
 ```
 
-but we can make it faster by doing the computation in parallel... This ticket does this.
-
-It also simplify the computation by avoiding to compute 4 times the same solution (obtained by rotation of angle pi of the 5x8x2 box).
+but we can make it faster by doing the computation in parallel... This ticket does this (directly in the dancing links code).
``````




---

archive/issue_comments_266993.json:
```json
{
    "body": "Changed commit from **[`df65587`](https://github.com/sagemath/sagetrac-mirror/commit/df655874d79c75f3d5b18adda01cedb620a1856b)** to **[`c016126`](https://github.com/sagemath/sagetrac-mirror/commit/c01612691e55baf745fc710fc8c8dfc97b885375)**",
    "created_at": "2015-08-27T19:27:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266993",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`df65587`](https://github.com/sagemath/sagetrac-mirror/commit/df655874d79c75f3d5b18adda01cedb620a1856b)** to **[`c016126`](https://github.com/sagemath/sagetrac-mirror/commit/c01612691e55baf745fc710fc8c8dfc97b885375)**



---

archive/issue_comments_266994.json:
```json
{
    "body": "<div id=\"comment:64\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8db8f72d4369f70aeff8cb26cde971961216fd7f\"><code>8db8f72</code></a></td><td><code>Trac #18987: Number of solutions method for dancing links</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9d25f7c8ea01988f6e79903885cc41946ad2e4a0\"><code>9d25f7c</code></a></td><td><code>Trac #18987: doc + optim in dancing_links</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c01612691e55baf745fc710fc8c8dfc97b885375\"><code>c016126</code></a></td><td><code>Trac #18987: parallel computations in dancing links</code></td></tr></table>\n",
    "created_at": "2015-08-27T19:27:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266994",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:64"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8db8f72d4369f70aeff8cb26cde971961216fd7f"><code>8db8f72</code></a></td><td><code>Trac #18987: Number of solutions method for dancing links</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9d25f7c8ea01988f6e79903885cc41946ad2e4a0"><code>9d25f7c</code></a></td><td><code>Trac #18987: doc + optim in dancing_links</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c01612691e55baf745fc710fc8c8dfc97b885375"><code>c016126</code></a></td><td><code>Trac #18987: parallel computations in dancing links</code></td></tr></table>




---

archive/issue_comments_266995.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\n- `(solving) independant (cases)` -> `independent`\n- I do not understand this comment\n\n```\nIf possible, a good choice of column gives a partition\nof solutions where each part has about the same number\nof solutions.\n```\n- could you make a complete sentence for the `OUTPUT` section instead of `dict, row number -> list of rows`\n- this is not quite accurate\n\n```\nAfter the split each subproblem has the same number of columns and\nrows and the same solutions as above::\n```\n  it is the union of solutions of the subproblems that form the solution of the initial one.\n- I do not see the point of having `number_of_solutions_iterator` and `number_of_solutions`. You should just get rid of the first one and allow parallelization in the second.\n- Why not also make available parallelization for getting the list of solutions?",
    "created_at": "2015-09-04T00:04:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266995",
    "user": "https://github.com/videlec"
}
```

<div id="comment:65" align="right">comment:65</div>

- `(solving) independant (cases)` -> `independent`
- I do not understand this comment

```
If possible, a good choice of column gives a partition
of solutions where each part has about the same number
of solutions.
```
- could you make a complete sentence for the `OUTPUT` section instead of `dict, row number -> list of rows`
- this is not quite accurate

```
After the split each subproblem has the same number of columns and
rows and the same solutions as above::
```
  it is the union of solutions of the subproblems that form the solution of the initial one.
- I do not see the point of having `number_of_solutions_iterator` and `number_of_solutions`. You should just get rid of the first one and allow parallelization in the second.
- Why not also make available parallelization for getting the list of solutions?



---

archive/issue_events_267138.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-09-04T00:04:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18987#event-267138"
}
```



---

archive/issue_events_267139.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-09-04T00:04:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18987#event-267139"
}
```



---

archive/issue_comments_266996.json:
```json
{
    "body": "<div id=\"comment:66\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/29ff98625316f95c48fd704115a209dce38deda8\"><code>29ff986</code></a></td><td><code>Trac #18987: Fixed reviewer comment 65</code></td></tr></table>\n",
    "created_at": "2015-09-05T15:36:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266996",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:66"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/29ff98625316f95c48fd704115a209dce38deda8"><code>29ff986</code></a></td><td><code>Trac #18987: Fixed reviewer comment 65</code></td></tr></table>




---

archive/issue_comments_266997.json:
```json
{
    "body": "Changed commit from **[`c016126`](https://github.com/sagemath/sagetrac-mirror/commit/c01612691e55baf745fc710fc8c8dfc97b885375)** to **[`29ff986`](https://github.com/sagemath/sagetrac-mirror/commit/29ff98625316f95c48fd704115a209dce38deda8)**",
    "created_at": "2015-09-05T15:36:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266997",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c016126`](https://github.com/sagemath/sagetrac-mirror/commit/c01612691e55baf745fc710fc8c8dfc97b885375)** to **[`29ff986`](https://github.com/sagemath/sagetrac-mirror/commit/29ff98625316f95c48fd704115a209dce38deda8)**



---

archive/issue_comments_266998.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nThanks for your review! I fixed the first comments.\n\n> - I do not see the point of having `number_of_solutions_iterator` and `number_of_solutions`. You should just get rid of the first one and allow parallelization in the second.\n\n  - `number_of_solutions_iterator` is now `_number_of_solutions_iterator`\n  - `number_of_solutions` now allows parallel computation\n  - I kept `_number_of_solutions_iterator` because for the problem I am currently looking at, `number_of_solutions` takes days while `_number_of_solutions_iterator`  yield something once every hours. So it allows me to follow the computation, making sure it is not stuck and evaluate the duration left to do. I prefer this way rather than removing method `_number_of_solutions_iterator` and adding some verbose thing in `number_of_solutions`.\n\n> - Why not also make available parallelization for getting the list of solutions?\n\nBecause I don't know how or if it is possible to use the parallel decorator to merge iterators.",
    "created_at": "2015-09-05T15:45:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266998",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:67" align="right">comment:67</div>

Thanks for your review! I fixed the first comments.

> - I do not see the point of having `number_of_solutions_iterator` and `number_of_solutions`. You should just get rid of the first one and allow parallelization in the second.

  - `number_of_solutions_iterator` is now `_number_of_solutions_iterator`
  - `number_of_solutions` now allows parallel computation
  - I kept `_number_of_solutions_iterator` because for the problem I am currently looking at, `number_of_solutions` takes days while `_number_of_solutions_iterator`  yield something once every hours. So it allows me to follow the computation, making sure it is not stuck and evaluate the duration left to do. I prefer this way rather than removing method `_number_of_solutions_iterator` and adding some verbose thing in `number_of_solutions`.

> - Why not also make available parallelization for getting the list of solutions?

Because I don't know how or if it is possible to use the parallel decorator to merge iterators.



---

archive/issue_events_267140.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-09-05T15:45:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18987#event-267140"
}
```



---

archive/issue_events_267141.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-09-05T15:45:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18987#event-267141"
}
```



---

archive/issue_events_267142.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-09-07T17:33:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18987#event-267142"
}
```



---

archive/issue_events_267143.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-09-07T17:33:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18987#event-267143"
}
```



---

archive/issue_comments_266999.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nSalut Sebastien,\n\nThanks for your patience. I am sure that the choice of splitting is suboptimal but at least the design is much cleaner than in the first version.\n\nVincent",
    "created_at": "2015-09-07T17:33:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-266999",
    "user": "https://github.com/videlec"
}
```

<div id="comment:68" align="right">comment:68</div>

Salut Sebastien,

Thanks for your patience. I am sure that the choice of splitting is suboptimal but at least the design is much cleaner than in the first version.

Vincent



---

archive/issue_events_267144.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-09-08T14:41:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18987#event-267144"
}
```



---

archive/issue_events_267145.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "cb91abdb7d9c17dd132f67161112c89e5c4a1352",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-09-08T14:41:15Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18987#event-267145"
}
```



---

archive/issue_comments_267000.json:
```json
{
    "body": "Changed branch from **[public/18987](https://github.com/sagemath/sagetrac-mirror/tree/public/18987)** to **[`29ff986`](https://github.com/sagemath/sagetrac-mirror/commit/29ff98625316f95c48fd704115a209dce38deda8)**",
    "created_at": "2015-09-08T14:41:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18987#issuecomment-267000",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/18987](https://github.com/sagemath/sagetrac-mirror/tree/public/18987)** to **[`29ff986`](https://github.com/sagemath/sagetrac-mirror/commit/29ff98625316f95c48fd704115a209dce38deda8)**
