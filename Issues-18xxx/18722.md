# Issue 18722: Fix weight of Nakajima monomials

archive/issues_018485.json:
```json
{
    "body": "With #18453, all weights are computed as the difference of the highest weight to what should be the weight. In particular, any highest weight element has weight 0.\n\n```\nsage: La = RootSystem(['A',2]).weight_lattice().fundamental_weights()\nsage: M = crystals.NakajimaMonomials(['A',2], La[1])\nsage: M.module_generators[0].weight()\n(0, 0, 0)\n```\nI also make Nakajima monomials as classical crystals for the finite types.\n\nAssignee: sage-combinat\n\nCC:  sage-combinat @bsalisbury1 @anneschilling\n\nKeywords: crystals, nakajima monomials\n\nBranch/Commit: 4eb38e26d5448c620c5653de6a4eb6d998395c09\n\nReviewer: Ben Salisbury\n\nAuthor: Travis Scrimshaw\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/18722\n\n",
    "closed_at": "2015-06-19T08:24:55Z",
    "created_at": "2015-06-17T20:10:24Z",
    "labels": [
        "component: combinatorics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.8",
    "title": "Fix weight of Nakajima monomials",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18722",
    "user": "https://github.com/tscrim"
}
```
With #18453, all weights are computed as the difference of the highest weight to what should be the weight. In particular, any highest weight element has weight 0.

```
sage: La = RootSystem(['A',2]).weight_lattice().fundamental_weights()
sage: M = crystals.NakajimaMonomials(['A',2], La[1])
sage: M.module_generators[0].weight()
(0, 0, 0)
```
I also make Nakajima monomials as classical crystals for the finite types.

Assignee: sage-combinat

CC:  sage-combinat @bsalisbury1 @anneschilling

Keywords: crystals, nakajima monomials

Branch/Commit: 4eb38e26d5448c620c5653de6a4eb6d998395c09

Reviewer: Ben Salisbury

Author: Travis Scrimshaw

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/18722





---

archive/issue_comments_329784.json:
```json
{
    "body": "<a id='comment:1'></a>\nLast 10 new commits:\n|                                                                                                                                          |                                       |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|\n|[c8fd060](http://git.sagemath.org/sage.git/commit/?id=c8fd06023efa5185e302778858a99f588b4da919)|`Alcove paths weights are up to snuff.`|\n|[495fa98](http://git.sagemath.org/sage.git/commit/?id=495fa98ec8ecd009128b2a86c3e8a6ab0ed8d5ca)|`documentation updates`|\n|[42ed2f2](http://git.sagemath.org/sage.git/commit/?id=42ed2f2cdb58a8f5383159716e9be570c779a7f3)|`Merge branch 'public/crystal/18453' of git://trac.sagemath.org/sage into public/crystal/18453`|\n|[f4955c5](http://git.sagemath.org/sage.git/commit/?id=f4955c5f50d4f34510176acff8956f49d3b8702a)|`Fixing RC crystals for extended and non-extended weight input.`|\n|[f156803](http://git.sagemath.org/sage.git/commit/?id=f156803dfb27b41f5837084e0708dc4b8295985f)|`18453: small edits`|\n|[9b5b9d5](http://git.sagemath.org/sage.git/commit/?id=9b5b9d5e83a40a6fe55ea23d8cdf33d0f0a131c5)|`Merge branch 'develop' into public/crystal/18453`|\n|[d120397](http://git.sagemath.org/sage.git/commit/?id=d120397df0e3861d7f8a876da1a62836d9cdd00b)|`18453: updated thematic tutorial on affine crystals`|\n|[8e5c4cd](http://git.sagemath.org/sage.git/commit/?id=8e5c4cd07daadb6479b3a6bc18b12d42254a3d74)|`18453: some more additions to the thematic tutorial`|\n|[ee398ef](http://git.sagemath.org/sage.git/commit/?id=ee398efc22755947ea98f0a8250333d21352f2db)|`18453: fixed one_dimensional_configuration sum issue`|\n|[f02f80c](http://git.sagemath.org/sage.git/commit/?id=f02f80cb660f9f35df0eba94eb1cdcf767deb22d)|`Fixing weight of Nakajima monomials.`|",
    "created_at": "2015-06-17T20:16:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18722",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18722#issuecomment-329784",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:1'></a>
Last 10 new commits:
|                                                                                                                                          |                                       |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|
|[c8fd060](http://git.sagemath.org/sage.git/commit/?id=c8fd06023efa5185e302778858a99f588b4da919)|`Alcove paths weights are up to snuff.`|
|[495fa98](http://git.sagemath.org/sage.git/commit/?id=495fa98ec8ecd009128b2a86c3e8a6ab0ed8d5ca)|`documentation updates`|
|[42ed2f2](http://git.sagemath.org/sage.git/commit/?id=42ed2f2cdb58a8f5383159716e9be570c779a7f3)|`Merge branch 'public/crystal/18453' of git://trac.sagemath.org/sage into public/crystal/18453`|
|[f4955c5](http://git.sagemath.org/sage.git/commit/?id=f4955c5f50d4f34510176acff8956f49d3b8702a)|`Fixing RC crystals for extended and non-extended weight input.`|
|[f156803](http://git.sagemath.org/sage.git/commit/?id=f156803dfb27b41f5837084e0708dc4b8295985f)|`18453: small edits`|
|[9b5b9d5](http://git.sagemath.org/sage.git/commit/?id=9b5b9d5e83a40a6fe55ea23d8cdf33d0f0a131c5)|`Merge branch 'develop' into public/crystal/18453`|
|[d120397](http://git.sagemath.org/sage.git/commit/?id=d120397df0e3861d7f8a876da1a62836d9cdd00b)|`18453: updated thematic tutorial on affine crystals`|
|[8e5c4cd](http://git.sagemath.org/sage.git/commit/?id=8e5c4cd07daadb6479b3a6bc18b12d42254a3d74)|`18453: some more additions to the thematic tutorial`|
|[ee398ef](http://git.sagemath.org/sage.git/commit/?id=ee398efc22755947ea98f0a8250333d21352f2db)|`18453: fixed one_dimensional_configuration sum issue`|
|[f02f80c](http://git.sagemath.org/sage.git/commit/?id=f02f80cb660f9f35df0eba94eb1cdcf767deb22d)|`Fixing weight of Nakajima monomials.`|



---

archive/issue_comments_329785.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-06-17T20:16:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18722",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18722#issuecomment-329785",
    "user": "https://github.com/tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_329786.json:
```json
{
    "body": "Changing commit from \"\" to \"f02f80cb660f9f35df0eba94eb1cdcf767deb22d\"",
    "created_at": "2015-06-17T20:16:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18722",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18722#issuecomment-329786",
    "user": "https://github.com/tscrim"
}
```

Changing commit from "" to "f02f80cb660f9f35df0eba94eb1cdcf767deb22d"



---

archive/issue_comments_329787.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,9 @@\n With #18453, all weights are computed as the difference of the highest weight to what should be the weight. In particular, any highest weight element has weight 0.\n+\n+```\n+sage: La = RootSystem(['A',2]).weight_lattice().fundamental_weights()\n+sage: M = crystals.NakajimaMonomials(['A',2], La[1])\n+sage: M.module_generators[0].weight()\n+(0, 0, 0)\n+```\n+I also make Nakajima monomials as classical crystals for the finite types.\n``````\n",
    "created_at": "2015-06-17T20:16:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18722",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18722#issuecomment-329787",
    "user": "https://github.com/tscrim"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,9 @@
 With #18453, all weights are computed as the difference of the highest weight to what should be the weight. In particular, any highest weight element has weight 0.
+
+```
+sage: La = RootSystem(['A',2]).weight_lattice().fundamental_weights()
+sage: M = crystals.NakajimaMonomials(['A',2], La[1])
+sage: M.module_generators[0].weight()
+(0, 0, 0)
+```
+I also make Nakajima monomials as classical crystals for the finite types.
``````




---

archive/issue_comments_329788.json:
```json
{
    "body": "Changing type from enhancement to defect.",
    "created_at": "2015-06-17T20:16:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18722",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18722#issuecomment-329788",
    "user": "https://github.com/tscrim"
}
```

Changing type from enhancement to defect.



---

archive/issue_comments_329789.json:
```json
{
    "body": "Changing branch from \"\" to \"public/crystals/fix_nakajima_monomials-18722\"",
    "created_at": "2015-06-17T20:16:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18722",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18722#issuecomment-329789",
    "user": "https://github.com/tscrim"
}
```

Changing branch from "" to "public/crystals/fix_nakajima_monomials-18722"



---

archive/issue_comments_329790.json:
```json
{
    "body": "<a id='comment:3'></a>\nThe following example failed with the original commit:\n\n```\nsage: M = crystals.NakajimaMonomials(['A',2,1], RootSystem(['A',2,1]).weight_lattice(extended=True).fundamental_weight(0))\nsage: m = M.module_generators[0]\nsage: m.weight()\nLambda[0]\n```\nA conditional was added to `__classcall_private__` of `CrystalsOfNakajimaMonomials` to ensure the weight lattice being used is the extended weight lattice with the underlying Cartan type is affine.\n\nSome doctests needed to be updated so that the input used the extended weight lattice in affine examples.\n\nDoctests passed on my machine, so if you agree with these changes, then you may set the ticket to positive review on my behalf.",
    "created_at": "2015-06-17T20:46:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18722",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18722#issuecomment-329790",
    "user": "https://github.com/bsalisbury1"
}
```

<a id='comment:3'></a>
The following example failed with the original commit:

```
sage: M = crystals.NakajimaMonomials(['A',2,1], RootSystem(['A',2,1]).weight_lattice(extended=True).fundamental_weight(0))
sage: m = M.module_generators[0]
sage: m.weight()
Lambda[0]
```
A conditional was added to `__classcall_private__` of `CrystalsOfNakajimaMonomials` to ensure the weight lattice being used is the extended weight lattice with the underlying Cartan type is affine.

Some doctests needed to be updated so that the input used the extended weight lattice in affine examples.

Doctests passed on my machine, so if you agree with these changes, then you may set the ticket to positive review on my behalf.



---

archive/issue_comments_329791.json:
```json
{
    "body": "Changing commit from \"f02f80cb660f9f35df0eba94eb1cdcf767deb22d\" to \"4eb38e26d5448c620c5653de6a4eb6d998395c09\"",
    "created_at": "2015-06-17T20:47:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18722",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18722#issuecomment-329791",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f02f80cb660f9f35df0eba94eb1cdcf767deb22d" to "4eb38e26d5448c620c5653de6a4eb6d998395c09"



---

archive/issue_comments_329792.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                                       |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------|\n|[4eb38e2](http://git.sagemath.org/sage.git/commit/?id=4eb38e26d5448c620c5653de6a4eb6d998395c09)|`made input from extended weight lattice for highest weight Nakajima monomial crystals`|",
    "created_at": "2015-06-17T20:47:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18722",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18722#issuecomment-329792",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                                       |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------|
|[4eb38e2](http://git.sagemath.org/sage.git/commit/?id=4eb38e26d5448c620c5653de6a4eb6d998395c09)|`made input from extended weight lattice for highest weight Nakajima monomial crystals`|



---

archive/issue_comments_329793.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-06-17T20:50:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18722",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18722#issuecomment-329793",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_329794.json:
```json
{
    "body": "<a id='comment:5'></a>\nWorks for me. Thanks!",
    "created_at": "2015-06-17T20:50:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18722",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18722#issuecomment-329794",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'></a>
Works for me. Thanks!



---

archive/issue_comments_329795.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Ben Salisbury\"",
    "created_at": "2015-06-17T20:50:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18722",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18722#issuecomment-329795",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Ben Salisbury"



---

archive/issue_comments_329796.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-06-19T08:24:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18722",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18722#issuecomment-329796",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_052431.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-06-19T08:24:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18722",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18722#event-52431"
}
```



---

archive/issue_comments_329797.json:
```json
{
    "body": "Changing branch from \"public/crystals/fix_nakajima_monomials-18722\" to \"4eb38e26d5448c620c5653de6a4eb6d998395c09\"",
    "created_at": "2015-06-19T08:24:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18722",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18722#issuecomment-329797",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/crystals/fix_nakajima_monomials-18722" to "4eb38e26d5448c620c5653de6a4eb6d998395c09"
