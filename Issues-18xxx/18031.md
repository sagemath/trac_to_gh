# Issue 18031: Bug in saturation for elliptic curves over Q

archive/issues_017794.json:
```json
{
    "assignees": [],
    "body": "A bug in eclib's saturation function is revealed here:\n\n```\nsage: E = EllipticCurve([0,-1,1,-266,968])\nsage: Q1 = E([-1995,3674,125])\nsage: Q2 = E([157,1950,1])\nsage: E.saturation([Q1,Q2])                                                                                     \n([(-399/25 : 3674/125 : 1), (157 : 1950 : 1)], 1, 7.21429780216482)\nsage: P1, P2 = E.gens()                                                                                         \nsage: E.regulator()\n0.801588644684980\nsage: E.regulator_of_points([Q1,Q2])\n7.21429780216482\n```\nThe points Q1,Q2 generate a subgroup of index 3 but the computed bound on the index is between 2 and 3.  This will be fixed upstream.\n\nNote that for this curve E.gens() gives correct generators but E.simon_two_descent() gives the above two points.\n\nNew upstream source at [http://boxen.math.washington.edu/home/cremona/eclib-20150323.tar.bz2](http://boxen.math.washington.edu/home/cremona/eclib-20150323.tar.bz2) \n\nKeywords: **saturation**\n\nBranch/Commit: **[acefe94](https://github.com/sagemath/sagetrac-mirror/commit/acefe94db857b8ae9de051203a5a61ff74df7d0c)**\n\nUpstream: **Fixed upstream, in a later stable release.**\n\nReviewer: **Fran\u00e7ois Bissey**\n\nAuthor: **John Cremona**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/18031_\n\n",
    "closed_at": "2015-03-25T00:26:44Z",
    "created_at": "2015-03-21T14:38:50Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20elliptic%20curves",
        "https://github.com/sagemath/sage/labels/p1%20%E2%80%93%20blocker",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Bug in saturation for elliptic curves over Q",
    "type": "issue",
    "updated_at": "2015-03-25T00:26:44Z",
    "url": "https://github.com/sagemath/sage/issues/18031",
    "user": "https://github.com/JohnCremona"
}
```
A bug in eclib's saturation function is revealed here:

```
sage: E = EllipticCurve([0,-1,1,-266,968])
sage: Q1 = E([-1995,3674,125])
sage: Q2 = E([157,1950,1])
sage: E.saturation([Q1,Q2])                                                                                     
([(-399/25 : 3674/125 : 1), (157 : 1950 : 1)], 1, 7.21429780216482)
sage: P1, P2 = E.gens()                                                                                         
sage: E.regulator()
0.801588644684980
sage: E.regulator_of_points([Q1,Q2])
7.21429780216482
```
The points Q1,Q2 generate a subgroup of index 3 but the computed bound on the index is between 2 and 3.  This will be fixed upstream.

Note that for this curve E.gens() gives correct generators but E.simon_two_descent() gives the above two points.

New upstream source at [http://boxen.math.washington.edu/home/cremona/eclib-20150323.tar.bz2](http://boxen.math.washington.edu/home/cremona/eclib-20150323.tar.bz2) 

Keywords: **saturation**

Branch/Commit: **[acefe94](https://github.com/sagemath/sagetrac-mirror/commit/acefe94db857b8ae9de051203a5a61ff74df7d0c)**

Upstream: **Fixed upstream, in a later stable release.**

Reviewer: **Fran√ßois Bissey**

Author: **John Cremona**

_Issue created by migration from https://trac.sagemath.org/ticket/18031_





---

archive/issue_events_238786.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2015-03-21T14:38:50Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18031",
    "milestone_number": null,
    "milestone_title": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18031#event-238786"
}
```



---

archive/issue_events_238787.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2015-03-21T14:38:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18031",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20elliptic%20curves",
    "label_color": "0000ff",
    "label_name": "component: elliptic curves",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18031#event-238787"
}
```



---

archive/issue_events_238788.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2015-03-21T14:38:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18031",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18031#event-238788"
}
```



---

archive/issue_events_238789.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2015-03-21T14:38:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18031",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18031#event-238789"
}
```



---

archive/issue_comments_247999.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nBug in eclib fixed.  After testing, will update the upstream sources and the package information.",
    "created_at": "2015-03-21T17:42:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18031#issuecomment-247999",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:1'>Comment 1:</a>
Bug in eclib fixed.  After testing, will update the upstream sources and the package information.



---

archive/issue_comments_248000.json:
```json
{
    "body": "Changed upstream from **Reported upstream. Developers acknowledge bug.** to **Fixed upstream, but not in a stable release.**",
    "created_at": "2015-03-21T17:42:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18031#issuecomment-248000",
    "user": "https://github.com/JohnCremona"
}
```

Changed upstream from **Reported upstream. Developers acknowledge bug.** to **Fixed upstream, but not in a stable release.**



---

archive/issue_comments_248001.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -15,3 +15,5 @@\n The points Q1,Q2 generate a subgroup of index 3 but the computed bound on the index is between 2 and 3.  This will be fixed upstream.\n \n Note that for this curve E.gens() gives correct generators but E.simon_two_descent() gives the above two points.\n+\n+New upstream source at [http://boxen.math.washington.edu/home/cremona/eclib-20150323.tar.bz2](http://boxen.math.washington.edu/home/cremona/eclib-20150323.tar.bz2) \n``````\n",
    "created_at": "2015-03-23T21:27:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18031#issuecomment-248001",
    "user": "https://github.com/JohnCremona"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -15,3 +15,5 @@
 The points Q1,Q2 generate a subgroup of index 3 but the computed bound on the index is between 2 and 3.  This will be fixed upstream.
 
 Note that for this curve E.gens() gives correct generators but E.simon_two_descent() gives the above two points.
+
+New upstream source at [http://boxen.math.washington.edu/home/cremona/eclib-20150323.tar.bz2](http://boxen.math.washington.edu/home/cremona/eclib-20150323.tar.bz2) 
``````




---

archive/issue_comments_248002.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nWith upstream eclib-20150323:\n\n```\nsage: E = EllipticCurve([0,-1,1,-266,968])\nsage: Q1 = E([-1995,3674,125])\nsage: Q2 = E([157,1950,1])\nsage: E.saturation([Q1,Q2])\n([(1 : -27 : 1), (157 : 1950 : 1)], 3, 0.801588644684981)\n```\nwhich will be put in as a doctest.",
    "created_at": "2015-03-23T21:47:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18031#issuecomment-248002",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:3'>Comment 3:</a>
With upstream eclib-20150323:

```
sage: E = EllipticCurve([0,-1,1,-266,968])
sage: Q1 = E([-1995,3674,125])
sage: Q2 = E([157,1950,1])
sage: E.saturation([Q1,Q2])
([(1 : -27 : 1), (157 : 1950 : 1)], 3, 0.801588644684981)
```
which will be put in as a doctest.



---

archive/issue_comments_248003.json:
```json
{
    "body": "Changed upstream from **Fixed upstream, but not in a stable release.** to **Fixed upstream, in a later stable release.**",
    "created_at": "2015-03-23T21:47:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18031#issuecomment-248003",
    "user": "https://github.com/JohnCremona"
}
```

Changed upstream from **Fixed upstream, but not in a stable release.** to **Fixed upstream, in a later stable release.**



---

archive/issue_comments_248004.json:
```json
{
    "body": "Branch: **[u/cremona/18031](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/18031)**",
    "created_at": "2015-03-23T21:54:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18031#issuecomment-248004",
    "user": "https://github.com/JohnCremona"
}
```

Branch: **[u/cremona/18031](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/18031)**



---

archive/issue_comments_248005.json:
```json
{
    "body": "Changed branch from **[u/cremona/18031](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/18031)** to **[u/cremona/eclib-18031](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/eclib-18031)**",
    "created_at": "2015-03-23T21:57:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18031#issuecomment-248005",
    "user": "https://github.com/JohnCremona"
}
```

Changed branch from **[u/cremona/18031](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/18031)** to **[u/cremona/eclib-18031](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/eclib-18031)**



---

archive/issue_comments_248006.json:
```json
{
    "body": "Commit: **[acefe94](https://github.com/sagemath/sagetrac-mirror/commit/acefe94db857b8ae9de051203a5a61ff74df7d0c)**",
    "created_at": "2015-03-23T21:57:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18031#issuecomment-248006",
    "user": "https://github.com/JohnCremona"
}
```

Commit: **[acefe94](https://github.com/sagemath/sagetrac-mirror/commit/acefe94db857b8ae9de051203a5a61ff74df7d0c)**



---

archive/issue_comments_248007.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/acefe94db857b8ae9de051203a5a61ff74df7d0c\">acefe94</a></td><td><code>update eclib to bugfix release 20150323 and add doctest</code></td></tr></table>\n",
    "created_at": "2015-03-23T21:57:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18031#issuecomment-248007",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:5'>Comment 5:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/acefe94db857b8ae9de051203a5a61ff74df7d0c">acefe94</a></td><td><code>update eclib to bugfix release 20150323 and add doctest</code></td></tr></table>




---

archive/issue_events_238790.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2015-03-23T21:58:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18031",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18031#event-238790"
}
```



---

archive/issue_comments_248008.json:
```json
{
    "body": "Reviewer: **Fran\u00e7ois Bissey**",
    "created_at": "2015-03-24T02:50:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18031#issuecomment-248008",
    "user": "https://github.com/kiwifb"
}
```

Reviewer: **Fran√ßois Bissey**



---

archive/issue_comments_248009.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nlgtm",
    "created_at": "2015-03-24T02:50:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18031#issuecomment-248009",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:7'>Comment 7:</a>
lgtm



---

archive/issue_events_238791.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2015-03-24T02:50:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18031",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18031#event-238791"
}
```



---

archive/issue_events_238792.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2015-03-24T02:50:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18031",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18031#event-238792"
}
```



---

archive/issue_comments_248010.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nThanks!\n\nRelease manager -- compared to 20150228 which was already merged, this only changes one source file, there are no API changes so this is a minor bug-fix release.  Sorry it comes so soon after the previous one, but that's when I discovered the bug.",
    "created_at": "2015-03-24T12:09:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18031#issuecomment-248010",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:8'>Comment 8:</a>
Thanks!

Release manager -- compared to 20150228 which was already merged, this only changes one source file, there are no API changes so this is a minor bug-fix release.  Sorry it comes so soon after the previous one, but that's when I discovered the bug.



---

archive/issue_comments_248011.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nI am making this a blocker, that'll get Volker's attention.",
    "created_at": "2015-03-24T18:19:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18031#issuecomment-248011",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:9'>Comment 9:</a>
I am making this a blocker, that'll get Volker's attention.



---

archive/issue_events_238793.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2015-03-24T18:19:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18031",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18031#event-238793"
}
```



---

archive/issue_events_238794.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2015-03-24T18:19:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18031",
    "label": "https://github.com/sagemath/sage/labels/p1%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18031#event-238794"
}
```



---

archive/issue_events_238795.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-03-25T00:26:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18031",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18031#event-238795"
}
```



---

archive/issue_events_238796.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "2a060b6b4e09a2b6ecc42058a93724e01555efa7",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-03-25T00:26:44Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/18031",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18031#event-238796"
}
```



---

archive/issue_comments_248012.json:
```json
{
    "body": "Changed branch from **[u/cremona/eclib-18031](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/eclib-18031)** to **[acefe94](https://github.com/sagemath/sagetrac-mirror/commit/acefe94db857b8ae9de051203a5a61ff74df7d0c)**",
    "created_at": "2015-03-25T00:26:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18031#issuecomment-248012",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/cremona/eclib-18031](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/eclib-18031)** to **[acefe94](https://github.com/sagemath/sagetrac-mirror/commit/acefe94db857b8ae9de051203a5a61ff74df7d0c)**
