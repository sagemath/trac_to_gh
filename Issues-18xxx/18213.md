# Issue 18213: A lot of polytope constructors are broken

archive/issues_017976.json:
```json
{
    "assignees": [],
    "body": "A lot of polytopes constructors in `sage.geometry.polyhedron.library`. For example\n\n1. The Rhombicuboctahedron does not return what it should (as Python division was thought as Sage integer divisions). There is in the code\n\n```\nverts = [ [-3/2, -1/2, -1/2], [-3/2, -1/2, 1/2], [-3/2, 1/2, -1/2],\n...\n```\n\n2. The `great_rhombicuboctahedron` is defined over `QQ` but it should be defined over `QQ[sqrt(2)]`! There are in two places rough approximation of sqrt(2) in the code\n\n```\nv1 = QQ(131739771357/54568400000)   # ~ sqrt(2) + 1 but actually 2 due to Python division\nv2 = QQ(104455571357/27284200000)   # ~ 2 sqrt(2) but actually 3 due to Python division\n```\nInstead, we should use the `base_ring` argument (with appropriate defaults) and use `base_ring(2).sqrt()` instead.\n\n3. The functions unrelated to construction of Polytopes are moved out of the class `Polytopes`:\n   - `Polytopes.orthonormal_1`, `Polytopes.project_1` will be renamed respectively `zero_sum_projection` and `project_points`\n   - the one line `Polytopes._pfunc` is just removed\n\nWhile we're at it, remove the deprecations from #11634.\n\nDuring the process I discovered two annoying bugs:\n- #18214 Bug in volume computation of polyhedron\n- #18220 Bug when creating a polyhedron with coefficients in RR\nMoreover, we can get a great speed up with the following because many polytopes have now coordinates in a quadratic number fields:\n- #18215: Huge speed up for hash of quadratic number field elements\n- #18226: Native `_mpfr_` method on quadratic number field elements\n\nDepends on #18211\n\nCC:  @nathanncohen\n\nBranch/Commit: **[a58da00](https://github.com/sagemath/sagetrac-mirror/commit/a58da00e4907251c2ab47d7af1109da31901ee36)**\n\nReviewer: **Nathann Cohen**\n\nAuthor: **Vincent Delecroix**\n\nComponent: **geometry**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/18213_\n\n",
    "closed_at": "2015-04-19T01:52:06Z",
    "created_at": "2015-04-15T21:42:33Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20geometry",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "A lot of polytope constructors are broken",
    "type": "issue",
    "updated_at": "2015-04-19T01:52:06Z",
    "url": "https://github.com/sagemath/sage/issues/18213",
    "user": "https://github.com/videlec"
}
```
A lot of polytopes constructors in `sage.geometry.polyhedron.library`. For example

1. The Rhombicuboctahedron does not return what it should (as Python division was thought as Sage integer divisions). There is in the code

```
verts = [ [-3/2, -1/2, -1/2], [-3/2, -1/2, 1/2], [-3/2, 1/2, -1/2],
...
```

2. The `great_rhombicuboctahedron` is defined over `QQ` but it should be defined over `QQ[sqrt(2)]`! There are in two places rough approximation of sqrt(2) in the code

```
v1 = QQ(131739771357/54568400000)   # ~ sqrt(2) + 1 but actually 2 due to Python division
v2 = QQ(104455571357/27284200000)   # ~ 2 sqrt(2) but actually 3 due to Python division
```
Instead, we should use the `base_ring` argument (with appropriate defaults) and use `base_ring(2).sqrt()` instead.

3. The functions unrelated to construction of Polytopes are moved out of the class `Polytopes`:
   - `Polytopes.orthonormal_1`, `Polytopes.project_1` will be renamed respectively `zero_sum_projection` and `project_points`
   - the one line `Polytopes._pfunc` is just removed

While we're at it, remove the deprecations from #11634.

During the process I discovered two annoying bugs:
- #18214 Bug in volume computation of polyhedron
- #18220 Bug when creating a polyhedron with coefficients in RR
Moreover, we can get a great speed up with the following because many polytopes have now coordinates in a quadratic number fields:
- #18215: Huge speed up for hash of quadratic number field elements
- #18226: Native `_mpfr_` method on quadratic number field elements

Depends on #18211

CC:  @nathanncohen

Branch/Commit: **[a58da00](https://github.com/sagemath/sagetrac-mirror/commit/a58da00e4907251c2ab47d7af1109da31901ee36)**

Reviewer: **Nathann Cohen**

Author: **Vincent Delecroix**

Component: **geometry**

_Issue created by migration from https://trac.sagemath.org/ticket/18213_





---

archive/issue_events_258939.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-15T21:42:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "milestone_number": null,
    "milestone_title": "sage-6.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18213#event-258939"
}
```



---

archive/issue_events_258940.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-15T21:42:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20geometry",
    "label_color": "0000ff",
    "label_name": "c: geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18213#event-258940"
}
```



---

archive/issue_events_258941.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-15T21:42:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18213#event-258941"
}
```



---

archive/issue_events_258942.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-15T21:42:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18213#event-258942"
}
```



---

archive/issue_comments_249323.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,10 +7,12 @@\n ...\n ```\n \n-2. The `great_rhombicuboctahedron` is defined over `QQ` but it should be defined over `QQ[sqrt(2)]`!! There are in two places rough approximation of sqrt(2) in the code\n+2. The `great_rhombicuboctahedron` is defined over `QQ` but it should be defined over `QQ[sqrt(2)]`! There are in two places rough approximation of sqrt(2) in the code\n \n ```\n-v1 = QQ(131739771357/54568400000)   # ~ sqrt(2) + 1\n-v2 = QQ(104455571357/27284200000)   # ~ 2 sqrt(2)\n+v1 = QQ(131739771357/54568400000)   # ~ sqrt(2) + 1 but actually 2 due to Python division\n+v2 = QQ(104455571357/27284200000)   # ~ 2 sqrt(2) but actually 3 due to Python division\n ```\n-  Now that Sage supports Polyhedron over number fields, we should use them!\n+Instead, we should use the `base_ring` argument (with appropriate defaults) and use `base_ring(2).sqrt()` instead.\n+\n+3. While we're at it, remove the deprecations from #11634.\n``````\n",
    "created_at": "2015-04-16T06:14:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249323",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,10 +7,12 @@
 ...
 ```
 
-2. The `great_rhombicuboctahedron` is defined over `QQ` but it should be defined over `QQ[sqrt(2)]`!! There are in two places rough approximation of sqrt(2) in the code
+2. The `great_rhombicuboctahedron` is defined over `QQ` but it should be defined over `QQ[sqrt(2)]`! There are in two places rough approximation of sqrt(2) in the code
 
 ```
-v1 = QQ(131739771357/54568400000)   # ~ sqrt(2) + 1
-v2 = QQ(104455571357/27284200000)   # ~ 2 sqrt(2)
+v1 = QQ(131739771357/54568400000)   # ~ sqrt(2) + 1 but actually 2 due to Python division
+v2 = QQ(104455571357/27284200000)   # ~ 2 sqrt(2) but actually 3 due to Python division
 ```
-  Now that Sage supports Polyhedron over number fields, we should use them!
+Instead, we should use the `base_ring` argument (with appropriate defaults) and use `base_ring(2).sqrt()` instead.
+
+3. While we're at it, remove the deprecations from #11634.
``````




---

archive/issue_comments_249324.json:
```json
{
    "body": "Author: **Vincent Delecroix**",
    "created_at": "2015-04-16T09:13:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249324",
    "user": "https://github.com/videlec"
}
```

Author: **Vincent Delecroix**



---

archive/issue_comments_249325.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI have a big commit to push in few minutes...",
    "created_at": "2015-04-16T09:13:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249325",
    "user": "https://github.com/videlec"
}
```

<div id="comment:3" align="right">comment:3</div>

I have a big commit to push in few minutes...



---

archive/issue_comments_249326.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5110cc954a88ce5477b7f35b60551aae69d9a788\">5110cc9</a></td><td><code>Trac 18211: use LattE to compute the Ehrhart polynomial</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cf2a10f56ecacf682d57bb355ddfd9980eaee001\">cf2a10f</a></td><td><code>Trac 18211: another example using Birkhoff_polytope</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ca8da5a732ca6247cc4ffd375f94f859b6cdf0b1\">ca8da5a</a></td><td><code>Trac 18211: fixed spelling LattE integral*e*</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d52053c18a593a621af90b43608851304bc32052\">d52053c</a></td><td><code>Trac 18211: check error + options</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0f5122bddee5f104a3e2ff65715129eb275452e7\">0f5122b</a></td><td><code>Trac 18211: fix command line arguments</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b877932445212ddfd72fd70079c53f17df6d5fd9\">b877932</a></td><td><code>Trac 18211: fix arguments + doctests + cwd=SAGE_TMP</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b30bc8aa4c9da24fef6e5c7fdceafe59e6701e0\">3b30bc8</a></td><td><code>Trac 18213: rewrite the polyhedron library</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e598e289689ad8c294500303c89d5c1a0de2a060\">e598e28</a></td><td><code>Trac 18123: fix doctests</code></td></tr></table>\n",
    "created_at": "2015-04-16T14:33:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249326",
    "user": "https://github.com/videlec"
}
```

<div id="comment:4"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5110cc954a88ce5477b7f35b60551aae69d9a788">5110cc9</a></td><td><code>Trac 18211: use LattE to compute the Ehrhart polynomial</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cf2a10f56ecacf682d57bb355ddfd9980eaee001">cf2a10f</a></td><td><code>Trac 18211: another example using Birkhoff_polytope</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ca8da5a732ca6247cc4ffd375f94f859b6cdf0b1">ca8da5a</a></td><td><code>Trac 18211: fixed spelling LattE integral*e*</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d52053c18a593a621af90b43608851304bc32052">d52053c</a></td><td><code>Trac 18211: check error + options</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0f5122bddee5f104a3e2ff65715129eb275452e7">0f5122b</a></td><td><code>Trac 18211: fix command line arguments</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b877932445212ddfd72fd70079c53f17df6d5fd9">b877932</a></td><td><code>Trac 18211: fix arguments + doctests + cwd=SAGE_TMP</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b30bc8aa4c9da24fef6e5c7fdceafe59e6701e0">3b30bc8</a></td><td><code>Trac 18213: rewrite the polyhedron library</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e598e289689ad8c294500303c89d5c1a0de2a060">e598e28</a></td><td><code>Trac 18123: fix doctests</code></td></tr></table>




---

archive/issue_comments_249327.json:
```json
{
    "body": "Branch: **[u/vdelecroix/18123](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/18123)**",
    "created_at": "2015-04-16T14:33:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249327",
    "user": "https://github.com/videlec"
}
```

Branch: **[u/vdelecroix/18123](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/18123)**



---

archive/issue_events_258943.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-16T14:33:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18213#event-258943"
}
```



---

archive/issue_comments_249328.json:
```json
{
    "body": "Commit: **[e598e28](https://github.com/sagemath/sagetrac-mirror/commit/e598e289689ad8c294500303c89d5c1a0de2a060)**",
    "created_at": "2015-04-16T14:33:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249328",
    "user": "https://github.com/videlec"
}
```

Commit: **[e598e28](https://github.com/sagemath/sagetrac-mirror/commit/e598e289689ad8c294500303c89d5c1a0de2a060)**



---

archive/issue_comments_249329.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-A lot of polytopes constructors in `sage.geometry.polyhedron.library`.\n+A lot of polytopes constructors in `sage.geometry.polyhedron.library`. For example\n \n 1. The Rhombicuboctahedron does not return what it should (as Python division was thought as Sage integer divisions). There is in the code\n \n@@ -15,4 +15,4 @@\n ```\n Instead, we should use the `base_ring` argument (with appropriate defaults) and use `base_ring(2).sqrt()` instead.\n \n-3. While we're at it, remove the deprecations from #11634.\n+While we're at it, remove the deprecations from #11634.\n``````\n",
    "created_at": "2015-04-16T14:33:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249329",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-A lot of polytopes constructors in `sage.geometry.polyhedron.library`.
+A lot of polytopes constructors in `sage.geometry.polyhedron.library`. For example
 
 1. The Rhombicuboctahedron does not return what it should (as Python division was thought as Sage integer divisions). There is in the code
 
@@ -15,4 +15,4 @@
 ```
 Instead, we should use the `base_ring` argument (with appropriate defaults) and use `base_ring(2).sqrt()` instead.
 
-3. While we're at it, remove the deprecations from #11634.
+While we're at it, remove the deprecations from #11634.
``````




---

archive/issue_comments_249330.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nDepends on #18211?",
    "created_at": "2015-04-16T14:34:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249330",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:5" align="right">comment:5</div>

Depends on #18211?



---

archive/issue_comments_249331.json:
```json
{
    "body": "Dependencies: **#18211**",
    "created_at": "2015-04-16T14:35:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249331",
    "user": "https://github.com/videlec"
}
```

Dependencies: **#18211**



---

archive/issue_comments_249332.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@nathanncohen](#comment:5):\n> Depends on #18211?\n\nYes\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c44b53efbe0fa899951481b96c4ab0a15ebb88e3\">c44b53e</a></td><td><code>Trac 18213: fix doctests</code></td></tr></table>\n",
    "created_at": "2015-04-16T14:35:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249332",
    "user": "https://github.com/videlec"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@nathanncohen](#comment:5):
> Depends on #18211?

Yes

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c44b53efbe0fa899951481b96c4ab0a15ebb88e3">c44b53e</a></td><td><code>Trac 18213: fix doctests</code></td></tr></table>




---

archive/issue_comments_249333.json:
```json
{
    "body": "Changed commit from **[e598e28](https://github.com/sagemath/sagetrac-mirror/commit/e598e289689ad8c294500303c89d5c1a0de2a060)** to **[c44b53e](https://github.com/sagemath/sagetrac-mirror/commit/c44b53efbe0fa899951481b96c4ab0a15ebb88e3)**",
    "created_at": "2015-04-16T14:35:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249333",
    "user": "https://github.com/videlec"
}
```

Changed commit from **[e598e28](https://github.com/sagemath/sagetrac-mirror/commit/e598e289689ad8c294500303c89d5c1a0de2a060)** to **[c44b53e](https://github.com/sagemath/sagetrac-mirror/commit/c44b53efbe0fa899951481b96c4ab0a15ebb88e3)**



---

archive/issue_comments_249334.json:
```json
{
    "body": "Changed branch from **[u/vdelecroix/18123](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/18123)** to **[u/vdelecroix/18213](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/18213)**",
    "created_at": "2015-04-16T14:35:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249334",
    "user": "https://github.com/videlec"
}
```

Changed branch from **[u/vdelecroix/18123](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/18123)** to **[u/vdelecroix/18213](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/18213)**



---

archive/issue_comments_249335.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -16,3 +16,9 @@\n Instead, we should use the `base_ring` argument (with appropriate defaults) and use `base_ring(2).sqrt()` instead.\n \n While we're at it, remove the deprecations from #11634.\n+\n+During the process I discovered two annoying bugs:\n+- #18214 Bug in volume computation of polyhedron\n+- #18220 Bug when creating a polyhedron with coefficients in RR\n+Moreover, we can get a great speed up with the following because many polytopes have now coordinates in a quadratic number fields:\n+- #18215: Huge speed up for hash of quadratic number field elements\n``````\n",
    "created_at": "2015-04-16T14:43:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249335",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -16,3 +16,9 @@
 Instead, we should use the `base_ring` argument (with appropriate defaults) and use `base_ring(2).sqrt()` instead.
 
 While we're at it, remove the deprecations from #11634.
+
+During the process I discovered two annoying bugs:
+- #18214 Bug in volume computation of polyhedron
+- #18220 Bug when creating a polyhedron with coefficients in RR
+Moreover, we can get a great speed up with the following because many polytopes have now coordinates in a quadratic number fields:
+- #18215: Huge speed up for hash of quadratic number field elements
``````




---

archive/issue_comments_249336.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6e7cf214ea1ee23be11060e0327d20e2ff1a35c8\">6e7cf21</a></td><td><code>trac #18211: Seealsos</code></td></tr></table>\n",
    "created_at": "2015-04-16T15:36:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249336",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6e7cf214ea1ee23be11060e0327d20e2ff1a35c8">6e7cf21</a></td><td><code>trac #18211: Seealsos</code></td></tr></table>




---

archive/issue_comments_249337.json:
```json
{
    "body": "Changed commit from **[c44b53e](https://github.com/sagemath/sagetrac-mirror/commit/c44b53efbe0fa899951481b96c4ab0a15ebb88e3)** to **[6e7cf21](https://github.com/sagemath/sagetrac-mirror/commit/6e7cf214ea1ee23be11060e0327d20e2ff1a35c8)**",
    "created_at": "2015-04-16T15:36:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249337",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c44b53e](https://github.com/sagemath/sagetrac-mirror/commit/c44b53efbe0fa899951481b96c4ab0a15ebb88e3)** to **[6e7cf21](https://github.com/sagemath/sagetrac-mirror/commit/6e7cf214ea1ee23be11060e0327d20e2ff1a35c8)**



---

archive/issue_comments_249338.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/227e14abd109992e1e88a322982f4027d4e4e52a\">227e14a</a></td><td><code>Trac 18213: Seealsos</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eef42afa3e3229534f2ae2d3303fbb176eaecdd8\">eef42af</a></td><td><code>Trac 18213: documentation</code></td></tr></table>\n",
    "created_at": "2015-04-16T17:15:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249338",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/227e14abd109992e1e88a322982f4027d4e4e52a">227e14a</a></td><td><code>Trac 18213: Seealsos</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eef42afa3e3229534f2ae2d3303fbb176eaecdd8">eef42af</a></td><td><code>Trac 18213: documentation</code></td></tr></table>




---

archive/issue_comments_249339.json:
```json
{
    "body": "Changed commit from **[6e7cf21](https://github.com/sagemath/sagetrac-mirror/commit/6e7cf214ea1ee23be11060e0327d20e2ff1a35c8)** to **[eef42af](https://github.com/sagemath/sagetrac-mirror/commit/eef42afa3e3229534f2ae2d3303fbb176eaecdd8)**",
    "created_at": "2015-04-16T17:15:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249339",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6e7cf21](https://github.com/sagemath/sagetrac-mirror/commit/6e7cf214ea1ee23be11060e0327d20e2ff1a35c8)** to **[eef42af](https://github.com/sagemath/sagetrac-mirror/commit/eef42afa3e3229534f2ae2d3303fbb176eaecdd8)**



---

archive/issue_comments_249340.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -22,3 +22,4 @@\n - #18220 Bug when creating a polyhedron with coefficients in RR\n Moreover, we can get a great speed up with the following because many polytopes have now coordinates in a quadratic number fields:\n - #18215: Huge speed up for hash of quadratic number field elements\n+- #18226: Native `_mpfr_` method on quadratic number field elements\n``````\n",
    "created_at": "2015-04-16T17:34:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249340",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -22,3 +22,4 @@
 - #18220 Bug when creating a polyhedron with coefficients in RR
 Moreover, we can get a great speed up with the following because many polytopes have now coordinates in a quadratic number fields:
 - #18215: Huge speed up for hash of quadratic number field elements
+- #18226: Native `_mpfr_` method on quadratic number field elements
``````




---

archive/issue_comments_249341.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nThe `golden_ratio()` can obviously be defined in terms of `sqrt(5)`, so I don't see the need for that. I'm also really wondering whether you need the custom `sqrt()` function, doesn't `QuadraticField(n)` work?",
    "created_at": "2015-04-16T20:56:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249341",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:11" align="right">comment:11</div>

The `golden_ratio()` can obviously be defined in terms of `sqrt(5)`, so I don't see the need for that. I'm also really wondering whether you need the custom `sqrt()` function, doesn't `QuadraticField(n)` work?



---

archive/issue_events_258944.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-16T22:13:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18213#event-258944"
}
```



---

archive/issue_events_258945.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-16T22:13:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18213#event-258945"
}
```



---

archive/issue_comments_249342.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@jdemeyer](#comment:11):\n> The `golden_ratio()` can obviously be defined in terms of `sqrt(5)`, so I don't see the need for that. I'm also really wondering whether you need the custom `sqrt()` function, doesn't `QuadraticField(n)` work?\n\nRight. The problem of embedding should be done elsewhere (my version embedds in `QQbar` whereas the generic `QuadraticField(n)` embedds into `RLF`).",
    "created_at": "2015-04-16T22:13:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249342",
    "user": "https://github.com/videlec"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@jdemeyer](#comment:11):
> The `golden_ratio()` can obviously be defined in terms of `sqrt(5)`, so I don't see the need for that. I'm also really wondering whether you need the custom `sqrt()` function, doesn't `QuadraticField(n)` work?

Right. The problem of embedding should be done elsewhere (my version embedds in `QQbar` whereas the generic `QuadraticField(n)` embedds into `RLF`).



---

archive/issue_comments_249343.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@videlec](#comment:12):\n> Replying to [@jdemeyer](#comment:11):\n> > The `golden_ratio()` can obviously be defined in terms of `sqrt(5)`, so I don't see the need for that. I'm also really wondering whether you need the custom `sqrt()` function, doesn't `QuadraticField(n)` work?\n\n> \n> Right. The problem of embedding should be done elsewhere (my version embedds in `QQbar` whereas the generic `QuadraticField(n)` embedds into `RLF`).\n\nHere is one reason. The generator name of `QuadraticField(2)` is `a` and it better be `sqrt2` in this case. For the golden ratio, the advantage is that its get printed as `phi`. In particular you have\n\n```\nsage: polytopes.icosahedron().volume()\n5/6*phi + 5/6\n```\nThe answer `5/6*a + 5/6` would have been terrible here. I have nothing against using `phi = (sqrt5+1)/2`. So I will at least remove this one. For the quadratic fields, one option is to globally make this change in another ticket. What do you think?",
    "created_at": "2015-04-16T22:40:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249343",
    "user": "https://github.com/videlec"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@videlec](#comment:12):
> Replying to [@jdemeyer](#comment:11):
> > The `golden_ratio()` can obviously be defined in terms of `sqrt(5)`, so I don't see the need for that. I'm also really wondering whether you need the custom `sqrt()` function, doesn't `QuadraticField(n)` work?

> 
> Right. The problem of embedding should be done elsewhere (my version embedds in `QQbar` whereas the generic `QuadraticField(n)` embedds into `RLF`).

Here is one reason. The generator name of `QuadraticField(2)` is `a` and it better be `sqrt2` in this case. For the golden ratio, the advantage is that its get printed as `phi`. In particular you have

```
sage: polytopes.icosahedron().volume()
5/6*phi + 5/6
```
The answer `5/6*a + 5/6` would have been terrible here. I have nothing against using `phi = (sqrt5+1)/2`. So I will at least remove this one. For the quadratic fields, one option is to globally make this change in another ticket. What do you think?



---

archive/issue_comments_249344.json:
```json
{
    "body": "Changed commit from **[eef42af](https://github.com/sagemath/sagetrac-mirror/commit/eef42afa3e3229534f2ae2d3303fbb176eaecdd8)** to **[c1804d5](https://github.com/sagemath/sagetrac-mirror/commit/c1804d5879eedab9140d07096bfd1ad29ae75fa0)**",
    "created_at": "2015-04-17T07:14:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249344",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[eef42af](https://github.com/sagemath/sagetrac-mirror/commit/eef42afa3e3229534f2ae2d3303fbb176eaecdd8)** to **[c1804d5](https://github.com/sagemath/sagetrac-mirror/commit/c1804d5879eedab9140d07096bfd1ad29ae75fa0)**



---

archive/issue_comments_249345.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c1804d5879eedab9140d07096bfd1ad29ae75fa0\">c1804d5</a></td><td><code>Trac 18213: (review) remove sqrt/golden_ratio + doc</code></td></tr></table>\n",
    "created_at": "2015-04-17T07:14:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249345",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c1804d5879eedab9140d07096bfd1ad29ae75fa0">c1804d5</a></td><td><code>Trac 18213: (review) remove sqrt/golden_ratio + doc</code></td></tr></table>




---

archive/issue_events_258946.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-17T07:15:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18213#event-258946"
}
```



---

archive/issue_events_258947.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-17T07:15:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18213#event-258947"
}
```



---

archive/issue_comments_249346.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nAll right. I removed the `sqrt` and `golden_ratio` function. Needs review!\n\nVincent",
    "created_at": "2015-04-17T07:15:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249346",
    "user": "https://github.com/videlec"
}
```

<div id="comment:15" align="right">comment:15</div>

All right. I removed the `sqrt` and `golden_ratio` function. Needs review!

Vincent



---

archive/issue_comments_249347.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nVincent: the diff of your main commit is very, very very hard to read. Could you split in order to make it easier to understand?",
    "created_at": "2015-04-17T07:20:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249347",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:16" align="right">comment:16</div>

Vincent: the diff of your main commit is very, very very hard to read. Could you split in order to make it easier to understand?



---

archive/issue_comments_249348.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@nathanncohen](#comment:16):\n> Vincent: the diff of your main commit is very, very very hard to read. Could you split in order to make it easier to understand?\n\nNot sure. It is basically a complete rewrite. I added a ton of documentation, and modify many functions to fit with the actual definition!",
    "created_at": "2015-04-17T07:24:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249348",
    "user": "https://github.com/videlec"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@nathanncohen](#comment:16):
> Vincent: the diff of your main commit is very, very very hard to read. Could you split in order to make it easier to understand?

Not sure. It is basically a complete rewrite. I added a ton of documentation, and modify many functions to fit with the actual definition!



---

archive/issue_comments_249349.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nOkay. Then could you at least change the description of this ticket to explain all changes that you made? (you apparently reated new functions, for example.. Why?)",
    "created_at": "2015-04-17T07:27:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249349",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:18" align="right">comment:18</div>

Okay. Then could you at least change the description of this ticket to explain all changes that you made? (you apparently reated new functions, for example.. Why?)



---

archive/issue_comments_249350.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -15,6 +15,10 @@\n ```\n Instead, we should use the `base_ring` argument (with appropriate defaults) and use `base_ring(2).sqrt()` instead.\n \n+3. The functions unrelated to construction of Polytopes are moved out of the class `Polytopes`:\n+   - `Polytopes.orthonormal_1`, `Polytopes.project_1` will be renamed respectively `zero_sum_projection` and `project_points`\n+   - the one line `Polytopes._pfunc` is just removed\n+\n While we're at it, remove the deprecations from #11634.\n \n During the process I discovered two annoying bugs:\n``````\n",
    "created_at": "2015-04-17T07:34:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249350",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -15,6 +15,10 @@
 ```
 Instead, we should use the `base_ring` argument (with appropriate defaults) and use `base_ring(2).sqrt()` instead.
 
+3. The functions unrelated to construction of Polytopes are moved out of the class `Polytopes`:
+   - `Polytopes.orthonormal_1`, `Polytopes.project_1` will be renamed respectively `zero_sum_projection` and `project_points`
+   - the one line `Polytopes._pfunc` is just removed
+
 While we're at it, remove the deprecations from #11634.
 
 During the process I discovered two annoying bugs:
``````




---

archive/issue_comments_249351.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@nathanncohen](#comment:18):\n> Okay. Then could you at least change the description of this ticket to explain all changes that you made? (you apparently reated new functions, for example.. Why?)\n\ndone in the ticket description.",
    "created_at": "2015-04-17T07:34:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249351",
    "user": "https://github.com/videlec"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@nathanncohen](#comment:18):
> Okay. Then could you at least change the description of this ticket to explain all changes that you made? (you apparently reated new functions, for example.. Why?)

done in the ticket description.



---

archive/issue_comments_249352.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nAbout `golden_ratio` and `sqrt`: shouldn't they be in `number_field_element_quadratic` instead ?\n\nAbout `zero_sum_projection` what about having it in `matrix.<tab>` ?\n\nNathann",
    "created_at": "2015-04-17T08:09:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249352",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:20" align="right">comment:20</div>

About `golden_ratio` and `sqrt`: shouldn't they be in `number_field_element_quadratic` instead ?

About `zero_sum_projection` what about having it in `matrix.<tab>` ?

Nathann



---

archive/issue_comments_249353.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@nathanncohen](#comment:20):\n> About `golden_ratio` and `sqrt`: shouldn't they be in `number_field_element_quadratic` instead ?\n\nRemoved in \u200bc1804d5.\n\n> About `zero_sum_projection` what about having it in `matrix.<tab>` ?\n\nIt is very specific. I am not sure how I would call it in `matrix.<tab>`.",
    "created_at": "2015-04-17T11:39:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249353",
    "user": "https://github.com/videlec"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@nathanncohen](#comment:20):
> About `golden_ratio` and `sqrt`: shouldn't they be in `number_field_element_quadratic` instead ?

Removed in â€‹c1804d5.

> About `zero_sum_projection` what about having it in `matrix.<tab>` ?

It is very specific. I am not sure how I would call it in `matrix.<tab>`.



---

archive/issue_comments_249354.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a9ce4616099f6d0a5fc3d8a80c3ae76dca5874c7\">a9ce461</a></td><td><code>trac #18211: print stderr when verbose=False</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/930791639042e46c339ba40720456d73dcad1d1b\">9307916</a></td><td><code>Trac 18211: \"in in\" -> \"in\"</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a6d03cd0f21b5c7438ec6b03e82fb6ba7536c414\">a6d03cd</a></td><td><code>Trac 18211: any option to the command  (using **kwds)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c935177688734f81eec5dd96a1d85c76e7239df6\">c935177</a></td><td><code>Trac 18211: handle bad output from count</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7215956eea81f8750a96184ca1f16173ef27c334\">7215956</a></td><td><code>Trac 18211: write explicitely the options in function declaration</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/74ef0f1721a9f73dacf442d29c45acc7a18a1ff6\">74ef0f1</a></td><td><code>trac #18211: Nothing important</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ec0e94607b2ca76f6182c02e098b5ce206d54f71\">ec0e946</a></td><td><code>Trac 18213: merge sage-6.7.beta1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0b87ff0df3007581999081a3aafbbc4fd2cca47c\">0b87ff0</a></td><td><code>Trac 18213: rewrite the polyhedron library</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2ddcdefe27f54a99c4fa154fd075229019801e90\">2ddcdef</a></td><td><code>Trac 18213: fix doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/524f00ea3d1d3734a9915cd6052d0bf677fdb6e3\">524f00e</a></td><td><code>Trac 18213: Seealsos</code></td></tr></table>\n",
    "created_at": "2015-04-17T11:57:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249354",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a9ce4616099f6d0a5fc3d8a80c3ae76dca5874c7">a9ce461</a></td><td><code>trac #18211: print stderr when verbose=False</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/930791639042e46c339ba40720456d73dcad1d1b">9307916</a></td><td><code>Trac 18211: "in in" -> "in"</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a6d03cd0f21b5c7438ec6b03e82fb6ba7536c414">a6d03cd</a></td><td><code>Trac 18211: any option to the command  (using **kwds)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c935177688734f81eec5dd96a1d85c76e7239df6">c935177</a></td><td><code>Trac 18211: handle bad output from count</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7215956eea81f8750a96184ca1f16173ef27c334">7215956</a></td><td><code>Trac 18211: write explicitely the options in function declaration</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/74ef0f1721a9f73dacf442d29c45acc7a18a1ff6">74ef0f1</a></td><td><code>trac #18211: Nothing important</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ec0e94607b2ca76f6182c02e098b5ce206d54f71">ec0e946</a></td><td><code>Trac 18213: merge sage-6.7.beta1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0b87ff0df3007581999081a3aafbbc4fd2cca47c">0b87ff0</a></td><td><code>Trac 18213: rewrite the polyhedron library</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2ddcdefe27f54a99c4fa154fd075229019801e90">2ddcdef</a></td><td><code>Trac 18213: fix doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/524f00ea3d1d3734a9915cd6052d0bf677fdb6e3">524f00e</a></td><td><code>Trac 18213: Seealsos</code></td></tr></table>




---

archive/issue_comments_249355.json:
```json
{
    "body": "Changed commit from **[c1804d5](https://github.com/sagemath/sagetrac-mirror/commit/c1804d5879eedab9140d07096bfd1ad29ae75fa0)** to **[524f00e](https://github.com/sagemath/sagetrac-mirror/commit/524f00ea3d1d3734a9915cd6052d0bf677fdb6e3)**",
    "created_at": "2015-04-17T11:57:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249355",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c1804d5](https://github.com/sagemath/sagetrac-mirror/commit/c1804d5879eedab9140d07096bfd1ad29ae75fa0)** to **[524f00e](https://github.com/sagemath/sagetrac-mirror/commit/524f00ea3d1d3734a9915cd6052d0bf677fdb6e3)**



---

archive/issue_comments_249356.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\n`O_o`",
    "created_at": "2015-04-17T11:58:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249356",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:23" align="right">comment:23</div>

`O_o`



---

archive/issue_comments_249357.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nCleaner version based on sage-6.7.beta1 and the complete #18211.",
    "created_at": "2015-04-17T11:59:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249357",
    "user": "https://github.com/videlec"
}
```

<div id="comment:24" align="right">comment:24</div>

Cleaner version based on sage-6.7.beta1 and the complete #18211.



---

archive/issue_comments_249358.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nHere are some comments. Please understand that doing everything at once makes things *MUCH* harder to understand for the reviewer.\n\nImproving the implementation and improving the doc could have been two separate commits. The work that you do on each function could have been a separate commit. Removing deprecations could have been a separate commit. There are also things that anybody can review (only code) and things for which you need to be used to the tools you deal with.\n\n- The projection is not the orthogona projection I expected:\n\n  ```\n  sage: sage: zero_sum_projection(3)*vector([1,0,0])\n  (0.7071067811865475, 0.4082482904638631)\n  ```\n  You can either change the matrix or emphasize in the docstring that the\n  projection is not unique. Something like \"returns a (d-1)xd matrix of rank d\n  whose kernel contain (1,...,1). At first sight, I expected the function to\n  return a matrix of dimensions `d\\times d`. I updated the docstring on this\n  matter.\n\n- I do not understand the paragraph in the doc of `project_points` but that's\n  probably because I don't know the maths behind.\n\n- Compatible?\n\n  ```\n  This projection is the only one compatible with the restriction to the\n  first coordinates\n  ```\n\n- You should probably add a `# tol`\n  after this\n\n  ```\n  Its volume is `\\sqrt{d+1} / d!`\n  ```\n  Or even better, check that the difference between the two is 0\n  (still, with some tolerance)\n\n- At this point I still do not know if it is very wise to use this definition of\n  the projection, but it would be cool if every function which uses this\n  projection (like !Simplex) could redirect toward the matrix function. This way\n  people would have a chance to learn what exactly they get as a result.\n\n- What about this error?\n\n  ```\n  sage: polytopes.icosahedron(base_ring=QQ)\n  ...\n  TypeError: unable to convert 1/4*sqrt(5) + 1/4 to a rational\n  ```\n\nI added a small commit at public/18213\n\nNathann",
    "created_at": "2015-04-17T14:24:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249358",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:25" align="right">comment:25</div>

Here are some comments. Please understand that doing everything at once makes things *MUCH* harder to understand for the reviewer.

Improving the implementation and improving the doc could have been two separate commits. The work that you do on each function could have been a separate commit. Removing deprecations could have been a separate commit. There are also things that anybody can review (only code) and things for which you need to be used to the tools you deal with.

- The projection is not the orthogona projection I expected:

  ```
  sage: sage: zero_sum_projection(3)*vector([1,0,0])
  (0.7071067811865475, 0.4082482904638631)
  ```
  You can either change the matrix or emphasize in the docstring that the
  projection is not unique. Something like "returns a (d-1)xd matrix of rank d
  whose kernel contain (1,...,1). At first sight, I expected the function to
  return a matrix of dimensions `d\times d`. I updated the docstring on this
  matter.

- I do not understand the paragraph in the doc of `project_points` but that's
  probably because I don't know the maths behind.

- Compatible?

  ```
  This projection is the only one compatible with the restriction to the
  first coordinates
  ```

- You should probably add a `# tol`
  after this

  ```
  Its volume is `\sqrt{d+1} / d!`
  ```
  Or even better, check that the difference between the two is 0
  (still, with some tolerance)

- At this point I still do not know if it is very wise to use this definition of
  the projection, but it would be cool if every function which uses this
  projection (like !Simplex) could redirect toward the matrix function. This way
  people would have a chance to learn what exactly they get as a result.

- What about this error?

  ```
  sage: polytopes.icosahedron(base_ring=QQ)
  ...
  TypeError: unable to convert 1/4*sqrt(5) + 1/4 to a rational
  ```

I added a small commit at public/18213

Nathann



---

archive/issue_comments_249359.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@nathanncohen](#comment:25):\n> Here are some comments. Please understand that doing everything at once makes things *MUCH* harder to understand for the reviewer.\n\nI am very sorry.\n \n> - The projection is not the orthogona projection I expected:\n\nWhich one did you expected? I improved the documentation.\n\n> - At this point I still do not know if it is very wise to use this definition of\n>   the projection, but it would be cool if every function which uses this\n>   projection (like !Simplex) could redirect toward the matrix function. This way\n>   people would have a chance to learn what exactly they get as a result.\n\nI see. But I am really not confortable in moving this to `matrix.<tab>` as well. One possibility is to move it back to `polytopes.<tab>`. What do you think?\n\n> - What about this error?\n> \n>   ```\n>   sage: polytopes.icosahedron(base_ring=QQ)\n>   ...\n>   TypeError: unable to convert 1/4*sqrt(5) + 1/4 to a rational\n>   ```\n\nIs it not clear enough? The coordinates of the icosahedron need to be defined in `QQ[sqrt(5)]`, hence the error. The following is ok (but very slow, ~3secs on my computer)\n\n```\nsage: I = polytopes.icosahedron(base_ring=AA)\n```\nApart adding your example to the documentation, I do not see much what I can do (see the last commit). A deprecation?\n\nVincent",
    "created_at": "2015-04-17T15:02:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249359",
    "user": "https://github.com/videlec"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@nathanncohen](#comment:25):
> Here are some comments. Please understand that doing everything at once makes things *MUCH* harder to understand for the reviewer.

I am very sorry.
 
> - The projection is not the orthogona projection I expected:

Which one did you expected? I improved the documentation.

> - At this point I still do not know if it is very wise to use this definition of
>   the projection, but it would be cool if every function which uses this
>   projection (like !Simplex) could redirect toward the matrix function. This way
>   people would have a chance to learn what exactly they get as a result.

I see. But I am really not confortable in moving this to `matrix.<tab>` as well. One possibility is to move it back to `polytopes.<tab>`. What do you think?

> - What about this error?
> 
>   ```
>   sage: polytopes.icosahedron(base_ring=QQ)
>   ...
>   TypeError: unable to convert 1/4*sqrt(5) + 1/4 to a rational
>   ```

Is it not clear enough? The coordinates of the icosahedron need to be defined in `QQ[sqrt(5)]`, hence the error. The following is ok (but very slow, ~3secs on my computer)

```
sage: I = polytopes.icosahedron(base_ring=AA)
```
Apart adding your example to the documentation, I do not see much what I can do (see the last commit). A deprecation?

Vincent



---

archive/issue_comments_249360.json:
```json
{
    "body": "Changed commit from **[524f00e](https://github.com/sagemath/sagetrac-mirror/commit/524f00ea3d1d3734a9915cd6052d0bf677fdb6e3)** to **[fac3cff](https://github.com/sagemath/sagetrac-mirror/commit/fac3cffdb326dad1d3c61045d1c33044c99b8b32)**",
    "created_at": "2015-04-17T15:02:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249360",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[524f00e](https://github.com/sagemath/sagetrac-mirror/commit/524f00ea3d1d3734a9915cd6052d0bf677fdb6e3)** to **[fac3cff](https://github.com/sagemath/sagetrac-mirror/commit/fac3cffdb326dad1d3c61045d1c33044c99b8b32)**



---

archive/issue_comments_249361.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7eb2326e86c954906d601e75a6909a241fea26b6\">7eb2326</a></td><td><code>trac #18213: Review</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fac3cffdb326dad1d3c61045d1c33044c99b8b32\">fac3cff</a></td><td><code>Trac 18213: (review) more documentation</code></td></tr></table>\n",
    "created_at": "2015-04-17T15:02:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249361",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7eb2326e86c954906d601e75a6909a241fea26b6">7eb2326</a></td><td><code>trac #18213: Review</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fac3cffdb326dad1d3c61045d1c33044c99b8b32">fac3cff</a></td><td><code>Trac 18213: (review) more documentation</code></td></tr></table>




---

archive/issue_comments_249362.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nHello,\n\n> Which one did you expected? I improved the documentation.\n\nWell, I expected an orthogonal projection on this hyperplane. And I probably expected the base of the hyperplane to be the projection of d-1 vectors of the base from the original space I guess.\n\n> > - At this point I still do not know if it is very wise to use this definition of\n> >   the projection, but it would be cool if every function which uses this\n> >   projection (like !Simplex) could redirect toward the matrix function. This way\n> >   people would have a chance to learn what exactly they get as a result.\n\n> \n> I see. But I am really not confortable in moving this to `matrix.<tab>` as well. One possibility is to move it back to `polytopes.<tab>`. What do you think?\n\nAll I was suggesting in the message above was to add a link in the doc. The message you added in `project_points` is perfect\n\n```\nThe projection used is the matrix given by :func:`zero_sum_projection`.\n```\n\nTo me it should appear whenever there is a 'project' argument in the function.\n\n> Is it not clear enough? The coordinates of the icosahedron need to be defined in `QQ[sqrt(5)]`, hence the error.\n\nPrecisely: Could you add somewhere in the doc that the field must contain `QQ(sqrt(5))`?\n\nNathann",
    "created_at": "2015-04-17T21:08:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249362",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:28" align="right">comment:28</div>

Hello,

> Which one did you expected? I improved the documentation.

Well, I expected an orthogonal projection on this hyperplane. And I probably expected the base of the hyperplane to be the projection of d-1 vectors of the base from the original space I guess.

> > - At this point I still do not know if it is very wise to use this definition of
> >   the projection, but it would be cool if every function which uses this
> >   projection (like !Simplex) could redirect toward the matrix function. This way
> >   people would have a chance to learn what exactly they get as a result.

> 
> I see. But I am really not confortable in moving this to `matrix.<tab>` as well. One possibility is to move it back to `polytopes.<tab>`. What do you think?

All I was suggesting in the message above was to add a link in the doc. The message you added in `project_points` is perfect

```
The projection used is the matrix given by :func:`zero_sum_projection`.
```

To me it should appear whenever there is a 'project' argument in the function.

> Is it not clear enough? The coordinates of the icosahedron need to be defined in `QQ[sqrt(5)]`, hence the error.

Precisely: Could you add somewhere in the doc that the field must contain `QQ(sqrt(5))`?

Nathann



---

archive/issue_comments_249363.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nthe function dodecahedron does nothing with its `base_ring` argument. Also, why should the projection function return 'None' instead of '[]' when it is called with no argument?\n\nNathann",
    "created_at": "2015-04-17T21:20:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249363",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:29" align="right">comment:29</div>

the function dodecahedron does nothing with its `base_ring` argument. Also, why should the projection function return 'None' instead of '[]' when it is called with no argument?

Nathann



---

archive/issue_comments_249364.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@nathanncohen](#comment:29):\n> the function dodecahedron does nothing with its `base_ring` argument. Also, why should the projection function return 'None' instead of '[]' when it is called with no argument?\n\nYou corrected it in 7eb2326",
    "created_at": "2015-04-17T21:23:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249364",
    "user": "https://github.com/videlec"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@nathanncohen](#comment:29):
> the function dodecahedron does nothing with its `base_ring` argument. Also, why should the projection function return 'None' instead of '[]' when it is called with no argument?

You corrected it in 7eb2326



---

archive/issue_comments_249365.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@nathanncohen](#comment:28):\n> Hello,\n> \n> > Which one did you expected? I improved the documentation.\n\n> \n> Well, I expected an orthogonal projection on this hyperplane. And I probably expected the base of the hyperplane to be the projection of d-1 vectors of the base from the original space I guess.\n\nThe description is explicit in the doc (commit \u200bfac3cff)\n\n> > > - At this point I still do not know if it is very wise to use this definition of\n> > >   the projection, but it would be cool if every function which uses this\n> > >   projection (like !Simplex) could redirect toward the matrix function. This way\n> > >   people would have a chance to learn what exactly they get as a result.\n\n> > \n> > I see. But I am really not confortable in moving this to `matrix.<tab>` as well. One possibility is to move it back to `polytopes.<tab>`. What do you think?\n\n> \n> All I was suggesting in the message above was to add a link in the doc. The message you added in `project_points` is perfect\n> \n> ```\n> The projection used is the matrix given by :func:`zero_sum_projection`.\n> ```\n> \n> To me it should appear whenever there is a 'project' argument in the function.\n\nWill do!\n\n> > Is it not clear enough? The coordinates of the icosahedron need to be defined in `QQ[sqrt(5)]`, hence the error.\n\n> \n> Precisely: Could you add somewhere in the doc that the field must contain `QQ(sqrt(5))`?\n\nThere is one example at the end of the doc (from fac3cff)",
    "created_at": "2015-04-17T21:25:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249365",
    "user": "https://github.com/videlec"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@nathanncohen](#comment:28):
> Hello,
> 
> > Which one did you expected? I improved the documentation.

> 
> Well, I expected an orthogonal projection on this hyperplane. And I probably expected the base of the hyperplane to be the projection of d-1 vectors of the base from the original space I guess.

The description is explicit in the doc (commit â€‹fac3cff)

> > > - At this point I still do not know if it is very wise to use this definition of
> > >   the projection, but it would be cool if every function which uses this
> > >   projection (like !Simplex) could redirect toward the matrix function. This way
> > >   people would have a chance to learn what exactly they get as a result.

> > 
> > I see. But I am really not confortable in moving this to `matrix.<tab>` as well. One possibility is to move it back to `polytopes.<tab>`. What do you think?

> 
> All I was suggesting in the message above was to add a link in the doc. The message you added in `project_points` is perfect
> 
> ```
> The projection used is the matrix given by :func:`zero_sum_projection`.
> ```
> 
> To me it should appear whenever there is a 'project' argument in the function.

Will do!

> > Is it not clear enough? The coordinates of the icosahedron need to be defined in `QQ[sqrt(5)]`, hence the error.

> 
> Precisely: Could you add somewhere in the doc that the field must contain `QQ(sqrt(5))`?

There is one example at the end of the doc (from fac3cff)



---

archive/issue_comments_249366.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\n> You corrected it in 7eb2326\n\nArggggg... I was looking at the original commit again. I was wondering why it has been removed `>_<`\n\n> The description is explicit in the doc (commit \u200bfac3cff)\n\nYes yes now it's good!\n\n> There is one example at the end of the doc (from fac3cff)\n\nIt happens several times though. Could you add it in the doc of `base_ring`? You already talk about this field there. It could be something like \"If set to None then it will be `QQ[\\phi]`, otherwise it must be a field that contains it\".\n\nNathann",
    "created_at": "2015-04-17T21:34:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249366",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:32" align="right">comment:32</div>

> You corrected it in 7eb2326

Arggggg... I was looking at the original commit again. I was wondering why it has been removed `>_<`

> The description is explicit in the doc (commit â€‹fac3cff)

Yes yes now it's good!

> There is one example at the end of the doc (from fac3cff)

It happens several times though. Could you add it in the doc of `base_ring`? You already talk about this field there. It could be something like "If set to None then it will be `QQ[\phi]`, otherwise it must be a field that contains it".

Nathann



---

archive/issue_comments_249367.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nThe 600-cell code would look a bit better if you were building all points at once instead of interrupting the flow to decide which ring you should work with.",
    "created_at": "2015-04-17T21:43:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249367",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:33" align="right">comment:33</div>

The 600-cell code would look a bit better if you were building all points at once instead of interrupting the flow to decide which ring you should work with.



---

archive/issue_comments_249368.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nFunny. There is no `automorphism_group` function for polytopes `O_o`",
    "created_at": "2015-04-17T21:44:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249368",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:34" align="right">comment:34</div>

Funny. There is no `automorphism_group` function for polytopes `O_o`



---

archive/issue_comments_249369.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\n\n```                                                                                                                                                                         \n        OUTPUT: \n\n        EXAMPLES::\n```",
    "created_at": "2015-04-17T21:46:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249369",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:35" align="right">comment:35</div>


```                                                                                                                                                                         
        OUTPUT: 

        EXAMPLES::
```



---

archive/issue_comments_249370.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@nathanncohen](#comment:34):\n> Funny. There is no `automorphism_group` function for polytopes `O_o`\n\nYes! This is very sad... But you have to be careful about what it means. There is the combinatorial automorphism group and the isometry group. I have no idea how to implement the latter efficiently.",
    "created_at": "2015-04-17T21:46:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249370",
    "user": "https://github.com/videlec"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@nathanncohen](#comment:34):
> Funny. There is no `automorphism_group` function for polytopes `O_o`

Yes! This is very sad... But you have to be careful about what it means. There is the combinatorial automorphism group and the isometry group. I have no idea how to implement the latter efficiently.



---

archive/issue_comments_249371.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nMost probably the ugliest thing I ever saw\n\n```\nsage: Sequence([Graph()]).universe()\n<class 'sage.graphs.graph.Graph'>\nsage: Sequence([Graph(),1]).universe()\nCategory of objects\nsage: Sequence([1]).universe()\nInteger Ring\n```",
    "created_at": "2015-04-17T21:54:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249371",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:37" align="right">comment:37</div>

Most probably the ugliest thing I ever saw

```
sage: Sequence([Graph()]).universe()
<class 'sage.graphs.graph.Graph'>
sage: Sequence([Graph(),1]).universe()
Category of objects
sage: Sequence([1]).universe()
Integer Ring
```



---

archive/issue_comments_249372.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nHMmmmmmmm... I don't exactly know what the isometry group is, but let's try anyway: what about defining a complete graph on your points, in which each edge has a color associated to its length. Wouldn't the automorphism group of that be what you want?",
    "created_at": "2015-04-17T21:55:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249372",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:38" align="right">comment:38</div>

HMmmmmmmm... I don't exactly know what the isometry group is, but let's try anyway: what about defining a complete graph on your points, in which each edge has a color associated to its length. Wouldn't the automorphism group of that be what you want?



---

archive/issue_comments_249373.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nOkayyyyyyyyyyyyyy. End of the review. Nothing else to add `;-)`\n\nVery good job. This code needed to be cleaned, and it is much better now.\n\nBut please, next time: smaller patches. You waste your reviewers' health `:-P`\n\nNathann",
    "created_at": "2015-04-17T21:58:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249373",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:39" align="right">comment:39</div>

Okayyyyyyyyyyyyyy. End of the review. Nothing else to add `;-)`

Very good job. This code needed to be cleaned, and it is much better now.

But please, next time: smaller patches. You waste your reviewers' health `:-P`

Nathann



---

archive/issue_comments_249374.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nReplying to [@nathanncohen](#comment:38):\n> HMmmmmmmm... I don't exactly know what the isometry group is, but let's try anyway: what about defining a complete graph on your points, in which each edge has a color associated to its length. Wouldn't the automorphism group of that be what you want?\n\nThat is a valid definition. But the standard one is the set of orthogonal matrices that preserve the polyhedron. And it would be nice for `isometry_group` to be a finite matrix group (and not permutations)!",
    "created_at": "2015-04-17T21:59:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249374",
    "user": "https://github.com/videlec"
}
```

<div id="comment:40" align="right">comment:40</div>

Replying to [@nathanncohen](#comment:38):
> HMmmmmmmm... I don't exactly know what the isometry group is, but let's try anyway: what about defining a complete graph on your points, in which each edge has a color associated to its length. Wouldn't the automorphism group of that be what you want?

That is a valid definition. But the standard one is the set of orthogonal matrices that preserve the polyhedron. And it would be nice for `isometry_group` to be a finite matrix group (and not permutations)!



---

archive/issue_comments_249375.json:
```json
{
    "body": "Changed commit from **[fac3cff](https://github.com/sagemath/sagetrac-mirror/commit/fac3cffdb326dad1d3c61045d1c33044c99b8b32)** to **[1a82754](https://github.com/sagemath/sagetrac-mirror/commit/1a82754ea33046384dbefc6045de5bef0e0a2261)**",
    "created_at": "2015-04-17T22:20:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249375",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[fac3cff](https://github.com/sagemath/sagetrac-mirror/commit/fac3cffdb326dad1d3c61045d1c33044c99b8b32)** to **[1a82754](https://github.com/sagemath/sagetrac-mirror/commit/1a82754ea33046384dbefc6045de5bef0e0a2261)**



---

archive/issue_comments_249376.json:
```json
{
    "body": "<div id=\"comment:41\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/21e70a7a66aa10fd41afb36e772352c52634fc76\">21e70a7</a></td><td><code>Trac 18213: review commit</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1a82754ea33046384dbefc6045de5bef0e0a2261\">1a82754</a></td><td><code>Trac 18213: doctest fix</code></td></tr></table>\n",
    "created_at": "2015-04-17T22:20:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249376",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:41"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/21e70a7a66aa10fd41afb36e772352c52634fc76">21e70a7</a></td><td><code>Trac 18213: review commit</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1a82754ea33046384dbefc6045de5bef0e0a2261">1a82754</a></td><td><code>Trac 18213: doctest fix</code></td></tr></table>




---

archive/issue_comments_249377.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nPatchbot should be happy after that.",
    "created_at": "2015-04-17T22:21:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249377",
    "user": "https://github.com/videlec"
}
```

<div id="comment:42" align="right">comment:42</div>

Patchbot should be happy after that.



---

archive/issue_comments_249378.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nSome broken doctests in the patchbot's report. Also, can you be sure that the `sqrt(6.) / factorial(5)` are not subject to numerical noise? There is no `#tol` on them right now.\n\nNathann",
    "created_at": "2015-04-18T06:50:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249378",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:43" align="right">comment:43</div>

Some broken doctests in the patchbot's report. Also, can you be sure that the `sqrt(6.) / factorial(5)` are not subject to numerical noise? There is no `#tol` on them right now.

Nathann



---

archive/issue_comments_249379.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nHmmmmmm.. I can't seem to find on google an implementation of an isometry group function anywhere `O_o`",
    "created_at": "2015-04-18T07:48:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249379",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:44" align="right">comment:44</div>

Hmmmmmm.. I can't seem to find on google an implementation of an isometry group function anywhere `O_o`



---

archive/issue_comments_249380.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nHi Vincent and Nathann\n\nJust a quick comment, as I'm not sure how useful this will be for general polyhedra: There is a method for lattice polytopes:\n`LatticePolytope_PPL` (in `sage.geometry.polyhedron.ppl_lattice_polytope`) has a method `lattice_automorphism_group()`\n\nCheers,\nJan",
    "created_at": "2015-04-18T08:41:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249380",
    "user": "https://github.com/sagetrac-jkeitel"
}
```

<div id="comment:45" align="right">comment:45</div>

Hi Vincent and Nathann

Just a quick comment, as I'm not sure how useful this will be for general polyhedra: There is a method for lattice polytopes:
`LatticePolytope_PPL` (in `sage.geometry.polyhedron.ppl_lattice_polytope`) has a method `lattice_automorphism_group()`

Cheers,
Jan



---

archive/issue_events_258948.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-04-18T09:22:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18213#event-258948"
}
```



---

archive/issue_events_258949.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-04-18T09:22:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18213#event-258949"
}
```



---

archive/issue_comments_249381.json:
```json
{
    "body": "<div id=\"comment:47\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/120c1e9716324b229632a5432ff362d41e104409\">120c1e9</a></td><td><code>Trac 18213: more abs tol in doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d09d8a53a3b1a0c9661e3be4485c2d3ca1c0c148\">d09d8a5</a></td><td><code>Trac 18211: forgot a # optional in the doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a58da00e4907251c2ab47d7af1109da31901ee36\">a58da00</a></td><td><code>Trac 18213: merge failed doctest from #18211</code></td></tr></table>\n",
    "created_at": "2015-04-18T09:30:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249381",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:47"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/120c1e9716324b229632a5432ff362d41e104409">120c1e9</a></td><td><code>Trac 18213: more abs tol in doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d09d8a53a3b1a0c9661e3be4485c2d3ca1c0c148">d09d8a5</a></td><td><code>Trac 18211: forgot a # optional in the doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a58da00e4907251c2ab47d7af1109da31901ee36">a58da00</a></td><td><code>Trac 18213: merge failed doctest from #18211</code></td></tr></table>




---

archive/issue_comments_249382.json:
```json
{
    "body": "Changed commit from **[1a82754](https://github.com/sagemath/sagetrac-mirror/commit/1a82754ea33046384dbefc6045de5bef0e0a2261)** to **[a58da00](https://github.com/sagemath/sagetrac-mirror/commit/a58da00e4907251c2ab47d7af1109da31901ee36)**",
    "created_at": "2015-04-18T09:30:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249382",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1a82754](https://github.com/sagemath/sagetrac-mirror/commit/1a82754ea33046384dbefc6045de5bef0e0a2261)** to **[a58da00](https://github.com/sagemath/sagetrac-mirror/commit/a58da00e4907251c2ab47d7af1109da31901ee36)**



---

archive/issue_comments_249383.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nReplying to [@nathanncohen](#comment:43):\n> Some broken doctests in the patchbot's report. Also, can you be sure that the `sqrt(6.) / factorial(5)` are not subject to numerical noise? There is no `#tol` on them right now.\n\nI don't know... Patchbot did not complain about this.",
    "created_at": "2015-04-18T09:30:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249383",
    "user": "https://github.com/videlec"
}
```

<div id="comment:48" align="right">comment:48</div>

Replying to [@nathanncohen](#comment:43):
> Some broken doctests in the patchbot's report. Also, can you be sure that the `sqrt(6.) / factorial(5)` are not subject to numerical noise? There is no `#tol` on them right now.

I don't know... Patchbot did not complain about this.



---

archive/issue_events_258950.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-18T09:31:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18213#event-258950"
}
```



---

archive/issue_events_258951.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-18T09:31:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18213#event-258951"
}
```



---

archive/issue_events_258952.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-04-18T10:18:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18213#event-258952"
}
```



---

archive/issue_events_258953.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-04-18T10:18:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18213#event-258953"
}
```



---

archive/issue_comments_249384.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nOkayyyyyyy. Then `positive_review`!\n\nNathann",
    "created_at": "2015-04-18T10:18:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249384",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:50" align="right">comment:50</div>

Okayyyyyyy. Then `positive_review`!

Nathann



---

archive/issue_comments_249385.json:
```json
{
    "body": "Reviewer: **Nathann Cohen**",
    "created_at": "2015-04-18T10:18:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249385",
    "user": "https://github.com/nathanncohen"
}
```

Reviewer: **Nathann Cohen**



---

archive/issue_events_258954.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-18T11:12:36Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "title_is": "A lot of polytope constructors are broken",
    "title_was": "A lot of polytopes constructor are broken",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18213#event-258954"
}
```



---

archive/issue_events_258955.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-04-19T01:52:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18213#event-258955"
}
```



---

archive/issue_events_258956.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "4f541c83d1822a89015c7008e4a68a865b7f66e0",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-04-19T01:52:06Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18213#event-258956"
}
```



---

archive/issue_comments_249386.json:
```json
{
    "body": "Changed branch from **[u/vdelecroix/18213](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/18213)** to **[a58da00](https://github.com/sagemath/sagetrac-mirror/commit/a58da00e4907251c2ab47d7af1109da31901ee36)**",
    "created_at": "2015-04-19T01:52:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18213#issuecomment-249386",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/vdelecroix/18213](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/18213)** to **[a58da00](https://github.com/sagemath/sagetrac-mirror/commit/a58da00e4907251c2ab47d7af1109da31901ee36)**
