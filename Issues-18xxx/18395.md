# Issue 18395: (moderate) Speedup in layout_spring

archive/issues_018158.json:
```json
{
    "assignees": [],
    "body": "This branch improves (a bit) the performances of the 'layout_spring' algorithm, i.e. the attraction/repulsion layout for graphs.\n\nI tested it on the `CameronGraph` (big and dense), with the following results:\n\nBefore:\n\n```\nsage: g = graphs.CameronGraph()\nsage: %time _=g.layout_spring(iterations=100000)\nCPU times: user 30.8 s, sys: 8 ms, total: 30.8 s\nWall time: 30.8 s\n```\n\nAfter\n\n```\nsage: g = graphs.CameronGraph()\nsage: %time _=g.layout_spring(iterations=100000)\nCPU times: user 14.3 s, sys: 4 ms, total: 14.3 s\nWall time: 14.3 s\n```\n\nHonestly, that is mostly a failure. Most of the speedup comes from templating the code so that `dim=2` and `dim=3` are decided at compile-time. Most of the time it spent multiplying floats, and that's what I have been trying to reduce. Not with obvious success `:-/`\n\nNathann\n\nCC:  @vbraun @videlec @dcoudert\n\nBranch/Commit: **[09a8953](https://github.com/sagemath/sagetrac-mirror/commit/09a8953cbcb10a64c4a555fe54017be6db75ec21)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Nathann Cohen, David Coudert**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/18395_\n\n",
    "closed_at": "2017-10-15T09:22:26Z",
    "created_at": "2015-05-10T08:57:53Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "(moderate) Speedup in layout_spring",
    "type": "issue",
    "updated_at": "2017-10-15T09:22:26Z",
    "url": "https://github.com/sagemath/sage/issues/18395",
    "user": "https://github.com/nathanncohen"
}
```
This branch improves (a bit) the performances of the 'layout_spring' algorithm, i.e. the attraction/repulsion layout for graphs.

I tested it on the `CameronGraph` (big and dense), with the following results:

Before:

```
sage: g = graphs.CameronGraph()
sage: %time _=g.layout_spring(iterations=100000)
CPU times: user 30.8 s, sys: 8 ms, total: 30.8 s
Wall time: 30.8 s
```

After

```
sage: g = graphs.CameronGraph()
sage: %time _=g.layout_spring(iterations=100000)
CPU times: user 14.3 s, sys: 4 ms, total: 14.3 s
Wall time: 14.3 s
```

Honestly, that is mostly a failure. Most of the speedup comes from templating the code so that `dim=2` and `dim=3` are decided at compile-time. Most of the time it spent multiplying floats, and that's what I have been trying to reduce. Not with obvious success `:-/`

Nathann

CC:  @vbraun @videlec @dcoudert

Branch/Commit: **[09a8953](https://github.com/sagemath/sagetrac-mirror/commit/09a8953cbcb10a64c4a555fe54017be6db75ec21)**

Reviewer: **Travis Scrimshaw**

Author: **Nathann Cohen, David Coudert**

_Issue created by migration from https://trac.sagemath.org/ticket/18395_





---

archive/issue_events_243718.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-05-10T08:57:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "milestone_number": null,
    "milestone_title": "sage-6.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18395#event-243718"
}
```



---

archive/issue_events_243719.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-05-10T08:57:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "component: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18395#event-243719"
}
```



---

archive/issue_events_243720.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-05-10T08:57:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18395#event-243720"
}
```



---

archive/issue_events_243721.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-05-10T08:57:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18395#event-243721"
}
```



---

archive/issue_events_243722.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-05-10T08:58:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18395#event-243722"
}
```



---

archive/issue_comments_255705.json:
```json
{
    "body": "Branch: **[public/18395](https://github.com/sagemath/sagetrac-mirror/tree/public/18395)**",
    "created_at": "2015-05-10T08:58:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255705",
    "user": "https://github.com/nathanncohen"
}
```

Branch: **[public/18395](https://github.com/sagemath/sagetrac-mirror/tree/public/18395)**



---

archive/issue_comments_255706.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e0555d74cc4f3237303d6ab071454986972567f1\">e0555d7</a></td><td><code>trac #18395: zero-change cleaning</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fcb201b966052265fea59d107788eda2e02978a8\">fcb201b</a></td><td><code>trac #18395: Ugly hack for a 30% speedup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8011e8edeb063f3ff3ee87b2504ee47136b89e12\">8011e8e</a></td><td><code>trac #18395: Intermediate variable</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ecfaf11223767284f4f429be792ae488c0d9a0af\">ecfaf11</a></td><td><code>trac #18395: heap variable -> stack variable</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/49ddee04c89bbe5a5536305e47bfe777dde7f79a\">49ddee0</a></td><td><code>trac #18395: Approx sqrt</code></td></tr></table>\n",
    "created_at": "2015-05-10T08:59:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255706",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2" align="right">Comment 2</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e0555d74cc4f3237303d6ab071454986972567f1">e0555d7</a></td><td><code>trac #18395: zero-change cleaning</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fcb201b966052265fea59d107788eda2e02978a8">fcb201b</a></td><td><code>trac #18395: Ugly hack for a 30% speedup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8011e8edeb063f3ff3ee87b2504ee47136b89e12">8011e8e</a></td><td><code>trac #18395: Intermediate variable</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ecfaf11223767284f4f429be792ae488c0d9a0af">ecfaf11</a></td><td><code>trac #18395: heap variable -> stack variable</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/49ddee04c89bbe5a5536305e47bfe777dde7f79a">49ddee0</a></td><td><code>trac #18395: Approx sqrt</code></td></tr></table>




---

archive/issue_comments_255707.json:
```json
{
    "body": "Commit: **[49ddee0](https://github.com/sagemath/sagetrac-mirror/commit/49ddee04c89bbe5a5536305e47bfe777dde7f79a)**",
    "created_at": "2015-05-10T08:59:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255707",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[49ddee0](https://github.com/sagemath/sagetrac-mirror/commit/49ddee04c89bbe5a5536305e47bfe777dde7f79a)**



---

archive/issue_comments_255708.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\n`mulsitplying floats`? Never heard of that ;-)",
    "created_at": "2015-05-10T09:05:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255708",
    "user": "https://github.com/videlec"
}
```

<div id="comment:3" align="right">Comment 3</div>

`mulsitplying floats`? Never heard of that ;-)



---

archive/issue_comments_255709.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\n> `mulsitplying floats`? Never heard of that ;-)\n\nCan't you fix the typo instead of commenting on it?",
    "created_at": "2015-05-10T09:07:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255709",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:4" align="right">Comment 4</div>

> `mulsitplying floats`? Never heard of that ;-)

Can't you fix the typo instead of commenting on it?



---

archive/issue_comments_255710.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -20,6 +20,6 @@\n Wall time: 14.3 s\n ```\n \n-Honestly, that is mostly a failure. Most of the speedup comes from templating the code so that `dim=2` and `dim=3` are decided at compile-time. Most of the time it spend mulsitplying floats, and that's what I have been trying to reduce. Not with obvious success `:-/`\n+Honestly, that is mostly a failure. Most of the speedup comes from templating the code so that `dim=2` and `dim=3` are decided at compile-time. Most of the time it spend multiplying floats, and that's what I have been trying to reduce. Not with obvious success `:-/`\n \n Nathann\n``````\n",
    "created_at": "2015-05-10T09:08:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255710",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -20,6 +20,6 @@
 Wall time: 14.3 s
 ```
 
-Honestly, that is mostly a failure. Most of the speedup comes from templating the code so that `dim=2` and `dim=3` are decided at compile-time. Most of the time it spend mulsitplying floats, and that's what I have been trying to reduce. Not with obvious success `:-/`
+Honestly, that is mostly a failure. Most of the speedup comes from templating the code so that `dim=2` and `dim=3` are decided at compile-time. Most of the time it spend multiplying floats, and that's what I have been trying to reduce. Not with obvious success `:-/`
 
 Nathann
``````




---

archive/issue_comments_255711.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -20,6 +20,6 @@\n Wall time: 14.3 s\n ```\n \n-Honestly, that is mostly a failure. Most of the speedup comes from templating the code so that `dim=2` and `dim=3` are decided at compile-time. Most of the time it spend multiplying floats, and that's what I have been trying to reduce. Not with obvious success `:-/`\n+Honestly, that is mostly a failure. Most of the speedup comes from templating the code so that `dim=2` and `dim=3` are decided at compile-time. Most of the time it spent multiplying floats, and that's what I have been trying to reduce. Not with obvious success `:-/`\n \n Nathann\n``````\n",
    "created_at": "2015-05-10T09:13:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255711",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -20,6 +20,6 @@
 Wall time: 14.3 s
 ```
 
-Honestly, that is mostly a failure. Most of the speedup comes from templating the code so that `dim=2` and `dim=3` are decided at compile-time. Most of the time it spend multiplying floats, and that's what I have been trying to reduce. Not with obvious success `:-/`
+Honestly, that is mostly a failure. Most of the speedup comes from templating the code so that `dim=2` and `dim=3` are decided at compile-time. Most of the time it spent multiplying floats, and that's what I have been trying to reduce. Not with obvious success `:-/`
 
 Nathann
``````




---

archive/issue_comments_255712.json:
```json
{
    "body": "Changed commit from **[49ddee0](https://github.com/sagemath/sagetrac-mirror/commit/49ddee04c89bbe5a5536305e47bfe777dde7f79a)** to **[0e09b28](https://github.com/sagemath/sagetrac-mirror/commit/0e09b28c7042adf81611beebc709613a04a1083b)**",
    "created_at": "2015-06-27T16:17:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255712",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[49ddee0](https://github.com/sagemath/sagetrac-mirror/commit/49ddee04c89bbe5a5536305e47bfe777dde7f79a)** to **[0e09b28](https://github.com/sagemath/sagetrac-mirror/commit/0e09b28c7042adf81611beebc709613a04a1083b)**



---

archive/issue_comments_255713.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0e09b28c7042adf81611beebc709613a04a1083b\">0e09b28</a></td><td><code>trac #18395: Merged with 6.8.beta6</code></td></tr></table>\n",
    "created_at": "2015-06-27T16:17:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255713",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7" align="right">Comment 7</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0e09b28c7042adf81611beebc709613a04a1083b">0e09b28</a></td><td><code>trac #18395: Merged with 6.8.beta6</code></td></tr></table>




---

archive/issue_events_243723.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2015-07-19T12:34:50Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "milestone_number": null,
    "milestone_title": "sage-6.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18395#event-243723"
}
```



---

archive/issue_events_243724.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2015-07-19T12:34:50Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18395#event-243724"
}
```



---

archive/issue_events_243725.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2015-07-19T12:34:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18395#event-243725"
}
```



---

archive/issue_events_243726.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2015-07-19T12:34:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18395#event-243726"
}
```



---

archive/issue_comments_255714.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nI tried on top of 6.8.rc0\n\n```\nsage -t --long src/sage/graphs/generic_graph_pyx.pyx\n**********************************************************************\nFile \"src/sage/graphs/generic_graph_pyx.pyx\", line 54, in sage.graphs.generic_graph_pyx.spring_layout_fast_split\nFailed example:\n    spring_layout_fast_split(G)\nExpected:\n    {0: [0.452..., 0.247...], ..., 502: [25.7..., 0.505...]}\nGot:\n    {0: [nan, nan],\n     1: [nan, nan],\n     2: [nan, nan],\n...\n     902: [nan, nan]}\n**********************************************************************\nFile \"src/sage/graphs/generic_graph_pyx.pyx\", line 97, in sage.graphs.generic_graph_pyx.spring_layout_fast\nFailed example:\n    spring_layout_fast(G)\nExpected:\n    {0: [-0.0733..., 0.157...], ..., 502: [-0.551..., 0.682...]}\nGot:\n    {0: [nan, nan],\n     1: [nan, nan],\n...\n     902: [nan, nan]}\n**********************************************************************\nFile \"src/sage/graphs/generic_graph_pyx.pyx\", line 113, in sage.graphs.generic_graph_pyx.spring_layout_fast\nFailed example:\n    spring_layout_fast(G, by_component = True)\nExpected:\n    {0: [2.12..., -0.321...], ..., 502: [26.0..., -0.812...]}\nGot:\n    {0: [nan, nan],\n     1: [nan, nan],\n...\n     902: [nan, nan]}\n**********************************************************************\nFile \"src/sage/graphs/generic_graph_pyx.pyx\", line 346, in sage.graphs.generic_graph_pyx.sqrt_approx\nFailed example:\n    polar_plot([1,lambda x:dist(cos(x),sin(x))], (0, 2*pi))\nExpected:\n    Launched png viewer for Graphics object consisting of 2 graphics primitives\nGot:\n    Graphics object consisting of 2 graphics primitives\n**********************************************************************\n3 items had failures:\n   2 of   9 in sage.graphs.generic_graph_pyx.spring_layout_fast\n   1 of   5 in sage.graphs.generic_graph_pyx.spring_layout_fast_split\n   1 of   3 in sage.graphs.generic_graph_pyx.sqrt_approx\n    [81 tests, 4 failures, 3.03 s]\n----------------------------------------------------------------------\nsage -t --long src/sage/graphs/generic_graph_pyx.pyx  # 4 doctests failed\n----------------------------------------------------------------------\nTotal time for all tests: 3.1 seconds\n    cpu time: 2.8 seconds\n    cumulative wall time: 3.0 seconds\n```",
    "created_at": "2015-07-19T12:34:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255714",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:8" align="right">Comment 8</div>

I tried on top of 6.8.rc0

```
sage -t --long src/sage/graphs/generic_graph_pyx.pyx
**********************************************************************
File "src/sage/graphs/generic_graph_pyx.pyx", line 54, in sage.graphs.generic_graph_pyx.spring_layout_fast_split
Failed example:
    spring_layout_fast_split(G)
Expected:
    {0: [0.452..., 0.247...], ..., 502: [25.7..., 0.505...]}
Got:
    {0: [nan, nan],
     1: [nan, nan],
     2: [nan, nan],
...
     902: [nan, nan]}
**********************************************************************
File "src/sage/graphs/generic_graph_pyx.pyx", line 97, in sage.graphs.generic_graph_pyx.spring_layout_fast
Failed example:
    spring_layout_fast(G)
Expected:
    {0: [-0.0733..., 0.157...], ..., 502: [-0.551..., 0.682...]}
Got:
    {0: [nan, nan],
     1: [nan, nan],
...
     902: [nan, nan]}
**********************************************************************
File "src/sage/graphs/generic_graph_pyx.pyx", line 113, in sage.graphs.generic_graph_pyx.spring_layout_fast
Failed example:
    spring_layout_fast(G, by_component = True)
Expected:
    {0: [2.12..., -0.321...], ..., 502: [26.0..., -0.812...]}
Got:
    {0: [nan, nan],
     1: [nan, nan],
...
     902: [nan, nan]}
**********************************************************************
File "src/sage/graphs/generic_graph_pyx.pyx", line 346, in sage.graphs.generic_graph_pyx.sqrt_approx
Failed example:
    polar_plot([1,lambda x:dist(cos(x),sin(x))], (0, 2*pi))
Expected:
    Launched png viewer for Graphics object consisting of 2 graphics primitives
Got:
    Graphics object consisting of 2 graphics primitives
**********************************************************************
3 items had failures:
   2 of   9 in sage.graphs.generic_graph_pyx.spring_layout_fast
   1 of   5 in sage.graphs.generic_graph_pyx.spring_layout_fast_split
   1 of   3 in sage.graphs.generic_graph_pyx.sqrt_approx
    [81 tests, 4 failures, 3.03 s]
----------------------------------------------------------------------
sage -t --long src/sage/graphs/generic_graph_pyx.pyx  # 4 doctests failed
----------------------------------------------------------------------
Total time for all tests: 3.1 seconds
    cpu time: 2.8 seconds
    cumulative wall time: 3.0 seconds
```



---

archive/issue_comments_255715.json:
```json
{
    "body": "Changed commit from **[0e09b28](https://github.com/sagemath/sagetrac-mirror/commit/0e09b28c7042adf81611beebc709613a04a1083b)** to **[84896d7](https://github.com/sagemath/sagetrac-mirror/commit/84896d7af56fafb00baf61cd2a52ce850525b92b)**",
    "created_at": "2015-07-20T12:07:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255715",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0e09b28](https://github.com/sagemath/sagetrac-mirror/commit/0e09b28c7042adf81611beebc709613a04a1083b)** to **[84896d7](https://github.com/sagemath/sagetrac-mirror/commit/84896d7af56fafb00baf61cd2a52ce850525b92b)**



---

archive/issue_comments_255716.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8442657ec4bcbfd81c1e4f59d3c4bc20fdae95f2\">8442657</a></td><td><code>trac #18395: Merged with 6.8.rc0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/84896d7af56fafb00baf61cd2a52ce850525b92b\">84896d7</a></td><td><code>trac #18395: Turns out that the behaviour of 'abs' changed O_o</code></td></tr></table>\n",
    "created_at": "2015-07-20T12:07:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255716",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9" align="right">Comment 9</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8442657ec4bcbfd81c1e4f59d3c4bc20fdae95f2">8442657</a></td><td><code>trac #18395: Merged with 6.8.rc0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/84896d7af56fafb00baf61cd2a52ce850525b92b">84896d7</a></td><td><code>trac #18395: Turns out that the behaviour of 'abs' changed O_o</code></td></tr></table>




---

archive/issue_comments_255717.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/73662a95fb6e58805aa149f039f4c5b925785104\">73662a9</a></td><td><code>trac #18395: Better constant</code></td></tr></table>\n",
    "created_at": "2015-07-20T12:14:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255717",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10" align="right">Comment 10</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/73662a95fb6e58805aa149f039f4c5b925785104">73662a9</a></td><td><code>trac #18395: Better constant</code></td></tr></table>




---

archive/issue_comments_255718.json:
```json
{
    "body": "Changed commit from **[84896d7](https://github.com/sagemath/sagetrac-mirror/commit/84896d7af56fafb00baf61cd2a52ce850525b92b)** to **[73662a9](https://github.com/sagemath/sagetrac-mirror/commit/73662a95fb6e58805aa149f039f4c5b925785104)**",
    "created_at": "2015-07-20T12:14:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255718",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[84896d7](https://github.com/sagemath/sagetrac-mirror/commit/84896d7af56fafb00baf61cd2a52ce850525b92b)** to **[73662a9](https://github.com/sagemath/sagetrac-mirror/commit/73662a95fb6e58805aa149f039f4c5b925785104)**



---

archive/issue_events_243727.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-07-20T12:15:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18395#event-243727"
}
```



---

archive/issue_events_243728.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-07-20T12:15:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18395#event-243728"
}
```



---

archive/issue_events_243729.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2015-07-20T15:40:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18395#event-243729"
}
```



---

archive/issue_events_243730.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2015-07-20T15:40:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18395#event-243730"
}
```



---

archive/issue_comments_255719.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nsome problems remain :(\n\n```\nsage -t --long src/sage/graphs/generic_graph_pyx.pyx\n**********************************************************************\nFile \"src/sage/graphs/generic_graph_pyx.pyx\", line 54, in sage.graphs.generic_graph_pyx.spring_layout_fast_split\nFailed example:\n    spring_layout_fast_split(G)\nExpected:\n    {0: [0.452..., 0.247...], ..., 502: [25.7..., 0.505...]}\nGot:\n    {0: [0.7785109925614286, 0.06976708739098784],\n     1: [0.7761449200341834, 0.5516862310233024],\n...\n     902: [3.130511551759616, 0.22735834286143738]}\n**********************************************************************\nFile \"src/sage/graphs/generic_graph_pyx.pyx\", line 97, in sage.graphs.generic_graph_pyx.spring_layout_fast\nFailed example:\n    spring_layout_fast(G)\nExpected:\n    {0: [-0.0733..., 0.157...], ..., 502: [-0.551..., 0.682...]}\nGot:\n    {0: [0.007496865679470362, 0.04129113197411667],\n     1: [0.01495366592880235, 0.08850535412927439],\n     2: [0.05849657218327249, 0.09484847570321614],\n...\n     901: [-0.4474352390771702, -0.10570013179405174],\n     902: [-0.47861195812354, -0.10660577880837746]}\n**********************************************************************\nFile \"src/sage/graphs/generic_graph_pyx.pyx\", line 113, in sage.graphs.generic_graph_pyx.spring_layout_fast\nFailed example:\n    spring_layout_fast(G, by_component = True)\nExpected:\n    {0: [2.12..., -0.321...], ..., 502: [26.0..., -0.812...]}\nGot:\n    {0: [2.2186445972355, -0.008574741789712105],\n     1: [2.121454111190332, 0.5076017939042802],\n...\n     902: [3.0706796988471234, 0.8610997979963941]}\n**********************************************************************\nFile \"src/sage/graphs/generic_graph_pyx.pyx\", line 348, in sage.graphs.generic_graph_pyx.sqrt_approx\nFailed example:\n    polar_plot([1,lambda x:dist(cos(x),sin(x))], (0, 2*pi))\nExpected:\n    Launched png viewer for Graphics object consisting of 2 graphics primitives\nGot:\n    Graphics object consisting of 2 graphics primitives\n**********************************************************************\n3 items had failures:\n   2 of   9 in sage.graphs.generic_graph_pyx.spring_layout_fast\n   1 of   5 in sage.graphs.generic_graph_pyx.spring_layout_fast_split\n   1 of   3 in sage.graphs.generic_graph_pyx.sqrt_approx\n    [81 tests, 4 failures, 3.42 s]\n----------------------------------------------------------------------\nsage -t --long src/sage/graphs/generic_graph_pyx.pyx  # 4 doctests failed\n----------------------------------------------------------------------\nTotal time for all tests: 3.5 seconds\n    cpu time: 3.2 seconds\n    cumulative wall time: 3.4 seconds\n```",
    "created_at": "2015-07-20T15:40:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255719",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:12" align="right">Comment 12</div>

some problems remain :(

```
sage -t --long src/sage/graphs/generic_graph_pyx.pyx
**********************************************************************
File "src/sage/graphs/generic_graph_pyx.pyx", line 54, in sage.graphs.generic_graph_pyx.spring_layout_fast_split
Failed example:
    spring_layout_fast_split(G)
Expected:
    {0: [0.452..., 0.247...], ..., 502: [25.7..., 0.505...]}
Got:
    {0: [0.7785109925614286, 0.06976708739098784],
     1: [0.7761449200341834, 0.5516862310233024],
...
     902: [3.130511551759616, 0.22735834286143738]}
**********************************************************************
File "src/sage/graphs/generic_graph_pyx.pyx", line 97, in sage.graphs.generic_graph_pyx.spring_layout_fast
Failed example:
    spring_layout_fast(G)
Expected:
    {0: [-0.0733..., 0.157...], ..., 502: [-0.551..., 0.682...]}
Got:
    {0: [0.007496865679470362, 0.04129113197411667],
     1: [0.01495366592880235, 0.08850535412927439],
     2: [0.05849657218327249, 0.09484847570321614],
...
     901: [-0.4474352390771702, -0.10570013179405174],
     902: [-0.47861195812354, -0.10660577880837746]}
**********************************************************************
File "src/sage/graphs/generic_graph_pyx.pyx", line 113, in sage.graphs.generic_graph_pyx.spring_layout_fast
Failed example:
    spring_layout_fast(G, by_component = True)
Expected:
    {0: [2.12..., -0.321...], ..., 502: [26.0..., -0.812...]}
Got:
    {0: [2.2186445972355, -0.008574741789712105],
     1: [2.121454111190332, 0.5076017939042802],
...
     902: [3.0706796988471234, 0.8610997979963941]}
**********************************************************************
File "src/sage/graphs/generic_graph_pyx.pyx", line 348, in sage.graphs.generic_graph_pyx.sqrt_approx
Failed example:
    polar_plot([1,lambda x:dist(cos(x),sin(x))], (0, 2*pi))
Expected:
    Launched png viewer for Graphics object consisting of 2 graphics primitives
Got:
    Graphics object consisting of 2 graphics primitives
**********************************************************************
3 items had failures:
   2 of   9 in sage.graphs.generic_graph_pyx.spring_layout_fast
   1 of   5 in sage.graphs.generic_graph_pyx.spring_layout_fast_split
   1 of   3 in sage.graphs.generic_graph_pyx.sqrt_approx
    [81 tests, 4 failures, 3.42 s]
----------------------------------------------------------------------
sage -t --long src/sage/graphs/generic_graph_pyx.pyx  # 4 doctests failed
----------------------------------------------------------------------
Total time for all tests: 3.5 seconds
    cpu time: 3.2 seconds
    cumulative wall time: 3.4 seconds
```



---

archive/issue_comments_255720.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0a5461da982420160000c48c417dcb374863a16a\">0a5461d</a></td><td><code>trac #18395: Broken doctests</code></td></tr></table>\n",
    "created_at": "2015-07-20T17:02:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255720",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13" align="right">Comment 13</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0a5461da982420160000c48c417dcb374863a16a">0a5461d</a></td><td><code>trac #18395: Broken doctests</code></td></tr></table>




---

archive/issue_comments_255721.json:
```json
{
    "body": "Changed commit from **[73662a9](https://github.com/sagemath/sagetrac-mirror/commit/73662a95fb6e58805aa149f039f4c5b925785104)** to **[0a5461d](https://github.com/sagemath/sagetrac-mirror/commit/0a5461da982420160000c48c417dcb374863a16a)**",
    "created_at": "2015-07-20T17:02:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255721",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[73662a9](https://github.com/sagemath/sagetrac-mirror/commit/73662a95fb6e58805aa149f039f4c5b925785104)** to **[0a5461d](https://github.com/sagemath/sagetrac-mirror/commit/0a5461da982420160000c48c417dcb374863a16a)**



---

archive/issue_events_243731.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-07-20T17:03:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18395#event-243731"
}
```



---

archive/issue_events_243732.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-07-20T17:03:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18395#event-243732"
}
```



---

archive/issue_comments_255722.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nSorry 'bout that `:-/`\n\nFixed.\n\nNathann",
    "created_at": "2015-07-20T17:03:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255722",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:14" align="right">Comment 14</div>

Sorry 'bout that `:-/`

Fixed.

Nathann



---

archive/issue_comments_255723.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nThose two almost certainly compile to the same binary:\n\n```\n-              for x from 0 <= x < dim:\n-                  disp_i[x] += delta[x] * force\n-                  disp_j[x] -= delta[x] * force\n+              for x in range(dim):\n+                  d_tmp = delta[x] * force\n+                  disp_i[x] += d_tmp\n+                  disp_j[x] -= d_tmp\n```\nYou can probably speed it by a few orders of magnitude by not using Euler's method.",
    "created_at": "2015-07-20T17:40:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255723",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:15" align="right">Comment 15</div>

Those two almost certainly compile to the same binary:

```
-              for x from 0 <= x < dim:
-                  disp_i[x] += delta[x] * force
-                  disp_j[x] -= delta[x] * force
+              for x in range(dim):
+                  d_tmp = delta[x] * force
+                  disp_i[x] += d_tmp
+                  disp_j[x] -= d_tmp
```
You can probably speed it by a few orders of magnitude by not using Euler's method.



---

archive/issue_events_243733.json:
```json
{
    "actor": "https://github.com/koffie",
    "created_at": "2017-08-30T18:29:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18395#event-243733"
}
```



---

archive/issue_events_243734.json:
```json
{
    "actor": "https://github.com/koffie",
    "created_at": "2017-08-30T18:29:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18395#event-243734"
}
```



---

archive/issue_comments_255724.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nNeeds to be rebased on sage8.1beta3",
    "created_at": "2017-08-30T18:29:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255724",
    "user": "https://github.com/koffie"
}
```

<div id="comment:16" align="right">Comment 16</div>

Needs to be rebased on sage8.1beta3



---

archive/issue_comments_255725.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nI tried but there are merge conflicts in file `generic_graph_pyx.pyx` and I don't know how to fix that (I need some help/pointer/training to do that).",
    "created_at": "2017-08-31T11:10:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255725",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:17" align="right">Comment 17</div>

I tried but there are merge conflicts in file `generic_graph_pyx.pyx` and I don't know how to fix that (I need some help/pointer/training to do that).



---

archive/issue_comments_255726.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nReplying to [@dcoudert](#comment%3A17):\n> I tried but there are merge conflicts in file `generic_graph_pyx.pyx` and I don't know how to fix that (I need some help/pointer/training to do that).\n\nFor example https://gist.github.com/karenyyng/f19ff75c60f18b4b8149\n\nYou can also google \"git resolve conflicts\" or \"git mergetool\" and pick the link you prefer.",
    "created_at": "2017-08-31T15:32:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255726",
    "user": "https://github.com/videlec"
}
```

<div id="comment:18" align="right">Comment 18</div>

Replying to [@dcoudert](#comment%3A17):
> I tried but there are merge conflicts in file `generic_graph_pyx.pyx` and I don't know how to fix that (I need some help/pointer/training to do that).

For example https://gist.github.com/karenyyng/f19ff75c60f18b4b8149

You can also google "git resolve conflicts" or "git mergetool" and pick the link you prefer.



---

archive/issue_comments_255727.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f58edb0a8f46ea5519776256e1d246d3449a4193\">f58edb0</a></td><td><code>trac #18395: resolve merge conflict</code></td></tr></table>\n",
    "created_at": "2017-08-31T16:17:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255727",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19" align="right">Comment 19</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f58edb0a8f46ea5519776256e1d246d3449a4193">f58edb0</a></td><td><code>trac #18395: resolve merge conflict</code></td></tr></table>




---

archive/issue_comments_255728.json:
```json
{
    "body": "Changed commit from **[0a5461d](https://github.com/sagemath/sagetrac-mirror/commit/0a5461da982420160000c48c417dcb374863a16a)** to **[f58edb0](https://github.com/sagemath/sagetrac-mirror/commit/f58edb0a8f46ea5519776256e1d246d3449a4193)**",
    "created_at": "2017-08-31T16:17:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255728",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0a5461d](https://github.com/sagemath/sagetrac-mirror/commit/0a5461da982420160000c48c417dcb374863a16a)** to **[f58edb0](https://github.com/sagemath/sagetrac-mirror/commit/f58edb0a8f46ea5519776256e1d246d3449a4193)**



---

archive/issue_comments_255729.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nOutch... I did a `git add .` before the commit. Sorry for that.\nHow can I erase that and try again ?",
    "created_at": "2017-08-31T16:24:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255729",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:20" align="right">Comment 20</div>

Outch... I did a `git add .` before the commit. Sorry for that.
How can I erase that and try again ?



---

archive/issue_comments_255730.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nTo cancel the last commit `git reset HEAD^`. Then do what you want. At the time you will update the remote branch on trac with `git push ...` you will have a complain because you changed history. You will have to add the option `-f` (for `force`), i.e. do `git push -f ...`.",
    "created_at": "2017-08-31T16:29:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255730",
    "user": "https://github.com/videlec"
}
```

<div id="comment:21" align="right">Comment 21</div>

To cancel the last commit `git reset HEAD^`. Then do what you want. At the time you will update the remote branch on trac with `git push ...` you will have a complain because you changed history. You will have to add the option `-f` (for `force`), i.e. do `git push -f ...`.



---

archive/issue_comments_255731.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nThough if your commit is a merge commit that is not a good idea...",
    "created_at": "2017-08-31T16:29:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255731",
    "user": "https://github.com/videlec"
}
```

<div id="comment:22" align="right">Comment 22</div>

Though if your commit is a merge commit that is not a good idea...



---

archive/issue_comments_255732.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nIn the case you want to redo the merge, just start from scratch from `\u200b0a5461d`. In other words, something like\n\n```\n$ git checkout -b my_new_merge \u200b0a5461d\n$ git merge develop    # or whatever how this is called\n```",
    "created_at": "2017-08-31T16:31:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255732",
    "user": "https://github.com/videlec"
}
```

<div id="comment:23" align="right">Comment 23</div>

In the case you want to redo the merge, just start from scratch from `​0a5461d`. In other words, something like

```
$ git checkout -b my_new_merge ​0a5461d
$ git merge develop    # or whatever how this is called
```



---

archive/issue_comments_255733.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nIt's working !!! I'm currently recompiling / testing. It will be long.\n\nis this correct to push the changes `git push -f trac HEAD:public/18395` ? \n\nThank you very much.",
    "created_at": "2017-08-31T16:45:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255733",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:24" align="right">Comment 24</div>

It's working !!! I'm currently recompiling / testing. It will be long.

is this correct to push the changes `git push -f trac HEAD:public/18395` ? 

Thank you very much.



---

archive/issue_comments_255734.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nReplying to [@dcoudert](#comment%3A24):\n> is this correct to push the changes `git push -f trac HEAD:public/18395` ? \n\nIt is.",
    "created_at": "2017-08-31T17:23:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255734",
    "user": "https://github.com/videlec"
}
```

<div id="comment:25" align="right">Comment 25</div>

Replying to [@dcoudert](#comment%3A24):
> is this correct to push the changes `git push -f trac HEAD:public/18395` ? 

It is.



---

archive/issue_comments_255735.json:
```json
{
    "body": "Changed commit from **[f58edb0](https://github.com/sagemath/sagetrac-mirror/commit/f58edb0a8f46ea5519776256e1d246d3449a4193)** to **[88b2ba5](https://github.com/sagemath/sagetrac-mirror/commit/88b2ba5db4ab9aa2c7dae65869938fbc61ec6477)**",
    "created_at": "2017-08-31T19:09:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255735",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f58edb0](https://github.com/sagemath/sagetrac-mirror/commit/f58edb0a8f46ea5519776256e1d246d3449a4193)** to **[88b2ba5](https://github.com/sagemath/sagetrac-mirror/commit/88b2ba5db4ab9aa2c7dae65869938fbc61ec6477)**



---

archive/issue_comments_255736.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/88b2ba5db4ab9aa2c7dae65869938fbc61ec6477\">88b2ba5</a></td><td><code>trac #18395: rebase on 8.1.beta3</code></td></tr></table>\n",
    "created_at": "2017-08-31T19:09:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255736",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26" align="right">Comment 26</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/88b2ba5db4ab9aa2c7dae65869938fbc61ec6477">88b2ba5</a></td><td><code>trac #18395: rebase on 8.1.beta3</code></td></tr></table>




---

archive/issue_comments_255737.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nI followed what we said, but when I look at the branch it's really weird. Let me know if I show try again with a different set of commands. Thanks.",
    "created_at": "2017-08-31T19:16:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255737",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:27" align="right">Comment 27</div>

I followed what we said, but when I look at the branch it's really weird. Let me know if I show try again with a different set of commands. Thanks.



---

archive/issue_comments_255738.json:
```json
{
    "body": "Changed author from **Nathann Cohen** to **Nathann Cohen, David Coudert**",
    "created_at": "2017-09-04T15:00:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255738",
    "user": "https://github.com/dcoudert"
}
```

Changed author from **Nathann Cohen** to **Nathann Cohen, David Coudert**



---

archive/issue_events_243735.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2017-09-04T15:00:19Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18395#event-243735"
}
```



---

archive/issue_events_243736.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2017-09-04T15:00:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18395#event-243736"
}
```



---

archive/issue_events_243737.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2017-09-04T15:00:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18395#event-243737"
}
```



---

archive/issue_events_243738.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2017-09-04T15:00:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18395#event-243738"
}
```



---

archive/issue_comments_255739.json:
```json
{
    "body": "Changed branch from **[public/18395](https://github.com/sagemath/sagetrac-mirror/tree/public/18395)** to **[u/dcoudert/18395_spring](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/18395_spring)**",
    "created_at": "2017-09-16T11:33:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255739",
    "user": "https://github.com/dcoudert"
}
```

Changed branch from **[public/18395](https://github.com/sagemath/sagetrac-mirror/tree/public/18395)** to **[u/dcoudert/18395_spring](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/18395_spring)**



---

archive/issue_comments_255740.json:
```json
{
    "body": "Changed commit from **[88b2ba5](https://github.com/sagemath/sagetrac-mirror/commit/88b2ba5db4ab9aa2c7dae65869938fbc61ec6477)** to **[be30ed8](https://github.com/sagemath/sagetrac-mirror/commit/be30ed88e02d33442167f36c4ea8e608351e7e2c)**",
    "created_at": "2017-09-16T11:33:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255740",
    "user": "https://github.com/dcoudert"
}
```

Changed commit from **[88b2ba5](https://github.com/sagemath/sagetrac-mirror/commit/88b2ba5db4ab9aa2c7dae65869938fbc61ec6477)** to **[be30ed8](https://github.com/sagemath/sagetrac-mirror/commit/be30ed88e02d33442167f36c4ea8e608351e7e2c)**



---

archive/issue_comments_255741.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nI have created a new branched, on top of 8.1.beta5, containing all previous modifications. This way we get rid of all the mess I made with git. I hope we can now go forward with this ticket.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/be30ed88e02d33442167f36c4ea8e608351e7e2c\">be30ed8</a></td><td><code>trac #18395: fresh rebase on 8.1.beta5</code></td></tr></table>\n",
    "created_at": "2017-09-16T11:33:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255741",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:29" align="right">Comment 29</div>

I have created a new branched, on top of 8.1.beta5, containing all previous modifications. This way we get rid of all the mess I made with git. I hope we can now go forward with this ticket.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/be30ed88e02d33442167f36c4ea8e608351e7e2c">be30ed8</a></td><td><code>trac #18395: fresh rebase on 8.1.beta5</code></td></tr></table>




---

archive/issue_comments_255742.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nLGTM except some more nitpick-type things:\n\n```diff\n-    Approximation of sqrt(x^2+y^2).\n+    Approximation of `\\sqrt(x^2 + y^2)`.\n \n-    Assuming that x>y>0, it is a taylor expansion at x^2. To see how 'bad' the\n-    approximation is::\n+    Assuming that `x > y > 0`, it is a Taylor expansion at `x^2`. To see how 'bad' the\n+    approximation is:\n \n+    .. PLOT::\n+\n+        def dist(x,y):\n+            x = abs(x)\n+            y = abs(y)\n+            return max(x,y) + min(x,y)**2/(2*max(x,y))\n+        sphinx_plot(polar_plot([1, lambda x: dist(cos(x),sin(x))], (0, 2*pi)))\n```\n(Please check that the plot of the graph is correct.)",
    "created_at": "2017-09-17T14:44:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255742",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:30" align="right">Comment 30</div>

LGTM except some more nitpick-type things:

```diff
-    Approximation of sqrt(x^2+y^2).
+    Approximation of `\sqrt(x^2 + y^2)`.
 
-    Assuming that x>y>0, it is a taylor expansion at x^2. To see how 'bad' the
-    approximation is::
+    Assuming that `x > y > 0`, it is a Taylor expansion at `x^2`. To see how 'bad' the
+    approximation is:
 
+    .. PLOT::
+
+        def dist(x,y):
+            x = abs(x)
+            y = abs(y)
+            return max(x,y) + min(x,y)**2/(2*max(x,y))
+        sphinx_plot(polar_plot([1, lambda x: dist(cos(x),sin(x))], (0, 2*pi)))
```
(Please check that the plot of the graph is correct.)



---

archive/issue_comments_255743.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2017-09-17T14:44:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255743",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_255744.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ed02cfb81b50b180110c40e19d062146e1242824\">ed02cfb</a></td><td><code>trac #18395: reviewers comments on the documentation</code></td></tr></table>\n",
    "created_at": "2017-09-17T17:55:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255744",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:32" align="right">Comment 32</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ed02cfb81b50b180110c40e19d062146e1242824">ed02cfb</a></td><td><code>trac #18395: reviewers comments on the documentation</code></td></tr></table>




---

archive/issue_comments_255745.json:
```json
{
    "body": "Changed commit from **[be30ed8](https://github.com/sagemath/sagetrac-mirror/commit/be30ed88e02d33442167f36c4ea8e608351e7e2c)** to **[ed02cfb](https://github.com/sagemath/sagetrac-mirror/commit/ed02cfb81b50b180110c40e19d062146e1242824)**",
    "created_at": "2017-09-17T17:55:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255745",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[be30ed8](https://github.com/sagemath/sagetrac-mirror/commit/be30ed88e02d33442167f36c4ea8e608351e7e2c)** to **[ed02cfb](https://github.com/sagemath/sagetrac-mirror/commit/ed02cfb81b50b180110c40e19d062146e1242824)**



---

archive/issue_comments_255746.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nI did the changes in the text (better reading), but not the `PLOT` part since the method is not in the html doc.",
    "created_at": "2017-09-17T17:58:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255746",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:33" align="right">Comment 33</div>

I did the changes in the text (better reading), but not the `PLOT` part since the method is not in the html doc.



---

archive/issue_events_243739.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-09-17T18:00:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18395#event-243739"
}
```



---

archive/issue_events_243740.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-09-17T18:00:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18395#event-243740"
}
```



---

archive/issue_comments_255747.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\nOh that's right, `cdef` functions are not included. Thanks.",
    "created_at": "2017-09-17T18:00:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255747",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:34" align="right">Comment 34</div>

Oh that's right, `cdef` functions are not included. Thanks.



---

archive/issue_comments_255748.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nFails on 32-bit, e.g. http://build.sagemath.org/#/builders/36/builds/14",
    "created_at": "2017-09-19T07:02:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255748",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:35" align="right">Comment 35</div>

Fails on 32-bit, e.g. http://build.sagemath.org/#/builders/36/builds/14



---

archive/issue_events_243741.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-09-19T07:02:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18395#event-243741"
}
```



---

archive/issue_events_243742.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-09-19T07:02:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18395#event-243742"
}
```



---

archive/issue_comments_255749.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">Comment 37</div>\n\nNumerical issues. I don't know how to make the tests robust to such issues. Anyone has a proposal?",
    "created_at": "2017-09-19T13:18:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255749",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:37" align="right">Comment 37</div>

Numerical issues. I don't know how to make the tests robust to such issues. Anyone has a proposal?



---

archive/issue_comments_255750.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">Comment 38</div>\n\nIt is quite easy to fix. One should just modify the doctest to only check for the correct ammount of digits. So one could just remove some digits that change between 32 and 64 bits before the ... in the current doctest. A more elegant solution would be to use the support in sage doctest to tolerate a certain ammount of numerical noise. See the  **tolerance** section of: http://doc.sagemath.org/html/en/developer/coding_basics.html#special-markup-to-influence-doctests",
    "created_at": "2017-09-19T13:29:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255750",
    "user": "https://github.com/koffie"
}
```

<div id="comment:38" align="right">Comment 38</div>

It is quite easy to fix. One should just modify the doctest to only check for the correct ammount of digits. So one could just remove some digits that change between 32 and 64 bits before the ... in the current doctest. A more elegant solution would be to use the support in sage doctest to tolerate a certain ammount of numerical noise. See the  **tolerance** section of: http://doc.sagemath.org/html/en/developer/coding_basics.html#special-markup-to-influence-doctests



---

archive/issue_comments_255751.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">Comment 39</div>\n\nThere are also flags you can set for doctest outout specifically for 32 bit and 64 bit machines.",
    "created_at": "2017-09-19T14:33:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255751",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:39" align="right">Comment 39</div>

There are also flags you can set for doctest outout specifically for 32 bit and 64 bit machines.



---

archive/issue_comments_255752.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">Comment 40</div>\n\nAh yes, tscrims solution is better in this case, since my solution would uneccesarily sacrifice precission. How to do this is also documented at the link I send previously",
    "created_at": "2017-09-19T14:38:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255752",
    "user": "https://github.com/koffie"
}
```

<div id="comment:40" align="right">Comment 40</div>

Ah yes, tscrims solution is better in this case, since my solution would uneccesarily sacrifice precission. How to do this is also documented at the link I send previously



---

archive/issue_comments_255753.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">Comment 41</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/021188a3c9f6517baa8a8138caf4686613fa71e1\">021188a</a></td><td><code>trac #18395: specific doctests for 32 and 64 bits machines</code></td></tr></table>\n",
    "created_at": "2017-09-19T15:20:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255753",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:41" align="right">Comment 41</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/021188a3c9f6517baa8a8138caf4686613fa71e1">021188a</a></td><td><code>trac #18395: specific doctests for 32 and 64 bits machines</code></td></tr></table>




---

archive/issue_comments_255754.json:
```json
{
    "body": "Changed commit from **[ed02cfb](https://github.com/sagemath/sagetrac-mirror/commit/ed02cfb81b50b180110c40e19d062146e1242824)** to **[021188a](https://github.com/sagemath/sagetrac-mirror/commit/021188a3c9f6517baa8a8138caf4686613fa71e1)**",
    "created_at": "2017-09-19T15:20:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255754",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ed02cfb](https://github.com/sagemath/sagetrac-mirror/commit/ed02cfb81b50b180110c40e19d062146e1242824)** to **[021188a](https://github.com/sagemath/sagetrac-mirror/commit/021188a3c9f6517baa8a8138caf4686613fa71e1)**



---

archive/issue_comments_255755.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">Comment 42</div>\n\nI used the values from http://build.sagemath.org/#/builders/36/builds/14 for 32-bits machine, since I don't have access to such CPU. I hope it's ok.",
    "created_at": "2017-09-19T15:22:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255755",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:42" align="right">Comment 42</div>

I used the values from http://build.sagemath.org/#/builders/36/builds/14 for 32-bits machine, since I don't have access to such CPU. I hope it's ok.



---

archive/issue_events_243743.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2017-09-19T15:22:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18395#event-243743"
}
```



---

archive/issue_events_243744.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2017-09-19T15:22:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18395#event-243744"
}
```



---

archive/issue_comments_255756.json:
```json
{
    "body": "Changed commit from **[021188a](https://github.com/sagemath/sagetrac-mirror/commit/021188a3c9f6517baa8a8138caf4686613fa71e1)** to **[dc5b80a](https://github.com/sagemath/sagetrac-mirror/commit/dc5b80a6317cd0d17d48b7e89313e4abb6a48dfe)**",
    "created_at": "2017-09-30T12:29:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255756",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[021188a](https://github.com/sagemath/sagetrac-mirror/commit/021188a3c9f6517baa8a8138caf4686613fa71e1)** to **[dc5b80a](https://github.com/sagemath/sagetrac-mirror/commit/dc5b80a6317cd0d17d48b7e89313e4abb6a48dfe)**



---

archive/issue_comments_255757.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">Comment 44</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/97684d69a98113c840d8f8fde20af516c41cbba6\">97684d6</a></td><td><code>trac #18395: Merged with 8.1.beta6</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dc5b80a6317cd0d17d48b7e89313e4abb6a48dfe\">dc5b80a</a></td><td><code>trac #18395: python3 compatibility</code></td></tr></table>\n",
    "created_at": "2017-09-30T12:29:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255757",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:44" align="right">Comment 44</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/97684d69a98113c840d8f8fde20af516c41cbba6">97684d6</a></td><td><code>trac #18395: Merged with 8.1.beta6</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dc5b80a6317cd0d17d48b7e89313e4abb6a48dfe">dc5b80a</a></td><td><code>trac #18395: python3 compatibility</code></td></tr></table>




---

archive/issue_comments_255758.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">Comment 45</div>\n\nThe patchbot reports incompatibility with python 3. I fixed that.\n\nThe patchbot reports an issue with doctest continuation ([here](https://patchbot.sagemath.org/log/18395/Ubuntu/14.04/i686/3.13.0-95-generic/arando/2017-09-29%2019:57:07?plugin=doctest_continuation)) but I don't know what to do with it. Any help is more than welcome.",
    "created_at": "2017-09-30T12:32:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255758",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:45" align="right">Comment 45</div>

The patchbot reports incompatibility with python 3. I fixed that.

The patchbot reports an issue with doctest continuation ([here](https://patchbot.sagemath.org/log/18395/Ubuntu/14.04/i686/3.13.0-95-generic/arando/2017-09-29%2019:57:07?plugin=doctest_continuation)) but I don't know what to do with it. Any help is more than welcome.



---

archive/issue_comments_255759.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">Comment 46</div>\n\nIt means you should replace the `...` by `....:`  as explained on http://doc.sagemath.org/html/en/developer/coding_basics.html#writing-testable-examples under the heading multiline doctests.",
    "created_at": "2017-09-30T13:12:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255759",
    "user": "https://github.com/koffie"
}
```

<div id="comment:46" align="right">Comment 46</div>

It means you should replace the `...` by `....:`  as explained on http://doc.sagemath.org/html/en/developer/coding_basics.html#writing-testable-examples under the heading multiline doctests.



---

archive/issue_comments_255760.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">Comment 47</div>\n\nI'm using `...` for the output, as for other doctests in the same file for which the patchbot is not complaining, and as explained on [http://doc.sagemath.org/html/en/developer/coding_basics.html#special-markup-to-influence-doctests](http://doc.sagemath.org/html/en/developer/coding_basics.html#special-markup-to-influence-doctests). It's not for the code part.\n\nI suspect a conflict with the `# 32-bit` and `# 64-bit` tags.",
    "created_at": "2017-09-30T13:31:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255760",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:47" align="right">Comment 47</div>

I'm using `...` for the output, as for other doctests in the same file for which the patchbot is not complaining, and as explained on [http://doc.sagemath.org/html/en/developer/coding_basics.html#special-markup-to-influence-doctests](http://doc.sagemath.org/html/en/developer/coding_basics.html#special-markup-to-influence-doctests). It's not for the code part.

I suspect a conflict with the `# 32-bit` and `# 64-bit` tags.



---

archive/issue_comments_255761.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">Comment 48</div>\n\nPatchbot plugins can be a little dumb at times. However, it does look like there still is some numerical issues.",
    "created_at": "2017-09-30T15:39:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255761",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:48" align="right">Comment 48</div>

Patchbot plugins can be a little dumb at times. However, it does look like there still is some numerical issues.



---

archive/issue_comments_255762.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">Comment 49</div>\n\nI don't know what to do. All tests pass on my 64-bit OSX computer, but since the method uses random initial positions, the result may change from a computer to another.",
    "created_at": "2017-09-30T16:55:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255762",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:49" align="right">Comment 49</div>

I don't know what to do. All tests pass on my 64-bit OSX computer, but since the method uses random initial positions, the result may change from a computer to another.



---

archive/issue_comments_255763.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">Comment 50</div>\n\nTwo options: Raise the tolerance by removing sig-figs from the output or mark them with a `# rel tol` or `# abs tol`. I would suggest the second (unless the doctest framework doesn't like it) as it is more robust (i.e., a difference of `0.01` could change the first decimal place).",
    "created_at": "2017-09-30T16:59:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255763",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:50" align="right">Comment 50</div>

Two options: Raise the tolerance by removing sig-figs from the output or mark them with a `# rel tol` or `# abs tol`. I would suggest the second (unless the doctest framework doesn't like it) as it is more robust (i.e., a difference of `0.01` could change the first decimal place).



---

archive/issue_comments_255764.json:
```json
{
    "body": "Changed commit from **[dc5b80a](https://github.com/sagemath/sagetrac-mirror/commit/dc5b80a6317cd0d17d48b7e89313e4abb6a48dfe)** to **[caf4da6](https://github.com/sagemath/sagetrac-mirror/commit/caf4da68f040bea3c0fed2bcb04cd5a3ea84994f)**",
    "created_at": "2017-09-30T17:17:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255764",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[dc5b80a](https://github.com/sagemath/sagetrac-mirror/commit/dc5b80a6317cd0d17d48b7e89313e4abb6a48dfe)** to **[caf4da6](https://github.com/sagemath/sagetrac-mirror/commit/caf4da68f040bea3c0fed2bcb04cd5a3ea84994f)**



---

archive/issue_comments_255765.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">Comment 51</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/caf4da68f040bea3c0fed2bcb04cd5a3ea84994f\">caf4da6</a></td><td><code>trac #18395: try abs tol 0.03 for problematic doctests</code></td></tr></table>\n",
    "created_at": "2017-09-30T17:17:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255765",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:51" align="right">Comment 51</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/caf4da68f040bea3c0fed2bcb04cd5a3ea84994f">caf4da6</a></td><td><code>trac #18395: try abs tol 0.03 for problematic doctests</code></td></tr></table>




---

archive/issue_comments_255766.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">Comment 52</div>\n\nLet's see if it's better this way.",
    "created_at": "2017-09-30T17:18:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255766",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:52" align="right">Comment 52</div>

Let's see if it's better this way.



---

archive/issue_comments_255767.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">Comment 53</div>\n\nHmm...that doesn't seem to work. Probably due to a mixing of the ellipses and the rel tol. I guess we just have to lower the sigfigs in the output.",
    "created_at": "2017-09-30T18:39:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255767",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:53" align="right">Comment 53</div>

Hmm...that doesn't seem to work. Probably due to a mixing of the ellipses and the rel tol. I guess we just have to lower the sigfigs in the output.



---

archive/issue_comments_255768.json:
```json
{
    "body": "Changed commit from **[caf4da6](https://github.com/sagemath/sagetrac-mirror/commit/caf4da68f040bea3c0fed2bcb04cd5a3ea84994f)** to **[8b5c9b1](https://github.com/sagemath/sagetrac-mirror/commit/8b5c9b17bd4c7d1fdf3d6c6e30d43cbced213e79)**",
    "created_at": "2017-10-01T08:59:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255768",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[caf4da6](https://github.com/sagemath/sagetrac-mirror/commit/caf4da68f040bea3c0fed2bcb04cd5a3ea84994f)** to **[8b5c9b1](https://github.com/sagemath/sagetrac-mirror/commit/8b5c9b17bd4c7d1fdf3d6c6e30d43cbced213e79)**



---

archive/issue_comments_255769.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">Comment 54</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8b5c9b17bd4c7d1fdf3d6c6e30d43cbced213e79\">8b5c9b1</a></td><td><code>trac #18395: correct use of rel tol in doctest</code></td></tr></table>\n",
    "created_at": "2017-10-01T08:59:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255769",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:54" align="right">Comment 54</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8b5c9b17bd4c7d1fdf3d6c6e30d43cbced213e79">8b5c9b1</a></td><td><code>trac #18395: correct use of rel tol in doctest</code></td></tr></table>




---

archive/issue_comments_255770.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">Comment 55</div>\n\nI was not using correctly `rel tol`. Also, I have simplified the output.",
    "created_at": "2017-10-01T09:01:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255770",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:55" align="right">Comment 55</div>

I was not using correctly `rel tol`. Also, I have simplified the output.



---

archive/issue_comments_255771.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">Comment 56</div>\n\nSince you have changed the output format, you should also add a check that the length is 902. Once done, you can set a positive review on my behalf.",
    "created_at": "2017-10-01T15:11:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255771",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:56" align="right">Comment 56</div>

Since you have changed the output format, you should also add a check that the length is 902. Once done, you can set a positive review on my behalf.



---

archive/issue_comments_255772.json:
```json
{
    "body": "Changed commit from **[8b5c9b1](https://github.com/sagemath/sagetrac-mirror/commit/8b5c9b17bd4c7d1fdf3d6c6e30d43cbced213e79)** to **[a1c7286](https://github.com/sagemath/sagetrac-mirror/commit/a1c728647ff1ee02634691ff2600a4c44565fbd6)**",
    "created_at": "2017-10-01T18:38:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255772",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[8b5c9b1](https://github.com/sagemath/sagetrac-mirror/commit/8b5c9b17bd4c7d1fdf3d6c6e30d43cbced213e79)** to **[a1c7286](https://github.com/sagemath/sagetrac-mirror/commit/a1c728647ff1ee02634691ff2600a4c44565fbd6)**



---

archive/issue_comments_255773.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">Comment 57</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a1c728647ff1ee02634691ff2600a4c44565fbd6\">a1c7286</a></td><td><code>trac #18395: test that we have as many vertices as computed positions</code></td></tr></table>\n",
    "created_at": "2017-10-01T18:38:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255773",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:57" align="right">Comment 57</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a1c728647ff1ee02634691ff2600a4c44565fbd6">a1c7286</a></td><td><code>trac #18395: test that we have as many vertices as computed positions</code></td></tr></table>




---

archive/issue_comments_255774.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">Comment 58</div>\n\n902 is not the length but the largest index of a vertex (`pos` is a dictionary). \nThe graph has 50 vertices. I added a test to check that `pos` has 50 entries.\n\nI set the ticket to positive review as you proposed.\n\nThank you.",
    "created_at": "2017-10-01T18:41:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255774",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:58" align="right">Comment 58</div>

902 is not the length but the largest index of a vertex (`pos` is a dictionary). 
The graph has 50 vertices. I added a test to check that `pos` has 50 entries.

I set the ticket to positive review as you proposed.

Thank you.



---

archive/issue_events_243745.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2017-10-01T18:41:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18395#event-243745"
}
```



---

archive/issue_events_243746.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2017-10-01T18:41:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18395#event-243746"
}
```



---

archive/issue_comments_255775.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">Comment 59</div>\n\n\n```\nFile \"src/sage/graphs/generic_graph_pyx.pyx\", line 113, in sage.graphs.generic_graph_pyx.spring_layout_fast\nFailed example:\n    pos[902] # abs tol 0.03\nExpected:\n    [-0.48..., -0.10...]\nGot:\n    [-0.48914249502701945, -0.13939583925593196]\nTolerance exceeded in 1 of 2:\n    -0.10 vs -0.13939583925593196, tolerance 4e-02 > 3e-02\n**********************************************************************\n1 item had failures:\n   1 of  15 in sage.graphs.generic_graph_pyx.spring_layout_fast\n    [94 tests, 1 failure, 2.32 s]\n```",
    "created_at": "2017-10-04T06:49:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255775",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:59" align="right">Comment 59</div>


```
File "src/sage/graphs/generic_graph_pyx.pyx", line 113, in sage.graphs.generic_graph_pyx.spring_layout_fast
Failed example:
    pos[902] # abs tol 0.03
Expected:
    [-0.48..., -0.10...]
Got:
    [-0.48914249502701945, -0.13939583925593196]
Tolerance exceeded in 1 of 2:
    -0.10 vs -0.13939583925593196, tolerance 4e-02 > 3e-02
**********************************************************************
1 item had failures:
   1 of  15 in sage.graphs.generic_graph_pyx.spring_layout_fast
    [94 tests, 1 failure, 2.32 s]
```



---

archive/issue_events_243747.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-10-04T06:49:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18395#event-243747"
}
```



---

archive/issue_events_243748.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-10-04T06:49:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18395#event-243748"
}
```



---

archive/issue_comments_255776.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">Comment 60</div>\n\nI can either increase the tolerance to e.g. 0.1, or remove this test, but I don't know what would be better.",
    "created_at": "2017-10-05T14:57:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255776",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:60" align="right">Comment 60</div>

I can either increase the tolerance to e.g. 0.1, or remove this test, but I don't know what would be better.



---

archive/issue_comments_255777.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">Comment 61</div>\n\nIncrease the tolerance (or choose another output that is slightly higher if you think the current is on the low side).",
    "created_at": "2017-10-05T15:23:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255777",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:61" align="right">Comment 61</div>

Increase the tolerance (or choose another output that is slightly higher if you think the current is on the low side).



---

archive/issue_comments_255778.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">Comment 62</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa1d5b028403525928fb5426217384dd047f902f\">aa1d5b0</a></td><td><code>trac #18395: Merged with 8.1.beta7</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/09a8953cbcb10a64c4a555fe54017be6db75ec21\">09a8953</a></td><td><code>trac #18395: increase relative tolerance in doctests</code></td></tr></table>\n",
    "created_at": "2017-10-05T20:59:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255778",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:62" align="right">Comment 62</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa1d5b028403525928fb5426217384dd047f902f">aa1d5b0</a></td><td><code>trac #18395: Merged with 8.1.beta7</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/09a8953cbcb10a64c4a555fe54017be6db75ec21">09a8953</a></td><td><code>trac #18395: increase relative tolerance in doctests</code></td></tr></table>




---

archive/issue_comments_255779.json:
```json
{
    "body": "Changed commit from **[a1c7286](https://github.com/sagemath/sagetrac-mirror/commit/a1c728647ff1ee02634691ff2600a4c44565fbd6)** to **[09a8953](https://github.com/sagemath/sagetrac-mirror/commit/09a8953cbcb10a64c4a555fe54017be6db75ec21)**",
    "created_at": "2017-10-05T20:59:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255779",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a1c7286](https://github.com/sagemath/sagetrac-mirror/commit/a1c728647ff1ee02634691ff2600a4c44565fbd6)** to **[09a8953](https://github.com/sagemath/sagetrac-mirror/commit/09a8953cbcb10a64c4a555fe54017be6db75ec21)**



---

archive/issue_comments_255780.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">Comment 63</div>\n\nI have changed the tolerance to 0.1. It should be more robust to the various cpus / systems.",
    "created_at": "2017-10-05T21:00:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255780",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:63" align="right">Comment 63</div>

I have changed the tolerance to 0.1. It should be more robust to the various cpus / systems.



---

archive/issue_events_243749.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2017-10-05T21:03:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18395#event-243749"
}
```



---

archive/issue_events_243750.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2017-10-05T21:03:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18395#event-243750"
}
```



---

archive/issue_events_243751.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-10-05T21:05:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18395#event-243751"
}
```



---

archive/issue_events_243752.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-10-05T21:05:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18395#event-243752"
}
```



---

archive/issue_comments_255781.json:
```json
{
    "body": "Changed branch from **[u/dcoudert/18395_spring](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/18395_spring)** to **[09a8953](https://github.com/sagemath/sagetrac-mirror/commit/09a8953cbcb10a64c4a555fe54017be6db75ec21)**",
    "created_at": "2017-10-15T09:22:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18395#issuecomment-255781",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/dcoudert/18395_spring](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/18395_spring)** to **[09a8953](https://github.com/sagemath/sagetrac-mirror/commit/09a8953cbcb10a64c4a555fe54017be6db75ec21)**



---

archive/issue_events_243753.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-10-15T09:22:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18395#event-243753"
}
```



---

archive/issue_events_243754.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "9659a399ebc0e3186dccbff19cc9f2a05de84ffb",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-10-15T09:22:26Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/18395",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18395#event-243754"
}
```
