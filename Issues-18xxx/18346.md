# Issue 18346: Easier handling of vertex labels in graph backends

archive/issues_018109.json:
```json
{
    "assignees": [],
    "body": "This ticket addresses the following problem:\n\n    In the `CGraph` backends, three `cdef` functions are used all the time to\n    deal with vertex labels, i.e. `get_vertex`, `vertex_label`,\n`check_vertex`. They are always called with the same arguments, which are\n    all attributes of the backend that calls it. They should be method, so that\n    the arguments are not needlessly repeated.\n\nWhat this branch does:\n\n- The `CGraph` backends (i.e. `SparseBackend`, `DenseBackend` and\n  `StaticSparseGraph`) and `GenericGraphBackend` are turned into cdef classes.\n\n- The three functions `get_vertex`, `vertex_label`, `check_vertex` become\n  methods of `CGraphBackend`\n\n- It adds a method `CGraphBackend.c_graph()` to get the two cdef attributes\n  `_cg` and `_cg_rev`. Turns out that some code in Sage accesses directly\n  `G._backend._cg`.\n\nThis should have been sufficient, but there were (unexpected) consequences:\n\n- There is no automatic pickling for cdef classes (as instrospection does not\n  work), and the doctests do not pass if that does not work. Consequently, I\n  implemented a unique `__reduce__` function in `GenericGraphBackend` which\n  handles the pickling for all backends (sparse/dense/static/networkx). It also\n  removes some duplicated code as a result.\n\nThis makes the code a bit clearer (and it is needed). Also, moving this pickling\nfunction above is good for the future, for there will be many modifications in\nthe future to the data structures in Sage: I plan to merge `CGraph` and\n`GenericBackend` into only one class (but that's for later).\n\nNathann\n\nP.S.: The branch is built to be reviewed commit by commit. In particular, the renamed file appears as trivial when looking at the first commit, but as a lot of + and - when looking at the branch's diff\n\nDepends on #18317\n\nCC:  @sagetrac-borassi @dcoudert @darijgr @videlec\n\nComponent: **graph theory**\n\nAuthor: **Nathann Cohen**\n\nBranch/Commit: **[`6ffbb05`](https://github.com/sagemath/sagetrac-mirror/commit/6ffbb05999f70fa2535f28aca08b203036664491)**\n\nReviewer: **Vincent Delecroix**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/18346_\n\n",
    "closed_at": "2015-05-04T19:04:37Z",
    "created_at": "2015-05-01T08:26:50Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Easier handling of vertex labels in graph backends",
    "type": "issue",
    "updated_at": "2015-05-04T19:04:37Z",
    "url": "https://github.com/sagemath/sage/issues/18346",
    "user": "https://github.com/nathanncohen"
}
```
This ticket addresses the following problem:

    In the `CGraph` backends, three `cdef` functions are used all the time to
    deal with vertex labels, i.e. `get_vertex`, `vertex_label`,
`check_vertex`. They are always called with the same arguments, which are
    all attributes of the backend that calls it. They should be method, so that
    the arguments are not needlessly repeated.

What this branch does:

- The `CGraph` backends (i.e. `SparseBackend`, `DenseBackend` and
  `StaticSparseGraph`) and `GenericGraphBackend` are turned into cdef classes.

- The three functions `get_vertex`, `vertex_label`, `check_vertex` become
  methods of `CGraphBackend`

- It adds a method `CGraphBackend.c_graph()` to get the two cdef attributes
  `_cg` and `_cg_rev`. Turns out that some code in Sage accesses directly
  `G._backend._cg`.

This should have been sufficient, but there were (unexpected) consequences:

- There is no automatic pickling for cdef classes (as instrospection does not
  work), and the doctests do not pass if that does not work. Consequently, I
  implemented a unique `__reduce__` function in `GenericGraphBackend` which
  handles the pickling for all backends (sparse/dense/static/networkx). It also
  removes some duplicated code as a result.

This makes the code a bit clearer (and it is needed). Also, moving this pickling
function above is good for the future, for there will be many modifications in
the future to the data structures in Sage: I plan to merge `CGraph` and
`GenericBackend` into only one class (but that's for later).

Nathann

P.S.: The branch is built to be reviewed commit by commit. In particular, the renamed file appears as trivial when looking at the first commit, but as a lot of + and - when looking at the branch's diff

Depends on #18317

CC:  @sagetrac-borassi @dcoudert @darijgr @videlec

Component: **graph theory**

Author: **Nathann Cohen**

Branch/Commit: **[`6ffbb05`](https://github.com/sagemath/sagetrac-mirror/commit/6ffbb05999f70fa2535f28aca08b203036664491)**

Reviewer: **Vincent Delecroix**

_Issue created by migration from https://trac.sagemath.org/ticket/18346_





---

archive/issue_events_258397.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-05-01T08:26:50Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "milestone_number": null,
    "milestone_title": "sage-6.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18346#event-258397"
}
```



---

archive/issue_events_258398.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-05-01T08:26:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18346#event-258398"
}
```



---

archive/issue_events_258399.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-05-01T08:26:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18346#event-258399"
}
```



---

archive/issue_events_258400.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-05-01T08:28:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18346#event-258400"
}
```



---

archive/issue_comments_252196.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9e60492f145e2f1a80fbe9df41b48330ab01e510\"><code>9e60492</code></a></td><td><code>trac #18346: Make graph_backends.py into a .pyx</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/da8479ef8de84ce4d80b825138032da19c18f72b\"><code>da8479e</code></a></td><td><code>trac #18346: Move and indent three functions (nothing else is changed)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5b765e1c0888b0661b2ae01de352d013c073efb3\"><code>5b765e1</code></a></td><td><code>trac #18346: Rename calls to [get_vertex, vertex_label, check_vertex] into self.method calls</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2704dda485adcd6f4e7a6a951b1380dca3ae768b\"><code>2704dda</code></a></td><td><code>trac #18346: Turn the backends into cdef classes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e11d4d8c3d91923e770fdba9310d832415236b1e\"><code>e11d4d8</code></a></td><td><code>trac #18346: New pickling function for GraphBackend</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bd8d988e0692b0089770f231e9c36e526bb077ad\"><code>bd8d988</code></a></td><td><code>trac #18346: Remove old `__reduce__` functions and move useful doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/30eb6263d2f532d602a5479057542dee640e1dbd\"><code>30eb626</code></a></td><td><code>trac #18346: Some python code accesses G._backend._cg directly</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/25765bb3c4cb4c5f49e5078d7e6e3968c62310e1\"><code>25765bb</code></a></td><td><code>trac #18346: A 'cdef class' is a 'type', not a 'class'</code></td></tr></table>\n",
    "created_at": "2015-05-01T08:28:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18346#issuecomment-252196",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9e60492f145e2f1a80fbe9df41b48330ab01e510"><code>9e60492</code></a></td><td><code>trac #18346: Make graph_backends.py into a .pyx</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/da8479ef8de84ce4d80b825138032da19c18f72b"><code>da8479e</code></a></td><td><code>trac #18346: Move and indent three functions (nothing else is changed)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5b765e1c0888b0661b2ae01de352d013c073efb3"><code>5b765e1</code></a></td><td><code>trac #18346: Rename calls to [get_vertex, vertex_label, check_vertex] into self.method calls</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2704dda485adcd6f4e7a6a951b1380dca3ae768b"><code>2704dda</code></a></td><td><code>trac #18346: Turn the backends into cdef classes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e11d4d8c3d91923e770fdba9310d832415236b1e"><code>e11d4d8</code></a></td><td><code>trac #18346: New pickling function for GraphBackend</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bd8d988e0692b0089770f231e9c36e526bb077ad"><code>bd8d988</code></a></td><td><code>trac #18346: Remove old `__reduce__` functions and move useful doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/30eb6263d2f532d602a5479057542dee640e1dbd"><code>30eb626</code></a></td><td><code>trac #18346: Some python code accesses G._backend._cg directly</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/25765bb3c4cb4c5f49e5078d7e6e3968c62310e1"><code>25765bb</code></a></td><td><code>trac #18346: A 'cdef class' is a 'type', not a 'class'</code></td></tr></table>




---

archive/issue_comments_252197.json:
```json
{
    "body": "Branch: **[public/18346](https://github.com/sagemath/sagetrac-mirror/tree/public/18346)**",
    "created_at": "2015-05-01T08:28:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18346#issuecomment-252197",
    "user": "https://github.com/nathanncohen"
}
```

Branch: **[public/18346](https://github.com/sagemath/sagetrac-mirror/tree/public/18346)**



---

archive/issue_comments_252198.json:
```json
{
    "body": "Commit: **[`25765bb`](https://github.com/sagemath/sagetrac-mirror/commit/25765bb3c4cb4c5f49e5078d7e6e3968c62310e1)**",
    "created_at": "2015-05-01T08:28:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18346#issuecomment-252198",
    "user": "https://github.com/nathanncohen"
}
```

Commit: **[`25765bb`](https://github.com/sagemath/sagetrac-mirror/commit/25765bb3c4cb4c5f49e5078d7e6e3968c62310e1)**



---

archive/issue_events_258401.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-05-01T08:28:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18346#event-258401"
}
```



---

archive/issue_comments_252199.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -32,3 +32,5 @@\n `GenericBackend` into only one class (but that's for later).\n \n Nathann\n+\n+P.S.: The branch is built to be reviewed commit by commit. In particular, the renamed file appears as trivial when looking at the first commit, but as a lot of + and - when looking at the branch's diff\n``````\n",
    "created_at": "2015-05-01T08:32:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18346#issuecomment-252199",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -32,3 +32,5 @@
 `GenericBackend` into only one class (but that's for later).
 
 Nathann
+
+P.S.: The branch is built to be reviewed commit by commit. In particular, the renamed file appears as trivial when looking at the first commit, but as a lot of + and - when looking at the branch's diff
``````




---

archive/issue_comments_252200.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nHello,\n\n1. Would it be bad to access directly the `._cg` or `._cg_rev` attributes? (ok it seems to be for python code)\n\n2. Is there a description somewhere of the attributes `vertex_ints` and `vertex_labels`?\n\n3. In a cython file, there is no need to declare `cdef object x` or `object x`, just do `x`.\n\nVincent",
    "created_at": "2015-05-01T09:53:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18346#issuecomment-252200",
    "user": "https://github.com/videlec"
}
```

<div id="comment:3" align="right">comment:3</div>

Hello,

1. Would it be bad to access directly the `._cg` or `._cg_rev` attributes? (ok it seems to be for python code)

2. Is there a description somewhere of the attributes `vertex_ints` and `vertex_labels`?

3. In a cython file, there is no need to declare `cdef object x` or `object x`, just do `x`.

Vincent



---

archive/issue_events_258402.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-05-01T09:53:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18346#event-258402"
}
```



---

archive/issue_events_258403.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-05-01T09:53:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18346#event-258403"
}
```



---

archive/issue_comments_252201.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nHello,\n\n> 1. Would it be bad to access directly the `._cg` or `._cg_rev` attributes? (ok it seems to be for python code)\n\nI do not think that it is if you do not modify them. Some functions (like isomorphism test) use it directly. The guy who wrote the code that does that knew what he was doing, unfortunately he is the only one `:-P`\n\n> 2. Is there a description somewhere of the attributes `vertex_ints` and `vertex_labels`?\n\nNot that I know. I am not sure that I remember exactly what they do either. What I remember is that not all vertices have an associated label, so that you don't spend your time playing with a dictionary when your graph is defined over integers.\n\nThis being said, I plan to rewrite all this (and of course the new code will have a proper documentation). I spent several hours thinking of how this should all be done, and my hardest constraint was that the changes should be \"reviewable\". Which is not very easily achieved when you plan to merge two classes together `:-P`\n\nThe 'first step' was #18185, the second is this one (or #18317, but that's only doc). Then I will turn NetworkX backend into a CGraph, and deprecate a lot of things in there. And then... Merge the classes `O_O;;`\n\n> 3. In a cython file, there is no need to declare `cdef object x` or `object x`, just do `x`.\n\nOkay. Well, I don't think I did anything like that but I may have met such a line somewhere. Really, this does not matter for the moment: this code will be heavily rewritten.\n\nNathann",
    "created_at": "2015-05-01T10:05:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18346#issuecomment-252201",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:5" align="right">comment:5</div>

Hello,

> 1. Would it be bad to access directly the `._cg` or `._cg_rev` attributes? (ok it seems to be for python code)

I do not think that it is if you do not modify them. Some functions (like isomorphism test) use it directly. The guy who wrote the code that does that knew what he was doing, unfortunately he is the only one `:-P`

> 2. Is there a description somewhere of the attributes `vertex_ints` and `vertex_labels`?

Not that I know. I am not sure that I remember exactly what they do either. What I remember is that not all vertices have an associated label, so that you don't spend your time playing with a dictionary when your graph is defined over integers.

This being said, I plan to rewrite all this (and of course the new code will have a proper documentation). I spent several hours thinking of how this should all be done, and my hardest constraint was that the changes should be "reviewable". Which is not very easily achieved when you plan to merge two classes together `:-P`

The 'first step' was #18185, the second is this one (or #18317, but that's only doc). Then I will turn NetworkX backend into a CGraph, and deprecate a lot of things in there. And then... Merge the classes `O_O;;`

> 3. In a cython file, there is no need to declare `cdef object x` or `object x`, just do `x`.

Okay. Well, I don't think I did anything like that but I may have met such a line somewhere. Really, this does not matter for the moment: this code will be heavily rewritten.

Nathann



---

archive/issue_events_258404.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-05-01T10:05:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18346#event-258404"
}
```



---

archive/issue_events_258405.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-05-01T10:05:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18346#event-258405"
}
```



---

archive/issue_comments_252202.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nHello,\n\nReplying to [@nathanncohen](#comment%3A5):\n> > 2. Is there a description somewhere of the attributes `vertex_ints` and `vertex_labels`?\n\n> \n> Not that I know. I am not sure that I remember exactly what they do either. What I remember is that not all vertices have an associated label, so that you don't spend your time playing with a dictionary when your graph is defined over integers.\n\nActually you do since `get_vertex` or `vertex_label` are intensively used everywhere. And those methods do check if their argument belongs to some dictionary as a first step! But if I understand well, the aim of the ticket is precisely **not** to upgrade these two methods but just to move them.\n \n> > 3. In a cython file, there is no need to declare `cdef object x` or `object x`, just do `x`.\n\n> \n> Okay. Well, I don't think I did anything like that but I may have met such a line somewhere. Really, this does not matter for the moment: this code will be heavily rewritten.\n\nHum\n\n```diff\n+ cdef int get_vertex(self, object u) except ? -2\n+ cdef object vertex_label(self, int u_int)\n```\nthis would better be\n\n```diff\ncdef int get_vertex(self, u) except ? -2\ncdef vertex_label(self, int u_int)\n```\n\nVincent",
    "created_at": "2015-05-02T10:20:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18346#issuecomment-252202",
    "user": "https://github.com/videlec"
}
```

<div id="comment:6" align="right">comment:6</div>

Hello,

Replying to [@nathanncohen](#comment%3A5):
> > 2. Is there a description somewhere of the attributes `vertex_ints` and `vertex_labels`?

> 
> Not that I know. I am not sure that I remember exactly what they do either. What I remember is that not all vertices have an associated label, so that you don't spend your time playing with a dictionary when your graph is defined over integers.

Actually you do since `get_vertex` or `vertex_label` are intensively used everywhere. And those methods do check if their argument belongs to some dictionary as a first step! But if I understand well, the aim of the ticket is precisely **not** to upgrade these two methods but just to move them.
 
> > 3. In a cython file, there is no need to declare `cdef object x` or `object x`, just do `x`.

> 
> Okay. Well, I don't think I did anything like that but I may have met such a line somewhere. Really, this does not matter for the moment: this code will be heavily rewritten.

Hum

```diff
+ cdef int get_vertex(self, object u) except ? -2
+ cdef object vertex_label(self, int u_int)
```
this would better be

```diff
cdef int get_vertex(self, u) except ? -2
cdef vertex_label(self, int u_int)
```

Vincent



---

archive/issue_comments_252203.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c626eec1f23ab4f1529efe1efa3f738b30589b74\"><code>c626eec</code></a></td><td><code>trac #18346: Without useless 'objects'</code></td></tr></table>\n",
    "created_at": "2015-05-02T19:11:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18346#issuecomment-252203",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c626eec1f23ab4f1529efe1efa3f738b30589b74"><code>c626eec</code></a></td><td><code>trac #18346: Without useless 'objects'</code></td></tr></table>




---

archive/issue_comments_252204.json:
```json
{
    "body": "Changed commit from **[`25765bb`](https://github.com/sagemath/sagetrac-mirror/commit/25765bb3c4cb4c5f49e5078d7e6e3968c62310e1)** to **[`c626eec`](https://github.com/sagemath/sagetrac-mirror/commit/c626eec1f23ab4f1529efe1efa3f738b30589b74)**",
    "created_at": "2015-05-02T19:11:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18346#issuecomment-252204",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`25765bb`](https://github.com/sagemath/sagetrac-mirror/commit/25765bb3c4cb4c5f49e5078d7e6e3968c62310e1)** to **[`c626eec`](https://github.com/sagemath/sagetrac-mirror/commit/c626eec1f23ab4f1529efe1efa3f738b30589b74)**



---

archive/issue_comments_252205.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nYo !\n\n> Actually you do since `get_vertex` or `vertex_label` are intensively used everywhere. And those methods do check if their argument belongs to some dictionary as a first step!\n\nOh really? But perhaps the dictionary does *not* contain the integers then? Anyway, does not matter much.\n\n> But if I understand well, the aim of the ticket is precisely **not** to upgrade these two methods but just to move them.\n\nThe aim of this ticket is to merge CGraph and Backend together. All that \"backend\" does is forward everything to CGraph. But I certainly cannot do all of this at once, it would be impossible to review. Plus because of the problems I met when writing this branch, I know that I should be wary of the isomorphism test code which works at a lower level than I expected.\n\n> Hum\n> \n> ```diff\n> + cdef int get_vertex(self, object u) except ? -2\n> + cdef object vertex_label(self, int u_int)\n> ```\n\nFixed. Actually, those are the lines that I moved from functions to methods. You will find (almost) the same lines with a '-' in front of them, a couple of lines above.\n\nNathann",
    "created_at": "2015-05-02T19:17:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18346#issuecomment-252205",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:8" align="right">comment:8</div>

Yo !

> Actually you do since `get_vertex` or `vertex_label` are intensively used everywhere. And those methods do check if their argument belongs to some dictionary as a first step!

Oh really? But perhaps the dictionary does *not* contain the integers then? Anyway, does not matter much.

> But if I understand well, the aim of the ticket is precisely **not** to upgrade these two methods but just to move them.

The aim of this ticket is to merge CGraph and Backend together. All that "backend" does is forward everything to CGraph. But I certainly cannot do all of this at once, it would be impossible to review. Plus because of the problems I met when writing this branch, I know that I should be wary of the isomorphism test code which works at a lower level than I expected.

> Hum
> 
> ```diff
> + cdef int get_vertex(self, object u) except ? -2
> + cdef object vertex_label(self, int u_int)
> ```

Fixed. Actually, those are the lines that I moved from functions to methods. You will find (almost) the same lines with a '-' in front of them, a couple of lines above.

Nathann



---

archive/issue_comments_252206.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@nathanncohen](#comment%3A8):\n> The aim of this ticket is to merge CGraph and Backend together. All that \"backend\" does is forward everything to CGraph. But I certainly cannot do all of this at once, it would be impossible to review. Plus because of the problems I met when writing this branch, I know that I should be wary of the isomorphism test code which works at a lower level than I expected.\n\nWill you keep these `get_vertex` and `vertex_label` forever? If you do so I will had a commit to optimize them. They are basically used everywhere.\n\nVincent",
    "created_at": "2015-05-02T19:21:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18346#issuecomment-252206",
    "user": "https://github.com/videlec"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@nathanncohen](#comment%3A8):
> The aim of this ticket is to merge CGraph and Backend together. All that "backend" does is forward everything to CGraph. But I certainly cannot do all of this at once, it would be impossible to review. Plus because of the problems I met when writing this branch, I know that I should be wary of the isomorphism test code which works at a lower level than I expected.

Will you keep these `get_vertex` and `vertex_label` forever? If you do so I will had a commit to optimize them. They are basically used everywhere.

Vincent



---

archive/issue_comments_252207.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\n> Will you keep these `get_vertex` and `vertex_label` forever? If you do so I will had a commit to optimize them. They are basically used everywhere.\n\nI have no idea for the moment. If there is something you want to change, it really cannot hurt.\n\nNathann",
    "created_at": "2015-05-02T19:25:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18346#issuecomment-252207",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:10" align="right">comment:10</div>

> Will you keep these `get_vertex` and `vertex_label` forever? If you do so I will had a commit to optimize them. They are basically used everywhere.

I have no idea for the moment. If there is something you want to change, it really cannot hurt.

Nathann



---

archive/issue_comments_252208.json:
```json
{
    "body": "Changed commit from **[`c626eec`](https://github.com/sagemath/sagetrac-mirror/commit/c626eec1f23ab4f1529efe1efa3f738b30589b74)** to **[`d921cd9`](https://github.com/sagemath/sagetrac-mirror/commit/d921cd9b951e14dcf7085788a254b213d3c40dfd)**",
    "created_at": "2015-05-02T20:26:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18346#issuecomment-252208",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c626eec`](https://github.com/sagemath/sagetrac-mirror/commit/c626eec1f23ab4f1529efe1efa3f738b30589b74)** to **[`d921cd9`](https://github.com/sagemath/sagetrac-mirror/commit/d921cd9b951e14dcf7085788a254b213d3c40dfd)**



---

archive/issue_comments_252209.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d921cd9b951e14dcf7085788a254b213d3c40dfd\"><code>d921cd9</code></a></td><td><code>Trac 18346: tiny cleanup and optimization</code></td></tr></table>\n",
    "created_at": "2015-05-02T20:26:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18346#issuecomment-252209",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d921cd9b951e14dcf7085788a254b213d3c40dfd"><code>d921cd9</code></a></td><td><code>Trac 18346: tiny cleanup and optimization</code></td></tr></table>




---

archive/issue_comments_252210.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI win some very precious nano seconds and add a tiny bit of documentation for `vertex_labels` and `vertex_ints`. I will start reviewing your other commits.\n\nVincent",
    "created_at": "2015-05-02T20:26:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18346#issuecomment-252210",
    "user": "https://github.com/videlec"
}
```

<div id="comment:12" align="right">comment:12</div>

I win some very precious nano seconds and add a tiny bit of documentation for `vertex_labels` and `vertex_ints`. I will start reviewing your other commits.

Vincent



---

archive/issue_comments_252211.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nHeuuuuuuu... Sorry Vincent but I am not really sure that what this code needs is 10 more lines to convert integer types from one to another....\n\nAnd if you remove some 'object', please remove them from the `.pxd` file too.",
    "created_at": "2015-05-03T06:32:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18346#issuecomment-252211",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:13" align="right">comment:13</div>

Heuuuuuuu... Sorry Vincent but I am not really sure that what this code needs is 10 more lines to convert integer types from one to another....

And if you remove some 'object', please remove them from the `.pxd` file too.



---

archive/issue_comments_252212.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nIf this kind of cast from !Python/!Sage integer is really costly, perhaps we should have a cdef function that does it somewhere? Do I make a mistake if I say that you wrote this code in order to avoid having to raise an exception in many cases ?\n\nNathann",
    "created_at": "2015-05-03T06:37:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18346#issuecomment-252212",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:14" align="right">comment:14</div>

If this kind of cast from !Python/!Sage integer is really costly, perhaps we should have a cdef function that does it somewhere? Do I make a mistake if I say that you wrote this code in order to avoid having to raise an exception in many cases ?

Nathann



---

archive/issue_comments_252213.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@nathanncohen](#comment%3A14):\n> If this kind of cast from !Python/!Sage integer is really costly, perhaps we should have a cdef function that does it somewhere?\n\nThat's a possibility, but it is not clear what should be the signature of the function. What if it fails?\n\n> Do I make a mistake if I say that you wrote this code in order to avoid having to raise an exception in many cases?\n\nIt is not only that: calling directyl `mpz_get_si` or `PyInt_AS_LONG` is faster than the cast which does call `PyInt_AsLong`. But that's true that I do not like this `try/except`.",
    "created_at": "2015-05-03T14:11:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18346#issuecomment-252213",
    "user": "https://github.com/videlec"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@nathanncohen](#comment%3A14):
> If this kind of cast from !Python/!Sage integer is really costly, perhaps we should have a cdef function that does it somewhere?

That's a possibility, but it is not clear what should be the signature of the function. What if it fails?

> Do I make a mistake if I say that you wrote this code in order to avoid having to raise an exception in many cases?

It is not only that: calling directyl `mpz_get_si` or `PyInt_AS_LONG` is faster than the cast which does call `PyInt_AsLong`. But that's true that I do not like this `try/except`.



---

archive/issue_comments_252214.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nYo !\n\n> That's a possibility, but it is not clear what should be the signature of the function. What if it fails?\n\n`LONG_MAX` ?\n\n> It is not only that: calling directyl `mpz_get_si` or `PyInt_AS_LONG` is faster than the cast which does call `PyInt_AsLong`. But that's true that I do not like this `try/except`.\n\nWell, if you can turn it into an independent function in some other module (something integer-related) then no problem. This code is much more in need of clarity than nanoseconds at the moment `:-P`\n\nNathann",
    "created_at": "2015-05-03T14:16:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18346#issuecomment-252214",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:16" align="right">comment:16</div>

Yo !

> That's a possibility, but it is not clear what should be the signature of the function. What if it fails?

`LONG_MAX` ?

> It is not only that: calling directyl `mpz_get_si` or `PyInt_AS_LONG` is faster than the cast which does call `PyInt_AsLong`. But that's true that I do not like this `try/except`.

Well, if you can turn it into an independent function in some other module (something integer-related) then no problem. This code is much more in need of clarity than nanoseconds at the moment `:-P`

Nathann



---

archive/issue_comments_252215.json:
```json
{
    "body": "Changed commit from **[`d921cd9`](https://github.com/sagemath/sagetrac-mirror/commit/d921cd9b951e14dcf7085788a254b213d3c40dfd)** to **[`6318944`](https://github.com/sagemath/sagetrac-mirror/commit/6318944f3f03fc813e11b43d5f4b440389b87e07)**",
    "created_at": "2015-05-03T15:26:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18346#issuecomment-252215",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d921cd9`](https://github.com/sagemath/sagetrac-mirror/commit/d921cd9b951e14dcf7085788a254b213d3c40dfd)** to **[`6318944`](https://github.com/sagemath/sagetrac-mirror/commit/6318944f3f03fc813e11b43d5f4b440389b87e07)**



---

archive/issue_comments_252216.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/efd07b7e0e587eff5b00524fa9e7419ce3067aab\"><code>efd07b7</code></a></td><td><code>Trac 18346: optimization of get_vertex</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6318944f3f03fc813e11b43d5f4b440389b87e07\"><code>6318944</code></a></td><td><code>Trac 18346: some cleanup</code></td></tr></table>\n",
    "created_at": "2015-05-03T15:26:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18346#issuecomment-252216",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/efd07b7e0e587eff5b00524fa9e7419ce3067aab"><code>efd07b7</code></a></td><td><code>Trac 18346: optimization of get_vertex</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6318944f3f03fc813e11b43d5f4b440389b87e07"><code>6318944</code></a></td><td><code>Trac 18346: some cleanup</code></td></tr></table>




---

archive/issue_comments_252217.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nHello,\n\nDo whatever you want with `efd07b7`. The rest of the cleanup is isolated in `6318944`.\n\nVincent",
    "created_at": "2015-05-03T15:28:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18346#issuecomment-252217",
    "user": "https://github.com/videlec"
}
```

<div id="comment:18" align="right">comment:18</div>

Hello,

Do whatever you want with `efd07b7`. The rest of the cleanup is isolated in `6318944`.

Vincent



---

archive/issue_comments_252218.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\n> Do whatever you want with `efd07b7`. The rest of the cleanup is isolated in `6318944`.\n\nIf you do not plan to turn the integer tests into a an independent function, then can you discard it?",
    "created_at": "2015-05-03T15:30:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18346#issuecomment-252218",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:19" align="right">comment:19</div>

> Do whatever you want with `efd07b7`. The rest of the cleanup is isolated in `6318944`.

If you do not plan to turn the integer tests into a an independent function, then can you discard it?



---

archive/issue_comments_252219.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@nathanncohen](#comment%3A19):\n> > Do whatever you want with `efd07b7`. The rest of the cleanup is isolated in `6318944`.\n\n> \n> If you do not plan to turn the integer tests into a an independent function, then can you discard it?\n\nyes",
    "created_at": "2015-05-03T15:31:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18346#issuecomment-252219",
    "user": "https://github.com/videlec"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@nathanncohen](#comment%3A19):
> > Do whatever you want with `efd07b7`. The rest of the cleanup is isolated in `6318944`.

> 
> If you do not plan to turn the integer tests into a an independent function, then can you discard it?

yes



---

archive/issue_comments_252220.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e8df618e3a7fa04547c1cc1f4195eb837f679bdf\"><code>e8df618</code></a></td><td><code>Trac 18346: some cleanup</code></td></tr></table>\n",
    "created_at": "2015-05-03T15:36:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18346#issuecomment-252220",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e8df618e3a7fa04547c1cc1f4195eb837f679bdf"><code>e8df618</code></a></td><td><code>Trac 18346: some cleanup</code></td></tr></table>




---

archive/issue_comments_252221.json:
```json
{
    "body": "Changed commit from **[`6318944`](https://github.com/sagemath/sagetrac-mirror/commit/6318944f3f03fc813e11b43d5f4b440389b87e07)** to **[`e8df618`](https://github.com/sagemath/sagetrac-mirror/commit/e8df618e3a7fa04547c1cc1f4195eb837f679bdf)**",
    "created_at": "2015-05-03T15:36:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18346#issuecomment-252221",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6318944`](https://github.com/sagemath/sagetrac-mirror/commit/6318944f3f03fc813e11b43d5f4b440389b87e07)** to **[`e8df618`](https://github.com/sagemath/sagetrac-mirror/commit/e8df618e3a7fa04547c1cc1f4195eb837f679bdf)**



---

archive/issue_comments_252222.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nI am done with reviewing your commits and they are fine.\n\nSo if `e8df618` is fine for you, then it can go.",
    "created_at": "2015-05-03T15:37:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18346#issuecomment-252222",
    "user": "https://github.com/videlec"
}
```

<div id="comment:22" align="right">comment:22</div>

I am done with reviewing your commits and they are fine.

So if `e8df618` is fine for you, then it can go.



---

archive/issue_comments_252223.json:
```json
{
    "body": "Reviewer: **Vincent Delecroix**",
    "created_at": "2015-05-03T15:37:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18346#issuecomment-252223",
    "user": "https://github.com/videlec"
}
```

Reviewer: **Vincent Delecroix**



---

archive/issue_comments_252224.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nYoooooooooo !\n\n> I am done with reviewing your commits and they are fine.\n> \n> So if `e8df618` is fine for you, then it can go.\n\nOh. Great, thanks !! I was reviewing that commit. I should be done in 10 minutes.\n\nNathann",
    "created_at": "2015-05-03T15:38:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18346#issuecomment-252224",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:23" align="right">comment:23</div>

Yoooooooooo !

> I am done with reviewing your commits and they are fine.
> 
> So if `e8df618` is fine for you, then it can go.

Oh. Great, thanks !! I was reviewing that commit. I should be done in 10 minutes.

Nathann



---

archive/issue_comments_252225.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nIf you feel like messing with a new subfolder of src/, I cleaned a couple of things from finance/ in #18355 `;-)`",
    "created_at": "2015-05-03T15:39:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18346#issuecomment-252225",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:24" align="right">comment:24</div>

If you feel like messing with a new subfolder of src/, I cleaned a couple of things from finance/ in #18355 `;-)`



---

archive/issue_comments_252226.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nOkayokay, it's all good. Thank you very much for your help with these painful patches `^^;`\n\nNathann",
    "created_at": "2015-05-03T15:46:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18346#issuecomment-252226",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:25" align="right">comment:25</div>

Okayokay, it's all good. Thank you very much for your help with these painful patches `^^;`

Nathann



---

archive/issue_events_258406.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-05-03T15:46:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18346#event-258406"
}
```



---

archive/issue_events_258407.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-05-03T15:46:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18346#event-258407"
}
```



---

archive/issue_events_258408.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-05-03T20:31:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18346#event-258408"
}
```



---

archive/issue_events_258409.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-05-03T20:31:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18346#event-258409"
}
```



---

archive/issue_comments_252227.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\n\n```\nsage -t --long src/sage/graphs/base/overview.py\n**********************************************************************\nFile \"src/sage/graphs/base/overview.py\", line 50, in sage.graphs.base.overview\nFailed example:\n    Graph()._backend\nExpected:\n    <class 'sage.graphs.base.sparse_graph.SparseGraphBackend'>\nGot:\n    <type 'sage.graphs.base.sparse_graph.SparseGraphBackend'>\n**********************************************************************\n1 item had failures:\n   1 of   2 in sage.graphs.base.overview\n    [1 test, 1 failure, 0.01 s]\n```",
    "created_at": "2015-05-03T20:31:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18346#issuecomment-252227",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:26" align="right">comment:26</div>


```
sage -t --long src/sage/graphs/base/overview.py
**********************************************************************
File "src/sage/graphs/base/overview.py", line 50, in sage.graphs.base.overview
Failed example:
    Graph()._backend
Expected:
    <class 'sage.graphs.base.sparse_graph.SparseGraphBackend'>
Got:
    <type 'sage.graphs.base.sparse_graph.SparseGraphBackend'>
**********************************************************************
1 item had failures:
   1 of   2 in sage.graphs.base.overview
    [1 test, 1 failure, 0.01 s]
```



---

archive/issue_comments_252228.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@nathanncohen](#comment%3A14):\n> If this kind of cast from !Python/!Sage integer is really costly, perhaps we should have a cdef function that does it somewhere? Do I make a mistake if I say that you wrote this code in order to avoid having to raise an exception in many cases ?\n\nThe proper solution to \"convert\" a Python object `u` into a long is\n\n```\ncdef long u_long = PyNumber_Index(u)\n```\nsee\n\n    https://groups.google.com/forum/#!topic/sage-support/0ATjCgQlq4c\n\nVincent",
    "created_at": "2015-05-03T20:57:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18346#issuecomment-252228",
    "user": "https://github.com/videlec"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@nathanncohen](#comment%3A14):
> If this kind of cast from !Python/!Sage integer is really costly, perhaps we should have a cdef function that does it somewhere? Do I make a mistake if I say that you wrote this code in order to avoid having to raise an exception in many cases ?

The proper solution to "convert" a Python object `u` into a long is

```
cdef long u_long = PyNumber_Index(u)
```
see

    https://groups.google.com/forum/#!topic/sage-support/0ATjCgQlq4c

Vincent



---

archive/issue_comments_252229.json:
```json
{
    "body": "Changed commit from **[`e8df618`](https://github.com/sagemath/sagetrac-mirror/commit/e8df618e3a7fa04547c1cc1f4195eb837f679bdf)** to **[`6ffbb05`](https://github.com/sagemath/sagetrac-mirror/commit/6ffbb05999f70fa2535f28aca08b203036664491)**",
    "created_at": "2015-05-04T05:43:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18346#issuecomment-252229",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e8df618`](https://github.com/sagemath/sagetrac-mirror/commit/e8df618e3a7fa04547c1cc1f4195eb837f679bdf)** to **[`6ffbb05`](https://github.com/sagemath/sagetrac-mirror/commit/6ffbb05999f70fa2535f28aca08b203036664491)**



---

archive/issue_comments_252230.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d61e569bfd222ee604bf433bf557ac88469518c\"><code>8d61e56</code></a></td><td><code>trac #18317: General documentation about graph data structures</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b7d90367738afb7bfcf2d97701451fccbeebf31f\"><code>b7d9036</code></a></td><td><code>trac #18317: Reviewer's comments</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c02e2304db34a154303f7930dde40d356bce719\"><code>2c02e23</code></a></td><td><code>trac #18317: Merged with 6.7.beta3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c6678ce267bef7b5f805e78adae57c0b1d8a8b5d\"><code>c6678ce</code></a></td><td><code>trac #18317: Review</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4378790c6996a3e4949737a1bf2b9bb8c4cc217d\"><code>4378790</code></a></td><td><code>trac #18317: Delete(s)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2caff2f734ef6f586f8a505ce44171790d880e10\"><code>2caff2f</code></a></td><td><code>trac #18346: Merge with #18317</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6ffbb05999f70fa2535f28aca08b203036664491\"><code>6ffbb05</code></a></td><td><code>trac #18346; Broken doctest</code></td></tr></table>\n",
    "created_at": "2015-05-04T05:43:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18346#issuecomment-252230",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d61e569bfd222ee604bf433bf557ac88469518c"><code>8d61e56</code></a></td><td><code>trac #18317: General documentation about graph data structures</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b7d90367738afb7bfcf2d97701451fccbeebf31f"><code>b7d9036</code></a></td><td><code>trac #18317: Reviewer's comments</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c02e2304db34a154303f7930dde40d356bce719"><code>2c02e23</code></a></td><td><code>trac #18317: Merged with 6.7.beta3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c6678ce267bef7b5f805e78adae57c0b1d8a8b5d"><code>c6678ce</code></a></td><td><code>trac #18317: Review</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4378790c6996a3e4949737a1bf2b9bb8c4cc217d"><code>4378790</code></a></td><td><code>trac #18317: Delete(s)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2caff2f734ef6f586f8a505ce44171790d880e10"><code>2caff2f</code></a></td><td><code>trac #18346: Merge with #18317</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6ffbb05999f70fa2535f28aca08b203036664491"><code>6ffbb05</code></a></td><td><code>trac #18346; Broken doctest</code></td></tr></table>




---

archive/issue_events_258410.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-05-04T05:43:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18346#event-258410"
}
```



---

archive/issue_events_258411.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-05-04T05:43:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18346#event-258411"
}
```



---

archive/issue_comments_252231.json:
```json
{
    "body": "Dependencies: **#18317**",
    "created_at": "2015-05-04T05:43:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18346#issuecomment-252231",
    "user": "https://github.com/nathanncohen"
}
```

Dependencies: **#18317**



---

archive/issue_events_258412.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-05-04T19:04:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18346#event-258412"
}
```



---

archive/issue_events_258413.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "55ff16e96f8cf8e5dc2c94bd6f175f561390240d",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-05-04T19:04:37Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18346#event-258413"
}
```



---

archive/issue_comments_252232.json:
```json
{
    "body": "Changed branch from **[public/18346](https://github.com/sagemath/sagetrac-mirror/tree/public/18346)** to **[`6ffbb05`](https://github.com/sagemath/sagetrac-mirror/commit/6ffbb05999f70fa2535f28aca08b203036664491)**",
    "created_at": "2015-05-04T19:04:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18346",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18346#issuecomment-252232",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/18346](https://github.com/sagemath/sagetrac-mirror/tree/public/18346)** to **[`6ffbb05`](https://github.com/sagemath/sagetrac-mirror/commit/6ffbb05999f70fa2535f28aca08b203036664491)**
