# Issue 18600: Fix several methods for sparse polynomials

archive/issues_018363.json:
```json
{
    "assignees": [],
    "body": "In tickets #18518 and #18585, I've fixed some problems in two methods of the class `Polynomial` to make them work with high-degree sparse polynomials. Globally, many methods in this class are written with dense polynomials (or at least low-degree polynomials) in mind. \n\nThe purpose of this ticket is to provide fixes for some of these methods. The list of the methods I've treated is:\n\n- `denominator`: in #18518\n- `_cmp_`: in #18585\n\n- `integral`: new method in `Polynomial_generic_sparse` + correct a slight bug in `Polynomial`\n- `is_nilpotent`: fix in `Polynomial`\n- `is_unit`: fix in `Polynomial`\n- `padded_list`: fix in `Polynomial`\n- `newton_slopes`: new method in `Polynomial_generic_sparse`\n- `reverse`: new method in `Polynomial_generic_sparse` \n- `shift`: fix in `Polynomial_generic_sparse`\n- `truncate`: new method in `Polynomial_generic_sparse`\n- `norm`: fix in `Polynomial`\n\nOther methods remain to be treated, but they won't be fixed in this ticket. Most importantly is the method `__call__`, but I prefer to wait for #18282 to be closed.\n\nKeywords: **sparse polynomial**\n\nBranch/Commit: **[`4a44486`](https://github.com/sagemath/sagetrac-mirror/commit/4a4448604662733d1dc1ddf7e1f867e54be23af2)**\n\nReviewer: **Vincent Delecroix**\n\nAuthor: **Bruno Grenet**\n\nComponent: **commutative algebra**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/18600_\n\n",
    "closed_at": "2015-09-15T22:30:53Z",
    "created_at": "2015-06-03T13:46:50Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20commutative%20algebra",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.9",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Fix several methods for sparse polynomials",
    "type": "issue",
    "updated_at": "2015-09-15T22:30:53Z",
    "url": "https://github.com/sagemath/sage/issues/18600",
    "user": "https://github.com/bgrenet"
}
```
In tickets #18518 and #18585, I've fixed some problems in two methods of the class `Polynomial` to make them work with high-degree sparse polynomials. Globally, many methods in this class are written with dense polynomials (or at least low-degree polynomials) in mind. 

The purpose of this ticket is to provide fixes for some of these methods. The list of the methods I've treated is:

- `denominator`: in #18518
- `_cmp_`: in #18585

- `integral`: new method in `Polynomial_generic_sparse` + correct a slight bug in `Polynomial`
- `is_nilpotent`: fix in `Polynomial`
- `is_unit`: fix in `Polynomial`
- `padded_list`: fix in `Polynomial`
- `newton_slopes`: new method in `Polynomial_generic_sparse`
- `reverse`: new method in `Polynomial_generic_sparse` 
- `shift`: fix in `Polynomial_generic_sparse`
- `truncate`: new method in `Polynomial_generic_sparse`
- `norm`: fix in `Polynomial`

Other methods remain to be treated, but they won't be fixed in this ticket. Most importantly is the method `__call__`, but I prefer to wait for #18282 to be closed.

Keywords: **sparse polynomial**

Branch/Commit: **[`4a44486`](https://github.com/sagemath/sagetrac-mirror/commit/4a4448604662733d1dc1ddf7e1f867e54be23af2)**

Reviewer: **Vincent Delecroix**

Author: **Bruno Grenet**

Component: **commutative algebra**

_Issue created by migration from https://trac.sagemath.org/ticket/18600_





---

archive/issue_events_264386.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-06-03T13:46:50Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18600#event-264386"
}
```



---

archive/issue_events_264387.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-06-03T13:46:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20commutative%20algebra",
    "label_color": "0000ff",
    "label_name": "c: commutative algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18600#event-264387"
}
```



---

archive/issue_events_264388.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-06-03T13:46:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18600#event-264388"
}
```



---

archive/issue_events_264389.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-06-03T13:46:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18600#event-264389"
}
```



---

archive/issue_comments_258680.json:
```json
{
    "body": "Commit: **[`ecffcef`](https://github.com/sagemath/sagetrac-mirror/commit/ecffcef63b5d0e298af36bd487df165bbf6a42dd)**",
    "created_at": "2015-06-03T14:24:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18600#issuecomment-258680",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`ecffcef`](https://github.com/sagemath/sagetrac-mirror/commit/ecffcef63b5d0e298af36bd487df165bbf6a42dd)**



---

archive/issue_comments_258681.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/14952d61c9d8b90e9926aa721294360ca5ba683a\">14952d6</a></td><td><code>Correct bug in `integral`</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e05d331aecbbca0bb661dda63a28081b1f8db472\">e05d331</a></td><td><code>Adapt `is_nilpotent` to sparse polynomials</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fcd29ce99fdf20d8d44b3d3af20e610036d9fd2b\">fcd29ce</a></td><td><code>Adapt `is_unit` to sparse polynomials</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/74a31475fbaf43b0c7c4bdad63f39baea999d0ef\">74a3147</a></td><td><code>Adapt `padded_list` to sparse polynomials</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa10b1fa288cd75eafe3d84abf92ac8bfd1b2bc6\">aa10b1f</a></td><td><code>Adapt `norm` to sparse polynomials</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d706667ed575fd6b841a1eaef302c5ef453e9c0b\">d706667</a></td><td><code>Adapt `reverse` to sparse polynomials</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1e1d21b7a14e15ef37a6b8fca833298fbbb1f056\">1e1d21b</a></td><td><code>Adapt `integral` to sparse polynomials</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dbc2ba09385c25df46c33747075d35dc0e35eea8\">dbc2ba0</a></td><td><code>Adapt `shift` to sparse polynomials</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/19b1371896d7ff71cb9eb3fa289b0d6bddb2787f\">19b1371</a></td><td><code>Adapt `newton_slopes` to sparse polynomials</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ecffcef63b5d0e298af36bd487df165bbf6a42dd\">ecffcef</a></td><td><code>Adapt `truncate` to sparse polynomials</code></td></tr></table>\n",
    "created_at": "2015-06-03T14:24:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18600#issuecomment-258681",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:1"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/14952d61c9d8b90e9926aa721294360ca5ba683a">14952d6</a></td><td><code>Correct bug in `integral`</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e05d331aecbbca0bb661dda63a28081b1f8db472">e05d331</a></td><td><code>Adapt `is_nilpotent` to sparse polynomials</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fcd29ce99fdf20d8d44b3d3af20e610036d9fd2b">fcd29ce</a></td><td><code>Adapt `is_unit` to sparse polynomials</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/74a31475fbaf43b0c7c4bdad63f39baea999d0ef">74a3147</a></td><td><code>Adapt `padded_list` to sparse polynomials</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa10b1fa288cd75eafe3d84abf92ac8bfd1b2bc6">aa10b1f</a></td><td><code>Adapt `norm` to sparse polynomials</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d706667ed575fd6b841a1eaef302c5ef453e9c0b">d706667</a></td><td><code>Adapt `reverse` to sparse polynomials</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1e1d21b7a14e15ef37a6b8fca833298fbbb1f056">1e1d21b</a></td><td><code>Adapt `integral` to sparse polynomials</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dbc2ba09385c25df46c33747075d35dc0e35eea8">dbc2ba0</a></td><td><code>Adapt `shift` to sparse polynomials</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/19b1371896d7ff71cb9eb3fa289b0d6bddb2787f">19b1371</a></td><td><code>Adapt `newton_slopes` to sparse polynomials</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ecffcef63b5d0e298af36bd487df165bbf6a42dd">ecffcef</a></td><td><code>Adapt `truncate` to sparse polynomials</code></td></tr></table>




---

archive/issue_comments_258682.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,17 +1,18 @@\n In tickets #18518 and #18585, I've fixed some problems in two methods of the class `Polynomial` to make them work with high-degree sparse polynomials. Globally, many methods in this class are written with dense polynomials (or at least low-degree polynomials) in mind. \n \n-The purpose of this ticket is to provide easy fixes for many of these methods. The list of the methods I've treated is:\n-- `denominator` in #18518\n-- `_cmp_` in #18585\n-- `integral`\n-- `is_nilpotent`\n-- `padded_list`\n-- `newton_slopes`\n-- `reverse`\n-- `shift`\n-- `truncate`\n-- `norm`\n+The purpose of this ticket is to provide fixes for some of these methods. The list of the methods I've treated is:\n \n-For `integral`, I also correct some bug that affects all polynomials (dense as well as sparse).\n+- `denominator`: in #18518\n+- `_cmp_`: in #18585\n \n-**Note.** This is a work in progress.\n+- `integral`: new method in `Polynomial_generic_sparse` + correct a slight bug in `Polynomial`\n+- `is_nilpotent`: fix in `Polynomial`\n+- `is_unit`: fix in `Polynomial`\n+- `padded_list`: fix in `Polynomial`\n+- `newton_slopes`: new method in `Polynomial_generic_sparse`\n+- `reverse`: new method in `Polynomial_generic_sparse` \n+- `shift`: fix in `Polynomial_generic_sparse`\n+- `truncate`: new method in `Polynomial_generic_sparse`\n+- `norm`: fix in `Polynomial`\n+\n+Other methods remain to be treated, but they won't be fixed in this ticket. Most importantly is the method `__call__`, but I prefer to wait for #18282 to be closed.\n``````\n",
    "created_at": "2015-06-03T14:37:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18600#issuecomment-258682",
    "user": "https://github.com/bgrenet"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,17 +1,18 @@
 In tickets #18518 and #18585, I've fixed some problems in two methods of the class `Polynomial` to make them work with high-degree sparse polynomials. Globally, many methods in this class are written with dense polynomials (or at least low-degree polynomials) in mind. 
 
-The purpose of this ticket is to provide easy fixes for many of these methods. The list of the methods I've treated is:
-- `denominator` in #18518
-- `_cmp_` in #18585
-- `integral`
-- `is_nilpotent`
-- `padded_list`
-- `newton_slopes`
-- `reverse`
-- `shift`
-- `truncate`
-- `norm`
+The purpose of this ticket is to provide fixes for some of these methods. The list of the methods I've treated is:
 
-For `integral`, I also correct some bug that affects all polynomials (dense as well as sparse).
+- `denominator`: in #18518
+- `_cmp_`: in #18585
 
-**Note.** This is a work in progress.
+- `integral`: new method in `Polynomial_generic_sparse` + correct a slight bug in `Polynomial`
+- `is_nilpotent`: fix in `Polynomial`
+- `is_unit`: fix in `Polynomial`
+- `padded_list`: fix in `Polynomial`
+- `newton_slopes`: new method in `Polynomial_generic_sparse`
+- `reverse`: new method in `Polynomial_generic_sparse` 
+- `shift`: fix in `Polynomial_generic_sparse`
+- `truncate`: new method in `Polynomial_generic_sparse`
+- `norm`: fix in `Polynomial`
+
+Other methods remain to be treated, but they won't be fixed in this ticket. Most importantly is the method `__call__`, but I prefer to wait for #18282 to be closed.
``````




---

archive/issue_events_264390.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-06-03T14:37:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18600#event-264390"
}
```



---

archive/issue_comments_258683.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nHello,\n\nSome technical comments:\n\n* `integral`\n\n    What about `Q = self.base_ring().fraction_field()` instead of `Q = (self.constant_coefficient()/1).parent()`?\n\n    The `.change_ring` method is very slow but this has nothing to do with this ticket.\n\n* `is_unit`\n\n    Why do you care that the base ring being an integral domain? Is `1` not a unit in `Z/4Z`? Sage thinks it is\n\n```\nsage: Zmod(4)(1).is_unit()\nTrue\n```\n\n* `reverse`\n\n    You can use `for k,v in self.__coeffs.iteritems()`\n\n* `integral` for sparse\n\n    idem: use `iteritems`. In other words, replace\n\n```\nQ({k:self.__coeffs[k].integral(var) for k in self.__coeffs.keys()})\n```\n    with\n\n```\nQ({k:v.integral(var) for k,v in self.__coeffs.iteritems()})\n```\n   I found strange that in one case you defined the dictionary `d` and then `return Q(d)` while in the other you do everything at once.\n\nVincent",
    "created_at": "2015-08-03T16:28:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18600#issuecomment-258683",
    "user": "https://github.com/videlec"
}
```

<div id="comment:3" align="right">comment:3</div>

Hello,

Some technical comments:

* `integral`

    What about `Q = self.base_ring().fraction_field()` instead of `Q = (self.constant_coefficient()/1).parent()`?

    The `.change_ring` method is very slow but this has nothing to do with this ticket.

* `is_unit`

    Why do you care that the base ring being an integral domain? Is `1` not a unit in `Z/4Z`? Sage thinks it is

```
sage: Zmod(4)(1).is_unit()
True
```

* `reverse`

    You can use `for k,v in self.__coeffs.iteritems()`

* `integral` for sparse

    idem: use `iteritems`. In other words, replace

```
Q({k:self.__coeffs[k].integral(var) for k in self.__coeffs.keys()})
```
    with

```
Q({k:v.integral(var) for k,v in self.__coeffs.iteritems()})
```
   I found strange that in one case you defined the dictionary `d` and then `return Q(d)` while in the other you do everything at once.

Vincent



---

archive/issue_events_264391.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-08-03T16:28:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18600#event-264391"
}
```



---

archive/issue_events_264392.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-08-03T16:28:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18600#event-264392"
}
```



---

archive/issue_comments_258684.json:
```json
{
    "body": "Reviewer: **Vincent Delecroix**",
    "created_at": "2015-08-03T16:28:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18600#issuecomment-258684",
    "user": "https://github.com/videlec"
}
```

Reviewer: **Vincent Delecroix**



---

archive/issue_events_264393.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-08-03T16:28:34Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18600#event-264393"
}
```



---

archive/issue_events_264394.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-08-03T16:28:34Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "milestone_number": null,
    "milestone_title": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18600#event-264394"
}
```



---

archive/issue_comments_258685.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/390b3ea9595b5ab1a4f96af875f754b349e79686\">390b3ea</a></td><td><code>integral: reviewer comments + add check=False</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/809bc3ea6da046dd4bf7582c44ea8ef90319ea73\">809bc3e</a></td><td><code>reverse: reviewer's comment + check=False</code></td></tr></table>\n",
    "created_at": "2015-08-04T09:47:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18600#issuecomment-258685",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/390b3ea9595b5ab1a4f96af875f754b349e79686">390b3ea</a></td><td><code>integral: reviewer comments + add check=False</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/809bc3ea6da046dd4bf7582c44ea8ef90319ea73">809bc3e</a></td><td><code>reverse: reviewer's comment + check=False</code></td></tr></table>




---

archive/issue_comments_258686.json:
```json
{
    "body": "Changed commit from **[`ecffcef`](https://github.com/sagemath/sagetrac-mirror/commit/ecffcef63b5d0e298af36bd487df165bbf6a42dd)** to **[`809bc3e`](https://github.com/sagemath/sagetrac-mirror/commit/809bc3ea6da046dd4bf7582c44ea8ef90319ea73)**",
    "created_at": "2015-08-04T09:47:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18600#issuecomment-258686",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ecffcef`](https://github.com/sagemath/sagetrac-mirror/commit/ecffcef63b5d0e298af36bd487df165bbf6a42dd)** to **[`809bc3e`](https://github.com/sagemath/sagetrac-mirror/commit/809bc3ea6da046dd4bf7582c44ea8ef90319ea73)**



---

archive/issue_comments_258687.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@videlec](#comment:3):\n> * `integral`\n> \n>     What about `Q = self.base_ring().fraction_field()` instead of `Q = (self.constant_coefficient()/1).parent()`?\n\n \nRight, I do not remember why I wrote it in such a weird way... Corrected!\n \n> \n>     The `.change_ring` method is very slow but this has nothing to do with this ticket.\n\n \nAnd actually, a large part is already taken to simply build the new polynomial ring. For instance, on my laptop, `change_ring` takes approximately 12\u00b5s, of which 9\u00b5s are taken for building the new `PolynomialRing`. Yet the extra 3\u00b5s shouldn't exist...\n \n> \n> * `is_unit`\n> \n>     Why do you care that the base ring being an integral domain? Is `1` not a unit in `Z/4Z`? Sage thinks it is\n> \n> ```\n> sage: Zmod(4)(1).is_unit()\n> True\n> ```\n\n \nYou may have overlooked the code: If the base ring is an integral domain and the input polynomial has degree > 0, it cannot be a unit so I directly return `False`. I test the nilpotency of the coefficients only if the base ring is not an integral domain.\n \n> * `reverse`\n> \n>     You can use `for k,v in self.__coeffs.iteritems()`\n> \n> * `integral` for sparse\n> \n>     idem: use `iteritems`. In other words, replace\n> \n> ```\n> Q({k:self.__coeffs[k].integral(var) for k in self.__coeffs.keys()})\n> ```\n>     with\n> \n> ```\n> Q({k:v.integral(var) for k,v in self.__coeffs.iteritems()})\n> ```\n>    I found strange that in one case you defined the dictionary `d` and then `return Q(d)` while in the other you do everything at once.\n\n \nComments taken into account.",
    "created_at": "2015-08-04T09:54:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18600#issuecomment-258687",
    "user": "https://github.com/bgrenet"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@videlec](#comment:3):
> * `integral`
> 
>     What about `Q = self.base_ring().fraction_field()` instead of `Q = (self.constant_coefficient()/1).parent()`?

 
Right, I do not remember why I wrote it in such a weird way... Corrected!
 
> 
>     The `.change_ring` method is very slow but this has nothing to do with this ticket.

 
And actually, a large part is already taken to simply build the new polynomial ring. For instance, on my laptop, `change_ring` takes approximately 12µs, of which 9µs are taken for building the new `PolynomialRing`. Yet the extra 3µs shouldn't exist...
 
> 
> * `is_unit`
> 
>     Why do you care that the base ring being an integral domain? Is `1` not a unit in `Z/4Z`? Sage thinks it is
> 
> ```
> sage: Zmod(4)(1).is_unit()
> True
> ```

 
You may have overlooked the code: If the base ring is an integral domain and the input polynomial has degree > 0, it cannot be a unit so I directly return `False`. I test the nilpotency of the coefficients only if the base ring is not an integral domain.
 
> * `reverse`
> 
>     You can use `for k,v in self.__coeffs.iteritems()`
> 
> * `integral` for sparse
> 
>     idem: use `iteritems`. In other words, replace
> 
> ```
> Q({k:self.__coeffs[k].integral(var) for k in self.__coeffs.keys()})
> ```
>     with
> 
> ```
> Q({k:v.integral(var) for k,v in self.__coeffs.iteritems()})
> ```
>    I found strange that in one case you defined the dictionary `d` and then `return Q(d)` while in the other you do everything at once.

 
Comments taken into account.



---

archive/issue_events_264395.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-08-04T09:54:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18600#event-264395"
}
```



---

archive/issue_events_264396.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-08-04T09:54:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18600#event-264396"
}
```



---

archive/issue_comments_258688.json:
```json
{
    "body": "Changed commit from **[`809bc3e`](https://github.com/sagemath/sagetrac-mirror/commit/809bc3ea6da046dd4bf7582c44ea8ef90319ea73)** to **[`29331f2`](https://github.com/sagemath/sagetrac-mirror/commit/29331f254d9255c23c673393c6fd0121c04d9d6c)**",
    "created_at": "2015-08-07T20:06:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18600#issuecomment-258688",
    "user": "https://github.com/videlec"
}
```

Changed commit from **[`809bc3e`](https://github.com/sagemath/sagetrac-mirror/commit/809bc3ea6da046dd4bf7582c44ea8ef90319ea73)** to **[`29331f2`](https://github.com/sagemath/sagetrac-mirror/commit/29331f254d9255c23c673393c6fd0121c04d9d6c)**



---

archive/issue_comments_258689.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nHello,\n\nFor non integral domain, there are some failures for `integral`\n\n```\nsage: x = polygen(Zmod(4))\nsage: p = x**4 + 1\nsage: p.integral()\nTraceback (most recent call last):\n...\nZeroDivisionError: Inverse does not exist.\n```\nAnd for more complicated rings as well\n\n```\nsage: Sx.<x> = ZZ[]\nsage: Sxy.<y> = Sx[]\nsage: Sxyz.<z> = Sxy[]\nsage: p = 1 + x*y + x*z + y*z^2\nsage: p.integral(y)\nTraceback (most recent call last):\n...\nTypeError: no conversion of this rational to integer\n```\nMoreover, you kept the `self.constant_coefficient()/1`. In some cases (like the one above) there is no fraction field, so it makes sense to ask for the result of the division. But this is also accessible from the coercion model\n\n```\nsage: cm = get_coercion_model()\nsage: cm.division_parent(ZZ)\nRational Field\nsage: cm.division_parent(Zmod(4))\nRing of integers modulo 4\n```\nThat way you avoid a useless division (and a coercion since you used `1` instead of `base_ring.one()`).\n\nThat being said, there are plenty of broken thing in the coercion model. I ended up with a relatively robust solution but not ideal. In order to be improved, one has to work more on the coercion model and the polynomial division.\n\nTell me what you think.\n\nVincent\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/29331f254d9255c23c673393c6fd0121c04d9d6c\">29331f2</a></td><td><code>trac #18600: better parent for integral of polynomials</code></td></tr></table>\n",
    "created_at": "2015-08-07T20:06:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18600#issuecomment-258689",
    "user": "https://github.com/videlec"
}
```

<div id="comment:6" align="right">comment:6</div>

Hello,

For non integral domain, there are some failures for `integral`

```
sage: x = polygen(Zmod(4))
sage: p = x**4 + 1
sage: p.integral()
Traceback (most recent call last):
...
ZeroDivisionError: Inverse does not exist.
```
And for more complicated rings as well

```
sage: Sx.<x> = ZZ[]
sage: Sxy.<y> = Sx[]
sage: Sxyz.<z> = Sxy[]
sage: p = 1 + x*y + x*z + y*z^2
sage: p.integral(y)
Traceback (most recent call last):
...
TypeError: no conversion of this rational to integer
```
Moreover, you kept the `self.constant_coefficient()/1`. In some cases (like the one above) there is no fraction field, so it makes sense to ask for the result of the division. But this is also accessible from the coercion model

```
sage: cm = get_coercion_model()
sage: cm.division_parent(ZZ)
Rational Field
sage: cm.division_parent(Zmod(4))
Ring of integers modulo 4
```
That way you avoid a useless division (and a coercion since you used `1` instead of `base_ring.one()`).

That being said, there are plenty of broken thing in the coercion model. I ended up with a relatively robust solution but not ideal. In order to be improved, one has to work more on the coercion model and the polynomial division.

Tell me what you think.

Vincent

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/29331f254d9255c23c673393c6fd0121c04d9d6c">29331f2</a></td><td><code>trac #18600: better parent for integral of polynomials</code></td></tr></table>




---

archive/issue_comments_258690.json:
```json
{
    "body": "Changed branch from **[u/bruno/polynomial_sparse](https://github.com/sagemath/sagetrac-mirror/tree/u/bruno/polynomial_sparse)** to **[public/18600](https://github.com/sagemath/sagetrac-mirror/tree/public/18600)**",
    "created_at": "2015-08-07T20:06:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18600#issuecomment-258690",
    "user": "https://github.com/videlec"
}
```

Changed branch from **[u/bruno/polynomial_sparse](https://github.com/sagemath/sagetrac-mirror/tree/u/bruno/polynomial_sparse)** to **[public/18600](https://github.com/sagemath/sagetrac-mirror/tree/public/18600)**



---

archive/issue_events_264397.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-08-07T20:06:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18600#event-264397"
}
```



---

archive/issue_events_264398.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-08-07T20:06:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18600#event-264398"
}
```



---

archive/issue_comments_258691.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThe coercion model is really something I do not understand yet in Sage, so I trust what you wrote. Simply, in the following change, isn't it faster (and cleaner to some extent) to first define the underlying list of coefficients rather than defining the zero polynomial before adding monomials to it? \n\n```diff\n-        coeffs = self.list()\n-        v = [0] + [coeffs[n]/(n+1) for n from 0 <= n <= degree]\n-        return S(v)\n+        p = S.zero()\n+        for n in range(degree+1):\n+            if self[n]:\n+                p += cm.bin_op(Q(self[n]), n+1, operator.div) * S.gen()**(n+1)\n+        return p\n```\n\nWhat about something as the following?\n\n```python\n    coeffs = [self.zero()] * (degree + 2)\n    for n in range(degree+1):\n        if self[n]:\n            coeffs[n+1] = cm.bin_op(Q(self[n]), n+1, operator.div)\n    return S(coeffs)\n```\n\n*Note. I'm going in vacations and won't be able to interact much until August 24.*",
    "created_at": "2015-08-08T07:35:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18600#issuecomment-258691",
    "user": "https://github.com/bgrenet"
}
```

<div id="comment:7" align="right">comment:7</div>

The coercion model is really something I do not understand yet in Sage, so I trust what you wrote. Simply, in the following change, isn't it faster (and cleaner to some extent) to first define the underlying list of coefficients rather than defining the zero polynomial before adding monomials to it? 

```diff
-        coeffs = self.list()
-        v = [0] + [coeffs[n]/(n+1) for n from 0 <= n <= degree]
-        return S(v)
+        p = S.zero()
+        for n in range(degree+1):
+            if self[n]:
+                p += cm.bin_op(Q(self[n]), n+1, operator.div) * S.gen()**(n+1)
+        return p
```

What about something as the following?

```python
    coeffs = [self.zero()] * (degree + 2)
    for n in range(degree+1):
        if self[n]:
            coeffs[n+1] = cm.bin_op(Q(self[n]), n+1, operator.div)
    return S(coeffs)
```

*Note. I'm going in vacations and won't be able to interact much until August 24.*



---

archive/issue_comments_258692.json:
```json
{
    "body": "Changed commit from **[`29331f2`](https://github.com/sagemath/sagetrac-mirror/commit/29331f254d9255c23c673393c6fd0121c04d9d6c)** to **[`e75ab73`](https://github.com/sagemath/sagetrac-mirror/commit/e75ab73b3b2e0bc3a40105640d0572b1b6af9cea)**",
    "created_at": "2015-08-08T21:13:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18600#issuecomment-258692",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`29331f2`](https://github.com/sagemath/sagetrac-mirror/commit/29331f254d9255c23c673393c6fd0121c04d9d6c)** to **[`e75ab73`](https://github.com/sagemath/sagetrac-mirror/commit/e75ab73b3b2e0bc3a40105640d0572b1b6af9cea)**



---

archive/issue_comments_258693.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e75ab73b3b2e0bc3a40105640d0572b1b6af9cea\">e75ab73</a></td><td><code>Trac #18600: simpler polynomial construction</code></td></tr></table>\n",
    "created_at": "2015-08-08T21:13:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18600#issuecomment-258693",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e75ab73b3b2e0bc3a40105640d0572b1b6af9cea">e75ab73</a></td><td><code>Trac #18600: simpler polynomial construction</code></td></tr></table>




---

archive/issue_comments_258694.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThe current branch passes all the tests. As far as I can tell, this ticket can now be positive reviewed. Is it appropriate if I set it myself? I am quite reluctant since I wrote most of the code, and also sine you didn't set it to `needs_review`.",
    "created_at": "2015-08-26T13:43:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18600#issuecomment-258694",
    "user": "https://github.com/bgrenet"
}
```

<div id="comment:9" align="right">comment:9</div>

The current branch passes all the tests. As far as I can tell, this ticket can now be positive reviewed. Is it appropriate if I set it myself? I am quite reluctant since I wrote most of the code, and also sine you didn't set it to `needs_review`.



---

archive/issue_events_264399.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-09-04T00:14:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18600#event-264399"
}
```



---

archive/issue_events_264400.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-09-04T00:14:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18600#event-264400"
}
```



---

archive/issue_events_264401.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-09-04T00:30:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18600#event-264401"
}
```



---

archive/issue_events_264402.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-09-04T00:30:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18600#event-264402"
}
```



---

archive/issue_comments_258695.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\n- `The integral is always chosen so the constant term is 0.` -> `... so that ...`\n- inconsistency between dense and sparse\n\n```\nsage: R.<x> = PolynomialRing(Zmod(4), sparse=False)\nsage: p = x**4 + 1\nsage: p.integral()\nx^5 + x\nsage: R.<x> = PolynomialRing(Zmod(4), sparse=True)\nsage: p = x**4 + 1\nsage: p.integral()\nTraceback (most recent call last):\n...\nTypeError: self must be an integral domain.\n```",
    "created_at": "2015-09-04T00:30:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18600#issuecomment-258695",
    "user": "https://github.com/videlec"
}
```

<div id="comment:11" align="right">comment:11</div>

- `The integral is always chosen so the constant term is 0.` -> `... so that ...`
- inconsistency between dense and sparse

```
sage: R.<x> = PolynomialRing(Zmod(4), sparse=False)
sage: p = x**4 + 1
sage: p.integral()
x^5 + x
sage: R.<x> = PolynomialRing(Zmod(4), sparse=True)
sage: p = x**4 + 1
sage: p.integral()
Traceback (most recent call last):
...
TypeError: self must be an integral domain.
```



---

archive/issue_comments_258696.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@videlec](#comment:11):\n> - inconsistency between dense and sparse\n> \n> ```\n> sage: R.<x> = PolynomialRing(Zmod(4), sparse=False)\n> sage: p = x**4 + 1\n> sage: p.integral()\n> x^5 + x\n> sage: R.<x> = PolynomialRing(Zmod(4), sparse=True)\n> sage: p = x**4 + 1\n> sage: p.integral()\n> Traceback (most recent call last):\n> ...\n> TypeError: self must be an integral domain.\n> ```\n\nRight, I should mimick what you did for the dense case. Before I do this, I actually have a question on what you wrote:\n\n```python\n        cm = sage.structure.element.get_coercion_model()\n        try:\n            S = cm.bin_op(R.one(), ZZ.one(), operator.div).parent()\n            Q = S.base_ring()\n        except TypeError:\n            Q = (R.base_ring().one()/ZZ.one()).parent()\n            S = R.change_ring(Q)\n```\nI don't get what you consider `ZZ.one()` instead of `R.one()` or even better `R.base_ring.one()`. I have the following behavior:\n\n```python\nsage: R.<x> = Zmod(4)[]\nsage: cm.bin_op(R.one(),ZZ.one(),operator.div).parent()\nTraceback (most recent call last):\n...\nTypeError: self must be an integral domain.\nsage: cm.bin_op(R.one(),R.one(),operator.div).parent()\nTraceback (most recent call last):\n...\nTypeError: self must be an integral domain.\nsage: cm.bin_op(R.one(),R.base_ring().one(),operator.div).parent()\nUnivariate Polynomial Ring in x over Ring of integers modulo 4\n```\n\nand\n\n```python\nsage: R.<x> = ZZ[]\nsage: cm.bin_op(R.one(),R.base_ring().one(),operator.div).parent()\nUnivariate Polynomial Ring in x over Rational Field\nsage: R.<x> = ZZ['y'][]\nsage: cm.bin_op(R.one(),R.base_ring().one(),operator.div).parent()\nUnivariate Polynomial Ring in x over Fraction Field of Univariate Polynomial Ring in y over Integer Ring\n```\n\nIf I understand correctly, using `R.base_ring.one()` may fix the issue of your `TODO`. What do you think of this?",
    "created_at": "2015-09-04T09:11:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18600#issuecomment-258696",
    "user": "https://github.com/bgrenet"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@videlec](#comment:11):
> - inconsistency between dense and sparse
> 
> ```
> sage: R.<x> = PolynomialRing(Zmod(4), sparse=False)
> sage: p = x**4 + 1
> sage: p.integral()
> x^5 + x
> sage: R.<x> = PolynomialRing(Zmod(4), sparse=True)
> sage: p = x**4 + 1
> sage: p.integral()
> Traceback (most recent call last):
> ...
> TypeError: self must be an integral domain.
> ```

Right, I should mimick what you did for the dense case. Before I do this, I actually have a question on what you wrote:

```python
        cm = sage.structure.element.get_coercion_model()
        try:
            S = cm.bin_op(R.one(), ZZ.one(), operator.div).parent()
            Q = S.base_ring()
        except TypeError:
            Q = (R.base_ring().one()/ZZ.one()).parent()
            S = R.change_ring(Q)
```
I don't get what you consider `ZZ.one()` instead of `R.one()` or even better `R.base_ring.one()`. I have the following behavior:

```python
sage: R.<x> = Zmod(4)[]
sage: cm.bin_op(R.one(),ZZ.one(),operator.div).parent()
Traceback (most recent call last):
...
TypeError: self must be an integral domain.
sage: cm.bin_op(R.one(),R.one(),operator.div).parent()
Traceback (most recent call last):
...
TypeError: self must be an integral domain.
sage: cm.bin_op(R.one(),R.base_ring().one(),operator.div).parent()
Univariate Polynomial Ring in x over Ring of integers modulo 4
```

and

```python
sage: R.<x> = ZZ[]
sage: cm.bin_op(R.one(),R.base_ring().one(),operator.div).parent()
Univariate Polynomial Ring in x over Rational Field
sage: R.<x> = ZZ['y'][]
sage: cm.bin_op(R.one(),R.base_ring().one(),operator.div).parent()
Univariate Polynomial Ring in x over Fraction Field of Univariate Polynomial Ring in y over Integer Ring
```

If I understand correctly, using `R.base_ring.one()` may fix the issue of your `TODO`. What do you think of this?



---

archive/issue_comments_258697.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nActually, this yields other problems... And with my proposal, you get the following behavior which may not be wanted:\n\n```python\nsage: A.<a1, a2> = PolynomialRing(ZZ)\nsage: B.<b> = PolynomialRing(A)\nsage: C.<c> = PowerSeriesRing(B)\nsage: R.<x> = PolynomialRing(C)\nsage: f = a2*x^2 + c*x - a1*b\nsage: f.parent()\nUnivariate Polynomial Ring in x over Power Series Ring in c over Univariate Polynomial Ring in b over Multivariate Polynomial Ring in a1, a2 over Integer Ring\nsage: f.integral().parent()\nUnivariate Polynomial Ring in x over Fraction Field of Power Series Ring in c over Univariate Polynomial Ring in b over Multivariate Polynomial Ring in a1, a2 over Integer Ring\n```",
    "created_at": "2015-09-04T13:55:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18600#issuecomment-258697",
    "user": "https://github.com/bgrenet"
}
```

<div id="comment:13" align="right">comment:13</div>

Actually, this yields other problems... And with my proposal, you get the following behavior which may not be wanted:

```python
sage: A.<a1, a2> = PolynomialRing(ZZ)
sage: B.<b> = PolynomialRing(A)
sage: C.<c> = PowerSeriesRing(B)
sage: R.<x> = PolynomialRing(C)
sage: f = a2*x^2 + c*x - a1*b
sage: f.parent()
Univariate Polynomial Ring in x over Power Series Ring in c over Univariate Polynomial Ring in b over Multivariate Polynomial Ring in a1, a2 over Integer Ring
sage: f.integral().parent()
Univariate Polynomial Ring in x over Fraction Field of Power Series Ring in c over Univariate Polynomial Ring in b over Multivariate Polynomial Ring in a1, a2 over Integer Ring
```



---

archive/issue_comments_258698.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c4575ff54cbefa02da3f488021470839ffd1e347\">c4575ff</a></td><td><code>Merge branch 'public/18600' of git://trac.sagemath.org/sage into t18600_sparse_polys</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6a8fb145b6ed55a1d73dd18ebaa89bd3c4d7bccd\">6a8fb14</a></td><td><code>#18600: \"... so the constant term is 0\" -> \"... so that...\"</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f2b57e3c6d4ad560d378d87bad8490f9efbb4b0b\">f2b57e3</a></td><td><code>#18600: Handle non integral domains for sparse poly</code></td></tr></table>\n",
    "created_at": "2015-09-04T14:25:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18600#issuecomment-258698",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c4575ff54cbefa02da3f488021470839ffd1e347">c4575ff</a></td><td><code>Merge branch 'public/18600' of git://trac.sagemath.org/sage into t18600_sparse_polys</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6a8fb145b6ed55a1d73dd18ebaa89bd3c4d7bccd">6a8fb14</a></td><td><code>#18600: "... so the constant term is 0" -> "... so that..."</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f2b57e3c6d4ad560d378d87bad8490f9efbb4b0b">f2b57e3</a></td><td><code>#18600: Handle non integral domains for sparse poly</code></td></tr></table>




---

archive/issue_comments_258699.json:
```json
{
    "body": "Changed commit from **[`e75ab73`](https://github.com/sagemath/sagetrac-mirror/commit/e75ab73b3b2e0bc3a40105640d0572b1b6af9cea)** to **[`f2b57e3`](https://github.com/sagemath/sagetrac-mirror/commit/f2b57e3c6d4ad560d378d87bad8490f9efbb4b0b)**",
    "created_at": "2015-09-04T14:25:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18600#issuecomment-258699",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e75ab73`](https://github.com/sagemath/sagetrac-mirror/commit/e75ab73b3b2e0bc3a40105640d0572b1b6af9cea)** to **[`f2b57e3`](https://github.com/sagemath/sagetrac-mirror/commit/f2b57e3c6d4ad560d378d87bad8490f9efbb4b0b)**



---

archive/issue_events_264403.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-09-04T14:27:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18600#event-264403"
}
```



---

archive/issue_events_264404.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-09-04T14:27:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18600#event-264404"
}
```



---

archive/issue_comments_258700.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\n- ` if not isinstance(degree, int) and not isinstance(degree, Integer)` -> `not isinstance(degree, (int,Integer))`.\n\n- after `OUTPUT:` in the docstring of `newton_slopes` you should add a line break\n\n- you can do one liners (you are not obliged though)\n\n```\nd = {degree-k: v for k,v in self.__coeffs.iteritems() if degree >= k}\n```\n\n- why are you keeping a method `newton_slopes` in both `polynomial_element.Polynomial` and `polynomial_element_generic.Polynomial_generic_sparse`? The algorithm does not seem to use much about the sparse structure. Moreover, why their arguments differ?",
    "created_at": "2015-09-04T17:16:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18600#issuecomment-258700",
    "user": "https://github.com/videlec"
}
```

<div id="comment:16" align="right">comment:16</div>

- ` if not isinstance(degree, int) and not isinstance(degree, Integer)` -> `not isinstance(degree, (int,Integer))`.

- after `OUTPUT:` in the docstring of `newton_slopes` you should add a line break

- you can do one liners (you are not obliged though)

```
d = {degree-k: v for k,v in self.__coeffs.iteritems() if degree >= k}
```

- why are you keeping a method `newton_slopes` in both `polynomial_element.Polynomial` and `polynomial_element_generic.Polynomial_generic_sparse`? The algorithm does not seem to use much about the sparse structure. Moreover, why their arguments differ?



---

archive/issue_events_264405.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-09-04T17:16:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18600#event-264405"
}
```



---

archive/issue_events_264406.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-09-04T17:16:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18600#event-264406"
}
```



---

archive/issue_comments_258701.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ef2d432fcd405893326e3541a1f6a1b7016f708d\">ef2d432</a></td><td><code>#18600: merged two 'isinstance'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7038a41f5228a41fce4ed11ca9811447d57076f\">d7038a4</a></td><td><code>#18600: Docstring formatting</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e021276b5e043e066842b4e6e3644d489626deab\">e021276</a></td><td><code>#18600: one-liners</code></td></tr></table>\n",
    "created_at": "2015-09-08T13:27:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18600#issuecomment-258701",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ef2d432fcd405893326e3541a1f6a1b7016f708d">ef2d432</a></td><td><code>#18600: merged two 'isinstance'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7038a41f5228a41fce4ed11ca9811447d57076f">d7038a4</a></td><td><code>#18600: Docstring formatting</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e021276b5e043e066842b4e6e3644d489626deab">e021276</a></td><td><code>#18600: one-liners</code></td></tr></table>




---

archive/issue_comments_258702.json:
```json
{
    "body": "Changed commit from **[`f2b57e3`](https://github.com/sagemath/sagetrac-mirror/commit/f2b57e3c6d4ad560d378d87bad8490f9efbb4b0b)** to **[`e021276`](https://github.com/sagemath/sagetrac-mirror/commit/e021276b5e043e066842b4e6e3644d489626deab)**",
    "created_at": "2015-09-08T13:27:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18600#issuecomment-258702",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f2b57e3`](https://github.com/sagemath/sagetrac-mirror/commit/f2b57e3c6d4ad560d378d87bad8490f9efbb4b0b)** to **[`e021276`](https://github.com/sagemath/sagetrac-mirror/commit/e021276b5e043e066842b4e6e3644d489626deab)**



---

archive/issue_comments_258703.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nWhen writing a comment like this\n\n```\n# But it does not work in all cases!!\n```\nyou should be explicit about the cases where it does not work. Just saying \"it sometimes does not work\" is not sufficient justification.",
    "created_at": "2015-09-08T13:32:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18600#issuecomment-258703",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:18" align="right">comment:18</div>

When writing a comment like this

```
# But it does not work in all cases!!
```
you should be explicit about the cases where it does not work. Just saying "it sometimes does not work" is not sufficient justification.



---

archive/issue_comments_258704.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@videlec](#comment:16):\n> - ` if not isinstance(degree, int) and not isinstance(degree, Integer)` -> `not isinstance(degree, (int,Integer))`.\n\nDone.\n\n> - after `OUTPUT:` in the docstring of `newton_slopes` you should add a line break\n\nDone.\n\n> - you can do one liners (you are not obliged though)\n> \n> ```\n> d = {degree-k: v for k,v in self.__coeffs.iteritems() if degree >= k}\n> ```\n\nDone.\n \n> - why are you keeping a method `newton_slopes` in both `polynomial_element.Polynomial` and `polynomial_element_generic.Polynomial_generic_sparse`? The algorithm does not seem to use much about the sparse structure. Moreover, why their arguments differ?\n\nThe rationale is that for very sparse polynomials, one may want to get the newton slopes in a \"compressed\" format, that is as a list of segments defined by their slope and length rather than as a (very long) list of length-1 segments solely defined by their slope. I decided to implement this \"compressed\" output for sparse polynomials only since this feature seem(ed) mostly useful for sparse polynomials. \n\nA modification I could do is to move my implementation in the `Polynomial` class. Do yo think it would be the right thing to do?",
    "created_at": "2015-09-08T13:36:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18600#issuecomment-258704",
    "user": "https://github.com/bgrenet"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@videlec](#comment:16):
> - ` if not isinstance(degree, int) and not isinstance(degree, Integer)` -> `not isinstance(degree, (int,Integer))`.

Done.

> - after `OUTPUT:` in the docstring of `newton_slopes` you should add a line break

Done.

> - you can do one liners (you are not obliged though)
> 
> ```
> d = {degree-k: v for k,v in self.__coeffs.iteritems() if degree >= k}
> ```

Done.
 
> - why are you keeping a method `newton_slopes` in both `polynomial_element.Polynomial` and `polynomial_element_generic.Polynomial_generic_sparse`? The algorithm does not seem to use much about the sparse structure. Moreover, why their arguments differ?

The rationale is that for very sparse polynomials, one may want to get the newton slopes in a "compressed" format, that is as a list of segments defined by their slope and length rather than as a (very long) list of length-1 segments solely defined by their slope. I decided to implement this "compressed" output for sparse polynomials only since this feature seem(ed) mostly useful for sparse polynomials. 

A modification I could do is to move my implementation in the `Polynomial` class. Do yo think it would be the right thing to do?



---

archive/issue_comments_258705.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@bgrenet](#comment:19):\n> Replying to [@videlec](#comment:16):\n> > - why are you keeping a method `newton_slopes` in both `polynomial_element.Polynomial` and `polynomial_element_generic.Polynomial_generic_sparse`? The algorithm does not seem to use much about the sparse structure. Moreover, why their arguments differ?\n\n> \n> The rationale is that for very sparse polynomials, one may want to get the newton slopes in a \"compressed\" format, that is as a list of segments defined by their slope and length rather than as a (very long) list of length-1 segments solely defined by their slope. I decided to implement this \"compressed\" output for sparse polynomials only since this feature seem(ed) mostly useful for sparse polynomials. \n> \n> A modification I could do is to move my implementation in the `Polynomial` class. Do yo think it would be the right thing to do?\n\nI understand the need of the argument. But if it also makes sense at the level of `Polynomial` then yes, do it there. That way there will only be one implementation and one signature.\n\nVincent",
    "created_at": "2015-09-08T23:20:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18600#issuecomment-258705",
    "user": "https://github.com/videlec"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@bgrenet](#comment:19):
> Replying to [@videlec](#comment:16):
> > - why are you keeping a method `newton_slopes` in both `polynomial_element.Polynomial` and `polynomial_element_generic.Polynomial_generic_sparse`? The algorithm does not seem to use much about the sparse structure. Moreover, why their arguments differ?

> 
> The rationale is that for very sparse polynomials, one may want to get the newton slopes in a "compressed" format, that is as a list of segments defined by their slope and length rather than as a (very long) list of length-1 segments solely defined by their slope. I decided to implement this "compressed" output for sparse polynomials only since this feature seem(ed) mostly useful for sparse polynomials. 
> 
> A modification I could do is to move my implementation in the `Polynomial` class. Do yo think it would be the right thing to do?

I understand the need of the argument. But if it also makes sense at the level of `Polynomial` then yes, do it there. That way there will only be one implementation and one signature.

Vincent



---

archive/issue_comments_258706.json:
```json
{
    "body": "Changed commit from **[`e021276`](https://github.com/sagemath/sagetrac-mirror/commit/e021276b5e043e066842b4e6e3644d489626deab)** to **[`4a44486`](https://github.com/sagemath/sagetrac-mirror/commit/4a4448604662733d1dc1ddf7e1f867e54be23af2)**",
    "created_at": "2015-09-09T09:03:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18600#issuecomment-258706",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e021276`](https://github.com/sagemath/sagetrac-mirror/commit/e021276b5e043e066842b4e6e3644d489626deab)** to **[`4a44486`](https://github.com/sagemath/sagetrac-mirror/commit/4a4448604662733d1dc1ddf7e1f867e54be23af2)**



---

archive/issue_comments_258707.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4a4448604662733d1dc1ddf7e1f867e54be23af2\">4a44486</a></td><td><code>#18600: Move newton_slopes to class Polynomial</code></td></tr></table>\n",
    "created_at": "2015-09-09T09:03:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18600#issuecomment-258707",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4a4448604662733d1dc1ddf7e1f867e54be23af2">4a44486</a></td><td><code>#18600: Move newton_slopes to class Polynomial</code></td></tr></table>




---

archive/issue_events_264407.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-09-09T09:04:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18600#event-264407"
}
```



---

archive/issue_events_264408.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-09-09T09:04:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18600#event-264408"
}
```



---

archive/issue_comments_258708.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nI moved the implementation to `Polynomial`. It actually make more sense.",
    "created_at": "2015-09-09T09:04:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18600#issuecomment-258708",
    "user": "https://github.com/bgrenet"
}
```

<div id="comment:22" align="right">comment:22</div>

I moved the implementation to `Polynomial`. It actually make more sense.



---

archive/issue_comments_258709.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nLet it go. These are nice improvements to sparse polynomials. Thanks.",
    "created_at": "2015-09-15T01:06:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18600#issuecomment-258709",
    "user": "https://github.com/videlec"
}
```

<div id="comment:23" align="right">comment:23</div>

Let it go. These are nice improvements to sparse polynomials. Thanks.



---

archive/issue_events_264409.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-09-15T01:06:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18600#event-264409"
}
```



---

archive/issue_events_264410.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-09-15T01:06:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18600#event-264410"
}
```



---

archive/issue_comments_258710.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nThanks for the help!",
    "created_at": "2015-09-15T09:03:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18600#issuecomment-258710",
    "user": "https://github.com/bgrenet"
}
```

<div id="comment:24" align="right">comment:24</div>

Thanks for the help!



---

archive/issue_comments_258711.json:
```json
{
    "body": "Changed branch from **[public/18600](https://github.com/sagemath/sagetrac-mirror/tree/public/18600)** to **[`4a44486`](https://github.com/sagemath/sagetrac-mirror/commit/4a4448604662733d1dc1ddf7e1f867e54be23af2)**",
    "created_at": "2015-09-15T22:30:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18600#issuecomment-258711",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/18600](https://github.com/sagemath/sagetrac-mirror/tree/public/18600)** to **[`4a44486`](https://github.com/sagemath/sagetrac-mirror/commit/4a4448604662733d1dc1ddf7e1f867e54be23af2)**



---

archive/issue_events_264411.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-09-15T22:30:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18600#event-264411"
}
```



---

archive/issue_events_264412.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "1d0b87a4a9d7c7dcc1bc59a9da58de2c31121ac6",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-09-15T22:30:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/18600",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18600#event-264412"
}
```
