# Issue 18515: LatticePoset: add sublattice()

archive/issues_018278.json:
```json
{
    "body": "Add a function to get smallest sublattice of the lattice containing given elements.\n\nCC:  @fchapoton @nathanncohen\n\nBranch/Commit: a86919aedb982998f23bd2c6eaf523caf1562c27\n\nReviewer: Nathann Cohen, Jori M\u00e4ntysalo\n\nAuthor: Jori M\u00e4ntysalo, Nathann Cohen\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/18515\n\n",
    "closed_at": "2015-05-27T22:09:23Z",
    "created_at": "2015-05-26T11:05:37Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.8",
    "title": "LatticePoset: add sublattice()",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18515",
    "user": "https://github.com/jm58660"
}
```
Add a function to get smallest sublattice of the lattice containing given elements.

CC:  @fchapoton @nathanncohen

Branch/Commit: a86919aedb982998f23bd2c6eaf523caf1562c27

Reviewer: Nathann Cohen, Jori Mäntysalo

Author: Jori Mäntysalo, Nathann Cohen

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/18515





---

archive/issue_comments_327866.json:
```json
{
    "body": "Changing branch from \"\" to \"u/jmantysalo/latticeposet__add_sublattice__\"",
    "created_at": "2015-05-26T11:38:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18515",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18515#issuecomment-327866",
    "user": "https://github.com/jm58660"
}
```

Changing branch from "" to "u/jmantysalo/latticeposet__add_sublattice__"



---

archive/issue_comments_327867.json:
```json
{
    "body": "Changing author from \"\" to \"Jori M\u00e4ntysalo\"",
    "created_at": "2015-05-26T11:40:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18515",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18515#issuecomment-327867",
    "user": "https://github.com/jm58660"
}
```

Changing author from "" to "Jori Mäntysalo"



---

archive/issue_comments_327868.json:
```json
{
    "body": "Changing commit from \"\" to \"54d912c9e08792b278a6e86b37a572f87f27746f\"",
    "created_at": "2015-05-26T11:40:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18515",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18515#issuecomment-327868",
    "user": "https://github.com/jm58660"
}
```

Changing commit from "" to "54d912c9e08792b278a6e86b37a572f87f27746f"



---

archive/issue_comments_327869.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-05-26T11:40:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18515",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18515#issuecomment-327869",
    "user": "https://github.com/jm58660"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_327870.json:
```json
{
    "body": "<a id='comment:2'></a>\nSlooow. Better than nothing. Needs review.\n  \n---\nNew commits:\n|                                                                                                                                          |                   |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------|\n|[6b9a03b](https://github.com/sagemath/sagetrac-mirror/commit/6b9a03b6f4464c1075cabca53b73a63c35ea3793)|`Added a function.`|\n|[54d912c](https://github.com/sagemath/sagetrac-mirror/commit/54d912c9e08792b278a6e86b37a572f87f27746f)|`Removed spaces.`|",
    "created_at": "2015-05-26T11:40:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18515",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18515#issuecomment-327870",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:2'></a>
Slooow. Better than nothing. Needs review.
  
---
New commits:
|                                                                                                                                          |                   |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------|
|[6b9a03b](https://github.com/sagemath/sagetrac-mirror/commit/6b9a03b6f4464c1075cabca53b73a63c35ea3793)|`Added a function.`|
|[54d912c](https://github.com/sagemath/sagetrac-mirror/commit/54d912c9e08792b278a6e86b37a572f87f27746f)|`Removed spaces.`|



---

archive/issue_comments_327871.json:
```json
{
    "body": "Changing commit from \"54d912c9e08792b278a6e86b37a572f87f27746f\" to \"34a588d1878d613b8e36736a625be1e49d67be77\"",
    "created_at": "2015-05-26T11:43:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18515",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18515#issuecomment-327871",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "54d912c9e08792b278a6e86b37a572f87f27746f" to "34a588d1878d613b8e36736a625be1e49d67be77"



---

archive/issue_comments_327872.json:
```json
{
    "body": "<a id='comment:3'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                              |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|\n|[34a588d](https://github.com/sagemath/sagetrac-mirror/commit/34a588d1878d613b8e36736a625be1e49d67be77)|`Arghs, should return a lattice, not a poset.`|",
    "created_at": "2015-05-26T11:43:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18515",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18515#issuecomment-327872",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                              |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|
|[34a588d](https://github.com/sagemath/sagetrac-mirror/commit/34a588d1878d613b8e36736a625be1e49d67be77)|`Arghs, should return a lattice, not a poset.`|



---

archive/issue_comments_327873.json:
```json
{
    "body": "Changing branch from \"u/jmantysalo/latticeposet__add_sublattice__\" to \"u/deinst/latticeposet__add_sublattice__\"",
    "created_at": "2015-05-27T03:34:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18515",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18515#issuecomment-327873",
    "user": "https://github.com/deinst"
}
```

Changing branch from "u/jmantysalo/latticeposet__add_sublattice__" to "u/deinst/latticeposet__add_sublattice__"



---

archive/issue_comments_327874.json:
```json
{
    "body": "Changing commit from \"34a588d1878d613b8e36736a625be1e49d67be77\" to \"47f2ce7a7799982ea29157c932bf91b31b78a3cc\"",
    "created_at": "2015-05-27T03:40:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18515",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18515#issuecomment-327874",
    "user": "https://github.com/deinst"
}
```

Changing commit from "34a588d1878d613b8e36736a625be1e49d67be77" to "47f2ce7a7799982ea29157c932bf91b31b78a3cc"



---

archive/issue_comments_327875.json:
```json
{
    "body": "<a id='comment:5'></a>\nI think there is a typo. I've changed the code to what I think is correct.  The previous code did the following:\n\n```\nsage: L = Posets.BooleanLattice(3)\nsage: L.sublattice([3,5,6,7])\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-14-837853635c8a> in <module>()\n----> 1 L.sublattice([Integer(3),Integer(5),Integer(6),Integer(7)])\n\n/Users/davideinstein/projects/sage/local/lib/python2.7/site-packages/sage/combinat/posets/lattices.pyc in sublattice(self, elms)\n    881                     elms.append(m)\n    882                     n=True\n--> 883         return LatticePoset(self.subposet(elms))\n    884 \n    885 ############################################################################\n\n/Users/davideinstein/projects/sage/local/lib/python2.7/site-packages/sage/combinat/posets/lattices.pyc in LatticePoset(data, *args, **options)\n    406     P = Poset(data, *args, **options)\n    407     if not P.is_lattice():\n--> 408         raise ValueError(\"Not a lattice.\")\n    409 \n    410     return FiniteLatticePoset(P, category = FiniteLatticePosets(), facade = P._is_facade)\n\nValueError: Not a lattice.\n```\n\nAlso, could you put whitespace around `=` as suggested by http://doc.sagemath.org/html/en/developer/coding_basics.html#python-code-style\n\n---\nNew commits:\n|                                                                                                                                          |                     |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------|\n|[47f2ce7](https://github.com/sagemath/sagetrac-mirror/commit/47f2ce7a7799982ea29157c932bf91b31b78a3cc)|`Fixed probable typo`|",
    "created_at": "2015-05-27T03:40:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18515",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18515#issuecomment-327875",
    "user": "https://github.com/deinst"
}
```

<a id='comment:5'></a>
I think there is a typo. I've changed the code to what I think is correct.  The previous code did the following:

```
sage: L = Posets.BooleanLattice(3)
sage: L.sublattice([3,5,6,7])
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-14-837853635c8a> in <module>()
----> 1 L.sublattice([Integer(3),Integer(5),Integer(6),Integer(7)])

/Users/davideinstein/projects/sage/local/lib/python2.7/site-packages/sage/combinat/posets/lattices.pyc in sublattice(self, elms)
    881                     elms.append(m)
    882                     n=True
--> 883         return LatticePoset(self.subposet(elms))
    884 
    885 ############################################################################

/Users/davideinstein/projects/sage/local/lib/python2.7/site-packages/sage/combinat/posets/lattices.pyc in LatticePoset(data, *args, **options)
    406     P = Poset(data, *args, **options)
    407     if not P.is_lattice():
--> 408         raise ValueError("Not a lattice.")
    409 
    410     return FiniteLatticePoset(P, category = FiniteLatticePosets(), facade = P._is_facade)

ValueError: Not a lattice.
```

Also, could you put whitespace around `=` as suggested by http://doc.sagemath.org/html/en/developer/coding_basics.html#python-code-style

---
New commits:
|                                                                                                                                          |                     |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------|
|[47f2ce7](https://github.com/sagemath/sagetrac-mirror/commit/47f2ce7a7799982ea29157c932bf91b31b78a3cc)|`Fixed probable typo`|



---

archive/issue_comments_327876.json:
```json
{
    "body": "<a id='comment:6'></a>\nOtherwise it looks good to me.",
    "created_at": "2015-05-27T03:44:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18515",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18515#issuecomment-327876",
    "user": "https://github.com/deinst"
}
```

<a id='comment:6'></a>
Otherwise it looks good to me.



---

archive/issue_comments_327877.json:
```json
{
    "body": "<a id='comment:7'></a>\nThanks! And yes, there was a stupid typo. I'll try to remember spaces from now on. (A promise I have made before...)\n\nSo, who's going to review this?",
    "created_at": "2015-05-27T05:37:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18515",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18515#issuecomment-327877",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:7'></a>
Thanks! And yes, there was a stupid typo. I'll try to remember spaces from now on. (A promise I have made before...)

So, who's going to review this?



---

archive/issue_comments_327878.json:
```json
{
    "body": "<a id='comment:8'></a>\nYo !\n\nI added a commit at `public/18515` which improves the algorithm a bit. In general, try to avoid using 'Subsets' (or any combinat stuff) if you can avoid it: they implement their code to deal with infinitely more abstraction than you usually need (categories, parents, elements, ...). \n\n```\nsage: type(Subsets([1,2,3],2).an_element())\n<class 'sage.sets.set.Set_object_enumerated_with_category'>\n```\n\nWhen you only need to enumerate pairs of points, the better is to use itertools:\n\n```\nsage: from itertools import combinations\nsage: list(combinations([1,2,3],2))\n[(1, 2), (1, 3), (2, 3)]\n```\n\nSimple, and more efficient.\n\n> So, who's going to review this?\n\n\nWe can review each other's commits, it is not forbidden. For as long as everything is doubled checked, no problem.\n\nNathann",
    "created_at": "2015-05-27T07:52:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18515",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18515#issuecomment-327878",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:8'></a>
Yo !

I added a commit at `public/18515` which improves the algorithm a bit. In general, try to avoid using 'Subsets' (or any combinat stuff) if you can avoid it: they implement their code to deal with infinitely more abstraction than you usually need (categories, parents, elements, ...). 

```
sage: type(Subsets([1,2,3],2).an_element())
<class 'sage.sets.set.Set_object_enumerated_with_category'>
```

When you only need to enumerate pairs of points, the better is to use itertools:

```
sage: from itertools import combinations
sage: list(combinations([1,2,3],2))
[(1, 2), (1, 3), (2, 3)]
```

Simple, and more efficient.

> So, who's going to review this?


We can review each other's commits, it is not forbidden. For as long as everything is doubled checked, no problem.

Nathann



---

archive/issue_comments_327879.json:
```json
{
    "body": "<a id='comment:9'></a>\nSeems good, but of course doesn't make that much difference than totally other algorithm mentioned in the note. I'll check the code of Nathann and then put this to positive review. (Assuming that deinst doesn't do it before that.)",
    "created_at": "2015-05-27T09:05:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18515",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18515#issuecomment-327879",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:9'></a>
Seems good, but of course doesn't make that much difference than totally other algorithm mentioned in the note. I'll check the code of Nathann and then put this to positive review. (Assuming that deinst doesn't do it before that.)



---

archive/issue_comments_327880.json:
```json
{
    "body": "Changing author from \"Jori M\u00e4ntysalo\" to \"Nathann Cohen\"",
    "created_at": "2015-05-27T09:53:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18515",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18515#issuecomment-327880",
    "user": "https://github.com/jm58660"
}
```

Changing author from "Jori Mäntysalo" to "Nathann Cohen"



---

archive/issue_comments_327881.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-05-27T09:53:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18515",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18515#issuecomment-327881",
    "user": "https://github.com/jm58660"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_327882.json:
```json
{
    "body": "<a id='comment:10'></a>\nWorks.\n\n---\nNew commits:\n|                                                                                                                                          |                                        |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|\n|[a86919a](https://github.com/sagemath/sagetrac-mirror/commit/a86919aedb982998f23bd2c6eaf523caf1562c27)|`trac #18515: A less wasteful algorithm`|",
    "created_at": "2015-05-27T09:53:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18515",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18515#issuecomment-327882",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:10'></a>
Works.

---
New commits:
|                                                                                                                                          |                                        |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|
|[a86919a](https://github.com/sagemath/sagetrac-mirror/commit/a86919aedb982998f23bd2c6eaf523caf1562c27)|`trac #18515: A less wasteful algorithm`|



---

archive/issue_comments_327883.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Jori M\u00e4ntysalo\"",
    "created_at": "2015-05-27T09:53:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18515",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18515#issuecomment-327883",
    "user": "https://github.com/jm58660"
}
```

Changing reviewer from "" to "Jori Mäntysalo"



---

archive/issue_comments_327884.json:
```json
{
    "body": "Changing branch from \"u/deinst/latticeposet__add_sublattice__\" to \"public/18515\"",
    "created_at": "2015-05-27T09:53:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18515",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18515#issuecomment-327884",
    "user": "https://github.com/jm58660"
}
```

Changing branch from "u/deinst/latticeposet__add_sublattice__" to "public/18515"



---

archive/issue_comments_327885.json:
```json
{
    "body": "Changing commit from \"47f2ce7a7799982ea29157c932bf91b31b78a3cc\" to \"a86919aedb982998f23bd2c6eaf523caf1562c27\"",
    "created_at": "2015-05-27T09:53:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18515",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18515#issuecomment-327885",
    "user": "https://github.com/jm58660"
}
```

Changing commit from "47f2ce7a7799982ea29157c932bf91b31b78a3cc" to "a86919aedb982998f23bd2c6eaf523caf1562c27"



---

archive/issue_comments_327886.json:
```json
{
    "body": "<a id='comment:11'></a>\n`;-)`",
    "created_at": "2015-05-27T11:29:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18515",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18515#issuecomment-327886",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:11'></a>
`;-)`



---

archive/issue_comments_327887.json:
```json
{
    "body": "Changing reviewer from \"Jori M\u00e4ntysalo\" to \"Nathann Cohen, Jori M\u00e4ntysalo\"",
    "created_at": "2015-05-27T11:29:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18515",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18515#issuecomment-327887",
    "user": "https://github.com/nathanncohen"
}
```

Changing reviewer from "Jori Mäntysalo" to "Nathann Cohen, Jori Mäntysalo"



---

archive/issue_comments_327888.json:
```json
{
    "body": "Changing author from \"Nathann Cohen\" to \"Jori M\u00e4ntysalo, Nathann Cohen\"",
    "created_at": "2015-05-27T11:29:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18515",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18515#issuecomment-327888",
    "user": "https://github.com/nathanncohen"
}
```

Changing author from "Nathann Cohen" to "Jori Mäntysalo, Nathann Cohen"



---

archive/issue_events_059194.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-05-27T22:09:23Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18515",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18515#event-59194"
}
```



---

archive/issue_comments_327889.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-05-27T22:09:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18515",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18515#issuecomment-327889",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_327890.json:
```json
{
    "body": "Changing branch from \"public/18515\" to \"a86919aedb982998f23bd2c6eaf523caf1562c27\"",
    "created_at": "2015-05-27T22:09:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18515",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18515#issuecomment-327890",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/18515" to "a86919aedb982998f23bd2c6eaf523caf1562c27"
