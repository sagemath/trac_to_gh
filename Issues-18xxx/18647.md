# Issue 18647: Automatically update new-style optional packages

archive/issues_018410.json:
```json
{
    "assignees": [],
    "body": "With this branch, new-style installed optional packages which have not been installed to their latest available version are automatically updated during 'make'.\n\nNathann\n\nCC:  @vbraun @jdemeyer @jhpalmieri @kcrisman\n\nBranch/Commit: **[`68f4d0b`](https://github.com/sagemath/sagetrac-mirror/commit/68f4d0b138108f33e45452cdb3e7a67232cbac78)**\n\nReviewer: **Jeroen Demeyer**\n\nAuthor: **Nathann Cohen**\n\nComponent: **build**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/18647_\n\n",
    "closed_at": "2015-06-11T22:23:33Z",
    "created_at": "2015-06-09T14:33:19Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Automatically update new-style optional packages",
    "type": "issue",
    "updated_at": "2015-06-11T22:23:33Z",
    "url": "https://github.com/sagemath/sage/issues/18647",
    "user": "https://github.com/nathanncohen"
}
```
With this branch, new-style installed optional packages which have not been installed to their latest available version are automatically updated during 'make'.

Nathann

CC:  @vbraun @jdemeyer @jhpalmieri @kcrisman

Branch/Commit: **[`68f4d0b`](https://github.com/sagemath/sagetrac-mirror/commit/68f4d0b138108f33e45452cdb3e7a67232cbac78)**

Reviewer: **Jeroen Demeyer**

Author: **Nathann Cohen**

Component: **build**

_Issue created by migration from https://trac.sagemath.org/ticket/18647_





---

archive/issue_events_265000.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-06-09T14:33:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18647#event-265000"
}
```



---

archive/issue_events_265001.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-06-09T14:33:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "000080",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18647#event-265001"
}
```



---

archive/issue_events_265002.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-06-09T14:33:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18647#event-265002"
}
```



---

archive/issue_events_265003.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-06-09T14:33:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18647#event-265003"
}
```



---

archive/issue_comments_259651.json:
```json
{
    "body": "Branch: **[public/18647](https://github.com/sagemath/sagetrac-mirror/tree/public/18647)**",
    "created_at": "2015-06-09T14:34:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259651",
    "user": "https://github.com/nathanncohen"
}
```

Branch: **[public/18647](https://github.com/sagemath/sagetrac-mirror/tree/public/18647)**



---

archive/issue_events_265004.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-06-09T14:34:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18647#event-265004"
}
```



---

archive/issue_comments_259652.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/912753b28a7883185031381f43c12e032b9aa802\">912753b</a></td><td><code>trac #18647: Automatically update new-style optional packages</code></td></tr></table>\n",
    "created_at": "2015-06-09T14:34:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259652",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/912753b28a7883185031381f43c12e032b9aa802">912753b</a></td><td><code>trac #18647: Automatically update new-style optional packages</code></td></tr></table>




---

archive/issue_comments_259653.json:
```json
{
    "body": "Commit: **[`912753b`](https://github.com/sagemath/sagetrac-mirror/commit/912753b28a7883185031381f43c12e032b9aa802)**",
    "created_at": "2015-06-09T14:34:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259653",
    "user": "https://github.com/nathanncohen"
}
```

Commit: **[`912753b`](https://github.com/sagemath/sagetrac-mirror/commit/912753b28a7883185031381f43c12e032b9aa802)**



---

archive/issue_comments_259654.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI would much prefer to add `$(OPTIONAL_INSTALLED_PACKAGES)` to `all-sage` instead of adding a new step in the `all` make rule.",
    "created_at": "2015-06-09T14:39:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259654",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:2" align="right">comment:2</div>

I would much prefer to add `$(OPTIONAL_INSTALLED_PACKAGES)` to `all-sage` instead of adding a new step in the `all` make rule.



---

archive/issue_comments_259655.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\n> I would much prefer to add `$(OPTIONAL_INSTALLED_PACKAGES)` to `all-sage` instead of adding a new step in the `all` make rule.\n\nThen you must figure out which optional packages depend on which standard packages.\n\n(it is not possible to add all standard packages as a dependency, as some 'optional' packages like python2 may also be standard in practice)",
    "created_at": "2015-06-09T14:49:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259655",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:3" align="right">comment:3</div>

> I would much prefer to add `$(OPTIONAL_INSTALLED_PACKAGES)` to `all-sage` instead of adding a new step in the `all` make rule.

Then you must figure out which optional packages depend on which standard packages.

(it is not possible to add all standard packages as a dependency, as some 'optional' packages like python2 may also be standard in practice)



---

archive/issue_comments_259656.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@nathanncohen](#comment:3):\n> > I would much prefer to add `$(OPTIONAL_INSTALLED_PACKAGES)` to `all-sage` instead of adding a new step in the `all` make rule.\n\n> \n> Then you must figure out which optional packages depend on which standard packages.\n\nIf the goal is to have more reliable optional packages, this needs to be done *anyway*. If some optional package depends on PARI and PARI gets rebuilt, then you really should rebuild the optional package too.",
    "created_at": "2015-06-09T15:04:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259656",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@nathanncohen](#comment:3):
> > I would much prefer to add `$(OPTIONAL_INSTALLED_PACKAGES)` to `all-sage` instead of adding a new step in the `all` make rule.

> 
> Then you must figure out which optional packages depend on which standard packages.

If the goal is to have more reliable optional packages, this needs to be done *anyway*. If some optional package depends on PARI and PARI gets rebuilt, then you really should rebuild the optional package too.



---

archive/issue_comments_259657.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\n> If the goal is to have more reliable optional packages, this needs to be done *anyway*. If some optional package depends on PARI and PARI gets rebuilt, then you really should rebuild the optional package too.\n\nIndeed, this is how it should have been implemented from the start. For you will agree that the problem already exists: if some optional package does not state its dependencies and if 'pari' (to take your example) is updated, the package is not re-built. At the moment, only gcc, scons, python2 and python3 state their dependencies.\n\nThus, and similarly to our recent debate on #18456, what you ask for is a very sensible bugfix for a pre-existing problem. You are welcome to address it -- and I will be glad to help -- but it is not a dependency of this ticket.\n\nNathann",
    "created_at": "2015-06-09T15:13:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259657",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:5" align="right">comment:5</div>

> If the goal is to have more reliable optional packages, this needs to be done *anyway*. If some optional package depends on PARI and PARI gets rebuilt, then you really should rebuild the optional package too.

Indeed, this is how it should have been implemented from the start. For you will agree that the problem already exists: if some optional package does not state its dependencies and if 'pari' (to take your example) is updated, the package is not re-built. At the moment, only gcc, scons, python2 and python3 state their dependencies.

Thus, and similarly to our recent debate on #18456, what you ask for is a very sensible bugfix for a pre-existing problem. You are welcome to address it -- and I will be glad to help -- but it is not a dependency of this ticket.

Nathann



---

archive/issue_comments_259658.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nBy the way, fixing the dependencies can be done quite easily: by adding the necessary information in the build/<package/dependencies files you will get the result that you want. And we can merge the two rules together once we are sure that no dependency is missing.",
    "created_at": "2015-06-09T15:16:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259658",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:6" align="right">comment:6</div>

By the way, fixing the dependencies can be done quite easily: by adding the necessary information in the build/<package/dependencies files you will get the result that you want. And we can merge the two rules together once we are sure that no dependency is missing.



---

archive/issue_comments_259659.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@nathanncohen](#comment:5):\n> Thus, and similarly to our recent debate on #18456, what you ask for is a very sensible bugfix for a pre-existing problem.\n\nBut setting up the right framework such that dependencies *can* be considered is within the scope of this ticket.\n\nEasy fix: set all dependencies of optional packages to `| $(STANDARD_PACKAGES)`, which in practice is the same as your current patch, but allows to write the correct dependencies later.",
    "created_at": "2015-06-09T15:23:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259659",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@nathanncohen](#comment:5):
> Thus, and similarly to our recent debate on #18456, what you ask for is a very sensible bugfix for a pre-existing problem.

But setting up the right framework such that dependencies *can* be considered is within the scope of this ticket.

Easy fix: set all dependencies of optional packages to `| $(STANDARD_PACKAGES)`, which in practice is the same as your current patch, but allows to write the correct dependencies later.



---

archive/issue_comments_259660.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@nathanncohen](#comment:3):\n> it is not possible to add all standard packages as a dependency, as some 'optional' packages like python2 may also be standard in practice\n\nSince many standard packages depend on Python, adding a dependency on `$(STANDARD_PACKAGES)` indirectly adds a dependency on Python.",
    "created_at": "2015-06-09T15:23:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259660",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@nathanncohen](#comment:3):
> it is not possible to add all standard packages as a dependency, as some 'optional' packages like python2 may also be standard in practice

Since many standard packages depend on Python, adding a dependency on `$(STANDARD_PACKAGES)` indirectly adds a dependency on Python.



---

archive/issue_comments_259661.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\n> Easy fix: set all dependencies of optional packages to `| $(STANDARD_PACKAGES)`, which in practice is the same as your current patch, but allows to write the correct dependencies later.\n\nDead right. Will be done in a second.",
    "created_at": "2015-06-09T15:25:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259661",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:9" align="right">comment:9</div>

> Easy fix: set all dependencies of optional packages to `| $(STANDARD_PACKAGES)`, which in practice is the same as your current patch, but allows to write the correct dependencies later.

Dead right. Will be done in a second.



---

archive/issue_comments_259662.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/287458d5b03be8b04dde32c6c904606e1ed951a6\">287458d</a></td><td><code>trac #18647: Automatically update new-style optional packages</code></td></tr></table>\n",
    "created_at": "2015-06-09T15:34:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259662",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/287458d5b03be8b04dde32c6c904606e1ed951a6">287458d</a></td><td><code>trac #18647: Automatically update new-style optional packages</code></td></tr></table>




---

archive/issue_comments_259663.json:
```json
{
    "body": "Changed commit from **[`912753b`](https://github.com/sagemath/sagetrac-mirror/commit/912753b28a7883185031381f43c12e032b9aa802)** to **[`287458d`](https://github.com/sagemath/sagetrac-mirror/commit/287458d5b03be8b04dde32c6c904606e1ed951a6)**",
    "created_at": "2015-06-09T15:34:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259663",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`912753b`](https://github.com/sagemath/sagetrac-mirror/commit/912753b28a7883185031381f43c12e032b9aa802)** to **[`287458d`](https://github.com/sagemath/sagetrac-mirror/commit/287458d5b03be8b04dde32c6c904606e1ed951a6)**



---

archive/issue_comments_259664.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nNot `mpir` and `gmp`.",
    "created_at": "2015-06-09T15:35:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259664",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:11" align="right">comment:11</div>

Not `mpir` and `gmp`.



---

archive/issue_events_265005.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-06-09T15:35:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18647#event-265005"
}
```



---

archive/issue_events_265006.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-06-09T15:35:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18647#event-265006"
}
```



---

archive/issue_comments_259665.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nAs a consequence: all optional packages have (and *MUST* have) a /dependencies file.\n\nShould we check this somewhere?",
    "created_at": "2015-06-09T15:35:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259665",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:12" align="right">comment:12</div>

As a consequence: all optional packages have (and *MUST* have) a /dependencies file.

Should we check this somewhere?



---

archive/issue_comments_259666.json:
```json
{
    "body": "Changed commit from **[`287458d`](https://github.com/sagemath/sagetrac-mirror/commit/287458d5b03be8b04dde32c6c904606e1ed951a6)** to **[`cca953e`](https://github.com/sagemath/sagetrac-mirror/commit/cca953e2a0cc3724877e845853df51efc47f2a24)**",
    "created_at": "2015-06-09T15:36:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259666",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`287458d`](https://github.com/sagemath/sagetrac-mirror/commit/287458d5b03be8b04dde32c6c904606e1ed951a6)** to **[`cca953e`](https://github.com/sagemath/sagetrac-mirror/commit/cca953e2a0cc3724877e845853df51efc47f2a24)**



---

archive/issue_comments_259667.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cca953e2a0cc3724877e845853df51efc47f2a24\">cca953e</a></td><td><code>trac #18647: Automatically update new-style optional packages</code></td></tr></table>\n",
    "created_at": "2015-06-09T15:36:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259667",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cca953e2a0cc3724877e845853df51efc47f2a24">cca953e</a></td><td><code>trac #18647: Automatically update new-style optional packages</code></td></tr></table>




---

archive/issue_comments_259668.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nRight. Fixed. Cursed be those non-optional optional packages.",
    "created_at": "2015-06-09T15:36:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259668",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:14" align="right">comment:14</div>

Right. Fixed. Cursed be those non-optional optional packages.



---

archive/issue_comments_259669.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@nathanncohen](#comment:14):\n> Right. Fixed. Cursed be those non-optional optional packages.\n\nWell, I proposed a new category for these packages :-)\n\nI also wonder if we can use\n\n```\nif [ -f $SAGE_SPKG_INST/$PKG_NAME-* ]\n```\nsince that will not work if there is more than 1 matching file.",
    "created_at": "2015-06-09T15:38:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259669",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@nathanncohen](#comment:14):
> Right. Fixed. Cursed be those non-optional optional packages.

Well, I proposed a new category for these packages :-)

I also wonder if we can use

```
if [ -f $SAGE_SPKG_INST/$PKG_NAME-* ]
```
since that will not work if there is more than 1 matching file.



---

archive/issue_comments_259670.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\n> Well, I proposed a new category for these packages :-)\n\nOh. The alternative guys?\n\n> I also wonder if we can use\n> \n> ```\n> if [ -f $SAGE_SPKG_INST/$PKG_NAME-* ]\n> ```\n> since that will not work if there is more than 1 matching file.\n\nI think that's okay, for you made it quite clear that a version number must be split from the name by a '-'? I don't mind adding code that checks that somewhere if you think it necessary, but renaming the packages that do not respect this may take quite some time.\n\nNathann",
    "created_at": "2015-06-09T15:42:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259670",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:16" align="right">comment:16</div>

> Well, I proposed a new category for these packages :-)

Oh. The alternative guys?

> I also wonder if we can use
> 
> ```
> if [ -f $SAGE_SPKG_INST/$PKG_NAME-* ]
> ```
> since that will not work if there is more than 1 matching file.

I think that's okay, for you made it quite clear that a version number must be split from the name by a '-'? I don't mind adding code that checks that somewhere if you think it necessary, but renaming the packages that do not respect this may take quite some time.

Nathann



---

archive/issue_comments_259671.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@nathanncohen](#comment:16):\n> I think that's okay\n\nRight, I agree.",
    "created_at": "2015-06-09T17:05:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259671",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@nathanncohen](#comment:16):
> I think that's okay

Right, I agree.



---

archive/issue_comments_259672.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI don't think this works correctly for `gcc`. If `gcc` needs to be reinstalled, it should be added to `$(TOOLCHAIN)`. The problem is that installing `gcc` while installing a different package will eventually lead to trouble.",
    "created_at": "2015-06-09T17:31:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259672",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:18" align="right">comment:18</div>

I don't think this works correctly for `gcc`. If `gcc` needs to be reinstalled, it should be added to `$(TOOLCHAIN)`. The problem is that installing `gcc` while installing a different package will eventually lead to trouble.



---

archive/issue_comments_259673.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nFor `gcc`, we already have logic in `build/install` to decide whether it should be (re-)installed. You shouldn't interfere with that.",
    "created_at": "2015-06-09T17:35:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259673",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:19" align="right">comment:19</div>

For `gcc`, we already have logic in `build/install` to decide whether it should be (re-)installed. You shouldn't interfere with that.



---

archive/issue_comments_259674.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nSo I filter it out?",
    "created_at": "2015-06-09T17:43:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259674",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:20" align="right">comment:20</div>

So I filter it out?



---

archive/issue_comments_259675.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@nathanncohen](#comment:20):\n> So I filter it out?\n\nOr change the `type` to something else (if you don't want to add a new type, it must be `base`)",
    "created_at": "2015-06-09T17:47:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259675",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@nathanncohen](#comment:20):
> So I filter it out?

Or change the `type` to something else (if you don't want to add a new type, it must be `base`)



---

archive/issue_comments_259676.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nHMmmmmmmm... If I rename it to 'base' it will be automatically installed. I'll just filter it out. Can you tell me what exactly is wrong if we leave it as it is? It will only force an update if it has already been installed, and if the version changes. It looks harmless?...\n\nNathann",
    "created_at": "2015-06-09T18:30:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259676",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:22" align="right">comment:22</div>

HMmmmmmmm... If I rename it to 'base' it will be automatically installed. I'll just filter it out. Can you tell me what exactly is wrong if we leave it as it is? It will only force an update if it has already been installed, and if the version changes. It looks harmless?...

Nathann



---

archive/issue_comments_259677.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@nathanncohen](#comment:22):\n> HMmmmmmmm... If I rename it to 'base' it will be automatically installed.\n\nWhy? Since when are we automatically installing `base` packages?\n\n> Can you tell me what exactly is wrong if we leave it as it is? It will only force an update if it has already been installed, and if the version changes. It looks harmless?...\n\nRead the last sentence of [comment:18]",
    "created_at": "2015-06-09T18:41:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259677",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@nathanncohen](#comment:22):
> HMmmmmmmm... If I rename it to 'base' it will be automatically installed.

Why? Since when are we automatically installing `base` packages?

> Can you tell me what exactly is wrong if we leave it as it is? It will only force an update if it has already been installed, and if the version changes. It looks harmless?...

Read the last sentence of [comment:18]



---

archive/issue_comments_259678.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\n> Why? Since when are we automatically installing `base` packages?\n\nWell, not automtically.. There is a 'base' rule in the makefile, but the dependencies are set manually. Probably because of gcc actually.\n\n> Read the last sentence of [comment:18]\n\nOkay, so tha's because gcc is gcc. I'll filter it out.\n\nNathann",
    "created_at": "2015-06-09T19:01:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259678",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:24" align="right">comment:24</div>

> Why? Since when are we automatically installing `base` packages?

Well, not automtically.. There is a 'base' rule in the makefile, but the dependencies are set manually. Probably because of gcc actually.

> Read the last sentence of [comment:18]

Okay, so tha's because gcc is gcc. I'll filter it out.

Nathann



---

archive/issue_comments_259679.json:
```json
{
    "body": "Changed commit from **[`cca953e`](https://github.com/sagemath/sagetrac-mirror/commit/cca953e2a0cc3724877e845853df51efc47f2a24)** to **[`4b55fc4`](https://github.com/sagemath/sagetrac-mirror/commit/4b55fc4e97952a83983c2015674462bb2f593db4)**",
    "created_at": "2015-06-09T19:07:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259679",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cca953e`](https://github.com/sagemath/sagetrac-mirror/commit/cca953e2a0cc3724877e845853df51efc47f2a24)** to **[`4b55fc4`](https://github.com/sagemath/sagetrac-mirror/commit/4b55fc4e97952a83983c2015674462bb2f593db4)**



---

archive/issue_comments_259680.json:
```json
{
    "body": "<div id=\"comment:25\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b55fc4e97952a83983c2015674462bb2f593db4\">4b55fc4</a></td><td><code>trac #18647: Filter gcc out</code></td></tr></table>\n",
    "created_at": "2015-06-09T19:07:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259680",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b55fc4e97952a83983c2015674462bb2f593db4">4b55fc4</a></td><td><code>trac #18647: Filter gcc out</code></td></tr></table>




---

archive/issue_events_265007.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-06-09T19:07:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18647#event-265007"
}
```



---

archive/issue_events_265008.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-06-09T19:07:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18647#event-265008"
}
```



---

archive/issue_comments_259681.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nI know you've done all of this work to create these files now, but if a package is optional and doesn't have a `dependencies` file, shouldn't we automatically set the dependencies to `| $(STANDARD_PACKAGES)`? That seems cleaner to me.",
    "created_at": "2015-06-09T20:30:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259681",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:27" align="right">comment:27</div>

I know you've done all of this work to create these files now, but if a package is optional and doesn't have a `dependencies` file, shouldn't we automatically set the dependencies to `| $(STANDARD_PACKAGES)`? That seems cleaner to me.



---

archive/issue_comments_259682.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\n> I know you've done all of this work to create these files now, but if a package is optional and doesn't have a `dependencies` file, shouldn't we automatically set the dependencies to `| $(STANDARD_PACKAGES)`? That seems cleaner to me.\n\nWell... There would be less things in the files for sure, but a new rule which is rather hard to figure out by yourself. Honestly I don't know... Jeroen?",
    "created_at": "2015-06-09T20:33:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259682",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:28" align="right">comment:28</div>

> I know you've done all of this work to create these files now, but if a package is optional and doesn't have a `dependencies` file, shouldn't we automatically set the dependencies to `| $(STANDARD_PACKAGES)`? That seems cleaner to me.

Well... There would be less things in the files for sure, but a new rule which is rather hard to figure out by yourself. Honestly I don't know... Jeroen?



---

archive/issue_comments_259683.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nIf a guy notices that his package depends on another package and wants to add the dependency, suddenly he would have to create the file and add the implicit dependency `| $(STANDARD_PACKAGES)`.",
    "created_at": "2015-06-09T20:36:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259683",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:29" align="right">comment:29</div>

If a guy notices that his package depends on another package and wants to add the dependency, suddenly he would have to create the file and add the implicit dependency `| $(STANDARD_PACKAGES)`.



---

archive/issue_comments_259684.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReally I do not know. I don't mind implementing it if you are both convinced that it is a good idea, but really I don't know.",
    "created_at": "2015-06-09T20:38:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259684",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:30" align="right">comment:30</div>

Really I do not know. I don't mind implementing it if you are both convinced that it is a good idea, but really I don't know.



---

archive/issue_comments_259685.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@nathanncohen](#comment:29):\n> If a guy notices that his package depends on another package and wants to add the dependency, suddenly he would have to create the file and add the implicit dependency `| $(STANDARD_PACKAGES)`.\n\nNo, the dependency `| $(STANDARD_PACKAGES)` is not a real dependency, it's just because we are too lazy to add the correct dependencies.\n\nSo, I think John's proposal might be good (but be sure to keep the empty dependencies for `mpir` and `gmp`)",
    "created_at": "2015-06-09T20:42:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259685",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@nathanncohen](#comment:29):
> If a guy notices that his package depends on another package and wants to add the dependency, suddenly he would have to create the file and add the implicit dependency `| $(STANDARD_PACKAGES)`.

No, the dependency `| $(STANDARD_PACKAGES)` is not a real dependency, it's just because we are too lazy to add the correct dependencies.

So, I think John's proposal might be good (but be sure to keep the empty dependencies for `mpir` and `gmp`)



---

archive/issue_comments_259686.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nOkayokay, no problem then. I'll do that tomorrow morning (sorry guys, I really need to sleep `^^;`)",
    "created_at": "2015-06-09T20:57:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259686",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:32" align="right">comment:32</div>

Okayokay, no problem then. I'll do that tomorrow morning (sorry guys, I really need to sleep `^^;`)



---

archive/issue_comments_259687.json:
```json
{
    "body": "Changed commit from **[`4b55fc4`](https://github.com/sagemath/sagetrac-mirror/commit/4b55fc4e97952a83983c2015674462bb2f593db4)** to **[`3379d0e`](https://github.com/sagemath/sagetrac-mirror/commit/3379d0e4e354c67dcc9d21c47e1322fe6e00cd1c)**",
    "created_at": "2015-06-10T08:29:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259687",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4b55fc4`](https://github.com/sagemath/sagetrac-mirror/commit/4b55fc4e97952a83983c2015674462bb2f593db4)** to **[`3379d0e`](https://github.com/sagemath/sagetrac-mirror/commit/3379d0e4e354c67dcc9d21c47e1322fe6e00cd1c)**



---

archive/issue_comments_259688.json:
```json
{
    "body": "<div id=\"comment:33\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3379d0e4e354c67dcc9d21c47e1322fe6e00cd1c\">3379d0e</a></td><td><code>trac #18647: Automatically update new-style optional packages</code></td></tr></table>\n",
    "created_at": "2015-06-10T08:29:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259688",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:33"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3379d0e4e354c67dcc9d21c47e1322fe6e00cd1c">3379d0e</a></td><td><code>trac #18647: Automatically update new-style optional packages</code></td></tr></table>




---

archive/issue_comments_259689.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nHere it is. I rewrote history, so that one commit does not undo what the previous does.\n\nNathann",
    "created_at": "2015-06-10T08:29:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259689",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:34" align="right">comment:34</div>

Here it is. I rewrote history, so that one commit does not undo what the previous does.

Nathann



---

archive/issue_comments_259690.json:
```json
{
    "body": "<div id=\"comment:35\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/83759dbbf5c3d04377ad98551de1146cb0dfd106\">83759db</a></td><td><code>trac #18647: no dependencies for mpir and gmp</code></td></tr></table>\n",
    "created_at": "2015-06-10T09:36:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259690",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:35"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/83759dbbf5c3d04377ad98551de1146cb0dfd106">83759db</a></td><td><code>trac #18647: no dependencies for mpir and gmp</code></td></tr></table>




---

archive/issue_comments_259691.json:
```json
{
    "body": "Changed commit from **[`3379d0e`](https://github.com/sagemath/sagetrac-mirror/commit/3379d0e4e354c67dcc9d21c47e1322fe6e00cd1c)** to **[`83759db`](https://github.com/sagemath/sagetrac-mirror/commit/83759dbbf5c3d04377ad98551de1146cb0dfd106)**",
    "created_at": "2015-06-10T09:36:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259691",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3379d0e`](https://github.com/sagemath/sagetrac-mirror/commit/3379d0e4e354c67dcc9d21c47e1322fe6e00cd1c)** to **[`83759db`](https://github.com/sagemath/sagetrac-mirror/commit/83759dbbf5c3d04377ad98551de1146cb0dfd106)**



---

archive/issue_comments_259692.json:
```json
{
    "body": "<div id=\"comment:36\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4a744884a9815926ce2d9c6a9b38ee72cfc3de40\">4a74488</a></td><td><code>trac #18647: no dependencies for mpir and gmp</code></td></tr></table>\n",
    "created_at": "2015-06-10T09:39:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259692",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:36"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4a744884a9815926ce2d9c6a9b38ee72cfc3de40">4a74488</a></td><td><code>trac #18647: no dependencies for mpir and gmp</code></td></tr></table>




---

archive/issue_comments_259693.json:
```json
{
    "body": "Changed commit from **[`83759db`](https://github.com/sagemath/sagetrac-mirror/commit/83759dbbf5c3d04377ad98551de1146cb0dfd106)** to **[`4a74488`](https://github.com/sagemath/sagetrac-mirror/commit/4a744884a9815926ce2d9c6a9b38ee72cfc3de40)**",
    "created_at": "2015-06-10T09:39:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259693",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`83759db`](https://github.com/sagemath/sagetrac-mirror/commit/83759dbbf5c3d04377ad98551de1146cb0dfd106)** to **[`4a74488`](https://github.com/sagemath/sagetrac-mirror/commit/4a744884a9815926ce2d9c6a9b38ee72cfc3de40)**



---

archive/issue_comments_259694.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nReplace\n\n```\n[ \"x$(cat $TYPE_FILE)\" = \"xoptional\" ]\n```\nby\n\n```\n[ x`cat \"$TYPE_FILE\"` = xoptional ]\n```\n(the point is: you need to quote `$TYPE_FILE`)",
    "created_at": "2015-06-10T09:50:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259694",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:37" align="right">comment:37</div>

Replace

```
[ "x$(cat $TYPE_FILE)" = "xoptional" ]
```
by

```
[ x`cat "$TYPE_FILE"` = xoptional ]
```
(the point is: you need to quote `$TYPE_FILE`)



---

archive/issue_comments_259695.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nAnd `\"| \\$(STANDARD_PACKAGES)\"` can be `'| $(STANDARD_PACKAGES)'` (avoid ugly backslashes if you can)",
    "created_at": "2015-06-10T09:51:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259695",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:38" align="right">comment:38</div>

And `"| \$(STANDARD_PACKAGES)"` can be `'| $(STANDARD_PACKAGES)'` (avoid ugly backslashes if you can)



---

archive/issue_comments_259696.json:
```json
{
    "body": "Changed commit from **[`4a74488`](https://github.com/sagemath/sagetrac-mirror/commit/4a744884a9815926ce2d9c6a9b38ee72cfc3de40)** to **[`68f4d0b`](https://github.com/sagemath/sagetrac-mirror/commit/68f4d0b138108f33e45452cdb3e7a67232cbac78)**",
    "created_at": "2015-06-10T10:00:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259696",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4a74488`](https://github.com/sagemath/sagetrac-mirror/commit/4a744884a9815926ce2d9c6a9b38ee72cfc3de40)** to **[`68f4d0b`](https://github.com/sagemath/sagetrac-mirror/commit/68f4d0b138108f33e45452cdb3e7a67232cbac78)**



---

archive/issue_comments_259697.json:
```json
{
    "body": "<div id=\"comment:39\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/68f4d0b138108f33e45452cdb3e7a67232cbac78\">68f4d0b</a></td><td><code>trac #18647: Reviewer's comments</code></td></tr></table>\n",
    "created_at": "2015-06-10T10:00:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259697",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:39"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/68f4d0b138108f33e45452cdb3e7a67232cbac78">68f4d0b</a></td><td><code>trac #18647: Reviewer's comments</code></td></tr></table>




---

archive/issue_comments_259698.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer**",
    "created_at": "2015-06-10T11:32:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259698",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer**



---

archive/issue_events_265009.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-06-10T11:32:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18647#event-265009"
}
```



---

archive/issue_events_265010.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-06-10T11:32:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18647#event-265010"
}
```



---

archive/issue_comments_259699.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nExcellent news! Thanks `;-)`",
    "created_at": "2015-06-10T11:47:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259699",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:41" align="right">comment:41</div>

Excellent news! Thanks `;-)`



---

archive/issue_comments_259700.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nReplying to [@nathanncohen](#comment:24):\n> > Why? Since when are we automatically installing `base` packages?\n\n> \n> Well, not automtically.. There is a 'base' rule in the makefile, but the dependencies are set manually.\n\nDon't confuse the `base` make rule with `base` package(s) (maybe that's actually a good reason to rename the `base` packages to something else).",
    "created_at": "2015-06-11T07:59:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259700",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:42" align="right">comment:42</div>

Replying to [@nathanncohen](#comment:24):
> > Why? Since when are we automatically installing `base` packages?

> 
> Well, not automtically.. There is a 'base' rule in the makefile, but the dependencies are set manually.

Don't confuse the `base` make rule with `base` package(s) (maybe that's actually a good reason to rename the `base` packages to something else).



---

archive/issue_comments_259701.json:
```json
{
    "body": "Changed branch from **[public/18647](https://github.com/sagemath/sagetrac-mirror/tree/public/18647)** to **[`68f4d0b`](https://github.com/sagemath/sagetrac-mirror/commit/68f4d0b138108f33e45452cdb3e7a67232cbac78)**",
    "created_at": "2015-06-11T22:23:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18647#issuecomment-259701",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/18647](https://github.com/sagemath/sagetrac-mirror/tree/public/18647)** to **[`68f4d0b`](https://github.com/sagemath/sagetrac-mirror/commit/68f4d0b138108f33e45452cdb3e7a67232cbac78)**



---

archive/issue_events_265011.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-06-11T22:23:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18647#event-265011"
}
```



---

archive/issue_events_265012.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "cded44922aa5b7f5e2a04d3be89444742e3a6b89",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-06-11T22:23:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/18647",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18647#event-265012"
}
```
