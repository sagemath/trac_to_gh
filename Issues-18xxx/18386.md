# Issue 18386: Doctests for: fix polylog evalf

archive/issues_018149.json:
```json
{
    "body": "The `polylog` function (from Pynac) treats `1.0` like `1` and does not immediately `evalf` with some numeric arguments. \n\n```\nsage: polylog(2,1)\n1/6*pi^2\nsage: polylog(2.,1)\n1.64493406684823\nsage: polylog(2,1.0)\n1/6*pi^2\nsage: polylog(2,0.9)\npolylog(2, 0.900000000000000)\nsage: _.n()\nTypeError: cannot evaluate symbolic expression numerically\n```\nWhat makes `polylog` different is that the Sage `polylog` has no special value logic and calls Pynac's `Li_eval` for everything. This handles special values (incorrectly if an arg is FP) and sends everything else back with `.hold()`. So you need `N()` to get FP results that are not special. With FP  Pynac is called which then calls Sage/mpmath. But this then bombs with FP args.\n\n\nCC:  @kiwifb\n\nKeywords: pynac special\n\nBranch/Commit: 59d4b29e5e417a12c9f5cf1bdc58c1fdd810da42\n\nReviewer: Paul Masson, Dima Pasechnik\n\nAuthor: Ralf Stephan\n\nDependencies: #22969, #23077, #23134\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/18386\n\n",
    "closed_at": "2017-10-05T06:55:59Z",
    "created_at": "2015-05-09T08:51:04Z",
    "labels": [
        "component: symbolics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "Doctests for: fix polylog evalf",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18386",
    "user": "https://github.com/rwst"
}
```
The `polylog` function (from Pynac) treats `1.0` like `1` and does not immediately `evalf` with some numeric arguments. 

```
sage: polylog(2,1)
1/6*pi^2
sage: polylog(2.,1)
1.64493406684823
sage: polylog(2,1.0)
1/6*pi^2
sage: polylog(2,0.9)
polylog(2, 0.900000000000000)
sage: _.n()
TypeError: cannot evaluate symbolic expression numerically
```
What makes `polylog` different is that the Sage `polylog` has no special value logic and calls Pynac's `Li_eval` for everything. This handles special values (incorrectly if an arg is FP) and sends everything else back with `.hold()`. So you need `N()` to get FP results that are not special. With FP  Pynac is called which then calls Sage/mpmath. But this then bombs with FP args.


CC:  @kiwifb

Keywords: pynac special

Branch/Commit: 59d4b29e5e417a12c9f5cf1bdc58c1fdd810da42

Reviewer: Paul Masson, Dima Pasechnik

Author: Ralf Stephan

Dependencies: #22969, #23077, #23134

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/18386





---

archive/issue_comments_320075.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,6 +11,7 @@\n polylog(2, 0.900000000000000)\n \n ```\n+https://github.com/pynac/pynac/issues/48\n \n Comment: 1\n \n``````\n",
    "created_at": "2015-05-09T08:56:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320075",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,6 +11,7 @@
 polylog(2, 0.900000000000000)
 
 ```
+https://github.com/pynac/pynac/issues/48
 
 Comment: 1
 
``````




---

archive/issue_comments_320076.json:
```json
{
    "body": "Changing upstream from \"N/A\" to \"Reported upstream. Developers acknowledge bug.\"",
    "created_at": "2015-05-09T08:56:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320076",
    "user": "https://github.com/rwst"
}
```

Changing upstream from "N/A" to "Reported upstream. Developers acknowledge bug."



---

archive/issue_events_051826.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-05-26T07:23:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "milestone": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18386#event-51826"
}
```



---

archive/issue_comments_320077.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,22 @@\n+The `polylog` function (from Pynac) treats `1.0` like `1` and does not immediately `evalf` with some numeric arguments. \n \n+```\n+sage: polylog(2,1)\n+1/6*pi^2\n+sage: polylog(2.,1)\n+1.64493406684823\n+sage: polylog(2,1.0)\n+1/6*pi^2\n+sage: polylog(2,0.9)\n+polylog(2, 0.900000000000000)\n+sage: _.n()\n+TypeError: cannot evaluate symbolic expression numerically\n+```\n+What makes `polylog` different is that the Sage `polylog` has no special value logic and calls Pynac's `Li_eval` for everything. This handles special values (incorrectly if an arg is FP) and sends everything else back with `.hold()`. So you need `N()` to get FP results that are not special. With FP  Pynac is called which then calls Sage/mpmath. But this then bombs with FP args.\n+\n+It seems better to simply implement everything in Sage because only the special value logic is still in Pynac, and buggy too.\n+\n+Consequently, `polylog` should be removed from the Pynac function registry.\n \n Comment: 1\n \n``````\n",
    "created_at": "2015-05-26T07:23:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320077",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,22 @@
+The `polylog` function (from Pynac) treats `1.0` like `1` and does not immediately `evalf` with some numeric arguments. 
 
+```
+sage: polylog(2,1)
+1/6*pi^2
+sage: polylog(2.,1)
+1.64493406684823
+sage: polylog(2,1.0)
+1/6*pi^2
+sage: polylog(2,0.9)
+polylog(2, 0.900000000000000)
+sage: _.n()
+TypeError: cannot evaluate symbolic expression numerically
+```
+What makes `polylog` different is that the Sage `polylog` has no special value logic and calls Pynac's `Li_eval` for everything. This handles special values (incorrectly if an arg is FP) and sends everything else back with `.hold()`. So you need `N()` to get FP results that are not special. With FP  Pynac is called which then calls Sage/mpmath. But this then bombs with FP args.
+
+It seems better to simply implement everything in Sage because only the special value logic is still in Pynac, and buggy too.
+
+Consequently, `polylog` should be removed from the Pynac function registry.
 
 Comment: 1
 
``````




---

archive/issue_comments_320078.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,18 @@\n+The `polylog` function (from Pynac) treats `1.0` like `1` and does not immediately `evalf` with some numeric arguments. \n+\n+```\n+sage: polylog(2,1)\n+1/6*pi^2\n+sage: polylog(2.,1)\n+1.64493406684823\n+sage: polylog(2,1.0)\n+1/6*pi^2\n+sage: polylog(2,0.9)\n+polylog(2, 0.900000000000000)\n+sage: _.n()\n+TypeError: cannot evaluate symbolic expression numerically\n+```\n+What makes `polylog` different is that the Sage `polylog` has no special value logic and calls Pynac's `Li_eval` for everything. This handles special values (incorrectly if an arg is FP) and sends everything else back with `.hold()`. So you need `N()` to get FP results that are not special. With FP  Pynac is called which then calls Sage/mpmath. But this then bombs with FP args.\n \n \n Comment: 1\n``````\n",
    "created_at": "2016-06-11T07:35:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320078",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,18 @@
+The `polylog` function (from Pynac) treats `1.0` like `1` and does not immediately `evalf` with some numeric arguments. 
+
+```
+sage: polylog(2,1)
+1/6*pi^2
+sage: polylog(2.,1)
+1.64493406684823
+sage: polylog(2,1.0)
+1/6*pi^2
+sage: polylog(2,0.9)
+polylog(2, 0.900000000000000)
+sage: _.n()
+TypeError: cannot evaluate symbolic expression numerically
+```
+What makes `polylog` different is that the Sage `polylog` has no special value logic and calls Pynac's `Li_eval` for everything. This handles special values (incorrectly if an arg is FP) and sends everything else back with `.hold()`. So you need `N()` to get FP results that are not special. With FP  Pynac is called which then calls Sage/mpmath. But this then bombs with FP args.
 
 
 Comment: 1
``````




---

archive/issue_events_051827.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-06-11T07:35:28Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "milestone": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18386#event-51827"
}
```



---

archive/issue_events_051828.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-06-11T07:35:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "milestone": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18386#event-51828"
}
```



---

archive/issue_comments_320079.json:
```json
{
    "body": "Changing upstream from \"Reported upstream. Developers acknowledge bug.\" to \"Fixed upstream, in a later stable release.\"",
    "created_at": "2016-06-11T13:16:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320079",
    "user": "https://github.com/rwst"
}
```

Changing upstream from "Reported upstream. Developers acknowledge bug." to "Fixed upstream, in a later stable release."



---

archive/issue_comments_320080.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#21034\"",
    "created_at": "2016-07-23T20:54:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320080",
    "user": "https://github.com/paulmasson"
}
```

Changing dependencies from "" to "#21034"



---

archive/issue_comments_320081.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-07-23T20:54:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320081",
    "user": "https://github.com/paulmasson"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_320082.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Paul Masson\"",
    "created_at": "2016-07-23T20:54:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320082",
    "user": "https://github.com/paulmasson"
}
```

Changing reviewer from "" to "Paul Masson"



---

archive/issue_comments_320083.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-07-28T01:06:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320083",
    "user": "https://github.com/paulmasson"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_320084.json:
```json
{
    "body": "Changing author from \"\" to \"Ralf Stephan\"",
    "created_at": "2016-07-28T01:06:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320084",
    "user": "https://github.com/paulmasson"
}
```

Changing author from "" to "Ralf Stephan"



---

archive/issue_events_051829.json:
```json
{
    "actor": "https://github.com/paulmasson",
    "created_at": "2016-07-28T01:06:59Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "milestone": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18386#event-51829"
}
```



---

archive/issue_events_051830.json:
```json
{
    "actor": "https://github.com/paulmasson",
    "created_at": "2016-07-28T01:06:59Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "milestone": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18386#event-51830"
}
```



---

archive/issue_comments_320085.json:
```json
{
    "body": "<a id='comment:6'></a>Ralf, there was a typo in the description of #21034 pointing to #18368 rather than this ticket.\n\nI'm finding this behavior odd:\n\n```\nsage: polylog(2,.9999999999999999)\n1.64493406684822\nsage: polylog(2,1.)\nNaN - NaN*I\n```\n\nThis doesn't look fixed upstream to me: `evalf` needs to return a numeric value.\n\nThe doctest in `functions/log.py` captures the current behavior, but needs to be updated before this ticket can be closed.",
    "created_at": "2016-07-28T01:06:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320085",
    "user": "https://github.com/paulmasson"
}
```

<a id='comment:6'></a>Ralf, there was a typo in the description of #21034 pointing to #18368 rather than this ticket.

I'm finding this behavior odd:

```
sage: polylog(2,.9999999999999999)
1.64493406684822
sage: polylog(2,1.)
NaN - NaN*I
```

This doesn't look fixed upstream to me: `evalf` needs to return a numeric value.

The doctest in `functions/log.py` captures the current behavior, but needs to be updated before this ticket can be closed.



---

archive/issue_comments_320086.json:
```json
{
    "body": "<a id='comment:7'></a>Polylog has a branch point/discontinuity at arguments (2,1). Anyway, we're just taking what arb is giving us:\n\n```\nsage: RBF=ComplexBallField(53)\nsage: RBF(1.5).polylog(RBF(2.5))\n[2.27833425640 +/- 2.25e-12] + [-0.61016023975 +/- 3.09e-12]*I\nsage: RBF(.99999999).polylog(RBF(2.))\n[1.6449338726414 +/- 9.23e-14] + [+/- 2.46e-13]*I\nsage: RBF(1.).polylog(RBF(2.))\nnan + nan*I\nsage: RBF(1.00000001).polylog(RBF(2.))\n[1.644934261055 +/- 1.08e-13] + [-3.1416e-8 +/- 3.19e-13]*I\nsage: polylog(2,1)\n1/6*pi^2\n```\nThis is very sensible because if you need the exact value say so, and if you need an inexact value to 53 (or any) digits the result cannot be given in that precision so it's NaN. I'll concede that, similar to #19439 it may be desired to return the symbolic NaN.",
    "created_at": "2016-07-28T13:08:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320086",
    "user": "https://github.com/rwst"
}
```

<a id='comment:7'></a>Polylog has a branch point/discontinuity at arguments (2,1). Anyway, we're just taking what arb is giving us:

```
sage: RBF=ComplexBallField(53)
sage: RBF(1.5).polylog(RBF(2.5))
[2.27833425640 +/- 2.25e-12] + [-0.61016023975 +/- 3.09e-12]*I
sage: RBF(.99999999).polylog(RBF(2.))
[1.6449338726414 +/- 9.23e-14] + [+/- 2.46e-13]*I
sage: RBF(1.).polylog(RBF(2.))
nan + nan*I
sage: RBF(1.00000001).polylog(RBF(2.))
[1.644934261055 +/- 1.08e-13] + [-3.1416e-8 +/- 3.19e-13]*I
sage: polylog(2,1)
1/6*pi^2
```
This is very sensible because if you need the exact value say so, and if you need an inexact value to 53 (or any) digits the result cannot be given in that precision so it's NaN. I'll concede that, similar to #19439 it may be desired to return the symbolic NaN.



---

archive/issue_comments_320087.json:
```json
{
    "body": "Changing author from \"Ralf Stephan\" to \"\"",
    "created_at": "2016-11-06T15:09:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320087",
    "user": "https://github.com/rwst"
}
```

Changing author from "Ralf Stephan" to ""



---

archive/issue_events_051831.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-11-06T15:09:46Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "milestone": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18386#event-51831"
}
```



---

archive/issue_events_051832.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-11-06T15:09:46Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18386#event-51832"
}
```



---

archive/issue_comments_320088.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-11-06T15:09:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320088",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_320089.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [comment:6 paulmasson]:\n> I'm finding this behavior odd:\n> \n> \n> ```\n> sage: polylog(2,1.)\n> NaN - NaN*I\n> ```\n> \n> This doesn't look fixed upstream to me: `evalf` needs to return a numeric value.\n\n\nEvalf does return a numeric value, too:\n\n```\nsage: polylog(2,1.0).n()\nNaN - NaN*I\nsage: type(_)\n<type 'sage.rings.complex_number.ComplexNumber'>\n```\nso, together with my previous answer I think this ticket can be closed.",
    "created_at": "2016-11-06T15:09:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320089",
    "user": "https://github.com/rwst"
}
```

<a id='comment:8'></a>Replying to [comment:6 paulmasson]:
> I'm finding this behavior odd:
> 
> 
> ```
> sage: polylog(2,1.)
> NaN - NaN*I
> ```
> 
> This doesn't look fixed upstream to me: `evalf` needs to return a numeric value.


Evalf does return a numeric value, too:

```
sage: polylog(2,1.0).n()
NaN - NaN*I
sage: type(_)
<type 'sage.rings.complex_number.ComplexNumber'>
```
so, together with my previous answer I think this ticket can be closed.



---

archive/issue_comments_320090.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-04-18T07:08:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320090",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_320091.json:
```json
{
    "body": "<a id='comment:9'></a>That was badly mistyped and misinterpreted by me, so back to the issue.",
    "created_at": "2017-04-18T07:08:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320091",
    "user": "https://github.com/rwst"
}
```

<a id='comment:9'></a>That was badly mistyped and misinterpreted by me, so back to the issue.



---

archive/issue_events_051833.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-04-18T07:08:54Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18386#event-51833"
}
```



---

archive/issue_events_051834.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-04-18T07:08:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "milestone": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18386#event-51834"
}
```



---

archive/issue_comments_320092.json:
```json
{
    "body": "<a id='comment:10'></a>Note also\n\n```\nsage: polylog(3,RBF(1.1))      # there is a polylog RBF member!\n1.37625299668538 - 0.0142691615444952*I\nsage: dilog(RBF(1.1))\n1.96199910130557 - 0.299425760685590*I\n```",
    "created_at": "2017-04-26T07:27:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320092",
    "user": "https://github.com/rwst"
}
```

<a id='comment:10'></a>Note also

```
sage: polylog(3,RBF(1.1))      # there is a polylog RBF member!
1.37625299668538 - 0.0142691615444952*I
sage: dilog(RBF(1.1))
1.96199910130557 - 0.299425760685590*I
```



---

archive/issue_comments_320093.json:
```json
{
    "body": "Changing branch from \"\" to \"u/rws/fix_polylog_evalf\"",
    "created_at": "2017-04-26T08:31:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320093",
    "user": "https://github.com/rwst"
}
```

Changing branch from "" to "u/rws/fix_polylog_evalf"



---

archive/issue_comments_320094.json:
```json
{
    "body": "Changing branch from \"u/rws/fix_polylog_evalf\" to \"u/rws/18386-1\"",
    "created_at": "2017-05-04T07:35:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320094",
    "user": "https://github.com/rwst"
}
```

Changing branch from "u/rws/fix_polylog_evalf" to "u/rws/18386-1"



---

archive/issue_comments_320095.json:
```json
{
    "body": "<a id='comment:13'></a>I believe this is fixed in Pynac master. The tests now also include ball field elements and all open issues from #19906.\n\n---\nNew commits:",
    "created_at": "2017-05-04T07:39:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320095",
    "user": "https://github.com/rwst"
}
```

<a id='comment:13'></a>I believe this is fixed in Pynac master. The tests now also include ball field elements and all open issues from #19906.

---
New commits:



---

archive/issue_comments_320096.json:
```json
{
    "body": "Changing commit from \"\" to \"5e182f34798ac3d092aa3e85e5b2fdac4226ce7a\"",
    "created_at": "2017-05-04T07:39:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320096",
    "user": "https://github.com/rwst"
}
```

Changing commit from "" to "5e182f34798ac3d092aa3e85e5b2fdac4226ce7a"



---

archive/issue_comments_320097.json:
```json
{
    "body": "Changing dependencies from \"#21034\" to \"pynac-0.7.7\"",
    "created_at": "2017-05-04T07:39:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320097",
    "user": "https://github.com/rwst"
}
```

Changing dependencies from "#21034" to "pynac-0.7.7"



---

archive/issue_comments_320098.json:
```json
{
    "body": "Changing branch from \"u/rws/18386-1\" to \"u/rws/18386-2\"",
    "created_at": "2017-05-10T07:12:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320098",
    "user": "https://github.com/rwst"
}
```

Changing branch from "u/rws/18386-1" to "u/rws/18386-2"



---

archive/issue_comments_320099.json:
```json
{
    "body": "Changing commit from \"5e182f34798ac3d092aa3e85e5b2fdac4226ce7a\" to \"51aeae38a87d568034d69a310b680c50146179da\"",
    "created_at": "2017-05-10T07:13:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320099",
    "user": "https://github.com/rwst"
}
```

Changing commit from "5e182f34798ac3d092aa3e85e5b2fdac4226ce7a" to "51aeae38a87d568034d69a310b680c50146179da"



---

archive/issue_comments_320100.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-05-10T07:13:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320100",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_320101.json:
```json
{
    "body": "<a id='comment:15'></a>New commits:",
    "created_at": "2017-05-10T07:13:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320101",
    "user": "https://github.com/rwst"
}
```

<a id='comment:15'></a>New commits:



---

archive/issue_comments_320102.json:
```json
{
    "body": "Changing author from \"\" to \"Ralf Stephan\"",
    "created_at": "2017-05-10T07:13:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320102",
    "user": "https://github.com/rwst"
}
```

Changing author from "" to "Ralf Stephan"



---

archive/issue_comments_320103.json:
```json
{
    "body": "Changing dependencies from \"pynac-0.7.7\" to \"#22969\"",
    "created_at": "2017-05-10T07:13:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320103",
    "user": "https://github.com/rwst"
}
```

Changing dependencies from "pynac-0.7.7" to "#22969"



---

archive/issue_comments_320104.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-05-25T06:20:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320104",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_320105.json:
```json
{
    "body": "<a id='comment:16'></a>Fails tests with reduced precision.",
    "created_at": "2017-05-25T06:20:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320105",
    "user": "https://github.com/rwst"
}
```

<a id='comment:16'></a>Fails tests with reduced precision.



---

archive/issue_comments_320106.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-05-25T06:21:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320106",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_320107.json:
```json
{
    "body": "Changing commit from \"51aeae38a87d568034d69a310b680c50146179da\" to \"074034a15c082ede5641bd73d4b1a6cb9dfefb9c\"",
    "created_at": "2017-05-25T06:21:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320107",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "51aeae38a87d568034d69a310b680c50146179da" to "074034a15c082ede5641bd73d4b1a6cb9dfefb9c"



---

archive/issue_comments_320108.json:
```json
{
    "body": "Changing upstream from \"Fixed upstream, in a later stable release.\" to \"Not yet reported upstream; Will do shortly.\"",
    "created_at": "2017-05-25T13:36:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320108",
    "user": "https://github.com/rwst"
}
```

Changing upstream from "Fixed upstream, in a later stable release." to "Not yet reported upstream; Will do shortly."



---

archive/issue_comments_320109.json:
```json
{
    "body": "Changing dependencies from \"#22969\" to \"#22969, #23077, pynac-0.7.8\"",
    "created_at": "2017-05-25T15:26:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320109",
    "user": "https://github.com/rwst"
}
```

Changing dependencies from "#22969" to "#22969, #23077, pynac-0.7.8"



---

archive/issue_comments_320110.json:
```json
{
    "body": "<a id='comment:19'></a>We depend on #23077 and pynac-0.7.8 for improved handling of complex floats.",
    "created_at": "2017-05-25T15:26:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320110",
    "user": "https://github.com/rwst"
}
```

<a id='comment:19'></a>We depend on #23077 and pynac-0.7.8 for improved handling of complex floats.



---

archive/issue_comments_320111.json:
```json
{
    "body": "Changing upstream from \"Not yet reported upstream; Will do shortly.\" to \"N/A\"",
    "created_at": "2017-06-03T08:42:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320111",
    "user": "https://github.com/rwst"
}
```

Changing upstream from "Not yet reported upstream; Will do shortly." to "N/A"



---

archive/issue_comments_320112.json:
```json
{
    "body": "Changing dependencies from \"#22969, #23077, pynac-0.7.8\" to \"#22969, #23077, #23134\"",
    "created_at": "2017-06-03T08:42:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320112",
    "user": "https://github.com/rwst"
}
```

Changing dependencies from "#22969, #23077, pynac-0.7.8" to "#22969, #23077, #23134"



---

archive/issue_comments_320113.json:
```json
{
    "body": "<a id='comment:21'></a>Now that all dependencies are merged, let the patchbots test it and please review.",
    "created_at": "2017-06-23T05:56:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320113",
    "user": "https://github.com/rwst"
}
```

<a id='comment:21'></a>Now that all dependencies are merged, let the patchbots test it and please review.



---

archive/issue_comments_320114.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-06-23T05:56:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320114",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_320115.json:
```json
{
    "body": "<a id='comment:22'></a>See #23565 for some changes to the behavior of polylog. Are those changes improvements?",
    "created_at": "2017-08-01T23:06:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320115",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:22'></a>See #23565 for some changes to the behavior of polylog. Are those changes improvements?



---

archive/issue_comments_320116.json:
```json
{
    "body": "<a id='comment:23'></a>The biggest mystery here to me is how pynac is being able to use arb...",
    "created_at": "2017-08-02T12:24:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320116",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:23'></a>The biggest mystery here to me is how pynac is being able to use arb...



---

archive/issue_comments_320117.json:
```json
{
    "body": "<a id='comment:24'></a>the doctests added here, with correct (no `NaN`s!) outputs, are being added to #23565",
    "created_at": "2017-08-02T13:49:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320117",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:24'></a>the doctests added here, with correct (no `NaN`s!) outputs, are being added to #23565



---

archive/issue_comments_320118.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-08-02T13:49:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320118",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_320119.json:
```json
{
    "body": "Changing reviewer from \"Paul Masson\" to \"Paul Masson, Dima Pasechnik\"",
    "created_at": "2017-08-02T13:49:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320119",
    "user": "https://github.com/dimpase"
}
```

Changing reviewer from "Paul Masson" to "Paul Masson, Dima Pasechnik"



---

archive/issue_events_051835.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-08-02T13:49:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "milestone": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18386#event-51835"
}
```



---

archive/issue_events_051836.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-08-02T13:49:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18386#event-51836"
}
```



---

archive/issue_comments_320120.json:
```json
{
    "body": "Changing dependencies from \"#22969, #23077, #23134\" to \"#22969, #23077, #23134, #23565\"",
    "created_at": "2017-08-02T13:49:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320120",
    "user": "https://github.com/dimpase"
}
```

Changing dependencies from "#22969, #23077, #23134" to "#22969, #23077, #23134, #23565"



---

archive/issue_comments_320121.json:
```json
{
    "body": "<a id='comment:25'></a>Replying to [comment:23 dimpase]:\n> The biggest mystery here to me is how pynac is being able to use arb...\n\n\nPynac calls Sage's arb interface via the Python C API.",
    "created_at": "2017-08-02T15:48:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320121",
    "user": "https://github.com/rwst"
}
```

<a id='comment:25'></a>Replying to [comment:23 dimpase]:
> The biggest mystery here to me is how pynac is being able to use arb...


Pynac calls Sage's arb interface via the Python C API.



---

archive/issue_comments_320122.json:
```json
{
    "body": "<a id='comment:26'></a>Replying to [comment:25 rws]:\n> Replying to [comment:23 dimpase]:\n> > The biggest mystery here to me is how pynac is being able to use arb...\n\n> \n> Pynac calls Sage's arb interface via the Python C API.\n\n\nI see, thanks, this explains why libpynac is not linked to libarb, contrary to what one would expect.",
    "created_at": "2017-08-02T15:55:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320122",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:26'></a>Replying to [comment:25 rws]:
> Replying to [comment:23 dimpase]:
> > The biggest mystery here to me is how pynac is being able to use arb...

> 
> Pynac calls Sage's arb interface via the Python C API.


I see, thanks, this explains why libpynac is not linked to libarb, contrary to what one would expect.



---

archive/issue_comments_320123.json:
```json
{
    "body": "Changing dependencies from \"#22969, #23077, #23134, #23565\" to \"#22969, #23077, #23134\"",
    "created_at": "2017-08-03T05:42:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320123",
    "user": "https://github.com/rwst"
}
```

Changing dependencies from "#22969, #23077, #23134, #23565" to "#22969, #23077, #23134"



---

archive/issue_comments_320124.json:
```json
{
    "body": "<a id='comment:28'></a>Just rebasing. Nothing changed.\n\n---\nNew commits:",
    "created_at": "2017-08-23T02:06:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320124",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:28'></a>Just rebasing. Nothing changed.

---
New commits:



---

archive/issue_comments_320125.json:
```json
{
    "body": "Changing commit from \"074034a15c082ede5641bd73d4b1a6cb9dfefb9c\" to \"59d4b29e5e417a12c9f5cf1bdc58c1fdd810da42\"",
    "created_at": "2017-08-23T02:06:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320125",
    "user": "https://github.com/kiwifb"
}
```

Changing commit from "074034a15c082ede5641bd73d4b1a6cb9dfefb9c" to "59d4b29e5e417a12c9f5cf1bdc58c1fdd810da42"



---

archive/issue_comments_320126.json:
```json
{
    "body": "Changing branch from \"u/rws/18386-2\" to \"u/fbissey/18386-2\"",
    "created_at": "2017-08-23T02:06:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320126",
    "user": "https://github.com/kiwifb"
}
```

Changing branch from "u/rws/18386-2" to "u/fbissey/18386-2"



---

archive/issue_events_051837.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-10-03T15:33:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18386#event-51837"
}
```



---

archive/issue_events_051838.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-10-03T15:33:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "milestone": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18386#event-51838"
}
```



---

archive/issue_comments_320127.json:
```json
{
    "body": "Changing branch from \"u/fbissey/18386-2\" to \"59d4b29e5e417a12c9f5cf1bdc58c1fdd810da42\"",
    "created_at": "2017-10-05T06:55:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320127",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/fbissey/18386-2" to "59d4b29e5e417a12c9f5cf1bdc58c1fdd810da42"



---

archive/issue_events_051839.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-10-05T06:55:59Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18386#event-51839"
}
```



---

archive/issue_comments_320128.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-10-05T06:55:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18386#issuecomment-320128",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
