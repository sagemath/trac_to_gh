# Issue 18906: Refactor min spanning tree

archive/issues_018669.json:
```json
{
    "body": "Solve some strange behaviors / bugs in minimum spanning tree routines.\n\nUsually, if the graph is weighted, the weight is ignored, and the `weight_function` argument is used. If this argument is not provided, the (rather counterintuitive) behavior is to set all weights to 1 (so that any spanning tree can be outputted). However, if Kruskal algorithm is used, and `check` is set to `True`, then edge weights are used, instead.\n\n```\nsage: g = Graph(weighted=True)\nsage: g.add_edges([[0,1,1],[1,2,1],[2,0,10]])\nsage: g.min_spanning_tree(algorithm='Kruskal')\n[(0, 1, 1), (0, 2, 10)]\nsage: g.min_spanning_tree(algorithm='Prim_fringe')\n[(0, 1), (0, 2)]\nsage: g.min_spanning_tree(algorithm='Prim_edge')\n[(0, 1, 1), (0, 2, 10)]\nsage: sage: g.min_spanning_tree(algorithm='Kruskal', check=True)\n[(0, 1, 1), (1, 2, 1)]\n\n```\nThis example also shows that the outputs are different.\n\nMoreover, NetworkX algorithm does not work:\n\n```\nsage: g.min_spanning_tree(algorithm='NetworkX')\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-27-b461ae20ba97> in <module>()\n----> 1 g.min_spanning_tree(algorithm='NetworkX')\n\n/home/michele/Programmi/sage/local/lib/python2.7/site-packages/sage/graphs/generic_graph.pyc in min_spanning_tree(self, weight_function, algorithm, starting_vertex, check)\n   3433             import networkx\n   3434             G = networkx.Graph([(u, v, dict(weight=weight_function((u, v)))) for u, v, l in self.edge_iterator()])\n-> 3435             return list(networkx.mst(G))\n   3436         else:\n   3437             raise NotImplementedError(\"Minimum Spanning Tree algorithm '%s' is not implemented.\" % algorithm)\n\nTypeError: 'module' object is not callable\n\n```\nThis ticket will change this behavior, by defining a specific order in the choice of weights:\n\n* if the function weight_function is provided, it is used as default;\n* if the function weight_function is None (default) and the graph is weighted, the edge weights are used;\n* otherwise, all weights are set to 1.\n\nMoreover, it will fix NetworkX problems, and it will standardize the output. \n\nFinally, it will modify Kruskal algorithm as follows:\n\n* now, the input can only be an undirected graph, so that the behavior is much more clear, and the documentation becomes much smaller;\n* we moved the code to remove self-loops and multiple edges in a separate routine, because it will be used by Boost.\n\nThis is a first step before the inclusion of Boost minimum spanning tree algorithms.\n\nCC:  @nathanncohen @dcoudert\n\nKeywords: Minimum spanning tree\n\nBranch/Commit: 299bc40fe3ad77bf4374e9f2e6c37dfd7ebf371e\n\nReviewer: David Coudert\n\nAuthor: Michele Borassi\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/18906\n\n",
    "closed_at": "2015-07-27T15:15:49Z",
    "created_at": "2015-07-15T12:38:52Z",
    "labels": [
        "component: graph theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.8",
    "title": "Refactor min spanning tree",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18906",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```
Solve some strange behaviors / bugs in minimum spanning tree routines.

Usually, if the graph is weighted, the weight is ignored, and the `weight_function` argument is used. If this argument is not provided, the (rather counterintuitive) behavior is to set all weights to 1 (so that any spanning tree can be outputted). However, if Kruskal algorithm is used, and `check` is set to `True`, then edge weights are used, instead.

```
sage: g = Graph(weighted=True)
sage: g.add_edges([[0,1,1],[1,2,1],[2,0,10]])
sage: g.min_spanning_tree(algorithm='Kruskal')
[(0, 1, 1), (0, 2, 10)]
sage: g.min_spanning_tree(algorithm='Prim_fringe')
[(0, 1), (0, 2)]
sage: g.min_spanning_tree(algorithm='Prim_edge')
[(0, 1, 1), (0, 2, 10)]
sage: sage: g.min_spanning_tree(algorithm='Kruskal', check=True)
[(0, 1, 1), (1, 2, 1)]

```
This example also shows that the outputs are different.

Moreover, NetworkX algorithm does not work:

```
sage: g.min_spanning_tree(algorithm='NetworkX')
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-27-b461ae20ba97> in <module>()
----> 1 g.min_spanning_tree(algorithm='NetworkX')

/home/michele/Programmi/sage/local/lib/python2.7/site-packages/sage/graphs/generic_graph.pyc in min_spanning_tree(self, weight_function, algorithm, starting_vertex, check)
   3433             import networkx
   3434             G = networkx.Graph([(u, v, dict(weight=weight_function((u, v)))) for u, v, l in self.edge_iterator()])
-> 3435             return list(networkx.mst(G))
   3436         else:
   3437             raise NotImplementedError("Minimum Spanning Tree algorithm '%s' is not implemented." % algorithm)

TypeError: 'module' object is not callable

```
This ticket will change this behavior, by defining a specific order in the choice of weights:

* if the function weight_function is provided, it is used as default;
* if the function weight_function is None (default) and the graph is weighted, the edge weights are used;
* otherwise, all weights are set to 1.

Moreover, it will fix NetworkX problems, and it will standardize the output. 

Finally, it will modify Kruskal algorithm as follows:

* now, the input can only be an undirected graph, so that the behavior is much more clear, and the documentation becomes much smaller;
* we moved the code to remove self-loops and multiple edges in a separate routine, because it will be used by Boost.

This is a first step before the inclusion of Boost minimum spanning tree algorithms.

CC:  @nathanncohen @dcoudert

Keywords: Minimum spanning tree

Branch/Commit: 299bc40fe3ad77bf4374e9f2e6c37dfd7ebf371e

Reviewer: David Coudert

Author: Michele Borassi

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/18906





---

archive/issue_comments_337931.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,45 @@\n+Solve some strange behaviors / bugs in minimum spanning tree routines.\n \n+Usually, if the graph is weighted, the weight is ignored, and the `weight_function` argument is used. If this argument is not provided, the (rather counterintuitive) behavior is to set all weights to 1 (so that any spanning tree can be outputted). However, if Kruskal algorithm is used, and `check` is set to `True`, then edge weights are used, instead.\n+\n+```\n+sage: g = Graph(weighted=True)\n+sage: g.add_edges([[0,1,1],[1,2,1],[2,0,10]])\n+sage: g.min_spanning_tree(algorithm='Kruskal')\n+[(0, 1, 1), (0, 2, 10)]\n+sage: g.min_spanning_tree(algorithm='Prim_fringe')\n+[(0, 1), (0, 2)]\n+sage: g.min_spanning_tree(algorithm='Prim_edge')\n+[(0, 1, 1), (0, 2, 10)]\n+sage: sage: g.min_spanning_tree(algorithm='Kruskal', check=True)\n+[(0, 1, 1), (1, 2, 1)]\n+\n+```\n+This example also shows that the outputs are different. \n+\n+Moreover, NetworkX algorithm does not work:\n+\n+```\n+sage: g.min_spanning_tree(algorithm='NetworkX')\n+---------------------------------------------------------------------------\n+TypeError                                 Traceback (most recent call last)\n+<ipython-input-27-b461ae20ba97> in <module>()\n+----> 1 g.min_spanning_tree(algorithm='NetworkX')\n+\n+/home/michele/Programmi/sage/local/lib/python2.7/site-packages/sage/graphs/generic_graph.pyc in min_spanning_tree(self, weight_function, algorithm, starting_vertex, check)\n+   3433             import networkx\n+   3434             G = networkx.Graph([(u, v, dict(weight=weight_function((u, v)))) for u, v, l in self.edge_iterator()])\n+-> 3435             return list(networkx.mst(G))\n+   3436         else:\n+   3437             raise NotImplementedError(\"Minimum Spanning Tree algorithm '%s' is not implemented.\" % algorithm)\n+\n+TypeError: 'module' object is not callable\n+\n+```\n+This ticket will change this behavior, by defining a specific order in the choice of weights:\n+\n+* if the function weight_function is provided, it is used as default;\n+* if the function weight_function is None (default) and the graph is weighted, the edge weights are used;\n+* otherwise, all weights are set to 1.\n+\n+Moreover, it will fix NetworkX problems, and it will standardize the output. This is a first step before the inclusion of Boost minimum spanning tree algorithms.\n``````\n",
    "created_at": "2015-07-15T13:49:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18906#issuecomment-337931",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,45 @@
+Solve some strange behaviors / bugs in minimum spanning tree routines.
 
+Usually, if the graph is weighted, the weight is ignored, and the `weight_function` argument is used. If this argument is not provided, the (rather counterintuitive) behavior is to set all weights to 1 (so that any spanning tree can be outputted). However, if Kruskal algorithm is used, and `check` is set to `True`, then edge weights are used, instead.
+
+```
+sage: g = Graph(weighted=True)
+sage: g.add_edges([[0,1,1],[1,2,1],[2,0,10]])
+sage: g.min_spanning_tree(algorithm='Kruskal')
+[(0, 1, 1), (0, 2, 10)]
+sage: g.min_spanning_tree(algorithm='Prim_fringe')
+[(0, 1), (0, 2)]
+sage: g.min_spanning_tree(algorithm='Prim_edge')
+[(0, 1, 1), (0, 2, 10)]
+sage: sage: g.min_spanning_tree(algorithm='Kruskal', check=True)
+[(0, 1, 1), (1, 2, 1)]
+
+```
+This example also shows that the outputs are different. 
+
+Moreover, NetworkX algorithm does not work:
+
+```
+sage: g.min_spanning_tree(algorithm='NetworkX')
+---------------------------------------------------------------------------
+TypeError                                 Traceback (most recent call last)
+<ipython-input-27-b461ae20ba97> in <module>()
+----> 1 g.min_spanning_tree(algorithm='NetworkX')
+
+/home/michele/Programmi/sage/local/lib/python2.7/site-packages/sage/graphs/generic_graph.pyc in min_spanning_tree(self, weight_function, algorithm, starting_vertex, check)
+   3433             import networkx
+   3434             G = networkx.Graph([(u, v, dict(weight=weight_function((u, v)))) for u, v, l in self.edge_iterator()])
+-> 3435             return list(networkx.mst(G))
+   3436         else:
+   3437             raise NotImplementedError("Minimum Spanning Tree algorithm '%s' is not implemented." % algorithm)
+
+TypeError: 'module' object is not callable
+
+```
+This ticket will change this behavior, by defining a specific order in the choice of weights:
+
+* if the function weight_function is provided, it is used as default;
+* if the function weight_function is None (default) and the graph is weighted, the edge weights are used;
+* otherwise, all weights are set to 1.
+
+Moreover, it will fix NetworkX problems, and it will standardize the output. This is a first step before the inclusion of Boost minimum spanning tree algorithms.
``````




---

archive/issue_comments_337932.json:
```json
{
    "body": "Changing keywords from \"\" to \"Minimum spanning tree\".",
    "created_at": "2015-07-15T13:49:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18906#issuecomment-337932",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

Changing keywords from "" to "Minimum spanning tree".



---

archive/issue_comments_337933.json:
```json
{
    "body": "Changing author from \"\" to \"Michele Borassi\"",
    "created_at": "2015-07-15T13:49:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18906#issuecomment-337933",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

Changing author from "" to "Michele Borassi"



---

archive/issue_comments_337934.json:
```json
{
    "body": "Changing branch from \"\" to \"u/borassi/refactor_min_spanning_tree\"",
    "created_at": "2015-07-15T14:54:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18906#issuecomment-337934",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

Changing branch from "" to "u/borassi/refactor_min_spanning_tree"



---

archive/issue_comments_337935.json:
```json
{
    "body": "Changing commit from \"\" to \"425eac73595d1472845a4c879dbbd1c474104316\"",
    "created_at": "2015-07-15T14:54:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18906#issuecomment-337935",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

Changing commit from "" to "425eac73595d1472845a4c879dbbd1c474104316"



---

archive/issue_comments_337936.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-07-15T14:54:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18906#issuecomment-337936",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_337937.json:
```json
{
    "body": "<a id='comment:4'></a>\nNew commits:\n|                                                                                                                                          |                                                   |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|\n|[425eac7](https://github.com/sagemath/sagetrac-mirror/commit/425eac73595d1472845a4c879dbbd1c474104316)|`Corrected minimum spanning tree strange behaviors`|",
    "created_at": "2015-07-15T14:54:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18906#issuecomment-337937",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

<a id='comment:4'></a>
New commits:
|                                                                                                                                          |                                                   |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|
|[425eac7](https://github.com/sagemath/sagetrac-mirror/commit/425eac73595d1472845a4c879dbbd1c474104316)|`Corrected minimum spanning tree strange behaviors`|



---

archive/issue_comments_337938.json:
```json
{
    "body": "<a id='comment:5'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                        |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------|\n|[ace2f0d](https://github.com/sagemath/sagetrac-mirror/commit/ace2f0d33337f08537a27b3b6cba8aff01b93576)|`Improved documentation`|",
    "created_at": "2015-07-15T15:24:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18906#issuecomment-337938",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                        |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------|
|[ace2f0d](https://github.com/sagemath/sagetrac-mirror/commit/ace2f0d33337f08537a27b3b6cba8aff01b93576)|`Improved documentation`|



---

archive/issue_comments_337939.json:
```json
{
    "body": "Changing commit from \"425eac73595d1472845a4c879dbbd1c474104316\" to \"ace2f0d33337f08537a27b3b6cba8aff01b93576\"",
    "created_at": "2015-07-15T15:24:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18906#issuecomment-337939",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "425eac73595d1472845a4c879dbbd1c474104316" to "ace2f0d33337f08537a27b3b6cba8aff01b93576"



---

archive/issue_comments_337940.json:
```json
{
    "body": "<a id='comment:6'></a>\nI like this patch, and I didn't know that it had bugs.\n\nWouldn't it be nicer if edges were sorted (including end-vertices) ? You could use e.g. `sorted( (u,v,l) if u<v else (v,u,l) for u,v,l in edges )`. It adds some computation time, but that would give an additional value (i.e., we can assume that...). In fact, I assume that some algorithms are already doing it. For others, it might be sufficient to add a test before inserting in list `edges`.",
    "created_at": "2015-07-15T16:53:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18906#issuecomment-337940",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:6'></a>
I like this patch, and I didn't know that it had bugs.

Wouldn't it be nicer if edges were sorted (including end-vertices) ? You could use e.g. `sorted( (u,v,l) if u<v else (v,u,l) for u,v,l in edges )`. It adds some computation time, but that would give an additional value (i.e., we can assume that...). In fact, I assume that some algorithms are already doing it. For others, it might be sufficient to add a test before inserting in list `edges`.



---

archive/issue_comments_337941.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |               |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------|\n|[dd7e575](https://github.com/sagemath/sagetrac-mirror/commit/dd7e57592f99e76a1fc2768611a492b2ba3455a6)|`Sorted output`|",
    "created_at": "2015-07-15T17:16:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18906#issuecomment-337941",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |               |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------|
|[dd7e575](https://github.com/sagemath/sagetrac-mirror/commit/dd7e57592f99e76a1fc2768611a492b2ba3455a6)|`Sorted output`|



---

archive/issue_comments_337942.json:
```json
{
    "body": "Changing commit from \"ace2f0d33337f08537a27b3b6cba8aff01b93576\" to \"dd7e57592f99e76a1fc2768611a492b2ba3455a6\"",
    "created_at": "2015-07-15T17:16:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18906#issuecomment-337942",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ace2f0d33337f08537a27b3b6cba8aff01b93576" to "dd7e57592f99e76a1fc2768611a492b2ba3455a6"



---

archive/issue_comments_337943.json:
```json
{
    "body": "Changing reviewer from \"\" to \"David Coudert\"",
    "created_at": "2015-07-15T21:27:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18906#issuecomment-337943",
    "user": "https://github.com/dcoudert"
}
```

Changing reviewer from "" to "David Coudert"



---

archive/issue_comments_337944.json:
```json
{
    "body": "<a id='comment:8'></a>\nGood to go.",
    "created_at": "2015-07-15T21:27:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18906#issuecomment-337944",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:8'></a>
Good to go.



---

archive/issue_comments_337945.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-07-15T21:27:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18906#issuecomment-337945",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_337946.json:
```json
{
    "body": "<a id='comment:9'></a>\nHello!\n\nI just realized I need some more modifications on the code to deal with multiple edges, before implementing the Boost version. I will submit the new version as soon as possible!\n\nSee you,\n\nMichele",
    "created_at": "2015-07-16T06:31:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18906#issuecomment-337946",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

<a id='comment:9'></a>
Hello!

I just realized I need some more modifications on the code to deal with multiple edges, before implementing the Boost version. I will submit the new version as soon as possible!

See you,

Michele



---

archive/issue_comments_337947.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-07-16T06:31:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18906#issuecomment-337947",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_337948.json:
```json
{
    "body": "<a id='comment:10'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|\n|[78e9795](https://github.com/sagemath/sagetrac-mirror/commit/78e97957d2259cca983a725f9f14c8b4de8072c8)|`Corrected behavior with digraphs, created routine simplify`|",
    "created_at": "2015-07-16T08:02:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18906#issuecomment-337948",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                            |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|
|[78e9795](https://github.com/sagemath/sagetrac-mirror/commit/78e97957d2259cca983a725f9f14c8b4de8072c8)|`Corrected behavior with digraphs, created routine simplify`|



---

archive/issue_comments_337949.json:
```json
{
    "body": "Changing commit from \"dd7e57592f99e76a1fc2768611a492b2ba3455a6\" to \"78e97957d2259cca983a725f9f14c8b4de8072c8\"",
    "created_at": "2015-07-16T08:02:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18906#issuecomment-337949",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "dd7e57592f99e76a1fc2768611a492b2ba3455a6" to "78e97957d2259cca983a725f9f14c8b4de8072c8"



---

archive/issue_comments_337950.json:
```json
{
    "body": "<a id='comment:11'></a>\nHello!\n\nI have made two more changes to the Kruskal algorithm, specified in the description:\n\n* now, the input can only be an undirected graph, so that the  behavior is much more clear, and the documentation becomes much smaller;\n* we moved the code to remove self-loops and multiple edges in a separate routine, because it will be used by Boost.\n\nSorry for the \"late\" decision, but I realized this was better only after I submitted the previous code.\n\nMichele",
    "created_at": "2015-07-16T08:24:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18906#issuecomment-337950",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

<a id='comment:11'></a>
Hello!

I have made two more changes to the Kruskal algorithm, specified in the description:

* now, the input can only be an undirected graph, so that the  behavior is much more clear, and the documentation becomes much smaller;
* we moved the code to remove self-loops and multiple edges in a separate routine, because it will be used by Boost.

Sorry for the "late" decision, but I realized this was better only after I submitted the previous code.

Michele



---

archive/issue_comments_337951.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-07-16T08:24:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18906#issuecomment-337951",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_337952.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -15,7 +15,7 @@\n [(0, 1, 1), (1, 2, 1)]\n \n ```\n-This example also shows that the outputs are different. \n+This example also shows that the outputs are different.\n \n Moreover, NetworkX algorithm does not work:\n \n@@ -42,4 +42,11 @@\n * if the function weight_function is None (default) and the graph is weighted, the edge weights are used;\n * otherwise, all weights are set to 1.\n \n-Moreover, it will fix NetworkX problems, and it will standardize the output. This is a first step before the inclusion of Boost minimum spanning tree algorithms.\n+Moreover, it will fix NetworkX problems, and it will standardize the output. \n+\n+Finally, it will modify Kruskal algorithm as follows:\n+\n+* now, the input can only be an undirected graph, so that the behavior is much more clear, and the documentation becomes much smaller;\n+* we moved the code to remove self-loops and multiple edges in a separate routine, because it will be used by Boost.\n+\n+This is a first step before the inclusion of Boost minimum spanning tree algorithms.\n``````\n",
    "created_at": "2015-07-16T08:24:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18906#issuecomment-337952",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -15,7 +15,7 @@
 [(0, 1, 1), (1, 2, 1)]
 
 ```
-This example also shows that the outputs are different. 
+This example also shows that the outputs are different.
 
 Moreover, NetworkX algorithm does not work:
 
@@ -42,4 +42,11 @@
 * if the function weight_function is None (default) and the graph is weighted, the edge weights are used;
 * otherwise, all weights are set to 1.
 
-Moreover, it will fix NetworkX problems, and it will standardize the output. This is a first step before the inclusion of Boost minimum spanning tree algorithms.
+Moreover, it will fix NetworkX problems, and it will standardize the output. 
+
+Finally, it will modify Kruskal algorithm as follows:
+
+* now, the input can only be an undirected graph, so that the behavior is much more clear, and the documentation becomes much smaller;
+* we moved the code to remove self-loops and multiple edges in a separate routine, because it will be used by Boost.
+
+This is a first step before the inclusion of Boost minimum spanning tree algorithms.
``````




---

archive/issue_comments_337953.json:
```json
{
    "body": "Changing commit from \"78e97957d2259cca983a725f9f14c8b4de8072c8\" to \"268662fa493378a6b221f77e35153e756e12d216\"",
    "created_at": "2015-07-16T08:26:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18906#issuecomment-337953",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "78e97957d2259cca983a725f9f14c8b4de8072c8" to "268662fa493378a6b221f77e35153e756e12d216"



---

archive/issue_comments_337954.json:
```json
{
    "body": "<a id='comment:12'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                          |                                                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|\n|[29346b2](https://github.com/sagemath/sagetrac-mirror/commit/29346b2a53f3c77a56d3ac864be47820ab32b460)|`Corrected behavior with digraphs, created routine simplify`|\n|[268662f](https://github.com/sagemath/sagetrac-mirror/commit/268662fa493378a6b221f77e35153e756e12d216)|`Removed some tests dealing with digraphs`|",
    "created_at": "2015-07-16T08:26:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18906#issuecomment-337954",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                          |                                                            |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|
|[29346b2](https://github.com/sagemath/sagetrac-mirror/commit/29346b2a53f3c77a56d3ac864be47820ab32b460)|`Corrected behavior with digraphs, created routine simplify`|
|[268662f](https://github.com/sagemath/sagetrac-mirror/commit/268662fa493378a6b221f77e35153e756e12d216)|`Removed some tests dealing with digraphs`|



---

archive/issue_comments_337955.json:
```json
{
    "body": "<a id='comment:13'></a>\nThere is no need for a new method `simplify` since we already have method `to_simple` in `generic_graph.py`.\nI however fully agree that the `to_simple` method is incorrect since it starts with `g=self.to_undirected()`... O_o\n\nThe best is to improve `to_simple`, and possibly also `allow_loops`, `allow_multiple_edges`, `remove_loops`, `multiple_edges`, etc. but first `to_simple`.",
    "created_at": "2015-07-16T11:55:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18906#issuecomment-337955",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:13'></a>
There is no need for a new method `simplify` since we already have method `to_simple` in `generic_graph.py`.
I however fully agree that the `to_simple` method is incorrect since it starts with `g=self.to_undirected()`... O_o

The best is to improve `to_simple`, and possibly also `allow_loops`, `allow_multiple_edges`, `remove_loops`, `multiple_edges`, etc. but first `to_simple`.



---

archive/issue_comments_337956.json:
```json
{
    "body": "<a id='comment:14'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                     |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------|\n|[c0a1803](https://github.com/sagemath/sagetrac-mirror/commit/c0a18032f71897554c59583314116c3c46c085dd)|`Modified allow_multiple_edges, and removed simplify`|",
    "created_at": "2015-07-16T13:36:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18906#issuecomment-337956",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                     |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------|
|[c0a1803](https://github.com/sagemath/sagetrac-mirror/commit/c0a18032f71897554c59583314116c3c46c085dd)|`Modified allow_multiple_edges, and removed simplify`|



---

archive/issue_comments_337957.json:
```json
{
    "body": "Changing commit from \"268662fa493378a6b221f77e35153e756e12d216\" to \"c0a18032f71897554c59583314116c3c46c085dd\"",
    "created_at": "2015-07-16T13:36:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18906#issuecomment-337957",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "268662fa493378a6b221f77e35153e756e12d216" to "c0a18032f71897554c59583314116c3c46c085dd"



---

archive/issue_comments_337958.json:
```json
{
    "body": "<a id='comment:15'></a>\n> There is no need for a new method `simplify` since we already have method `to_simple` in `generic_graph.py`.\n\n\nYou are right: I removed the method, and I call the `to_simple` routine.\n\n> I however fully agree that the `to_simple` method is incorrect since it starts with `g=self.to_undirected()`... O_o\n> \n> The best is to improve `to_simple`, and possibly also `allow_loops`, `allow_multiple_edges`, `remove_loops`, `multiple_edges`, etc. but first `to_simple`.\n\n\nI have improved `to_simple` and `allow_multiple_edges`: the user can choose if the graph is converted to an undirected graph, and which label should be kept (the minimum, the maximum, or any label).",
    "created_at": "2015-07-16T14:00:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18906#issuecomment-337958",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

<a id='comment:15'></a>
> There is no need for a new method `simplify` since we already have method `to_simple` in `generic_graph.py`.


You are right: I removed the method, and I call the `to_simple` routine.

> I however fully agree that the `to_simple` method is incorrect since it starts with `g=self.to_undirected()`... O_o
> 
> The best is to improve `to_simple`, and possibly also `allow_loops`, `allow_multiple_edges`, `remove_loops`, `multiple_edges`, etc. but first `to_simple`.


I have improved `to_simple` and `allow_multiple_edges`: the user can choose if the graph is converted to an undirected graph, and which label should be kept (the minimum, the maximum, or any label).



---

archive/issue_comments_337959.json:
```json
{
    "body": "Changing commit from \"c0a18032f71897554c59583314116c3c46c085dd\" to \"299bc40fe3ad77bf4374e9f2e6c37dfd7ebf371e\"",
    "created_at": "2015-07-16T14:00:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18906#issuecomment-337959",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c0a18032f71897554c59583314116c3c46c085dd" to "299bc40fe3ad77bf4374e9f2e6c37dfd7ebf371e"



---

archive/issue_comments_337960.json:
```json
{
    "body": "<a id='comment:16'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                    |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------|\n|[299bc40](https://github.com/sagemath/sagetrac-mirror/commit/299bc40fe3ad77bf4374e9f2e6c37dfd7ebf371e)|`Small modification`|",
    "created_at": "2015-07-16T14:00:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18906#issuecomment-337960",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                    |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------|
|[299bc40](https://github.com/sagemath/sagetrac-mirror/commit/299bc40fe3ad77bf4374e9f2e6c37dfd7ebf371e)|`Small modification`|



---

archive/issue_comments_337961.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-07-16T17:29:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18906#issuecomment-337961",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_337962.json:
```json
{
    "body": "<a id='comment:17'></a>\nIt's much better now.\nI ran successfully `sage -t -l src/sage/graphs/` (except for the error solved in #18911)\nThe doc builds properly and looks good.\nThanks.",
    "created_at": "2015-07-16T17:29:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18906#issuecomment-337962",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:17'></a>
It's much better now.
I ran successfully `sage -t -l src/sage/graphs/` (except for the error solved in #18911)
The doc builds properly and looks good.
Thanks.



---

archive/issue_comments_337963.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-07-27T15:15:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18906#issuecomment-337963",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_337964.json:
```json
{
    "body": "Changing branch from \"u/borassi/refactor_min_spanning_tree\" to \"299bc40fe3ad77bf4374e9f2e6c37dfd7ebf371e\"",
    "created_at": "2015-07-27T15:15:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18906#issuecomment-337964",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/borassi/refactor_min_spanning_tree" to "299bc40fe3ad77bf4374e9f2e6c37dfd7ebf371e"



---

archive/issue_events_059991.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-07-27T15:15:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/18906",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/18906#event-59991"
}
```
