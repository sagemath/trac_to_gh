# Issue 18906: Refactor min spanning tree

archive/issues_018669.json:
```json
{
    "assignees": [],
    "body": "Solve some strange behaviors / bugs in minimum spanning tree routines.\n\nUsually, if the graph is weighted, the weight is ignored, and the `weight_function` argument is used. If this argument is not provided, the (rather counterintuitive) behavior is to set all weights to 1 (so that any spanning tree can be outputted). However, if Kruskal algorithm is used, and `check` is set to `True`, then edge weights are used, instead.\n\n```\nsage: g = Graph(weighted=True)\nsage: g.add_edges([[0,1,1],[1,2,1],[2,0,10]])\nsage: g.min_spanning_tree(algorithm='Kruskal')\n[(0, 1, 1), (0, 2, 10)]\nsage: g.min_spanning_tree(algorithm='Prim_fringe')\n[(0, 1), (0, 2)]\nsage: g.min_spanning_tree(algorithm='Prim_edge')\n[(0, 1, 1), (0, 2, 10)]\nsage: sage: g.min_spanning_tree(algorithm='Kruskal', check=True)\n[(0, 1, 1), (1, 2, 1)]\n\n```\nThis example also shows that the outputs are different.\n\nMoreover, NetworkX algorithm does not work:\n\n```\nsage: g.min_spanning_tree(algorithm='NetworkX')\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-27-b461ae20ba97> in <module>()\n----> 1 g.min_spanning_tree(algorithm='NetworkX')\n\n/home/michele/Programmi/sage/local/lib/python2.7/site-packages/sage/graphs/generic_graph.pyc in min_spanning_tree(self, weight_function, algorithm, starting_vertex, check)\n   3433             import networkx\n   3434             G = networkx.Graph([(u, v, dict(weight=weight_function((u, v)))) for u, v, l in self.edge_iterator()])\n-> 3435             return list(networkx.mst(G))\n   3436         else:\n   3437             raise NotImplementedError(\"Minimum Spanning Tree algorithm '%s' is not implemented.\" % algorithm)\n\nTypeError: 'module' object is not callable\n\n```\nThis ticket will change this behavior, by defining a specific order in the choice of weights:\n\n* if the function weight_function is provided, it is used as default;\n* if the function weight_function is None (default) and the graph is weighted, the edge weights are used;\n* otherwise, all weights are set to 1.\n\nMoreover, it will fix NetworkX problems, and it will standardize the output. \n\nFinally, it will modify Kruskal algorithm as follows:\n\n* now, the input can only be an undirected graph, so that the behavior is much more clear, and the documentation becomes much smaller;\n* we moved the code to remove self-loops and multiple edges in a separate routine, because it will be used by Boost.\n\nThis is a first step before the inclusion of Boost minimum spanning tree algorithms.\n\nCC:  @nathanncohen @dcoudert\n\nComponent: **graph theory**\n\nKeywords: **Minimum spanning tree**\n\nAuthor: **Michele Borassi**\n\nBranch/Commit: **[`299bc40`](https://github.com/sagemath/sagetrac-mirror/commit/299bc40fe3ad77bf4374e9f2e6c37dfd7ebf371e)**\n\nReviewer: **David Coudert**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/18906_\n\n",
    "closed_at": "2015-07-27T15:15:49Z",
    "created_at": "2015-07-15T12:38:52Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Refactor min spanning tree",
    "type": "issue",
    "updated_at": "2015-07-27T15:15:49Z",
    "url": "https://github.com/sagemath/sage/issues/18906",
    "user": "https://github.com/sagetrac-borassi"
}
```
Solve some strange behaviors / bugs in minimum spanning tree routines.

Usually, if the graph is weighted, the weight is ignored, and the `weight_function` argument is used. If this argument is not provided, the (rather counterintuitive) behavior is to set all weights to 1 (so that any spanning tree can be outputted). However, if Kruskal algorithm is used, and `check` is set to `True`, then edge weights are used, instead.

```
sage: g = Graph(weighted=True)
sage: g.add_edges([[0,1,1],[1,2,1],[2,0,10]])
sage: g.min_spanning_tree(algorithm='Kruskal')
[(0, 1, 1), (0, 2, 10)]
sage: g.min_spanning_tree(algorithm='Prim_fringe')
[(0, 1), (0, 2)]
sage: g.min_spanning_tree(algorithm='Prim_edge')
[(0, 1, 1), (0, 2, 10)]
sage: sage: g.min_spanning_tree(algorithm='Kruskal', check=True)
[(0, 1, 1), (1, 2, 1)]

```
This example also shows that the outputs are different.

Moreover, NetworkX algorithm does not work:

```
sage: g.min_spanning_tree(algorithm='NetworkX')
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-27-b461ae20ba97> in <module>()
----> 1 g.min_spanning_tree(algorithm='NetworkX')

/home/michele/Programmi/sage/local/lib/python2.7/site-packages/sage/graphs/generic_graph.pyc in min_spanning_tree(self, weight_function, algorithm, starting_vertex, check)
   3433             import networkx
   3434             G = networkx.Graph([(u, v, dict(weight=weight_function((u, v)))) for u, v, l in self.edge_iterator()])
-> 3435             return list(networkx.mst(G))
   3436         else:
   3437             raise NotImplementedError("Minimum Spanning Tree algorithm '%s' is not implemented." % algorithm)

TypeError: 'module' object is not callable

```
This ticket will change this behavior, by defining a specific order in the choice of weights:

* if the function weight_function is provided, it is used as default;
* if the function weight_function is None (default) and the graph is weighted, the edge weights are used;
* otherwise, all weights are set to 1.

Moreover, it will fix NetworkX problems, and it will standardize the output. 

Finally, it will modify Kruskal algorithm as follows:

* now, the input can only be an undirected graph, so that the behavior is much more clear, and the documentation becomes much smaller;
* we moved the code to remove self-loops and multiple edges in a separate routine, because it will be used by Boost.

This is a first step before the inclusion of Boost minimum spanning tree algorithms.

CC:  @nathanncohen @dcoudert

Component: **graph theory**

Keywords: **Minimum spanning tree**

Author: **Michele Borassi**

Branch/Commit: **[`299bc40`](https://github.com/sagemath/sagetrac-mirror/commit/299bc40fe3ad77bf4374e9f2e6c37dfd7ebf371e)**

Reviewer: **David Coudert**

_Issue created by migration from https://trac.sagemath.org/ticket/18906_





---

archive/issue_events_265975.json:
```json
{
    "actor": "https://github.com/sagetrac-borassi",
    "created_at": "2015-07-15T12:38:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "milestone_number": null,
    "milestone_title": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18906#event-265975"
}
```



---

archive/issue_events_265976.json:
```json
{
    "actor": "https://github.com/sagetrac-borassi",
    "created_at": "2015-07-15T12:38:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18906#event-265976"
}
```



---

archive/issue_comments_264821.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,45 @@\n+Solve some strange behaviors / bugs in minimum spanning tree routines.\n \n+Usually, if the graph is weighted, the weight is ignored, and the `weight_function` argument is used. If this argument is not provided, the (rather counterintuitive) behavior is to set all weights to 1 (so that any spanning tree can be outputted). However, if Kruskal algorithm is used, and `check` is set to `True`, then edge weights are used, instead.\n+\n+```\n+sage: g = Graph(weighted=True)\n+sage: g.add_edges([[0,1,1],[1,2,1],[2,0,10]])\n+sage: g.min_spanning_tree(algorithm='Kruskal')\n+[(0, 1, 1), (0, 2, 10)]\n+sage: g.min_spanning_tree(algorithm='Prim_fringe')\n+[(0, 1), (0, 2)]\n+sage: g.min_spanning_tree(algorithm='Prim_edge')\n+[(0, 1, 1), (0, 2, 10)]\n+sage: sage: g.min_spanning_tree(algorithm='Kruskal', check=True)\n+[(0, 1, 1), (1, 2, 1)]\n+\n+```\n+This example also shows that the outputs are different. \n+\n+Moreover, NetworkX algorithm does not work:\n+\n+```\n+sage: g.min_spanning_tree(algorithm='NetworkX')\n+---------------------------------------------------------------------------\n+TypeError                                 Traceback (most recent call last)\n+<ipython-input-27-b461ae20ba97> in <module>()\n+----> 1 g.min_spanning_tree(algorithm='NetworkX')\n+\n+/home/michele/Programmi/sage/local/lib/python2.7/site-packages/sage/graphs/generic_graph.pyc in min_spanning_tree(self, weight_function, algorithm, starting_vertex, check)\n+   3433             import networkx\n+   3434             G = networkx.Graph([(u, v, dict(weight=weight_function((u, v)))) for u, v, l in self.edge_iterator()])\n+-> 3435             return list(networkx.mst(G))\n+   3436         else:\n+   3437             raise NotImplementedError(\"Minimum Spanning Tree algorithm '%s' is not implemented.\" % algorithm)\n+\n+TypeError: 'module' object is not callable\n+\n+```\n+This ticket will change this behavior, by defining a specific order in the choice of weights:\n+\n+* if the function weight_function is provided, it is used as default;\n+* if the function weight_function is None (default) and the graph is weighted, the edge weights are used;\n+* otherwise, all weights are set to 1.\n+\n+Moreover, it will fix NetworkX problems, and it will standardize the output. This is a first step before the inclusion of Boost minimum spanning tree algorithms.\n``````\n",
    "created_at": "2015-07-15T13:49:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18906#issuecomment-264821",
    "user": "https://github.com/sagetrac-borassi"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,45 @@
+Solve some strange behaviors / bugs in minimum spanning tree routines.
 
+Usually, if the graph is weighted, the weight is ignored, and the `weight_function` argument is used. If this argument is not provided, the (rather counterintuitive) behavior is to set all weights to 1 (so that any spanning tree can be outputted). However, if Kruskal algorithm is used, and `check` is set to `True`, then edge weights are used, instead.
+
+```
+sage: g = Graph(weighted=True)
+sage: g.add_edges([[0,1,1],[1,2,1],[2,0,10]])
+sage: g.min_spanning_tree(algorithm='Kruskal')
+[(0, 1, 1), (0, 2, 10)]
+sage: g.min_spanning_tree(algorithm='Prim_fringe')
+[(0, 1), (0, 2)]
+sage: g.min_spanning_tree(algorithm='Prim_edge')
+[(0, 1, 1), (0, 2, 10)]
+sage: sage: g.min_spanning_tree(algorithm='Kruskal', check=True)
+[(0, 1, 1), (1, 2, 1)]
+
+```
+This example also shows that the outputs are different. 
+
+Moreover, NetworkX algorithm does not work:
+
+```
+sage: g.min_spanning_tree(algorithm='NetworkX')
+---------------------------------------------------------------------------
+TypeError                                 Traceback (most recent call last)
+<ipython-input-27-b461ae20ba97> in <module>()
+----> 1 g.min_spanning_tree(algorithm='NetworkX')
+
+/home/michele/Programmi/sage/local/lib/python2.7/site-packages/sage/graphs/generic_graph.pyc in min_spanning_tree(self, weight_function, algorithm, starting_vertex, check)
+   3433             import networkx
+   3434             G = networkx.Graph([(u, v, dict(weight=weight_function((u, v)))) for u, v, l in self.edge_iterator()])
+-> 3435             return list(networkx.mst(G))
+   3436         else:
+   3437             raise NotImplementedError("Minimum Spanning Tree algorithm '%s' is not implemented." % algorithm)
+
+TypeError: 'module' object is not callable
+
+```
+This ticket will change this behavior, by defining a specific order in the choice of weights:
+
+* if the function weight_function is provided, it is used as default;
+* if the function weight_function is None (default) and the graph is weighted, the edge weights are used;
+* otherwise, all weights are set to 1.
+
+Moreover, it will fix NetworkX problems, and it will standardize the output. This is a first step before the inclusion of Boost minimum spanning tree algorithms.
``````




---

archive/issue_events_265977.json:
```json
{
    "actor": "https://github.com/sagetrac-borassi",
    "created_at": "2015-07-15T13:49:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18906#event-265977"
}
```



---

archive/issue_comments_264822.json:
```json
{
    "body": "Changed keywords from none to **Minimum spanning tree**",
    "created_at": "2015-07-15T13:49:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18906#issuecomment-264822",
    "user": "https://github.com/sagetrac-borassi"
}
```

Changed keywords from none to **Minimum spanning tree**



---

archive/issue_events_265978.json:
```json
{
    "actor": "https://github.com/sagetrac-borassi",
    "created_at": "2015-07-15T13:49:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18906#event-265978"
}
```



---

archive/issue_comments_264823.json:
```json
{
    "body": "Author: **Michele Borassi**",
    "created_at": "2015-07-15T13:49:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18906#issuecomment-264823",
    "user": "https://github.com/sagetrac-borassi"
}
```

Author: **Michele Borassi**



---

archive/issue_comments_264824.json:
```json
{
    "body": "Branch: **[u/borassi/refactor_min_spanning_tree](https://github.com/sagemath/sagetrac-mirror/tree/u/borassi/refactor_min_spanning_tree)**",
    "created_at": "2015-07-15T14:54:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18906#issuecomment-264824",
    "user": "https://github.com/sagetrac-borassi"
}
```

Branch: **[u/borassi/refactor_min_spanning_tree](https://github.com/sagemath/sagetrac-mirror/tree/u/borassi/refactor_min_spanning_tree)**



---

archive/issue_comments_264825.json:
```json
{
    "body": "Commit: **[`425eac7`](https://github.com/sagemath/sagetrac-mirror/commit/425eac73595d1472845a4c879dbbd1c474104316)**",
    "created_at": "2015-07-15T14:54:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18906#issuecomment-264825",
    "user": "https://github.com/sagetrac-borassi"
}
```

Commit: **[`425eac7`](https://github.com/sagemath/sagetrac-mirror/commit/425eac73595d1472845a4c879dbbd1c474104316)**



---

archive/issue_events_265979.json:
```json
{
    "actor": "https://github.com/sagetrac-borassi",
    "created_at": "2015-07-15T14:54:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18906#event-265979"
}
```



---

archive/issue_comments_264826.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/425eac73595d1472845a4c879dbbd1c474104316\"><code>425eac7</code></a></td><td><code>Corrected minimum spanning tree strange behaviors</code></td></tr></table>\n",
    "created_at": "2015-07-15T14:54:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18906#issuecomment-264826",
    "user": "https://github.com/sagetrac-borassi"
}
```

<div id="comment:4"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/425eac73595d1472845a4c879dbbd1c474104316"><code>425eac7</code></a></td><td><code>Corrected minimum spanning tree strange behaviors</code></td></tr></table>




---

archive/issue_comments_264827.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ace2f0d33337f08537a27b3b6cba8aff01b93576\"><code>ace2f0d</code></a></td><td><code>Improved documentation</code></td></tr></table>\n",
    "created_at": "2015-07-15T15:24:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18906#issuecomment-264827",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ace2f0d33337f08537a27b3b6cba8aff01b93576"><code>ace2f0d</code></a></td><td><code>Improved documentation</code></td></tr></table>




---

archive/issue_comments_264828.json:
```json
{
    "body": "Changed commit from **[`425eac7`](https://github.com/sagemath/sagetrac-mirror/commit/425eac73595d1472845a4c879dbbd1c474104316)** to **[`ace2f0d`](https://github.com/sagemath/sagetrac-mirror/commit/ace2f0d33337f08537a27b3b6cba8aff01b93576)**",
    "created_at": "2015-07-15T15:24:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18906#issuecomment-264828",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`425eac7`](https://github.com/sagemath/sagetrac-mirror/commit/425eac73595d1472845a4c879dbbd1c474104316)** to **[`ace2f0d`](https://github.com/sagemath/sagetrac-mirror/commit/ace2f0d33337f08537a27b3b6cba8aff01b93576)**



---

archive/issue_comments_264829.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI like this patch, and I didn't know that it had bugs.\n\nWouldn't it be nicer if edges were sorted (including end-vertices) ? You could use e.g. `sorted( (u,v,l) if u<v else (v,u,l) for u,v,l in edges )`. It adds some computation time, but that would give an additional value (i.e., we can assume that...). In fact, I assume that some algorithms are already doing it. For others, it might be sufficient to add a test before inserting in list `edges`.",
    "created_at": "2015-07-15T16:53:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18906#issuecomment-264829",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:6" align="right">comment:6</div>

I like this patch, and I didn't know that it had bugs.

Wouldn't it be nicer if edges were sorted (including end-vertices) ? You could use e.g. `sorted( (u,v,l) if u<v else (v,u,l) for u,v,l in edges )`. It adds some computation time, but that would give an additional value (i.e., we can assume that...). In fact, I assume that some algorithms are already doing it. For others, it might be sufficient to add a test before inserting in list `edges`.



---

archive/issue_comments_264830.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dd7e57592f99e76a1fc2768611a492b2ba3455a6\"><code>dd7e575</code></a></td><td><code>Sorted output</code></td></tr></table>\n",
    "created_at": "2015-07-15T17:16:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18906#issuecomment-264830",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dd7e57592f99e76a1fc2768611a492b2ba3455a6"><code>dd7e575</code></a></td><td><code>Sorted output</code></td></tr></table>




---

archive/issue_comments_264831.json:
```json
{
    "body": "Changed commit from **[`ace2f0d`](https://github.com/sagemath/sagetrac-mirror/commit/ace2f0d33337f08537a27b3b6cba8aff01b93576)** to **[`dd7e575`](https://github.com/sagemath/sagetrac-mirror/commit/dd7e57592f99e76a1fc2768611a492b2ba3455a6)**",
    "created_at": "2015-07-15T17:16:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18906#issuecomment-264831",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ace2f0d`](https://github.com/sagemath/sagetrac-mirror/commit/ace2f0d33337f08537a27b3b6cba8aff01b93576)** to **[`dd7e575`](https://github.com/sagemath/sagetrac-mirror/commit/dd7e57592f99e76a1fc2768611a492b2ba3455a6)**



---

archive/issue_comments_264832.json:
```json
{
    "body": "Reviewer: **David Coudert**",
    "created_at": "2015-07-15T21:27:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18906#issuecomment-264832",
    "user": "https://github.com/dcoudert"
}
```

Reviewer: **David Coudert**



---

archive/issue_comments_264833.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nGood to go.",
    "created_at": "2015-07-15T21:27:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18906#issuecomment-264833",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:8" align="right">comment:8</div>

Good to go.



---

archive/issue_events_265980.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2015-07-15T21:27:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18906#event-265980"
}
```



---

archive/issue_events_265981.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2015-07-15T21:27:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18906#event-265981"
}
```



---

archive/issue_comments_264834.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nHello!\n\nI just realized I need some more modifications on the code to deal with multiple edges, before implementing the Boost version. I will submit the new version as soon as possible!\n\nSee you,\n\nMichele",
    "created_at": "2015-07-16T06:31:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18906#issuecomment-264834",
    "user": "https://github.com/sagetrac-borassi"
}
```

<div id="comment:9" align="right">comment:9</div>

Hello!

I just realized I need some more modifications on the code to deal with multiple edges, before implementing the Boost version. I will submit the new version as soon as possible!

See you,

Michele



---

archive/issue_events_265982.json:
```json
{
    "actor": "https://github.com/sagetrac-borassi",
    "created_at": "2015-07-16T06:31:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18906#event-265982"
}
```



---

archive/issue_events_265983.json:
```json
{
    "actor": "https://github.com/sagetrac-borassi",
    "created_at": "2015-07-16T06:31:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18906#event-265983"
}
```



---

archive/issue_comments_264835.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/78e97957d2259cca983a725f9f14c8b4de8072c8\"><code>78e9795</code></a></td><td><code>Corrected behavior with digraphs, created routine simplify</code></td></tr></table>\n",
    "created_at": "2015-07-16T08:02:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18906#issuecomment-264835",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/78e97957d2259cca983a725f9f14c8b4de8072c8"><code>78e9795</code></a></td><td><code>Corrected behavior with digraphs, created routine simplify</code></td></tr></table>




---

archive/issue_comments_264836.json:
```json
{
    "body": "Changed commit from **[`dd7e575`](https://github.com/sagemath/sagetrac-mirror/commit/dd7e57592f99e76a1fc2768611a492b2ba3455a6)** to **[`78e9795`](https://github.com/sagemath/sagetrac-mirror/commit/78e97957d2259cca983a725f9f14c8b4de8072c8)**",
    "created_at": "2015-07-16T08:02:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18906#issuecomment-264836",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`dd7e575`](https://github.com/sagemath/sagetrac-mirror/commit/dd7e57592f99e76a1fc2768611a492b2ba3455a6)** to **[`78e9795`](https://github.com/sagemath/sagetrac-mirror/commit/78e97957d2259cca983a725f9f14c8b4de8072c8)**



---

archive/issue_comments_264837.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nHello!\n\nI have made two more changes to the Kruskal algorithm, specified in the description:\n\n* now, the input can only be an undirected graph, so that the  behavior is much more clear, and the documentation becomes much smaller;\n* we moved the code to remove self-loops and multiple edges in a separate routine, because it will be used by Boost.\n\nSorry for the \"late\" decision, but I realized this was better only after I submitted the previous code.\n\nMichele",
    "created_at": "2015-07-16T08:24:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18906#issuecomment-264837",
    "user": "https://github.com/sagetrac-borassi"
}
```

<div id="comment:11" align="right">comment:11</div>

Hello!

I have made two more changes to the Kruskal algorithm, specified in the description:

* now, the input can only be an undirected graph, so that the  behavior is much more clear, and the documentation becomes much smaller;
* we moved the code to remove self-loops and multiple edges in a separate routine, because it will be used by Boost.

Sorry for the "late" decision, but I realized this was better only after I submitted the previous code.

Michele



---

archive/issue_events_265984.json:
```json
{
    "actor": "https://github.com/sagetrac-borassi",
    "created_at": "2015-07-16T08:24:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18906#event-265984"
}
```



---

archive/issue_events_265985.json:
```json
{
    "actor": "https://github.com/sagetrac-borassi",
    "created_at": "2015-07-16T08:24:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18906#event-265985"
}
```



---

archive/issue_comments_264838.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -15,7 +15,7 @@\n [(0, 1, 1), (1, 2, 1)]\n \n ```\n-This example also shows that the outputs are different. \n+This example also shows that the outputs are different.\n \n Moreover, NetworkX algorithm does not work:\n \n@@ -42,4 +42,11 @@\n * if the function weight_function is None (default) and the graph is weighted, the edge weights are used;\n * otherwise, all weights are set to 1.\n \n-Moreover, it will fix NetworkX problems, and it will standardize the output. This is a first step before the inclusion of Boost minimum spanning tree algorithms.\n+Moreover, it will fix NetworkX problems, and it will standardize the output. \n+\n+Finally, it will modify Kruskal algorithm as follows:\n+\n+* now, the input can only be an undirected graph, so that the behavior is much more clear, and the documentation becomes much smaller;\n+* we moved the code to remove self-loops and multiple edges in a separate routine, because it will be used by Boost.\n+\n+This is a first step before the inclusion of Boost minimum spanning tree algorithms.\n``````\n",
    "created_at": "2015-07-16T08:24:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18906#issuecomment-264838",
    "user": "https://github.com/sagetrac-borassi"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -15,7 +15,7 @@
 [(0, 1, 1), (1, 2, 1)]
 
 ```
-This example also shows that the outputs are different. 
+This example also shows that the outputs are different.
 
 Moreover, NetworkX algorithm does not work:
 
@@ -42,4 +42,11 @@
 * if the function weight_function is None (default) and the graph is weighted, the edge weights are used;
 * otherwise, all weights are set to 1.
 
-Moreover, it will fix NetworkX problems, and it will standardize the output. This is a first step before the inclusion of Boost minimum spanning tree algorithms.
+Moreover, it will fix NetworkX problems, and it will standardize the output. 
+
+Finally, it will modify Kruskal algorithm as follows:
+
+* now, the input can only be an undirected graph, so that the behavior is much more clear, and the documentation becomes much smaller;
+* we moved the code to remove self-loops and multiple edges in a separate routine, because it will be used by Boost.
+
+This is a first step before the inclusion of Boost minimum spanning tree algorithms.
``````




---

archive/issue_comments_264839.json:
```json
{
    "body": "Changed commit from **[`78e9795`](https://github.com/sagemath/sagetrac-mirror/commit/78e97957d2259cca983a725f9f14c8b4de8072c8)** to **[`268662f`](https://github.com/sagemath/sagetrac-mirror/commit/268662fa493378a6b221f77e35153e756e12d216)**",
    "created_at": "2015-07-16T08:26:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18906#issuecomment-264839",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`78e9795`](https://github.com/sagemath/sagetrac-mirror/commit/78e97957d2259cca983a725f9f14c8b4de8072c8)** to **[`268662f`](https://github.com/sagemath/sagetrac-mirror/commit/268662fa493378a6b221f77e35153e756e12d216)**



---

archive/issue_comments_264840.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/29346b2a53f3c77a56d3ac864be47820ab32b460\"><code>29346b2</code></a></td><td><code>Corrected behavior with digraphs, created routine simplify</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/268662fa493378a6b221f77e35153e756e12d216\"><code>268662f</code></a></td><td><code>Removed some tests dealing with digraphs</code></td></tr></table>\n",
    "created_at": "2015-07-16T08:26:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18906#issuecomment-264840",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/29346b2a53f3c77a56d3ac864be47820ab32b460"><code>29346b2</code></a></td><td><code>Corrected behavior with digraphs, created routine simplify</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/268662fa493378a6b221f77e35153e756e12d216"><code>268662f</code></a></td><td><code>Removed some tests dealing with digraphs</code></td></tr></table>




---

archive/issue_comments_264841.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nThere is no need for a new method `simplify` since we already have method `to_simple` in `generic_graph.py`.\nI however fully agree that the `to_simple` method is incorrect since it starts with `g=self.to_undirected()`... O_o\n\nThe best is to improve `to_simple`, and possibly also `allow_loops`, `allow_multiple_edges`, `remove_loops`, `multiple_edges`, etc. but first `to_simple`.",
    "created_at": "2015-07-16T11:55:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18906#issuecomment-264841",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:13" align="right">comment:13</div>

There is no need for a new method `simplify` since we already have method `to_simple` in `generic_graph.py`.
I however fully agree that the `to_simple` method is incorrect since it starts with `g=self.to_undirected()`... O_o

The best is to improve `to_simple`, and possibly also `allow_loops`, `allow_multiple_edges`, `remove_loops`, `multiple_edges`, etc. but first `to_simple`.



---

archive/issue_comments_264842.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c0a18032f71897554c59583314116c3c46c085dd\"><code>c0a1803</code></a></td><td><code>Modified allow_multiple_edges, and removed simplify</code></td></tr></table>\n",
    "created_at": "2015-07-16T13:36:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18906#issuecomment-264842",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c0a18032f71897554c59583314116c3c46c085dd"><code>c0a1803</code></a></td><td><code>Modified allow_multiple_edges, and removed simplify</code></td></tr></table>




---

archive/issue_comments_264843.json:
```json
{
    "body": "Changed commit from **[`268662f`](https://github.com/sagemath/sagetrac-mirror/commit/268662fa493378a6b221f77e35153e756e12d216)** to **[`c0a1803`](https://github.com/sagemath/sagetrac-mirror/commit/c0a18032f71897554c59583314116c3c46c085dd)**",
    "created_at": "2015-07-16T13:36:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18906#issuecomment-264843",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`268662f`](https://github.com/sagemath/sagetrac-mirror/commit/268662fa493378a6b221f77e35153e756e12d216)** to **[`c0a1803`](https://github.com/sagemath/sagetrac-mirror/commit/c0a18032f71897554c59583314116c3c46c085dd)**



---

archive/issue_comments_264844.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\n> There is no need for a new method `simplify` since we already have method `to_simple` in `generic_graph.py`.\n\nYou are right: I removed the method, and I call the `to_simple` routine.\n\n> I however fully agree that the `to_simple` method is incorrect since it starts with `g=self.to_undirected()`... O_o\n> \n> The best is to improve `to_simple`, and possibly also `allow_loops`, `allow_multiple_edges`, `remove_loops`, `multiple_edges`, etc. but first `to_simple`.\n\nI have improved `to_simple` and `allow_multiple_edges`: the user can choose if the graph is converted to an undirected graph, and which label should be kept (the minimum, the maximum, or any label).",
    "created_at": "2015-07-16T14:00:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18906#issuecomment-264844",
    "user": "https://github.com/sagetrac-borassi"
}
```

<div id="comment:15" align="right">comment:15</div>

> There is no need for a new method `simplify` since we already have method `to_simple` in `generic_graph.py`.

You are right: I removed the method, and I call the `to_simple` routine.

> I however fully agree that the `to_simple` method is incorrect since it starts with `g=self.to_undirected()`... O_o
> 
> The best is to improve `to_simple`, and possibly also `allow_loops`, `allow_multiple_edges`, `remove_loops`, `multiple_edges`, etc. but first `to_simple`.

I have improved `to_simple` and `allow_multiple_edges`: the user can choose if the graph is converted to an undirected graph, and which label should be kept (the minimum, the maximum, or any label).



---

archive/issue_comments_264845.json:
```json
{
    "body": "Changed commit from **[`c0a1803`](https://github.com/sagemath/sagetrac-mirror/commit/c0a18032f71897554c59583314116c3c46c085dd)** to **[`299bc40`](https://github.com/sagemath/sagetrac-mirror/commit/299bc40fe3ad77bf4374e9f2e6c37dfd7ebf371e)**",
    "created_at": "2015-07-16T14:00:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18906#issuecomment-264845",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c0a1803`](https://github.com/sagemath/sagetrac-mirror/commit/c0a18032f71897554c59583314116c3c46c085dd)** to **[`299bc40`](https://github.com/sagemath/sagetrac-mirror/commit/299bc40fe3ad77bf4374e9f2e6c37dfd7ebf371e)**



---

archive/issue_comments_264846.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/299bc40fe3ad77bf4374e9f2e6c37dfd7ebf371e\"><code>299bc40</code></a></td><td><code>Small modification</code></td></tr></table>\n",
    "created_at": "2015-07-16T14:00:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18906#issuecomment-264846",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/299bc40fe3ad77bf4374e9f2e6c37dfd7ebf371e"><code>299bc40</code></a></td><td><code>Small modification</code></td></tr></table>




---

archive/issue_events_265986.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2015-07-16T17:29:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18906#event-265986"
}
```



---

archive/issue_events_265987.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2015-07-16T17:29:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18906#event-265987"
}
```



---

archive/issue_comments_264847.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nIt's much better now.\nI ran successfully `sage -t -l src/sage/graphs/` (except for the error solved in #18911)\nThe doc builds properly and looks good.\nThanks.",
    "created_at": "2015-07-16T17:29:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18906#issuecomment-264847",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:17" align="right">comment:17</div>

It's much better now.
I ran successfully `sage -t -l src/sage/graphs/` (except for the error solved in #18911)
The doc builds properly and looks good.
Thanks.



---

archive/issue_comments_264848.json:
```json
{
    "body": "Changed branch from **[u/borassi/refactor_min_spanning_tree](https://github.com/sagemath/sagetrac-mirror/tree/u/borassi/refactor_min_spanning_tree)** to **[`299bc40`](https://github.com/sagemath/sagetrac-mirror/commit/299bc40fe3ad77bf4374e9f2e6c37dfd7ebf371e)**",
    "created_at": "2015-07-27T15:15:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18906#issuecomment-264848",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/borassi/refactor_min_spanning_tree](https://github.com/sagemath/sagetrac-mirror/tree/u/borassi/refactor_min_spanning_tree)** to **[`299bc40`](https://github.com/sagemath/sagetrac-mirror/commit/299bc40fe3ad77bf4374e9f2e6c37dfd7ebf371e)**



---

archive/issue_events_265988.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-07-27T15:15:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18906#event-265988"
}
```



---

archive/issue_events_265989.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "4577fdef763eebe489c4cb7d91384ec421a66536",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-07-27T15:15:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/18906",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18906#event-265989"
}
```
