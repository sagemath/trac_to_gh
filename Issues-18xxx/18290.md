# Issue 18290: enhanced sets and cartesian products

archive/issues_018053.json:
```json
{
    "assignees": [],
    "body": "We implement several missing features of sets, enumerated sets and their cartesian products.\n\nWe add methods `is_empty` and `is_finite` to all sets.\n\nWe implement most of the methods for cartesian products of sets and enumerated sets (cardinality, rank/unrank, iteration).\n\nFor example, all commands below were hanging\n\n```\nsage: C = cartesian_product([Permutations(7), Permutations(9)])\nsage: C.cardinality()\n1828915200\nsage: C.unrank(143872745)\n([1, 5, 3, 6, 2, 4, 7], [5, 3, 2, 4, 7, 8, 9, 6, 1])\nsage: C.rank(_)\n143872745\nsage: C.random_element()   # random\n([4, 2, 6, 7, 1, 3, 5], [4, 7, 2, 8, 6, 3, 9, 5, 1])\n```\n\nCC:  @nathanncohen @nthiery\n\nKeywords: **cartesian_product**\n\nBranch: **[`707bf1e`](https://github.com/sagemath/sagetrac-mirror/commit/707bf1e529e397d10cf2d1e8401229d4f9cd1651)**\n\nReviewer: **Nicolas M. Thi\u00e9ry**\n\nAuthor: **Vincent Delecroix**\n\nComponent: **categories**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/18290_\n\n",
    "closed_at": "2015-05-13T20:11:33Z",
    "created_at": "2015-04-23T14:59:28Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20categories",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "enhanced sets and cartesian products",
    "type": "issue",
    "updated_at": "2015-05-27T13:57:43Z",
    "url": "https://github.com/sagemath/sage/issues/18290",
    "user": "https://github.com/videlec"
}
```
We implement several missing features of sets, enumerated sets and their cartesian products.

We add methods `is_empty` and `is_finite` to all sets.

We implement most of the methods for cartesian products of sets and enumerated sets (cardinality, rank/unrank, iteration).

For example, all commands below were hanging

```
sage: C = cartesian_product([Permutations(7), Permutations(9)])
sage: C.cardinality()
1828915200
sage: C.unrank(143872745)
([1, 5, 3, 6, 2, 4, 7], [5, 3, 2, 4, 7, 8, 9, 6, 1])
sage: C.rank(_)
143872745
sage: C.random_element()   # random
([4, 2, 6, 7, 1, 3, 5], [4, 7, 2, 8, 6, 3, 9, 5, 1])
```

CC:  @nathanncohen @nthiery

Keywords: **cartesian_product**

Branch: **[`707bf1e`](https://github.com/sagemath/sagetrac-mirror/commit/707bf1e529e397d10cf2d1e8401229d4f9cd1651)**

Reviewer: **Nicolas M. Thi√©ry**

Author: **Vincent Delecroix**

Component: **categories**

_Issue created by migration from https://trac.sagemath.org/ticket/18290_





---

archive/issue_events_261259.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-23T14:59:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "milestone_number": null,
    "milestone_title": "sage-6.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18290#event-261259"
}
```



---

archive/issue_events_261260.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-23T14:59:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20categories",
    "label_color": "0000ff",
    "label_name": "c: categories",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18290#event-261260"
}
```



---

archive/issue_events_261261.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-23T14:59:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18290#event-261261"
}
```



---

archive/issue_events_261262.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-23T14:59:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18290#event-261262"
}
```



---

archive/issue_events_261263.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-23T15:19:32Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "title_is": "cardinality and is_finite methods for CartesianProduct",
    "title_was": "cardinality/is_finite/__hash__ methods for CartesianProduct",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18290#event-261263"
}
```



---

archive/issue_comments_250997.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,2 @@\n-We implement three missing methods in `sage.sets.cartesian_product.CartesianProduct`:\n-- `__hash__`\n-- `is_finite`\n-- `cardinality`\n+We implement two missing methods in `sage.sets.cartesian_product.CartesianProduct`: `is_finite`\n+and `cardinality`.\n``````\n",
    "created_at": "2015-04-23T15:19:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-250997",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,2 @@
-We implement three missing methods in `sage.sets.cartesian_product.CartesianProduct`:
-- `__hash__`
-- `is_finite`
-- `cardinality`
+We implement two missing methods in `sage.sets.cartesian_product.CartesianProduct`: `is_finite`
+and `cardinality`.
``````




---

archive/issue_comments_250998.json:
```json
{
    "body": "Branch: **[u/vdelecroix/18290](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/18290)**",
    "created_at": "2015-04-23T15:19:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-250998",
    "user": "https://github.com/videlec"
}
```

Branch: **[u/vdelecroix/18290](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/18290)**



---

archive/issue_comments_250999.json:
```json
{
    "body": "Commit: **[`7311911`](https://github.com/sagemath/sagetrac-mirror/commit/7311911a110c5c3f0c30ab049dbaf66df7e080c7)**",
    "created_at": "2015-04-23T15:19:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-250999",
    "user": "https://github.com/videlec"
}
```

Commit: **[`7311911`](https://github.com/sagemath/sagetrac-mirror/commit/7311911a110c5c3f0c30ab049dbaf66df7e080c7)**



---

archive/issue_events_261264.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-23T15:19:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18290#event-261264"
}
```



---

archive/issue_comments_251000.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7311911a110c5c3f0c30ab049dbaf66df7e080c7\"><code>7311911</code></a></td><td><code>Trac 18290: cardinality/is_finite for cartesian products</code></td></tr></table>\n",
    "created_at": "2015-04-23T15:19:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251000",
    "user": "https://github.com/videlec"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7311911a110c5c3f0c30ab049dbaf66df7e080c7"><code>7311911</code></a></td><td><code>Trac 18290: cardinality/is_finite for cartesian products</code></td></tr></table>




---

archive/issue_comments_251001.json:
```json
{
    "body": "Changed keywords from none to **cartesian_product**",
    "created_at": "2015-04-23T15:19:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251001",
    "user": "https://github.com/videlec"
}
```

Changed keywords from none to **cartesian_product**



---

archive/issue_comments_251002.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,14 @@\n We implement two missing methods in `sage.sets.cartesian_product.CartesianProduct`: `is_finite`\n and `cardinality`.\n+\n+For example, the following was hanging\n+\n+```\n+sage: F = Permutations(10)\n+sage: cartesian_product([ZZ, Set(), ZZ]).is_finite()\n+True\n+sage: cartesian_product([F, F]).is_finite()\n+True\n+sage: cartesian_product([F, F]).cardinality()\n+13168189440000\n+```\n``````\n",
    "created_at": "2015-04-23T15:20:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251002",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,14 @@
 We implement two missing methods in `sage.sets.cartesian_product.CartesianProduct`: `is_finite`
 and `cardinality`.
+
+For example, the following was hanging
+
+```
+sage: F = Permutations(10)
+sage: cartesian_product([ZZ, Set(), ZZ]).is_finite()
+True
+sage: cartesian_product([F, F]).is_finite()
+True
+sage: cartesian_product([F, F]).cardinality()
+13168189440000
+```
``````




---

archive/issue_comments_251003.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nHMmmmmmmm `O_o`\n\nI don't know enough about this code to be helpful, but computing the cardinality of those sets seems to be too much. Isn't there a 'is_empty' functio in those classes that you could use instead? And you probably should call `is_empty` before the `is_finite`. Deciding emptyness is probably easier than deciding if it is finite?... Or perhaps not, in some weird cases? `^^;;`",
    "created_at": "2015-04-23T15:22:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251003",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:3" align="right">comment:3</div>

HMmmmmmmm `O_o`

I don't know enough about this code to be helpful, but computing the cardinality of those sets seems to be too much. Isn't there a 'is_empty' functio in those classes that you could use instead? And you probably should call `is_empty` before the `is_finite`. Deciding emptyness is probably easier than deciding if it is finite?... Or perhaps not, in some weird cases? `^^;;`



---

archive/issue_comments_251004.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,14 +1,2 @@\n We implement two missing methods in `sage.sets.cartesian_product.CartesianProduct`: `is_finite`\n and `cardinality`.\n-\n-For example, the following was hanging\n-\n-```\n-sage: F = Permutations(10)\n-sage: cartesian_product([ZZ, Set(), ZZ]).is_finite()\n-True\n-sage: cartesian_product([F, F]).is_finite()\n-True\n-sage: cartesian_product([F, F]).cardinality()\n-13168189440000\n-```\n``````\n",
    "created_at": "2015-04-23T15:22:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251004",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,14 +1,2 @@
 We implement two missing methods in `sage.sets.cartesian_product.CartesianProduct`: `is_finite`
 and `cardinality`.
-
-For example, the following was hanging
-
-```
-sage: F = Permutations(10)
-sage: cartesian_product([ZZ, Set(), ZZ]).is_finite()
-True
-sage: cartesian_product([F, F]).is_finite()
-True
-sage: cartesian_product([F, F]).cardinality()
-13168189440000
-```
``````




---

archive/issue_comments_251005.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,15 @@\n We implement two missing methods in `sage.sets.cartesian_product.CartesianProduct`: `is_finite`\n and `cardinality`.\n+\n+\n+For example, the following was hanging\n+\n+```\n+sage: F = Permutations(10)\n+sage: cartesian_product([ZZ, Set(), ZZ]).is_finite()\n+True\n+sage: cartesian_product([F, F]).is_finite()\n+True\n+sage: cartesian_product([F, F]).cardinality()\n+13168189440000\n+```\n``````\n",
    "created_at": "2015-04-23T15:23:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251005",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,15 @@
 We implement two missing methods in `sage.sets.cartesian_product.CartesianProduct`: `is_finite`
 and `cardinality`.
+
+
+For example, the following was hanging
+
+```
+sage: F = Permutations(10)
+sage: cartesian_product([ZZ, Set(), ZZ]).is_finite()
+True
+sage: cartesian_product([F, F]).is_finite()
+True
+sage: cartesian_product([F, F]).cardinality()
+13168189440000
+```
``````




---

archive/issue_comments_251006.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nOkayokay, it seems that there is no `is_empty` method. You ignore my comment above `^^;`",
    "created_at": "2015-04-23T15:28:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251006",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:5" align="right">comment:5</div>

Okayokay, it seems that there is no `is_empty` method. You ignore my comment above `^^;`



---

archive/issue_comments_251007.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@nathanncohen](#comment:3):\n> HMmmmmmmm `O_o`\n> \n> I don't know enough about this code to be helpful, but computing the cardinality of those sets seems to be too much. Isn't there a 'is_empty' functio in those classes that you could use instead? And you probably should call `is_empty` before the `is_finite`. Deciding emptyness is probably easier than deciding if it is finite?... Or perhaps not, in some weird cases? `^^;;`\n\nI would love to have an `is_empty`... What do you think to add it in the sets category (and set the default implementation to be `return not self.cardinality()`?). The code in this branch would be much cleaner with that.",
    "created_at": "2015-04-23T15:36:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251007",
    "user": "https://github.com/videlec"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@nathanncohen](#comment:3):
> HMmmmmmmm `O_o`
> 
> I don't know enough about this code to be helpful, but computing the cardinality of those sets seems to be too much. Isn't there a 'is_empty' functio in those classes that you could use instead? And you probably should call `is_empty` before the `is_finite`. Deciding emptyness is probably easier than deciding if it is finite?... Or perhaps not, in some weird cases? `^^;;`

I would love to have an `is_empty`... What do you think to add it in the sets category (and set the default implementation to be `return not self.cardinality()`?). The code in this branch would be much cleaner with that.



---

archive/issue_comments_251008.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\n> I would love to have an `is_empty`... What do you think to add it in the sets category (and set the default implementation to be `return not self.cardinality()`?). The code in this branch would be much cleaner with that.\n\nI'd say that it would be good, but I do not think that I should be patching category codes given my next-to-zero understanding of how it works.",
    "created_at": "2015-04-23T16:38:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251008",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:7" align="right">comment:7</div>

> I would love to have an `is_empty`... What do you think to add it in the sets category (and set the default implementation to be `return not self.cardinality()`?). The code in this branch would be much cleaner with that.

I'd say that it would be good, but I do not think that I should be patching category codes given my next-to-zero understanding of how it works.



---

archive/issue_events_261265.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-23T18:17:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18290#event-261265"
}
```



---

archive/issue_events_261266.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-23T18:17:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18290#event-261266"
}
```



---

archive/issue_comments_251009.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0de55d3765648006a85599140bfba83d175be8f2\"><code>0de55d3</code></a></td><td><code>Trac 18290: upgrade sets and cartesian products</code></td></tr></table>\n",
    "created_at": "2015-04-23T22:41:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251009",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0de55d3765648006a85599140bfba83d175be8f2"><code>0de55d3</code></a></td><td><code>Trac 18290: upgrade sets and cartesian products</code></td></tr></table>




---

archive/issue_comments_251010.json:
```json
{
    "body": "Changed commit from **[`7311911`](https://github.com/sagemath/sagetrac-mirror/commit/7311911a110c5c3f0c30ab049dbaf66df7e080c7)** to **[`0de55d3`](https://github.com/sagemath/sagetrac-mirror/commit/0de55d3765648006a85599140bfba83d175be8f2)**",
    "created_at": "2015-04-23T22:41:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251010",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7311911`](https://github.com/sagemath/sagetrac-mirror/commit/7311911a110c5c3f0c30ab049dbaf66df7e080c7)** to **[`0de55d3`](https://github.com/sagemath/sagetrac-mirror/commit/0de55d3765648006a85599140bfba83d175be8f2)**



---

archive/issue_events_261267.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-23T23:05:32Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "title_is": "enhanced sets and cartesian products",
    "title_was": "cardinality and is_finite methods for CartesianProduct",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18290#event-261267"
}
```



---

archive/issue_comments_251011.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,15 +1,19 @@\n-We implement two missing methods in `sage.sets.cartesian_product.CartesianProduct`: `is_finite`\n-and `cardinality`.\n+We implement several missing features of sets, enumerated sets and their cartesian products.\n \n+We add methods `is_empty` and `is_finite` to all sets.\n \n-For example, the following was hanging\n+We implement most of the methods for cartesian products of sets and enumerated sets (cardinality, rank/unrank, iteration).\n+\n+For example, all commands below were hanging\n \n ```\n-sage: F = Permutations(10)\n-sage: cartesian_product([ZZ, Set(), ZZ]).is_finite()\n-True\n-sage: cartesian_product([F, F]).is_finite()\n-True\n-sage: cartesian_product([F, F]).cardinality()\n-13168189440000\n+sage: C = cartesian_product([Permutations(7), Permutations(9)])\n+sage: C.cardinality()\n+1828915200\n+sage: C.unrank(143872745)\n+([1, 5, 3, 6, 2, 4, 7], [5, 3, 2, 4, 7, 8, 9, 6, 1])\n+sage: C.rank(_)\n+143872745\n+sage: C.random_element()   # random\n+([4, 2, 6, 7, 1, 3, 5], [4, 7, 2, 8, 6, 3, 9, 5, 1])\n ```\n``````\n",
    "created_at": "2015-04-23T23:05:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251011",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,15 +1,19 @@
-We implement two missing methods in `sage.sets.cartesian_product.CartesianProduct`: `is_finite`
-and `cardinality`.
+We implement several missing features of sets, enumerated sets and their cartesian products.
 
+We add methods `is_empty` and `is_finite` to all sets.
 
-For example, the following was hanging
+We implement most of the methods for cartesian products of sets and enumerated sets (cardinality, rank/unrank, iteration).
+
+For example, all commands below were hanging
 
 ```
-sage: F = Permutations(10)
-sage: cartesian_product([ZZ, Set(), ZZ]).is_finite()
-True
-sage: cartesian_product([F, F]).is_finite()
-True
-sage: cartesian_product([F, F]).cardinality()
-13168189440000
+sage: C = cartesian_product([Permutations(7), Permutations(9)])
+sage: C.cardinality()
+1828915200
+sage: C.unrank(143872745)
+([1, 5, 3, 6, 2, 4, 7], [5, 3, 2, 4, 7, 8, 9, 6, 1])
+sage: C.rank(_)
+143872745
+sage: C.random_element()   # random
+([4, 2, 6, 7, 1, 3, 5], [4, 7, 2, 8, 6, 3, 9, 5, 1])
 ```
``````




---

archive/issue_comments_251012.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b2e9e75805c8e1e80acc0f5b4fdf4d142a85fb4f\"><code>b2e9e75</code></a></td><td><code>Trac 18290: upgrade sets and cartesian products</code></td></tr></table>\n",
    "created_at": "2015-04-23T23:06:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251012",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b2e9e75805c8e1e80acc0f5b4fdf4d142a85fb4f"><code>b2e9e75</code></a></td><td><code>Trac 18290: upgrade sets and cartesian products</code></td></tr></table>




---

archive/issue_comments_251013.json:
```json
{
    "body": "Changed commit from **[`0de55d3`](https://github.com/sagemath/sagetrac-mirror/commit/0de55d3765648006a85599140bfba83d175be8f2)** to **[`b2e9e75`](https://github.com/sagemath/sagetrac-mirror/commit/b2e9e75805c8e1e80acc0f5b4fdf4d142a85fb4f)**",
    "created_at": "2015-04-23T23:06:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251013",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0de55d3`](https://github.com/sagemath/sagetrac-mirror/commit/0de55d3765648006a85599140bfba83d175be8f2)** to **[`b2e9e75`](https://github.com/sagemath/sagetrac-mirror/commit/b2e9e75805c8e1e80acc0f5b4fdf4d142a85fb4f)**



---

archive/issue_events_261268.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-23T23:06:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18290#event-261268"
}
```



---

archive/issue_events_261269.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-04-23T23:06:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18290#event-261269"
}
```



---

archive/issue_comments_251014.json:
```json
{
    "body": "Changed commit from **[`b2e9e75`](https://github.com/sagemath/sagetrac-mirror/commit/b2e9e75805c8e1e80acc0f5b4fdf4d142a85fb4f)** to **[`a55d69f`](https://github.com/sagemath/sagetrac-mirror/commit/a55d69f2b28da2fd4045e303582e3a3d57aebb50)**",
    "created_at": "2015-04-23T23:57:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251014",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b2e9e75`](https://github.com/sagemath/sagetrac-mirror/commit/b2e9e75805c8e1e80acc0f5b4fdf4d142a85fb4f)** to **[`a55d69f`](https://github.com/sagemath/sagetrac-mirror/commit/a55d69f2b28da2fd4045e303582e3a3d57aebb50)**



---

archive/issue_comments_251015.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a55d69f2b28da2fd4045e303582e3a3d57aebb50\"><code>a55d69f</code></a></td><td><code>Trac 18290: fix doctest in combinat/tutorial</code></td></tr></table>\n",
    "created_at": "2015-04-23T23:57:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251015",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a55d69f2b28da2fd4045e303582e3a3d57aebb50"><code>a55d69f</code></a></td><td><code>Trac 18290: fix doctest in combinat/tutorial</code></td></tr></table>




---

archive/issue_comments_251016.json:
```json
{
    "body": "Changed commit from **[`a55d69f`](https://github.com/sagemath/sagetrac-mirror/commit/a55d69f2b28da2fd4045e303582e3a3d57aebb50)** to **[`2eff7ab`](https://github.com/sagemath/sagetrac-mirror/commit/2eff7ab551257766a43b3d9fa7b1e637b07188b0)**",
    "created_at": "2015-04-24T00:05:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251016",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a55d69f`](https://github.com/sagemath/sagetrac-mirror/commit/a55d69f2b28da2fd4045e303582e3a3d57aebb50)** to **[`2eff7ab`](https://github.com/sagemath/sagetrac-mirror/commit/2eff7ab551257766a43b3d9fa7b1e637b07188b0)**



---

archive/issue_comments_251017.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2eff7ab551257766a43b3d9fa7b1e637b07188b0\"><code>2eff7ab</code></a></td><td><code>Trac 18290: fix doctest in categories/enumerated_sets.py</code></td></tr></table>\n",
    "created_at": "2015-04-24T00:05:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251017",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2eff7ab551257766a43b3d9fa7b1e637b07188b0"><code>2eff7ab</code></a></td><td><code>Trac 18290: fix doctest in categories/enumerated_sets.py</code></td></tr></table>




---

archive/issue_comments_251018.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nWasn't there just discussion about avoiding `self` in docstrings at sage-devel? I.e. \"Return the cardinality of self.\" should be \"of this set\" or \"of this cartesian product\".\n\nCode seems to work. Just to make sure: should `cartesian_product([ZZ, ZZ]).unrank(42)` work like for example `ZZ.unrank(42)` works?",
    "created_at": "2015-04-24T06:26:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251018",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:15" align="right">comment:15</div>

Wasn't there just discussion about avoiding `self` in docstrings at sage-devel? I.e. "Return the cardinality of self." should be "of this set" or "of this cartesian product".

Code seems to work. Just to make sure: should `cartesian_product([ZZ, ZZ]).unrank(42)` work like for example `ZZ.unrank(42)` works?



---

archive/issue_comments_251019.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@jm58660](#comment:15):\n> Wasn't there just discussion about avoiding `self` in docstrings at sage-devel? I.e. \"Return the cardinality of self.\" should be \"of this set\" or \"of this cartesian product\".\n\nI can do that.\n \n> Code seems to work. Just to make sure: should `cartesian_product([ZZ, ZZ]).unrank(42)` work like for example `ZZ.unrank(42)` works?\n\nNo. The order of enumeration of a cartesian products is lexicographic. So a cartesian product of infinite enumerated sets should even **not** be an enumerated set!",
    "created_at": "2015-04-24T08:40:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251019",
    "user": "https://github.com/videlec"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@jm58660](#comment:15):
> Wasn't there just discussion about avoiding `self` in docstrings at sage-devel? I.e. "Return the cardinality of self." should be "of this set" or "of this cartesian product".

I can do that.
 
> Code seems to work. Just to make sure: should `cartesian_product([ZZ, ZZ]).unrank(42)` work like for example `ZZ.unrank(42)` works?

No. The order of enumeration of a cartesian products is lexicographic. So a cartesian product of infinite enumerated sets should even **not** be an enumerated set!



---

archive/issue_comments_251020.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@jm58660](#comment:15):\n> Wasn't there just discussion about avoiding `self` in docstrings at sage-devel? I.e. \"Return the cardinality of self.\" should be \"of this set\" or \"of this cartesian product\".\n\nMy understanding of the discussion was that ``self`` should not be listed in the INPUT section (I actually need to argue further in the thread for I don't necessarily agree). I don't remember it being a problem elsewhere in the docstring. But I need to reread the thread.\n\nThat being said, \"of this cartesian product\" is a bit redundant but it reads nicely to remind the user of the context. So this can be a good idea here.\n\nCheers,\n                                        Nicolas",
    "created_at": "2015-04-24T08:49:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251020",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@jm58660](#comment:15):
> Wasn't there just discussion about avoiding `self` in docstrings at sage-devel? I.e. "Return the cardinality of self." should be "of this set" or "of this cartesian product".

My understanding of the discussion was that ``self`` should not be listed in the INPUT section (I actually need to argue further in the thread for I don't necessarily agree). I don't remember it being a problem elsewhere in the docstring. But I need to reread the thread.

That being said, "of this cartesian product" is a bit redundant but it reads nicely to remind the user of the context. So this can be a good idea here.

Cheers,
                                        Nicolas



---

archive/issue_comments_251021.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@videlec](#comment:16):\n\n> No. The order of enumeration of a cartesian products is lexicographic. So a cartesian product of infinite enumerated sets should even **not** be an enumerated set!\n\nOK. And after the patch at least `for x in cartesian_product([ZZ,ZZ])` gives an error.",
    "created_at": "2015-04-24T09:19:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251021",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@videlec](#comment:16):

> No. The order of enumeration of a cartesian products is lexicographic. So a cartesian product of infinite enumerated sets should even **not** be an enumerated set!

OK. And after the patch at least `for x in cartesian_product([ZZ,ZZ])` gives an error.



---

archive/issue_comments_251022.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@jm58660](#comment:18):\n> Replying to [@videlec](#comment:16):\n> \n> > No. The order of enumeration of a cartesian products is lexicographic. So a cartesian product of infinite enumerated sets should even **not** be an enumerated set!\n\n> \n> OK. And after the patch at least `for x in cartesian_product([ZZ,ZZ])` gives an error.\n\nI will add it to the doc with a comment.\n\nThough, for infinite sets, we can choose an other order for the enumeration. If so, we can put back this method and implement rank/unrank.",
    "created_at": "2015-04-24T09:24:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251022",
    "user": "https://github.com/videlec"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@jm58660](#comment:18):
> Replying to [@videlec](#comment:16):
> 
> > No. The order of enumeration of a cartesian products is lexicographic. So a cartesian product of infinite enumerated sets should even **not** be an enumerated set!

> 
> OK. And after the patch at least `for x in cartesian_product([ZZ,ZZ])` gives an error.

I will add it to the doc with a comment.

Though, for infinite sets, we can choose an other order for the enumeration. If so, we can put back this method and implement rank/unrank.



---

archive/issue_comments_251023.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/077f5dade93dc826563b4c0702eba6fdd6b8752e\"><code>077f5da</code></a></td><td><code>Trac 18290: better doc + remove duplications</code></td></tr></table>\n",
    "created_at": "2015-04-24T09:43:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251023",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/077f5dade93dc826563b4c0702eba6fdd6b8752e"><code>077f5da</code></a></td><td><code>Trac 18290: better doc + remove duplications</code></td></tr></table>




---

archive/issue_comments_251024.json:
```json
{
    "body": "Changed commit from **[`2eff7ab`](https://github.com/sagemath/sagetrac-mirror/commit/2eff7ab551257766a43b3d9fa7b1e637b07188b0)** to **[`077f5da`](https://github.com/sagemath/sagetrac-mirror/commit/077f5dade93dc826563b4c0702eba6fdd6b8752e)**",
    "created_at": "2015-04-24T09:43:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251024",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2eff7ab`](https://github.com/sagemath/sagetrac-mirror/commit/2eff7ab551257766a43b3d9fa7b1e637b07188b0)** to **[`077f5da`](https://github.com/sagemath/sagetrac-mirror/commit/077f5dade93dc826563b4c0702eba6fdd6b8752e)**



---

archive/issue_comments_251025.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/af59b416dde92020daf87f1ad4f83af92a8127ad\"><code>af59b41</code></a></td><td><code>Trac 18290: fix doctests</code></td></tr></table>\n",
    "created_at": "2015-04-24T16:36:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251025",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/af59b416dde92020daf87f1ad4f83af92a8127ad"><code>af59b41</code></a></td><td><code>Trac 18290: fix doctests</code></td></tr></table>




---

archive/issue_comments_251026.json:
```json
{
    "body": "Changed commit from **[`077f5da`](https://github.com/sagemath/sagetrac-mirror/commit/077f5dade93dc826563b4c0702eba6fdd6b8752e)** to **[`af59b41`](https://github.com/sagemath/sagetrac-mirror/commit/af59b416dde92020daf87f1ad4f83af92a8127ad)**",
    "created_at": "2015-04-24T16:36:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251026",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`077f5da`](https://github.com/sagemath/sagetrac-mirror/commit/077f5dade93dc826563b4c0702eba6fdd6b8752e)** to **[`af59b41`](https://github.com/sagemath/sagetrac-mirror/commit/af59b416dde92020daf87f1ad4f83af92a8127ad)**



---

archive/issue_comments_251027.json:
```json
{
    "body": "Changed commit from **[`af59b41`](https://github.com/sagemath/sagetrac-mirror/commit/af59b416dde92020daf87f1ad4f83af92a8127ad)** to **[`d5e9dde`](https://github.com/sagemath/sagetrac-mirror/commit/d5e9dde8502e52ce78249128502e80ccecef32de)**",
    "created_at": "2015-05-03T19:19:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251027",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`af59b41`](https://github.com/sagemath/sagetrac-mirror/commit/af59b416dde92020daf87f1ad4f83af92a8127ad)** to **[`d5e9dde`](https://github.com/sagemath/sagetrac-mirror/commit/d5e9dde8502e52ce78249128502e80ccecef32de)**



---

archive/issue_comments_251028.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/98d3e810552716e90e69abb2290292449e52b6ad\"><code>98d3e81</code></a></td><td><code>Trac 18290: upgrade sets and cartesian products</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d81c6a478d417008a8a5fbf6276f5876f8cf35e5\"><code>d81c6a4</code></a></td><td><code>Trac 18290: fix doctest in combinat/tutorial</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c92493117de8e7ed2a1a79e21a87c0389c5df445\"><code>c924931</code></a></td><td><code>Trac 18290: fix doctest in categories/enumerated_sets.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d5e9dde8502e52ce78249128502e80ccecef32de\"><code>d5e9dde</code></a></td><td><code>Trac 18290: fix doctests</code></td></tr></table>\n",
    "created_at": "2015-05-03T19:19:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251028",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/98d3e810552716e90e69abb2290292449e52b6ad"><code>98d3e81</code></a></td><td><code>Trac 18290: upgrade sets and cartesian products</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d81c6a478d417008a8a5fbf6276f5876f8cf35e5"><code>d81c6a4</code></a></td><td><code>Trac 18290: fix doctest in combinat/tutorial</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c92493117de8e7ed2a1a79e21a87c0389c5df445"><code>c924931</code></a></td><td><code>Trac 18290: fix doctest in categories/enumerated_sets.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d5e9dde8502e52ce78249128502e80ccecef32de"><code>d5e9dde</code></a></td><td><code>Trac 18290: fix doctests</code></td></tr></table>




---

archive/issue_comments_251029.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nRebased on sage-6.7.beta3\n\nVincent",
    "created_at": "2015-05-03T19:19:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251029",
    "user": "https://github.com/videlec"
}
```

<div id="comment:23" align="right">comment:23</div>

Rebased on sage-6.7.beta3

Vincent



---

archive/issue_comments_251030.json:
```json
{
    "body": "Changed commit from **[`d5e9dde`](https://github.com/sagemath/sagetrac-mirror/commit/d5e9dde8502e52ce78249128502e80ccecef32de)** to **[`58cf1d1`](https://github.com/sagemath/sagetrac-mirror/commit/58cf1d14f081a80f33ad1d25ff83ece40dfd6f27)**",
    "created_at": "2015-05-11T11:05:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251030",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d5e9dde`](https://github.com/sagemath/sagetrac-mirror/commit/d5e9dde8502e52ce78249128502e80ccecef32de)** to **[`58cf1d1`](https://github.com/sagemath/sagetrac-mirror/commit/58cf1d14f081a80f33ad1d25ff83ece40dfd6f27)**



---

archive/issue_comments_251031.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/10a0e97897b7fe0692e7130bcb377014d899610f\"><code>10a0e97</code></a></td><td><code>Trac 18290: upgrade sets and cartesian products</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f3ed5af691e5b38f4d1624ec9df519e291fe85e2\"><code>f3ed5af</code></a></td><td><code>Trac 18290: fix doctest in combinat/tutorial</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a0a282e3240243882d059c546f3624c24f26017a\"><code>a0a282e</code></a></td><td><code>Trac 18290: fix doctest in categories/enumerated_sets.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d0274b185c329af9b955e37df1cdb07df56a46d\"><code>6d0274b</code></a></td><td><code>Trac 18290: fix doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/58cf1d14f081a80f33ad1d25ff83ece40dfd6f27\"><code>58cf1d1</code></a></td><td><code>Trac 18290: docstring for functions written with im_func</code></td></tr></table>\n",
    "created_at": "2015-05-11T11:05:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251031",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/10a0e97897b7fe0692e7130bcb377014d899610f"><code>10a0e97</code></a></td><td><code>Trac 18290: upgrade sets and cartesian products</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f3ed5af691e5b38f4d1624ec9df519e291fe85e2"><code>f3ed5af</code></a></td><td><code>Trac 18290: fix doctest in combinat/tutorial</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a0a282e3240243882d059c546f3624c24f26017a"><code>a0a282e</code></a></td><td><code>Trac 18290: fix doctest in categories/enumerated_sets.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d0274b185c329af9b955e37df1cdb07df56a46d"><code>6d0274b</code></a></td><td><code>Trac 18290: fix doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/58cf1d14f081a80f33ad1d25ff83ece40dfd6f27"><code>58cf1d1</code></a></td><td><code>Trac 18290: docstring for functions written with im_func</code></td></tr></table>




---

archive/issue_comments_251032.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nRebased on sage-6.7.beta4 + docstring for the overriden functions in cartesian products of finite enumerated sets.",
    "created_at": "2015-05-11T11:07:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251032",
    "user": "https://github.com/videlec"
}
```

<div id="comment:25" align="right">comment:25</div>

Rebased on sage-6.7.beta4 + docstring for the overriden functions in cartesian products of finite enumerated sets.



---

archive/issue_comments_251033.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nIf I do\n\n```\nclass A:\n    f = B.f.im_func\n    \"\"\"\n    Some doctests\n\n    TESTS::\n\n       sage: 1+1\n       2\n    \"\"\"\n```\nthis is not considered as a doctest. But if instead I do\n\n```\nclass A:\n    my_string = (\n        r\"\"\"\n        TESTS::\n\n            sage: print \"Is this a test?\"\n            Of course not\n        \"\"\"\n    )\n```\nthen it is considered as a doctest!!\n\nThe algorithm used to detect doctests is clearly wrong!\n\nVincent",
    "created_at": "2015-05-11T12:22:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251033",
    "user": "https://github.com/videlec"
}
```

<div id="comment:26" align="right">comment:26</div>

If I do

```
class A:
    f = B.f.im_func
    """
    Some doctests

    TESTS::

       sage: 1+1
       2
    """
```
this is not considered as a doctest. But if instead I do

```
class A:
    my_string = (
        r"""
        TESTS::

            sage: print "Is this a test?"
            Of course not
        """
    )
```
then it is considered as a doctest!!

The algorithm used to detect doctests is clearly wrong!

Vincent



---

archive/issue_comments_251034.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nWhat should I do for the sake of that ticket?",
    "created_at": "2015-05-11T12:24:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251034",
    "user": "https://github.com/videlec"
}
```

<div id="comment:27" align="right">comment:27</div>

What should I do for the sake of that ticket?



---

archive/issue_comments_251035.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nHire an engineer.",
    "created_at": "2015-05-11T12:53:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251035",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:28" align="right">comment:28</div>

Hire an engineer.



---

archive/issue_comments_251036.json:
```json
{
    "body": "Changed branch from **[u/vdelecroix/18290](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/18290)** to **[u/nthiery/18290](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/18290)**",
    "created_at": "2015-05-12T15:59:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251036",
    "user": "https://github.com/nthiery"
}
```

Changed branch from **[u/vdelecroix/18290](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/18290)** to **[u/nthiery/18290](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/18290)**



---

archive/issue_comments_251037.json:
```json
{
    "body": "Changed commit from **[`58cf1d1`](https://github.com/sagemath/sagetrac-mirror/commit/58cf1d14f081a80f33ad1d25ff83ece40dfd6f27)** to **[`c5d6006`](https://github.com/sagemath/sagetrac-mirror/commit/c5d6006e918e9be9078d3ac1f16cbbdbe3aa8933)**",
    "created_at": "2015-05-12T16:18:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251037",
    "user": "https://github.com/nthiery"
}
```

Changed commit from **[`58cf1d1`](https://github.com/sagemath/sagetrac-mirror/commit/58cf1d14f081a80f33ad1d25ff83ece40dfd6f27)** to **[`c5d6006`](https://github.com/sagemath/sagetrac-mirror/commit/c5d6006e918e9be9078d3ac1f16cbbdbe3aa8933)**



---

archive/issue_comments_251038.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\n\n```\n  - EnumeratedSets.CartesianProducts.ParentMethods.__iter__\n    - Description of the iterator\n    - Use is_finite or in Sets.Finite? Or put the thing in CartesianProducts.Finite?\n  - unrank: ValueError or IndexError?\n  - Magmas.FinitelyGenerated.Unital.ParentMethods.is_empty:\n    could be an assignment for consistency?\n  - Groups.CartesianProducts.order:\n    could be an assignment for consistency?\n  - Sets.ParentMethods.random_element: use an abstract method + real doc\n  - random_element & friends: do we want to make a tuple before passing\n    the data to cartesian_product_of_elements?\n```\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c5d6006e918e9be9078d3ac1f16cbbdbe3aa8933\"><code>c5d6006</code></a></td><td><code>18290: proofreading</code></td></tr></table>\n",
    "created_at": "2015-05-12T16:18:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251038",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:30" align="right">comment:30</div>


```
  - EnumeratedSets.CartesianProducts.ParentMethods.__iter__
    - Description of the iterator
    - Use is_finite or in Sets.Finite? Or put the thing in CartesianProducts.Finite?
  - unrank: ValueError or IndexError?
  - Magmas.FinitelyGenerated.Unital.ParentMethods.is_empty:
    could be an assignment for consistency?
  - Groups.CartesianProducts.order:
    could be an assignment for consistency?
  - Sets.ParentMethods.random_element: use an abstract method + real doc
  - random_element & friends: do we want to make a tuple before passing
    the data to cartesian_product_of_elements?
```

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c5d6006e918e9be9078d3ac1f16cbbdbe3aa8933"><code>c5d6006</code></a></td><td><code>18290: proofreading</code></td></tr></table>




---

archive/issue_comments_251039.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nAs we discussed on the phone with Nicolas: I removed the abstract methods: `is_empty`, `is_finite` and `random_element` from `Sets`. For the first two, we might not want to call `cardinality` as this can easily lead to loop (e.g. #18400). As a rationale: a less specialized method should not try to call a more specialized one. For random_element: adding an optional abstract method would pollute the namespace.\n\n- unrank: `IndexError` is what is uniformly in `categories/*` and also in `combinat/cartesian_product`.\n- I moved is_empty from `Magmas.FinitelyGenerated.Unital.ParentMethods.is_empty` to `Magmas.Unital.is_empty` and everything looks fine\n- random_element: tuple removed\n\nI will add a second commit for `order` vs `cardinality` in `Groups`.\n\nVincent\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6389ff27cbcfcc1d51f2b6ad346c79ccd7eebbe3\"><code>6389ff2</code></a></td><td><code>Trac 18290: reviewer comments</code></td></tr></table>\n",
    "created_at": "2015-05-12T21:10:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251039",
    "user": "https://github.com/videlec"
}
```

<div id="comment:31" align="right">comment:31</div>

As we discussed on the phone with Nicolas: I removed the abstract methods: `is_empty`, `is_finite` and `random_element` from `Sets`. For the first two, we might not want to call `cardinality` as this can easily lead to loop (e.g. #18400). As a rationale: a less specialized method should not try to call a more specialized one. For random_element: adding an optional abstract method would pollute the namespace.

- unrank: `IndexError` is what is uniformly in `categories/*` and also in `combinat/cartesian_product`.
- I moved is_empty from `Magmas.FinitelyGenerated.Unital.ParentMethods.is_empty` to `Magmas.Unital.is_empty` and everything looks fine
- random_element: tuple removed

I will add a second commit for `order` vs `cardinality` in `Groups`.

Vincent

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6389ff27cbcfcc1d51f2b6ad346c79ccd7eebbe3"><code>6389ff2</code></a></td><td><code>Trac 18290: reviewer comments</code></td></tr></table>




---

archive/issue_comments_251040.json:
```json
{
    "body": "Changed branch from **[u/nthiery/18290](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/18290)** to **[public/18290](https://github.com/sagemath/sagetrac-mirror/tree/public/18290)**",
    "created_at": "2015-05-12T21:10:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251040",
    "user": "https://github.com/videlec"
}
```

Changed branch from **[u/nthiery/18290](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/18290)** to **[public/18290](https://github.com/sagemath/sagetrac-mirror/tree/public/18290)**



---

archive/issue_comments_251041.json:
```json
{
    "body": "Changed commit from **[`c5d6006`](https://github.com/sagemath/sagetrac-mirror/commit/c5d6006e918e9be9078d3ac1f16cbbdbe3aa8933)** to **[`6389ff2`](https://github.com/sagemath/sagetrac-mirror/commit/6389ff27cbcfcc1d51f2b6ad346c79ccd7eebbe3)**",
    "created_at": "2015-05-12T21:10:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251041",
    "user": "https://github.com/videlec"
}
```

Changed commit from **[`c5d6006`](https://github.com/sagemath/sagetrac-mirror/commit/c5d6006e918e9be9078d3ac1f16cbbdbe3aa8933)** to **[`6389ff2`](https://github.com/sagemath/sagetrac-mirror/commit/6389ff27cbcfcc1d51f2b6ad346c79ccd7eebbe3)**



---

archive/issue_comments_251042.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nHello,\n\nFor `cardinality` vs `order` here is the list of files I had to change:\n\n- algebras/quatalg/quaternion_algebra.py\n- algebras/steenrod/steenrod_algebra.py\n- groups/abelian_gps/abelian_group.py\n- groups/abelian_gps/dual_abelian_group.py\n- groups/additive_abelian/additive_abelian_group.py\n- groups/group.pyx\n- groups/indexed_free_group.py\n- groups/matrix_gps/coxeter_group.py\n- groups/old.pyx\n- groups/pari_group.py\n- groups/perm_gps/permgroup.py\n- groups/semimonomial_transformations/semimonomial_transformation_group.py\n- libs/coxeter3/coxeter.pyx\n- modular/abvar/finite_subgroup.py\n- modular/abvar/torsion_subgroup.py\n- modular/arithgroup/arithgroup_generic.py\n- modular/dirichlet.py\n- rings/contfrac.py\n- rings/finite_rings/finite_field_base.pyx\n- rings/finite_rings/finite_field_ext_pari.py\n- rings/finite_rings/finite_field_givaro.py\n- rings/finite_rings/finite_field_ntl_gf2e.py\n- rings/finite_rings/finite_field_prime_modn.py\n- rings/finite_rings/homset.py\n- rings/finite_rings/integer_mod_ring.py\n- rings/integer_ring.pyx\n- rings/number_field/galois_group.py\n- rings/number_field/morphism.py\n- rings/number_field/number_field.py\n- rings/polynomial/infinite_polynomial_ring.py\n- rings/polynomial/polynomial_quotient_ring.py\n- rings/qqbar.py\n- rings/rational_field.py\n- rings/ring.pyx\n\nIn particular it concerns not only groups but:\n- (multiplicative) groups\n- additive (Abelian) groups\n- rings\n\nAt least Sage is able to start but I am not sure it fits exactly the purpose of the ticket. If you do not mind I will push that commit in #18410.\n\nVincent",
    "created_at": "2015-05-12T22:13:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251042",
    "user": "https://github.com/videlec"
}
```

<div id="comment:32" align="right">comment:32</div>

Hello,

For `cardinality` vs `order` here is the list of files I had to change:

- algebras/quatalg/quaternion_algebra.py
- algebras/steenrod/steenrod_algebra.py
- groups/abelian_gps/abelian_group.py
- groups/abelian_gps/dual_abelian_group.py
- groups/additive_abelian/additive_abelian_group.py
- groups/group.pyx
- groups/indexed_free_group.py
- groups/matrix_gps/coxeter_group.py
- groups/old.pyx
- groups/pari_group.py
- groups/perm_gps/permgroup.py
- groups/semimonomial_transformations/semimonomial_transformation_group.py
- libs/coxeter3/coxeter.pyx
- modular/abvar/finite_subgroup.py
- modular/abvar/torsion_subgroup.py
- modular/arithgroup/arithgroup_generic.py
- modular/dirichlet.py
- rings/contfrac.py
- rings/finite_rings/finite_field_base.pyx
- rings/finite_rings/finite_field_ext_pari.py
- rings/finite_rings/finite_field_givaro.py
- rings/finite_rings/finite_field_ntl_gf2e.py
- rings/finite_rings/finite_field_prime_modn.py
- rings/finite_rings/homset.py
- rings/finite_rings/integer_mod_ring.py
- rings/integer_ring.pyx
- rings/number_field/galois_group.py
- rings/number_field/morphism.py
- rings/number_field/number_field.py
- rings/polynomial/infinite_polynomial_ring.py
- rings/polynomial/polynomial_quotient_ring.py
- rings/qqbar.py
- rings/rational_field.py
- rings/ring.pyx

In particular it concerns not only groups but:
- (multiplicative) groups
- additive (Abelian) groups
- rings

At least Sage is able to start but I am not sure it fits exactly the purpose of the ticket. If you do not mind I will push that commit in #18410.

Vincent



---

archive/issue_comments_251043.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@videlec](#comment:32):\n> For `cardinality` vs `order` here is the list of files I had to change:\n> ...\n\nThanks!\n\n> At least Sage is able to start but I am not sure it fits exactly the purpose of the ticket. If you do not mind I will push that commit in #18410.\n\n+1",
    "created_at": "2015-05-13T05:31:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251043",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@videlec](#comment:32):
> For `cardinality` vs `order` here is the list of files I had to change:
> ...

Thanks!

> At least Sage is able to start but I am not sure it fits exactly the purpose of the ticket. If you do not mind I will push that commit in #18410.

+1



---

archive/issue_comments_251044.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\n> As a rationale: a less specialized method should not try to call a more specialized one. \n\nAre the 'new rationales' just made up when we need them, or should we stop having `.cardinality()` call `__iter__`, as it is exactly the same pattern?\n\nNathann",
    "created_at": "2015-05-13T06:33:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251044",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:34" align="right">comment:34</div>

> As a rationale: a less specialized method should not try to call a more specialized one. 

Are the 'new rationales' just made up when we need them, or should we stop having `.cardinality()` call `__iter__`, as it is exactly the same pattern?

Nathann



---

archive/issue_comments_251045.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@nathanncohen](#comment:34):\n> > As a rationale: a less specialized method should not try to call a more specialized one. \n\n> \n> Are the 'new rationales' just made up when we need them, or should we stop having `.cardinality()` call `__iter__`, as it is exactly the same pattern?\n\n;-) I agree with Nathann that it is perhaps not the best default. Though, let us keep it independent of this ticket. My motivation for the rationale was to avoid loops like\n\n- is_finite asks cardinality\n- cardinality asks is_finite before starting to iterate\n\n(which is exactly the problem with projective scheme).\n\nOn the other hand, there is sometimes nothing else to do than going through the list of elements to get the cardinality. And you know it: `sage.graphs.independent_sets.IndependentSets`.\n\nVincent",
    "created_at": "2015-05-13T06:44:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251045",
    "user": "https://github.com/videlec"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@nathanncohen](#comment:34):
> > As a rationale: a less specialized method should not try to call a more specialized one. 

> 
> Are the 'new rationales' just made up when we need them, or should we stop having `.cardinality()` call `__iter__`, as it is exactly the same pattern?

;-) I agree with Nathann that it is perhaps not the best default. Though, let us keep it independent of this ticket. My motivation for the rationale was to avoid loops like

- is_finite asks cardinality
- cardinality asks is_finite before starting to iterate

(which is exactly the problem with projective scheme).

On the other hand, there is sometimes nothing else to do than going through the list of elements to get the cardinality. And you know it: `sage.graphs.independent_sets.IndependentSets`.

Vincent



---

archive/issue_comments_251046.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\n> On the other hand, there is sometimes nothing else to do than going through the list of elements to get the cardinality. And you know it: `sage.graphs.independent_sets.IndependentSets`.\n\nThe same goes for `is_empty`. Sometimes all you can do is run the enumeration.\n\nNathann",
    "created_at": "2015-05-13T06:49:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251046",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:36" align="right">comment:36</div>

> On the other hand, there is sometimes nothing else to do than going through the list of elements to get the cardinality. And you know it: `sage.graphs.independent_sets.IndependentSets`.

The same goes for `is_empty`. Sometimes all you can do is run the enumeration.

Nathann



---

archive/issue_comments_251047.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nReplying to [@nathanncohen](#comment:36):\n> > On the other hand, there is sometimes nothing else to do than going through the list of elements to get the cardinality. And you know it: `sage.graphs.independent_sets.IndependentSets`.\n\n> \n> The same goes for `is_empty`. Sometimes all you can do is run the enumeration.\n\nThis is exactly what I did:\n\n```\nclass EnumeratedSets:\n    class ParentMethods:\n        def is_empty(self):\n            try:\n                iter(self).next()\n            except StopIteration:\n                return False\n            else:\n                return True\n```",
    "created_at": "2015-05-13T06:55:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251047",
    "user": "https://github.com/videlec"
}
```

<div id="comment:37" align="right">comment:37</div>

Replying to [@nathanncohen](#comment:36):
> > On the other hand, there is sometimes nothing else to do than going through the list of elements to get the cardinality. And you know it: `sage.graphs.independent_sets.IndependentSets`.

> 
> The same goes for `is_empty`. Sometimes all you can do is run the enumeration.

This is exactly what I did:

```
class EnumeratedSets:
    class ParentMethods:
        def is_empty(self):
            try:
                iter(self).next()
            except StopIteration:
                return False
            else:
                return True
```



---

archive/issue_comments_251048.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nIn your earlier comment you explicitly said that you had removed the methods.",
    "created_at": "2015-05-13T06:57:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251048",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:38" align="right">comment:38</div>

In your earlier comment you explicitly said that you had removed the methods.



---

archive/issue_comments_251049.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nIsn't a semigroup a magma too ? `O_o`",
    "created_at": "2015-05-13T07:03:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251049",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:39" align="right">comment:39</div>

Isn't a semigroup a magma too ? `O_o`



---

archive/issue_comments_251050.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nReplying to [@nathanncohen](#comment:38):\n> In your earlier comment you explicitly said that you had removed the methods.\n\nI removed it at the level of `Sets` where the implementation was `return self.cardinality() == 0`. Not at the level of enumerated sets. So most parents will have a `is_empty`.",
    "created_at": "2015-05-13T07:07:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251050",
    "user": "https://github.com/videlec"
}
```

<div id="comment:40" align="right">comment:40</div>

Replying to [@nathanncohen](#comment:38):
> In your earlier comment you explicitly said that you had removed the methods.

I removed it at the level of `Sets` where the implementation was `return self.cardinality() == 0`. Not at the level of enumerated sets. So most parents will have a `is_empty`.



---

archive/issue_comments_251051.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nReplying to [@nathanncohen](#comment:39):\n> Isn't a semigroup a magma too ? `O_o`\n\nIt is!\n\n```\nsage: Semigroups().super_categories()\n[Category of magmas]\n```\nDid you found something strange?",
    "created_at": "2015-05-13T07:07:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251051",
    "user": "https://github.com/videlec"
}
```

<div id="comment:41" align="right">comment:41</div>

Replying to [@nathanncohen](#comment:39):
> Isn't a semigroup a magma too ? `O_o`

It is!

```
sage: Semigroups().super_categories()
[Category of magmas]
```
Did you found something strange?



---

archive/issue_comments_251052.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nI thought for a second that you had defined `is_empty` simultaneously for magmas and semigroups, but apparently I was wrong.",
    "created_at": "2015-05-13T07:11:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251052",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:42" align="right">comment:42</div>

I thought for a second that you had defined `is_empty` simultaneously for magmas and semigroups, but apparently I was wrong.



---

archive/issue_comments_251053.json:
```json
{
    "body": "<div id=\"comment:43\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a36b0f2960cc019e6267f47cd4f943788f54d220\"><code>a36b0f2</code></a></td><td><code>18290: proofreading</code></td></tr></table>\n",
    "created_at": "2015-05-13T07:40:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251053",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:43"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a36b0f2960cc019e6267f47cd4f943788f54d220"><code>a36b0f2</code></a></td><td><code>18290: proofreading</code></td></tr></table>




---

archive/issue_comments_251054.json:
```json
{
    "body": "Changed commit from **[`6389ff2`](https://github.com/sagemath/sagetrac-mirror/commit/6389ff27cbcfcc1d51f2b6ad346c79ccd7eebbe3)** to **[`a36b0f2`](https://github.com/sagemath/sagetrac-mirror/commit/a36b0f2960cc019e6267f47cd4f943788f54d220)**",
    "created_at": "2015-05-13T07:40:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251054",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6389ff2`](https://github.com/sagemath/sagetrac-mirror/commit/6389ff27cbcfcc1d51f2b6ad346c79ccd7eebbe3)** to **[`a36b0f2`](https://github.com/sagemath/sagetrac-mirror/commit/a36b0f2960cc019e6267f47cd4f943788f54d220)**



---

archive/issue_comments_251055.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nI have been through Vincent's last commit. I pushed too minor fixes. I have only a couple points I am wondering about:\n\n- Do we want to import ZZ in sage.sets.cartesian_product? Can we do a local import or lazy import? Or is it just ok?\n\n- In `CartesianProduct._cartesian_product_of_elements`, it would be semantically equivalent to use `zip` rather than `iterator.izip` since we anyway build a tuple right after. Just curious, is one faster than the other in practice (it's a tradeoff between building a list for nothing and using another layer of iterators)?\n\n- Please update the documentation of `Sets.CartesianProducts.ParentMethods._cartesian_product_of_elements` to specify that it should accept any iterable.\n\n- _sets_keys(): do we really want an `IntegerRange` rather than a `range`? I would imagine `IntegerRange` could be faster for containment testing and slower for iteration, so again a tradeoff.\n\nIn any cases, I'll be busy all day and don't have a strong opinion on either of the above points. So please make the choice you feel right. And then I consider this as good to go.\n\nThanks Vincent for all the work!",
    "created_at": "2015-05-13T07:50:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251055",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:44" align="right">comment:44</div>

I have been through Vincent's last commit. I pushed too minor fixes. I have only a couple points I am wondering about:

- Do we want to import ZZ in sage.sets.cartesian_product? Can we do a local import or lazy import? Or is it just ok?

- In `CartesianProduct._cartesian_product_of_elements`, it would be semantically equivalent to use `zip` rather than `iterator.izip` since we anyway build a tuple right after. Just curious, is one faster than the other in practice (it's a tradeoff between building a list for nothing and using another layer of iterators)?

- Please update the documentation of `Sets.CartesianProducts.ParentMethods._cartesian_product_of_elements` to specify that it should accept any iterable.

- _sets_keys(): do we really want an `IntegerRange` rather than a `range`? I would imagine `IntegerRange` could be faster for containment testing and slower for iteration, so again a tradeoff.

In any cases, I'll be busy all day and don't have a strong opinion on either of the above points. So please make the choice you feel right. And then I consider this as good to go.

Thanks Vincent for all the work!



---

archive/issue_comments_251056.json:
```json
{
    "body": "Changed commit from **[`a36b0f2`](https://github.com/sagemath/sagetrac-mirror/commit/a36b0f2960cc019e6267f47cd4f943788f54d220)** to **[`3cbe605`](https://github.com/sagemath/sagetrac-mirror/commit/3cbe605b2bfc2d91f878fbde04bebc78d14f4cb7)**",
    "created_at": "2015-05-13T08:46:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251056",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a36b0f2`](https://github.com/sagemath/sagetrac-mirror/commit/a36b0f2960cc019e6267f47cd4f943788f54d220)** to **[`3cbe605`](https://github.com/sagemath/sagetrac-mirror/commit/3cbe605b2bfc2d91f878fbde04bebc78d14f4cb7)**



---

archive/issue_comments_251057.json:
```json
{
    "body": "<div id=\"comment:45\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3cbe605b2bfc2d91f878fbde04bebc78d14f4cb7\"><code>3cbe605</code></a></td><td><code>Trac 18290: specifications in _cartesian_product_of_elements</code></td></tr></table>\n",
    "created_at": "2015-05-13T08:46:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251057",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:45"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3cbe605b2bfc2d91f878fbde04bebc78d14f4cb7"><code>3cbe605</code></a></td><td><code>Trac 18290: specifications in _cartesian_product_of_elements</code></td></tr></table>




---

archive/issue_comments_251058.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nReplying to [@nthiery](#comment:44):\n> I have been through Vincent's last commit. I pushed too minor fixes. I have only a couple points I am wondering about:\n> \n> - Do we want to import ZZ in sage.sets.cartesian_product? Can we do a local import or lazy import? Or is it just ok?\n\nI think this is fine. I would find it strange to import it in `sage.categories.*` but `sage.sets.cartesian_product` is lazily imported.\n\n> - In `CartesianProduct._cartesian_product_of_elements`, it would be semantically equivalent to use `zip` rather than `iterator.izip` since we anyway build a tuple right after. Just curious, is one faster than the other in practice (it's a tradeoff between building a list for nothing and using another layer of iterators)?\n\nHere you are not building the list from the pairs `(c,x)` but by calling `c(x)`. So I guess that `izip` is always better. From the timing it is very similar and `izip` gets much better as the size of the lists increase. (moreover in `Python 3` the `izip` is just deleted and `zip` becomes `izip`).\n\n> - Please update the documentation of `Sets.CartesianProducts.ParentMethods._cartesian_product_of_elements` to specify that it should accept any iterable.\n\ndone.\n\n> - _sets_keys(): do we really want an `IntegerRange` rather than a `range`? I would imagine `IntegerRange` could be faster for containment testing and slower for iteration, so again a tradeoff.\n\nIt is **much** faster for containment test and it is currently the only way it is used in `sage.sets.cartesian_product` (the method `cartesian_projection`). If the iteration is slower, then we should just make it faster in `IntegerRange`!\n\n>  In any cases, I'll be busy all day and don't have a strong opinion on either of the above points. So please make the choice you feel right. And then I consider this as good to go.\n\nI am running the long tests and will set positive review if everything is fine.\n\nVincent",
    "created_at": "2015-05-13T08:48:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251058",
    "user": "https://github.com/videlec"
}
```

<div id="comment:46" align="right">comment:46</div>

Replying to [@nthiery](#comment:44):
> I have been through Vincent's last commit. I pushed too minor fixes. I have only a couple points I am wondering about:
> 
> - Do we want to import ZZ in sage.sets.cartesian_product? Can we do a local import or lazy import? Or is it just ok?

I think this is fine. I would find it strange to import it in `sage.categories.*` but `sage.sets.cartesian_product` is lazily imported.

> - In `CartesianProduct._cartesian_product_of_elements`, it would be semantically equivalent to use `zip` rather than `iterator.izip` since we anyway build a tuple right after. Just curious, is one faster than the other in practice (it's a tradeoff between building a list for nothing and using another layer of iterators)?

Here you are not building the list from the pairs `(c,x)` but by calling `c(x)`. So I guess that `izip` is always better. From the timing it is very similar and `izip` gets much better as the size of the lists increase. (moreover in `Python 3` the `izip` is just deleted and `zip` becomes `izip`).

> - Please update the documentation of `Sets.CartesianProducts.ParentMethods._cartesian_product_of_elements` to specify that it should accept any iterable.

done.

> - _sets_keys(): do we really want an `IntegerRange` rather than a `range`? I would imagine `IntegerRange` could be faster for containment testing and slower for iteration, so again a tradeoff.

It is **much** faster for containment test and it is currently the only way it is used in `sage.sets.cartesian_product` (the method `cartesian_projection`). If the iteration is slower, then we should just make it faster in `IntegerRange`!

>  In any cases, I'll be busy all day and don't have a strong opinion on either of the above points. So please make the choice you feel right. And then I consider this as good to go.

I am running the long tests and will set positive review if everything is fine.

Vincent



---

archive/issue_comments_251059.json:
```json
{
    "body": "<div id=\"comment:47\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b308872002aea2434725669f1718dcbc336cfa8b\"><code>b308872</code></a></td><td><code>Trac 18290: fix doctests</code></td></tr></table>\n",
    "created_at": "2015-05-13T09:52:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251059",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:47"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b308872002aea2434725669f1718dcbc336cfa8b"><code>b308872</code></a></td><td><code>Trac 18290: fix doctests</code></td></tr></table>




---

archive/issue_comments_251060.json:
```json
{
    "body": "Changed commit from **[`3cbe605`](https://github.com/sagemath/sagetrac-mirror/commit/3cbe605b2bfc2d91f878fbde04bebc78d14f4cb7)** to **[`b308872`](https://github.com/sagemath/sagetrac-mirror/commit/b308872002aea2434725669f1718dcbc336cfa8b)**",
    "created_at": "2015-05-13T09:52:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251060",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3cbe605`](https://github.com/sagemath/sagetrac-mirror/commit/3cbe605b2bfc2d91f878fbde04bebc78d14f4cb7)** to **[`b308872`](https://github.com/sagemath/sagetrac-mirror/commit/b308872002aea2434725669f1718dcbc336cfa8b)**



---

archive/issue_comments_251061.json:
```json
{
    "body": "Changed commit from **[`b308872`](https://github.com/sagemath/sagetrac-mirror/commit/b308872002aea2434725669f1718dcbc336cfa8b)** to **[`707bf1e`](https://github.com/sagemath/sagetrac-mirror/commit/707bf1e529e397d10cf2d1e8401229d4f9cd1651)**",
    "created_at": "2015-05-13T09:53:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251061",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b308872`](https://github.com/sagemath/sagetrac-mirror/commit/b308872002aea2434725669f1718dcbc336cfa8b)** to **[`707bf1e`](https://github.com/sagemath/sagetrac-mirror/commit/707bf1e529e397d10cf2d1e8401229d4f9cd1651)**



---

archive/issue_comments_251062.json:
```json
{
    "body": "<div id=\"comment:48\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/707bf1e529e397d10cf2d1e8401229d4f9cd1651\"><code>707bf1e</code></a></td><td><code>Trac 18290: fix doctests</code></td></tr></table>\n",
    "created_at": "2015-05-13T09:53:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251062",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:48"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/707bf1e529e397d10cf2d1e8401229d4f9cd1651"><code>707bf1e</code></a></td><td><code>Trac 18290: fix doctests</code></td></tr></table>




---

archive/issue_comments_251063.json:
```json
{
    "body": "Reviewer: **Nicolas Thi\u00e9ry**",
    "created_at": "2015-05-13T11:00:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251063",
    "user": "https://github.com/videlec"
}
```

Reviewer: **Nicolas Thi√©ry**



---

archive/issue_events_261270.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-05-13T11:00:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18290#event-261270"
}
```



---

archive/issue_events_261271.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-05-13T11:00:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18290#event-261271"
}
```



---

archive/issue_events_261272.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-05-13T20:11:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18290#event-261272"
}
```



---

archive/issue_events_261273.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "04d92fac907eb19bbde42397d3d705e784fabefc",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-05-13T20:11:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/18290#event-261273"
}
```



---

archive/issue_comments_251064.json:
```json
{
    "body": "Changed branch from **[public/18290](https://github.com/sagemath/sagetrac-mirror/tree/public/18290)** to **[`707bf1e`](https://github.com/sagemath/sagetrac-mirror/commit/707bf1e529e397d10cf2d1e8401229d4f9cd1651)**",
    "created_at": "2015-05-13T20:11:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251064",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/18290](https://github.com/sagemath/sagetrac-mirror/tree/public/18290)** to **[`707bf1e`](https://github.com/sagemath/sagetrac-mirror/commit/707bf1e529e397d10cf2d1e8401229d4f9cd1651)**



---

archive/issue_comments_251065.json:
```json
{
    "body": "Changed reviewer from **Nicolas Thi\u00e9ry** to **Nicolas M. Thi\u00e9ry**",
    "created_at": "2015-05-27T13:57:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251065",
    "user": "https://github.com/jdemeyer"
}
```

Changed reviewer from **Nicolas Thi√©ry** to **Nicolas M. Thi√©ry**



---

archive/issue_comments_251066.json:
```json
{
    "body": "Changed commit from **[`707bf1e`](https://github.com/sagemath/sagetrac-mirror/commit/707bf1e529e397d10cf2d1e8401229d4f9cd1651)** to none",
    "created_at": "2015-05-27T13:57:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/18290",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/18290#issuecomment-251066",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[`707bf1e`](https://github.com/sagemath/sagetrac-mirror/commit/707bf1e529e397d10cf2d1e8401229d4f9cd1651)** to none
